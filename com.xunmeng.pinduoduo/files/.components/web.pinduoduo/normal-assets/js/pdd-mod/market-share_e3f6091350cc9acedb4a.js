(window.webpackJsonpForReact=window.webpackJsonpForReact||[]).push([[0],{"+qE3":function(e,t,r){"use strict";var n,a="object"==typeof Reflect?Reflect:null,i=a&&"function"==typeof a.apply?a.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var h=10;function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var a,i,s,o;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(a=u(e))>0&&s.length>a&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=s.length,o=h,console&&console.warn&&console.warn(o)}return e}function _(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=_.bind(n);return a.listener=r,n.wrapFn=a,a}function E(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):p(a,a.length)}function S(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");h=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var h=a[e];if(void 0===h)return!1;if("function"==typeof h)i(h,this,t);else{var u=h.length,c=p(h,u);for(r=0;r<u;++r)i(c[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,a,i,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return E(this,e,!0)},o.prototype.rawListeners=function(e){return E(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):S.call(e,t)},o.prototype.listenerCount=S,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},ANhw:function(e,t){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(r.charAt(a>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|r.indexOf(e.charAt(n))>>>6-2*a);return t}},e.exports=n},aCH8:function(e,t,r){var n,a,i,s,o;n=r("ANhw"),a=r("mmNF").utf8,i=r("g0l/"),s=r("mmNF").bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):a.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var r=n.bytesToWords(e),h=8*e.length,u=1732584193,c=-271733879,_=-1732584194,l=271733878,E=0;E<r.length;E++)r[E]=16711935&(r[E]<<8|r[E]>>>24)|4278255360&(r[E]<<24|r[E]>>>8);r[h>>>5]|=128<<h%32,r[14+(h+64>>>9<<4)]=h;var S=o._ff,p=o._gg,f=o._hh,T=o._ii;for(E=0;E<r.length;E+=16){var A=u,I=c,v=_,d=l;u=S(u,c,_,l,r[E+0],7,-680876936),l=S(l,u,c,_,r[E+1],12,-389564586),_=S(_,l,u,c,r[E+2],17,606105819),c=S(c,_,l,u,r[E+3],22,-1044525330),u=S(u,c,_,l,r[E+4],7,-176418897),l=S(l,u,c,_,r[E+5],12,1200080426),_=S(_,l,u,c,r[E+6],17,-1473231341),c=S(c,_,l,u,r[E+7],22,-45705983),u=S(u,c,_,l,r[E+8],7,1770035416),l=S(l,u,c,_,r[E+9],12,-1958414417),_=S(_,l,u,c,r[E+10],17,-42063),c=S(c,_,l,u,r[E+11],22,-1990404162),u=S(u,c,_,l,r[E+12],7,1804603682),l=S(l,u,c,_,r[E+13],12,-40341101),_=S(_,l,u,c,r[E+14],17,-1502002290),u=p(u,c=S(c,_,l,u,r[E+15],22,1236535329),_,l,r[E+1],5,-165796510),l=p(l,u,c,_,r[E+6],9,-1069501632),_=p(_,l,u,c,r[E+11],14,643717713),c=p(c,_,l,u,r[E+0],20,-373897302),u=p(u,c,_,l,r[E+5],5,-701558691),l=p(l,u,c,_,r[E+10],9,38016083),_=p(_,l,u,c,r[E+15],14,-660478335),c=p(c,_,l,u,r[E+4],20,-405537848),u=p(u,c,_,l,r[E+9],5,568446438),l=p(l,u,c,_,r[E+14],9,-1019803690),_=p(_,l,u,c,r[E+3],14,-187363961),c=p(c,_,l,u,r[E+8],20,1163531501),u=p(u,c,_,l,r[E+13],5,-1444681467),l=p(l,u,c,_,r[E+2],9,-51403784),_=p(_,l,u,c,r[E+7],14,1735328473),u=f(u,c=p(c,_,l,u,r[E+12],20,-1926607734),_,l,r[E+5],4,-378558),l=f(l,u,c,_,r[E+8],11,-2022574463),_=f(_,l,u,c,r[E+11],16,1839030562),c=f(c,_,l,u,r[E+14],23,-35309556),u=f(u,c,_,l,r[E+1],4,-1530992060),l=f(l,u,c,_,r[E+4],11,1272893353),_=f(_,l,u,c,r[E+7],16,-155497632),c=f(c,_,l,u,r[E+10],23,-1094730640),u=f(u,c,_,l,r[E+13],4,681279174),l=f(l,u,c,_,r[E+0],11,-358537222),_=f(_,l,u,c,r[E+3],16,-722521979),c=f(c,_,l,u,r[E+6],23,76029189),u=f(u,c,_,l,r[E+9],4,-640364487),l=f(l,u,c,_,r[E+12],11,-421815835),_=f(_,l,u,c,r[E+15],16,530742520),u=T(u,c=f(c,_,l,u,r[E+2],23,-995338651),_,l,r[E+0],6,-198630844),l=T(l,u,c,_,r[E+7],10,1126891415),_=T(_,l,u,c,r[E+14],15,-1416354905),c=T(c,_,l,u,r[E+5],21,-57434055),u=T(u,c,_,l,r[E+12],6,1700485571),l=T(l,u,c,_,r[E+3],10,-1894986606),_=T(_,l,u,c,r[E+10],15,-1051523),c=T(c,_,l,u,r[E+1],21,-2054922799),u=T(u,c,_,l,r[E+8],6,1873313359),l=T(l,u,c,_,r[E+15],10,-30611744),_=T(_,l,u,c,r[E+6],15,-1560198380),c=T(c,_,l,u,r[E+13],21,1309151649),u=T(u,c,_,l,r[E+4],6,-145523070),l=T(l,u,c,_,r[E+11],10,-1120210379),_=T(_,l,u,c,r[E+2],15,718787259),c=T(c,_,l,u,r[E+9],21,-343485551),u=u+A>>>0,c=c+I>>>0,_=_+v>>>0,l=l+d>>>0}return n.endian([u,c,_,l])})._ff=function(e,t,r,n,a,i,s){var o=e+(t&r|~t&n)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._gg=function(e,t,r,n,a,i,s){var o=e+(t&n|r&~n)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._hh=function(e,t,r,n,a,i,s){var o=e+(t^r^n)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._ii=function(e,t,r,n,a,i,s){var o=e+(r^(t|~n))+(a>>>0)+s;return(o<<i|o>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(o(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):n.bytesToHex(r)}},"g0l/":function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},iWIM:function(e,t,r){var n=r("n3AX");function a(t,r,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(r):i.value}},a(t,r,i||t)}e.exports=a},mmNF:function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},n3AX:function(e,t,r){var n=r("Nsbk");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},sXyB:function(e,t,r){var n=r("SksO");function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(t,r,s){return a()?e.exports=i=Reflect.construct:e.exports=i=function(e,t,r){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return r&&n(i,r.prototype),i},i.apply(null,arguments)}e.exports=i},zRS3:function(e,t,r){"use strict";r.r(t);var n=r("cDf5"),a=r.n(n),i=r("lwsE"),s=r.n(i),o=r("W8MJ"),h=r.n(o),u=r("mj+i"),c={DEFAULT:0,WECHAT_SESSION:1,WECHAT_TIMELINE:2,WEIBO:3,QQ_CHAT_SESSION:4,QQ_ZONE:5,TENCENT_WEIBO:6,WECHAT_SESSION_APP:7,WECHAT_TIMELINE_IMAGE:8,WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:9,WECHAT_SESSION_IMAGE:10,QQ_CHAT_SESSION_IMAGE:11,QQ_ZONE_IMAGE:12,WEIBO_IMAGE:13,WECHAT_TIMELINE_IMAGES:15,WECHAT_SESSION_TEXT_WITH_NO_SDK:16,WECHAT_SESSION_TEXT:17,IOS_SYSTEM_SHARE_CARD:18,WECHAT_SESSION_IMAGE_WITH_NO_SDK:19,WECHAT_SESSION_IMAGES_WITH_NO_SDK:20,WECHAT_TIMELINE_TEXT:21,SHARE_IMAGE_PASSIVELY:22,COPY_LINK:23,WECHAT_SESSION_MUSIC:24,WECHAT_SESSION_VIDEO:25,EXT_WECHAT_SESSION_CARD_SYSTEM:105,EXT_WECHAT_SESSION_IMAGE_SYSTEM:106,EXT_WECHAT_SESSION_CARD:107,EXT_WECHAT_TIMELINE_CARD:108,EXT_WECHAT_SESSION_IMAGE:109,EXT_WECHAT_TIMELINE_IMAGE:110,STAND_WECHAT_SESSION_CARD:200,STAND_WECHAT_SESSION_IMAGE:201,STAND_WECHAT_TIMELINE_CARD:202,STAND_WECHAT_TIMELINE_IMAGE:203,STAND_WECHAT_SESSION_TEXT:204,STAND_WECHAT_TIMELINE_TEXT:205,WECHAT_SESSION_CARD_WITH_NO_SDK:9996,WECHAT_TIMELINE_CARD_WITH_NO_SDK:9997,FRIENDS:9998,WECHAT_BIG_IMAGE:9999,PIN_TIMELINE:1e4},_={DEFAULT:0,ON_SHARE_TRIGGER:1,ON_SHARE_COMPLETED:2,SDK_INIT_FAILED:3,ON_SHARE_BUTTON_CLICKED:4,ON_SHARE_PREPARE:5,ON_SDK_READY:6,ON_SHARE_INTERRUPT:7,SHARE_LIMIT_LOAD_FAIL:8,PERFORM_LOG_FAILED:9,SHARE_REACH_LIMIT:10},l=r("o0o1"),E=r.n(l),S=r("yXPU"),p=r.n(S),f=r("KoDT"),T=r("iWIM"),A=r.n(T),I=r("7W2i"),v=r.n(I),d=r("a1gu"),y=r.n(d),m=r("Nsbk"),C=r.n(m),g=r("h3qu"),O=r("MpJ2"),R=r("+qE3"),N={DEFAULT:0,SHARE_PARAMS_NOT_VALID:1,SHARE_TYPE_DISABLED:2,SHARE_TYPE_NOT_FOUND:3,SHARE_ACTION_DISABLE:4,SHARE_STATUS_ILLEGAL:5,SHARE_NOT_SUPPORTED:6,SHARE_LIMITER_NOT_INIT:7},L=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.errorCode=t.errorCode||N.DEFAULT,this.message=t.message||""};L.create=function(e){return new L({errorCode:e})},L.ShareErrorCode=N;var D=L,M=r("fkZF"),P=r("8wto"),H=r("J4zp"),b=r.n(H),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s()(this,e),this.hostname="",this.origin="",this.pagename="",this.pathname="",this.port=0,this.protocol="",this.query={},this.search="",this.hashTag="",this.parseURL(t)}return h()(e,[{key:"parseURL",value:function(e){var t=e.split("#"),r=t[0]||"";this.hashTag=t[1]||"";var n=r.split("?"),a=n[0]||"",i=n[1]||"";this.search="?"+i,this.query=(i.split("&")||[]).reduce((function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=n.split("=");try{t=decodeURIComponent(a[0]||""),r=decodeURIComponent(a[1]||"")}catch(e){t=""}return t&&(e[t]=r),e}),{});var s=a.match(/^([a-zA-Z]+:)\/\//)||[];this.protocol=s[1]||"";s[0]&&(a=a.replace(s[0],""));var o=a.match(/^((:?[a-zA-Z0-9](:?[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6})(:\d+)?\//)||[],h=(o[0]||"").replace(/\//g,"").split(":"),u=b()(h,2),c=u[0],_=u[1];this.hostname=c,this.port=parseInt(_||0,10),o[0]&&(a=a.replace(o[0],"")),this.protocol&&this.hostname&&(this.origin="".concat(this.protocol,"//").concat(this.hostname)),this.pathname="/"+a.replace(/^\//,"");var l=a.match(/\/?(\w+\.html)$/)||[];this.pagename=l[1]||""}}]),e}();function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return 0===window.location.href.indexOf("amcomponent://")&&(r=r||new k(t).origin),t=Object(u.a)(e,Object(u.h)(t||location.href)),r?(r=r.replace(/\/$/g,""),"".concat(r).concat(Object(u.d)(t))):t}var U={DEFAULT:0,REDIRECT:1,SERVER_DOMAIN:2,SERVER_CONTROL:3,SERVER_SHORT_URL:4,RAW:5,SERVER_TINY_DOMAIN:6,SERVER_DOMAIN_BASE64:7,DOMAIN_REPLACE:8,MAGIC_TRACE:9,MAGIC_TRACE_DYNAMIC:10,SERVER_SHORT_URL_WITH_CACHE:11,SERVER_TP_APP:12};function w(e){return[U.SERVER_CONTROL,U.SERVER_SHORT_URL,U.SERVER_TINY_DOMAIN,U.SERVER_DOMAIN_BASE64,U.DOMAIN_REPLACE,U.SERVER_SHORT_URL_WITH_CACHE].indexOf(e)>=0}function x(e){return[U.SERVER_CONTROL,U.SERVER_TINY_DOMAIN,U.SERVER_DOMAIN_BASE64,U.DOMAIN_REPLACE].indexOf(e)>=0}function j(e){return[U.SERVER_SHORT_URL,U.SERVER_SHORT_URL_WITH_CACHE].indexOf(e)>=0}var G=U,F="undefined"!=typeof window;function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(/^http:?/)?e:Object(f.a)().isNativePlatform||!F?"http://".concat(e):location.protocol?"".concat(location.protocol,"//").concat(e):void 0}var Q={DEFAULT:"",COMMAND:"kouling",IMAGE:"image",TEXT:"text",CARD:"card",WXAPP_CARD:"custom_card",COPY_LINK:"text"},K={DEFAULT:"",SYSTEM:"system",SDK:"sdk",MANUAL:"manual",EXTENSION:"extension",STAND:"stand"},X=r("uf4C"),Y=r("rIj9");function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new k(e.shareURL).query||{};return{refer_share_id:t.refer_share_id,refer_share_uid:t.refer_share_uid,refer_share_channel:t.refer_share_channel}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/^(?:https?:?)?\/\//,"https://")}var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.miniObjectPath,r=new k(t),n=new k(r.query.target_page||""),a=n.query||{},i=q(e);if(a.specialUrl||a.src)return a.src?a.src=W(i,a.src):a.src=V(e.shareURL),"".concat(r.pathname,"?").concat(Object(u.b)(Object.assign({},r.query,{target_page:"".concat(n.pathname,"?").concat(Object(u.b)(a))})));if(a.jump_url||a.launch_url){if(a.jump_url){var s=new k(a.jump_url);if(!s.hostname){var o=s.query;o.specialUrl&&(o.src?o.src=W(i,o.src):o.src=V(e.shareURL),a.jump_url="".concat(s.pathname,"?").concat(Object(u.b)(o)))}}return a.launch_url?a.launch_url=W(i,a.launch_url):a.launch_url=e.shareURL,"".concat(r.pathname,"?").concat(Object(u.b)(Object.assign({},r.query,{target_page:"".concat(n.pathname,"?").concat(Object(u.b)(a))})))}return r.hostname||n.hostname||!r.query.target_page?"".concat(r.pathname,"?").concat(Object(u.b)(Object.assign({},r.query,i))):"".concat(r.pathname,"?").concat(Object(u.b)(Object.assign({},r.query,{target_page:"".concat(n.pathname,"?").concat(Object(u.b)(Object.assign(a,i)))})))},z="weixin",J="link",$="h5",ee="ios",te="android",re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(Y.a)({pageInfo:{pageId:Object(X.c)()}},{defaultErrorHandler:function(e){}}),n={};n.url=t.shareURL||"",n.activity=t.marketActivityID||0,n.platform=t.platform||"",n.share_refer=q({shareURL:t.shareURL}),n.page_sn=Object(X.e)(),t.payloadMixin&&"object"===a()(t.payloadMixin)&&(n=Object.assign(n,t.payloadMixin));var i=t.urlAlias||"url_code",s=n[i];if(s&&"string"==typeof s){var o=new k(s).query||{};Object.assign(o,n.share_refer),n[i]="".concat(s.split("?")[0]||"","?").concat(Object(u.b)(o))}var h="api/flow/audience/activity/domain/weixin";return t.shareDomainType===J?h=t.shortURLApi?t.shortURLApi:t.shortCommandApi?t.shortCommandApi:"api/flow/audience/activity/domain/short_url":t.domainURLApi&&(h=t.domainURLApi),("post"===e.toLowerCase()?r.post(h,n):r.get(h,{params:n})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.shortCommandApi?{shareText:e.share_text||""}:{domain:e.domain,openAppID:e.open_app_id||"",shortURL:e.short_url||"",shareText:e.share_text||""}}),(function(){return null}))},ne=[c.QQ_CHAT_SESSION,c.QQ_ZONE,c.QQ_CHAT_SESSION_IMAGE,c.QQ_ZONE_IMAGE],ae=function(e){return ne.indexOf(e)>=0},ie=r("lSNA"),se=r.n(ie),oe="api/flow/audience/share/trace",he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(Y.a)({pageInfo:{pageId:Object(X.c)()}},{defaultErrorHandler:function(e){}}),n={};return n.origin=t.platform||"",n.share_params=t.shareParams||{},n.page_sn=t.pageSn||Object(X.e)()+"",n.page_info=t.pageInfo||{page_name:Object(X.d)(),page_url:location&&location.href},t.payloadMixin&&"object"===a()(t.payloadMixin)&&(n=Object.assign(n,t.payloadMixin)),("post"===e.toLowerCase()?r.post(oe,n):r.get(oe,{params:n})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.magic_trace}))},ue="CIPHER_TEXT",ce="LINK",_e="DOMAIN",le="NORMAL",Ee="IMAGE";function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title,message:e.message,thumb_url:e.thumbnailURL,share_url:e.shareURL}}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return j(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===Q.COMMAND?ue:j(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===Q.TEXT?ce:x(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===Q.CARD?_e:e.getShareForm(t)===Q.IMAGE?Ee:le}function fe(){var e=Object(f.a)();return e.isWeChatMiniProgram?e.WxApp:e.isWeChatPlatform?e.WeChat:e.isQQPlatform?e.QQ:e.isNativePlatform||e.isTinyNativePlatform?"h5":""}function Te(e,t){if(!(t&&t.key&&t.value&&t.trace))return e;var r=new k(e),n=t.key,a=t.value,i=t.trace;return W(Object.assign(se()({},n,a),r.query),i,r.origin)}var Ae=function(){function e(){s()(this,e),this._isInited=!1,this._magicTrace=null}return h()(e,[{key:"build",value:function(e){var t=e.magicTrace,r=void 0===t?{}:t;return this._isInited||r.key&&r.value&&r.trace&&(this._magicTrace=r,this._isInited=!0),Promise.resolve()}},{key:"isInited",value:function(){return this._isInited}},{key:"transform",value:function(e){return Te(e,this._magicTrace)}},{key:"transformByShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return he("post",{platform:fe(),shareParams:Se(e),payloadMixin:e.payloadMixin}).then((function(t){return Te(e.shareURL,t)}))}}]),e}(),Ie=null;Ae.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ie||(Ie=new Ae(e)),Ie};var ve=Ae,de=r("aCH8"),ye=r.n(de);function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareURL,r=W({refer_share_id:null,refer_share_uid:null,refer_share_channel:null},t),n=e.payloadMixin||{},a=JSON.stringify(n);return ye()(r+a)}var Ce=r("sXyB"),ge=r.n(Ce),Oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this._cacheMap={},this._cacheLimit=t.cacheLimit||20}return h()(e,[{key:"getResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._cacheMap[e];return t?t.response:null}},{key:"cacheResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(e&&t){var r=Object.keys(this._cacheMap).length||0;if(!(r>=this._cacheLimit)){var n=this._cacheMap[e];n?n.response=t:this._cacheMap[e]={response:t,count:1,trigger:!1,complete:!1}}}}},{key:"_write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=this._cacheMap[t]||{};n[e]=r,this._cacheMap[t]=n}},{key:"_read",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(this._cacheMap[t]||{})[e]}},{key:"getCountByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("count",e)||0}},{key:"increaseCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._write("count",e,this.getCountByHash()+1)}},{key:"getShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("share_id",e)}},{key:"setShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._write("share_id",e,t)}}]),e}(),Re=null;function Ne(){return Re||(Re=ge()(Oe,Array.prototype.slice.call(arguments))),Re}var Le="api/flow/audience/share/types",De=function(e){return Object(f.a)().version},Me=null,Pe=function e(){s()(this,e)};function He(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=De();return Object(f.a)().platform===g.a.PddIOS&&Object(g.c)(r,e)>=0||Object(f.a)().platform===g.a.PddAndroid&&Object(g.c)(r,t)>=0||Object(f.a)().platform===g.a.PDDTinyAndorid}Pe.NATIVE_SAHRE_ERRORS={USER_REFUSE:60005,USER_CANCEL:60006},Pe.checkShareTypeSupport=function(e){var t=!1;if("number"!=typeof e)return!1;switch(e){case c.WECHAT_SESSION:case c.WECHAT_TIMELINE:case c.WECHAT_SESSION_APP:t=!0;break;case c.WEIBO:t=Pe.checkWeiboShare();break;case c.QQ_CHAT_SESSION:case c.QQ_ZONE:t=Pe.checkQQShare();break;case c.TENCENT_WEIBO:t=!1;break;case c.WECHAT_TIMELINE_IMAGE:case c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:t=Pe.checkWeChatTimelineShareImage();break;case c.WECHAT_SESSION_IMAGE:t=Pe.checkWeChatSessionShareImage();break;case c.QQ_CHAT_SESSION_IMAGE:case c.QQ_ZONE_IMAGE:t=Pe.checkQQShareImage();break;case c.WEIBO_IMAGE:t=Pe.checkWeiboShareImage();break;case c.WECHAT_SESSION_TEXT_WITH_NO_SDK:case c.WECHAT_SESSION_TEXT:t=Pe.checkWeChatSessionShareText();break;case c.WECHAT_SESSION_IMAGE_WITH_NO_SDK:case c.WECHAT_SESSION_IMAGES_WITH_NO_SDK:t=Pe.checkWeChatSessionShareImageNoSdk();break;case c.WECHAT_TIMELINE_TEXT:t=Pe.checkWeChatTimelineShareText();break;case c.IOS_SYSTEM_SHARE_CARD:case c.WECHAT_SESSION_CARD_WITH_NO_SDK:case c.WECHAT_TIMELINE_CARD_WITH_NO_SDK:t=Pe.checkIOSSystemShare();break;case c.SHARE_IMAGE_PASSIVELY:t=Pe.checkSupportSaveImageShare();break;case c.COPY_LINK:t=!0;break;case c.WECHAT_SESSION_MUSIC:case c.WECHAT_SESSION_VIDEO:t=Pe.checkSupportShareMedia();break;case c.FRIENDS:case c.WECHAT_BIG_IMAGE:t=!0;break;case c.EXT_WECHAT_SESSION_CARD:case c.EXT_WECHAT_SESSION_CARD_SYSTEM:case c.EXT_WECHAT_TIMELINE_CARD:case c.EXT_WECHAT_SESSION_IMAGE:case c.EXT_WECHAT_SESSION_IMAGE_SYSTEM:case c.EXT_WECHAT_TIMELINE_IMAGE:t=Pe.checkSupportExtension();break;case c.STAND_WECHAT_SESSION_CARD:case c.STAND_WECHAT_TIMELINE_CARD:case c.STAND_WECHAT_SESSION_IMAGE:case c.STAND_WECHAT_TIMELINE_IMAGE:t=Pe.checkSupportStand();break;case c.STAND_WECHAT_SESSION_TEXT:case c.STAND_WECHAT_TIMELINE_TEXT:t=Pe.checkSupportStandText();break;case c.PIN_TIMELINE:t=Pe.checkSupportPinTimeline()}return t},Pe.checkQQShare=function(){var e=De();return(Object(f.a)().platform!==g.a.PddIOS||0!==Object(g.c)(e,"2.0.8"))&&He("1.1.0","1.1.0")},Pe.checkWeiboShare=function(){return He("4.81.0","4.81.0")},Pe.checkWeChatTimelineShareImage=function(){return He("1.1.2","1.1.2")},Pe.checkWeChatSessionShareImage=function(){return He("3.30.0","3.30.0")},Pe.checkWeChatSessionShareText=function(){return He("3.53.0","3.53.0")},Pe.checkQQShareImage=function(){return He("3.35.0","3.35.0")},Pe.checkWeiboShareImage=function(){return He("4.81.0","4.81.0")},Pe.checkWeChatSessionShareImageNoSdk=function(){return He("4.37.0","4.36.0")},Pe.checkWeChatTimelineShareText=function(){return He("4.39.0","4.39.0")},Pe.checkIOSSystemShare=function(){var e=De();return Object(f.a)().platform===g.a.PddIOS&&Object(g.c)(e,"4.37.0")>=0},Pe.checkSupportSaveImageShare=function(){return He("4.49.0","4.49.0")},Pe.checkSupportStand=function(){var e=De();return Object(f.a)().platform===g.a.PddAndroid&&Object(g.c)(e,"4.73.0")>=0},Pe.checkSupportStandText=function(){var e=De();return Object(f.a)().platform===g.a.PddAndroid&&Object(g.c)(e,"4.77.0")>=0},Pe.checkSupportExtension=function(){var e=De();return Object(f.a)().platform===g.a.PddIOS&&Object(g.c)(e,"4.73.0")>=0},Pe.checkSupportShareCipher=function(){return He("4.74.0","4.74.0","4.80.0")},Pe.hasNewShareAPI=function(){var e=De();return Object(f.a)().platform===g.a.PddIOS&&Object(g.c)(e,"2.0.0")>=0},Pe.isEnableShareCheck=function(){return He("4.51.0","4.51.0")},Pe.isLocalCipherSupport=function(){return He("4.83.0","4.83.0")},Pe.isTPAppShareSupport=function(){return He("4.85.0","4.85.0")},Pe.checkSupportShareMedia=function(){return He("4.86.0","4.86.0")},Pe.checkSupportSilentWakeUp=function(){return Object(f.a)().platform!==g.a.PDDTinyAndorid&&He("4.88.0","4.88.0")},Pe.checkSupportPinTimeline=function(){return He("5.6.0","5.6.0")},Pe.getShareModuleName=function(){return"JSShare"},Pe.getVenderAppIds=function(e){return He("4.49.0","4.49.0")?Array.isArray(e)?Object(O.d)(Pe.getShareModuleName(),"venderAppIds",{channels:e}):Promise.reject({message:"invalid params"}):Promise.reject({message:"not support"})},Pe.DEFAULT_SHARE_ICON_SIZE=22,Pe.DEFAULT_SHARE_ICON="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAMAAADUivDaAAAAM1BMVEUAAABmZmZmZmZlZWVmZmZmZmZlZWVlZWVoaGhlZWVkZGRmZmZlZWVlZWVlZWVmZmZmZmauFdI/AAAAEHRSTlMAhnjzbtHHEBrfJrGXRzZXUNTSwgAAAPRJREFUWMPt1+sKgzAMBWC71NbLLuf9n3a6sxFYN2vq/gxyEBSFz9pGaLpdOYucuyPJCUtSbheGHo/0Q6swjXhmnNqEqwCYHwfk2iJcFkEuJyDwyi7c+O6V4HhuViFyBkhwVqJNCFwHEq+1CTaB1UCCFWI0BJiXkxJLZkAso2BVK8FaD509SjB/QcQkWBO2iYA1kuLHn5KRbQKvFL8vhT2jUKOs55j3z0WORcUnvVEj9EF6/8JsIzKAd8K6qE444cTviNNBYhrHqZnQOOGEE0444USdyDYhA1Lsfs1dRqrtwTXVPTjTw5y+6EfMwvCtK6pHu6I7B+8m1re+k3UAAAAASUVORK5CYII=",Pe.getInstance=function(){return Me||(Me=new Pe),Me};var be=Pe,ke=r("Fcpp");function We(e){var t=e.errorCode,r=void 0===t?0:t,n=e.message,a=void 0===n?"":n,i=e.options,s=void 0===i?{}:i;return new Promise((function(e){ke.a.trackingRecord({op:"real_error",sub_op:"share_error",url:"",page_url:location.href,error_code:r,error_message:a,params:JSON.stringify(s)},(function(){e()}))})).catch((function(e){}))}var Ue=D.ShareErrorCode,we=be.getShareModuleName,xe=function(){function e(){s()(this,e),this._inited=!1,this._queryShareTypePromise=null,this._rules=null,this._enableShareTypes=[],this.appOptional=null,this._rom=0,this._isCipherDowngrade=!1,this._enableSilentMode=!1}return h()(e,[{key:"build",value:function(){var e=this;return this._inited?Promise.resolve():(this._queryShareTypePromise||(this._queryShareTypePromise=this.loadRules(),this._queryShareTypePromise.then((function(t){return e._inited=!0,e._processRules(t),ve.getInstance().build({magicTrace:t.magic_trace})})).catch((function(t){We({errorCode:0,message:"分享规则初始化失败",options:{message:t&&t.message,errorCode:t&&t.errorCode}}),e._inited=!0}))),this._queryShareTypePromise)}},{key:"getAppOptional",value:function(){return this.appOptional}},{key:"getRules",value:function(){var e=this;return this.build().then((function(){return e._rules}),(function(){return Promise.resolve(e._rules)}))}},{key:"loadRules",value:function(){return Object(f.a)().isNativePlatform?Object(O.d)(we(),"queryShareTypes",{page_sn:Object(X.e)()+"",page_info:{page_name:Object(X.d)(),page_url:location&&location.href}}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(Y.a)({pageInfo:{pageId:Object(X.c)()}},{defaultErrorHandler:function(e){}}),n={};return n.page_sn=t.pageSn||"",n.page_info=t.pageInfo||{},n.platform="h5","post"===e.toLowerCase()?r.post(Le,n):r.get(Le,{params:n})}("post",{pageSn:Object(X.e)()+"",pageInfo:{page_name:Object(X.d)(),page_url:location&&location.href}})}},{key:"_processRules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.share_types||[];this.appOptional=e.app_optional,this._rom=e.rom,this._enableSilentMode=e.is_weird,e.degrade&&this.setCipherDowngrade(!0);var r=[];return this._rules=t.reduce((function(e,t){var n=t.share_type;return n&&(e[n]=t,r.push(parseInt(n,10))),e}),{}),this._innerShareTypes=e.inner_share_types||[],this._innerShareTypes.forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.push(parseInt(e.share_type,10))})),this._enableShareTypes=r,this._rules}},{key:"getRuleByType",value:function(e){return(this._rules||{})[e]}},{key:"checkSync",value:function(e,t){if(!this._rules)return Ue.SHARE_LIMITER_NOT_INIT;if(this._enableShareTypes.indexOf(e)<0)return Ue.SHARE_TYPE_DISABLED;var r=t.getShareForm(e),n=(this.getRuleByType(e)||{}).share_methods||[];return[Q.COMMAND,Q.TEXT].indexOf(r)>=0?j(t.urlWrapType)&&t.marketActivityID&&(t.shortURLApi&&n.indexOf(ce)>=0||t.shortCommandApi&&n.indexOf(ue)>=0)||n.indexOf(le)>=0?0:Ue.SHARE_TYPE_DISABLED:[c.WECHAT_SESSION,c.WECHAT_TIMELINE].indexOf(e)>=0?x(t.urlWrapType)&&t.marketActivityID&&n.indexOf(_e)<0?Ue.SHARE_TYPE_DISABLED:n.indexOf(le)>=0?0:Ue.SHARE_TYPE_DISABLED:0}},{key:"setCipherDowngrade",value:function(e){this._isCipherDowngrade=e}},{key:"isCipherDowngrade",get:function(){return this._isCipherDowngrade}},{key:"rom",get:function(){return this._rom}},{key:"isSilentMode",get:function(){return this._enableSilentMode}}]),e}(),je=null;function Ge(){return je||(je=new xe),je}var Fe=be.getShareModuleName,Be=be.isLocalCipherSupport,Qe=0,Ke=1,Xe=2,Ye={CONSUME:0,CONSUME_TIME_DIVIDE:1,CONSUME_RAW:2,RECYCLE:3,RECYCLE_TIME_DIVIDE:4,RECYCLE_RAW:5};function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.replace(/%s/g,t)}var Ve={};function Ze(e){var t=e.consumeMode,r=e.scene;if("number"!=typeof t||[Ye.CONSUME_RAW,Ye.RECYCLE_RAW].indexOf(t)>=0)return Promise.resolve();var n=function(e){if(e&&!(e.length<=0)){if([Ye.CONSUME_TIME_DIVIDE,Ye.RECYCLE_TIME_DIVIDE].indexOf(t)>=0){var r=new Date,n=r.getMinutes(),a=r.getSeconds();return e[Math.floor(e.length*(60*n+a)/3600)]}return e[0]}},a=(Ve[r]||{}).texts;return a?Promise.resolve(n(a)):function(e){return Object(O.d)(Fe(),"getLocalCipherInfo",{action:Ke,page_sn:Object(X.e)()+"",scene:e}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(t.texts||[]).map((function(e){if(e)return e.version&&Object(g.c)(e.version,window.__SHARE_CIPHER_VER__||"1.1.1")>=0?e.text:e.version?void 0:e.text})).filter((function(e){return!!e}));return Ve[e]=Ve[e]||{},Ve[e].texts=r,r}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return We({errorCode:e.errorCode,message:"本地获取口令文本失败",options:e.data}),null}))}(r).then(n)}function ze(e){var t=e.consumeMode,r=e.scene;return"number"!=typeof t?Promise.resolve():[Ye.CONSUME,Ye.CONSUME_TIME_DIVIDE,Ye.CONSUME_RAW].indexOf(t)>=0?function(e){return Object(O.d)(Fe(),"getLocalCipherInfo",{action:Xe,page_sn:Object(X.e)()+"",scene:e}).then((function(e){return e.cipher}),(function(e){return We({errorCode:e.errorCode,message:"本地消费口令码失败",options:e.data}),null}))}(r):function(e){return Object(O.d)(Fe(),"getLocalCipherInfo",{action:Qe,page_sn:Object(X.e)()+"",scene:e}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.ciphers||[]}),(function(e){return We({errorCode:e.errorCode,message:"本地获取口令码失败",options:e.data}),null}))}(r).then((function(e){if(e&&!(e.length<=0))return e[0]}))}function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scene,r=e.consumeMode;return Object(f.a)().isNativePlatform&&Be()&&t&&"number"==typeof r?Promise.all([ze(e),Ze(e)]).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=b()(e,2),n=t[0],a=t[1];return n&&[Ye.CONSUME_RAW,Ye.RECYCLE_RAW].indexOf(r)>=0?n:n&&a?Object.assign({text:qe(a,n.cipher)},n):void 0})):Promise.resolve()}var $e={TP_FIRST:0,GENERAL_FIRST:1,GENERAL_ONLY:2},et=0,tt=1,rt=2;function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e.TP_FIRST,r=e.filter((function(e){return e&&e.dev_type===tt})),n=e.filter((function(e){return e&&e.dev_type===rt}));be.isTPAppShareSupport()||(r=n=[]);var a=e.filter((function(e){return e&&e.dev_type===et}));return t===$e.TP_FIRST?n[0]||r[0]||a[0]:t===$e.GENERAL_FIRST?r[0]||n[0]||a[0]:t===$e.GENERAL_ONLY?r[0]||a[0]:void 0}var at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=Object(Y.a)({pageInfo:{pageId:Object(X.c)()}},{defaultErrorHandler:function(e){}}),n={long_url:e.shareURL||"",activity_code:(e.marketActivityID||0)+"",scene_sn:e.activitySceneSn||"",rom:e.rom||0,params:{}};e.payloadMixin&&"object"===a()(e.payloadMixin)&&(n=Object.assign(n,e.payloadMixin)),"string"!=typeof n.params&&(n.params=JSON.stringify(n.params));var i=r.post("api/flow/walrus/inquire/confusion/info",n);return i.then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.infos||[];return nt(r,t)}),(function(){return null}))},it=["mobile.yangkeduo.com","m.hutaojie.com","panduoduo.yangkeduo.com"];function st(e){for(var t=[],r=1;r<arguments.length;++r)t.push(arguments[r]);return e.replace(/{(\d+)}/g,(function(e,r){return 0===t[r]?0:t[r]||""}))}var ot=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.title=t.title||"",this.message=t.message||"",this.shareURL=t.shareURL||"",this.targetShareURL="",this.realShareURL="",this.shareDomain=t.shareDomain||"",this.thumbnailURL=t.thumbnailURL||"",this.timelineDomain=t.timelineDomain||"",this.timelineAppId=t.timelineAppId||"",this.marketActivityID=t.marketActivityID||0,this.urlWrapType=t.urlWrapType||G.DEFAULT,this.shortURLApi=t.shortURLApi||"",this.domainURLApi=t.domainURLApi||"",this.payloadMixin=t.payloadMixin||null,this.requestUsePost=t.requestUsePost||!1}var t;return h()(e,[{key:"normalize",value:(t=p()(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({}));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"setShareURLQueries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.urlWrapType!==G.RAW&&(this.shareID=e.refer_share_id,this.shareURL=W(e,this.shareURL))}},{key:"getShareForm",value:function(e){return Q.DEFAULT}},{key:"getShareMethod",value:function(e){return K.DEFAULT}}]),e}();ot.getWrappedShareURLInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareURL||"",r=e.urlWrapType;if(r===G.DEFAULT||r===G.RAW)return Promise.resolve({realShareURL:t,targetShareURL:t});if(e.timelineDomain&&e.timelineAppId&&r===G.REDIRECT)return Promise.resolve(ot.getRedirectURLInfo(t,e.timelineDomain,e.timelineAppId));if(e.timelineDomain&&r===G.SERVER_DOMAIN)return Promise.resolve(ot.getEncodedURLInfo(t,e.timelineDomain));if(e.marketActivityID&&w(r)){var n=x(r)?z:J,a=t.replace(/^(\w+:)?\/\//,""),i=me(e),s=e.cipherScene,o=e.consumeMode,h=Ne(),u=function(){var s=new Promise((function(i,s){re(e.requestUsePost?"post":"get",{shareURL:a,marketActivityID:e.marketActivityID,platform:ot.getShareDomainPlatform(),shareDomainType:n,shortURLApi:e.shortURLApi,shortCommandApi:e.shortCommandApi,domainURLApi:e.domainURLApi,payloadMixin:e.payloadMixin}).then((function(a){if(a){if(n===z){var s=a.domain,o=void 0===s?"":s,h=a.openAppID,u=void 0===h?"":h;return void(r===G.SERVER_DOMAIN_BASE64?i(ot.getEncodedURLInfoWithSuffix(t,o,e.marketActivityID)):r===G.DOMAIN_REPLACE?i(ot.getDomainReplacedURL(t,o)):i(ot.getRedirectURLInfo(t,o,r===G.SERVER_TINY_DOMAIN?"":u)))}if(n===J)return void i({useShortURL:!0,realShareURL:a.shortURL||t,targetShareURL:t,shareText:a.shareText})}i({realShareURL:t,targetShareURL:t})}))}));return n===J&&s.then((function(e){e&&e.useShortURL&&(h.cacheResponseByHash(i,e),h.setShareID(i,(new k(t).query||{}).refer_share_id))})),s};if(r===G.SERVER_SHORT_URL_WITH_CACHE){var c=h.getResponseByHash(s);return c?(h.increaseCount(s),Promise.resolve(c)):(c=h.getResponseByHash(i))?(h.increaseCount(i),Promise.resolve(c)):s&&Ge().isCipherDowngrade?Je({scene:s,consumeMode:o}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&e.share_id){var t={cipher:e.cipher,shareText:e.text,shareID:e.share_id};return h.cacheResponseByHash(s,t),h.setShareID(s,e.shareID),t}return u()}),(function(e){return u()})):u()}return u()}if(r===G.MAGIC_TRACE){var _=ve.getInstance().transform(t);return Promise.resolve({realShareURL:_,targetShareURL:_})}return r===G.MAGIC_TRACE_DYNAMIC?ve.getInstance().transformByShareEntity(e).then((function(e){return{realShareURL:e,targetShareURL:e}}),(function(){return{realShareURL:t,targetShareURL:t}})):e.marketActivityID&&e.activitySceneSn&&r===G.SERVER_TP_APP?at(Object.assign({rom:Ge().rom},e),e.tpSelectCategory).then((function(e){return{tpInfo:e,tpDowngrade:!e,realShareURL:(e||{}).link_url||t,targetShareURL:t}}),(function(e){return Promise.resolve({tpDowngrade:!0,realShareURL:t,targetShareURL:t})})):Promise.resolve({realShareURL:t,targetShareURL:t})},ot.getRedirectURLInfo=function(e,t,r){var n=new k(e),a=n.pathname+n.search,i="http://".concat(t).concat(a);return r?(i="".concat(i,"&xxx_state=123"),{realShareURL:st("https://open.weixin.qq.com/connect/oauth2/authorize?response_type=code&scope=snsapi_base&appid={0}&redirect_uri={1}",r,encodeURIComponent(i)),targetShareURL:i}):{realShareURL:i,targetShareURL:i}},ot.getEncodedURLInfo=function(e,t){var r=Object(M.a)(10),n=new k(e),a=n.pathname+n.search;a=(a=Object(P.b)("".concat(r,"/").concat(a))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,",");var i="http://".concat(t,"/").concat(a);return{targetShareURL:i,realShareURL:i}},ot.getEncodedURLInfoWithSuffix=function(e,t,r){var n=new k(e),a=n.pathname+n.search;a=(a=Object(P.b)(a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,",");var i="http://".concat(t,"/").concat(a,".htm?activity=").concat(r);return{targetShareURL:i,realShareURL:i}},ot.getDomainReplacedURL=function(e,t){var r=W({},e,B(t));return{targetShareURL:r,realShareURL:r}},ot.getShareDomainPlatform=function(){var e=Object(f.a)();return e.platform===g.a.PddAndroid?te:e.platform===g.a.PddIOS?ee:$},ot.getQQShareURL=function(e,t){if(!ae(e))return t;var r=new k(t).hostname;return it.indexOf(r)<0&&(t=t.replace("//".concat(r),"//".concat("mobile.yangkeduo.com"))),t};var ht=ot;function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var ct=D.ShareErrorCode,_t=function(e){v()(r,e);var t=ut(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s()(this,r),(e=t.call(this,n)).ShareEntityClass=ht,e._hasInited=!1,e.shareEntity=n.shareEntity,e.shareEntityMap=n.shareEntityMap||{},e.disableShareTypes=n.disableShareTypes||[],e}return h()(r,[{key:"initShare",value:function(){this._hasInited||(this._hasInited=!0,this.setMaxListeners(0),this._setupShareTypes(),this._setupPlatformShareSDK())}},{key:"isInited",value:function(){return this._hasInited}},{key:"share",value:function(e){return ct.SHARE_ACTION_DISABLE}},{key:"setShareCheck",value:function(e){}},{key:"checkShareTypeEnable",value:function(e){return 0}},{key:"_setupShareTypes",value:function(){return!0}},{key:"_setupPlatformShareSDK",value:function(){return Promise.resolve()}},{key:"getShareEntityByShareType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return e?this.shareEntityMap[e]||(t?null:this.shareEntity):this.shareEntity}},{key:"refreshShare",value:function(e,t){return e?(t?this.shareEntityMap[t]=e:this.shareEntity=e,this._setupPlatformShareSDK()):Promise.resolve()}},{key:"disableShare",value:function(e){var t=this;if(e&&"number"==typeof e)this.disableShareTypes.indexOf(e)<0&&this.disableShareTypes.push(e);else{if("[object Array]"!==Object.prototype.toString.call(e))return;this.disableShareTypes=this.disableShareTypes.concat(e.filter((function(e){return(t.disableShareTypes||[]).indexOf(e)<0})))}!this._setupShareTypes()&&this._adjustMenu()}},{key:"_adjustMenu",value:function(){}},{key:"createShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=this.ShareEntityClass||ht;if(r)return new n(e);var a={};if(t){var i=this.shareEntityMap[t];a=i?Object.assign({},i,e):Object.assign({},this.shareEntity,e)}else a=Object.assign({},this.shareEntity,e);return new n(a)}},{key:"setupNativeShareButton",value:function(e){return ct.SHARE_NOT_SUPPORTED}}]),r}(R.EventEmitter),lt={COMPLETE:0,SUCCESS:1,FAIL:2,CANCEL:3,ERROR:4},Et="static",St="dynamic",pt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.shareImageWidth=t.shareImageWidth||375,this.shareImageHeight=t.shareImageHeight||500,this.maxSize=t.maxSize||1e6,this.imageRatio=t.imageRatio||2,this.items=[]}return h()(e,[{key:"w",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.shareImageWidth?e/this.shareImageWidth:0}},{key:"h",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.shareImageHeight?e/this.shareImageHeight:0}},{key:"paint",value:function(){}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.source&&this.items.push(e)}},{key:"addElem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.getAttrs&&"function"==typeof e.getAttrs&&this.items.push(e.getAttrs())}},{key:"process",value:function(){return this.paint(),{max_size:this.maxSize,width:this.shareImageWidth*this.imageRatio,height:this.shareImageHeight*this.imageRatio,items:this.items}}},{key:"processAsync",value:function(){return Promise.resolve(this.process())}}]),e}(),ft=function(e){return e?Array.isArray(e)&&e.length>0?e[0]:"object"===a()(e)?e:null:null},Tt=function(e){return e?Array.isArray(e)&&e.length>0?e.map((function(e,t){return e?"string"==typeof e?{type:Et,data:e}:"object"===a()(e)?e.type?e:{type:St,options:e}:void 0:null})).filter((function(e){return!!e})):"object"===a()(e)?[{type:St,options:e}]:[]:[]};function At(e,t){var r=e.drawImageOptions,n=e.drawImageClass;if(r)return t?Promise.resolve(Tt(r)):Promise.resolve(ft(r));if("function"==typeof n){var a=new n({shareURL:e.shareURL});return a instanceof pt?a.processAsync().catch((function(e){return Promise.resolve({})})):Promise.resolve({})}return Promise.resolve({})}function It(){return vt.apply(this,arguments)}function vt(){return(vt=p()(E.a.mark((function e(){var t,r,n,a=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},"function"==typeof(r=a.length>1?a[1]:void 0).cipherProcessor){e.next=4;break}return e.abrupt("return",t);case 4:return e.prev=4,e.next=7,r.cipherProcessor({cipherText:t.title,cipherCode:t.cipher,shareEntity:r});case 7:"string"==typeof(n=e.sent)&&(t.title=t.desc=n),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var yt=function(e){v()(n,e);var t,r=dt(n);function n(e){var t;return s()(this,n),(t=r.call(this,e)).drawImageOptions=e.drawImageOptions,t.redirectURI=e.redirectURI||"",t.miniObjectPath=e.miniObjectPath||"",t.miniObjectID=e.miniObjectID,t.useWxAppShare=e.useWxAppShare||!1,t.forceDowngrade=e.forceDowngrade||!1,t.shortCommandApi=e.shortCommandApi||"",t.excludeShareChoices=e.excludeShareChoices||[],t.thirdPartyOpenType=e.thirdPartyOpenType,t.drawImageClass=e.drawImageClass,t.needSharedAmount=e.needSharedAmount||!1,t.maskTemplateID=e.maskTemplateID,t.maskData=e.maskData,t.cipherScene=e.cipherScene,t.consumeMode=e.consumeMode,t.activitySceneSn=e.activitySceneSn,t.tpSelectCategory=e.tpSelectCategory,t.cipherProcessor=e.cipherProcessor,t.pinTimelineParams=e.pinTimelineParams,t}return h()(n,[{key:"normalize",value:(t=p()(E.a.mark((function e(t){var r,n,i,s,o,h,u,_,l=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.assign({},this),t!==c.PIN_TIMELINE){e.next=3;break}return e.abrupt("return",r.pinTimelineParams);case 3:n={title:r.title,desc:r.message,thumbnail:r.thumbnailURL,share_url:r.shareURL,share_id:r.shareID},r.payloadMixin&&(i=r.payloadMixin.extra,"object"===a()(i)&&void 0!==i.share_prefer&&(n.share_prefer=i.share_prefer)),r.maskTemplateID&&r.maskData&&(n.mask_template_id=r.maskTemplateID,n.mask_data=r.maskData),s=!1,e.t0=t,e.next=e.t0===c.WECHAT_SESSION?10:e.t0===c.WECHAT_TIMELINE_IMAGE||e.t0===c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK||e.t0===c.WECHAT_SESSION_IMAGE||e.t0===c.QQ_CHAT_SESSION_IMAGE||e.t0===c.QQ_ZONE_IMAGE||e.t0===c.WEIBO_IMAGE||e.t0===c.WECHAT_SESSION_IMAGE_WITH_NO_SDK||e.t0===c.EXT_WECHAT_SESSION_IMAGE||e.t0===c.EXT_WECHAT_SESSION_IMAGE_SYSTEM||e.t0===c.EXT_WECHAT_TIMELINE_IMAGE||e.t0===c.STAND_WECHAT_SESSION_IMAGE||e.t0===c.STAND_WECHAT_TIMELINE_IMAGE?13:e.t0===c.WECHAT_SESSION_IMAGES_WITH_NO_SDK?18:e.t0===c.SHARE_IMAGE_PASSIVELY?23:e.t0===c.IOS_SYSTEM_SHARE_CARD||e.t0===c.WECHAT_SESSION_CARD_WITH_NO_SDK||e.t0===c.WECHAT_TIMELINE_CARD_WITH_NO_SDK?29:31;break;case 10:if(r.miniObjectPath&&"string"==typeof r.miniObjectPath)n.mini_object_path=Z(r);else if("function"==typeof r.miniObjectPath)try{n.mini_object_path=r.miniObjectPath(r.shareURL)}catch(e){}return r.miniObjectID&&(n.mini_object_id=r.miniObjectID),e.abrupt("break",32);case 13:return s=!0,e.next=16,At(r);case 16:return n.options=e.sent,e.abrupt("break",32);case 18:return s=!0,e.next=21,At(r,!0);case 21:return n.multi_image_options=e.sent,e.abrupt("break",32);case 23:return s=!0,e.next=26,At(r);case 26:return n.options=e.sent,r.thirdPartyOpenType&&(n.open_type=r.thirdPartyOpenType),e.abrupt("break",32);case 29:return n.excluded_types=r.excludeShareChoices,e.abrupt("break",32);case 31:return e.abrupt("break",32);case 32:if(o=this.getShareForm.call(r,t),h=[Q.COMMAND,Q.TEXT].indexOf(o)>=0,this.targetShareURL=r.shareURL,this.realShareURL=r.shareURL,this.useShortURL=!1,t===c.WECHAT_SESSION&&n.mini_object_path&&(this.realShareURL=n.mini_object_path),ae(t)&&(u=ht.getQQShareURL(t,r.shareURL),n.share_url=u,this.shareURL=u,this.realShareURL=u,this.targetShareURL=u),t===c.WECHAT_SESSION&&n.mini_object_path&&(this.realShareURL=this.targetShareURL=n.mini_object_path),o!==Q.CARD&&o!==Q.WXAPP_CARD){e.next=44;break}return e.abrupt("return",ht.getWrappedShareURLInfo(r).then((function(e){var t=e.realShareURL,r=e.targetShareURL,a=e.useShortURL,i=e.tpDowngrade,s=e.tpInfo;return l.useShortURL=a,l.realShareURL=t,l.targetShareURL=r,n.share_url=t,s&&(n.title=s.title||n.title,n.desc=s.message||n.desc),n.tpInfo=s,n.tpDowngrade=i,n})));case 44:if(!s||!j(r.urlWrapType)&&r.urlWrapType!==G.MAGIC_TRACE&&r.urlWrapType!==G.MAGIC_TRACE_DYNAMIC){e.next=48;break}return e.abrupt("return",ht.getWrappedShareURLInfo(r).then((function(e){var t=e.realShareURL,a=e.targetShareURL,i=e.useShortURL,s=e.shareText;return l.targetShareURL=a,r.shortCommandApi?(l.pcode=s,n.share_url=s):(l.useShortURL=i,l.realShareURL=t,n.share_url=i?B(t):t),n})));case 48:if(!h){e.next=59;break}if(_=n.title||"",!j(r.urlWrapType)){e.next=54;break}return e.abrupt("return",ht.getWrappedShareURLInfo(r).then((function(e){var t=e.realShareURL,a=e.targetShareURL,i=e.useShortURL,s=e.shareText,o=e.shareID,h=e.cipher;if(o&&(n.shareID=o),h&&(n.cipher=h),l.targetShareURL=a,r.shortCommandApi){var u=i||h?s:"";_=st(_,u||a,a,u),n.title=n.desc=_,l.pcode=_}else{var c=i?t:"",E=c||a;_=st(_,E,a,c),n.title=n.desc=_,l.useShortURL=i,l.realShareURL=E}return It(n,r)})));case 54:return _=st(_,r.shareURL),n.title=n.desc=_,e.abrupt("return",It(n,r));case 57:e.next=60;break;case 59:return e.abrupt("return",Promise.resolve(n));case 60:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getShareForm",value:function(e){switch(e){case c.WECHAT_SESSION:return this.miniObjectPath||this.useWxAppShare?Q.WXAPP_CARD:Q.CARD;case c.QQ_CHAT_SESSION:case c.WECHAT_TIMELINE:case c.QQ_ZONE:case c.TENCENT_WEIBO:case c.WECHAT_SESSION_CARD_WITH_NO_SDK:case c.WECHAT_TIMELINE_CARD_WITH_NO_SDK:case c.WECHAT_SESSION_MUSIC:case c.WECHAT_SESSION_VIDEO:case c.EXT_WECHAT_SESSION_CARD:case c.EXT_WECHAT_SESSION_CARD_SYSTEM:case c.EXT_WECHAT_TIMELINE_CARD:case c.STAND_WECHAT_SESSION_CARD:case c.STAND_WECHAT_TIMELINE_CARD:return Q.CARD;case c.WECHAT_TIMELINE_IMAGE:case c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:case c.WECHAT_SESSION_IMAGE:case c.QQ_CHAT_SESSION_IMAGE:case c.QQ_ZONE_IMAGE:case c.WEIBO_IMAGE:case c.WECHAT_TIMELINE_IMAGES:case c.WECHAT_SESSION_IMAGE_WITH_NO_SDK:case c.WECHAT_SESSION_IMAGES_WITH_NO_SDK:case c.SHARE_IMAGE_PASSIVELY:case c.EXT_WECHAT_SESSION_IMAGE:case c.EXT_WECHAT_SESSION_IMAGE_SYSTEM:case c.EXT_WECHAT_TIMELINE_IMAGE:case c.STAND_WECHAT_SESSION_IMAGE:case c.STAND_WECHAT_TIMELINE_IMAGE:return Q.IMAGE;case c.WEIBO:case c.WECHAT_SESSION_TEXT_WITH_NO_SDK:case c.WECHAT_SESSION_TEXT:case c.WECHAT_TIMELINE_TEXT:case c.STAND_WECHAT_SESSION_TEXT:case c.STAND_WECHAT_TIMELINE_TEXT:return this.shortCommandApi?Q.COMMAND:Q.TEXT;case c.COPY_LINK:return Q.COPY_LINK;case c.WECHAT_SESSION_APP:}return Q.DEFAULT}},{key:"getShareMethod",value:function(e){switch(e){case c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:case c.WECHAT_SESSION_TEXT_WITH_NO_SDK:case c.WECHAT_SESSION_IMAGE_WITH_NO_SDK:case c.WECHAT_SESSION_IMAGES_WITH_NO_SDK:case c.WECHAT_SESSION_CARD_WITH_NO_SDK:case c.WECHAT_TIMELINE_CARD_WITH_NO_SDK:return K.SYSTEM;case c.WECHAT_SESSION:case c.QQ_CHAT_SESSION:case c.WECHAT_TIMELINE:case c.QQ_ZONE:case c.TENCENT_WEIBO:case c.WECHAT_TIMELINE_IMAGE:case c.WECHAT_SESSION_IMAGE:case c.QQ_CHAT_SESSION_IMAGE:case c.QQ_ZONE_IMAGE:case c.WEIBO_IMAGE:case c.WECHAT_TIMELINE_IMAGES:case c.WEIBO:case c.WECHAT_SESSION_TEXT:case c.WECHAT_TIMELINE_TEXT:case c.WECHAT_SESSION_MUSIC:case c.WECHAT_SESSION_VIDEO:case c.STAND_WECHAT_SESSION_TEXT:case c.STAND_WECHAT_TIMELINE_TEXT:return K.SDK;case c.SHARE_IMAGE_PASSIVELY:return this.thirdPartyOpenType?K.MANUAL:K.DEFAULT;case c.EXT_WECHAT_SESSION_CARD:case c.EXT_WECHAT_SESSION_CARD_SYSTEM:case c.EXT_WECHAT_TIMELINE_CARD:case c.EXT_WECHAT_SESSION_IMAGE:case c.EXT_WECHAT_SESSION_IMAGE_SYSTEM:case c.EXT_WECHAT_TIMELINE_IMAGE:return K.EXTENSION;case c.STAND_WECHAT_SESSION_CARD:case c.STAND_WECHAT_TIMELINE_CARD:case c.STAND_WECHAT_SESSION_IMAGE:case c.STAND_WECHAT_TIMELINE_IMAGE:return K.STAND;case c.WECHAT_SESSION_APP:}return K.DEFAULT}}]),n}(ht);yt.processDrawImageOptions=ft,yt.processDrawImageOptionsMuti=Tt;var mt=yt,Ct={DEFAULT:0,OPEN_WECHAT:1,OPEN_QQ:2,OPEN_WEIBO:3,OPEN_WECHAT_IOS_SILENT:101,OPEN_WECHAT_ANDROID_SILENT:201};function gt(){return Object(f.a)().isNativePlatform?new Promise((function(e,t){Object(O.d)("JSStorage","getPasteboard",null).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(t.text)}))})):Promise.reject()}function Ot(e){return"string"!=typeof e?Promise.reject():Object(f.a)().isNativePlatform?Object(O.d)("JSStorage","setPasteboard",{text:e}):Promise.reject()}function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var Nt=be.checkShareTypeSupport,Lt=be.getShareModuleName,Dt=be.NATIVE_SAHRE_ERRORS,Mt=Object.keys(c).map((function(e){return c[e]})).filter((function(e){return[c.WECHAT_BIG_IMAGE].indexOf(e)<=0})),Pt=function(e){v()(r,e);var t=Rt(r);function r(e){var n;return s()(this,r),(n=t.call(this,e)).ShareEntityClass=mt,n._enableShareTypes=Mt.concat(),n.nativeShareEnv=be.getInstance(),n.shareLimiter=Ge(),n._isEnableShareCheck=!1,n.setShareCheck(!0),n}return h()(r,[{key:"setShareCheck",value:function(e){Object(f.a)().isTinyNativePlatform?this._isEnableShareCheck=!0:this._isEnableShareCheck=!!e&&be.isEnableShareCheck()}},{key:"checkShareTypeEnable",value:function(e){var t=this.getShareEntityByShareType(e);if(!this.validateShareParams(e,t))return N.SHARE_PARAMS_NOT_VALID;if(!Nt(e)||this._enableShareTypes.indexOf(e)<0)return N.SHARE_TYPE_DISABLED;if(this._isEnableShareCheck&&[c.COPY_LINK].indexOf(e)<0){var r=this.shareLimiter.checkSync(e,t);if(r)return r}return 0}},{key:"share",value:function(e){var t=this.checkShareTypeEnable(e);return t||(e===c.PIN_TIMELINE?this._sharePinTimeline(e):e===c.WECHAT_BIG_IMAGE?this._nativeShareBigImage(e):[c.WECHAT_SESSION,c.WECHAT_TIMELINE,c.WEIBO,c.QQ_CHAT_SESSION,c.QQ_ZONE,c.TENCENT_WEIBO,c.WECHAT_SESSION_APP,c.FRIENDS,c.WECHAT_SESSION_MUSIC,c.WECHAT_SESSION_VIDEO,c.EXT_WECHAT_SESSION_CARD_SYSTEM,c.EXT_WECHAT_SESSION_CARD,c.EXT_WECHAT_TIMELINE_CARD,c.STAND_WECHAT_SESSION_CARD,c.STAND_WECHAT_TIMELINE_CARD].indexOf(e)>=0?this._nativeShareCard(e):[c.WECHAT_SESSION_CARD_WITH_NO_SDK,c.WECHAT_TIMELINE_CARD_WITH_NO_SDK].indexOf(e)>=0?this._nativeShareCardSpecial(e):[c.WECHAT_TIMELINE_IMAGE,c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK,c.WECHAT_SESSION_IMAGE,c.QQ_CHAT_SESSION_IMAGE,c.QQ_ZONE_IMAGE,c.WEIBO_IMAGE,c.WECHAT_SESSION_IMAGE_WITH_NO_SDK,c.SHARE_IMAGE_PASSIVELY,c.EXT_WECHAT_SESSION_IMAGE_SYSTEM,c.EXT_WECHAT_SESSION_IMAGE,c.EXT_WECHAT_TIMELINE_IMAGE,c.STAND_WECHAT_SESSION_IMAGE,c.STAND_WECHAT_TIMELINE_IMAGE].indexOf(e)>=0?this._nativeShareImage(e):[c.WECHAT_SESSION_TEXT_WITH_NO_SDK,c.WECHAT_SESSION_TEXT,c.WECHAT_TIMELINE_TEXT,c.STAND_WECHAT_SESSION_TEXT,c.STAND_WECHAT_TIMELINE_TEXT].indexOf(e)>=0?this._nativeShareText(e):c.COPY_LINK===e?this._nativeShareClipboard(e):N.SHARE_TYPE_NOT_FOUND)}},{key:"validateShareParams",value:function(e){return!0}},{key:"_setupShareTypes",value:function(){}},{key:"refreshShare",value:function(e,t){var n=A()(C()(r.prototype),"refreshShare",this).call(this,e,t);return this.emit(_.ON_SHARE_PREPARE,{shareType:t}),n}},{key:"_setupPlatformShareSDK",value:function(){return this.waitShareLimiter()}},{key:"waitShareLimiter",value:function(){var e=this;return this._isEnableShareCheck?(this._queryShareTypePromise||(this._queryShareTypePromise=this.shareLimiter.build().catch((function(t){return e.emit(_.SHARE_LIMIT_LOAD_FAIL),Promise.resolve()}))),this._queryShareTypePromise):Promise.resolve()}},{key:"_nativeShareCard",value:function(e){var t=this;this.emit(_.ON_SHARE_TRIGGER,{shareType:e});var r=this.getShareEntityByShareType(e);return r.normalize(e).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.tpInfo,i=n.tpDowngrade;if(delete n.tpInfo,delete n.tpDowngrade,i||a&&!a.dev_app)t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.FAIL,tpDowngrade:!0,tpInfo:a});else{var s=Object.assign({type:e,redirect_uri:r.redirectURI||"",share_params:n,share_method:pe(r,e)});r.needSharedAmount&&(s.show_check_detail=1),a&&a.dev_type&&(s.dev_app=a.dev_app,s.dev_type=a.dev_type),t._invokeNativeShare(s,(function(r){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.SUCCESS,responseData:r,tpInfo:a})}),(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=parseInt(r.errorCode,10)||0,i=n===Dt.USER_CANCEL?lt.CANCEL:lt.FAIL;t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:i,nativeShareErrorCode:n,responseData:r.data,tpInfo:a})}))}})),0}},{key:"_nativeShareCardSpecial",value:function(e){var t=this;this.emit(_.ON_SHARE_TRIGGER,{shareType:e});var r=this.getShareEntityByShareType(e);return r.normalize(e).then((function(n){var a=Object.assign({type:c.IOS_SYSTEM_SHARE_CARD,share_params:n,share_method:pe(r,e)});t._invokeNativeShare(a,(function(r){var n=r.share_type,a=r.success,i="com.tencent.xin.sharetimeline"===n&&a;t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:i?lt.SUCCESS:lt.FAIL,responseData:r})}),(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=parseInt(r.errorCode,10)||0,a=n===Dt.USER_CANCEL?lt.CANCEL:lt.FAIL;t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:a,nativeShareErrorCode:n,responseData:r.data})}))})),0}},{key:"_nativeShareImage",value:function(e){var t=this;this.emit(_.ON_SHARE_TRIGGER,{shareType:e});var r=this.getShareEntityByShareType(e),n=e;return r.normalize(e).then((function(a){var i={type:n,share_params:a,share_method:pe(r,e)},s=!1;n===c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK&&(i.complete=function(){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,useComplete:!0,shareResultType:lt.SUCCESS})},s=!0),t._invokeNativeShare(i,(function(r){!s&&t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.SUCCESS,responseData:r})}),(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=parseInt(r.errorCode,10),a=n===Dt.USER_CANCEL?lt.CANCEL:lt.FAIL;!s&&t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:a,nativeShareErrorCode:n,responseData:r.data})}))})),0}},{key:"_nativeShareText",value:function(e){var t=this,r=this.getShareEntityByShareType(e),n=r.cipherScene&&"string"==typeof r.cipher;!n&&this.emit(_.ON_SHARE_TRIGGER,{shareType:e});var a=e;return r.normalize(e).then((function(i){n&&(t.emit(_.ON_SHARE_TRIGGER,{shareType:e,shareID:i.shareID}),delete i.shareID);var s=Object.assign({type:a,share_params:i,share_method:pe(r,e)}),o=!1;if(r.forceDowngrade||Object(f.a)().system===g.b.IOS&&a===c.WECHAT_SESSION_TEXT_WITH_NO_SDK)return t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.FAIL,shareParams:i}),0;Object(f.a)().system===g.b.Android&&a===c.WECHAT_SESSION_TEXT_WITH_NO_SDK&&(s.complete=function(){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,useComplete:!0,shareResultType:lt.SUCCESS})},o=!0),t._invokeNativeShare(s,(function(r){!o&&t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.SUCCESS,responseData:r})}),(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=parseInt(r.errorCode,10)||0,a=n===Dt.USER_CANCEL?lt.CANCEL:lt.FAIL;!o&&t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:a,nativeShareErrorCode:n,responseData:r.data})}))})),0}},{key:"_nativeShareBigImage",value:function(e){return N.SHARE_TYPE_DISABLED}},{key:"_nativeShareClipboard",value:function(e){var t=this;this.emit(_.ON_SHARE_TRIGGER,{shareType:e});var r=this.getShareEntityByShareType(e);return r.normalize(e).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.share_url||r.shareURL;gt().then(null,(function(){return Promise.resolve("")})).then((function(r){Ot(a).then((function(){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.SUCCESS,content:a,originContent:r})}),(function(){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.FAIL,content:a,originContent:r})}))}))})),0}},{key:"_sharePinTimeline",value:function(e){var t=this;return this.emit(_.ON_SHARE_TRIGGER,{shareType:e}),this.getShareEntityByShareType(e).normalize(e).then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({type:e,share_params:r});t._invokeNativeShare(n,(function(r){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.SUCCESS,responseData:r})}),(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=parseInt(r.errorCode,10)||0;t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.FAIL,nativeShareErrorCode:n,responseData:r.data})}))})),0}},{key:"setupNativeShareButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.shareIcon,n=void 0===r?be.DEFAULT_SHARE_ICON:r,a=t.shareIconSize,i=void 0===a?be.DEFAULT_SHARE_ICON_SIZE:a;return"string"!=typeof n||"number"!=typeof i?N.SHARE_PARAMS_NOT_VALID:(Object(O.d)("JSUIControl","setRightBarButtons",{buttons:[{icons:{normal:n},callback:function(){e.emit(_.ON_SHARE_BUTTON_CLICKED)},size:i}]}),0)}},{key:"_invokeNativeShare",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=Lt(),a="share",i=Object(X.e)()+"";this._isEnableShareCheck?(e=Object.assign({origin:"h5",page_sn:i,page_info:{page_name:Object(X.d)(),page_url:location&&location.href}},e),this.shareLimiter.getAppOptional()&&(e.app_optional=this.shareLimiter.getAppOptional()),a="performShare"):e.page_sn=i,Object(O.d)(n,a,e).then(t,r)}},{key:"shareCipherManually",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct.OPEN_WECHAT;return e&&"string"==typeof e?be.checkSupportShareCipher()?(t!==Ct.OPEN_WECHAT&&t!==Ct.OPEN_WECHAT_IOS_SILENT&&t!==Ct.OPEN_WECHAT_ANDROID_SILENT||(t=be.checkSupportSilentWakeUp()&&this.shareLimiter.isSilentMode?Object(f.a)().system===g.b.IOS?Ct.OPEN_WECHAT_IOS_SILENT:Ct.OPEN_WECHAT_ANDROID_SILENT:Ct.OPEN_WECHAT),Object(O.d)(Lt(),"shareCipher",{cipher:e,open_type:t})):Promise.reject(new Error("not support")):Promise.reject(new Error("invalid cipher"))}}]),r}(_t);function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var bt,kt=function(e){v()(r,e);var t=Ht(r);function r(){return s()(this,r),t.apply(this,arguments)}return h()(r,[{key:"normalize",value:function(e){var t=this;return new Promise((function(r,n){var a=Object.assign({},t),i=a.shareURL;t.targetShareURL=t.shareURL,t.realShareURL=t.shareURL,t.useShortURL=!1,e===c.WECHAT_TIMELINE||e===c.WECHAT_SESSION?ht.getWrappedShareURLInfo(a).then((function(e){var n=e.realShareURL,i=e.targetShareURL,s=e.useShortURL;t.useShortURL=s,t.targetShareURL=i,t.realShareURL=n,r({title:a.title,desc:a.message,imgUrl:a.thumbnailURL,link:n})}),(function(){})):ae(e)?(t.targetShareURL=ht.getQQShareURL(e,i),t.realShareURL=t.targetShareURL,r({title:a.title,desc:a.message,imgUrl:a.thumbnailURL,link:t.realShareURL})):r({title:a.title,desc:a.message,imgUrl:a.thumbnailURL,link:i})}))}},{key:"getShareForm",value:function(e){return Q.CARD}},{key:"getShareMethod",value:function(e){return K.SDK}}]),r}(ht);function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var Ut=D.ShareErrorCode,wt=(bt={},se()(bt,c.WECHAT_SESSION,{name:"onMenuShareAppMessage",tag:"menuItem:share:appMessage"}),se()(bt,c.WECHAT_TIMELINE,{name:"onMenuShareTimeline",tag:"menuItem:share:timeline"}),se()(bt,c.QQ_CHAT_SESSION,{name:"onMenuShareQQ",tag:"menuItem:share:qq"}),se()(bt,c.QQ_ZONE,{name:"onMenuShareQZone",tag:"menuItem:share:QZone"}),se()(bt,c.TENCENT_WEIBO,{name:"onMenuShareWeibo",tag:"menuItem:share:weiboApp"}),bt),xt=[c.WECHAT_SESSION,c.WECHAT_TIMELINE,c.QQ_CHAT_SESSION,c.QQ_ZONE,c.TENCENT_WEIBO],jt=function(e){v()(r,e);var t=Wt(r);function r(e){var n;return s()(this,r),(n=t.call(this,e)).ShareEntityClass=kt,n._enableShareTypes=xt.concat(),n}return h()(r,[{key:"share",value:function(){return Ut.SHARE_ACTION_DISABLE}},{key:"refreshShare",value:function(e,t){var r=this;return e?t?(this.shareEntityMap[t]=e,"undefined"==typeof wx?(this.emit(_.SDK_INIT_FAILED),Promise.resolve()):this.refreshWeChatChannelShare(t)):(this.shareEntity=e,this._enableShareTypes.forEach((function(t){r.shareEntityMap[t]=r.createShareEntity(e,t)})),this._setupPlatformShareSDK()):Promise.resolve()}},{key:"_setupShareTypes",value:function(){var e=this,t=this._enableShareTypes.length;return this._enableShareTypes=xt.filter((function(t){return e.disableShareTypes.indexOf(t)<0})),t===this._enableShareTypes.length}},{key:"_setupPlatformShareSDK",value:function(){var e=this;return"undefined"==typeof wx?(this.emit(_.SDK_INIT_FAILED),Promise.resolve()):Promise.all(this._enableShareTypes.map((function(t){e.refreshWeChatChannelShare(t)})))}},{key:"_adjustMenu",value:function(){var e=this,t=xt.filter((function(t){return e._enableShareTypes.indexOf(t)<0})).map((function(e){return wt[e].tag}));window.wx&&window.wx.hideMenuItems({menuList:t})}},{key:"refreshWeChatChannelShare",value:function(e){var t=wt[e];return t?this._setupWeChatChannelShare(e,t.name):Promise.resolve()}},{key:"_setupWeChatChannelShare",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!window.wx||"function"!=typeof window.wx[r])return Promise.resolve();var n=this.shareEntityMap[e]||this.shareEntity;return n?(this.emit(_.ON_SHARE_PREPARE,{shareType:e}),n.normalize(e).then((function(n){var a=Object.assign({trigger:function(){t.emit(_.ON_SHARE_TRIGGER,{shareType:e})},success:function(){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.SUCCESS}),t.refreshWeChatChannelShare(e)},fail:function(){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.FAIL}),t.refreshWeChatChannelShare(e)},cancel:function(){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.CANCEL}),t.refreshWeChatChannelShare(e)}},n);window.wx[r](a)}),(function(){return Promise.resolve()}))):Promise.resolve()}},{key:"checkShareTypeEnable",value:function(e){return this._enableShareTypes.indexOf(e)<0?Ut.SHARE_TYPE_DISABLED:0}}]),r}(_t);jt.SUPPORTED_SHARE_TYPE=xt.concat();var Gt=jt;function Ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var Bt,Qt,Kt=function(e){v()(r,e);var t=Ft(r);function r(){return s()(this,r),t.apply(this,arguments)}return h()(r,[{key:"normalize",value:function(e){var t=this;return new Promise((function(r,n){var a=Object.assign({},t);ae(e)?(t.targetShareURL=ht.getQQShareURL(e,a.shareURL),t.realShareURL=t.targetShareURL,r({title:a.title,desc:a.message,share_url:t.realShareURL,image_url:a.thumbnailURL,back:!0})):r({title:a.title,desc:a.message,share_url:a.shareURL,image_url:a.thumbnailURL,back:!0})}))}},{key:"getShareForm",value:function(e){return Q.CARD}},{key:"getShareMethod",value:function(e){return K.SDK}}]),r}(ht);function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var Yt=D.ShareErrorCode,qt=[c.QQ_CHAT_SESSION,c.QQ_ZONE,c.WECHAT_SESSION,c.WECHAT_TIMELINE],Vt=(Bt={},se()(Bt,c.QQ_CHAT_SESSION,0),se()(Bt,c.QQ_ZONE,1),se()(Bt,c.WECHAT_SESSION,2),se()(Bt,c.WECHAT_TIMELINE,3),Bt),Zt=(Qt={},se()(Qt,c.QQ_CHAT_SESSION,"menuItem:share:qq"),se()(Qt,c.QQ_ZONE,"menuItem:share:QZone"),se()(Qt,c.WECHAT_SESSION,"menuItem:share:appMessage"),se()(Qt,c.WECHAT_TIMELINE,"menuItem:share:timeline"),Qt),zt=function(e){v()(r,e);var t=Xt(r);function r(e){var n;return s()(this,r),(n=t.call(this,e)).ShareEntityClass=Kt,n._enableShareTypes=qt.concat(),n}return h()(r,[{key:"share",value:function(e){var t=this;if(this._enableShareTypes.indexOf(e)<0)return Yt.SHARE_TYPE_DISABLED;if("undefined"==typeof mqq||void 0===window.mqq.ui)return Yt.SHARE_NOT_SUPPORTED;var r=this.getShareEntityByShareType(e);return this.emit(_.ON_SHARE_TRIGGER,{shareType:e}),r.normalize(e).then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.share_type=Vt[e],window.mqq.ui.shareMessage(r,t.createShareCallback(e))})),0}},{key:"_adjustMenu",value:function(){var e=this,t=qt.filter((function(t){return e._enableShareTypes.indexOf(t)<0})).map((function(e){return Zt[e]}));window.mqq&&window.mqq.hideMenuItems({menuList:t})}},{key:"createShareCallback",value:function(e){var t=this;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=parseInt(r.retCode,10);switch(n){case 0:t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.SUCCESS});break;case 1:case-2:t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.CANCEL});break;default:t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.FAIL})}}}},{key:"_setupShareTypes",value:function(){var e=this,t=this._enableShareTypes.length;return this._enableShareTypes=qt.filter((function(t){return(e.disableShareTypes||[]).indexOf(t)<0})),t===this._enableShareTypes.length}},{key:"_setupPlatformShareSDK",value:function(){var e=this;return"undefined"==typeof mqq||void 0===window.mqq.ui?(this.emit(_.SDK_INIT_FAILED),Promise.resolve()):(window.mqq.ui.setOnShareHandler((function(t){var r=qt[parseInt(t,10)],n=e.getShareEntityByShareType(r);n&&(e.emit(_.ON_SHARE_TRIGGER,{shareType:r}),n.normalize(r).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.share_type=t,window.mqq.ui.shareMessage(n,e.createShareCallback(r))})))})),Promise.resolve())}},{key:"checkShareTypeEnable",value:function(e){return this._enableShareTypes.indexOf(e)<0?Yt.SHARE_TYPE_DISABLED:0}}]),r}(_t);zt.SUPPORTED_SHARE_TYPE=qt;var Jt=zt;function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var er=function(e){v()(n,e);var t,r=$t(n);function n(e){var t;return s()(this,n),(t=r.call(this,e)).wxAppShareMode=e.wxAppShareMode,t.wxAppRequestPayload=e.wxAppRequestPayload,t.miniObjectPath=e.miniObjectPath,t.shortCommandApi=e.shortCommandApi,t.wxAppNavigatePayload=e.wxAppNavigatePayload,t}return h()(n,[{key:"normalize",value:(t=p()(E.a.mark((function e(t){var r,n,a,i,s,o=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object.assign({},this),n=this.getShareForm.call(r,t),!([Q.COMMAND,Q.TEXT].indexOf(n)>=0&&j(r.urlWrapType))){e.next=7;break}return a={title:r.title,desc:r.message,thumbnail:r.thumbnailURL,share_url:r.shareURL,share_id:r.shareID},i=a.title||"",e.abrupt("return",ht.getWrappedShareURLInfo(r).then((function(e){var t=e.realShareURL,n=e.targetShareURL,s=e.useShortURL,h=e.shareText;if(o.targetShareURL=n,r.shortCommandApi){var u=s?h:"";i=st(i,u||n,n,u),a.title=a.desc=i,o.pcode=i}else{var c=s?t:"",_=c||n;i=st(i,_,n,c),a.title=a.desc=i,o.useShortURL=s,o.realShareURL=_}return a})));case 7:if((s=r.miniObjectPath)&&"string"==typeof s)s=Z(r);else if("function"==typeof s)try{"string"!=typeof(s=s(r.shareURL))&&(s=null)}catch(e){}return e.abrupt("return",Promise.resolve(Object.assign({},r.wxAppNavigatePayload,{title:r.title,thumbnail:r.thumbnailURL,share_url:s||V(r.shareURL)})));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getShareForm",value:function(e){return[c.WECHAT_SESSION_TEXT,c.WECHAT_SESSION_TEXT_WITH_NO_SDK].indexOf(e)>=0?this.shortCommandApi?Q.COMMAND:Q.TEXT:Q.WXAPP_CARD}},{key:"getShareMethod",value:function(e){return K.SDK}}]),n}(ht),tr={NAVIGATE:0,REQUEST:1},rr=r("3sKm"),nr="";function ar(){return Object(rr.b)().then((function(e){nr=e})).catch((function(e){return""}))}function ir(){return nr}function sr(){return(sr=p()(E.a.mark((function e(){var t,r,n,a,i=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=Object(Y.a)({pageInfo:{pageId:Object(X.c)()}},{defaultErrorHandler:function(e){}}),e.t0=6,e.t1={code:1,params:t},e.t2=2,e.next=7,ir();case 7:return e.t3=e.sent,n={action_id:e.t0,payload:e.t1,os:e.t2,pdd_uid:e.t3},a=r.post("api/dcproxy/message/unicast",n),e.abrupt("return",a.then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.magic_trace})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var hr=D.ShareErrorCode,ur=[c.WECHAT_SESSION],cr=function(e){v()(r,e);var t=or(r);function r(e){var n;return s()(this,r),(n=t.call(this,e)).ShareEntityClass=er,n._enableShareTypes=ur.concat(),n}return h()(r,[{key:"share",value:function(e){return[c.WECHAT_SESSION_TEXT,c.WECHAT_SESSION_TEXT_WITH_NO_SDK].indexOf(e)>=0?this._shareText(e):e!==c.WECHAT_SESSION?hr.SHARE_ACTION_DISABLE:this.getShareEntityByShareType(e).wxAppShareMode===tr.REQUEST?this._shareByRequest():this._shareByNavigate()}},{key:"_shareByNavigate",value:function(){var e=this;if(!window.wx||!window.wx.miniProgram||"function"!=typeof window.wx.miniProgram.navigateTo)return hr.SHARE_NOT_SUPPORTED;var t=c.WECHAT_SESSION,r=this.getShareEntityByShareType(t);return this.emit(_.ON_SHARE_TRIGGER,{shareType:t}),r.normalize(t).then((function(r){window.wx.miniProgram.navigateTo({url:"".concat("/pages/web_share/web_share?").concat(Object(u.b)(Object.assign({page_sn:Object(X.e)()+"",page_name:Object(X.d)()},r)))}),e.emit(_.ON_SHARE_COMPLETED,{shareType:t,shareResultType:lt.SUCCESS})})),0}},{key:"_shareByRequest",value:function(){var e=this,t=c.WECHAT_SESSION,r=this.getShareEntityByShareType(t);this.emit(_.ON_SHARE_TRIGGER,{shareType:t});var n=r.wxAppRequestPayload||{};return function(){return sr.apply(this,arguments)}(Object.assign({pageSn:Object(X.e)()+"",pageName:Object(X.d)(),shareInfo:{shareURL:V(location&&location.href)}},n)).then((function(){e.emit(_.ON_SHARE_COMPLETED,{shareType:t,shareResultType:lt.SUCCESS})}),(function(r){e.emit(_.ON_SHARE_COMPLETED,{shareType:t,shareResultType:lt.FAIL,error:r})})),0}},{key:"refreshWxAppChannelShare",value:function(e){return this._setupPlatformShareSDK()}},{key:"notifyWxAppShareComplete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt.SUCCESS;this.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:t}),this.refreshWxAppChannelShare(e)}},{key:"_setupPlatformShareSDK",value:function(){var e=this;return"object"!==("undefined"==typeof wx?"undefined":a()(wx))||"object"!==a()(window.wx.miniProgram)||"function"!=typeof window.wx.miniProgram.postMessage?(this.emit(_.SDK_INIT_FAILED),Promise.resolve()):Promise.all(this._enableShareTypes.map((function(t){var r=e.getShareEntityByShareType(t);return r?(e.emit(_.ON_SHARE_PREPARE,{shareType:t}),r.normalize(t).then((function(e){try{window.wx.miniProgram.postMessage({data:{message_type:"share",share_info:e,page_info:{page_sn:Object(X.e)()+"",page_name:Object(X.d)(),page_id:Object(X.c)()}}})}catch(e){}}))):Promise.resolve()})))}},{key:"_shareText",value:function(e){var t=this,r=this.getShareEntityByShareType(e);return this.emit(_.ON_SHARE_TRIGGER,{shareType:e}),r.normalize(e).then((function(r){t.emit(_.ON_SHARE_COMPLETED,{shareType:e,shareResultType:lt.FAIL,shareParams:r})})),0}}]),r}(_t),_r={SUCCESS:"success",FAIL:"fail",CANCEL:"cancel",COMPLETE:"complete",ERROR:"error"},lr={SHARE:"share",SHARE_RESULT:"share_result"},Er=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.userID=t.userID||"",this.shareID=t.shareID||"",this.op=t.op||"event",this.subOP=t.subOP||"",this.shareChannel=t.shareChannel||"",this.shareResult=t.shareResult||"",this.shareURL=t.shareURL||"",this.shareDomain=t.shareDomain||"",this.shareForm=t.shareForm||"",this.shareMethod=t.shareMethod||"",this.shareAppID=t.shareAppID,this.pcode=t.pcode,this.wxShareCount=t.wxShareCount,this.cipherScene=t.cipherScene}return h()(e,[{key:"normalize",value:function(e){if(this.subOP===lr.SHARE)return{op:this.op,sub_op:this.subOP,share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,pcode:this.pcode,pcode_scene:this.cipherScene};if(this.subOP===lr.SHARE_RESULT){var t={op:this.op,sub_op:this.subOP,event:"share_result",share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_result:this.shareResult,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,wx_share_count:this.wxShareCount,pcode:this.pcode,pcode_scene:this.cipherScene};return this.walrusID&&(t.walrus_id=this.walrusID,t.walrus_type=this.walrusType),t}return{}}},{key:"getShareURLTrackingQueries",value:function(){return e.getTrackingQueries(this)}}]),e}();Er.TRACKING_SUB_OP=lr,Er.getTrackingQueries=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{refer_share_id:e.shareID,refer_share_uid:e.userID,refer_share_channel:e.shareChannel}};var Sr=Er;function pr(e){return e=e||32,Object(M.a)(e)}var fr,Tr,Ar={UNKNOWN:"unknown",APP_MESSAGE:"message",TIMELINE:"timeline",QQ:"qq",QQ_ZONE:"qzone",QQ_WEIBO:"qq_weibo",SINA_WEIBO:"weibo",CLIPBOARD:"copy_link"},Ir=(fr={},se()(fr,c.WECHAT_SESSION,Ar.APP_MESSAGE),se()(fr,c.WECHAT_TIMELINE,Ar.TIMELINE),se()(fr,c.WEIBO,Ar.SINA_WEIBO),se()(fr,c.QQ_CHAT_SESSION,Ar.QQ),se()(fr,c.QQ_ZONE,Ar.QQ_ZONE),se()(fr,c.TENCENT_WEIBO,Ar.QQ_WEIBO),se()(fr,c.WECHAT_SESSION_APP,Ar.APP_MESSAGE),se()(fr,c.WECHAT_TIMELINE_IMAGE,Ar.TIMELINE),se()(fr,c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK,Ar.TIMELINE),se()(fr,c.WECHAT_SESSION_IMAGE,Ar.APP_MESSAGE),se()(fr,c.QQ_CHAT_SESSION_IMAGE,Ar.QQ),se()(fr,c.QQ_ZONE_IMAGE,Ar.QQ_ZONE),se()(fr,c.WEIBO_IMAGE,Ar.SINA_WEIBO),se()(fr,c.FRIENDS,Ar.UNKNOWN),se()(fr,c.WECHAT_BIG_IMAGE,Ar.APP_MESSAGE),se()(fr,c.WECHAT_SESSION_TEXT_WITH_NO_SDK,Ar.APP_MESSAGE),se()(fr,c.WECHAT_SESSION_TEXT,Ar.APP_MESSAGE),se()(fr,c.WECHAT_SESSION_IMAGE_WITH_NO_SDK,Ar.APP_MESSAGE),se()(fr,c.WECHAT_SESSION_IMAGES_WITH_NO_SDK,Ar.APP_MESSAGE),se()(fr,c.WECHAT_TIMELINE_TEXT,Ar.TIMELINE),se()(fr,c.WECHAT_SESSION_CARD_WITH_NO_SDK,Ar.APP_MESSAGE),se()(fr,c.WECHAT_TIMELINE_CARD_WITH_NO_SDK,Ar.TIMELINE),se()(fr,c.COPY_LINK,Ar.CLIPBOARD),se()(fr,c.WECHAT_SESSION_MUSIC,Ar.APP_MESSAGE),se()(fr,c.WECHAT_SESSION_VIDEO,Ar.APP_MESSAGE),se()(fr,c.EXT_WECHAT_SESSION_CARD_SYSTEM,Ar.APP_MESSAGE),se()(fr,c.EXT_WECHAT_SESSION_IMAGE_SYSTEM,Ar.APP_MESSAGE),se()(fr,c.EXT_WECHAT_SESSION_CARD,Ar.APP_MESSAGE),se()(fr,c.EXT_WECHAT_TIMELINE_CARD,Ar.TIMELINE),se()(fr,c.EXT_WECHAT_SESSION_IMAGE,Ar.APP_MESSAGE),se()(fr,c.EXT_WECHAT_TIMELINE_IMAGE,Ar.TIMELINE),se()(fr,c.STAND_WECHAT_SESSION_CARD,Ar.APP_MESSAGE),se()(fr,c.STAND_WECHAT_SESSION_IMAGE,Ar.APP_MESSAGE),se()(fr,c.STAND_WECHAT_TIMELINE_CARD,Ar.TIMELINE),se()(fr,c.STAND_WECHAT_TIMELINE_IMAGE,Ar.TIMELINE),se()(fr,c.STAND_WECHAT_SESSION_TEXT,Ar.APP_MESSAGE),se()(fr,c.STAND_WECHAT_TIMELINE_TEXT,Ar.TIMELINE),fr);function vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Ir[e]||Ar.UNKNOWN}var dr=0,yr=1,mr=2,Cr=3,gr=(Tr={},se()(Tr,Ar.UNKNOWN,dr),se()(Tr,Ar.APP_MESSAGE,yr),se()(Tr,Ar.TIMELINE,yr),se()(Tr,Ar.QQ,mr),se()(Tr,Ar.QQ_ZONE,mr),se()(Tr,Ar.QQ_WEIBO,mr),se()(Tr,Ar.SINA_WEIBO,Cr),Tr);var Or=function(e){return gr[e]||dr},Rr=function(){function e(){s()(this,e),this._venderAppIDs={},this._isInited=!1}return h()(e,[{key:"build",value:function(e){var t=e.wechatAppID;return this._isInited?Promise.resolve():(this._isInited=!0,Object(f.a)().isNativePlatform?this._buildNativeCache():Object(f.a)().isWeChatPlatform?this._buildWeChatCache(t):Promise.resolve())}},{key:"isInited",value:function(){return this._isInited}},{key:"_buildNativeCache",value:function(){var e=this;return be.getVenderAppIds([yr]).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._venderAppIDs=Object.assign(e._venderAppIDs,t)})).catch((function(){return Promise.resolve()}))}},{key:"_buildWeChatCache",value:function(e){return this._venderAppIDs[yr]=e,Promise.resolve()}},{key:"getAppIDSync",value:function(e){var t=Or(e);return this._venderAppIDs[t]}}]),e}(),Nr=null;Rr.getInstance=function(e){return Nr||(Nr=new Rr(e)),Nr};var Lr=Rr,Dr=D.ShareErrorCode,Mr=Sr.TRACKING_SUB_OP;var Pr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.transparentTransmission=t.transparentTransmission||{},this.trackingEntity=null,this.onTriggerListener=null,this.onCompletedListener=null,this.shareController=null,this._cachePrepareInfo={}}return h()(e,[{key:"listen",value:function(e){e&&e instanceof _t&&(this.shareController=e,this._setupDefaultTrackListener(e))}},{key:"disconnect",value:function(){this.shareController&&this._removeDefaultTrackListener(this.shareController)}},{key:"updateTrackerTrans",value:function(e){this.transparentTransmission=Object.assign({},this.transparentTransmission,e)}},{key:"_setupDefaultTrackListener",value:function(e){this._removeDefaultTrackListener(e),this.onPrepareListener=this._onDefaultSharePrepare.bind(this),this.onTriggerListener=this._onDefaultShareTrigger.bind(this),this.onCompletedListener=this._onDefaultShareCompleted.bind(this),e.on(_.ON_SHARE_PREPARE,this.onPrepareListener),e.on(_.ON_SHARE_TRIGGER,this.onTriggerListener),e.on(_.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_removeDefaultTrackListener",value:function(e){this.onPrepareListener&&e.removeListener(_.ON_SHARE_PREPARE,this.onPrepareListener),this.onTriggerListener&&e.removeListener(_.ON_SHARE_TRIGGER,this.onTriggerListener),this.onCompletedListener&&e.removeListener(_.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_sendLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(e,this.transparentTransmission);ke.a.trackingRecord(t)}},{key:"_onDefaultSharePrepare",value:function(e){var t=e.shareType;if(this._cachePrepareInfo[t]){var r=this.shareController.getShareEntityByShareType(t)||{},n=this._cachePrepareInfo[t];return n.userID=ir(),void r.setShareURLQueries(Sr.getTrackingQueries(n))}var a=this.shareController.getShareEntityByShareType(t),i={userID:ir(),shareID:this._getCachedShareID(a)||pr(),shareChannel:vr(t)};a&&a.setShareURLQueries(Sr.getTrackingQueries(i)),this._cachePrepareInfo[t]=i}},{key:"_onDefaultShareTrigger",value:function(e){var t=e.shareType,r=e.shareID;if(t===c.PIN_TIMELINE)return 0;var n=this.shareController.getShareEntityByShareType(t)||{},a=this._cachePrepareInfo[t];this._cachePrepareInfo[t]=null;var i=vr(t),s=Lr.getInstance();if(this.trackingEntity=new Sr(Object.assign({userID:ir(),shareID:this._getCachedShareID(n)||pr(),subOP:Mr.SHARE,shareChannel:i,timelineDomain:n.timelineDomain,cipherScene:n.cipherScene,shareForm:n.getShareForm&&n.getShareForm(t),shareMethod:n.getShareMethod&&n.getShareMethod(t),shareAppID:s.getAppIDSync(i)},a,r?{shareID:r}:null)),!a&&n.setShareURLQueries(Sr.getTrackingQueries(this.trackingEntity)),n.getShareForm(t)!==Q.COMMAND){var o=n.targetShareURL||n.shareURL;this.trackingEntity.shareURL=o,this.trackingEntity.shareDomain=new k(o).origin}this._sendLog(this.trackingEntity.normalize(t))}},{key:"_onDefaultShareCompleted",value:function(e){var t=e.shareType,r=e.shareResultType,n=e.useComplete,i=e.responseData,s=void 0===i?{}:i,o=e.tpInfo;if(t===c.PIN_TIMELINE)return 0;if(!this.trackingEntity)return Dr.SHARE_STATUS_ILLEGAL;var h=this.shareController.getShareEntityByShareType(t)||{},u=this.getShareResultByType(r);if(n&&(u=_r.COMPLETE),h.getShareForm(t)!==Q.COMMAND){var _=h.realShareURL||h.shareURL;this.trackingEntity.shareURL=_,this.trackingEntity.shareDomain=new k(_).origin}else this.trackingEntity.pcode=h.pcode;var l,E=(l=s)&&"object"===a()(l)?"string"!=typeof l.wx_app_id?null:l.wx_app_id:null;E&&(this.trackingEntity.shareAppID=E),s.hasOwnProperty("wx_share_count")&&(this.trackingEntity.wxShareCount=s.wx_share_count,delete s.wx_share_count),this.trackingEntity.subOP=Mr.SHARE_RESULT,this.trackingEntity.shareResult=u,o&&(this.trackingEntity.walrusID=o.group_id,this.trackingEntity.walrusType=o.dev_type),h.forceDowngrade||Object(f.a)().platform===g.a.PddIOS&&t===c.WECHAT_SESSION_TEXT_WITH_NO_SDK||(this._sendLog(this.trackingEntity.normalize(t)),this.trackingEntity=null)}},{key:"trackProlongation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(!this.trackingEntity)return!1;this.trackingEntity.shareMethod=K.MANUAL,this.trackingEntity.shareResult=_r.COMPLETE;var n=Object.assign(this.trackingEntity.normalize(e),t);return this.trackingEntity=null,"function"==typeof r?r(n):this._sendLog(n),!0}},{key:"getShareResultByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case lt.COMPLETE:return _r.COMPLETE;case lt.SUCCESS:return _r.SUCCESS;case lt.FAIL:return _r.FAIL;case lt.CANCEL:return _r.CANCEL;default:return _r.ERROR}}},{key:"_getCachedShareID",value:function(e){if(e.urlWrapType===G.SERVER_SHORT_URL_WITH_CACHE){var t=Ne(),r=me(e);return t.getShareID(r)}}}]),e}(),Hr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(Y.a)({pageInfo:{pageId:Object(X.c)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=t.shareParams||{},n.origin=t.platform||"",n.page_sn=t.pageSn||Object(X.e)()+"",n.page_info=t.pageInfo||{page_name:Object(X.d)(),page_url:location&&location.href},"post"===e.toLowerCase()?r.post("api/flow/audience/share/content",n):r.get("api/flow/audience/share/content",{params:n})},br=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(Y.a)({pageInfo:{pageId:Object(X.c)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=t.shareParams||{},n.share_type=t.shareType||0,n.share_method=t.shareMethod||"",n.origin=t.platform||"",n.page_sn=t.pageSn||Object(X.e)(),n.page_info=t.pageInfo||{page_name:Object(X.d)(),page_url:location&&location.href},n.extra=t.extra||{},"post"===e.toLowerCase()?r.post("api/flow/audience/share/perform",n):r.get("api/flow/audience/share/perform",{params:n})},kr={REACH_HOUR_LIMIT:43367,REACH_DAY_LIMIT:43368},Wr=function(){function e(){s()(this,e),this._shareController=null,this._onPerformShareErrorHandler=null}return h()(e,[{key:"listen",value:function(e){e&&e instanceof _t&&(this._shareController=e,this._setupListener(e))}},{key:"disconnect",value:function(){this.removeListener()}},{key:"_setupListener",value:function(e){this.removeListener(),this._onPerformShareErrorHandler=this._onPerformShareError.bind(this),e.on(_.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"removeListener",value:function(){this._shareController&&this._onPerformShareErrorHandler&&this._shareController.removeListener(_.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"_onPerformShareError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error||{},r=e.shareType,n=parseInt(t.errorCode,10)||0;[kr.REACH_DAY_LIMIT,kr.REACH_HOUR_LIMIT].indexOf(n)>=0&&(this._shareController.emit(_.SHARE_REACH_LIMIT,{shareType:r,errorCode:n}),this.hideShareMenuOption(r))}},{key:"hideShareMenuOption",value:function(e){var t=this._shareController;e&&t&&t.disableShare(e)}}]),e}(),Ur="undefined"!=typeof window,wr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.shareController=null,this.shareTracker=null,this.menuWatcher=null,this.platform=fe(),this._disableContentCheck=!1,this._disablePerformShareLog=!1,this.controllerOptions=t.controllerOptions||{},this.noDefaultShare=t.noDefaultShare||!1,this.disableShare=t.disableShare||!1}var t,r;return h()(e,[{key:"setup",value:function(){Ur&&(this._setupController(),this._setupShareTracker(),this._setupMenuWatcher(),this._setupPerformShareLog())}},{key:"_setupController",value:function(){var e=this;if(!this.shareController){var t=this.controllerOptions,r=Object(f.a)();r.isWeChatMiniProgram?this.shareController=new cr(t):r.isWeChatPlatform?(this.shareController=new Gt(t),this.noDefaultShare||this._prepareShareController()):r.isQQPlatform?(this.shareController=new Jt(t),this.noDefaultShare||this._prepareShareController()):(r.isNativePlatform||r.isTinyNativePlatform)&&(this.shareController=new Pt(t),this.shareController.on(_.ON_SHARE_COMPLETED,(function(t){var r=t.shareType,n=t.shareResultType,a=t.nativeShareErrorCode;n===lt.FAIL&&[kr.REACH_HOUR_LIMIT,kr.REACH_DAY_LIMIT].indexOf(a)>=0&&(e.shareController.emit(_.SHARE_REACH_LIMIT,{shareType:r,errorCode:a}),We({errorCode:a,message:"分享达到上限"}))})))}}},{key:"_prepareShareController",value:function(){this.shareController&&!this.shareController.isInited()&&this.shareController.initShare()}},{key:"_setupMenuWatcher",value:function(){this.menuWatcher||(this.menuWatcher=new Wr,this.menuWatcher.listen(this.shareController))}},{key:"_setupShareTracker",value:function(){this.disableTracker||this.shareTracker||(this.shareTracker=new Pr({transparentTransmission:this.trackerTrans}),this.shareTracker.listen(this.shareController))}},{key:"_setupPerformShareLog",value:function(){var e=this;this.shareController&&!Object(f.a)().isNativePlatform&&this.shareController.on(_.ON_SHARE_COMPLETED,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e._disablePerformShareLog&&t.shareResultType===lt.SUCCESS){var r=t.shareType,n=e.getShareEntity(r);br("post",{platform:e.platform,shareType:r,shareParams:Se(n),shareMethod:pe(n,r),extra:n.payloadMixin&&n.payloadMixin.extra}).catch((function(t){e.shareController.emit(_.PERFORM_LOG_FAILED,{shareType:r,error:t})}))}}))}},{key:"share",value:(r=p()(E.a.mark((function e(t){var r,n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shareController&&!this.disableShare){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:return e.next=4,ar();case 4:if(this._prepareShareController(),r=function(){return new Promise((function(e,r){var a=n,i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shareResultType;s(),lt.SUCCESS===n?e(t):r(t)};function s(){a.shareController.removeListener(_.ON_SHARE_COMPLETED,i)}n.shareController.on(_.ON_SHARE_COMPLETED,i);var o=n.shareController.share(t);o&&(s(),n.shareController.emit(_.ON_SHARE_INTERRUPT,{shareType:t,shareErrorType:o}),We({errorCode:o,message:"分享前置流程异常",options:{shareType:t}}),r({shareType:t,shareErrorType:o}))}))},!Object(f.a)().isNativePlatform){e.next=10;break}return e.abrupt("return",this.shareController.waitShareLimiter().then((function(e){return r()}),(function(e){return r()})));case 10:return e.abrupt("return",r());case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"checkShareContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Hr("post",{platform:this.platform,shareParams:Se(e)})}},{key:"setContentCheck",value:function(e){this._disableContentCheck=!e}},{key:"setPerformShareLog",value:function(e){this._disablePerformShareLog=!e}},{key:"prepareShare",value:(t=p()(E.a.mark((function e(){var t,r,n,a,i,s,o,h,u=this,c=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=c.length>1?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},this.shareController){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return e.next=7,ar();case 7:if(this._prepareShareController(),a=t.entityConfig,i=void 0===a?{}:a,s=t.statisticsConfig,o=void 0===s?{}:s,this.shareTracker&&this.shareTracker.updateTrackerTrans(o),h=this.shareController.createShareEntity(i,r),!(n.skipShareContentCheck||this._disableContentCheck||Object(f.a)().isNativePlatform)){e.next=13;break}return e.abrupt("return",this.shareController.refreshShare(h,r));case 13:return e.abrupt("return",this.checkShareContent(h).then((function(){return u.shareController.refreshShare(h,r)})));case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getShareController",value:function(){return this.shareController}},{key:"getShareTracker",value:function(){return this.shareTracker}},{key:"getShareEntity",value:function(e,t){return this.shareController?this.shareController.getShareEntityByShareType(e,t):null}},{key:"setupNativeShareButton",value:function(e,t){this.shareController&&(this.shareController.removeAllListeners(_.ON_SHARE_BUTTON_CLICKED),"function"==typeof t&&this.shareController.on(_.ON_SHARE_BUTTON_CLICKED,t),this.shareController.setupNativeShareButton(e))}}]),e}(),xr={USELESS:-1,DEFAULT:0,OUT_OF_DATE:1,FORBIDDEN:2,ABANDONED:3},jr={title:xr.DEFAULT,message:xr.DEFAULT,thumbnailURL:xr.DEFAULT,shareURL:xr.DEFAULT,shareDomain:xr.DEFAULT,waterMark:xr.DEFAULT,timelineDomain:xr.DEFAULT,timelineAppId:xr.DEFAULT,urlWrapType:xr.DEFAULT,drawImageOptions:xr.DEFAULT,drawImageClass:xr.DEFAULT,marketActivityID:xr.DEFAULT,addRandomPrefix:xr.DEFAULT,miniObjectPath:xr.DEFAULT,miniObjectID:xr.DEFAULT,useWxAppShare:xr.DEFAULT,shortURLApi:xr.DEFAULT,shortCommandApi:xr.DEFAULT,domainURLApi:xr.DEFAULT,forceDowngrade:xr.DEFAULT,payloadMixin:xr.DEFAULT,requestUsePost:xr.DEFAULT,excludeShareChoices:xr.DEFAULT,thirdPartyOpenType:xr.DEFAULT,needSharedAmount:xr.DEFAULT,maskTemplateID:xr.DEFAULT,maskData:xr.DEFAULT,cipherScene:xr.DEFAULT,consumeMode:xr.DEFAULT,activitySceneSn:xr.DEFAULT,tpSelectCategory:xr.DEFAULT,pinTimelineParams:xr.DEFAULT,wxAppShareMode:xr.DEFAULT,wxAppRequestPayload:xr.DEFAULT,cipherProcessor:xr.DEFAULT,wxAppNavigatePayload:xr.DEFAULT},Gr={},Fr={onlyWeChat:xr.USELESS,noDefaultShare:xr.DEFAULT,isSDKPrepare:xr.DEFAULT,disableShare:xr.DEFAULT,disableCopyUrl:xr.USELESS,enableBroswerOpen:xr.USELESS},Br={cid:xr.DEFAULT,campaign:xr.DEFAULT},Qr={wechatAppID:xr.DEFAULT,magicTrace:xr.DEFAULT,shareTypeEnable:xr.DEFAULT},Kr=xr,Xr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.cacheRaw=t.cacheRaw||!1,this.deleteAfterCollect=t.deleteAfterCollect||!1}return h()(e,[{key:"filter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._filterShareEntity(e),r=this._filterShareCallbacks(e),n=this._filterStatistics(e),a=this._filterShareConfigFlag(e),i=this._filterShareOther(e),s={};return{_rawShareInfo:this.cacheRaw?e:null,entityConfig:t,callbackConfig:r,statisticsConfig:n,flowControllConfig:a,otherConfig:i,compatibleShareConfig:s}}},{key:"_filterByItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(r)||[],a={};return n.forEach((function(n,i){var s=r[n];s===Kr.FORBIDDEN||s===Kr.ABANDONED?delete t[n]:void 0!==t[n]&&(a[n]=t[n],e.deleteAfterCollect&&delete t[n])})),a}},{key:"_filterShareEntity",value:function(e){return this._filterByItems(e,jr)}},{key:"_filterShareConfigFlag",value:function(e){return this._filterByItems(e,Fr)}},{key:"_filterShareCallbacks",value:function(e){return this._filterByItems(e,Gr)}},{key:"_filterStatistics",value:function(e){return this._filterByItems(e,Br)}},{key:"_filterShareOther",value:function(e){return this._filterByItems(e,Qr)}}]),e}(),Yr={DEFAULT:"!share_v2",WE_CHAT_MSG:"!share_v3",SHARE:"!share",TRANSPARENT:"!transparent",NONE:"",NO_LOGO:"!share_v4"},qr=r("3OdE"),Vr={};"undefined"!=typeof window&&(Vr=qr.a.get(location.host)||{});var Zr={code:null,from:null,isappinstalled:null,at:null,share_id:null,is_back:null,page_id:null,list_id:null},zr=["refer_page_name","refer_page_section","refer_page_element","refer_page_id","refer_page_sn","refer_page_el_sn","refer_mid","refer_adg","refer_cam","refer_ced"];function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(e=e||"").indexOf("!")>=0&&!r?e:(e=e.split("!")[0],e+=t)}var $r=null,en=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this._hasInited=!1,this.opts=t||{},this.shopConfig=t.shopConfig,this.defaultShareEntityConfig={},this.shareManager=null,this.shareInfoFilter=null,this._sdkPrepared=!1,this.setup()}return h()(e,[{key:"setup",value:function(){this._hasInited||(this._hasInited=!0,this._setupShareInfoFilter(),this._setupShareManager(),!(this.opts.shareManagerConfig||{}).noDefaultShare&&this._prepareDefaultShare(),this.waitAppIDCacheBuild())}},{key:"_setupShareInfoFilter",value:function(){this.shareInfoFilter||(this.shareInfoFilter=new Xr(this.opts.shareInfoFilterConfig))}},{key:"_setupShareManager",value:function(){if(!this.shareManager){var e=Object.assign({},{noDefaultShare:!1,disableShare:!1,useNativeShareButton:!1},this.opts.shareManagerConfig);this.shareManager=new wr(e),this.shareManager.setup()}}},{key:"_prepareDefaultShare",value:function(){if(!Object(f.a)().isWeChatMiniProgram){var e=this.shopConfig||Vr.shop||{},t=e.name||"拼多多";Object.assign(this.defaultShareEntityConfig,{title:"".concat(t,"商城"),message:"风靡全国的拼单商城，优质商品新鲜直供，快一起来".concat(t,"吧"),thumbnailURL:e.logo,shareURL:"/"}),this.prepareShare(this.defaultShareEntityConfig,void 0,{skipShareContentCheck:!0})}}},{key:"_prepareShareByShareType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(!this._hasInited)return Promise.reject();var n=e.entityConfig,a=void 0===n?{}:n;return this._buildThumbnailURL(a,t),this._buildShareURL(a,t),this.shareManager.prepareShare(e,t,r)}},{key:"prepareShare",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._hasInited)return Promise.reject();var a=this.shareInfoFilter.filter(e),i=this._prepareShareByShareType(a,t,n);return!this._sdkPrepared&&i.then((function(e){r._checkSDKPrepared(a)}),(function(e){r._checkSDKPrepared(a)})),i}},{key:"prepareShareSafe",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(!this._hasInited)return Promise.reject();var n=this.shareInfoFilter.filter(t),a=n.flowControllConfig,i=void 0===a?{}:a;if(!this._sdkPrepared&&!i.isSDKPrepare)return this.waitSDKReady().then((function(){return e._prepareShareByShareType(n,r)}));var s=this._prepareShareByShareType(n,r);return!this._sdkPrepared&&s.then((function(t){e._checkSDKPrepared(n)}),(function(t){e._checkSDKPrepared(n)})),s}},{key:"waitSDKReady",value:function(){var e=this;return this.waitWeChatSDKReady().then((function(){return e.waitAppIDCacheBuild()}))}},{key:"waitWeChatSDKReady",value:function(){if(this._sdkPrepared)return Promise.resolve();if(this.sdkReadyPromise)return this.sdkReadyPromise;var e=this.shareManager.getShareController();return e?(this.sdkReadyPromise=new Promise((function(t,r){e.once(_.ON_SDK_READY,(function(){t()}))})),this.sdkReadyPromise):Promise.resolve()}},{key:"waitAppIDCacheBuild",value:function(){var e=Lr.getInstance();if(e.isInited())return Promise.resolve();if(this._actualWeChatAppID)return e.build({wechatAppID:this._actualWeChatAppID});if(!this.appIDReadyPromise){var t=this.shareManager.getShareController();if(!t)return Promise.resolve();this.appIDReadyPromise=new Promise((function(r,n){t.once(_.ON_SDK_READY,(function(t){var n=t.wechatAppID,a=t.magicTrace;Promise.all([e.build({wechatAppID:n}),ve.getInstance().build({magicTrace:a})]).then((function(){r()}))}))}))}return this.appIDReadyPromise}},{key:"share",value:function(e,t){var r=this;return this._hasInited?t?this.prepareShareSafe(t,e).then((function(){return r.shareManager.share(e)})):this.shareManager.share(e):Promise.reject()}},{key:"_buildThumbnailURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.thumbnailURL;if(void 0!==r){var n=e.waterMark,a=r||"";null==n&&(n=Yr.DEFAULT),a=Jr(a,n),t===c.WECHAT_SESSION&&n===Yr.DEFAULT&&(a=Jr(a,Yr.WE_CHAT_MSG,!0)),a=(a||"").replace(/^\/\//,"http://"),e.thumbnailURL=a}}},{key:"_buildShareURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.shareURL;if(r){if(e.urlWrapType!==G.RAW){var n=new k(r),a=n.query||{},i=Object.keys(a).reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return zr.indexOf(t)>=0&&(e[t]=null),e}),{}),s=Object(X.b)(!0),o={_wv:41729,_wvx:10};!Object(f.a)().isWeChatPlatform||t!==c.QQ_CHAT_SESSION&&t!==c.QQ_ZONE||(o.sf_tag="wechat"),t!==c.WECHAT_TIMELINE_IMAGE&&t!==c.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK||(o.from="qrImg");var h=n.pathname||"";e.addRandomPrefix&&(h=h.replace(/(\w+)\.html/g,(function(e){return Math.floor(1e3*Math.random())+""+e})));var _=Object.assign({},o,a,s,Zr,i),l=e.shareDomain||Vr.shareDomain;e.shareURL=W(_,Object(u.h)(h),l)}}else delete e.shareURL}},{key:"_checkSDKPrepared",value:function(e){var t=e.flowControllConfig,r=void 0===t?{}:t,n=e.otherConfig,i=void 0===n?{}:n;if(r.isSDKPrepare&&!this._sdkPrepared){this._sdkPrepared=!0;var s=this.shareManager.getShareController();i.wechatAppID&&(this._actualWeChatAppID=i.wechatAppID);var o=i.shareTypeEnable;if(o&&"object"===a()(o)){var h=Object.keys(o).filter((function(e){return!o[e]})).map((function(e){return parseInt(e,10)}));s.disableShare(h)}s&&s.emit(_.ON_SDK_READY,{wechatAppID:i.wechatAppID,magicTrace:i.magicTrace})}}},{key:"getShareManager",value:function(){return this.shareManager?this.shareManager:null}},{key:"setupNativeShareButton",value:function(e,t){if(this.shareManager)return this.shareManager.setupNativeShareButton(e,t)}}]),e}();en.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $r||($r=new en(e)),$r};var tn=en,rn={ALIGNMENT_CENTER:"alignment_center",BOLD_FONT:"bold_font",CORRECTION_LEVEL:"correction_level",DATA:"data",FILL:"fill",FONT_SIZE:"font_size",FONT_COLOR:"font_color",HEIGHT:"height",POS_X:"x",POS_Y:"y",SOURCE:"source",WIDTH:"width",KEY:"key"};var nn=Object.keys(rn).reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e[rn[t]]=1,e}),{}),an=function(){function e(){var t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;s()(this,e),this.attributes={},this.setBounds(t,r,n,a),this.setData(i)}return h()(e,[{key:"setAttr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;nn[e]&&(this.attributes[e]=t)}},{key:"setLocation",value:function(e,t){void 0!==e&&void 0!==t&&(this.setAttr(rn.POS_X,e),this.setAttr(rn.POS_Y,t))}},{key:"setSize",value:function(e,t){void 0!==e&&void 0!==t&&(this.setAttr(rn.WIDTH,e),this.setAttr(rn.HEIGHT,t))}},{key:"setData",value:function(e){void 0!==e&&this.setAttr(rn.DATA,e)}},{key:"setBounds",value:function(e,t,r,n){this.setLocation(e,t),this.setSize(r,n)}},{key:"setKey",value:function(e){this.setAttr(rn.KEY,e)}},{key:"getAttrs",value:function(){return this.attributes}}]),e}();an.SOURCE_TYPE={RECTANGLE:"rectangle",IMAGE:"image",TEXT:"text",QRCODE:"qrcode"},an.ATTRIBUTES=rn,an.ATTRIBUTES_VALUES=nn,an.color=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return parseInt(e.slice(1),16)},an.CorrectionLevel={M:0,L:1,Q:3,H:2};var sn=an;function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var hn=sn.ATTRIBUTES,un=sn.SOURCE_TYPE,cn=function(e){v()(r,e);var t=on(r);function r(){var e;return s()(this,r),(e=t.apply(this,arguments)).setAttr(hn.SOURCE,un.IMAGE),e}return r}(sn);function _n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var ln=sn.ATTRIBUTES,En=sn.SOURCE_TYPE,Sn=sn.CorrectionLevel,pn=Object.keys(Sn).map((function(e){return Sn[e]})),fn=function(e){v()(r,e);var t=_n(r);function r(){var e;return s()(this,r),(e=t.apply(this,arguments)).setAttr(ln.SOURCE,En.QRCODE),e}return h()(r,[{key:"setCorrectionLevel",value:function(e){pn.indexOf(e)<0||this.setAttr(ln.CORRECTION_LEVEL,e)}}]),r}(sn);fn.CorrectionLevel=Sn;var Tn=fn;function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var In=sn.ATTRIBUTES,vn=sn.SOURCE_TYPE,dn=function(e){v()(r,e);var t=An(r);function r(){var e;return s()(this,r),(e=t.apply(this,arguments)).setAttr(In.SOURCE,vn.TEXT),e}return h()(r,[{key:"setFontSize",value:function(e){e&&this.setAttr(In.FONT_SIZE,e)}},{key:"setRemFontSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setFontSize(45*e)}},{key:"setColor",value:function(e){var t=In.FONT_COLOR;"number"==typeof e?this.setAttr(t,e):"string"==typeof e&&this.setAttr(t,sn.color(e))}},{key:"setAlignCenter",value:function(){this.setAttr(In.ALIGNMENT_CENTER,!0)}},{key:"setBold",value:function(){this.setAttr(In.BOLD_FONT,!0)}}]),r}(sn);function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C()(e);if(t){var a=C()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var mn=sn.ATTRIBUTES,Cn=sn.SOURCE_TYPE,gn={PaintImage:cn,QRCode:Tn,Rectangle:function(e){v()(r,e);var t=yn(r);function r(){var e;return s()(this,r),(e=t.apply(this,arguments)).setAttr(mn.SOURCE,Cn.RECTANGLE),e}return h()(r,[{key:"setFill",value:function(e){this.setAttr(mn.FILL,e)}}]),r}(sn),Text:dn},On={POST_TO_FACEBOOK:1,POST_TO_TWITTER:2,POST_TO_WEIBO:3,MESSAGE:4,MAIL:5,PRINT:6,COPY_TO_PASTEBOARD:7,ASSIGN_TO_CONTACT:8,SAVE_TO_CAMERA_ROLL:9,ADD_TO_READING_LIST:10,POST_TO_FLICKR:11,POST_TO_VIMEO:12,POST_TO_TENCENT_WEIBO:13,AIR_DROP:14};r.d(t,"ShareErrorCode",(function(){return Rn})),r.d(t,"paintElems",(function(){return gn})),r.d(t,"ShareChannel",(function(){return Ar})),r.d(t,"ShareEventType",(function(){return _})),r.d(t,"ShareImage",(function(){return pt})),r.d(t,"ShareResult",(function(){return _r})),r.d(t,"ShareResultType",(function(){return lt})),r.d(t,"ShareType",(function(){return c})),r.d(t,"ShareWaterMark",(function(){return Yr})),r.d(t,"URLWrapType",(function(){return G})),r.d(t,"ShareForm",(function(){return Q})),r.d(t,"ShareMethod",(function(){return K})),r.d(t,"IOSSystemShareChoice",(function(){return On})),r.d(t,"ThirdPartyOpenType",(function(){return Ct})),r.d(t,"WxAppShareMode",(function(){return tr})),r.d(t,"CipherConsumeMode",(function(){return Ye})),r.d(t,"TPSelectCategory",(function(){return $e}));var Rn=D.ShareErrorCode,Nn={};Nn=tn;t.default=Nn}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-personal-normal-hybrid/../normal-assets/js/pdd-mod/market-share_e3f6091350cc9acedb4a.js.map