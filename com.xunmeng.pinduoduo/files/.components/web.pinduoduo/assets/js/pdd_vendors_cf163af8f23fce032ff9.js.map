{"version":3,"file":"assets/js/pdd_vendors_cf163af8f23fce032ff9.js","mappings":"wGAAAA,EAAOC,QAAU,EAAjB,O,iCCEA,IAAIC,EAAQ,EAAQ,MAChBC,EAAS,EAAQ,MACjBC,EAAU,EAAQ,MAClBC,EAAW,EAAQ,MACnBC,EAAgB,EAAQ,MACxBC,EAAe,EAAQ,MACvBC,EAAkB,EAAQ,MAC1BC,EAAc,EAAQ,MACtBC,EAAW,EAAQ,MACnBC,EAAS,EAAQ,MAErBX,EAAOC,QAAU,SAAoBW,GACnC,OAAO,IAAIC,SAAQ,SAA4BC,EAASC,GACtD,IAGIC,EAHAC,EAAcL,EAAOM,KACrBC,EAAiBP,EAAOQ,QACxBC,EAAeT,EAAOS,aAE1B,SAASC,IACHV,EAAOW,aACTX,EAAOW,YAAYC,YAAYR,GAG7BJ,EAAOa,QACTb,EAAOa,OAAOC,oBAAoB,QAASV,GAI3Cd,EAAMyB,WAAWV,WACZE,EAAe,gBAGxB,IAAIS,EAAU,IAAIC,eAGlB,GAAIjB,EAAOkB,KAAM,CACf,IAAIC,EAAWnB,EAAOkB,KAAKC,UAAY,GACnCC,EAAWpB,EAAOkB,KAAKE,SAAWC,SAASC,mBAAmBtB,EAAOkB,KAAKE,WAAa,GAC3Fb,EAAegB,cAAgB,SAAWC,KAAKL,EAAW,IAAMC,GAGlE,IAAIK,EAAW/B,EAAcM,EAAO0B,QAAS1B,EAAO2B,KAMpD,SAASC,IACP,GAAKZ,EAAL,CAIA,IAAIa,EAAkB,0BAA2Bb,EAAUrB,EAAaqB,EAAQc,yBAA2B,KAGvGC,EAAW,CACbzB,KAHkBG,GAAiC,SAAjBA,GAA6C,SAAjBA,EACvCO,EAAQe,SAA/Bf,EAAQgB,aAGRC,OAAQjB,EAAQiB,OAChBC,WAAYlB,EAAQkB,WACpB1B,QAASqB,EACT7B,OAAQA,EACRgB,QAASA,GAGXzB,GAAO,SAAkB4C,GACvBjC,EAAQiC,GACRzB,OACC,SAAiB0B,GAClBjC,EAAOiC,GACP1B,MACCqB,GAGHf,EAAU,MAoEZ,GAnGAA,EAAQqB,KAAKrC,EAAOsC,OAAOC,cAAe9C,EAASgC,EAAUzB,EAAOwC,OAAQxC,EAAOyC,mBAAmB,GAGtGzB,EAAQ0B,QAAU1C,EAAO0C,QA+BrB,cAAe1B,EAEjBA,EAAQY,UAAYA,EAGpBZ,EAAQ2B,mBAAqB,WACtB3B,GAAkC,IAAvBA,EAAQ4B,aAQD,IAAnB5B,EAAQiB,QAAkBjB,EAAQ6B,aAAwD,IAAzC7B,EAAQ6B,YAAYC,QAAQ,WAKjFC,WAAWnB,IAKfZ,EAAQgC,QAAU,WACXhC,IAILb,EAAON,EAAY,kBAAmBG,EAAQ,eAAgBgB,IAG9DA,EAAU,OAIZA,EAAQiC,QAAU,WAGhB9C,EAAON,EAAY,gBAAiBG,EAAQ,KAAMgB,IAGlDA,EAAU,MAIZA,EAAQkC,UAAY,WAClB,IAAIC,EAAsB,cAAgBnD,EAAO0C,QAAU,cACvDU,EAAepD,EAAOoD,cAAgBtD,EAASsD,aAC/CpD,EAAOmD,sBACTA,EAAsBnD,EAAOmD,qBAE/BhD,EAAON,EACLsD,EACAnD,EACAoD,EAAaC,oBAAsB,YAAc,eACjDrC,IAGFA,EAAU,MAMR1B,EAAMgE,uBAAwB,CAEhC,IAAIC,GAAavD,EAAOwD,iBAAmB5D,EAAgB6B,KAAczB,EAAOyD,eAC9EjE,EAAQkE,KAAK1D,EAAOyD,qBACpBE,EAEEJ,IACFhD,EAAeP,EAAO4D,gBAAkBL,GAKxC,qBAAsBvC,GACxB1B,EAAMuE,QAAQtD,GAAgB,SAA0BuD,EAAKC,QAChC,IAAhB1D,GAAqD,iBAAtB0D,EAAIC,qBAErCzD,EAAewD,GAGtB/C,EAAQiD,iBAAiBF,EAAKD,MAM/BxE,EAAM4E,YAAYlE,EAAOwD,mBAC5BxC,EAAQwC,kBAAoBxD,EAAOwD,iBAIjC/C,GAAiC,SAAjBA,IAClBO,EAAQP,aAAeT,EAAOS,cAIS,mBAA9BT,EAAOmE,oBAChBnD,EAAQoD,iBAAiB,WAAYpE,EAAOmE,oBAIP,mBAA5BnE,EAAOqE,kBAAmCrD,EAAQsD,QAC3DtD,EAAQsD,OAAOF,iBAAiB,WAAYpE,EAAOqE,mBAGjDrE,EAAOW,aAAeX,EAAOa,UAG/BT,EAAa,SAASmE,GACfvD,IAGLb,GAAQoE,GAAWA,GAAUA,EAAOC,KAAQ,IAAIzE,EAAO,YAAcwE,GACrEvD,EAAQyD,QACRzD,EAAU,OAGZhB,EAAOW,aAAeX,EAAOW,YAAY+D,UAAUtE,GAC/CJ,EAAOa,SACTb,EAAOa,OAAO8D,QAAUvE,IAAeJ,EAAOa,OAAOuD,iBAAiB,QAAShE,KAI9EC,IACHA,EAAc,MAIhBW,EAAQ4D,KAAKvE,Q,kCC/MjB,IAAIf,EAAQ,EAAQ,MAChBuF,EAAO,EAAQ,MACfC,EAAQ,EAAQ,MAChBC,EAAc,EAAQ,MA4B1B,IAAIC,EAnBJ,SAASC,EAAeC,GACtB,IAAIC,EAAU,IAAIL,EAAMI,GACpBE,EAAWP,EAAKC,EAAMO,UAAUrE,QAASmE,GAa7C,OAVA7F,EAAMgG,OAAOF,EAAUN,EAAMO,UAAWF,GAGxC7F,EAAMgG,OAAOF,EAAUD,GAGvBC,EAASG,OAAS,SAAgBC,GAChC,OAAOP,EAAeF,EAAYG,EAAeM,KAG5CJ,EAIGH,CA3BG,EAAQ,OA8BvBD,EAAMF,MAAQA,EAGdE,EAAMjF,OAAS,EAAQ,MACvBiF,EAAMS,YAAc,EAAQ,MAC5BT,EAAMU,SAAW,EAAQ,MACzBV,EAAMW,QAAU,gBAGhBX,EAAMY,IAAM,SAAaC,GACvB,OAAO5F,QAAQ2F,IAAIC,IAErBb,EAAMc,OAAS,EAAQ,MAGvBd,EAAMe,aAAe,EAAQ,MAE7B3G,EAAOC,QAAU2F,EAGjB5F,EAAOC,QAAP,QAAyB2F,G,8BChDzB,SAASjF,EAAOiG,GACdC,KAAKD,QAAUA,EAGjBjG,EAAOsF,UAAUa,SAAW,WAC1B,MAAO,UAAYD,KAAKD,QAAU,KAAOC,KAAKD,QAAU,KAG1DjG,EAAOsF,UAAUc,YAAa,EAE9B/G,EAAOC,QAAUU,G,kCChBjB,IAAIA,EAAS,EAAQ,MAQrB,SAAS0F,EAAYW,GACnB,GAAwB,mBAAbA,EACT,MAAM,IAAIC,UAAU,gCAGtB,IAAIC,EAEJL,KAAKM,QAAU,IAAItG,SAAQ,SAAyBC,GAClDoG,EAAiBpG,KAGnB,IAAIsG,EAAQP,KAGZA,KAAKM,QAAQE,MAAK,SAASlC,GACzB,GAAKiC,EAAME,WAAX,CAEA,IAAIC,EACAC,EAAIJ,EAAME,WAAWG,OAEzB,IAAKF,EAAI,EAAGA,EAAIC,EAAGD,IACjBH,EAAME,WAAWC,GAAGpC,GAEtBiC,EAAME,WAAa,SAIrBT,KAAKM,QAAQE,KAAO,SAASK,GAC3B,IAAIC,EAEAR,EAAU,IAAItG,SAAQ,SAASC,GACjCsG,EAAM9B,UAAUxE,GAChB6G,EAAW7G,KACVuG,KAAKK,GAMR,OAJAP,EAAQhC,OAAS,WACfiC,EAAM5F,YAAYmG,IAGbR,GAGTH,GAAS,SAAgBJ,GACnBQ,EAAMQ,SAKVR,EAAMQ,OAAS,IAAIjH,EAAOiG,GAC1BM,EAAeE,EAAMQ,YAOzBvB,EAAYJ,UAAU4B,iBAAmB,WACvC,GAAIhB,KAAKe,OACP,MAAMf,KAAKe,QAQfvB,EAAYJ,UAAUX,UAAY,SAAmBwC,GAC/CjB,KAAKe,OACPE,EAASjB,KAAKe,QAIZf,KAAKS,WACPT,KAAKS,WAAWS,KAAKD,GAErBjB,KAAKS,WAAa,CAACQ,IAQvBzB,EAAYJ,UAAUzE,YAAc,SAAqBsG,GACvD,GAAKjB,KAAKS,WAAV,CAGA,IAAIU,EAAQnB,KAAKS,WAAW5D,QAAQoE,IACrB,IAAXE,GACFnB,KAAKS,WAAWW,OAAOD,EAAO,KAQlC3B,EAAY6B,OAAS,WACnB,IAAI/C,EAIJ,MAAO,CACLiC,MAJU,IAAIf,GAAY,SAAkB8B,GAC5ChD,EAASgD,KAIThD,OAAQA,IAIZnF,EAAOC,QAAUoG,G,8BCpHjBrG,EAAOC,QAAU,SAAkB8C,GACjC,SAAUA,IAASA,EAAMgE,c,kCCD3B,IAAI7G,EAAQ,EAAQ,MAChBG,EAAW,EAAQ,MACnB+H,EAAqB,EAAQ,MAC7BC,EAAkB,EAAQ,MAC1B1C,EAAc,EAAQ,MACtB2C,EAAY,EAAQ,MAEpBC,EAAaD,EAAUC,WAM3B,SAAS7C,EAAMU,GACbS,KAAKnG,SAAW0F,EAChBS,KAAK2B,aAAe,CAClB5G,QAAS,IAAIwG,EACbzF,SAAU,IAAIyF,GASlB1C,EAAMO,UAAUrE,QAAU,SAAiBhB,GAGnB,iBAAXA,GACTA,EAAS6H,UAAU,IAAM,IAClBlG,IAAMkG,UAAU,GAEvB7H,EAASA,GAAU,IAGrBA,EAAS+E,EAAYkB,KAAKnG,SAAUE,IAGzBsC,OACTtC,EAAOsC,OAAStC,EAAOsC,OAAO0B,cACrBiC,KAAKnG,SAASwC,OACvBtC,EAAOsC,OAAS2D,KAAKnG,SAASwC,OAAO0B,cAErChE,EAAOsC,OAAS,MAGlB,IAAIc,EAAepD,EAAOoD,kBAELO,IAAjBP,GACFsE,EAAUI,cAAc1E,EAAc,CACpC2E,kBAAmBJ,EAAWvE,aAAauE,EAAWK,SACtDC,kBAAmBN,EAAWvE,aAAauE,EAAWK,SACtD3E,oBAAqBsE,EAAWvE,aAAauE,EAAWK,WACvD,GAIL,IAAIE,EAA0B,GAC1BC,GAAiC,EACrClC,KAAK2B,aAAa5G,QAAQ6C,SAAQ,SAAoCuE,GACjC,mBAAxBA,EAAYC,UAA0D,IAAhCD,EAAYC,QAAQrI,KAIrEmI,EAAiCA,GAAkCC,EAAYE,YAE/EJ,EAAwBK,QAAQH,EAAYI,UAAWJ,EAAYK,cAGrE,IAKIlC,EALAmC,EAA2B,GAO/B,GANAzC,KAAK2B,aAAa7F,SAAS8B,SAAQ,SAAkCuE,GACnEM,EAAyBvB,KAAKiB,EAAYI,UAAWJ,EAAYK,cAK9DN,EAAgC,CACnC,IAAIQ,EAAQ,CAAClB,OAAiB9D,GAM9B,IAJAiF,MAAMvD,UAAUkD,QAAQM,MAAMF,EAAOT,GACrCS,EAAQA,EAAMG,OAAOJ,GAErBnC,EAAUtG,QAAQC,QAAQF,GACnB2I,EAAM9B,QACXN,EAAUA,EAAQE,KAAKkC,EAAMI,QAASJ,EAAMI,SAG9C,OAAOxC,EAKT,IADA,IAAIyC,EAAYhJ,EACTkI,EAAwBrB,QAAQ,CACrC,IAAIoC,EAAcf,EAAwBa,QACtCG,EAAahB,EAAwBa,QACzC,IACEC,EAAYC,EAAYD,GACxB,MAAOG,GACPD,EAAWC,GACX,OAIJ,IACE5C,EAAUkB,EAAgBuB,GAC1B,MAAOG,GACP,OAAOlJ,QAAQE,OAAOgJ,GAGxB,KAAOT,EAAyB7B,QAC9BN,EAAUA,EAAQE,KAAKiC,EAAyBK,QAASL,EAAyBK,SAGpF,OAAOxC,GAGTzB,EAAMO,UAAU+D,OAAS,SAAgBpJ,GAEvC,OADAA,EAAS+E,EAAYkB,KAAKnG,SAAUE,GAC7BP,EAASO,EAAO2B,IAAK3B,EAAOwC,OAAQxC,EAAOyC,kBAAkB4G,QAAQ,MAAO,KAIrF/J,EAAMuE,QAAQ,CAAC,SAAU,MAAO,OAAQ,YAAY,SAA6BvB,GAE/EwC,EAAMO,UAAU/C,GAAU,SAASX,EAAK3B,GACtC,OAAOiG,KAAKjF,QAAQ+D,EAAY/E,GAAU,GAAI,CAC5CsC,OAAQA,EACRX,IAAKA,EACLrB,MAAON,GAAU,IAAIM,YAK3BhB,EAAMuE,QAAQ,CAAC,OAAQ,MAAO,UAAU,SAA+BvB,GAErEwC,EAAMO,UAAU/C,GAAU,SAASX,EAAKrB,EAAMN,GAC5C,OAAOiG,KAAKjF,QAAQ+D,EAAY/E,GAAU,GAAI,CAC5CsC,OAAQA,EACRX,IAAKA,EACLrB,KAAMA,SAKZlB,EAAOC,QAAUyF,G,kCCjJjB,IAAIxF,EAAQ,EAAQ,MAEpB,SAASkI,IACPvB,KAAKqD,SAAW,GAWlB9B,EAAmBnC,UAAUkE,IAAM,SAAaf,EAAWC,EAAUe,GAOnE,OANAvD,KAAKqD,SAASnC,KAAK,CACjBqB,UAAWA,EACXC,SAAUA,EACVH,cAAakB,GAAUA,EAAQlB,YAC/BD,QAASmB,EAAUA,EAAQnB,QAAU,OAEhCpC,KAAKqD,SAASzC,OAAS,GAQhCW,EAAmBnC,UAAUoE,MAAQ,SAAeC,GAC9CzD,KAAKqD,SAASI,KAChBzD,KAAKqD,SAASI,GAAM,OAYxBlC,EAAmBnC,UAAUxB,QAAU,SAAiB8F,GACtDrK,EAAMuE,QAAQoC,KAAKqD,UAAU,SAAwBM,GACzC,OAANA,GACFD,EAAGC,OAKTxK,EAAOC,QAAUmI,G,kCCnDjB,IAAIqC,EAAgB,EAAQ,MACxBC,EAAc,EAAQ,MAW1B1K,EAAOC,QAAU,SAAuBqC,EAASqI,GAC/C,OAAIrI,IAAYmI,EAAcE,GACrBD,EAAYpI,EAASqI,GAEvBA,I,kCChBT,IAAIC,EAAe,EAAQ,MAY3B5K,EAAOC,QAAU,SAAqB2G,EAAShG,EAAQiK,EAAMjJ,EAASe,GACpE,IAAIoH,EAAQ,IAAIe,MAAMlE,GACtB,OAAOgE,EAAab,EAAOnJ,EAAQiK,EAAMjJ,EAASe,K,kCCdpD,IAAIzC,EAAQ,EAAQ,MAChB6K,EAAgB,EAAQ,MACxBzE,EAAW,EAAQ,MACnB5F,EAAW,EAAQ,MACnBC,EAAS,EAAQ,MAKrB,SAASqK,EAA6BpK,GAKpC,GAJIA,EAAOW,aACTX,EAAOW,YAAYsG,mBAGjBjH,EAAOa,QAAUb,EAAOa,OAAO8D,QACjC,MAAM,IAAI5E,EAAO,YAUrBX,EAAOC,QAAU,SAAyBW,GA8BxC,OA7BAoK,EAA6BpK,GAG7BA,EAAOQ,QAAUR,EAAOQ,SAAW,GAGnCR,EAAOM,KAAO6J,EAAcE,KAC1BrK,EACAA,EAAOM,KACPN,EAAOQ,QACPR,EAAOsK,kBAITtK,EAAOQ,QAAUlB,EAAMiL,MACrBvK,EAAOQ,QAAQgK,QAAU,GACzBxK,EAAOQ,QAAQR,EAAOsC,SAAW,GACjCtC,EAAOQ,SAGTlB,EAAMuE,QACJ,CAAC,SAAU,MAAO,OAAQ,OAAQ,MAAO,QAAS,WAClD,SAA2BvB,UAClBtC,EAAOQ,QAAQ8B,OAIZtC,EAAOyK,SAAW3K,EAAS2K,SAE1BzK,GAAQyG,MAAK,SAA6B1E,GAWvD,OAVAqI,EAA6BpK,GAG7B+B,EAASzB,KAAO6J,EAAcE,KAC5BrK,EACA+B,EAASzB,KACTyB,EAASvB,QACTR,EAAO0K,mBAGF3I,KACN,SAA4BiF,GAe7B,OAdKtB,EAASsB,KACZoD,EAA6BpK,GAGzBgH,GAAUA,EAAOjF,WACnBiF,EAAOjF,SAASzB,KAAO6J,EAAcE,KACnCrK,EACAgH,EAAOjF,SAASzB,KAChB0G,EAAOjF,SAASvB,QAChBR,EAAO0K,qBAKNzK,QAAQE,OAAO6G,Q,8BCxE1B5H,EAAOC,QAAU,SAAsB8J,EAAOnJ,EAAQiK,EAAMjJ,EAASe,GA6BnE,OA5BAoH,EAAMnJ,OAASA,EACXiK,IACFd,EAAMc,KAAOA,GAGfd,EAAMnI,QAAUA,EAChBmI,EAAMpH,SAAWA,EACjBoH,EAAMpD,cAAe,EAErBoD,EAAMwB,OAAS,WACb,MAAO,CAEL3E,QAASC,KAAKD,QACd4E,KAAM3E,KAAK2E,KAEXC,YAAa5E,KAAK4E,YAClBC,OAAQ7E,KAAK6E,OAEbC,SAAU9E,KAAK8E,SACfC,WAAY/E,KAAK+E,WACjBC,aAAchF,KAAKgF,aACnBC,MAAOjF,KAAKiF,MAEZlL,OAAQiG,KAAKjG,OACbiK,KAAMhE,KAAKgE,KACXhI,OAAQgE,KAAKlE,UAAYkE,KAAKlE,SAASE,OAASgE,KAAKlE,SAASE,OAAS,OAGpEkH,I,kCCvCT,IAAI7J,EAAQ,EAAQ,MAUpBF,EAAOC,QAAU,SAAqB8L,EAASC,GAE7CA,EAAUA,GAAW,GACrB,IAAIpL,EAAS,GAEb,SAASqL,EAAeC,EAAQhE,GAC9B,OAAIhI,EAAMiM,cAAcD,IAAWhM,EAAMiM,cAAcjE,GAC9ChI,EAAMiL,MAAMe,EAAQhE,GAClBhI,EAAMiM,cAAcjE,GACtBhI,EAAMiL,MAAM,GAAIjD,GACdhI,EAAMkM,QAAQlE,GAChBA,EAAOmE,QAETnE,EAIT,SAASoE,EAAoBC,GAC3B,OAAKrM,EAAM4E,YAAYkH,EAAQO,IAEnBrM,EAAM4E,YAAYiH,EAAQQ,SAA/B,EACEN,OAAe1H,EAAWwH,EAAQQ,IAFlCN,EAAeF,EAAQQ,GAAOP,EAAQO,IAOjD,SAASC,EAAiBD,GACxB,IAAKrM,EAAM4E,YAAYkH,EAAQO,IAC7B,OAAON,OAAe1H,EAAWyH,EAAQO,IAK7C,SAASE,EAAiBF,GACxB,OAAKrM,EAAM4E,YAAYkH,EAAQO,IAEnBrM,EAAM4E,YAAYiH,EAAQQ,SAA/B,EACEN,OAAe1H,EAAWwH,EAAQQ,IAFlCN,OAAe1H,EAAWyH,EAAQO,IAO7C,SAASG,EAAgBH,GACvB,OAAIA,KAAQP,EACHC,EAAeF,EAAQQ,GAAOP,EAAQO,IACpCA,KAAQR,EACVE,OAAe1H,EAAWwH,EAAQQ,SADpC,EAKT,IAAII,EAAW,CACb,IAAOH,EACP,OAAUA,EACV,KAAQA,EACR,QAAWC,EACX,iBAAoBA,EACpB,kBAAqBA,EACrB,iBAAoBA,EACpB,QAAWA,EACX,eAAkBA,EAClB,gBAAmBA,EACnB,QAAWA,EACX,aAAgBA,EAChB,eAAkBA,EAClB,eAAkBA,EAClB,iBAAoBA,EACpB,mBAAsBA,EACtB,WAAcA,EACd,iBAAoBA,EACpB,cAAiBA,EACjB,UAAaA,EACb,UAAaA,EACb,WAAcA,EACd,YAAeA,EACf,WAAcA,EACd,iBAAoBA,EACpB,eAAkBC,GASpB,OANAxM,EAAMuE,QAAQmI,OAAOC,KAAKd,GAASrC,OAAOkD,OAAOC,KAAKb,KAAW,SAA4BO,GAC3F,IAAIpB,EAAQwB,EAASJ,IAASD,EAC1BQ,EAAc3B,EAAMoB,GACvBrM,EAAM4E,YAAYgI,IAAgB3B,IAAUuB,IAAqB9L,EAAO2L,GAAQO,MAG5ElM,I,kCC/FT,IAAIH,EAAc,EAAQ,MAS1BT,EAAOC,QAAU,SAAgBa,EAASC,EAAQ4B,GAChD,IAAIoK,EAAiBpK,EAAS/B,OAAOmM,eAChCpK,EAASE,QAAWkK,IAAkBA,EAAepK,EAASE,QAGjE9B,EAAON,EACL,mCAAqCkC,EAASE,OAC9CF,EAAS/B,OACT,KACA+B,EAASf,QACTe,IAPF7B,EAAQ6B,K,kCCZZ,IAAIzC,EAAQ,EAAQ,MAChBQ,EAAW,EAAQ,MAUvBV,EAAOC,QAAU,SAAuBiB,EAAME,EAAS4L,GACrD,IAAIjH,EAAUc,MAAQnG,EAMtB,OAJAR,EAAMuE,QAAQuI,GAAK,SAAmBzC,GACpCrJ,EAAOqJ,EAAGU,KAAKlF,EAAS7E,EAAME,MAGzBF,I,kCClBT,IAAIhB,EAAQ,EAAQ,MAChB+M,EAAsB,EAAQ,MAC9BrC,EAAe,EAAQ,MAEvBsC,EAAuB,CACzB,eAAgB,qCAGlB,SAASC,EAAsB/L,EAAS2B,IACjC7C,EAAM4E,YAAY1D,IAAYlB,EAAM4E,YAAY1D,EAAQ,mBAC3DA,EAAQ,gBAAkB2B,GA+B9B,IA1BMsI,EA0BF3K,EAAW,CAEbsD,aAAc,CACZ2E,mBAAmB,EACnBE,mBAAmB,EACnB5E,qBAAqB,GAGvBoH,UAjC8B,oBAAnBxJ,gBAGmB,oBAAZuL,SAAuE,qBAA5CR,OAAO3G,UAAUa,SAASmE,KAAKmC,YAD1E/B,EAAU,EAAQ,MAKbA,GA4BPH,iBAAkB,CAAC,SAA0BhK,EAAME,GAIjD,OAHA6L,EAAoB7L,EAAS,UAC7B6L,EAAoB7L,EAAS,gBAEzBlB,EAAMyB,WAAWT,IACnBhB,EAAMmN,cAAcnM,IACpBhB,EAAMoN,SAASpM,IACfhB,EAAMqN,SAASrM,IACfhB,EAAMsN,OAAOtM,IACbhB,EAAMuN,OAAOvM,GAENA,EAELhB,EAAMwN,kBAAkBxM,GACnBA,EAAKyM,OAEVzN,EAAM0N,kBAAkB1M,IAC1BiM,EAAsB/L,EAAS,mDACxBF,EAAK4F,YAEV5G,EAAM2N,SAAS3M,IAAUE,GAAuC,qBAA5BA,EAAQ,iBAC9C+L,EAAsB/L,EAAS,oBA9CrC,SAAyB0M,EAAUC,EAAQC,GACzC,GAAI9N,EAAM+N,SAASH,GACjB,IAEE,OADCC,GAAUG,KAAKC,OAAOL,GAChB5N,EAAMkO,KAAKN,GAClB,MAAOO,GACP,GAAe,gBAAXA,EAAE7C,KACJ,MAAM6C,EAKZ,OAAQL,GAAWE,KAAKI,WAAWR,GAmCxBS,CAAgBrN,IAElBA,IAGToK,kBAAmB,CAAC,SAA2BpK,GAC7C,IAAI8C,EAAe6C,KAAK7C,cAAgBtD,EAASsD,aAC7C2E,EAAoB3E,GAAgBA,EAAa2E,kBACjDE,EAAoB7E,GAAgBA,EAAa6E,kBACjD2F,GAAqB7F,GAA2C,SAAtB9B,KAAKxF,aAEnD,GAAImN,GAAsB3F,GAAqB3I,EAAM+N,SAAS/M,IAASA,EAAKuG,OAC1E,IACE,OAAOyG,KAAKC,MAAMjN,GAClB,MAAOmN,GACP,GAAIG,EAAmB,CACrB,GAAe,gBAAXH,EAAE7C,KACJ,MAAMZ,EAAayD,EAAGxH,KAAM,gBAE9B,MAAMwH,GAKZ,OAAOnN,IAOToC,QAAS,EAETe,eAAgB,aAChBG,eAAgB,eAEhBiK,kBAAmB,EACnBC,eAAgB,EAEhB3B,eAAgB,SAAwBlK,GACtC,OAAOA,GAAU,KAAOA,EAAS,KAGnCzB,QAAS,CACPgK,OAAQ,CACN,OAAU,uCAKhBlL,EAAMuE,QAAQ,CAAC,SAAU,MAAO,SAAS,SAA6BvB,GACpExC,EAASU,QAAQ8B,GAAU,MAG7BhD,EAAMuE,QAAQ,CAAC,OAAQ,MAAO,UAAU,SAA+BvB,GACrExC,EAASU,QAAQ8B,GAAUhD,EAAMiL,MAAM+B,MAGzClN,EAAOC,QAAUS,G,iBCrIjBV,EAAOC,QAAU,CACf,QAAW,W,8BCCbD,EAAOC,QAAU,SAAcsK,EAAIoE,GACjC,OAAO,WAEL,IADA,IAAIC,EAAO,IAAIpF,MAAMf,UAAUhB,QACtBF,EAAI,EAAGA,EAAIqH,EAAKnH,OAAQF,IAC/BqH,EAAKrH,GAAKkB,UAAUlB,GAEtB,OAAOgD,EAAGd,MAAMkF,EAASC,M,kCCN7B,IAAI1O,EAAQ,EAAQ,MAEpB,SAAS2O,EAAOnK,GACd,OAAOxC,mBAAmBwC,GACxBuF,QAAQ,QAAS,KACjBA,QAAQ,OAAQ,KAChBA,QAAQ,QAAS,KACjBA,QAAQ,OAAQ,KAChBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KAUrBjK,EAAOC,QAAU,SAAkBsC,EAAKa,EAAQC,GAE9C,IAAKD,EACH,OAAOb,EAGT,IAAIuM,EACJ,GAAIzL,EACFyL,EAAmBzL,EAAiBD,QAC/B,GAAIlD,EAAM0N,kBAAkBxK,GACjC0L,EAAmB1L,EAAO0D,eACrB,CACL,IAAIiI,EAAQ,GAEZ7O,EAAMuE,QAAQrB,GAAQ,SAAmBsB,EAAKC,GACxCD,UAIAxE,EAAMkM,QAAQ1H,GAChBC,GAAY,KAEZD,EAAM,CAACA,GAGTxE,EAAMuE,QAAQC,GAAK,SAAoBsK,GACjC9O,EAAM+O,OAAOD,GACfA,EAAIA,EAAEE,cACGhP,EAAM2N,SAASmB,KACxBA,EAAId,KAAKI,UAAUU,IAErBD,EAAMhH,KAAK8G,EAAOlK,GAAO,IAAMkK,EAAOG,WAI1CF,EAAmBC,EAAMI,KAAK,KAGhC,GAAIL,EAAkB,CACpB,IAAIM,EAAgB7M,EAAImB,QAAQ,MACT,IAAnB0L,IACF7M,EAAMA,EAAI8J,MAAM,EAAG+C,IAGrB7M,KAA8B,IAAtBA,EAAImB,QAAQ,KAAc,IAAM,KAAOoL,EAGjD,OAAOvM,I,8BC3DTvC,EAAOC,QAAU,SAAqBqC,EAAS+M,GAC7C,OAAOA,EACH/M,EAAQ2H,QAAQ,OAAQ,IAAM,IAAMoF,EAAYpF,QAAQ,OAAQ,IAChE3H,I,kCCVN,IAAIpC,EAAQ,EAAQ,MAEpBF,EAAOC,QACLC,EAAMgE,uBAIK,CACLoL,MAAO,SAAe9D,EAAMzI,EAAOwM,EAASC,EAAMC,EAAQC,GACxD,IAAIC,EAAS,GACbA,EAAO5H,KAAKyD,EAAO,IAAMtJ,mBAAmBa,IAExC7C,EAAM0P,SAASL,IACjBI,EAAO5H,KAAK,WAAa,IAAI8H,KAAKN,GAASO,eAGzC5P,EAAM+N,SAASuB,IACjBG,EAAO5H,KAAK,QAAUyH,GAGpBtP,EAAM+N,SAASwB,IACjBE,EAAO5H,KAAK,UAAY0H,IAGX,IAAXC,GACFC,EAAO5H,KAAK,UAGdgI,SAASJ,OAASA,EAAOR,KAAK,OAGhC7K,KAAM,SAAckH,GAClB,IAAIwE,EAAQD,SAASJ,OAAOK,MAAM,IAAIC,OAAO,aAAezE,EAAO,cACnE,OAAQwE,EAAQE,mBAAmBF,EAAM,IAAM,MAGjDG,OAAQ,SAAgB3E,GACtB3E,KAAKyI,MAAM9D,EAAM,GAAIqE,KAAKO,MAAQ,SAO/B,CACLd,MAAO,aACPhL,KAAM,WAAkB,OAAO,MAC/B6L,OAAQ,e,8BCzChBnQ,EAAOC,QAAU,SAAuBsC,GAItC,MAAO,gCAAgC8N,KAAK9N,K,8BCJ9CvC,EAAOC,QAAU,SAAsBqQ,GACrC,MAA2B,iBAAZA,IAAmD,IAAzBA,EAAQ3J,e,kCCPnD,IAAIzG,EAAQ,EAAQ,MAEpBF,EAAOC,QACLC,EAAMgE,uBAIJ,WACE,IAEIqM,EAFAC,EAAO,kBAAkBH,KAAKI,UAAUC,WACxCC,EAAiBZ,SAASa,cAAc,KAS5C,SAASC,EAAWtO,GAClB,IAAIuO,EAAOvO,EAWX,OATIiO,IAEFG,EAAeI,aAAa,OAAQD,GACpCA,EAAOH,EAAeG,MAGxBH,EAAeI,aAAa,OAAQD,GAG7B,CACLA,KAAMH,EAAeG,KACrBE,SAAUL,EAAeK,SAAWL,EAAeK,SAAS/G,QAAQ,KAAM,IAAM,GAChFgH,KAAMN,EAAeM,KACrBC,OAAQP,EAAeO,OAASP,EAAeO,OAAOjH,QAAQ,MAAO,IAAM,GAC3EkH,KAAMR,EAAeQ,KAAOR,EAAeQ,KAAKlH,QAAQ,KAAM,IAAM,GACpEmH,SAAUT,EAAeS,SACzBC,KAAMV,EAAeU,KACrBC,SAAiD,MAAtCX,EAAeW,SAASC,OAAO,GACxCZ,EAAeW,SACf,IAAMX,EAAeW,UAY3B,OARAf,EAAYM,EAAWW,OAAOC,SAASX,MAQhC,SAAyBY,GAC9B,IAAIC,EAAUzR,EAAM+N,SAASyD,GAAeb,EAAWa,GAAcA,EACrE,OAAQC,EAAOX,WAAaT,EAAUS,UAClCW,EAAOV,OAASV,EAAUU,MAhDlC,GAsDS,WACL,OAAO,I,kCC9Df,IAAI/Q,EAAQ,EAAQ,MAEpBF,EAAOC,QAAU,SAA6BmB,EAASwQ,GACrD1R,EAAMuE,QAAQrD,GAAS,SAAuB2B,EAAOyI,GAC/CA,IAASoG,GAAkBpG,EAAKrI,gBAAkByO,EAAezO,gBACnE/B,EAAQwQ,GAAkB7O,SACnB3B,EAAQoK,S,kCCNrB,IAAItL,EAAQ,EAAQ,MAIhB2R,EAAoB,CACtB,MAAO,gBAAiB,iBAAkB,eAAgB,OAC1D,UAAW,OAAQ,OAAQ,oBAAqB,sBAChD,gBAAiB,WAAY,eAAgB,sBAC7C,UAAW,cAAe,cAgB5B7R,EAAOC,QAAU,SAAsBmB,GACrC,IACIuD,EACAD,EACA6C,EAHAoK,EAAS,GAKb,OAAKvQ,GAELlB,EAAMuE,QAAQrD,EAAQ0Q,MAAM,OAAO,SAAgBC,GAKjD,GAJAxK,EAAIwK,EAAKrO,QAAQ,KACjBiB,EAAMzE,EAAMkO,KAAK2D,EAAKC,OAAO,EAAGzK,IAAI3C,cACpCF,EAAMxE,EAAMkO,KAAK2D,EAAKC,OAAOzK,EAAI,IAE7B5C,EAAK,CACP,GAAIgN,EAAOhN,IAAQkN,EAAkBnO,QAAQiB,IAAQ,EACnD,OAGAgN,EAAOhN,GADG,eAARA,GACagN,EAAOhN,GAAOgN,EAAOhN,GAAO,IAAI+E,OAAO,CAAChF,IAEzCiN,EAAOhN,GAAOgN,EAAOhN,GAAO,KAAOD,EAAMA,MAKtDiN,GAnBgBA,I,8BCVzB3R,EAAOC,QAAU,SAAgBgS,GAC/B,OAAO,SAAcC,GACnB,OAAOD,EAASxI,MAAM,KAAMyI,M,kCCtBhC,IAAI3L,EAAU,gBAEVgC,EAAa,GAGjB,CAAC,SAAU,UAAW,SAAU,WAAY,SAAU,UAAU9D,SAAQ,SAASW,EAAMmC,GACrFgB,EAAWnD,GAAQ,SAAmB+M,GACpC,cAAcA,IAAU/M,GAAQ,KAAOmC,EAAI,EAAI,KAAO,KAAOnC,MAIjE,IAAIgN,EAAqB,GASzB7J,EAAWvE,aAAe,SAAsBsE,EAAW+J,EAASzL,GAClE,SAAS0L,EAAcC,EAAKC,GAC1B,MAAO,WAAajM,EAAU,0BAA6BgM,EAAM,IAAOC,GAAQ5L,EAAU,KAAOA,EAAU,IAI7G,OAAO,SAAS7D,EAAOwP,EAAKE,GAC1B,IAAkB,IAAdnK,EACF,MAAM,IAAIwC,MAAMwH,EAAcC,EAAK,qBAAuBF,EAAU,OAASA,EAAU,MAczF,OAXIA,IAAYD,EAAmBG,KACjCH,EAAmBG,IAAO,EAE1BG,QAAQC,KACNL,EACEC,EACA,+BAAiCF,EAAU,8CAK1C/J,GAAYA,EAAUvF,EAAOwP,EAAKE,KAkC7CzS,EAAOC,QAAU,CACfyI,cAxBF,SAAuB0B,EAASwI,EAAQC,GACtC,GAAuB,iBAAZzI,EACT,MAAM,IAAInD,UAAU,6BAItB,IAFA,IAAI4F,EAAOD,OAAOC,KAAKzC,GACnB7C,EAAIsF,EAAKpF,OACNF,KAAM,GAAG,CACd,IAAIgL,EAAM1F,EAAKtF,GACXe,EAAYsK,EAAOL,GACvB,GAAIjK,EAAJ,CACE,IAAIvF,EAAQqH,EAAQmI,GAChBO,OAAmBvO,IAAVxB,GAAuBuF,EAAUvF,EAAOwP,EAAKnI,GAC1D,IAAe,IAAX0I,EACF,MAAM,IAAI7L,UAAU,UAAYsL,EAAM,YAAcO,QAIxD,IAAqB,IAAjBD,EACF,MAAM/H,MAAM,kBAAoByH,KAOpChK,WAAYA,I,kCC9Ed,IAAI9C,EAAO,EAAQ,MAIfqB,EAAW8F,OAAO3G,UAAUa,SAQhC,SAASsF,EAAQ1H,GACf,MAA8B,mBAAvBoC,EAASmE,KAAKvG,GASvB,SAASI,EAAYJ,GACnB,YAAsB,IAARA,EA4EhB,SAASmJ,EAASnJ,GAChB,OAAe,OAARA,GAA+B,iBAARA,EAShC,SAASyH,EAAczH,GACrB,GAA2B,oBAAvBoC,EAASmE,KAAKvG,GAChB,OAAO,EAGT,IAAIuB,EAAY2G,OAAOmG,eAAerO,GACtC,OAAqB,OAAduB,GAAsBA,IAAc2G,OAAO3G,UAuCpD,SAAS+M,EAAWtO,GAClB,MAA8B,sBAAvBoC,EAASmE,KAAKvG,GAwEvB,SAASD,EAAQwO,EAAK1I,GAEpB,GAAI0I,QAUJ,GALmB,iBAARA,IAETA,EAAM,CAACA,IAGL7G,EAAQ6G,GAEV,IAAK,IAAI1L,EAAI,EAAGC,EAAIyL,EAAIxL,OAAQF,EAAIC,EAAGD,IACrCgD,EAAGU,KAAK,KAAMgI,EAAI1L,GAAIA,EAAG0L,QAI3B,IAAK,IAAItO,KAAOsO,EACVrG,OAAO3G,UAAUiN,eAAejI,KAAKgI,EAAKtO,IAC5C4F,EAAGU,KAAK,KAAMgI,EAAItO,GAAMA,EAAKsO,GA2ErCjT,EAAOC,QAAU,CACfmM,QAASA,EACTiB,cA1RF,SAAuB3I,GACrB,MAA8B,yBAAvBoC,EAASmE,KAAKvG,IA0RrB4I,SAtSF,SAAkB5I,GAChB,OAAe,OAARA,IAAiBI,EAAYJ,IAA4B,OAApBA,EAAIyO,cAAyBrO,EAAYJ,EAAIyO,cAChD,mBAA7BzO,EAAIyO,YAAY7F,UAA2B5I,EAAIyO,YAAY7F,SAAS5I,IAqShF/C,WAlRF,SAAoB+C,GAClB,MAA4B,oBAAb0O,UAA8B1O,aAAe0O,UAkR5D1F,kBAzQF,SAA2BhJ,GAOzB,MAL4B,oBAAhB2O,aAAiCA,YAAkB,OACpDA,YAAYC,OAAO5O,GAEnB,GAAUA,EAAU,QAAMA,EAAIiJ,kBAAkB0F,aAqQ3DpF,SA1PF,SAAkBvJ,GAChB,MAAsB,iBAARA,GA0PdkL,SAjPF,SAAkBlL,GAChB,MAAsB,iBAARA,GAiPdmJ,SAAUA,EACV1B,cAAeA,EACfrH,YAAaA,EACbmK,OAlNF,SAAgBvK,GACd,MAA8B,kBAAvBoC,EAASmE,KAAKvG,IAkNrB8I,OAzMF,SAAgB9I,GACd,MAA8B,kBAAvBoC,EAASmE,KAAKvG,IAyMrB+I,OAhMF,SAAgB/I,GACd,MAA8B,kBAAvBoC,EAASmE,KAAKvG,IAgMrBsO,WAAYA,EACZzF,SA9KF,SAAkB7I,GAChB,OAAOmJ,EAASnJ,IAAQsO,EAAWtO,EAAI6O,OA8KvC3F,kBArKF,SAA2BlJ,GACzB,MAAkC,oBAApB8O,iBAAmC9O,aAAe8O,iBAqKhEtP,qBAzIF,WACE,OAAyB,oBAAduM,WAAoD,gBAAtBA,UAAUgD,SACY,iBAAtBhD,UAAUgD,SACY,OAAtBhD,UAAUgD,WAI/B,oBAAXjC,QACa,oBAAbzB,WAkITtL,QAASA,EACT0G,MAvEF,SAASA,IACP,IAAI2H,EAAS,GACb,SAASY,EAAYhP,EAAKC,GACpBwH,EAAc2G,EAAOnO,KAASwH,EAAczH,GAC9CoO,EAAOnO,GAAOwG,EAAM2H,EAAOnO,GAAMD,GACxByH,EAAczH,GACvBoO,EAAOnO,GAAOwG,EAAM,GAAIzG,GACf0H,EAAQ1H,GACjBoO,EAAOnO,GAAOD,EAAI2H,QAElByG,EAAOnO,GAAOD,EAIlB,IAAK,IAAI6C,EAAI,EAAGC,EAAIiB,UAAUhB,OAAQF,EAAIC,EAAGD,IAC3C9C,EAAQgE,UAAUlB,GAAImM,GAExB,OAAOZ,GAuDP5M,OA5CF,SAAgByN,EAAGC,EAAGjF,GAQpB,OAPAlK,EAAQmP,GAAG,SAAqBlP,EAAKC,GAEjCgP,EAAEhP,GADAgK,GAA0B,mBAARjK,EACXe,EAAKf,EAAKiK,GAEVjK,KAGNiP,GAqCPvF,KAhKF,SAAcyF,GACZ,OAAOA,EAAIzF,KAAOyF,EAAIzF,OAASyF,EAAI5J,QAAQ,aAAc,KAgKzD6J,SA7BF,SAAkBC,GAIhB,OAH8B,QAA1BA,EAAQC,WAAW,KACrBD,EAAUA,EAAQ1H,MAAM,IAEnB0H,K,yWCvTIE,EACL,cADKA,EAED,kBAOCC,EACL,OADKA,EAED,WAMCC,EACc,MADdA,EAEO,MAFPA,EAGM,MAHNA,EAIK,MAMLC,EACE,iBADFA,EAEN,cAFMA,EAIN,eAMMC,EACE,cADFA,EAEN,mBAFMA,EAGN,mBCxCA,SAASC,IAAuC,IAA1B1N,EAA0B,uDAAhB,eACrCC,KAAK2E,KAAO,eACZ3E,KAAKD,QAAUA,EAEfC,KAAK0N,UAAY,MACjB1N,KAAKiF,OAAQ,IAAIhB,OAAQgB,MAYpB,SAAS0I,IAA6C,IAA7B5N,EAA6B,uDAAnB,kBACxCC,KAAK2E,KAAO,kBACZ3E,KAAKD,QAAUA,EACfC,KAAK0N,UAAY,IACjB1N,KAAKiF,OAAQ,IAAIhB,OAAQgB,MAb3BwI,EAAarO,UAAY2G,OAAOzG,OAAO2E,MAAM7E,WAC7CqO,EAAarO,UAAUkN,YAAcmB,EAerCE,EAAgBvO,UAAY2G,OAAOzG,OAAO2E,MAAM7E,WAChDuO,EAAgBvO,UAAUkN,YAAcqB,E,+CCzBjC,SAASC,EAAkBxD,EAAMyD,GACtC,IAAM9T,EAAS+T,EAAAA,EAAAA,IAAc1D,GACvB2D,EAAchU,EAAOiU,YAAYC,UAAY,KAAMC,EAAAA,EAAAA,IAAW,CAAEC,MAAON,IACvEO,GAAQF,EAAAA,EAAAA,IAAW,CACvBG,cAAe,OACfC,MAAO,gBACPC,UAAWxU,EAAOyU,OAAOC,SACzBC,aAAcX,IAGhB,MAAO,CACLY,SAAU,2CAAF,OAA6CP,EAA7C,gBACRL,YAAAA,GAOG,SAASa,EAAsBxE,EAAMyD,GAAyC,IAA5BgB,EAA4B,uDAAhBzB,EAC7DrT,EAAS+T,EAAAA,EAAAA,IAAc1D,GAE7B,GAAGrQ,EAAO+U,oBAAqB,CAE7B,IAAIlG,EAAS7O,EAAO6O,QAAU7O,EAAOgV,YAErC,OADAnG,EAASA,EAAOoG,SAAS,KAAOpG,EAASA,EAAS,KAC3CqG,EAAAA,EAAAA,IAAY,CAAEC,qBAAsBrB,GAAzB,UAA2CjF,GAA3C,OAAoD7O,EAAOoV,sBAG/E,IAAMf,GAAQF,EAAAA,EAAAA,IAAW,CACvBG,cAAe,OACfC,MAAOO,EACPO,MAAOrV,EAAOyU,OAAOa,OAGrBX,aAAcb,EAAY5C,MAAM,KAAK,GACrCqE,MAAOT,IAAczB,EAAqBC,EAA0BA,IAGtE,MAAO,uDAAP,OAA8De,EAA9D,oBAkBF,IAAMmB,EAAiB,CACrB,MACA,MACA,MACA,MACA,OASK,SAASC,EAAqB9B,GACnC,OAAO6B,EAAeE,SAAS/B,IAAeA,GAAa,OAASA,GAAa,M,qkBCxEnF,IAAMgC,GAAiCC,EAAAA,EAAAA,MAEvC,SAASC,IACP,IAAM7V,EAAS+T,EAAAA,EAAAA,IAAclD,SAASR,MAEtC,OAAGsF,EAASG,iBACH9V,EAAO+V,MAAMT,OAGnBK,EAASK,gBACHhW,EAAO+V,MAAME,MAGnBN,EAASO,aACHP,EAASQ,kBAAoBnW,EAAO+V,MAAMrB,SAAW1U,EAAO+V,MAAMK,GAGpE,E,wCAYF,WAA6BC,EAA7B,mGAA0CpM,EAA1C,EAA0CA,KAAMsL,EAAhD,EAAgDA,MAC/Ce,EAAQT,IACRrT,EAAS+S,IAAUjC,EAA0B,CAAErJ,KAAAA,EAAMsM,OAAQD,EAAOE,QAAS,GAAM,CAAEvM,KAAAA,EAAMsM,OAAQD,GACtGX,EAASO,eACV1T,EAAOiU,eAAgB,EACvBjU,EAAOmS,aAAed,EAAkBhD,SAASR,KAAMQ,SAASX,MAAM8D,aALnE,kBAUoBqC,EAAUK,KAAK,SAAUlU,EAAQ,CAAEmU,oBAAF,eAVrD,cAUGC,EAVH,gCAYEA,GAZF,IAaDC,YAAaD,EAASE,gBAbrB,qCAgBKnD,EAhBL,KAgBKA,UAAW5R,EAhBhB,KAgBgBA,SAhBhB,EAiBmEA,EAASzB,MAAQ,GAA5DyW,EAjBxB,EAiBKC,kBAAgDC,EAjBrD,EAiByCC,WAEzCvD,IAAcJ,IAAmDoC,EAASG,iBAnB1E,uBAoBDjF,SAASX,KAAO2E,EAAsBhE,SAASR,KAAMQ,SAASX,KAAMmD,GAC9D,IAAIO,EArBT,WAyBDD,IAAcJ,GACdI,IAAcJ,EA1Bb,uBA4BD4D,EAAAA,GAAAA,OAAA,iDAC4CJ,EAD5C,iBACoEzV,mBAAmBuP,SAASX,QAE1F,IAAI0D,EA/BT,WAiCAD,IAAcJ,EAjCd,uBAmCD4D,EAAAA,GAAAA,OAAA,wDACmDF,EADnD,iBACqE3V,mBAAmBuP,SAASX,QAE3F,IAAI0D,EAtCT,YAwCA6B,EAAqB9B,GAxCrB,uBAyCDwD,EAAAA,GAAAA,OAAA,0FAAqGxD,IAC/F,IAAIC,EA1CT,6E,2mBC5BP,IAAM+B,GAAiCC,EAAAA,EAAAA,MAQvC,SAASwB,EAAerT,EAAK5B,GAAiD,IAA1CkV,EAA0C,uDAA7B,CAAEC,OAAQ,OACtDnV,IAASoV,EAAAA,EAAAA,IAAUxT,KAAS5B,IAC7BqV,EAAAA,EAAAA,IAAUzT,EAAK5B,EAAOkV,GAqDnB,SAAeI,IAAtB,+B,wCAAO,uGACE9B,EAAS+B,kBACZC,EAAAA,EAAAA,MACGlR,MAAK,SAAA2H,GAAC,OAAIA,EAAE0I,gBACZc,OAAM,kBAAML,EAAAA,EAAAA,IAAU/D,OACzB+D,EAAAA,EAAAA,IAAU/D,IALT,4C,sBAcA,SAAeqE,IAAtB,+B,wCAAO,uGACElC,EAAS+B,kBACZC,EAAAA,EAAAA,MACGlR,MAAK,SAAA2H,GAAC,OAAIA,EAAE0J,WACZF,OAAM,kBAAML,EAAAA,EAAAA,IAAU/D,OACzB+D,EAAAA,EAAAA,IAAU/D,IALT,4C,sBAcA,SAAeuE,IAAtB,+B,wCAAO,kFACFpC,EAAS+B,iBADP,0CAEIC,EAAAA,EAAAA,MACJlR,MAAK,SAAA2H,GAAC,OAAIA,EAAE4J,MAAOT,EAAAA,EAAAA,IAAU/D,MAC7BoE,OAAM,kBAAML,EAAAA,EAAAA,IAAU/D,OAJtB,iCAOE+D,EAAAA,EAAAA,IAAU/D,IAPZ,4C,sBAwCA,SAASyE,EAAuB5B,GACrC,IAAM7W,GAAU+X,EAAAA,EAAAA,MACVV,EAAcrX,EAAQgU,GACtB0E,EAAM1Y,EAAQgU,GACdwE,EAAMxY,EAAQgU,GAGd2E,EAAc,WAClB,OAAOtB,EAAc5W,QAAQC,QAAQ,CAAE2W,YAAAA,EAAaqB,IAAAA,EAAKF,IAAAA,IAAS/X,QAAQE,OAAO,IAAIuT,IAIvF,GAAGiC,EAAS+B,iBACV,OAvCKC,EAAAA,EAAAA,MAAclR,MAAK,SAACmQ,GACzB,IAAIA,EAASE,aACX,MAAM,IAAIpD,EAEZ,MAAO,CACLmD,YAAaD,EAASE,aACtBoB,IAAKtB,EAASkB,QACdE,IAAKpB,EAASoB,IACdxT,KAAMoS,EAASpS,SA+BWiC,MAC1B,SAAAnG,GAAI,cACCA,GADD,IAGF0X,IAAK1X,EAAK0X,MAAQ1X,EAAKuW,cAAgBA,EAAcmB,EAAM,UAG7DG,GAIJ,OAAwBC,EAAAA,EAAAA,IAAWvH,SAASP,QAApCrG,EAAR,EAAQA,KAAMsL,EAAd,EAAcA,MAId,OAHAtL,GAzJAkN,EAAAA,GAAAA,WACEtG,SAASwH,OAASxH,SAASH,SAAW,KAAMyD,EAAAA,EAAAA,IAAW,QAAKiE,EAAAA,EAAAA,IAAWvH,SAASP,SAA1B,IAAmCrG,KAAM,KAAMsL,MAAO,SA2J3GsB,EACMsB,IAIFlO,EDxIF,SAAP,oCCwIgBqO,CAAcjC,EAAW,CAAEpM,KAAAA,EAAMsL,MAAAA,IAAW4C,IAQrD,SAASI,IACd,OAAO5C,EAAS+B,mBAAoBc,EAAAA,EAAAA,IAAe7C,EAASlE,QAAS,WAAa,E,2lBCxKpF,SAASgH,GAAgBjW,GACvB,IAAMkW,ED8KC/C,EAAS+B,mBAAoBc,EAAAA,EAAAA,IAAe7C,EAASlE,QAAS,WAAa,EC7K9DkH,EAAyBnW,EAArCoW,WAA0BC,GAAlC,OAA6CrW,EAA7C,GACMsW,EAAWJ,EAAgB,aAAe,oBAChD,OAAO,IAAIzY,SAAQ,SAACC,EAASC,IAC3B4Y,EAAAA,EAAAA,IAA0B,eAAgB,QAAjB,GAAC,MACnBL,IAA+B,IAAdC,EAA0C,GAApB,CAAEnU,KAAM,UAD7B,IAEvBwU,MAAO,YACFH,IACe,IAAdF,GAAuBD,EACvB,CACE/W,KAAKuT,EAAAA,EAAAA,IAAY1S,EAAQsW,IAE3B,IAND,IAOHG,SAPK,SAOItF,EAAW5R,GAClB,GAAiB,IAAd4R,EACDzT,EAAQ,CACN2W,YAAa9U,EAAS+U,mBAEnB,CAIL,IAAMrJ,EAAI,IAAIvD,MAAM,4BACpBuD,EAAEkG,UAAYA,EACdxT,EAAOsN,UAIZmK,MAAMzX,MAWN,SAAS+Y,GAAUC,GACxB,IAAMxD,GAAWC,EAAAA,EAAAA,MACX8B,EAAmB/B,EAAS+B,iBAC5B0B,EAAsBb,IAC5B,OAAGb,EACMe,GAAgB,SAClBU,EAAYE,cACXD,EAAsB,CAAER,YAAaO,EAAYG,QAAW,KAI7D,IAAIrZ,SAAQ,WACjB,IAAM6T,EAAcqF,EAAYI,MAAQ1I,SAASX,KAE9CyF,EAASG,iBACVjF,SAASX,KAAO2E,EAAsBhE,SAASR,KAAMyD,EAAaqF,EAAYrE,WACtEa,EAASO,aACjBrF,SAASX,KAAO2D,EAAkBhD,SAASR,KAAMyD,GAAac,SAE9DuC,EAAAA,GAAAA,OHpBC,SAA2BrD,GAEhC,MAAO,oBAAP,OAA2BxS,mBAAmBwS,IGkBxB0F,CAAkB1F,O,ykBCxD1C,IAAI2F,IAAa,EAMb7C,GAAW,GAgBf,SAAS8C,GAAT,GAA8D,IAApC7C,EAAoC,EAApCA,YAAaqB,EAAuB,EAAvBA,IAAuB,IAAlBF,IAAAA,OAAkB,MAAZ,GAAY,EAARxT,EAAQ,EAARA,KAKpD,OFfK,SAAuBqS,EAAaqB,EAAKF,GAE9CZ,EAAe5D,EAAuBqD,GACtCO,EAAe5D,EAAe0E,GAC9Bd,EAAe5D,EAAewE,GEQ9B2B,CAAc9C,EADdqB,EAAMA,GAAO0B,OAAO1B,GACYF,GAhBlC,SAAgCnB,EAAaqB,EAAKF,EAAKxT,GACrDoS,GAAW,CAAEC,YAAAA,EAAaqB,IAAAA,EAAKF,IAAAA,EAAKxT,KAAAA,GAgBpCqV,CAAuBhD,EAAaqB,EAAKF,EAAKxT,GFSzC,SAA6BqS,EAAaqB,EAAKF,GACpDnB,GAAeiD,aAAaC,QAAQtG,EAA6BoD,GACjEqB,GAAO4B,aAAaC,QAAQtG,IAAuByE,GAAKhS,SAAS,KACjE8R,GAAO8B,aAAaC,QAAQtG,EAAqBuE,GEXjDgC,CAAoBnD,EAAaqB,EAAKF,GAC/B,CAAEnB,YAAAA,EAAaqB,IAAAA,EAAKF,IAAAA,EAAKxT,KAAAA,GAM3B,SAASyV,MFVdC,EAAAA,EAAAA,IAAa1G,IACb0G,EAAAA,EAAAA,IAAa1G,IACb0G,EAAAA,EAAAA,IAAa1G,GEZboD,GAAW,GF+BXkD,aAAaK,WAAW1G,GACxBqG,aAAaK,WAAW1G,GACxBqG,aAAaK,WAAW1G,GEKnB,SAAS2G,GAAK/D,GAGnB,OAFAoD,IAAa,EAENxB,EAAuB5B,GAAW5P,KAAKiT,IAAgB,SAACjM,GAE7D,MADAwM,KACMxM,KASH,SAAe4M,KAAtB,gC,0CAAO,qFACDZ,IACF3H,QAAQC,KAAK,iDAFV,kBAIE6E,GAASC,aAAeY,KAJ1B,4C,sBAYA,SAAe6C,KAAtB,gC,0CAAO,qFACDb,IACF3H,QAAQC,KAAK,yCAFV,kBAIE6E,GAASsB,KAAOL,KAJlB,4C,sBAYA,SAAe0C,KAAtB,gC,0CAAO,qFACDd,IACF3H,QAAQC,KAAK,yCAFV,kBAIE6E,GAASoB,KAAOD,KAJlB,4C,sBAyBA,SAASyC,KACd,IAAIf,GACF,MAAM,IAAIvP,MAAM,yBAGlB,OAAO,MAAK0M,IA6BP,SAAS6D,KAAwB,IAAlBtB,EAAkB,uDAAJ,QAED,IAAvBA,EAAYG,SACpBH,EAAYG,QAAS,GAEvB,IAAMF,EAAsBD,EAAYG,QAAUf,IAIlD,OAHIa,GACFa,KAEKf,GAAUC,GAAa1S,KAAKiT,M,oJChHrC,IAAMgB,EAAW,oBACXC,EAAe,oBAOd,SAASC,EAAWC,GACvB,GAAqB,iBAAVA,EACP,MAAO,GAGX,GAAIA,EAAMzL,MAAMsL,GACZ,OAAOG,EAEX,GAAIA,EAAMzL,MAAMuL,GAAe,CAC3B,IAAMG,EAAQC,YAENC,SAAS,GAAD,OAAIH,EAAM,IAAV,OAAeA,EAAM,IAAM,IAAM,KAC3CI,QAAQ,IAERC,EAAMF,SAAS,GAAD,OAAIH,EAAM,IAAV,OAAeA,EAAM,IAAM,IACzCM,EAAQH,SAAS,GAAD,OAAIH,EAAM,IAAV,OAAeA,EAAM,IAAM,IAC3CO,EAAOJ,SAAS,GAAD,OAAIH,EAAM,IAAV,OAAeA,EAAM,IAAM,IAChD,MAAO,QAAP,OAAeK,EAAf,aAAuBC,EAAvB,aAAiCC,EAAjC,aAA0CN,EAA1C,KAGJ,OAAOD,E,4lBC7EX,IAAMQ,EAAiBC,EAAAA,MAAW,YAA2D,IAAzBhb,EAAyB,EAAzBA,KAAyB,IAAnBib,MAAAA,OAAmB,MAAX,KAAW,EACnFC,GAAoBC,EAAAA,EAAAA,UACpBC,GAAUD,EAAAA,EAAAA,UAEhB,ECjBoB,SAAC,GAIR,IAHbD,EAGa,EAHbA,kBACAG,EAEa,EAFbA,WAEa,IADbC,SAAAA,OACa,MADF,GACE,EAAdC,EAAc,uDAAP,GACN,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA0BF,EAAAA,EAAAA,UAAS,GAAnC,eAAOG,EAAP,KAAcC,EAAd,KACA,GAA4CJ,EAAAA,EAAAA,UAAS,GAArD,eAAOK,EAAP,KAAuBC,EAAvB,KAYA,OAVAC,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAAsBd,EAAkBe,QAAQC,YAChDC,EAAed,EAAWY,QAAQC,YACxCJ,EAAkBE,GACdG,EAAeH,GACfJ,EAASQ,KAAKC,IAAIf,EAAUU,EAAsBG,IAEtDT,GAAW,KACZH,GAEI,CACHE,QAAAA,EACAE,MAAAA,EACAE,eAAAA,GDLuCS,CAAS,CAChDpB,kBAAAA,EACAG,WAAYD,GACb,CAACpb,EAAKuc,WAHDd,EAAR,EAAQA,QAASE,EAAjB,EAAiBA,MAAOE,EAAxB,EAAwBA,eAKxB,OACI,uBACIW,UAAWC,IAAAA,QACXxB,MAAK,GACDV,MAAOD,EAAWta,EAAK0c,YACvBC,WAAYrC,EAAWta,EAAK4c,WACzB3B,IAGP,uBACIuB,UAAWC,IAAAA,UACXI,IAAK3B,GAEL,uBACID,MAAO,CACH6B,sBAAuB,cACvBC,gBAAiB,cACjBC,gBAAiB,SAAF,OAAWrB,EAAX,KACfsB,UAAW,SAAF,OAAWtB,EAAX,KACTuB,MAAOrB,EAAiBF,EACxBwB,SAAU,SACVC,aAAc,aAGlB,wBAAMP,IAAKzB,EAASH,MAAO,CAAEoC,WAAY5B,EAAU,UAAY,WAAazb,EAAKuc,UAAY,YAOpGe,EAAatC,EAAAA,MAAW,YAA6C,IAAXhb,EAAW,EAAXA,KACnE,OAAIA,GAAQA,EAAKuc,SACN,gBAACxB,EAAD,CAAgB/a,KAAMA,IAE1B,S,8EEzCX,EAdiB,CACbkT,UAAW,CACPqK,IAAK,cACLC,IAAK,gBAGTrK,gBAAiB,CACboK,IAAK,mBACLC,IAAK,oBAGTC,eAAgB,sC,+qBCXpB,IAAMC,EAAY,GACZC,GAAuCrI,EAAAA,EAAAA,MAGvCsI,EAAsC,oBAAbrN,UAA4BA,SAASL,SAASkF,SAAS,iBAChFyI,GAAyBF,EAAevG,kBAAoBwG,EAgClE,IA0ZUE,EA1ZJC,EAAkB,CACpBC,WA1BJ,SAAuBH,GACnB,MAAsB,oBAAXvN,QAA0BA,OAAO2N,cACjC3N,OAAO2N,cAEdJ,EACO,iCAEJ,iCAmBKK,CAAcL,GAC1BM,UAAW,CACPC,GAbR,SAAyBP,GACrB,MAAsB,oBAAXvN,QAA0BA,OAAO+N,gBACjC/N,OAAO+N,gBAEdR,EACO,iCAEJ,iCAMCS,CAAgBT,KAItBU,EAAqE,CACvEC,gBAAiB,mCACjBL,UAAW,CACPC,GAAI,qCAINK,EAAW,CACbT,WAAYD,EAAgBC,WAC5BG,UAAW,EAAF,GACFJ,EAAgBI,WAEvBK,gBAAiBT,EAAgBC,WACjCU,eAAgB,EAAF,GACPX,EAAgBI,WAEvB1I,MAAO,CACHT,OAAQ,EACRc,GAAI,GACJH,MAAO,GACP/B,UAAW,GACXQ,SAAU,IAEdD,OAAQ,CACJa,OAAQ,qBACRZ,SAAU,aAEdT,YAAa,CACTC,UAAW,qDAEfkB,oBAAqB,mBAGnB6J,EAAiB,CACnBlJ,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIV4J,EAAM,CACRC,SAAU,EACVC,OAAQ,EACRC,OAAQ,EACRC,IAAK,EACLC,OAAQ,GACRC,MAAO,GACPC,QAAS,GACTC,SAAU,GACVC,QAAS,GACTC,QAAS,GACTC,MAAO,GACPC,UAAW,GACXC,GAAI,GACJC,OAAQ,SACRC,WAAY,aACZC,OAAQ,GACRC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,MAAO,GACPC,EAAG,GACHC,GAAI,GACJC,OAAQ,GACRC,aAAc,GACdC,YAAa,GACbC,gBAAiB,GACjBC,aAAc,GACdC,OAAQ,GACRC,UAAW,GACXC,WAAY,GACZC,QAAS,GACTC,cAAe,KAsXnB,SAASlH,EAAK5X,GACV,OAGJ,WAEI,IADA,IAAM+e,EAAM,GACH5a,EAAI,EAAGA,EAAIkB,UAAUhB,OAAQF,IACN,YAAxB,OAAOkB,UAAUlB,KACjB6a,EAAWD,EAAK1Z,UAAUlB,IAGlC,OAAO4a,EAVAjc,CAAOyZ,EAAUvc,GAa5B,SAASgf,EAAWD,EAAKvT,GACrB,IAAK,IAAMjK,KAAOiK,EACd,GAAIA,EAAKsE,eAAevO,GAAM,CAC1B,IAAM5B,EAAQ6L,EAAKjK,GACb0d,GAAY,OAAOtf,GACP,WAAdsf,GACc,WAAdA,GACc,YAAdA,EACAF,EAAIxd,GAAO5B,EACU,WAAdsf,GACPF,EAAIxd,GAAOwd,EAAIxd,IAAQ,GACvByd,EAAWD,EAAIxd,GAAM5B,KASpBuf,EARcvf,EASkB,mBAAtC6J,OAAO3G,UAAUa,SAASmE,KAAKqX,KAR1BH,EAAIxd,GAAOwd,EAAIxd,IAAQ,GACvByd,EAAWD,EAAIxd,GAAM5B,KAMrC,IAAiBuf,EArZjB1D,EAAUkB,EAAIC,UAA2D,CACrEtQ,OAAQ,yBACRyP,WAAYO,EAAoBC,gBAChCL,UAAW,EAAF,GACFI,EAAoBJ,WAE3BK,gBAAiBD,EAAoBC,gBACrCE,eAAgB,EAAF,GACPH,EAAoBJ,WAE3B1I,MAAO,CACHT,OAAQ4J,EAAIC,SACZzK,SAAU,OAEdD,OAAQ,CACJa,OAAQ,qBACRZ,SAAU,WAEdT,YAAa,CACTC,UAAW,gDAInB8J,EAAUkB,EAAIE,QAAU,CACpBvQ,OAAQ,iCAGZmP,EAAUkB,EAAIG,QAAU,CACpBxQ,OAAQ,gCACRkH,MAAO,CACHT,OAAQ4J,EAAIG,QAEhB5K,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIK,QAAU,CACpB1Q,OAAQ,gCACRkH,MAAO,CACHT,OAAQ4J,EAAIK,QAEhB9K,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIM,OAAS,CACnB3Q,OAAQ,+BACRkH,MAAO,CACHT,OAAQ4J,EAAIM,OAEhB/K,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIO,SAAW,CACrB5Q,OAAQ,iCACRkH,MAAO,CACHT,OAAQ4J,EAAIO,SAEhBhL,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIQ,UAAY,CACtB7Q,OAAQ,kCACRkH,MAAO,CACHT,OAAQ4J,EAAIQ,UAEhBjL,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIS,SAAW,CACrB9Q,OAAQ,iCACRkH,MAAO,CACHT,OAAQ4J,EAAIS,SAEhBlL,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIU,SAAW,CACrB/Q,OAAQ,iCACRkH,MAAO,CACHT,OAAQ4J,EAAIU,SAEhBnL,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIW,OAAd,GACIhR,OAAQ,gCACLoQ,GAGPjB,EAAUkB,EAAIY,WAA4D,CACtEjR,OAAQ,mCACRkH,MAAO,CACHT,OAAQ4J,EAAIY,WAEhBrL,OAAQ,CACJa,OAAQ,sBAEZ0J,eAAgB,EAAF,GACPH,EAAoBJ,WAE3BK,gBAAiBD,EAAoBC,iBAGzCd,EAAUkB,EAAIa,IAAM,CAChBlR,OAAQ,4BACRkH,MAAO,CACHT,OAAQ4J,EAAIa,IAEhBtL,OAAQ,CACJa,OAAQ,uBAQhB0I,EAAUkB,EAAII,KAAO,CACjBzQ,OAAQ,6BACRkH,MAAO,CACHT,OAAQ,GAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIc,QAAU,CACpBhL,YAAa,gCACbe,MAAO,CACHT,OAAQ,GAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIe,YAA6D,CACvEjL,YAAa,yBACb8J,gBAAiBD,EAAoBC,gBACrCE,eAAgB,EAAF,GACPH,EAAoBJ,WAE3B1I,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIgB,QAAU,CACpBlL,YAAa,gCACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIiB,MAAQ,CAClBnL,YAAa,8BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIkB,MAAQ,CAClBpL,YAAa,8BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAImB,MAAQ,CAClBrL,YAAa,8BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIoB,MAAQ,CAClBtL,YAAa,6BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIqB,MAAQ,CAClBvL,YAAa,6BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIsB,MAAQ,CAClBxL,YAAa,6BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIuB,MAAQ,CAClBzL,YAAa,6BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIwB,OAAS,CACnB1L,YAAa,8BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIyB,GAAK,CACf9R,OAAQ,2BACRmG,YAAa,2BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAI0B,IAAM,CAChB5L,YAAa,4BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAI2B,QAAU,CACpBhS,OAAQ,6BACRmG,YAAa,6BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAI4B,cAAgB,CAC1B9L,YAAa,4BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAI6B,aAAe,CACzB/L,YAAa,2BACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAI+B,cAAd,GACIjM,YAAa,8BACViK,GAGPjB,EAAUkB,EAAImC,SAAd,GACIrM,YAAa,yBACViK,GAGPjB,EAAUkB,EAAI8B,iBAAmB,CAC7BnS,OAAQ,+BACRmG,YAAa,gCAGjBgJ,EAAUkB,EAAIgC,QAEH,CACHrS,OAFEuP,EAAa,uBAGfpJ,YAAaoJ,EACbrI,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,sBAEZwJ,gBAAiBV,EAAa,kBAC9BY,eAAgB,CACZ7V,MAAOiV,EAAa,kBACpBuD,WAAYvD,EAAa,kBACzBwD,WAAYxD,EAAa,uBAKrCJ,EAAUkB,EAAIiC,WAAa,CACvBnM,YAAa,yBACbe,MAAO,CACHT,OAAQ,IAEZb,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIkC,YAAc,CACxBpM,YAAa,gCACbe,MAAO,CACHT,OAAQ4J,EAAIkC,YAEhB3M,OAAQ,CACJa,OAAQ,uBAIhB0I,EAAUkB,EAAIoC,eAAiB,CAC3BtM,YAAa,8BACbe,MAAO,CACHT,OAAQ4J,EAAIoC,eAEhB7M,OAAQ,CACJa,OAAQ,uBA0ChB,IAAMuM,EAAU,CACZ1C,SAAU,CACNwB,EAAG,WACHrB,IAAK,WAETwC,UAAW,CACP1C,OAAQ,SACRE,IAAK,MACLC,OAAQ,SACRC,MAAO,QACPC,QAAS,UACTI,MAAO,QACPH,SAAU,WACVE,QAAS,UACTD,QAAS,UACTG,UAAW,YACXC,GAAI,KACJG,OAAQ,SACRC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,MAAO,QACPrB,OAAQ,UAEZ0C,WAAY,CACRpB,EAAG,IACHC,GAAI,MAERoB,aAAc,CACVrB,EAAG,UAEPsB,UAAW,CACPC,IAAK,eACLtB,GAAI,cACJxB,OAAQ,kBACRuB,EAAG,aACHwB,KAAM,iBAEVjB,OAAQ,CACJP,EAAG,SACHuB,IAAK,aAETE,OAAQ,CACJhD,OAAQ,eACRuB,EAAG,YAyCX,MAYS,SAAU9O,GAEX,IAAI7R,EAEEqiB,EAjDd,SAA0BC,GACtB,IAAMf,EAAM,CACRe,SAAUA,GAAY,GACtBvN,qBAAqB,GAEzB,IAAKuN,EAED,OADAf,EAAIe,SAAW,IACRf,EAEX,IAEMgB,EAAa,CAAC,mBAAoB,qBAAsB,kBACxDC,EAAUF,EAASpR,MAAM,KACzBuR,EAAaD,EAAQ3b,OAG3B,GAAI4b,GAPsB,EAQtB,OAAOlB,EAIX,IADA,IAAMmB,EAAmBF,EAAQC,EAAa,GACrC9b,EAAI,EAAGA,EAAI4b,EAAW1b,OAAQF,IAAK,CACxC,IAAMgc,EAAOJ,EAAW5b,GACxB,GAAIgc,EAAK7f,QAAQ4f,GAAoB,EAGjC,OAFAnB,EAAIe,SAAWK,EACfpB,EAAIxM,qBAAsB,EACnBwM,EAIf,OAAOA,EAmBiBqB,EAHpB/Q,EAAOA,GAAQ,IAG2ByQ,UACpCA,EAAWD,EAAYC,UAAY,IAEnCE,EAAUF,EAASpR,MAAM,KAC/B,GAAIW,EAAKgR,gBAAiB,CACtB,IAAMC,EAAiC,oBAAXlS,OACtBC,SAASX,KAAKpN,QAAQ,aAAe,EACrCwf,EAASxf,QAAQ,aAAe,EACtC9C,EAASge,EAAU8E,EAAe5D,EAAIe,WAAaf,EAAIc,aAChDwC,EAAQ3b,QAAU,GAAKgb,EAAQW,EAAQ,MAC9CxiB,EAASge,EAAUkB,EAAI2C,EAAQW,EAAQ,IAAIA,EAAQ,OAOvD,OALKxiB,IACDA,EAASge,EAAUkB,EAAIE,SAE3Bpf,EAAO+U,oBAAsBsN,EAAYtN,sBAAuB,EAEzDqF,EAAKpa,ICtoBpB,GACI+iB,IAAK,SAAaT,EAAUxS,GASxB,OARKA,IACDA,EAA8B,oBAAXc,SAAyBA,OAAOf,UAAUC,WAAac,OAAOf,UAAUmT,QAAUpS,OAAOqS,QAAc,IAE/GC,EAAa,CACxBL,kBAAiB/S,MAAeA,EAAUV,MAAM,sBAAuBU,EAAUV,MAAM,yBACvFkT,SAAAA,KAKRa,SAAUA,I,4GCnBVC,E,wCAFEC,EAAc,UAWdC,EACU,EADVA,EAEO,EAFPA,EAGU,EAUT,SAASC,EAAU5hB,EAAK6hB,GAE7B,IAAIC,EAAQC,OACmB,IAApBvU,SAASsU,QAElBA,EAAS,SACTC,EAAmB,yBACuB,IAA1BvU,SAASwU,eACzBF,EAAS,eACTC,EAAmB,0BAErB,IAAME,EAAc3U,KAAKO,MACnBqU,EAAyB,WAC7B,OAAO,IAAI5jB,SAAQ,SAACC,EAASC,GAI3B,SAAS2jB,EAAuBrW,GAG9B,GAFA0B,SAASrO,oBAAoB4iB,EAAkBI,GAC/CC,aAAaX,GACTjU,SAASsU,IAAWhW,EAAEgW,QAAuC,WAA7BtU,SAAS6U,gBAC3C,OAAO9jB,IAETC,EAAO,IAAI+J,MAAMmZ,IARnBlU,SAAS/K,iBAAiBsf,EAAkBI,GAAwB,GAWpEV,EAAcrgB,YAAW,WAGvB,OAFAoM,SAASrO,oBAAoB4iB,EAAkBI,GAE3C3U,SAASsU,IAAwC,WAA7BtU,SAAS6U,iBAI7B/U,KAAKO,MAAQoU,EA1DW,KAuDnB1jB,SAOTC,EAAO,IAAI+J,MAAMmZ,MA/DA,SAoEvB,GAAIG,EAAY,CACd,OAAQA,GACN,KAAKF,EACHW,EAAatiB,GACb,MACF,KAAK2hB,EACHY,EAAUviB,GACV,MACF,KAAK2hB,EACHa,EAAaxiB,GAGjB,OAAOkiB,IAET,IAAMO,EAAKvU,UAAUC,UAAU9L,cACzBqgB,EAAM,CACVC,OAAO1O,EAAAA,EAAAA,MAAqB2O,SAAWC,EAAAA,GAAAA,IACvCC,UAAW,cAAchV,KAAK2U,KAAQ,gBAAgB3U,KAAK2U,GAC3DM,SAAU,8BAA8BjV,KAAK2U,GAC7CO,KAAM,2BAA2BlV,KAAK2U,IAUxC,OARAC,EAAIO,iBAAmBP,EAAII,WAAaJ,EAAIK,SACxCL,EAAIC,OAASD,EAAIM,KACnBT,EAAUviB,GACD0iB,EAAIO,iBACbT,EAAaxiB,GAEbsiB,EAAatiB,GAERkiB,IAOT,SAASM,EAAaxiB,GACpBiP,OAAOC,SAASX,KAAOvO,EAQzB,SAASsiB,EAAatiB,GACpB,IAAMkjB,EAAS1V,SAASa,cAAc,UACtC6U,EAAOC,IAAMnjB,EACbkjB,EAAOtJ,MAAMwJ,QAAU,OACvB5V,SAAS6V,KAAKC,YAAYJ,GAC1B9hB,YAAW,WACToM,SAAS6V,KAAKE,YAAYL,KACzB,KAGL,IAAMM,EAAiB,mBAAH,QAAsBC,EAAAA,EAAAA,MAM1C,SAASlB,EAAUviB,GACjB,IAAI0jB,EAAOlW,SAASmW,eAAeH,GAC9BE,KACHA,EAAOlW,SAASa,cAAc,MACzBtG,GAAKyb,EACVE,EAAK9J,MAAMwJ,QAAU,OACrB5V,SAAS6V,KAAKC,YAAYI,IAG5BA,EAAKnV,KAAOvO,EACZ0jB,EAAKE,QAQA,SAASC,EAAYC,IAKtB7P,EAAAA,EAAAA,MAAqB8B,kBACvBgO,EAAAA,EAAAA,IAAS,CAAED,MAAAA,IAEXtW,SAASsW,MAAQA,I,wKCxJrB,SAASE,EAAOC,GACd,OAAOA,EAAEvc,QAAQ,mBAAoBiG,oBAehC,SAASiI,EAAUxT,GACxB,IAAMvE,EAAU2P,SAASJ,OAASI,SAASJ,OAAOmC,MAAM,MAAQ,GAC1D2U,EAAM,GAWZ,OATArmB,EAAQsmB,MAAK,SAAA1X,GACX,IAAMD,EAAQC,EAAE8C,MAAM,KAClBnC,EAASZ,EAAM1C,MAAM,GAAG8C,KAAK,KAC3B3D,EAAO+a,EAAOxX,EAAM,IAG1B,OAFAY,EAAS4W,EAAO5W,GAChB8W,EAAIjb,GAAQmE,EACLhL,IAAQ6G,KAGV7G,EAAM8hB,EAAI9hB,IAAQ,GAAK8hB,EAsBzB,SAASrO,EAAUzT,EAAK5B,EAAOkV,GAEpC,QAAc1T,IAAVxB,EACF,MAAO,GAKwB,iBAFjCkV,EAAarL,OAAO+Z,OAAO,CAAEnX,KAAM,KAAOyI,IAEpBC,SACpBD,EAAW,WAAauC,OAAOvC,EAAWC,QAC1CD,EAAWC,QAAS,GAGtBnV,EAAQb,mBAAmBa,GAC3B4B,EAAMzC,mBAAmByC,GAEzB,IAAMiiB,EAAwBha,OAAOia,QAAQ5O,GAAY6O,QAAO,SAAC3E,EAAD,GAAgC,mBAAzB4E,EAAyB,KAAfC,EAAe,KAC9F,OAAKA,GAGL7E,GAAO,KAAO4E,GAEI,IAAdC,EACK7E,EASTA,GAAO,IAAM6E,EAAUlV,MAAM,KAAK,IAdzBqQ,IAgBR,IAEH,OAAQpS,SAASJ,OAAShL,EAAM,IAAM5B,EAAQ6jB,EAOzC,SAAS9L,EAAanW,GAC3ByT,EAAUzT,EAAK,GAAI,CACjBuT,QAAS,M,kCClGb,SAAS+O,EAAYpT,GAEnB,IADA,IAAIf,EAAS,GACJvL,EAAI,EAAGA,EAAIsM,EAAIpM,OAAQF,IAAK,CACnC,IAAI2f,EAAWrT,EAAIG,WAAWzM,GAC1B2f,EAAW,IACbpU,GAAU0H,OAAO2M,aAAaD,GACrBA,EAAW,KACpBpU,GAAU0H,OAAO2M,aAAa,IAAQD,GAAY,GAAM1M,OAAO2M,aAAa,IAAmB,GAAXD,GAC3EA,EAAW,OAAUA,GAAY,MAC1CpU,GACE0H,OAAO2M,aAAa,IAAQD,GAAY,IACxC1M,OAAO2M,aAAa,IAASD,GAAY,EAAK,IAC9C1M,OAAO2M,aAAa,IAAmB,GAAXD,IAE9BA,EAAW,QAAwB,KAAXA,IAAqB,GAA6B,KAAtBrT,EAAIG,aAAazM,IACrEuL,GACE0H,OAAO2M,aAAa,IAAQD,GAAY,IACxC1M,OAAO2M,aAAa,IAASD,GAAY,GAAM,IAC/C1M,OAAO2M,aAAa,IAASD,GAAY,EAAK,IAC9C1M,OAAO2M,aAAa,IAAmB,GAAXD,IAGlC,OAAOpU,E,gCAoBT,IAAMsU,EAjBN,WAGE,IAFA,IACIjf,EADEif,EAAW,GAERC,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC5Blf,EAAIkf,EACJ,IAAK,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACrBnf,EAAQ,EAAJA,EAAQ,WAAcA,IAAM,EAAKA,IAAM,EAE7Cif,EAASC,GAAKlf,EAEhB,OAAOif,EAOQG,GAYV,SAASC,EAAM3T,GAAc,IAAT4T,EAAS,uDAAH,EAC/B5T,EAAMoT,EAAYpT,GAClB4T,IAAa,EACb,IAAK,IAAIlgB,EAAI,EAAGA,EAAIsM,EAAIpM,OAAQF,IAC9BkgB,EAAOA,IAAQ,EAAKL,EAAqC,KAA3BK,EAAM5T,EAAIG,WAAWzM,KAErD,QAAe,EAAPkgB,KAAc,I,kHCkBxB,SAASC,EAAYC,EAAOviB,GAE1B,OADAuiB,EAAQC,OAAOD,GACXE,MAAMF,GACD,KAEI,SAATviB,IACFuiB,GAAS,GAAD,OAAIA,EAAJ,QAEFrK,KAAKwK,MAAMH,GAAS,KAAK7gB,YAQ5B,SAASihB,EAAUA,GACxB,OAAOL,EAAYK,EAAW,U,8LC9FhC,SAASC,EAAQtC,GACf,OAAOA,EAAIzb,QAAQ,kBAAmB,IAIxC,SAASge,EAAQC,GACf,OACI1W,OAAO2W,KAAKH,EAAQE,IAK1B,SAASE,EAAQC,GACf,OAA6B7W,OAAOpP,KAAKimB,GAG3C,SAASC,EAAiBD,GAGtB,OAAO7W,OAAOpP,KACZF,mBAAmBmmB,GAAQpe,QAAQ,mBAAmB,SAAC+F,EAAOuY,GAC5D,OAAO/N,OAAO2M,aAAa,KAAOoB,OAO1C,SAASC,EAAiBN,GAEtB,OAAOhY,mBACLsB,OACG2W,KAAKH,EAAQE,IACbpW,MAAM,IACN2W,KAAI,SAAAtgB,GAAC,MAAI,KAAO,KAAOA,EAAE6L,WAAW,GAAGlN,SAAS,KAAKuF,OAAO,MAC5D8C,KAAK,KC3BP,SAASuZ,IAA8B,IAAbC,EAAa,uDAAJ,GACxC,OAAIA,EAAOjlB,QAAQ,yBAA2B,EACrCilB,EAAO1e,QAAQ,uBAAwB,kBAE5C0e,EAAOjlB,QAAQ,yBAA2B,EACrCilB,EAAO1e,QAAQ,uBAAwB,sBAEzC0e,E,qkBCbT,IAAMC,EAAe,SAAArmB,GACnB,OAAOA,EAAIuP,MAAM,KAAK,IAGlB+W,EAAkB,mBASjB,IAAMC,EAAuB,SAAC,GAAyB,IAAvBC,EAAuB,EAAvBA,UAAW3K,EAAY,EAAZA,MAChD,IAAKA,EACH,OAAO2K,EAET,IAAMC,EAZR,SAAoCD,GAClC,IAAME,EAAWJ,EAAgBK,KAAKH,GACtC,OAAOE,GAAYA,EAAS,GAUTE,CAA2BJ,GAC9C,IAAKC,EACH,OAAOD,EAET,IAAMK,EF8CD,SAAgBlB,GACrB,OADsD,wDACnCD,EAAQC,GAAgBM,EAAiBN,GE/ChC3B,CAAOyC,GAAP,gCAA8C5K,EAA9C,KACtBiL,EF2BD,SAAgBhB,GAErB,OAFgD,0DAE9B,eAAehY,KAAKgY,GAG/BD,EAAQC,GAFNC,EAAiBD,GE9BJxZ,CAAOua,GAC7B,OAAOL,EAAU9e,QAAQ+e,EAAYK,IAuCvC,SAASC,EAAgBC,GACvB,IAAQC,EAAmDD,EAAnDC,QAASC,EAA0CF,EAA1CE,UAAWC,EAA+BH,EAA/BG,OAAQC,EAAuBJ,EAAvBI,MAApC,EAA2DJ,EAAhBK,OAAAA,OAA3C,MAAoD,GAApD,EACMC,EAAWD,EAAS,CAACA,GAAU,GAYrC,OAXIJ,GACFK,EAAS9hB,KAAT,mBAA0ByhB,IAExBE,GAAUC,GACZE,EAAS9hB,KAAT,gBAAuB2hB,EAAvB,YAAiCC,IAG/BF,GAAaA,EAAUrL,OACzByL,EAAS9hB,KAAT,qBAA4B0hB,EAAUrL,MAAtC,MAGKyL,EAASpiB,OAAT,oBAA+BoiB,EAAS1a,KAAK,KAAQ,GAsC9D,IAAM2a,EAAY,SAAA/mB,GAAK,MAAqB,kBAAVA,GAElC,SAASgnB,EAAoBC,GAC3B,OAAOF,EAAUE,IAAgBA,EAAc,IAAMA,EAGvD,SAASC,EAAgBT,GACvB,OAAOM,EAAUN,GAAW,GAAKA,EAGnC,SAASU,EAAkBnB,GAEzB,OAAO,EAAP,CACEoB,YAAY,GAFqB,YAArB,OAAOpB,GAAyBA,EAAY,CAAEqB,MAAOrB,IAOrE,SAASsB,IAAwB,IAAXC,EAAW,uDAAJ,GACrBZ,EAAkBY,EAAlBZ,OAAQC,EAAUW,EAAVX,MAKd,OAJID,GAAUC,KACZA,EAAQA,GAAS,EACjBD,EAASA,GAAU,GAEd,CAAEA,OAAAA,EAAQC,MAAAA,GAQnB,IAEMY,EAAqB,SAAAhB,GACzB,IAAQiB,EAAwGjB,EAAxGiB,WAAYC,EAA4FlB,EAA5FkB,QAASC,EAAmFnB,EAAnFmB,YAAaC,EAAsEpB,EAAtEoB,eAAgBnB,EAAsDD,EAAtDC,QAASQ,EAA6CT,EAA7CS,YAAajB,EAAgCQ,EAAhCR,UAAWuB,EAAqBf,EAArBe,KAAMM,EAAerB,EAAfqB,WACzFlB,EAAkBY,EAAlBZ,OAAQC,EAAUW,EAAVX,MACZE,EAAW,GAGfA,EAAS9hB,KACPuhB,EAAgB,CACdG,UAAW,CAAErL,MAAO4L,MAIxB,IAAIa,EAAwBF,GA5E9B,SAA6BpB,GAC3B,IAAQa,EAA4Cb,EAA5Ca,MAAOU,EAAqCvB,EAArCuB,QAASC,EAA4BxB,EAA5BwB,GAAIC,EAAwBzB,EAAxByB,GAAIC,EAAoB1B,EAApB0B,QAASC,EAAW3B,EAAX2B,OACnCpY,EAAS,GACf,IAAKsX,EACH,MAAO,GAET,IAAIe,EAAQ5B,EAAM4B,MAqBlB,OApBKF,GAAYC,IACfC,EAAQA,GAAS,EACjBrY,EAAO/K,KAAP,iBAAsBojB,MAGnBA,GAASF,GAAWC,GACvBpY,EAAO/K,KAAP,mBAAwBkjB,EAAxB,mBAA0CC,IAExCd,GACFtX,EAAO/K,KAAP,iBAAsBqiB,IAEpBU,GACFhY,EAAO/K,KAAP,mBAAwB+iB,IAEtBC,GACFjY,EAAO/K,KAAP,cAAmBgjB,IAEjBC,GACFlY,EAAO/K,KAAP,cAAmBijB,IAEdlY,EAAOrL,OAAP,qBAA8BqL,EAAO3D,KAAK,KAAQ,GAiDXic,CAAoBrC,GAmClE,OAjCIiB,IACFa,EAAwB/B,EAAqB,CAC3CC,UAAW8B,EACXzM,MAAO4L,KAGPjB,EAAUoB,YACZN,EAAS9hB,KAAK8iB,GAGhBhB,EAAS9hB,KACPuhB,EAAgB,CACdE,QAAAA,EACAE,OAAAA,EACAC,MAAAA,EACAC,OAAQgB,KAIZf,EAAS9hB,KAtJX,SAAyBwhB,GACvB,IAAQ8B,EAA6D9B,EAA7D8B,KAAMjN,EAAuDmL,EAAvDnL,MAAOkN,EAAgD/B,EAAhD+B,OAAQC,EAAwChC,EAAxCgC,OAAQd,EAAgClB,EAAhCkB,QAASe,EAAuBjC,EAAvBiC,SAAUC,EAAalC,EAAbkC,SAClD3Y,EAAS,GAsBf,OArBIuY,IAASjN,GAASkN,KACpBxY,EAAO/K,KAAP,WAAgBsjB,IACZjN,GACFtL,EAAO/K,KAAP,aAAkBqW,IAEhBkN,GACFxY,EAAO/K,KAAP,aAAkBujB,KAGlBb,GACF3X,EAAO/K,KAAP,aAAkB0iB,IAEhBc,GACFzY,EAAO/K,KAAP,kBAAuBwjB,IAErBC,GACF1Y,EAAO/K,KAAP,cAAmByjB,IAEjBC,GACF3Y,EAAO/K,KAAP,cAAmB0jB,IAEd3Y,EAAOrL,OAAP,oBAA6BqL,EAAO3D,KAAK,KAAQ,GA+HtDuc,CAAgB,CACdL,KAAM,IACNjN,MAAOsM,EACPD,QAAAA,EACAc,OAAQf,EAAa,OAAS,MAI7BzB,EAAUoB,YACbN,EAAS9hB,KAAK8iB,IAGhBhB,EAAWA,EAAS8B,QAAO,SAAAC,GAAO,QAAMA,MACxBnkB,OAAS,IAAMoiB,EAAS1a,KAjDxB,OAiD0C,IAG/C0c,EAAgB,CAAEnB,YAAa,KAAMD,QAAS,IACrDqB,EAAS,SAAAvpB,GAAG,OAA4B,IAAxBA,EAAImB,QAAQ,SAAuC,IAAtBnB,EAAImB,QAAQ,OAiCxD,SAASqoB,EAAoBxpB,GAA4B,IAAvBgnB,EAAuB,uDAAfsC,EAS/C,IAAKC,EAHHvpB,EAAMA,GAAO,IAIb,OAAOA,EAGTA,EAAMmmB,EAAiBnmB,GAGvB,IAAMypB,GAFNzpB,GAAM0pB,EAAAA,EAAAA,IAAW1pB,IAEOuP,MAAM,KAAK,GACnC,GAAIka,EAIF,OAAOzpB,EAGT,IAAM2pB,EAAW,EAAH,KACT3C,GADS,IAEZC,QAASS,EAAgBV,EAAMC,SAC/BQ,YAAaD,EAAoBR,EAAMS,aACvCjB,UAAWmB,EAAkBX,EAAMR,WACnCuB,KAAMD,EAAad,EAAMe,QAa3B,OATI/nB,EAAImB,QAAQ,SAAW,IACzBwoB,EAAS1C,SAAU,EAEnB0C,EAAS1B,aAAa0B,EAASC,iBAAkBD,EAAS1B,YAGxD0B,EAAS1B,aACX0B,EAASzB,QAAUyB,EAASzB,SAAW,IAElC7B,EAAarmB,GAAOgoB,EAAmB2B,K,kECtRhD,IAAME,EAAe,oBACfC,EAAW,WAYV,SAASC,IAAwD,IAA3CC,EAA2C,uDAAzB,GAAItb,EAAqB,uDAAdmb,EAYxD,MAAO,GAAP,OAAUC,GAAV,OAAqBpb,GAArB,OAA4Bsb,K,yFClBvB,SAASC,EAAW9G,EAAK+G,GAI9B,OAAO,IAAI5rB,SAAQ,SAACC,EAASC,GAC3B,IAAM2rB,EAAS3c,SAASa,cAAc,UAEtC8b,EAAOC,OAAS,SAAAte,GACd0B,SAAS6V,KAAKE,YAAY4G,GAC1B5rB,EAAQuN,IAGVqe,EAAO7oB,QAAU,SAAAwK,GACf0B,SAAS6V,KAAKE,YAAY4G,GAC1B3rB,EAAOsN,IAGToe,GAAS7f,OAAOC,KAAK4f,GAAOhoB,SAAQ,SAAAE,GAAG,OAAI+nB,EAAO3b,aAAapM,EAAK8nB,EAAM9nB,OAC1E+nB,EAAOhH,IAAMA,EAEb3V,SAAS6V,KAAKC,YAAY6G,Q,yFCnBvB,SAAS1G,IAEd,IAFgC,IAAX4G,EAAW,uDAAJ,GACxBtiB,EAAK,GACFA,EAAG7C,OAASmlB,GACjBtiB,GAAMgT,KAAKuP,SACR/lB,SAAS,IACTuF,MAAM,GAEX,OAAO/B,EAAG+B,MAAM,EAAGugB,K,gFCnBfE,G,eAAiB,CACrBC,QAAS,EACTC,KAAM,EACN,KAAM,EACN,KAAM,EACN,KAAM,IAEFC,EAAsB,UACtBC,EAAeJ,EAAc,QA8BnC,SAASK,IACP,OAAO,IAAItsB,SAAQ,SAAAC,GACjB,GA1BuB,YAAlB,oBAAO0Q,OAAP,oBAAOA,UAAuBA,OAAO4b,gBAAkB5b,OAAO6b,IAAM7b,OAAO6b,GAAGC,eA8BnF,OAAOxsB,EAvBF,IAAID,SAAQ,SAAAC,GACjB0Q,OAAO6b,GAAGE,OAAM,WACd/b,OAAO6b,GAAGC,eAAe,CACvBE,QADuB,SACfrL,GACNrhB,EAAQqhB,GAAOA,EAAIsL,cAErBC,KAJuB,WAKrB5sB,EAAQmsB,aAaZnsB,EAA6B,YAArB,oBAAO2P,UAAP,oBAAOA,aAA0BA,UAAUkd,YAAcld,UAAUkd,WAAWC,kBAerF,SAASC,IACd,OAAOV,IAAqB9lB,MAAK,SAAAomB,GAC/B,OAAOX,EAAeW,IAAgBP,O,iQC3CnC,SAASY,IACd,IAAM7Y,GAAQ+D,EAAAA,EAAAA,IAAWvH,SAASP,QAC5B6c,EAAanhB,OAAOia,QAAQ5R,GAAO6R,QAAO,SAAChU,EAAD,GAA0B,mBAAhBnO,EAAgB,KAAX5B,EAAW,KAMxE,OALK4B,EAAIqpB,WAAW,WAAarpB,EAAIqpB,WAAW,UAAYjrB,IAG1D+P,EADAnO,EAAMA,EAAIqpB,WAAW,QAAf,gBAAkCrpB,EAAI0H,MAAM,IAAO1H,GAC3C5B,GAET+P,IACN,IAEH,OAAI0D,EAAAA,EAAAA,MAAqB8B,kBAChB2V,EAAAA,EAAAA,MACJzV,OAAM,iBAAO,MACbnR,MAAK,SAAA2N,GAAK,OAAIpI,OAAO+Z,OAAOoH,EAAY/Y,MAGtCnU,QAAQC,QAAQitB,GAQlB,SAASG,IAEd,OAAOJ,IAAezmB,MAAK,YACzB,MAAO,CAAE8mB,cADuE,EAApDA,cACJC,cADwD,EAArCA,cACJC,gBADyC,EAAtBA,oBAgBvD,SAASC,EAAuBC,GACrC,IAAMtZ,GAAQ+D,EAAAA,EAAAA,IAAWvH,SAASP,QAC5Bsd,EAAe,GACrB,IAAK,IAAM7pB,KAAOsQ,EAEhB,IAAIuZ,EAAa7pB,GAKjB,GAAIA,EAAIqpB,WAAW,QAAkB,iBAARrpB,GAAkC,gBAARA,EACrD6pB,EAAa7pB,GAAOsQ,EAAMtQ,QACrB,GAAI4pB,GAA2B5pB,EAAIqpB,WAAW,QAAS,CAG5DQ,EADe7pB,EAAIsF,QAAQ,OAAQ,QACZgL,EAAMtQ,QACpB4pB,GAAmC,UAAR5pB,EAEpC6pB,EAAY,SAAevZ,EAAMtQ,GACxB4pB,GAAmC,mBAAR5pB,IAEpC6pB,EAAY,YAAkBvZ,EAAMtQ,IAGxC,OAAO6pB,EASF,SAASC,EAAaC,GAC3B,MAAO,GAAP,OAAUA,EAAV,YAAoB7e,KAAKO,MAAzB,aAAkC4V,EAAAA,EAAAA,GAAO,O,kCC7EpC,SAAS2I,IACd,OAAO5e,SAAS6V,KAAKgJ,WAAa7e,SAAS8e,gBAAgBD,WAAa,E,4nBCJnE,SAASE,EAAcvsB,GAC5B,MAAO,qBAAqB8N,KAAK9N,GAS5B,SAASwS,EAAWE,GACzB,OAAOrI,OAAOia,QAAQ5R,GACnB6R,QAAO,SAAChU,EAAD,GAAwB,mBAAdnO,EAAc,KAATD,EAAS,KAC9B,OAAc,MAAPA,EAAcoO,EAASA,EAAS,IAAM5Q,mBAAmByC,GAAO,IAAMzC,mBAAmBsY,OAAO9V,MACtG,IACF2H,MAAM,GAyBX,IAAM0iB,GAAqBC,EAAAA,EAAAA,KAAQ,SAAA9d,GAGjC,OADAA,EAAuB,MAAdA,EAAO,GAAaA,EAAO7E,MAAM,GAAK6E,GACjCY,MAAM,KAAKgV,QAAO,SAAChU,EAAQyQ,GACvC,GAAIA,EAAM,CACR,MAnBN,SAAsB8E,EAAQ4G,GAC5B,GAAkB,KAAdA,EACF,MAAO,CAAC5G,GAGV,IAAM6G,EAAiB7G,EAAO3kB,QAAQurB,GAEtC,OAAwB,IAApBC,EACK,CAAC7G,GAGH,CAACA,EAAOhc,MAAM,EAAG6iB,GAAiB7G,EAAOhc,MAAM6iB,EAAiBD,EAAUxnB,SAQnD0nB,CAAa5L,EAAM,KAA7C,eAAO5e,EAAP,YAAY5B,OAAZ,MAAoB,GAApB,EACA,IACE+P,EAAO5C,mBAAmBvL,IAAQuL,mBAAmBnN,GACrD,MAAOsL,IACP+gB,EAAAA,EAAAA,IAAgB/gB,IAIpB,OAAOyE,IACN,OASE,SAASkG,EAAW9H,GACzB,O,qWAAO,CAAP,GAAY6d,EAAmB7d,IAiB1B,SAASme,EAA6B9sB,GAE3C,GAAsC,IAAlCA,EAAImB,QAAQ,kBAAyB,CACvC,IAAMsE,EAAQzF,EAAImB,QAAQ,IAAK,iBAAiB+D,QAChD,OAAkB,IAAXO,EAAe,IAAMzF,EAAI8J,MAAMrE,GAGxC,GAAI8mB,EAAcvsB,GAAM,CACtB,MAOJ,SAAsBA,GAChB,EAIJ,IAAMoR,EAAI5D,SAASa,cAAc,KAGjC,OAFA+C,EAAE7C,KAAOvO,EAEFoR,EAf8B2b,CAAa/sB,GAChD,OADA,EAAQ+O,SAAR,EAAkBJ,OAAlB,EAA0BC,KAI5B,MAAyB,MAAlB5O,EAAIgP,OAAO,GAAahP,EAAM,IAAMA,EAwBtC,SAASuT,EAAYyZ,EAAShtB,GAEnC,IAAMitB,GADNjtB,EAAMA,GAAO,IACOuP,MAAM,KAAK,IAAM,GAC/B2d,EAAYC,EAAcntB,GAE1BotB,EAAc5a,EADDnI,OAAO+Z,OAAO,GAAI8I,EAAWF,IAE1CK,EAASrtB,EAAIuP,MAAM,KAAK,GAC1B+d,EAAYF,EAAc,CAACC,EAAQD,GAAaxgB,KAAK,KAAOygB,EAEhE,OADAC,EAAYL,EAAU,CAACK,EAAWL,GAASrgB,KAAK,KAAO0gB,EASlD,SAASH,EAAcntB,GAK5B,OAAOyW,GAJWzW,EAAIuP,MAAM,KACA,IAAM,IACVA,MAAM,KACV,IAAM,IAUrB,SAASge,EAAevtB,EAAKwtB,GAClC,IAaMC,EAba,SAAAztB,GAMjB,GAAuD,IAAnDiP,OAAOC,SAASX,KAAKpN,QAAQ,kBAC/B,OAAO2rB,EAA6B9sB,GAEtC,IAAMoR,EAAI5D,SAASa,cAAc,KAEjC,OADA+C,EAAE7C,KAAOvO,EACFoR,EAAE7C,KAEKmf,CAAW1tB,GAC3B,OAAOwtB,EAAUja,EAAYia,EAASC,GAAWA,EAiB5C,SAAS/D,EAAW1pB,GACzB,OAAOA,EAAI0H,QAAQ,oBAAqB,YAQnC,SAASimB,EAAU3tB,GAIxB,OAAO0pB,EAAW1pB,K,iICtMb,SAASysB,EAAQmB,GAAiC,IAA3BC,EAA2B,uDAAf,IAAKC,EAAU,uCACvD,GAAoB,mBAATF,GAAoC,MAAZE,GAAwC,mBAAbA,EAC5D,MAAM,IAAIppB,UAAU,uBAEtB,IAAMqpB,EAAQ,GACRC,EAAa,GACnB,OAAO,WAAkB,2BAAN3hB,EAAM,yBAANA,EAAM,gBACvB,IAAMjK,EAAM0rB,EAAWA,EAAS5mB,MAAM5C,KAAM+H,GAAQA,EAAK,GACnD5G,EAAQuoB,EAAW7sB,QAAQiB,GACjC,GAAIqD,GAAS,EACX,OAAOsoB,EAAMtoB,GAEf,IAAM8K,EAASqd,EAAK1mB,MAAM5C,KAAM+H,GAQhC,OAPA0hB,EAAMvoB,KAAK+K,GACXyd,EAAWxoB,KAAKpD,GACZ2rB,EAAM7oB,OAAS2oB,IAEjBG,EAAW5mB,QACX2mB,EAAM3mB,SAEDmJ,GASJ,SAASsc,EAAgBrlB,EAAOymB,GACrC7sB,YAAW,WAET,MADAoG,EAAMymB,UAAYA,EACZzmB,KAUH,SAAS0mB,EAASN,EAAMO,GAC7B,IAAI5d,EACA6d,EAAW,EAEf,OAAO,WACL,IAAMvgB,EAAMP,KAAKO,MAKjB,OAJIA,EAAMugB,GAAYD,IACpBC,EAAWvgB,EACX0C,EAASqd,EAAK1mB,MAAM5C,KAAM4B,YAErBqK,K,4HC3DI,SAAS,EAAC/P,GACvB,OAAOA,GAA0B,YAAjB,OAAOA,GCDlB,IACM6tB,EAAU,CAAC,gBAAiB,mBAa5BC,EAAmC,CAC9C,gBAAiB,CAAE,kBAAmB,GAAI,kBAAmB,IAC7D,uBAAwB,CACtB,mBAAoB,GACpB,mBAAoB,GACpB,mBAAoB,GACpB,mBAAoB,IAEtB,uBAAwB,CACtB,yBAA0B,GAC1B,yBAA0B,GAC1B,yBAA0B,IAE5B,uBAAwB,CACtB,uBAAwB,GACxB,uBAAwB,IAE1B,uBAAwB,CACtB,sBAAuB,GACvB,sBAAuB,GACvB,sBAAuB,GAEzB,uBAAwB,CACtB,yBAA0B,GAC1B,yBAA0B,IAE5B,iBAAkB,CAChB,mBAAoB,GACpB,mBAAoB,GACpB,mBAAoB,GACpB,mBAAoB,IAEtB,uBAAwB,CAAE,yBAA0B,KACpD,qBAAsB,CACpB,uBAAwB,GACxB,uBAAwB,IAE1B,uBAAwB,CACtB,yBAA0B,GAC1B,yBAA0B,GAC1B,yBAA0B,IAE5B,oBAAqB,CACnB,sBAAuB,GACvB,sBAAuB,IAEzB,oBAAqB,CAAE,sBAAuB,KAC9C,qBAAsB,CACpB,uBAAwB,GACxB,uBAAwB,IAE1B,oBAAqB,CACnB,sBAAuB,GACvB,sBAAuB,GACvB,sBAAuB,ICxD3B,SAASC,EAAkB/tB,EAAOguB,QACtBxsB,IAAVxB,IAAuBiuB,EAAAA,EAAAA,GAAY,CAAEC,SAAUF,EAAKzgB,QAAS,CAAEvN,MAAOmL,KAAKI,UAAUvL,MAGvF,SAASmuB,EAA4BC,GACnC,IAAKtjB,EAASsjB,GAEZ,OADAL,EAAkBK,EAAuB,mDAClCN,EAGT,IAAM/d,EAAS,GACf,IAAK,IAAI7B,KAAQkgB,EACVtjB,EAASsjB,EAAsBlgB,IAOlC6B,EAAO7B,GAAQkgB,EAAsBlgB,IANrC6f,EACEK,EADe,gDAE0BlgB,EAF1B,eAIjB6B,EAAO7B,GAAQ,IAKnB,OAAO6B,EAGT,SAASse,EAAiBC,GACxB,OCtCuBtuB,EDsCTsuB,ECrCmC,oBAA1CzkB,OAAO3G,UAAUa,SAASmE,KAAKlI,IAAiC8kB,MAAM9kB,IDqChDsuB,EAAa,GACxCP,EAAkBO,EAAY,wCDvCC,GC0C1BA,EC1CM,IAAUtuB,ED6CzB,SAASuuB,EAAoBC,GAC3B,OApCgBxuB,EAoCDwuB,EApCoD,qBAA1C3kB,OAAO3G,UAAUa,SAASmE,KAAKlI,IAqCtD+tB,EAAkBS,EAAe,0CD7CE,MCgD9BA,EAxCS,IAAAxuB,E,IEFdnC,EF8DiB4wB,EAAAA,WACnB,WAAYC,IAAW,eACrB,IAAMC,EAnBV,SAA4BD,GAC1B,OAAK5jB,EAAS4jB,GASP,CACLN,sBAAuBD,EAA4BO,EAAUN,uBAC7DI,cAAeD,EAAoBG,EAAUF,eAC7CF,WAAYD,EAAiBK,EAAUJ,cAXvCP,EAAkBW,EAAW,mCACtB,CACLN,sBAAuBN,EACvBU,eDxDiC,ECyDjCF,WD3D6B,ICwEVM,CAAmBF,GAExC5qB,KAAK+qB,uBAAyBF,EAAaP,sBAC3CtqB,KAAKgrB,eAAiBH,EAAaH,cACnC1qB,KAAKirB,YAAcJ,EAAaL,W,uDAGlC,WACE,OAAOxqB,KAAK+qB,yB,2BAEd,WACE,OAAO/qB,KAAKgrB,iB,2BAEd,WACE,OAAOhrB,KAAKirB,c,uBAEd,WACE,OAAOlB,I,mCAOT,SAAsB3f,GACpB,IACM8gB,EADwBlrB,KAAK+qB,uBACQ3gB,GAC3C,OAAOpD,EAASkkB,GAAgBA,EAAe,K,2BAOjD,SAAcC,GACZ,IAAMb,EAAwBtqB,KAAK+qB,uBACnC,IAAK,IAAIK,KAAcd,EAAuB,CAG5C,GAAIa,KAFuBb,EAAsBc,GAG/C,OAAOA,EAGX,MAAO,O,EA7CUT,GGnEfU,EAAoB,cDMX,SAASC,IAItB,OAHKvxB,IACHA,EAAS,IAAI4wB,ECNF,WAKb,IAAMY,EAAe5gB,OAAM,YAC3B,GAAIA,OAAO0B,eAAegf,KAAuBrkB,EAASukB,GAAe,CACvE,IAAMnB,EAAW,qBAAH,OAAwBiB,EAAxB,WACdlB,EAAAA,EAAAA,GAAY,CACVC,SAAAA,EACA3gB,QAAS,CAAEvN,MAAOqvB,GAClBroB,MAAO,IAAIe,MAAMmmB,KAIrB,OAAOmB,EDTeC,KAEfzxB,I,gwBEXM,SAAS0xB,EAAaphB,EAAQqhB,GAC3C,IAAMtd,EAAQ/D,GAAS8H,EAAAA,EAAAA,IAAW9H,GAAU,GAC5C,MAAO,IAAP,QAAW6D,EAAAA,EAAAA,IAAW,EAAD,KAChBE,GACAsd,K,umBCGHC,ECCiBC,EAAAA,WACnB,WAAY7xB,IAAQ,eAClBiG,KAAK6rB,QAAU9xB,E,2CAQjB,SAAaqQ,GACX,IAAKpK,KAAK6rB,QAAQnB,gBAChB,OAAOtgB,EAET,IAAM0hB,EAAM9rB,KAAK6rB,QAAQE,YAAYjH,QAAO,SAAAkH,GAAE,OAAIA,IAAO5hB,KAEzD,OAAO0hB,EADarV,KAAKwK,MAAMxK,KAAKuP,SAAW8F,EAAIlrB,W,sBAIrD,SAASwJ,GACP,OAAOpK,KAAK6rB,QAAQE,YAAYtc,SAASrF,K,8BAS3C,SAAiBA,EAAM6hB,GACrB,IClCoClyB,EAChCmyB,EDiCEhB,EAAelrB,KAAK6rB,QAAQM,sBAAsB/hB,GACxD,OCnCoCrQ,EDmCb,OAAKmxB,GAAN,cAAqBe,EAAgB,IClCvDC,EAAWzV,KAAKwK,MAAMxK,KAAKuP,SAAWjF,OAAOqL,mBAC5CC,EAAAA,EAAAA,GAAoBtyB,EAAQmyB,K,4BD0CnC,SAAepf,GACb,IAAMwf,EAAcxf,EAAE1C,KAChBmiB,EAAUvsB,KAAKwsB,SAASF,GACxBpD,GAAUL,EAAAA,EAAAA,IAAc/b,EAAEzC,QAChC,OAAQkiB,GAAWrD,EAAQ9e,MAASpK,KAAK6rB,QAAQY,cAAcH,IAAgBA,I,yBAajF,SAAYlB,EAAYkB,EAAaI,GACnC,IAAIvB,EAIJ,OAHIuB,EAAe,IACjBvB,EAAenrB,KAAK2sB,iBAAiBvB,EAAYkB,IAE5CnB,GAAgBnrB,KAAK4sB,aAAaN,K,4BAS3C,WAA2C,IAA5B5wB,EAA4B,uDAAtB,GAAIgxB,EAAkB,uDAAH,EAChC5f,EAAI5D,SAASa,cAAc,KACjC+C,EAAE7C,KAAOvO,EAET,IAAM0vB,EAAaprB,KAAK6sB,eAAe/f,GACjCggB,EAAU9sB,KAAK+sB,YAAY3B,EAAYte,EAAE1C,KAAMsiB,GAWrD,OARI1sB,KAAKwsB,SAASM,KAChBhgB,EAAEzC,OAASohB,EAAa3e,EAAEzC,OAAQ,CAChCD,KAAMghB,IAERte,EAAE3C,SAAW,SAGf2C,EAAE1C,KAAO0iB,EACFhgB,EAAE7C,S,EAvFQ2hB,GDAN,SAASoB,EAAetxB,EAAKgxB,GAI1C,OAHKf,IACHA,EAAa,IAAIC,GAAsBN,EAAAA,EAAAA,OAElCK,EAAWqB,eAAetxB,EAAKgxB,K,sEGVpCO,E,qEACW,SAAeC,IAA9B,+B,wCAAe,kGACc,IAAhBD,EADE,yCAEJA,GAFI,aAIiBtd,EAAAA,EAAAA,MAAtBD,EAJK,EAILA,SAAUlE,EAJL,EAIKA,UACdkE,IAAayd,EAAAA,GAAAA,SAAmB5a,EAAAA,EAAAA,IAAe/G,EAAS,UAAY,GAL3D,uBAMXyhB,GAAc,EANH,kBAOJA,GAPI,iCAUiBna,EAAAA,EAAAA,IAA0B,WAAY,sBAVvD,cAULsa,EAVK,OAWXH,EAAcG,EAAcC,cAXjB,kBAYJJ,GAZI,mCAcX9C,EAAAA,EAAAA,GAAY,CAAEjnB,MAAO,EAAF,KAdR,2D,kGCCA,SAASmpB,EAAoBiB,EAAqBpB,GAC/D,IACMqB,EADUxnB,OAAOC,KAAKsnB,GACCrN,QAAO,SAACuN,EAAK5kB,GACxC,OAAO4kB,EAAMF,EAAoB1kB,KAChC,GACHsjB,GAAsBqB,EACtB,IAAIE,EAAiB,EACrB,IAAK,IAAI7kB,KAAU0kB,EAEjB,GAAIpB,GADJuB,GAAkBH,EAAoB1kB,IAEpC,OAAOA,EAGX,MAAO,K,yECdM,SAASqc,EAAOvpB,GAC7B,MAAmB,iBAARA,GAGJ,CAAC,UAAW,WAAY,MAAMmkB,MAAK,SAAA1V,GAAQ,OAAIzO,EAAIyrB,WAAWhd,Q,+ECAxD,SAASggB,EAAT,GAAmD,IAA5BC,EAA4B,EAA5BA,SAAU3gB,EAAkB,EAAlBA,QAI9C,IAAMikB,EAJ0D,EAATxqB,OAI3B,IAAIe,MAAMmmB,IACtC7B,EAAAA,EAAAA,IAAgBmF,EAAY,CAAEjkB,QAAAA,EAASkkB,UAAWvD,M,gGCDrC,SAASwD,EAAa1gB,EAAS2gB,GAK5C,GAAoC,oBAAzBC,uBAAiE,IAAzBA,qBAA+B,CAChF,IAAMC,EAAeC,EAAQ,MAK7BC,EAAAA,OAAgB,gBAACF,EAAaG,SAAd,CAAuBhyB,MAAO,CAAEiyB,UAJ9B,WAAe,2BAAXrX,EAAW,yBAAXA,EAAW,gBAC/B,IAAMsX,EAAYtX,EAAO8K,KAAI,SAAAtM,GAAK,OAAIA,EAAM+Y,gBAC5C,OAAO,kBAAMD,EAAUxwB,SAAQ,SAAA0wB,GAAO,OAAIA,WAEkBphB,GAAkC2gB,QAEhGI,EAAAA,OAAgB/gB,EAAS2gB,K,8DChBzBU,EAAa,SAACzX,GAehB,OAde,SAAA0X,GAAS,OAAIA,IAkBM,oBAAzBV,uBAAiE,IAAzBA,uBACjDS,EAAaP,EAAQ,OAGvB,O,mOC5BMte,G,SAAiCC,EAAAA,EAAAA,OAEjC8e,EAAmB,CACvBC,WAAY,MACZC,UAAW,CAHe,MA8I5B,OAvIMC,EAAAA,EAAAA,IACJ,aAAc,gCASdza,MATc,iBASP,6GAQyBzE,EAAS+B,kBAAoB/B,EAASmf,UAC/Dnf,EAASmf,SAAS,SAAU,SAAU,oBATtC,uBAWH,EAAKC,gBAXF,oDCpBAhc,EAAAA,EAAAA,IAA0B,WAAY,mBAAoB,MDoB1D,iDAeuC,GAfvC,QAeGwI,EAfH,KAgBcvG,SAASuG,EAAIyT,WAAY,KCjCT3jB,EDmCR,WACrB,EAAK0jB,kBCnCbE,EAAAA,EAAAA,MAAqBxuB,KAAK4K,IDsCpB,EAAK0jB,gBAtBJ,kDAyBH,EAAKA,gBAzBF,kCCjB6B,IAAC1jB,IDiB9B,qBATO,KAwCd0jB,cAAgB,WACd,EAAKG,QAAU,IAAIC,qBAAqB,EAAKC,iBAAkBV,GAC/D9rB,MAAM4C,QAAQ,EAAK6pB,aAAe,EAAKA,WAAWxxB,SAAQ,SAAC0rB,GACzDA,GAAQA,OAEV,EAAK8F,WAAa,MA7CN,KAgDdD,iBAAmB,SAACnP,GAElBA,EAAQpiB,SAAQ,SAACyxB,GAGf,IAAMC,EAASva,SAASsa,EAAMhqB,OAAOkqB,QAAQC,OAAQ,IACrD,GAAIF,EAAJ,CAQA,GAFsBD,EAAMI,gBAAmBJ,EAAMK,mBApE/B,IAsEJ,CAEhB,IADsB,EAAKC,QAAQL,IAAW,IAAtCM,UAGN,YADA,EAAKC,IAAIP,GAGX,EAAKQ,WAAWR,GAAUD,OAEvB,EAAKS,WAAWR,KACdD,EAAMU,KAAO,EAAKD,WAAWR,GAAQS,MA1E/B,KA2EP,EAAKF,IAAIP,UAEJ,EAAKQ,WAAWR,IAIxB,EAAKU,WACNlS,aAAa,EAAKkS,WAEpB,EAAKA,UAAYlzB,YAAW,WAC1BiJ,OAAOC,KAAK,EAAK8pB,YAAYlyB,SAAQ,SAAC6F,GACpC,EAAKosB,IAAIpsB,UACF,EAAKqsB,WAAWrsB,QAvFd,UAGH,KA2FdosB,IAAM,SAACpsB,GACL,GAAI,EAAKksB,QAAQlsB,GAAjB,CAGA,MAAiD,EAAKksB,QAAQlsB,IAAO,GAA7DwsB,EAAR,EAAQA,KAAMC,EAAd,EAAcA,KAAMC,EAApB,EAAoBA,GAAIC,EAAxB,EAAwBA,qBACxBF,GAAQ,EAAKG,WAAWF,EAAI1sB,GACzB2sB,EACDA,KAEAE,EAAAA,EAAAA,IAAgBL,KApGN,KAyGdM,SAAW,YAAwE,IAArEJ,EAAqE,EAArEA,GAAIF,EAAiE,EAAjEA,KAAMG,EAA2D,EAA3DA,qBAA2D,IAArCF,KAAAA,OAAqC,aAAxBN,UAAAA,OAAwB,SACjF,GAAIO,GAAOF,EAAX,CAGA,IAAMxsB,EAAK,EAAK+sB,QAChB,EAAKA,UACLL,EAAGZ,QAAQC,OAAS/rB,EACpB,EAAKksB,QAAQlsB,GAAM2sB,EACf,CAAED,GAAAA,EAAIF,KAAAA,EAAMC,KAAAA,EAAMN,UAAAA,EAAWQ,qBAAAA,GAC7B,CAAED,GAAAA,EAAIF,KAAAA,EAAMC,KAAAA,EAAMN,UAAAA,GACnB,EAAKX,QACN,EAAKA,QAAQwB,QAAQN,GAErB,EAAKf,WAAWluB,MAAK,WACnB,EAAK+tB,QAAQwB,QAAQN,QAvHb,KA6HdE,WAAa,SAACF,EAAI1sB,GACb,EAAKwrB,SACN,EAAKA,QAAQyB,UAAUP,UAElB,EAAKR,QAAQlsB,UACb,EAAKqsB,WAAWrsB,IAjIvBzD,KAAKwwB,QAAU,EACfxwB,KAAKivB,QAAU,KACfjvB,KAAK8vB,WAAa,GAClB9vB,KAAK2vB,QAAU,GACf3vB,KAAKovB,WAAa,GAClBpvB,KAAKmU,W,4bEfHwc,EAAAA,SAAAA,I,6KAiBJC,kBAAoB,WAClB,MAAuB,EAAK7d,MAApBtP,EAAR,EAAQA,GAAIotB,EAAZ,EAAYA,OACZ,EAAKV,IAAKW,EAAAA,EAAAA,cAAY,YAAS5nB,SAASmW,eAAe5b,GACpDotB,GACD,EAAKE,gB,EAITC,mBAAqB,SAACC,GACjB,EAAKC,OACJD,EAAUJ,QAAU,EAAK9d,MAAM8d,SACjC,EAAKE,eACL,EAAKG,MAAO,I,EAIhBC,qBAAuB,WAErB,GAAG,EAAKhB,IAAM,EAAKiB,aAAc,CAC/B,IAAM3tB,EAAKsR,SAAS,EAAKob,GAAGZ,QAAQC,OAAQ,KAAO,EACnD6B,EAAAA,WAAsB,EAAKlB,GAAI1sB,K,EAInCstB,aAAe,WACb,MAAgE,EAAKhe,MAA7Due,EAAR,EAAQA,aAAcpB,EAAtB,EAAsBA,KAAME,EAA5B,EAA4BA,qBAAsBR,EAAlD,EAAkDA,UAClDyB,EAAAA,SAAoB,CAClBlB,GAAI,EAAKA,GACTF,KAAMqB,EACNpB,KAAAA,EACAE,qBAAAA,EACAR,UAAAA,IAEF,EAAKwB,cAAe,G,uCAGtB,WACE,OAAO/b,EAAAA,SAAAA,KAAoBrV,KAAK+S,MAAMwe,c,EAtDpCZ,CAAanC,EAAAA,WAAbmC,EACGa,aAAe,CACpBX,QAAQ,EACRptB,GAAI,GACJysB,MAAM,EACNoB,aAAc,GACd1B,WAAW,GAoDf,IC7DA,ED6DA,G,yFErDO,IAAM6B,EAAS,CACpBC,sBAAuB,MACvBC,iBAAkB,MAClBC,8BAA+B,MAC/BC,aAAc,MACdC,aAAc,MACdC,aAAc,MACdC,kBAAmB,MACnBC,oBAAqB,MACrBC,8BAA+B,MAC/BC,eAAgB,MAChBC,aAAc,MACdC,mBAAoB,MACpBC,iBAAkB,MAClBC,oBAAqB,MACrBC,YAAa,MACbC,iBAAkB,MAClBC,cAAe,MACfC,aAAc,MACdC,eAAgB,MAChBC,eAAgB,MAChBC,uBAAwB,MACxBC,wBAAyB,MACzBC,cAAe,MACfC,kBAAmB,MACnBC,aAAc,MACdC,sBAAuB,MACvBC,oBAAqB,MACrBC,2BAA4B,MAC5BC,cAAe,MACfC,YAAa,MACbC,aAAc,MACdC,iBAAkB,MAClBC,aAAc,MACdC,eAAgB,MAChBC,+BAAgC,MAChCC,oBAAqB,MACrBC,iBAAkB,MAClBC,oBAAqB,IACrBC,oBAAqB,MACrBC,mBAAoB,MACpBC,mBAAoB,MACpBC,2BAA4B,MAC5BC,iCAAkC,MAClCC,uBAAwB,MACxBC,2BAA4B,MAC5BC,yBAA0B,MAC1BC,gCAAiC,MACjCC,2BAA4B,MAC5BC,+BAAgC,MAChCC,kCAAmC,MACnCC,6BAA8B,MAC9BC,2BAA4B,MAC5BC,gBAAiB,MACjBC,gBAAiB,MACjBC,mBAAoB,MACpBC,mBAAoB,MACpBC,qBAAsB,MACtBC,qBAAsB,MACtBC,mBAAoB,MACpBC,uBAAwB,MACxBC,wBAAyB,MACzBC,sBAAuB,MACvBC,uBAAwB,MACxBC,0BAA2B,MAC3BC,gBAAiB,MACjBC,aAAc,MACdC,uBAAwB,MACxBC,sBAAuB,MACvBC,uBAAwB,MACxBC,cAAe,MACfC,wBAAyB,OACzBC,wBAAyB,OACzBC,sBAAuB,MACvBC,sBAAuB,MACvBC,YAAa,QACbC,sBAAuB,QACvBC,+BAAgC,OAChCC,iCAAkC,OAClCC,8BAA+B,OAC/BC,iCAAkC,OAClCC,4BAA6B,OAC7BC,4BAA6B,OAC7BC,qBAAsB,OACtBC,iBAAkB,OAClBC,kBAAmB,OACnBC,sBAAuB,OACvBC,wBAAyB,OACzBC,gBAAiB,OACjBC,kBAAmB,OACnBC,2BAA4B,OAC5BC,qBAAsB,OAEtB,WAAY,eACZ,YAAa,YACb,YAAa,aACb,YAAa,cACb,YAAa,eACb,YAAa,UACb,YAAa,SACb,YAAa,UACb,YAAa,YACb,YAAa,UACb,YAAa,YACb,YAAa,cACb,YAAa,UACb,YAAa,UACb,YAAa,OACb,YAAa,UACb,YAAa,UACb,YAAa,eACb,YAAa,YACb,YAAa,QACb,YAAa,QACb,YAAa,QACb,YAAa,WACb,YAAa,gBACb,YAAa,WACb,YAAa,eACb,YAAa,sBACb,YAAa,OACb,YAAa,SACb,YAAa,QACb,YAAa,yBACb,YAAa,aACb,YAAa,OACb,YAAa,mBACb,YAAa,4BACb,YAAa,iBACb,YAAa,QACb,YAAa,OACb,YAAa,UACb,YAAa,aACb,YAAa,mBACb,YAAa,4BACb,YAAa,kBACb,YAAa,kBACb,YAAa,SACb,YAAa,UACb,YAAa,aACb,YAAa,YACb,YAAa,SACb,YAAa,mBACb,YAAa,eACb,YAAa,sCACb,YAAa,iBACb,YAAa,SACb,YAAa,SACb,YAAa,gBACb,YAAa,SACb,YAAa,WACb,YAAa,SACb,YAAa,aACb,YAAa,cACb,YAAa,kBACb,YAAa,YACb,YAAa,UACb,YAAa,kBACb,YAAa,WACb,YAAa,eACb,YAAa,eACb,YAAa,SACb,YAAa,UACb,YAAa,SACb,YAAa,UACb,YAAa,eACb,YAAa,SACb,YAAa,gBACb,YAAa,OACb,YAAa,gBACb,YAAa,WACb,YAAa,YACb,YAAa,SACb,YAAa,gBACb,YAAa,UACb,YAAa,WACb,YAAa,aACb,YAAa,aACb,YAAa,aACb,YAAa,WACb,YAAa,mBACb,YAAa,SACb,YAAa,QACb,YAAa,cACb,YAAa,UACb,YAAa,UACb,YAAa,UACb,YAAa,UACb,YAAa,UACb,YAAa,UACb,YAAa,kBACb,YAAa,UACb,YAAa,SACb,YAAa,mBACb,YAAa,aACb,YAAa,iBACb,YAAa,QACb,YAAa,WACb,YAAa,SACb,YAAa,UACb,YAAa,SACb,YAAa,SACb,YAAa,cACb,YAAa,QACb,YAAa,WACb,YAAa,UACb,YAAa,WACb,YAAa,YACb,YAAa,YACb,YAAa,SACb,YAAa,yBACb,YAAa,WACb,YAAa,gBACb,YAAa,kBACb,YAAa,iBACb,YAAa,gBACb,YAAa,uCACb,YAAa,cACb,YAAa,0BACb,YAAa,iBACb,YAAa,4BACb,YAAa,eACb,YAAa,wBACb,YAAa,eACb,YAAa,yBACb,YAAa,iBACb,YAAa,mBACb,YAAa,kBACb,YAAa,gBACb,YAAa,uBACb,YAAa,qBACb,YAAa,2BACb,YAAa,eACb,YAAa,UACb,YAAa,eACb,YAAa,WACb,YAAa,QACb,YAAa,QACb,YAAa,QACb,YAAa,WACb,YAAa,WACb,YAAa,WACb,YAAa,WACb,YAAa,WACb,YAAa,YACb,YAAa,iBACb,YAAa,mBACb,YAAa,eACb,YAAa,eACb,YAAa,WACb,YAAa,mBACb,YAAa,iBACb,YAAa,iBACb,YAAa,gBACb,YAAa,UACb,YAAa,eACb,YAAa,cACb,YAAa,aACb,YAAa,aACb,YAAa,eACb,YAAa,aACb,YAAa,SACb,YAAa,SACb,YAAa,eACb,YAAa,cACb,YAAa,aACb,YAAa,SACb,YAAa,YACb,YAAa,SACb,YAAa,SACb,YAAa,SACb,YAAa,WACb,YAAa,iBACb,YAAa,mBACb,YAAa,UACb,YAAa,eACb,YAAa,eACb,YAAa,gBACb,YAAa,qBACb,YAAa,OACb,YAAa,WACb,YAAa,qBACb,YAAa,SACb,YAAa,SACb,YAAa,qBACb,YAAa,uBACb,YAAa,SACb,YAAa,iBACb,YAAa,WACb,YAAa,aACb,YAAa,YACb,YAAa,eACb,YAAa,aACb,YAAa,mBACb,YAAa,eACb,YAAa,gBACb,YAAa,iBACb,YAAa,uBACb,YAAa,SACb,YAAa,WACb,YAAa,QACb,YAAa,iBACb,YAAa,gBACb,YAAa,WACb,YAAa,YACb,YAAa,oBACb,YAAa,GACb,YAAa,SACb,YAAa,SACb,YAAa,OACb,YAAa,gBACb,YAAa,OACb,YAAa,OACb,YAAa,eACb,YAAa,WACb,YAAa,WACb,YAAa,UACb,YAAa,OACb,YAAa,SACb,YAAa,SACb,YAAa,OACb,YAAa,OACb,YAAa,WACb,YAAa,SACb,YAAa,YACb,YAAa,cACb,YAAa,UACb,YAAa,SACb,YAAa,cACb,YAAa,YACb,YAAa,cACb,YAAa,WACb,YAAa,SACb,YAAa,kBACb,YAAa,eACb,YAAa,WACb,YAAa,WACb,YAAa,aACb,YAAa,gBACb,YAAa,cACb,YAAa,aACb,YAAa,WACb,YAAa,UACb,aAAc,iBACd,aAAc,cACd,aAAc,eACd,aAAc,aACd,aAAc,YACd,aAAc,eACd,aAAc,aACd,aAAc,mBACd,aAAc,iBACd,aAAc,2BACd,aAAc,kCACd,aAAc,6BACd,aAAc,4BACd,aAAc,wBACd,aAAc,wBACd,aAAc,gBACd,aAAc,eACd,aAAc,gBACd,aAAc,OACd,aAAc,OACd,aAAc,MACd,aAAc,SACd,aAAc,WACd,aAAc,SACd,aAAc,SACd,aAAc,SACd,aA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","sources":["webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/index.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/adapters/xhr.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/axios.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/cancel/Cancel.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/cancel/CancelToken.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/cancel/isCancel.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/Axios.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/InterceptorManager.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/buildFullPath.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/createError.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/dispatchRequest.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/enhanceError.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/mergeConfig.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/settle.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/core/transformData.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/defaults.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/env/data.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/bind.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/buildURL.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/combineURLs.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/cookies.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/isAxiosError.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/normalizeHeaderName.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/parseHeaders.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/spread.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/helpers/validator.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/node_modules/axios/lib/utils.js","webpack://mobile-channel/./node_modules/@pdd/auth/lib/common/constants.js","webpack://mobile-channel/./node_modules/@pdd/auth/lib/common/errorClass.js","webpack://mobile-channel/./node_modules/@pdd/auth/lib/common/loginUrlUtil.js","webpack://mobile-channel/./node_modules/@pdd/auth/lib/client/service.js","webpack://mobile-channel/./node_modules/@pdd/auth/lib/client/util.js","webpack://mobile-channel/./node_modules/@pdd/auth/lib/client/login.js","webpack://mobile-channel/./node_modules/@pdd/auth/lib/client/index.js","webpack://mobile-channel/./node_modules/@pdd/bui-goods/lib/common/utils.js","webpack://mobile-channel/./node_modules/@pdd/bui-goods/lib/TipOnImage/index.js","webpack://mobile-channel/./node_modules/@pdd/bui-goods/lib/common/useScale.js","webpack://mobile-channel/./node_modules/@pdd/configs/app/constant/index.js","webpack://mobile-channel/./node_modules/@pdd/configs/app/mpConfig.js","webpack://mobile-channel/./node_modules/@pdd/configs/app/index.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/app.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/cookie.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/crc32.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/format.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/base64.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/image/replaceImgDomain.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/image/generateCDNImageUrl.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/image/getCDNImgUrl.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/loadScript.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/nanoid.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/network.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/page.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/ui/bodyScrollTop.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/url.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/util.js","webpack://mobile-channel/./node_modules/@pdd/cui-util/lib/isObject.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/Config/constants.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/Config/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/utils/isNumber.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/getConfig.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/utils/getConfigFromWindow.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/utils/updateSearch.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/getFallbackUrl.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/FallbackUrlCalculator/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/FallbackUrlCalculator/getRandomDomain.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/utils/checkImageProtocol.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/utils/getDomainByBucketId.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/utils/isHttp.js","webpack://mobile-channel/./node_modules/@pdd/cui-util/lib/recordError.js","webpack://mobile-channel/./node_modules/@pdd/cui-util/lib/renderClient.js","webpack://mobile-channel/./node_modules/@pdd/cui-util/lib/withStyles.js","webpack://mobile-channel/./node_modules/@pdd/easy-impr/lib/ImprController.js","webpack://mobile-channel/./node_modules/@pdd/easy-impr/lib/utils.js","webpack://mobile-channel/./node_modules/@pdd/easy-impr/lib/Impr.js","webpack://mobile-channel/./node_modules/@pdd/easy-impr/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/error-status/index.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-mobx-framework/lib/PageStore.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/image/isSupportWebp.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-mobx-framework/lib/cookie.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-mobx-framework/lib/createClientContext.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/create.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/adapters/native.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/adapters/client.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/util/env.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/Toast/BaseToast/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/Toast/Container/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-util/lib/Portal/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/Toast/Controller/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/Toast/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/utils/renderToast.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/info/infoH5.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/info/infoNative.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/info/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/info/supportNativeToast.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/util/constants.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/util/cmt.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/util/pmm.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/plugins/index.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/client.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/index.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-request/lib/plugins/common.js","webpack://mobile-channel/./node_modules/@pdd/lazy-image/lib/LazyContainer.js","webpack://mobile-channel/./node_modules/@pdd/lazy-image/lib/LazyImage/getDefaultLazyLoader.js","webpack://mobile-channel/./node_modules/@pdd/lazy-image/lib/LazyImage/Context.js","webpack://mobile-channel/./node_modules/@pdd/lazy-image/lib/LazyImage/LazyLoader.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/getRetryLimit.js","webpack://mobile-channel/./node_modules/@pdd/lazy-image/lib/LazyImage/constants.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/utils/getURLObject.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/getInitialUrl.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/InitialUrlCalculator/index.js","webpack://mobile-channel/./node_modules/@pdd/lazy-image/lib/LazyImage/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/LoadErrorHandler/retryCountHelper.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/LoadErrorHandler/recordLoadError.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/handleLoadError.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/LoadErrorHandler/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/CdnImgConfigProvider/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-image/lib/Image/Image.js","webpack://mobile-channel/./node_modules/@pdd/lazy-image/lib/SimpleEmage.js","webpack://mobile-channel/./node_modules/@pdd/leo-adaptor/internal/constants.js","webpack://mobile-channel/./node_modules/@pdd/logger/lib/keys.js","webpack://mobile-channel/./node_modules/@pdd/logger/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/leo-adaptor/internal/assert.js","webpack://mobile-channel/./node_modules/@pdd/leo-adaptor/api/iso/formatter.js","webpack://mobile-channel/./node_modules/@pdd/leo-adaptor/api/csr/clientInit.js","webpack://mobile-channel/./node_modules/@pdd/leo-adaptor/api/iso/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/CipherConsumeMode.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/CipherPasteType.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareController/base.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/NativeShareEnv.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareLimiter/loadRuleModel.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareLimiter/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/translateTPApp.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/popLocalCipher.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/urlWrapperNative.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/cipherProcess.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/processImage.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareEntity/NativeShareEntity.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/clipboard.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareController/native.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareEntity/QQShareEntity.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareController/qq.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareEntity/WebShareEntity.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareController/web.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareEntity/WeChatShareEntity.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareController/wechat.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareEntity/WxAppShareEntity.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareController/wxapp.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareEntity/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareError/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareEventType/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareForm.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareLimiter/LimitMethod.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareManager/platformTag.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareManager/translation.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareMethod.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareResultType.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareTracker/trackError.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareType.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/SystemShareMode.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/TPSelectCategory.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ThirdPartyOpenType.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareResult.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareTracker/TrackingEntity.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/createShareID.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareChannel.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/getShareChannelByType.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/getAppChannel.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/VenderAppIDCache.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareTracker/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareManager/shareContentCheck.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareManager/performShareLog.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareLimiter/LimitErrorCode.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareLimiter/MenuWatcher.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareManager/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareInfoFilter/config.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareInfoFilter/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/ShareWaterMark.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/PDDShare.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/qqShareTypes.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/ApiCacheManager.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/dynamicTrace.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/MagicTraceManager.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/URLParser.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/URLWrapType.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/buildURL.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/calculateURLHash.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/getPageContext.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/getUserID.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/makeUpProtocol.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/processMiniObjectPath.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/shareDomainModel.js","webpack://mobile-channel/./node_modules/@pdd/market-share/lib/tools/urlWrapper.js","webpack://mobile-channel/./node_modules/@pdd/metrics/lib/util.js","webpack://mobile-channel/./node_modules/@pdd/metrics/lib/reporters.js","webpack://mobile-channel/./node_modules/@pdd/metrics/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/monitor/lib/Plog.js","webpack://mobile-channel/./node_modules/@pdd/monitor/lib/statistics.js","webpack://mobile-channel/./node_modules/@pdd/monitor/lib/statisticsStr.js","webpack://mobile-channel/./node_modules/@pdd/native-util/lib/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/core-util/lib/wechat.js","webpack://mobile-channel/./node_modules/@pdd/navigation/lib/utils.js","webpack://mobile-channel/./node_modules/@pdd/navigation/lib/navigation.js","webpack://mobile-channel/./node_modules/@pdd/page-manager/lib/pageInfo.js","webpack://mobile-channel/./node_modules/@pdd/page-manager/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/common/index.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/IPlatform.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/wechat.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/native.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/qq.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/weibo.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/unknown.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/tinyNative.js","webpack://mobile-channel/./node_modules/@pdd/platform-util/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/qq-service/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/qq-service/lib/qqjssdk-1.0.0.js","webpack://mobile-channel/./node_modules/@pdd/wechat-service/lib/constant.js","webpack://mobile-channel/./node_modules/@pdd/wechat-service/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/wechat-service/lib/weixinJSBridge.js","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/showSpinner/showSpinnerNative.js","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/SpinnerH5/SpinnerImg/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/SpinnerH5/Container/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/SpinnerH5/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/showSpinner/showSpinnerH5.js","webpack://mobile-channel/./node_modules/@pdd/cui-util/lib/renderPopup.js","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/showSpinner/index.js","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/Spinner/index.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-mobx-framework/lib/components/TimeoutSpinner.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/isoAdapter/appProvider.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/isoAdapter/index.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/core/constant.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/core/util.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/core/chunk/context.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/core/chunk/ChunkProvider.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/core/requestContext/client.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/client/clientController.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/core/chunk/ErrorBoundary.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/core/chunk/ChunkRender.js","webpack://mobile-channel/./node_modules/@pdd/error-logger/lib/common/utils.js","webpack://mobile-channel/./node_modules/@pdd/error-logger/lib/common/reporter.js","webpack://mobile-channel/./node_modules/@pdd/error-logger/lib/pmm/utils.js","webpack://mobile-channel/./node_modules/@pdd/error-logger/lib/pmm/base.js","webpack://mobile-channel/./node_modules/@pdd/error-logger/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/ui-disable-click/lib/index.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-mobx-framework/lib/initPage/service.js","webpack://mobile-channel/./node_modules/@pdd/isomorphic-mobx-framework/lib/initPage/index.js","webpack://mobile-channel/./node_modules/@pdd/xRender/lib/isoAdapter/bootClient.js","webpack://mobile-channel/./node_modules/@pdd/bui-goods/lib/TipOnImage/index.module.scss","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/SpinnerH5/Container/index.iso.scss","webpack://mobile-channel/./node_modules/@pdd/cui-spinner/lib/SpinnerH5/SpinnerImg/index.iso.scss","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/Toast/BaseToast/index.iso.scss","webpack://mobile-channel/./node_modules/@pdd/cui-toast/lib/Toast/Container/index.iso.scss"],"sourcesContent":["module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\nvar defaults = require('../defaults');\nvar Cancel = require('../cancel/Cancel');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n    var responseType = config.responseType;\n    var onCanceled;\n    function done() {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(onCanceled);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', onCanceled);\n      }\n    }\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?\n        request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      var transitional = config.transitional || defaults.transitional;\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(\n        timeoutErrorMessage,\n        config,\n        transitional.clarifyTimeoutError ? 'ETIMEDOUT' : 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = config.responseType;\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken || config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = function(cancel) {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || (cancel && cancel.type) ? new Cancel('canceled') : cancel);\n        request.abort();\n        request = null;\n      };\n\n      config.cancelToken && config.cancelToken.subscribe(onCanceled);\n      if (config.signal) {\n        config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\naxios.VERSION = require('./env/data').version;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n\n  // eslint-disable-next-line func-names\n  this.promise.then(function(cancel) {\n    if (!token._listeners) return;\n\n    var i;\n    var l = token._listeners.length;\n\n    for (i = 0; i < l; i++) {\n      token._listeners[i](cancel);\n    }\n    token._listeners = null;\n  });\n\n  // eslint-disable-next-line func-names\n  this.promise.then = function(onfulfilled) {\n    var _resolve;\n    // eslint-disable-next-line func-names\n    var promise = new Promise(function(resolve) {\n      token.subscribe(resolve);\n      _resolve = resolve;\n    }).then(onfulfilled);\n\n    promise.cancel = function reject() {\n      token.unsubscribe(_resolve);\n    };\n\n    return promise;\n  };\n\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Subscribe to the cancel signal\n */\n\nCancelToken.prototype.subscribe = function subscribe(listener) {\n  if (this.reason) {\n    listener(this.reason);\n    return;\n  }\n\n  if (this._listeners) {\n    this._listeners.push(listener);\n  } else {\n    this._listeners = [listener];\n  }\n};\n\n/**\n * Unsubscribe from the cancel signal\n */\n\nCancelToken.prototype.unsubscribe = function unsubscribe(listener) {\n  if (!this._listeners) {\n    return;\n  }\n  var index = this._listeners.indexOf(listener);\n  if (index !== -1) {\n    this._listeners.splice(index, 1);\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\nvar validator = require('../helpers/validator');\n\nvar validators = validator.validators;\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  var transitional = config.transitional;\n\n  if (transitional !== undefined) {\n    validator.assertOptions(transitional, {\n      silentJSONParsing: validators.transitional(validators.boolean),\n      forcedJSONParsing: validators.transitional(validators.boolean),\n      clarifyTimeoutError: validators.transitional(validators.boolean)\n    }, false);\n  }\n\n  // filter out skipped interceptors\n  var requestInterceptorChain = [];\n  var synchronousRequestInterceptors = true;\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n      return;\n    }\n\n    synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n    requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var responseInterceptorChain = [];\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  var promise;\n\n  if (!synchronousRequestInterceptors) {\n    var chain = [dispatchRequest, undefined];\n\n    Array.prototype.unshift.apply(chain, requestInterceptorChain);\n    chain = chain.concat(responseInterceptorChain);\n\n    promise = Promise.resolve(config);\n    while (chain.length) {\n      promise = promise.then(chain.shift(), chain.shift());\n    }\n\n    return promise;\n  }\n\n\n  var newConfig = config;\n  while (requestInterceptorChain.length) {\n    var onFulfilled = requestInterceptorChain.shift();\n    var onRejected = requestInterceptorChain.shift();\n    try {\n      newConfig = onFulfilled(newConfig);\n    } catch (error) {\n      onRejected(error);\n      break;\n    }\n  }\n\n  try {\n    promise = dispatchRequest(newConfig);\n  } catch (error) {\n    return Promise.reject(error);\n  }\n\n  while (responseInterceptorChain.length) {\n    promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected, options) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected,\n    synchronous: options ? options.synchronous : false,\n    runWhen: options ? options.runWhen : null\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar Cancel = require('../cancel/Cancel');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new Cancel('canceled');\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code,\n      status: this.response && this.response.status ? this.response.status : null\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      return getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      return getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      return getMergedValue(undefined, config2[prop]);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      return getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      return getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(prop) {\n    if (prop in config2) {\n      return getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  var mergeMap = {\n    'url': valueFromConfig2,\n    'method': valueFromConfig2,\n    'data': valueFromConfig2,\n    'baseURL': defaultToConfig2,\n    'transformRequest': defaultToConfig2,\n    'transformResponse': defaultToConfig2,\n    'paramsSerializer': defaultToConfig2,\n    'timeout': defaultToConfig2,\n    'timeoutMessage': defaultToConfig2,\n    'withCredentials': defaultToConfig2,\n    'adapter': defaultToConfig2,\n    'responseType': defaultToConfig2,\n    'xsrfCookieName': defaultToConfig2,\n    'xsrfHeaderName': defaultToConfig2,\n    'onUploadProgress': defaultToConfig2,\n    'onDownloadProgress': defaultToConfig2,\n    'decompress': defaultToConfig2,\n    'maxContentLength': defaultToConfig2,\n    'maxBodyLength': defaultToConfig2,\n    'transport': defaultToConfig2,\n    'httpAgent': defaultToConfig2,\n    'httpsAgent': defaultToConfig2,\n    'cancelToken': defaultToConfig2,\n    'socketPath': defaultToConfig2,\n    'responseEncoding': defaultToConfig2,\n    'validateStatus': mergeDirectKeys\n  };\n\n  utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {\n    var merge = mergeMap[prop] || mergeDeepProperties;\n    var configValue = merge(prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar defaults = require('./../defaults');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  var context = this || defaults;\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(context, data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\nvar enhanceError = require('./core/enhanceError');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nvar defaults = {\n\n  transitional: {\n    silentJSONParsing: true,\n    forcedJSONParsing: true,\n    clarifyTimeoutError: false\n  },\n\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data) || (headers && headers['Content-Type'] === 'application/json')) {\n      setContentTypeIfUnset(headers, 'application/json');\n      return stringifySafely(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    var transitional = this.transitional || defaults.transitional;\n    var silentJSONParsing = transitional && transitional.silentJSONParsing;\n    var forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    var strictJSONParsing = !silentJSONParsing && this.responseType === 'json';\n\n    if (strictJSONParsing || (forcedJSONParsing && utils.isString(data) && data.length)) {\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw enhanceError(e, this, 'E_JSON_PARSE');\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*'\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","module.exports = {\n  \"version\": \"0.22.0\"\n};","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\nvar VERSION = require('../env/data').version;\n\nvar validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nvar deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return function(value, opt, opts) {\n    if (validator === false) {\n      throw new Error(formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')));\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\n/**\n * Assert object's properties type\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new TypeError('options must be an object');\n  }\n  var keys = Object.keys(options);\n  var i = keys.length;\n  while (i-- > 0) {\n    var opt = keys[i];\n    var validator = schema[opt];\n    if (validator) {\n      var value = options[opt];\n      var result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new TypeError('option ' + opt + ' must be ' + result);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw Error('Unknown option ' + opt);\n    }\n  }\n}\n\nmodule.exports = {\n  assertOptions: assertOptions,\n  validators: validators\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","/**\n * @file 一些常量\n * @author direnjie(direnjie@pinduoduo.com)\n */\n\n/**\n * 微信oauth登陆的两种类型\n * https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419316505&token=&lang=zh_CN\n * @type {{Base: string, UserInfo: string}}\n * @ignore\n */\nexport const ScopeType = {\n  Base: 'snsapi_base',\n  UserInfo: 'snsapi_userinfo'\n};\n\n/**\n * 和ScopeType是对应的\n * @ignore\n */\nexport const WechatAuthType = {\n  Base: 'BASE',\n  UserInfo: 'USERINFO'\n};\n\n/**\n * @ignore\n */\nexport const LOGIN_RISK_CONTROL_CODE = {\n  NeedAuthenticationLogin: 43058,\n  DefaultLoginRisk: 54001,\n  LoginVerifyRisk: 54002,\n  LoginForbidden: 54003\n};\n\n/**\n * @ignore\n */\nexport const CookieKey = {\n  AccessToken: 'PDDAccessToken',\n  UID: 'pdd_user_id',\n  UA: 'ua',\n  UIN: 'pdd_user_uin'\n};\n\n/**\n * @ignore\n */\nexport const LocalStorageKey = {\n  AccessToken: 'AccessToken',\n  UID: '0e4f9612e0fbe579', // md5(UIDStorage). value: userID.toString(36)\n  UIN: '830d7c3797f9909d' // md5(UINStorage). value: uin\n};\n\n/**\n * export { errors } from '@pdd/error-status';\n * 只用到一个，应该也不怎么变，所以先直接copy过来\n * @ignore\n */\nexport const errors = {\n  AUTHENTICATION_FAILED: 40001\n};\n","/**\n * @file 错误类定义\n * @author direnjie(direnjie@pinduoduo.com)\n */\n\n/**\n * 用户未登陆错误\n *\n * @param {string} [message='UnLoginError']\n * @ignore\n */\nexport function UnLoginError(message = 'UnLoginError') {\n  this.name = 'UnLoginError';\n  this.message = message;\n  // 40001的错误文案是'登陆已过期'，不太符合这里的实际意义，考虑换一个\n  this.errorCode = 40001;\n  this.stack = new Error().stack;\n}\n\nUnLoginError.prototype = Object.create(Error.prototype);\nUnLoginError.prototype.constructor = UnLoginError;\n\n/**\n * 发生了重定向时抛出的错误\n *\n * @param {string} [message='RedirectedError']\n * @ignore\n */\nexport function RedirectedError(message = 'RedirectedError') {\n  this.name = 'RedirectedError';\n  this.message = message;\n  this.errorCode = 302;\n  this.stack = new Error().stack;\n}\n\nRedirectedError.prototype = Object.create(Error.prototype);\nRedirectedError.prototype.constructor = RedirectedError;\n","/**\n * @file loginUrlUtil.js 登录url相关工具函数\n * @author zongheng\n */\nimport { app as appConfig } from '@pdd/configs';\nimport { buildQuery, appendQuery } from '@pdd/core-util';\nimport { ScopeType, WechatAuthType } from './constants';\n\n/**\n * @ignore\n */\nexport function resolveQQLoginUrl(host, redirectUrl) {\n  const config = appConfig.get(host);\n  const redirectUri = config.RedirectURI.QQConnect + '?' + buildQuery({ refer: redirectUrl });\n  const query = buildQuery({\n    response_type: 'code',\n    scope: 'get_user_info',\n    client_id: config.ApiKey.QQPublic,\n    redirect_uri: redirectUri\n  });\n\n  return {\n    oAuthUrl: `https://graph.qq.com/oauth2.0/authorize?${query}#qq_redirect`,\n    redirectUri\n  };\n}\n\n/**\n * @ignore\n */\nexport function resolveWechatLoginUrl(host, redirectUrl, scopeType = ScopeType.Base) {\n  const config = appConfig.get(host);\n\n  if(config.hasThirdLevelDomain) {\n    // 三级域登录\n    let domain = config.domain || config.shareDomain;\n    domain = domain.endsWith('/') ? domain : domain + '/';\n    return appendQuery({ third_level_from_url: redirectUrl }, `${domain}${config.thirdLevelLoginPath}`);\n  }\n\n  const query = buildQuery({\n    response_type: 'code',\n    scope: scopeType,\n    appid: config.ApiKey.WeChat,\n    // 原注释： 注意去掉hash，否则有出问题\n    // 微信sdk config是不认hash的 带hash config是不会通过的 by jiangliuer\n    redirect_uri: redirectUrl.split('#')[0],\n    state: scopeType === ScopeType.UserInfo ? WechatAuthType.UserInfo : WechatAuthType.Base\n  });\n\n  return `https://open.weixin.qq.com/connect/oauth2/authorize?${query}#wechat_redirect`;\n}\n\n/**\n * @ignore\n */\nexport function resolveH5LoginUrl(redirectUrl) {\n  // todo: login.html 需要整理下可接收的query参数\n  return `/login.html?from=${encodeURIComponent(redirectUrl)}`;\n}\n\n/**\n * @ignore\n */\nexport function resolveAppLoginUrl(redirectUrl) {\n  return `/app_login.html?redirect_uri=${encodeURIComponent(redirectUrl)}&force_login=1`;\n}\n\nconst FORBIDDEN_CODE = [\n  54004, // 风控其他拦截\n  54008, // 冻结账号允许解冻\n  43020, // 后端服务限流\n  43046, // 风控冻结且不允许解冻\n  43054 // 冻结账号允许解冻，但不允许在当前环境解冻\n];\n\n/**\n * @ignore\n * @see https://note.pdd.net/doc/275276071928864768?root=257898683292676096\n *\n * 判定错误码是否属于不降级重试登录，直接跳弹窗提示页\n */\nexport function isForbiddenErrorCode(errorCode) {\n  return FORBIDDEN_CODE.includes(errorCode) || (errorCode >= 54100 && errorCode <= 54200);\n}\n","/**\n * @file client端utils\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport navigation from '@pdd/navigation';\nimport { app as appConfig } from '@pdd/configs';\nimport { LOGIN_RISK_CONTROL_CODE, ScopeType, WechatAuthType } from '../common/constants';\nimport { RedirectedError } from '../common/errorClass';\nimport { resolveWechatLoginUrl, isForbiddenErrorCode, resolveQQLoginUrl } from '../common/loginUrlUtil';\n\nconst platform = process.env.BROWSER ? getCurrentPlatform() : null;\n\nfunction getAppId() {\n  const config = appConfig.get(location.host);\n\n  if(platform.isWeChatPlatform) {\n    return config.AppID.WeChat;\n  }\n\n  if(platform.isWeiboPlatform) {\n    return config.AppID.Weibo;\n  }\n\n  if(platform.isQQPlatform) {\n    return platform.isEmbeddedBrowser ? config.AppID.QQPublic : config.AppID.QQ;\n  }\n\n  return 0;\n}\n\n/**\n * 第三方code登录方法\n *\n * @param {AxiosInstance} axiosHttp '@pdd/isomorphic-request'创建的请求实例\n * @param {string} code\n * @param {'BASE'|'USERINFO'} [state] 微信下生效，授权类型\n * @return {Promise<UserInfo>}\n * @ignore\n */\nexport async function loginWithCode(axiosHttp, { code, state }) {\n  const appId = getAppId();\n  const params = state === WechatAuthType.UserInfo ? { code, app_id: appId, is_auth: 1 } : { code, app_id: appId };\n  if(platform.isQQPlatform) {\n    params.is_qq_connect = true;\n    params.redirect_uri = resolveQQLoginUrl(location.host, location.href).redirectUri;\n  }\n\n  try {\n    // 阻止isomorphic-request的默认弹窗行为\n    const userInfo = await axiosHttp.post('/login', params, { defaultErrorHandler() {} });\n    return {\n      ...userInfo,\n      accessToken: userInfo.access_token\n    };\n  } catch (error) {\n    const { errorCode, response } = error;\n    const { verify_auth_token: verifyAuthToken, verify_ttl: verifyTtl } = response.data || {};\n\n    if(errorCode === LOGIN_RISK_CONTROL_CODE.NeedAuthenticationLogin && platform.isWeChatPlatform) {\n      location.href = resolveWechatLoginUrl(location.host, location.href, ScopeType.UserInfo);\n      throw new RedirectedError();\n    }\n\n    if(\n      errorCode === LOGIN_RISK_CONTROL_CODE.LoginVerifyRisk ||\n      errorCode === LOGIN_RISK_CONTROL_CODE.DefaultLoginRisk\n    ) {\n      navigation.reload(\n        `psnl_verification.html?VerifyAuthToken=${verifyAuthToken}&from=${encodeURIComponent(location.href)}`\n      );\n      throw new RedirectedError();\n    }\n    if(errorCode === LOGIN_RISK_CONTROL_CODE.LoginForbidden) {\n      // login_error.html被封禁了改为通用路由\n      navigation.reload(\n        `fpctdipk.html?_t_module_name=login_error&&ttl=${verifyTtl}&from=${encodeURIComponent(location.href)}`\n      );\n      throw new RedirectedError();\n    }\n    if(isForbiddenErrorCode(errorCode)) {\n      navigation.reload(`/commercial_pre_orders.html?_t_module_name=psnl_account_freeze_alert&error_code=${errorCode}`);\n      throw new RedirectedError();\n    }\n\n    throw error;\n  }\n}\n","/**\n * @file client端utils\n * @author direnjie(direnjie@pinduoduo.com) zongheng(zongheng@pinduoduo.com)\n */\nimport { parseQuery, getCookie, setCookie, removeCookie, buildQuery } from '@pdd/core-util';\nimport { getUserInfo } from '@pdd/native-util';\nimport { CookieKey, LocalStorageKey } from '../common/constants';\nimport { UnLoginError } from '../common/errorClass';\nimport { loginWithCode } from './service';\nimport { getCurrentPlatform, compareVersion } from '@pdd/platform-util';\nimport navigation from '@pdd/navigation';\n\nconst platform = process.env.BROWSER ? getCurrentPlatform() : null;\n\nfunction clearCode() {\n  navigation.replaceURL(\n    location.origin + location.pathname + '?' + buildQuery({ ...parseQuery(location.search), code: null, state: null })\n  );\n}\n\nfunction setCookieValue(key, value, attributes = { maxAge: 3600 * 24 * 100 }) {\n  if(value && getCookie(key) !== value) {\n    setCookie(key, value, attributes);\n  }\n}\n\n/**\n * @param {string} accessToken\n * @param {number} uid\n * @param {string} uin\n * @ignore\n */\nexport function setUserCookie(accessToken, uid, uin) {\n  // 现有逻辑是过期时间100天\n  setCookieValue(CookieKey.AccessToken, accessToken);\n  setCookieValue(CookieKey.UID, uid);\n  setCookieValue(CookieKey.UIN, uin);\n}\n\n/**\n * @ignore\n */\nexport function clearUserCookie() {\n  removeCookie(CookieKey.AccessToken);\n  removeCookie(CookieKey.UID);\n  removeCookie(CookieKey.UIN);\n}\n\n/**\n * @param {string} accessToken\n * @param {number} uid\n * @param {string} uin\n * @ignore\n */\nexport function setUserLocalstorage(accessToken, uid, uin) {\n  accessToken && localStorage.setItem(LocalStorageKey.AccessToken, accessToken);\n  uid && localStorage.setItem(LocalStorageKey.UID, (+uid).toString(36));\n  uin && localStorage.setItem(LocalStorageKey.UIN, uin);\n}\n\n/**\n * @ignore\n */\nexport function clearUserLocalStorage() {\n  localStorage.removeItem(LocalStorageKey.AccessToken);\n  localStorage.removeItem(LocalStorageKey.UID);\n  localStorage.removeItem(LocalStorageKey.UIN);\n}\n\n/**\n * 从cookie或localStorage获取accessToken\n *\n * @return {string}\n * @ignore\n */\nexport async function getAccessTokenFromLocal() {\n  return platform.isNativePlatform\n    ? getUserInfo()\n        .then(v => v.access_token)\n        .catch(() => getCookie(CookieKey.AccessToken))\n    : getCookie(CookieKey.AccessToken);\n}\n\n/**\n * 从cookie或localStorage获取uid\n *\n * @return {string}\n * @ignore\n */\nexport async function getUidFromLocal() {\n  return platform.isNativePlatform\n    ? getUserInfo()\n        .then(v => v.user_id)\n        .catch(() => getCookie(CookieKey.UID))\n    : getCookie(CookieKey.UID);\n}\n\n/**\n * 从cookie或localStorage获取uin\n *\n * @return {string}\n * @ignore\n */\nexport async function getUinFromLocal() {\n  if(platform.isNativePlatform) {\n    return getUserInfo()\n      .then(v => v.uin || getCookie(CookieKey.UIN))\n      .catch(() => getCookie(CookieKey.UIN));\n  }\n\n  return getCookie(CookieKey.UIN);\n}\n\n/**\n * @ignore\n */\nexport function callNativeUserInfo() {\n  return getUserInfo().then((userInfo) => {\n    if(!userInfo.access_token) {\n      throw new UnLoginError();\n    }\n    return {\n      accessToken: userInfo.access_token,\n      uid: userInfo.user_id,\n      uin: userInfo.uin,\n      type: userInfo.type\n    };\n  });\n}\n\n/**\n * @param {AxiosInstance} axiosHttp @pdd/isomorphic-request创建的请求实例\n *\n * 获取当前的登陆态或登陆结果。\n * 获取用户登陆信息可以通过读cookie、解code、调用native api三种方式，其优先顺序为：\n * 1. 端环境下的native api\n * 2. cookie用于上一种方式的补全或兜底。 考虑ssr情况下，server端已经解过code并设置到cookie，所以cookie优先级大于code。\n * 故，需保证在去登陆前清理cookie，否则纯csr情况下可能会出现登陆不上\n * 3. 解code\n *\n * @return {Promise<{UserInfo}>}\n * @ignore\n */\nexport function fetchAccessTokenAndUid(axiosHttp) {\n  const cookies = getCookie();\n  const accessToken = cookies[CookieKey.AccessToken];\n  const uid = cookies[CookieKey.UID];\n  const uin = cookies[CookieKey.UIN];\n\n  // todo: 若uid、uin为空是否补齐\n  const getDefaults = () => {\n    return accessToken ? Promise.resolve({ accessToken, uid, uin }) : Promise.reject(new UnLoginError());\n  };\n\n  // 1. 首先从端接口获取用户信息\n  if(platform.isNativePlatform) {\n    return callNativeUserInfo().then(\n      data => ({\n        ...data,\n        // 端环境下通过端接口获取的用户信息可能缺失uin，这里尝试从cookie里补齐\n        uin: data.uin || (data.accessToken === accessToken ? uin : null)\n      }),\n      // 直接用cookie兜底\n      getDefaults\n    );\n  }\n\n  const { code, state } = parseQuery(location.search);\n  code && clearCode(); // 清理ssr的code\n\n  // 2. 使用cookie里的用户信息补全或兜底\n  if(accessToken) {\n    return getDefaults();\n  }\n\n  // 3. 最后解code\n  return code ? loginWithCode(axiosHttp, { code, state }) : getDefaults();\n}\n\n/**\n * 判断native是否支持登录保护即在有登录态的状态下调用登录不唤起登录modal直接返回当前登录态,在未登录状态下唤起登录Modal\n * @ignore\n * @returns {boolean}\n */\nexport function isNativeSupportSilentLogin() {\n  return platform.isNativePlatform && compareVersion(platform.version, '5.25.0') >= 0;\n}\n\n/**\n * 判断是否使用统一路由方式唤起登录\n */\nexport function isUseUniformUrl() {\n  return platform.isNativePlatform && compareVersion(platform.version, '5.99.0') >= 0;\n}\n","/**\n * @file callLogin.js client端登陆唤起操作\n * @author direnjie(direnjie@pinduoduo.com) zongheng(zongheng@pinduoduo.com)\n */\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { isNativeSupportSilentLogin, isUseUniformUrl } from './util';\nimport { appendQuery } from '@pdd/core-util';\nimport navigation from '@pdd/navigation';\nimport { resolveWechatLoginUrl, resolveQQLoginUrl, resolveH5LoginUrl } from '../common/loginUrlUtil';\n\n/**\n * app环境下调起登陆弹窗\n *\n * @param {LoginParams.nativeParams} params app登陆选项\n * @return {Promise<UserInfo>} 登陆是否成功\n */\nfunction callNativeLogin(params) {\n  const useUniformUrl = isUseUniformUrl(); // 使用统一路由的版本去除type:login,且native_login替换为login\n  const { force_show: forceShow, ...others } = params;\n  const loginUrl = useUniformUrl ? 'login.html' : 'native_login.html';\n  return new Promise((resolve, reject) => {\n    invokeBridgeCallNativeFun('JSNavigation', 'modal', {\n      ...(!useUniformUrl && forceShow !== false ? { type: 'login' } : {}),\n      props: {\n        ...others,\n        ...(forceShow === false || useUniformUrl\n          ? {\n              url: appendQuery(params, loginUrl)\n            }\n          : {}),\n        complete(errorCode, response) {\n          if(errorCode === 0) {\n            resolve({\n              accessToken: response.access_token\n            });\n          } else {\n            // 正常登录(左上角关闭按钮)\n            // 推荐登录(右上角有跳过按钮)\n            // 都返回 60006\n            const e = new Error('native login modal error');\n            e.errorCode = errorCode;\n            reject(e);\n          }\n        }\n      }\n    }).catch(reject);\n  });\n}\n\n/**\n *\n * @param {LoginParams} loginParams 登陆选项\n *\n * @return {Promise<{accessToken: string} | undefined>} 需注意仅在端环境下返回 {accessToken: string}\n * @ignore\n */\nexport function callLogin(loginParams) {\n  const platform = getCurrentPlatform();\n  const isNativePlatform = platform.isNativePlatform;\n  const isNativeSilentLogin = isNativeSupportSilentLogin();\n  if(isNativePlatform) {\n    return callNativeLogin({\n      ...loginParams.nativeParams,\n      ...(isNativeSilentLogin ? { force_show: !loginParams.silent } : {})\n    });\n  }\n\n  return new Promise(() => {\n    const redirectUrl = loginParams.from || location.href;\n\n    if(platform.isWeChatPlatform) {\n      location.href = resolveWechatLoginUrl(location.host, redirectUrl, loginParams.scopeType);\n    } else if(platform.isQQPlatform) {\n      location.href = resolveQQLoginUrl(location.host, redirectUrl).oAuthUrl;\n    } else {\n      navigation.reload(resolveH5LoginUrl(redirectUrl));\n    }\n  });\n}\n","/**\n * @file client端主要对外接口\n * @author direnjie(direnjie@pinduoduo.com)\n */\nimport { callLogin } from './login.js';\nimport {\n  setUserCookie,\n  setUserLocalstorage,\n  fetchAccessTokenAndUid,\n  clearUserLocalStorage,\n  clearUserCookie,\n  getUidFromLocal,\n  getUinFromLocal,\n  getAccessTokenFromLocal,\n  isNativeSupportSilentLogin\n} from './util';\n\n/**\n * 初始化标记\n */\nlet authInited = false;\n\n/**\n * 以前的user库里会提供getAppLoginType，为了存这个字段，干脆做一个大的容器\n * 存放当前用户基本信息如token、uid、uin、type（app登陆类型）\n */\nlet userInfo = {};\n\nfunction setUserVariableStorage(accessToken, uid, uin, type) {\n  userInfo = { accessToken, uid, uin, type };\n}\n\nfunction clearUserVariableStorage() {\n  userInfo = {};\n}\n\n/**\n * 将用户信息保存到cookie和其他存储容器中\n *\n * @param {UserInfo} userInfo\n * @return {UserInfo}\n */\nfunction onLoginSuccess({ accessToken, uid, uin = '', type }) {\n  uid = uid && String(uid);\n  setUserCookie(accessToken, uid, uin);\n  setUserVariableStorage(accessToken, uid, uin, type);\n  setUserLocalstorage(accessToken, uid, uin);\n  return { accessToken, uid, uin, type };\n}\n\n/**\n * 清除登陆态，仅清楚相关用户信息存储，并不做跳转等交互逻辑\n */\nexport function logout() {\n  clearUserCookie();\n  clearUserVariableStorage();\n  clearUserLocalStorage();\n}\n\n/**\n * @param {AxiosInstance} axiosHttp @pdd/isomorphic-request创建的请求实例\n *\n * 初始化（获取当前的登陆态或登陆结果)。\n * 通过读cookie、解code、调用native api等方式获取用户登陆信息，并更新到cookie和localStorage。\n *\n * @return {Promise<{UserInfo}>}\n * 可能的Error如下：\n * @throws {Error} 代码错误、网络异常、业务异常如code重复等\n * @throws {UnLoginError} 用户未登陆，错误对象errorCode属性为40001\n * @throws {RedirectedError} 发生了重定向，错误对象errorCode属性为302\n */\nexport function init(axiosHttp) {\n  authInited = true;\n\n  return fetchAccessTokenAndUid(axiosHttp).then(onLoginSuccess, (e) => {\n    logout();\n    throw e;\n  });\n}\n\n/**\n * 获取accessToken，依次取缓存 -> [端方法] -> cookie\n *\n * @return {Promise<string>}\n */\nexport async function getAccessToken() {\n  if(!authInited) {\n    console.warn('await init() first to get correct accesstoken');\n  }\n  return userInfo.accessToken || getAccessTokenFromLocal();\n}\n\n/**\n * 获取uid，依次取缓存 -> [端方法] -> cookie\n *\n * @return {Promise<string>}\n */\nexport async function getUid() {\n  if(!authInited) {\n    console.warn('await init() first to get correct uid');\n  }\n  return userInfo.uid || getUidFromLocal();\n}\n\n/**\n * 获取uin，依次取缓存 -> [端方法] -> cookie\n *\n * @return {Promise<string>}\n */\nexport async function getUin() {\n  if(!authInited) {\n    console.warn('await init() first to get correct uin');\n  }\n  return userInfo.uin || getUinFromLocal();\n}\n\n/**\n * 获取缓存的userInfo\n *\n * @return {Promise<UserInfo>}\n */\nexport async function getUserInfo() {\n  if(!authInited) {\n    console.warn('await init() first to get correct userInfo');\n  }\n\n  return { ...userInfo };\n}\n\n/**\n * 同步方法获取缓存的userInfo\n * @notice 必须在初始化之后调用，否则抛错!!!\n * @return {UserInfo}\n */\nexport function getUserInfoSync() {\n  if(!authInited) {\n    throw new Error('未初始化调用getUserInfoSync');\n  }\n\n  return { ...userInfo };\n}\n\n/**\n * 登陆\n *\n * @param {LoginParams} [loginParams={}] 登陆选项。\n *\n * @param {Object} [loginParams.nativeParams] 传给native登陆的参数\n * @param {number} [loginParams.nativeParams.login_type=0] 登录类型枚举; 0: 正常登录(左上角关闭按钮), 1: 推荐登录(右上角有跳过按钮), 2: 强制登录(无关闭, 跳过);\n * 详见 https://docs.corp.yiran.com/pinbridge/route/JSNavigation.html\n * @param {number} [loginParams.nativeParams.login_page=0] 登录页枚举; 0: 微信/qq登录页 1:手机登录页\n * @param {number} [loginParams.nativeParams.login_style=0] 原生登录页样式枚举;\n * 目前只有login_page=0的微信/qq登录页才有样式，手机登录页没有。0:默认情况, 1:上部分全红, 2:中间区域矩形红, 4:上部分全红7元, 5:logo\n * @param {number} [loginParams.nativeParams.login_channel=-1] 登录渠道枚举;\n * -1: 微信登录模式下，其他登录包含手机和qq；手机登录模式下，其他登录包含微信和qq;\n * 1: 只有微信(隐藏qq和手机);\n * 2: 微信登录模式下，qq/wx以button显示，其他包含手机;手机登录模式下，其他包含wx qq [4.78 4.79不支持，其他只显示微信, 建议不要用这种组合]\n * 3: 手机登录页下没有第三方登录\n *\n * @param {string} [loginParams.from=location.href] 通用登陆选项，登陆成功后跳转url\n * @param {boolean} [loginParams.silent=true] 是否清除登录态之后调用app登录接口，true代表不清除登录态,false代表清除登录态，默认为true,该参数只在app环境5.24.0以上生效\n * @param {string} [loginParams.scopeType=ScopeType.Base] 微信登陆选项，微信oauth登陆授权作用域，详见 https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419316505&token=&lang=zh_CN\n *\n * @return {Promise<UserInfo>} 只有app环境下会被resolve, 且userInfo只有accessToken。可能的Error如下：\n * @throws {RedirectedError} 发生了重定向，错误对象errorCode属性为302。\n * @throws {Error} app唤起登陆弹窗但登陆失败，错误对象errorCode属性为60006（详见上述文档）\n *\n */\nexport function login(loginParams = {}) {\n  // silent如果没传默认赋值为true,注意包升级时@pdd/isomorphic-request需要同步升级到0.14.9,package.json里面dependencies已修改\n  if(typeof loginParams.silent === 'undefined') {\n    loginParams.silent = true;\n  }\n  const isNativeSilentLogin = loginParams.silent && isNativeSupportSilentLogin();\n  if(!isNativeSilentLogin) {\n    logout();\n  }\n  return callLogin(loginParams).then(onLoginSuccess);\n}\n","/**\n * hex to rgba\n *\n * @param {string} hex '#'开头的六位十六进制颜色\n * @param {number} transparent 透明度\n * @return {string} rgba颜色\n */\nexport const hexToRGB = (hex, transparent = 1) => {\n    if (!hex) {\n        return 'transparent';\n    }\n    const sColorChange = [];\n\n    for (let i = 1; i < 7; i += 2) {\n        sColorChange.push(parseInt('0x' + hex.substring(i, i + 2), 16));\n    }\n    return `rgba(${sColorChange.join(',')}, ${transparent})`;\n};\n\n/**\n * 计算字符长度\n *\n * @param {string} str 字符\n * @param {number} subLen 子串长度，默认15\n * @return {object} 总长度和子字符串\n */\nfunction caculCharLen (str, subLen) {\n    str = str || '';\n    subLen = subLen || 0;\n    let preSubStr = '';\n    let len = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (len < subLen) {\n            preSubStr = str.substr(0, i);\n        }\n        if (str.charCodeAt(i) > 127 || str.charCodeAt(i) == 94) {\n            len += 2;\n        } else {\n            len++;\n        }\n    }\n\n    return {\n        len,\n        preSubStr\n    };\n}\n\n/**\n * 店铺名称显示适配\n *\n * @param {string} mallName 店铺名称\n * @param {number} subLen 显示子串长度，默认15\n * @param {number} limitLen 限制长度，默认20\n * @return {string} 适配后的店铺名称\n */\nexport function mallNameAdapted (mallName, subLen = 15, limitLen = 20) {\n    if (!mallName) return '';\n    const mallNameString = caculCharLen(mallName, subLen);\n    if (mallNameString.len > limitLen) {\n        mallName = mallNameString.preSubStr + '...' + mallName.substr(-3, 3);\n    }\n    return mallName;\n}\n\nconst hexRegex = /^#[a-fA-F0-9]{6}$/;\nconst hexArgbRegex = /^#[a-fA-F0-9]{8}$/;\n\n/**\n * 转换 hexArgb to rgba\n * @param {string} color '#FFFFFF' 或 '#FFFFFFFF'\n * @returns {string}  css 识别的 color\n */\nexport function ahexToRgba(color) {\n    if (typeof color !== 'string') {\n        return '';\n    }\n\n    if (color.match(hexRegex)) {\n        return color;\n    }\n    if (color.match(hexArgbRegex)) {\n        const alpha = parseFloat(\n            (\n                parseInt(`${color[1]}${color[2]}`, 16) / 255\n            ).toFixed(2),\n        );\n        const red = parseInt(`${color[3]}${color[4]}`, 16);\n        const green = parseInt(`${color[5]}${color[6]}`, 16);\n        const blue = parseInt(`${color[7]}${color[8]}`, 16);\n        return `rgba(${red}, ${green}, ${blue}, ${alpha})`;\n    }\n\n    return color;\n}\n","/*\n@description 库存不足提示组件\n@see https://jira.pdd.net/browse/PDD-54343\n*/\n\nimport React, { useRef } from 'react';\n\nimport { useScale } from '../common/useScale';\nimport { ahexToRgba } from '../common/utils';\n\nimport styles from './index.module.scss';\n\n/**\n * @typedef { import(\"./interface\").ITipOnImageProps } ITipOnImageProps\n */\n\nconst TipOnImageImpl = React.memo((/** @type {ITipOnImageProps}*/ { data, style = null }) => {\n    const outerContainerRef = useRef();\n    const textRef = useRef();\n\n    const { visible, scale, containerWidth } = useScale({\n        outerContainerRef,\n        contentRef: textRef,\n    }, [data.img_text]);\n\n    return (\n        <div\n            className={styles.wrapper}\n            style={{\n                color: ahexToRgba(data.text_color),\n                background: ahexToRgba(data.bg_color),\n                ...style\n            }}\n        >\n            <div\n                className={styles.container}\n                ref={outerContainerRef}\n            >\n                <div\n                    style={{\n                        WebkitTransformOrigin: 'left center',\n                        transformOrigin: 'left center',\n                        WebkitTransform: `scale(${scale})`,\n                        transform: `scale(${scale})`,\n                        width: containerWidth / scale,\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                    }}\n                >\n                    <span ref={textRef} style={{ visibility: visible ? 'visible' : 'hidden' }}>{data.img_text || null}</span>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport const TipOnImage = React.memo((/** @type {ITipOnImageProps}*/ { data }) => {\n    if (data && data.img_text) {\n        return <TipOnImageImpl data={data} />;\n    }\n    return null;\n});\n","import { useState, useEffect } from 'react';\n\n// 根据容器宽度，缩放内容\nexport const useScale = ({\n    outerContainerRef,\n    contentRef,\n    minScale = 0.5,\n}, deps = []) => {\n    const [visible, setVisible] = useState(false);\n    const [scale, setScale] = useState(1);\n    const [containerWidth, setContainerWidth] = useState(0);\n\n    useEffect(() => {\n        const outerContainerWidth = outerContainerRef.current.offsetWidth;\n        const contentWidth = contentRef.current.offsetWidth;\n        setContainerWidth(outerContainerWidth);\n        if (contentWidth > outerContainerWidth) {\n            setScale(Math.max(minScale, outerContainerWidth / contentWidth));\n        }\n        setVisible(true);\n    }, deps);\n\n    return {\n        visible,\n        scale,\n        containerWidth\n    };\n};\n","/**\n * @file constant.js, 当前的app的配置常量\n * @author fushi(fushi@yiran.com)\n */\n\nconst constant = {\n    CookieKey: {\n        UID: 'pdd_user_id', // pdd user id\n        UIN: 'pdd_user_uin',\n    },\n\n    LocalStorageKey: {\n        UID: '0e4f9612e0fbe579', // md5(UIDStorage). value: userID.toString(36)\n        UIN: '830d7c3797f9909d', // md5(UINStorage). value: uin\n    },\n\n    CDNImgHostName: 'http://pinduoduoimg.yangkeduo.com/',\n};\n\nexport default constant;\n","/**\n * @file configs/app/mp.js 公众号配置\n * @author aotuman\n */\nimport {getCurrentPlatform} from '@pdd/platform-util';\nconst mpConfigs = {};\nconst clientPlatform = process.env.BROWSER ? getCurrentPlatform() : {};\n// 判断是否yangkeduo.com域名，由于ios隐私策略调整，set-Cookie限制必须和主文档一样的域名才可以写入\n// 故如果是yangkeduo域名保持打点域名 th.yangkeduo.com 以使得api_uid可以传递\nconst isYangkeduoHost = typeof location !== 'undefined' && location.hostname.includes('yangkeduo.com');\nconst useYangkeduoLogingUrl = !clientPlatform.isNativePlatform && isYangkeduoHost;\n\n/**\n * 获取pv,click,impr等默认打点地址\n * @param {boolean} useYangkeduoLogingUrl 判断是否yangkeduo.com域名，由于ios隐私策略调整，set-Cookie限制必须和主文档一样的域名才可以写入\n * @returns {string|*} 打点地址\n */\nfunction getLoggingUrl(useYangkeduoLogingUrl) {\n    if (typeof window !== 'undefined' && window.__LogingUrl__) {\n        return window.__LogingUrl__;\n    }\n    if (useYangkeduoLogingUrl) {\n        return 'https://th.yangkeduo.com/t.gif';\n    }\n    return 'https://th.pinduoduo.com/t.gif';\n}\n\n/**\n * 获取广告打点地址\n * @param useYangkeduoLogingUrl\n * @returns {string|*}\n */\nfunction getAdLoggingUrl(useYangkeduoLogingUrl) {\n    if (typeof window !== 'undefined' && window.__AdLogingUrl__) {\n        return window.__AdLogingUrl__;\n    }\n    if (useYangkeduoLogingUrl) {\n        return 'https://ta.yangkeduo.com/t.gif';\n    }\n    return 'https://ta.pinduoduo.com/t.gif';\n}\n\nconst commonLogRoutes = {\n    loggingURL: getLoggingUrl(useYangkeduoLogingUrl),\n    logRoutes: {\n        ad: getAdLoggingUrl(useYangkeduoLogingUrl),\n    }\n};\n\nconst commonTestLogRoutes = process.env.BUNDLE_PLATFORM !== 'production' ? {\n    httpsLoggingURL: 'https://sandbox-tk.pdd.net/t.gif',\n    logRoutes: {\n        ad: 'https://sandbox-tk.pdd.net/t.gif',\n    },\n} : {};\n\nconst baseProd = {\n    loggingURL: commonLogRoutes.loggingURL, // @pdd/logger依赖，后期可移除\n    logRoutes: {\n        ...commonLogRoutes.logRoutes\n    },\n    httpsLoggingURL: commonLogRoutes.loggingURL,\n    httpsLogRoutes: {\n        ...commonLogRoutes.logRoutes\n    },\n    AppID: {\n        WeChat: 2,\n        QQ: 12,\n        Weibo: 11,\n        QQConnect: 13,\n        QQPublic: 30,\n    },\n    ApiKey: {\n        WeChat: 'wx839691cce7c102bb',\n        QQPublic: '200675334', // QQ购物号\n    },\n    RedirectURI: {\n        QQConnect: 'http://mobile.yangkeduo.com/qqoauth_callback.html'\n    },\n    thirdLevelLoginPath: 'jkr_report.html'\n};\n\nconst wechat24Config = {\n    AppID: {\n        WeChat: 24\n    },\n    ApiKey: {\n        WeChat: 'wx20392b0342c8af91'\n    }\n};\n\nconst mps = {\n    hutaojie: 1,\n    mobile: 2,\n    weipin: 3,\n    app: 4,\n    huabei: 17,\n    xibei: 18,\n    dongbei: 19,\n    huazhong: 21,\n    huadong: 22,\n    dongnan: 23,\n    xinan: 24,\n    panduoduo: 25,\n    sc: 26,\n    hybrid: 'hybrid',\n    hybridTest: 'hybridTest',\n    huanan: 40,\n    hzsc: 41,\n    dnsc: 42,\n    dbsc: 43,\n    xbsc: 44,\n    xnsc: 45,\n    hnsc: 46,\n    hbsc: 47,\n    pddpt: 48,\n    m: 49, // 此项为m.ishangtong.com来配置\n    mm: 66, // mm.ishangtong.com\n    myqxgs: 68, // m.yiqixiegushi.com\n    mobpinduoduo: 72, // 56\n    mmpinduoduo: 73, // 57\n    mobilepinduoduo: 74,\n    mobileddlequ: 75, // WeChat: 24\n    nvude3: 82, // 67\n    mobnvude3: 83, // 65\n    mpinduoduo: 63,\n    mddlequ: 85,\n    hhngpinduoduo: 129,\n};\n\nmpConfigs[mps.hutaojie] = process.env.BUNDLE_PLATFORM !== 'production' ? {\n    domain: 'http://m.hutaojie.com/',\n    loggingURL: commonTestLogRoutes.httpsLoggingURL,\n    logRoutes: {\n        ...commonTestLogRoutes.logRoutes\n    },\n    httpsLoggingURL: commonTestLogRoutes.httpsLoggingURL,\n    httpsLogRoutes: {\n        ...commonTestLogRoutes.logRoutes\n    },\n    AppID: {\n        WeChat: mps.hutaojie,\n        QQPublic: 10002,\n    },\n    ApiKey: {\n        WeChat: 'wx88f6836551e2b34e',\n        QQPublic: 201112168\n    },\n    RedirectURI: {\n        QQConnect: 'http://m.hutaojie.com/qqoauth_callback.html'\n    }\n} : {};\n\nmpConfigs[mps.mobile] = {\n    domain: 'https://mobile.yangkeduo.com/',\n};\n\nmpConfigs[mps.weipin] = {\n    domain: 'https://weipin.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.weipin\n    },\n    ApiKey: {\n        WeChat: 'wx51e5fe8c95f71b20'\n    }\n};\n\nmpConfigs[mps.huabei] = {\n    domain: 'https://huabei.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.huabei\n    },\n    ApiKey: {\n        WeChat: 'wx4044e9709b7188ea'\n    }\n};\n\nmpConfigs[mps.xibei] = {\n    domain: 'https://xibei.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.xibei\n    },\n    ApiKey: {\n        WeChat: 'wxbc80866520cc300d'\n    }\n};\n\nmpConfigs[mps.dongbei] = {\n    domain: 'https://dongbei.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.dongbei\n    },\n    ApiKey: {\n        WeChat: 'wx27901e8ab752ed35'\n    }\n};\n\nmpConfigs[mps.huazhong] = {\n    domain: 'https://huazhong.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.huazhong\n    },\n    ApiKey: {\n        WeChat: 'wx95c952f67a727090'\n    }\n};\n\nmpConfigs[mps.huadong] = {\n    domain: 'https://huadong.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.huadong\n    },\n    ApiKey: {\n        WeChat: 'wx03908118b84f285a'\n    }\n};\n\nmpConfigs[mps.dongnan] = {\n    domain: 'https://dongnan.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.dongnan\n    },\n    ApiKey: {\n        WeChat: 'wxff2e8dc2762c5b92'\n    }\n};\n\nmpConfigs[mps.xinan] = {\n    domain: 'https://xinan.yangkeduo.com/',\n    ...wechat24Config\n};\n\nmpConfigs[mps.panduoduo] = process.env.BUNDLE_PLATFORM !== 'production' ? {\n    domain: 'https://panduoduo.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.panduoduo\n    },\n    ApiKey: {\n        WeChat: 'wxd7dd35cfa5f90f37'\n    },\n    httpsLogRoutes: {\n        ...commonTestLogRoutes.logRoutes\n    },\n    httpsLoggingURL: commonTestLogRoutes.httpsLoggingURL,\n} : {};\n\nmpConfigs[mps.sc] = {\n    domain: 'https://sc.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.sc\n    },\n    ApiKey: {\n        WeChat: 'wx32b0d9cdd390ebf0'\n    }\n};\n\n// mpConfigs[mps.sc] = {\n//     domain: 'https://sc.yangkeduo.com/',\n// };\n\nmpConfigs[mps.app] = {\n    domain: 'https://app.yangkeduo.com/',\n    AppID: {\n        WeChat: 4\n    },\n    ApiKey: {\n        WeChat: 'wx77d53b84434b9d9a'\n    }\n};\n\nmpConfigs[mps.hybrid] = {\n    shareDomain: 'https://mobile.yangkeduo.com/',\n    AppID: {\n        WeChat: 4\n    },\n    ApiKey: {\n        WeChat: 'wx77d53b84434b9d9a'\n    }\n};\n\nmpConfigs[mps.hybridTest] = process.env.BUNDLE_PLATFORM !== 'production' ? {\n    shareDomain: 'http://m.hutaojie.com/',\n    httpsLoggingURL: commonTestLogRoutes.httpsLoggingURL,\n    httpsLogRoutes: {\n        ...commonTestLogRoutes.logRoutes\n    },\n    AppID: {\n        WeChat: 32,\n    },\n    ApiKey: {\n        WeChat: 'wx773a286ea37f0216'\n    }\n} : {};\n\nmpConfigs[mps.huanan] = {\n    shareDomain: 'https://huanan.yangkeduo.com/',\n    AppID: {\n        WeChat: 40\n    },\n    ApiKey: {\n        WeChat: 'wxaffd94b821032481'\n    },\n};\n\nmpConfigs[mps.hzsc] = {\n    shareDomain: 'https://hzsc.yangkeduo.com/',\n    AppID: {\n        WeChat: 41\n    },\n    ApiKey: {\n        WeChat: 'wx7bca1a27af0a31ed'\n    },\n};\n\nmpConfigs[mps.dnsc] = {\n    shareDomain: 'https://dnsc.yangkeduo.com/',\n    AppID: {\n        WeChat: 42\n    },\n    ApiKey: {\n        WeChat: 'wxb79645ae502205d9'\n    },\n};\n\nmpConfigs[mps.dbsc] = {\n    shareDomain: 'https://dbsc.yangkeduo.com/',\n    AppID: {\n        WeChat: 43\n    },\n    ApiKey: {\n        WeChat: 'wx01e7a1f91b8c43d3'\n    },\n};\n\nmpConfigs[mps.xbsc] = {\n    shareDomain: 'https://xbsc.yangkeduo.com',\n    AppID: {\n        WeChat: 44\n    },\n    ApiKey: {\n        WeChat: 'wxc50a66d9b6d566ed'\n    },\n};\n\nmpConfigs[mps.xnsc] = {\n    shareDomain: 'https://xnsc.yangkeduo.com',\n    AppID: {\n        WeChat: 45\n    },\n    ApiKey: {\n        WeChat: 'wx52457b6561fcd804'\n    },\n};\n\nmpConfigs[mps.hnsc] = {\n    shareDomain: 'https://hnsc.yangkeduo.com',\n    AppID: {\n        WeChat: 46\n    },\n    ApiKey: {\n        WeChat: 'wx8e75952076e03567'\n    },\n};\n\nmpConfigs[mps.hbsc] = {\n    shareDomain: 'https://hbsc.yangkeduo.com',\n    AppID: {\n        WeChat: 47\n    },\n    ApiKey: {\n        WeChat: 'wx7388833e69aafd89'\n    },\n};\n\nmpConfigs[mps.pddpt] = {\n    shareDomain: 'https://pddpt.yangkeduo.com',\n    AppID: {\n        WeChat: 48\n    },\n    ApiKey: {\n        WeChat: 'wxe1b0f22089fadce1'\n    },\n};\n\nmpConfigs[mps.m] = {\n    domain: 'https://m.ishangtong.com',\n    shareDomain: 'https://m.ishangtong.com',\n    AppID: {\n        WeChat: 48\n    },\n    ApiKey: {\n        WeChat: 'wxe1b0f22089fadce1'\n    },\n};\n\nmpConfigs[mps.mm] = {\n    shareDomain: 'https://mm.ishangtong.com',\n    AppID: {\n        WeChat: 66\n    },\n    ApiKey: {\n        WeChat: 'wxf05b577296a1b6ec'\n    },\n};\n\nmpConfigs[mps.myqxgs] = {\n    domain: 'https://m.yiqixiegushi.com',\n    shareDomain: 'https://m.yiqixiegushi.com',\n    AppID: {\n        WeChat: 66\n    },\n    ApiKey: {\n        WeChat: 'wxf05b577296a1b6ec'\n    },\n};\n\nmpConfigs[mps.mobpinduoduo] = {\n    shareDomain: 'https://mob.pinduoduo.com',\n    AppID: {\n        WeChat: 56\n    },\n    ApiKey: {\n        WeChat: 'wx1e2715638762a51b'\n    },\n};\n\nmpConfigs[mps.mmpinduoduo] = {\n    shareDomain: 'https://mm.pinduoduo.com',\n    AppID: {\n        WeChat: 57\n    },\n    ApiKey: {\n        WeChat: 'wxa19650a24138625a'\n    },\n};\n\nmpConfigs[mps.mobileddlequ] = {\n    shareDomain: 'https://mobile.ddlequ.com/',\n    ...wechat24Config\n};\n\nmpConfigs[mps.mddlequ] = {\n    shareDomain: 'https://m.ddlequ.com/',\n    ...wechat24Config\n};\n\nmpConfigs[mps.mobilepinduoduo] = {\n    domain: 'https://mobile.pinduoduo.com',\n    shareDomain: 'https://mobile.pinduoduo.com'\n};\n\nmpConfigs[mps.nvude3] = (function () {\n    const baseDomain = 'https://m.nvude3.com';\n    return {\n        domain: baseDomain,\n        shareDomain: baseDomain,\n        AppID: {\n            WeChat: 67\n        },\n        ApiKey: {\n            WeChat: 'wx15ee6b92001c5295'\n        },\n        httpsLoggingURL: baseDomain + '/proxy/th/t.gif',\n        httpsLogRoutes: {\n            error: baseDomain + '/proxy/te/e.gif', // \"https://te.yangkeduo.com/e.gif\"\n            chat_error: baseDomain + '/proxy/te/e.gif', // \"https://te.yangkeduo.com/e.gif\"\n            real_error: baseDomain + '/proxy/tne/tne.gif' // \"https://tne.yangkeduo.com/tne.gif\"\n        }\n    };\n})();\n\nmpConfigs[mps.mobnvude3] = {\n    shareDomain: 'https://mob.nvude3.com',\n    AppID: {\n        WeChat: 65\n    },\n    ApiKey: {\n        WeChat: 'wx86161385b94a2ed7'\n    },\n};\n\nmpConfigs[mps.mpinduoduo] = {\n    shareDomain: 'https://mobile.yangkeduo.com/',\n    AppID: {\n        WeChat: mps.mpinduoduo\n    },\n    ApiKey: {\n        WeChat: 'wx2993126642818cea'\n    }\n};\n\nmpConfigs[mps.hhngpinduoduo] = {\n    shareDomain: 'https://hhng.pinduoduo.com/',\n    AppID: {\n        WeChat: mps.hhngpinduoduo\n    },\n    ApiKey: {\n        WeChat: 'wx8aeafb2c4c5252fa'\n    }\n};\n\nfunction init(params) {\n    return extend(baseProd, params);\n}\n\nfunction extend() {\n    const res = {};\n    for (let i = 0; i < arguments.length; i++) {\n        if (typeof arguments[i] === 'object') {\n            deepExtend(res, arguments[i]);\n        }\n    }\n    return res;\n}\n\nfunction deepExtend(res, args) {\n    for (const key in args) {\n        if (args.hasOwnProperty(key)) {\n            const value = args[key];\n            const valueType = typeof value;\n            if (valueType === 'number' ||\n                valueType === 'string' ||\n                valueType === 'boolean') {\n                res[key] = value;\n            } else if (valueType === 'object') {\n                res[key] = res[key] || {};\n                deepExtend(res[key], value);\n            } else if (isArray(value)) {\n                res[key] = res[key] || [];\n                deepExtend(res[key], value);\n            }\n        }\n    }\n}\n\nfunction isArray(o) {\n    return Object.prototype.toString.call(o) === '[object Array]';\n}\n\nconst hostMap = {\n    hutaojie: {\n        m: 'hutaojie',\n        app: 'apptest'\n    },\n    yangkeduo: {\n        mobile: 'mobile',\n        app: 'app',\n        huabei: 'huabei',\n        xibei: 'xibei',\n        dongbei: 'dongbei',\n        xinan: 'xinan',\n        huazhong: 'huazhong',\n        dongnan: 'dongnan',\n        huadong: 'huadong',\n        panduoduo: 'panduoduo',\n        sc: 'sc',\n        huanan: 'huanan',\n        hzsc: 'hzsc',\n        dnsc: 'dnsc',\n        dbsc: 'dbsc',\n        xbsc: 'xbsc',\n        xnsc: 'xnsc',\n        hnsc: 'hnsc',\n        hbsc: 'hbsc',\n        pddpt: 'pddpt',\n        weipin: 'weipin'\n    },\n    ishangtong: {\n        m: 'm',\n        mm: 'mm'\n    },\n    yiqixiegushi: {\n        m: 'myqxgs'\n    },\n    pinduoduo: {\n        mob: 'mobpinduoduo',\n        mm: 'mmpinduoduo',\n        mobile: 'mobilepinduoduo',\n        m: 'mpinduoduo',\n        hhng: 'hhngpinduoduo'\n    },\n    nvude3: {\n        m: 'nvude3',\n        mob: 'mobnvude3'\n    },\n    ddlequ: {\n        mobile: 'mobileddlequ',\n        m: 'mddlequ',\n    }\n};\n\n// 只对多级域名的 hostname 进行转换\n// 约定一级域名类似 yangkeduo.com\n// 使用 appid 是 2、48、66 对应的域名\n// 多级域口径 顶级域 com，一级域 yangkeduo，二级域 mobile，三级域 m (示例: m.mobile.yangkeduo.com)\nfunction transferHostName(hostName) {\n    const res = {\n        hostName: hostName || '',\n        hasThirdLevelDomain: false\n    };\n    if (!hostName) {\n        res.hostName = '.';\n        return res;\n    }\n    const MIN_DOMAIN_LEVELS = 3;\n    // 域名匹配白名单，修改\n    const hostMapArr = ['m.ishangtong.com', 'm.yiqixiegushi.com', 'm.hutaojie.com'];\n    const hostArr = hostName.split('.');\n    const hostArrLen = hostArr.length;\n\n    // 小于三级域 直接返回当前域名\n    if (hostArrLen <= MIN_DOMAIN_LEVELS) {\n        return res;\n    }\n    // 使用一级域进行匹配\n    const firstLevelDomain = hostArr[hostArrLen - 2];\n    for (let i = 0; i < hostMapArr.length; i++) {\n        const item = hostMapArr[i];\n        if (item.indexOf(firstLevelDomain) > 0) {\n            res.hostName = item;\n            res.hasThirdLevelDomain = true;\n            return res;\n        }\n    }\n\n    return res;\n}\n\nexport default {\n\n    /**\n     * GET 生成需要的配置\n     *\n     * @param {Object} opts 传入参数，包含\n        isModuleVersion 是否是组件包,\n        hostName 域名,\n        shareType 分享类型,\n        defaultApiDomains api 域名\n     * @return {Object} res 结果\n     */\n    get: function (opts) {\n        opts = opts || {};\n        let config;\n        // hostname 转换\n        const transferObj = transferHostName(opts.hostName);\n        const hostName = transferObj.hostName || '.';\n\n        const hostArr = hostName.split('.');\n        if (opts.isModuleVersion) {\n            const isHybridTest = typeof window !== 'undefined'\n                ? location.href.indexOf('hutaojie') >= 0\n                : hostName.indexOf('hutaojie') >= 0;\n            config = mpConfigs[isHybridTest ? mps.hybridTest : mps.hybrid];\n        } else if (hostArr.length >= 2 && hostMap[hostArr[1]]) {\n            config = mpConfigs[mps[hostMap[hostArr[1]][hostArr[0]]]];\n        }\n        if (!config) {\n            config = mpConfigs[mps.mobile];\n        }\n        config.hasThirdLevelDomain = transferObj.hasThirdLevelDomain || false;\n\n        return init(config);\n    }\n};\n","/**\n * @file index.js, app的主索引文件，里面包含有当前所有的app用到的配置文件\n * @author fushi(fushi@yiran.com)\n */\n\nimport constant from './constant';\nimport mpConfig from './mpConfig';\n\n/**\n * 返回当前的app所用到的config\n *\n * @param {?string} hostNmae, 当前的host name\n *\n * @return {Object}\n */\nexport default {\n    get: function get(hostName, userAgent) {\n        if (!userAgent) {\n            userAgent = typeof window !== 'undefined' ? window.navigator.userAgent || window.navigator.vendor || window.opera || '' : '';\n        }\n        const config = mpConfig.get({\n            isModuleVersion: userAgent ? !!(userAgent.match(/phh_ios_version/i) || userAgent.match(/phh_android_version/i)) : false,\n            hostName\n        });\n\n        return config;\n    },\n    constant: constant\n};\n","import { nanoid } from './nanoid';\nimport { getCurrentPlatform, SYSTEM } from '@pdd/platform-util';\nimport { setTitle } from '@pdd/native-util';\n\nconst LAUNCH_WAIT_TIME = 2000; // 2s还没唤起则超时\nconst LAUNCH_TOTAL_TIME_THRESHOLD = 2500; // 如果超时2.5s才触发超时那么认为唤起成功了，因为有些浏览器唤起时js停止执行\nconst LAUNCH_FAIL = '唤起App失败';\n\nlet launchTimer;\n/**\n * 唤起方式\n * @private\n * @typedef {Object} LAUNCH_TYPE\n * @property {number} openDirectly 直接唤起\n * @property {number} openByTag 通过创建A标签唤起\n * @property {number} openByIframe 通过创建iframe唤起\n */\nconst LAUNCH_TYPE = {\n  openDirectly: 1,\n  openByTag: 2,\n  openByIframe: 3\n};\n\n/**\n *\n * 非微信环境下的唤起方法\n * @param {string} url 待唤起的url\n * @param {LAUNCH_TYPE} launchType 唤起方式\n * @return {Promise} 唤起结果Promise\n */\nexport function launchApp(url, launchType) {\n  // 设置隐藏属性和改变可见属性的事件的名称\n  let hidden, visibilityChange;\n  if (typeof document.hidden !== 'undefined') {\n    // Opera 12.10 and Firefox 18 and later support\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n  } else if (typeof document.webkitHidden !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n  }\n  const launchBegin = Date.now();\n  const getLaunchResultPromise = () => {\n    return new Promise((resolve, reject) => {\n      // 处理页面可见属性的改变\n      document.addEventListener(visibilityChange, handleVisibilityChange, false);\n\n      function handleVisibilityChange(e) {\n        document.removeEventListener(visibilityChange, handleVisibilityChange);\n        clearTimeout(launchTimer);\n        if (document[hidden] || e.hidden || document.visibilityState === 'hidden') {\n          return resolve();\n        }\n        reject(new Error(LAUNCH_FAIL));\n      }\n\n      launchTimer = setTimeout(() => {\n        document.removeEventListener(visibilityChange, handleVisibilityChange);\n        // 如果超时触发时页面是隐藏的那么唤起成功\n        if (document[hidden] || document.visibilityState === 'hidden') {\n          return resolve();\n        }\n\n        if (Date.now() - launchBegin > LAUNCH_TOTAL_TIME_THRESHOLD) {\n          return resolve();\n        }\n\n        reject(new Error(LAUNCH_FAIL));\n      }, LAUNCH_WAIT_TIME);\n    });\n  };\n  // 如果传入了指定的launchType那么按照指定的launchType触发\n  if (launchType) {\n    switch (launchType) {\n      case LAUNCH_TYPE.openByIframe:\n        openByIframe(url);\n        break;\n      case LAUNCH_TYPE.openByTag:\n        openByTag(url);\n        break;\n      case LAUNCH_TYPE.openDirectly:\n        openDirectly(url);\n        break;\n    }\n    return getLaunchResultPromise();\n  }\n  const ua = navigator.userAgent.toLowerCase();\n  const env = {\n    isIOS: getCurrentPlatform().system === SYSTEM.IOS,\n    isAndroid: /android|adr/.test(ua) && !/windows phone/.test(ua),\n    isChrome: /(?:chrome|crios)\\/([\\d\\.]+)/.test(ua), // eslint-disable-line\n    isQQ: /qq\\/|mqqbrowser\\/[\\d\\.]+/.test(ua) // eslint-disable-line\n  };\n  env.isOriginalChrome = env.isAndroid && env.isChrome;\n  if (env.isIOS || env.isQQ) {\n    openByTag(url);\n  } else if (env.isOriginalChrome) {\n    openDirectly(url);\n  } else {\n    openByIframe(url);\n  }\n  return getLaunchResultPromise();\n}\n\n/**\n * 尝试直接唤起app\n * @param {string} url 唤起url\n */\nfunction openDirectly(url) {\n  window.location.href = url;\n}\n\n/**\n * 尝试通过iframe唤起\n * 经测试 chrome浏览器iframe无法唤起,safari浏览器iframe无法唤起\n * @param {string} url\n */\nfunction openByIframe(url) {\n  const iframe = document.createElement('iframe');\n  iframe.src = url;\n  iframe.style.display = 'none';\n  document.body.appendChild(iframe);\n  setTimeout(() => {\n    document.body.removeChild(iframe);\n  }, 200);\n}\n\nconst DEFAULT_TAG_ID = `pdd-launch-node-${nanoid()}`;\n\n/**\n * 尝试通过a标签点击事件唤起\n * @param url\n */\nfunction openByTag(url) {\n  let node = document.getElementById(DEFAULT_TAG_ID);\n  if (!node) {\n    node = document.createElement('a');\n    node.id = DEFAULT_TAG_ID;\n    node.style.display = 'none';\n    document.body.appendChild(node);\n  }\n\n  node.href = url;\n  node.click();\n}\n\n/**\n * 改变当前标题，浏览器环境生效\n *\n * @param {string} title 要变更的标题\n */\nexport function changeTitle(title) {\n  if (!process.env.BROWSER) {\n    return;\n  }\n\n  if (getCurrentPlatform().isNativePlatform) {\n    setTitle({ title });\n  } else {\n    document.title = title;\n  }\n}\n","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\nfunction decode(s) {\n  return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n}\n\n/**\n * 按键名获取cookie值。如果未提供键名，则获取整个cookie。\n *\n * @param {string} [key]  键名\n * @returns {string|Object} cookie 值\n *\n * @example\n *\n * getCookie('uid') // => \"1001\"\n * getCookie('non-exist') // => \"\"\n * getCookie() // { uid: \"1001\" }\n */\nexport function getCookie(key) {\n  const cookies = document.cookie ? document.cookie.split('; ') : [];\n  const jar = {};\n\n  cookies.some(v => {\n    const parts = v.split('=');\n    let cookie = parts.slice(1).join('=');\n    const name = decode(parts[0]);\n    cookie = decode(cookie);\n    jar[name] = cookie;\n    return key === name;\n  });\n\n  return key ? jar[key] || '' : jar;\n}\n\n/**\n * @typedef {Object} attributes\n * @property {string} [path=\"/\"] 设置cookie对应的路径\n * @property {string} [domain] 设置cookie对应的domain\n * @property {number} [maxAge] 设置cookie过期的时间为当前时间开始的秒数，优先级高于 expires，不支持IE8及以下\n * @property {string} [expires] 设置cookie过期的时间为一个过期日期（GMT格式）\n * @property {boolean} [secure] 设置cookie是否只在https下传输\n */\n\n/**\n * 设置 cookie\n * @param {string} key 键名\n * @param {string} value 键值（cookie 值）\n * @param {attributes} [attributes] 属性，如 path/expires 等\n * @returns {string} 返回最终赋值给document.cookie的字符串\n * @example\n *\n * setCookie('uid', '1001')\n */\nexport function setCookie(key, value, attributes) {\n  // If no value offered, do nothing.\n  if (value === undefined) {\n    return '';\n  }\n\n  attributes = Object.assign({ path: '/' }, attributes);\n\n  if (typeof attributes.maxAge === 'number') {\n    attributes['max-age'] = String(attributes.maxAge);\n    attributes.maxAge = false;\n  }\n\n  value = encodeURIComponent(value);\n  key = encodeURIComponent(key);\n\n  const stringifiedAttributes = Object.entries(attributes).reduce((res, [attrName, attrValue]) => {\n    if (!attrValue) {\n      return res;\n    }\n    res += '; ' + attrName;\n    // The only valid case is: {secure: true}\n    if (attrValue === true) {\n      return res;\n    }\n    // Considers RFC 6265 section 5.2:\n    // ...\n    // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n    //     character:\n    // Consume the characters of the unparsed-attributes up to,\n    // not including, the first %x3B (\";\") character.\n    // ...\n    res += '=' + attrValue.split(';')[0];\n    return res;\n  }, '');\n\n  return (document.cookie = key + '=' + value + stringifiedAttributes);\n}\n\n/**\n * 删除 cookie\n * @param {string} key 键名\n */\nexport function removeCookie(key) {\n  setCookie(key, '', {\n    maxAge: -1\n  });\n}\n","/**\n * 循环冗余校验码 CRC32\n * 参考：https://stackoverflow.com/questions/18638900/javascript-crc32\n */\n\nfunction utf8ToAscii(str) {\n  let result = '';\n  for (let i = 0; i < str.length; i++) {\n    let charcode = str.charCodeAt(i);\n    if (charcode < 0x80) {\n      result += String.fromCharCode(charcode);\n    } else if (charcode < 0x800) {\n      result += String.fromCharCode(0xc0 | (charcode >> 6)) + String.fromCharCode(0x80 | (charcode & 0x3f));\n    } else if (charcode < 0xd800 || charcode >= 0xe000) {\n      result +=\n        String.fromCharCode(0xe0 | (charcode >> 12)) +\n        String.fromCharCode(0x80 | ((charcode >> 6) & 0x3f)) +\n        String.fromCharCode(0x80 | (charcode & 0x3f));\n    } else {\n      charcode = 0x10000 + (((charcode & 0x3ff) << 10) | (str.charCodeAt(++i) & 0x3ff));\n      result +=\n        String.fromCharCode(0xf0 | (charcode >> 18)) +\n        String.fromCharCode(0x80 | ((charcode >> 12) & 0x3f)) +\n        String.fromCharCode(0x80 | ((charcode >> 6) & 0x3f)) +\n        String.fromCharCode(0x80 | (charcode & 0x3f));\n    }\n  }\n  return result;\n}\n\nfunction makeCRC32Table() {\n  const crcTable = [];\n  let c;\n  for (let n = 0; n < 256; n++) {\n    c = n;\n    for (let k = 0; k < 8; k++) {\n      c = c & 1 ? 0xedb88320 ^ (c >>> 1) : c >>> 1;\n    }\n    crcTable[n] = c;\n  }\n  return crcTable;\n}\n\n/**\n * CRCTable\n * @type {Array}\n */\nconst crcTable = makeCRC32Table();\n\n/**\n * 计算循环冗余校验码（crc32）\n *\n * @param {string} str 待计算的字符串\n * @param {number} [crc=0] 之前计算所得的crc32值，用于支持 append 模式\n * @returns {number} 计算得到的crc32值\n * @example\n *\n * crc32('hello') // =>907060870\n */\nexport function crc32(str, crc = 0) {\n  str = utf8ToAscii(str);\n  crc = crc ^ -1;\n  for (let i = 0; i < str.length; i++) {\n    crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xff];\n  }\n  return (crc ^ -1) >>> 0;\n}\n","const INVALID_DATE = 'Invalid Date';\n\n/**\n * 按给定格式显示日期\n *\n * @param {Date|number|string} date 日期\n * - Date: Date 类型的对象\n * - string: 表示日期的字符串，符合 RFC2822 或 ISO 8601 标准\n * - number: 表示日期的整数，表示从 1970年1月1日 00:00:00 UTC 开始的毫秒数。\n *   最大范围是 [-100000000 天, 100000000 天]（1 天为 86,400,000 毫秒）\n * @param {string} [formatStr=\"YYYY-MM-DD\"] 需要显示的格式，目前支持的 token\n * 为 `YYYY/YY/M/MM/D/DD/H/HH/m/mm/s/ss/SSS/h/hh/a/A`，具体可参考 [day.js format](https://github.com/iamkun/dayjs/blob/dev/docs/en/API-reference.md#format-formatstringwithtokens-string)\n * @returns {string} 格式化后的日期\n * @example\n *\n * formateTime(new Date(), 'MM/DD/YYYY HH:mm:ss')\n * // --> 04/21/2019 17:33:04\n */\nexport function formatTime(date, formatStr = 'YYYY-MM-DD') {\n  if (typeof date === 'number' || typeof date === 'string') {\n    date = new Date(date);\n  }\n  if (date.toString() === INVALID_DATE) {\n    return INVALID_DATE;\n  }\n\n  const year = date.getFullYear();\n  const month = date.getMonth(); // month, 0-11\n  const date_ = date.getDate(); // date, 1-31\n  const hours = date.getHours(); // hour, 0-23\n  const minutes = date.getMinutes();\n  const seconds = date.getSeconds();\n\n  const matches = {\n    YYYY: String(year),\n    YY: String(year).slice(-2),\n    M: String(month + 1),\n    MM: String(month + 1).padStart(2, '0'),\n    D: String(date_),\n    DD: String(date_).padStart(2, '0'),\n    H: String(hours),\n    HH: String(hours).padStart(2, '0'),\n    m: String(minutes),\n    mm: String(minutes).padStart(2, '0'),\n    s: String(seconds),\n    ss: String(seconds).padStart(2, '0'),\n    // milliceconds\n    SSS: String(date.getMilliseconds()).padStart(3, '0'),\n    // 12-hour clock\n    h: String(hours % 12),\n    hh: String(hours % 12).padStart(2, '0'),\n    a: hours < 12 ? 'am' : 'pm',\n    A: hours < 12 ? 'AM' : 'PM'\n  };\n\n  return formatStr.replace(\n    /\\[([^\\]]+)]|(YY){1,2}|M{1,2}|D{1,2}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|SSS/g,\n    (match, $1) => $1 || matches[match]\n  );\n}\n\n/**\n * 安全解析json方法\n * @param {string} data 待解析字符串\n * @param {Object} defaultValue 解析失败默认返回值\n * @return {object} 解析后对象\n */\nexport function safeParseJson(data, defaultValue = null) {\n  try {\n    return JSON.parse(data);\n  } catch (e) {\n    console.error('safeParseJson: 参数解析失败', e);\n    return defaultValue;\n  }\n}\n\n/**\n * 内部方法返回价格\n * @ignore\n * @param {string|number} price 待格式化的价格\n * @param {string} [type] price单位默认yuan,可传入cent代表分\n * @returns {string} 格式化后的价格以元为单位\n */\nfunction formatPrice(price, type) {\n  price = Number(price);\n  if (isNaN(price)) {\n    return '0';\n  }\n  if (type !== 'cent') {\n    price = +`${price}e2`;\n  }\n  return (Math.floor(price) / 100).toString();\n}\n\n/**\n * 将传入的以分为单位的价格格式化为以元为单位的价格\n * @param {string|number} priceCent 待格式化的价格以分为单位\n * @returns {string} 格式化后的价格以元为单位\n */\nexport function priceCent(priceCent) {\n  return formatPrice(priceCent, 'cent');\n}\n\n/**\n * @example\n * price('3.035') 返回 ‘3.03’\n * price('35.41') 返回 ‘35.41’\n * 将传入的以元为单位的价格分以外的价格去除掉\n * @param {string|number} priceYuan 待格式化的价格以元为单位\n * @returns {string} 格式化后的价格以元为单位\n */\nexport function price(priceYuan) {\n  return formatPrice(priceYuan);\n}\n\n/**\n * @example\n * sales(9998) 返回 '9998'\n * sales(9999) 返回 '0.9万'\n * sales(99999) 返回 '9.9万'\n * sales(121000) 返回 '12万'\n * 格式化销售量\n * @param {string|number} sales 待格式化的销售量\n * @returns {string} 格式化之后的销售量数据\n */\nexport function sales(sales) {\n  sales = parseInt(sales, 10) || 0;\n  if (sales < 9999) {\n    return sales.toString();\n  }\n  if (sales <= 99999) {\n    const thousands = parseInt(sales / 1000, 10);\n    return `${parseInt(thousands / 10, 10)}.${thousands % 10}万`;\n  }\n  return `${parseInt(sales / 10000, 10)}万`;\n}\n\n/**\n * @example\n * round(1.275, 2);   // Returns 1.28\n * round(1.27499, 2); // Returns 1.27\n * round(1234.5678, -2);   // Returns 1200\n * round(1.2345678e+2, 2); // Returns 123.46\n * round(1.2345678e+2, \"2\"); // Returns 123.46\n * round(\"123.45\");        // Returns 123\n * @param {Number|string} value 待round的值\n * @param {Integer|string} precision 最多保留的小数点位数\n * @returns {Number} round返回值\n */\nexport function round(value, precision) {\n  if (typeof precision === 'undefined' || +precision === 0) {\n    return Math.round(value);\n  }\n  value = +value;\n  precision = +precision;\n  // 如果value不是number或者exp不是整数返回NaN\n  if (isNaN(value) || precision % 1 !== 0) {\n    return NaN;\n  }\n  const exp = Math.pow(10, precision);\n  // value*exp返回的值精度不正确\n  return Math.round(+`${value}e${precision}`) / exp;\n}\n\n/**\n * 格式化折扣信息\n * @param {number|string} discount 带格式化的折扣值\n * @returns {string} 格式化后的折扣值\n */\nexport function discount(discount) {\n  discount = parseFloat(discount) || 0;\n  discount = discount.toFixed(1);\n  if (discount === '0.0') {\n    discount = '0.1';\n  }\n  return discount;\n}\n","/**\n *\n * @ignore\n * @param {string} src base64入参\n * @returns {string} 移除非base64字符比如换行符之后的字符串\n */\nfunction tidyB64(src) {\n  return src.replace(/[^A-Za-z0-9+/]/g, '');\n}\n\n// Decode a string of data which has been encoded using base-64 encoding.\nfunction uniAtob(base64String) {\n  return process.env.BROWSER\n    ? window.atob(tidyB64(base64String))\n    : Buffer.from(base64String, 'base64').toString('ascii');\n}\n\n// Create a base-64 encoded ASCII string from a String.\nfunction uniBtoa(string) {\n  return process.env.BROWSER ? window.btoa(string) : Buffer.from(string, 'ascii').toString('base64');\n}\n\nfunction utf8Base64Encode(string) {\n  // see https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#Solution_4_%E2%80%93_escaping_the_string_before_encoding_it\n  if (process.env.BROWSER) {\n    return window.btoa(\n      encodeURIComponent(string).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n        return String.fromCharCode('0x' + p1);\n      })\n    );\n  }\n  return Buffer.from(string).toString('base64');\n}\n\nfunction utf8Base64Decode(base64String) {\n  if (process.env.BROWSER) {\n    return decodeURIComponent(\n      window\n        .atob(tidyB64(base64String))\n        .split('')\n        .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\n        .join('')\n    );\n  }\n  return Buffer.from(base64String, 'base64').toString();\n}\n\n/**\n * 对 string 进行 base64 编码\n *\n * @param {string} string 要被 base64 编码的字符串\n * @param {boolean} [asciiOnly=false] 是否只处理 ascii 情况（字符串只包含 ascii 码）\n * @returns {string} base64 编码后的字符串\n *\n * @example\n * encode('abc') // => \"YWJj\"\n */\nexport function encode(string, asciiOnly = false) {\n  // eslint-disable-next-line\n  if (!asciiOnly && /[^\\x00-\\x7F]/.test(string)) {\n    return utf8Base64Encode(string);\n  }\n  return uniBtoa(string);\n}\n\n/**\n * 解码 base64 编码的字符串\n *\n * @param {string} base64String base64 编码过的字符串\n * @param {boolean} [asciiOnly=false] 是否只处理 ascii 情况（源字符串只包含 ascii 码）\n * @returns {string} 解码得到的字符串\n *\n * @example\n * decode('YWJj') // => \"abc\"\n */\nexport function decode(base64String, asciiOnly = false) {\n  return asciiOnly ? uniAtob(base64String) : utf8Base64Decode(base64String);\n}\n","/**\n * @file replaceImgDomain.js\n * @author tenghu\n */\n\n/**\n * replaceImgDomain，替换已废弃图片域名为新域名\n * @param {string} imgUrl - 图片url\n * @returns {string} - 图片url\n * @example\n *\n * replaceImgDomain('https://t00img.yangkeduo.com/goods/images/2020-05-27/c428a469-9192-4fce-9521-a43da13fb9f9.jpeg') // => https://img.pddpic.com/goods/images/2020-05-27/c428a469-9192-4fce-9521-a43da13fb9f9.jpeg\n *\n */\nexport function replaceImgDomain(imgUrl = '') {\n  if (imgUrl.indexOf('t00img.yangkeduo.com') > -1) {\n    return imgUrl.replace('t00img.yangkeduo.com', 'img.pddpic.com');\n  }\n  if (imgUrl.indexOf('t16img.yangkeduo.com') > -1) {\n    return imgUrl.replace('t16img.yangkeduo.com', 'commimg.pddpic.com');\n  }\n  return imgUrl;\n}\n","/**\n * @file utils.js\n * @author tenghu\n */\nimport { forceHttps } from '../url';\nimport { encode, decode } from '../base64';\nimport { replaceImgDomain } from './replaceImgDomain';\n\nconst dropCDNParam = url => {\n  return url.split('?')[0];\n};\n\nconst IMAGE_PARAM_REG = /\\/image\\/(.+?)\\//;\nfunction getImageParamFromWatermark(watermark) {\n  const matchRes = IMAGE_PARAM_REG.exec(watermark);\n  return matchRes && matchRes[1];\n}\n/**\n * 限定watermark的宽度到width以内\n * @returns {string}\n */\nexport const resizeWatermarkWidth = ({ watermark, width }) => {\n  if (!width) {\n    return watermark;\n  }\n  const imageParam = getImageParamFromWatermark(watermark);\n  if (!imageParam) {\n    return watermark;\n  }\n  const resizedWatermarkUrl = decode(imageParam) + `?imageMogr2/thumbnail/${width}x`;\n  const newImageParam = encode(resizedWatermarkUrl);\n  return watermark.replace(imageParam, newImageParam);\n};\n\n/**\n * 拼接imageView2指令\n * 参考文档 [基本图片处理](https://cloud.tencent.com/document/product/460/6929)\n * @returns {string}\n */\nfunction buildImageView2(param) {\n  const { mode, width, height, format, quality, rQuality, lQuality } = param;\n  const result = [];\n  if (mode && (width || height)) {\n    result.push(`/${mode}`);\n    if (width) {\n      result.push(`/w/${width}`);\n    }\n    if (height) {\n      result.push(`/h/${height}`);\n    }\n  }\n  if (quality) {\n    result.push(`/q/${quality}`);\n  }\n  if (format) {\n    result.push(`/format/${format}`);\n  }\n  if (rQuality) {\n    result.push(`/rq/${rQuality}`);\n  }\n  if (lQuality) {\n    result.push(`/lq/${lQuality}`);\n  }\n  return result.length ? `imageView2${result.join('')}` : '';\n}\n\n/**\n * 拼接imageMogr2指令\n * @returns {string}\n */\nfunction buildImageMogr2(param) {\n  const { sharpen, thumbnail, radius, sigma, custom = '' } = param;\n  const commands = custom ? [custom] : [];\n  if (sharpen) {\n    commands.push(`/sharpen/${sharpen}`);\n  }\n  if (radius && sigma) {\n    commands.push(`/blur/${radius}x${sigma}`);\n  }\n  // thumbnail的功能很多，这里支持的方式是：指定width，高度等比缩放\n  if (thumbnail && thumbnail.width) {\n    commands.push(`/thumbnail/${thumbnail.width}x`);\n  }\n\n  return commands.length ? `imageMogr2${commands.join('')}` : '';\n}\n\n/**\n * 拼接watermark指令\n * 参考文档 [图片水印](https://cloud.tencent.com/document/product/460/6930)\n * @returns {string}\n */\nfunction buildImageWatermark(param) {\n  const { image, gravity, dx, dy, scatype, spcent } = param;\n  const result = [];\n  if (!image) {\n    return '';\n  }\n  let blogo = param.blogo;\n  if (!scatype && !spcent) {\n    blogo = blogo || 2;\n    result.push(`/blogo/${blogo}`);\n  }\n  // blogo和scatype指定一个\n  if (!blogo && scatype && spcent) {\n    result.push(`/scatype/${scatype}/spcent/${spcent}`);\n  }\n  if (image) {\n    result.push(`/image/${image}`);\n  }\n  if (gravity) {\n    result.push(`/gravity/${gravity}`);\n  }\n  if (dx) {\n    result.push(`/dx/${dx}`);\n  }\n  if (dy) {\n    result.push(`/dy/${dy}`);\n  }\n  return result.length ? `watermark/1${result.join('')}` : '';\n}\n\nconst isBoolean = value => typeof value === 'boolean';\n\nfunction getPrefitWidthParam(prefitWidth) {\n  return isBoolean(prefitWidth) && prefitWidth ? 400 : prefitWidth;\n}\n\nfunction getSharpenParam(sharpen) {\n  return isBoolean(sharpen) ? 70 : sharpen;\n}\n\nfunction getWatermarkParam(watermark) {\n  const param = typeof watermark === 'object' ? watermark : { image: watermark };\n  return {\n    addToFront: true,\n    ...param\n  };\n}\n\nfunction getBlurParam(blur = {}) {\n  let { radius, sigma } = blur;\n  if (radius || sigma) {\n    sigma = sigma || 1;\n    radius = radius || 1;\n  }\n  return { radius, sigma };\n}\n\n/**\n * @type {string}\n * @description 腾讯云支持管道操作\n * 参考文档 [管道操作符](https://cloud.tencent.com/document/product/460/15293)\n */\nconst PIPE_CHAR = '%7C';\n\nconst getSearchFromParam = param => {\n  const { webpEnable, quality, resizeWidth, plainWatermark, sharpen, prefitWidth, watermark, blur, imageMogr2 } = param;\n  const { radius, sigma } = blur;\n  let commands = [];\n\n  // 根据prefitWith缩放原图\n  commands.push(\n    buildImageMogr2({\n      thumbnail: { width: prefitWidth }\n    })\n  );\n\n  let imageWatermarkCommand = plainWatermark || buildImageWatermark(watermark);\n  // 根据prefitWidth缩放水印\n  if (prefitWidth) {\n    imageWatermarkCommand = resizeWatermarkWidth({\n      watermark: imageWatermarkCommand,\n      width: prefitWidth\n    });\n  }\n  if (watermark.addToFront) {\n    commands.push(imageWatermarkCommand);\n  }\n\n  commands.push(\n    buildImageMogr2({\n      sharpen,\n      radius,\n      sigma,\n      custom: imageMogr2\n    })\n  );\n\n  commands.push(\n    buildImageView2({\n      mode: '2',\n      width: resizeWidth,\n      quality,\n      format: webpEnable ? 'webp' : ''\n    })\n  );\n\n  if (!watermark.addToFront) {\n    commands.push(imageWatermarkCommand);\n  }\n\n  commands = commands.filter(command => !!command);\n  return commands.length ? '?' + commands.join(PIPE_CHAR) : '';\n};\n\nexport const DEFAULT_PARAM = { resizeWidth: 1300, quality: 80 };\nconst isHttp = url => url.indexOf('http') === 0 || url.indexOf('//') === 0;\n\n/**\n * 支持给图片url添加参数，开启腾讯云的图片处理服务\n *\n * 本函数只是一些简单功能的封装，更复杂的功能可以参考[腾讯云图片处理文档](https://cloud.tencent.com/document/product/460/6924)\n * @param {string} url - 图片url, 必填\n * @param {object} [param = { resizeWidth: 1300, quality: 80 }] 可选，默认值 { resizeWidth: 1300, quality: 80 }\n * @param {number} param.quality 图片质量，取值范围 0-100 ，默认值为原图质量；取原图质量和指定质量的最小值；\n * @param {object} param.blur 高斯模糊功能，图片格式为 gif 时，不支持该参数。\n * @param {number} param.blur.radius  radius 是模糊半径，取值范围为1-50\n * @param {number} param.blur.sigma   sigma 是正态分布的标准差，必须大于0\n * @param {string} param.imageMogr2 自定义imageMogr2指令，如`/thumbnail/100x100/cut/50x50x0x0`，更多功能参考[腾讯云图片处理文档](https://cloud.tencent.com/document/product/460/6924)\n * @param {string|object} param.watermark 如果传的是string，watermark被视为watermark.image。\n * @param {string} param.watermark.image 水印源图片地址，需要经过 URL 安全的 Base64 编码。\n * @param {string} param.watermark.gravity 文字水印位置，九宫格位置（[参考九宫格方位图](https://cloud.tencent.com/document/product/460/6930#1)），默认值 southeast\n * @param {number} param.watermark.dx 水平（横轴）边距，单位为像素，缺省值为0\n * @param {number} param.watermark.dy 垂直（纵轴）边距，单位为像素，默认值为0\n * @param {number} param.watermark.scatype 根据原图的大小，缩放调整水印图的大小：当 scatype 设置为1时，按原图的宽缩放当 scatype 设置为2时，按原图的高缩放当 scatype 设置为3时，按原图的整体面积缩放\n * @param {number} param.watermark.spcent与 scatype 搭配使用：当 scatype 设置为1时，该有效值为[1,1000]，单位为千分比 当 scatype 设置为2时，该有效值为[1,1000]，单位为千分比 当 scatype 设置为3时，该有效值为[1,250]，单位为千分比\n * @param {boolean} param.watermark.addToFront 控制先添加水印数据还是最后再添加水印数据\n * @param {string} param.plainWatermark 已CDN参数化水印字符串；如果传了plainWatermark，watermark参数失效；\n * @param {boolean|number} param.sharpen 图片锐化功能，value 为锐化参数值，取值范围为10-300间的整数。参数值越大，锐化效果越明显。推荐使用70。传true时，为默认值70.\n * @param {number} param.resizeWidth 限定图片的宽度最小值，会将图像宽度缩小至resizeWidth，高度自适应。\n * @param {boolean|number} param.prefitWidth 同时缩放plainWatermark水印和原图到prefitWidth值，这样无论水印的gravity是southwest、southeast还是south，实际上的效果都相当于south；传true时，为默认值400；\n * @param {boolean} param.webpEnable 是否支持webp格式\n * @param {boolean} [param.enableGifToWebp = false] 默认不允许转换gif为webp格式，详见issue #44\n * @returns {string} 添加好参数的url\n * @example\n *\n * generateCDNImageUrl('//t04img.yangkeduo.com/images/2018-04-14/bf681b1161280ea98532bc4aff6a1af5.png');\n * // => //t04img.yangkeduo.com/images/2018-04-14/bf681b1161280ea98532bc4aff6a1af5.png?imageView2/2/w/1300/q/80\n */\nexport function generateCDNImageUrl(url, param = DEFAULT_PARAM) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!url) {\n      throw new Error('generateCDNImageUrl: url必填');\n    }\n  } else {\n    url = url || '';\n  }\n\n  if (!isHttp(url)) {\n    return url;\n  }\n\n  url = replaceImgDomain(url);\n  url = forceHttps(url);\n\n  const hasQueryStr = url.split('?')[1];\n  if (hasQueryStr) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('generateCDNImageUrl: url带有query时，函数不生效');\n    }\n    return url;\n  }\n\n  const newParam = {\n    ...param,\n    sharpen: getSharpenParam(param.sharpen),\n    prefitWidth: getPrefitWidthParam(param.prefitWidth),\n    watermark: getWatermarkParam(param.watermark),\n    blur: getBlurParam(param.blur)\n  };\n\n  // gif 不使用锐化处理\n  if (url.indexOf('.gif') >= 0) {\n    newParam.sharpen = false;\n    // 默认不允许转换gif为webp格式，详见issue #44\n    newParam.webpEnable = newParam.enableGifToWebp ? newParam.webpEnable : false;\n  }\n\n  if (newParam.webpEnable) {\n    newParam.quality = newParam.quality || 70;\n  }\n  return dropCDNParam(url) + getSearchFromParam(newParam);\n}\n","/**\n * @file getCDNImgUrl.js\n * @author tenghu\n */\nconst DEFAULT_HOST = 'funimg.pddpic.com';\nconst PROTOCAL = 'https://';\n\n/**\n * getCDNImgUrl\n * @param {string} rootRelativeUrl - 相对于根的url，如 '/feedback/feedback_success.png'\n * @param {string} [host='funimg.pddpic.com'] - 自定义host\n * @returns string\n * @example\n *\n * getCDNImgUrl('/feedback/feedback_success.png') // => https://funimg.pddpic.com/feedback/feedback_success.png\n *\n */\nexport function getCDNImgUrl(rootRelativeUrl = '', host = DEFAULT_HOST) {\n  if (process.env.NODE_ENV !== 'production') {\n    const isValidRootRelativeUrl = /^(\\/[^/]+)/.test(rootRelativeUrl);\n    if (!isValidRootRelativeUrl) {\n      throw new Error(`rootRelativeUrl格式不对：${rootRelativeUrl}，请传入相对于根的url`);\n    }\n    const isValidHost = /^[^/]+$/.test(host);\n    if (!isValidHost) {\n      throw new Error(`host格式不对: ${host}`);\n    }\n  }\n\n  return `${PROTOCAL}${host}${rootRelativeUrl}`;\n}\n","/**\n * @file loadScript.js 浏览器加载异步脚本\n * @author fengchenyue\n */\n\n/**\n * 浏览器加载异步脚本\n * @param {string} src 脚本地址\n * @param {Object} attrs 脚本属性\n * @returns {Promise} 加载成功失败状态\n */\nexport function loadScript(src, attrs) {\n  if (!process.env.BROWSER) {\n    return Promise.reject(new Error('仅支持在浏览器端调用'));\n  }\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script');\n\n    script.onload = e => {\n      document.body.removeChild(script);\n      resolve(e);\n    };\n\n    script.onerror = e => {\n      document.body.removeChild(script);\n      reject(e);\n    };\n\n    attrs && Object.keys(attrs).forEach(key => script.setAttribute(key, attrs[key]));\n    script.src = src;\n\n    document.body.appendChild(script);\n  });\n}\n","/**\n * 生成 URL 友好的唯一 ID。\n *\n * 本方法使用非安全可预测的随机数生成器。默认情况下，ID 的长度为 21 位。\n *\n * @param {number} [size=21] 指定生成 ID 的长度\n *\n * @returns {string} 生成的随机字符串（ID）\n *\n * @example\n * nanoid() //=> \"vux6ytrz7wm9z2x80dmzj\"\n */\nexport function nanoid(size = 21) {\n  let id = '';\n  while (id.length < size) {\n    id += Math.random()\n      .toString(36)\n      .slice(2);\n  }\n  return id.slice(0, size);\n}\n","const networkTypeMap = {\n  unknown: 0,\n  wifi: 1,\n  '2g': 2,\n  '3g': 3,\n  '4g': 4\n};\nconst DEFAULT_TYPE_STRING = 'unknown';\nconst DEFAULT_TYPE = networkTypeMap[DEFAULT_TYPE_STRING];\n\n/**\n * @returns {boolean}\n */\nfunction hasWeiXinAPI() {\n  return typeof window === 'object' && window.WeixinJSBridge && window.wx && window.wx.getNetworkType;\n}\n\n/**\n * @returns {Promise.<any>}\n */\nfunction wechatGetNetworkType() {\n  return new Promise(resolve => {\n    window.wx.ready(function() {\n      window.wx.getNetworkType({\n        success(res) {\n          resolve(res && res.networkType);\n        },\n        fail() {\n          resolve(DEFAULT_TYPE_STRING);\n        }\n      });\n    });\n  });\n}\n\n/**\n * @returns {Promise.<any>}\n */\nfunction getNetWorkTypeBase() {\n  return new Promise(resolve => {\n    if (!hasWeiXinAPI()) {\n      resolve(typeof navigator === 'object' && navigator.connection && navigator.connection.effectiveType);\n      return;\n    }\n    return resolve(wechatGetNetworkType());\n  });\n}\n\n/**\n * 获取客户端网络类型\n * 注：该方法精准度有限，目前主要用于一些数据上报场景；见 issue #21\n * @returns {Promise<number>} - 网络类型 0: unknow, 1: wifi, 2: 2g, 3: 3g, 4: 4g\n * @example\n *\n * getNetWorkType().then(networkType => console.log(networkType)); // => 4\n */\nexport function getNetWorkType() {\n  return getNetWorkTypeBase().then(networkType => {\n    return networkTypeMap[networkType] || DEFAULT_TYPE;\n  });\n}\n","/**\n * @file page.js page相关功能\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { getReferPageContext } from '@pdd/native-util';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { parseQuery } from './url';\nimport { nanoid } from './nanoid';\n\n/**\n * 获取全部的 refer 信息，先拿url上的，app环境的话再拿app内的；\n * refer_ 或者 _ex_ 开头都被认为是 refer 信息, _ex_ 开头的会变转成 refer_ 前缀返回；\n *\n * @return {Promise<Object>}\n */\nexport function getReferInfo() {\n  const query = parseQuery(location.search);\n  const queryRefer = Object.entries(query).reduce((result, [key, value]) => {\n    if ((key.startsWith('refer_') || key.startsWith('_ex_')) && value) {\n      // _ex_ 转为 refer_\n      key = key.startsWith('_ex_') ? `refer_${key.slice(4)}` : key;\n      result[key] = value;\n    }\n    return result;\n  }, {});\n\n  if (getCurrentPlatform().isNativePlatform) {\n    return getReferPageContext()\n      .catch(() => ({}))\n      .then(refer => Object.assign(queryRefer, refer));\n  }\n\n  return Promise.resolve(queryRefer);\n}\n\n/**\n * 返回页面 refer pageInfo 信息\n *\n * @return Promise<{{ refer_page_sn?:string, refer_page_id?:string, refer_page_name?:string }}>\n */\nexport function getReferPageInfo() {\n  // eslint-disable-next-line camelcase\n  return getReferInfo().then(({ refer_page_sn, refer_page_id, refer_page_name }) => {\n    return { refer_page_sn, refer_page_id, refer_page_name };\n  });\n}\n\n/**\n * 从 url search query 上获取除 refer_ 前缀之外的扩展信息，规则如下：\n * 1. _x_ 开头的参数\n * 2. xcx_trace_id, xcx_version 小程序透传参数\n * 3. _ex_ 转成 _x_ (isIncludeTransferParams 为true时)\n * 4. msgid 转成 _x_msgid (isIncludeTransferParams 为true时)\n * 5. refer_share_id 转成_x_share_id (isIncludeTransferParams 为true时)\n *\n * @param {boolean} [isIncludeTransferParams=false] 是否包括页面透传信息\n * @return {Object} 扩展信息对象\n */\nexport function getExtendInfoFromQuery(isIncludeTransferParams) {\n  const query = parseQuery(location.search);\n  const extendParams = {};\n  for (const key in query) {\n    // 防止_x_旧参数覆盖新参数\n    if (extendParams[key]) {\n      continue;\n    }\n\n    // _x_开头的参数，xcx_trace_id, xcx_version 小程序透传参数\n    if (key.startsWith('_x_') || key === 'xcx_trace_id' || key === 'xcx_version') {\n      extendParams[key] = query[key];\n    } else if (isIncludeTransferParams && key.startsWith('_ex_')) {\n      // _ex_转成_x_(只在跳转时修改)\n      const newKey = key.replace('_ex_', '_x_');\n      extendParams[newKey] = query[key];\n    } else if (isIncludeTransferParams && key === 'msgid') {\n      // msgid 转成 _x_msg_id (只在跳转时修改)\n      extendParams['_x_msgid'] = query[key];\n    } else if (isIncludeTransferParams && key === 'refer_share_id') {\n      // refer_share_id 转成 _x_share_id (只在跳转时修改)\n      extendParams['_x_share_id'] = query[key];\n    }\n  }\n  return extendParams;\n}\n\n/**\n * 基于 pageSN 创建一个唯一的 page id\n *\n * @param {number | string} pageSN\n * @return {string}\n */\nexport function createPageId(pageSN) {\n  return `${pageSN}_${Date.now()}_${nanoid(10)}`;\n}\n","/**\n * 设置body的scrollTop值\n * @param {number} scrollTop -\n */\nexport function setBodyScrollTop(scrollTop) {\n  document.body.scrollTop = scrollTop;\n  if (document.documentElement) {\n    document.documentElement.scrollTop = scrollTop;\n  }\n}\n\n/**\n * 获取body的scrollTop值\n * @returns {number}\n */\nexport function getBodyScrollTop() {\n  return document.body.scrollTop || document.documentElement.scrollTop || 0;\n}\n","/**\n * @file url.js, 一些url相关的函数封装，支持浏览器和node\n * @author zongheng\n */\nimport { memoize, throwErrorAsync } from './util';\n\n/**\n * 判断url是否为绝对地址\n *\n * @param {string} url 待校验的url\n * @return {boolean}\n */\nexport function isAbsoluteUrl(url) {\n  return /^[a-z][a-z\\d+.-]*:/.test(url);\n}\n\n/**\n * 基于键值对对象序列化出一个查询参数字符串，不带 '?'\n *\n * @param {Object} query 待传入的键值对\n * @return {string} 序列化后的查询参数字符串\n */\nexport function buildQuery(query) {\n  return Object.entries(query)\n    .reduce((result, [key, val]) => {\n      return val == null ? result : result + '&' + encodeURIComponent(key) + '=' + encodeURIComponent(String(val));\n    }, '')\n    .slice(1);\n}\n\n/**\n * @ignore\n * @private\n * 用于仅针对对一个分隔符进行分割\n * @param string 用于split的字符串\n * @param separator 用于split的分隔符\n * @return {*[]} split之后返回的字符串\n */\nfunction splitOnFirst(string, separator) {\n  if (separator === '') {\n    return [string];\n  }\n\n  const separatorIndex = string.indexOf(separator);\n\n  if (separatorIndex === -1) {\n    return [string];\n  }\n\n  return [string.slice(0, separatorIndex), string.slice(separatorIndex + separator.length)];\n}\n\nconst memoizedParseQuery = memoize(search => {\n  // 增加缓存逻辑\n  search = search[0] === '?' ? search.slice(1) : search;\n  return search.split('&').reduce((result, item) => {\n    if (item) {\n      const [key, value = ''] = splitOnFirst(item, '=');\n      try {\n        result[decodeURIComponent(key)] = decodeURIComponent(value);\n      } catch (e) {\n        throwErrorAsync(e);\n      }\n    }\n\n    return result;\n  }, {});\n});\n\n/**\n * 将传入的查询字符串解析为一个查询键值对象\n *\n * @param {string} search 查询参数字符串\n * @return {Object} 返回一个不为空的解析后的查询键值对象\n */\nexport function parseQuery(search) {\n  return { ...memoizedParseQuery(search) };\n}\n\n/**\n * 获取带查询参数和哈希的url路径\n *\n * @example\n *\n * // 输出 /a.html?t=1#h=1\n * const url = getPathnameWithSearchAndHash('http://yangkeduo.com/a.html?t=1#h=1');\n *\n * // 输出 /a.html?t=1#h=1\n * const url = getPathnameWithSearchAndHash('a.html?t=1#h=1');\n *\n * @param {string} url 待解析的url字符串\n * @return {string} 带查询参数和哈希的url路径\n */\nexport function getPathnameWithSearchAndHash(url) {\n  // URL object 不能正确处理 amcomponent 协议，单独处理\n  if (url.indexOf('amcomponent://') === 0) {\n    const index = url.indexOf('/', 'amcomponent://'.length);\n    return index === -1 ? '/' : url.slice(index);\n  }\n\n  if (isAbsoluteUrl(url)) {\n    const { pathname, search, hash } = getURLObject(url);\n    return pathname + search + hash;\n  }\n\n  return url.charAt(0) === '/' ? url : '/' + url;\n}\n\nfunction getURLObject(url) {\n  if (typeof URL === 'function' && !process.env.BROWSER) {\n    return new URL(url);\n  }\n\n  const a = document.createElement('a');\n  a.href = url;\n\n  return a;\n}\n\n/**\n * 将searchs转化为queryString Append到url上同时覆盖url上原有的querystring中同名属性\n * @example\n * // '/personal.html?a=2&b=3'\n * const url = appendQuery({ a: 2, b: 3 }, '/personal.html?a=1')\n *\n * @param {object} searchs 用于覆盖url上search值的键值对\n * @param {string} [url=''] url 传入的原url\n * @return {string}\n */\nexport function appendQuery(searchs, url) {\n  url = url || '';\n  const urlHash = url.split('#')[1] || '';\n  const urlQuerys = parseUrlQuery(url);\n  const newSearchs = Object.assign({}, urlQuerys, searchs);\n  const queryString = buildQuery(newSearchs);\n  const rawUrl = url.split('?')[0];\n  let resultUrl = queryString ? [rawUrl, queryString].join('?') : rawUrl;\n  resultUrl = urlHash ? [resultUrl, urlHash].join('#') : resultUrl;\n  return resultUrl;\n}\n\n/**\n * parseUrlQuery 获取url字符串中参数\n * @param {string} url 待获取query对象的url\n * @return {object} 返回的query对象\n */\nexport function parseUrlQuery(url) {\n  const splitHash = url.split('#');\n  const noHashTag = splitHash[0] || '';\n  const parts = noHashTag.split('?');\n  const query = parts[1] || '';\n  return parseQuery(query);\n}\n\n/**\n * 供client端使用的方法用于补全url域名,如果是组件包环境则返回相对路径，sever端返回传入的url\n * @param {string} url 待补全的url\n * @param {object} queries 用于覆盖url上query值的键值对\n * @return {string} 补全后的url\n */\nexport function resolveFullUrl(url, queries) {\n  const getFullUrl = url => {\n    if (!process.env.BROWSER) {\n      console.warn('在服务端调用该方法将返回传入的url');\n      return url;\n    }\n    // 当前是组件包环境的话返回相对路径\n    if (window.location.href.indexOf('amcomponent://') === 0) {\n      return getPathnameWithSearchAndHash(url);\n    }\n    const a = document.createElement('a');\n    a.href = url;\n    return a.href;\n  };\n  const fullUrl = getFullUrl(url);\n  return queries ? appendQuery(queries, fullUrl) : fullUrl;\n}\n\n/**\n * 强制转成https\n * @param {string} url\n * @returns {string} 转成https协议的url\n * @example\n *\n * http => https\n * forceHttps('http://t04img.yangkeduo.com/images/2018-04-14/bf681b1161280ea98532bc4aff6a1af5.png');\n * // => https://t04img.yangkeduo.com/images/2018-04-14/bf681b1161280ea98532bc4aff6a1af5.png\n *\n * 相对协议 => https\n * forceHttps('//t04img.yangkeduo.com/images/2018-04-14/bf681b1161280ea98532bc4aff6a1af5.png');\n * // => https//t04img.yangkeduo.com/images/2018-04-14/bf681b1161280ea98532bc4aff6a1af5.png\n */\nexport function forceHttps(url) {\n  return url.replace(/^(http:\\/\\/|\\/\\/)/, 'https://');\n}\n\n/**\n * @deprecated 即将废弃，请使用forceHttps\n * @param {string} url\n * @returns {string} 兜底后的url\n */\nexport function httpsSafe(url) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('httpsSafe即将废弃，请使用forceHttps');\n  }\n  return forceHttps(url);\n}\n","/**\n *\n * @param {Function} func func的输出将会被缓存\n * @param {number} [cacheSize] cacheSize 缓存的key数量\n * @param {Function} [resolver] 用于生成cacheKey\n * @return {Function} Returns the new memoized function.\n */\nexport function memoize(func, cacheSize = 100, resolver) {\n  if (typeof func !== 'function' || (resolver != null && typeof resolver !== 'function')) {\n    throw new TypeError('Expected a function');\n  }\n  const cache = [];\n  const cachesKeys = [];\n  return function(...args) {\n    const key = resolver ? resolver.apply(this, args) : args[0];\n    const index = cachesKeys.indexOf(key);\n    if (index > -1) {\n      return cache[index];\n    }\n    const result = func.apply(this, args);\n    cache.push(result);\n    cachesKeys.push(key);\n    if (cache.length > cacheSize) {\n      // 移除最早添加的cache\n      cachesKeys.shift();\n      cache.shift();\n    }\n    return result;\n  };\n}\n\n/**\n * 异步抛出异常，不会阻断当前流程，如果有引入 @pdd/error-logger，则会被搜集并上报\n * @param {Error} error 异常对象\n * @param {Object} [extraInfo] 需要上报的额外信息\n */\nexport function throwErrorAsync(error, extraInfo) {\n  setTimeout(() => {\n    error.extraInfo = extraInfo;\n    throw error;\n  });\n}\n\n/**\n * 节流，leading=true, trailing=false\n * @param {Function} func 被节流方法\n * @param {number} wait 间隔时间，单位ms\n * @returns {Function}\n */\nexport function throttle(func, wait) {\n  let result;\n  let previous = 0;\n\n  return function() {\n    const now = Date.now();\n    if (now - previous >= wait) {\n      previous = now;\n      result = func.apply(this, arguments);\n    }\n    return result;\n  };\n}\n\n/**\n * 超时reject\n * @param {Promise} promise 目标\n * @param {number} time 超时时间，单位ms\n * @param {string} [errMsg] 错误信息\n * @return {Promise} 带超时的promise\n */\nexport function rejectOnTimeout(promise, time, errMsg) {\n  return new Promise((res, rej) => {\n    setTimeout(() => {\n      rej(new Error(errMsg || `Timeout: cost over ${time}ms`));\n    }, time);\n\n    promise.then(res).catch(rej);\n  });\n}\n","export default function (value) {\n  return value && typeof value === 'object';\n}\n","export const DEFAULT_RETRY_LIMIT = 3; // 默认重试次数上限\nexport const BGP_IPS = ['49.234.253.21', '212.129.222.108'];\nexport const DEFAULT_USE_IP_FALLBACK = true;\n\n/**\n * 备用域名桶数配置\n * key 是备用域名\n * value 桶数，备用域名的应用概率：桶数/备用域名桶数之和\n * @typedef {Object.<string, number>} BackupDomainConfig\n */\n\n/**\n * @type {Object.<string, BackupDomainConfig>}\n */\nexport const DEFAULT_BACKUP_DOMAIN_CONFIG_MAP = {\n  'dl.pddpic.com': { 'dl-1.pddpic.com': 50, 'dl-2.pddpic.com': 50 },\n  't00img.yangkeduo.com': {\n    'img-1.pddpic.com': 30,\n    'img-2.pddpic.com': 30,\n    'img-3.pddpic.com': 20,\n    'img-4.pddpic.com': 20\n  },\n  't13img.yangkeduo.com': {\n    'promotion-1.pddpic.com': 50,\n    'promotion-2.pddpic.com': 30,\n    'promotion-3.pddpic.com': 20\n  },\n  't20img.yangkeduo.com': {\n    'avatar2-1.pddpic.com': 50,\n    'avatar2-2.pddpic.com': 50\n  },\n  't22img.yangkeduo.com': {\n    'review-1.pddpic.com': 50,\n    'review-2.pddpic.com': 50,\n    'review-3.pddpic.com': 0\n  },\n  'images.pinduoduo.com': {\n    'images-1.pinduoduo.com': 60,\n    'images-2.pinduoduo.com': 40\n  },\n  'img.pddpic.com': {\n    'img-1.pddpic.com': 30,\n    'img-2.pddpic.com': 30,\n    'img-3.pddpic.com': 20,\n    'img-4.pddpic.com': 20\n  },\n  't04img.yangkeduo.com': { 't04img-b.yangkeduo.com': 100 },\n  'commimg.pddpic.com': {\n    'commimg-1.pddpic.com': 50,\n    'commimg-2.pddpic.com': 50\n  },\n  'promotion.pddpic.com': {\n    'promotion-1.pddpic.com': 50,\n    'promotion-2.pddpic.com': 30,\n    'promotion-3.pddpic.com': 20\n  },\n  'funimg.pddpic.com': {\n    'funimg-1.pddpic.com': 50,\n    'funimg-2.pddpic.com': 50\n  },\n  'avatar.pddpic.com': { 'avatar-b.pddpic.com': 100 },\n  'avatar2.pddpic.com': {\n    'avatar2-1.pddpic.com': 50,\n    'avatar2-2.pddpic.com': 50\n  },\n  'review.pddpic.com': {\n    'review-1.pddpic.com': 50,\n    'review-2.pddpic.com': 50,\n    'review-3.pddpic.com': 0\n  }\n};\n","/**\n * @file Config\n * @description\n * 默认配置，接受并校验自定义配置\n */\nimport recordError from '../utils/recordError';\nimport isNumber from '../utils/isNumber';\nimport { isObject } from '@pdd/cui-util';\nimport { DEFAULT_BACKUP_DOMAIN_CONFIG_MAP, DEFAULT_RETRY_LIMIT, DEFAULT_USE_IP_FALLBACK, BGP_IPS } from './constants';\n\nconst isBoolean = value => Object.prototype.toString.call(value) === '[object Boolean]';\n\nfunction recordFormatError(value, msg) {\n  value !== undefined && recordError({ errorMsg: msg, payload: { value: JSON.stringify(value) } });\n}\n\nfunction formatBackupDomainConfigMap(backupDomainConfigMap) {\n  if (!isObject(backupDomainConfigMap)) {\n    recordFormatError(backupDomainConfigMap, 'cui-image: 配置错误，backupDomainConfigMap需为object对象');\n    return DEFAULT_BACKUP_DOMAIN_CONFIG_MAP;\n  }\n\n  const result = {};\n  for (let host in backupDomainConfigMap) {\n    if (!isObject(backupDomainConfigMap[host])) {\n      recordFormatError(\n        backupDomainConfigMap,\n        `cui-image: 配置错误，backupDomainConfigMap的${host}需为object对象`\n      );\n      result[host] = {};\n    } else {\n      result[host] = backupDomainConfigMap[host];\n    }\n  }\n  return result;\n}\n\nfunction formatRetryLimit(retryLimit) {\n  if (!isNumber(retryLimit) || retryLimit < 0) {\n    recordFormatError(retryLimit, 'cui-image: 配置错误，retryLimit需为大于等于0的数字');\n    return DEFAULT_RETRY_LIMIT;\n  }\n  return retryLimit;\n}\n\nfunction formatUseIpFallback(useIpFallback) {\n  if (!isBoolean(useIpFallback)) {\n    recordFormatError(useIpFallback, 'cui-image: 配置错误，useIpFallback需为boolean');\n    return DEFAULT_USE_IP_FALLBACK;\n  }\n  return useIpFallback;\n}\n\nfunction formatCustomConfig(rawConfig) {\n  if (!isObject(rawConfig)) {\n    recordFormatError(rawConfig, 'cui-image: 配置错误，自定义配置需为object对象');\n    return {\n      backupDomainConfigMap: DEFAULT_BACKUP_DOMAIN_CONFIG_MAP,\n      useIpFallback: DEFAULT_USE_IP_FALLBACK,\n      retryLimit: DEFAULT_RETRY_LIMIT\n    };\n  }\n\n  return {\n    backupDomainConfigMap: formatBackupDomainConfigMap(rawConfig.backupDomainConfigMap),\n    useIpFallback: formatUseIpFallback(rawConfig.useIpFallback),\n    retryLimit: formatRetryLimit(rawConfig.retryLimit)\n  };\n}\n\nexport default class Config {\n  constructor(rawConfig) {\n    const customConfig = formatCustomConfig(rawConfig);\n\n    this._backupDomainConfigMap = customConfig.backupDomainConfigMap;\n    this._useIpFallback = customConfig.useIpFallback;\n    this._retryLimit = customConfig.retryLimit;\n  }\n\n  getBackupDomainConfigMap() {\n    return this._backupDomainConfigMap;\n  }\n  useIpFallback() {\n    return this._useIpFallback;\n  }\n  getRetryLimit() {\n    return this._retryLimit;\n  }\n  getBgpIps() {\n    return BGP_IPS;\n  }\n\n  /**\n     * @param {string} host -\n     * @returns {import('../constants').BackupDomainConfig}\n     */\n  getBackupDomainConfig(host) {\n    const backupDomainConfigMap = this._backupDomainConfigMap;\n    const domainConfig = backupDomainConfigMap[host];\n    return isObject(domainConfig) ? domainConfig : {};\n  }\n  /**\n     * 查询传入backupDomain的原域名，没有则否则返回''\n     * @param {string} backupDomain -\n     * @returns {string} originHost或者''\n     */\n  getOriginHost(backupDomain) {\n    const backupDomainConfigMap = this._backupDomainConfigMap;\n    for (let originHost in backupDomainConfigMap) {\n      const backupDomainConfig = backupDomainConfigMap[originHost];\n\n      if (backupDomain in backupDomainConfig) {\n        return originHost;\n      }\n    }\n    return '';\n  }\n}\n","export default function (value) {\n  return Object.prototype.toString.call(value) === '[object Number]' && !isNaN(value);\n}\n","/**\n * @file getConfig\n * @description\n * 支持从window读取用户自定义配置\n */\nimport Config from './Config';\nimport getConfigFromWindow from './utils/getConfigFromWindow';\n\nlet config;\nexport default function getConfig() {\n  if (!config) {\n    config = new Config(getConfigFromWindow());\n  }\n  return config;\n}\n","import { isObject } from '@pdd/cui-util';\nimport recordError from './recordError';\n\nconst GLOBAL_CONFIG_KEY = '__CDN_IMG__';\n\nexport default function getConfigFromWindow() {\n  if (!process.env.BROWSER) {\n    return;\n  }\n\n  const globalConfig = window[GLOBAL_CONFIG_KEY];\n  if (window.hasOwnProperty(GLOBAL_CONFIG_KEY) && !isObject(globalConfig)) {\n    const errorMsg = `cui-image: window.${GLOBAL_CONFIG_KEY}的数据不合法`;\n    recordError({\n      errorMsg,\n      payload: { value: globalConfig },\n      error: new Error(errorMsg)\n    });\n  }\n\n  return globalConfig;\n}\n","import { parseQuery, buildQuery } from '@pdd/core-util';\n\nexport default function updateSearch(search, newQuery) {\n  const query = search ? parseQuery(search) : {};\n  return `?${buildQuery({\n    ...query,\n    ...newQuery\n  })}`;\n}\n","/**\n * @file getFallbackUrl.js\n * @author tenghu\n * @description\n * 应用场景：图片加载失败后，获取重试的fallback url\n */\nimport getConfig from './getConfig';\nimport FallbackUrlCalculator from './FallbackUrlCalculator';\n\nlet calculator;\nexport default function getFallbackUrl(url, retriedTimes) {\n  if (!calculator) {\n    calculator = new FallbackUrlCalculator(getConfig());\n  }\n  return calculator.getFallbackUrl(url, retriedTimes);\n}\n","/**\n * @file FallbackUrlCalculatar.js\n * @author tenghu\n * @description\n * 应用场景：图片加载失败后，获取重试的 url\n */\nimport { parseUrlQuery } from '@pdd/core-util';\nimport updateSearch from '../utils/updateSearch';\nimport getRandomDomain from './getRandomDomain';\n\nexport default class FallbackUrlCalculator {\n  constructor(config) {\n    this._config = config;\n  }\n  /**\n     * 1. 如果不能使用IP，则返回原host\n     * 2. 如果host已经是IP，则取另外的IP\n     * 3. 如果host不是IP，则随机取一个IP\n     * @param {string} host -\n     */\n  _getBackupIp(host) {\n    if (!this._config.useIpFallback()) {\n      return host;\n    }\n    const ips = this._config.getBgpIps().filter(ip => ip !== host);\n    const randomIndex = Math.floor(Math.random() * ips.length);\n    return ips[randomIndex];\n  }\n\n  _isBgpIp(host) {\n    return this._config.getBgpIps().includes(host);\n  }\n\n  /**\n     * 选取host的备用域名，没有则返回''\n     * @param {string} host -\n     * @param {string} excludeDomain - 需要过滤的域名\n     * @returns {string} - 备用域名 or ''\n     */\n  _getBackupDomain(host, excludeDomain) {\n    const domainConfig = this._config.getBackupDomainConfig(host);\n    return getRandomDomain({ ...domainConfig, [excludeDomain]: 0 });\n  }\n\n  /**\n     * 取原始host:\n     * 1. 如果当前是bgpIp，则取query里host的值\n     * 2. 如果当前是备用域名，则从配置中取值\n     * 3. 当前就是原始host\n     */\n  _getOriginHost(a) {\n    const currentHost = a.host;\n    const isBgpIp = this._isBgpIp(currentHost);\n    const queries = parseUrlQuery(a.search);\n    return (isBgpIp && queries.host) || this._config.getOriginHost(currentHost) || currentHost;\n  }\n\n  /**\n     * 获取新的host：\n     * 1. 前两次调用\n     *   1.1 如果有备用域名，则替换为备用域名\n     *      - 如果已经是备用域名，则换成其他备域名\n     *   1.2 否则替换为BGP IP\n     * 2. 第三次及以上调用\n     *   2.1 直接替换为BGP IP\n     *      - 如果已经是BGP IP，则替换为其他的BGP IP\n     */\n  _getNewHost(originHost, currentHost, retriedTimes) {\n    let backupDomain;\n    if (retriedTimes < 2) {\n      backupDomain = this._getBackupDomain(originHost, currentHost);\n    }\n    return backupDomain || this._getBackupIp(currentHost);\n  }\n\n  /**\n     * 用于图片加载失败后，获取重试的fallback url\n     * @param {string} url - 原图片url\n     * @param {number} [retriedTimes = 0] - 已经重试的次数，比如第一次重试时传入0\n     * @returns {string} - fallback url\n     */\n  getFallbackUrl(url = '', retriedTimes = 0) {\n    const a = document.createElement('a');\n    a.href = url;\n\n    const originHost = this._getOriginHost(a);\n    const newHost = this._getNewHost(originHost, a.host, retriedTimes);\n\n    // cdn要求，host为BGP IP时，换成http协议，且query里需带上host指向原域名，否则请求不到图片\n    if (this._isBgpIp(newHost)) {\n      a.search = updateSearch(a.search, {\n        host: originHost\n      });\n      a.protocol = 'http:';\n    }\n\n    a.host = newHost;\n    return a.href;\n  }\n}\n","import getDomainByBucketId from '../utils/getDomainByBucketId';\n/**\n * 根据桶配置，随机选择一个备用域名\n * @param {import('../Config/constants').BackupDomainConfig} config - 备用域名桶配置\n * @returns {string} - 备用域名 or ''\n */\nexport default function getRandomDomain(config) {\n  const bucketId = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n  return getDomainByBucketId(config, bucketId);\n}\n","import { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getCurrentPlatform, compareVersion, PLATFORM } from '@pdd/platform-util';\nimport recordError from './recordError';\n\nlet useImageSdk;\nexport default async function checkImageProtocol() {\n  if (typeof useImageSdk !== 'undefined') {\n    return useImageSdk;\n  }\n  const { platform, version } = getCurrentPlatform();\n  if (platform !== PLATFORM.PddIOS || compareVersion(version, '5.87.0') < 0) {\n    useImageSdk = false;\n    return useImageSdk;\n  }\n  try {\n    const imageProtocol = await invokeBridgeCallNativeFun('WebScene', 'checkImageProtocol');\n    useImageSdk = imageProtocol.use_image_sdk;\n    return useImageSdk;\n  } catch (e) {\n    recordError({ error: e });\n  }\n}\n","/**\n * 根据各域名的桶数配置，选择指定桶号对应的域名\n * @param {import('../Config/constantss').BackupDomainConfig} domainBucketsConfig - 备用域名桶配置\n * @param {number} bucketId - 桶id，如果大于桶总数，则取余数作为新的桶id\n * @returns {string} - 备用域名 or ''\n */\nexport default function getDomainByBucketId(domainBucketsConfig, bucketId) {\n  const domains = Object.keys(domainBucketsConfig);\n  const totalBuckets = domains.reduce((acc, domain) => {\n    return acc + domainBucketsConfig[domain];\n  }, 0);\n  bucketId = bucketId % totalBuckets;\n  let currentBuckets = 0;\n  for (let domain in domainBucketsConfig) {\n    currentBuckets += domainBucketsConfig[domain];\n    if (bucketId < currentBuckets) {\n      return domain;\n    }\n  }\n  return '';\n}\n","/**\n * 检查url是否是http链接\n * @param url\n * @returns {boolean}\n */\nexport default function isHttp(url) {\n  if (typeof url !== 'string') {\n    return false;\n  }\n  return ['http://', 'https://', '//'].some(protocol => url.startsWith(protocol));\n}\n","import { throwErrorAsync } from '@pdd/core-util';\n\n/**\n * 客户端上报错误信息\n * @param {object} options\n * @param {string} options.errorMsg - 错误消息\n * @param {object} [options.payload] - 额外上报数据\n * @param {Error} [options.error] - 有此对象时，会序列化后放到 payload 再一并上报\n */\nexport default function recordError({ errorMsg, payload, error }) {\n  if (!process.env.BROWSER) {\n    return;\n  }\n  const throwError = error || new Error(errorMsg);\n  throwErrorAsync(throwError, { payload, error_msg: errorMsg });\n}\n","/**\n * @file renderClient.js\n * @author tenghu\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n/**\n * renderClient，客户端渲染，接口与ReactDOM.render一致。\n * 内部封装ReactDOM.render，如果采用isomorphic-style-loader处理组件样式，需要渲染时收集并注入css到document\n * @param {element} content\n * @param {HTMLElement} root\n */\nexport default function renderClient(content, root) {\n  if (!process.env.BROWSER) {\n    return; // 不支持服务器端渲染\n  }\n  // eslint-disable-next-line no-undef\n  if (typeof USE_ISO_STYLE_LOADER !== 'undefined' && USE_ISO_STYLE_LOADER === true) {\n    const StyleContext = require('isomorphic-style-loader/StyleContext');\n    const insertCss = (...styles) => {\n      const removeCss = styles.map(style => style._insertCss());\n      return () => removeCss.forEach(dispose => dispose());\n    };\n    ReactDOM.render(<StyleContext.Provider value={{ insertCss }}>{content}</StyleContext.Provider>, root);\n  } else {\n    ReactDOM.render(content, root);\n  }\n}\n","/**\n * @file withStyles\n * @author tenghu\n * @description\n * 自定义withStyles：\n * 1. 默认使用style-loader，这时withStyles啥也不用做\n * 2. 如果开启isomorphic-style-loader，则替换withStyles为isomorphic-style-loader/withStyles\n */\n\n// withStyles函数，默认啥也不做，只需与isomorphic-style-loader/withStyles的接口一致\nlet withStyles = (styles) => {\n  const result = Component => Component;\n  // client端，开发环境下, 检测是否接入CSS Modules构建配置\n  if (process.env.NODE_ENV !== 'production' && process.env.BROWSER) {\n    const userAgent = ((typeof navigator !== 'undefined') && navigator.userAgent) || '';\n    const isJSDom = userAgent.includes('jsdom');\n    if (isJSDom) { // 忽略测试环境\n      return result;\n    }\n\n    const isUsingCSSModules = Object.keys(styles).length > 0; // 使用CSS Modules构建时，样式文件会对外暴露className\n    if (!isUsingCSSModules) {\n      console.error('iso.scss的构建配置有误，需要使用CSS Modules！！！ https://fweb.pdd.net/docs/core-ui/');\n    }\n  }\n  return result;\n};\n\n// eslint-disable-next-line no-undef\nif (typeof USE_ISO_STYLE_LOADER !== 'undefined' && USE_ISO_STYLE_LOADER === true) {\n  withStyles = require('isomorphic-style-loader/withStyles');\n}\n\nexport default withStyles;\n","import { sendImprMetrics } from '@pdd/metrics';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { registerWhenVisibility, isWebviewInAppTabs } from './utils';\nimport 'intersection-observer';\n\nconst platform = process.env.BROWSER ? getCurrentPlatform() : {};\nconst MIN_RATIO_THRESHOLD = 0.75;\nconst OBSERVER_CONFIGS = {\n  rootMargin: '0px',\n  threshold: [MIN_RATIO_THRESHOLD]\n};\nconst IMPR_DELAY = 300;\n\nclass ImprController {\n  constructor() {\n    this._uniqid = 1;\n    this.oberver = null;\n    this.entryQuene = {};\n    this.elStore = {};\n    this.stashQuene = [];\n    this.init();\n  }\n\n  init = async () => {\n    //  impr控制器单例，只在client实例化\n    if(!process.env.BROWSER) {\n      return;\n    }\n    //  检测app版本，why?\n    //  如果支持预加载的app版本，会对不可见的页面js进行预加载，【例1】在首页，会预先加载大促的js 【例2】频道页tab1加载时，会预先加载tab2，tab3的webview中的页面js\n    //  js预加载时会触发曝光，但实际此时元素并未曝光\n    const isSupportAppDelayImpr = platform.isNativePlatform && platform.statisfy\n      && platform.statisfy('4.20.0', '4.26.0', 'greaterThanEqual');\n    if(!isSupportAppDelayImpr) {\n      this.createOberver();\n      return;\n    }\n    try {\n      const res = await isWebviewInAppTabs() || {};\n      const showType = parseInt(res.shown_type, 10);\n      if(showType) {\n        registerWhenVisibility(() => {\n          this.createOberver();\n        });\n      } else {\n        this.createOberver();\n      }\n    } catch (e) {\n      this.createOberver();\n    }\n  }\n\n  //  生成一个observer，只在页面可见时执行\n  //  会对取出暂存队列中的曝光，将元素重新曝光，保证曝光的正确性\n  createOberver = () => {\n    this.oberver = new IntersectionObserver(this.observerCallBack, OBSERVER_CONFIGS);\n    Array.isArray(this.stashQuene) && this.stashQuene.forEach((func) => {\n      func && func();\n    });\n    this.stashQuene = null;\n  }\n\n  observerCallBack = (entries) => {\n    //  与屏幕相交时触发回调，分为进入屏幕和移出屏幕\n    entries.forEach((entry) => {\n      //  使用opts.inIntersection和otps.intersectionRatio >= threshold均可以判断\n      //  但是后者在video标签或内部元素小于外部且外部overflow: hidden的情况会失效\n      const uniqId = parseInt(entry.target.dataset.uniqid, 10);\n      if(!uniqId) {\n        return;\n      }\n\n      // Guard against show / hide callback, which doesn't respect threshold.\n      // https://github.com/w3c/IntersectionObserver/issues/357\n      const shouldTrigger = entry.isIntersecting && (entry.intersectionRatio >= MIN_RATIO_THRESHOLD);\n\n      if(shouldTrigger) {\n        const { immediate } = this.elStore[uniqId] || {};\n        if(immediate) {\n          this.log(uniqId);\n          return;\n        }\n        this.entryQuene[uniqId] = entry;\n      } else {\n        if(this.entryQuene[uniqId]) {\n          if(entry.time - this.entryQuene[uniqId].time >= IMPR_DELAY) {\n            this.log(uniqId);\n          }\n          delete this.entryQuene[uniqId];\n        }\n      }\n      //  debounce 防止反复触发\n      if(this.lastTimer) {\n        clearTimeout(this.lastTimer);\n      }\n      this.lastTimer = setTimeout(() => {\n        Object.keys(this.entryQuene).forEach((id) => {\n          this.log(id);\n          delete this.entryQuene[id];\n        });\n      }, IMPR_DELAY);\n    });\n  }\n\n  //  执行打点操作\n  log = (id) => {\n    if(!this.elStore[id]) {\n      return;\n    }\n    const { info, once, el, handleCustomTracking } = this.elStore[id] || {};\n    once && this.unRegister(el, id);\n    if(handleCustomTracking) {\n      handleCustomTracking();\n    } else {\n      sendImprMetrics(info)\n    }\n  }\n\n  //  注册曝光元素\n  register = ({ el, info, handleCustomTracking, once = true, immediate = false }) => {\n    if(!el || !info) {\n      return;\n    }\n    const id = this._uniqid;\n    this._uniqid++;\n    el.dataset.uniqid = id;\n    this.elStore[id] = handleCustomTracking\n      ? { el, info, once, immediate, handleCustomTracking }\n      : { el, info, once, immediate };\n    if(this.oberver) {\n      this.oberver.observe(el);\n    } else {\n      this.stashQuene.push(() => {\n        this.oberver.observe(el);\n      });\n    }\n  }\n\n  //  曝光结束，从队列中删除，停止监听\n  unRegister = (el, id) => {\n    if(this.oberver) {\n      this.oberver.unobserve(el);\n    }\n    delete this.elStore[id];\n    delete this.entryQuene[id];\n  }\n}\n\nexport default new ImprController();\n","import { waitTabPageVisible, invokeBridgeCallNativeFun } from '@pdd/native-util';\n\nexport const isWebviewInAppTabs = () => {\n  return invokeBridgeCallNativeFun('WebScene', 'getPageShownType', null);\n};\n\nexport const registerWhenVisibility = (callback) => {\n  waitTabPageVisible().then(callback);\n};\n","import React, { Component } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport Controller from './ImprController';\nimport PropTypes from 'prop-types';\n\nclass Impr extends Component {\n  static defaultProps = {\n    doImpr: true,\n    id: '',\n    once: true,\n    trackingInfo: {},\n    immediate: false\n  };\n\n  static propTypes = {\n    doImpr: PropTypes.bool,\n    id: PropTypes.string,\n    once: PropTypes.bool,\n    trackingInfo: PropTypes.object.isRequired,\n    immediate: PropTypes.bool\n  }\n\n  componentDidMount = () => {\n    const { id, doImpr } = this.props;\n    this.el = findDOMNode(this) || document.getElementById(id);\n    if(doImpr) {\n      this.registerImpr();\n    }\n  }\n\n  componentDidUpdate = (prevProps) => {\n    if(this.lock) return;\n    if(!prevProps.doImpr && this.props.doImpr) {\n      this.registerImpr();\n      this.lock = true;\n    }\n  }\n\n  componentWillUnmount = () => {\n    //  对于已经注册过的才进行解除\n    if(this.el && this.isRegistered) {\n      const id = parseInt(this.el.dataset.uniqid, 10) || 0;\n      Controller.unRegister(this.el, id);\n    }\n  }\n\n  registerImpr = () => {\n    const { trackingInfo, once, handleCustomTracking, immediate } = this.props;\n    Controller.register({\n      el: this.el,\n      info: trackingInfo,\n      once,\n      handleCustomTracking,\n      immediate\n    });\n    this.isRegistered = true;\n  }\n\n  render() {\n    return React.Children.only(this.props.children);\n  }\n}\n\nexport default Impr;\n","import Impr from './Impr';\n\nexport default Impr;\n","/**\n * @file index.js 业务错误状态\n * @author zongheng(zongheng@pinduoduo.com)\n */\n\n/**\n * 业务错误状态信息\n *\n * @type {Object}\n */\nexport const errors = {\n  AUTHENTICATION_FAILED: 40001,\n  API_SERVICE_BUSY: 40002,\n  GRAPHICAL_CODE_FOR_PHONE_CODE: 40017,\n  LOGIN_FAILED: 40020,\n  ITEM_REMOVED: 41002,\n  OUT_OF_STOCK: 41003,\n  NOT_IN_LUCKY_TIME: 41005,\n  ADDRESS_UNREACHABLE: 41006,\n  UPDATE_USER_PROFILE_FORBIDDEN: 43035,\n  NO_COUPON_LEFT: 44010,\n  COUPON_TAKEN: 44011,\n  COUPON_TAKE_FAILED: 44012,\n  COUPON_TAKEN_OUT: 44026,\n  PERSONAL_INFO_NO_ID: 45007,\n  ORDER_PAYED: 45008,\n  NEED_VERFICATION: 45054,\n  GROUP_INVALID: 46001,\n  GROUP_FAILED: 42003,\n  OVER_BUY_LIMIT: 42004,\n  GROUP_OVERFLOW: 42005,\n  GROUP_AUTO_OPEN_FAILED: 42006,\n  GROUP_AUTO_OPEN_SUCCESS: 42007,\n  ID_CARD_EMPTY: 43004,\n  NO_NAME_ID_BEFORE: 43006,\n  ID_CARD_FAKE: 43008,\n  ID_CARD_FAIL_TOO_MUCH: 43009,\n  INSUFFICIENT_COUPON: 44047,\n  AVAILABLE_COUPONS_PER_UNIT: 44201,\n  NO_SUCH_ORDER: 45001,\n  PREPAY_BUSY: 45009,\n  ORDER_PAYING: 45010,\n  PAYMENT_DISABLED: 45210,\n  SPIKE_COMING: 45034,\n  ORDER_PAY_RISK: 45206,\n  ORDER_PAY_VERIFICATION_INVALID: 45207,\n  ORDER_ALREADY_URGED: 47030,\n  ORDER_URGE_ERROR: 47031,\n  NATIVE_NORMAL_ERROR: 60000,\n  NATIVE_PARAMS_ERROR: 60003,\n  NATIVE_USER_REFUSE: 60005,\n  NATIVE_USER_CANCEL: 60006,\n  NATIVE_AUDIO_RECORD_FAILED: 60200,\n  NATIVE_AUDIO_RECORD_UNDETERMINED: 60201,\n  NATIVE_AUDIO_TOO_SHORT: 60205,\n  NATIVE_AUDIO_UPLOAD_FAILED: 60210,\n  NATIVE_AUDIO_PLAY_FAILED: 60220,\n  SUCCESSIVE_MOBILE_FEE_ONLY_ONCE: 45036,\n  SUCCESSIVE_MOBILE_FEE_RISK: 45037,\n  SUCCESSIVE_MOBILE_FEE_UNSIGNED: 45038,\n  SUCCESSIVE_MOBILE_FEE_ONLY_WECHAT: 45039,\n  OVER_BUY_VIRTUAL_GOODS_LIMIT: 45033,\n  AVAILABLE_ACTIVITY_CHANGED: 45516,\n  GROUP_COMPLETED: 42001,\n  INVALID_ADDRESS: 43002,\n  COUPON_DAILY_LIMIT: 44037,\n  COUPON_BATCH_LIMIT: 44038,\n  COUPON_TOKEN_INVALID: 44041,\n  COUPON_TOKEN_EXPIRED: 44042,\n  COUPON_PUSH_NOT_IN: 44043,\n  COUPON_ACTIVITY_ABSENT: 44044,\n  MULTIPLY_DISCOUNT_PAUSE: 44064,\n  MULTIPLY_DISCOUNT_END: 44066,\n  COUPON_MAX_NUM_REACHED: 44200,\n  HISTORY_GROUP_OPEN_FAILED: 46014,\n  GOODS_NOT_EXIST: 49001,\n  RISK_CONTROL: 54001,\n  RISK_CONTROL_FORBIDDEN: 54003,\n  NATIVE_PAYMENT_CANCEL: 60006,\n  WITHOUT_WE_CHAT_CLIENT: 60100,\n  QQ_PAY_FAILED: 60120,\n  ORDER_LIMITED_SALES_END: 152004,\n  ORDER_LIMITED_SALES_OUT: 152006,\n  PAY_LIMITED_SALES_END: 47102,\n  PAY_LIMITED_SALES_OUT: 47003,\n  SERVER_BUSY: 4000004,\n  ORDER_SPIKE_MSG_ERROR: 4000006,\n  WX_DIRECT_PAY_WX_BALANCE_ERROR: 400001,\n  WX_DIRECT_PAY_CARD_BALANCE_ERROR: 400002,\n  WX_DIRECT_PAY_TELEPHONE_ERROR: 400003,\n  WX_DIRECT_PAY_CARD_INVALID_ERROR: 400004,\n  WX_DIRECT_PAY_REFUSED_ERROR: 400005,\n  WX_DIRECT_PAY_UNKNOWN_ERROR: 400099,\n  ACT_GROUP_NOT_EXISTS: 530001,\n  ACT_GROUP_FAILED: 530002,\n  ACT_GROUP_SUCCESS: 530003,\n  ACT_RECORD_NOT_EXISTS: 530004,\n  PAY_CHANNEL_NOT_SUPPORT: 530005,\n  ACT_RECORD_PAID: 530006,\n  ACT_RECORD_REFUND: 530007,\n  ASSIST_FOR_ONE_DAILY_LIMIT: 530011,\n  ASSIST_FOR_ONE_LIMIT: 530012,\n\n  '1101_MSG': '手机网络繁忙，请稍后再试',\n  '30400_MSG': '没有安装QQ客户端',\n  '40000_MSG': '错误的请求地址或方法',\n  '40001_MSG': '登录已过期，请重新登录',\n  '40002_MSG': '手机网络繁忙，请稍后再试',\n  '40003_MSG': '错误的请求参数',\n  '40004_MSG': '微信登录失败',\n  '40005_MSG': '请求还在处理中',\n  '40006_MSG': '手机登录验证码错误',\n  '40015_MSG': '验证码重复请求',\n  '40016_MSG': '验证码超出当天限制',\n  '40017_MSG': '今日可发送次数已达上限',\n  '40018_MSG': '验证码填写错误',\n  '40019_MSG': '验证码填写超时',\n  '40020_MSG': '登录失败',\n  '40031_MSG': '微信登录失败!',\n  '40032_MSG': 'QQ登录失败!',\n  '40033_MSG': '登录重试失败，请稍后再试',\n  '40100_MSG': '暂未开通该开放平台',\n  '41001_MSG': '商品不存在',\n  '41002_MSG': '商品已下架',\n  '41003_MSG': '商品已售罄',\n  '41004_MSG': '商品不在同一商店',\n  '41005_MSG': '该商品当前不在抽奖活动时间',\n  '41006_MSG': '商品不在可售区域',\n  '41101_MSG': '抽奖活动暂不支持单独购买',\n  '41102_MSG': '卡券可使用的时间已过期，请选购其他商品',\n  '42001_MSG': '拼单已满',\n  '42002_MSG': '该拼单不存在',\n  '42003_MSG': '拼单已过期',\n  '42004_MSG': '您购买此商品次数达到上限，去看看其他商品吧~',\n  '42005_MSG': '该商品开团数已达上限',\n  '42006_MSG': '拼单已满',\n  '42007_MSG': '此拼单已满，正在发起新拼单...',\n  '42501_MSG': '订单已成团，暂不支持修改收货地址，请与商家客服联系',\n  '42502_MSG': '该订单已拼单成功，请刷新页面',\n  '43001_MSG': '用户不存在',\n  '43002_MSG': '地址错误',\n  '43004_MSG': '身份证号不存在',\n  '43005_MSG': '姓名和身份证号不一致',\n  '43006_MSG': '对不起，您无法获取或更新身份证号',\n  '43007_MSG': '对不起，您已用完当前最大验证次数，请24小时后再试',\n  '43008_MSG': '姓名和身份证不匹配，请重新认证',\n  '43009_MSG': '您今日认证过于频繁，请明天再试',\n  '43010_MSG': '该地址已存在',\n  '43011_MSG': '该地址无法导入',\n  '43013_MSG': '一小时内不能重复提交',\n  '43015_MSG': '只允许微信用户够买',\n  '43016_MSG': '创建地址失败',\n  '43017_MSG': '最多只能添加100个收货地址哦~',\n  '43035_MSG': '系统维护中，暂时无法修改',\n  '43098_MSG': '您在店铺没有拼单成功记录，请勿发红包！拼多多不支持通过发红包购买商品！',\n  '43099_MSG': '该商品仅限新用户购买一件哦~',\n  '44001_MSG': '优惠券不存在',\n  '44002_MSG': '优惠券已使用',\n  '44003_MSG': '优惠券没有达到最小使用金额',\n  '44004_MSG': '优惠券已过期',\n  '44005_MSG': '优惠券不属于用户',\n  '44006_MSG': '优惠券已废弃',\n  '44007_MSG': '优惠券暂未到使用时间',\n  '44008_MSG': '优惠券不能在该分类使用',\n  '44010_MSG': '优惠券已经抢完了，下次早点来哦',\n  '44011_MSG': '您已经领过该优惠券',\n  '44012_MSG': '优惠券领取失败',\n  '44015_MSG': '不是团长不能使用团长免单优惠券',\n  '44016_MSG': '优惠券批次不存在',\n  '44020_MSG': '正在处理中，请稍后再试！',\n  '44026_MSG': '该券太火爆，全部已被领完',\n  '44027_MSG': '活动已结束！',\n  '44033_MSG': '优惠券使用失败',\n  '44035_MSG': '批次类型错误',\n  '44036_MSG': '团免券已被领完',\n  '44037_MSG': '用户已达团免券日领取上限',\n  '44038_MSG': '您已领取该券',\n  '44039_MSG': '未找到符合条件的团免券批次',\n  '44041_MSG': '领取失败',\n  '44042_MSG': '领取链接已失效，下次早点哦',\n  '44043_MSG': '不符合领取条件哦',\n  '44044_MSG': '该优惠券活动不存在',\n  '44045_MSG': '不在活动时间',\n  '44046_MSG': '只有无订单的新用户可领取哦',\n  '44047_MSG': '红包券数量不够',\n  '44061_MSG': '多件优惠活动结束',\n  '44063_MSG': '多件优惠已经享受过了',\n  '44064_MSG': '多件优惠活动暂未开始',\n  '44065_MSG': '多件优惠活动暂未开始',\n  '44066_MSG': '多件优惠活动结束',\n  '44067_MSG': '商家券和多件优惠活动不能同时使用',\n  '44072_MSG': '分享码已过期',\n  '44073_MSG': '免拼卡不足',\n  '44076_MSG': '不符合免拼卡的使用条件',\n  '44090_MSG': '商品活动未开始',\n  '44091_MSG': '商品活动已结束',\n  '44092_MSG': '商品活动不存在',\n  '44093_MSG': '活动商品已售罄',\n  '44095_MSG': '商品活动已结束',\n  '44096_MSG': '商品活动不存在',\n  '44097_MSG': '您购买的该活动商品数量已达上限',\n  '44098_MSG': '商品订单已创建',\n  '44099_MSG': '商品活动有误',\n  '44100_MSG': '您未获取抢购资格，不可购买该商品',\n  '44200_MSG': '已达红包使用数量上限',\n  '44201_MSG': '每满{0}元可用{1}个红包',\n  '45001_MSG': '订单不存在',\n  '45002_MSG': '订单不属于该用户',\n  '45003_MSG': '订单不能取消',\n  '45004_MSG': '订单商品不一致',\n  '45005_MSG': '订单已经收货',\n  '45006_MSG': '订单还未发货',\n  '45007_MSG': '海淘订单没有提交身份证',\n  '45008_MSG': '订单已支付',\n  '45009_MSG': '支付繁忙，请重试',\n  '45010_MSG': '订单正在支付中',\n  '45012_MSG': '手机充值号码为空',\n  '45013_MSG': '手机充值号码不支持',\n  '45014_MSG': '手机充值商品不存在',\n  '45015_MSG': '确认收货失败',\n  '45023_MSG': '正在处理您的退款/售后申诉，无法主动确认收货',\n  '45026_MSG': '超过购买商品限制',\n  '45030_MSG': '订单正在处理中，请刷新页面',\n  '45031_MSG': '单次购买金额不得高于9.5万元',\n  '45033_MSG': '超过每个手机号码购买次数限制',\n  '45034_MSG': '抱歉，秒杀尚未开始，请稍候',\n  '45035_MSG': '该商品为App新人专享秒杀，非首次下载App24小时内的用户无法发起拼单',\n  '45036_MSG': '每名用户只能购买一次哦',\n  '45037_MSG': '你的当前登录帐号有些风险哦，建议先直接去充值吧',\n  '45038_MSG': '包月套餐订单购买免密校验失败',\n  '45039_MSG': '包月套餐功能升级中，当前只支持微信帐号登录的用户哦',\n  '45040_MSG': '限购商品暂时无法购买哦～',\n  '45041_MSG': '本次活动期间已抢到过一张神券，不能再抢了~',\n  '45042_MSG': '手机网络繁忙，请稍后再试',\n  '45043_MSG': '该类型商品本次活动期间您已抢过，不能再抢了~',\n  '45044_MSG': '您好，该商品仅可购买一次哦~',\n  '45045_MSG': '该商品仅能在拼多多App中购买！',\n  '45046_MSG': '该商品仅允许微信登录用户购买！',\n  '45047_MSG': '超过该商品每次购买件数限制',\n  '45050_MSG': '您已经在本场下过单了，去看看其他商品吧~',\n  '45051_MSG': '已购买过此类优惠商品，看看其他商品吧',\n  '45052_MSG': '您最近购买此商品次数达到上限，去看看其他商品吧~',\n  '45053_MSG': '手机网络繁忙，请稍后再试',\n  '45054_MSG': '需验证码校验！',\n  '45055_MSG': '手机网络繁忙，请稍后再试',\n  '45104_MSG': '不是定金类型订单',\n  '45105_MSG': '订单已取消',\n  '45106_MSG': '订单已确认',\n  '45107_MSG': '定金未成团',\n  '45110_MSG': '未到尾款支付时间',\n  '45111_MSG': '超过尾款支付时间',\n  '45112_MSG': '未到定金支付时间',\n  '45113_MSG': '超过定金支付时间',\n  '45206_MSG': '创建订单存在风险',\n  '45207_MSG': '创建订单验证码非法',\n  '45208_MSG': '价格有变动，请返回上一页查看',\n  '45209_MSG': '请更换支付方式，花呗分期暂不可用',\n  '45210_MSG': '手机网络繁忙，请稍后再试',\n  '45301_MSG': '店铺补差价金额达到上限！',\n  '45320_MSG': '未获取活动资格！',\n  '45321_MSG': '该活动必须是微信APP用户参加！',\n  '45322_MSG': '该活动同一用户不可重复参加！',\n  '45323_MSG': '该活动同一设备不可重复参加！',\n  '45324_MSG': '该活动用户微信置信度较低！',\n  '45325_MSG': '非APP新用户',\n  '45326_MSG': '手机网络繁忙，请稍后再试',\n  '45327_MSG': '账户存在风险，无法下单',\n  '45402_MSG': '该商品秒杀活动已结束',\n  '45403_MSG': '该商品免单活动已结束',\n  '45404_MSG': '该商品买二送一活动已结束',\n  '45405_MSG': '该商品秒杀活动已结束',\n  '45406_MSG': '该活动已结束',\n  '45407_MSG': '该活动已结束',\n  '45412_MSG': '该商品多件优惠活动已结束',\n  '45413_MSG': '该商品限时免单活动已结',\n  '45416_MSG': '该商品优惠活动已结束',\n  '45417_MSG': '该活动已结束',\n  '45418_MSG': '该优惠商品已被抢空',\n  '45420_MSG': '该活动已结束',\n  '45422_MSG': '该活动已结束',\n  '45423_MSG': '该活动已结束',\n  '45424_MSG': '该包月活动已结束',\n  '45425_MSG': '您向商家补的差价已经超过上限',\n  '45428_MSG': '该商品属于活动商品，无法正常购买',\n  '45429_MSG': '该地区暂时无货',\n  '45450_MSG': '此海淘商品仅支持微信支付',\n  '45500_MSG': '商品信息和充值号码不匹配',\n  '45501_MSG': '新地址暂不支持，请重新选择',\n  '45511_MSG': '您不是专属用户，不能以特惠价开团哦~',\n  '45514_MSG': '库存不足',\n  '45515_MSG': '低于最低起售件数',\n  '45516_MSG': '该商品有更低价的优惠活动，请刷新购买',\n  '46001_MSG': '团订单不存在',\n  '46002_MSG': '无法重复参团',\n  '46012_MSG': '商品售罄，免拼失败，拼单到期后将退款',\n  '46013_MSG': '秒杀活动结束，免拼失败，拼单到期后将退款',\n  '46014_MSG': '插队拼单已满',\n  '47003_MSG': '限量件数已被抢光，请重新选购',\n  '47010_MSG': '折扣活动检查失败',\n  '47011_MSG': '限时折扣活动已经使用',\n  '47012_MSG': '限时折扣活动未开启',\n  '47013_MSG': '限时折扣活动未到开始时间',\n  '47014_MSG': '限时折扣活动已经结束',\n  '47015_MSG': '商家券和限时折扣活动不能同时使用',\n  '47030_MSG': '已经催过了，正在尽快发货',\n  '47031_MSG': '催发货请求异常，请稍后重试',\n  '47101_MSG': '支付失败，限时折扣活动已结束',\n  '47102_MSG': '支付失败，限量折扣活动已结束，请重新购买',\n  '48001_MSG': '图片格式错误',\n  '48002_MSG': '图片大小超过限制',\n  '49001_MSG': '商品不存在',\n  '50000_MSG': '当前访问人数较多，请稍后再试',\n  '50001_MSG': '今天票数已用完，明天再来吧',\n  '50002_MSG': '当前有未完成的团',\n  '54001_MSG': '该账户需要安全验证',\n  '54003_MSG': '该账户安全验证未通过，暂时无法登录',\n  '60000_MSG': '',\n  '60001_MSG': '该团已经结束',\n  '60002_MSG': '确认收货失败',\n  '60003_MSG': '参数错误',\n  '60004_MSG': '您已退款成功，无须确认收货',\n  '60005_MSG': '用户拒绝',\n  '60006_MSG': '用户取消',\n  '60007_MSG': '确认收货失败，请稍后重试',\n  '60100_MSG': '未安装微信客户端',\n  '60110_MSG': '未安装微博客户端',\n  '60120_MSG': '未安装手机QQ',\n  '60200_MSG': '录制失败',\n  '60201_MSG': '录音没有权限',\n  '60205_MSG': '录音时间过短',\n  '60210_MSG': '上传失败',\n  '60220_MSG': '播放失败',\n  '71001_MSG': '获取售后列表失败',\n  '71002_MSG': '申请售后失败',\n  '71003_MSG': '获取售后单详情失败',\n  '71004_MSG': '售后单添加售后信息失败',\n  '71005_MSG': '售后单修改失败',\n  '71006_MSG': '撤销售后失败',\n  '71007_MSG': '售后单用户确认发货失败',\n  '71008_MSG': '售后单重新申请失败',\n  '71009_MSG': '售后单申请平台介入失败',\n  '71010_MSG': '钱款去向查询失败',\n  '71011_MSG': '留言标记失败',\n  '71012_MSG': '售后用户待处理未读数量获取失败',\n  '71013_MSG': '售后未读留言数目获取失败',\n  '71014_MSG': '获取付款类型失败',\n  '71015_MSG': '获取售后原因失败',\n  '71016_MSG': '获取我要发货列表失败',\n  '71017_MSG': '获取是否使用平台优惠券失败',\n  '71018_MSG': '售后单用户确认完成失败',\n  '71019_MSG': '获取小额打款详情失败',\n  '71020_MSG': '填写账户信息失败',\n  '80001_MSG': '投票活动已结束',\n  '144073_MSG': '您没有免拼卡，请返回重新下单',\n  '144076_MSG': '不符合免拼卡的使用条件',\n  '144078_MSG': '请求失败，请重新发起支付',\n  '152001_MSG': '限量折扣活动已经使用',\n  '152002_MSG': '限量折扣活动未开启',\n  '152003_MSG': '限量折扣活动未到开始时间',\n  '152004_MSG': '限量折扣活动已经结束',\n  '152005_MSG': '商家券和限量折扣活动不能同时使用',\n  '152006_MSG': '限量件数已被抢光，请重新选购',\n  '152010_MSG': '已达到该商品活动期内的最多购买件数，不能再抢了～',\n  '400001_MSG': '微信零钱不足，且未绑定银行卡，请绑定银行卡再试，或邀请好友代付',\n  '400002_MSG': '银行卡余额不足，请绑定其他银行卡再试，或邀请好友代付',\n  '400003_MSG': '银行卡预留手机号不符，请核对后再试，或邀请好友代付',\n  '400004_MSG': '银行卡已失效，请核对后再试，或邀请好友代付',\n  '400005_MSG': '银行拒绝交易，请核对后再试，或邀请好友代付',\n  '400099_MSG': '支付未完成，请更换支付方式',\n  '450130_MSG': '商品信息和充值号码不匹配',\n  '450131_MSG': '该商品每个号码每月限充一次',\n  '530001_MSG': '团不存在',\n  '530002_MSG': '团已失效',\n  '530003_MSG': '团已满',\n  '530004_MSG': '助力单不存在',\n  '530005_MSG': '不支持该支付方式',\n  '530006_MSG': '助力单已支付',\n  '530007_MSG': '助力单已退款',\n  '530008_MSG': '不在活动时间',\n  '530009_MSG': '您已经拿过该商品了，不要贪心哦',\n  '530010_MSG': '已达到今日帮忙付款次数上限，明日再来吧',\n  '530011_MSG': '已达到今日帮助该好友次数上限，明日再来吧~',\n  '530012_MSG': '已经达到帮助该好友支付次数上限，赶紧去帮助其他人吧~',\n  '530013_MSG': '不符合免费帮忙条件',\n  '530014_MSG': '您不是拼多多App新人，不能开团哦',\n  '3000001_MSG': '充值失败，请稍后重试',\n  '3000002_MSG': '话费充值失败，请稍后重试',\n  '3000003_MSG': '话费充值下单失败，请稍后重试',\n  '4000004_MSG': '手机网络繁忙，请稍后再试',\n  '4000005_MSG': '手机网络繁忙，请稍后再试',\n  '4000006_MSG': '',\n  '12960005_MSG': '商品不存在',\n  '12960006_MSG': '活动未开始',\n  '12960007_MSG': '商品已售罄',\n  '12960008_MSG': '拼单人数已满',\n  '12960009_MSG': '只有App新人才能参团哦',\n  '12960010_MSG': '帐号信息异常',\n  '12960012_MSG': '该商品一次只能购买1件哦',\n  '12960014_MSG': '请使用微信登录再下单',\n  '12960016_MSG': '你已经开过团了，请勿重复开团',\n  '12960017_MSG': '今日开团次数已用完，明天再来吧',\n  '12960018_MSG': '今日参团次数已用完，明天再来吧',\n  '12960019_MSG': '该商品你今日已经参过团了',\n  '20504005_MSG': '手机网络繁忙，请稍后再试',\n  '20504101_MSG': '团订单不存在'\n};\n\n/**\n * 根据错误码得到相应的 error message\n *\n * @param {number|string} errorCode, server端返回的错误码\n * @param {string} [defaultMsg=''], 找不到error message时用的默认信息文案\n * @return {string} 对应错误码的error message\n */\nexport const getMsgFromCode = (errorCode, defaultMsg = '') => {\n  return errors[`${errorCode}_MSG`] || defaultMsg;\n};\n","/**\n * @file PageStore.js store基类，封装了ssr，csr的逻辑\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { action, observable, toJS, runInAction } from 'mobx';\nimport { getMsgFromCode } from '@pdd/error-status';\nimport { createClientContext } from './createClientContext';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\n\n/**\n * @external {AxiosInstance} https://github.com/axios/axios#instance-methods\n */\n\n/**\n * 同构化视图数据模型\n *\n * ssr 生命周期：\n *\n *   server:\n *     constructor -> initServerData -> initDataCallback -> initServices ->\n *     getDatasource -> loadDatasource -> finishServerRender -> finishInitLoading -> toJSON\n *\n *   client:\n *     constructor -> fromJS -> initServices -> prepareClientData -> finishInitLoading\n *\n * csr 生命周期：\n *   constructor -> initClientData -> initDataCallback -> initServices ->\n *   getDatasource -> loadDatasource -> prepareClientData -> finishInitLoading\n *\n */\nexport class PageStore {\n  /**\n   * 注入的 axios http 基础服务\n   *\n   * @readonly\n   * @type {AxiosInstance}\n   * @see https://github.com/axios/axios#instance-methods\n   */\n  $axiosHttp = null;\n\n  /**\n   * 错误跳转地址\n   *\n   * @protected\n   * @type {string}\n   */\n  errorRedirectUrl = '/';\n\n  /**\n   * 标识服务端渲染是否完成，没完成则会在client进行渲染加载\n   *\n   * @private\n   * @type {boolean}\n   */\n  @observable isServerRendered = false;\n\n  /**\n   * 是否完成初始化\n   *\n   * @private\n   * @type {boolean}\n   */\n  @observable isFinishInitLoading = false;\n\n  /**\n   * 标记完成服务端渲染\n   *\n   * @protected\n   */\n  @action finishServerRender() {\n    this.finishInitLoading();\n    this.isServerRendered = true;\n  }\n\n  /**\n   * 标记完成数据加载\n   */\n  @action finishInitLoading() {\n    this.isFinishInitLoading = true;\n  }\n\n  /**\n   * 初始化客户端数据\n   */\n  @action\n  prepareClientData() {}\n\n  /**\n   * 异常封装方法，给错误信息包装成标准化的数据格式\n   *\n   * @todo 异常处理这块还需要花时间整理并详细设计下，这里错误信息可以为任意类型也不合理\n   *\n   * @private\n   * @param {*} e 错误信息\n   * @return {Promise<{handled: boolean, errorCode: number, error: *, alertText: string, redirectUrl: string}>}\n   * 包含错误信息的 rejected promise\n   */\n  dealError(e) {\n    // todo: 临时性的兼容，防止dealError被调用两次\n    if(e.handled) {\n      console.warn('该异常已经被dealError处理过了');\n      return Promise.reject(e);\n    }\n\n    e.errorCode = e.errorCode || 'unknown';\n    e.redirectUrl = this.errorRedirectUrl;\n    e.alertText = getMsgFromCode(e.errorCode);\n    e.handled = true;\n\n    return Promise.reject(e);\n  }\n\n  /**\n   * 数据初始化方法\n   *\n   * @protected\n   * @param requestContext\n   * @return {Promise<*>}\n   */\n  @action\n  initDataCallback(requestContext) {\n    this.initServices(this.$axiosHttp);\n    const datasource = this.getDatasource();\n    return this.loadDatasource(datasource, requestContext);\n  }\n\n  /**\n   * 初始化客户端数据\n   *\n   * @param {{pageId: string}} pageInfo 页面信息\n   * @throws {*}\n   * @return {Promise<*>}\n   */\n  @action\n  async initClientData(pageInfo) {\n    try {\n      this.initAxiosHttp({ pageInfo });\n      await this.initDataCallback(createClientContext());\n      this.prepareClientData();\n    } catch (err) {\n      return this.dealError(err);\n    }\n  }\n\n  /**\n   * 初始化服务端数据\n   *\n   * @param {RequestContext} requestContext 请求上下文\n   * @param {string} [token] 用户token\n   * @throws {*}\n   * @return {Promise<*>}\n   */\n  @action\n  async initServerData(requestContext, token) {\n    try {\n      this.initAxiosHttp({\n        req: requestContext.__req,\n        res: requestContext.__res,\n        accessToken: token\n      });\n      await this.initDataCallback(requestContext);\n      this.finishServerRender();\n    } catch (err) {\n      return this.dealError(err);\n    }\n  }\n\n  /**\n   * 从js对象中填充数据，主要用于同构渲染的数据回填\n   *\n   * @param {Object} [rawData] 提供的状态回填数据\n   * @param {{pageId: string}} pageInfo 页面信息，当前主要给axios http使用\n   */\n  @action\n  fromJS(rawData, pageInfo) {\n    if(rawData && rawData.isServerRendered) {\n      Object.assign(this, rawData);\n      this.initAxiosHttp({ pageInfo });\n\n      this.initServices(this.$axiosHttp);\n    }\n  }\n\n  /**\n   * 加载数据源\n   *\n   * @protected\n   * @param {Array<Function|Object>} datasource 数据源配置\n   * @param {{__req: ?Object, __res: ?Object}} requestContext 请求上下文\n   * @return {Promise<*>}\n   */\n  @action\n  async loadDatasource(datasource, requestContext) {\n    // 数组则表示有依赖\n    if(Array.isArray(datasource)) {\n      return datasource.reduce(\n        (result, config) => result.then(() => loadDataParallel(config, requestContext, this)),\n        Promise.resolve()\n      );\n    }\n\n    return loadDataParallel(datasource, requestContext, this);\n  }\n\n  /**\n   * @protected\n   *\n   * 返回配置化的数据源, 有三种配置方式：\n   *\n   * 1. 配置为数据请求函数，该函数返回一个对象，PageStore会将返回对象展开赋值至自身，请求函数会注入以下三个参数：\n   *       - requestContext: Provider.buildContext()返回的请求上下文，\n   *       - store: 当前的 store 实例，提供给使用老 Model 不使用 Service 使用\n   *\n   * ```\n   *  // 以下会配置最终会导致 store.key1 = value1，store.key2 = value2\n   *   async function loader(requestContext, authorize, store) {\n   *        return {\n   *            key1: value1,\n   *            key2: value2\n   *        };\n   *   }\n   * ```\n   * 2. 配置项为多个键值对构成的数据源配置，会并行的执行每个数据源配置请求函数，将最终的返回值按照配置赋值到store上：\n   *     2.1 值为函数时，类似配置1，但会将键对应的store属性值设置为返回值\n   *     2.2 值为对象配置项时，可以设置loader和dump，loader与配置1保持一致，dump为bool类型，\n   *     标识是否将loader的返回值展开到store上，为true展开，否则将键对应的store属性值设置为返回值\n   *\n   * ```\n   * {\n   *    key1(requestContext, authorize, store) {}, // 类似配置1，但会设置 store.key1 = 该函数返回值\n   *    key2(requestContext, authorize, store) {}, // 类似配置1，但会设置 store.key2 = 该函数返回值\n   *    key3(requestContext, authorize, store) {},\n   *    key4: {\n   *        loader(requestContext, authorize, store) {},\n   *        dump: true // 会将loader的返回值展开至store\n   *    }\n   * }\n   * ```\n   *\n   * 3. 配置项为数据源配置数组，会串行的执行每个数据源配置的请求函数，每个配置项的效果参考1和2\n   *\n   * ```\n   * [\n   *    async function loader(requestContext, authorize, store) {}, // 先执行该函数，再并行执行第二个配置项的各个请求函数\n   *    {\n   *        key1(requestContext, authorize, store) {}, // 类似配置1，但会设置 store.key1 = 该函数返回值\n   *        key2(requestContext, authorize, store) {}, // 类似配置1，但会设置 store.key2 = 该函数返回值\n   *        key3: {\n   *            loader(requestContext, authorize, store) {},\n   *            dump: true 会将loader的返回值展开至store\n   *       }\n   *    }\n   * ]\n   * ```\n   *\n   * @return {{} | Array<{}>}\n   */\n  getDatasource() {\n    return [];\n  }\n\n  /**\n   * 初始化一些services，子类覆盖\n   *\n   * @protected\n   * @param {AxiosInstance} axiosHttp 注入的基础axios http能力服务\n   */\n  initServices(axiosHttp) {}\n\n  /**\n   * 初始化 $axiosHttp\n   *\n   * @protected\n   * @param {Object} axiosHttpParams 透传参数\n   * @param {ExpressRequest} [axiosHttpParams.req] express 请求对象， server环境下必传\n   * @param {ExpressResponse} [axiosHttpParams.res] express 响应对象，server环境下必传\n   * @param {string} [axiosHttpParams.accessToken] 用户token字符串\n   * @param {{pageId: string}} [axiosHttpParams.pageInfo]  client环境下必传\n   */\n  initAxiosHttp({ req, res, accessToken, pageInfo }) {\n    const params = process.env.BROWSER ? { pageInfo } : { req, res, accessToken };\n    this.$axiosHttp = createDefaultAxios(params);\n  }\n\n  /**\n   * 序列化为json数据\n   *\n   * @override\n   */\n  toJSON() {\n    return toJS(this);\n  }\n}\n\n/**\n * 并行加载数据\n */\nasync function loadDataParallel(datasource, requestContext, store) {\n  if(typeof datasource === 'function') {\n    const data = await datasource(requestContext, store);\n    runInAction(() => Object.assign(store, data));\n    return;\n  }\n\n  return Promise.all(Object.entries(datasource).map(\n    async ([key, config]) => {\n      if(typeof config === 'function') {\n        config = { dump: false, loader: config };\n      }\n\n      const loader = config.loader;\n\n      const data = await Promise.resolve(loader(requestContext, store));\n      runInAction(() => {\n        if(config.dump) {\n          Object.assign(store, data);\n        } else {\n          store[key] = data;\n        }\n      });\n    }\n  ));\n}\n","/**\n * @file index.js isSupportWebp\n * @author tenghu\n * @description\n * 迁移自@pdd/image\n */\nconst WEBP_TEST_URL =\n  'data:image/webp;base64,UklGRlAAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSBIAAAABBxAR/Q8ABOH/3EFE/1MDAABWUDggGAAAADABAJ0BKhAAEAACACYlpAADcAD+/PQAAA==';\n\n/**\n * 测试是否支持webp\n * @returns {Promise.<boolean>} - 是否支持webp\n */\nfunction testIsSupportWebp() {\n  return new Promise(resolve => {\n    const img = document.createElement('img');\n    img.onload = img.onerror = () => resolve(!!(img.height && img.width));\n    img.src = WEBP_TEST_URL;\n  });\n}\n\nlet isSupport;\nconst init = () => (isSupport = process.env.BROWSER ? testIsSupportWebp() : Promise.resolve(false));\n\n/**\n * 检测是否支持webp（浏览器端）\n * 服务器端，返回false\n * returns {Promise.<boolean>} 是否支持webp\n */\nexport function isSupportWebp() {\n  return isSupport || init();\n}\n","/**\n * @file isSupportWebp\n * @auhtor tenghu\n * @description\n * 判断是否支持webp\n * 持久化存储isSupportWebp到cookie\n */\nimport { isSupportWebp as testIsSupportWebp, setCookie } from '@pdd/core-util';\n\nconst WEBP_KEY = 'webp';\nconst WEBP_VALUE_TRUE = '1';\nconst ATTRS = { maxAge: 30 * 24 * 3600 };\n\n/**\n * 客户端，初始化webp支持，安全距离属性到cookie\n * return {Promise}\n */\nexport function initCookies() {\n  return testIsSupportWebp().then(v => v && setCookie(WEBP_KEY, WEBP_VALUE_TRUE, ATTRS));\n}\n\n/**\n * 获取是否支持webp\n * @param {Object} cookies - requestContext.cookies\n * @returns {boolean} 是否支持webp\n */\nexport function isSupportWebpFromCookie(cookies) {\n  return WEBP_VALUE_TRUE === cookies[WEBP_KEY];\n}\n","/**\n * @file createClientContext.js 创建浏览器端上下文\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { parseQuery, getCookie } from '@pdd/core-util';\nimport { getPlatform } from '@pdd/platform-util';\nimport { getUserInfoSync } from '@pdd/auth';\nimport { isSupportWebpFromCookie } from './cookie';\n\n/**\n * @external {IPlatform} http://fweb1st.prod.yiran.com:5000/docs/platform-util/class/src/IPlatform.js~IPlatform.html\n */\n\n/**\n * @typedef {Object} ClientContext 信息上下文，提供同构化场景的一些常用信息属性封装\n * @property {string} hostname 当前请求会话的hostname（不带端口号）\n * @property {string} pathname 当前请求会话的pathname\n * @property {string} userAgent 当前请求会话的userAgent\n * @property {!Object} cookies 当前请求会话的cookie\n * @property {!Object} query 当前请求会话的查询参数\n * @property {!IPlatform} platform 当前请求会话的平台环境实例\n * @property {boolean} isSupportWebp 是否支持webp格式图片\n * @property {{accessToken:string, uid:string, uin:string} | null} userInfo 用户信息，未登录为null\n */\n\nlet isSupportWebpCache;\n\n/**\n * 创建浏览器端信息上下文\n *\n * @ignore\n * @return {ClientContext} context\n */\nexport function createClientContext() {\n  return {\n    get pathname() {\n      return location.pathname;\n    },\n\n    get query() {\n      return parseQuery(location.search);\n    },\n\n    get userAgent() {\n      return navigator.userAgent;\n    },\n\n    get hostname() {\n      return location.hostname;\n    },\n\n    get cookies() {\n      return getCookie();\n    },\n\n    get platform() {\n      return getPlatform(navigator.userAgent);\n    },\n\n    get isSupportWebp() {\n      if(isSupportWebpCache === undefined) {\n        isSupportWebpCache = isSupportWebpFromCookie(this.cookies);\n      }\n      return isSupportWebpCache;\n    },\n\n    get userInfo() {\n      const user = getUserInfoSync();\n      return user.accessToken ? user : null;\n    }\n  };\n}\n","/**\n * create.js axiosService 创建方法\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport axios from 'axios';\n\n/**\n * 给元组的实例添加插件\n *\n * @typedef {function(plugins : Plugin[]): void} usePlugins\n */\n\n/**\n * 请求元组\n *\n * @typedef {Object} RequestManager\n * @property {AxiosInstance} http axios 实例\n * @property {usePlugins} usePlugins 绑定元组内实例的添加插件方法\n */\n\n/**\n * 插件对象，是对axios interceptors 的封装，一个插件包括了请求前拦截器，请求异常拦截器，响应返回拦截器，响应异常拦截器\n * @see https://github.com/axios/axios#interceptors\n *\n * @typedef {Object} Plugin\n * @property {function(config : AxiosRequestConfig) : AxiosRequestConfig} [request] 请求前拦截器\n * @property {function(error: AxiosError) : Error} [requestError] 请求前异常拦截器\n * @property {function(response: AxiosResponse) : AxiosResponse} [response] 请求响应拦截器\n * @property {function(error: AxiosError) : Error} [responseError] 请求响应异常拦截器\n */\n\n/**\n * 创建一个 request 元组\n *\n * @param {AxiosRequestConfig} [config] axios 请求配置\n * @see https://github.com/axios/axios#instance-methods\n * @return {RequestManager}\n */\nexport const create = config => {\n  const http = axios.create(config);\n  return {\n    http,\n    usePlugins: plugins => usePlugins(http, plugins)\n  };\n};\n\nconst usePlugins = (http, plugins) => {\n  return plugins.map(plugin => {\n    const request = http.interceptors.request.use(plugin.request, plugin.requestError);\n    const response = http.interceptors.response.use(plugin.response, plugin.responseError);\n\n    return { request, response };\n  });\n};\n","/**\n * @file native.js 端内网络请求适配器\n * @author zongheng(zongheng@pinduoduo.com)\n */\n\nimport settle from 'axios/lib/core/settle';\nimport buildURL from 'axios/lib/helpers/buildURL';\nimport buildFullPath from 'axios/lib/core/buildFullPath';\nimport pinbridge from '@pdd/pinbridge';\nimport { getPlatform, compareVersion } from '@pdd/platform-util';\n\nconst appVersion = process.env.BROWSER ? getPlatform(window.navigator.userAgent).version : '0';\nconst supportNativeAntiToken = compareVersion(appVersion, '4.69.0') >= 0;\nconst supportNativeTimeout = compareVersion(appVersion, '5.24.0') >= 0;\nconst isDev = process.env.NODE_ENV === 'development';\n/**\n * 原生网络请求适配器\n *\n * @param {AxiosRequestConfig} config\n * @return {Promise<any>}\n */\nexport default function nativeRequest(config) {\n  // todo: 添加abort支持\n  return new Promise((resolve, reject) => {\n    const data = config.method === 'post' && config.data ? config.data : '';\n    const fullPath = buildFullPath(config.baseURL, config.url);\n    const nativeParams = {\n      method: config.method.toUpperCase(),\n      url: buildURL(fullPath, config.params, config.paramsSerializer),\n      headers: {\n        ...config.headers,\n        Referer: location.href,\n        'p-mode': '1'\n      },\n      data\n    };\n\n    if (supportNativeAntiToken) {\n      nativeParams.force_anti_token = !!config.useNativeAntiToken;\n    }\n    const timeout = config.clientTimeout;\n    if (supportNativeTimeout && timeout) {\n      nativeParams.timeout = timeout;\n    }\n    if (isDev && timeout && timeout % 1000) {\n      console.warn(`iOS timeout的精度为s（向下取整），此处传入${timeout}ms，iOS实际是${Math.floor(timeout / 1000)}s的超时。${config.url}`)\n    }\n\n    // 兼容原本的逻辑，默认选择 encode response，除非业务方显式的设置了encodeResp\n    nativeParams.encode_resp = !!config.encodeNativeResponse;\n\n    const request = { nativeParams, config };\n\n    pinbridge.callNative('JSNetwork', 'request', nativeParams, onSuccess, onError);\n\n    function onSuccess(nativeResponse) {\n      const {\n        status,\n        response,\n        response_encoded: responseEncoded = true\n      } = nativeResponse;\n      const axiosResponse = {\n        data: null,\n        status,\n        statusText: '' + status,\n        config,\n        headers: {},\n        request\n      };\n\n      try {\n        axiosResponse.data = JSON.parse( responseEncoded ? decodeURIComponent(response) : response);\n      } catch (e) {\n        /* eslint-disable */\n        if (process.env.NODE_ENV === 'development') {\n          console.error(e);\n        }\n        axiosResponse.data = { error_msg: e.message, error_code: 0 };\n        /* eslint-enable */\n      }\n\n      settle(resolve, reject, axiosResponse);\n    }\n\n    // onError时替换AccessToken\n    function deleteAccessToken(data) {\n      if (data.headers && data.headers.AccessToken) {\n        data.headers.AccessToken = data.headers.AccessToken.length;\n      }\n      return data;\n    }\n\n    // 异常情况，data应该是没有的，nativeErrorCode 一般是60000\n    function onError(data, nativeErrorCode) {\n      const error = new Error(`native request error: ${nativeErrorCode}`);\n      error.errorCode = nativeErrorCode;\n      error.nativeErrorCode = nativeErrorCode;\n      error.request = request;\n      error.errorType = 'api_error_app';\n      error.config = config;\n      error.toJSON = function () {\n        return {\n          message: this.message,\n          nativeParams: deleteAccessToken(this.request.nativeParams),\n          config: deleteAccessToken(this.config),\n          errorCode: this.errorCode,\n          nativeErrorCode: this.nativeErrorCode\n        };\n      };\n\n      if (compareVersion(appVersion, '4.0.0') > 0) {\n        pinbridge.callNative('JSLogger', 'log', {\n          module: 'h5-isomorphic-request',\n          message: config.url + ' failed, ' + JSON.stringify(deleteAccessToken(nativeParams)),\n          level: 4\n        });\n      }\n\n      reject(error);\n    }\n  })\n}\n","/**\n * @file client.js 浏览器端网络请求适配器\n * @author zongheng(zongheng@pinduoduo.com)\n */\n\nimport xhr from 'axios/lib/adapters/xhr';\n\n/**\n * client端网络请求适配器\n *\n * @param {AxiosRequestConfig} config\n * @return {Promise<any>}\n */\nexport default function clientAdapter(config) {\n  const { clientTimeout, timeout } = config;\n  config.timeout = typeof clientTimeout === 'number' ? clientTimeout : timeout;\n\n  return xhr(config).catch(error => {\n    error.config = error.config || config;\n    throw error;\n  });\n}\n","/**\n * @file env.js 环境判断\n * @author zongheng(zongheng@pinduoduo.com)\n */\nexport const isHutaojie = href => href.includes('hutaojie');\n","/**\n * @file index.js, BaseToast\n * @author tenghu\n */\nimport React from 'react';\nimport cx from 'classnames';\nimport { withStyles } from '@pdd/cui-util';\nimport styles from './index.iso.scss';\n\n/**\n * @visibleName Toast.BaseToast\n */\nfunction BaseToast({ className, ...otherProps }) {\n  return <div {...otherProps} className={cx(styles.root, className)} role='alert' />;\n}\n\nexport default withStyles(styles)(BaseToast);\n","/**\n * @file index.js, Container\n * @author tenghu\n */\nimport React from 'react';\nimport cx from 'classnames';\nimport { withStyles } from '@pdd/cui-util';\nimport styles from './index.iso.scss';\n\n/**\n * @visibleName Toast.Container\n */\nfunction Container({ className, ...otherProps }) {\n  return <div {...otherProps} className={cx(styles.root, className)} />;\n}\n\nexport default withStyles(styles)(Container);\n","/**\n * @file index.js Portal\n * @author tenghu\n */\nimport { PureComponent } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\n/**\n * Portal\n * 应用场景见React.createPortal\n */\nexport default class Portal extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.el = document.createElement('div');\n  }\n  get container() {\n    return (this.props.getContainer && this.props.getContainer()) || document.body;\n  }\n  componentDidMount() {\n    this.container.appendChild(this.el);\n  }\n  componentWillUnmount() {\n    this.container.removeChild(this.el);\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el);\n  }\n}\n\nPortal.propTypes = {\n  /**\n   * 自定义createPortal的container参数，默认为body\n   */\n  getContainer: PropTypes.func\n};\n","/**\n * @file index.js\n * @author tenghu\n */\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { Portal } from '@pdd/cui-util';\n\n/**\n * Controller组件，负责计时和Portal逻辑\n *\n * @visibleName Toast.Controller\n */\nexport default class Controller extends PureComponent {\n  componentDidMount() {\n    // 计时开始\n    this.timeoutId = setTimeout(() => {\n      this.props.onTimeout && this.props.onTimeout();\n      this.timeoutId = 0;\n    }, this.props.duration * 1000);\n  }\n  componentWillUnmount() {\n    // 计时之前结束\n    if (this.timeoutId) {\n      clearTimeout(this.timeoutId);\n    }\n  }\n  render() {\n    const { children, PortalComponent, PortalComponentProps } = this.props;\n\n    return PortalComponent ? <PortalComponent {...PortalComponentProps}>{children}</PortalComponent> : children;\n  }\n}\n\nController.defaultProps = {\n  duration: 2,\n  PortalComponent: Portal\n};\n\nController.propTypes = {\n  /** 计时结束时的回调 */\n  onTimeout: PropTypes.func,\n  /** 持续时间，单位秒，默认2秒 */\n  duration: PropTypes.number,\n  /** Portal组件，默认使用@pdd/cui-util的Portal */\n  PortalComponent: PropTypes.elementType,\n  /** Portal组件的props */\n  PortalComponentProps: PropTypes.object\n};\n","/**\n * @file Toast.js\n * @author tenghu\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseToast from './BaseToast';\nimport Container from './Container';\nimport Controller from './Controller';\n\n/**\n * Toast是一个compound组件，拥有Controller, Container, BaseToast等子组件\n */\nexport default function Toast({ style, className, children, duration, onTimeout, ControllerProps, ContainerProps, BaseToastProps }) {\n  return (\n    <Controller duration={duration} onTimeout={onTimeout} {...ControllerProps} >\n      <Container {...ContainerProps} >\n        <BaseToast style={style} className={className} {...BaseToastProps} >{children}</BaseToast>\n      </Container>\n    </Controller>\n  );\n}\n\nToast.Controller = Controller;\nToast.Container = Container;\nToast.BaseToast = BaseToast;\n\nToast.propTypes = {\n  /**\n   * 透传给子组件BaseToast的 style\n   */\n  style: PropTypes.object,\n  /**\n   * 透传给子组件 BaseToast 的 className\n   */\n  className: PropTypes.string,\n  /**\n   * 透传给子组件 BaseToast 的 children\n   */\n  children: PropTypes.any,\n  /**\n   * 透传给子组件 Controller 的 duration\n   */\n  duration: PropTypes.number,\n  /**\n   * 透传给子组件 Controller 的 onTimeout\n   */\n  onTimeout: PropTypes.func,\n  /**\n   * 透传到子组件 Controller 的 props\n   */\n  ControllerProps: PropTypes.object,\n  /**\n   * 透传到子组件 Container 的 props\n   */\n  ContainerProps: PropTypes.object,\n  /**\n   * 透传到子组件 BaseToast 的 props\n   */\n  BaseToastProps: PropTypes.object\n};\n","/**\n * @file show.js\n * @author tenghu\n * @description\n * show接口\n * 同一时间，仅允许渲染一个Toast弹窗。每次调用show，会立即渲染传入的content，并销毁之前的content\n */\nimport React from 'react';\nimport { renderClient } from '@pdd/cui-util';\nimport Toast from '../Toast';\n\nlet root;\nfunction getRoot() {\n  if (root) {\n    return root;\n  }\n  root = document.createElement('div');\n  document.body.appendChild(root);\n  return root;\n}\n\nfunction getRandomKey() {\n  return `${Math.ceil(Math.random() * Date.now())}`;\n}\n\nlet content = null;\n\nfunction renderContent() {\n  renderClient(content, getRoot());\n}\n\nfunction handleTimeout(cb) {\n  content = null;\n  renderContent();\n  cb && cb();\n}\n\n/**\n * renderToast\n * @param {Object} options - toast配置，会透传给Toast组件，详细请参考Toast的文档\n * @param {number} options.duration - 持续时间，单位秒，默认2秒\n * @param {function} options.onTimeout - 倒计时结束时的回调\n */\nexport default function renderToast({ onTimeout, ...otherProps }) {\n  if (!process.env.BROWSER) {\n    return;\n  }\n  content = (\n    <Toast {...otherProps} key={getRandomKey()}\n      onTimeout={() => handleTimeout(onTimeout)}\n      ControllerProps={{ PortalComponent: null }} />\n  );\n  renderContent();\n}\n","/**\n * @file infoH5.js\n * @author tenghu\n */\nimport renderToast from '../utils/renderToast';\n\n/**\n * infoH5\n * @param {any} msg - 消息内容，透传给Toast组件的children属性\n * @param {Object} [options] - options，会透传给Toast组件，详细请参考Toast的文档\n * @param {number} [options.duration] - 持续时间，单位秒，默认2秒。\n * @param {function} [options.onClose] - 关闭时的回调。透传给Toast的onTimeout属性。\n */\nexport default function infoH5(msg, { onClose, ...otherOptions } = {}) {\n  if (!msg) {\n    return;\n  }\n  renderToast({\n    onTimeout: onClose,\n    children: msg,\n    ...otherOptions\n  });\n}\n","/**\n * @file index.js infoNative\n * @author tenghu\n */\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport infoH5 from './infoH5';\n\nconst NATIVE_TOAST_DURATION = 2000;\n\n/**\n * [原生toast类型](https://docs.pdd.net/pinbridge/ui/JSAlert.html#toast)\n * type = 0: 系统级toast，可以跨页面存在；\n * type = 1: 页面级toast，只在当前页面存在，会随着页面消失而消失；\n * toast默认为 type1，因为：\n * 1. 全局的 toast可能带来问题 #37\n * 2. Android 这边，全局 toast 可能因为没有用户权限或者消息阻塞导致不能弹出\n */\nconst DEFAULT_TOAST_TYPE = 1;\n\nexport default function infoNative(msg, options = {}) {\n  if (!msg) {\n    return;\n  }\n  const type = typeof options.type === 'number' ? options.type : DEFAULT_TOAST_TYPE;\n  invokeBridgeCallNativeFun('JSAlert', 'toast', { message: msg, type })\n    .then(() => {\n      // 原生没有Toast关闭之后的回调，此处手动处理，原生Toast显示2秒\n      setTimeout(() => {\n        options.onClose && options.onClose();\n      }, NATIVE_TOAST_DURATION);\n    })\n    .catch(() => {\n      infoH5(msg, options);\n    });\n}\n","/**\n * @file index.js info\n * @author tenghu\n * @description\n * info接口，toast字符串内容，在APP内则调用原生的toast\n */\nimport supportNativeToast from './supportNativeToast';\nimport infoH5 from './infoH5';\nimport infoNative from './infoNative';\n\nconst DEFAULT_DURATION = 2;\n\nfunction shouldUseNativeToast(duration) {\n  // 原生只显示2s，不支持其他duration设置\n  if (duration !== DEFAULT_DURATION) {\n    return false;\n  }\n  return supportNativeToast();\n}\n\n/**\n * info，hybrate版本\n * @param {string} msg - string内容\n * @param {Object} [options] - 配置参数，会透传给infoH5\n * @param {number} [options.duration] - 持续时间，单位秒，默认2秒。**如果duration不为2，则使用h5实现，因为目前原生只支持2s设置**\n * @param {function} [options.onClose] - 关闭时的回调\n * @param {number} [options.type = 1] - 原生toast专用，默认指定[toast的type=1](https://docs.pdd.net/pinbridge/ui/JSAlert.html#toast)，页面级toast，只在当前页面存在，会随着页面消失而消失；\n */\nexport default function info(msg, options = {}) {\n  const modifiedOptions = {\n    ...options,\n    duration: options.duration || DEFAULT_DURATION\n  };\n\n  shouldUseNativeToast(modifiedOptions.duration) ? infoNative(msg, modifiedOptions) : infoH5(msg, modifiedOptions);\n}\n\nexport { infoH5 };\n","import { getCurrentPlatform, compareVersion, PLATFORM } from '@pdd/platform-util';\n\n// [以下版本开始，支持传入 type = 1，控制toast只出现在当前页面](https://docs.pdd.net/pinbridge/ui/JSAlert.html#toast)\nconst ANDROID_TOAST_VERSION = '4.75.0';\nconst IOS_TOAST_VERSION = '5.52.0';\n\nexport default function supportNativeToast() {\n  const platform = getCurrentPlatform();\n  if (platform.platform === PLATFORM.PddIOS) {\n    return compareVersion(platform.version, IOS_TOAST_VERSION) >= 0;\n  }\n  if (platform.platform === PLATFORM.PddAndroid) {\n    return compareVersion(platform.version, ANDROID_TOAST_VERSION) >= 0;\n  }\n  return false;\n}\n","/**\n * @file 基础常量\n */\n\nimport { PLATFORM } from '@pdd/platform-util';\nimport { isHutaojie } from './env';\n\n/**\n * 是否测试环境\n */\nexport const IS_TEST_ENV = process.env.BROWSER && isHutaojie(location.href);\n\n/**\n * 上报协议里需要上传的runningAppId值，pmm会根据这个id获取到该平台下最新的app前20个版本号，其余归类到others\n */\nexport const RunningAppConfig = {\n  [PLATFORM.PddAndroid]: '6',\n  [PLATFORM.PddIOS]: '5',\n  [PLATFORM.PDDTinyAndorid]: '10',\n  [PLATFORM.WeChat]: '11',\n  [PLATFORM.Weibo]: '12',\n  [PLATFORM.WxApp]: '15',\n  [PLATFORM.QQ]: '13',\n  [PLATFORM.QQApp]: '14',\n  LITE: '9'\n};\n\n/**\n * 默认的归类到Web用户端的appId\n *\n * @ignore\n * @link https://pmm.pdd.net/apm/1/page/web?appId=138&bizSide=pinduoduo&metricId=1054\n */\nexport const DEFAULT_APP_ID = IS_TEST_ENV ? '49' : '138';\n\n/**\n * 默认的归类到Web用户端的bizSide\n * @link https://pmm.pdd.net/apm/1/page/web?appId=138&bizSide=pinduoduo&metricId=1054\n */\nexport const DEFAULT_BIZ_SIDE = 'pinduoduo';\n","/**\n * Central Mobile Tracking 端到端监控: 请求打点\n * @Author: danggui zongheng\n */\nimport { crc32, getCookie, getNetWorkType, throwErrorAsync } from '@pdd/core-util';\nimport { IS_TEST_ENV } from './constants';\n\n/**\n * 返回cmt打点地址\n * @param {string} path cmt path路径\n * @returns {string}\n */\nfunction resolveCmtUrl(path) {\n  if (process.env.BROWSER) {\n    const cmtUrlPrefix = IS_TEST_ENV ? 'cmtw.hutaojie.com' : window.__CMT_HOST__ || 'cmtw.pinduoduo.com';\n    return `https://${cmtUrlPrefix}${path}`;\n  }\n}\n\n/**\n * 打点上报的版本号\n * @type {Number}\n */\nconst TrackingVersion = 1;\n\nconst UID_KEY = 'pdd_user_id';\n\nconst CMT_URL = resolveCmtUrl('/api/ajax');\n\nexport default {\n  /**\n   * 打点\n   */\n  tracking(opts = {}) {\n    // 增加抽样逻辑，如果页面有抽样标志，则命中抽样才上报\n    // 支持放大倍数:1倍不抽样，2倍抽样50%，4倍抽样25%,5倍抽样20%，10倍抽样10%\n    const supportRate = {\n      '1': 1,\n      '2': 0.5,\n      '4': 0.25,\n      '5': 0.2,\n      '10': 0.1\n    };\n    let r = 1; // 默认放大倍数\n    let sampleRate = 1; // 抽样比例随机值大于该值则不上报\n    if(window.__CMT_AMPLIFY_RATE__) {\n      const rate = window.__CMT_AMPLIFY_RATE__;\n      if(supportRate[rate]) {\n        r = +rate;\n        sampleRate = supportRate[rate];\n      } else {\n        throwErrorAsync(new Error(), {\n          error_message: `cmt放大倍数${rate}不合法支持1,2,4,5,10`\n        });\n      }\n    }\n    if(Math.random() > sampleRate) {\n      return;\n    }\n\n    const {\n      requestTime, // 请求时间\n      resTimeConsume, // 响应耗时\n      reqData, // 请求包\n      resData, // 响应包\n      apiUrl, // 请求api\n      statusCode,\n      pageId // 页面id\n    } = opts;\n\n    let reqDataLen = 0;\n    let resDataLen = 0;\n    if(reqData) {\n      reqDataLen = JSON.stringify(reqData).length;\n    }\n    if(resData) {\n      resDataLen = JSON.stringify(resData).length;\n    }\n\n    // 6位数随机整数\n    const randomIntVal = 10 ** 5 + Math.floor(Math.random() * (10 ** 6 - 10 ** 5));\n\n    const send = networkType => {\n      const data = {\n        v: TrackingVersion, // 打点上报版本号，当前为1\n        t: requestTime, // 请求时间，UTC\n        r: randomIntVal, // 随机数，int，6位\n        c: crc32(requestTime + '-' + randomIntVal), // 校验码\n        d: { // 数据\n          t: Date.now(), // 命令字请求时间，UTC\n          tu: apiUrl, // URL\n          n: networkType, // 网络类型，0=UNKNOWN，1=WIFI，2=2G，3=3G，4=4G\n          c: statusCode, // 返回码，建议区分http的返回码，比如>1000为业务错误码，<1000为网络错误码，<0为自定义错误码\n          r: r, // 放大倍数\n          rt: resTimeConsume, // 响应时间(ms)\n          q: reqDataLen, // 请求包大小(byte)\n          p: resDataLen, // 响应包大小(byte)\n          e: { // 扩展字段\n            uid: getCookie(UID_KEY), // 用户ID\n            // eslint-disable-next-line\n            page_id: pageId, // 页面ID\n            model: navigator.userAgent // 机型(不太好判断，暂时丢个UA)\n          }\n        }\n      };\n\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', CMT_URL, true);\n      xhr.withCredentials = true;\n      xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n      xhr.onerror = xhr.ontimeout = xhr.onabort = function () {\n        throw new Error('Network request failed');\n      };\n      xhr.send(JSON.stringify(data));\n    };\n\n    getNetWorkType().then(send);\n  }\n};\n","/**\n * @file 公共的pmm上报接口\n */\n\n/* eslint-disable no-return-assign */\nimport { crc32, getNetWorkType } from '@pdd/core-util';\nimport { RunningAppConfig, DEFAULT_APP_ID, DEFAULT_BIZ_SIDE, IS_TEST_ENV } from './constants';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getUid } from '@pdd/auth';\n\n/**\n * 获取number类型app版本，'5.88.0' => '58800'\n * @param {String} version\n * @returns {Number}\n */\nfunction convertVersion(version) {\n  if (!version) {\n    return 0;\n  }\n\n  // eslint-disable-next-line prefer-const\n  return +version.split('.').map(bit => bit.padStart(2, '0')).join('');\n}\n\n/**\n * 发送请求\n * @param {String} url\n * @param {Object} data\n */\nfunction sendRequest(url, data) {\n  if (getCurrentPlatform().isNativePlatform) {\n    invokeBridgeCallNativeFun('JSNetwork', 'request', {\n      url,\n      method: 'POST',\n      data: JSON.stringify(data),\n      headers: { 'Content-Type': 'application/json;charset=UTF-8' }\n    });\n  } else {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', url, true);\n    // xhr.setRequestHeader('Content-Type', 'application/plain;charset=UTF-8');\n    xhr.withCredentials = true;\n    xhr.send(JSON.stringify(data));\n  }\n}\n\n/**\n * 获取运行平台\n * @returns {String}\n */\nfunction getRunningPlatform() {\n  if (getCurrentPlatform().isLiteNativePlatform) {\n    return RunningAppConfig.LITE;\n  }\n  return RunningAppConfig[getCurrentPlatform().platform] || '-1';\n}\n\n/**\n * 生成上报基础参数\n * @param {Array} data\n * @param {Object} groupConfig\n * @returns {Object}\n */\nasync function getBaseParam(data, groupConfig = {}) {\n  // 6位随机整形\n  // eslint-disable-next-line no-restricted-properties\n  const randomIntVal = Math.pow(10, 5) + Math.floor(Math.random() * (Math.pow(10, 6) - Math.pow(10, 5)));\n  const reportTime = Date.now();\n\n  const appId = String(groupConfig.appId || DEFAULT_APP_ID);\n\n  return {\n    version: convertVersion(getCurrentPlatform().version), // version为appVersion，如4.3.35取值 40335\n    report_time_ms: reportTime, // 请求时间，UTC\n    rand_num: randomIntVal, // 随机数，int，6位\n    crc32: crc32(reportTime + '-' + randomIntVal), // 校验码\n    biz_side: groupConfig.bizSide || DEFAULT_BIZ_SIDE,\n    app: appId,\n    common_tags: {\n      uid: await getUid() || '0', // userId缩写, 如567321\n      runningAppId: appId,\n      runningPlatform: getRunningPlatform(),\n      p: getRunningPlatform(),\n      pagePath: groupConfig.reportPath || location.pathname\n    },\n    datas: data\n  };\n}\n\n/**\n * pmm 数据上报\n * @param {Array} datas\n * @param {string} url\n * @param {Object} groupConfig\n */\nasync function pmmReport(datas = [], url, groupConfig) {\n  const params = await getBaseParam(datas, groupConfig);\n  return sendRequest(url, params);\n}\n\n/**\n * pmm上报地址\n * @param {String} path\n * @returns {String}\n */\nconst resolvePmmUrl = function (path) {\n  const hostname = IS_TEST_ENV ? 'pmmtk.hutaojie.com' : window.__PMM_HOST__ || 'pmmtk-a.pinduoduo.com';\n  return `https://${hostname}/${path}`;\n};\n\n/**\n * 上报Api指标\n * @param {Object} opts\n * @param {Object} groupConfig\n * @see https://note.pdd.net/doc/333608990511079424?root=204652268878319616#z2z5k\n */\nexport function pmmTracking(opts, groupConfig) {\n  const {\n    method,\n    requestTime, // 请求时间\n    resTimeConsume, // 响应耗时\n    reqData, // 请求包\n    resData, // 响应包\n    apiUrl, // 请求api\n    statusCode,\n    pageId // 页面id\n  } = opts;\n\n  const reqDataLen = reqData ? JSON.stringify(reqData).length : 0;\n  const resDataLen = resData ? JSON.stringify(resData).length : 0;\n\n  const send = networkType => {\n    const data = {\n      category: 1,\n      type: 100,\n      id_raw_value: apiUrl.split('?')[0],\n      timestamp: requestTime, // 请求时间，UTC\n      tags: {\n        network: String(networkType), // 网络类型，取值：0=UNKNOWN，1=WIFI，2=2G，3=3G，4=4G\n        code: String(statusCode), // 取值：200等\n        method: method ? method.toUpperCase() : 'POST' // 为 httpMethod，GET、POST等\n        // conn: 为连接类型，取值：1=短连接，2=长连接，3=Titan长连,4=Titan短连\n        // srcPageId为源pageId，取值：45；如果业务没设值，默认值取-1\n      },\n      lvalues: {\n        rspT: { values: [resTimeConsume] },\n        reqP: { values: [reqDataLen] },\n        rspP: { values: [resDataLen] }\n      },\n      extras: {\n        srcPageId: pageId\n      },\n      api_ratio: 1\n    };\n\n    return pmmReport([data], resolvePmmUrl('api/pmm/api'), groupConfig);\n  };\n\n  return getNetWorkType().then(send);\n}\n","/**\n * @file index.js client端axios插件\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport buildURL from 'axios/lib/helpers/buildURL';\nimport buildFullPath from 'axios/lib/core/buildFullPath';\nimport { parseQuery, getCookie, buildQuery } from '@pdd/core-util';\nimport { compareVersion, PLATFORM, isWebBundle, getCurrentPlatform } from '@pdd/platform-util';\nimport { throwErrorAsync } from '@pdd/core-util';\nimport { errors, getMsgFromCode } from '@pdd/error-status';\nimport { login, getAccessToken } from '@pdd/auth';\nimport navigation from '@pdd/navigation';\nimport { info } from '@pdd/cui-toast';\nimport { getUserInfo } from '@pdd/native-util';\nimport cmt from '../util/cmt';\nimport { pmmTracking } from '../util/pmm';\n\nconst RISK_CONTROL_CODE = 54001;\n\nconst UID_KEY = 'pdd_user_id';\n\nconst handleVerifyAuthInNative = (() => {\n  if(!process.env.BROWSER) {\n    return false;\n  }\n  // 新版APP接口层处理风控事件\n  const { platform, version } = getCurrentPlatform();\n  const handleInIOS = platform === PLATFORM.PddIOS && compareVersion(version, '4.45.0') >= 0;\n  const handleInAndroid = platform === PLATFORM.PddAndroid && compareVersion(version, '4.40.0') >= 0;\n  return handleInIOS || handleInAndroid;\n})();\n\nexport * from './common';\n\n// h5走proxy去options\nexport const domainProxy = useGlbDomain => {\n  const PROXY_BASE = location.protocol + '//' + location.host + '/proxy/api/';\n  const { isNativePlatform, isTinyNativePlatform } = getCurrentPlatform();\n\n  useGlbDomain = useGlbDomain || isNativePlatform || isTinyNativePlatform;\n\n  return {\n    request: config => {\n      config.baseURL = useGlbDomain ? config.baseURL : PROXY_BASE;\n      return config;\n    }\n  };\n};\n\n// todo: 推荐接口需要额外参数，这个应该业务方去传，先写着\nexport const extendQuery = () => {\n  return {\n    request: config => {\n      const uidP = isWebBundle() ? getUserInfo().then(({ user_id }) => user_id).catch(() => 0) : Promise.resolve(0);\n      return uidP.then(uid => {\n        config.params = {\n          pdduid: uid || parseInt(getCookie(UID_KEY), 10) || 0,\n          // eslint-disable-next-line\n          is_back: parseQuery(window.location.search).is_back === '1' ? '1' : null,\n          ...config.params\n        };\n\n        return config;\n      });\n    }\n  };\n};\n\n// 附加相关token\nexport const appendHeader = () => {\n  return {\n    request: async (config) => {\n      const headers = config.headers;\n\n      if(config.method === 'post') {\n        headers['Content-Type'] = 'application/json;charset=UTF-8';\n      }\n\n      const accessToken = await getAccessToken();\n\n      if(accessToken) {\n        headers.AccessToken = accessToken;\n      }\n\n      // 新版APP接口层处理风控事件 APP headers 自动添加 VerifyAuthToken\n      const verifyAuthToken = handleVerifyAuthInNative ? null : localStorage.getItem('VerifyAuthToken');\n\n      if(verifyAuthToken) {\n        headers.VerifyAuthToken = verifyAuthToken;\n      }\n\n      return config;\n    }\n  };\n};\n\nexport const requestLogger = pageInfo => {\n  const isNative = getCurrentPlatform().isNativePlatform;\n\n  const request = config => {\n    config.requestTime = Date.now();\n    return config;\n  };\n\n  const response = response => {\n    const { data, config } = response;\n    config.resTimeConsume = Date.now() - response.config.requestTime;\n    const logParams = {\n      requestTime: config.requestTime,\n      resTimeConsume: config.resTimeConsume,\n      reqData: { params: config.params, data: config.data }, // 请求包\n      resData: data,\n      apiUrl: buildURL(buildFullPath(config.baseURL, config.url), config.params, config.paramsSerializer),\n      statusCode: 200,\n      pageId: pageInfo.pageId\n    };\n\n    cmt.tracking(logParams);\n\n    pmmTracking({\n      ...logParams,\n      method: config.method,\n    });\n\n    return response;\n  };\n\n  const responseError = error => {\n    const response = error.response;\n    const config = error.config;\n\n    if(process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line\n      console.error(error);\n    }\n\n    const errorInfo = {\n      sub_op: 'api_error',\n      url: config.method + ':' + config.url,\n      error_code: error.errorCode,\n      error_message: error.message,\n      error_type: error.errorType,\n      params: JSON.stringify({ params: config.params, data: config.data })\n    };\n\n    if(!response) {\n      // todo: 请求未发出的错误老逻辑是不上报到cmt的，后续再看要不要加上\n      // todo: 默认error_code为0可能不太合理，容易和客户端的error_code混了 2. 应该还可以附加更多信息\n      errorInfo.errorCode = errorInfo.errorCode || 0;\n      throwErrorAsync(error, errorInfo);\n      throw error;\n    }\n\n    const { status, statusText } = response;\n    const data = response.data || { error_code: 0 };\n    error.errorCode = error.errorCode || data.error_code;\n    errorInfo.http_code = status;\n    errorInfo.statusText = statusText;\n    errorInfo.resData = response.data;\n    throwErrorAsync(error, errorInfo);\n\n    // 非端内需要自行上报cmt\n    if(!isNative) {\n      // 有response就上报cmt\n      const logParams = {\n        requestTime: config.requestTime,\n        resTimeConsume: Date.now() - config.requestTime,\n        reqData: { params: config.params, data: config.data }, // 请求包\n        resData: response.data,\n        apiUrl: buildURL(buildFullPath(config.baseURL, config.url), config.params, config.paramsSerializer),\n        statusCode: parseInt(data.error_code, 10) || status,\n        errorCode: data.error_code,\n        pageId: pageInfo.pageId\n      };\n      cmt.tracking(logParams);\n\n      pmmTracking({\n        ...logParams,\n        method: config.method,\n      });\n    }\n\n    throw error;\n  };\n\n  return isNative ? { responseError } : { request, response, responseError };\n};\n\nlet isDoingLogin = false; // 标记是否在登录中，防止弹多个登录框\nexport const responseErrorHandler = () => {\n  return {\n    responseError: error => {\n      const errorCode = parseInt(error.errorCode, 10);\n      const isNativePlatform = getCurrentPlatform().isNativePlatform;\n      switch (errorCode) {\n        // 如果40001就抛出强制登录事件\n        case errors.AUTHENTICATION_FAILED:\n          if(!isDoingLogin) {\n            isDoingLogin = true;\n            login({ silent: false }).then(() => {\n              isNativePlatform && navigation.reload();\n            }).catch(e => {\n              isDoingLogin = false;\n              isNativePlatform && navigation.back();\n              throw e;\n            });\n          }\n          break;\n\n        case RISK_CONTROL_CODE:\n          handleRiskControlError(error.response.data || {});\n          break;\n\n        default: {\n          if(error.config && error.config.defaultErrorHandler) {\n            error.config.defaultErrorHandler(error);\n          } else {\n            info(getMsgFromCode(errorCode));\n          }\n        }\n      }\n\n      throw error;\n    }\n  };\n};\n\nfunction handleRiskControlError(data) {\n  // 新版APP接口层处理风控事件\n  if(handleVerifyAuthInNative) {\n    return;\n  }\n\n  // 如果54001就抛出风控验证事件\n  const { verify_auth_token } = data;\n\n  // 滑块转验证码页面\n  localStorage.setItem('VerifyAuthToken', verify_auth_token);\n  navigation.uniformForward(`/psnl_verification.html?${buildQuery({\n    VerifyAuthToken: verify_auth_token,\n    from: location.href\n  })}`);\n}\n","/**\n * @file client.js 浏览器端axios创建函数\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { create } from './create';\nimport { getCurrentPlatform, isWebBundle } from '@pdd/platform-util';\nimport nativeRequestAdapter from './adapters/native';\nimport clientRequestAdapter from './adapters/client';\nimport { isHutaojie } from './util/env';\nimport {\n  requestLogger,\n  appendHeader,\n  extendQuery,\n  bizErrorCheck,\n  responseErrorHandler,\n  retrieveData,\n  tracker\n} from './plugins';\n\nconst TEST = '//apiv2.hutaojie.com/';\n\nconst PROD = 'https://api.pinduoduo.com/';\n\n/**\n * @type {createClientAxios}\n */\nexport const createAxios = ({ pageInfo, useGlbDomain }, defaultRequestConfig) => {\n  const { isNativePlatform, isTinyNativePlatform } = getCurrentPlatform();\n  const isNative = isNativePlatform || isTinyNativePlatform;\n\n  const { http, usePlugins } = create({\n    baseURL: getBaseURL(useGlbDomain || isNative),\n    withCredentials: true,\n    adapter: isNative ? nativeRequestAdapter : clientRequestAdapter,\n    headers: {},\n    ...defaultRequestConfig\n  });\n\n  const plugins = [\n    bizErrorCheck(),\n    requestLogger(pageInfo),\n    appendHeader(),\n    extendQuery(),\n    responseErrorHandler(),\n    retrieveData()\n  ];\n\n  if(process.env.NODE_ENV === 'development' && window.DEBUG) {\n    plugins.unshift(tracker());\n  }\n\n  usePlugins(plugins);\n\n  return http;\n};\n\nfunction getBaseURL(useGlbDomain) {\n  useGlbDomain = useGlbDomain || location.hostname === 'csr.pddpic.com';\n  const protocol = isWebBundle() ? 'https:' : location.protocol;\n  const baseURL = isHutaojie(location.href) ? protocol + TEST : PROD;\n  const proxyBase = location.protocol + '//' + location.host + '/proxy/api/';\n\n  return useGlbDomain ? baseURL : proxyBase;\n}\n","/**\n * index.js 入口文件\n * @author zongheng(zongheng@pinduoduo.com)\n */\n\nimport { createAxios as createServerAxios } from './lib/server';\nimport { createAxios as createClientAxios } from './lib/client';\n\n/**\n * @external {AxiosInstance} https://github.com/axios/axios#instance-methods\n */\n\n/**\n * @external {AxiosRequestConfig} https://github.com/axios/axios#request-config\n */\n\n/**\n * @typedef {AxiosRequestConfig} IsomorphicRequestConfig\n * @property {string} [name] 请求标识名称，server环境下会用于cat打点的name，默认为接口的path，当path不可枚举时，使用该属性\n * @property {function(error: AxiosError): *} [defaultErrorHandler] client环境下除登录，风控，限流之外的默认错误处理方法，\n * 默认为根据errorCode拿到对应的errorMessage弹一个toast\n * @property {number} [serverTimeout] 单位ms, 默认1200ms。仅在server生效，优先级高于timeout。\n * @property {number} [clientTimeout] 单位ms。仅在client生效，优先级高于timeout。⚠️ app仅在>=5.24.0(tiny包>=5.81.0)支持；ios timeout的精度为1s（向下取整），比如传入1200ms，实际是1s的超时\n * @property {number} [timeout] <deprecated>单位ms。即将废弃，请使用clientTimeout和serverTimeout替换。在server和非app的client生效。\n * @property {boolean} [useNativeAntiToken=false] 是否使用端上生成反爬token，仅在app版本大于等于4.69.0的环境下生效，可以节约js生成anti token的时间\n * @property {boolean} [useRawResponse=false] 是否使用原始的请求响应(https://github.com/axios/axios#response-schema)，默认false仅返回响应中的data字段值\n * @property {boolean} [encodeNativeResponse=true] 端上是否对请求结果进行encode，仅在app版本大于等于4.76.0的环境下生效，可以减少网络请求时间，对数据量大的response效果比较明显\n */\n\n/**\n * 创建一个服务端用的axios实例\n *\n * @typedef {function} createServerAxios\n * @param {Object} requestContext 请求上下文\n * @param {Request} requestContext.req 服务端环境下的请求对象\n * @param {Response} requestContext.req 服务端环境下的响应对象\n * @param {string} requestContext.accessToken，服务端环境下的用户token\n * @param {IsomorphicRequestConfig} [defaultRequestConfig] 要覆盖的默认请求配置项\n * @return {AxiosInstance} axios 实例\n */\n\n/**\n * 创建一个浏览器端上用的axios实例\n *\n * @typedef {function} createClientAxios\n * @param {{pageInfo: {pageId: number}, useGlbDomain: boolean}} clientAxiosConfig 浏览器端axios配置项\n * @param {{pageId: number}} clientAxiosConfig.pageInfo 页面信息，用于cmt埋点\n * @param {boolean} [clientAxiosConfig.useGlbDomain=false] 是否使用glb的api域名，会造成preflight\n * @param {IsomorphicRequestConfig} [defaultRequestConfig] 要覆盖的默认请求配置项\n * @return {AxiosInstance} axios 实例\n */\n\n/**\n * 创建一个默认行为的axios实例，已经安装好了风控，uid，监控等各类插件，服务端上会调用createServerAxios创建axios实例，浏览器端会调用createClientAxios\n *\n * @type {createServerAxios|createClientAxios}\n */\nexport const createDefaultAxios = process.env.BROWSER ? createClientAxios : createServerAxios;\n\nexport { create } from './lib/create';\n","// 业务异常检测\nexport const bizErrorCheck = () => {\n  return {\n    response: response => {\n      const { data, config, request } = response;\n\n      if (data && data.error_code && data.success !== true) {\n        const message = data.error_msg || 'unknown biz error';\n        const error = new Error(message);\n        error.errorType = 'api_biz_error';\n        error.errorCode = data.error_code;\n        error.config = config;\n        error.request = request;\n        error.response = response;\n\n        throw error;\n      }\n\n      return response;\n    },\n\n    responseError: error => {\n      if (!error.response) {\n        error.errorType = 'api_http_error';\n        throw error;\n      }\n\n      const { data } = error.response;\n\n      if (data && data.error_code) {\n        error.message = data.error_msg || error.message;\n        error.errorCode = data.error_code;\n        error.errorType = 'api_biz_error';\n      }\n\n      throw error;\n    }\n  };\n};\n\n// 获取实际数据\nexport const retrieveData = () => {\n  return {\n    response: response => response.config.useRawResponse ? response : response.data\n  };\n};\n\n// 调试跟踪\nexport const tracker = () => {\n  /* eslint-disable no-console */\n  return {\n    requestError: error => {\n      const { baseURL, url, data, params, method, headers } = error.config;\n      console.group('Axios Request requestError:' + url);\n      console.log('request:', { baseURL, url, data, params, method, headers });\n      console.error('error:', error);\n      console.groupEnd();\n      throw error;\n    },\n\n    response: response => {\n      const { baseURL, url, data, params, method, headers } = response.config;\n      console.group('Axios Request responseSuccess:' + url);\n      console.log('request:', { baseURL, url, data, params, method, headers });\n      console.log('response:', response);\n      console.groupEnd();\n      return response;\n    },\n\n    responseError: error => {\n      const { baseURL, url, data, params, method, headers } = error.config;\n      console.group('Axios Request responseError:' + url);\n      console.log('request:', { baseURL, url, data, params, method, headers });\n      console.log('response:', error.response);\n      console.error('error:', error);\n      console.groupEnd();\n      throw error;\n    }\n  };\n  /* eslint-enable no-console */\n};\n","/**\n * @file LazyContainer.js\n * @author tenghu\n */\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport LazyLoader from './LazyImage/LazyLoader';\nimport LazyImageContext from './LazyImage/Context';\n\nexport default function LazyContainer(props) {\n  const { rootMargin, rootRef, children, ...otherProps } = props;\n  const [lazyLoader, setLazyLoader] = useState(null);\n\n  // 如果不传rootRef，默认创建一个container\n  const useDefaultContainer = rootRef === undefined;\n  const containerRef = useDefaultContainer ? useRef(null) : rootRef;\n\n  useEffect(() => {\n    const options = { thresholds: rootMargin };\n    if (containerRef) {\n      options.container = containerRef.current;\n    }\n    const newLazyLoader = new LazyLoader(options);\n    setLazyLoader(newLazyLoader);\n\n    return () => newLazyLoader.destroy();\n  }, []);\n\n  const contextValue = useMemo(() => {\n    return { lazyLoader };\n  }, [lazyLoader]);\n\n  return (\n    <LazyImageContext.Provider value={contextValue}>\n      {useDefaultContainer ? (\n        <div ref={containerRef} {...otherProps}>\n          {children}\n        </div>\n      ) : (\n        children\n      )}\n    </LazyImageContext.Provider>\n  );\n}\n\nLazyContainer.propTypes = {\n  /**\n   * 预加载距离，透传到[Intersection observer的rootMargin](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#Intersection_observer_options)\n   */\n  rootMargin: PropTypes.string,\n  /**\n   * 滚动容器的ref，相应dom节点透传到[Intersection observer的root](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#Intersection_observer_options)，\n   * 不传rootRef时，默认会创建一个div作为root\n   * 也可以传入null，则不创建默认的root，这时IntersectionObserver默认的root是浏览器视窗\n   */\n  rootRef: PropTypes.object,\n  children: PropTypes.node.isRequired,\n  /**\n   * @deprecated 请使用rootMargin\n   */\n  thresholds: PropTypes.string\n};\n\nLazyContainer.defaultProps = {\n  rootMargin: '300px',\n  thresholds: '300px'\n};\n","/**\n * @file getDefaultLazyLoader.js\n * @author tenghu\n */\nimport LazyLoader from './LazyLoader';\n\nlet lazyLoader;\n\n/**\n * 默认的LazyLoader对象工厂函数，供LazyImage组件使用\n */\nexport default () => {\n  if (!lazyLoader) {\n    lazyLoader = new LazyLoader();\n  }\n  return lazyLoader;\n};\n","/**\n * @file LazyImage.Context.js\n * @author tenghu\n */\nimport React from 'react';\nimport getDefaultLazyLoader from './getDefaultLazyLoader';\n\nexport default React.createContext({\n  get lazyLoader() {\n    return getDefaultLazyLoader();\n  }\n});\n","import { LAZYLOAD_CONFIG } from './constants';\nimport { getFallbackUrl, getRetryLimit, isHttp, checkImageProtocol } from '@pdd/cui-image';\nimport { throwErrorAsync } from '@pdd/core-util';\n\nif (process.env.BROWSER) {\n  require('intersection-observer');\n}\n\nfunction getRetryCount(el) {\n  return parseInt(el.dataset.retryCount, 10) || 0;\n}\n\nfunction getErrorMsg(el) {\n  const retryCount = getRetryCount(el);\n  return retryCount ? `lazy_image_error_retry_${retryCount}` : 'lazy_image_error';\n}\n\nconst HOSTNAME_REG = /\\/\\/([\\w+.-]+)\\//;\nfunction getHost(url) {\n  return (url.match(HOSTNAME_REG) || [])[1] || '';\n}\n\nfunction recordLoadError(el, useImageSdk) {\n  const src = el.src;\n  const errorMsg = getErrorMsg(el);\n  const host = getHost(src);\n  const error = new Error(errorMsg);\n  throwErrorAsync(error, { payload: { src, host, useImageSdk }, error_msg: errorMsg });\n}\n\nconst PROCESSED_ATTR = 'data-was-processed';\n\n// 清除lazyload已加载状态，支持重新加载新的src\n// 目前vanilla-lazyload还不支持该功能，已经加载完成，想要加载新的src，必须清除之前的状态\n// 参考：\n//    https://github.com/verlok/lazyload/issues/324#issuecomment-472195078\n//    https://github.com/verlok/lazyload/issues/361\nfunction resetLazyloadStatus(el) {\n  el.classList.remove('error');\n  el.removeAttribute(PROCESSED_ATTR);\n}\n\n// 临时修复[issue 11的问题](https://gitlab.hutaojie.com/pdd-fe-common/lazy-image/issues/11)\n// copy开源库的destory实现，https://github.com/verlok/lazyload/blob/12.0.0/src/lazyload.js#L35\n// 但不要重置_settings和_elements，因为这两个属性被图片load事件的handler引用，重置掉的话会引起报错\nfunction destoryLazyloadInstance(lazyload) {\n  if (lazyload._observer) {\n    lazyload._elements.forEach(element => {\n      lazyload._observer.unobserve(element);\n    });\n    lazyload._observer = null;\n  }\n  // lazyload._elements = null; 注释掉这行有问题的代码\n  // lazyload._settings = null; 注释掉这行有问题的代码\n}\n\n/**\n * LazyLoader\n * @description\n * 封装vanilla-lazyload，添加以下逻辑：\n * 1. 加载失败重试\n * 2. 加载失败上报\n */\nexport default class LazyLoader {\n  /**\n   * @param {object} [options] - 配置参数\n   * @param {HTMLElement} options.container - 容器的dom对象\n   * @param {string} options.thresholds = '100px' - 预加载距离，对应[vanilla-lazyload的thresholds](https://github.com/verlok/lazyload#options)\n   */\n  constructor(options = {}) {\n    if (process.env.BROWSER) {\n      const LazyLoad = require('vanilla-lazyload');\n      const targetOptions = {\n        ...LAZYLOAD_CONFIG,\n        thresholds: options.thresholds || LAZYLOAD_CONFIG.thresholds,\n        // eslint-disable-next-line camelcase\n        callback_error: async el => {\n          const useImageSdk = await checkImageProtocol();\n          recordLoadError(el, useImageSdk);\n          if (!useImageSdk) {\n            this._retry(el);\n          }\n        }\n      };\n\n      if (options.container) {\n        targetOptions.container = options.container;\n      }\n      this._lazyLoad = new LazyLoad(\n        targetOptions,\n        [] // 传个空数组，这样Lazyload初始化时不会处理任何元素，需要后续通过update方法专门指定\n      );\n    }\n  }\n\n  start({ el, src }) {\n    this._start({ el, src, retryCount: 0 });\n  }\n\n  destroy() {\n    this._lazyLoad && destoryLazyloadInstance(this._lazyLoad);\n  }\n\n  _start({ el, src, retryCount }) {\n    resetLazyloadStatus(el);\n    el.dataset.src = src;\n    el.dataset.retryCount = retryCount;\n    this._lazyLoad && this._lazyLoad.update([el]);\n  }\n\n  /**\n   * 重试\n   * @description\n   * 1. 总共重试3次\n   * 2. 第一次重试延后0ms，后续每次递增400ms\n   * 参考emage: https://gitlab.hutaojie.com/pdd-fe-common/enhance-image/blob/master/src/index.ts#L298\n   */\n  _retry(el) {\n    if (!isHttp(el.src)) {\n      return;\n    }\n    const retryCount = getRetryCount(el);\n    if (retryCount >= getRetryLimit()) {\n      return;\n    }\n\n    setTimeout(() => {\n      this._start({\n        el,\n        src: getFallbackUrl(el.src, retryCount),\n        retryCount: retryCount + 1\n      });\n    }, retryCount * 400);\n  }\n}\n","import getConfig from './getConfig';\n\nexport default () => getConfig().getRetryLimit();\n","export const CLASS_NAMES = {\n  IMAGE: 'pdd-lazy-image'\n};\n\nexport const LAZYLOAD_CONFIG = {\n  thresholds: '100px'\n};\n","/**\n * 获取URL对象\n * @param {string} url -\n * @returns {object} URL对象\n */\nexport default function getURLObject(url) {\n  if (typeof URL === 'function' && !process.env.BROWSER) {\n    return new URL(url);\n  }\n\n  const a = document.createElement('a');\n  a.href = url;\n\n  return a;\n}\n","/**\n * @file getInitialUrl.js\n * @author tenghu\n * @description\n * 应用场景：客户端懒加载图片之前，拆分图片url的域名为备用域名\n */\nimport getConfig from './getConfig';\nimport InitialUrlCalculator from './InitialUrlCalculator';\n\nlet calculator;\nexport default function getInitialUrl(url, uid) {\n  if (!calculator) {\n    calculator = new InitialUrlCalculator(getConfig());\n  }\n  return calculator.getInitialUrl(url, uid);\n}\n","/**\n * @file InitialUrlCalculator.js\n * @author tenghu\n * @description\n * 应用场景：客户端懒加载图片之前，拆分图片url的域名为备用域名\n */\n\nimport getURLObject from '../utils/getURLObject';\nimport getDomainByBucketId from '../utils/getDomainByBucketId';\nimport isHttp from '../utils/isHttp';\n\nexport default class InitialUrlCalculator {\n  constructor(config) {\n    this._config = config;\n  }\n  _getBackupDomain(host, uid) {\n    const config = this._config.getBackupDomainConfig(host);\n    const domains = Object.keys(config);\n    const bucketId = parseInt(+uid.slice(-4), 10);\n    // 只有一个备用域名时，不进行替换\n    const backupDomain = domains.length > 1 && bucketId >= 0 && getDomainByBucketId(config, bucketId);\n    return backupDomain || host;\n  }\n  /**\n     * 替换传入url的域名为备用域名\n     * @param {string} url - 原url\n     * @param {string} uid - 用户id，用于计算固定的备用域名\n     * @returns {string} - 新url\n     */\n  getInitialUrl(url, uid) {\n    if (!url) {\n      return '';\n    }\n    if (!isHttp(url)) {\n      return url;\n    }\n    uid = '' + uid;\n    if (!uid) {\n      return url;\n    }\n\n    const urlObj = getURLObject(url);\n    urlObj.host = this._getBackupDomain(urlObj.host, uid);\n    return urlObj.toString();\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getInitialUrl } from '@pdd/cui-image';\nimport { getUid } from '@pdd/auth';\nimport { throwErrorAsync } from '@pdd/core-util';\nimport { CLASS_NAMES } from './constants';\nimport Context from './Context';\nimport styles from './index.scss';\n\nasync function replaceUrlDomain(src) {\n  let newUrl = src;\n  let uid;\n  try {\n    uid = await getUid();\n    newUrl = getInitialUrl(src, uid);\n  } catch (e) {\n    const errorMsg = 'lazy_image_error: 兜底域名替换失败';\n    const replaceDomainError = new Error(errorMsg);\n    throwErrorAsync(replaceDomainError, { payload: { src, uid }, error_msg: errorMsg });\n  }\n  return newUrl;\n}\n\nexport default class LazyImage extends React.Component {\n  static contextType = Context;\n  myRef = React.createRef();\n\n  componentDidMount() {\n    this._startLazyLoad();\n  }\n\n  componentDidUpdate() {\n    this._startLazyLoad();\n  }\n\n  async _startLazyLoad() {\n    const src = this.props.src;\n    if (this._lastSrc === src) {\n      return;\n    }\n\n    if (this.context && this.context.lazyLoader) {\n      this._lastSrc = src;\n      const newUrl = await replaceUrlDomain(src);\n      const el = this.myRef.current;\n      if (!el) {\n        // img被销毁了就不需要懒加载了\n        return;\n      }\n      this.context.lazyLoader.start({ el, src: newUrl });\n    }\n  }\n\n  render() {\n    const { src, className = '', ...otherProps } = this.props;\n    return <img ref={this.myRef} {...otherProps} className={`${CLASS_NAMES.IMAGE} ${className}`} />;\n  }\n}\n\nLazyImage.propTypes = {\n  /**\n   * @type {string}\n   * @description 懒加载图片地址\n   */\n  src: PropTypes.string.isRequired,\n  /**\n   * @type {string}\n   * @description 类名\n   */\n  className: PropTypes.string\n};\n\nif (process.env.NODE_ENV !== 'production' && process.env.BROWSER) {\n  if (styles && Object.keys(styles).length > 0) {\n    // 使用CSS Modules构建时，styles上会对外暴露内部定义的css类名\n    console.error('lazy-image: index.scss文件的构建配置有误，不能使用CSS Modules！！！');\n  }\n}\n","/**\n * @file retryCountHelper.js\n * @author tenghu\n */\nconst RETRY_COUNT_KEY = 'cuiRetryCount';\n\n/**\n *\n * @param {HTMLElement} img - 图片dom元素\n * @param {number} retryCount - retry次数\n */\nexport function setRetryCount(img, retryCount) {\n  img.dataset[RETRY_COUNT_KEY] = retryCount;\n}\n\n/**\n *\n * @param {HTMLElement} img - 图片dom元素\n * @returns {number} - retry次数\n */\nexport function getRetryCount(img) {\n  return parseInt(img.dataset[RETRY_COUNT_KEY]) || 0;\n}\n","import recordError from '../utils/recordError';\nimport getURLObject from '../utils/getURLObject';\nimport { getRetryCount } from './retryCountHelper';\n\nexport default function recordLoadError(el, useImageSdk) {\n  const src = el.getAttribute('src'); // el.src可能取到css给的兜底图片\n\n  let errorMsg;\n  let host;\n  if (!src) {\n    errorMsg = 'cui_image_error_empty_src';\n  } else {\n    const retryCount = getRetryCount(el);\n    errorMsg = retryCount ? `cui_image_error_retry_${retryCount}` : 'cui_image_error';\n    host = getURLObject(src).host;\n  }\n\n  recordError({\n    errorMsg,\n    payload: { src, host, useImageSdk }\n  });\n}\n","import getConfig from './getConfig';\nimport LoadErrorHandler from './LoadErrorHandler';\nimport getFallbackUrl from './getFallbackUrl';\n\nlet handler;\nexport default function handleLoadError(img) {\n  if (!handler) {\n    handler = new LoadErrorHandler({ config: getConfig(), getFallbackUrl });\n  }\n  return handler.handleLoadError(img);\n}\n","/**\n * @file LoadErrorHandler.js\n * @description\n * 监控图片元素的加载失败事件，重试并上传错误日志\n */\nimport { getRetryCount, setRetryCount } from './retryCountHelper';\nimport recordLoadError from './recordLoadError';\nimport isHttp from '../utils/isHttp';\nimport checkImageProtocol from '../utils/checkImageProtocol';\n\nconst RETRY_DURATION_UNIT = 400; // 重试之间的间隔时间单元\n\n/**\n * 检查img是否已经加载失败\n * img.complete代表图片加载完成了（成功或者失败）\n * img.naturalHeight代表src原图的高度，如果加载失败拿不到图片，img.naturalHeight是0\n */\nconst isLoadFailed = img => img.complete && img.naturalHeight === 0;\n// retry结束后，reset状态，以备下次retry\nconst resetWhenRetryFinished = img => setRetryCount(img, 0);\nconst sleep = async ms => new Promise(resolve => setTimeout(resolve, ms));\n\nexport default class LoadErrorHandler {\n  constructor({ config, getFallbackUrl, retryDurationUnit }) {\n    this._config = config;\n    this._getFallbackUrl = getFallbackUrl;\n    this._retryDurationUnit = retryDurationUnit || RETRY_DURATION_UNIT;\n  }\n\n  /**\n     * 为img元素增加失败重试和错误上报能力\n     * @param {HTMLImageElement} img - 图片元素\n     * @returns {Function} - cleanup函数，清除副作用\n     */\n  handleLoadError(img) {\n    this._handleError = async () => {\n      const useImageSdk = await checkImageProtocol();\n      recordLoadError(img, useImageSdk);\n      if (!useImageSdk) {\n        if (img.getAttribute('src')) {\n          if (!isHttp(img.src)) {\n            return;\n          }\n          // img.src可能取到css给的兜底图片\n          await this._retry(img);\n        }\n      }\n    };\n    this._handleLoad = () => {\n      resetWhenRetryFinished(img);\n    };\n    img.addEventListener('error', this._handleError);\n    img.addEventListener('load', this._handleLoad);\n\n    // 如果已经加载失败，立即开始重试\n    if (isLoadFailed(img)) {\n      this._handleError(img);\n    }\n\n    return () => {\n      img.removeEventListener('error', this._handleError);\n      img.removeEventListener('load', this._handleLoad);\n    };\n  }\n\n  _loadFallbackUrl(img) {\n    if (!isLoadFailed(img)) {\n      return;\n    }\n    const retryCount = getRetryCount(img);\n    img.src = this._getFallbackUrl(img.src, retryCount);\n    setRetryCount(img, retryCount + 1);\n  }\n\n  /**\n     * 加载失败重试\n     * @description\n     * 1. 达到重试次数上限后，停止重试\n     * 2. 第一次重试延后0ms，后续每次递增固定时间\n     */\n  async _retry(img) {\n    const retryCount = getRetryCount(img);\n\n    if (retryCount >= this._config.getRetryLimit()) {\n      resetWhenRetryFinished(img);\n      return;\n    }\n\n    await sleep(retryCount * this._retryDurationUnit);\n    this._loadFallbackUrl(img);\n  }\n}\n","/**\n * @file CdnImgConfigProvider.js\n * @author tenghu\n */\nimport React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Config from '../Config';\nimport InitialUrlCalculator from '../InitialUrlCalculator';\n\nexport const CdnImgConfigContext = React.createContext({});\n\nexport default function CdnImgConfigProvider({ uid, config, children }) {\n  const initialUrlCalculator = useMemo(() => {\n    return new InitialUrlCalculator(new Config(config));\n  }, [config]);\n\n  const contextValue = useMemo(() => {\n    return {\n      getInitialUrl(url) {\n        return initialUrlCalculator.getInitialUrl(url, uid);\n      }\n    };\n  }, [uid, initialUrlCalculator]);\n\n  return <CdnImgConfigContext.Provider value={contextValue}>{children}</CdnImgConfigContext.Provider>;\n}\n\nCdnImgConfigProvider.propTypes = {\n  /**\n     * 用户 id，用于选择备用域名\n     */\n  uid: PropTypes.string,\n  /**\n     * 动态的容灾配置\n     */\n  config: PropTypes.object\n};\n","/**\n * @file Image.js\n * @author tenghu\n */\nimport React, { useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport handleLoadError from './handleLoadError';\nimport { CdnImgConfigContext } from './CdnImgConfigProvider';\nimport recordError from './utils/recordError';\n\nfunction getNewSrc(src, getInitialUrl) {\n  let newSrc;\n  try {\n    newSrc = getInitialUrl(src);\n  } catch (error) {\n    recordError({ errorMsg: 'cui-image: 替换备用域名失败', payload: { src }, error });\n    newSrc = src;\n  }\n  return newSrc;\n}\n\n/**\n * Image组件，支持加载失败重试\n */\nexport default function Image({ src, ...otherProps }) {\n  if (process.env.NODE_ENV !== 'production') {\n    !src && console.error('cui_image_error_empty_str: src不能为空！');\n  }\n  useEffect(() => {\n    const clearup = handleLoadError(imgRef.current);\n    return () => clearup();\n  }, []);\n\n  const imgRef = useRef(null);\n  const { getInitialUrl } = useContext(CdnImgConfigContext);\n  const newSrc = getInitialUrl ? getNewSrc(src, getInitialUrl) : src;\n\n  return <img ref={imgRef} src={newSrc} {...otherProps} />;\n}\n\nImage.propTypes = {\n  // 图片 url\n  src: PropTypes.string.isRequired\n};\n","/**\n * @file SimpleEmage.js\n * @author tenghu\n *   简版@pdd/emage\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport LazyImage from './LazyImage';\nimport { generateCDNImageUrl } from '@pdd/core-util';\nimport { Image } from '@pdd/cui-image';\n\nconst DEFAULT_PARAM = {\n  resizeWidth: 1300,\n  quality: 80,\n  strip: true\n};\n\nexport default function SimpleEmage({ lazy, src, processParam, ...otherProps }) {\n  const params = {\n    ...DEFAULT_PARAM,\n    ...processParam\n  };\n\n  const Cmp = lazy ? LazyImage : Image;\n  return <Cmp {...otherProps} src={generateCDNImageUrl(src, params)} />;\n}\n\nSimpleEmage.propTypes = {\n  /**\n   * 图片地址\n   */\n  src: PropTypes.string.isRequired,\n  /**\n   * 是否懒加载。主要业务场景是：对于服务端渲染的首屏图片需要设置lazy为false，不用懒加载图片\n   */\n  lazy: PropTypes.bool,\n  /**\n   * 自定义CDN图片处理参数，这个参数会透传给[@pdd/core-util的generateCDNImageUrl方法](http://fweb1st.prod.yiran.com:5000/docs/core-util/function/index.html#static-function-generateCDNImageUrl)\n   */\n  processParam: PropTypes.object\n};\n\nSimpleEmage.defaultProps = {\n  lazy: true\n};\n","export const LEO_MOUNTED_ATTR_NAME = '__$leo_keys';\nexport const LEO_RES_MOUNTED_NAME = '__$leo_data';\n","/**\r\n * @file constants/tracking/keys.js 打点用到的key\r\n * @author aotuman\r\n */\r\n\r\nconst TrackingChannels = [\r\n    'src', 'from', 'campaign', 'cid', 'msgid'\r\n];\r\n\r\nconst TrackingEvent = {\r\n    OpenAddress: 'open_address',\r\n    SkipAppGroup: 'skip_app_group',\r\n    AlertAppDownload: {\r\n        Show: 'a_a_d_s',\r\n        Download: 'a_a_d_d',\r\n        Close: 'a_a_d_c'\r\n    }\r\n};\r\n\r\nconst ReferPageKeys = ['refer_page_name', 'refer_page_section', 'refer_page_element', 'refer_page_id'];\r\n\r\nconst ReferShareKeys = [\r\n    'refer_share_id',\r\n    'refer_share_uid',\r\n    'refer_share_channel',\r\n    'refer_share_form'\r\n];\r\n\r\nconst ReferShareMapShort = {\r\n    _sid: 'refer_share_id',\r\n    _suid: 'refer_share_uid',\r\n    _sc: 'refer_share_channel',\r\n    _sf: 'refer_share_form'\r\n};\r\n\r\nexport default {\r\n    TrackingChannels: TrackingChannels,\r\n    TrackingEvent: TrackingEvent,\r\n    ReferPageKeys: ReferPageKeys,\r\n    ReferShareKeys: ReferShareKeys,\r\n    ReferShareMapShort: ReferShareMapShort\r\n};\r\n","/**\n * @file logger.js\n * @author edit by aotuman\n */\nimport { app } from '@pdd/configs';\nimport { getCurrentPlatform, PLATFORM, compareVersion } from '@pdd/platform-util';\nimport { buildQuery, parseQuery, nanoid, getCookie, crc32 } from '@pdd/core-util';\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport TrackingKeys from './keys';\nimport PageManagerObj from '@pdd/page-manager';\nimport isPlainObject from 'lodash/isPlainObject';\nimport isFunc from 'lodash/isFunction';\nimport isArray from 'lodash/isArray';\nimport assign from 'lodash/assign';\nimport merge from 'lodash/merge';\n\nconst PageManager = PageManagerObj.getInstance();\nconst constant = app.constant;\n\nlet isAdTrackingTester = false;\nlet result = {};\n\nif (process.env.BROWSER) {\n    const clientPlatform = getCurrentPlatform();\n    const config = app.get(location.host);\n    const contextInfo = {\n        isCached: false,\n        hasReferQuery: false,\n        refer: {\n            refer_page_id: null,\n            refer_page_name: null,\n            refer_page_section: null,\n            refer_page_element: null\n        }\n    };\n    // 存储发送队列\n    const queue = [];\n    // 存储中间件\n    const middlewareArr = [];\n\n    // sourcemap展示相关\n    if (location.search) {\n        const querys = parseQuery(location.search);\n        if (querys.JS_ERROR) {\n            console.error(querys.JS_ERROR.replace(/\\)@/g, '\\n)@')); // eslint-disable-line\n        }\n    }\n    /**\n     * 默认参数\n     * @type {Object}\n     */\n    let defaultOpts = {\n        // 屏幕的宽度\n        screen_width: window.screen.width,\n        // 屏幕的高度\n        screen_height: window.screen.height,\n        // 屏幕的device pixel ratio\n        dpr: window.devicePixelRatio,\n        // 应用的版本\n        app_version: '',\n        // 用户平台: weixin/qq/weibo/android/ios/unknow\n        platform: ''\n    };\n\n    function getLogID() {\n        const logId = [\n            Date.now(),\n            nanoid(16)\n        ].join('');\n        return logId;\n    }\n\n    /**\n     * 生成验签标记\n     */\n    const rkTagCntMap = {};\n\n    function getDcf(timestamp, vds, op) {\n        const dsk = vds.substr(0, 28);\n        const dst = vds.substr(28);\n        if (!rkTagCntMap[op]) {\n            rkTagCntMap[op] = 1;\n        }\n        const ckv = crc32(`${timestamp}${op}${dst}${rkTagCntMap[op]}`);\n        const dcf = `${dsk}.${rkTagCntMap[op]}.${ckv}`;\n        rkTagCntMap[op]++;\n        return dcf;\n    }\n\n    // 风控维度参数 https://jira2.corp.yiran.com/browse/PDD-28952?filter=-3\n    let riskCookies = null;\n    const getRiskControlParams = (time, op = '') => {\n        if (!riskCookies) {\n            const { pdd_vds = '', _nano_fp } = getCookie();\n            riskCookies = { pdd_vds, _nano_fp };\n        }\n\n        const params = {\n            cookie_fp: riskCookies._nano_fp,\n            storage_fp: localStorage.getItem('_nano_fp') || ''\n        };\n\n        const { isNativePlatform, isTinyNativePlatform } = getCurrentPlatform();\n        if (!isNativePlatform && !isTinyNativePlatform) {\n            params.dcf = getDcf(time, riskCookies.pdd_vds, op);\n        }\n\n        return params;\n    };\n\n    const getImprID = function (goodsID) {\n        return getLogID();\n    };\n\n    const isImprTester = true;\n    const imprTime = 1000;\n\n    function getAppID() {\n        if (clientPlatform.platform === PLATFORM.WeChat) {\n            return config.AppID.WeChat;\n        } else if (clientPlatform.platform === PLATFORM.Weibo) {\n            return config.AppID.Weibo;\n        } else if (clientPlatform.platform === PLATFORM.QQ) {\n            if (clientPlatform.isNativePlatform) {\n                return config.AppID.QQ;\n            } else {\n                return config.AppID.QQConnect;\n            }\n        }\n        return '';\n    }\n\n    function cacheContextInfo() {\n        if (contextInfo.isCached) {\n            return;\n        }\n        updateCacheContextInfo();\n    }\n\n    function updateCacheContextInfo() {\n        const referPageQuery = PageManager.getReferPageQuery();\n        contextInfo.refer = referPageQuery || {};\n        contextInfo.hasReferQuery = !!referPageQuery && JSON.stringify(referPageQuery) !== '{}';\n        contextInfo.isCached = contextInfo.hasReferQuery;\n    }\n\n    function userID() {\n        const uidBase36 = localStorage.getItem(constant.LocalStorageKey.UID) || '';\n        if (uidBase36.toString().match(/[0-9]{10}/)) {\n            return uidBase36;\n        }\n        const uid = uidBase36 ? parseInt(uidBase36, 36)\n            : getCookie(constant.CookieKey.UID);\n        return uid || 0;\n    }\n\n    function getUin() {\n        const uin = localStorage.getItem(constant.LocalStorageKey.UIN) || getCookie(constant.CookieKey.UIN);\n        return uin;\n    }\n\n    // 添加中间件\n    function addMiddleware(middlewares) {\n        if (isFunc(middlewares)) {\n            middlewareArr.push(middlewares);\n        } else if (isArray(middlewares)) {\n            middlewares.forEach((middleware) => {\n                middlewareArr.push(middleware);\n            });\n        }\n    }\n\n    function log(type, message) {\n        const page_name = PageManager.getPageName() || location.pathname;\n        if (clientPlatform.statisfy && clientPlatform.statisfy('4.23.0', '4.22.0', 'greaterThanEqual')) {\n            invokeBridgeCallNativeFun('JSLogger', 'log', {\n                module: page_name,\n                message: message,\n                level: type\n            });\n        }\n    }\n\n    function info(message) {\n        log(2, message);\n    }\n\n    function warn(message) {\n        log(3, message);\n    }\n\n    function error(message) {\n        log(4, message);\n    }\n\n    /**\n     * 日志发送\n     *\n     * @param  {Object} opts 日志参数对象\n     * @param {Function} callback 回调\n     */\n    function send(opts = {}, callback) {\n        // 如果是错误打点并且命中抽样直接返回且非app5.41及以上版本\n        const errorReportByNative = clientPlatform.isNativePlatform && compareVersion(clientPlatform.version, '5.41.0') >= 0;\n        if (!errorReportByNative && window.__ERROR_SAMPLE_RATE__ && ['chat_error', 'error', 'real_error'].indexOf(opts.op) !== -1) {\n            // 如果超过抽样比例则不上报\n            if (Math.random() > window.__ERROR_SAMPLE_RATE__) {\n                if (typeof callback === 'function') {\n                    callback();\n                }\n                return;\n            }\n        }\n        const querys = parseQuery(window.location.search);\n        opts = assign({}, opts, PageManager.getKeyParams());\n        cacheContextInfo();\n        // 自动补全页面名称\n        opts.log_id = opts.log_id || getLogID();\n        opts.user_id = opts.user_id || userID();\n        opts.uin = opts.uin || getUin();\n        opts.app_id = opts.app_id || getAppID() || '';\n        opts.time = opts.time || opts.log_id.substring(0, 13);\n        opts.page_name = (opts.useExistsParams && opts.page_name)\n            ? opts.page_name\n            : PageManager.getPageName();\n        opts.page_id = PageManager.getPageID();\n        opts.page_sn = PageManager.getPageSN();\n        // 增加wx_check_pdd\n        // 微信接口判断的本机是否安装了拼多多的结果，没有调用过接口的话不传\n        const wxCheckPdd = localStorage.getItem('WxCheckPdd');\n        if (wxCheckPdd !== null) {\n            opts.wx_check_pdd = parseInt(wxCheckPdd, 10) || 0;\n        }\n        merge(opts, contextInfo.refer);\n\n        // 添加传递参数（现在有以_x_开头的以及xcx_trace_id ）打点\n        const transferParameters = PageManager.getExtendTransferParameters();\n        merge(opts, transferParameters);\n\n        // add channel refers\n        // refer_channel_*\n        if (['pv', 'click', 'impr'].indexOf(opts.op) >= 0) {\n            TrackingKeys.TrackingChannels.forEach(function (key) {\n                const referChannelKey = 'refer_channel_' + key;\n                opts[referChannelKey] = opts[referChannelKey] || querys[key];\n            });\n\n            // add refer_share_* for share link pv\n            TrackingKeys.ReferShareKeys.forEach(function (key) {\n                const value = opts[key] || querys[key] || querys[key.slice(6)];\n                if (value) {\n                    opts[key] = value;\n                }\n            });\n            // map short key to long key\n            const keyMap = TrackingKeys.ReferShareMapShort;\n            for (const key in keyMap) {\n                const value = opts[key] || querys[key];\n                if (value) {\n                    opts[keyMap[key]] = value;\n                }\n            }\n        }\n        if (opts.op === 'pv') {\n            for (const key in querys) {\n                // eslint-disable-next-line no-prototype-builtins\n                if (querys.hasOwnProperty(key)) {\n                    if (key && key.indexOf('_p_') === 0) {\n                        opts[key] = querys[key];\n                    }\n                }\n            }\n\n            // 强制把页面pv的event改成page_show, 弹窗的pv需要吧op都改成event\n            opts.event = 'page_show';\n            // add page url\n            opts.page_url = location.href;\n        }\n\n        // add is_back\n        if (querys['is_back'] === '1') {\n            opts.is_back = '1';\n        }\n\n        // add msgid for basic\n        opts.refer_channel_msgid = opts.refer_channel_msgid || querys['msgid'];\n\n        delete opts.useExistsParams;\n\n        if (middlewareArr && middlewareArr.length > 0) {\n            opts = middlewareArr.reduce((preOpts, currentMiddleware, index, arr) => {\n                return currentMiddleware(preOpts, index, arr);\n            }, opts);\n        }\n\n        // 添加到队列\n        queue.push(opts);\n        // 开始消费\n        consume(callback);\n    }\n\n    /**\n     * 根据队列中所存储的任务来发送\n     *\n     * @param {Function} callback 回调\n     */\n    function consume(callback) {\n        if (queue.length === 0) {\n            if (callback) {\n                callback();\n            }\n            return;\n        }\n\n        /**\n         *\n         * @param params\n         */\n        function exec(params) {\n            let LOG_URL = config.loggingURL;\n            let LOG_ROUTES = config.logRoutes || {};\n            if (window.location && window.location.protocol === 'https:') {\n                LOG_ROUTES = config.httpsLogRoutes;\n                LOG_URL = config.httpsLoggingURL;\n            }\n            if (['chat_error', 'error', 'real_error'].indexOf(params.op) >= 0) {\n                params.platform = clientPlatform.platform; // 错误打点的platform使用真实的platform\n            }\n            if (params.impr_id != null) {\n                return;\n            }\n            const riskParams = getRiskControlParams(params.time, params.op || '');\n            params = assign({}, defaultOpts, params || {}, riskParams);\n            // 广告独立打点 https://jira2.corp.yiran.com/browse/PDD-23372 打点请求，包含 ad 字段\n            // 打点请求，op 字段为 impr 或 click\n            // 合并的情况下 params.ad不存在在items里面此时routeKey是ad增加一个判断逻辑\n            // 忽略盘多多和胡桃街\n            let logRouteKey = '';\n            if ((params.ad || params.routeKey === 'ad') && ['click', 'impr'].indexOf(params.op) >= 0) {\n                logRouteKey = 'ad';\n            } else {\n                logRouteKey = params.op;\n            }\n            const url = LOG_ROUTES[logRouteKey] || LOG_URL;\n            delete params.routeKey;\n            // 判断是否beacon\n            if (window.navigator.sendBeacon && !clientPlatform.isNativePlatform) {\n                params.support_beacon = 1;\n            }\n            const postData = buildFinalPostData(params);\n            let { q } = postData;\n            const { entries } = postData;\n            // 目前的文档类型\n            const content_type = 'text/plain;charset=UTF-8';\n            /* 针对op=real_error做特殊处理 测试新的接口及参数标准*/\n            if (params.op == 'real_error') {\n                // content_type=\"application/json;charset=UTF-8\";\n                // 针对参数做一些处理主要是发送值q的处理\n                if (params.status_code) {\n                    params.payload ? params.payload.status_code = params.status_code : params.payload = { status_code: params.status_code };\n                    delete params.status_code;\n                }\n                if (params.error_message) {\n                    params.error_msg = params.error_message;\n                    delete params.error_message;\n                }\n                if (params.params) {\n                    params.payload ? params.payload.params = params.params : params.payload = { params: params.params };\n                    delete params.params;\n                }\n                if (params.sub_op) {\n                    params.payload ? params.payload.sub_op = params.sub_op : params.payload = { sub_op: params.sub_op };\n                    delete params.sub_op;\n                }\n                if (params.debug_url) {\n                    params.payload ? params.payload.debug_url = params.debug_url : params.payload = { debug_url: params.debug_url };\n                    delete params.debug_url;\n                }\n                params.log_version = '1.0.0';\n                q = JSON.stringify(params);\n            }\n\n            if (clientPlatform.isNativePlatform || clientPlatform.isTinyNativePlatform) {\n                const useAMAnalytics = clientPlatform.statisfy && clientPlatform.statisfy('4.45.0', '4.33.0', 'greaterThanEqual') || clientPlatform.isTinyNativePlatform;\n                // 组件包日志合并上报\n                if (useAMAnalytics &&\n                    entries.length > 0) {\n                    entries.forEach((entry) => {\n                        invokeBridgeCallNativeFun('AMAnalytics', 'send', {\n                            url: url,\n                            value: entry\n                        });\n                    });\n                    return;\n                }\n\n                if (['chat_error', 'error', 'real_error'].indexOf(params.op) < 0) {\n                    if (useAMAnalytics && postData.oriParams) {\n                        postData.oriParams.use_AMAnalytics = 1;\n                        invokeBridgeCallNativeFun('AMAnalytics', 'send', {\n                            url: url,\n                            value: postData.oriParams\n                        });\n                        return;\n                    }\n                } else if (compareVersion(clientPlatform.version, '5.41.0') >= 0) {\n                    // AMAnalytics.send需要params是flatten之后的obj,JSReporter.addMarmotLog直接上报错误的params即可\n                    return invokeBridgeCallNativeFun('JSReporter', 'addMarmotLog', params);\n                }\n\n                invokeBridgeCallNativeFun('JSNetwork', 'request', {\n                    method: 'POST',\n                    url: url,\n                    headers: {\n                        'Content-Type': content_type\n                    },\n                    data: q\n                });\n            } else {\n                if (window.navigator.sendBeacon && ['pv', 'click', 'impr'].indexOf(params.op) >= 0 && window.navigator.sendBeacon(url, q)) {\n                    return;\n                }\n                try {\n                    let xmlhttp;\n                    if (window.XMLHttpRequest) {\n                        xmlhttp = new XMLHttpRequest();\n                    } else {\n                        return;\n                    }\n                    xmlhttp.open('POST', url, true);\n                    xmlhttp.setRequestHeader('Content-Type', content_type);\n                    xmlhttp.withCredentials = true;\n                    xmlhttp.send(q);\n                } catch (e) {\n                    // alert('xmlhttp error!');\n                }\n            }\n        }\n\n        while (queue.length > 0) {\n            const params = queue.pop();\n            // 离开时不setTimeOut\n            if (params.op === 'epv') {\n                exec(params);\n            } else {\n                setTimeout(function () {\n                    exec(params);\n                }, 0);\n            }\n        }\n\n        if (callback) {\n            if (clientPlatform.isNativePlatform || clientPlatform.isTinyNativePlatform) {\n                Promise.resolve().then(() => {\n                    callback();\n                });\n            } else {\n                setTimeout(callback, 100);\n            }\n        }\n    }\n\n    function buildFinalPostData(params) {\n        params = params || {};\n        let items = params.items;\n        if (typeof items === 'string') {\n            try {\n                items = JSON.parse(items);\n            } catch (e) {\n                console.log(e) // eslint-disable-line\n            }\n        }\n        if (isArray(params.items) &&\n            params.items.length > 0) {\n            items = params.items;\n            delete params.items;\n\n            // generate array\n            const entries = items.map((item, index) => {\n                if (item && !item.log_id) {\n                    item.log_id = getLogID();\n                }\n                const entry = assign({}, params, item);\n                ['ad', 'p_rec'].forEach((key, index) => {\n                    if (entry[key]) {\n                        entry[key] = processString(entry[key]);\n                    }\n                });\n                return entry;\n            });\n\n            // generate string\n            let q = entries.reduce((last, next) => {\n                const entryString = buildQuery(next);\n                return `${last}${entryString}$`;\n            }, '');\n            q = q.slice(0, q.length - 1);\n\n            return {\n                q: q,\n                entries: entries\n            };\n        } else {\n            params.items = processString(params.items);\n            return {\n                q: buildQuery(params),\n                oriParams: processObject(params),\n                entries: []\n            };\n        }\n    }\n\n    function processObject(value) {\n        if (isPlainObject(value)) {\n            const result = {};\n            for (const key in value) {\n                if (typeof value[key] === 'object') {\n                    result[key] = JSON.stringify(value[key]);\n                } else {\n                    result[key] = value[key];\n                }\n            }\n            return result;\n        }\n        return null;\n    }\n\n    function processString(value) {\n        if (!value ||\n            typeof value === 'string') {\n            return value;\n        }\n        return JSON.stringify(value);\n    }\n\n    /**\n     * 发送pv日志\n     *\n     * @param  {Object} opts 日志参数对象\n     * @param {boolean} appendPageId 是否补上页面id，这个在手动发pv的时候可能会用上\n     */\n    function sendPv(opts, appendPageId) {\n        opts = assign({}, opts, {\n            'op': 'pv'\n        });\n        send(opts);\n    }\n\n    /**\n     * 实现jquery siblings\n     *\n     * @param {HTMLDom} el\n     *\n     * @return {Array}\n     */\n    function siblings(el) {\n        return Array.prototype.filter.call(el.parentNode.children, function (child) {\n            return child !== el;\n        });\n    }\n\n    /**\n     * 解析节点获得日志参数\n     *\n     * @param  {HTMLElement} ele 文档节点\n     * @return {Object|undefined}  解析后的日志参数\n     */\n    function parseLogData(ele) {\n        let log = ele.dataset.log;\n        // no need log\n        if (log === '') {\n            return;\n        }\n        const params = {};\n\n        if (typeof log === 'string') {\n            try {\n                log = JSON.parse(log);\n            } catch (e) {\n                log = {};\n            }\n        }\n\n        if (typeof log === 'object') {\n            let value;\n            for (const key in log) {\n                // eslint-disable-next-line no-prototype-builtins\n                if (!log.hasOwnProperty(key) || key === 'click_callback') {\n                    continue;\n                }\n                value = log[key];\n                // eslint-disable-next-line no-prototype-builtins\n                if (log.hasOwnProperty(key)) {\n                    if (typeof value === 'object') {\n                        value = JSON.stringify(value);\n                    }\n                }\n                if (value) {\n                    params[key] = value.toString();\n                }\n            }\n            params.op = params.op || 'click';\n            return params;\n        }\n    }\n\n    /**\n     * 初始化logger\n     */\n    function init() {\n        // 发送PV日志, 如果不设置pageName则不主动发pv日志\n        let enter_time = Date.now();\n        window.addEventListener('load', function () {\n            try {\n                // iframe劫持上报\n                if (window.parent !== window) {\n                    const parentUrl = document.referrer;\n                    send({\n                        'op': 'real_error',\n                        'page': 'page been iframed by ' + parentUrl,\n                        'error_message': 'iframe_injected',\n                        'page_url': location.href\n                    });\n                }\n            } catch (ex) {\n                console.log(ex); // eslint-disable-line\n            }\n        });\n\n        // 如果不在native环境下添加离开打点\n        if (!clientPlatform.isNativePlatform) {\n            // 添加visibilitychange，onbeforeunload打点\n            if (typeof document.hidden !== 'undefined') {\n                // 出于兼容性原因，请确保使用  document.addEventListener 而不是window.addEventListener来注册回调。 Safari <14.0仅支持前者。\n                document.addEventListener('visibilitychange', function () {\n                    if (document.hidden) {\n                        send({\n                            op: 'epv',\n                            sub_op: 'leave',\n                            enter_time: enter_time,\n                            time: Date.now()\n                        });\n                    } else {\n                        enter_time = Date.now();\n                    }\n                });\n            }\n            // 微信浏览器下只能通过unload，去打点\n            // 不阻塞丢失率高，阻塞能缓解丢失\n            window.addEventListener('unload', function () {\n                send({\n                    op: 'epv',\n                    sub_op: 'leave',\n                    enter_time: enter_time,\n                    close_time: Date.now()\n                });\n            });\n        }\n    }\n\n    /**\n     * 修改默认参数\n     *\n     * @param {Object} params 参数对象\n     */\n    function addDefaultParams(params) {\n        defaultOpts = assign({}, defaultOpts, params);\n    }\n\n    /**\n     * 初始化函数\n     */\n    const _init = function () {\n        defaultOpts.app_version = clientPlatform.version;\n        defaultOpts.platform = platformAdapter();\n    };\n\n    /**\n     * 极小包马甲包的platform打点需要特殊适配一下\n     * 极小包适配成android\n     * 马甲包适配成unknown\n     * @return {*}\n     */\n    function platformAdapter() {\n        if (clientPlatform.isTinyNativePlatform) {\n            return PLATFORM.PddAndroid;\n        }\n        if (clientPlatform.platform === PLATFORM.MaJiaBaoAndroid) {\n            return PLATFORM.Unknown;\n        }\n        return clientPlatform.platform;\n    }\n\n    /**\n     * 发Tracking\n     *\n     * @param {Object} params, 要发送的params\n     *\n     */\n    function trackingRecord(params, callback) {\n        if (config.loggingURL == null || config.loggingURL.length <= 0) {\n            return;\n        }\n        /*\n        if (platform.isWeChatPlatform() && !params.domain) {\n            params.domain = config.shareDomain;\n        }\n        */\n        send(params, callback);\n    }\n\n    /**\n     * 初始化当前的logger\n     */\n    function initLogger() {\n        init();\n    }\n\n    _init();\n    result = {\n        init: init,\n        send: send,\n        info: info,\n        warn: warn,\n        error: error,\n        sendPv: sendPv,\n        addDefaultParams: addDefaultParams,\n        getLogID: getLogID,\n        isImprTester: function () {\n            return isImprTester;\n        },\n        getImprID: getImprID,\n        getImprTime: function () {\n            return imprTime;\n        },\n        initLogger: initLogger,\n        trackingRecord: trackingRecord,\n        hasReferQuery: function () {\n            if (!contextInfo.isCached) {\n                cacheContextInfo();\n            }\n            return contextInfo.hasReferQuery;\n        },\n        updateCacheContextInfo: updateCacheContextInfo,\n        isAdTrackingTester: function (val) {\n            isAdTrackingTester = val;\n        },\n        addMiddleware: addMiddleware\n    };\n}\n\nlet exportObj = {};\nif (process.env.BROWSER) {\n    exportObj = result;\n}\nexport default exportObj;\n","import logger from '@pdd/logger';\n\nexport function assert (val, message) {\n  if (!val) {\n    throw new Error(message || 'leoAssertError');\n  }\n}\n\nexport function logError (req, info, obj) {\n  if (process.env.BROWSER) {\n    logger.trackingRecord({\n      op: 'real_error',\n      error_message: '6011Error_' + info,\n      page: JSON.stringify(obj),\n      page_url: location.href\n    });\n  } else if (req && req.app && req.app.logger && req.cat) {\n    req.app.logger.error(6011, { reqId: req.reqId, err: JSON.stringify(obj) });\n    req.cat.logError('6011Error_' + info, obj);\n  }\n}\n\nexport function logInfo (req, info, obj) {\n  if (req && req.app && req.app.logger) {\n    req.app.logger.info(info, obj);\n  }\n}\n","import { assert } from '../../internal/assert';\nimport grayTestBase from '@pdd/gray-test-base';\n\nfunction assertABJsonFormat (json) {\n  assert(!!json, 'nullJson');\n  assert(typeof json.salt === 'string' && json.salt.startsWith('cp'), 'abFormatInvalidSalt');\n  assert(typeof json.bucketCount === 'number', 'abFormatInvalidBucketCount');\n  assert(!!json.models && typeof json.models === 'object', 'abFormatInvalidModels');\n}\n\n/**\n * Leo数据处理的方式，其实现定义在../util/processors中\n */\nexport const Formatter = {\n  Default: (val) => val,\n  ABTest: {\n    // 正常渲染（SSR + 普通url参数中带CSR)会调用normal函数，其值会传到window.leo.data下\n    normal: (val, options) => {\n      options = options || {};\n      const uid = options.identity ? options.identity.uid : 0;\n      let json = null;\n      try {\n        if (typeof val === 'string') {\n          json = JSON.parse(val);\n        } else {\n          json = val;\n        }\n      } catch (ex) {\n        throw new Error('invalidJsonFormat1');\n      }\n      assertABJsonFormat(json);\n      // 第三参数暂时强写false，目前没有遇到用true的，可以以后再完善\n      return grayTestBase.getTestStrategy(json, uid, false);\n    },\n    // 降级渲染（运维侧CSR + 组件包）会使用fallback函数备份一份安全的leo配置（即去除白名单)到window.leo.fallbackData下\n    fallback: (val) => {\n      let json = null;\n      if (typeof val === 'string') { // 这里要考虑devMock传进来的时候可能直接是一个object的情况\n        try {\n          json = JSON.parse(val);\n        } catch (ex) {\n          throw new Error('invalidJsonFormat2');\n        }\n      } else {\n        json = val;\n      }\n      assertABJsonFormat(json);\n      Object.keys(json.models).forEach(key => {\n        json.models[key] = {\n          blackList: [],\n          whiteList: [],\n          buckets: json.models[key].buckets\n        };\n      });\n      return json;\n    }\n  }\n};\n\nexport function getFormatterFunc ({ leoKey, formatter, csrFallback }) {\n  let formatterFunc = Formatter.Default;\n  if (typeof formatter === 'object' && formatter) {\n    // 如果formatter是一个object，则必须同时定义normal与fallback处理函数\n    const normalFuncExisted = typeof formatter.normal === 'function';\n    const fallbackFuncExisted = typeof formatter.fallback === 'function';\n    assert(normalFuncExisted && fallbackFuncExisted, `[leoKey=${leoKey}'] both normal and fallback methods needed`);\n    formatterFunc = csrFallback ? formatter.fallback : formatter.normal;\n  } else if (typeof formatter === 'function') {\n    formatterFunc = formatter;\n  }\n  return formatterFunc;\n}\n","import { getFormatterFunc } from '../iso/formatter';\nimport { getCookie } from '@pdd/core-util';\nimport { logError } from '../../internal/assert';\n//\n// CSR时的数据设计思路：\n// 1. leo数据挂在window.leo中，数据格式如 { csrFallback: Boolean, fallbackData: Object, data: Object }\n// 2. csrFallback 表示当前是否是csr降级模式\n// 3. fallbackData 存储了csr降级模式时的leo原始数据，若是普通模式则不会有值\n// 4. data 存储的是最终formatter处理后的数据\n//\n\n/**\n * CSR时的初始化执行思路：\n *  csr降级模式模式 => 计算leo数据 => 如有错误，上报打点\n *  普通模式 => 不做任何事情，认为数据已经完备\n *\n * @param {Array} leoKeys\n */\nexport default function clientInit (leoKeys) {\n  leoKeys = leoKeys || [];\n  window.leo = window.leo || {};\n  window.leo.data = window.leo.data || {};\n  if (window.leo.csrFallback && window.leo.fallbackData && leoKeys.length) {\n    const uid = getCookie('pdd_user_id'); // TODO：暂时使用从cookie里取的方法，以维持当前同步调用的特性。后面慢慢过渡到async\n    leoKeys.map(item => {\n      const config = window.leo.fallbackData[item.leoKey];\n      if (config) {\n        const formatterFunc = getFormatterFunc(item);\n        try {\n          window.leo.data[item.leoKey] = formatterFunc(config, {\n            identity: {\n              uid: parseInt(uid) || 0\n            }\n          });\n        } catch (ex) {\n          logError(null, 'csrFormatLeoFailed', ex);\n        }\n      } else {\n        logError(null, 'csrLeoFallbackDataNotFound');\n      }\n    });\n  }\n}\n","import { LEO_MOUNTED_ATTR_NAME, LEO_RES_MOUNTED_NAME } from '../../internal/constants';\nimport { logError } from '../../internal/assert';\nimport clientInit from '../csr/clientInit';\n\n/**\n * 装饰根app组件，让使用的leoKey的配置挂在组件下面\n * @param {Array} keyArray\n */\nexport function useLeoKeys (keyArray) {\n  return function (App) {\n    if (App[LEO_MOUNTED_ATTR_NAME]) {\n      throw new Error(`${App.name} duplicate declare`);\n    } else if (!Array.isArray(keyArray)) {\n      throw new Error('needs an array for its 1st param');\n    }\n    App[LEO_MOUNTED_ATTR_NAME] = keyArray || [];\n    if (process.env.BROWSER) {\n      clientInit(keyArray);\n    }\n    return App;\n  };\n}\n\n/**\n * 查找指定key的对应的值\n *\n * @param {String} leoKey 灰度所指的key\n * @param {Object} requestContext 请求上下文\n * @returns {Object} 指定leoKey经过formatter处理后的结果，生产环境时若找不到则返回null\n */\nexport function readLeo (leoKey, requestContext) {\n  let result;\n  requestContext = requestContext || {};\n  try {\n    if (process.env.BROWSER) {\n      result = window.leo.data[leoKey];\n    } else {\n      result = requestContext.__res[LEO_RES_MOUNTED_NAME].data[leoKey];\n    }\n  } catch (ex) {\n    process.env.NODE_ENV === 'development' && console.log(ex);\n    logError(requestContext.__req, `BusinessOrFrameworkError_${leoKey}`, ex);\n  }\n  if (result === undefined) {\n    logError(requestContext.__req, `leoDataNotFoundForKey_${leoKey}`);\n    if (process.env.NODE_ENV === 'development') {\n      throw new Error(`Unable to find leo data with key[${leoKey}]`);\n    }\n  }\n  return result;\n}\n\nexport { Formatter } from './formatter';\n","/**\n * @typedef {object} CipherConsumeMode 消费模式\n * @property {number} CONSUME 消费口令码，并且默认使用第一条文案\n * @property {number} CONSUME_TIME_DIVIDE 消费口令码，文案采用时间划分算法\n * @property {number} CONSUME_RAW 消费口令码，不要文案\n * @property {number} RECYCLE 不消费口令码，默认使用第一条文案\n * @property {number} RECYCLE_TIME_DIVIDE 不消费口令码，文案采用时间划分算法\n * @property {number} RECYCLE_RAW 不消费口令码，不要文案\n */\nexport const CipherConsumeMode = {\n  CONSUME: 0,\n  CONSUME_TIME_DIVIDE: 1,\n  CONSUME_RAW: 2,\n  RECYCLE: 3,\n  RECYCLE_TIME_DIVIDE: 4,\n  RECYCLE_RAW: 5,\n  RECYCLE_TIME_DIVIDE_MULTI: 6\n};\n","/**\n * @typedef {object} CipherPasteType 口令分享写剪贴板类型\n * @property {number} DEFAULT 默认类型\n * @property {number} SPECIAL 特殊方式\n */\nexport const CipherPasteType = {\n  DEFAULT: 0,\n  SPECIAL: 1\n};\n","/**\n * 分享流程模型ShareController,继承自EventEmitter\n * 在分享的行为中会分发分享事件\n * 1. 负责对第三方接口的初始化与调用\n * 2. 保存着实际用于分享的参数内容\n *\n * @file ShareController/base.js\n * @author daben\n */\nimport { EventEmitter } from 'events';\n\nimport ShareError from '../ShareError';\nimport ShareEntity from '../ShareEntity';\nimport ShareType from '../ShareType';\nimport ShareEventType from '../ShareEventType';\nimport ShareResultType from '../ShareResultType';\nconst { ShareErrorCode } = ShareError;\n\n/**\n * 分享控制器基类\n * @access private\n * @extends {EventEmitter}\n */\nclass ShareController extends EventEmitter {\n  constructor(opts = {}) {\n    super(opts);\n    this.ShareEntityClass = ShareEntity;\n    this._hasInited = false;\n    // this default share info config\n    this.shareEntity = opts.shareEntity;\n    // if you want set different share info for different share type\n    // use this shareEntityMap\n    // key = shareType && value = shareEntity\n    this.shareEntityMap = opts.shareEntityMap || {};\n    this.disableShareTypes = opts.disableShareTypes || [];\n  }\n\n  /**\n   * @ignore\n   */\n  initShare() {\n    if (this._hasInited) {\n      return;\n    }\n    this._hasInited = true;\n    this.setMaxListeners(0);\n    // setup enabled share types\n    this._setupShareTypes();\n    // setup platform sdk\n    this._setupPlatformShareSDK();\n  }\n\n  /**\n   * @ignore\n   */\n  isInited() {\n    return this._hasInited;\n  }\n\n  /**\n   * @abstract\n   * @param {ShareType} shareType 分享类型\n   */\n  share(shareType) {\n    return ShareErrorCode.SHARE_ACTION_DISABLE;\n  }\n\n  /**\n   * @abstract\n   * @param {boolean} isEnable flag\n   */\n  setShareCheck(isEnable) {\n    // TODO\n  }\n\n  /**\n   * @abstract\n   * @param {ShareType} shareType 分享类型\n   */\n  checkShareTypeEnable(shareType) {\n    return 0;\n  }\n\n  /**\n   * @abstract\n   * @return {boolean} is enabled shareTypes changed\n   */\n  _setupShareTypes() {\n    return true;\n  }\n\n  /**\n   * prepare third party SDK\n   * @abstract\n   */\n  _setupPlatformShareSDK() {\n    return Promise.resolve();\n  }\n\n  /**\n   * 根据shareType获取分享配置\n   * @param {ShareType} shareType 分享类型\n   * @param {boolean} noGuarantee 是否兜底配置\n   * @returns {ShareEntity}\n   */\n  getShareEntityByShareType(shareType = 0, noGuarantee) {\n    if (!shareType) {\n      return this.shareEntity;\n    }\n    return this.shareEntityMap[shareType] || (noGuarantee ? null : this.shareEntity);\n  }\n\n  /**\n   * reset share info\n   * if not pass param shareType, the default shareEntity will be refreshed\n   * @param  {ShareEntity} shareEntity 分享配置信息\n   * @param  {ShareType} shareType 分享类型\n   * @returns {promise} 是否成功更新\n   */\n  refreshShare(shareEntity, shareType) {\n    if (!shareEntity) {\n      return Promise.resolve();\n    }\n    if (shareType) {\n      this.shareEntityMap[shareType] = shareEntity;\n    } else {\n      this.shareEntity = shareEntity;\n    }\n    return this._setupPlatformShareSDK();\n  }\n\n  /**\n   * 禁用某些分享类型，在微信网页下使用会隐藏掉对应icon\n   * @param {Array<ShareType>|ShareType} shareTypes 分享类型\n   */\n  disableShare(shareTypes) {\n    if (shareTypes && typeof shareTypes === 'number') {\n      if (this.disableShareTypes.indexOf(shareTypes) < 0) {\n        this.disableShareTypes.push(shareTypes);\n      }\n    } else if (Object.prototype.toString.call(shareTypes) === '[object Array]') {\n      this.disableShareTypes = this.disableShareTypes.concat(\n        shareTypes.filter((shareType) => {\n          return (this.disableShareTypes || []).indexOf(shareType) < 0;\n        }\n        ));\n    } else {\n      return;\n    }\n    const notChanged = this._setupShareTypes();\n    !notChanged && this._adjustMenu();\n    // _setupPlatformShareSDK is duplicate when disable share\n    // !notChanged && this._setupPlatformShareSDK();\n  }\n\n  /**\n   * 调整分享面板\n   * @abstract\n   */\n  _adjustMenu() {\n    // TODO\n  }\n\n  /**\n   * 从缓存中创建分享配置\n   * @param {object} params 初始分享配置\n   * @param {ShareType} shareType 分享类型\n   * @param {boolean} noGuarantee 是否使用缓存配置兜底\n   */\n  createShareEntity(params = {}, shareType, noGuarantee) {\n    const ShareEntityClass = this.ShareEntityClass || ShareEntity;\n    if (noGuarantee) {\n      return new ShareEntityClass(params);\n    }\n    let initParams = {};\n    if (shareType) {\n      const currentEntity = this.shareEntityMap[shareType];\n      if (currentEntity) {\n        initParams = Object.assign({}, currentEntity, params);\n      } else {\n        initParams = Object.assign({}, this.shareEntity, params);\n      }\n    } else {\n      initParams = Object.assign({}, this.shareEntity, params);\n    }\n    return new ShareEntityClass(initParams);\n  }\n\n  /**\n   * 设置原生右上角分享按钮\n   * @abstract\n   * @param {object} buttonConfig 按钮配置\n   */\n  setupNativeShareButton(buttonConfig) {\n    return ShareErrorCode.SHARE_NOT_SUPPORTED;\n  }\n\n  // 不允许按照事件移除所有的监听器（防止移除分享打点的监听）\n  // removeAllListeners(event) {\n  //     throw new Error('method removeAllListeners is not allowed');\n  // }\n\n  copyCipher() {\n    const shareType = ShareType.COPY_CIPHER;\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    const delayTrigger = shareEntity.cipherScene && typeof shareEntity.cipher === 'string';\n    !delayTrigger && this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    if (!shareEntity) {\n      return ShareErrorCode.SHARE_PARAMS_NOT_VALID;\n    }\n    shareEntity.normalize(shareType).then((norParams = {}) => {\n      if (delayTrigger) {\n        this.emit(\n          ShareEventType.ON_SHARE_TRIGGER,\n          { shareType, shareID: norParams.shareID }\n        );\n        delete norParams.shareID;\n      }\n\n      this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n        shareType,\n        shareResultType: ShareResultType.SUCCESS,\n        content: norParams.title,\n        rawResponse: norParams.rawResponse\n      }, this.getNormalizeErrorHandler(shareType));\n    });\n    return 0;\n  }\n\n  getNormalizeErrorHandler(shareType) {\n    return (...args) => {\n      this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n        shareType,\n        shareResultType: ShareResultType.FAIL,\n        errorPayload: args\n      });\n    };\n  }\n\n  /**\n   * @abstract\n   */\n  resetLimiter() {\n    // todo\n  }\n}\n\nexport default ShareController;\n","/**\n * @file NativeShareEnv.js\n * @author  daben\n */\nimport { getCurrentPlatform, compareVersion, PLATFORM } from '@pdd/platform-util';\nimport ShareType from '../ShareType';\n\nconst getAppVersion = _ => {\n  return getCurrentPlatform().version;\n};\n\nexport const NATIVE_SAHRE_ERRORS = {\n  USER_REFUSE: 60005,\n  USER_CANCEL: 60006\n};\n\n// check tools\nexport const checkShareTypeSupport = shareType => {\n  let result = false;\n  if (typeof shareType !== 'number') {\n    return false;\n  }\n  switch (shareType) {\n    case ShareType.WECHAT_SESSION:\n    case ShareType.WECHAT_TIMELINE:\n    case ShareType.WECHAT_SESSION_APP:\n    case ShareType.QQ_CHAT_SESSION:\n    case ShareType.QQ_ZONE:\n    case ShareType.WECHAT_TIMELINE_IMAGE:\n    case ShareType.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:\n    case ShareType.WECHAT_SESSION_IMAGE:\n    case ShareType.QQ_CHAT_SESSION_IMAGE:\n    case ShareType.QQ_ZONE_IMAGE:\n    case ShareType.WECHAT_SESSION_TEXT_WITH_NO_SDK:\n    case ShareType.WECHAT_SESSION_TEXT:\n      result = true;\n      break;\n    case ShareType.WEIBO:\n      result = validateVersion('4.81.0', '4.81.0');\n      break;\n    case ShareType.WEIBO_IMAGE:\n      result = validateVersion('4.81.0', '4.81.0');\n      break;\n    case ShareType.WECHAT_SESSION_IMAGE_WITH_NO_SDK:\n    case ShareType.WECHAT_SESSION_IMAGES_WITH_NO_SDK:\n      result = validateVersion('4.37.0', '4.36.0');\n      break;\n    case ShareType.WECHAT_TIMELINE_TEXT:\n      result = validateVersion('4.39.0', '4.39.0');\n      break;\n    case ShareType.IOS_SYSTEM_SHARE_CARD:\n    case ShareType.WECHAT_SESSION_CARD_WITH_NO_SDK:\n    case ShareType.WECHAT_TIMELINE_CARD_WITH_NO_SDK:\n      result = checkIOSSystemShare();\n      break;\n    case ShareType.SHARE_IMAGE_PASSIVELY:\n      result = validateVersion('4.49.0', '4.49.0');\n      break;\n    case ShareType.COPY_LINK:\n    case ShareType.COPY_CIPHER:\n      result = true;\n      break;\n    case ShareType.WECHAT_SESSION_MUSIC:\n    case ShareType.WECHAT_SESSION_VIDEO:\n      result = validateVersion('4.86.0', '4.86.0');\n      break;\n    // ambiguous usage\n    // set default to true\n    case ShareType.FRIENDS:\n      result = true;\n      break;\n    // only used in IOS\n    // platform irrelevant\n    // read enable flag from shareInfo\n    case ShareType.WECHAT_BIG_IMAGE:\n      result = true;\n      break;\n    case ShareType.PIN_TIMELINE:\n      result = validateVersion('5.6.0', '5.6.0');\n      break;\n    default:\n      break;\n  }\n\n  return result;\n};\n\nfunction validateVersion(iosVersion = '', androidVersion = '', tinyAndroidVersion = '') {\n  const version = getAppVersion();\n  return (\n    (getCurrentPlatform().platform === PLATFORM.PddIOS && compareVersion(version, iosVersion) >= 0) ||\n    (getCurrentPlatform().platform === PLATFORM.PddAndroid && compareVersion(version, androidVersion) >= 0) ||\n    // 极小包认为功能都可用，如果js调用不通，则会走包升级提醒弹窗\n    getCurrentPlatform().platform === PLATFORM.PDDTinyAndorid\n    // compareVersion(version, tinyAndroidVersion || androidVersion) >= 0\n  );\n}\n\nexport const checkWeChatSessionShareImageNoSdk = () => {\n  return validateVersion('4.37.0', '4.36.0');\n};\n\nexport const checkIOSSystemShare = () => {\n  const version = getAppVersion();\n  return getCurrentPlatform().platform === PLATFORM.PddIOS && compareVersion(version, '5.80.0') >= 0;\n};\n\nexport const checkSupportShareCipher = () => {\n  return validateVersion('4.74.0', '4.74.0', '4.80.0');\n};\n\nexport const isEnableShareCheck = () => {\n  return validateVersion('4.51.0', '4.51.0');\n};\n\nexport const isTPAppShareSupport = () => {\n  return validateVersion('4.85.0', '4.85.0');\n};\n\nexport const checkSupportShareMedia = () => {\n  return validateVersion('4.86.0', '4.86.0');\n};\n\nexport const checkSupportSilentWakeUp = () => {\n  if (getCurrentPlatform().platform === PLATFORM.PDDTinyAndorid) {\n    return false;\n  }\n  return validateVersion('4.88.0', '4.88.0');\n};\n\nexport const isLocalCipherSupport = () => {\n  // todo\n  return validateVersion('5.41.0', '5.41.0');\n};\n\n// history code\n// current `JSShare` now is an alias of `AMShare`\nexport const getShareModuleName = () => {\n  return 'JSShare';\n};\n\nexport const DEFAULT_SHARE_ICON_SIZE = 22;\nexport const DEFAULT_SHARE_ICON =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAMAAADUivDaAAAAM1BMVEUAAABmZmZmZmZlZWVmZmZmZmZlZWVlZWVoaGhlZWVkZGRmZmZlZWVlZWVlZWVmZmZmZmauFdI/AAAAEHRSTlMAhnjzbtHHEBrfJrGXRzZXUNTSwgAAAPRJREFUWMPt1+sKgzAMBWC71NbLLuf9n3a6sxFYN2vq/gxyEBSFz9pGaLpdOYucuyPJCUtSbheGHo/0Q6swjXhmnNqEqwCYHwfk2iJcFkEuJyDwyi7c+O6V4HhuViFyBkhwVqJNCFwHEq+1CTaB1UCCFWI0BJiXkxJLZkAso2BVK8FaD509SjB/QcQkWBO2iYA1kuLHn5KRbQKvFL8vhT2jUKOs55j3z0WORcUnvVEj9EF6/8JsIzKAd8K6qE444cTviNNBYhrHqZnQOOGEE0444USdyDYhA1Lsfs1dRqrtwTXVPTjTw5y+6EfMwvCtK6pHu6I7B+8m1re+k3UAAAAASUVORK5CYII=';\n","/**\n * @file ShareDomainModel.js\n * @author  daben\n */\nimport { getPageID } from '../tools/getPageContext';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\n\nconst PATH = 'api/flow/audience/share/types';\n\nexport default function (method = '', opts = {}) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => {}\n  });\n  let promise = null;\n  const params = {};\n  params.page_sn = opts.pageSn || '';\n  params.page_info = opts.pageInfo || {};\n  params.platform = 'h5';\n\n  if (method.toLowerCase() === 'post') {\n    promise = httpClient.post(PATH, params);\n  } else {\n    promise = httpClient.get(PATH, {\n      params\n    });\n  }\n  return promise;\n}\n","/**\n * @file ShareLimiter/index.js\n * @author daben\n */\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport ShareType from '../ShareType';\nimport ShareError from '../ShareError';\nimport ShareForm from '../ShareForm';\nimport LimitMethod from './LimitMethod';\nimport { getPageSN, getPageName } from '../tools/getPageContext';\nimport loadRuleModel from './loadRuleModel';\nimport { getShareModuleName } from '../tools/NativeShareEnv';\nimport MagicTraceManager from '../tools/MagicTraceManager';\nimport trackError from '../ShareTracker/trackError';\nimport URLWrapType, { isTinyDomainType, isShortLinkType } from '../tools/URLWrapType';\nconst { ShareErrorCode } = ShareError;\n\n// 本地无可用包pkg id\nexport const FORBIDDEN_MATCHED_PKG_ID = -1;\n\nclass ShareLimiter {\n  constructor() {\n    this._inited = false;\n    this._queryShareTypePromise = null;\n    this._rules = null;\n    this._enableShareTypes = [];\n    this.appOptional = null;\n    this._rom = 0;\n    this._matchedPkgId = undefined;\n    this._isCipherDowngrade = false;\n    this._enableSilentMode = false;\n  }\n\n  build() {\n    if (this._inited) {\n      return Promise.resolve();\n    }\n    if (!this._queryShareTypePromise) {\n      this._queryShareTypePromise = this.loadRules();\n      this._queryShareTypePromise\n        .then(data => {\n          this._inited = true;\n          this._processRules(data);\n          return MagicTraceManager.getInstance().build({\n            magicTrace: data.magic_trace\n          });\n        })\n        .catch(e => {\n          if (process.env.NODE_ENV === 'development') {\n            // eslint-disable-next-line no-console\n            console.warn('分享规则初始化失败，分享功能将收到限制');\n          }\n          trackError({\n            errorCode: 0,\n            message: '分享规则初始化失败',\n            options: {\n              message: e && e.message,\n              errorCode: e && e.errorCode\n            }\n          });\n          this._inited = true;\n        });\n    }\n    return this._queryShareTypePromise;\n  }\n\n  reset() {\n    this._inited = false;\n    this._queryShareTypePromise = null;\n    this._rules = null;\n    this._enableShareTypes = [];\n    this.appOptional = null;\n    this._rom = 0;\n    this._matchedPkgId = undefined;\n    this._isCipherDowngrade = false;\n    this._enableSilentMode = false;\n  }\n\n  getAppOptional() {\n    return this.appOptional;\n  }\n\n  getRules() {\n    return this.build().then(\n      () => {\n        return this._rules;\n      },\n      () => {\n        return Promise.resolve(this._rules);\n      }\n    );\n  }\n\n  loadRules() {\n    if (process.env.NODE_ENV === 'development' && !getPageSN()) {\n      // eslint-disable-next-line no-console\n      console.warn('加载分享规则的时候缺失了pageSn，这会导致分享功能被限制，请检查是否代码是否正确');\n    }\n    if (getCurrentPlatform().isNativePlatform) {\n      return invokeBridgeCallNativeFun(getShareModuleName(), 'queryShareTypes', {\n        page_sn: getPageSN() + '',\n        page_info: {\n          page_name: getPageName(),\n          page_url: location && location.href\n        }\n      });\n    } else {\n      return loadRuleModel('post', {\n        pageSn: getPageSN() + '',\n        pageInfo: {\n          page_name: getPageName(),\n          page_url: location && location.href\n        }\n      });\n    }\n  }\n\n  _processRules(data = {}) {\n    const shareTypes = data.share_types || [];\n    this.appOptional = data.app_optional;\n    this._rom = data.rom;\n    this._matchedPkgId = data.matched_pkg_id;\n    this._enableSilentMode = data.is_weird;\n    // 是否走降级方案\n    if (data.degrade) {\n      this.setCipherDowngrade(true);\n    }\n    const enableShareTypes = [];\n    this._rules = shareTypes.reduce((accu, next) => {\n      const shareType = next.share_type;\n      if (shareType) {\n        accu[shareType] = next;\n        enableShareTypes.push(parseInt(shareType, 10));\n      }\n      return accu;\n    }, {});\n    // 内部分享类型\n    this._innerShareTypes = data.inner_share_types || [];\n    this._innerShareTypes.forEach((item = {}) => {\n      enableShareTypes.push(parseInt(item.share_type, 10));\n    });\n    this._enableShareTypes = enableShareTypes;\n    if (process.env.NODE_ENV === 'development' && this._enableShareTypes.length <= 0) {\n      // eslint-disable-next-line no-console\n      console.warn('当前页面未配置可用分享类型，分享功能将不可用');\n    }\n    return this._rules;\n  }\n\n  getRuleByType(type) {\n    return (this._rules || {})[type];\n  }\n\n  checkSync(shareType, shareEntity) {\n    if (!this._rules) {\n      return ShareErrorCode.SHARE_LIMITER_NOT_INIT;\n    }\n    if (this._enableShareTypes.indexOf(shareType) < 0) {\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n    const shareForm = shareEntity.getShareForm(shareType);\n    const rule = this.getRuleByType(shareType) || {};\n    const methods = rule.share_methods || [];\n    // 类型是文本的要进一步验证\n    if ([ShareForm.COMMAND, ShareForm.TEXT].indexOf(shareForm) >= 0) {\n      const isServerRely = isShortLinkType(shareEntity.urlWrapType) && shareEntity.marketActivityID;\n      // 如果是依赖后端限制的话\n      if (\n        isServerRely &&\n        // 限制链接\n        ((shareEntity.shortURLApi && methods.indexOf(LimitMethod.LINK) >= 0) ||\n          // 限制口令\n          (shareEntity.shortCommandApi && methods.indexOf(LimitMethod.CIPHER) >= 0) ||\n          // 请求后端的这个urlWrapType直接放过\n          shareEntity.urlWrapType === URLWrapType.CATEGORY_PROCEDURE ||\n          shareEntity.urlWrapType === URLWrapType.CATEGORY_PROCEDURE_CUSTOM)\n      ) {\n        return 0;\n      }\n      if (methods.indexOf(LimitMethod.NORMAL) >= 0) {\n        return 0;\n      }\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    } else if ([ShareType.WECHAT_SESSION, ShareType.WECHAT_TIMELINE].indexOf(shareType) >= 0) {\n      const isServerRely = isTinyDomainType(shareEntity.urlWrapType) && shareEntity.marketActivityID;\n      if (\n        isServerRely &&\n        // 限制链接\n        methods.indexOf(LimitMethod.DOMAIN) < 0\n      ) {\n        return ShareErrorCode.SHARE_TYPE_DISABLED;\n      }\n      if (methods.indexOf(LimitMethod.NORMAL) >= 0) {\n        return 0;\n      }\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n    return 0;\n  }\n\n  get isCipherDowngrade() {\n    return this._isCipherDowngrade;\n  }\n\n  get rom() {\n    return this._rom;\n  }\n\n  get matchedPkgId() {\n    return this._matchedPkgId;\n  }\n\n  get isSilentMode() {\n    return this._enableSilentMode;\n  }\n\n  setCipherDowngrade(flag) {\n    this._isCipherDowngrade = flag;\n  }\n}\n\nlet instance = null;\nexport function getInstance() {\n  if (!instance) {\n    instance = new ShareLimiter();\n  }\n  return instance;\n}\n\nexport default ShareLimiter;\n","/**\n * @file translateTPApp.js\n * @author daben\n */\nimport { getPageID, getPageSN } from '../tools/getPageContext';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\nimport { isTPAppShareSupport } from '../tools/NativeShareEnv';\nimport { pickUpRefer } from './processMiniObjectPath';\nimport { TPSelectCategory } from '../TPSelectCategory';\n\n// 旧的\nconst TRANSLATE_TP_PATH = 'api/flow/walrus/inquire/confusion/info';\n// 新的\nconst TRANSLATE_TP_CARD_PATH = 'api/flow/chron/share/card';\n\n/**\n * @ignore\n */\nconst DevType = {\n  MAIN: 0,\n  GENERAL: 1,\n  TP: 2\n};\n\nfunction selectInfoByCategory(infos = [], category = TPSelectCategory.TP_FIRST) {\n  let generals = [];\n  let tps = [];\n  let main = [];\n  let others = [];\n  infos.forEach((info) => {\n    if (info) {\n      switch (info.dev_type) {\n        case DevType.GENERAL:\n          generals.push(info);\n          break;\n        case DevType.TP:\n          tps.push(info);\n          break;\n        case DevType.MAIN:\n          main.push(info);\n          break;\n        default: others.push(info);\n      }\n    }\n  });\n  if (!isTPAppShareSupport()) {\n    // 如果原生不支持\n    generals = tps = [];\n  }\n  return tps[0] || generals[0] || main[0];\n}\n\n/**\n * 策略中心分享卡片转换接口\n * @param {object} opts 配置参数\n * @param {TPSelectCategory} category 策略模式\n */\nexport function translateTPAppCard(opts = {}, category) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => { }\n  });\n  let paramMap = {\n    scene_id: opts.activitySceneSn,\n    long_url: opts.shareURL || '',\n    rom: opts.rom || 0,\n    matched_pkg_id: opts.matchedPkgId,\n    param: {},\n    page_sn: getPageSN(),\n    ...pickUpRefer(opts)\n  };\n  if (opts.payloadMixin && typeof opts.payloadMixin === 'object') {\n    paramMap = Object.assign({}, opts.payloadMixin['param_map'], paramMap);\n  }\n  if (typeof paramMap.param !== 'string') {\n    paramMap.param = JSON.stringify(paramMap.param);\n  }\n  const promise = httpClient.post(TRANSLATE_TP_CARD_PATH, {\n    param_map: paramMap\n  });\n  return promise.then((data = {}) => {\n    const infos = (data.infos || []).filter(m => {\n      return Object.keys(m).length > 0;\n    });\n    const info = selectInfoByCategory(infos, category);\n    return {\n      raw: data,\n      info,\n      tpInfos: infos,\n      tpDowngrade: infos.length <= 0\n    };\n  });\n}\n\nexport default function translateTPApp(opts = {}, category) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => { }\n  });\n  let requestParams = {\n    long_url: opts.shareURL || '',\n    activity_code: (opts.marketActivityID || 0) + '',\n    scene_sn: opts.activitySceneSn || '',\n    rom: opts.rom || 0,\n    matched_pkg_id: opts.matchedPkgId,\n    params: {}\n  };\n  if (opts.payloadMixin && typeof opts.payloadMixin === 'object') {\n    // payloadMixin.extra maybe exists. if it is used, here should assign extra\n    requestParams = Object.assign(requestParams, opts.payloadMixin);\n  }\n\n  if (typeof requestParams.params !== 'string') {\n    requestParams.params = JSON.stringify(requestParams.params);\n  }\n\n  const promise = httpClient.post(TRANSLATE_TP_PATH, requestParams);\n\n  return promise.then((data = {}) => {\n    const infos = (data.infos || []).filter(m => {\n      return Object.keys(m).length > 0;\n    });\n    const info = selectInfoByCategory(infos, category);\n    return {\n      raw: data,\n      info,\n      tpInfos: infos,\n      tpDowngrade: infos.length <= 0\n    };\n  });\n}\n","/**\n * @file popLocalCipher.js\n * @author daben\n */\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getCurrentPlatform, compareVersion } from '@pdd/platform-util';\nimport { getShareModuleName, isLocalCipherSupport } from '../tools/NativeShareEnv';\nimport { getPageSN } from '../tools/getPageContext';\nimport trackError from '../ShareTracker/trackError';\nimport { CipherConsumeMode } from '../CipherConsumeMode';\n\n/**\n * @typedef {object} ReadCipherActionType 查询动作\n * @property {number} QUERY_CODE 查询所有口令码\n * @property {number} QUERY_TEXT 查询所有口令文本\n * @property {number} POP_CIPHER 消费本地存储的口令码\n */\nconst ReadCipherActionType = {\n  QUERY_CODE: 0,\n  QUERY_TEXT: 1,\n  POP_CIPHER: 2\n};\n\nfunction formatCipher(template = '', code = '') {\n  return template.replace(/%s/g, code);\n}\n\nlet cipherTemplateCache = {};\nfunction loadCipherText(scene) {\n  return invokeBridgeCallNativeFun(\n    getShareModuleName(),\n    'getLocalCipherInfo',\n    {\n      action: ReadCipherActionType.QUERY_TEXT,\n      page_sn: getPageSN() + '',\n      scene\n    }\n  ).then((data = {}) => {\n    const texts = (data.texts || []).map(m => {\n      if (!m) {\n        return;\n      }\n      if (m.version && compareVersion(m.version, window.__SHARE_CIPHER_VER__ || '0.0.1') >= 0) {\n        return m.text;\n      }\n      if (!m.version) {\n        return m.text;\n      }\n    }).filter(m => !!m);\n    cipherTemplateCache[scene] = cipherTemplateCache[scene] || {};\n    cipherTemplateCache[scene].texts = texts;\n    return texts;\n  }, (e = {}) => {\n    trackError({\n      errorCode: e.errorCode,\n      message: '本地获取口令文本失败',\n      options: e.data\n    });\n    return null;\n  });\n}\n\nfunction loadCipherCode(scene) {\n  return invokeBridgeCallNativeFun(\n    getShareModuleName(),\n    'getLocalCipherInfo',\n    {\n      action: ReadCipherActionType.QUERY_CODE,\n      page_sn: getPageSN() + '',\n      scene\n    }\n  ).then((data = {}) => {\n    return data.ciphers || [];\n  }, (e) => {\n    trackError({\n      errorCode: e.errorCode,\n      message: '本地获取口令码失败',\n      options: e.data\n    });\n    return null;\n  });\n}\n\nfunction popCipherCode(scene) {\n  return invokeBridgeCallNativeFun(\n    getShareModuleName(),\n    'getLocalCipherInfo',\n    {\n      action: ReadCipherActionType.POP_CIPHER,\n      page_sn: getPageSN() + '',\n      scene\n    }\n  ).then(data => {\n    return data.cipher;\n  }, e => {\n    trackError({\n      errorCode: e.errorCode,\n      message: '本地消费口令码失败',\n      options: e.data\n    });\n    return null;\n  });\n}\n\nfunction getCipherTemplate({ consumeMode, scene }) {\n  if (\n    typeof consumeMode !== 'number' ||\n    [\n      CipherConsumeMode.CONSUME_RAW,\n      CipherConsumeMode.RECYCLE_RAW\n    ].indexOf(consumeMode) >= 0\n  ) {\n    return Promise.resolve();\n  }\n  const processText = txts => {\n    if (!txts || txts.length <= 0) {\n      return;\n    }\n    if ([\n      CipherConsumeMode.CONSUME_TIME_DIVIDE,\n      CipherConsumeMode.RECYCLE_TIME_DIVIDE\n    ].indexOf(consumeMode) >= 0) {\n      const date = new Date();\n      const minute = date.getMinutes();\n      const second = date.getSeconds();\n      const index = Math.floor(txts.length * (minute * 60 + second) / 3600);\n      return txts[index];\n    }\n    // 将给到的文本分成n个组 然后再随机挑选一个组，执行time_divide 策略\n    if (CipherConsumeMode.RECYCLE_TIME_DIVIDE_MULTI === consumeMode) {\n      const length = txts.length;\n      const parallelChunksSize = Math.min(Math.max(parseInt(window.__SHARE_CIPHER_PARALLEL_SIZE__, 10) || 0, 2), length);\n      // 区间长度至少为1\n      const targetInterval = Math.max(Math.floor(length / parallelChunksSize), 1);\n      const targetChunkIndex = Math.floor(Math.random() * parallelChunksSize);\n      const date = new Date();\n      const minute = date.getMinutes();\n      const second = date.getSeconds();\n      const intervalIndex = Math.floor(targetInterval * (minute * 60 + second) / 3600);\n      const index = Math.max(targetChunkIndex * targetInterval + intervalIndex, length - 1);\n      return txts[index];\n    }\n    return txts[0];\n  };\n  const templates = (cipherTemplateCache[scene] || {}).texts;\n  if (templates) {\n    return Promise.resolve(processText(templates));\n  }\n  return loadCipherText(scene).then(processText);\n}\n\nfunction getCipherCode({ consumeMode, scene }) {\n  if (typeof consumeMode !== 'number') {\n    return Promise.resolve();\n  }\n  if (\n    [\n      CipherConsumeMode.CONSUME,\n      CipherConsumeMode.CONSUME_TIME_DIVIDE,\n      CipherConsumeMode.CONSUME_RAW\n    ].indexOf(consumeMode) >= 0\n  ) {\n    return popCipherCode(scene);\n  }\n  return loadCipherCode(scene).then(ciphers => {\n    if (!ciphers || ciphers.length <= 0) {\n      return;\n    }\n    return ciphers[0];\n  });\n}\n\nexport default function popLocalCipher(option = {}) {\n  const {\n    scene,\n    consumeMode\n  } = option;\n  if (!getCurrentPlatform().isNativePlatform || !isLocalCipherSupport() || !scene || typeof consumeMode !== 'number') {\n    return Promise.resolve();\n  }\n  return Promise.all([\n    getCipherCode(option),\n    getCipherTemplate(option)\n  ]).then((data = []) => {\n    const [cipherData, template] = data;\n    if (\n      cipherData &&\n      [\n        CipherConsumeMode.CONSUME_RAW,\n        CipherConsumeMode.RECYCLE_RAW\n      ].indexOf(consumeMode) >= 0\n    ) {\n      return cipherData;\n    }\n    if (cipherData && template) {\n      return Object.assign({\n        text: formatCipher(template, cipherData.cipher)\n      }, cipherData);\n    }\n  });\n}\n","import { getInstance as getShareLimit } from '../ShareLimiter/index';\nimport translateTPApp, { translateTPAppCard } from './translateTPApp';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { getWebWrappedShareURLInfo, getShareDomainPlatform, getDomainReplacedURL } from './urlWrapper';\nimport calculateURLHash from './calculateURLHash';\nimport { getInstance as getApiCacheManager } from './ApiCacheManager';\nimport URLWrapType, { isServerControlType, isTinyDomainType } from './URLWrapType';\nimport URLParser from './URLParser';\nimport popLocalCipher from '../tools/popLocalCipher';\nimport shareDomainModel, { ShareDomainType } from './shareDomainModel';\n\nexport function getWrappedShareURLInfo(...args) {\n  // 非原生用前面的\n  if (!getCurrentPlatform().isNativePlatform) {\n    return getWebWrappedShareURLInfo(...args);\n  }\n  return getNativeOnlyWrappedShareURLInfo(...args).then(payload => {\n    const { missed } = payload;\n    if (missed) {\n      return getWebWrappedShareURLInfo(...args);\n    }\n    return payload;\n  });\n}\n\n/**\n * 仅仅原生可用\n * @param {*} shareEntity 分享信息\n */\nexport const getNativeOnlyWrappedShareURLInfo = (shareEntity = {}) => {\n  const shareURL = shareEntity.shareURL || '';\n  const urlWrapType = shareEntity.urlWrapType;\n  // 这个类型只对/card接口生效，会获取matchedPkgId\n  if (shareEntity.marketActivityID && shareEntity.activitySceneSn && urlWrapType === URLWrapType.CATEGORY_PROCEDURE) {\n    const matchedPkgId = getShareLimit().matchedPkgId;\n    return translateTPAppCard(\n      Object.assign(\n        {\n          rom: getShareLimit().rom,\n          matchedPkgId\n        },\n        shareEntity\n      ),\n      shareEntity.tpSelectCategory\n    ).then(({ info, tpInfos, tpDowngrade, raw }) => {\n      const response = {\n        raw,\n        tpDowngrade,\n        tpInfo: info,\n        tpInfos,\n        // 使用后端返回的短链接\n        realShareURL: (info || tpInfos[0] || {}).link_url || shareURL,\n        targetShareURL: shareURL\n      };\n      const error = new Error('category procedure');\n      error.data = response;\n      return Promise.reject(error);\n    });\n  }\n  if (\n    shareEntity.marketActivityID &&\n    urlWrapType === URLWrapType.CATEGORY_PROCEDURE_CUSTOM\n  ) {\n    const shareDomainType = isTinyDomainType(urlWrapType)\n      ? ShareDomainType.WEIXIN_TINY_DOMAIN\n      : ShareDomainType.SHORT_LINK;\n    const requestShareURL = shareURL.replace(/^(\\w+:)?\\/\\//, '');\n    const shareDomainRP = shareDomainModel(shareEntity.requestUsePost ? 'post' : 'get', {\n      shareURL: requestShareURL,\n      marketActivityID: shareEntity.marketActivityID,\n      platform: getShareDomainPlatform(),\n      shareDomainType: shareDomainType,\n      shortURLApi: shareEntity.shortURLApi,\n      shortCommandApi: shareEntity.shortCommandApi,\n      domainURLApi: shareEntity.domainURLApi,\n      payloadMixin: shareEntity.payloadMixin\n    });\n    return shareDomainRP.then(payload => {\n      const error = new Error('category procedure custom');\n      error.data = payload;\n      return Promise.reject(error);\n    });\n  }\n  // 旧的转换接口\n  if (shareEntity.marketActivityID && shareEntity.activitySceneSn && urlWrapType === URLWrapType.SERVER_TP_APP) {\n    const matchedPkgId = getShareLimit().matchedPkgId;\n    // if (matchedPkgId === FORBIDDEN_MATCHED_PKG_ID) {\n    //   return Promise.reject(new Error('no matched pkg id'));\n    // }\n    return translateTPApp(\n      Object.assign(\n        {\n          rom: getShareLimit().rom,\n          matchedPkgId: matchedPkgId\n        },\n        shareEntity\n      ),\n      shareEntity.tpSelectCategory\n    ).then(\n      ({ info, tpInfos, tpDowngrade }) => {\n        return {\n          tpInfo: info,\n          // 如果没有info 则认为是失败结果\n          tpDowngrade,\n          tpInfos,\n          // 使用后端返回的短链接\n          realShareURL: (info || tpInfos[0] || {}).link_url || shareURL,\n          targetShareURL: shareURL\n        };\n      },\n      _ => {\n        return Promise.resolve({\n          // 接口失败\n          tpDowngrade: true,\n          realShareURL: shareURL,\n          targetShareURL: shareURL\n        });\n      }\n    );\n  }\n  if (shareEntity.marketActivityID && isServerControlType(urlWrapType)) {\n    const shareDomainType = isTinyDomainType(urlWrapType)\n      ? ShareDomainType.WEIXIN_TINY_DOMAIN\n      : ShareDomainType.SHORT_LINK;\n    const requestShareURL = shareURL.replace(/^(\\w+:)?\\/\\//, '');\n    const shareURLHash = calculateURLHash(shareEntity);\n    const cipherScene = shareEntity.cipherScene;\n    const consumeMode = shareEntity.consumeMode;\n    const apiCacheManager = getApiCacheManager();\n    // 远端转换\n    const remoteRequest = () => {\n      const req = new Promise((res, rej) => {\n        const shareDomainRP = shareDomainModel(shareEntity.requestUsePost ? 'post' : 'get', {\n          shareURL: requestShareURL,\n          marketActivityID: shareEntity.marketActivityID,\n          platform: getShareDomainPlatform(),\n          shareDomainType: shareDomainType,\n          shortURLApi: shareEntity.shortURLApi,\n          shortCommandApi: shareEntity.shortCommandApi,\n          domainURLApi: shareEntity.domainURLApi,\n          payloadMixin: shareEntity.payloadMixin\n        });\n        shareDomainRP\n          .then(data => {\n            if (data) {\n              const { domain = '', shortURL, shareText, raw } = data;\n              if (shareDomainType === ShareDomainType.WEIXIN_TINY_DOMAIN) {\n                if (urlWrapType === URLWrapType.DOMAIN_REPLACE) {\n                  res(getDomainReplacedURL(shareURL, domain));\n                }\n              } else if (shareDomainType === ShareDomainType.SHORT_LINK) {\n                if (!shortURL && !shareText) {\n                  const error = new Error('empty short_url with empty share_text');\n                  error.data = raw;\n                  error.extraInfo = raw;\n                  rej(error);\n                  return;\n                }\n                res({\n                  useShortURL: true,\n                  realShareURL: shortURL || shareURL,\n                  targetShareURL: shareURL,\n                  shareText: shareText,\n                  rawResponse: raw\n                });\n                return;\n              }\n            }\n            res({\n              realShareURL: shareURL,\n              targetShareURL: shareURL\n            });\n          })\n          .catch(e => {\n            rej(e);\n          });\n      });\n      // 只缓存接口请求类型的\n      shareDomainType === ShareDomainType.SHORT_LINK &&\n        req.then(response => {\n          // 成功的请求才缓存下来\n          if (response && response.useShortURL) {\n            apiCacheManager.cacheResponseByHash(shareURLHash, response);\n            apiCacheManager.setShareID(shareURLHash, (new URLParser(shareURL).query || {}).refer_share_id);\n          }\n        });\n      return req;\n    };\n\n    // 如果是使用了缓存性质的链接方式 则优先从缓存中取\n    if (urlWrapType === URLWrapType.SERVER_SHORT_URL_WITH_CACHE) {\n      let cachedResponse = apiCacheManager.getResponseByHash(cipherScene);\n      // 如果有口令场景,优先尝试用口令场景取\n      if (cachedResponse) {\n        apiCacheManager.increaseCount(cipherScene);\n        // 缓存次数命中\n        return Promise.resolve(cachedResponse);\n      }\n      // 没有符合的，则走本地缓存\n      cachedResponse = apiCacheManager.getResponseByHash(shareURLHash);\n      if (cachedResponse) {\n        apiCacheManager.increaseCount(shareURLHash);\n        // 缓存次数命中\n        return Promise.resolve(cachedResponse);\n      }\n      // 如果是降级方案，走app取，取不到走远端\n      if (cipherScene && getShareLimit().isCipherDowngrade) {\n        return popLocalCipher({\n          scene: cipherScene,\n          consumeMode\n        }).then(\n          (data = {}) => {\n            if (data && data.share_id) {\n              const precacheData = {\n                cipher: data.cipher,\n                shareText: data.text,\n                shareID: data.share_id\n              };\n              // 缓存指定口令\n              apiCacheManager.cacheResponseByHash(cipherScene, precacheData);\n              apiCacheManager.setShareID(cipherScene, data.shareID);\n              return precacheData;\n            }\n            // 没有合法值就走远端\n            return remoteRequest();\n          },\n          _ => remoteRequest()\n        );\n      }\n      return remoteRequest();\n    }\n    return remoteRequest();\n  }\n  // 新的策略中心的逻辑\n  if (shareEntity.activitySceneSn && urlWrapType === URLWrapType.SERVER_TP_APP_CARD) {\n    const matchedPkgId = getShareLimit().matchedPkgId;\n    // if (matchedPkgId === FORBIDDEN_MATCHED_PKG_ID) {\n    //   return Promise.reject(new Error('no matched pkg id'));\n    // }\n    return translateTPAppCard(\n      Object.assign(\n        {\n          rom: getShareLimit().rom,\n          matchedPkgId\n        },\n        shareEntity\n      ),\n      shareEntity.tpSelectCategory\n    ).then(\n      ({ info, tpInfos, tpDowngrade, raw }) => {\n        return {\n          tpInfo: info,\n          // 如果没有info 则认为是失败结果\n          tpDowngrade,\n          tpInfos,\n          // 使用后端返回的短链接\n          realShareURL: (info || tpInfos[0] || {}).link_url || shareURL,\n          categoryShareInfo: { thumbnailURL: (info || tpInfos[0] || {}).thumb_img_url },\n          targetShareURL: shareURL,\n          rawResponse: raw\n        };\n      },\n      _ => {\n        return Promise.resolve({\n          // 接口失败\n          tpDowngrade: true,\n          realShareURL: shareURL,\n          targetShareURL: shareURL\n        });\n      }\n    );\n  }\n  return Promise.resolve({\n    missed: true,\n    realShareURL: shareURL,\n    targetShareURL: shareURL\n  });\n};\n","export async function cipherProcess(params = {}, shareEntity) {\n  if (typeof shareEntity.cipherProcessor !== 'function') {\n    return params;\n  }\n  try {\n    const text = await shareEntity.cipherProcessor({\n      cipherText: params.title,\n      cipherCode: params.cipher,\n      shareEntity\n    });\n    if (typeof text === 'string') {\n      params.title = params.desc = text;\n    }\n  } catch (e) {\n    // todo\n  }\n  return params;\n}\n","import { pickUpRefer } from './processMiniObjectPath';\nexport const PaintImageMethod = {\n  STATIC: 'static',\n  DYNAMIC: 'dynamic'\n};\n\nexport const processDrawImageOptions = (drawImageOptions) => {\n  if (!drawImageOptions) {\n    return null;\n  }\n  // if is an array, use first config\n  if (Array.isArray(drawImageOptions) && drawImageOptions.length > 0) {\n    return drawImageOptions[0];\n  } else if (typeof drawImageOptions === 'object') {\n    // if is object\n    return drawImageOptions;\n  }\n  return null;\n};\n\nexport const processDrawImageOptionsMuti = (drawImageOptions) => {\n  if (!drawImageOptions) {\n    return [];\n  }\n  if (Array.isArray(drawImageOptions) && drawImageOptions.length > 0) {\n    return drawImageOptions.map((option, index) => {\n      if (!option) {\n        return null;\n      }\n      // image url\n      if (typeof option === 'string') {\n        return {\n          type: PaintImageMethod.STATIC,\n          data: option\n        };\n      } else if (typeof option === 'object') {\n        if (option.type) {\n          return option;\n        }\n        return {\n          type: PaintImageMethod.DYNAMIC,\n          options: option\n        };\n      }\n    }).filter((obj) => {\n      return !!obj;\n    });\n  } else if (typeof drawImageOptions === 'object') {\n    return [{\n      type: PaintImageMethod.DYNAMIC,\n      options: drawImageOptions\n    }];\n  }\n  return [];\n};\n\n/**\n * processDrawImage\n * @param  {ShareEntity}  shareEntity\n * @param  {Boolean} isMutiImage if is image array\n * @return {Promise} resolve draw image options\n */\nexport function processDrawImage(shareEntity, isMutiImage, extra = {}) {\n  const drawImageOptions = shareEntity.drawImageOptions;\n  if (typeof drawImageOptions === 'function') {\n    extra = {\n      shareRefer: pickUpRefer(shareEntity),\n      ...(extra || {})\n    };\n    return drawImageOptions(extra);\n  } else if (typeof drawImageOptions === 'object') {\n    if (isMutiImage) {\n      return Promise.resolve(processDrawImageOptionsMuti(drawImageOptions));\n    }\n    return Promise.resolve(processDrawImageOptions(drawImageOptions));\n  }\n  return Promise.resolve({});\n}\n","/**\n * @file NativeShareEntity.js\n * @author  daben\n */\nimport ShareMethod from '../ShareMethod';\nimport ShareForm from '../ShareForm';\nimport ShareEntity, { format } from './index';\nimport { getQQShareURL } from '../tools/urlWrapper';\nimport { getWrappedShareURLInfo } from '../tools/urlWrapperNative';\nimport ShareType from '../ShareType';\nimport URLWrapType, { isShortLinkType } from '../tools/URLWrapType';\nimport makeUpProtocol from '../tools/makeUpProtocol';\nimport { isShareToQQ } from '../qqShareTypes';\n// import { getMiniProgramUrl } from '@pdd/navigation';\nimport processMiniObjectPath from '../tools/processMiniObjectPath';\nimport { cipherProcess } from '../tools/cipherProcess';\nimport { processDrawImage } from '../tools/processImage';\nimport { SystemShareMode } from '../SystemShareMode';\n\nclass NativeShareEntity extends ShareEntity {\n  constructor(opts) {\n    super(opts);\n    // needed for share image\n    this.drawImageOptions = opts.drawImageOptions;\n    this.redirectURI = opts.redirectURI || '';\n    // share miniProgram\n    this.miniObjectPath = opts.miniObjectPath || '';\n    this.miniObjectID = opts.miniObjectID;\n    this.useWxAppShare = opts.useWxAppShare || false;\n\n    // 强制降级\n    this.forceDowngrade = opts.forceDowngrade || false;\n    // for ios system share\n    this.excludeShareChoices = opts.excludeShareChoices || [];\n    // for generate image  && save to local && launch third party app\n    this.thirdPartyOpenType = opts.thirdPartyOpenType;\n    // drawImageClass\n    this.drawImageClass = opts.drawImageClass;\n    // 是否从结果获取实际分享人数，仅限微信卡片\n    // 概率能取到，性能可能会略有下降\n    this.needSharedAmount = opts.needSharedAmount || false;\n    // 口令场景\n    this.cipherScene = opts.cipherScene;\n    this.consumeMode = opts.consumeMode;\n    // tp app share / activitySceneSn\n    this.activitySceneSn = opts.activitySceneSn;\n    this.tpSelectCategory = opts.tpSelectCategory;\n    // 拼小圈参数\n    this.pinTimelineParams = opts.pinTimelineParams;\n    // 分享小程序携带\n    this.withShareTicket = opts.withShareTicket;\n    // 新系统分享参数\n    this.systemShareMode = opts.systemShareMode || SystemShareMode.DEFAULT;\n    // 安卓分享微信时候的卡片蒙层参数\n    this.wechatMaskConfig = opts.wechatMaskConfig;\n  }\n\n  async normalize(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return this.processCipher();\n    }\n    // to prevent sb from changing share params\n    // while there is still a request waiting\n    const shareEntity = Object.assign({}, this);\n    // 拼小圈的参数跟其他分享都不一样，直接打包扔在一个字段里面\n    if (shareType === ShareType.PIN_TIMELINE) {\n      return shareEntity.pinTimelineParams;\n    }\n\n    const params = {\n      title: shareEntity.title,\n      desc: shareEntity.message,\n      thumbnail: shareEntity.thumbnailURL,\n      share_url: shareEntity.shareURL,\n      share_id: shareEntity.shareID,\n      with_share_ticket: !!shareEntity.withShareTicket,\n      system_share_mode: shareEntity.systemShareMode\n    };\n    const wechatMaskConfig = shareEntity.wechatMaskConfig;\n    if (wechatMaskConfig && typeof wechatMaskConfig === 'object') {\n      const { share_rec_mask: shareRecMask, ...restMaskConfig } = wechatMaskConfig;\n      const config = {\n        ...restMaskConfig\n      };\n      if (shareRecMask) {\n        config.share_rec_mask = {\n          share_type: shareType,\n          activity_code: shareEntity.marketActivityID,\n          share_id: shareEntity.shareID,\n          ...shareRecMask\n        };\n      }\n      params.wechat_mask_config = config;\n    }\n\n    // 应migao要求，在打点请求extra中带上share_prefer参数\n    // app会把share_params中的非指定参数加到extra中\n    if (shareEntity.payloadMixin) {\n      const extra = shareEntity.payloadMixin.extra;\n      if (typeof extra === 'object' && typeof extra.share_prefer !== 'undefined') {\n        params.share_prefer = extra.share_prefer;\n      }\n    }\n\n    /**\n     * process share image && share wxapp\n     */\n    let isImageShare = false;\n    switch (shareType) {\n      case ShareType.WECHAT_SESSION:\n        if (shareEntity.miniObjectPath && typeof shareEntity.miniObjectPath === 'string') {\n          params.mini_object_path = processMiniObjectPath(shareEntity);\n        } else if (typeof shareEntity.miniObjectPath === 'function') {\n          try {\n            params.mini_object_path = shareEntity.miniObjectPath(shareEntity.shareURL);\n          } catch (e) {\n            // todo\n          }\n        }\n        if (shareEntity.miniObjectID) {\n          params.mini_object_id = shareEntity.miniObjectID;\n        }\n        break;\n      case ShareType.WECHAT_TIMELINE_IMAGE:\n      case ShareType.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:\n      case ShareType.WECHAT_SESSION_IMAGE:\n      case ShareType.QQ_CHAT_SESSION_IMAGE:\n      case ShareType.QQ_ZONE_IMAGE:\n      case ShareType.WEIBO_IMAGE:\n      case ShareType.WECHAT_SESSION_IMAGE_WITH_NO_SDK:\n        isImageShare = true;\n        params.options = await processDrawImage(shareEntity);\n        break;\n      case ShareType.WECHAT_SESSION_IMAGES_WITH_NO_SDK:\n        isImageShare = true;\n        params.multi_image_options = await processDrawImage(shareEntity, true);\n        break;\n      case ShareType.SHARE_IMAGE_PASSIVELY:\n        isImageShare = true;\n        params.options = await processDrawImage(shareEntity);\n        if (shareEntity.thirdPartyOpenType) {\n          params.open_type = shareEntity.thirdPartyOpenType;\n        }\n        break;\n      case ShareType.IOS_SYSTEM_SHARE_CARD:\n      case ShareType.WECHAT_SESSION_CARD_WITH_NO_SDK:\n      case ShareType.WECHAT_TIMELINE_CARD_WITH_NO_SDK:\n        params.excluded_types = shareEntity.excludeShareChoices;\n        break;\n      default:\n        break;\n    }\n\n    /**\n     * process share url && share text\n     */\n    const shareForm = this.getShareForm.call(shareEntity, shareType);\n    const isShareText = [ShareForm.COMMAND, ShareForm.TEXT].indexOf(shareForm) >= 0;\n\n    this.targetShareURL = shareEntity.shareURL;\n    this.realShareURL = shareEntity.shareURL;\n    this.useShortURL = false;\n    // 如果是分享微信卡片，有小程序路径的话\n    // 打点share_url打成小程序路径\n    if (shareType === ShareType.WECHAT_SESSION && params.mini_object_path) {\n      this.realShareURL = params.mini_object_path;\n    }\n\n    if (isShareToQQ(shareType)) {\n      const shareToQQURL = getQQShareURL(shareType, shareEntity.shareURL);\n      params.share_url = shareToQQURL;\n      this.shareURL = shareToQQURL;\n      this.realShareURL = shareToQQURL;\n      this.targetShareURL = shareToQQURL;\n    }\n\n    if (shareType === ShareType.WECHAT_SESSION && params.mini_object_path) {\n      this.realShareURL = this.targetShareURL = params.mini_object_path;\n    }\n\n    if (\n      // 放开为所有卡片类都能过\n      // 不然枚举太多了\n      (shareForm === ShareForm.CARD || shareForm === ShareForm.WXAPP_CARD) &&\n      // 只有需要转化的才走转换逻辑，否则不开转换逻辑\n      shareEntity.urlWrapType\n    ) {\n      return getWrappedShareURLInfo(shareEntity).then(\n        ({\n          realShareURL,\n          targetShareURL,\n          useShortURL,\n          tpDowngrade,\n          tpInfo,\n          tpInfos,\n          appendQuery,\n          categoryShareInfo,\n          useCipher,\n          missed,\n          rawResponse = {}\n        }) => {\n          if (useCipher) {\n            return Promise.reject(new Error('operation refused'));\n          }\n          if (!missed) {\n            this.useShortURL = useShortURL;\n            this.realShareURL = realShareURL;\n            this.targetShareURL = targetShareURL;\n          }\n          params.share_url = realShareURL;\n          if (tpInfo) {\n            params.title = tpInfo.title || params.title;\n            params.desc = tpInfo.message || params.desc;\n          }\n          // 如果有策略中心来的配置\n          if (categoryShareInfo) {\n            params.title = categoryShareInfo.title || params.title;\n            params.thumbnail = categoryShareInfo.thumbnailURL || params.thumbnail;\n          }\n          params.tpInfo = tpInfo;\n          params.tpInfos = tpInfos;\n          params.tpDowngrade = tpDowngrade;\n          params.rawResponse = rawResponse;\n          if (\n            shareEntity.urlWrapType === URLWrapType.SERVER_QUERY_APPEND &&\n            typeof params.mini_object_path === 'string' &&\n            params.mini_object_path\n          ) {\n            params.mini_object_path = processMiniObjectPath(\n              {\n                miniObjectPath: params.mini_object_path,\n                shareURL: realShareURL\n              },\n              {\n                appendQuery\n              }\n            );\n            this.realShareURL = params.mini_object_path;\n          }\n          return params;\n        }\n      );\n    } else if (\n      isImageShare &&\n      (isShortLinkType(shareEntity.urlWrapType) ||\n        shareEntity.urlWrapType === URLWrapType.MAGIC_TRACE ||\n        shareEntity.urlWrapType === URLWrapType.MAGIC_TRACE_DYNAMIC)\n    ) {\n      return getWrappedShareURLInfo(shareEntity).then(async (payload = {}) => {\n        const { realShareURL, targetShareURL, useShortURL, shareText } = payload;\n        this.targetShareURL = targetShareURL;\n        if (shareEntity.shortCommandApi) {\n          this.pcode = shareText;\n          params.share_url = shareText;\n        } else {\n          this.useShortURL = useShortURL;\n          this.realShareURL = realShareURL;\n          params.share_url = useShortURL ? makeUpProtocol(realShareURL) : realShareURL;\n        }\n        if (useShortURL) {\n          if (params.multi_image_options) {\n            params.multi_image_options = await processDrawImage(shareEntity, true, payload);\n          } else if (params.options) {\n            params.options = await processDrawImage(shareEntity, false, payload);\n            if (params.options && typeof params.options === 'object' && params.options.$params) {\n              Object.assign(params, params.options.$params);\n              delete params.options.$params;\n            }\n          }\n        }\n        return params;\n      });\n    } else if (isShareText) {\n      let shareTextFinal = params.title || '';\n      if (isShortLinkType(shareEntity.urlWrapType)) {\n        return getWrappedShareURLInfo(shareEntity).then(\n          ({\n            realShareURL,\n            targetShareURL,\n            useShortURL,\n            shareText,\n            shareID,\n            cipher,\n            tpInfo,\n            tpInfos,\n            tpDowngrade,\n            rawResponse = {}\n          }) => {\n            if (shareID) {\n              params.shareID = shareID;\n            }\n            if (cipher) {\n              params.cipher = cipher;\n            }\n            if (tpInfo) {\n              params.title = tpInfo.link_url || params.title;\n              params.desc = tpInfo.link_url || params.desc;\n              shareTextFinal = params.title;\n            }\n            params.tpInfo = tpInfo;\n            params.tpInfos = tpInfos;\n            params.tpDowngrade = tpDowngrade;\n            params.rawResponse = rawResponse;\n            this.targetShareURL = targetShareURL;\n            if (shareEntity.shortCommandApi) {\n              const withoutDefault = useShortURL || cipher ? shareText : '';\n              const withDefault = withoutDefault || targetShareURL;\n              shareTextFinal = format(shareTextFinal, withDefault, targetShareURL, withoutDefault);\n              params.title = params.desc = shareTextFinal;\n              this.pcode = shareTextFinal;\n            } else {\n              const withoutDefault = useShortURL ? realShareURL : '';\n              const withDefault = withoutDefault || targetShareURL;\n              shareTextFinal = format(shareTextFinal, withDefault, targetShareURL, withoutDefault);\n              params.title = params.desc = shareTextFinal;\n              this.useShortURL = useShortURL;\n              this.realShareURL = withDefault;\n            }\n            return cipherProcess(params, shareEntity);\n          }\n        );\n      } else {\n        shareTextFinal = format(shareTextFinal, shareEntity.shareURL);\n        params.title = params.desc = shareTextFinal;\n        return cipherProcess(params, shareEntity);\n      }\n    } else {\n      return Promise.resolve(params);\n    }\n  }\n\n  getShareForm(shareType) {\n    if (shareType === ShareType.WECHAT_SESSION) {\n      if (this.miniObjectPath || this.useWxAppShare) {\n        return ShareForm.WXAPP_CARD;\n      } else {\n        return ShareForm.CARD;\n      }\n    }\n    if ([4, 2, 5, 6, 24, 25, 18, 9996, 9997].includes(shareType)) {\n      return ShareForm.CARD;\n    }\n    if ([8, 9, 10, 11, 12, 13, 15, 19, 20, 22].includes(shareType)) {\n      return ShareForm.IMAGE;\n    }\n    if ([3, 16, 17, 21, ShareType.COPY_CIPHER].includes(shareType)) {\n      if (this.shortCommandApi) {\n        return ShareForm.COMMAND;\n      } else {\n        return ShareForm.TEXT;\n      }\n    }\n    if (shareType === ShareType.COPY_LINK) {\n      return ShareForm.COPY_LINK;\n    }\n    return ShareForm.DEFAULT;\n  }\n\n  getShareMethod(shareType) {\n    if ([9, 16, 19, 20, 18, 9996, 9997].includes(shareType)) {\n      return ShareMethod.SYSTEM;\n    }\n    if ([1, 2, 3, 4, 5, 8, 10, 11, 12, 13, 15, 17, 21, 24, 25].includes(shareType)) {\n      return ShareMethod.SDK;\n    }\n    if (shareType === ShareType.SHARE_IMAGE_PASSIVELY) {\n      return this.thirdPartyOpenType ? ShareMethod.MANUAL : ShareMethod.DEFAULT;\n    }\n    if (shareType === ShareType.COPY_CIPHER) {\n      return ShareMethod.MANUAL;\n    }\n    return ShareMethod.DEFAULT;\n  }\n}\n\nexport default NativeShareEntity;\n","/**\n * 3.x 此处实现可以使用appUtil中的函数\n * @file clipboard.js\n * @author  daben\n */\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getCurrentPlatform } from '@pdd/platform-util';\n\nexport function getContent() {\n  if (getCurrentPlatform().isNativePlatform) {\n    return new Promise((res, rej) => {\n      // 只能用AMStorage，不能用JSStorage\n      invokeBridgeCallNativeFun('AMStorage', 'getPasteboard', null).then((data = {}) => {\n        res(data.text);\n      });\n    });\n  }\n  return Promise.reject();\n}\n\nexport function setContent(content) {\n  if (typeof content !== 'string') {\n    return Promise.reject();\n  }\n  if (getCurrentPlatform().isNativePlatform) {\n    // 只能用AMStorage，不能用JSStorage\n    return invokeBridgeCallNativeFun('AMStorage', 'setPasteboard', {\n      text: content\n    });\n  }\n  return Promise.reject();\n}\n","/**\n * @file ShareController/native.js\n * @author  daben\n */\nimport { getCurrentPlatform, SYSTEM } from '@pdd/platform-util';\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport ShareController from './base';\nimport ShareType from '../ShareType';\nimport {\n  checkShareTypeSupport,\n  getShareModuleName,\n  NATIVE_SAHRE_ERRORS,\n  checkSupportShareCipher,\n  checkSupportSilentWakeUp,\n  isEnableShareCheck,\n  DEFAULT_SHARE_ICON,\n  DEFAULT_SHARE_ICON_SIZE\n} from '../tools/NativeShareEnv';\nimport { ShareErrorCode } from '../ShareError';\nimport ShareEventType from '../ShareEventType';\nimport ShareResultType from '../ShareResultType';\nimport NativeShareEntity from '../ShareEntity/NativeShareEntity';\nimport { getPageName, getPageSN } from '../tools/getPageContext';\nimport { getInstance as getShareLimit } from '../ShareLimiter';\nimport ThirdPartyOpenType from '../ThirdPartyOpenType';\nimport { shareEntityToMethod } from '../ShareManager/translation';\nimport { setContent } from '../tools/clipboard';\nimport { CipherPasteType } from '../CipherPasteType';\n\n// const IOS_WECHAT_SHARE_CHOICE = 'com.tencent.xin.sharetimeline';\n\nconst SUPPORTED_SHARE_TYPE = Object.keys(ShareType)\n  .map(key => ShareType[key])\n  .filter(shareType => {\n    // remove disabled share types\n    return [ShareType.WECHAT_BIG_IMAGE].indexOf(shareType) <= 0;\n  });\n\n/**\n * 原生分享控制类\n * @access private\n * @extends {ShareController}\n */\nclass NativeShareController extends ShareController {\n  constructor(opts) {\n    super(opts);\n    this.ShareEntityClass = NativeShareEntity;\n    this._enableShareTypes = SUPPORTED_SHARE_TYPE.concat();\n    this.shareLimiter = getShareLimit();\n    this._isEnableShareCheck = false;\n    this.setShareCheck(true);\n  }\n\n  /**\n   * 设置分享校验是否启用\n   * @param {boolean} isEnable 是否开启\n   */\n  setShareCheck(isEnable) {\n    if (getCurrentPlatform().isTinyNativePlatform) {\n      // tiny env only support `performShare`\n      this._isEnableShareCheck = true;\n      return;\n    }\n    this._isEnableShareCheck = isEnable ? isEnableShareCheck() : false;\n  }\n\n  /**\n   * 检测某种分享类型是否可用\n   * @param {ShareType} shareType 分享类型\n   */\n  checkShareTypeEnable(shareType) {\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    if (!this.validateShareParams(shareType, shareEntity)) {\n      return ShareErrorCode.SHARE_PARAMS_NOT_VALID;\n    }\n\n    // if app not support or this shareType is disabled\n    if (!checkShareTypeSupport(shareType) || this._enableShareTypes.indexOf(shareType) < 0) {\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n\n    if (\n      this._isEnableShareCheck &&\n      // 复制链接类型不做限制\n      [ShareType.COPY_LINK, ShareType.COPY_CIPHER].indexOf(shareType) < 0\n    ) {\n      const checkResult = this.shareLimiter.checkSync(shareType, shareEntity);\n      if (checkResult) {\n        return checkResult;\n      }\n    }\n    return 0;\n  }\n\n  /**\n   * 原生主动分享\n   * @override\n   * @param {ShareType} shareType 分享类型\n   * @returns {ShareErrorCode} 分享错误码，0代表成功\n   */\n  share(shareType) {\n    const checkResult = this.checkShareTypeEnable(shareType);\n    if (checkResult) {\n      return checkResult;\n    }\n\n    if (shareType === ShareType.PIN_TIMELINE) {\n      return this._sharePinTimeline(shareType);\n    }\n\n    // special\n    if (shareType === ShareType.WECHAT_BIG_IMAGE) {\n      return this._nativeShareBigImage(shareType);\n    }\n\n    // card like\n    if (\n      [\n        ShareType.WECHAT_SESSION,\n        ShareType.WECHAT_TIMELINE,\n        ShareType.WEIBO,\n        ShareType.QQ_CHAT_SESSION,\n        ShareType.QQ_ZONE,\n        ShareType.TENCENT_WEIBO,\n        ShareType.WECHAT_SESSION_APP,\n        ShareType.FRIENDS,\n        ShareType.WECHAT_SESSION_MUSIC,\n        ShareType.WECHAT_SESSION_VIDEO\n      ].indexOf(shareType) >= 0\n    ) {\n      return this._nativeShareCard(shareType);\n    }\n\n    if (\n      [\n        ShareType.IOS_SYSTEM_SHARE_CARD,\n        ShareType.WECHAT_SESSION_CARD_WITH_NO_SDK,\n        ShareType.WECHAT_TIMELINE_CARD_WITH_NO_SDK\n      ].indexOf(shareType) >= 0\n    ) {\n      return this._nativeShareCardSpecial(shareType);\n    }\n\n    // share image\n    if (\n      [\n        ShareType.WECHAT_TIMELINE_IMAGE,\n        ShareType.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK,\n        ShareType.WECHAT_SESSION_IMAGE,\n        ShareType.QQ_CHAT_SESSION_IMAGE,\n        ShareType.QQ_ZONE_IMAGE,\n        ShareType.WEIBO_IMAGE,\n        ShareType.WECHAT_SESSION_IMAGE_WITH_NO_SDK,\n        ShareType.WECHAT_SESSION_IMAGES_WITH_NO_SDK,\n        ShareType.SHARE_IMAGE_PASSIVELY\n      ].indexOf(shareType) >= 0\n    ) {\n      return this._nativeShareImage(shareType);\n    }\n\n    // text share\n    if (\n      [\n        ShareType.WECHAT_SESSION_TEXT_WITH_NO_SDK,\n        ShareType.WECHAT_SESSION_TEXT,\n        ShareType.WECHAT_TIMELINE_TEXT\n      ].indexOf(shareType) >= 0\n    ) {\n      return this._nativeShareText(shareType);\n    }\n\n    if (ShareType.COPY_LINK === shareType) {\n      return this._nativeShareClipboard(shareType);\n    }\n\n    if (ShareType.COPY_CIPHER === shareType) {\n      return this.copyCipher();\n    }\n\n    return ShareErrorCode.SHARE_TYPE_NOT_FOUND;\n  }\n\n  /**\n   * 验证分享信息是否有效\n   * @param {ShareType} shareType 分享类型\n   * @param {ShareEntity} shareEntity 分享配置对象\n   */\n  validateShareParams(shareType, shareEntity = {}) {\n    // if (shareType === ShareType.WEIBO) {\n    //     if (!shareEntity.redirectURI) {\n    //         return false;\n    //     }\n    // }\n    return true;\n  }\n\n  /**\n   * @ignore\n   */\n  _setupShareTypes() {\n    // OVERRIDE\n  }\n\n  resetLimiter() {\n    this.shareLimiter.reset();\n    this._queryShareTypePromise = null;\n    return this.waitShareLimiter();\n  }\n\n  /**\n   * @ignore\n   */\n  refreshShare(shareEntity, shareType) {\n    const result = super.refreshShare(shareEntity, shareType);\n    this.emit(ShareEventType.ON_SHARE_PREPARE, { shareType });\n    return result;\n  }\n\n  /**\n   * @ignore\n   */\n  _setupPlatformShareSDK() {\n    // OVERRIDE\n    return this.waitShareLimiter();\n  }\n\n  /**\n   * 等待分享规则初始化\n   * @returns {promise} 分享规则是否初始化\n   */\n  waitShareLimiter() {\n    if (this._isEnableShareCheck) {\n      if (!this._queryShareTypePromise) {\n        this._queryShareTypePromise = this.shareLimiter.build().catch(_ => {\n          this.emit(ShareEventType.SHARE_LIMIT_LOAD_FAIL);\n          return Promise.resolve();\n        });\n      }\n      return this._queryShareTypePromise;\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  // -----------------------------------------------------------------------------------\n  // share call function indeed\n  // -----------------------------------------------------------------------------------\n\n  // title + thumbnailImage + desc\n  // card link\n  /**\n   * @ignore\n   */\n  _nativeShareCard(shareType) {\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    shareEntity.normalize(shareType).then((norParams = {}) => {\n      const { tpInfo, tpInfos, tpDowngrade, wechat_mask_config: wechatMaskConfig, rawResponse = {}, ...restParams } = norParams;\n      // tp failed\n      if (tpDowngrade) {\n        this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n          shareType,\n          shareResultType: ShareResultType.FAIL,\n          tpDowngrade: true,\n          tpInfo\n        });\n        return;\n      }\n      const { sdk_type: sdkType } = rawResponse;\n      const shareParams = Object.assign({\n        type: shareType,\n        redirect_uri: shareEntity.redirectURI || '',\n        share_params: restParams,\n        share_method: shareEntityToMethod(shareEntity, shareType),\n        sdk_type: sdkType\n      });\n      if (shareEntity.needSharedAmount) {\n        shareParams.show_check_detail = 1;\n      }\n      if (wechatMaskConfig) {\n        shareParams.wechat_mask_config = wechatMaskConfig;\n      }\n      // 添加tp 相关配置\n      if (tpInfo && tpInfo.dev_type) {\n        shareParams.dev_app = tpInfo.dev_app;\n        shareParams.dev_type = tpInfo.dev_type;\n      }\n      if (tpInfos) {\n        shareParams.dev_infos = tpInfos;\n      }\n      this._invokeNativeShare(\n        shareParams,\n        params => {\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.SUCCESS,\n            responseData: params,\n            tpInfo\n          });\n        },\n        (e = {}) => {\n          const errorCode = parseInt(e.errorCode, 10) || 0;\n          const shareResultType =\n            errorCode === NATIVE_SAHRE_ERRORS.USER_CANCEL ? ShareResultType.CANCEL : ShareResultType.FAIL;\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType,\n            nativeShareErrorCode: errorCode,\n            responseData: e.data,\n            tpInfo\n          });\n        }\n      );\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  _nativeShareCardSpecial(shareType) {\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    shareEntity.normalize(shareType).then(norParams => {\n      const shareParams = Object.assign({\n        // use special share type\n        type: ShareType.IOS_SYSTEM_SHARE_CARD,\n        share_params: norParams,\n        share_method: shareEntityToMethod(shareEntity, shareType)\n      });\n      this._invokeNativeShare(\n        shareParams,\n        params => {\n          // eslint-disable-next-line camelcase\n          // const { share_type, success } = params;\n          // // 此处返回的share_type 实际是IOSSystemShareChoice\n          // const IOS_WECHAT_SHARE_CHOICE = 'com.tencent.xin.sharetimeline';\n          // // eslint-disable-next-line camelcase\n          // const isSuccess = share_type === IOS_WECHAT_SHARE_CHOICE && success;\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.SUCCESS,\n            responseData: params\n          });\n        },\n        (e = {}) => {\n          const errorCode = parseInt(e.errorCode, 10) || 0;\n          const shareResultType =\n            errorCode === NATIVE_SAHRE_ERRORS.USER_CANCEL ? ShareResultType.CANCEL : ShareResultType.FAIL;\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType,\n            nativeShareErrorCode: errorCode,\n            responseData: e.data\n          });\n        }\n      );\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  /**\n   * @ignore\n   */\n  _nativeShareImage(shareType) {\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    let callNativeShareType = shareType;\n    // 如果是安卓分享朋友圈图片\n    // 直接把shareType 改成走系统级的WITH_NO_SDK\n    // 但是取参数还是按照原有的shareType来取\n    // if (platform.Current === platform.Android &&\n    //     shareType === ShareType.WECHAT_TIMELINE_IMAGE) {\n    //     callNativeShareType = ShareType.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK;\n    // }\n    shareEntity.normalize(shareType).then((norParams = {}) => {\n      const {\n        share_code: shareCode,\n        system_share_mode: systemShareMode,\n        wechat_mask_config: wechatMaskConfig,\n        ...restParams\n      } = norParams;\n      const shareParams = {\n        type: callNativeShareType,\n        share_params: restParams,\n        share_method: shareEntityToMethod(shareEntity, shareType),\n        share_code: shareCode,\n        system_share_mode: systemShareMode\n      };\n      if (wechatMaskConfig) {\n        shareParams.wechat_mask_config = wechatMaskConfig;\n      }\n      let useCompleteCallback = false;\n      // this type is only for android\n      // can only get callback from complete\n      // if (callNativeShareType === ShareType.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK) {\n      //   shareParams.complete = () => {\n      //     // 这个类型的回调只知道回调结束\n      //     // 不知道成功还是失败\n      //     // 此处直接以回调成功来记, 在ShareTracker中有另外的处理\n      //     this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n      //       shareType,\n      //       useComplete: true,\n      //       shareResultType: ShareResultType.SUCCESS\n      //     });\n      //   };\n      //   useCompleteCallback = true;\n      // }\n      this._invokeNativeShare(\n        shareParams,\n        params => {\n          !useCompleteCallback &&\n            this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n              shareType,\n              shareResultType: ShareResultType.SUCCESS,\n              responseData: params\n            });\n        },\n        (e = {}) => {\n          const errorCode = parseInt(e.errorCode, 10);\n          const shareResultType =\n            errorCode === NATIVE_SAHRE_ERRORS.USER_CANCEL ? ShareResultType.CANCEL : ShareResultType.FAIL;\n          !useCompleteCallback &&\n            this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n              shareType,\n              shareResultType,\n              nativeShareErrorCode: errorCode,\n              responseData: e.data\n            });\n        }\n      );\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  /**\n   * @ignore\n   */\n  _nativeShareText(shareType) {\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    const delayTrigger = shareEntity.cipherScene && typeof shareEntity.cipher === 'string';\n    !delayTrigger && this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    let callNativeShareType = shareType;\n    // if (platform.Current === platform.Android &&\n    //     shareType === ShareType.WECHAT_SESSION_TEXT) {\n    //     callNativeShareType = ShareType.WECHAT_SESSION_TEXT_WITH_NO_SDK;\n    // }\n    shareEntity.normalize(shareType).then(norParams => {\n      const { tpInfo, tpInfos, tpDowngrade, wechat_mask_config: wechatMaskConfig, ...restParams } = norParams;\n      if (delayTrigger) {\n        this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType, shareID: restParams.shareID });\n        delete restParams.shareID;\n      }\n      if (tpDowngrade) {\n        this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n          shareType,\n          shareResultType: ShareResultType.FAIL,\n          tpDowngrade: true,\n          tpInfo\n        });\n        return;\n      }\n      const shareParams = Object.assign({\n        type: callNativeShareType,\n        share_params: restParams,\n        share_method: shareEntityToMethod(shareEntity, shareType)\n      });\n      // 添加tp 相关配置\n      if (tpInfo && tpInfo.dev_type) {\n        shareParams.dev_app = tpInfo.dev_app;\n        shareParams.dev_type = tpInfo.dev_type;\n      }\n      if (tpInfos) {\n        shareParams.dev_infos = tpInfos;\n      }\n      if (wechatMaskConfig) {\n        shareParams.wechat_mask_config = wechatMaskConfig;\n      }\n      let useCompleteCallback = false;\n      // 强制分享失败\n      if (\n        shareEntity.forceDowngrade ||\n        (getCurrentPlatform().system === SYSTEM.IOS &&\n          callNativeShareType === ShareType.WECHAT_SESSION_TEXT_WITH_NO_SDK)\n      ) {\n        this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n          shareType,\n          shareResultType: ShareResultType.FAIL,\n          // 留意一下只有forceDowngrade的时候才回传shareParams\n          // 仓老师那边业务使用这个参数来判断是否是来自forceDowngrade\n          shareParams: norParams\n        });\n        return 0;\n      }\n      // this type is only for android\n      // can only get callback from complete\n      // if (\n      //   getCurrentPlatform().system === SYSTEM.Android &&\n      //   callNativeShareType === ShareType.WECHAT_SESSION_TEXT_WITH_NO_SDK\n      // ) {\n      //   shareParams.complete = () => {\n      //     // 这个类型的回调只知道回调结束\n      //     // 不知道成功还是失败\n      //     // 此处直接以回调成功来记, 在ShareTracker中有另外的处理\n      //     this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n      //       shareType,\n      //       useComplete: true,\n      //       shareResultType: ShareResultType.SUCCESS\n      //     });\n      //   };\n      //   useCompleteCallback = true;\n      // }\n      this._invokeNativeShare(\n        shareParams,\n        params => {\n          !useCompleteCallback &&\n            this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n              shareType,\n              shareResultType: ShareResultType.SUCCESS,\n              responseData: params\n            });\n        },\n        (e = {}) => {\n          const errorCode = parseInt(e.errorCode, 10) || 0;\n          const shareResultType =\n            errorCode === NATIVE_SAHRE_ERRORS.USER_CANCEL ? ShareResultType.CANCEL : ShareResultType.FAIL;\n          !useCompleteCallback &&\n            this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n              shareType,\n              shareResultType,\n              nativeShareErrorCode: errorCode,\n              responseData: e.data\n            });\n        }\n      );\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  /**\n   * @ignore\n   */\n  _nativeShareBigImage(shareType) {\n    return ShareErrorCode.SHARE_TYPE_DISABLED;\n  }\n\n  /**\n   * @ignore\n   */\n  _nativeShareClipboard(shareType) {\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    shareEntity.normalize(shareType).then((norParams = {}) => {\n      const shareURL = norParams.share_url || shareEntity.shareURL;\n      setContent(shareURL).then(\n        () => {\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.SUCCESS,\n            content: shareURL,\n            originContent: ''\n          });\n        },\n        () => {\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.FAIL,\n            content: shareURL,\n            originContent: ''\n          });\n        }\n      );\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  /**\n   * @ignore\n   */\n  _sharePinTimeline(shareType) {\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    shareEntity.normalize(shareType).then((norParams = {}) => {\n      const shareParams = Object.assign({\n        type: shareType,\n        share_params: norParams\n      });\n      this._invokeNativeShare(\n        shareParams,\n        params => {\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.SUCCESS,\n            responseData: params\n          });\n        },\n        (e = {}) => {\n          const errorCode = parseInt(e.errorCode, 10) || 0;\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.FAIL,\n            nativeShareErrorCode: errorCode,\n            responseData: e.data\n          });\n        }\n      );\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  /**\n   * 设置原生右上角分享按钮\n   * @param {object} buttonConfig 分享按钮配置\n   * @returns {ShareErrorCode} 分享错误码\n   */\n  setupNativeShareButton(buttonConfig = {}) {\n    const { shareIcon = DEFAULT_SHARE_ICON, shareIconSize = DEFAULT_SHARE_ICON_SIZE } = buttonConfig;\n    if (typeof shareIcon !== 'string' || typeof shareIconSize !== 'number') {\n      return ShareErrorCode.SHARE_PARAMS_NOT_VALID;\n    }\n    invokeBridgeCallNativeFun('JSUIControl', 'setRightBarButtons', {\n      buttons: [\n        {\n          icons: {\n            normal: shareIcon\n          },\n          callback: () => {\n            this.emit(ShareEventType.ON_SHARE_BUTTON_CLICKED);\n          },\n          size: shareIconSize\n        }\n      ]\n    }).catch(_ => {});\n    return 0;\n  }\n\n  /**\n   * @ignore\n   */\n  _invokeNativeShare(params = {}, onSuccess, onFail) {\n    const shareModuleName = getShareModuleName();\n    let method = 'share';\n    const pageSn = getPageSN() + '';\n    if (this._isEnableShareCheck) {\n      params = Object.assign(\n        {\n          origin: 'h5',\n          page_sn: pageSn,\n          page_info: {\n            page_name: getPageName(),\n            page_url: location && location.href\n          }\n        },\n        params\n      );\n      if (this.shareLimiter.getAppOptional()) {\n        params.app_optional = this.shareLimiter.getAppOptional();\n      }\n      method = 'performShare';\n    } else {\n      params.page_sn = pageSn;\n    }\n    invokeBridgeCallNativeFun(shareModuleName, method, params).then(onSuccess, onFail);\n  }\n\n  /**\n   * 复制文本到剪贴板并跳转第三方应用\n   * @param {string} cipher 复制内容\n   * @param {ThirdPartyOpenType} openType 唤起类型\n   * @param {CipherPasteType} pasteType 粘贴姿势\n   * @param {string} shareCode 用于打点，可选参数\n   * @param {object} restOptions 剩余参数（加的太晚了，我还是低估了产品的迭代能力）\n   * @returns {promise} 是否唤起成功\n   */\n  shareCipherManually(\n    cipher,\n    openType = ThirdPartyOpenType.OPEN_WECHAT,\n    pasteType = CipherPasteType.DEFAULT,\n    shareCode,\n    restOptions = {}\n  ) {\n    if (!cipher || typeof cipher !== 'string') {\n      return Promise.reject(new Error('invalid cipher'));\n    }\n    if (\n      // 版本不支持\n      !checkSupportShareCipher()\n    ) {\n      return Promise.reject(new Error('not support'));\n    }\n    if (\n      openType === ThirdPartyOpenType.OPEN_WECHAT ||\n      openType === ThirdPartyOpenType.OPEN_WECHAT_IOS_SILENT ||\n      openType === ThirdPartyOpenType.OPEN_WECHAT_ANDROID_SILENT\n    ) {\n      if (checkSupportSilentWakeUp() && this.shareLimiter.isSilentMode) {\n        openType =\n          getCurrentPlatform().system === SYSTEM.IOS\n            ? ThirdPartyOpenType.OPEN_WECHAT_IOS_SILENT\n            : ThirdPartyOpenType.OPEN_WECHAT_ANDROID_SILENT;\n      } else {\n        openType = ThirdPartyOpenType.OPEN_WECHAT;\n      }\n    }\n    return invokeBridgeCallNativeFun(getShareModuleName(), 'shareCipher', {\n      cipher,\n      open_type: openType,\n      paste_type: pasteType,\n      share_code: shareCode,\n      ...restOptions\n    });\n  }\n}\n\nexport default NativeShareController;\n","/**\n * @file QQShareEntity.js\n * @author  daben\n */\nimport ShareMethod from '../ShareMethod';\nimport ShareForm from '../ShareForm';\nimport ShareEntity from './index';\nimport { isShareToQQ } from '../qqShareTypes';\nimport { getQQShareURL } from '../tools/urlWrapper';\nimport ShareType from '../ShareType';\n\nclass QQShareEntity extends ShareEntity {\n  normalize(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return this.processCipher();\n    }\n    return new Promise((res, rej) => {\n      const shareEntity = Object.assign({}, this);\n      if (isShareToQQ(shareType)) {\n        this.targetShareURL = getQQShareURL(shareType, shareEntity.shareURL);\n        this.realShareURL = this.targetShareURL;\n        res({\n          title: shareEntity.title,\n          desc: shareEntity.message,\n          share_url: this.realShareURL,\n          // need share_type = type\n          image_url: shareEntity.thumbnailURL,\n          back: true\n        });\n      } else {\n        res({\n          title: shareEntity.title,\n          desc: shareEntity.message,\n          share_url: shareEntity.shareURL,\n          // need share_type = type\n          image_url: shareEntity.thumbnailURL,\n          back: true\n        });\n      }\n    });\n  }\n\n  getShareForm(shareType) {\n    if (shareType === ShareType.COPY_LINK) {\n      return ShareForm.COPY_LINK;\n    } else if (shareType === ShareType.COPY_CIPHER) {\n      return ShareForm.COMMAND;\n    }\n    return ShareForm.CARD;\n  }\n\n  getShareMethod(shareType) {\n    if (shareType === ShareType.COPY_LINK || shareType === ShareType.COPY_CIPHER) {\n      return ShareMethod.MANUAL;\n    }\n    return ShareMethod.SDK;\n  }\n}\n\nexport default QQShareEntity;\n","/**\n * @file ShareController/qq.js\n * @author daben\n */\nimport ShareController from './base';\nimport ShareType from '../ShareType';\nimport ShareEventType from '../ShareEventType';\nimport ShareResultType from '../ShareResultType';\nimport QQShareEntity from '../ShareEntity/QQShareEntity';\nimport ShareError from '../ShareError';\nconst { ShareErrorCode } = ShareError;\nconst SUPPORTED_SHARE_TYPE = [\n  ShareType.QQ_CHAT_SESSION,\n  ShareType.QQ_ZONE,\n  ShareType.WECHAT_SESSION,\n  ShareType.WECHAT_TIMELINE,\n  ShareType.COPY_LINK,\n  ShareType.COPY_CIPHER\n];\n\nconst shareTypeMapType = {\n  [ShareType.QQ_CHAT_SESSION]: 0,\n  [ShareType.QQ_ZONE]: 1,\n  [ShareType.WECHAT_SESSION]: 2,\n  [ShareType.WECHAT_TIMELINE]: 3\n};\n\nconst SHARE_TYPE_MAP_TAG = {\n  [ShareType.QQ_CHAT_SESSION]: 'menuItem:share:qq',\n  [ShareType.QQ_ZONE]: 'menuItem:share:QZone',\n  [ShareType.WECHAT_SESSION]: 'menuItem:share:appMessage',\n  [ShareType.WECHAT_TIMELINE]: 'menuItem:share:timeline'\n};\n\n/**\n * @access private\n * @extends {ShareController}\n */\nclass QQShareController extends ShareController {\n  constructor(opts) {\n    super(opts);\n    this.ShareEntityClass = QQShareEntity;\n    this._enableShareTypes = SUPPORTED_SHARE_TYPE.concat();\n  }\n\n  /**\n   * @override\n   * @param {ShareType} shareType 分享类型\n   */\n  share(shareType) {\n    if (this._enableShareTypes.indexOf(shareType) < 0) {\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n    if (ShareType.COPY_CIPHER === shareType) {\n      return this.copyCipher();\n    }\n    if (\n      typeof mqq === 'undefined' ||\n      typeof window.mqq.ui === 'undefined'\n    ) {\n      return ShareErrorCode.SHARE_NOT_SUPPORTED;\n    }\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    shareEntity.normalize(shareType).then((shareParams = {}) => {\n      // qq share_type is special\n      shareParams.share_type = shareTypeMapType[shareType];\n      window.mqq.ui.shareMessage(\n        shareParams,\n        this.createShareCallback(shareType)\n      );\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  /**\n   * @override\n   */\n  _adjustMenu() {\n    // diff this._enableShareTypes && SUPPORTED_SHARE_TYPE\n    // and hide disabled type\n    const tags = SUPPORTED_SHARE_TYPE.filter((type) => {\n      return this._enableShareTypes.indexOf(type) < 0;\n    }).map((type) => {\n      return SHARE_TYPE_MAP_TAG[type];\n    });\n    window.mqq && window.mqq.hideMenuItems({\n      menuList: tags\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  createShareCallback(shareType) {\n    return (res = {}) => {\n      const code = parseInt(res.retCode, 10);\n      switch (code) {\n        case 0:\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.SUCCESS\n          });\n          break;\n        case 1:\n        case -2:\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.CANCEL\n          });\n          break;\n        default:\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.FAIL\n          });\n      }\n    };\n  }\n\n  /**\n   * @override\n   */\n  _setupShareTypes() {\n    const currentLength = this._enableShareTypes.length;\n    this._enableShareTypes = SUPPORTED_SHARE_TYPE.filter((shareType) => {\n      return (this.disableShareTypes || []).indexOf(shareType) < 0;\n    });\n    return currentLength === this._enableShareTypes.length;\n  }\n\n  /**\n   * @override\n   */\n  _setupPlatformShareSDK() {\n    if (\n      typeof mqq === 'undefined' ||\n      typeof window.mqq.ui === 'undefined'\n    ) {\n      this.emit(ShareEventType.SDK_INIT_FAILED);\n      return Promise.resolve();\n    }\n    window.mqq.ui.setOnShareHandler((type) => {\n      const shareType = SUPPORTED_SHARE_TYPE[parseInt(type, 10)];\n      const shareEntity = this.getShareEntityByShareType(shareType);\n      // if no share params, do not setup\n      if (!shareEntity || !SHARE_TYPE_MAP_TAG[shareType]) {\n        return;\n      }\n      this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n      shareEntity.normalize(shareType).then((shareParams = {}) => {\n        // qq share_type is special\n        shareParams.share_type = type;\n        window.mqq.ui.shareMessage(\n          shareParams,\n          this.createShareCallback(shareType)\n        );\n      }, this.getNormalizeErrorHandler(shareType));\n    });\n    return Promise.resolve();\n  }\n\n  /**\n   * @override\n   * @param {ShareType} shareType 分享类型\n   */\n  checkShareTypeEnable(shareType) {\n    if (this._enableShareTypes.indexOf(shareType) < 0) {\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n    return 0;\n  }\n}\n\nQQShareController.SUPPORTED_SHARE_TYPE = SUPPORTED_SHARE_TYPE;\n\nexport default QQShareController;\n","/**\n * @file WebShareEntity.js\n * @author  daben\n */\nimport ShareMethod from '../ShareMethod';\nimport ShareForm from '../ShareForm';\nimport ShareEntity from './index';\nimport ShareType from '../ShareType';\n\nclass WebShareEntity extends ShareEntity {\n  async normalize(shareType) {\n    const shareEntity = Object.assign({}, this);\n    if (shareType === ShareType.COPY_CIPHER) {\n      return this.processCipher();\n    }\n    return {\n      title: shareEntity.shareURL\n    };\n  }\n\n  getShareForm(shareType) {\n    if (shareType === ShareType.COPY_LINK) {\n      return ShareForm.COPY_LINK;\n    } else if (shareType === ShareType.COPY_CIPHER) {\n      return ShareForm.COMMAND;\n    }\n    return ShareForm.DEFAULT;\n  }\n\n  getShareMethod() {\n    return ShareMethod.MANUAL;\n  }\n}\n\nexport default WebShareEntity;\n","/**\n * 一般浏览器环境下分享，支持口令与链接\n * @file ShareController/web.js\n * @author daben\n */\nimport ShareController from './base';\nimport ShareType from '../ShareType';\nimport { ShareErrorCode } from '../ShareError';\nimport ShareEventType from '../ShareEventType';\nimport ShareResultType from '../ShareResultType';\nimport WebShareEntity from '../ShareEntity/WebShareEntity';\n\nconst SUPPORTED_SHARE_TYPE = [\n  ShareType.COPY_LINK,\n  ShareType.COPY_CIPHER\n];\n\n/**\n * @access private\n * @extends {ShareController}\n */\nclass WebShareController extends ShareController {\n  constructor(opts) {\n    super(opts);\n    this.ShareEntityClass = WebShareEntity;\n    this._enableShareTypes = SUPPORTED_SHARE_TYPE.concat();\n  }\n  /**\n   * 对于web环境下面的分享，目前只提供生成分享链接跟生成分享口令的功能\n   * 并且这两种功能不做其他限制\n   * @override\n   * @param {ShareType} shareType 分享类型\n   */\n  share(shareType) {\n    if (this._enableShareTypes.indexOf(shareType) < 0) {\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n    if (ShareType.COPY_CIPHER === shareType) {\n      return this.copyCipher();\n    }\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    shareEntity.normalize(shareType).then((norParams = {}) => {\n      this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n        shareType,\n        shareResultType: ShareResultType.SUCCESS,\n        content: norParams.title\n      });\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n}\n\nexport default WebShareController;\n","/**\n * @file WeChatShareEntity.js\n * @author daben\n */\nimport ShareMethod from '../ShareMethod';\nimport ShareForm from '../ShareForm';\nimport ShareEntity from './index';\nimport ShareType from '../ShareType';\nimport { isShareToQQ } from '../qqShareTypes';\nimport { getQQShareURL, getWebWrappedShareURLInfo } from '../tools/urlWrapper';\n\nclass WeChatShareEntity extends ShareEntity {\n  normalize(shareType) {\n    const shareEntity = Object.assign({}, this);\n    if (shareType === ShareType.COPY_CIPHER) {\n      return this.processCipher();\n    }\n    return new Promise((res, rej) => {\n      const shareURL = shareEntity.shareURL;\n      this.targetShareURL = this.shareURL;\n      this.realShareURL = this.shareURL;\n      this.useShortURL = false;\n      if (\n        shareType === ShareType.WECHAT_TIMELINE ||\n        shareType === ShareType.WECHAT_SESSION\n      ) {\n        getWebWrappedShareURLInfo(shareEntity).then(({\n          realShareURL,\n          targetShareURL,\n          useShortURL\n        }) => {\n          this.useShortURL = useShortURL;\n          this.targetShareURL = targetShareURL;\n          this.realShareURL = realShareURL;\n          res({\n            title: shareEntity.title,\n            desc: shareEntity.message,\n            imgUrl: shareEntity.thumbnailURL,\n            link: realShareURL\n          });\n        }, () => {});\n      } else if (isShareToQQ(shareType)) {\n        this.targetShareURL = getQQShareURL(shareType, shareURL);\n        this.realShareURL = this.targetShareURL;\n        res({\n          title: shareEntity.title,\n          desc: shareEntity.message,\n          imgUrl: shareEntity.thumbnailURL,\n          link: this.realShareURL\n        });\n      } else {\n        res({\n          title: shareEntity.title,\n          desc: shareEntity.message,\n          imgUrl: shareEntity.thumbnailURL,\n          link: shareURL\n        });\n      }\n    });\n  }\n\n  getShareForm(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return ShareForm.COMMAND;\n    }\n    return ShareForm.CARD;\n  }\n\n  getShareMethod(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return ShareMethod.MANUAL;\n    }\n    return ShareMethod.SDK;\n  }\n}\n\nexport default WeChatShareEntity;\n","/**\n * @file ShareController/wechat.js\n * @author  daben\n */\nimport ShareController from './base';\nimport ShareType from '../ShareType';\nimport ShareEventType from '../ShareEventType';\nimport ShareResultType from '../ShareResultType';\nimport WeChatShareEntity from '../ShareEntity/WeChatShareEntity';\nimport ShareError from '../ShareError';\nconst { ShareErrorCode } = ShareError;\n\nconst SHARE_MENUS = {\n  [ShareType.WECHAT_SESSION]: {\n    name: 'onMenuShareAppMessage',\n    tag: 'menuItem:share:appMessage'\n  },\n  [ShareType.WECHAT_TIMELINE]: {\n    name: 'onMenuShareTimeline',\n    tag: 'menuItem:share:timeline'\n  },\n  [ShareType.QQ_CHAT_SESSION]: {\n    name: 'onMenuShareQQ',\n    tag: 'menuItem:share:qq'\n  },\n  [ShareType.QQ_ZONE]: {\n    name: 'onMenuShareQZone',\n    tag: 'menuItem:share:QZone'\n  },\n  [ShareType.TENCENT_WEIBO]: {\n    name: 'onMenuShareWeibo',\n    tag: 'menuItem:share:weiboApp'\n  }\n};\n\nconst SUPPORTED_SHARE_TYPE = [\n  ShareType.WECHAT_SESSION,\n  ShareType.WECHAT_TIMELINE,\n  ShareType.QQ_CHAT_SESSION,\n  ShareType.QQ_ZONE,\n  ShareType.TENCENT_WEIBO,\n  ShareType.COPY_CIPHER\n];\n\n/**\n * @access private\n * @extends {ShareController}\n */\nclass WeChatShareController extends ShareController {\n  constructor(opts) {\n    super(opts);\n    this.ShareEntityClass = WeChatShareEntity;\n    this._enableShareTypes = SUPPORTED_SHARE_TYPE.concat();\n  }\n\n  /**\n   * @override\n   */\n  share(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return this.copyCipher();\n    }\n    return ShareErrorCode.SHARE_ACTION_DISABLE;\n  }\n\n  /**\n   * 微信中比较特殊，因为要提前准备好对应的url\n   * 因此不能多个渠道共用一个默认的shareEntity\n   * 所以需要把能用的都更改下\n   * @ignore\n   * @override\n  */\n  refreshShare(shareEntity, shareType) {\n    if (!shareEntity) {\n      return Promise.resolve();\n    }\n    if (shareType) {\n      this.shareEntityMap[shareType] = shareEntity;\n      if (typeof wx === 'undefined') {\n        this.emit(ShareEventType.SDK_INIT_FAILED);\n        return Promise.resolve();\n      }\n      return this.refreshWeChatChannelShare(shareType);\n    } else {\n      this.shareEntity = shareEntity;\n      this._enableShareTypes.forEach((shareType) => {\n        this.shareEntityMap[shareType] = this.createShareEntity(shareEntity, shareType);\n      });\n      return this._setupPlatformShareSDK();\n    }\n  }\n\n  /**\n   * @override\n   */\n  _setupShareTypes() {\n    const currentLength = this._enableShareTypes.length;\n    this._enableShareTypes = SUPPORTED_SHARE_TYPE.filter((shareType) => {\n      return this.disableShareTypes.indexOf(shareType) < 0;\n    });\n    return currentLength === this._enableShareTypes.length;\n  }\n\n  /**\n   * @override\n   */\n  _setupPlatformShareSDK() {\n    if (typeof wx === 'undefined') {\n      this.emit(ShareEventType.SDK_INIT_FAILED);\n      return Promise.resolve();\n    }\n    return Promise.all(this._enableShareTypes.map((shareType) => {\n      this.refreshWeChatChannelShare(shareType);\n    }));\n  }\n\n  /**\n   * @override\n   */\n  _adjustMenu() {\n    // diff this._enableShareTypes && SUPPORTED_SHARE_TYPE\n    // and hide disabled type\n    const tags = SUPPORTED_SHARE_TYPE.filter((type) => {\n      return this._enableShareTypes.indexOf(type) < 0;\n    }).map((type) => {\n      return SHARE_MENUS[type].tag;\n    });\n    window.wx && window.wx.hideMenuItems({\n      menuList: tags\n    });\n  }\n\n  /**\n   * 刷新分享类型对应的渠道配置\n   * @param {ShareType} shareType 分享类型\n   */\n  refreshWeChatChannelShare(shareType) {\n    const config = SHARE_MENUS[shareType];\n    if (!config) {\n      return Promise.resolve();\n    }\n    return this._setupWeChatChannelShare(shareType, config.name);\n  }\n\n  /**\n   * @ignore\n   */\n  _setupWeChatChannelShare(shareType, interfaceName = '') {\n    if (!window.wx || typeof window.wx[interfaceName] !== 'function') {\n      return Promise.resolve();\n    }\n    const shareEntity = this.shareEntityMap[shareType] || this.shareEntity;\n    // if no share params, do not setup\n    if (!shareEntity) {\n      return Promise.resolve();\n    }\n    this.emit(ShareEventType.ON_SHARE_PREPARE, { shareType });\n    return shareEntity.normalize(shareType).then((shareParams) => {\n      const config = Object.assign({\n        trigger: () => {\n          this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n        },\n        success: () => {\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.SUCCESS\n          });\n          this.refreshWeChatChannelShare(shareType);\n        },\n        fail: () => {\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.FAIL\n          });\n          this.refreshWeChatChannelShare(shareType);\n        },\n        cancel: () => {\n          this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n            shareType,\n            shareResultType: ShareResultType.CANCEL\n          });\n          this.refreshWeChatChannelShare(shareType);\n        }\n      }, shareParams);\n      window.wx[interfaceName](config);\n    }, this.getNormalizeErrorHandler(shareType));\n  }\n\n  /**\n   * @override\n   * @param {ShareType} shareType 分享类型\n   */\n  checkShareTypeEnable(shareType) {\n    if (this._enableShareTypes.indexOf(shareType) < 0) {\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n    return 0;\n  }\n}\n\nWeChatShareController.SUPPORTED_SHARE_TYPE = SUPPORTED_SHARE_TYPE.concat();\n\nexport default WeChatShareController;\n","/**\n * @file WxAppShareEntity.js\n * @author  daben\n */\nimport ShareMethod from '../ShareMethod';\nimport ShareForm from '../ShareForm';\nimport ShareEntity from './index';\nimport ShareType from '../ShareType';\nimport processMiniObjectPath, { toHttps } from '../tools/processMiniObjectPath';\n// import navigation from '@pdd/navigation';\n\nclass WxAppShareEntity extends ShareEntity {\n  constructor(opts) {\n    super(opts);\n    this.wxAppRequestPayload = opts.wxAppRequestPayload;\n    this.miniObjectPath = opts.miniObjectPath;\n    this.shortCommandApi = opts.shortCommandApi;\n    this.wxAppNavigatePayload = opts.wxAppNavigatePayload;\n  }\n\n  async normalize(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return this.processCipher();\n    }\n    const shareEntity = Object.assign({}, this);\n\n    let miniObjectPath = shareEntity.miniObjectPath;\n    // 小程序环境下 打点由小程序打 但是公共包仍然需要补入refer_相关信息\n    // 因为refer由小程序补充（小程序是利用正则匹配公共包补入的refer_share_id)\n    // 如果有差错的话 需要找小程序同学修正\n    if (miniObjectPath && typeof miniObjectPath === 'string') {\n      miniObjectPath = processMiniObjectPath(shareEntity);\n    } else if (typeof miniObjectPath === 'function') {\n      try {\n        miniObjectPath = miniObjectPath(shareEntity.shareURL);\n        if (typeof miniObjectPath !== 'string') {\n          miniObjectPath = null;\n        }\n      } catch (e) {\n        // todo\n      }\n    }\n    // const path = await navigation.getMiniProgramUrl(shareEntity.shareURL);\n    return Promise.resolve(Object.assign({}, shareEntity.wxAppNavigatePayload, {\n      title: shareEntity.title,\n      thumbnail: shareEntity.thumbnailURL,\n      // 如果是分享小程序\n      // 跟@陈宫 确认了,支持 share_url 传原生路径,优先使用原生路径\n      share_url: miniObjectPath || toHttps(shareEntity.shareURL)\n    }));\n  }\n\n  getShareForm(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return ShareForm.COMMAND;\n    }\n    return ShareForm.WXAPP_CARD;\n  }\n\n  getShareMethod(shareType) {\n    if (shareType === ShareType.COPY_CIPHER) {\n      return ShareMethod.MANUAL;\n    }\n    return ShareMethod.SDK;\n  }\n}\n\nexport default WxAppShareEntity;\n","/**\n * @file ShareController/wxapp.js\n * @author  daben\n */\nimport ShareController from './base';\nimport ShareType from '../ShareType';\nimport ShareEventType from '../ShareEventType';\nimport ShareResultType from '../ShareResultType';\nimport WxAppShareEntity from '../ShareEntity/WxAppShareEntity';\nimport ShareError from '../ShareError';\nimport { getPageSN, getPageName, getPageID } from '../tools/getPageContext';\nimport { buildQuery } from '@pdd/core-util';\nconst { ShareErrorCode } = ShareError;\n\nconst SUPPORTED_SHARE_TYPE = [\n  ShareType.WECHAT_SESSION,\n  ShareType.COPY_CIPHER\n];\n\nconst DEFALT_WEBSHARE_RELAY_PAGE = '/pages/web_share/web_share?';\n\nclass WxAppShareController extends ShareController {\n  constructor(opts) {\n    super(opts);\n    this.ShareEntityClass = WxAppShareEntity;\n    this._enableShareTypes = SUPPORTED_SHARE_TYPE.concat();\n  }\n\n  /**\n   * @override\n   * @param {ShareType} shareType 分享类型\n   */\n  share(shareType) {\n    if (this._enableShareTypes.indexOf(shareType) < 0) {\n      return ShareErrorCode.SHARE_TYPE_DISABLED;\n    }\n    if (ShareType.COPY_CIPHER === shareType) {\n      return this.copyCipher();\n    }\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    // 小程序没有默认分享参数了，因此如果不配置分享参数的话 会返回这个错误\n    if (!shareEntity) {\n      return ShareErrorCode.SHARE_PARAMS_NOT_VALID;\n    }\n    return this._shareByNavigate();\n  }\n\n  /**\n   * @ignore\n   */\n  _shareByNavigate() {\n    if (\n      !window.wx ||\n      !window.wx.miniProgram ||\n      typeof window.wx.miniProgram.navigateTo !== 'function'\n    ) {\n      return ShareErrorCode.SHARE_NOT_SUPPORTED;\n    }\n    const shareType = ShareType.WECHAT_SESSION;\n    const shareEntity = this.getShareEntityByShareType(shareType);\n    this.emit(ShareEventType.ON_SHARE_TRIGGER, { shareType });\n    shareEntity.normalize(shareType).then((norParams) => {\n      window.wx.miniProgram.navigateTo({\n        url: `${DEFALT_WEBSHARE_RELAY_PAGE}${buildQuery(Object.assign({\n          page_sn: getPageSN() + '',\n          page_name: getPageName(),\n          page_id: getPageID()\n        }, norParams))}`\n      });\n      this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n        shareType,\n        shareResultType: ShareResultType.SUCCESS\n      });\n    }, this.getNormalizeErrorHandler(shareType));\n    return 0;\n  }\n\n  /**\n   * @deprecated\n   * @param {ShareType} shareType 分享类型\n   */\n  refreshWxAppChannelShare(shareType) {\n    return this._setupPlatformShareSDK();\n  }\n\n  /**\n   * @deprecated\n   * @param {ShareType} shareType 分享类型\n   * @param {ShareResultType} shareResultType 分享结果类型\n   */\n  notifyWxAppShareComplete(shareType, shareResultType = ShareResultType.SUCCESS) {\n    this.emit(ShareEventType.ON_SHARE_COMPLETED, {\n      shareType,\n      shareResultType\n    });\n    this.refreshWxAppChannelShare(shareType);\n  }\n\n  /**\n   * @override\n   */\n  _setupPlatformShareSDK() {\n    if (\n      typeof wx !== 'object' ||\n      typeof window.wx.miniProgram !== 'object' ||\n      typeof window.wx.miniProgram.postMessage !== 'function'\n    ) {\n      this.emit(ShareEventType.SDK_INIT_FAILED);\n      return Promise.resolve();\n    }\n    return Promise.all([ShareType.WECHAT_SESSION].map((shareType) => {\n      const shareEntity = this.getShareEntityByShareType(shareType);\n      if (!shareEntity) {\n        return Promise.resolve();\n      }\n      this.emit(ShareEventType.ON_SHARE_PREPARE, { shareType });\n      return shareEntity.normalize(shareType).then((norParams) => {\n        try {\n          window.wx.miniProgram.postMessage({\n            data: {\n              message_type: 'share',\n              share_info: norParams,\n              page_info: {\n                page_sn: getPageSN() + '',\n                page_name: getPageName(),\n                page_id: getPageID()\n              }\n            }\n          });\n        } catch (e) {\n          // todo\n        }\n      }, this.getNormalizeErrorHandler(shareType));\n    }));\n  }\n}\n\nexport default WxAppShareController;\n","/**\n * 保存着分享需要的参数内容\n * 控制一些对参数的特殊处理\n * 将代码中的参数转为tp SDK所需要的参数\n * @file ShareEntity/index.js\n * @author daben\n */\nimport buildURL from '../tools/buildURL';\nimport URLWrapType from '../tools/URLWrapType';\nimport ShareForm from '../ShareForm';\nimport ShareMethod from '../ShareMethod';\nimport { getWebWrappedShareURLInfo } from '../tools/urlWrapper';\n\nexport function format(formatString) {\n  const args = [];\n  for (let i = 1; i < arguments.length; ++i) {\n    args.push(arguments[i]);\n  }\n  return formatString.replace(/{(\\d+)}/g, function (match, index) {\n    if (args[index] === 0) { return 0; }\n    return args[index] || '';\n  });\n}\n\n/**\n * 分享配置对象\n */\nclass ShareEntity {\n  // 如果有从opt中获取保存的参数， 务必保证this和opt中的命名一一对应\n  constructor(opts = {}) {\n    // 分享标题\n    this.title = opts.title || '';\n    // 分享对应的描述\n    this.message = opts.message || '';\n    // 分享的链接 (同域名)\n    this.shareURL = opts.shareURL || '';\n    // 分享的链接 (目标落地页, 实际打点的url)\n    this.targetShareURL = '';\n    // 分享的链接 (最终分享出去的链接)\n    this.realShareURL = '';\n    // 落地页面域名\n    this.shareDomain = opts.shareDomain || '';\n    // this.shareImageURL = opts.shareImageURL || '';\n    // 分享缩略图\n    this.thumbnailURL = opts.thumbnailURL || '';\n    // bak\n    this.timelineDomain = opts.timelineDomain || '';\n    this.timelineAppId = opts.timelineAppId || '';\n    this.marketActivityID = opts.marketActivityID || 0;\n    this.urlWrapType = opts.urlWrapType || URLWrapType.DEFAULT;\n    // short url generate api\n    this.shortURLApi = opts.shortURLApi || '';\n    this.domainURLApi = opts.domainURLApi || '';\n    this.payloadMixin = opts.payloadMixin || null;\n    this.requestUsePost = opts.requestUsePost || false;\n    this.shortCommandApi = opts.shortCommandApi || '';\n    // 口令处理逻辑\n    this.cipherProcessor = opts.cipherProcessor;\n  }\n\n  /**\n   * 标准化后得到的参数, 是实际调用第三方SDK（包括APP）所必须的参数\n   * @abstract\n   * @param {ShareType} shareType 分享类型\n   */\n  async normalize(shareType) {\n    return Promise.resolve({});\n  }\n\n  /**\n   * @ignore\n   */\n  setShareURLQueries(queries = {}) {\n    if (this.urlWrapType === URLWrapType.RAW) {\n      return;\n    }\n    this.shareID = queries.refer_share_id;\n    this.shareURL = buildURL(queries, this.shareURL);\n  }\n\n  /**\n   * @abstract\n   * @param {ShareType} shareType 分享类型\n   */\n  getShareForm(shareType) {\n    return ShareForm.DEFAULT;\n  }\n\n  /**\n   * @abstract\n   * @param {ShareType} shareType 分享类型\n   */\n  getShareMethod(shareType) {\n    return ShareMethod.DEFAULT;\n  }\n\n  /**\n   * 生成口令，先写这，虽然也有点不大合适\n   */\n  processCipher() {\n    const shareEntity = Object.assign({}, this);\n    const params = {\n      title: shareEntity.title\n    };\n    let shareTextFinal = params.title || '';\n    return getWebWrappedShareURLInfo(shareEntity).then(({\n      targetShareURL,\n      useShortURL,\n      shareText,\n      cipher\n    }) => {\n      if (cipher) {\n        params.cipher = cipher;\n      }\n      this.targetShareURL = targetShareURL;\n      const withoutDefault = (useShortURL || cipher) ? shareText : '';\n      const withDefault = withoutDefault || targetShareURL;\n      shareTextFinal = format(shareTextFinal, withDefault, targetShareURL, withoutDefault);\n      params.title = shareTextFinal;\n      this.pcode = shareTextFinal;\n      return params;\n    });\n  }\n}\n\nexport default ShareEntity;\n","/**\n * 分享流程中的错误对象\n * @file ShareError/index.js\n * @author  daben\n */\n\n/**\n * 分享错误码\n * @typedef {object} ShareErrorCode\n * @property {number} DEFAULT 默认错误码\n * @property {number} SHARE_PARAMS_NOT_VALID 分享参数不合法\n * @property {number} SHARE_TYPE_DISABLED 分享类型被限制\n * @property {number} SHARE_TYPE_NOT_FOUND 无效的分享类型\n * @property {number} SHARE_ACTION_DISABLE 分享行为被禁止\n * @property {number} SHARE_STATUS_ILLEGAL 分享状态非法\n * @property {number} SHARE_NOT_SUPPORTED 分享功能该版本不支持\n * @property {number} SHARE_LIMITER_NOT_INIT 分享限制规则没有初始化\n */\nexport const ShareErrorCode = {\n  // none\n  DEFAULT: 0,\n  SHARE_PARAMS_NOT_VALID: 1,\n  SHARE_TYPE_DISABLED: 2,\n  SHARE_TYPE_NOT_FOUND: 3,\n  SHARE_ACTION_DISABLE: 4,\n  SHARE_STATUS_ILLEGAL: 5,\n  SHARE_NOT_SUPPORTED: 6,\n  SHARE_LIMITER_NOT_INIT: 7\n};\n\nclass ShareError {\n  constructor(opts = {}) {\n    this.errorCode = opts.errorCode || ShareErrorCode.DEFAULT;\n    this.message = opts.message || '';\n  }\n}\n\nShareError.create = (errorCode) => {\n  return new ShareError({\n    errorCode\n  });\n};\n\nShareError.ShareErrorCode = ShareErrorCode;\n\nexport default ShareError;\n","/**\n * @file ShareEvent/index.js\n * @author daben\n */\n\n/**\n * 分享事件类型\n * @typedef {object} ShareEventType\n * @property {number} DEFAULT 默认事件类型\n * @property {number} ON_SHARE_TRIGGER 分享触发事件\n * @property {number} ON_SHARE_COMPLETED 分享完成事件\n * @property {number} SDK_INIT_FAILED sdk初始化事件\n * @property {number} ON_SHARE_BUTTON_CLICKED app右上角分享按钮点击事件\n * @property {number} ON_SHARE_PREPARE 分享信息修改事件\n * @property {number} ON_SDK_READY sdk就绪事件\n * @property {number} ON_SHARE_INTERRUPT 分享中断事件（分享流程尚未开始就出错了）\n * @property {number} SHARE_LIMIT_LOAD_FAIL 分享限制规则加载失败事件\n * @property {number} PERFORM_LOG_FAILED 分享行为打点失败\n * @property {number} SHARE_REACH_LIMIT 分享次数到达限制事件\n */\nconst ShareEventType = {\n  DEFAULT: 0,\n  ON_SHARE_TRIGGER: 1,\n  ON_SHARE_COMPLETED: 2,\n  SDK_INIT_FAILED: 3,\n  ON_SHARE_BUTTON_CLICKED: 4,\n  ON_SHARE_PREPARE: 5,\n  ON_SDK_READY: 6,\n  ON_SHARE_INTERRUPT: 7,\n  SHARE_LIMIT_LOAD_FAIL: 8,\n  PERFORM_LOG_FAILED: 9,\n  SHARE_REACH_LIMIT: 10\n};\n\nexport default ShareEventType;\n","/**\n * @file ShareForm.js\n * @author  daben\n */\n\n/**\n * 分享形式\n * @typedef {object} ShareForm\n * @property {string} DEFAULT 默认分享形式\n * @property {string} COMMAND 口令分享形式\n * @property {string} IMAGE 图片分享形式\n * @property {string} TEXT 文本分享形式\n * @property {string} CARD web卡片分享形式\n * @property {string} WXAPP_CARD 小程序卡片分享形式\n * @property {string} COPY_LINK 复制链接分享形式\n */\nconst ShareForm = {\n  DEFAULT: '',\n  // 口令分享\n  COMMAND: 'kouling',\n  IMAGE: 'image',\n  TEXT: 'text',\n  CARD: 'card',\n  WXAPP_CARD: 'custom_card',\n  // 关山确认 复制链接的时候share_form为text\n  COPY_LINK: 'text'\n};\n\nexport default ShareForm;\n","/**\n * @file LimitMethod.js\n * @author  daben\n */\n\nexport default {\n  CIPHER: 'CIPHER_TEXT',\n  LINK: 'LINK',\n  DOMAIN: 'DOMAIN',\n  NORMAL: 'NORMAL',\n  IMAGE: 'IMAGE',\n  COPY: 'COPY'\n};\n","/**\n * @file platformTag.js\n * @author  daben\n */\nimport { getCurrentPlatform } from '@pdd/platform-util';\n\nexport default function platformTag() {\n  const platform = getCurrentPlatform();\n  if (platform.isWeChatMiniProgram) {\n    return platform.WxApp;\n  }\n  if (platform.isWeChatPlatform) {\n    return platform.WeChat;\n  }\n  if (platform.isQQPlatform) {\n    return platform.QQ;\n  }\n  if (\n    platform.isNativePlatform ||\n    platform.isTinyNativePlatform\n  ) {\n    // 如果是app中的web页面 使用h5\n    return 'h5';\n  }\n  return '';\n}\n","/**\n * @file translation.js\n * @author  daben\n */\nimport {\n  isTinyDomainType,\n  isShortLinkType\n} from '../tools/URLWrapType';\nimport ShareForm from '../ShareForm';\nimport LimitMethod from '../ShareLimiter/LimitMethod';\n\nexport function shareEntityToParams(shareEntity = {}) {\n  return {\n    title: shareEntity.title,\n    message: shareEntity.message,\n    thumb_url: shareEntity.thumbnailURL,\n    share_url: shareEntity.shareURL\n  };\n}\n\n// 分为口令（CIPHER）、后端定义中只有文本分享会有这个since 19/04/16\n// 短链（LINK）、后端定义中只有文本分享会有这个since 19/04/16\n// 小域名（DOMAIN）、后端定义中只有卡片分享会有这个since 19/04/16\n// 普通分享（NORMAL）、\n// 图片分享（IMAGE）、\n// 拷贝分享（COPY）、\nexport function shareEntityToMethod(shareEntity = {}, shareType) {\n  if (\n    isShortLinkType(shareEntity.urlWrapType) &&\n    shareEntity.marketActivityID &&\n    shareEntity.getShareForm(shareType) === ShareForm.COMMAND\n  ) {\n    return LimitMethod.CIPHER;\n  } else if (\n    isShortLinkType(shareEntity.urlWrapType) &&\n    shareEntity.marketActivityID &&\n    shareEntity.getShareForm(shareType) === ShareForm.TEXT\n  ) {\n    return LimitMethod.LINK;\n  } else if (\n    isTinyDomainType(shareEntity.urlWrapType) &&\n    shareEntity.marketActivityID &&\n    shareEntity.getShareForm(shareType) === ShareForm.CARD\n  ) {\n    return LimitMethod.DOMAIN;\n  } else if (\n    shareEntity.getShareForm(shareType) === ShareForm.IMAGE\n  ) {\n    return LimitMethod.IMAGE;\n  }\n  return LimitMethod.NORMAL;\n}\n","/**\n * @file ShareMethod.js\n * @author  daben\n */\n\n/**\n * 分享方式枚举\n * @typedef {object} ShareMethod\n * @property {string} DEFAULT 默认方式\n * @property {string} SYSTEM 系统级分享\n * @property {string} SDK sdk级分享\n * @property {string} MANUAL 一般形式\n * @property {string} EXTENSION ios特殊形式\n * @property {string} STAND 安卓特殊形式\n */\nconst ShareMethod = {\n  DEFAULT: '',\n  SYSTEM: 'system',\n  SDK: 'sdk',\n  MANUAL: 'manual',\n  EXTENSION: 'extension',\n  STAND: 'stand'\n};\n\nexport default ShareMethod;\n","/**\n * @file ShareResultType.js\n * @author  daben\n */\n\n/**\n * 分享完成类型\n * @typedef {object} ShareResultType\n * @property {number} COMPLETE 分享完成（未知成功失败）\n * @property {number} SUCCESS 分享成功\n * @property {number} FAIL 分享失败\n * @property {number} CANCEL 分享取消\n * @property {number} ERROR 分享出错\n */\nconst ShareResultType = {\n  COMPLETE: 0,\n  SUCCESS: 1,\n  FAIL: 2,\n  CANCEL: 3,\n  ERROR: 4\n};\n\nexport default ShareResultType;\n","import { throwErrorAsync } from '@pdd/core-util';\n\nexport default function trackError({\n  errorCode = 0,\n  message = '',\n  options = {}\n}) {\n  throwErrorAsync(new Error('share error'), {\n    error_type: `share error: ${errorCode}`,\n    error_message: message,\n    payload: options\n  });\n}\n","/**\n * shareType = shareChannel X shareForm X (other Share Model dimension)\n * @file ShareType.js\n * @author  daben\n */\n\n/**\n * 分享类型\n * @typedef {object} ShareType\n * @property {number} DEFAULT 默认分享方式（不使用）\n * @property {number} WECHAT_SESSION 微信会话卡片，包括web卡片跟小程序卡片\n * @property {number} WECHAT_TIMELINE 微信朋友圈卡片\n * @property {number} WEIBO 微博图文\n * @property {number} QQ_CHAT_SESSION QQ会话卡片\n * @property {number} QQ_ZONE QQ空间卡片\n * @property {number} TENCENT_WEIBO 腾讯微博\n * @property {number} WECHAT_SESSION_APP 微信会话特殊形式（已废弃）\n * @property {number} WECHAT_TIMELINE_IMAGE 微信朋友圈图片\n * @property {number} WECHAT_TIMELINE_IMAGE_WITH_NO_SDK 微信朋友圈图片（系统级）\n * @property {number} WECHAT_SESSION_TEXT 微信会话文字\n * @property {number} SHARE_IMAGE_PASSIVELY 保存分享图片到本地\n * @property {number} COPY_LINK 复制链接\n * @property {number} WECHAT_SESSION_MUSIC 微信会话音乐卡片\n * @property {number} WECHAT_SESSION_VIDEO 微信会话视频卡片\n */\nconst ShareType = {\n  // not used exactly\n  DEFAULT: 0,\n\n  WECHAT_SESSION: 1,\n  WECHAT_TIMELINE: 2,\n  WEIBO: 3,\n  QQ_CHAT_SESSION: 4,\n  QQ_ZONE: 5,\n  // removed\n  TENCENT_WEIBO: 6,\n  // not supported\n  WECHAT_SESSION_APP: 7,\n  WECHAT_TIMELINE_IMAGE: 8,\n  WECHAT_TIMELINE_IMAGE_WITH_NO_SDK: 9,\n  WECHAT_SESSION_IMAGE: 10,\n  QQ_CHAT_SESSION_IMAGE: 11,\n  QQ_ZONE_IMAGE: 12,\n  WEIBO_IMAGE: 13,\n  // 微信6.7.3版本之后禁止了系统多图分享的功能\n  // 15 应该是系统级\n  WECHAT_TIMELINE_IMAGES: 15,\n  WECHAT_SESSION_TEXT_WITH_NO_SDK: 16,\n  WECHAT_SESSION_TEXT: 17,\n  // 18 iOS 独占, 不建议直接调用\n  IOS_SYSTEM_SHARE_CARD: 18,\n  // 对于iOS 系统级分享而言 9和19功能是一样的\n  WECHAT_SESSION_IMAGE_WITH_NO_SDK: 19,\n  WECHAT_SESSION_IMAGES_WITH_NO_SDK: 20,\n  WECHAT_TIMELINE_TEXT: 21,\n  // 生成图片保存到本地\n  SHARE_IMAGE_PASSIVELY: 22,\n\n  COPY_LINK: 23,\n  WECHAT_SESSION_MUSIC: 24,\n  WECHAT_SESSION_VIDEO: 25,\n\n  // 基于Extension\n  // EXT_WECHAT_SESSION_CARD_SYSTEM: 105,\n  // EXT_WECHAT_SESSION_IMAGE_SYSTEM: 106,\n  // EXT_WECHAT_SESSION_CARD: 107,\n  // EXT_WECHAT_TIMELINE_CARD: 108,\n  // EXT_WECHAT_SESSION_IMAGE: 109,\n  // EXT_WECHAT_TIMELINE_IMAGE: 110,\n\n  // // [stand] only for android\n  // STAND_WECHAT_SESSION_CARD: 200,\n  // STAND_WECHAT_SESSION_IMAGE: 201,\n  // STAND_WECHAT_TIMELINE_CARD: 202,\n  // STAND_WECHAT_TIMELINE_IMAGE: 203,\n  // STAND_WECHAT_SESSION_TEXT: 204,\n  // STAND_WECHAT_TIMELINE_TEXT: 205,\n\n  // virtual shareTypes\n  // 单独生成口令\n  COPY_CIPHER: 9995,\n  // IOS only, android not support\n  // 目前下面两个表现是一致的\n  WECHAT_SESSION_CARD_WITH_NO_SDK: 9996,\n  WECHAT_TIMELINE_CARD_WITH_NO_SDK: 9997,\n\n  // NOT_SUPPORT_BELOWS\n  //\n  FRIENDS: 9998,\n  // ONLY IN IOS\n  WECHAT_BIG_IMAGE: 9999,\n  PIN_TIMELINE: 10000\n};\n\nexport default ShareType;\n","/**\n * @typedef {object} SystemShareMode\n * @property {Number} DEFAULT 默认系统级分享\n * @property {Number} ANDROID_SP 新系统分享(since 21/07/29)\n */\nexport const SystemShareMode = {\n  DEFAULT: 0,\n  ANDROID_SP: 1\n};\n","/**\n * @typedef {object} TPSelectCategory\n * @property {Number} TP_FIRST 优先选择对应产商的，其次选择通用的\n * @property {Number} GENERAL_FIRST 优先选择通用的，其次选择厂商的\n * @property {Number} GENERAL_ONLY 只使用通用的\n */\nexport const TPSelectCategory = {\n  TP_FIRST: 0,\n  GENERAL_FIRST: 1,\n  GENERAL_ONLY: 2\n};\n","/**\n * @file ThirdPartyOpenType.js\n * @author  daben\n */\n\n/**\n * 第三方应用唤起类型\n * @typedef {object} ThirdPartyOpenType\n * @property {number} DEFAULT 默认类型\n * @property {number} OPEN_WECHAT 唤起微信\n * @property {number} OPEN_QQ 唤起qq\n * @property {number} OPEN_WEIBO 唤起微博\n * @property {number} OPEN_WECHAT_IOS_SILENT ios微信静默拉起\n * @property {number} OPEN_WECHAT_ANDROID_SILENT 安卓微信静默拉起\n */\nconst ThirdPartyOpenType = {\n  DEFAULT: 0,\n  OPEN_WECHAT: 1,\n  OPEN_QQ: 2,\n  OPEN_WEIBO: 3,\n  OPEN_WECHAT_IOS_SILENT: 101,\n  OPEN_WECHAT_ANDROID_SILENT: 201\n};\n\nexport default ThirdPartyOpenType;\n","/**\n * @file ShareResult.js\n * @author  daben\n */\n\n/**\n * 分享结果（字符串枚举）\n * @typedef {object} ShareResult\n * @property {string} SUCCESS 分享成功\n * @property {string} FAIL 分享失败\n * @property {string} CANCEL 分享取消\n * @property {string} COMPLETE 分享完成\n * @property {string} ERROR 分享失败\n */\nconst ShareResult = {\n  SUCCESS: 'success',\n  FAIL: 'fail',\n  CANCEL: 'cancel',\n  COMPLETE: 'complete',\n  ERROR: 'error'\n};\n\nexport default ShareResult;\n","/**\n * @file TrackingEntity.js\n * @author daben\n */\nconst TRACKING_OP_NAME = 'event';\nconst TRACKING_SUB_OP = {\n  SHARE: 'share',\n  SHARE_RESULT: 'share_result'\n};\n\nclass TrackingEntity {\n  constructor(opts = {}) {\n    this.userID = opts.userID || '';\n    this.uin = opts.uin || '';\n    this.shareID = opts.shareID || '';\n    this.op = opts.op || TRACKING_OP_NAME;\n    this.subOP = opts.subOP || '';\n    this.shareChannel = opts.shareChannel || '';\n    this.shareResult = opts.shareResult || '';\n    this.shareURL = opts.shareURL || '';\n    this.shareDomain = opts.shareDomain || '';\n    this.shareForm = opts.shareForm || '';\n    this.shareMethod = opts.shareMethod || '';\n    this.shareAppID = opts.shareAppID;\n    this.pcode = opts.pcode;\n    this.wxShareCount = opts.wxShareCount;\n    this.cipherScene = opts.cipherScene;\n  }\n\n  normalize(shareType) {\n    if (this.subOP === TRACKING_SUB_OP.SHARE) {\n      return {\n        op: this.op,\n        sub_op: this.subOP,\n        share_id: this.shareID,\n        share_channel: this.shareChannel,\n        share_url: this.shareURL,\n        share_domain: this.shareDomain,\n        share_form: this.shareForm,\n        share_method: this.shareMethod,\n        share_app_id: this.shareAppID,\n        pcode: this.pcode,\n        pcode_scene: this.cipherScene\n      };\n    } else if (this.subOP === TRACKING_SUB_OP.SHARE_RESULT) {\n      const params = {\n        op: this.op,\n        sub_op: this.subOP,\n        event: 'share_result',\n        share_id: this.shareID,\n        share_channel: this.shareChannel,\n        share_url: this.shareURL,\n        share_domain: this.shareDomain,\n        share_result: this.shareResult,\n        share_form: this.shareForm,\n        share_method: this.shareMethod,\n        share_app_id: this.shareAppID,\n        wx_share_count: this.wxShareCount,\n        pcode: this.pcode,\n        pcode_scene: this.cipherScene\n      };\n      if (this.walrusID) {\n        params.walrus_id = this.walrusID;\n        params.walrus_type = this.walrusType;\n      }\n      return params;\n    }\n\n    return {};\n  }\n\n  getShareURLTrackingQueries() {\n    return TrackingEntity.getTrackingQueries(this);\n  }\n}\n\nTrackingEntity.TRACKING_SUB_OP = TRACKING_SUB_OP;\nTrackingEntity.getTrackingQueries = (trackingEntity = {}) => {\n  return {\n    refer_share_id: trackingEntity.shareID,\n    // refer_share_uid: trackingEntity.userID,\n    refer_share_uin: trackingEntity.uin,\n    refer_share_channel: trackingEntity.shareChannel\n  };\n};\n\nexport default TrackingEntity;\n","/**\n * @file shareID.js\n * @author  daben\n */\nimport { nanoid } from '@pdd/core-util';\nexport default function createShareID(len) {\n  len = len || 32;\n  return nanoid(len);\n}\n","/**\n * @file ShareChannel.js\n * @author  daben\n */\n\n/**\n * 分享渠道\n * @typedef {object} ShareChannel\n * @property {string} UNKNOWN 未知渠道\n * @property {string} APP_MESSAGE 微信会话\n * @property {string} TIMELINE 微信朋友圈\n * @property {string} QQ QQ会话\n * @property {string} QQ_ZONE QQ空间\n * @property {string} QQ_WEIBO 腾讯微博\n * @property {string} SINA_WEIBO 新浪微博\n * @property {string} CLIPBOARD 剪贴板\n */\nconst ShareChannel = {\n  UNKNOWN: 'unknown',\n  APP_MESSAGE: 'message',\n  TIMELINE: 'timeline',\n  QQ: 'qq',\n  QQ_ZONE: 'qzone',\n  QQ_WEIBO: 'qq_weibo',\n  SINA_WEIBO: 'weibo',\n  CLIPBOARD: 'copy_link'\n};\n\nexport default ShareChannel;\n","/**\n * @file getShareChannelByType.js\n * @author  daben\n */\n\nimport ShareChannel from '../ShareChannel';\nimport ShareType from '../ShareType';\n\n/**\n * shareType - sharechannel\n */\nconst shareTypeMapChannel = {\n  1: ShareChannel.APP_MESSAGE,\n  2: ShareChannel.TIMELINE,\n  3: ShareChannel.SINA_WEIBO,\n  4: ShareChannel.QQ,\n  5: ShareChannel.QQ_ZONE,\n  8: ShareChannel.TIMELINE,\n  9: ShareChannel.TIMELINE,\n  10: ShareChannel.APP_MESSAGE,\n  11: ShareChannel.QQ,\n  12: ShareChannel.QQ_ZONE,\n  13: ShareChannel.SINA_WEIBO,\n  // ONLY IN IOS\n  16: ShareChannel.APP_MESSAGE,\n  17: ShareChannel.APP_MESSAGE,\n  // 18 可以是会话或者朋友圈，用这个类型当作会话来计\n  18: ShareChannel.APP_MESSAGE,\n  19: ShareChannel.APP_MESSAGE,\n  20: ShareChannel.APP_MESSAGE,\n  21: ShareChannel.TIMELINE,\n  23: ShareChannel.CLIPBOARD,\n  24: ShareChannel.APP_MESSAGE,\n  25: ShareChannel.APP_MESSAGE,\n  [ShareType.COPY_CIPHER]: ShareChannel.CLIPBOARD,\n  [ShareType.WECHAT_SESSION_CARD_WITH_NO_SDK]: ShareChannel.APP_MESSAGE,\n  [ShareType.WECHAT_TIMELINE_CARD_WITH_NO_SDK]: ShareChannel.TIMELINE\n};\n\nexport default function getShareChannelByType(shareType = 0) {\n  return shareTypeMapChannel[shareType] || ShareChannel.UNKNOWN;\n}\n","/**\n * @file getAppChannel.js\n * @author  daben\n */\nimport ShareChannel from '../ShareChannel';\n\nexport const AppChannel = {\n  DEFAULT: 0,\n  WECHAT: 1,\n  QQ: 2,\n  WEIBO: 3\n};\n\nconst SHARE_CHANNEL_MAP_APP_CHANNEL = {\n  [ShareChannel.UNKNOWN]: 0,\n  [ShareChannel.APP_MESSAGE]: 1,\n  [ShareChannel.TIMELINE]: 1,\n  [ShareChannel.QQ]: 2,\n  [ShareChannel.QQ_ZONE]: 2,\n  [ShareChannel.QQ_WEIBO]: 2,\n  [ShareChannel.SINA_WEIBO]: 3\n};\n\nfunction getAppChannel(shareChannel) {\n  return SHARE_CHANNEL_MAP_APP_CHANNEL[shareChannel] || AppChannel.DEFAULT;\n}\n\nexport default getAppChannel;\n","/**\n * @file VenderAppIDCache/index.js\n * @author daben\n */\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport getAppChannel, { AppChannel } from './getAppChannel';\n// import ShareChannel from '../ShareChannel';\n\nexport const getVenderAppIds = (appChannels) => {\n  const platform = getCurrentPlatform();\n  if (!platform.statisfy('4.49.0', '4.49.0', 'greaterThan')) {\n    return Promise.reject({\n      message: 'not support'\n    });\n  }\n  if (!Array.isArray(appChannels)) {\n    return Promise.reject({\n      message: 'invalid params'\n    });\n  }\n  return invokeBridgeCallNativeFun('JSShare', 'venderAppIds', {\n    channels: appChannels\n  });\n};\n\nclass VenderAppIDCache {\n  constructor() {\n    this._venderAppIDs = {};\n    this._isInited = false;\n  }\n\n  build({\n    wechatAppID\n  }) {\n    if (!this._isInited) {\n      this._isInited = true;\n    } else {\n      return Promise.resolve();\n    }\n    if (getCurrentPlatform().isNativePlatform) {\n      return this._buildNativeCache();\n    } else if (getCurrentPlatform().isWeChatPlatform) {\n      return this._buildWeChatCache(wechatAppID);\n    }\n    return Promise.resolve();\n  }\n\n  isInited() {\n    return this._isInited;\n  }\n\n  _buildNativeCache() {\n    return getVenderAppIds([\n      // 暂时只加wechat的打点\n      AppChannel.WECHAT\n    ]).then((data = {}) => {\n      this._venderAppIDs = Object.assign(this._venderAppIDs, data);\n    }).catch(() => { return Promise.resolve(); });\n  }\n\n  _buildWeChatCache(wechatAppID) {\n    this._venderAppIDs[AppChannel.WECHAT] = wechatAppID;\n    return Promise.resolve();\n  }\n\n  getAppIDSync(shareChannel) {\n    const appChannel = getAppChannel(shareChannel);\n    return this._venderAppIDs[appChannel];\n  }\n}\n\nlet instance = null;\nVenderAppIDCache.getInstance = function (opts) {\n  if (!instance) {\n    instance = new VenderAppIDCache(opts);\n  }\n  return instance;\n};\n\nexport default VenderAppIDCache;\n","/**\n * ShareTracker\n * (modify is discouraged, as default tracking should be steady)\n *\n * (warning)\n * if you just want listen to share events, but want to do something\n * which is not related to tracking, get ShareController instance and\n * addEventListener directly\n * @file ShareTracker/index.js\n * @author daben\n */\nimport { sendMetrics } from '@pdd/metrics';\nimport { getCurrentPlatform, PLATFORM } from '@pdd/platform-util';\nimport ShareType from '../ShareType';\nimport ShareMethod from '../ShareMethod';\nimport ShareEventType from '../ShareEventType';\nimport ShareResult from '../ShareResult';\nimport ShareResultType from '../ShareResultType';\nimport ShareError from '../ShareError';\nimport ShareForm from '../ShareForm';\nimport ShareController from '../ShareController/base';\nimport TrackingEntity from './TrackingEntity';\nimport createShareID from '../tools/createShareID';\nimport getShareChannelByType from '../tools/getShareChannelByType';\nimport URLParser from '../tools/URLParser';\nimport getUserID, { getCachedUin } from '../tools/getUserID';\nimport VenderAppIDCache from '../tools/VenderAppIDCache';\nimport { getInstance as getApiCacheManager } from '../tools/ApiCacheManager';\nimport URLWrapType from '../tools/URLWrapType';\nimport calculateURLHash from '../tools/calculateURLHash';\nimport { getPageID, getPageName, getPageSN } from '../tools/getPageContext';\nconst { ShareErrorCode } = ShareError;\nconst { TRACKING_SUB_OP } = TrackingEntity;\n\nfunction pickUpShareAppID(data) {\n  if (!data || typeof data !== 'object') {\n    return null;\n  }\n  if (typeof data['wx_app_id'] !== 'string') {\n    return null;\n  }\n  return data['wx_app_id'];\n}\n\n/**\n * 分享打点控制，控制分享流程中的触发打点跟分享完成打点\n */\nclass ShareTracker {\n  constructor(opts = {}) {\n    this.transparentTransmission = opts.transparentTransmission || {};\n    this.trackingEntity = null;\n    this.onTriggerListener = null;\n    this.onCompletedListener = null;\n    this.shareController = null;\n    this._cachePrepareInfo = {};\n  }\n\n  /**\n   * 监听分享控制器分发的分享事件\n   * @param {ShareController} shareController 分享控制器\n   */\n  listen(shareController) {\n    if (!shareController || !(shareController instanceof ShareController)) {\n      return;\n    }\n    this.disconnect();\n    this.shareController = shareController;\n    this._setupDefaultTrackListener(shareController);\n  }\n\n  /**\n   * 取消对分享控制器的事件监听\n   */\n  disconnect() {\n    this.shareController && this._removeDefaultTrackListener(this.shareController);\n  }\n\n  /**\n   * 为分享事件打点补充额外参数\n   * @param {object} params 打点补充参数\n   */\n  updateTrackerTrans(params) {\n    this.transparentTransmission = Object.assign({}, this.transparentTransmission, params);\n  }\n\n  /**\n   * @ignore\n   */\n  _setupDefaultTrackListener(shareController) {\n    this._removeDefaultTrackListener(shareController);\n    this.onPrepareListener = this._onDefaultSharePrepare.bind(this);\n    this.onTriggerListener = this._onDefaultShareTrigger.bind(this);\n    this.onCompletedListener = this._onDefaultShareCompleted.bind(this);\n    shareController.on(\n      ShareEventType.ON_SHARE_PREPARE,\n      this.onPrepareListener\n    );\n    shareController.on(\n      ShareEventType.ON_SHARE_TRIGGER,\n      this.onTriggerListener\n    );\n    shareController.on(\n      ShareEventType.ON_SHARE_COMPLETED,\n      this.onCompletedListener\n    );\n  }\n\n  /**\n   * @ignore\n   */\n  _removeDefaultTrackListener(shareController) {\n    this.onPrepareListener && shareController.removeListener(\n      ShareEventType.ON_SHARE_PREPARE,\n      this.onPrepareListener\n    );\n    this.onTriggerListener && shareController.removeListener(\n      ShareEventType.ON_SHARE_TRIGGER,\n      this.onTriggerListener\n    );\n    this.onCompletedListener && shareController.removeListener(\n      ShareEventType.ON_SHARE_COMPLETED,\n      this.onCompletedListener\n    );\n  }\n\n  /**\n   * @ignore\n   */\n  _sendLog(params = {}) {\n    const data = Object.assign(params, this.transparentTransmission);\n    sendMetrics({\n      page_id: getPageID(),\n      page_name: getPageName(),\n      page_sn: getPageSN(),\n      ...data\n    });\n  }\n\n  /**\n   * 分享信息修改事件监听函数\n   * @param {object} param 分享事件附带参数\n   * @param {ShareType} param.shareType 分享事件对应的分享类型\n   */\n  _onDefaultSharePrepare({ shareType }) {\n    // 如果有预备生成好了的配置，则使用先前生成好的配置\n    if (this._cachePrepareInfo[shareType]) {\n      // reset\n      const shareEntity = this.shareController.getShareEntityByShareType(shareType) || {};\n      const lastCacheInfo = this._cachePrepareInfo[shareType];\n      lastCacheInfo.userID = getUserID();\n      lastCacheInfo.uin = getCachedUin();\n      shareEntity.setShareURLQueries(TrackingEntity.getTrackingQueries(lastCacheInfo));\n      return;\n    }\n    const shareEntity = this.shareController.getShareEntityByShareType(shareType);\n    // 要进分享链接的参数需要在prepare这边准备好\n    const cacheInfo = {\n      userID: getUserID(),\n      uin: getCachedUin(),\n      // 对于口令缓存，如果命中了缓存，此处则不要重新生成share_id，使用缓存了的share_id\n      shareID: this._getCachedShareID(shareEntity) || createShareID(),\n      shareChannel: getShareChannelByType(shareType)\n    };\n    if (shareEntity) {\n      shareEntity.setShareURLQueries(TrackingEntity.getTrackingQueries(cacheInfo));\n    }\n    this._cachePrepareInfo[shareType] = cacheInfo;\n  }\n\n  /**\n   * 分享行为触发事件监听函数\n   * @ignore\n   * @param {object} param 分享事件附带参数\n   * @param {ShareType} param.shareType 分享事件对应的分享类型\n   * @param {string} param.shareID 该次分享的id\n   */\n  _onDefaultShareTrigger({ shareType, shareID }) {\n    // 拼小圈不管 / 小程序环境下卡片都不打(小程序环境下有口令)\n    if (\n      shareType === ShareType.PIN_TIMELINE ||\n      (\n        getCurrentPlatform().isWeChatMiniProgram &&\n        shareType === ShareType.WECHAT_SESSION\n      )\n    ) {\n      return 0;\n    }\n    const shareEntity = this.shareController.getShareEntityByShareType(shareType) || {};\n    const preparedInfo = this._cachePrepareInfo[shareType];\n    this._cachePrepareInfo[shareType] = null;\n    // shareURL and shareDomain should wait for share entity update shareURL\n    const shareChannel = getShareChannelByType(shareType);\n    const venderAppIDCache = VenderAppIDCache.getInstance();\n    this.trackingEntity = new TrackingEntity(Object.assign(\n      {\n        userID: getUserID(),\n        uin: getCachedUin(),\n        shareID: this._getCachedShareID(shareEntity) || createShareID(),\n        subOP: TRACKING_SUB_OP.SHARE,\n        shareChannel: shareChannel,\n        timelineDomain: shareEntity.timelineDomain,\n        cipherScene: shareEntity.cipherScene,\n        shareForm: shareEntity.getShareForm && shareEntity.getShareForm(shareType),\n        shareMethod: shareEntity.getShareMethod && shareEntity.getShareMethod(shareType),\n        shareAppID: venderAppIDCache.getAppIDSync(shareChannel)\n      },\n      preparedInfo,\n      // 如果有特殊传递来的shareID， 优先用传递来的shareID\n      // app本地shareID优先\n      shareID ? { shareID } : null\n    ));\n    // modify shareURL with tracking params\n    !preparedInfo && shareEntity.setShareURLQueries(TrackingEntity.getTrackingQueries(this.trackingEntity));\n    if (shareEntity.getShareForm(shareType) !== ShareForm.COMMAND) {\n      const shareURL = shareEntity.targetShareURL || shareEntity.shareURL;\n      // set tracking url\n      this.trackingEntity.shareURL = shareURL;\n      this.trackingEntity.shareDomain = (new URLParser(shareURL)).origin;\n    }\n    this._sendLog(this.trackingEntity.normalize(shareType));\n  }\n\n  /**\n   * 分享行为完成事件监听函数\n   * @ignore\n   * @param {object} param 分享事件附带参数\n   * @param {ShareType} param.shareType 分享事件对应的分享类型\n   * @param {ShareResultType} param.shareResultType 分享结果类型\n   * @param {boolean} param.useComplete 是否不区分成功失败\n   * @param {object|null} param.responseData 原生分享附带参数\n   * @param {object|null} param.tpInfo 特殊用配置\n   */\n  _onDefaultShareCompleted({\n    shareType,\n    shareResultType,\n    useComplete,\n    responseData = {},\n    tpInfo\n  }) {\n    const currentPlatform = getCurrentPlatform();\n    // 拼小圈不管 / 小程序环境下卡片都不打(小程序环境下有口令)\n    if (\n      shareType === ShareType.PIN_TIMELINE ||\n      (\n        currentPlatform.isWeChatMiniProgram &&\n        shareType === ShareType.WECHAT_SESSION\n      )\n    ) {\n      return 0;\n    }\n    if (!this.trackingEntity) {\n      return ShareErrorCode.SHARE_STATUS_ILLEGAL;\n    }\n    const shareEntity = this.shareController.getShareEntityByShareType(shareType) || {};\n    let shareResult = this.getShareResultByType(shareResultType);\n    // 这个类型的回调只知道回调结束\n    // 不知道成功还是失败\n    // 因此此处特殊标记为share_result = complete\n    if (useComplete) {\n      shareResult = ShareResult.COMPLETE;\n    }\n\n    if (shareEntity.getShareForm(shareType) !== ShareForm.COMMAND) {\n      const shareURL = shareEntity.realShareURL || shareEntity.shareURL;\n      // set tracking url\n      this.trackingEntity.shareURL = shareURL;\n      this.trackingEntity.shareDomain = (new URLParser(shareURL)).origin;\n    } else {\n      // 口令只打pcode\n      this.trackingEntity.pcode = shareEntity.pcode;\n    }\n    const wxAppID = pickUpShareAppID(responseData);\n    if (wxAppID) {\n      this.trackingEntity.shareAppID = wxAppID;\n    }\n    if (responseData.hasOwnProperty('wx_share_count')) {\n      this.trackingEntity.wxShareCount = responseData['wx_share_count'];\n      // 不带给业务\n      delete responseData.wx_share_count;\n    }\n    this.trackingEntity.subOP = TRACKING_SUB_OP.SHARE_RESULT;\n    this.trackingEntity.shareResult = shareResult;\n    if (tpInfo) {\n      this.trackingEntity.walrusID = tpInfo.group_id;\n      this.trackingEntity.walrusType = tpInfo.dev_type;\n    }\n    // ios 的这个类型不要清数据 留着给业务追加打点\n    if (\n      shareEntity.forceDowngrade ||\n      (\n        currentPlatform.platform === PLATFORM.PddIOS &&\n        shareType === ShareType.WECHAT_SESSION_TEXT_WITH_NO_SDK\n      ) ||\n      (\n        // 非原生环境下（非可以直接写剪贴板的情况）\n        // 写剪贴板类型的分享不打share_result，由业务自行追加打点\n        ShareType.COPY_LINK === shareType &&\n        !(currentPlatform.isNativePlatform || currentPlatform.isTinyNativePlatform)\n      ) ||\n      ShareType.COPY_CIPHER === shareType\n    ) {\n      // TODO\n    } else {\n      this._sendLog(this.trackingEntity.normalize(shareType));\n      this.trackingEntity = null;\n    }\n  }\n\n  /**\n   * IOS 唤起打点补充 需要业务方自己调用\n   * 若不调用，则可以业务自己打点\n   * @param {ShareType} shareType 必填\n   * @param {object} payload 可选 补充打点参数\n   * @param {function} handler 可选 业务自行处理打点数据\n   * @returns {boolean} 是否追加打点成功\n   */\n  trackProlongation(shareType, payload = {}, handler) {\n    if (!this.trackingEntity) {\n      return false;\n    }\n    this.trackingEntity.shareMethod = ShareMethod.MANUAL;\n    this.trackingEntity.shareResult = ShareResult.COMPLETE;\n    const params = Object.assign(\n      this.trackingEntity.normalize(shareType),\n      payload\n    );\n    this.trackingEntity = null;\n    if (typeof handler === 'function') {\n      handler(params);\n    } else {\n      this._sendLog(params);\n    }\n    return true;\n  }\n\n  /**\n   * @ignore\n   * @param {ShareResultType} shareResultType 分享结果枚举\n   * @returns {ShareResult} 分享结果\n   */\n  getShareResultByType(shareResultType = 0) {\n    switch (shareResultType) {\n      case ShareResultType.COMPLETE:\n        return ShareResult.COMPLETE;\n      case ShareResultType.SUCCESS:\n        return ShareResult.SUCCESS;\n      case ShareResultType.FAIL:\n        return ShareResult.FAIL;\n      case ShareResultType.CANCEL:\n        return ShareResult.CANCEL;\n      default: return ShareResult.ERROR;\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  _getCachedShareID(shareEntity) {\n    if (shareEntity.urlWrapType === URLWrapType.SERVER_SHORT_URL_WITH_CACHE) {\n      const manager = getApiCacheManager();\n      const hash = calculateURLHash(shareEntity);\n      // 如果缓存中已经有计数了，则命中了缓存\n      return manager.getShareID(hash);\n    }\n  }\n}\n\nexport default ShareTracker;\n","/**\n * ErrorCode (43369, \"分享内容检查不通过\");\n *\n * @file ShareContentCheck.js\n * @author  daben\n */\nimport { getPageID, getPageSN, getPageName } from '../tools/getPageContext';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\n\nconst PATH = 'api/flow/audience/share/content';\n\nexport default function (method = '', opts = {}) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => {}\n  });\n  let promise = null;\n  const params = {};\n  params.share_params = opts.shareParams || {};\n  params.origin = opts.platform || '';\n  params.page_sn = opts.pageSn || (getPageSN() + '');\n  params.page_info = opts.pageInfo || {\n    page_name: getPageName(),\n    page_url: location && location.href\n  };\n\n  if (method.toLowerCase() === 'post') {\n    promise = httpClient.post(PATH, params);\n  } else {\n    promise = httpClient.get(PATH, { params });\n  }\n  return promise;\n}\n","/**\n * ErrorCode: (43367, \"达到分享小时上限\"),\n * ErrorCode: (43368, \"达到分享每日上限\")\n *\n * @file performShareLog.js\n * @author  daben\n */\nimport { getPageID, getPageName, getPageSN } from '../tools/getPageContext';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\n\nconst PATH = 'api/flow/audience/share/perform';\n\nexport default function (method = '', opts = {}) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => {}\n  });\n  let promise = null;\n  const params = {};\n  params.share_params = opts.shareParams || {};\n  params.share_type = opts.shareType || 0;\n  params.share_method = opts.shareMethod || '';\n  params.origin = opts.platform || '';\n  params.page_sn = opts.pageSn || getPageSN();\n  params.page_info = opts.pageInfo || {\n    page_name: getPageName(),\n    page_url: location && location.href\n  };\n  params.extra = opts.extra || {};\n\n  if (method.toLowerCase() === 'post') {\n    promise = httpClient.post(PATH, params);\n  } else {\n    promise = httpClient.get(PATH, { params });\n  }\n  return promise;\n}\n","/**\n * @file LimitErrorCode.js\n * @author  daben\n */\nexport default {\n  REACH_HOUR_LIMIT: 43367,\n  REACH_DAY_LIMIT: 43368\n};\n","/**\n * @file MenuWatcher/index.js\n * @author daben\n */\nimport ShareEventType from '../ShareEventType';\nimport ShareController from '../ShareController/base';\nimport ErrorCode from './LimitErrorCode';\n\nclass MenuWatcher {\n  constructor(opts = {}) {\n    this._shareController = null;\n    this._onPerformShareErrorHandler = null;\n  }\n\n  listen(shareController) {\n    if (!shareController || !(shareController instanceof ShareController)) {\n      return;\n    }\n    this.disconnect();\n    this._shareController = shareController;\n    this._setupListener(shareController);\n  }\n\n  disconnect() {\n    this.removeListener();\n  }\n\n  _setupListener(shareController) {\n    this.removeListener();\n    this._onPerformShareErrorHandler = this._onPerformShareError.bind(this);\n    shareController.on(ShareEventType.PERFORM_LOG_FAILED, this._onPerformShareErrorHandler);\n  }\n\n  removeListener() {\n    if (!this._shareController) {\n      return;\n    }\n    this._onPerformShareErrorHandler && this._shareController.removeListener(\n      ShareEventType.PERFORM_LOG_FAILED,\n      this._onPerformShareErrorHandler\n    );\n  }\n\n  _onPerformShareError(payload = {}) {\n    const error = payload.error || {};\n    const shareType = payload.shareType;\n    const errorCode = parseInt(error.errorCode, 10) || 0;\n    if ([\n      ErrorCode.REACH_DAY_LIMIT,\n      ErrorCode.REACH_HOUR_LIMIT\n    ].indexOf(errorCode) >= 0) {\n      this._shareController.emit(ShareEventType.SHARE_REACH_LIMIT, {\n        shareType,\n        errorCode: errorCode\n      });\n      // hide menu\n      this.hideShareMenuOption(shareType);\n    }\n  }\n\n  hideShareMenuOption(shareType) {\n    const shareController = this._shareController;\n    if (!shareType || !shareController) {\n      return;\n    }\n    shareController.disableShare(shareType);\n  }\n}\n\nexport default MenuWatcher;\n","/**\n * 基础分享功能管理\n * 集成\n * 1. 默认配置\n * 2. 分享常量\n * 3. 分享流程控制\n * 4. 分享常用工具\n * 5. 控制分享的实际实例\n * @file ShareManager/index.js\n * @author  daben\n */\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport ShareEventType from '../ShareEventType';\nimport ShareTracker from '../ShareTracker';\nimport ShareResultType from '../ShareResultType';\nimport shareContentCheck from './shareContentCheck';\nimport performShareLog from './performShareLog';\nimport MenuWatcher from '../ShareLimiter/MenuWatcher';\nimport ErrorCode from '../ShareLimiter/LimitErrorCode';\nimport trackError from '../ShareTracker/trackError';\nimport { refreshUid } from '../tools/getUserID';\nimport {\n  shareEntityToParams,\n  shareEntityToMethod\n} from './translation';\nimport platformTag from './platformTag';\nimport ShareType from '../ShareType';\nconst isClientEnv = typeof window !== 'undefined';\n\nasync function getControllerHybrid() {\n  return (await import(/* webpackChunkName: \"ms_native_c\" */'../ShareController/native')).default;\n}\n\nasync function getControllerRaw() {\n  const platform = getCurrentPlatform();\n  if (platform.isWeChatMiniProgram) {\n    return (await import(/* webpackChunkName: \"ms_wx_app_c\" */'../ShareController/wxapp')).default;\n  } else if (platform.isWeChatPlatform) {\n    return (await import(/* webpackChunkName: \"ms_wx_c\" */'../ShareController/wechat')).default;\n  } else if (platform.isQQPlatform) {\n    return (await import(/* webpackChunkName: \"ms_qq_c\" */'../ShareController/qq')).default;\n  } else if (\n    platform.isNativePlatform ||\n    platform.isTinyNativePlatform\n  ) {\n    return (await import(/* webpackChunkName: \"ms_native_c\" */'../ShareController/native')).default;\n  } else {\n    return (await import(/* webpackChunkName: \"ms_web_c\" */'../ShareController/web')).default;\n  }\n}\n\nconst getController = process.env.BROWSER ? (process.env.HYBRID ? getControllerHybrid : getControllerRaw) : (_ => null);\n\nclass ShareManager {\n  constructor(opts = {}) {\n    this.shareController = null;\n    this.shareTracker = null;\n    this.menuWatcher = null;\n    this.platform = platformTag();\n    // 分享内容检查 默认关闭 （原生不用做）\n    this._disableContentCheck = true;\n    // 分享完成后追加统计 默认开启 （原生不用做）\n    this._disablePerformShareLog = false;\n    this.controllerOptions = opts.controllerOptions || {};\n    // 不允许禁止统一打点\n    // this.disableTracker = opts.disableTracker || false;\n    this.noDefaultShare = opts.noDefaultShare || false;\n    this.disableShare = opts.disableShare || false;\n    // this.useNativeShareButton = opts.useNativeShareButton || false;\n    this._initControllerPromise = null;\n    this.loadErrorRetry = opts.loadErrorRetry || 0;\n    this.enableInfiniteRetry = opts.enableInfiniteRetry || false;\n    this._loadControllerFailed = false;\n  }\n\n  /**\n   * @ignore\n   */\n  async setup() {\n    if (!isClientEnv || this.shareController) {\n      return Promise.resolve();\n    }\n    if (this._loadControllerFailed && !this.enableInfiniteRetry) {\n      return Promise.reject(new Error('load controller failed'));\n    }\n    this._setupShareTracker();\n    this._setupMenuWatcher();\n    this._initControllerPromise = this._initControllerPromise || this._setupController();\n    let retry = false;\n    try {\n      await this._initControllerPromise;\n    } catch (e) {\n      this._initControllerPromise = null;\n      if (this.loadErrorRetry > 0) {\n        trackError({\n          errorCode: 0,\n          message: `加载分享控制器失败, 剩余重试次数${this.loadErrorRetry}`,\n          options: {\n            message: e && e.message\n          }\n        });\n        this.loadErrorRetry--;\n        retry = true;\n      } else {\n        this._loadControllerFailed = true;\n        // 不默认重试，并抛出异常\n        trackError({\n          errorCode: 0,\n          message: '加载分享控制器失败',\n          options: {\n            message: e && e.message\n          }\n        });\n        throw e;\n      }\n    }\n    if (retry) {\n      return this.setup();\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  async _setupController() {\n    if (this.shareController) {\n      return Promise.resolve();\n    }\n    const options = this.controllerOptions;\n    const platform = getCurrentPlatform();\n    const Controller = await getController();\n    this.shareController = new Controller(options);\n    if (platform.isWeChatPlatform || platform.isQQPlatform) {\n      if (!this.noDefaultShare) {\n        this._prepareShareController();\n      }\n    } else if (\n      platform.isNativePlatform ||\n      platform.isTinyNativePlatform\n    ) {\n      // 监听分享达到上限\n      this.shareController.on(ShareEventType.ON_SHARE_COMPLETED, ({\n        shareType,\n        shareResultType,\n        nativeShareErrorCode\n      }) => {\n        if (\n          shareResultType === ShareResultType.FAIL &&\n          [\n            ErrorCode.REACH_HOUR_LIMIT,\n            ErrorCode.REACH_DAY_LIMIT\n          ].indexOf(nativeShareErrorCode) >= 0\n        ) {\n          this.shareController.emit(ShareEventType.SHARE_REACH_LIMIT, {\n            shareType,\n            errorCode: nativeShareErrorCode\n          });\n          trackError({\n            errorCode: nativeShareErrorCode,\n            message: '分享达到上限'\n          });\n        }\n      });\n    }\n\n    this.shareTracker.listen(this.shareController);\n    this.menuWatcher.listen(this.shareController);\n    this._setupPerformShareLog();\n  }\n\n  /**\n   * @ignore\n   */\n  _prepareShareController() {\n    if (this.shareController && !this.shareController.isInited()) {\n      this.shareController.initShare();\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  _setupMenuWatcher() {\n    if (this.menuWatcher) {\n      return;\n    }\n    this.menuWatcher = new MenuWatcher();\n  }\n\n  /**\n   * @ignore\n   */\n  _setupShareTracker() {\n    if (this.disableTracker || this.shareTracker) {\n      return;\n    }\n    this.shareTracker = new ShareTracker({\n      transparentTransmission: this.trackerTrans\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _setupPerformShareLog() {\n    if (!this.shareController || getCurrentPlatform().isNativePlatform) {\n      return;\n    }\n    this.shareController.on(ShareEventType.ON_SHARE_COMPLETED, (payload = {}) => {\n      if (\n        this._disablePerformShareLog ||\n        // wechat && qq will return success\n        payload.shareResultType !== ShareResultType.SUCCESS ||\n        // 这个类型不打perform\n        payload.shareType === ShareType.COPY_CIPHER\n      ) {\n        return;\n      }\n      const shareType = payload.shareType;\n      const shareEntity = this.getShareEntity(shareType);\n      performShareLog('post', {\n        platform: this.platform,\n        shareType: shareType,\n        shareParams: shareEntityToParams(shareEntity),\n        shareMethod: shareEntityToMethod(shareEntity, shareType),\n        extra: shareEntity.payloadMixin && shareEntity.payloadMixin.extra\n      }).catch((e) => {\n        this.shareController.emit(ShareEventType.PERFORM_LOG_FAILED, {\n          shareType: shareType,\n          error: e\n        });\n      });\n    });\n  }\n\n  /**\n   * 使用给定的分享类型进行分享\n   * @param {ShareType} shareType 分享类型\n   * @returns {promise} 分享结果\n   */\n  async share(shareType) {\n    if (!this.shareController || this.disableShare) {\n      const error = new Error('no controller exists');\n      error.shareType = shareType;\n      return Promise.reject(error);\n    }\n    await refreshUid();\n    this._prepareShareController();\n    const invokeShare = () => new Promise((res, rej) => {\n      const me = this;\n      const onResult = (payload = {}) => {\n        const shareResultType = payload.shareResultType;\n        removeListeners();\n        if (ShareResultType.SUCCESS === shareResultType) {\n          res(payload);\n        } else {\n          const err = new Error('分享失败');\n          Object.assign(err, payload);\n          rej(err);\n        }\n      };\n      function removeListeners() {\n        me.shareController.removeListener(ShareEventType.ON_SHARE_COMPLETED, onResult);\n      }\n      this.shareController.on(ShareEventType.ON_SHARE_COMPLETED, onResult);\n      const shareErrorType = this.shareController.share(shareType);\n      if (shareErrorType) {\n        removeListeners();\n        this.shareController.emit(ShareEventType.ON_SHARE_INTERRUPT, {\n          shareType,\n          shareErrorType\n        });\n        trackError({\n          errorCode: shareErrorType,\n          message: '分享前置流程异常',\n          options: {\n            shareType\n          }\n        });\n        const err = new Error('分享前置流程异常');\n        Object.assign(err, {\n          shareType,\n          shareErrorType\n        });\n        rej(err);\n      }\n    });\n    if (getCurrentPlatform().isNativePlatform) {\n      return this.shareController.waitShareLimiter().then(_ => {\n        return invokeShare();\n      }, _ => {\n        return invokeShare();\n      });\n    } else {\n      return invokeShare();\n    }\n  }\n\n  /**\n   * 检测分享文本是否合法\n   * @param {ShareEntity} shareEntity 分享配置对象\n   */\n  checkShareContent(shareEntity = {}) {\n    return shareContentCheck('post', {\n      platform: this.platform,\n      shareParams: shareEntityToParams(shareEntity)\n    });\n  }\n\n  /**\n   * 设置是否开启分享内容校验\n   * @param {Boolean} isEnable\n   */\n  setContentCheck(isEnable) {\n    this._disableContentCheck = !isEnable;\n  }\n\n  /**\n   * 设置分享完成是否追加打点\n   * @param {Boolean} isEnable\n   */\n  setPerformShareLog(isEnable) {\n    this._disablePerformShareLog = !isEnable;\n  }\n\n  /**\n   * ShareManager.prepareShare 只做对应参数的校验检查\n   * 保证调用底层分享的时候参数是完备的\n   * 修改域名 修改参数这些放在外层业务层做\n   * @param {object} shareInfoPack 筛选后的分享内容配置\n   * @param {ShareType} shareType 分享类型\n   * @param {object} opts 修改选项\n   * @returns {promise} 是否修改分享内容成功\n   */\n  async prepareShare(shareInfoPack = {}, shareType, opts = {}) {\n    if (!this.shareController) {\n      return Promise.reject(new Error('no controller exists'));\n    }\n    await refreshUid();\n    this._prepareShareController();\n    const {\n      entityConfig = {}\n    } = shareInfoPack;\n    const shareEntity = this.shareController.createShareEntity(entityConfig, shareType);\n    if (\n      opts.skipShareContentCheck ||\n      this._disableContentCheck ||\n      getCurrentPlatform().isNativePlatform\n    ) {\n      return this.shareController.refreshShare(shareEntity, shareType);\n    }\n    // do refresh at last\n    return this.checkShareContent(shareEntity).then(() => {\n      return this.shareController.refreshShare(shareEntity, shareType);\n    });\n  }\n\n  /**\n   * 获得分享控制器对象（同步）\n   * @returns {ShareController} 分享控制器对象\n   */\n  getShareController() {\n    return this.shareController;\n  }\n\n  /**\n   * 获得分享控制器对象（异步）\n   * @returns {ShareController} 分享控制器对象\n   */\n  async getShareControllerAsync() {\n    if (this.shareController) {\n      return this.shareController;\n    }\n    if (this._initControllerPromise) {\n      return this._initControllerPromise.then(_ => {\n        return this.shareController;\n      }).catch(_ => null);\n    }\n    // 加载异常拿到的就是null了\n    return this.setup().then(_ => {\n      return this.shareController;\n    }).catch(_ => null);\n  }\n\n  /**\n   * 获得分享打点控制器对象\n   * @returns {ShareTracker} 打点控制器对象\n   */\n  getShareTracker() {\n    return this.shareTracker;\n  }\n\n  /**\n   * 查询分享配置信息\n   * @param {ShareType} shareType 分享类型\n   * @param {boolean} noGuarantee 是否兜底配置\n   */\n  getShareEntity(shareType, noGuarantee) {\n    if (!this.shareController) {\n      return null;\n    }\n    return this.shareController.getShareEntityByShareType(shareType, noGuarantee);\n  }\n\n  /**\n   * @ignore\n   */\n  setupNativeShareButton(buttonConfig, onClickListener) {\n    if (!this.shareController) {\n      return;\n    }\n    this.shareController.removeAllListeners(ShareEventType.ON_SHARE_BUTTON_CLICKED);\n    if (typeof onClickListener === 'function') {\n      this.shareController.on(ShareEventType.ON_SHARE_BUTTON_CLICKED, onClickListener);\n    }\n    this.shareController.setupNativeShareButton(buttonConfig);\n  }\n}\n\nexport default ShareManager;\n","/**\n * 该文件控制了shareInfo中参数的准入规则\n * 主要分成了以下几个类型\n * 1. 无用: 该参数目前没有被PDDShare用到,但是可能在其他地方用到\n * 2. 默认: 后续需要使用的参数， 可以通过\n * 3. 过时: 目前还支持的参数，但是不建议使用这个字段来控制\n * 4. 禁止: 这个字段不应该被传递进入\n * 5. 弃用: 以前版本的分享中支持该字段，但是PDDShare中已经弃用\n *\n * note: 如果修改了对应字段的使用情况\n * 弃用字段调整为过期字段\n * 需要更新对应的说明\n * @file ShareInfoFilter/config.js\n * @author daben\n */\nconst ShareInfoKeyType = {\n  // (useless current,but maybe used next)\n  USELESS: -1,\n  DEFAULT: 0,\n  // (is supported but not recommended)\n  OUT_OF_DATE: 1,\n  // (cannot pass this key)\n  FORBIDDEN: 2,\n  // (PDDShare do not support, while old project has this params)\n  ABANDONED: 3\n};\n\nconst SI_ENTITY_KEYS = {\n  'title': 0,\n  'message': 0,\n  'thumbnailURL': 0,\n  'shareURL': 0,\n  'shareDomain': 0,\n  'waterMark': 0,\n  'urlWrapType': 0,\n  'drawImageOptions': 0,\n  'drawImageClass': 0,\n  'marketActivityID': 0,\n  'miniObjectPath': 0,\n  'miniObjectID': 0,\n  'useWxAppShare': 0,\n  'shortURLApi': 0,\n  'shortCommandApi': 0,\n  'domainURLApi': 0,\n  'forceDowngrade': 0,\n  'payloadMixin': 0,\n  'requestUsePost': 0,\n  'excludeShareChoices': 0,\n  'thirdPartyOpenType': 0,\n  'needSharedAmount': 0,\n  'cipherScene': 0,\n  'consumeMode': 0,\n  'activitySceneSn': 0,\n  'tpSelectCategory': 0,\n  'pinTimelineParams': 0,\n  'wxAppRequestPayload': 0,\n  'cipherProcessor': 0,\n  'wxAppNavigatePayload': 0,\n  'withShareTicket': 0,\n  'systemShareMode': 0,\n  'wechatMaskConfig': 0\n};\n\n/**\n * 一些分享配置参数\n */\nconst SI_CONFIG_FLAGS = {\n  'noDefaultShare': 0,\n  'isSDKPrepare': 0,\n  'disableShare': 0\n};\n\n/**\n * 其他性质的参数，视情况处理\n * @type {Object}\n */\nconst SI_OTHERS = {\n  // 用于打点\n  'wechatAppID': 0,\n  // magic trace\n  'magicTrace': 0,\n  'shareTypeEnable': 0\n};\n\nexport {\n  ShareInfoKeyType,\n  SI_ENTITY_KEYS,\n  SI_CONFIG_FLAGS,\n  SI_OTHERS\n};\n","/**\n * filter shareInfo config\n * if a new key is passed by shareInfo, it is better to mark it into constants\n * otherwise the new key will be ignored\n *\n * @file ShareInfoFilter/index.js\n * @author daben\n */\nimport {\n  ShareInfoKeyType,\n  SI_ENTITY_KEYS,\n  SI_CONFIG_FLAGS,\n  SI_OTHERS\n} from './config';\nconst KT = ShareInfoKeyType;\n\nclass ShareInfoFilter {\n  constructor(opts = {}) {\n    this.cacheRaw = opts.cacheRaw || false;\n    this.deleteAfterCollect = opts.deleteAfterCollect || false;\n  }\n\n  filter(shareInfo = {}) {\n    const entityConfig = this._filterShareEntity(shareInfo);\n    const flowControllConfig = this._filterShareConfigFlag(shareInfo);\n    const otherConfig = this._filterShareOther(shareInfo);\n    const compatibleShareConfig = {};\n    return {\n      _rawShareInfo: this.cacheRaw ? shareInfo : null,\n      entityConfig,\n      flowControllConfig,\n      otherConfig,\n      compatibleShareConfig\n    };\n  }\n\n  _filterByItems(shareInfo = {}, items = {}) {\n    const keys = Object.keys(items) || [];\n    const filteredItem = {};\n    keys.forEach((key, index) => {\n      const type = items[key];\n      if (type === KT.FORBIDDEN) {\n        // console.error(`share params [${key}] is forbidden`);\n        delete shareInfo[key];\n      } else if (type === KT.ABANDONED) {\n        // console.warn(`share params [${key}] is abandoned`);\n        delete shareInfo[key];\n      } else {\n        if (typeof shareInfo[key] !== 'undefined') {\n          filteredItem[key] = shareInfo[key];\n          if (this.deleteAfterCollect) {\n            delete shareInfo[key];\n          }\n        }\n      }\n    });\n    return filteredItem;\n  }\n\n  _filterShareEntity(shareInfo) {\n    return this._filterByItems(shareInfo, SI_ENTITY_KEYS);\n  }\n\n  _filterShareConfigFlag(shareInfo) {\n    return this._filterByItems(shareInfo, SI_CONFIG_FLAGS);\n  }\n\n  _filterShareOther(shareInfo) {\n    return this._filterByItems(shareInfo, SI_OTHERS);\n  }\n}\n\nexport default ShareInfoFilter;\n","/**\n * @file ShareWaterMark.js\n * @author daben\n */\n\n/**\n * 分享水印类型\n * @typedef {object} ShareWaterMark\n * @property {string} DEFAULT 默认分享水印样式\n * @property {string} WE_CHAT_MSG 微信会话默认样式\n * @property {string} SHARE 分享默认\n * @property {string} TRANSPARENT 透明样式\n * @property {string} NONE 去除水印\n * @property {string} NO_LOGO 不带水印，带压缩\n */\nconst ShareWaterMark = {\n  DEFAULT: '!share_v2',\n  WE_CHAT_MSG: '!share_v3',\n  SHARE: '!share',\n  TRANSPARENT: '!transparent',\n  NONE: '',\n  NO_LOGO: '!share_v4'\n};\n\nexport default ShareWaterMark;\n","/**\n * share 业务层\n * 1. 域名配置化\n * 2. 分享功能开关控制\n * @file PDDShare/index.js\n * @author  daben\n */\n\nimport { resolveFullUrl, getCDNImgUrl, getExtendInfoFromQuery } from '@pdd/core-util';\nimport ShareType from './ShareType';\nimport ShareEventType from './ShareEventType';\nimport ShareManager from './ShareManager';\nimport ShareInfoFilter from './ShareInfoFilter';\nimport ShareWaterMark from './ShareWaterMark';\nimport URLParser from './tools/URLParser';\nimport { app as applicationConfig } from '@pdd/configs';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport URLWrapType from './tools/URLWrapType';\nimport buildURL from './tools/buildURL';\nimport VenderAppIDCache from './tools/VenderAppIDCache';\nimport MagicTraceManager from './tools/MagicTraceManager';\n// const constant = applicationConfig.constants;\n\nlet config = {};\nif (typeof window !== 'undefined') {\n  config = applicationConfig.get(location.host) || {};\n}\n\nconst NEED_REMOVED_QUERIES = {\n  code: null,\n  from: null,\n  isappinstalled: null,\n  at: null,\n  share_id: null,\n  is_back: null,\n  page_id: null,\n  list_id: null\n};\n\nconst REFER_FILTER_KEYS = [\n  'refer_page_name',\n  'refer_page_section',\n  'refer_page_element',\n  'refer_page_id',\n  'refer_page_sn',\n  'refer_page_el_sn',\n  'refer_mid',\n  'refer_adg',\n  'refer_cam',\n  'refer_ced'\n];\n\nfunction addWaterMark(url = '', tail = '', forceChange = false) {\n  url = url || '';\n  // judge without tag\n  if (url.indexOf('!') >= 0 && !forceChange) {\n    return url;\n  } else {\n    url = url.split('!')[0];\n  }\n  url += tail;\n  return url;\n}\n\nlet instance = null;\nclass PDDShare {\n  constructor(opts = {}) {\n    this._hasInited = false;\n    this.opts = opts || {};\n    this.shopConfig = opts.shopConfig;\n    this.defaultShareEntityConfig = {};\n    this.shareManager = null;\n    this.shareInfoFilter = null;\n    this._sdkPrepared = false;\n  }\n\n  /**\n   * 分享功能初始化\n   */\n  setup() {\n    if (this._hasInited) {\n      return;\n    }\n    this._hasInited = true;\n    this._setupShareInfoFilter();\n    this._setupShareManager();\n    !(this.opts.shareManagerConfig || {}).noDefaultShare && this._prepareDefaultShare();\n    this.waitAppIDCacheBuild();\n  }\n\n  /**\n   * @ignore\n   */\n  _setupShareInfoFilter() {\n    if (!this.shareInfoFilter) {\n      this.shareInfoFilter = new ShareInfoFilter(this.opts.shareInfoFilterConfig);\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  _setupShareManager() {\n    if (!this.shareManager) {\n      const managerConfig = Object.assign({}, {\n        noDefaultShare: false,\n        disableShare: false,\n        useNativeShareButton: false,\n        loadErrorRetry: 1,\n        enableInfiniteRetry: false\n      }, this.opts.shareManagerConfig);\n      this.shareManager = new ShareManager(managerConfig);\n    }\n    // 这里允许shareManager 多次setup防止动态加载的脚本 加载失败\n    this._managerReadyPromise = this._managerReadyPromise || this.shareManager.setup();\n    this._managerReadyPromise.then(_ => {\n      this._managerReady = true;\n    }).catch(_ => {\n      this._managerReadyPromise = null;\n    });\n    return this._managerReadyPromise;\n  }\n\n  /**\n   * @ignore\n   */\n  _prepareDefaultShare() {\n    // 小程序环境下就不修改默认分享信息了\n    // 一是小程序内没有必要，而是原来默认图尺寸本来也是错误的\n    if (getCurrentPlatform().isWeChatMiniProgram) {\n      return;\n    }\n    Object.assign(this.defaultShareEntityConfig, {\n      title: `拼多多商城`,\n      message: `风靡全国的拼单商城，优质商品新鲜直供，快一起来拼多多吧`,\n      thumbnailURL: getCDNImgUrl('/base/logo.jpg'),\n      shareURL: '/'\n    });\n    this.prepareShare(this.defaultShareEntityConfig, undefined, {\n      skipShareContentCheck: true\n    });\n  }\n\n  /**\n   * 从shareInfo中分出不同的模块配置\n   * 在此处补上一些统一业务逻辑，比如分享链接处理(域名替换， 加随机数, 去无用参数）\n   * @param {object} shareInfoPack 分享配置信息\n   * @param {ShareType} shareType 分享类型\n   * @param {object} opts 修改选项\n   * @returns {promise} 是否更新配置成功\n   */\n  async _prepareShareByShareType(shareInfoPack = {}, shareType, opts) {\n    this.setup();\n    if (!this._managerReady) {\n      await this.waitManagerReady();\n    }\n    const {\n      entityConfig = {}\n    } = shareInfoPack;\n    // prepare share entity\n    this._buildThumbnailURL(\n      entityConfig,\n      shareType\n    );\n    // prepare default share url\n    this._buildShareURL(entityConfig, shareType);\n    return this.shareManager.prepareShare(shareInfoPack, shareType, opts);\n  }\n\n  /**\n   * 修改分享参数，一般用于被动分享，比如微信 / qq / 小程序 内网页\n   * 与prepareShareSafe的区别在于，该方法在微信内使用是不安全的；\n   * shareInfo必填，shareType可选，不填shareType则修改对默认配置生效\n   * @param {object} shareInfo 需要修改的分享信息\n   * @param {ShareType} shareType 分享类型\n   * @param {object} opts 修改选项\n   * @returns {promise} 是否修改成功\n   */\n  prepareShare(shareInfo, shareType, opts = {}) {\n    this.setup();\n    // filter params\n    const shareInfoPack = this.shareInfoFilter.filter(shareInfo);\n    //\n    const result = this._prepareShareByShareType(shareInfoPack, shareType, opts);\n    // 保证来自sdk的shareInfo完全设置完毕之后再设置业务调用的shareInfo\n    !this._sdkPrepared && result.then(_ => {\n      this._checkSDKPrepared(shareInfoPack);\n    }, _ => {\n      this._checkSDKPrepared(shareInfoPack);\n    });\n    return result;\n  }\n\n  /**\n   * 修改分享参数，一般用于被动分享，比如微信 / qq / 小程序 内网页\n   * 与prepareShare的区别在于，该方法在微信内使用是安全的\n   * @param {object} shareInfo 需要修改的分享信息\n   * @param {ShareType} shareType 分享类型\n   * @returns {promise} 是否修改成功\n   * @example\n   * await pddShare.prepareShareSafe({\n   *   title: 'hello',\n   *   message: 'hello',\n   *   shareURL: 'index.html'\n   * })\n   *\n   * @example\n   * await pddShare.prepareShareSafe({\n   *   title: 'hello',\n   *   message: 'hello',\n   *   shareURL: 'index.html'\n   * }, ShareType.WECHAT_SESSION)\n   */\n  prepareShareSafe(shareInfo = {}, shareType) {\n    this.setup();\n\n    // filter params\n    const shareInfoPack = this.shareInfoFilter.filter(shareInfo);\n    const {\n      flowControllConfig = {}\n    } = shareInfoPack;\n\n    // if sdk is not ready && this prepareShare is not from page prepare sdk operation\n    if (!this._sdkPrepared && !flowControllConfig.isSDKPrepare) {\n      return this.waitSDKReady().then(() => {\n        return this._prepareShareByShareType(shareInfoPack, shareType);\n      });\n    }\n\n    // const { compatibleShareConfig } = shareInfoPack;\n    // 如果遇上了兼容性质的字段，需要把其他的shareType的配置都改一下，\n    // 如果没有遇上兼容性质的字段，直接改下默认shareType的配置\n    const result = this._prepareShareByShareType(shareInfoPack, shareType);\n\n    !this._sdkPrepared && result.then(_ => {\n      this._checkSDKPrepared(shareInfoPack);\n    }, _ => {\n      this._checkSDKPrepared(shareInfoPack);\n    });\n\n    return result;\n  }\n\n  /**\n   * 等待微信sdk就绪\n   * @returns {promise} sdk是否就绪\n   * @example\n   * await pddShare.waitSDKReady();\n   */\n  waitSDKReady() {\n    return this.waitWeChatSDKReady().then(() => {\n      return this.waitAppIDCacheBuild();\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  async waitWeChatSDKReady() {\n    if (this._sdkPrepared) {\n      return Promise.resolve();\n    } else if (this.sdkReadyPromise) {\n      return this.sdkReadyPromise;\n    } else {\n      const shareController = await this.shareManager.getShareControllerAsync();\n      if (!shareController) {\n        return Promise.resolve();\n      }\n      this.sdkReadyPromise = new Promise((res, rej) => {\n        shareController.once(ShareEventType.ON_SDK_READY, () => {\n          res();\n        });\n      });\n      return this.sdkReadyPromise;\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  async waitAppIDCacheBuild() {\n    const venderAppIDCache = VenderAppIDCache.getInstance();\n    if (venderAppIDCache.isInited()) {\n      return Promise.resolve();\n    } else if (this._actualWeChatAppID) {\n      return venderAppIDCache.build({\n        wechatAppID: this._actualWeChatAppID\n      });\n    } else if (!this.appIDReadyPromise) {\n      const shareController = await this.shareManager.getShareControllerAsync();\n      if (!shareController) {\n        return Promise.resolve();\n      }\n      this.appIDReadyPromise = new Promise((res, rej) => {\n        shareController.once(ShareEventType.ON_SDK_READY, ({\n          wechatAppID,\n          magicTrace\n        }) => {\n          Promise.all([\n            venderAppIDCache.build({\n              wechatAppID: wechatAppID\n            }),\n            MagicTraceManager.getInstance().build({\n              magicTrace\n            })\n          ]).then(() => {\n            res();\n          });\n        });\n      });\n    }\n    return this.appIDReadyPromise;\n  }\n\n  waitManagerReady() {\n    if (this._managerReady) {\n      return Promise.resolve();\n    }\n    if (!this._managerReadyPromise) {\n      return this._setupShareManager();\n    }\n    return this._managerReadyPromise;\n  }\n\n  /**\n   * 主动分享，shareType必传，shareInfo可选，不填则使用缓存分享配置\n   * @param {ShareType} shareType 分享类型\n   * @param {object} shareInfo 分享信息\n   * @return {promise} 分享结果\n   * @example\n   * try {\n   *   await pddShare.share(ShareType.WECHAT_SESSION, shareInfo);\n   * } catch (e) {\n   *   if (e.shareErrorType) {\n   *     // handle error\n   *   } else if (e.shareResultType === ShareResultType.FAIL) {\n   *     // handle share failed case\n   *   }\n   * }\n   */\n  async share(shareType, shareInfo) {\n    this.setup();\n    if (shareInfo) {\n      return this.prepareShareSafe(shareInfo, shareType).then(() => {\n        return this.shareManager.share(shareType);\n      });\n    } else {\n      if (!this._managerReady) {\n        await this.waitManagerReady();\n      }\n      return this.shareManager.share(shareType);\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  _buildThumbnailURL(entityConfig = {}, shareType) {\n    const thumbnailURL = entityConfig.thumbnailURL;\n    if (thumbnailURL === undefined) {\n      return;\n    }\n    let waterMark = entityConfig.waterMark;\n    let url = thumbnailURL || '';\n    if (waterMark === undefined || waterMark === null) {\n      waterMark = ShareWaterMark.DEFAULT;\n    }\n    url = addWaterMark(url, waterMark);\n    // hard code\n    if (shareType === ShareType.WECHAT_SESSION &&\n            waterMark === ShareWaterMark.DEFAULT) {\n      url = addWaterMark(url, ShareWaterMark.WE_CHAT_MSG, true);\n    }\n    // add protocol\n    url = (url || '').replace(/^\\/\\//, 'http://');\n    entityConfig.thumbnailURL = url;\n  }\n\n  /**\n   * @ignore\n   */\n  _buildShareURL(entityConfig = {}, shareType, opts = {}) {\n    const shareURL = entityConfig.shareURL;\n    if (!shareURL) {\n      delete entityConfig.shareURL;\n      return;\n    }\n\n    if (entityConfig.urlWrapType === URLWrapType.RAW) {\n      return;\n    }\n\n    const urlStatus = new URLParser(shareURL);\n    const queries = urlStatus.query || {};\n    const referFilter = Object.keys(queries).reduce((accu, next = '') => {\n      if (REFER_FILTER_KEYS.indexOf(next) >= 0) {\n        accu[next] = null;\n      }\n      return accu;\n    }, {});\n    const contextQueries = getExtendInfoFromQuery(true);\n\n    const generalQueries = {\n      _wv: 41729,\n      _wvx: 10\n    };\n    // 以下逻辑感觉有点冗余\n    //\n    if (getCurrentPlatform().isWeChatPlatform &&\n      (\n        shareType === ShareType.QQ_CHAT_SESSION ||\n        shareType === ShareType.QQ_ZONE\n      )\n    ) {\n      generalQueries['sf_tag'] = 'wechat';\n    }\n\n    if (shareType === ShareType.WECHAT_TIMELINE_IMAGE ||\n      shareType === ShareType.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK) {\n      generalQueries['from'] = 'qrImg';\n    }\n\n    const pathname = urlStatus.pathname || '';\n    //\n    const finalQueries = Object.assign({},\n      // general params\n      generalQueries,\n      // queries in page url\n      contextQueries,\n      // base queries in shareURL\n      queries,\n      // need be removed\n      NEED_REMOVED_QUERIES,\n      // removed refer\n      referFilter\n    );\n    const shareDomain = entityConfig.shareDomain || config.shareDomain;\n    entityConfig.shareURL = buildURL(finalQueries, resolveFullUrl(pathname), shareDomain);\n  }\n\n  /**\n   * @ignore\n   */\n  async _checkSDKPrepared({\n    flowControllConfig = {},\n    otherConfig = {}\n  }) {\n    if (flowControllConfig.isSDKPrepare && !this._sdkPrepared) {\n      this._sdkPrepared = true;\n      const shareController = await this.shareManager.getShareControllerAsync();\n      if (otherConfig.wechatAppID) {\n        this._actualWeChatAppID = otherConfig.wechatAppID;\n      }\n      const wechatEnableMap = otherConfig.shareTypeEnable;\n      if (wechatEnableMap && typeof wechatEnableMap === 'object') {\n        const disabledTypes = Object.keys(wechatEnableMap)\n          .filter(type => !wechatEnableMap[type])\n          .map(type => parseInt(type, 10));\n        // 关掉对应的\n        shareController && shareController.disableShare(disabledTypes);\n      }\n      shareController && shareController.emit(ShareEventType.ON_SDK_READY, {\n        wechatAppID: otherConfig.wechatAppID,\n        magicTrace: otherConfig.magicTrace\n      });\n    }\n  }\n\n  /**\n   * 获得分享管理器对象\n   * @returns {ShareManager|null} 分享管理器对象\n   */\n  getShareManager() {\n    this.setup();\n    return this.shareManager;\n  }\n\n  /**\n   * 设置app中右上角分享按钮的监听事件\n   * @param {object} buttonConfig 分享按钮配置\n   * @param {string} buttonConfig.shareIcon 分享icon图片base64字符串\n   * @param {number} buttonConfig.shareIconSize 分享icon图片大小\n   * @param {function} onClickListener 监听函数\n   * @return {promise} 设置是否成功\n   * @example\n   * pddShare.setupNativeShareButton({}, () => {\n   *   // when share icon clicked\n   *   showSharePanel();\n   * });\n   */\n  async setupNativeShareButton(buttonConfig, onClickListener) {\n    this.setup();\n    if (!this.shareManager) {\n      return;\n    }\n    if (!this._managerReady) {\n      await this.waitManagerReady();\n    }\n    return this.shareManager.setupNativeShareButton(buttonConfig, onClickListener);\n  }\n}\n\nPDDShare.getInstance = (opts = {}) => {\n  if (!instance) {\n    instance = new PDDShare(opts);\n  }\n  return instance;\n};\n\nexport default PDDShare;\n","import PDDShare from './PDDShare';\nimport ShareError from './ShareError';\n\nexport { default as ShareChannel } from './ShareChannel';\nexport { default as ShareEventType } from './ShareEventType';\nexport { default as ShareResult } from './ShareResult';\nexport { default as ShareResultType } from './ShareResultType';\nexport { default as ShareType } from './ShareType';\nexport { default as ShareWaterMark } from './ShareWaterMark';\nexport { default as URLWrapType } from './tools/URLWrapType';\nexport { default as ShareForm } from './ShareForm';\nexport { default as ShareMethod } from './ShareMethod';\nexport { default as ThirdPartyOpenType } from './ThirdPartyOpenType';\nexport { CipherConsumeMode } from './CipherConsumeMode';\nexport { TPSelectCategory } from './TPSelectCategory';\nexport { CipherPasteType } from './CipherPasteType';\nexport { SystemShareMode } from './SystemShareMode';\nexport { setPageContext } from './tools/getPageContext';\nexport const ShareErrorCode = ShareError.ShareErrorCode;\n\nlet exportObj = {};\nif (process.env.BROWSER) {\n  exportObj = PDDShare;\n}\nexport default exportObj;\n","/**\n * @file QQShareType.js\n * @author daben\n */\nimport ShareType from './ShareType';\n\n/**\n * @ignore\n */\nconst QQ_SHARE_TYPES = [\n  ShareType.QQ_CHAT_SESSION,\n  ShareType.QQ_ZONE,\n  ShareType.QQ_CHAT_SESSION_IMAGE,\n  ShareType.QQ_ZONE_IMAGE\n];\n\n/**\n * 分享类型是否为分享到QQ的分享类型\n * @param {ShareType} shareType 分享类型\n */\nconst isShareToQQ = (shareType) => {\n  return QQ_SHARE_TYPES.indexOf(shareType) >= 0;\n};\n\nexport {\n  isShareToQQ,\n  QQ_SHARE_TYPES\n};\n","/**\n * @file ApiCacheManager.js\n * @author daben\n */\n\nclass ApiCacheManager {\n  constructor(opts = {}) {\n    // key: hash\n    // value: { response, count = 1 }\n    this._cacheMap = {};\n    this._cacheLimit = opts.cacheLimit || 20;\n  }\n\n  getResponseByHash(hash = '') {\n    const data = this._cacheMap[hash];\n    if (!data) {\n      return null;\n    }\n    return data.response;\n  }\n\n  cacheResponseByHash(hash = '', response) {\n    if (!hash || !response) {\n      return;\n    }\n    const cachedNum = Object.keys(this._cacheMap).length || 0;\n    // 超过缓存数目就不缓存了\n    if (cachedNum >= this._cacheLimit) {\n      return;\n    }\n    const data = this._cacheMap[hash];\n    if (data) {\n      // 已经有缓存存在, 替换为新response\n      data.response = response;\n    } else {\n      // 不存在缓存\n      this._cacheMap[hash] = {\n        response,\n        count: 1,\n        trigger: false,\n        complete: false\n      };\n    }\n  }\n\n  _write(key = '', hash = '', value) {\n    const conf = (this._cacheMap[hash] || {});\n    conf[key] = value;\n    this._cacheMap[hash] = conf;\n  }\n\n  _read(key = '', hash = '') {\n    return (this._cacheMap[hash] || {})[key];\n  }\n\n  getCountByHash(hash = '') {\n    return this._read('count', hash) || 0;\n  }\n\n  increaseCount(hash = '') {\n    return this._write('count', hash, this.getCountByHash() + 1);\n  }\n\n  getShareID(hash = '') {\n    return this._read('share_id', hash);\n  }\n\n  setShareID(hash = '', shareID = null) {\n    return this._write('share_id', hash, shareID);\n  }\n}\n\nlet instance = null;\nexport function getInstance() {\n  if (!instance) {\n    instance = new ApiCacheManager(...arguments);\n  }\n  return instance;\n}\n\nexport default ApiCacheManager;\n","/**\n * DynamicTrace\n * @file ShareContentCheck.js\n * @author  daben\n */\nimport { getPageID, getPageSN, getPageName } from '../tools/getPageContext';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\n\nconst PATH = 'api/flow/audience/share/trace';\n\nexport default function (method = '', opts = {}) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => {}\n  });\n  let promise = null;\n  let params = {};\n  params.origin = opts.platform || '';\n  params.share_params = opts.shareParams || {};\n  params.page_sn = opts.pageSn || (getPageSN() + '');\n  params.page_info = opts.pageInfo || {\n    page_name: getPageName(),\n    page_url: location && location.href\n  };\n  if (opts.payloadMixin && typeof opts.payloadMixin === 'object') {\n    params = Object.assign(params, opts.payloadMixin);\n  }\n\n  if (method.toLowerCase() === 'post') {\n    promise = httpClient.post(PATH, params);\n  } else {\n    promise = httpClient.get(PATH, { params });\n  }\n  return promise.then((data = {}) => {\n    return data.magic_trace;\n  });\n}\n","/**\n * @file MagicTraceManager.js\n * @author  daben\n */\nimport URLParser from './URLParser';\nimport buildURL from './buildURL';\nimport dynamicTrace from './dynamicTrace';\nimport {\n  shareEntityToParams\n} from '../ShareManager/translation';\nimport platformTag from '../ShareManager/platformTag';\n\nfunction transformByMagicTrace(url, magicTrace) {\n  if (\n    !magicTrace ||\n    !magicTrace.key ||\n    !magicTrace.value ||\n    !magicTrace.trace\n  ) {\n    return url;\n  }\n  const urlStatus = new URLParser(url);\n  const {\n    key,\n    value\n  } = magicTrace;\n  const path = magicTrace.trace;\n  return buildURL(Object.assign({\n    [key]: value\n  }, urlStatus.query), path, urlStatus.origin);\n}\n\nclass MagicTraceManager {\n  constructor(opts = {}) {\n    this._isInited = false;\n    this._magicTrace = null;\n  }\n\n  // 先设计成异步的\n  // 防止以后万一改异步麻烦\n  // web环境下随SDK_PREPARED事件初始化magicTrace\n  // native环境下随着ShareLimit中的types接口初始化magicTrace\n  build({\n    magicTrace = {}\n  }) {\n    if (this._isInited) {\n      return Promise.resolve();\n    }\n    // 以第一次正确设置的为准\n    if (\n      magicTrace.key &&\n      magicTrace.value &&\n      magicTrace.trace\n    ) {\n      this._magicTrace = magicTrace;\n      this._isInited = true;\n    }\n    return Promise.resolve();\n  }\n\n  isInited() {\n    return this._isInited;\n  }\n\n  transform(url) {\n    return transformByMagicTrace(url, this._magicTrace);\n  }\n\n  transformByShareEntity(shareEntity = {}) {\n    return dynamicTrace('post', {\n      platform: platformTag(),\n      shareParams: shareEntityToParams(shareEntity),\n      payloadMixin: shareEntity.payloadMixin\n    }).then((magicTrace) => {\n      return transformByMagicTrace(shareEntity.shareURL, magicTrace);\n    });\n  }\n}\n\nlet instance = null;\nMagicTraceManager.getInstance = function (opts = {}) {\n  if (!instance) {\n    instance = new MagicTraceManager(opts);\n  }\n  return instance;\n};\n\nexport default MagicTraceManager;\n","/**\n * parseURL\n * @file url.js\n * @author  daben\n */\n\nclass URLParser {\n  constructor(url = '') {\n    this.hostname = '';\n    this.origin = '';\n    this.pagename = '';\n    this.pathname = '';\n    this.port = 0;\n    this.protocol = '';\n    this.query = {};\n    this.search = '';\n    this.hashTag = '';\n    this.parseURL(url);\n  }\n\n  parseURL(url) {\n    const splitHash = url.split('#');\n    const noHashTag = splitHash[0] || '';\n    this.hashTag = splitHash[1] || '';\n    const parts = noHashTag.split('?');\n    let path = parts[0] || '';\n    const query = parts[1] || '';\n    this.search = '?' + query;\n    this.query = (query.split('&') || []).reduce((accu, curr = '') => {\n      const keyValue = curr.split('=');\n      let key;\n      let value;\n      try {\n        key = decodeURIComponent(keyValue[0] || '');\n        value = decodeURIComponent(keyValue[1] || '');\n      } catch (e) {\n        key = '';\n      }\n      if (key) {\n        accu[key] = value;\n      }\n      return accu;\n    }, {});\n    const protocolReg = /^([a-zA-Z]+:)\\/\\//;\n    const protocolMatch = path.match(protocolReg) || [];\n    this.protocol = protocolMatch[1] || '';\n    const hostnameReg = /^((:?[a-zA-Z0-9](:?[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,6})(:\\d+)?\\//;\n    if (protocolMatch[0]) {\n      path = path.replace(protocolMatch[0], '');\n    }\n    const hostnameResult = path.match(hostnameReg) || [];\n    const [hostname, port] = (hostnameResult[0] || '').replace(/\\//g, '').split(':');\n    this.hostname = hostname;\n    this.port = parseInt(port || 0, 10);\n    if (hostnameResult[0]) {\n      path = path.replace(hostnameResult[0], '');\n    }\n\n    if (this.protocol && this.hostname) {\n      this.origin = `${this.protocol}//${this.hostname}`;\n    }\n\n    this.pathname = '/' + path.replace(/^\\//, '');\n    const pagenameResult = path.match(/\\/?(\\w+\\.html)$/) || [];\n    this.pagename = pagenameResult[1] || '';\n  }\n}\n\nexport default URLParser;\n","/**\n * @file URLWrapType.js\n * @author  daben\n */\n\nconst URLWrapType = {\n  DEFAULT: 0,\n  // 重定向方式组合url (prepared-config)\n  // @deprecated\n  REDIRECT: 1,\n  // 取后端给的域名和编码后的地址组合\n  // @deprecated\n  SERVER_DOMAIN: 2,\n  // 后端控制(小域名和app_id, real-time-config)\n  // @deprecated\n  SERVER_CONTROL: 3,\n  // 后端控制 (short url, real-time)\n  SERVER_SHORT_URL: 4,\n  // 不做任何处理\n  RAW: 5,\n  // 后端控制(小域名)\n  SERVER_TINY_DOMAIN: 6,\n  // base64 (new)\n  // @deprecated\n  SERVER_DOMAIN_BASE64: 7,\n  // replace domain\n  DOMAIN_REPLACE: 8,\n  // magic trace\n  MAGIC_TRACE: 9,\n  // magic trace dynamic\n  MAGIC_TRACE_DYNAMIC: 10,\n  // short url with cache\n  SERVER_SHORT_URL_WITH_CACHE: 11,\n  // tp app_id share\n  SERVER_TP_APP: 12,\n  // combined category for card\n  SERVER_TP_APP_CARD: 13,\n  // get extra parmas from server and append to share_url\n  SERVER_QUERY_APPEND: 14,\n  // get combined category info (limit card)\n  CATEGORY_PROCEDURE: 15,\n  // get combined category info (info / or custom)\n  CATEGORY_PROCEDURE_CUSTOM: 16\n};\n\nexport function isServerControlType(urlWrapType) {\n  return (\n    [\n      URLWrapType.SERVER_CONTROL,\n      URLWrapType.SERVER_SHORT_URL,\n      URLWrapType.SERVER_TINY_DOMAIN,\n      URLWrapType.SERVER_DOMAIN_BASE64,\n      URLWrapType.DOMAIN_REPLACE,\n      URLWrapType.SERVER_SHORT_URL_WITH_CACHE\n    ].indexOf(urlWrapType) >= 0\n  );\n}\n\nexport function isTinyDomainType(urlWrapType) {\n  return (\n    [\n      URLWrapType.SERVER_CONTROL,\n      URLWrapType.SERVER_TINY_DOMAIN,\n      URLWrapType.SERVER_DOMAIN_BASE64,\n      URLWrapType.DOMAIN_REPLACE\n    ].indexOf(urlWrapType) >= 0\n  );\n}\n\nexport function isShortLinkType(urlWrapType) {\n  return (\n    [\n      URLWrapType.SERVER_SHORT_URL,\n      URLWrapType.SERVER_SHORT_URL_WITH_CACHE,\n      URLWrapType.SERVER_TP_APP_CARD,\n      URLWrapType.CATEGORY_PROCEDURE,\n      URLWrapType.CATEGORY_PROCEDURE_CUSTOM\n    ].indexOf(urlWrapType) >= 0\n  );\n}\n\nexport default URLWrapType;\n","import { appendQuery, getPathnameWithSearchAndHash, resolveFullUrl } from '@pdd/core-util';\nimport URLParser from './URLParser';\n\nexport default function buildURL(searchs = {}, url = '', origin = '') {\n  // 当前是组件包环境的话域名要解一下\n  if (window.location.href.indexOf('amcomponent://') === 0) {\n    origin = origin || new URLParser(url).origin;\n  }\n  url = appendQuery(searchs, resolveFullUrl(url || location.href));\n  if (origin) {\n    origin = origin.replace(/\\/$/g, '');\n    return `${origin}${getPathnameWithSearchAndHash(url)}`;\n  }\n  return url;\n}\n","import buildURL from './buildURL';\nimport md5 from 'md5';\n\nexport default function calculateURLHash(shareEntity = {}) {\n  const url = shareEntity.shareURL;\n  // 需要从链接中去掉refer_share_id / refer_share_uid / refer_share_channel / refer_share_uin 后进行计算\n  const clearURL = buildURL({\n    refer_share_id: null,\n    refer_share_uid: null,\n    refer_share_channel: null,\n    refer_share_uin: null\n  }, url);\n  const payloadMixin = shareEntity.payloadMixin || {};\n  const payloadString = JSON.stringify(payloadMixin);\n  return md5(clearURL + payloadString);\n}\n","/**\n * 保存页面信息\n */\nconst pageContextCache = {};\n\nexport function setPageContext(context = {}) {\n  Object.assign(pageContextCache, context);\n}\n\nexport function getPageID() {\n  return pageContextCache.pageId || '';\n}\n\nexport function getPageSN() {\n  return pageContextCache.pageSN || '';\n}\n\nexport function getPageName() {\n  return pageContextCache.pageName || '';\n}\n","/**\n * @file getUserID.js\n * @author  daben\n */\nimport { getUid, getUin } from '@pdd/auth';\n\nlet userIDCache = '';\nlet uinCache = '';\nexport function refreshUid() {\n  return Promise.all([\n    getUid().then(uid => {\n      userIDCache = uid;\n    }).catch(_ => {}),\n    getUin().then(uin => {\n      uinCache = uin;\n    }).catch(_ => {})\n  ]);\n}\n\nexport function getCachedUin() {\n  return uinCache;\n}\n\nexport default function getUserID() {\n  return userIDCache;\n}\n","/**\n * @file makeUpProtocol.js\n * @author daben\n */\n\nimport { getCurrentPlatform } from '@pdd/platform-util';\nconst isClientEnv = typeof window !== 'undefined';\nexport default function makeUpProtocol(url = '') {\n  if (url.match(/^http:?/)) {\n    return url;\n  }\n  if (getCurrentPlatform().isNativePlatform || !isClientEnv) {\n    return `http://${url}`;\n  } else if (location.protocol) {\n    return `${location.protocol}//${url}`;\n  }\n}\n","/**\n * 格式A 跳web\n * package_activity/fruits/apple/apple?\n * target_page=encode(\n *     /pages/web/web?specialUrl=1&src=encode(金猪h5链接 === shareURL)\n * )\n *\n * 格式B 跳中转页面\n * package_activity/fruits/apple/apple?\n * target_page=encode(\n *     pages/launch/launch?\n *         jump_url={\n *             (/pages/web/web?specialUrl=1&src=encode(金猪h5链接 === shareURL))\n *         }&launch_url={金猪h5链接 === shareURL}\n * )\n *\n * 格式C 跳小程序原生\n * package_activity/fruits/apple/apple?\n * target_page=encode(\n *     /package_activity/garden/pages/index/index?xxx=123\n * )\n */\nimport { buildQuery } from '@pdd/core-util';\nimport buildURL from './buildURL';\nimport URLParser from './URLParser';\nimport getUserID from './getUserID';\nimport { app as applicationConfig } from '@pdd/configs';\nlet config = {};\nif (typeof window !== 'undefined') {\n  config = applicationConfig.get(location.host) || {};\n}\n\nexport function pickUpRefer(shareEntity = {}) {\n  const query = new URLParser(shareEntity.shareURL).query || {};\n  return {\n    refer_share_id: query.refer_share_id,\n    // 这里用userID 兜底的原因是\n    // refer信息本来设计是share_url生成完后， 从分享url中解析出来\n    // 但是上了去掉refer_share_uid的需求后，share_url就默认没有refer_share_uid了\n    // 因此此处会取到undefined, undefined会导致口令后端接口报错\n    refer_share_uid: query.refer_share_uid || getUserID(),\n    refer_share_channel: query.refer_share_channel,\n    refer_share_uin: query.refer_share_uin\n  };\n}\n\nexport function toHttps(url = '') {\n  return url.replace(/^(?:https?:?)?\\/\\//, 'https://');\n}\n\nexport default function (shareEntity = {}, opts = {}) {\n  const miniObjectPath = shareEntity.miniObjectPath;\n  const statusPartA = new URLParser(miniObjectPath);\n  const statusPartB = new URLParser(statusPartA.query.target_page || '');\n  const partBQuery = statusPartB.query || {};\n  const appendQuery = opts.appendQuery || {};\n  const {\n    // 去掉refer_share_uid的key\n    refer_share_uid: referShareUid,\n    ...referInfo\n  } = { ...pickUpRefer(shareEntity), ...appendQuery };\n  const domain = shareEntity.shareDomain || config.shareDomain;\n  // 如果有这个就是跳web的\n  // 把src参数用shareURL替换\n  if (partBQuery.specialUrl || partBQuery.src) {\n    if (partBQuery.src) {\n      partBQuery.src = buildURL(referInfo, partBQuery.src, domain);\n    } else {\n      partBQuery.src = toHttps(shareEntity.shareURL);\n    }\n    return `${statusPartA.pathname}?${buildQuery(Object.assign({}, statusPartA.query, {\n      target_page: `${statusPartB.pathname}?${buildQuery(partBQuery)}`\n    }))}`;\n  }\n  // 如果有这个参数，就是跳中转页面的\n  // 修改jump_url中的参数，替换launchURL为shareURL\n  if (partBQuery.jump_url || partBQuery.launch_url) {\n    if (partBQuery.jump_url) {\n      const jumpURLStatus = new URLParser(partBQuery.jump_url);\n      // 是小程序路径\n      if (!jumpURLStatus.hostname) {\n        const jumpURLQuery = jumpURLStatus.query;\n        if (jumpURLQuery.specialUrl) {\n          // 如果 jumpURLQuery.src 为空 设置为shareURL\n          // 如果 jumpURLQuery.src 非空 修改其中参数\n          if (jumpURLQuery.src) {\n            jumpURLQuery.src = buildURL(referInfo, jumpURLQuery.src, domain);\n          } else {\n            jumpURLQuery.src = toHttps(shareEntity.shareURL);\n          }\n          partBQuery.jump_url = `${jumpURLStatus.pathname}?${buildQuery(jumpURLQuery)}`;\n        }\n      }\n    }\n    // 如果launch_url 为空 不做处理\n    // 如果launch_url 非空 修改其中参数\n    if (partBQuery.launch_url) {\n      partBQuery.launch_url = buildURL(referInfo, partBQuery.launch_url);\n    }\n    return `${statusPartA.pathname}?${buildQuery(Object.assign({}, statusPartA.query, {\n      target_page: `${statusPartB.pathname}?${buildQuery(partBQuery)}`\n    }))}`;\n  }\n  // 其他的就认为是跳小程序原生的\n  // 直接修改targetPage参数\n  // 没有target_page则不认为符合格式\n  if (!statusPartA.hostname && !statusPartB.hostname && statusPartA.query.target_page) {\n    return `${statusPartA.pathname}?${buildQuery(Object.assign({}, statusPartA.query, {\n      target_page: `${statusPartB.pathname}?${buildQuery(\n        Object.assign(partBQuery, referInfo)\n      )}`\n    }))}`;\n  }\n  // 直接补在最外面\n  return `${statusPartA.pathname}?${buildQuery(Object.assign({}, statusPartA.query, referInfo))}`;\n}\n","/**\n * @file ShareDomainModel.js\n * @author daben\n */\nimport { getPageID, getPageSN } from '../tools/getPageContext';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\nimport { pickUpRefer } from './processMiniObjectPath';\nimport URLParser from './URLParser';\nimport { buildQuery } from '@pdd/core-util';\n\nexport const ShareDomainType = {\n  WEIXIN_TINY_DOMAIN: 'weixin',\n  SHORT_LINK: 'link'\n};\n\nexport const ShareDomainPlatform = {\n  WECHAT: 'h5',\n  IOS: 'ios',\n  ANDROID: 'android'\n};\n\nconst EXTRA_QEURIES_API = `api/flow/chron/share/miniprogram`;\n\n/**\n * 从服务端获得额外的参数，补充到share_url上面\n * @param {string} method 请求方法\n * @param {object} opts 参数对象\n */\nexport function getExtraQueriesFromServer(method = '', opts = {}) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => {}\n  });\n  let promise = null;\n  let params = {};\n  params.share_refer = pickUpRefer({ shareURL: opts.shareURL });\n  if (opts.payloadMixin && typeof opts.payloadMixin === 'object') {\n    // payloadMixin.extra maybe exists. if it is used, here should assign extra\n    params = Object.assign(params, opts.payloadMixin);\n  }\n  const apiPath = opts.shortURLApi || EXTRA_QEURIES_API;\n\n  if (method.toLowerCase() === 'post') {\n    promise = httpClient.post(apiPath, params);\n  } else {\n    promise = httpClient.get(apiPath, { params });\n  }\n\n  return promise.then((data = {}) => {\n    return data;\n  });\n}\n\nexport default function (method = '', opts = {}) {\n  const httpClient = createDefaultAxios({\n    pageInfo: {\n      pageId: getPageID()\n    }\n  }, {\n    defaultErrorHandler: _ => {}\n  });\n  let promise = null;\n  let params = {};\n  params.url = opts.shareURL || '';\n  params.activity = opts.marketActivityID || 0;\n  params.platform = opts.platform || '';\n  params.share_refer = pickUpRefer({ shareURL: opts.shareURL });\n  params.page_sn = getPageSN();\n  if (opts.payloadMixin && typeof opts.payloadMixin === 'object') {\n    // payloadMixin.extra maybe exists. if it is used, here should assign extra\n    params = Object.assign(params, opts.payloadMixin);\n  }\n\n  // 生成短链专属code，有这个参数就带上refer_xx\n  const urlAlias = opts.urlAlias || 'url_code';\n  const longUrl = params[urlAlias];\n  if (longUrl && typeof longUrl === 'string') {\n    const urlCodeQuery = new URLParser(longUrl).query || {};\n    Object.assign(urlCodeQuery, params.share_refer);\n    params[urlAlias] = `${longUrl.split('?')[0] || ''}?${buildQuery(urlCodeQuery)}`;\n  }\n\n  let apiPath = 'api/flow/audience/activity/domain/weixin';\n  if (opts.shareDomainType === ShareDomainType.SHORT_LINK) {\n    if (opts.shortURLApi) {\n      apiPath = opts.shortURLApi;\n    } else if (opts.shortCommandApi) {\n      apiPath = opts.shortCommandApi;\n    } else {\n      apiPath = 'api/flow/audience/activity/domain/short_url';\n    }\n  } else {\n    if (opts.domainURLApi) {\n      apiPath = opts.domainURLApi;\n    }\n  }\n\n  if (method.toLowerCase() === 'post') {\n    promise = httpClient.post(apiPath, params);\n  } else {\n    promise = httpClient.get(apiPath, { params });\n  }\n\n  return promise.then((data = {}) => {\n    // if (opts.shortCommandApi) {\n    //   return {\n    //     shareText: data.share_text || ''\n    //   };\n    // }\n    return {\n      // weixin:微信小域名分享， link:短链接分享\n      // type: data.type,\n      domain: data.domain,\n      // type=weixin时返回\n      openAppID: data.open_app_id || '',\n      // type=link 时返回\n      shortURL: data.short_url || '',\n      // shareText\n      shareText: data.share_text || '',\n      raw: data\n    };\n  });\n}\n","\nimport shareDomainModel, {\n  ShareDomainType,\n  ShareDomainPlatform,\n  getExtraQueriesFromServer\n} from './shareDomainModel';\nimport { getCurrentPlatform, PLATFORM } from '@pdd/platform-util';\nimport { isShareToQQ } from '../qqShareTypes';\nimport MagicTraceManager from './MagicTraceManager';\nimport calculateURLHash from './calculateURLHash';\nimport { getInstance as getApiCacheManager } from './ApiCacheManager';\nimport URLWrapType, {\n  isServerControlType,\n  isTinyDomainType\n} from './URLWrapType';\nimport URLParser from './URLParser';\nimport makeUpProtocol from './makeUpProtocol';\nimport buildURL from './buildURL';\n\n// import trackError from '../ShareTracker/trackError';\n\nconst SHARE_DOMAIN_MAIN = 'mobile.yangkeduo.com';\n\nconst QQ_ENABLE_DOMAIN = [\n  'mobile.yangkeduo.com',\n  'm.hutaojie.com',\n  'panduoduo.yangkeduo.com'\n];\n\nexport const getWebWrappedShareURLInfo = (shareEntity = {}) => {\n  const shareURL = shareEntity.shareURL || '';\n  const urlWrapType = shareEntity.urlWrapType;\n  if (\n    urlWrapType === URLWrapType.DEFAULT ||\n    urlWrapType === URLWrapType.RAW\n  ) {\n    return Promise.resolve({\n      missed: true,\n      realShareURL: shareURL,\n      targetShareURL: shareURL\n    });\n  }\n  if (\n    shareEntity.marketActivityID &&\n    isServerControlType(urlWrapType)\n  ) {\n    const shareDomainType = isTinyDomainType(urlWrapType)\n      ? ShareDomainType.WEIXIN_TINY_DOMAIN\n      : ShareDomainType.SHORT_LINK;\n    const requestShareURL = shareURL.replace(/^(\\w+:)?\\/\\//, '');\n    const shareURLHash = calculateURLHash(shareEntity);\n    const apiCacheManager = getApiCacheManager();\n    // 远端转换\n    const remoteRequest = () => {\n      const req = new Promise((res, rej) => {\n        const shareDomainRP = shareDomainModel(\n          shareEntity.requestUsePost ? 'post' : 'get',\n          {\n            shareURL: requestShareURL,\n            marketActivityID: shareEntity.marketActivityID,\n            platform: getShareDomainPlatform(),\n            shareDomainType: shareDomainType,\n            shortURLApi: shareEntity.shortURLApi,\n            shortCommandApi: shareEntity.shortCommandApi,\n            domainURLApi: shareEntity.domainURLApi,\n            payloadMixin: shareEntity.payloadMixin\n          }\n        );\n        shareDomainRP.then((data) => {\n          if (data) {\n            const {\n              domain = '',\n              shortURL,\n              shareText,\n              raw\n            } = data;\n            if (shareDomainType === ShareDomainType.WEIXIN_TINY_DOMAIN) {\n              if (urlWrapType === URLWrapType.DOMAIN_REPLACE) {\n                res(getDomainReplacedURL(shareURL, domain));\n              }\n            } else if (\n              shareDomainType === ShareDomainType.SHORT_LINK\n            ) {\n              res({\n                useShortURL: true,\n                realShareURL: shortURL || shareURL,\n                targetShareURL: shareURL,\n                shareText: shareText,\n                rawResponse: raw\n              });\n              return;\n            }\n          }\n          res({\n            realShareURL: shareURL,\n            targetShareURL: shareURL\n          });\n        }).catch(e => {\n          rej(e);\n        });\n      });\n      // 只缓存接口请求类型的\n      shareDomainType === ShareDomainType.SHORT_LINK && req.then(response => {\n        // 成功的请求才缓存下来\n        if (response && response.useShortURL) {\n          apiCacheManager.cacheResponseByHash(shareURLHash, response);\n          apiCacheManager.setShareID(shareURLHash, (new URLParser(shareURL).query || {}).refer_share_id);\n        }\n      });\n      return req;\n    };\n\n    // 如果是使用了缓存性质的链接方式 则优先从缓存中取\n    if (urlWrapType === URLWrapType.SERVER_SHORT_URL_WITH_CACHE) {\n      // 没有符合的，则走本地缓存\n      let cachedResponse = apiCacheManager.getResponseByHash(shareURLHash);\n      if (cachedResponse) {\n        apiCacheManager.increaseCount(shareURLHash);\n        // 缓存次数命中\n        return Promise.resolve(cachedResponse);\n      }\n      return remoteRequest();\n    }\n    return remoteRequest();\n  }\n  if (urlWrapType === URLWrapType.MAGIC_TRACE) {\n    const url = MagicTraceManager.getInstance().transform(shareURL);\n    return Promise.resolve({\n      realShareURL: url,\n      targetShareURL: url\n    });\n  }\n  if (urlWrapType === URLWrapType.MAGIC_TRACE_DYNAMIC) {\n    return MagicTraceManager.getInstance().transformByShareEntity(shareEntity).then((url) => {\n      return {\n        realShareURL: url,\n        targetShareURL: url\n      };\n    }, () => {\n      return {\n        realShareURL: shareURL,\n        targetShareURL: shareURL\n      };\n    });\n  }\n  if (urlWrapType === URLWrapType.SERVER_QUERY_APPEND) {\n    return getExtraQueriesFromServer(\n      shareEntity.requestUsePost ? 'post' : 'get',\n      {\n        shareURL,\n        payloadMixin: shareEntity.payloadMixin,\n        shortURLApi: shareEntity.shortURLApi\n      }\n    ).then((queries = {}) => {\n      const useCipher = queries && queries.code_method;\n      if (useCipher) {\n        return {\n          useCipher,\n          realShareURL: shareURL,\n          targetShareURL: shareURL\n        };\n      } else {\n        const { share_title: title, share_img: thumbnailURL, dev_infos: tpInfos, ...restQueries } = queries;\n        const url = buildURL(restQueries, shareURL);\n        return {\n          appendQuery: restQueries,\n          // 策略中心返回来的数据\n          categoryShareInfo: { title, thumbnailURL },\n          realShareURL: url,\n          targetShareURL: url,\n          tpInfos\n        };\n      }\n    });\n  }\n\n  return Promise.resolve({\n    missed: true,\n    realShareURL: shareURL,\n    targetShareURL: shareURL\n  });\n};\n\nexport const getDomainReplacedURL = (shareURL, domain) => {\n  const targetURL = buildURL({}, shareURL, makeUpProtocol(domain));\n  return {\n    targetShareURL: targetURL,\n    realShareURL: targetURL\n  };\n};\n\nexport const getShareDomainPlatform = () => {\n  const current = getCurrentPlatform();\n  if (current.platform === PLATFORM.PddAndroid) {\n    return ShareDomainPlatform.ANDROID;\n  } else if (current.platform === PLATFORM.PddIOS) {\n    return ShareDomainPlatform.IOS;\n  }\n  return ShareDomainPlatform.WECHAT;\n};\n\nexport const getQQShareURL = (shareType, shareURL) => {\n  // 不是分享到QQ的不管\n  if (!isShareToQQ(shareType)) {\n    return shareURL;\n  }\n  const urlStatus = new URLParser(shareURL);\n  const hostname = urlStatus.hostname;\n  if (QQ_ENABLE_DOMAIN.indexOf(hostname) < 0) {\n    shareURL = shareURL.replace(`//${hostname}`, `//${SHARE_DOMAIN_MAIN}`);\n  }\n  return shareURL;\n};\n","/**\n * @file util.js 一些获取参数的工具方法\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { getUid, getUin } from '@pdd/auth';\nimport { PLATFORM, getCurrentPlatform } from '@pdd/platform-util';\nimport { crc32, getCookie, nanoid, parseQuery, getReferInfo, memoize, getExtendInfoFromQuery } from '@pdd/core-util';\n\n// 风控维度参数 https://jira2.corp.yiran.com/browse/PDD-28952?filter=-3\nlet riskCookies = null;\nexport const getRiskControlParams = (time, op = '') => {\n  if(!riskCookies) {\n    const { pdd_vds = '', _nano_fp } = getCookie();\n    riskCookies = { pdd_vds, _nano_fp };\n  }\n\n  const params = {\n    cookie_fp: riskCookies._nano_fp,\n    storage_fp: localStorage.getItem('_nano_fp') || ''\n  };\n\n  const { isNativePlatform, isTinyNativePlatform } = getCurrentPlatform();\n  if(!isNativePlatform && !isTinyNativePlatform) {\n    params.dcf = getDcf(time, riskCookies.pdd_vds, op);\n  }\n\n  return params;\n};\n\n// 获取基础环境参数，不允许覆盖\nexport const getBasicEnvParams = async (config) => {\n  const time = Date.now();\n  const { version, isTinyNativePlatform, platform } = getCurrentPlatform();\n\n  const fields = {\n    time,\n    log_id: time + nanoid(16),\n    user_id: '',\n    uin: '',\n\n    app_id: getAppID(config),\n    /*page_name: pageManagerInstance.getPageName(),\n    page_id: pageManagerInstance.getPageID(),\n    page_sn: pageManagerInstance.getPageSN(),*/\n\n    screen_width: window.screen.width, // 屏幕的宽度\n    screen_height: window.screen.height, // 屏幕的高度\n    dpr: window.devicePixelRatio, // 屏幕的device pixel ratio\n    app_version: version, // 应用的版本\n    // 用户平台: weixin/qq/weibo/android/ios/unknow\n    platform: isTinyNativePlatform ? PLATFORM.PddAndroid : platform\n  };\n\n  const [uid, uin] = await Promise.all([getUid(), getUin()]);\n  fields.user_id = uid;\n  fields.uin = uin;\n\n  const wxCheckPdd = localStorage.getItem('WxCheckPdd');\n  if(wxCheckPdd !== null) {\n    fields.wx_check_pdd = parseInt(wxCheckPdd, 10) || 0;\n  }\n\n  return fields;\n};\n\nconst getReferQuery = memoize(getReferInfo);\nconst getExtendQuery = memoize(getExtendInfoFromQuery);\n\n// 获取页面上下文参数\nexport const getPageManagerParams = async () => {\n  const referQuery = await getReferQuery();\n  // 添加传递参数（现在有以_x_开头的以及xcx_trace_id ）打点\n  const extendQuery = getExtendQuery();\n\n  return { ...referQuery, ...extendQuery };\n};\n\nconst CHANNEL_KEYS = ['src', 'from', 'campaign', 'cid'];\nconst REFER_SHARE_KEYS = ['refer_share_id', 'refer_share_uid', 'refer_share_channel', 'refer_share_form'];\nconst REFER_SHARE_SHORT_MAP = {\n  _sid: 'refer_share_id',\n  _suid: 'refer_share_uid',\n  _sc: 'refer_share_channel',\n  _sf: 'refer_share_form'\n};\n\n// 获取 pv, impr, click 特有的参数\nexport const getTransformKeyParams = () => {\n  const query = parseQuery(location.search);\n  let params = CHANNEL_KEYS.reduce((params, key) => {\n    if(query[key]) {\n      params['refer_channel_' + key] = query[key];\n    }\n    return params;\n  }, {});\n\n  params = REFER_SHARE_KEYS.reduce((params, key) => {\n    const value = query[key] || query[key.slice(0, 6)];\n    if(value) {\n      params[key] = value;\n    }\n\n    return params;\n  }, params);\n\n  // 短key映射为长key\n  for(const key in REFER_SHARE_SHORT_MAP) {\n    const value = query[key];\n    if(value) {\n      const referKey = REFER_SHARE_SHORT_MAP[key];\n      params[referKey] = value;\n    }\n  }\n  return params;\n};\n\n// 获取query的参数\nexport const getQueryParams = (isPv) => {\n  const query = parseQuery(location.search);\n  const result = query.is_back === '1' ? { is_back: '1' } : {};\n  const msgId = query.refer_channel_msgid || query.msgid; // add msgid\n  if(msgId) {\n    result.refer_channel_msgid = msgId;\n  }\n\n  if(isPv) {\n    Object.entries(query).forEach(([key, value]) => {\n      if(key.indexOf('_p_') === 0) {\n        result[key] = value;\n      }\n    });\n  }\n\n  return result;\n};\n\n/*\nexport const getErrorParams = (params) => {\n  /!* 针对op=real_error做特殊处理 测试新的接口及参数标准*!/\n  // 针对参数做一些处理主要是发送值q的处理\n  if(params.status_code) {\n    params.payload ? params.payload.status_code = params.status_code : params.payload = { status_code: params.status_code };\n    delete params.status_code;\n  }\n  if(params.error_message) {\n    params.error_msg = params.error_message;\n    delete params.error_message;\n  }\n  if(params.params) {\n    params.payload ? params.payload.params = params.params : params.payload = { params: params.params };\n    delete params.params;\n  }\n  if(params.sub_op) {\n    params.payload ? params.payload.sub_op = params.sub_op : params.payload = { sub_op: params.sub_op };\n    delete params.sub_op;\n  }\n  if(params.debug_url) {\n    params.payload ? params.payload.debug_url = params.debug_url : params.payload = { debug_url: params.debug_url };\n    delete params.debug_url;\n  }\n  params.log_version = '1.0.0';\n  return JSON.stringify(params);\n};\n*/\n\nfunction getAppID(config) {\n  switch(getCurrentPlatform().platform) {\n    case PLATFORM.WeChat:\n      return config.AppID.WeChat;\n    case PLATFORM.QQ:\n      return config.AppID.QQConnect;\n  }\n  return '';\n}\n\n/**\n * 生成验签标记\n */\nconst rkTagCntMap = {};\n\nfunction getDcf(timestamp, vds, op) {\n  const dsk = vds.substr(0, 28);\n  const dst = vds.substr(28);\n  if(!rkTagCntMap[op]) {\n    rkTagCntMap[op] = 1;\n  }\n  const ckv = crc32(`${timestamp}${op}${dst}${rkTagCntMap[op]}`);\n  const dcf = `${dsk}.${rkTagCntMap[op]}.${ckv}`;\n  rkTagCntMap[op]++;\n  return dcf;\n}\n","/**\n * @file index.js 打点上报模块\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { conflictWarning } from './conflictWarning';\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { buildQuery } from '@pdd/core-util';\n\nconst isDev = process.env.NODE_ENV === 'development';\n\nexport const getDefaultReporter = () => {\n  const { isNativePlatform, isTinyNativePlatform } = getCurrentPlatform();\n  return isNativePlatform || isTinyNativePlatform ? nativeReporter : browserReporter;\n};\n\nexport const browserReporter = (url, params) => {\n  isDev && conflictWarning(params, 'support_beacon');\n\n  try {\n    // 支持beacon的用beacon，不支持或者发送失败的用ajax再试一次\n    if(typeof window.navigator.sendBeacon === 'function') {\n      params.support_beacon = 1;\n      if(window.navigator.sendBeacon(url, buildQuery(params))) {\n        return;\n      }\n    }\n\n    const http = new XMLHttpRequest();\n    http.open('POST', url, true);\n    http.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8');\n    http.withCredentials = true;\n    http.send(buildQuery(params));\n  } catch (e) {\n    handleReporterError(e);\n  }\n};\n\nexport const nativeReporter = (url, params) => {\n  isDev && conflictWarning(params, 'use_AMAnalytics');\n\n  const platform = getCurrentPlatform();\n  const useAMAnalytics = platform.isTinyNativePlatform || platform.statisfy('4.45.0', '4.33.0', 'greaterThanEqual');\n\n  if(useAMAnalytics) {\n    params = flatObject(params);\n    params.use_AMAnalytics = 1;\n\n    return invokeBridgeCallNativeFun('AMAnalytics', 'send', { url, value: params }).catch(handleReporterError);\n  }\n\n  return invokeBridgeCallNativeFun('JSNetwork', 'request', {\n    method: 'POST',\n    url,\n    headers: { 'Content-Type': 'text/plain;charset=UTF-8' },\n    data: buildQuery(params)\n  }).catch(handleReporterError);\n};\n\nfunction handleReporterError(e) {\n  console.error('@pdd/metrics#onReporterError', e);\n}\n\n// AMAnalytics下要拍平嵌套的object\nfunction flatObject(params) {\n  return Object.entries(params).reduce((result, [key, value]) => {\n    if(value !== null) {\n      result[key] = typeof value === 'object' ? JSON.stringify(value) : value;\n    }\n    return result;\n  }, {});\n}\n","/**\n * @file index.js 入口文件\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport app from '@pdd/configs/app';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport {\n  getBasicEnvParams,\n  getPageManagerParams,\n  getTransformKeyParams,\n  getQueryParams,\n  getRiskControlParams\n} from './util';\nimport { getDefaultReporter } from './reporters';\nimport { conflictWarning } from './conflictWarning';\n\n/**\n * @typedef {function(url : string, params : Object) : any} MetricReporter\n */\n\nconst config = process.env.BROWSER && app.get(location.host);\nconst isDev = process.env.NODE_ENV === 'development';\n\nconst defaultParams = {};\n/**\n * 设置默认上报参数\n *\n * @param {Object} params 上报参数对象\n */\nexport const setDefaultParams = (params) => {\n  Object.assign(defaultParams, params);\n};\n\n/**\n * 发送埋点信息\n *\n * @param {Object} payload 埋点参数\n * @param {MetricReporter} [reporter] 自定义上报函数，默认为埋点库内置策略发送\n * @return {Promise<void>}\n */\nexport const sendMetrics = async (payload, reporter = getDefaultReporter()) => {\n  payload = payload || {};\n  const op = payload.op;\n  // pv, impr, click需要多拿些信息\n  payload = await getCompositeParams(payload, op === 'pv');\n\n  const basicParams = await getBasicEnvParams(config);\n  const riskParams = getRiskControlParams(basicParams.time, op || '');\n\n  if(isDev) {\n    conflictWarning(payload, ...Object.keys(basicParams), ...Object.keys(riskParams), ...Object.keys(defaultParams));\n  }\n\n  payload = { ...defaultParams, ...payload, ...basicParams, ...riskParams };\n\n  return reporter(resolveLogURL(payload, config), payload);\n};\n\n/**\n * 发送pv埋点信息\n *\n * @param {Object} payload 埋点参数\n * @param {MetricReporter} [reporter] 自定义上报函数，默认为埋点库内置策略发送\n * @return {Promise<void>}\n */\nexport const sendPageViewMetrics = (payload = {}, reporter) => {\n  return sendMetrics({ ...payload, op: 'pv' }, reporter);\n};\n\n/**\n * 发送曝光埋点信息\n *\n * @param {Object} payload 埋点参数\n * @param {MetricReporter} [reporter] 自定义上报函数，默认为埋点库内置策略发送\n * @return {Promise<void>}\n */\nexport const sendImprMetrics = (payload = {}, reporter) => {\n  return sendMetrics({ ...payload, op: 'impr' }, reporter);\n};\n\n/**\n * 发送点击埋点信息\n *\n * @param {Object} payload 埋点参数\n * @param {MetricReporter} [reporter] 自定义上报函数，默认为埋点库内置策略发送\n * @return {Promise<void>}\n */\nexport const sendClickMetrics = (payload = {}, reporter) => {\n  return sendMetrics({ ...payload, op: 'click' }, reporter);\n};\n\n// 获取页面信息参数\nconst getCompositeParams = async (payload, isPv) => {\n  const pageParams = await getPageManagerParams();\n  const result = {\n    ...pageParams,\n    ...getTransformKeyParams(),\n    ...getQueryParams(isPv)\n  };\n\n  if(isPv) {\n    // 强制把页面pv的event改成page_show, 弹窗的pv需要吧op都改成event\n    result.event = 'page_show';\n    result.page_url = location.href;\n  }\n\n  if(isDev) {\n    conflictWarning(payload, ...Object.keys(result));\n  }\n\n  return Object.assign(result, payload);\n};\n\nlet isInit = false;\nlet enterTime = Date.now();\n\n/**\n * 初始化全局埋点信息（epv，iframe劫持）\n *\n * @param {MetricReporter} [reporter] 自定义上报函数，默认为埋点库内置策略发送\n */\nexport const initGlobalMetrics = (reporter) => {\n  if(isInit) {\n    console.warn('initGlobalMetrics has been called');\n    return;\n  }\n\n  if(!getCurrentPlatform().isNativePlatform) {\n    // 微信浏览器下只能通过unload，去打点\n    window.addEventListener('unload', () => {\n      sendMetrics(\n        {\n          op: 'epv',\n          sub_op: 'leave',\n          enter_time: enterTime,\n          close_time: Date.now()\n        },\n        reporter\n      );\n    });\n\n    // 添加visibilitychange，onbeforeunload打点\n    if(typeof document.hidden !== 'undefined') {\n      document.addEventListener('visibilitychange', () => {\n        if(document.hidden) {\n          sendMetrics(\n            {\n              op: 'epv',\n              sub_op: 'leave',\n              enter_time: enterTime\n            },\n            reporter\n          );\n        } else {\n          enterTime = Date.now();\n        }\n      });\n    }\n  }\n\n  isInit = true;\n};\n\nfunction resolveLogURL(params, config) {\n  const logUrl = config.httpsLoggingURL;\n  const logRoutes = config.httpsLogRoutes;\n\n  // 广告独立打点 https://jira2.corp.yiran.com/browse/PDD-23372 打点请求，包含 ad 字段\n  // 打点请求，op 字段为 impr 或 click\n  // 忽略盘多多和胡桃街\n  const routeKey = params.ad && ['click', 'impr'].includes(params.op) ? 'ad' : params.op;\n\n  return logRoutes[routeKey] || logUrl;\n}\n","/**\n * @file 埋点代码，白屏、首屏，需要ssr直出以下script\n * @author samoye\n */\n\nimport React, { PureComponent } from 'react';\nimport { firstScreen, pageStartStr, firstPaintStr, firstScreenStr, pageEndStr } from './statistics';\n\n/**\n * 打点开始，加在<head>开始后\n */\nexport const PageStart = () => (\n    <script\n        dangerouslySetInnerHTML={{\n            __html: pageStartStr,\n        }}\n    />\n);\n\n/**\n * 白屏，加在</head>结束前或<body>开始后\n */\nexport const FirstPaint = () => (\n    <script\n        dangerouslySetInnerHTML={{\n            __html: firstPaintStr,\n        }}\n    />\n);\n\n/**\n * 首屏，加在首屏最后一个节点后\n */\nexport class FirstScreen extends PureComponent {\n    componentDidMount() {\n        if (!window._plt.fs) {\n            firstScreen(); // 给csr渲染用的\n        }\n    }\n\n    render() {\n        return (\n            <script\n                dangerouslySetInnerHTML={{\n                    __html: firstScreenStr,\n                }}\n            />\n        );\n    }\n}\n\n/**\n * 打点结束，加载</body>前\n */\nexport const PageEnd = () => (\n    <script\n        dangerouslySetInnerHTML={{\n            __html: pageEndStr,\n        }}\n    />\n);\n","/**\n * @file 埋点代码，白屏、首屏, 不要使用需要polyfill的方法！！！！！\n * @author samoye\n */\n\nimport { pageStartStr, firstPaintStr, firstScreenStr, pageEndStr } from './statisticsStr';\n\nconst pageStart = function () {\n    (function (window) {\n        const plt = (window._plt = window._plt || []);\n        plt.push(['tm', 'ps', +new Date()]);\n        const requestAnimationFrame =\n            window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.setTimeout;\n        requestAnimationFrame(function () {\n            plt.push(['tm', 'fraf', +new Date()]);\n        });\n    })(window);\n};\n\nconst firstPaint = function () {\n    (function (window) {\n        const plt = (window._plt = window._plt || []);\n        plt.push(['tm', 'fp', +new Date()]);\n\n        document.addEventListener('DOMContentLoaded', function () {\n            plt.push(['tm', 'dr', +new Date()]);\n        });\n\n        window.addEventListener('load', function () {\n            plt.push(['tm', 'ld', +new Date()]);\n        });\n    })(window);\n};\n\nconst firstScreen = function () {\n    (function (window, document) {\n        const plt = (window._plt = window._plt || []);\n        plt.fs = plt.fs || true; // 打个fs标记用于ssr的时候判断不再走这个函数\n        const key = 'fsn';\n        const type = 'tm';\n        const loadEvent = 'load';\n        const errorEvent = 'error';\n\n        let latestTime = +new Date();\n        plt.push([type, key, latestTime]);\n\n        const imgs = document.getElementsByTagName('img');\n        const height = document.documentElement.clientHeight;\n        const fsItems = [];\n        const isLoad = document.readyState === 'complete';\n\n        const onLoad = function () {\n            for (let i = 0; i < fsItems.length; i++) {\n                const item = fsItems[i];\n                const top = item.img.getBoundingClientRect().top || 0;\n                if (top + item.img.height > 0 && height > top) {\n                    latestTime = Math.max(item.time, latestTime);\n                }\n            }\n            plt.push([type, 'fs', latestTime]);\n        };\n\n        function check() {\n            let ready = true;\n\n            for (let i = 0; i < fsItems.length; i++) {\n                ready = ready && fsItems[i].time;\n                if (!ready) {\n                    return;\n                }\n            }\n\n            onLoad();\n        }\n\n        for (let i = 0; i < imgs.length; i++) {\n            const img = imgs[i];\n\n            // android 浏览器存在bug当img.src不存在的时候img.complete初始是false过会儿才会变为true,所以增加一下判断src是否存在\n            if (!img.complete && img.src) {\n                const item = {\n                    img,\n                };\n\n                const load = function () {\n                    this.removeEventListener(loadEvent, load, false);\n                    this.removeEventListener(errorEvent, load, false);\n                    item.time = +new Date();\n                    isLoad && check();\n                };\n\n                img.addEventListener(loadEvent, load, false);\n                img.addEventListener(errorEvent, load, false);\n                fsItems.push(item);\n            }\n        }\n\n        if (isLoad) {\n            check();\n        } else {\n            window.addEventListener(loadEvent, onLoad);\n        }\n\n        window.__fsImgItems = fsItems;\n        window.__fsImgSrcs = fsItems.map((i) => i.img.src);\n    })(window, document);\n};\n\nconst pageEnd = function () {\n    // eslint-disable-next-line no-unused-vars\n    (function (window) {\n        // const plt = window._plt = window._plt || [];\n        // plt.push(['tm', 'dr', +new Date()]);\n    })(window);\n};\n\nexport { pageStartStr, firstPaintStr, firstScreenStr, pageEndStr, pageStart, firstPaint, firstScreen, pageEnd };\n","export const pageStartStr = '!function(t){var e=t._plt=t._plt||[];e.push([\"tm\",\"ps\",+new Date]),(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.setTimeout)(function(){e.push([\"tm\",\"fraf\",+new Date])})}(window);!function(){if(\"PerformanceLongTaskTiming\" in window){var g=window.__tti={e:[]};g.o=new PerformanceObserver(function(l){g.e=g.e.concat(l.getEntries())});g.o.observe({entryTypes:[\"longtask\"]})}}();!function(){var e,t,n,i,r={passive:!0,capture:!0},a=new Date,o=function(){i=[],t=-1,e=null,f(addEventListener)},c=function(i,r){e||(e=r,t=i,n=new Date,f(removeEventListener),u())},u=function(){if(t>=0&&t<n-a){var r={entryType:\"first-input\",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};i.forEach((function(e){e(r)})),i=[]}},s=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,t){var n=function(){c(e,t),a()},i=function(){a()},a=function(){removeEventListener(\"pointerup\",n,r),removeEventListener(\"pointercancel\",i,r)};addEventListener(\"pointerup\",n,r),addEventListener(\"pointercancel\",i,r)}(t,e):c(t,e)}},f=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(t){return e(t,s,r)}))},p=\"hidden\"===document.visibilityState?0:1/0;addEventListener(\"visibilitychange\",(function e(t){\"hidden\"===document.visibilityState&&(p=t.timeStamp,removeEventListener(\"visibilitychange\",e,!0))}),!0);o(),self.webVitals={firstInputPolyfill:function(e){i.push(e),u()},resetFirstInputPolyfill:o,get firstHiddenTime(){return p}}}();'\nexport const firstPaintStr = '!function(t){var n=t._plt=t._plt||[];n.push([\"tm\",\"fp\",+new Date]),document.addEventListener(\"DOMContentLoaded\",function(){n.push([\"tm\",\"dr\",+new Date])}),t.addEventListener(\"load\",function(){n.push([\"tm\",\"ld\",+new Date])})}(window);'\nexport const firstScreenStr = '!function(e,t){var n=e._plt=e._plt||[];n.fs=n.fs||!0;var r=+new Date;n.push([\"tm\",\"fsn\",r]);var i=t.getElementsByTagName(\"img\"),a=t.documentElement.clientHeight,m=[],o=\"complete\"===t.readyState,s=function(){for(var e=0;e<m.length;e++){var t=m[e],i=t.img.getBoundingClientRect().top||0;i+t.img.height>0&&a>i&&(r=Math.max(t.time,r))}n.push([\"tm\",\"fs\",r])};function f(){for(var e=!0,t=0;t<m.length;t++)if(!(e=e&&m[t].time))return;s()}for(var g=0;g<i.length;g++){var v=i[g];!v.complete&&v.src&&function(){var e={img:v},t=function t(){this.removeEventListener(\"load\",t,!1),this.removeEventListener(\"error\",t,!1),e.time=+new Date,o&&f()};v.addEventListener(\"load\",t,!1),v.addEventListener(\"error\",t,!1),m.push(e)}()}o?f():e.addEventListener(\"load\",s),e.__fsImgItems=m,e.__fsImgSrcs=m.map(function(e){return e.img.src})}(window,document);'\nexport const pageEndStr = 'window;'","/**\n/**\n * @file lib/index.js 封装了js与app之间通信(pinbridge)模块\n * @author fengchenyue(fengchenyue@pinduoduo.com)\n */\nimport { getPlatform, compareVersion, PLATFORM } from '@pdd/platform-util';\nimport pinbridge from '@pdd/pinbridge';\n\nlet platformInstance,\n  appVersion,\n  isIOS,\n  isAndroid,\n  navigationModule,\n  cipherModule,\n  contactsModule,\n  getPageVisibilityPromise;\nconst deferedPromise = { fullfilled: false };\nlet setPageContextPromise = new Promise((res, rej) => {\n  deferedPromise.resolve = res;\n  deferedPromise.reject = rej;\n});\n\nconst META_MODULE = 'JSMeta';\nconst STORAGE_MODULE = 'AMStorage';\nconst SHARE_MODULE = 'AMShare';\nconst DEVICE_MODULE = 'AMDevice';\nconst UI_CONTROL_MODULE = 'JSUIControl';\nconst GOODS_DETAIL_CONFIG_MODULE = 'PDDGoodsDetailConfig';\nconst LAUNCH_INFO_MODULE = 'PDDLaunchInfo';\nconst AUDIO_MODULE = 'PDDAudio';\nconst AGREEMENT_MODULE = 'AMAgreement';\nconst WEB_SCENE_MODULE = 'WebScene';\nconst KEYBOARD_MODULE = 'JSKeyboard';\nconst CAPTCHA_AUTH_MODULE = 'PDDCaptchaAuth';\nconst SERVICE_MANAGER_MODULE = 'PDDServiceManager';\nconst FEEDBACK_MODULE = 'JSFeedback';\nconst USER_MODULE = 'AMUser';\nconst AB_TEST_MODULE = 'PDDABTest';\nconst USER_NOTIFICATION_MODULE = 'AMUserNotification';\nconst LOGGER_MODULE = 'JSLogger';\nconst PDD_POPUP_MAMAGER = 'PDDPopupManager';\n\nif (process.env.BROWSER) {\n  platformInstance = getPlatform(window.navigator.userAgent);\n  appVersion = platformInstance.version;\n  isIOS = PLATFORM.PddIOS === platformInstance.platform;\n  isAndroid =\n    PLATFORM.PddAndroid === platformInstance.platform || PLATFORM.PDDTinyAndorid === platformInstance.platform;\n  navigationModule = compareVersion(appVersion, '4.80.0') >= 0 ? 'JSNavigation' : 'AMNavigator';\n  cipherModule = compareVersion(appVersion, '4.53.0') >= 0 ? 'JSCipher' : STORAGE_MODULE;\n  contactsModule = compareVersion(appVersion, '4.14.0') >= 0 ? 'PDDContacts' : 'AMContacts';\n}\n\nconst errorMessage = {\n  env: (moduleName, funcName) => {\n    return `请检查当前环境，${moduleName} ${funcName}接口需要在原生App环境中使用。`;\n  }\n};\n\n/**\n * @typedef {Object} Meta\n * @property {string} min_version 最小版本\n * @property {string} min_version 最小版本\n * @property {string} chat_service 聊天服务地址\n * @property {string} system_version 系统版本\n * @property {string} pdd_personal_version 个人中心包版本\n * @property {string} version 应用版本\n * @property {string} app_domain app域\n * @property {string} api_domain api域\n * @property {string} in_review_version 当前应用版本\n * @property {string} pdd_web_version 组件包版本\n * @property {string} pdd_group_version 团页面包版本\n * @property {string} pdd_market_version 市场包版本\n * @property {string} cur_version 最小支持版本\n * @property {string} build 应用build\n */\n\n/**\n * @typedef {Object} callbackData\n * @property {number} errorCode C端Pinbridge返回错误码，0：调用成功，60000：调用失败，60001：模块未定义，60002：方法未定义，60003：无效参数，\n * 60005(仅iOS)：用户拒绝，60006(仅iOS)：用户取消，60008(仅iOS)：不支持\n */\n\n/**\n * 对调用pinbridge内部decodeFunctions方法的封装\n *\n * @param {Object} params 接口参数对象\n */\nexport function invokeBridgeDecodeFuncs(params) {\n  if (process.env.BROWSER) {\n    pinbridge.decodeFunctions(params);\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(errorMessage.env('pinbridge', 'decodeFunctions'));\n    }\n  }\n}\n\n/**\n * 对调用pinbridge内部callNative方法的封装\n *\n * @param {string} moduleName 模块名\n * @param {string} funcName 模块函数名\n * @param {Object} [params] 模块函数参数对象\n * @param {string} [minAndroidVer] 最小android支持版本号\n * @param {string} [minIOSVer] 最小ios支持版本号\n * @param {Boolean} [reportWhenTimeout=true] 1s超时还没回调是否做打点上报\n * @return {Promise} 返回Promise\n */\nexport function invokeBridgeCallNativeFun(\n  moduleName,\n  funcName,\n  params = null,\n  minAndroidVer,\n  minIOSVer,\n  reportWhenTimeout = true\n) {\n  if (isIOS || isAndroid) {\n    const minVersion = isAndroid && minAndroidVer ? minAndroidVer : isIOS && minIOSVer ? minIOSVer : '';\n    if (minVersion && compareVersion(appVersion, minVersion) < 0) {\n      const message = `请检查App版本号，${moduleName} ${funcName}接口最小支持版本号：${minVersion}。`;\n      const error = new Error(message);\n      error.errorType = 'version_error';\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(message);\n      }\n      return Promise.reject(error);\n    }\n    const timeout = time => {\n      const ignoredApi = [\n        'JSNetwork:request',\n        'JSShare:queryShareTypes',\n        'JSShare:performShare',\n        'JSNotification:register',\n        'JSNavigation:forward',\n        'AMAnalytics:send',\n        'PDDHighLayerManager:getPageInitData',\n        'WebScene:getPageShownType',\n        'JSPhoto:getV2',\n        'AMAlert:showAlert',\n        'JSAlert:showAlert',\n        'JSPay:pay'\n      ];\n      const ignoreModule = ['JSReporter'];\n      if (!ignoredApi.includes(`${moduleName}:${funcName}`) && !ignoreModule.includes(moduleName)) {\n        return setTimeout(() => {\n          const longTimeCallError = new Error(`call native ${moduleName}:${funcName} cost over ${time}ms`);\n          throw longTimeCallError;\n        }, time);\n      }\n    };\n    const timeoutId = reportWhenTimeout && timeout(1000);\n    return new Promise((resolve, reject) => {\n      pinbridge.callNative(\n        moduleName,\n        funcName,\n        params,\n        data => {\n          timeoutId && clearTimeout(timeoutId);\n          resolve(data);\n        },\n        (data, errorCode) => {\n          timeoutId && clearTimeout(timeoutId);\n          const error = new Error(`callNative ${moduleName} ${funcName} error: ${errorCode}`);\n          error.errorCode = errorCode;\n          error.params = params;\n          error.data = data;\n          error.toJSON = function () {\n            return {\n              errorCode: this.errorCode,\n              params: this.params,\n              data: this.data\n            };\n          };\n          reject(error);\n        }\n      );\n    });\n  } else {\n    const message = errorMessage.env(moduleName, funcName);\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(message);\n    }\n    return Promise.reject(new Error(message));\n  }\n}\n\n/**\n * 获取应用元信息，结果返回字段解释见类型定义Meta\n *\n * @return {Promise<Meta>} 返回Promise\n */\nexport function getMeta() {\n  return invokeBridgeCallNativeFun(META_MODULE, 'get');\n}\n\n/**\n * 取剪贴板内容\n *\n * @return {Promise<{text: string}>} 返回取剪贴板内容的Promise\n */\nexport function getPasteBoard() {\n  return invokeBridgeCallNativeFun(STORAGE_MODULE, 'getPasteboard');\n}\n\n/**\n * 设置粘贴板内容\n *\n * @param {Object} params 接口参数\n * @param {string} params.text 粘贴内容\n * @return {Promise} 返回Promise\n */\nexport function setPasteBoard(params) {\n  return invokeBridgeCallNativeFun(STORAGE_MODULE, 'setPasteboard', params);\n}\n\n/**\n * 设置粘贴板(有口令业务)\n *\n * <4.53.0的版本继续使用JSStorage.setPasteboard\n * >=4.53.0的版本使用新的JSCipher.setPasteboard\n *\n * @param {Object} params 接口参数\n * @param {string} params.text 粘贴内容\n * @return {Promise} 返回Promise\n */\nexport function setPasteBoardKL(params) {\n  return invokeBridgeCallNativeFun(cipherModule, 'setPasteboard', params);\n}\n\n/**\n * 把一个内容存在app的缓存区里, value会进行JSON.stringify\n *\n * @deprecated 即将废弃，请使用setStorage方法\n * @param {Object} params 接口参数\n * @param {string} params.key 存储的key\n * @param {string} params.value 存储的值\n * @return {Promise} 返回Promise\n */\nexport function setNativeStorage({ key, value }) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('setNativeStorage即将废弃，请使用setStorage方法');\n  }\n  return setStorage(key, value);\n}\n\n/**\n * 从app的缓存中按照key取出结果\n *\n * @deprecated 即将废弃，请使用getStorage方法\n * @param {Object} params 接口参数\n * @param {string} params.key 存储的key\n * @return {Promise<{value: string}>} 返回缓存结果的Promise\n */\nexport function getNativeStorage(params) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('getNativeStorage即将废弃，请使用getStorage方法');\n  }\n  return getStorage(params.key);\n}\n\n/**\n * 把一个内容存在app的缓存区里, value会进行JSON.stringify\n *\n * @param {string} key 存储的key\n * @param {string | Object} value 存储的值\n * @return {Promise} 返回Promise\n */\nexport function setStorage(key, value) {\n  try {\n    value = JSON.stringify(value);\n  } catch (e) {\n    const message = 'setNativeStorage接口参数value值序列化失败';\n    return Promise.reject(new Error(message));\n  }\n  return invokeBridgeCallNativeFun(STORAGE_MODULE, 'set', { key, value });\n}\n\n/**\n * 从app的缓存中按照key取出结果\n *\n * @param {string} key 存储的key\n * @return {Promise<{value: string | Object}>} 返回缓存结果的Promise\n */\nexport function getStorage(key) {\n  return invokeBridgeCallNativeFun(STORAGE_MODULE, 'get', { key }).then((data = {}) => {\n    if (typeof data.value !== 'undefined') {\n      try {\n        return JSON.parse(data.value);\n      } catch (e) {\n        const message = 'getNativeStorage接口value值序列化失败';\n        throw new Error(message);\n      }\n    }\n    return data;\n  });\n}\n\n/**\n * 显示分享页面，最小支持版本 4.52.0\n *\n * @param {Object} params 分享所需参数\n * @param {string} params.title 标题\n * @param {string} params.message 描述\n * @param {string} params.thumb_url 缩略图\n * @param {string} params.share_url 分享链接\n * @param {string} [params.page_sn] 可选，用于分享埋点，如果不传会自动获取\n * @param {string} [params.page_el_sn] 可选，用于分享埋点，如果不传则不会上报该字段\n * @param {Object} params.cipher_content CIPHER分享文案参数\n * @param {Object} params.cipher_window CIPHER 弹窗参数\n * @param {Array} params.hint 提示文本，富文本格式，目前包含text、color，支持版本 4.55+\n * @param {Object} params.hint[0] { \"text\": \"分享成功后即可\", \"color\": \"#FFFFFF\" }，text表示文本内容，color使用rgb格式的hex string表示，如果不传默认为白色\n * @param {string} params.disabled_channels 强制禁用的分享渠道，0 微信会话 1 朋友圈 2 QQ会话 3 QQ空间 4 拷贝链接 5 保存图片 6 好友 7 拼小圈\n * @param {function(error : string, result: Object) : void} params.share_callback error是分享的错误，result.channel是分享渠道，渠道定义同disabled_channels，result.share_type是分享类型，定义同share，支持版本 4.53+\n * @return {Promise} 返回Promise\n */\nexport function showSharePage(params) {\n  return invokeBridgeCallNativeFun(SHARE_MODULE, 'showSharePage', params, '4.52.0', '4.52.0', false);\n}\n\n/**\n * 获取当前第三方的AppId，android最小支持版本 4.49.0，ios最小支持版本 4.51.0\n *\n * @param {Object} params 参数对象\n * @param {Array}  params.channels [1, 2, 3] 数组中是第三方app的type，1是微信，2是QQ，3是微博\n * @return {Promise<map>} 返回字典Promise，key是type，与请求对应，value是appId\n */\nexport function venderAppIds(params) {\n  return invokeBridgeCallNativeFun(SHARE_MODULE, 'venderAppIds', params, '4.49.0', '4.51.0');\n}\n\n/**\n * 短振动，最小支持版本 4.29.0\n *\n * @return {Promise>} 返回Promise\n */\nexport function vibrateShort() {\n  return invokeBridgeCallNativeFun(DEVICE_MODULE, 'vibrateShort', null, '4.29.0', '4.29.0');\n}\n\n/**\n * 长振动，最小支持版本 4.29.0\n *\n * @return {Promise} 返回Promise\n */\nexport function vibrateLong() {\n  return invokeBridgeCallNativeFun(DEVICE_MODULE, 'vibrateLong', null, '4.29.0', '4.29.0');\n}\n\n/**\n * 获取电量信息，最小支持版本 4.48.0\n *\n * @return {Promise<{level: number, isLowPowerMode: boolean, isCharging:boolean}>} 返回电量信息Promise\n * level：电量，isLowPowerMode：是否是低电量模式(iOS9以上，iPhone），isCharging：是否在充电\n */\nexport function getBatteryInfo() {\n  return invokeBridgeCallNativeFun(DEVICE_MODULE, 'getBatteryInfo', null, '4.48.0', '4.48.0');\n}\n\n/**\n * 禁用手势左滑操作，最小支持版本 4.30.0\n *\n * @return {Promise} 返回Promise\n */\nexport function disableSwipeBack() {\n  return invokeBridgeCallNativeFun(UI_CONTROL_MODULE, 'disableSwipeBack', null, '4.30.0', '4.30.0');\n}\n\n/**\n * 启用手势左滑操作，最小支持版本 4.30.0\n *\n * @return {Promise} 返回Promise\n */\nexport function enableSwipeBack() {\n  return invokeBridgeCallNativeFun(UI_CONTROL_MODULE, 'enableSwipeBack', null, '4.30.0', '4.30.0');\n}\n\n/**\n * 设置当前页面标题\n *\n * @param {Object} params 接口参数\n * @param {string} params.title 标题\n * @param {string} [params.title_color] 标题颜色（目前是必填，不填标题为透明色）\n * @param {string} [params.img] icon的base64str\n * @param {number} [params.img_width] icon宽度\n * @param {number} [params.img_height] icon高度\n * @param {boolean} [params.hide_line] 是否隐藏标题栏下方的细线\n * @param {string} [params.font_weight] 字体粗细, 取值regular(默认) medium bold, 后面2者是不同的粗度，android上后两者没区别， 4.50.0+版本支持\n *\n * @return {Promise} 返回Promise\n */\nexport function setTitle(params) {\n  return invokeBridgeCallNativeFun(UI_CONTROL_MODULE, 'setTitle', params);\n}\n\n/**\n * 设置富文本标题，Android最小支持版本 4.29.0，iOS最小支持版本 4.28.0\n *\n * @param {Object} params 接口参数\n * @param {Array} params.desc 标题数组\n * @param {Object} params.desc[0]\n * @param {string} params.desc[0].img 标题icon链接\n * @param {number} params.desc[0].width icon宽度\n * @param {number} params.desc[0].height icon高度\n * @param {number} [params.desc[0].y_offset] icon位移\n * @param {Array} [params.desc[0].margin] 间距，如[10, 0, 10, 0]\n * @param {Object} params.desc[1]]\n * @param {string} params.desc[1].txt 标题文案\n * @param {string} params.desc[1].color 标题颜色，如#000000\n * @param {number} params.desc[1].font 标题大小\n * @param {number} [params.desc[1].y_offset] 标题位移\n * @param {string} [params.desc[1].text_style] 标题样式，如bold\n * @param {boolean} [params.hide_line] 是否隐藏标题栏下方的细线\n *\n * @return {Promise} 返回Promise\n */\nexport function setRichTitle(params) {\n  return invokeBridgeCallNativeFun(UI_CONTROL_MODULE, 'setRichTitle', params);\n}\n\n/**\n * 自定义后退按钮行为\n *\n * @param {Object} params 接口参数\n * @param {function} params.callback js回调函数，点击后退按钮时，会触发这个回调，js在这个回调函数中自定义后退行为\n * @return {Promise} 返回Promise\n */\nexport function setBackButton(params) {\n  return invokeBridgeCallNativeFun(UI_CONTROL_MODULE, 'setBackButton', params);\n}\n\n/**\n * 设置导航栏上右边按钮，比如APP的刷新和分享按钮\n *\n * @param {Object} params 接口参数\n * @param {Array} params.buttons 每个元素描述一个按钮的属性。注意对于左边的按钮，顺序从左到右，并且由接口设置的按钮，有可能跟在后退按钮和关闭后面；对于右边的按钮，顺序从右到左\n * @param {number} params.buttons[0].size 按钮大小，不传则使用默认值\n * @param {Object} params.buttons[0].icons 设置按钮背景，{ normal: 正常态图片的URL，可以是File URL或者Data URL，暂时不支持HTTP协议的URL, highlighted: 高亮图片URL, disabled: 禁用URL }\n * @param {function} params.buttons[0].callback 按钮点击回调\n * @return {Promise} 返回Promise\n */\nexport function setRightBarButtons(params) {\n  return invokeBridgeCallNativeFun(UI_CONTROL_MODULE, 'setRightBarButtons', params);\n}\n\n/**\n * 页面下拉刷新，最小支持版本 4.1.0\n *\n * @param {Object} params 接口参数\n * @param {boolean} [params.enable = true] 是否使用下拉刷新，true：使用，false：不使用\n * @return {Promise} 返回Promise\n */\nexport function setupPullReload(params = { enable: true }) {\n  return invokeBridgeCallNativeFun(\n    UI_CONTROL_MODULE,\n    params.enable ? 'enablePullReload' : 'disablePullReload',\n    null,\n    '4.1.0',\n    '4.1.0'\n  ).catch(error => {\n    if (error.errorType !== 'version_error') {\n      throw error;\n    }\n  });\n}\n\n/**\n * 设置下拉刷新，android最小支持版本 4.64.0，ios最小支持版本 4.56.0\n *\n * iOS 中type为1、2时下拉和上拉都有回弹效果，type为0时下拉和上拉都没有回弹效果。\n * Android 中type为1时和目前下拉刷新状态一致，不带有fling的回弹效果；\n * 当状态为2时，Android仅在用户滑动到顶部/底部后，仍然继续拖动时触发回弹的效果。并且不支持fling时的回弹。\n *\n * @param {Object} params 接口参数\n * @param {boolean} params.type 0-禁止下拉刷新，1-开启下拉刷新，2-不展示下拉刷新控件，但有回弹效果\n * @return {Promise} 返回Promise\n */\nexport function setHeaderRefresh(params) {\n  return invokeBridgeCallNativeFun(UI_CONTROL_MODULE, 'setHeaderRefresh', params, '4.64.0', '4.56.0');\n}\n\n/**\n * 更新多多进宝参数，android最小支持版本 4.47.0，ios最小支持版本 4.48.0\n *\n * @param {Object} params 多多进宝参数\n * @param {number} params.expiredTime 过期时间(秒级)\n * @param {string} params.cpsSign  推手信息\n * @param {number} params.duoduoType 单双人团\n * @param {number} params.type 关联订单类型会用到\n * @param {string} params.goodsId 多多进宝领券商品ID\n * @return {Promise} 返回Promise\n */\nexport function updateDDJBParams(params) {\n  return invokeBridgeCallNativeFun(GOODS_DETAIL_CONFIG_MODULE, 'updateDDJBParams', params, '4.47.0', '4.48.0');\n}\n\n/**\n * 获取多多进宝参数，android最小支持版本 4.47.0，ios最小支持版本 4.48.0\n *\n * @param {Object} params 多多进宝参数\n * @param {number} params.expiredTime 过期时间(秒级)\n * @param {string} params.cpsSign  推手信息\n * @param {number} params.duoduoType 单双人团\n * @param {number} params.type 关联订单类型会用到\n * @param {string} params.goodsId 多多进宝领券商品ID\n * @return {Promise} 返回Promise\n */\nexport function getDDJBParams(params) {\n  return invokeBridgeCallNativeFun(GOODS_DETAIL_CONFIG_MODULE, 'getDDJBParams', params, '4.47.0', '4.48.0');\n}\n\n/**\n * 查询启动来源应用，最小支持版本 4.52.0\n *\n * @return {Promise<{source_application: string, MD5: string}>} 返回启动来源应用Promise\n * source_application：iOS为对应的BundleId，Android为对应的包名，MD5：只有Android会返回，signature的MD5\n */\nexport function getSourceApplication() {\n  return invokeBridgeCallNativeFun(LAUNCH_INFO_MODULE, 'getSourceApplication', null, '4.52.0', '4.52.0');\n}\n\n/**\n * 检查录音权限\n *\n * @return {Promise<{is_enabled:boolean}>} 返回权限Promise，is_enabled：0-用户已拒绝，1-用户已同意或用户尚未表态\n */\nexport function checkAudioEnabled() {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'check');\n}\n\n/**\n * 打开录音权限（跳到设置页面）\n *\n * @return {Promise} 返回Promise\n */\nexport function enableAudio() {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'enable');\n}\n\n/**\n * 播放音频\n *\n * @param {Object} params 接口参数\n * @param {string} params.audio_id 音频id（ios需要）\n * @param {string} params.audio_url 音频地址，http://xxx.mp3（安卓需要）\n * @param {number} params.audio_check_settings 音频设置，0/1\n * @param {number} params.audio_volume 音频音量，0.5\n * @param {function} params.complete 回调函数\n * @return {Promise} 返回Promise\n */\nexport function playAudio(params) {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'play', params);\n}\n\n/**\n * 停止播放\n *\n * @return {Promise} 返回Promise\n */\nexport function stopAudio() {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'stop');\n}\n\n/**\n * 预加载音频\n *\n * @param {Object} params 接口参数\n * @param {string} params.audio_id 音频id（ios需要）\n * @param {string} params.audio_url 音频地址，http://xxx.mp3（安卓需要）\n * @return {Promise} 返回Promise\n */\nexport function preloadAudio(params) {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'preLoad', params);\n}\n\n/**\n * 录制音频\n *\n * @param {Object} params 接口参数\n * @param {string} params.audio_id 音频id，语音拉人使用group_order_id作为唯一id，团分享页面使用一个随机字符串\n * @param {number} params.max_duration 最长的录音时间，单位s，若不设定将不会自动结束，录音会在达到最长录音时间或接收到停止信号时停止，取决于两者谁先发出，在录音停止后另外一个停止信号将被忽略\n * @param {function(data: Object<{audio_id: string, audio_duration: number}>) : *} params.complete 回调函数\n * @return {Promise} 返回Promise\n */\nexport function startRecord(params) {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'record', params);\n}\n\n/**\n * 停止录制\n *\n * @return {Promise} 返回Promise\n */\nexport function stopRecord() {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'stopRecord');\n}\n\n/**\n * 上传音频，需要在上传前预先向后端请求签名\n *\n * @param {Object} params 接口参数\n * @param {string} params.audio_id 音频id\n * @param {string} params.audio_upload_signature 音频签名\n * @return {Promise} 返回Promise\n */\nexport function uploadAudio(params) {\n  return invokeBridgeCallNativeFun(AUDIO_MODULE, 'upload', params);\n}\n\n/**\n * 获取当前页面的page context\n *\n * @return {Promise<map>} 返回字典Promise\n */\nexport function getPageContext() {\n  return invokeBridgeCallNativeFun(navigationModule, 'pageContext');\n}\n\n/**\n * 获取当前页面的refer page context\n *\n * @return {Promise<map>} 返回字典Promise\n */\nexport function getReferPageContext() {\n  return invokeBridgeCallNativeFun(navigationModule, 'referPageContext');\n}\n\n/**\n * 设置页面的page context\n *\n * @param {Object} params 字典键值对，必须含page_sn\n * @return {Promise} 返回Promise\n */\nexport function setPageContext(params) {\n  const _setPageContextPromise = invokeBridgeCallNativeFun(navigationModule, 'setPageContext', params);\n  if (!deferedPromise.fullfilled) {\n    deferedPromise.fullfilled = true;\n    deferedPromise.resolve(_setPageContextPromise);\n    return setPageContextPromise;\n  }\n  setPageContextPromise = _setPageContextPromise;\n  return setPageContextPromise;\n}\n\n/**\n * 添加额外的属性到当前页面的page\n *\n * @param {Object} params 字典/Map\n * @return {Promise} 返回Promise\n */\nexport function addPageContext(params) {\n  return invokeBridgeCallNativeFun(navigationModule, 'addPageContext', params);\n}\n\n/**\n * 选取通讯录，最小支持版本 3.17.0\n *\n * 调用该接口后，如果用户从未设定通讯录权限，则先弹出权限提示控件，后弹出原生权限申请窗口；如果用户已拒绝通讯录权限，则弹出对话框引导用户去修改权限。\n * 在得到所需权限后，自动弹出原生通讯录选取控件，用户在选取条目或取消时会产生回调。\n *\n * @return {Promise<{name: string, mobile: string}>} 返回联系人Promise，name: 用户选取条目对应的姓名，mobile: 用户选取条目对应的手机号\n */\nexport function selectContact() {\n  const isNewContactVersion = compareVersion(appVersion, '4.14.0') >= 0;\n  return invokeBridgeCallNativeFun(\n    contactsModule,\n    'selectContact',\n    null,\n    isNewContactVersion ? '4.14.0' : '3.17.0',\n    isNewContactVersion ? '4.14.0' : '3.17.0'\n  );\n}\n\n/**\n * 检测设备通讯录权限，最小支持版本 4.15.0\n *\n * @return {Promise<{status: number}>} 返回权限状态Promise，0：权限不明，1：有权限，2：无权限\n */\nexport function checkContactAuthority() {\n  return invokeBridgeCallNativeFun(contactsModule, 'check', null, '4.15.0', '4.16.0');\n}\n\n/**\n * 给定手机号，返回用户通讯录中该号码对应的姓名\n *\n * 调用该接口后，如果用户从未设定通讯录权限，则先弹出权限提示控件，后弹出原生权限申请窗口；如果用户已拒绝通讯录权限，则弹出对话框引导用户去修改权限。\n * 在得到所需权限后，会在授权后自动遍历通讯录进行匹配，返回所需数据。\n *\n * @param {Object} params 接口参数\n * @param {Array} params.mobiles 手机号数组\n * @param {boolean} [params.silent=false] 该字段为 true 的情况下，调用该接口将在无权限时直接回调结果；否则会弹出权限提示框（4.15.0开始支持）\n * slient=true在Android下存在问题，需要在4.70.0+以上使用slient=true的场景。\n * @return {Promise<map>} 返回手机号姓名Promise，形式如：{\"12345678\": {\"name\": \"person1\"},\"23456789\": {\"name\": \"person2\"}}\n */\nexport function searchContactsByMobiles(params) {\n  const isNewContactVersion = compareVersion(appVersion, '4.14.0') >= 0;\n  return invokeBridgeCallNativeFun(\n    contactsModule,\n    'searchContacts',\n    params,\n    params.silent ? '4.70.0' : isNewContactVersion ? '4.14.0' : '3.17.0',\n    params.silent ? '4.15.0' : isNewContactVersion ? '4.14.0' : '3.17.0'\n  );\n}\n\n/**\n * 开启免密支付\n *\n * @param {Object} params 接口参数\n * @param {string} params.type 免密支付类型\n * @param {string} params.url 免密支付链接\n * @return {Promise} 返回Promise\n */\nexport function openDirectPay({ type, url }) {\n  return invokeBridgeCallNativeFun(AGREEMENT_MODULE, 'sign', {\n    type,\n    params: { sign_url: url }\n  });\n}\n\n/**\n * main frame加载完毕后js通知原生，最小支持版本 4.27.0\n *\n * @return {Promise<{success: string}>} 返回状态Promise，success：\"1\"/\"0\"\n */\nexport function onWebMounted() {\n  return invokeBridgeCallNativeFun(WEB_SCENE_MODULE, 'onWebMounted', null, '4.27.0', '4.27.0').catch(error => {\n    if (error.errorType !== 'version_error') {\n      throw error;\n    }\n  });\n}\n\n/**\n * 获取前面页面传给当前页面中key为extra的属性\n *\n * @return {Promise} 返回Promise，数据为extra参数定义的字典/Map\n */\nexport function getExtra() {\n  return invokeBridgeCallNativeFun(WEB_SCENE_MODULE, 'getExtra');\n}\n\n/**\n * 获取当前页面是独立页面还是内嵌tab，最小支持版本 4.20.0\n *\n * @return {Promise<{shown_type: number}>} 返回Promise，shown_type：0/1；0：表示独立页面，1：表示子页面\n */\nexport function getPageShownType() {\n  return invokeBridgeCallNativeFun(WEB_SCENE_MODULE, 'getPageShownType', null, '4.20.0', '4.20.0');\n}\n\n/**\n * 唤起软键盘，最小支持版本 4.56.0\n *\n * @return {Promise<{index: number}>} 返回状态Promise，index：1/0 确认返回/取消返回\n */\nexport function showKeyboard() {\n  return invokeBridgeCallNativeFun(KEYBOARD_MODULE, 'showKeyboard', null, '4.56.0', '4.56.0');\n}\n\n/**\n * 风控校验结果\n *\n * @param {Object} params 接口参数\n * @param {string} params.is_success '1'/'0'，成功/失败\n * @return {Promise} 返回Promise\n */\nexport function captchaVerifyResult(params) {\n  return invokeBridgeCallNativeFun(CAPTCHA_AUTH_MODULE, 'verifyResult', params);\n}\n\n/**\n * 隐藏CaptchaDialog\n *\n * @param {Object} params 接口参数\n * @param {string} params.is_success '1'/'0'，成功/失败\n * @param {string} params.type '1'：获取短信验证码异常，'5'：搜索结果页API请求异常\n * @return {Promise} 返回Promise\n */\nexport function hideCaptchaDialog(params) {\n  return invokeBridgeCallNativeFun(SERVICE_MANAGER_MODULE, 'hideCaptchaDialog', params);\n}\n\n/**\n * 上报日志，最小支持版本 4.45.0\n *\n * @param {Object} params 接口参数\n * @param {string} params.message 日志信息\n * @param {string} params.error_time 上报时间，格式'YYYY年MM月dd日 hh:mm'\n * @return {Promise} 返回Promise\n */\nexport function uploadLog(params) {\n  return invokeBridgeCallNativeFun(FEEDBACK_MODULE, 'uploadLog', params, '4.45.0', '4.45.0');\n}\n\n/**\n * 获取用户AccessToken\n *\n * @return {Promise<{value: string}>} 返回Promise\n */\nexport function getAccessToken() {\n  const isLoginVersion = isAndroid\n    ? compareVersion(appVersion, '1.2.2')\n    : isIOS\n      ? compareVersion(appVersion, '2.0.8')\n      : '';\n  if (isLoginVersion >= 0) {\n    return invokeBridgeCallNativeFun(USER_MODULE, 'info').then(data => ({ value: data && data.access_token }));\n  }\n  if (isLoginVersion < 0) {\n    return invokeBridgeCallNativeFun(STORAGE_MODULE, 'getSecure', { key: '__ACCESS_TOKEN__' });\n  }\n  const message = errorMessage.env(USER_MODULE, 'info');\n  return Promise.reject(new Error(message));\n}\n\n/**\n * 获取用户信息， android 最小支持版本 4.54.0，ios 最小支持版本 4.0.0；其中获取uin，android和ios最小支持版本：4.65.0\n *\n * @return {Promise<{uin: string, access_token: string, user_id: string, user_name: string, type: number}>} 返回Promise，其中type为登录类型, 分别为1：手机, 2：微博, 3：微信, 4：QQ, 0：None\n */\nexport function getUserInfo() {\n  return invokeBridgeCallNativeFun(USER_MODULE, 'info');\n}\n\n/**\n * 获取设备相关信息\n *\n * @return {Promise<Object>} 返回Promise\n */\nexport function getDeviceInfo() {\n  return invokeBridgeCallNativeFun(DEVICE_MODULE, 'deviceInfo');\n}\n\n/**\n * 根据灰度名称检查该功能是否灰度\n *\n * @param {Object} params 接口参数\n * @param {string} params.name 灰度key\n * @param {number} [params.default_value] 灰度查询，默认值1 (此参数仅支持ios)\n * @param {string} [params.type] 灰度类型，默认0，如果是1，则从新的ab平台上读取开关，Android 4.44.0+支持；iOS从4.33.1版本后全部切新灰度了，无论type=0还是1，都是走新灰度\n * @return {Promise<{is_enabled: boolean}>} 返回是否开启Promise，true开启，false未开启\n */\nexport function checkABTest(params) {\n  return invokeBridgeCallNativeFun(AB_TEST_MODULE, 'check', params);\n}\n\n/**\n * 检查消息通知授权状态\n *\n * @return {Promise<{is_enabled: boolean, is_sound_enabled: boolean}>} 返回Promise\n */\nexport function checkNotify() {\n  return invokeBridgeCallNativeFun(USER_NOTIFICATION_MODULE, 'checkNotify');\n}\n\n/**\n * 开启消息通知\n *\n * 开启消息通知。如果用户已经授权，直接返回。在iOS中，如果授权窗口没有弹过，则弹出授权窗口；如果用户关闭了消息通知，则跳到应用设置界面。\n *\n * @return {Promise} 返回Promise\n */\nexport function enableNotify() {\n  return invokeBridgeCallNativeFun(USER_NOTIFICATION_MODULE, 'enableNotify');\n}\n\n/**\n * 通知原生显示网络或服务器错误\n *\n * @example\n * {\n *    \"errorType\": \"networkError/serviceError\",\n *    \"params\":{\"title\": \"\", \"message\": \"\", \"iconType\": \"46ee\"}\n * }\n * @param {Object} params 接口参数\n * @param {'networkError' | 'serviceError'} params.errorType 错误类型，networkError或serviceError\n * @param {{\"title\": string, \"message\": string, \"iconType\": string}} params.params 页面参数\n * @return {Promise} 返回Promise\n */\nexport function showRetryPage(params) {\n  return invokeBridgeCallNativeFun(WEB_SCENE_MODULE, 'showRetryPage', params, '4.18.0', '4.18.0');\n}\n\n/**\n * 日志上报， android 最小支持版本 4.0.0，ios 最小支持版本 4.25.0\n *\n * @param {Object} params 接口参数\n * @param {string} params.message 日志消息\n * @param {string} params.module 模块\n * @param {number} params.level 日志等级，1：代表debug，只在控制台输出，不写入文件；2：代表info，默认为2；3：代表warn；4：代表error，都写入文件。\n * @return {Promise} 返回Promise\n */\nexport function logToNative(params) {\n  return invokeBridgeCallNativeFun(LOGGER_MODULE, 'log', params, '4.0.0', '4.25.0');\n}\n\n/**\n * 功能类似modal，但允许背景透明，用在弹窗\n *\n * @param {Object} params 接口参数\n * @param {string} params.type 弹窗类型，如分享卡片：pdd_comment_share\n * @param {string} params.props 弹窗所需参数\n * @return {Promise} 返回Promise\n */\nexport function mask(params) {\n  return invokeBridgeCallNativeFun(navigationModule, 'mask', params);\n}\n\n/**\n * 专题集，当web左右切换，滑动到屏幕的web会调此回调通知js打点\n * @param {Object} params 接口参数\n * @returns {Promise} 返回Promise\n */\nexport function waitTabPageVisible(params) {\n  if (!getPageVisibilityPromise) {\n    getPageVisibilityPromise = invokeBridgeCallNativeFun(\n      WEB_SCENE_MODULE,\n      'getPageVisibility',\n      params,\n      '4.27.0',\n      '4.27.0'\n    );\n  }\n  return getPageVisibilityPromise;\n}\n\n/**\n * 展示app弹窗\n * @param {Object} params 接口参数\n * @returns {Promise} 返回Promise\n */\nexport function requestPopupAndShow(params) {\n  return setPageContextPromise.then(() => {\n    return invokeBridgeCallNativeFun(PDD_POPUP_MAMAGER, 'requestPopupAndShow', params, ' 4.65.0', ' 4.65.0');\n  });\n}\n","/**\n * @file wechat.js 微信jssdk能力封装\n * @author jiangliuer(jiangliuer@pinduoduo.com) zongheng(zongheng@pinduoduo.com)\n */\nimport { compareVersion, getCurrentPlatform } from '@pdd/platform-util';\nimport { getPathnameWithSearchAndHash } from './url';\nimport { launchApp } from './app';\n\nconst PACKAGE_NAME = 'com.xunmeng.pinduoduo';\nconst SCHEMA = 'pinduoduo:';\nconst WECHAT_CAN_LUANCH_MIN_VERSION_ANDROID = '3.13.0'; // android微信能唤起的app最低版本\nconst APP_ID = 'wx77d53b84434b9d9a'; // 拼多多APPID\nconst JSSDK_NOT_READY = '微信sdk还没有初始化';\nconst LAUNCH_FAIL = '唤起App失败';\n\nconst currentPlatform = process.env.BROWSER ? getCurrentPlatform() : {};\n\n/**\n * 唤起app https://wiki2.corp.yiran.com/pages/viewpage.action?pageId=7310006 统一使用第一种方式唤起\n * 如果是微信调用微信jssdk唤起\n * @param {string} url 唤起后跳转的url\n * @param {number} [launchType] 唤起方式 1:直接唤起 2:通过创建A标签唤起 3:通过创建iframe唤起\n * @return {Promise} 唤起结果Promise\n */\nexport function launchPDDApp(url, launchType) {\n  // node端,微信小程序端,和native端无法唤起\n  if (!process.env.BROWSER || currentPlatform.isNativePlatform || currentPlatform.isWeChatMiniProgram) {\n    const msg = 'Native环境,node环境,微信小程序环境无法唤起';\n    return Promise.reject(new Error(msg));\n  }\n\n  const prefix = `${SCHEMA}//${PACKAGE_NAME}`;\n  url = getPathnameWithSearchAndHash(url); // 转化为相对路径\n\n  if (!currentPlatform.isWeChatPlatform) {\n    return launchApp(`${prefix}${url}`, launchType);\n  }\n\n  if (!window.wx) {\n    return Promise.reject(new Error(JSSDK_NOT_READY));\n  }\n  return new Promise(resolve => {\n    window.wx.ready(() => {\n      resolve(\n        (() => {\n          if (currentPlatform.isIOSWeChatPlatform) {\n            return wechatLuanchApplication(`${prefix}${url}`);\n          }\n\n          // Android url不能带/\n          return wechatGetInstallState().then(({ installed, version }) => {\n            if (installed && compareVersion(version, WECHAT_CAN_LUANCH_MIN_VERSION_ANDROID) > 0) {\n              return wechatLuanchApplication(url.slice(1));\n            }\n\n            throw new Error(`${LAUNCH_FAIL}，安装状态：${JSON.stringify({ installed, version })}`);\n          });\n        })()\n      );\n    });\n  });\n}\n\n/**\n * 调用微信jssdk检查app安装状态，仅限android,这个接口是需要微信开白名单的\n * @return {Promise<{installed: boolean, version: string}>} app安装状态Promise\n */\nexport function wechatGetInstallState() {\n  // node端无法调用\n  if (!process.env.BROWSER) {\n    const msg = '仅支持在浏览器端调用';\n    return Promise.reject(new Error(msg));\n  }\n  if (!currentPlatform.isAndroidWeChatPlatform) {\n    return Promise.reject(new Error('不支持iOS'));\n  }\n  if (!window.wx) {\n    return Promise.reject(JSSDK_NOT_READY);\n  }\n  return new Promise((resolve, reject) => {\n    window.wx.ready(() => {\n      if (!window.WeixinJSBridge || !window.WeixinJSBridge.invoke) {\n        return reject(new Error(JSSDK_NOT_READY));\n      }\n      window.WeixinJSBridge.invoke(\n        'getInstallState',\n        { packageName: PACKAGE_NAME, packageUrl: 'pinduoduo://' },\n        // eslint-disable-next-line\n        ({ err_msg = '', versionName = '' }) => {\n          if (/get_install_state:yes/.test(err_msg)) {\n            return resolve({ installed: true, version: versionName });\n          }\n          if (/get_install_state:no/.test(err_msg)) {\n            return resolve({ installed: false, version: versionName });\n          }\n          reject(new Error(err_msg));\n        }\n      );\n    });\n  });\n}\n\n/**\n * 微信jssdk唤起app方法\n * @param url 带唤起的url\n * @return {Promise<any>} 唤起结果，唤起成功返回resolved promise， 失败返回rejection\n */\nfunction wechatLuanchApplication(url) {\n  const extInfo = 'from=wx_webview&forward_url=' + encodeURIComponent(url);\n  if (!window.wx || !window.wx.invoke) {\n    return Promise.reject(JSSDK_NOT_READY);\n  }\n  return new Promise((resolve, reject) => {\n    window.wx.invoke('launchApplication', { appID: APP_ID, extInfo, messageExt: url }, res =>\n      res.err_msg === 'launchApplication:ok' ? resolve() : reject(new Error(`${LAUNCH_FAIL}:${res.err_msg}`))\n    );\n  });\n}\n","import { getPathnameWithSearchAndHash, getExtendInfoFromQuery, parseUrlQuery, appendQuery } from '@pdd/core-util';\n\n/**\n * 私有方法返回不包含querystring的pathName,比如url:\"index.html?id=1\"返回\"/index.html\"\n * @ignore\n * @private\n * @param url\n * @returns {*}\n */\nexport function getPathName(url) {\n  const pathName = getPathnameWithSearchAndHash(url);\n  return pathName.split('?')[0];\n}\n\n/**\n * 添加页面间传递的参数（包括refer和_x_开头的参数）\n *\n * @param  {string} url 目标url\n * @return {string}     处理后的url\n */\nexport const addPageTransferParameters = function (url) {\n  if (!url) {\n    return;\n  }\n  const urlQuery = parseUrlQuery(url);\n  const referParams = {};\n\n  const referPageELSN = urlQuery.page_el_sn;\n  if (referPageELSN) {\n    referParams.refer_page_el_sn = referPageELSN;\n  }\n\n  // 添加_x_开头的参数\n  const extendParams = getExtendInfoFromQuery(true);\n\n  return appendQuery({ ...extendParams, ...urlQuery, ...referParams }, url);\n};\n\n/**\n * 获取透传给app forward的refer信息\n * @param params\n * @returns {null}\n */\nexport const getTransientReferPageParams = function (url) {\n  if (!url) {\n    return null;\n  }\n  return Object.entries(parseUrlQuery(url)).reduce((pre, [key, value]) => {\n    if (key.startsWith('refer_') || key.startsWith('_ex_')) {\n      const newKey = key.replace(/^refer_/, '').replace(/^_ex_/, '');\n      if (newKey && value) {\n        pre = pre || {};\n        pre[newKey] = value;\n      }\n    }\n    return pre;\n  }, null);\n};\n","/**\n * @file navigation.js, 一些跳转相关的函数封装\n * @author aotuman, fushi(fushi@yiran.com)\n */\n\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getPlatform } from '@pdd/platform-util';\nimport {\n  buildQuery,\n  parseQuery,\n  isAbsoluteUrl,\n  getPathnameWithSearchAndHash,\n  nanoid,\n  parseUrlQuery,\n  resolveFullUrl,\n  appendQuery,\n  launchPDDApp,\n  loadScript,\n  throwErrorAsync,\n  throttle\n} from '@pdd/core-util';\nimport { getPathName, getTransientReferPageParams, addPageTransferParameters } from './utils';\n\n// 容灾域名\nconst BackupHostname = {\n  'sc.yangkeduo.com': 1,\n  'csr.pinduoduo.net': 1\n};\n\nconst clientPlatform = getPlatform(process.env.BROWSER ? window.navigator.userAgent : '');\nconst targetPages = ['/goods.html', '/subject.html', '/subjects.html', '/spike.html',\n  '/order.html', '/order_checkout.html', '/orders.html', '/personal.html',\n  'chat_detail.html', 'chat_detail_logistics', 'commercial_bargain_list.html',\n  'mkt_bargain_list.html', 'coupons.html', 'mall_page.html', '/comm_brand_page.html', 'group7.html', '/index.html'];\n/**\n *\n * @ignore\n */\nlet NavigationResult = {};\nlet wxAppNavigateWait = 300; // 小程序跳转节流lodash throttle 参数\n\nif(process.env.BROWSER) {\n  let querys = parseQuery(window.location.search);\n  NavigationResult = window.Navigation = {\n    nextPageQuery: {}, // 下个页面要增加的页面参数\n    /**\n     * 私有方法预设下个页面要增加的页面参数, 比如refer_page_el_sn等\n     * @private\n     * @param {object} query\n     * @param {function} cb\n     */\n    setNextPageQuery: function (query = {}, cb) {\n      if(query && typeof query === 'object') {\n        for (const key in query) {\n          if(query.hasOwnProperty(key)) {\n            const value = query[key];\n            // 把page_el_sn改成refer\n            if(key === 'page_el_sn') {\n              window.Navigation.nextPageQuery['refer_page_el_sn'] = value;\n            } else {\n              window.Navigation.nextPageQuery[key] = value;\n            }\n          }\n        }\n      }\n      if(cb && typeof cb === 'function') {\n        cb();\n      }\n    },\n    /**\n     * 私有方法获取下个页面要增加的页面参数, 比如refer_page_el_sn等\n     * @private\n     * @return {{}|Window.Navigation.nextPageQuery}\n     */\n    getNextPageQuery: function () {\n      return window.Navigation.nextPageQuery;\n    },\n\n    /**\n     * 清空当前页面的history并跳转目标页面\n     * 效果是从下一页回退时会回退到当前页面前一页面\n     * @typedef {function} reload\n     * @param {string} url - 跳转到的目标URL\n     * @param {function} onSuccess - 跳转成功回调\n     * @param {object} state - history state\n     * @param {object} nativeParams 传递给原生的额外参数\n     */\n    reload: function (url, onSuccess, state = null, nativeParams = {}) {\n      let originalURL = url;\n      if(!url) {\n        originalURL = url = buildURL(Object.assign({}, querys, window.Navigation.querySet));\n      } else {\n        url = addPageTransferParameters(url);\n        url = buildURL(window.Navigation.nextPageQuery, url);\n      }\n      const navigationMapInfo = processNavigationMap(url);\n      url = navigationMapInfo.url;\n      if(originalURL.indexOf('//') === 0) {\n        originalURL = url;\n      }\n      try {\n        history.replaceState(state, '', url);\n      } catch (e) {\n        // Common.logError('navigation.reload', JSON.stringify(e));\n      }\n      const webReload = function () {\n        try {\n          history.replaceState(state, '', url);\n        } catch (e) {\n          // Common.logError(\"navigation.reload\", JSON.stringify(e));\n        }\n        setTimeout(function () {\n          // location.href = url;\n          if(window && window.location) {\n            window.location = url;\n          } else {\n            location.href = url;\n          }\n          typeof onSuccess === 'function' && onSuccess();\n        }, 0);\n      };\n      if(clientPlatform.isNativePlatform || clientPlatform.isTinyNativePlatform) {\n        const query = parseUrlQuery(url);\n        const useUrmNavigation = query.use_urm_navigation === '1' || !isAbsoluteUrl(originalURL);\n        if(useUrmNavigation) {\n          // 内嵌App时，如果跳转的源url是相对路径，则保留相对路径，跳转组件包\n          url = getPathnameWithSearchAndHash(url);\n        }\n        const params = {\n          url: url,\n          type: 'web',\n          props: Object.assign({}, query, {\n            url: url\n          }, nativeParams.props)\n        };\n\n        if(clientPlatform.statisfy && clientPlatform.statisfy('4.26.0', '4.40.0', 'greaterThanEqual')\n          && useUrmNavigation) {\n          params.type = '';\n        }\n        // add refer page xxx\n        const transientReferPageParams = getTransientReferPageParams(url);\n        if(transientReferPageParams) {\n          params.transient_refer_page_context = transientReferPageParams;\n        }\n        invokeBridgeCallNativeFun('JSNavigation', 'replace', params).then(onSuccess);\n      } else {\n        webReload();\n      }\n    },\n\n    /**\n     * 回退到目标页面\n     * @typedef {function} back\n     * @param {string} [url] - 如果url没传入h5调用history.back如果传入了调用location.href。APP内调用JSNavigation.back pop一个场景, 即关闭当前页面\n     * @param {function} [onSuccess] - 回退成功回调\n     * @param {boolean} [directBack] - 在传入url的情况下如果directBack为true则h5依然使用history.back跳转\n     * @param {object} [params] - 传递给JSNavigation.back的参数 详细内容参考 https://docs.corp.yiran.com/pinbridge/route/JSNavigation.html?h=JSNavigation\n     */\n    back: function (url, onSuccess, directBack, params) {\n      params = params || {};\n      if(clientPlatform.isNativePlatform || clientPlatform.isTinyNativePlatform) {\n        if(url == null) {\n          invokeBridgeCallNativeFun('JSNavigation', 'back', {\n            props: params.props || {}\n          }).then(onSuccess);\n        } else {\n          invokeBridgeCallNativeFun('JSNavigation', 'back', {\n            url: resolveFullUrl(url),\n            props: params.props || {}\n          }).then(onSuccess);\n        }\n      } else {\n        setTimeout(function () {\n          if(url == null || directBack) {\n            //  小程序中 没有url不走小程序的回退，当做h5处理\n            history.back();\n          } else {\n            location.href = url;\n          }\n          typeof onSuccess === 'function' && onSuccess();\n        }, 0);\n      }\n    },\n\n    /**\n     * 设置小程序节流参数wait值默认300ms对应lodash throttle wait参数\n     * @typedef {function} initWxAppNavigateWait\n     * @param {int} [wait=300] - throttle wait值\n     */\n    initWxAppNavigateWait: function (wait) {\n      wxAppNavigateWait = wait || wxAppNavigateWait;\n      NavigationResult.throttleForwardWxAppPage = createThrottleForwardWxAppPage(wxAppNavigateWait);\n    },\n\n    throttleForwardWxAppPage: createThrottleForwardWxAppPage(),\n\n    /**\n     * 私有方法非native环境下的跳转逻辑\n     * @private\n     * @param {string} url 跳转的目标url\n     * @param {function} onSuccess 跳转成功后的回调函数\n     */\n    webForward: function (url, onSuccess) {\n      setTimeout(function () {\n        if(isWxAppSupportForward && isWxAppSupportForward(url)) {\n          NavigationResult.throttleForwardWxAppPage(url);\n        } else {\n          location.href = url;\n        }\n        typeof onSuccess === 'function' && onSuccess();\n      }, 0);\n    },\n\n    /**\n     * 私有方法针对传入的url做一些处理例如添加is_back等\n     * @private\n     * @param {string} url 待处理的url\n     * @returns {object} 处理后的navigationMapInfo\n     * @property {string} url 处理后的url\n     * @property {Number} launchApp 处理后的url是否唤起app\n     */\n    prepareForwardUrl: function (url) {\n      window.Navigation.querySet = Object.assign({}, querys, window.Navigation.querySet, {\n        /*eslint-disable*/\n        is_back: clientPlatform.isNativePlatform ? null : '1'\n        /* eslint-enable */\n      });\n      //  小程序不支持history api\n      if(!clientPlatform.isWeChatMiniProgram && !clientPlatform.isQQMiniProgram) {\n        // 仅仅对url做处理，replace的时候state保持\n        window.Navigation.replaceURL(buildURL(window.Navigation.querySet), () => {}, window.history.state);\n      }\n      // url = urlUtil.addTimeStampForUrl(url);\n      url = addPageTransferParameters(url);\n      // 把预设的参数放进去\n      url = buildURL(window.Navigation.nextPageQuery, url);\n      // replace url\n      const navigationMapInfo = processNavigationMap(url);\n      return navigationMapInfo;\n    },\n\n    /**\n     * 对齐统一路由https://note.pdd.net/doc/204656370856734720 的跳转方式\n     * 去除了selectedTab参数，通过params传入tab_index即可\n     * @typedef {function} uniformForward\n     * @param {string} url - 跳转的目标url\n     * @param {function} onSuccess - 跳转成功后的回调\n     * @param {object} params - 自定义参数\n     */\n    uniformForward: function (url, onSuccess, params = {}) {\n      // 传入的url可能是完整路径或者相对路径\n      let originalURL = url;\n      const { launchApp, url: resolvedUrl } = NavigationResult.prepareForwardUrl(url);\n      url = resolvedUrl;\n      const launchPromise = launchApp ? launchPDDApp(url) : Promise.reject();\n      launchPromise.catch(() => {\n        // 如果传入的url以//开头转换为带schema的url\n        if(originalURL.indexOf('//') === 0) {\n          originalURL = url;\n        }\n        if(clientPlatform.isNativePlatform || clientPlatform.isTinyNativePlatform) {\n          // 如果是组件包地址变为相对地址，否则还是完整路径\n          if(!isAbsoluteUrl(originalURL)) {\n            // 内嵌App时，如果跳转的源url是相对路径，则保留相对路径，跳转组件包\n            url = getPathnameWithSearchAndHash(url);\n          }\n          const { props, transient_refer_page_context } = params;\n          // 默认通过webview方式打开链接，所有type是web\n          const paramsNative = Object.assign({\n            url: url,\n            type: 'web',\n            props: Object.assign({\n              url: url\n            }, parseUrlQuery(url), props)\n          }, { transient_refer_page_context });\n\n          // 如果支持统一路由将type置空由native控制跳转\n          if(clientPlatform.statisfy && clientPlatform.statisfy('4.26.0', '4.40.0', 'greaterThanEqual')) {\n            paramsNative.type = '';\n          }\n          // 公共逻辑\n          if(params.tab_index != null) {\n            paramsNative.tab_index = params.tab_index;\n          }\n          // add refer page xxx\n          const transientReferPageParams = getTransientReferPageParams(url);\n          if(transientReferPageParams) {\n            paramsNative.transient_refer_page_context = Object.assign({}, paramsNative.transient_refer_page_context, transientReferPageParams);\n          }\n          invokeBridgeCallNativeFun('JSNavigation', 'forward', paramsNative).then(onSuccess);\n        } else {\n          NavigationResult.webForward(url, onSuccess);\n        }\n      });\n    },\n\n    /**\n     * 唤起app弹框功能类似modal，但允许背景透明，用在弹窗文档https://docs.corp.yiran.com/pinbridge/route/JSNavigation.html?h=JSNavigation\n     * 使用场景比如评论分享的app弹框\n     * @typedef {function } maskAppPage\n     * @param {string} type - 弹框类型\n     * @param {object} params - 唤起app弹框的参数\n     */\n    maskAppPage: function (type, params) {\n      invokeBridgeCallNativeFun('JSNavigation', 'mask', {\n        type: type,\n        props: params\n      });\n    },\n\n    /**\n     * 更新页面url\n     * @typedef {function} replaceURL\n     * @param {string} url - 更新后的url\n     * @param {function} onSuccess - 成功回调函数\n     * @param {object} state - history.replaceState入参用于替换状态对象\n     */\n    replaceURL: function (url, onSuccess, state = null) {\n      querys = parseUrlQuery(url);\n      const defaultMethod = function () {\n        try {\n          history.replaceState(state, '', url);\n        } catch (e) {\n          // Common.logError(\"navigation.replaceURL\", JSON.stringify(e));\n        }\n        typeof onSuccess === 'function' && onSuccess();\n      };\n      if(clientPlatform.statisfy && clientPlatform.statisfy('1.2.5', '2.1.0', 'greaterThan')) {\n        // WebScene.replaceURL不会更新location.href,replaceState会更新location.href\n        // 下拉刷新的时候使用的WebScene.replaceURL更新后的url不是location.href，所以两个都应该更新\n        invokeBridgeCallNativeFun('WebScene', 'replaceURL', { url }).then(defaultMethod, defaultMethod);\n      } else {\n        defaultMethod();\n      }\n    },\n\n    querySet: null,\n    /**\n     * 更新跳转目标页url search\n     * @typedef {function} replaceQuery\n     * @param {object} query - 扩展的query参数\n     * @param {function} onSuccess - 更新成功回调函数\n     */\n    replaceQuery: function (query, onSuccess) {\n      window.Navigation.querySet = Object.assign({}, window.Navigation.querySet, query);\n      typeof onSuccess === 'function' && onSuccess();\n    },\n\n    /**\n     * 不再维护建议使用统一路由跳转\n     * @ignore\n     * @private\n     */\n    nativeAppPage: function (method, type, params, onSuccess) {\n      // 默认是forward, 还可以是back, reload\n      method = method || 'forward';\n      // 在跳转原生使用replace接口\n      if(method === 'reload') {\n        method = 'replace';\n      }\n      if(method === 'backAndReload') {\n        method = 'back';\n      }\n      const { props = params, transient_refer_page_context } = params;\n      // add refer page xxx\n      const transientReferPageParams = Object.assign({}, transient_refer_page_context, getTransientReferPageParams(props.url));\n      const nativeParams = {\n        type: type,\n        props: props,\n        transient_refer_page_context: transientReferPageParams\n      };\n      if(params.url) {\n        nativeParams.url = params.url;\n      }\n      invokeBridgeCallNativeFun('JSNavigation', method, nativeParams).then(onSuccess);\n    }\n  };\n}\n\nconst DEFAULT_TIMEOUT = 5000;\n\nfunction timeoutReject(t = DEFAULT_TIMEOUT) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      reject(new Error(`timeout after ${t}ms`));\n    }, t);\n  });\n}\n\n/**\n * 获取h5和小程序页面跳转对应关系配置\n * 先尝试从localStorage缓存中读取，缓存中没有则从远端加载，远端加载成功后再缓存到本地\n *\n * @ignore\n * @param timeout 可选超时时间，超时则返回undefined\n * @returns {Promise<any>}\n */\nfunction loadWxaPageMap(timeout) {\n  return Promise.race([new Promise((resolve, reject) => {\n    let wxaPageMap;\n\n    const now = new Date();\n    now.setMinutes(0, 0, 0); // 缓存1小时\n    const timeStamp = now.getTime();\n\n    let wxaPageMapCache;\n    const cacheKey = 'wxaPageMap';\n    const cache = localStorage.getItem(cacheKey);\n    // 先尝试获取缓存中的配置，缓存格式为以当前小时timeStamp为key的对象\n    if(cache) {\n      wxaPageMapCache = JSON.parse(cache);\n      if(wxaPageMapCache) {\n        wxaPageMap = wxaPageMapCache[timeStamp];\n      }\n    }\n\n    // 如果没有缓存则请求远端配置，并进行缓存\n    if(!wxaPageMap) {\n      const src = 'https://xcxcdn.yangkeduo.com/mini_program/sdk/v2/pddminiprogram.js?' + nanoid();\n      loadScript(src, { async: true, crossOrigin: 'anonymous' }).then(() => {\n        wxaPageMap = window.pddMiniProgram.routeConfig;\n\n        // cache wxaPageMap\n        const cache = {};\n        cache[timeStamp] = wxaPageMap;\n        localStorage.setItem(cacheKey, JSON.stringify(cache));\n\n        resolve(wxaPageMap);\n      }).catch(e => {\n        reject(e);\n      });\n    } else {\n      resolve(wxaPageMap);\n    }\n  }), timeoutReject(timeout)]).catch(error => {\n    // report error and fallback to old navigate\n    throwErrorAsync(error);\n  });\n}\n\nlet _wxaPageMap;\n// 小程序环境，页面加载时缓存一份跳转配置到内存中，方便后续调用\nif(process.env.BROWSER && (clientPlatform.isWeChatMiniProgram || clientPlatform.isQQMiniProgram)) {\n  if(window.__minPgmUrlMap__) {\n    _wxaPageMap = window.__minPgmUrlMap__;\n  }\n  !_wxaPageMap && loadWxaPageMap().then(res => {\n    _wxaPageMap = res;\n  });\n}\n\n/**\n * @private\n * @ignore\n * @param wxaPageMap h5跳转小程序配置\n * @param url h5链接\n * @returns {*} 返回跳转类型和对应小程序的url\n */\nfunction getWxaForwardResult(wxaPageMap, url) {\n  const defaultRouteType = 'navigateTo';\n  if(wxaPageMap) {\n    try {\n      const matchdKey = Object.keys(wxaPageMap).find(key => {\n        return new RegExp(key).test(url);\n      });\n      if(!matchdKey) {\n        return {};\n      }\n      const config = wxaPageMap[matchdKey];\n      let miniProgramUrl = config.path;\n      const replaceParams = config.params;\n      const appendQuery = config.query;\n      const queryString = url.split('#')[0].split('?')[1];\n      if(queryString) {\n        if(replaceParams) {\n          // 通过config.params 替换 url中的特殊参数，重新构建miniProgramUrl\n          const query = parseQuery(queryString);\n          const wxaQuery = {};\n          Object.keys(query).forEach(key => {\n            if(key in replaceParams) {\n              wxaQuery[replaceParams[key]] = query[key];\n            } else {\n              wxaQuery[key] = query[key];\n            }\n          });\n          miniProgramUrl = miniProgramUrl + '?' + buildQuery(wxaQuery);\n        } else {\n          miniProgramUrl = miniProgramUrl + '?' + queryString;\n        }\n        if(appendQuery) {\n          miniProgramUrl = miniProgramUrl + '&' + appendQuery;\n        }\n      } else {\n        if(appendQuery) {\n          miniProgramUrl = miniProgramUrl + '?' + appendQuery;\n        }\n      }\n\n      const routeType = config.routeType || defaultRouteType;\n      return {\n        routeType,\n        miniProgramUrl\n      };\n    } catch (error) {\n      // report error and fallback to old navigate\n      throwErrorAsync(error);\n    }\n  }\n\n  const supportFallback = targetPages.some((page) => {\n    return url.indexOf(page) !== -1;\n  });\n  if(!supportFallback) {\n    return {};\n  }\n\n  const miniProgramUrl = '/pages/web_bridge/web_bridge?targetpage=' + url.replace('?', '&');\n  return {\n    routeType: defaultRouteType,\n    miniProgramUrl\n  };\n}\n\n/**\n * 判断是否支持使用小程序原生方法跳转\n * @private\n * @ignore\n * @param {string} url 待跳转的url\n * @returns {boolean} 是否支持使用小程序原生方法跳转\n */\nexport function isWxAppSupportForward(url) {\n  let isWxAppSupport = false;\n  const query = parseQuery(window.location.search);\n  // 约定url query中带有_x_minpgm_webnav_时走web跳转不会跳转到小程序原生页\n  if(query._x_minpgm_webnav_) {\n    return isWxAppSupport;\n  }\n  if(!url ||\n    typeof url !== 'string' ||\n    (!clientPlatform.isWeChatMiniProgram && !clientPlatform.isQQMiniProgram) ||\n    !window.wx ||\n    !window.wx.miniProgram) {\n    return false;\n  }\n  if(_wxaPageMap) {\n    try {\n      return Object.keys(_wxaPageMap).some(key => {\n        return new RegExp(key).test(url);\n      });\n    } catch (error) {\n      // report error and fallback to old navigate\n      throwErrorAsync(error);\n    }\n  }\n  targetPages.forEach((page) => {\n    if(url.indexOf(page) !== -1) {\n      isWxAppSupport = true;\n    }\n  });\n  return isWxAppSupport;\n}\n\nfunction createThrottleForwardWxAppPage(wait = wxAppNavigateWait) {\n  return throttle(forwardWxAppPage, wait);\n}\n\n/**\n * 使用小程序跳转api跳转相关页面\n * @ignore\n * @private\n * @param url\n * @param onSuccess\n */\nexport function forwardWxAppPage(url, onSuccess) {\n  const wxaForwardResult = getWxaForwardResult(_wxaPageMap, url);\n  const forwardFn = window.wx.miniProgram[wxaForwardResult.routeType];\n  if(forwardFn) {\n    forwardFn({\n      'url': wxaForwardResult.miniProgramUrl,\n      success: onSuccess\n    });\n  }\n}\n\nfunction buildURL(searchs, url) {\n  url = appendQuery(searchs, resolveFullUrl(url || location.href));\n  return url;\n}\n\n/**\n * 返回__NAVIGATION_MAP__中配置的key对应的value\n * @private\n * @ignore\n * @param key\n * @returns {*}\n */\nfunction getDestinationPathName(key) {\n  // 获取key时优先直接获取如果不存在尝试去除首位的'/'之后再获取一次\n  return window.__NAVIGATION_MAP__[key] ? window.__NAVIGATION_MAP__[key] : window.__NAVIGATION_MAP__[key.slice(1)];\n}\n\n/**\n * 返回map处理过之后的url信息\n * @private\n * @ignore\n * @param url\n * @returns {Object} finalUrlInfo\n * @property {string} finalUrlInfo.finalPathName 处理后的pathName\n * @property {Object} finalUrlInfo.finalUrlQuery 需要append到Url的query对象\n * @property {Boolean} finalUrlInfo.finalUrlInfo 是否唤起app\n */\nfunction getFinalUrlInfo(url) {\n  // 如果是微信环境则做map映射其他环境不需要做不存在被封禁的风险\n  if(window.__NAVIGATION_MAP__ && clientPlatform.isWeChatPlatform) {\n    const pathName = getPathName(url);\n    const resultUrlMap = {};\n    let finalPathName = pathName;\n    let finalUrlQuery = null;\n    while (getDestinationPathName(finalPathName) !== undefined) {\n      if(resultUrlMap[finalPathName] !== undefined) {\n        console.error(`circular navigation route ${pathName}`); // eslint-disable-line\n        break;\n      }\n      const destinationPathName = getDestinationPathName(finalPathName);\n      if(destinationPathName.toUpperCase() === 'APP') {\n        return { finalPathName, finalUrlQuery, launchApp: true };\n      }\n      if(destinationPathName.indexOf('?') !== -1) {\n        finalUrlQuery = Object.assign({}, finalUrlQuery, parseUrlQuery(destinationPathName));\n      }\n      finalPathName = resultUrlMap[finalPathName] = getPathName(destinationPathName);\n    }\n    return { finalPathName, finalUrlQuery, launchApp: false };\n  }\n  return { finalPathName: null, finalUrlQuery: null, launchApp: false };\n}\n\n/**\n * 获取navigationMap之后的跳转url\n * @private\n * @ignore\n * @param url\n * @returns {{launchApp: *, url: *}}\n */\nfunction processNavigationMap(url) {\n  const pathName = getPathName(url);\n  const finalUrlInfo = getFinalUrlInfo(url);\n  // 如果pathName不一致说明需要替换\n  if(finalUrlInfo.finalPathName && finalUrlInfo.finalPathName !== pathName) {\n    const replaceReg = new RegExp(`(.*)${pathName}`);\n    url = url.replace(replaceReg, `$1${finalUrlInfo.finalPathName}`);\n    if(finalUrlInfo.finalUrlQuery) {\n      url = appendQuery(finalUrlInfo.finalUrlQuery, url);\n    }\n  }\n  // 此处临时处理app内域名切换为`BackupHostname`时，传入相对路径会拼接mobile.yangkeduo.com的问题\n  // 按照统一路由规则添加pr_domain=encodeUrlComponent(`${location.protocol}//${location.hostName}`)\n  if(clientPlatform.isNativePlatform && BackupHostname[location.hostname]) {\n    const pr_domain = `${location.protocol}//${location.hostname}`;\n    // 全路径的url添加pr_domain统一路由不会替换域名，这里把url处理成不带origin的\n    url = getPathnameWithSearchAndHash(url);\n    url = appendQuery({ pr_domain }, url);\n  }\n  return { url, launchApp: finalUrlInfo.launchApp };\n}\n\nconst {\n  setNextPageQuery,\n  getNextPageQuery,\n  reload,\n  back,\n  initWxAppNavigateWait,\n  uniformForward,\n  maskAppPage,\n  replaceURL,\n  replaceQuery\n} = NavigationResult;\nexport {\n  setNextPageQuery,\n  getNextPageQuery,\n  reload,\n  back,\n  initWxAppNavigateWait,\n  uniformForward,\n  maskAppPage,\n  replaceURL,\n  replaceQuery\n};\nexport default NavigationResult;\n","/**\n * 原来维护在constants中的info信息应该在prepare的时候配置并传入\n * @file page.js, 页面基本类\n * @author aotuman/daben\n */\nimport { compareVersion, getCurrentPlatform } from '@pdd/platform-util';\nimport { nanoid, parseQuery } from '@pdd/core-util';\n\n/**\n * 页面信息类\n *\n * @class PageInfo\n */\nfunction PageInfo(url, pageProperty) {\n  if(typeof pageProperty === 'object') {\n    this.pageProperty = pageProperty;\n  }\n  this.initByUrl(url);\n}\n\nPageInfo.prototype.initByUrl = function(url) {\n  url = url || window.location.href;\n  const search = url.split('#')[0].split('?')[1] || '';\n  const urlQuery = parseQuery(search);\n  this.pageELSN = urlQuery.page_el_sn || null;\n  this.query = urlQuery;\n  const shortPathname = getShortPathname(url);\n  let pageKey = shortPathname.slice(1).split('.')[0]; // pickup from '/xxx.html'\n  this.initWithPageKey(pageKey);\n};\n\nPageInfo.prototype.initWithPageKey = function(pageKey) {\n  this.pageKey = pageKey || '';\n  const info = Object.assign({}, this.pageProperty || {});\n  // info\n  this.info = info;\n  this.pageName = info.pageName || pageKey;\n  this.pageSN = info.pageSN || null;\n  this.tkShareClick = info.tkShareClick || false;\n  this.keyParams = info.keyParams || {};\n  this.query = this.query || {};\n  this.native = info.native || {};\n  if(typeof window !== 'undefined' && window.rawData && window.rawData.pageID) {\n    this.pageID = window.rawData.pageID;\n  } else if(this.query && this.query.page_id) {\n    this.pageID = this.query.page_id;\n  } else {\n    let name = this.pageName;\n    const pageSN = this.pageSN;\n    if(name.match(/app_\\w+_popup/)) {\n      name = 'index';\n    }\n    this.pageID = info.pageId || createPageID(name, pageSN, pageKey);\n  }\n  this.pvInfo = info.pv || {};\n\n  if(pageKey.match(/^app_\\w+/)) {\n    this.pvInfo.isAppModal = true;\n  }\n};\n\nPageInfo.prototype.getPageName = function() {\n  return this.pageName;\n};\n\nPageInfo.prototype.getPageSN = function() {\n  return this.pageSN;\n};\n\nPageInfo.prototype.getPageID = function() {\n  return this.pageID;\n};\n\nPageInfo.prototype.getQuery = function() {\n  return this.query;\n};\n\nPageInfo.prototype.getNativePageContext = function() {\n  const clientPlatform = getCurrentPlatform();\n  if(clientPlatform.isNativePlatform) {\n    const pageContext = {};\n    for(const key in this.query) {\n      if(!key.startsWith('refer')) {\n        pageContext[key] = this.query[key];\n      }\n    }\n    return Object.assign(pageContext, {\n      /*eslint-disable*/\n      page_name: this.pageName,\n      page_id: this.pageID,\n      page_sn: this.pageSN\n      /* eslint-enable */\n    });\n  }\n};\n\nPageInfo.prototype.getAdQuery = function() {\n  return {\n    cid: this.query.cid,\n    src: this.query.src,\n    campaign: this.query.campaign\n  };\n};\n\nPageInfo.prototype.getNativeQuery = function(current) {\n  const nativeInfo = this.getNativeInfo(current);\n  if(!nativeInfo) {\n    return this.query;\n  }\n  const query = Object.assign({}, this.query);\n  if(nativeInfo.queryMap) {\n    for(const key in nativeInfo.queryMap) {\n      if(nativeInfo.queryMap.hasOwnProperty(key)) {\n        const nativeKey = nativeInfo.queryMap[key];\n        if(query[key]) {\n          query[nativeKey] = query[key];\n        }\n      }\n    }\n  }\n  return query;\n};\n\nPageInfo.prototype.setKeyParams = function(params) {\n  for(const key in params) {\n    if(params.hasOwnProperty(key) && params[key] == null) {\n      delete params[key];\n    }\n  }\n  this.keyParams = Object.assign({}, this.keyParams, params);\n};\n\nPageInfo.prototype.getKeyParams = function() {\n  return this.keyParams;\n};\n\nPageInfo.prototype.getNativeInfo = function(current) {\n  return this.native[current.toLowerCase()];\n};\n\nPageInfo.prototype.checkNativePageVersion = function(current, version) {\n  const nativeInfo = this.getNativeInfo(current);\n  if(!nativeInfo || !nativeInfo.version) {\n    return false;\n  }\n  return compareVersion(version, nativeInfo.version) >= 0;\n};\n\nPageInfo.prototype.getNativePageName = function(current) {\n  const nativeInfo = this.getNativeInfo(current);\n  if(!nativeInfo) {\n    return;\n  }\n  return nativeInfo.name;\n};\n\nPageInfo.prototype.getKeyParamsFromQuery = function() {\n  const keys = this.pvInfo.keys || [];\n  const params = {};\n  const query = this.getQuery();\n  keys.forEach(function(item) {\n    let key;\n    let value;\n    if(typeof item === 'string') {\n      key = item;\n      value = query[key];\n    } else if(typeof item === 'object') {\n      key = item.key;\n      value = query[key];\n      if(item.mapping) {\n        item.mapping.forEach(function(mappingKey) {\n          if(query[mappingKey] != null) {\n            value = query[mappingKey];\n          }\n        });\n      }\n      if(value == null && item.default != null) {\n        value = item.default;\n      }\n    }\n    if(key != null && value != null) {\n      params[key] = value;\n    }\n  });\n  this.setKeyParams(params);\n  return this.getKeyParams();\n};\n\nPageInfo.prototype.hasIndividualPV = function() {\n  return this.pvInfo.indiv;\n};\n\nPageInfo.prototype.isAppModal = function() {\n  return this.pvInfo.isAppModal;\n};\n\nfunction getShortPathname(url) {\n  const arr = url.split('?')[0].split('/');\n  return '/' + arr[arr.length - 1];\n}\n\nfunction createPageID(pageName, pageSN, pageKey) {\n  return [\n    pageSN || pageName || pageKey || '',\n    Date.now(),\n    nanoid(10)\n  ].join('_');\n}\n\nexport default PageInfo;\n","/**\n * @file PageManager.js, 页面管理\n * @author aotuman\n */\nimport PageInfo from './pageInfo';\nimport { setPageContext, getReferPageContext, getPageShownType } from '@pdd/native-util';\nimport { getCurrentPlatform, compareVersion } from '@pdd/platform-util';\nimport { buildQuery } from '@pdd/core-util';\n\n/**\n * 页面信息管理\n *\n * @class PageManager\n */\nfunction PageManager() {\n}\n\n/**\n *  新增函数和原init区别:\n *  1、将native jssdk getReferPageContext抽离出去由外部传入\n *  2、将setPageContext逻辑去除通过返回的pageInfo对象的getNativePageContext方法获取需要设置的native Context由调用方主动\n *  调用setPageContext来设置\n * @param {object} opts 通过传入参数修改pageInfo的相关信息\n * @return {PageInfo}\n */\nPageManager.prototype.initPageInfo = function(opts) {\n  opts = opts || {};\n  if(this.pageInfo) {\n    return this.pageInfo;\n  }\n\n  this.pageInfo = new PageInfo(window.location.href, opts.pageProperty);\n  const query = this.pageInfo.getQuery();\n  const referQuery = pickupReferQuery(query);\n\n  if(referQuery) {\n    this.updateReferInfo(referQuery);\n  }\n\n  return this.pageInfo;\n};\n\n/**\n * 初始化pageInfo相关信息\n * @param {string} url 无用实际用的location.href\n * @param {Object} opts 设置pageInfo相关属性\n */\nPageManager.prototype.init = async function(url, opts) {\n  opts = opts || {};\n\n  const pageInfo = this.initPageInfo(opts);\n\n  const callback = typeof opts.callback === 'function' ? opts.callback : () => {\n  };\n\n  const { isNativePlatform, version } = getCurrentPlatform();\n  if(!isNativePlatform) {\n    callback();\n    return;\n  }\n\n  getReferPageContext().then(\n    referInfo => {\n      this.updateReferPageContextFromNative(referInfo);\n      callback();\n    },\n    callback\n  );\n\n  const checkPageShownTypeFirst = compareVersion(version, '5.73.0') < 0;\n  if(checkPageShownTypeFirst) {\n    // 在 iOS 上， shown_type 是字符串；android 上则是数字, 版本过低，或者调用错误\n    getPageShownType().then(data => +data.shown_type === 1).catch(() => false)\n      .then(isEmbedPage => !isEmbedPage && setPageContext(pageInfo.getNativePageContext()));\n    return;\n  }\n  setPageContext(pageInfo.getNativePageContext()).catch((error) => {\n    // 错误码60100代表是内嵌h5，该错误码将不抛错\n    if(error && error.errorCode !== 60100) {\n      throw error;\n    }\n  });\n};\n\n/**\n * 获取pageInfo实例\n * @returns {PageInfo|PageInfo}\n */\nPageManager.prototype.getPageInfo = function() {\n  if(!this.pageInfo) {\n    this.init();\n  }\n  return this.pageInfo;\n};\n\n/**\n * 获取当前页面的query信息\n * @returns {Object}\n */\nPageManager.prototype.getQuery = function() {\n  if(!this.pageInfo) {\n    this.init();\n  }\n  return this.pageInfo.getQuery();\n};\n\n/**\n * 获取当前页面的query信息\n * @returns {Object}\n */\nPageManager.prototype.getParameters = function() {\n  return this.getQuery();\n};\n\n/**\n * 获取query中某个key的值\n * @param key 键\n * @returns {string} 值\n */\nPageManager.prototype.getParameter = function(key) {\n  const query = this.getQuery() || {};\n  return query[key];\n};\n\n/**\n * 获取当前页面的PageName\n * @returns {string}\n */\nPageManager.prototype.getPageName = function() {\n  if(!this.pageInfo) {\n    return '';\n  }\n  return this.pageInfo.getPageName();\n};\n\n/**\n * 获取当前页面的pageSN\n * @returns {string}\n */\nPageManager.prototype.getPageSN = function() {\n  if(!this.pageInfo) {\n    return '';\n  }\n  return this.pageInfo.getPageSN();\n};\n\n/**\n * 获取当前页面的pageID\n * @returns {string}\n */\nPageManager.prototype.getPageID = function() {\n  if(!this.pageInfo) {\n    return '';\n  }\n  return this.pageInfo.getPageID();\n};\n\n/**\n * 设置当前页面设置的keyParams\n * @param {object} params\n */\nPageManager.prototype.setKeyParams = function(params) {\n  if(!this.pageInfo) {\n    return;\n  }\n  this.pageInfo.setKeyParams(params);\n};\n\n/**\n * 获取当前页面设置的keyParams\n * @returns {Object}\n */\nPageManager.prototype.getKeyParams = function() {\n  if(!this.pageInfo) {\n    return null;\n  }\n  return this.pageInfo.getKeyParams();\n};\n\n/**\n * 将query值设置到keyParams内并返回keyParams\n * @returns {Object}\n */\nPageManager.prototype.getKeyParamsFromQuery = function() {\n  if(!this.pageInfo) {\n    return;\n  }\n  return this.pageInfo.getKeyParamsFromQuery();\n};\n\n/**\n * 更新Refer信息\n * @param {Object} referQuery\n */\nPageManager.prototype.updateReferInfo = function(referQuery) {\n  referQuery = referQuery || {};\n  if(!this.referInfo) {\n    this.referInfo = {};\n  }\n  for(let key in referQuery) {\n    const value = referQuery[key];\n    if(value) {\n      // 如果不是refer_开头,不是以_ex_开头说明是需要主动变更为refer_的字段\n      if(!key.startsWith('refer_') && !key.startsWith('_ex_')) {\n        key = [ 'refer', key ].join('_');\n      } else if(key.startsWith('_ex_')) { // 如果是_ex_开头,就从_ex_里取对应字段\n        key = `refer_${key.slice(4)}`;\n      }\n      this.referInfo[key] = value;\n    }\n  }\n};\n\n/**\n * 获取referInfo信息,浅拷贝\n * @returns {Object}\n */\nPageManager.prototype.getReferPageQuery = function() {\n  if(!this.referInfo) {\n    return null;\n  }\n  return Object.assign({}, this.referInfo);\n};\n\n/**\n * 获取refer_page_id\n * @returns {string|null}\n */\nPageManager.prototype.getReferPageID = function() {\n  if(!this.referInfo) {\n    return null;\n  }\n  return this.referInfo.refer_page_id;\n};\n\n/**\n * 获取refer_page_name\n * @returns {string|null}\n */\nPageManager.prototype.getReferPageName = function() {\n  if(!this.referInfo) {\n    return null;\n  }\n  return this.referInfo.refer_page_name;\n};\n\n/**\n * 获取refer_page_section\n * @returns {string|null}\n */\nPageManager.prototype.getReferPageSection = function() {\n  if(!this.referInfo) {\n    return null;\n  }\n  return this.referInfo.refer_page_section;\n};\n\n/**\n * 获取refer_page_element\n * @returns {string|null}\n */\nPageManager.prototype.getReferPageElement = function() {\n  if(!this.referInfo) {\n    return null;\n  }\n  return this.referInfo.refer_page_element;\n};\n\n/**\n * 获取ReferPageQueryString\n * @returns {string}\n */\nPageManager.prototype.getReferPageQueryString = function() {\n  const query = this.getReferPageQuery();\n  return buildQuery(query);\n};\n\nPageManager.prototype.addReferPageQueryString = function(url) {\n  const pageInfo = new PageInfo(url);\n  // 覆盖已写的东西\n  const query = Object.assign({}, pageInfo.getQuery(), this.getReferPageQuery());\n  return [ url.split('?')[0], buildQuery(query) ].join('?');\n};\n\n/**\n * @deprecated 使用addPageAsRefer替换\n * @param {string} url\n * @returns {string}\n */\nPageManager.prototype.addPageNameAsRefer = function(url) {\n  const pageInfo = new PageInfo(url);\n  // 覆盖已写的东西\n  const query = Object.assign({}, pageInfo.getQuery(), {\n    /*eslint-disable*/\n    refer_page_name: this.getPageName()\n    /* eslint-enable */\n  });\n  const newUrl = [ url.split('?')[0], buildQuery(query) ].join('?');\n  return newUrl;\n};\n\n/**\n * 将refer信息拼接到url上\n * @param url\n * @returns {string}\n */\nPageManager.prototype.addPageAsRefer = function(url) {\n  if(!url) {\n    return;\n  }\n  const pageInfo = new PageInfo(url);\n  // 覆盖已写的东西\n  const referParams = {\n    refer_page_name: this.getPageName(),\n    refer_page_id: this.getPageID()\n  };\n  const referPageSN = this.getPageSN();\n  if(referPageSN) {\n    referParams.refer_page_sn = referPageSN;\n  }\n\n  const referPageELSN = pageInfo.pageELSN || '';\n  if(referPageELSN) {\n    referParams.refer_page_el_sn = referPageELSN;\n  }\n\n  const query = Object.assign({}, pageInfo.getQuery(), referParams);\n  const newUrl = [ url.split('?')[0], buildQuery(query) ].join('?');\n  return newUrl;\n};\n\n/**\n * 添加页面间传递的参数（包括refer和_x_开头的参数）\n *\n * @param  {string} url 目标url\n * @return {string}     处理后的url\n */\nPageManager.prototype.addPageTransferParameters = function(url) {\n  if(!url) {\n    return;\n  }\n  const pageInfo = new PageInfo(url);\n  // 覆盖已写的东西 添加refer\n  const referParams = {\n    refer_page_name: this.getPageName(),\n    refer_page_id: this.getPageID()\n  };\n  const referPageSN = this.getPageSN();\n  if(referPageSN) {\n    referParams.refer_page_sn = referPageSN;\n  }\n\n  const referPageELSN = pageInfo.pageELSN || '';\n  if(referPageELSN) {\n    referParams.refer_page_el_sn = referPageELSN;\n  }\n\n  // 添加_x_开头的参数\n  const extendParams = this.getExtendTransferParameters(true);\n\n  const newQuery = Object.assign({}, extendParams, pageInfo.getQuery(), referParams);\n  const newUrl = [ url.split('?')[0], buildQuery(newQuery) ].join('?');\n  return newUrl;\n};\n\n/**\n * 获取除refer之外要传递的参数，规则如下：\n * 1._x_开头的参数\n * 2.xcx_trace_id,xcx_version小程序透传参数\n * 3._ex_转成_x_(只在跳转时修改)\n * 4.msgid转成_x_msgid(只在跳转时修改)\n * 5.refer_share_id转成_x_share_id(只在跳转时修改)\n *\n * @param  {boolean} isTransferParameters 是否用于页面传递的参数\n * @return {object} url参数\n */\nPageManager.prototype.getExtendTransferParameters = function(isTransferParameters) {\n  const query = this.getQuery() || {};\n  const extendParams = {};\n  for(const key in query) {\n    if(!query.hasOwnProperty(key) || extendParams[key]) {\n      // 防止_x_旧参数覆盖新参数\n      continue;\n    }\n    let newKey = '';\n    // 1._x_开头的参数\n    if(key.startsWith('_x_')) {\n      extendParams[key] = query[key];\n      // 2. xcx_trace_id 小程序透传参数\n    } else if(key === 'xcx_trace_id' || key === 'xcx_version') {\n      extendParams[key] = query[key];\n      // 3._ex_转成_x_(只在跳转时修改)\n    } else if(isTransferParameters && key.startsWith('_ex_')) {\n      newKey = key.replace('_ex_', '_x_');\n      extendParams[newKey] = query[key];\n      // 4.msg_id转成_x_msg_id(只在跳转时修改)\n    } else if(isTransferParameters && key === 'msgid') {\n      newKey = '_x_msgid';\n      extendParams[newKey] = query[key];\n      // 5.refer_share_id转成_x_share_id(只在跳转时修改)\n    } else if(isTransferParameters && key === 'refer_share_id') {\n      newKey = '_x_share_id';\n      extendParams[newKey] = query[key];\n    }\n  }\n\n  return extendParams;\n};\n\n/**\n * 是否有自定义pv打点\n * @returns {Boolean}\n */\nPageManager.prototype.hasIndividualPV = function() {\n  if(!this.pageInfo) {\n    return null;\n  }\n  return this.pageInfo.hasIndividualPV();\n};\n\n/**\n * 是否app弹窗\n * @returns {boolean}\n */\nPageManager.prototype.isAppModal = function() {\n  if(!this.pageInfo) {\n    return false;\n  }\n  return this.pageInfo.isAppModal();\n};\n\n/**\n * 获取广告query信息\n * @returns {string|{src: *, campaign: *, cid: *}}\n */\nPageManager.prototype.getAdQuery = function() {\n  if(!this.pageInfo) {\n    return '';\n  }\n  return this.pageInfo.getAdQuery();\n};\n\n/**\n * 根据url返回改url对应的pageInfo\n * @param url\n * @returns {PageInfo|null}\n */\nPageManager.prototype.getPageInfoByUrl = function(url) {\n  if(!url) {\n    return null;\n  }\n  return new PageInfo(url);\n};\n\n/**\n * 获取app给出的referPageContext并跟新keyParams,referInfo\n * @param {Object} data\n */\nPageManager.prototype.updateReferPageContextFromNative = function(data) {\n  this.setKeyParams(data);\n  this.updateReferInfo(data);\n};\n\n/**\n * 获取透传给app forward的refer信息\n * @param params\n * @returns {null}\n */\nPageManager.prototype.getTransientReferPageParams = function(params) {\n  let referQuery;\n  let url;\n  if(typeof params === 'string') {\n    url = params;\n  } else if(params.url) {\n    url = params.url;\n  }\n  if(url) {\n    const pageInfo = new PageInfo(url);\n    referQuery = pickupReferQuery(pageInfo.getQuery());\n  } else {\n    referQuery = pickupReferQuery(params);\n  }\n  if(!referQuery) {\n    return null;\n  }\n  const res = {};\n  let find = false;\n  for(const key in referQuery) {\n    if(referQuery.hasOwnProperty(key)) {\n      const value = referQuery[key];\n      const transientKey = key.startsWith('refer_') ? key.slice(6) : key.startsWith('_ex_') ? key.slice(4) : ''; // pick up from refer_xxx or _ex_xxxx\n      if(!value || !transientKey) {\n        continue;\n      }\n      res[transientKey] = value;\n      find = true;\n    }\n  }\n  return find ? res : null;\n};\n\n/**\n * 获取当前页面在page constant里面配置的app相关信息\n * @param current\n * @returns {*}\n */\nPageManager.prototype.getNativeInfo = function(current) {\n  if(!this.pageInfo) {\n    return;\n  }\n  return this.pageInfo.getNativeInfo(current);\n};\n\n/**\n * 检查是否满足page constant里面app版本信息\n * @param current\n * @param version\n * @returns {boolean}\n */\nPageManager.prototype.checkNativePageVersion = function(current, version) {\n  if(!this.pageInfo) {\n    return;\n  }\n  return this.pageInfo.checkNativePageVersion(version);\n};\n\n/**\n * 获取constant里面配置的pageName信息\n * @param current\n * @returns {undefined|*}\n */\nPageManager.prototype.getNativePageName = function(current) {\n  if(!this.pageInfo) {\n    return;\n  }\n  return this.pageInfo.getNativePageName(current);\n};\n\nfunction pickupReferQuery(query) {\n  query = query || {};\n  const res = {};\n  let find = false;\n  for(const key in query) {\n    // refer_或者_ex_开头都被认为是referQuery\n    if(key.startsWith('refer_') || key.startsWith('_ex_')) {\n      const value = query[key];\n      if(value) {\n        res[key] = value;\n        find = true;\n      }\n    }\n  }\n  return find ? res : null;\n}\n\nconst pageManagerDefaultExport = {\n  instance: null,\n  getInstance: function() {\n    if(!this.instance) {\n      this.instance = new PageManager();\n    }\n    return this.instance;\n  }\n};\n\nfunction runInstanceMethod(method, params = []) {\n  if(!process.env.BROWSER) {\n    throw new Error('只能在客户端调用该方法');\n  }\n  const instance = pageManagerDefaultExport.getInstance();\n  return instance[method](...params);\n}\n\nexport function getPageID() {\n  return runInstanceMethod('getPageID');\n}\n\nexport function getExtendTransferParameters(isTransferParameters) {\n  return runInstanceMethod('getExtendTransferParameters', [ isTransferParameters ]);\n}\n\nexport function getKeyParams() {\n  return runInstanceMethod('getKeyParams');\n}\n\nexport function getPageName() {\n  return runInstanceMethod('getPageName');\n}\n\nexport function getPageSN() {\n  return runInstanceMethod('getPageSN');\n}\n\nexport function getReferPageQuery() {\n  return runInstanceMethod('getReferPageQuery');\n}\n\nexport function addPageTransferParameters(url) {\n  return runInstanceMethod('addPageTransferParameters', [ url ]);\n}\n\nexport function getPageInfoByUrl(url) {\n  return runInstanceMethod('getPageInfoByUrl', [ url ]);\n}\n\nexport function getPageInfo() {\n  return runInstanceMethod('getPageInfo');\n}\n\nexport function getKeyParamsFromQuery() {\n  return runInstanceMethod('getKeyParamsFromQuery');\n}\n\nexport function hasIndividualPV() {\n  return runInstanceMethod('hasIndividualPV');\n}\n\nexport function init(url, opts) {\n  return runInstanceMethod('init', [ url, opts ]);\n}\n\nexport function isAppModal() {\n  return runInstanceMethod('isAppModal');\n}\n\nexport function setKeyParams(params) {\n  return runInstanceMethod('setKeyParams', [ params ]);\n}\n\nexport default pageManagerDefaultExport;\n","/**\n * Created by jiangliuer on 2019/4/23\n */\nconst REG = {\n  MiniProgram: /miniprogram/i,\n  WeChat: /MicroMessenger/i,\n  QQ: /QQ\\/[\\d\\.]+\\s+/i, //eslint-disable-line\n  QQAndQzone: /(QQ\\/[\\d\\.]+\\s+)|Qzone/i, //eslint-disable-line\n  QQApp: /QQ\\//i,\n  Weibo: /Weibo/i,\n  Ios: /iphone|ipad|ipod/i,\n  IosVersion: /os (\\d+)_(\\d+)_?(\\d+)?/i,\n  Android: /Android/i,\n  AndroidVersion: /Android (\\d+).?(\\d+)?.?(\\d+)?/i,\n  AndroidNative: /phh_android_version/i,\n  IosNative: /phh_ios_version/i,\n  IosApiRequest: /BundleID\\/com.xunmeng.pinduoduo/i,\n  Mobile: /Android|webOS|iPhone|iPad|iPod/i,\n  AndroidNativeVersion: /(phh_android_version)\\/([^\\s]+)\\s*/i,\n  IosNativeVersion: /(phh_ios_version|AppVersion)\\/([^\\s]+)\\s*/i,\n  MecoWebViewCore: /MecoCore\\/(\\d)/i,\n  MecoWebViewSdk: /MecoSDK\\/(\\d)/i\n};\n\n/**\n * @typedef {object} PLATFORM\n * @property {string} Unknown 当前ua对应的platform未知\n * @property {string} PddIOS 当前ua对应的platform是ios native app\n * @property {string} PddAndroid 当前ua对应的platform是android native app\n * @property {string} WeChat 当前ua对应的platform是微信\n * @property {string} Weibo 当前ua对应的platform是微博\n * @property {string} QQ 当前ua对应的platform是QQ\n * @property {string} QQApp 当前ua对应的platform是QQ小程序\n * @property {string} WxApp 当前ua对应的platform是微信小程序\n */\nexport const PLATFORM = {\n  Unknown: 'unknown',\n  PddIOS: 'ios',\n  PddAndroid: 'android',\n  PDDTinyAndorid: 'tinyAndroid',\n  WeChat: 'wechat',\n  Weibo: 'weibo',\n  QQ: 'qq',\n  QQApp: 'qqapp',\n  WxApp: 'wxapp'\n};\n/**\n * @typedef {object} SYSTEM\n * @property {string} Android 当前ua对应的操作系统是android\n * @property {string} IOS 当前ua对应的操作系统是ios\n * @property {string} Unknown 当前ua对应的操作系统是unknown\n */\nexport const SYSTEM = {\n  Android: 'android',\n  IOS: 'ios',\n  Unknown: 'unknown'\n};\n\n/**\n * 返回Native app版本号\n * @ignore\n * @param ua\n * @param platform\n * @returns {string}\n */\nexport function getNativeVersion(ua, platform) {\n  const regNativeVersion = platform === PLATFORM.PddAndroid ? REG.AndroidNativeVersion : REG.IosNativeVersion;\n  const matchVersions = ua.match(regNativeVersion);\n  if (matchVersions) {\n    return matchVersions[2] || '';\n  }\n  return '';\n}\n\n/**\n * 内部方法判断ua是否满足Meco内核，后面可能需要获取内核版本，sdk版本\n * @ignore\n * @private\n * @param ua\n * @returns {*}\n */\nexport function isMecoWebView(ua) {\n  return REG.MecoWebViewCore.test(ua) && REG.MecoWebViewSdk.test(ua);\n}\n\n/**\n * 版本号比较，版本号格式x.x.x\n * @param {string} v1 需要比较版本号大小的版本号1\n * @param {string} v2 需要比较版本号大小的版本号2\n * @returns {number} 如果v1>v2返回值大于0，如果v1=v2返回值等于0，如果v1<v2返回值小于0\n */\nexport function compareVersion(v1, v2) {\n  const validate = function (version) {\n    if (typeof version !== 'string') {\n      throw new TypeError('Invalid argument expected string');\n    }\n  };\n  [v1, v2].forEach(validate);\n  const toIntArray = function (version) {\n    return version.split('.').map(token => {\n      return parseInt(token, 10) || 0;\n    });\n  };\n  const parts1 = toIntArray(v1);\n  const parts2 = toIntArray(v2);\n  const length = Math.max(parts1.length, parts2.length);\n  for (let i = 0; i < length; ++i) {\n    const part1 = parts1[i] || 0;\n    const part2 = parts2[i] || 0;\n    if (part1 !== part2) {\n      return part1 - part2;\n    }\n  }\n  return 0;\n}\n\n/**\n * 判断当前是否处于组件包环境 如果是node环境直接返回false如果是客户端环境判断protocol是否等于amcomponent:\n * @return {boolean}\n */\nexport function isWebBundle() {\n  return process.env.BROWSER && window.location.protocol === 'amcomponent:';\n}\n\n/**\n * @ignore\n * @private\n * @param {object} cache 缓存对象 内部调用保证传入的是object\n * @param key 要从缓存中获取的数据的key\n * @param val 如果key不存在将val设置到缓存中\n * @returns {*} 从缓存中取出的key的值\n */\nexport function getCache(cache, key, val) {\n  if (typeof cache[key] === 'undefined') {\n    cache[key] = val;\n  }\n  return cache[key];\n}\n\n/**\n * 判断ua中是否含有miniprogram\n * @param ua\n * @returns {boolean}\n */\nfunction isMiniProgram(ua = '') {\n  // ua中含有miniprogram\n  return REG.MiniProgram.test(ua) || (typeof window !== 'undefined' && window.__wxjs_environment === 'miniprogram');\n}\n\n/**\n * 对传入的ua解析返回当前所处的平台\n * @ignore\n * @param {string} ua\n */\nexport function getPlatformByUa(ua = '') {\n  if (REG.AndroidNative.test(ua)) {\n    if (ua.includes('app_type/tiny')) {\n      return PLATFORM.PDDTinyAndorid;\n    }\n    return PLATFORM.PddAndroid;\n  }\n  if (REG.IosNative.test(ua) || REG.IosApiRequest.test(ua)) {\n    return PLATFORM.PddIOS;\n  }\n  if (REG.WeChat.test(ua)) {\n    // 如果含有miniprogram为小程序\n    return isMiniProgram(ua) ? PLATFORM.WxApp : PLATFORM.WeChat;\n  }\n  if (REG.Weibo.test(ua)) {\n    return PLATFORM.Weibo;\n  }\n  if (REG.QQApp.test(ua) && isMiniProgram(ua)) {\n    return PLATFORM.QQApp;\n  }\n  if (REG.QQAndQzone.test(ua)) {\n    return PLATFORM.QQ;\n  }\n  return PLATFORM.Unknown;\n}\n\n/**\n * 返回当前是Android Ios 还是unknown\n * @ignore\n * @param ua\n * @return {string}\n */\nexport function getSystem(ua) {\n  if (REG.Ios.test(ua)) {\n    return SYSTEM.IOS;\n  }\n  if (REG.Android.test(ua)) {\n    return SYSTEM.Android;\n  }\n  return SYSTEM.Unknown;\n}\n\n/**\n * 获取系统版本号\n * @ignore\n * @param {string} ua\n * @returns {string}\n */\nexport function getSystemVersion(ua) {\n  const system = getSystem(ua);\n  let regSystemVersion = '';\n  if (system === SYSTEM.IOS) {\n    regSystemVersion = REG.IosVersion;\n  }\n  if (system === SYSTEM.Android) {\n    regSystemVersion = REG.AndroidVersion;\n  }\n  if (regSystemVersion) {\n    const SystemVersions = ua.match(regSystemVersion);\n    const formatVersions = SystemVersions\n      ? [SystemVersions[1], SystemVersions[2], SystemVersions[3]].map(version => {\n        return version ? parseInt(version, 10) : 0;\n      })\n      : [];\n    return formatVersions.join('.');\n  }\n  return '';\n}\n\n/**\n * 判断当前是否在手机端\n * @ignore\n * @param ua\n * @returns {boolean}\n */\nexport function isMobilePlatform(ua = '') {\n  return REG.Mobile.test(ua);\n}\n","/**\r\n * Created by jiangliuer on 2019/5/20\r\n */\r\nimport { getPlatformByUa, getSystemVersion, getSystem } from './common';\r\n\r\n/**\r\n * platform包含的属性及方法\r\n * @example <caption>默认示例传入ua</caption>\r\n * import {getPlatform,SYSTEM} from '@pdd/platform-util';\r\n * const platform = getPlatform(ua);\r\n * if(platform.system === SYSTEM.Android){\r\n *    doSomeThing();\r\n * }\r\n * @example <caption>client端</caption>\r\n * import {getPlatform,SYSTEM} from '@pdd/platform-util';\r\n * const platform = getPlatform(window.navigator.userAgent);\r\n * if(platform.system === SYSTEM.Android){\r\n *    doSomeThing();\r\n * }\r\n * @interface\r\n */\r\nclass IPlatform {\r\n  /**\r\n   *\r\n   * Platform构造函数\r\n   * @param {string} ua 浏览器user-agent\r\n   */\r\n  constructor(ua = '') {\r\n    /**\r\n     * 缓存对象，用于缓存计算结果\r\n     * @ignore\r\n     * @type {{}}\r\n     */\r\n    this.cache = {};\r\n    /**\r\n     * 当前ua\r\n     * @type {string}\r\n     */\r\n    this.ua = ua;\r\n  }\r\n  /**\r\n   * 当前platform:  PLATFORM.PddAndroid,PLATFORM.PddIOS,PLATFORM.QQ,PLATFORM.QQApp,PLATFORM.Weibo,PLATFORM.WxApp,PLATFORM.WeChat\r\n   * @type {string}\r\n   */\r\n  get platform() {\r\n    return getPlatformByUa(this.ua);\r\n  }\r\n\r\n  /**\r\n   * 返回当前系统\r\n   * @type {string}\r\n   */\r\n  get system() {\r\n    return getSystem(this.ua);\r\n  }\r\n\r\n  /**\r\n   * 返回当前系统版本号\r\n   * @type {string}\r\n   */\r\n  get systemVersion() {\r\n    return getSystemVersion(this.ua);\r\n  }\r\n  /* ========= Native================ */\r\n  /**\r\n   * 当前版本号仅native\r\n   * @type {string}\r\n   */\r\n  get version() {\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * 是否native app\r\n   * @type {boolean}\r\n   */\r\n  get isNativePlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否native lite app\r\n   * @type {boolean}\r\n   */\r\n  get isLiteNativePlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否极小包 app\r\n   * @type {boolean}\r\n   */\r\n  get isTinyNativePlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * app webview内核是否Meco内核\r\n   * @type {boolean}\r\n   */\r\n  get isMecoCore() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否马甲包 app\r\n   * @type {boolean}\r\n   */\r\n  get isMajiabaoNativePlatform() {\r\n    return false;\r\n  }\r\n\r\n  // /**\r\n  //  * 是否支持组件包\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isModuleVersion() {\r\n  //   return false;\r\n  // }\r\n  //\r\n  // /**\r\n  //  * 是否支持native chat\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeChatVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持native login\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeLoginVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持native tabbar\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeTabBarVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持写native日志功能\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeLogVersion() {\r\n  //   return false;\r\n  // }\r\n  //\r\n  // /**\r\n  //  * 是否支持Native Index\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeIndexVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeUpdateVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持Naitve店铺页面\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeMallPageVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持Native图片查看器\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeImageViewerVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *是否支持QQPay版本\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeQQPayVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持Native订单页\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeOrdersPageVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAliPayDirectDebitVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持Native Socket\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPddPushSocketVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持Native专题页\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeSubjectsPageVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPhotoDisabledVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持Naive通讯录\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeContactVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *是否支持通讯录新模块\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeNewContactVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *通讯录支持静默权限查询\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeContactAuthorityVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *支持语音拉人功能的版本\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isGroupAudioRecordVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持评论后获取优惠券\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isTakeCouponAfterCommentVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * native friends system version\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeFriendsVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *IOS分享时未安装第三方应用提示\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isIOSShareUninstallNotifition() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *原生聊天支持语音消息，好友分享／漂流瓶 可以发语音消息\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportAudioMsgVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *团页面快速返回浏览列表\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isGroupFastBackVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *原生显示催发货按钮\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUrgeShipmentVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *团页面大图分享\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isGroupShareImageVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *原生可传图toast\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isShowHUDVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *IOS分享图片压缩\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isIOSCompressShareImage() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *原生评价页面生成红包\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isTakeCouponInCommentPage() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isCouponGroupShare() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *免费试用商品抽奖结果改为中奖，未中奖两种结果\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNewOrderStatusVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *原生花呗分期支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isHBInstallmentPayVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 团页面新版快速返回浏览列表(支持返回到web页面)\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNewGroupFastBackVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *原生title动画\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportSetTitleAnimation() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *成团通知客户端团状态变更\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUpdateTimelineOrderStatusNotification() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *是否支持用系统音量播放音频\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPlayAudioWithSystemVol() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *tabbar不显示海淘入口\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNoHaitaoVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持用固定音量播放音频\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPlayAudioWithSettleVol() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *拼小圈删除后通知客户端\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPDDTimelineFeedDeleteNotification() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 秒杀频道提醒\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeSpikeRemindVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 秒杀提醒-日历\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeSpikeCalendardVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 秒杀提醒-合并通知\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSpikeNoticeUnionVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 支持关闭Android的横滑切Tab\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isHorizontalScrollVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 下单页不可送达提示移到地址列表页\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isShowAddressCantReceiveVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 电器城是否显示原生tab\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isEletricShowNativeTab() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持写native日志\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportNativeLog() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 判断webview页面是否在app的tab内嵌中\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportCheckWebviewInTab() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 判断webview是被预加载了还是实际展示在视口（app预加载会执行js）\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportCheckWebviewInScreen() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 判断是否支持通知权限检查\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportCheckNotify() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 统一路由版快速返回\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUrmFastbackVersion() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *判断是否支持日志合并\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isMergeLogReport() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *统一路由版JSNavigation\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUrmJSNavigationVersion() {\r\n  //   return false;\r\n  // }\r\n  //\r\n  // /**\r\n  //  * 是否支持qq支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isQQPayAvailable() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *是否支持微信支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isWeChatPayAvailable() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  *是否支持支付宝支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAliPayAvailable() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持分享图片到微信聊天\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAndroidSupportWeChatSessionImage() {\r\n  //   return false;\r\n  // }\r\n  // /**\r\n  //  * 是否支持Anroid原生蒙层\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAndroidMaskSpinnerVersion() {\r\n  //   return false;\r\n  // }\r\n  /* ========= Wechat ================ */\r\n  /**\r\n   * 当前微信版本号\r\n   * @type {string}\r\n   */\r\n  get wechatVersion() {\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   *当前微信平台 wechat_android,wechat_ios,wechat_unknown\r\n   * @type {string}\r\n   */\r\n  get wechatPlatform() {\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * 是否支持historyAPI\r\n   * @type {boolean}\r\n   */\r\n  get isSupportHistoryAPI() {\r\n    return false;\r\n  }\r\n  /**\r\n   * 是否微信平台不包含小程序\r\n   * @type {boolean}\r\n   */\r\n  get isPureWeChatPlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否微信小程序平台\r\n   * @type {boolean}\r\n   */\r\n  get isWeChatMiniProgram() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否微信平台包含小程序\r\n   * @type {boolean}\r\n   */\r\n  get isWeChatPlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否android版本微信\r\n   * @type {boolean}\r\n   */\r\n  get isAndroidWeChatPlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否IOS版本微信\r\n   * @type {boolean}\r\n   */\r\n  get isIOSWeChatPlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否嵌入App的webview\r\n   * @type {boolean}\r\n   */\r\n  get isEmbeddedBrowser() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否支持微信webview缩小为浮标\r\n   * @type {boolean}\r\n   */\r\n  get isSupportWechatFloatingWindow() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 引导长按二维码去小主页强制关注\r\n   * @type {boolean}\r\n   */\r\n  get isShowSMAlertPlatform() {\r\n    return false;\r\n  }\r\n  /* ========= qq ================ */\r\n  /**\r\n   * 是否QQ平台\r\n   * @type {boolean}\r\n   */\r\n  get isQQPlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *是否QQ平台不包含小程序\r\n   */\r\n  get isPureQQPlatform() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 是否QQ小程序平台\r\n   * @type {boolean}\r\n   */\r\n  get isQQMiniProgram() {\r\n    return false;\r\n  }\r\n  /* ========= weibo ================ */\r\n  /**\r\n   * 是否微博平台\r\n   * @type {boolean}\r\n   */\r\n  get isWeiboPlatform() {\r\n    return false;\r\n  }\r\n}\r\nexport default IPlatform;\r\n","import { compareVersion, PLATFORM, getCache } from './common';\r\nimport IPlatform from './IPlatform';\r\n\r\nconst regWeChatVersion = /micromessenger\\/([^\\s]+)\\s*/i;\r\n\r\nconst WECHATPLATFORM = {\r\n  WeChatAndroid: 'wechat_android',\r\n  WeChatIOS: 'wechat_ios',\r\n  WeChatUnknown: 'wechat_unknown'\r\n};\r\n\r\n/**\r\n * 根据传入的ua获取微信版本号\r\n * @ignore\r\n * @param ua\r\n * @returns {*}\r\n */\r\nexport function getWechatVersion(ua = '') {\r\n  const matchVersions = ua.match(regWeChatVersion);\r\n  if (matchVersions) {\r\n    return matchVersions[1] || '';\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * 当前微信平台系统是Android还是Ios\r\n * @ignore\r\n * @param ua\r\n * @returns {string}\r\n */\r\nexport function getWechatPlatform(ua = '') {\r\n  ua = ua.toUpperCase();\r\n  if (ua.indexOf('ANDROID') !== -1) {\r\n    return WECHATPLATFORM.WeChatAndroid;\r\n  }\r\n  if (ua.indexOf('IPHONE') !== -1 || ua.indexOf('IPAD') !== -1 || ua.indexOf('ITOUCH') !== -1) {\r\n    return WECHATPLATFORM.WeChatIOS;\r\n  }\r\n  return WECHATPLATFORM.WeChatUnknown;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass WechatPlatForm extends IPlatform {\r\n  /**\r\n   * 当前微信版本号\r\n   * @type {string}\r\n   */\r\n  get wechatVersion() {\r\n    return getCache(this.cache, 'wechatVersion', getWechatVersion(this.ua));\r\n  }\r\n\r\n  /**\r\n   *当前微信平台 wechat_android,wechat_ios,wechat_unknown\r\n   * @type {string}\r\n   */\r\n  get wechatPlatform() {\r\n    return getCache(this.cache, 'wechatPlatform', getWechatPlatform(this.ua));\r\n  }\r\n\r\n  /**\r\n   * 是否支持historyAPI\r\n   * @type {boolean}\r\n   */\r\n  get isSupportHistoryAPI() {\r\n    return getCache(this.cache, 'isSupportHistoryAPI', compareVersion(this.wechatVersion, '6.5.1') > 0);\r\n  }\r\n  /**\r\n   * 是否微信平台不包含小程序\r\n   * @type {boolean}\r\n   */\r\n  get isPureWeChatPlatform() {\r\n    return this.platform === PLATFORM.WeChat;\r\n  }\r\n\r\n  /**\r\n   * 是否小程序平台\r\n   * @type {boolean}\r\n   */\r\n  get isWeChatMiniProgram() {\r\n    return this.platform === PLATFORM.WxApp;\r\n  }\r\n\r\n  /**\r\n   * 是否微信平台包含小程序\r\n   * @type {boolean}\r\n   */\r\n  get isWeChatPlatform() {\r\n    return this.platform === PLATFORM.WeChat || this.platform === PLATFORM.WxApp;\r\n  }\r\n\r\n  /**\r\n   * 是否android版本微信\r\n   * @type {boolean}\r\n   */\r\n  get isAndroidWeChatPlatform() {\r\n    return this.isWeChatPlatform && this.wechatPlatform === WECHATPLATFORM.WeChatAndroid;\r\n  }\r\n\r\n  /**\r\n   * 是否IOS版本微信\r\n   * @type {boolean}\r\n   */\r\n  get isIOSWeChatPlatform() {\r\n    return this.isWeChatPlatform && this.wechatPlatform === WECHATPLATFORM.WeChatIOS;\r\n  }\r\n\r\n  /**\r\n   * 是否嵌入App的webview\r\n   * @type {boolean}\r\n   */\r\n  get isEmbeddedBrowser() {\r\n    return this.isWeChatPlatform;\r\n  }\r\n\r\n  /**\r\n   * 是否支持微信支付\r\n   * @type {boolean}\r\n   */\r\n  get isWeChatPayAvailable() {\r\n    return this.isWeChatPlatform;\r\n  }\r\n\r\n  /**\r\n   * 是否支持微信webview缩小为浮标\r\n   * @type {boolean}\r\n   */\r\n  get isSupportWechatFloatingWindow() {\r\n    return getCache(this.cache, 'isSupportWechatFloatingWindow', compareVersion(this.wechatVersion, '6.6.7') > 0);\r\n  }\r\n\r\n  /**\r\n   * 引导长按二维码去小主页强制关注\r\n   * @type {boolean}\r\n   */\r\n  get isShowSMAlertPlatform() {\r\n    return getCache(\r\n      this.cache,\r\n      'isShowSMAlertPlatform',\r\n      (() => {\r\n        if (this.isIOSWeChatPlatform) {\r\n          return true;\r\n        }\r\n        if (this.isAndroidWeChatPlatform && compareVersion(this.wechatVersion, '6.5.6') >= 0) {\r\n          return true;\r\n        }\r\n        return false;\r\n      })()\r\n    );\r\n  }\r\n}\r\nexport default WechatPlatForm;\r\n","/**\r\n * Created by jiangliuer on 2019/4/24\r\n */\r\nimport { PLATFORM, compareVersion, getNativeVersion, getCache, isMecoWebView } from './common';\r\nimport IPlatform from './IPlatform';\r\n\r\n/**\r\n * @ignore\r\n * @type {{greaterThan: string, greaterThanEqual: string, contains: string}} VersionCompareMethod 版本号比较方法列表\r\n */\r\nexport const VersionCompareMethod = {\r\n  greaterThan: 'greaterThan',\r\n  greaterThanEqual: 'greaterThanEqual',\r\n  contains: 'contains'\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass NativePlatForm extends IPlatform {\r\n  /**\r\n   * 是否比指定的版本号大\r\n   * @ignore\r\n   * @private\r\n   * @param version\r\n   * @returns {boolean}\r\n   */\r\n  isVersionGreater(version) {\r\n    if (!version) {\r\n      return false;\r\n    }\r\n    return compareVersion(this.version, version) > 0;\r\n  }\r\n\r\n  /**\r\n   * 是否大于等于指定版本号\r\n   * @ignore\r\n   * @private\r\n   * @param version\r\n   * @returns {boolean}\r\n   */\r\n  isVersionGreaterThanEqual(version) {\r\n    if (!version) {\r\n      return false;\r\n    }\r\n    return compareVersion(this.version, version) >= 0;\r\n  }\r\n\r\n  /**\r\n   * 当前版本号按照匹配算法是否匹配传入的版本号\r\n   * @ignore\r\n   * @private\r\n   * @param androidVersion 需要匹配的android版本号\r\n   * @param iosVersion 需要匹配的ios版本号\r\n   * @param compareMethod 版本号匹配算法\r\n   * @returns {*}\r\n   */\r\n  statisfy(androidVersion, iosVersion, compareMethod) {\r\n    if (compareMethod === VersionCompareMethod.greaterThan) {\r\n      return this.platform === PLATFORM.PddAndroid\r\n        ? this.isVersionGreater(androidVersion)\r\n        : this.isVersionGreater(iosVersion);\r\n    }\r\n    if (compareMethod === VersionCompareMethod.greaterThanEqual) {\r\n      return this.platform === PLATFORM.PddAndroid\r\n        ? this.isVersionGreaterThanEqual(androidVersion)\r\n        : this.isVersionGreaterThanEqual(iosVersion);\r\n    }\r\n    if (compareMethod === VersionCompareMethod.contains) {\r\n      return this.platform === PLATFORM.PddAndroid\r\n        ? androidVersion.includes(this.version)\r\n        : iosVersion.includes(this.version);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 当前版本号仅native\r\n   * @type {string}\r\n   */\r\n  get version() {\r\n    return getCache(this.cache, 'version', getNativeVersion(this.ua, this.platform));\r\n  }\r\n\r\n  /**\r\n   * 是否native app\r\n   * @type {boolean}\r\n   */\r\n  get isNativePlatform() {\r\n    return this.platform === PLATFORM.PddIOS || this.platform === PLATFORM.PddAndroid;\r\n  }\r\n\r\n  /**\r\n   * 是否native app lite包\r\n   * @type {boolean}\r\n   */\r\n  get isLiteNativePlatform() {\r\n    return this.isNativePlatform && this.ua.includes('app_type/lite');\r\n  }\r\n\r\n  /**\r\n   * app webview内核是否Meco内核 Meco内核特征MecoCore/10 MecoSDK/1\r\n   * @type {boolean}\r\n   */\r\n  get isMecoCore() {\r\n    return getCache(this.cache, 'isMecoCore', this.isNativePlatform && isMecoWebView(this.ua));\r\n  }\r\n  // /**\r\n  //  * 是否支持组件包\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isModuleVersion() {\r\n  //   return getCache(this.cache, 'isModuleVersion', this.statisfy('1.1.2', '1.1.2', 'greaterThan'));\r\n  // }\r\n  //\r\n  // /**\r\n  //  * 是否支持native chat\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeChatVersion() {\r\n  //   return getCache(this.cache, 'isNativeChatVersion', this.statisfy('1.2.2', '2.0.5', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持native login\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeLoginVersion() {\r\n  //   return getCache(this.cache, 'isNativeLoginVersion', this.statisfy('1.2.2', '2.0.8', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持native tabbar\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeTabBarVersion() {\r\n  //   return getCache(this.cache, 'isNativeTabBarVersion', this.statisfy('1.2.2', '2.0.8', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持写native日志功能\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeLogVersion() {\r\n  //   return getCache(this.cache, 'isNativeLogVersion', this.statisfy('', '2.0.8', 'greaterThan'));\r\n  // }\r\n  //\r\n  // /**\r\n  //  * 是否支持Native Index\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeIndexVersion() {\r\n  //   return getCache(this.cache, 'isNativeIndexVersion', this.statisfy('1.2.5', '2.1.0', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeUpdateVersion() {\r\n  //   return getCache(this.cache, 'isNativeUpdateVersion', this.statisfy('1.3.0', '2.0.9', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持Naitve店铺页面\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeMallPageVersion() {\r\n  //   return getCache(this.cache, 'isNativeMallPageVersion', this.statisfy('1.3.0', '2.1.0', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持Native图片查看器\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeImageViewerVersion() {\r\n  //   return getCache(this.cache, 'isNativeImageViewerVersion', this.statisfy('1.4.0', '2.1.3', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *是否支持QQPay版本\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeQQPayVersion() {\r\n  //   return getCache(this.cache, 'isNativeQQPayVersion', this.statisfy('1.9.0', '2.8.0', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持Native订单页\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeOrdersPageVersion() {\r\n  //   return getCache(this.cache, 'isNativeOrdersPageVersion', this.statisfy('2.6.0', '2.14.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAliPayDirectDebitVersion() {\r\n  //   return getCache(this.cache, 'isAliPayDirectDebitVersion', this.statisfy('3.2.0', '3.2.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPddPushSocketVersion() {\r\n  //   return getCache(this.cache, 'isPddPushSocketVersion', this.statisfy('', '2.6.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持Native专题页\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeSubjectsPageVersion() {\r\n  //   return getCache(this.cache, 'isNativeSubjectsPageVersion', this.statisfy('3.15.0', '3.15.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPhotoDisabledVersion() {\r\n  //   return getCache(this.cache, 'isPhotoDisabledVersion', this.statisfy('', ['1.2.6', '1.2.7', '1.2.8'], 'contains'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持Naive通讯录\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeContactVersion() {\r\n  //   return getCache(this.cache, 'isNativeContactVersion', this.statisfy('3.17.0', '3.17.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *是否支持通讯录新模块\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeNewContactVersion() {\r\n  //   return getCache(this.cache, 'isNativeNewContactVersion', this.statisfy('4.14.0', '4.14.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *通讯录支持静默权限查询\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeContactAuthorityVersion() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isNativeContactAuthorityVersion',\r\n  //     this.statisfy('4.15.0', '4.16.0', 'greaterThanEqual')\r\n  //   );\r\n  // }\r\n  // /**\r\n  //  *支持语音拉人功能的版本\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isGroupAudioRecordVersion() {\r\n  //   return getCache(this.cache, 'isGroupAudioRecordVersion', this.statisfy('3.19.0', '3.19.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持评论后获取优惠券\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isTakeCouponAfterCommentVersion() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isTakeCouponAfterCommentVersion',\r\n  //     this.statisfy('3.20.0', '3.20.0', 'greaterThanEqual')\r\n  //   );\r\n  // }\r\n  // /**\r\n  //  *native friends system version\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeFriendsVersion() {\r\n  //   return getCache(this.cache, 'isNativeFriendsVersion', this.statisfy('3.42.0', '3.42.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *IOS分享时未安装第三方应用提示\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isIOSShareUninstallNotifition() {\r\n  //   return getCache(this.cache, 'isIOSShareUninstallNotifition', this.statisfy('', '3.28.0', 'greaterThan'));\r\n  // }\r\n  // /**\r\n  //  *原生聊天支持语音消息，好友分享／漂流瓶 可以发语音消息\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportAudioMsgVersion() {\r\n  //   return getCache(this.cache, 'isSupportAudioMsgVersion', this.statisfy('3.31.0', '3.31.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *团页面快速返回浏览列表\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isGroupFastBackVersion() {\r\n  //   return getCache(this.cache, 'isGroupFastBackVersion', this.statisfy('3.48.0', '3.48.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *原生显示催发货按钮\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUrgeShipmentVersion() {\r\n  //   return getCache(this.cache, 'isUrgeShipmentVersion', this.statisfy('3.40.0', '3.40.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *团页面大图分享\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isGroupShareImageVersion() {\r\n  //   return getCache(this.cache, 'isGroupShareImageVersion', this.statisfy('3.52.0', '3.52.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *原生可传图toast\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isShowHUDVersion() {\r\n  //   return getCache(this.cache, 'isShowHUDVersion', this.statisfy('3.51.0', '3.51.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *IOS分享图片压缩\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isIOSCompressShareImage() {\r\n  //   return getCache(this.cache, 'isIOSCompressShareImage', this.statisfy('', '3.41.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *原生评价页面生成红包\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isTakeCouponInCommentPage() {\r\n  //   return getCache(this.cache, 'isTakeCouponInCommentPage', this.statisfy('3.23.0', '3.23.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isCouponGroupShare() {\r\n  //   return getCache(this.cache, 'isCouponGroupShare', this.statisfy('3.43.0', '3.42.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *免费试用商品抽奖结果改为中奖，未中奖两种结果\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNewOrderStatusVersion() {\r\n  //   return getCache(this.cache, 'isNewOrderStatusVersion', this.statisfy('3.34.0', '3.34.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *原生花呗分期支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isHBInstallmentPayVersion() {\r\n  //   return getCache(this.cache, 'isHBInstallmentPayVersion', this.statisfy('3.65.0', '3.65.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 团页面新版快速返回浏览列表(支持返回到web页面)\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNewGroupFastBackVersion() {\r\n  //   return getCache(this.cache, 'isNewGroupFastBackVersion', this.statisfy('3.61.0', '3.61.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *原生title动画\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportSetTitleAnimation() {\r\n  //   return getCache(this.cache, 'isSupportSetTitleAnimation', this.statisfy('4.4.0', '4.4.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *成团通知客户端团状态变更\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUpdateTimelineOrderStatusNotification() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isUpdateTimelineOrderStatusNotification',\r\n  //     this.statisfy('4.13.0', '4.13.0', 'greaterThanEqual')\r\n  //   );\r\n  // }\r\n  // /**\r\n  //  *是否支持用系统音量播放音频\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPlayAudioWithSystemVol() {\r\n  //   return getCache(this.cache, 'isPlayAudioWithSystemVol', this.statisfy('4.8.0', '4.8.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *tabbar不显示海淘入口\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNoHaitaoVersion() {\r\n  //   return getCache(this.cache, 'isNoHaitaoVersion', this.statisfy('3.38.0', '3.38.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持用固定音量播放音频\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPlayAudioWithSettleVol() {\r\n  //   return getCache(this.cache, 'isPlayAudioWithSettleVol', this.statisfy('4.11.0', '4.11.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *拼小圈删除后通知客户端\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isPDDTimelineFeedDeleteNotification() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isPDDTimelineFeedDeleteNotification',\r\n  //     this.statisfy('4.12.0', '4.12.0', 'greaterThanEqual')\r\n  //   );\r\n  // }\r\n  // /**\r\n  //  * 秒杀频道提醒\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeSpikeRemindVersion() {\r\n  //   return getCache(this.cache, 'isNativeSpikeRemindVersion', this.statisfy('3.2.0', '3.40.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 秒杀提醒-日历\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isNativeSpikeCalendardVersion() {\r\n  //   return getCache(this.cache, 'isNativeSpikeCalendardVersion', this.statisfy('', '4.25.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 秒杀提醒-合并通知\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSpikeNoticeUnionVersion() {\r\n  //   return getCache(this.cache, 'isSpikeNoticeUnionVersion', this.statisfy('4.26.0', '4.26.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 支持关闭Android的横滑切Tab\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isHorizontalScrollVersion() {\r\n  //   return getCache(this.cache, 'isHorizontalScrollVersion', this.statisfy('4.18.0', '', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 下单页不可送达提示移到地址列表页\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isShowAddressCantReceiveVersion() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isShowAddressCantReceiveVersion',\r\n  //     this.statisfy('4.19.0', '4.19.0', 'greaterThanEqual')\r\n  //   );\r\n  // }\r\n  // /**\r\n  //  * 电器城是否显示原生tab\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isEletricShowNativeTab() {\r\n  //   return getCache(this.cache, 'isEletricShowNativeTab', this.statisfy('4.26.0', '4.26.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 是否支持写native日志\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportNativeLog() {\r\n  //   return getCache(this.cache, 'isSupportNativeLog', this.statisfy('4.23.0', '4.22.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 判断webview页面是否在app的tab内嵌中\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportCheckWebviewInTab() {\r\n  //   return getCache(this.cache, 'isSupportCheckWebviewInTab', this.statisfy('4.20.0', '4.26.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 判断webview是被预加载了还是实际展示在视口（app预加载会执行js）\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportCheckWebviewInScreen() {\r\n  //   return getCache(this.cache, 'isSupportCheckWebviewInScreen', this.statisfy('4.27.0', '4.27.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 判断是否支持通知权限检查\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isSupportCheckNotify() {\r\n  //   return getCache(this.cache, 'isSupportCheckNotify', this.statisfy('4.27.1', '', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  * 统一路由版快速返回\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUrmFastbackVersion() {\r\n  //   return getCache(this.cache, 'isUrmFastbackVersion', this.statisfy('4.39.0', '4.39.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *判断是否支持日志合并\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isMergeLogReport() {\r\n  //   return getCache(this.cache, 'isMergeLogReport', this.statisfy('4.45.0', '4.33.0', 'greaterThanEqual'));\r\n  // }\r\n  // /**\r\n  //  *统一路由版JSNavigation\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isUrmJSNavigationVersion() {\r\n  //   return getCache(this.cache, 'isUrmJSNavigationVersion', this.statisfy('4.26.0', '4.40.0', 'greaterThanEqual'));\r\n  // }\r\n  //\r\n  // /**\r\n  //  * 是否支持qq支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isQQPayAvailable() {\r\n  //   return this.isNativeQQPayVersion;\r\n  // }\r\n  // /**\r\n  //  *是否支持微信支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isWeChatPayAvailable() {\r\n  //   return this.isNativePlatform;\r\n  // }\r\n  // /**\r\n  //  *是否支持支付宝支付\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAliPayAvailable() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isAliPayAvailable',\r\n  //     (() => {\r\n  //       if (this.platform === PLATFORM.PddIOS && this.isVersionGreaterThanEqual('1.0.7')) {\r\n  //         return true;\r\n  //       }\r\n  //       if (this.platform === PLATFORM.PddAndroid && this.isVersionGreaterThanEqual('1.0.4')) {\r\n  //         return true;\r\n  //       }\r\n  //       return false;\r\n  //     })()\r\n  //   );\r\n  // }\r\n  // /**\r\n  //  * 是否支持分享图片到微信聊天\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAndroidSupportWeChatSessionImage() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isAndroidSupportWeChatSessionImage',\r\n  //     this.platform === PLATFORM.PddIOS || (this.platform === PLATFORM.PddAndroid && this.isVersionGreater('3.29.0'))\r\n  //   );\r\n  // }\r\n  // /**\r\n  //  * 是否支持Anroid原生蒙层\r\n  //  * @type {boolean}\r\n  //  */\r\n  // get isAndroidMaskSpinnerVersion() {\r\n  //   return getCache(\r\n  //     this.cache,\r\n  //     'isAndroidMaskSpinnerVersion',\r\n  //     this.platform === PLATFORM.PddAndroid && this.isVersionGreaterThanEqual('3.38.0')\r\n  //   );\r\n  // }\r\n}\r\nexport default NativePlatForm;\r\n","/**\r\n * Created by jiangliuer on 2019/4/25\r\n */\r\nimport { PLATFORM } from './common/index';\r\nimport IPlatform from './IPlatform';\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass QQPlatform extends IPlatform {\r\n  /**\r\n   * 是否QQ平台包含小程序\r\n   * @type {boolean}\r\n   */\r\n  get isQQPlatform() {\r\n    return this.platform === PLATFORM.QQ || this.platform === PLATFORM.QQApp;\r\n  }\r\n\r\n  /**\r\n   * 是否QQ平台不包含小程序\r\n   * @type {boolean}\r\n   */\r\n  get isPureQQPlatform() {\r\n    return this.platform === PLATFORM.QQ;\r\n  }\r\n\r\n  /**\r\n   * 是否QQ小程序平台\r\n   * @type {boolean}\r\n   */\r\n  get isQQMiniProgram() {\r\n    return this.platform === PLATFORM.QQApp;\r\n  }\r\n\r\n  /**\r\n   * 是否嵌入App WebView\r\n   * @type {boolean}\r\n   */\r\n  get isEmbeddedBrowser() {\r\n    return this.isQQPlatform;\r\n  }\r\n\r\n  /**\r\n   * 是否支持qq支付\r\n   * @type {boolean}\r\n   */\r\n  get isQQPayAvailable() {\r\n    return this.isQQPlatform;\r\n  }\r\n\r\n  /**\r\n   * 是否支持微信支付\r\n   * @type {boolean}\r\n   */\r\n  get isWeChatPayAvailable() {\r\n    return this.isQQPlatform;\r\n  }\r\n}\r\nexport default QQPlatform;\r\n","/**\r\n * Created by jiangliuer on 2019/4/25\r\n */\r\nimport { PLATFORM } from './common/index';\r\nimport IPlatform from './IPlatform';\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass WeiboPlatform extends IPlatform {\r\n  /**\r\n   * 是否微博平台\r\n   * @type {boolean}\r\n   */\r\n  get isWeiboPlatform() {\r\n    return this.platform === PLATFORM.Weibo;\r\n  }\r\n\r\n  /**\r\n   * 是否嵌入App Webview\r\n   * @type {boolean}\r\n   */\r\n  get isEmbeddedBrowser() {\r\n    return this.isWeiboPlatform;\r\n  }\r\n\r\n  /**\r\n   * weibo平台支持支付宝支付\r\n   * @type {boolean}\r\n   */\r\n  get isAliPayAvailable() {\r\n    return true;\r\n  }\r\n}\r\nexport default WeiboPlatform;\r\n","import { isMobilePlatform, getCache } from './common/index';\r\nimport IPlatform from './IPlatform';\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass UnknownPlatform extends IPlatform {\r\n  /**\r\n   * 是否支持微信支付\r\n   * @type {boolean}\r\n   */\r\n  get isWeChatPayAvailable() {\r\n    return getCache(this.cache, 'isWeChatPayAvailable', isMobilePlatform(this.ua));\r\n  }\r\n\r\n  /**\r\n   * unknown平台支持支付宝支付\r\n   * @type {boolean}\r\n   */\r\n  get isAliPayAvailable() {\r\n    return true;\r\n  }\r\n}\r\nexport default UnknownPlatform;\r\n","/**\r\n * Created by jiangliuer on 2019/7/5\r\n */\r\nimport UnknownPlatform from './unknown';\r\nimport { getCache, getNativeVersion, PLATFORM } from './common';\r\n\r\n/**\r\n * @ignore\r\n */\r\nclass TintAndroidPlatform extends UnknownPlatform {\r\n  /**\r\n   * 是否android极小包\r\n   * @type {boolean}\r\n   */\r\n  get isTinyNativePlatform() {\r\n    return this.platform === PLATFORM.PDDTinyAndorid;\r\n  }\r\n  /**\r\n   * 当前版本号\r\n   * @type {string}\r\n   */\r\n  get version() {\r\n    return getCache(this.cache, 'version', getNativeVersion(this.ua, PLATFORM.PddAndroid));\r\n  }\r\n}\r\nexport default TintAndroidPlatform;\r\n","/**\n * Created by jiangliuer on 2019/4/23\n */\nimport WechatPlatform from './wechat';\nimport NativePlatform from './native';\nimport QQPlatform from './qq';\nimport WeiboPlatform from './weibo';\nimport UnknownPlatform from './unknown';\nimport { getPlatformByUa, PLATFORM } from './common';\nimport TinyNativePlatform from './tinyNative';\n\nconst cachedUA = [];\nconst cachedPlatformByUa = new Map();\n/**\n * 根据传入的ua返回Platform类\n * @param {string} ua 浏览器user-agent\n * @returns {IPlatform} 根据传入的ua返回对应的IPlatform实现\n */\nexport function getPlatform(ua = '') {\n  if (cachedPlatformByUa.has(ua)) {\n    return cachedPlatformByUa.get(ua);\n  }\n  const platform = getPlatformByUa(ua);\n  let platformInstance;\n  switch (platform) {\n    case PLATFORM.PddAndroid:\n    case PLATFORM.PddIOS:\n      platformInstance = new NativePlatform(ua);\n      break;\n    case PLATFORM.QQ:\n    case PLATFORM.QQApp:\n      platformInstance = new QQPlatform(ua);\n      break;\n    case PLATFORM.Weibo:\n      platformInstance = new WeiboPlatform(ua);\n      break;\n    case PLATFORM.WxApp:\n    case PLATFORM.WeChat:\n      platformInstance = new WechatPlatform(ua);\n      break;\n    case PLATFORM.PDDTinyAndorid:\n      platformInstance = new TinyNativePlatform(ua);\n      break;\n    default:\n      platformInstance = new UnknownPlatform(ua);\n  }\n  cachePlatformByUa(ua, platformInstance);\n  return platformInstance;\n}\n\nfunction cachePlatformByUa(ua, platform) {\n  cachedUA.push(ua);\n  cachedPlatformByUa.set(ua, platform);\n  if (cachedUA.length > 10) {\n    const uaForRemove = cachedUA.shift();\n    cachedPlatformByUa.delete(uaForRemove);\n  }\n}\n\n/**\n * 返回当前浏览器ua对应的platform\n * @returns {IPlatform} 根据传入的ua返回对应的IPlatform实现\n */\nexport function getCurrentPlatform() {\n  if (!process.env.BROWSER) {\n    console.warn('该方法支持在浏览器端调用');\n    return;\n  }\n  const currentUA = window.navigator.userAgent;\n  return getPlatform(currentUA);\n}\n\nexport { compareVersion, SYSTEM, PLATFORM, isWebBundle } from './common';\n","/**\n * @file index.js, 我们在qq浏览器中加载的时候做的一些准备工作\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport appConfig from '@pdd/configs/app';\nimport { loadScript, throwErrorAsync } from '@pdd/core-util';\nimport { getCurrentPlatform } from '@pdd/platform-util';\n\nconst config = appConfig.get(location.host);\nconst SIGN_URL = 'qq/jsapi/signature';\n\n/**\n * @external {AxiosInstance} https://github.com/axios/axios#instance-methods\n */\n\n/**\n * 初始化qq配置，仅client生效\n * @param {AxiosInstance} http axios http实例\n * @return {Promise<void>}\n */\nexport async function initQQConfig(http) {\n  const nonce = Math.random()\n    .toString()\n    .substring(2);\n  const timestamp = Date.now().toString();\n  const params = {\n    timestamp,\n    noncestr: nonce,\n    url: location.href.split('#')[0],\n    // eslint-disable-next-line\n    open_app_id: config.ApiKey.QQPublic\n  };\n\n  const [data] = await Promise.all([http.get(SIGN_URL, { params }), loadQQScript()]);\n  if(!window.mqq || !data.signature) {\n    throw new Error('qq sdk is no ready!');\n  }\n\n  const signature = data.signature;\n\n  return new Promise((resolve) => {\n    window.mqq.config({\n      timestamp,\n      signature,\n      debug: false,\n      appId: config.ApiKey.QQPublic,\n      nonceStr: nonce,\n      jsApiList: [\n        'showMenuItems',\n        'hideMenuItems',\n        'onMenuShareAppMessage',\n        'onMenuShareTimeline',\n        'onMenuShareQQ',\n        'onMenuShareQZone',\n        'previewImage',\n        'chooseImage',\n        'uploadImage',\n        'getLocation'\n      ]\n    });\n\n    window.mqq.ready(() => {\n      const menuList = ['menuItem:share:appMessage', 'menuItem:share:qq', 'menuItem:share:QZone'];\n      const menuItemsToHide = [\n        'menuItem:favorite',\n        'menuItem:openWithSafari',\n        'menuItem:openWithQQBrowser',\n        'menuItem:share:email',\n        'menuItem:share:timeline'\n      ];\n\n      window.mqq.hideMenuItems({ menuList: menuItemsToHide });\n      window.mqq.showMenuItems({ menuList });\n      resolve();\n    });\n\n    window.mqq.error((error) => {\n      throwErrorAsync(new Error(JSON.stringify(error)), {\n        error_type: 'qq_config_error',\n        payload: {\n          signature\n        }\n      });\n      resolve();\n    });\n  });\n}\n\nconst loadQQScript = () => {\n  if(getCurrentPlatform().isPureQQPlatform) {\n    return Promise.all([\n      loadScript('https://mp.gtimg.cn/open/js/openApi.js', { crossOrigin: 'anonymous' }),\n      loadScript('https://open.mobile.qq.com/sdk/qqapi.wk.js?_bid=152')\n    ]);\n  }\n  return import('./qqjssdk-1.0.0');\n};\n","!(function(e, n) {\n  typeof define === 'function' && (define.amd || define.cmd)\n    ? define(() => {\n        return n(e);\n      })\n    : n(e, !0);\n})(window, (e, n) => {\n  function i(n, i, t) {\n    e.WeixinJSBridge\n      ? WeixinJSBridge.invoke(n, o(i), e => {\n          c(n, e, t);\n        })\n      : u(n, t);\n  }\n\n  function t(n, i, t) {\n    e.WeixinJSBridge\n      ? WeixinJSBridge.on(n, e => {\n          t && t.trigger && t.trigger(e), c(n, e, i);\n        })\n      : t\n      ? u(n, t)\n      : u(n, i);\n  }\n\n  function o(e) {\n    return (\n      (e = e || {}),\n      (e.appId = C.appId),\n      (e.verifyAppId = C.appId),\n      (e.verifySignType = 'sha1'),\n      (e.verifyTimestamp = C.timestamp + ''),\n      (e.verifyNonceStr = C.nonceStr),\n      (e.verifySignature = C.signature),\n      e\n    );\n  }\n\n  function r(e) {\n    return {\n      timeStamp: e.timestamp + '',\n      nonceStr: e.nonceStr,\n      package: e.package,\n      paySign: e.paySign,\n      signType: e.signType || 'SHA1'\n    };\n  }\n\n  function a(e) {\n    return (\n      (e.postalCode = e.addressPostalCode),\n      delete e.addressPostalCode,\n      (e.provinceName = e.proviceFirstStageName),\n      delete e.proviceFirstStageName,\n      (e.cityName = e.addressCitySecondStageName),\n      delete e.addressCitySecondStageName,\n      (e.countryName = e.addressCountiesThirdStageName),\n      delete e.addressCountiesThirdStageName,\n      (e.detailInfo = e.addressDetailInfo),\n      delete e.addressDetailInfo,\n      e\n    );\n  }\n\n  function c(e, n, i) {\n    e == 'openEnterpriseChat' && (n.errCode = n.err_code), delete n.err_code, delete n.err_desc, delete n.err_detail;\n    let t = n.errMsg;\n    t || ((t = n.err_msg), delete n.err_msg, (t = s(e, t)), (n.errMsg = t)),\n      (i = i || {})._complete && (i._complete(n), delete i._complete),\n      (t = n.errMsg || ''),\n      C.debug && !i.isInnerInvoke && alert(JSON.stringify(n));\n    const o = t.indexOf(':');\n    switch (t.substring(o + 1)) {\n      case 'ok':\n        i.success && i.success(n);\n        break;\n      case 'cancel':\n        i.cancel && i.cancel(n);\n        break;\n      default:\n        i.fail && i.fail(n);\n    }\n    i.complete && i.complete(n);\n  }\n\n  function s(e, n) {\n    let i = e,\n      t = v[i];\n    t && (i = t);\n    let o = 'ok';\n    if (n) {\n      const r = n.indexOf(':');\n      (o = n.substring(r + 1)) == 'confirm' && (o = 'ok'),\n        o == 'failed' && (o = 'fail'),\n        o.indexOf('failed_') != -1 && (o = o.substring(7)),\n        o.indexOf('fail_') != -1 && (o = o.substring(5)),\n        ((o = (o = o.replace(/_/g, ' ')).toLowerCase()) != 'access denied' && o != 'no permission to execute') ||\n          (o = 'permission denied'),\n        i == 'config' && o == 'function not exist' && (o = 'ok'),\n        o == '' && (o = 'fail');\n    }\n    return (n = i + ':' + o);\n  }\n\n  function d(e) {\n    if (e) {\n      for (let n = 0, i = e.length; n < i; ++n) {\n        const t = e[n],\n          o = h[t];\n        o && (e[n] = o);\n      }\n      return e;\n    }\n  }\n\n  function u(e, n) {\n    if (!(!C.debug || (n && n.isInnerInvoke))) {\n      const i = v[e];\n      i && (e = i), n && n._complete && delete n._complete, console.log('\"' + e + '\",', n || '');\n    }\n  }\n\n  function l(e) {\n    if (!(k || w || C.debug || x < '6.0.2' || V.systemType < 0)) {\n      const n = new Image();\n      (V.appId = C.appId),\n        (V.initTime = A.initEndTime - A.initStartTime),\n        (V.preVerifyTime = A.preVerifyEndTime - A.preVerifyStartTime),\n        N.getNetworkType({\n          isInnerInvoke: !0,\n          success: function(e) {\n            V.networkType = e.networkType;\n            const i =\n              'https://open.weixin.qq.com/sdk/report?v=' +\n              V.version +\n              '&o=' +\n              V.isPreVerifyOk +\n              '&s=' +\n              V.systemType +\n              '&c=' +\n              V.clientVersion +\n              '&a=' +\n              V.appId +\n              '&n=' +\n              V.networkType +\n              '&i=' +\n              V.initTime +\n              '&p=' +\n              V.preVerifyTime +\n              '&u=' +\n              V.url;\n            n.src = i;\n          }\n        });\n    }\n  }\n\n  function p() {\n    return new Date().getTime();\n  }\n\n  function f(n) {\n    T &&\n      (e.WeixinJSBridge\n        ? n()\n        : S.addEventListener &&\n          S.addEventListener('WeixinJSBridgeReady', n, !1) &&\n          S.addEventListener('QQJSBridgeReady', n, !1));\n  }\n\n  function m() {\n    N.invoke ||\n      ((N.invoke = function(n, i, t) {\n        e.WeixinJSBridge && WeixinJSBridge.invoke(n, o(i), t);\n      }),\n      (N.on = function(n, i) {\n        e.WeixinJSBridge && WeixinJSBridge.on(n, i);\n      }));\n  }\n\n  function g(e) {\n    if (typeof e === 'string' && e.length > 0) {\n      let n = e.split('?')[0],\n        i = e.split('?')[1];\n      return (n += '.html'), void 0 !== i ? n + '?' + i : n;\n    }\n  }\n\n  if (!e.jWeixin) {\n    var h = {\n        config: 'preVerifyJSAPI',\n        onMenuShareTimeline: 'menu:share:timeline',\n        onMenuShareAppMessage: 'menu:share:appmessage',\n        onMenuShareQQ: 'menu:share:qq',\n        onMenuShareWeibo: 'menu:share:weiboApp',\n        onMenuShareQZone: 'menu:share:QZone',\n        previewImage: 'imagePreview',\n        getLocation: 'geoLocation',\n        openProductSpecificView: 'openProductViewWithPid',\n        addCard: 'batchAddCard',\n        openCard: 'batchViewCard',\n        chooseWXPay: 'getBrandWCPayRequest',\n        openEnterpriseRedPacket: 'getRecevieBizHongBaoRequest',\n        startSearchBeacons: 'startMonitoringBeacons',\n        stopSearchBeacons: 'stopMonitoringBeacons',\n        onSearchBeacons: 'onBeaconsInRange',\n        consumeAndShareCard: 'consumedShareCard',\n        openAddress: 'editAddress'\n      },\n      v = (function() {\n        const e = {};\n        for (const n in h) e[h[n]] = n;\n        return e;\n      })(),\n      S = e.document,\n      I = S.title,\n      y = navigator.userAgent.toLowerCase(),\n      _ = navigator.platform.toLowerCase(),\n      k = !(!_.match('mac') && !_.match('win')),\n      w = y.indexOf('wxdebugger') != -1,\n      T = true,\n      M = y.indexOf('android') != -1,\n      P = y.indexOf('iphone') != -1 || y.indexOf('ipad') != -1,\n      x = (function() {\n        const e = y.match(/micromessenger\\/(\\d+\\.\\d+\\.\\d+)/) || y.match(/micromessenger\\/(\\d+\\.\\d+)/);\n        return e ? e[1] : '';\n      })(),\n      A = { initStartTime: p(), initEndTime: 0, preVerifyStartTime: 0, preVerifyEndTime: 0 },\n      V = {\n        version: 1,\n        appId: '',\n        initTime: 0,\n        preVerifyTime: 0,\n        networkType: '',\n        isPreVerifyOk: 1,\n        systemType: P ? 1 : M ? 2 : -1,\n        clientVersion: x,\n        url: encodeURIComponent(location.href)\n      },\n      C = {},\n      L = { _completes: [] },\n      B = { state: 0, data: {} };\n    f(() => {\n      A.initEndTime = p();\n    });\n    var E = !1,\n      O = [],\n      N = {\n        config: function(e) {\n          (C = e), u('config', e);\n          const n = !1 !== C.check;\n          f(() => {\n            if (n) {\n              i(\n                h.config,\n                { verifyJsApiList: d(C.jsApiList) },\n                (function() {\n                  (L._complete = function(e) {\n                    (A.preVerifyEndTime = p()), (B.state = 1), (B.data = e);\n                  }),\n                    (L.success = function(e) {\n                      V.isPreVerifyOk = 0;\n                    }),\n                    (L.fail = function(e) {\n                      L._fail ? L._fail(e) : (B.state = -1);\n                    });\n                  const e = L._completes;\n                  return (\n                    e.push(() => {\n                      l();\n                    }),\n                    (L.complete = function(n) {\n                      for (let i = 0, t = e.length; i < t; ++i) e[i]();\n                      L._completes = [];\n                    }),\n                    L\n                  );\n                })()\n              ),\n                (A.preVerifyStartTime = p());\n            } else {\n              B.state = 1;\n              for (let e = L._completes, t = 0, o = e.length; t < o; ++t) e[t]();\n              L._completes = [];\n            }\n          }),\n            m();\n        },\n        ready: function(e) {\n          B.state != 0 ? e() : (L._completes.push(e), !T && C.debug && e());\n        },\n        error: function(e) {\n          x < '6.0.2' || (B.state == -1 ? e(B.data) : (L._fail = e));\n        },\n        checkJsApi: function(e) {\n          const n = function(e) {\n            const n = e.checkResult;\n            for (const i in n) {\n              const t = v[i];\n              t && ((n[t] = n[i]), delete n[i]);\n            }\n            return e;\n          };\n          i(\n            'checkJsApi',\n            { jsApiList: d(e.jsApiList) },\n            ((e._complete = function(e) {\n              if (M) {\n                const i = e.checkResult;\n                i && (e.checkResult = JSON.parse(i));\n              }\n              e = n(e);\n            }),\n            e)\n          );\n        },\n        onMenuShareTimeline: function(e) {\n          t(\n            h.onMenuShareTimeline,\n            {\n              complete: function() {\n                i(\n                  'shareTimeline',\n                  {\n                    title: e.title || I,\n                    desc: e.title || I,\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href,\n                    type: e.type || 'link',\n                    data_url: e.dataUrl || ''\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        onMenuShareAppMessage: function(e) {\n          t(\n            h.onMenuShareAppMessage,\n            {\n              complete: function(n) {\n                n.scene === 'favorite'\n                  ? i('sendAppMessage', {\n                      title: e.title || I,\n                      desc: e.desc || '',\n                      link: e.link || location.href,\n                      img_url: e.imgUrl || '',\n                      type: e.type || 'link',\n                      data_url: e.dataUrl || ''\n                    })\n                  : i(\n                      'sendAppMessage',\n                      {\n                        title: e.title || I,\n                        desc: e.desc || '',\n                        link: e.link || location.href,\n                        img_url: e.imgUrl || '',\n                        type: e.type || 'link',\n                        data_url: e.dataUrl || ''\n                      },\n                      e\n                    );\n              }\n            },\n            e\n          );\n        },\n        onMenuShareQQ: function(e) {\n          t(\n            h.onMenuShareQQ,\n            {\n              complete: function() {\n                i(\n                  'shareQQ',\n                  {\n                    title: e.title || I,\n                    desc: e.desc || '',\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        onMenuShareWeibo: function(e) {\n          t(\n            h.onMenuShareWeibo,\n            {\n              complete: function() {\n                i(\n                  'shareWeiboApp',\n                  {\n                    title: e.title || I,\n                    desc: e.desc || '',\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        onMenuShareQZone: function(e) {\n          t(\n            h.onMenuShareQZone,\n            {\n              complete: function() {\n                i(\n                  'shareQZone',\n                  {\n                    title: e.title || I,\n                    desc: e.desc || '',\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        updateTimelineShareData: function(e) {\n          i('updateTimelineShareData', { title: e.title, link: e.link, imgUrl: e.imgUrl }, e);\n        },\n        updateAppMessageShareData: function(e) {\n          i('updateAppMessageShareData', { title: e.title, desc: e.desc, link: e.link, imgUrl: e.imgUrl }, e);\n        },\n        startRecord: function(e) {\n          i('startRecord', {}, e);\n        },\n        stopRecord: function(e) {\n          i('stopRecord', {}, e);\n        },\n        onVoiceRecordEnd: function(e) {\n          t('onVoiceRecordEnd', e);\n        },\n        playVoice: function(e) {\n          i('playVoice', { localId: e.localId }, e);\n        },\n        pauseVoice: function(e) {\n          i('pauseVoice', { localId: e.localId }, e);\n        },\n        stopVoice: function(e) {\n          i('stopVoice', { localId: e.localId }, e);\n        },\n        onVoicePlayEnd: function(e) {\n          t('onVoicePlayEnd', e);\n        },\n        uploadVoice: function(e) {\n          i('uploadVoice', { localId: e.localId, isShowProgressTips: e.isShowProgressTips == 0 ? 0 : 1 }, e);\n        },\n        downloadVoice: function(e) {\n          i('downloadVoice', { serverId: e.serverId, isShowProgressTips: e.isShowProgressTips == 0 ? 0 : 1 }, e);\n        },\n        translateVoice: function(e) {\n          i('translateVoice', { localId: e.localId, isShowProgressTips: e.isShowProgressTips == 0 ? 0 : 1 }, e);\n        },\n        chooseImage: function(e) {\n          i(\n            'chooseImage',\n            {\n              scene: '1|2',\n              count: e.count || 9,\n              sizeType: e.sizeType || ['original', 'compressed'],\n              sourceType: e.sourceType || ['album', 'camera']\n            },\n            ((e._complete = function(e) {\n              if (M) {\n                const n = e.localIds;\n                try {\n                  n && (e.localIds = JSON.parse(n));\n                } catch (e) {}\n              }\n            }),\n            e)\n          );\n        },\n        getLocation: function(e) {},\n        previewImage: function(e) {\n          i(h.previewImage, { current: e.current, urls: e.urls }, e);\n        },\n        uploadImage: function(e) {\n          i('uploadImage', { localId: e.localId, isShowProgressTips: e.isShowProgressTips == 0 ? 0 : 1 }, e);\n        },\n        downloadImage: function(e) {\n          i('downloadImage', { serverId: e.serverId, isShowProgressTips: e.isShowProgressTips == 0 ? 0 : 1 }, e);\n        },\n        getLocalImgData: function(e) {\n          !1 === E\n            ? ((E = !0),\n              i(\n                'getLocalImgData',\n                { localId: e.localId },\n                ((e._complete = function(e) {\n                  if (((E = !1), O.length > 0)) {\n                    const n = O.shift();\n                    wx.getLocalImgData(n);\n                  }\n                }),\n                e)\n              ))\n            : O.push(e);\n        },\n        getNetworkType: function(e) {\n          const n = function(e) {\n            const n = e.errMsg;\n            e.errMsg = 'getNetworkType:ok';\n            const i = e.subtype;\n            if (e.networkType) return e;\n            else {\n              const t = n.indexOf(':'),\n                o = n.substring(t + 1);\n              switch (o) {\n                case 'wifi':\n                case 'edge':\n                case 'wwan':\n                  e.networkType = o;\n                  break;\n                default:\n                  e.errMsg = 'getNetworkType:fail';\n              }\n            }\n            return e;\n          };\n          i(\n            'getNetworkType',\n            {},\n            ((e._complete = function(e) {\n              e = n(e);\n            }),\n            e)\n          );\n        },\n        openLocation: function(e) {\n          i(\n            'openLocation',\n            {\n              latitude: e.latitude,\n              longitude: e.longitude,\n              name: e.name || '',\n              address: e.address || '',\n              scale: e.scale || 28,\n              infoUrl: e.infoUrl || ''\n            },\n            e\n          );\n        },\n        getLocation: function(e) {\n          (e = e || {}),\n            i(\n              h.getLocation,\n              { type: e.type || 'wgs84' },\n              ((e._complete = function(e) {\n                delete e.type;\n              }),\n              e)\n            );\n        },\n        hideOptionMenu: function(e) {\n          i('hideOptionMenu', {}, e);\n        },\n        showOptionMenu: function(e) {\n          i('showOptionMenu', {}, e);\n        },\n        closeWindow: function(e) {\n          i('closeWindow', {}, (e = e || {}));\n        },\n        hideMenuItems: function(e) {\n          i('hideMenuItems', { menuList: e.menuList }, e);\n        },\n        showMenuItems: function(e) {\n          i('showMenuItems', { menuList: e.menuList }, e);\n        },\n        hideAllNonBaseMenuItem: function(e) {\n          i('hideAllNonBaseMenuItem', {}, e);\n        },\n        showAllNonBaseMenuItem: function(e) {\n          i('showAllNonBaseMenuItem', {}, e);\n        },\n        scanQRCode: function(e) {\n          i(\n            'scanQRCode',\n            {\n              needResult: (e = e || {}).needResult || 0,\n              scanType: e.scanType || ['qrCode', 'barCode']\n            },\n            ((e._complete = function(e) {\n              if (P) {\n                const n = e.resultStr;\n                if (n) {\n                  const i = JSON.parse(n);\n                  e.resultStr = i && i.scan_code && i.scan_code.scan_result;\n                }\n              }\n            }),\n            e)\n          );\n        },\n        openAddress: function(e) {\n          i(\n            h.openAddress,\n            {},\n            ((e._complete = function(e) {\n              e = a(e);\n            }),\n            e)\n          );\n        },\n        openProductSpecificView: function(e) {\n          i(h.openProductSpecificView, { pid: e.productId, view_type: e.viewType || 0, ext_info: e.extInfo }, e);\n        },\n        addCard: function(e) {\n          for (var n = e.cardList, t = [], o = 0, r = n.length; o < r; ++o) {\n            const a = n[o],\n              c = { card_id: a.cardId, card_ext: a.cardExt };\n            t.push(c);\n          }\n          i(\n            h.addCard,\n            { card_list: t },\n            ((e._complete = function(e) {\n              let n = e.card_list;\n              if (n) {\n                for (let i = 0, t = (n = JSON.parse(n)).length; i < t; ++i) {\n                  const o = n[i];\n                  (o.cardId = o.card_id),\n                    (o.cardExt = o.card_ext),\n                    (o.isSuccess = !!o.is_succ),\n                    delete o.card_id,\n                    delete o.card_ext,\n                    delete o.is_succ;\n                }\n                (e.cardList = n), delete e.card_list;\n              }\n            }),\n            e)\n          );\n        },\n        chooseCard: function(e) {\n          i(\n            'chooseCard',\n            {\n              app_id: C.appId,\n              location_id: e.shopId || '',\n              sign_type: e.signType || 'SHA1',\n              card_id: e.cardId || '',\n              card_type: e.cardType || '',\n              card_sign: e.cardSign,\n              time_stamp: e.timestamp + '',\n              nonce_str: e.nonceStr\n            },\n            ((e._complete = function(e) {\n              (e.cardList = e.choose_card_info), delete e.choose_card_info;\n            }),\n            e)\n          );\n        },\n        openCard: function(e) {\n          for (var n = e.cardList, t = [], o = 0, r = n.length; o < r; ++o) {\n            const a = n[o],\n              c = { card_id: a.cardId, code: a.code };\n            t.push(c);\n          }\n          i(h.openCard, { card_list: t }, e);\n        },\n        consumeAndShareCard: function(e) {\n          i(h.consumeAndShareCard, { consumedCardId: e.cardId, consumedCode: e.code }, e);\n        },\n        chooseWXPay: function(e) {\n          i(h.chooseWXPay, r(e), e);\n        },\n        openEnterpriseRedPacket: function(e) {\n          i(h.openEnterpriseRedPacket, r(e), e);\n        },\n        startSearchBeacons: function(e) {\n          i(h.startSearchBeacons, { ticket: e.ticket }, e);\n        },\n        stopSearchBeacons: function(e) {\n          i(h.stopSearchBeacons, {}, e);\n        },\n        onSearchBeacons: function(e) {\n          t(h.onSearchBeacons, e);\n        },\n        openEnterpriseChat: function(e) {\n          i('openEnterpriseChat', { useridlist: e.userIds, chatname: e.groupName }, e);\n        },\n        launchMiniProgram: function(e) {\n          i('launchMiniProgram', { targetAppId: e.targetAppId, path: g(e.path), envVersion: e.envVersion }, e);\n        },\n        miniProgram: {\n          navigateBack: function(e) {\n            (e = e || {}),\n              f(() => {\n                i('invokeMiniProgramAPI', { name: 'navigateBack', arg: { delta: e.delta || 1 } }, e);\n              });\n          },\n          navigateTo: function(e) {\n            f(() => {\n              i('invokeMiniProgramAPI', { name: 'navigateTo', arg: { url: e.url } }, e);\n            });\n          },\n          redirectTo: function(e) {\n            f(() => {\n              i(\n                'invokeMiniProgramAPI',\n                {\n                  name: 'redirectTo',\n                  arg: {\n                    url: e.url\n                  }\n                },\n                e\n              );\n            });\n          },\n          switchTab: function(e) {\n            f(() => {\n              i('invokeMiniProgramAPI', { name: 'switchTab', arg: { url: e.url } }, e);\n            });\n          },\n          reLaunch: function(e) {\n            f(() => {\n              i('invokeMiniProgramAPI', { name: 'reLaunch', arg: { url: e.url } }, e);\n            });\n          },\n          postMessage: function(e) {\n            f(() => {\n              i('invokeMiniProgramAPI', { name: 'postMessage', arg: e.data || {} }, e);\n            });\n          },\n          getEnv: function(n) {\n            f(() => {\n              n({ miniprogram: e.__wxjs_environment === 'miniprogram' });\n            });\n          }\n        }\n      },\n      b = 1,\n      R = {};\n    return (\n      S.addEventListener(\n        'error',\n        e => {\n          if (!M) {\n            const n = e.target,\n              i = n.tagName,\n              t = n.src;\n            if (\n              (i == 'IMG' || i == 'VIDEO' || i == 'AUDIO' || i == 'SOURCE') &&\n              t.indexOf('wxlocalresource://') != -1\n            ) {\n              e.preventDefault(), e.stopPropagation();\n              let o = n['wx-id'];\n              if ((o || ((o = b++), (n['wx-id'] = o)), R[o])) return;\n              (R[o] = !0),\n                wx.ready(() => {\n                  wx.getLocalImgData({\n                    localId: t,\n                    success: function(e) {\n                      n.src = e.localData;\n                    }\n                  });\n                });\n            }\n          }\n        },\n        !0\n      ),\n      S.addEventListener(\n        'load',\n        e => {\n          if (!M) {\n            const n = e.target,\n              i = n.tagName;\n            n.src;\n            if (i == 'IMG' || i == 'VIDEO' || i == 'AUDIO' || i == 'SOURCE') {\n              const t = n['wx-id'];\n              t && (R[t] = !1);\n            }\n          }\n        },\n        !0\n      ),\n      N && (e.qq = e.wx = e.jWeixin = N),\n      N\n    );\n  }\n});\n","/**\n * @file constant.js 一些常量\n * @author zongheng(zongheng@pinduoduo.com)\n */\n\n/**\n * 微信js api list\n *\n * @type {string[]}\n * @ignore\n */\nexport const JS_API_LIST = [\n  'addDownloadTask',\n  'queryDownloadTask',\n  'installDownloadTask',\n  'showMenuItems',\n  'hideMenuItems',\n  'onMenuShareAppMessage',\n  'onMenuShareTimeline',\n  'onMenuShareQQ',\n  'onMenuShareQZone',\n  'onMenuShareWeibo',\n  'addCard',\n  'openCard',\n  'chooseCard',\n  'previewImage',\n  'editAddress',\n  'chooseImage',\n  'uploadImage',\n  'getLocation',\n  'openAddress',\n  'getInstallState',\n  'launch3rdApp',\n  'launchApplication',\n  'startRecord',\n  'stopRecord',\n  'uploadVoice',\n  'openBusinessView'\n];\n\n/**\n * 微信开放标签\n * 参考：https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html#4\n * @type {string[]}\n * @ignore\n */\nexport const OPEN_TAG_LIST = [\n  'wx-open-launch-app',\n  'wx-open-launch-weapp',\n  'wx-open-subscribe',\n  'wx-open-audio'\n];\n\n/**\n * 微信菜单项\n *\n * @type {{\n *   SHARE_SESSION: string,\n *   SHARE_QQ: string,\n *   SHARE_QQ_WEIBO: string,\n *   COPY_URL: string,\n *   SHARE_QZONE: string,\n *   SHARE_EMAIL: string,\n *   OPEN_WITH_SAFARI: string,\n *   FAVORITE: string,\n *   SHARE_TIMELINE: string\n * }}\n * @ignore\n */\nexport const WX_MENU_ITEMS = {\n  SHARE_SESSION: 'menuItem:share:appMessage',\n  SHARE_QQ: 'menuItem:share:qq',\n  SHARE_QZONE: 'menuItem:share:QZone',\n  SHARE_QQ_WEIBO: 'menuItem:share:weiboApp',\n  FAVORITE: 'menuItem:favorite',\n  OPEN_WITH_SAFARI: 'menuItem:openWithSafari',\n  SHARE_EMAIL: 'menuItem:share:email',\n  SHARE_TIMELINE: 'menuItem:share:timeline',\n  COPY_URL: 'menuItem:copyUrl'\n};\n\n/**\n * 默认隐藏的微信菜单项\n *\n * @type {(string)[]}\n * @ignore\n */\nexport const DEFAULT_HIDE_ITEM_LIST = [WX_MENU_ITEMS.OPEN_WITH_SAFARI, WX_MENU_ITEMS.SHARE_EMAIL];\n\n/**\n * 分享配置项枚举\n *\n * @type {{QQ_CHAT_SESSION: number, WECHAT_TIMELINE: number, WECHAT_SESSION: number, QQ_ZONE: number}}\n * @ignore\n */\nexport const SHARE_TYPE = {\n  WECHAT_SESSION: 1,\n  WECHAT_TIMELINE: 2,\n  QQ_CHAT_SESSION: 4,\n  QQ_ZONE: 5\n};\n\n/**\n * 分享配置枚举映射到的微信菜单项\n *\n * @type Object<string, string>\n * @ignore\n */\nexport const SHARE_TYPE_MAP_MENU_ITEM = {\n  [SHARE_TYPE.WECHAT_SESSION]: WX_MENU_ITEMS.SHARE_SESSION,\n  [SHARE_TYPE.WECHAT_TIMELINE]: WX_MENU_ITEMS.SHARE_TIMELINE,\n  [SHARE_TYPE.QQ_CHAT_SESSION]: WX_MENU_ITEMS.SHARE_QQ,\n  [SHARE_TYPE.QQ_ZONE]: WX_MENU_ITEMS.SHARE_QZONE\n};\n\n/**\n * 分享菜单项的默认启用配置，值为0表示不启用，1表示启用\n *\n * @type Object<string, 0>\n * @ignore\n */\nexport const DEFAULT_SHARE_TYPE_ENABLE = {\n  [SHARE_TYPE.WECHAT_SESSION]: 0,\n  [SHARE_TYPE.WECHAT_TIMELINE]: 0,\n  [SHARE_TYPE.QQ_CHAT_SESSION]: 0,\n  [SHARE_TYPE.QQ_ZONE]: 0\n};\n","/**\n * @file index.js 微信相关能力封装\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { throwErrorAsync } from '@pdd/core-util';\nimport {\n  JS_API_LIST,\n  OPEN_TAG_LIST,\n  WX_MENU_ITEMS,\n  DEFAULT_HIDE_ITEM_LIST,\n  SHARE_TYPE,\n  SHARE_TYPE_MAP_MENU_ITEM,\n  DEFAULT_SHARE_TYPE_ENABLE\n} from './constant';\nimport './weixinJSBridge';\nimport { sendMetrics } from '@pdd/metrics';\n\nconst PACKAGE_NAME = 'com.xunmeng.pinduoduo';\nconst WX_CHECK_PDD_KEY = 'WxCheckPdd';\n\n// 获取分享菜单显示配置\nfunction getShareMenuItems(shareTypeEnable, onlyWeChat) {\n  const { WECHAT_SESSION, WECHAT_TIMELINE } = SHARE_TYPE;\n  // 后端的配置和前端默认配置merge\n  shareTypeEnable = { ...DEFAULT_SHARE_TYPE_ENABLE, ...shareTypeEnable };\n  return Object.keys(shareTypeEnable).reduce(\n    (result, shareType) => {\n      const menuName = SHARE_TYPE_MAP_MENU_ITEM[shareType];\n      // 配置了onlyWeChat，那么关掉分享到qq跟qq空间\n      if(onlyWeChat && [WECHAT_SESSION, WECHAT_TIMELINE].indexOf(+shareType) < 0) {\n        menuName && result.menuShareItemsToHide.push(menuName);\n      } else {\n        const buff = shareTypeEnable[shareType] ? result.menuShareItemsToShow : result.menuShareItemsToHide;\n        menuName && buff.push(menuName);\n      }\n      return result;\n    },\n    { menuShareItemsToShow: [], menuShareItemsToHide: [] }\n  );\n}\n\n/**\n * @typedef {Object} WxMenuConfig 微信菜单配置信息\n *\n * @property {boolean} [onlyWeChat=false] 关掉分享到qq跟qq空间菜单项\n * @property {boolean} [disableShare=false] 不展示分享相关的菜单项\n * @property {boolean} [disableCopyUrl=false] 不展示复制链接菜单\n * @property {boolean} [enableBrowserOpen=false] 展示允许在浏览器打开选项\n */\n\n/**\n * @external {AxiosInstance} https://github.com/axios/axios#instance-methods\n */\n\n/**\n * 初始化微信配置，仅client环境生效\n *\n * @param {{wechatAppID: string, timestamp: number, noceStr: string, signature: ?string, shareTypeEnable: ?Object<string, number>}} wxConfig 微信签名与分享配置\n * @param {WxMenuConfig} wxMenuConfig 微信菜单配置项\n * @return {Promise<void>}\n */\nexport function initWxConfig({ wechatAppID, timestamp, nonceStr, signature, shareTypeEnable = {} }, wxMenuConfig) {\n  return new Promise((resolve) => {\n    const wx = top.wx || window.wx;\n\n    wx.config({\n      timestamp,\n      signature,\n      nonceStr,\n      debug: false,\n      beta: true,\n      appId: wechatAppID,\n      jsApiList: JS_API_LIST,\n      openTagList: OPEN_TAG_LIST\n    });\n\n    wx.ready(() => {\n      const { menuShareItemsToShow, menuShareItemsToHide } = getShareMenuItems(\n        shareTypeEnable,\n        wxMenuConfig.onlyWeChat\n      );\n      let menuItemsToShow = [];\n      let menuItemsToHide = DEFAULT_HIDE_ITEM_LIST.concat(menuShareItemsToHide);\n\n      // disable share\n      if(wxMenuConfig.disableShare) {\n        menuItemsToHide = menuItemsToHide.concat(menuShareItemsToShow);\n      } else {\n        menuItemsToShow = menuItemsToShow.concat(menuShareItemsToShow);\n      }\n\n      // disable copy url\n      if(wxMenuConfig.disableCopyUrl) {\n        menuItemsToHide.push(WX_MENU_ITEMS.COPY_URL);\n      }\n\n      if(wxMenuConfig.enableBrowserOpen) {\n        menuItemsToHide.splice(0, 1);\n      }\n\n      wx.hideMenuItems({ menuList: menuItemsToHide });\n      wx.showMenuItems({ menuList: menuItemsToShow });\n\n      if(!window.wxReady) {\n        Object.defineProperty(window, 'wxReady', {\n          get() {\n            console.warn('window.wxReady 即将废弃，使用方尽快解除依赖');\n            return true;\n          }\n        });\n      }\n\n      // 无论wx.config成功失败，ready都会调用\n      resolve();\n    });\n\n    wx.error((res) => {\n      throwErrorAsync(res, {\n        error_type: 'wx_config_error',\n        error_message: JSON.stringify(res),\n        payload: {\n          signature\n        }\n      });\n    });\n\n    initAppInstallState();\n  });\n}\n\n/**\n * 初始化微信环境下app安装的信息\n */\nfunction initAppInstallState() {\n  window.wx.ready(async () => {\n    const { wxCheckPdd } = await getAppInstallState();\n    const preWxCheckPdd = +localStorage.getItem(WX_CHECK_PDD_KEY);\n    // 如果当前结果和缓存结果不一致,就触发打点\n    if(preWxCheckPdd !== wxCheckPdd) {\n      sendMetrics({\n        op: 'event',\n        // eslint-disable-next-line\n        sub_op: 'app_check',\n        uninstall_status: wxCheckPdd\n      });\n    }\n    localStorage.setItem(WX_CHECK_PDD_KEY, '' + wxCheckPdd);\n  });\n}\n\n/**\n * 微信环境下获取app安装信息\n *\n * @ignore\n * @return {Promise<{wxCheckPdd: number, version: string}>}\n */\nfunction getAppInstallState() {\n  if(!(window.WeixinJSBridge && window.WeixinJSBridge.invoke)) {\n    return Promise.resolve({\n      version: '',\n      wxCheckPdd: 2 // 调用接口成功-已安装 1;调用接口成功-未安装 0;调用接口失败 2\n    });\n  }\n\n  return new Promise((resolve) => {\n    window.WeixinJSBridge.invoke(\n      'getInstallState',\n      { packageName: PACKAGE_NAME, packageUrl: 'pinduoduo://' },\n      // eslint-disable-next-line\n      ({ err_msg = '', versionName = '' }) => {\n        // eslint-disable-next-line\n        const installed = /get_install_state:yes/.test(err_msg);\n        const uninstalled = /get_install_state:no/.test(err_msg);\n        resolve({\n          version: versionName,\n          wxCheckPdd: installed ? 1 : uninstalled ? 0 : 2\n        });\n      }\n    );\n  });\n}\n","!(function(e, n) {\n  'function' == typeof define && (define.amd || define.cmd)\n    ? define(function() {\n        return n(e);\n      })\n    : n(e, !0);\n})(window, function(o, e) {\n  if (!o.jWeixin) {\n    var n,\n      c = {\n        config: 'preVerifyJSAPI',\n        onMenuShareTimeline: 'menu:share:timeline',\n        onMenuShareAppMessage: 'menu:share:appmessage',\n        onMenuShareQQ: 'menu:share:qq',\n        onMenuShareWeibo: 'menu:share:weiboApp',\n        onMenuShareQZone: 'menu:share:QZone',\n        previewImage: 'imagePreview',\n        getLocation: 'geoLocation',\n        openProductSpecificView: 'openProductViewWithPid',\n        addCard: 'batchAddCard',\n        openCard: 'batchViewCard',\n        chooseWXPay: 'getBrandWCPayRequest',\n        openEnterpriseRedPacket: 'getRecevieBizHongBaoRequest',\n        startSearchBeacons: 'startMonitoringBeacons',\n        stopSearchBeacons: 'stopMonitoringBeacons',\n        onSearchBeacons: 'onBeaconsInRange',\n        consumeAndShareCard: 'consumedShareCard',\n        openAddress: 'editAddress'\n      },\n      a = (function() {\n        var e = {};\n        for (var n in c) e[c[n]] = n;\n        return e;\n      })(),\n      i = o.document,\n      t = i.title,\n      r = navigator.userAgent.toLowerCase(),\n      s = navigator.platform.toLowerCase(),\n      d = !(!s.match('mac') && !s.match('win')),\n      u = -1 != r.indexOf('wxdebugger'),\n      l = -1 != r.indexOf('micromessenger'),\n      p = -1 != r.indexOf('android'),\n      f = -1 != r.indexOf('iphone') || -1 != r.indexOf('ipad'),\n      m = (n = r.match(/micromessenger\\/(\\d+\\.\\d+\\.\\d+)/) || r.match(/micromessenger\\/(\\d+\\.\\d+)/)) ? n[1] : '',\n      g = {\n        initStartTime: L(),\n        initEndTime: 0,\n        preVerifyStartTime: 0,\n        preVerifyEndTime: 0\n      },\n      h = {\n        version: 1,\n        appId: '',\n        initTime: 0,\n        preVerifyTime: 0,\n        networkType: '',\n        isPreVerifyOk: 1,\n        systemType: f ? 1 : p ? 2 : -1,\n        clientVersion: m,\n        url: encodeURIComponent(location.href)\n      },\n      v = {},\n      S = {\n        _completes: []\n      },\n      y = {\n        state: 0,\n        data: {}\n      };\n    O(function() {\n      g.initEndTime = L();\n    });\n    var I = !1,\n      _ = [],\n      w = {\n        config: function(e) {\n          B('config', (v = e));\n          var t = !1 !== v.check;\n          O(function() {\n            if (t)\n              M(\n                c.config,\n                {\n                  verifyJsApiList: C(v.jsApiList),\n                  verifyOpenTagList: C(v.openTagList)\n                },\n                (function() {\n                  (S._complete = function(e) {\n                    (g.preVerifyEndTime = L()), (y.state = 1), (y.data = e);\n                  }),\n                    (S.success = function(e) {\n                      h.isPreVerifyOk = 0;\n                    }),\n                    (S.fail = function(e) {\n                      S._fail ? S._fail(e) : (y.state = -1);\n                    });\n                  var t = S._completes;\n                  return (\n                    t.push(function() {\n                      !(function() {\n                        if (!(d || u || v.debug || m < '6.0.2' || h.systemType < 0)) {\n                          var i = new Image();\n                          (h.appId = v.appId),\n                            (h.initTime = g.initEndTime - g.initStartTime),\n                            (h.preVerifyTime = g.preVerifyEndTime - g.preVerifyStartTime),\n                            w.getNetworkType({\n                              isInnerInvoke: !0,\n                              success: function(e) {\n                                h.networkType = e.networkType;\n                                var n =\n                                  'https://open.weixin.qq.com/sdk/report?v=' +\n                                  h.version +\n                                  '&o=' +\n                                  h.isPreVerifyOk +\n                                  '&s=' +\n                                  h.systemType +\n                                  '&c=' +\n                                  h.clientVersion +\n                                  '&a=' +\n                                  h.appId +\n                                  '&n=' +\n                                  h.networkType +\n                                  '&i=' +\n                                  h.initTime +\n                                  '&p=' +\n                                  h.preVerifyTime +\n                                  '&u=' +\n                                  h.url;\n                                i.src = n;\n                              }\n                            });\n                        }\n                      })();\n                    }),\n                    (S.complete = function(e) {\n                      for (var n = 0, i = t.length; n < i; ++n) t[n]();\n                      S._completes = [];\n                    }),\n                    S\n                  );\n                })()\n              ),\n                (g.preVerifyStartTime = L());\n            else {\n              y.state = 1;\n              for (var e = S._completes, n = 0, i = e.length; n < i; ++n) e[n]();\n              S._completes = [];\n            }\n          }),\n            w.invoke ||\n              ((w.invoke = function(e, n, i) {\n                o.WeixinJSBridge && WeixinJSBridge.invoke(e, x(n), i);\n              }),\n              (w.on = function(e, n) {\n                o.WeixinJSBridge && WeixinJSBridge.on(e, n);\n              }));\n        },\n        ready: function(e) {\n          0 != y.state ? e() : (S._completes.push(e), !l && v.debug && e());\n        },\n        error: function(e) {\n          m < '6.0.2' || (-1 == y.state ? e(y.data) : (S._fail = e));\n        },\n        checkJsApi: function(e) {\n          M(\n            'checkJsApi',\n            {\n              jsApiList: C(e.jsApiList)\n            },\n            ((e._complete = function(e) {\n              if (p) {\n                var n = e.checkResult;\n                n && (e.checkResult = JSON.parse(n));\n              }\n              e = (function(e) {\n                var n = e.checkResult;\n                for (var i in n) {\n                  var t = a[i];\n                  t && ((n[t] = n[i]), delete n[i]);\n                }\n                return e;\n              })(e);\n            }),\n            e)\n          );\n        },\n        onMenuShareTimeline: function(e) {\n          P(\n            c.onMenuShareTimeline,\n            {\n              complete: function() {\n                M(\n                  'shareTimeline',\n                  {\n                    title: e.title || t,\n                    desc: e.title || t,\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href,\n                    type: e.type || 'link',\n                    data_url: e.dataUrl || ''\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        onMenuShareAppMessage: function(n) {\n          P(\n            c.onMenuShareAppMessage,\n            {\n              complete: function(e) {\n                'favorite' === e.scene\n                  ? M('sendAppMessage', {\n                      title: n.title || t,\n                      desc: n.desc || '',\n                      link: n.link || location.href,\n                      img_url: n.imgUrl || '',\n                      type: n.type || 'link',\n                      data_url: n.dataUrl || ''\n                    })\n                  : M(\n                      'sendAppMessage',\n                      {\n                        title: n.title || t,\n                        desc: n.desc || '',\n                        link: n.link || location.href,\n                        img_url: n.imgUrl || '',\n                        type: n.type || 'link',\n                        data_url: n.dataUrl || ''\n                      },\n                      n\n                    );\n              }\n            },\n            n\n          );\n        },\n        onMenuShareQQ: function(e) {\n          P(\n            c.onMenuShareQQ,\n            {\n              complete: function() {\n                M(\n                  'shareQQ',\n                  {\n                    title: e.title || t,\n                    desc: e.desc || '',\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        onMenuShareWeibo: function(e) {\n          P(\n            c.onMenuShareWeibo,\n            {\n              complete: function() {\n                M(\n                  'shareWeiboApp',\n                  {\n                    title: e.title || t,\n                    desc: e.desc || '',\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        onMenuShareQZone: function(e) {\n          P(\n            c.onMenuShareQZone,\n            {\n              complete: function() {\n                M(\n                  'shareQZone',\n                  {\n                    title: e.title || t,\n                    desc: e.desc || '',\n                    img_url: e.imgUrl || '',\n                    link: e.link || location.href\n                  },\n                  e\n                );\n              }\n            },\n            e\n          );\n        },\n        updateTimelineShareData: function(e) {\n          M(\n            'updateTimelineShareData',\n            {\n              title: e.title,\n              link: e.link,\n              imgUrl: e.imgUrl\n            },\n            e\n          );\n        },\n        updateAppMessageShareData: function(e) {\n          M(\n            'updateAppMessageShareData',\n            {\n              title: e.title,\n              desc: e.desc,\n              link: e.link,\n              imgUrl: e.imgUrl\n            },\n            e\n          );\n        },\n        startRecord: function(e) {\n          M('startRecord', {}, e);\n        },\n        stopRecord: function(e) {\n          M('stopRecord', {}, e);\n        },\n        onVoiceRecordEnd: function(e) {\n          P('onVoiceRecordEnd', e);\n        },\n        playVoice: function(e) {\n          M(\n            'playVoice',\n            {\n              localId: e.localId\n            },\n            e\n          );\n        },\n        pauseVoice: function(e) {\n          M(\n            'pauseVoice',\n            {\n              localId: e.localId\n            },\n            e\n          );\n        },\n        stopVoice: function(e) {\n          M(\n            'stopVoice',\n            {\n              localId: e.localId\n            },\n            e\n          );\n        },\n        onVoicePlayEnd: function(e) {\n          P('onVoicePlayEnd', e);\n        },\n        uploadVoice: function(e) {\n          M(\n            'uploadVoice',\n            {\n              localId: e.localId,\n              isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n            },\n            e\n          );\n        },\n        downloadVoice: function(e) {\n          M(\n            'downloadVoice',\n            {\n              serverId: e.serverId,\n              isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n            },\n            e\n          );\n        },\n        translateVoice: function(e) {\n          M(\n            'translateVoice',\n            {\n              localId: e.localId,\n              isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n            },\n            e\n          );\n        },\n        chooseImage: function(e) {\n          M(\n            'chooseImage',\n            {\n              scene: '1|2',\n              count: e.count || 9,\n              sizeType: e.sizeType || ['original', 'compressed'],\n              sourceType: e.sourceType || ['album', 'camera']\n            },\n            ((e._complete = function(e) {\n              if (p) {\n                var n = e.localIds;\n                try {\n                  n && (e.localIds = JSON.parse(n));\n                } catch (e) {}\n              }\n            }),\n            e)\n          );\n        },\n        getLocation: function(e) {},\n        previewImage: function(e) {\n          M(\n            c.previewImage,\n            {\n              current: e.current,\n              urls: e.urls\n            },\n            e\n          );\n        },\n        uploadImage: function(e) {\n          M(\n            'uploadImage',\n            {\n              localId: e.localId,\n              isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n            },\n            e\n          );\n        },\n        downloadImage: function(e) {\n          M(\n            'downloadImage',\n            {\n              serverId: e.serverId,\n              isShowProgressTips: 0 == e.isShowProgressTips ? 0 : 1\n            },\n            e\n          );\n        },\n        getLocalImgData: function(e) {\n          !1 === I\n            ? ((I = !0),\n              M(\n                'getLocalImgData',\n                {\n                  localId: e.localId\n                },\n                ((e._complete = function(e) {\n                  if (((I = !1), 0 < _.length)) {\n                    var n = _.shift();\n                    wx.getLocalImgData(n);\n                  }\n                }),\n                e)\n              ))\n            : _.push(e);\n        },\n        getNetworkType: function(e) {\n          M(\n            'getNetworkType',\n            {},\n            ((e._complete = function(e) {\n              e = (function(e) {\n                var n = e.errMsg;\n                e.errMsg = 'getNetworkType:ok';\n                var i = e.subtype;\n                if ((delete e.subtype, i)) e.networkType = i;\n                else {\n                  var t = n.indexOf(':'),\n                    o = n.substring(t + 1);\n                  switch (o) {\n                    case 'wifi':\n                    case 'edge':\n                    case 'wwan':\n                      e.networkType = o;\n                      break;\n                    default:\n                      e.errMsg = 'getNetworkType:fail';\n                  }\n                }\n                return e;\n              })(e);\n            }),\n            e)\n          );\n        },\n        openLocation: function(e) {\n          M(\n            'openLocation',\n            {\n              latitude: e.latitude,\n              longitude: e.longitude,\n              name: e.name || '',\n              address: e.address || '',\n              scale: e.scale || 28,\n              infoUrl: e.infoUrl || ''\n            },\n            e\n          );\n        },\n        getLocation: function(e) {\n          M(\n            c.getLocation,\n            {\n              type: (e = e || {}).type || 'wgs84'\n            },\n            ((e._complete = function(e) {\n              delete e.type;\n            }),\n            e)\n          );\n        },\n        hideOptionMenu: function(e) {\n          M('hideOptionMenu', {}, e);\n        },\n        showOptionMenu: function(e) {\n          M('showOptionMenu', {}, e);\n        },\n        closeWindow: function(e) {\n          M('closeWindow', {}, (e = e || {}));\n        },\n        hideMenuItems: function(e) {\n          M(\n            'hideMenuItems',\n            {\n              menuList: e.menuList\n            },\n            e\n          );\n        },\n        showMenuItems: function(e) {\n          M(\n            'showMenuItems',\n            {\n              menuList: e.menuList\n            },\n            e\n          );\n        },\n        hideAllNonBaseMenuItem: function(e) {\n          M('hideAllNonBaseMenuItem', {}, e);\n        },\n        showAllNonBaseMenuItem: function(e) {\n          M('showAllNonBaseMenuItem', {}, e);\n        },\n        scanQRCode: function(e) {\n          M(\n            'scanQRCode',\n            {\n              needResult: (e = e || {}).needResult || 0,\n              scanType: e.scanType || ['qrCode', 'barCode']\n            },\n            ((e._complete = function(e) {\n              if (f) {\n                var n = e.resultStr;\n                if (n) {\n                  var i = JSON.parse(n);\n                  e.resultStr = i && i.scan_code && i.scan_code.scan_result;\n                }\n              }\n            }),\n            e)\n          );\n        },\n        openAddress: function(e) {\n          M(\n            c.openAddress,\n            {},\n            ((e._complete = function(e) {\n              e = (function(e) {\n                return (\n                  (e.postalCode = e.addressPostalCode),\n                  delete e.addressPostalCode,\n                  (e.provinceName = e.proviceFirstStageName),\n                  delete e.proviceFirstStageName,\n                  (e.cityName = e.addressCitySecondStageName),\n                  delete e.addressCitySecondStageName,\n                  (e.countryName = e.addressCountiesThirdStageName),\n                  delete e.addressCountiesThirdStageName,\n                  (e.detailInfo = e.addressDetailInfo),\n                  delete e.addressDetailInfo,\n                  e\n                );\n              })(e);\n            }),\n            e)\n          );\n        },\n        openProductSpecificView: function(e) {\n          M(\n            c.openProductSpecificView,\n            {\n              pid: e.productId,\n              view_type: e.viewType || 0,\n              ext_info: e.extInfo\n            },\n            e\n          );\n        },\n        addCard: function(e) {\n          for (var n = e.cardList, i = [], t = 0, o = n.length; t < o; ++t) {\n            var r = n[t],\n              a = {\n                card_id: r.cardId,\n                card_ext: r.cardExt\n              };\n            i.push(a);\n          }\n          M(\n            c.addCard,\n            {\n              card_list: i\n            },\n            ((e._complete = function(e) {\n              var n = e.card_list;\n              if (n) {\n                for (var i = 0, t = (n = JSON.parse(n)).length; i < t; ++i) {\n                  var o = n[i];\n                  (o.cardId = o.card_id),\n                    (o.cardExt = o.card_ext),\n                    (o.isSuccess = !!o.is_succ),\n                    delete o.card_id,\n                    delete o.card_ext,\n                    delete o.is_succ;\n                }\n                (e.cardList = n), delete e.card_list;\n              }\n            }),\n            e)\n          );\n        },\n        chooseCard: function(e) {\n          M(\n            'chooseCard',\n            {\n              app_id: v.appId,\n              location_id: e.shopId || '',\n              sign_type: e.signType || 'SHA1',\n              card_id: e.cardId || '',\n              card_type: e.cardType || '',\n              card_sign: e.cardSign,\n              time_stamp: e.timestamp + '',\n              nonce_str: e.nonceStr\n            },\n            ((e._complete = function(e) {\n              (e.cardList = e.choose_card_info), delete e.choose_card_info;\n            }),\n            e)\n          );\n        },\n        openCard: function(e) {\n          for (var n = e.cardList, i = [], t = 0, o = n.length; t < o; ++t) {\n            var r = n[t],\n              a = {\n                card_id: r.cardId,\n                code: r.code\n              };\n            i.push(a);\n          }\n          M(\n            c.openCard,\n            {\n              card_list: i\n            },\n            e\n          );\n        },\n        consumeAndShareCard: function(e) {\n          M(\n            c.consumeAndShareCard,\n            {\n              consumedCardId: e.cardId,\n              consumedCode: e.code\n            },\n            e\n          );\n        },\n        chooseWXPay: function(e) {\n          M(c.chooseWXPay, V(e), e);\n        },\n        openEnterpriseRedPacket: function(e) {\n          M(c.openEnterpriseRedPacket, V(e), e);\n        },\n        startSearchBeacons: function(e) {\n          M(\n            c.startSearchBeacons,\n            {\n              ticket: e.ticket\n            },\n            e\n          );\n        },\n        stopSearchBeacons: function(e) {\n          M(c.stopSearchBeacons, {}, e);\n        },\n        onSearchBeacons: function(e) {\n          P(c.onSearchBeacons, e);\n        },\n        openEnterpriseChat: function(e) {\n          M(\n            'openEnterpriseChat',\n            {\n              useridlist: e.userIds,\n              chatname: e.groupName\n            },\n            e\n          );\n        },\n        launchMiniProgram: function(e) {\n          M(\n            'launchMiniProgram',\n            {\n              targetAppId: e.targetAppId,\n              path: (function(e) {\n                if ('string' == typeof e && 0 < e.length) {\n                  var n = e.split('?')[0],\n                    i = e.split('?')[1];\n                  return (n += '.html'), void 0 !== i ? n + '?' + i : n;\n                }\n              })(e.path),\n              envVersion: e.envVersion\n            },\n            e\n          );\n        },\n        openBusinessView: function(e) {\n          M(\n            'openBusinessView',\n            {\n              businessType: e.businessType,\n              queryString: e.queryString || '',\n              envVersion: e.envVersion\n            },\n            ((e._complete = function(n) {\n              if (p) {\n                var e = n.extraData;\n                if (e)\n                  try {\n                    n.extraData = JSON.parse(e);\n                  } catch (e) {\n                    n.extraData = {};\n                  }\n              }\n            }),\n            e)\n          );\n        },\n        miniProgram: {\n          navigateBack: function(e) {\n            (e = e || {}),\n              O(function() {\n                M(\n                  'invokeMiniProgramAPI',\n                  {\n                    name: 'navigateBack',\n                    arg: {\n                      delta: e.delta || 1\n                    }\n                  },\n                  e\n                );\n              });\n          },\n          navigateTo: function(e) {\n            O(function() {\n              M(\n                'invokeMiniProgramAPI',\n                {\n                  name: 'navigateTo',\n                  arg: {\n                    url: e.url\n                  }\n                },\n                e\n              );\n            });\n          },\n          redirectTo: function(e) {\n            O(function() {\n              M(\n                'invokeMiniProgramAPI',\n                {\n                  name: 'redirectTo',\n                  arg: {\n                    url: e.url\n                  }\n                },\n                e\n              );\n            });\n          },\n          switchTab: function(e) {\n            O(function() {\n              M(\n                'invokeMiniProgramAPI',\n                {\n                  name: 'switchTab',\n                  arg: {\n                    url: e.url\n                  }\n                },\n                e\n              );\n            });\n          },\n          reLaunch: function(e) {\n            O(function() {\n              M(\n                'invokeMiniProgramAPI',\n                {\n                  name: 'reLaunch',\n                  arg: {\n                    url: e.url\n                  }\n                },\n                e\n              );\n            });\n          },\n          postMessage: function(e) {\n            O(function() {\n              M(\n                'invokeMiniProgramAPI',\n                {\n                  name: 'postMessage',\n                  arg: e.data || {}\n                },\n                e\n              );\n            });\n          },\n          getEnv: function(e) {\n            O(function() {\n              e({\n                miniprogram: 'miniprogram' === o.__wxjs_environment\n              });\n            });\n          }\n        }\n      },\n      T = 1,\n      k = {};\n    return (\n      i.addEventListener(\n        'error',\n        function(e) {\n          if (!p) {\n            var n = e.target,\n              i = n.tagName,\n              t = n.src;\n            if ('IMG' == i || 'VIDEO' == i || 'AUDIO' == i || 'SOURCE' == i)\n              if (-1 != t.indexOf('wxlocalresource://')) {\n                e.preventDefault(), e.stopPropagation();\n                var o = n['wx-id'];\n                if ((o || ((o = T++), (n['wx-id'] = o)), k[o])) return;\n                (k[o] = !0),\n                  wx.ready(function() {\n                    wx.getLocalImgData({\n                      localId: t,\n                      success: function(e) {\n                        n.src = e.localData;\n                      }\n                    });\n                  });\n              }\n          }\n        },\n        !0\n      ),\n      i.addEventListener(\n        'load',\n        function(e) {\n          if (!p) {\n            var n = e.target,\n              i = n.tagName;\n            n.src;\n            if ('IMG' == i || 'VIDEO' == i || 'AUDIO' == i || 'SOURCE' == i) {\n              var t = n['wx-id'];\n              t && (k[t] = !1);\n            }\n          }\n        },\n        !0\n      ),\n      w && (o.wx = o.jWeixin = w),\n      w\n    );\n  }\n\n  function M(n, e, i) {\n    o.WeixinJSBridge\n      ? WeixinJSBridge.invoke(n, x(e), function(e) {\n          A(n, e, i);\n        })\n      : B(n, i);\n  }\n\n  function P(n, i, t) {\n    o.WeixinJSBridge\n      ? WeixinJSBridge.on(n, function(e) {\n          t && t.trigger && t.trigger(e), A(n, e, i);\n        })\n      : B(n, t || i);\n  }\n\n  function x(e) {\n    return (\n      ((e = e || {}).appId = v.appId),\n      (e.verifyAppId = v.appId),\n      (e.verifySignType = 'sha1'),\n      (e.verifyTimestamp = v.timestamp + ''),\n      (e.verifyNonceStr = v.nonceStr),\n      (e.verifySignature = v.signature),\n      e\n    );\n  }\n\n  function V(e) {\n    return {\n      timeStamp: e.timestamp + '',\n      nonceStr: e.nonceStr,\n      package: e.package,\n      paySign: e.paySign,\n      signType: e.signType || 'SHA1'\n    };\n  }\n\n  function A(e, n, i) {\n    ('openEnterpriseChat' != e && 'openBusinessView' !== e) || (n.errCode = n.err_code),\n      delete n.err_code,\n      delete n.err_desc,\n      delete n.err_detail;\n    var t = n.errMsg;\n    t ||\n      ((t = n.err_msg),\n      delete n.err_msg,\n      (t = (function(e, n) {\n        var i = e,\n          t = a[i];\n        t && (i = t);\n        var o = 'ok';\n        if (n) {\n          var r = n.indexOf(':');\n          'confirm' == (o = n.substring(r + 1)) && (o = 'ok'),\n            'failed' == o && (o = 'fail'),\n            -1 != o.indexOf('failed_') && (o = o.substring(7)),\n            -1 != o.indexOf('fail_') && (o = o.substring(5)),\n            ('access denied' != (o = (o = o.replace(/_/g, ' ')).toLowerCase()) && 'no permission to execute' != o) ||\n              (o = 'permission denied'),\n            'config' == i && 'function not exist' == o && (o = 'ok'),\n            '' == o && (o = 'fail');\n        }\n        return (n = i + ':' + o);\n      })(e, t)),\n      (n.errMsg = t)),\n      (i = i || {})._complete && (i._complete(n), delete i._complete),\n      (t = n.errMsg || ''),\n      v.debug && !i.isInnerInvoke && alert(JSON.stringify(n));\n    var o = t.indexOf(':');\n    switch (t.substring(o + 1)) {\n      case 'ok':\n        i.success && i.success(n);\n        break;\n      case 'cancel':\n        i.cancel && i.cancel(n);\n        break;\n      default:\n        i.fail && i.fail(n);\n    }\n    i.complete && i.complete(n);\n  }\n\n  function C(e) {\n    if (e) {\n      for (var n = 0, i = e.length; n < i; ++n) {\n        var t = e[n],\n          o = c[t];\n        o && (e[n] = o);\n      }\n      return e;\n    }\n  }\n\n  function B(e, n) {\n    if (!(!v.debug || (n && n.isInnerInvoke))) {\n      var i = a[e];\n      i && (e = i), n && n._complete && delete n._complete, console.log('\"' + e + '\",', n || '');\n    }\n  }\n\n  function L() {\n    return new Date().getTime();\n  }\n\n  function O(e) {\n    l && (o.WeixinJSBridge ? e() : i.addEventListener && i.addEventListener('WeixinJSBridgeReady', e, !1));\n  }\n});\n","/**\n * @file showSpinnerNative.js\n * @author tenghu\n */\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { getCurrentPlatform } from '@pdd/platform-util';\n\nexport function shouldUseNative() {\n  return getCurrentPlatform().isNativePlatform;\n}\n\nexport function showNative(msg, { hideBg } = {}) {\n  const param = hideBg\n    ? {}\n    : {\n      loading_style: '2',\n      message: msg\n    };\n\n  invokeBridgeCallNativeFun('JSUIControl', 'showLoading', param);\n}\n\nexport function hideNative() {\n  invokeBridgeCallNativeFun('JSUIControl', 'hideLoading');\n}\n","/**\n * @file index.js, Container\n * @author tenghu\n */\nimport React from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@pdd/cui-util';\nimport { getCDNImgUrl } from '@pdd/core-util';\nimport styles from './index.iso.scss';\n\nconst spinnerUrl = getCDNImgUrl('/core-ui/spinner.png');\n\nfunction preloadImg(imgUrl) {\n  const img = new Image();\n  img.src = imgUrl;\n}\n\nif (process.env.BROWSER) {\n  setTimeout(() => preloadImg(spinnerUrl), 0);\n}\n\n/**\n * @visibleName Spinner.SpinnerImg\n */\nfunction SpinnerImg({ className, bigger, ...otherProps }) {\n  return <img src={spinnerUrl} {...otherProps} className={cx(styles.root, className, bigger && styles.bigger)} />;\n}\n\nSpinnerImg.propTypes = {\n  /**\n   * 更大的size\n   */\n  bigger: PropTypes.bool\n};\n\nexport default withStyles(styles)(SpinnerImg);\n","/**\n * @file index.js, Container\n * @author tenghu\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { withStyles } from '@pdd/cui-util';\nimport styles from './index.iso.scss';\n\n/**\n * @visibleName Spinner.Container\n */\nfunction Container({ className, style, bigger, hideBg, ...otherProps }) {\n  const computedStyle = hideBg ? { backgroundColor: 'transparent', ...style } : style;\n  return <div {...otherProps} style={computedStyle} className={cx(styles.root, className, bigger && styles.bigger)} />;\n}\n\nContainer.propTypes = {\n  /**\n   * 隐藏背景（透明色）\n   */\n  hideBg: PropTypes.bool,\n  /**\n   * 更大的size，用于放提示文本\n   */\n  bigger: PropTypes.bool\n};\n\nexport default withStyles(styles)(Container);\n","/**\n * @file index.js, SpinnerH5\n * @author tenghu\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport SpinnerImg from './SpinnerImg';\nimport Container from './Container';\n\n/**\n * SpinnerH5\n * @visibleName SpinnerH5\n */\nfunction SpinnerH5(props) {\n  const { style, className, children, hideBg, ContainerProps, SpinnerImgProps } = props;\n  const hasContent = !!children;\n  return (\n    <Container bigger={hasContent} hideBg={hideBg} style={style} className={className} {...ContainerProps}>\n      <SpinnerImg bigger={hasContent} {...SpinnerImgProps} />\n      {hideBg ? '' : children}\n    </Container>\n  );\n}\n\nSpinnerH5.propTypes = {\n  /**\n   * 隐藏背景（透明色），只显示菊花\n   */\n  hideBg: PropTypes.bool,\n  /**\n   * 透传给子组件Container的props\n   */\n  ContainerProps: PropTypes.object,\n  /**\n   * 透传给子组件SpinnerImg的props\n   */\n  SpinnerImgProps: PropTypes.object,\n  /**\n   * 透传给子组件Container\n   */\n  className: PropTypes.string,\n  /**\n   * 透传给子组件Container\n   */\n  style: PropTypes.object\n};\n\nexport default SpinnerH5;\n","/**\n * @file showSpinnerH5.js\n * @author tenghu\n */\nimport React from 'react';\nimport SpinnerH5 from '../SpinnerH5';\nimport { renderPopup } from '@pdd/cui-util';\n\nlet hideSpinner;\nexport function hideH5() {\n  hideSpinner && hideSpinner();\n  hideSpinner = null;\n}\n/**\n * @param {string} msg - 提示消息\n * @param {[object]} options - 配置，透传给SpinnerH5组件\n * @param {[object]} options.hideBg - 隐藏背景，只显示菊花\n */\nexport function showH5(msg, options = {}) {\n  hideSpinner && hideSpinner();\n  hideSpinner = renderPopup(<SpinnerH5 {...options}>{msg}</SpinnerH5>);\n}\n","/**\n * @file renderPopup.js\n * @author tenghu\n */\nimport ReactDOM from 'react-dom';\nimport renderClient from './renderClient';\n\n/**\n * 弹出框渲染函数: 新建 body 子节点作为渲染容器, 并返回销毁函数\n * @param {element} popup\n * @returns {function} - 清理掉之前渲染的弹窗\n * @example\n * const cleanupPopup = renderPopup(<ConfirmDialog title=\"Are you sure?\" onConfirm={() => cleanupPopup()} />);\n */\nexport default function renderPopup(popup) {\n  const container = document.createElement('div');\n  document.body.appendChild(container);\n\n  renderClient(popup, container);\n\n  let timeoutId;\n  return function cleanupPopup() {\n    if (timeoutId) {\n      return;\n    }\n    timeoutId = setTimeout(() => {\n      ReactDOM.unmountComponentAtNode(container);\n      document.body.removeChild(container);\n    }, 0);\n  };\n}\n","\nimport { shouldUseNative, showNative, hideNative } from './showSpinnerNative';\nimport { showH5, hideH5 } from './showSpinnerH5';\n\nfunction show(...args) {\n  if (process.env.BROWSER) {\n    shouldUseNative() ? showNative(...args) : showH5(...args);\n  }\n}\n\nfunction hide() {\n  if (process.env.BROWSER) {\n    shouldUseNative() ? hideNative() : hideH5();\n  }\n}\n\nfunction showWithoutBg() {\n  show('', { hideBg: true });\n}\nexport { show, showH5, showWithoutBg, hide, hideH5 };\n","/**\n * @file Spinner.js\n * @author tenghu\n * hybrid版本\n */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { show, hide } from '../showSpinner';\n\n/**\n * Spinner组件，hybrid实现\n */\nexport default class Spinner extends PureComponent {\n  componentDidMount() {\n    const { msg, hideBg } = this.props;\n    show(msg, { hideBg });\n  }\n\n  componentWillUnmount() {\n    hide();\n  }\n\n  render() {\n    return null;\n  }\n}\n\nSpinner.propTypes = {\n  /**\n     * 是否隐藏背景\n     */\n  hideBg: PropTypes.bool,\n  /**\n     * 消息内容\n     */\n  msg: PropTypes.string\n};\n\nSpinner.defaultProps = {\n  hideBg: false,\n  msg: ''\n};\n","/**\n * @file TimeoutSpinner.js 超时跳网络异常页的菊花\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport React, { useEffect } from 'react';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { showRetryPage } from '@pdd/native-util';\nimport { Spinner } from '@pdd/cui-spinner';\n\nexport default function TimeoutSpinner() {\n  useEffect(() => {\n    if(getCurrentPlatform().isNativePlatform) {\n      const params = {\n        errorType: 'networkError',\n        params: { title: '手机网络有问题', message: '请检查网络', iconType: 'e779' }\n      };\n      const timer = setTimeout(() => showRetryPage(params).catch(() => showRetryPage(params)), 10000);\n\n      return () => clearTimeout(timer);\n    }\n  }, []);\n\n  return <Spinner hideBg={true} />;\n}\n","/**\n * @file storeProvider 支持多store高阶组件创建函数，操作store获取数据，后端渲染失败了重新获取一遍数据, 支持多个store\n * @author zongheng@pinduoduo.com\n */\nimport React from 'react';\nimport TimeoutSpinner from '@pdd/isomorphic-mobx-framework/lib/components/TimeoutSpinner';\nimport { errors } from '@pdd/error-status';\nimport PropTypes from 'prop-types';\nimport { PropTypes as MobxPropTypes, observer } from 'mobx-react';\n\nconst DEFAULTS = {\n  redirectUrl: '/',\n  requireLogin: true,\n  fallbackCSR: false,\n  beforeRender: (req, res, stores) => true,\n  renderSpinner: () => <TimeoutSpinner />\n};\n\n/**\n * @typedef {Object} appConfig\n * @property {string} serverTemplateName 应用页面服务端模板名\n * @property {string} [errorTemplateName] 应用页面服务端出错时渲染的模板名，默认为serverTemplateName\n * @property {title} [string] 页面标题\n * @property {boolean} [requireLogin=true] 是否要求登录, 默认为true\n * @property {string} [redirectUrl='/'] 异常跳转地址\n * @property {boolean} [fallbackCSR=false] 服务端异常时，是否降级到csr重试\n * @property {beforeRender} [beforeRender=() => true] 渲染前的拦截函数，返回false表示终止渲染\n * @property {function(error : *) : *} [dealServerError] 服务端错误处理函数，返回包装后的错误信息\n * @property {function() : React.Component} [renderSpinner] spinner渲染函数，返回一个spinner组件\n */\n\n/**\n * @typedef {function(req: Request, res: Response, stores: Object<string, MobxPropTypes.observableObject>) : boolean} beforeRender\n */\n\n/**\n * @typedef {React.Component} App\n * @property {appConfig} appConfig 应用配置\n * @property {function() : Object<string, MobxPropTypes.observableObject>} createStores 创建各个mobx store\n */\n\n/**\n * 高阶组件创建函数，操作store获取数据，后端渲染失败了重新获取一遍数据：\n *\n *  1. 支持多个store\n *  2. 支持超时跳转超时页面\n *\n * @param {Object<string, PageStore>} Stores 要注入进来的多个Store集合\n * @param {appConfig} appConfig 应用配置\n * @return {function(Component: React.Component): App} 高阶组件函数\n */\nexport function appProvider(Stores, appConfig) {\n  return (Component) => {\n    class App extends React.Component {\n      static displayName = `appProvider(${Component.displayName || Component.name})`;\n\n      static appConfig = {\n        dealServerError: (error) => {\n          if(error.errorCode === errors.AUTHENTICATION_FAILED || appConfig.fallbackCSR) {\n            return null;\n          }\n\n          return error;\n        },\n        errorTemplateName: appConfig.serverTemplateName,\n        ...DEFAULTS,\n        ...appConfig\n      };\n\n      static propTypes = {\n        stores: PropTypes.arrayOf(MobxPropTypes.observableObject),\n        pageInfo: PropTypes.object,\n      };\n\n      static createStores() {\n        return Object.keys(Stores).reduce((result, key) => {\n          result[key] = new Stores[key]();\n          return result;\n        }, {});\n      }\n\n      async componentDidMount() {\n        // 暂时认为有任意一个store没有在服务端完成数据加载，则认为是服务端渲染失败，客户端全部重新请求\n        // todo：理想情况应该是各个store互不干扰，其中一个失败在客户端可以独立重新加载，不影响其他组件\n        const isClientRender = this.props.stores.some(store => !store.isServerRendered);\n        if(!isClientRender) {\n          this.props.stores.forEach(store => store.prepareClientData());\n        }\n\n        this.props.stores.forEach(store => store.finishInitLoading());\n      }\n\n      componentDidCatch(error, info) {\n        /* eslint-disable */\n        if(process.env.NODE_ENV === 'development') {\n          console.log('renderError:', error);\n          console.log('renderInfo:', info);\n          throw error;\n        }\n        /* eslint-enable */\n\n        // todo: logger之类的重构后，可能还是直接用logger发送比较合适，可以更好的查看组件树\n        error.message += '_' + JSON.stringify(info);\n        // 生成环境下直接抛error会被吞react吞了，包装成异步异常丢出去\n        setTimeout(() => {\n          throw error;\n        });\n      }\n\n      render() {\n        return this.props.stores.every(store => store.isFinishInitLoading)\n          ? <Component />\n          : App.appConfig.renderSpinner();\n      }\n    }\n\n    return observer(App);\n  };\n}\n","/**\n * @file index.js isomorphic-mobx-framework 适配器\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport React from 'react';\nimport { Provider, useStaticRendering } from 'mobx-react';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\n\nexport const createPage = (Component) => {\n  !process.env.BROWSER && useStaticRendering(true);\n\n  const App = ({ stores, ...otherProps }) => {\n    return (\n      <Provider {...stores}>\n        <Component stores={Object.values(stores)} {...otherProps} />\n      </Provider>\n    );\n  };\n\n  hoistNonReactStatics(App, Component);\n\n  return {\n    Component: App,\n    getInitialProps: createInitialPropsFun(Component),\n    requireLogin: Component.appConfig.requireLogin\n  };\n};\n\nexport { bootClient } from './bootClient';\n\nexport { appProvider } from './appProvider';\n\nconst createInitialPropsFun = (Component) => {\n  return async (context) => {\n    // 与 Chunk 公用 store，传下去\n    const stores = context.stores = Component.stores || Component.createStores();\n    await Promise.all(Object.values(stores).map(store => process.env.BROWSER ?\n      store.initClientData(Component.pageInfo) :\n      store.initServerData(context, context.userInfo?.accessToken)));\n\n    return { stores };\n  };\n};\n","/**\n * @file constant\n * @author tianwen(tianwen@pinduoduo.com)\n */\nexport const INITIAL_PROPS_LOADED = 'XRenderInitialPropsLoaded';\nexport const CHUNK_DATA_LOADED = 'XRenderChunkDataLoaded';\n","/**\n * @file util.js 一些工具方法\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { INITIAL_PROPS_LOADED } from './constant';\n\nconst WEBP_KEY = 'webp';\nconst WEBP_VALUE_TRUE = '1';\n\n/**\n * 获取是否支持webp\n * @param {Object} cookies - requestContext.cookies\n * @returns {boolean} 是否支持webp\n */\nexport function isSupportWebpFromCookie(cookies) {\n  return WEBP_VALUE_TRUE === cookies[WEBP_KEY];\n}\n\nexport function catchError(func) {\n  try {\n    return Promise.resolve(func());\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}\n\nexport function waitRawDataReady() {\n  return new Promise(res => {\n    // 如果有rawData或DOM ready了代表可以执行初始化了，否则监听它俩\n    if(window.hasOwnProperty('rawData') || document.readyState !== 'loading') {\n      res();\n    } else {\n      document.addEventListener(INITIAL_PROPS_LOADED, res, { once: true });\n      document.addEventListener('DOMContentLoaded', res, { once: true });\n    }\n  });\n}\n\nexport function onDOMReady(callback) {\n  if(document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', callback, { once: true });\n  } else {\n    callback();\n  }\n}\n","/**\n * @file context.js 上下文定义\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport React, { useContext } from 'react';\n\nexport const ChunkContext = React.createContext({});\n\n/**\n * @typedef {Object} ClientChunk 用于浏览器端流式渲染的 ClientChunk 结构\n * @property {*} data Chunk 的数据\n * @property {boolean} isReady 是否就绪，此时可用于渲染\n * @property [function(): Promise<*>] retriever 数据获取函数\n */\n\n/**\n * 用于 client 端返回对应 key 值的 chunk 信息和更新函数\n * @param {string} key 需要获取 chunk 的 key\n * @return {ClientChunk | ServerChunk} 返回对应的 Chunk 信息\n */\nexport const useChunk = key => {\n  const chunk = useContext(ChunkContext)[key];\n\n  if(process.env.NODE_ENV === 'development' && !chunk) {\n    throw new Error(`chunkDataKey: ${key} 对应的 Chunk 不存在！`);\n  }\n\n  return chunk;\n};\n","/**\n * @file ChunkProvider.js Chunk 生产组件\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChunkContext } from './context';\nimport { onDOMReady } from '../util';\nimport { CHUNK_DATA_LOADED } from '../constant';\n\nconst ClientChunkProvider = ({ initialContext, children }) => {\n  const [chunkContext, setChunkContext] = useState(initialContext);\n\n  useEffect(() => {\n    const assignChunks = (chunks) => {\n      Object.entries(chunks).forEach(([key, chunk]) => {\n        Object.assign(chunkContext[key], chunk);\n      });\n      setChunkContext({ ...chunkContext });\n    };\n\n    const ensureChunkData = (key, chunk) =>  {\n      if(!chunk.isReady) {\n        chunk.retriever()\n          .then(data => assignChunks({ [key]: { data, isReady: true } }))\n          .catch(e => {\n            e.message = 'chunkFetcher 失败: ' + e.message;\n            throw e;\n          });\n      }\n    }\n\n    // 已有 data 的 chunk，更新 isReady 为 true\n    const readyChunks = Object.entries(chunkContext).reduce((readyChunks, [key, chunk]) => {\n      if (chunk.hasOwnProperty('data')) {\n        readyChunks[key] = { isReady: true };\n      } else {\n        // DOM ready 后，如果 chunk data 还没 ready 则代表服务端失败了，进行客户端接口重试\n        onDOMReady(() => ensureChunkData(key, chunk));\n      }\n      return readyChunks;\n    }, {});\n    assignChunks(readyChunks);\n\n    // 没有 data 的 chunk，在拿到 data 后，更新这个 chunk\n    const chunkDataLoadedListener = ({ detail: { dataKey, data } }) => {\n      assignChunks({ [dataKey]: { data, isReady: true } });\n    };\n    document.addEventListener(CHUNK_DATA_LOADED, chunkDataLoadedListener);\n    onDOMReady(() => document.removeEventListener(CHUNK_DATA_LOADED, chunkDataLoadedListener));\n\n  }, []);\n\n  return (\n    <ChunkContext.Provider value={chunkContext}>{children}</ChunkContext.Provider>\n  );\n};\n\nconst ServerChunkProvider = ({ initialContext, children }) => (\n  <ChunkContext.Provider value={initialContext}>{children}</ChunkContext.Provider>\n);\n\nexport const ChunkProvider = process.env.BROWSER ? ClientChunkProvider : ServerChunkProvider;\n\nChunkProvider.propTypes = {\n  initialContext: PropTypes.object,\n  children: PropTypes.element\n};\n","/**\n * @file createClientContext.js 创建浏览器端上下文\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { parseQuery, getCookie } from '@pdd/core-util';\nimport { getPlatform } from '@pdd/platform-util';\nimport { getUserInfoSync } from '@pdd/auth';\nimport { isSupportWebpFromCookie } from '../util';\n\n/**\n * @external {IPlatform} http://fweb1st.prod.yiran.com:5000/docs/platform-util/class/src/IPlatform.js~IPlatform.html\n */\n\n/**\n * @typedef {Object} ClientContext 信息上下文，提供同构化场景的一些常用信息属性封装\n * @property {string} hostname 当前请求会话的hostname（不带端口号）\n * @property {string} pathname 当前请求会话的pathname\n * @property {string} userAgent 当前请求会话的userAgent\n * @property {!Object} cookies 当前请求会话的cookie\n * @property {!Object} query 当前请求会话的查询参数\n * @property {!IPlatform} platform 当前请求会话的平台环境实例\n * @property {boolean} isSupportWebp 是否支持webp格式图片\n * @property {{accessToken:string, uid:string, uin:string} | null} userInfo 用户信息，未登录为null\n */\n\nlet isSupportWebpCache;\n\n/**\n * 创建浏览器端信息上下文\n *\n * @ignore\n * @return {ClientContext} context\n */\nexport function createClientContext() {\n  return {\n    get pathname() {\n      return location.pathname;\n    },\n\n    get query() {\n      return parseQuery(location.search);\n    },\n\n    get userAgent() {\n      return navigator.userAgent;\n    },\n\n    get hostname() {\n      return location.hostname;\n    },\n\n    get cookies() {\n      return getCookie();\n    },\n\n    get platform() {\n      return getPlatform(navigator.userAgent);\n    },\n\n    get isSupportWebp() {\n      if (isSupportWebpCache === undefined) {\n        isSupportWebpCache = isSupportWebpFromCookie(this.cookies);\n      }\n      return isSupportWebpCache;\n    },\n\n    get userInfo() {\n      const user = getUserInfoSync();\n      return user.accessToken ? user : null;\n    },\n\n    getHeader(key) {\n      console.error('浏览器环境下无法调用getHeader方法');\n      return undefined;\n    }\n  };\n}\n","/**\n * @file index.js 前端页面初始化模块\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ChunkProvider } from '../core/chunk/ChunkProvider';\nimport { createClientContext } from '../core/requestContext/client';\nimport { waitRawDataReady, catchError } from '../core/util';\n\nexport async function clientController(page) {\n  await waitRawDataReady();\n  const Component = page.Component;\n  const isSSR = window.__SSR__;\n  const method = isSSR ? 'hydrate' : 'render';\n  const [initialProps, chunkProps] = await retrieveClientProps(page, {\n    isSSR\n  });\n  const app = (\n    <ChunkProvider initialContext={chunkProps}>\n      <Component {...initialProps} />\n    </ChunkProvider>\n  );\n\n  ReactDOM[method](app, document.getElementById('main'));\n}\n\nasync function retrieveClientProps(page, config) {\n  const getChunkFetcher = (context, initialPropsP) => {\n    return typeof page.getChunkDataFetcher === 'function' ?\n      page.getChunkDataFetcher(context, initialPropsP) : Promise.resolve({});\n  };\n\n  const getChunkProps = async (context, initialPropsP) => {\n    const chunkFetcher = await getChunkFetcher(context, initialPropsP);\n    return Object.entries(chunkFetcher).reduce((chunkData, [key, retriever]) => {\n      chunkData[key] = chunkData[key] || {};\n      chunkData[key].retriever = chunkFetcher[key];\n      if (!config.isSSR) { // csr chunk 与 content 并发请求\n        const chunkPromise = catchError(chunkFetcher[key]);\n        chunkData[key].retriever = () => chunkPromise;\n      }\n      return chunkData;\n    }, window.__CHUNK_DATA__ || {});\n  };\n\n  const getInitialProps = (context) => {\n    // __INITIAL_PROPS__ 主要提供给更上层的框架适配用，比如初始属性需要根据rawData进一步还原为带方法的对象等\n    const initialProps = window.__INITIAL_PROPS__ || window.rawData;\n    if(initialProps) {\n      return Promise.resolve(initialProps);\n    }\n\n    return typeof page.getInitialProps === 'function' ? page.getInitialProps(context) : Promise.resolve({});\n  };\n\n  const context = createClientContext();\n  const initialPropsP = getInitialProps(context);\n  const chunkPropsP = getChunkProps(context, initialPropsP);\n  return Promise.all([initialPropsP, chunkPropsP]);\n}\n","import React, { Component } from 'react';\n\nclass ErrorBoundary extends Component {\n  static defaultProps = {\n    FallbackComponent: () => null\n  };\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch(error, info) {\n    this.setState({\n      hasError: true\n    });\n  }\n\n  render() {\n    const { children, FallbackComponent, ...otherProps } = this.props;\n    if (this.state.hasError) {\n      return <FallbackComponent {...otherProps} />;\n    }\n    return children;\n  }\n}\n\nexport default ErrorBoundary;\n","/**\n * @file ChunkRender.js 流式渲染组件\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useChunk } from './context';\nimport ErrorBoundary from './ErrorBoundary';\n\nconst ServerChunkRender = ({ chunkDataKey, Component, ComponentProps, children }) => {\n  const chunk = useChunk(chunkDataKey);\n  const chunkId = 'chunk-' + Math.random().toString(36).slice(2);\n  chunk && chunk.add(chunkId, Component, ComponentProps);\n  return (\n    <div data-chunk-id={chunkId}>{children}</div>\n  );\n};\n\nconst ClientChunkRender = ({ chunkDataKey, Component, ComponentProps, FallbackComponent }) => {\n  const chunk = useChunk(chunkDataKey);\n\n  return chunk.isReady ? <div>\n    <ErrorBoundary chunkData={chunk.data} {...ComponentProps} FallbackComponent={FallbackComponent} >\n      <Component chunkData={chunk.data} {...ComponentProps} />\n    </ErrorBoundary>\n  </div> : <div suppressHydrationWarning dangerouslySetInnerHTML={{ __html: '' }} />;\n};\n\nexport const ChunkRender = process.env.BROWSER ? ClientChunkRender : ServerChunkRender;\n\nChunkRender.propTypes = {\n  chunkDataKey: PropTypes.string.isRequired,\n  Component: PropTypes.elementType.isRequired,\n  ComponentProps: PropTypes.object,\n  children: PropTypes.node,\n  FallbackComponent: PropTypes.elementType\n};\n","/**\n * @file util.js 一些工具方法\n * @author jiangliuer(jiangliuer@pinduoduo.com) zongheng(zongheng@pinduoduo.com)\n */\nimport { getNativeVersion, getPlatformByUa, PLATFORM } from '@pdd/platform-util/lib/common';\n\n/**\n * 格式化错误堆栈信息\n * @private\n * @param {Error} [error=null] 待处理的error对象\n * @returns {string} 格式化过的调用堆栈\n */\nexport function processStackMsg(error) {\n  if(!error || !error.stack) {\n    return '';\n  }\n\n  const stack = error.stack\n    .replace(/\\n/gi, '')\n    .split(/\\bat\\b/)\n    .slice(0, 5)\n    .join('@')\n    .replace(/\\?[^:]+/gi, '');\n\n  const msg = error.toString();\n  return stack.indexOf(msg) < 0 ? msg + '@' + stack : stack;\n}\n\n/**\n * 格式化Error对象返回可供错误上报的格式\n * @private\n * @param {Error} e\n * @returns {{error_msg: string, error_stack: string, Error: Error}}\n */\nexport function dealError(e) {\n  return { error_msg: e && e.message, error_stack: processStackMsg(e), Error: e };\n}\n\n/**\n * 将str中的PDDAccessToken替换为长度值 类似 PDDAccessToken=59\n * @private\n * @param {string} str 带过滤敏感信息的字符串\n * @returns {string} 过滤敏感信息后的字符串\n */\nexport function replaceAccessToken(str) {\n  const reg = /(PDDAccessToken=|AccessToken=|\"AccessToken\":)\\s*\"?([^;,\"]+)\"?([;,]?\\s*)/gi;\n  return str && str.replace(reg, (match, p1, p2, p3) => `${p1}${p2.length}${p3}`);\n}\n\n/**\n * JSON.stringify 修复 cyclic bug\n * @private\n * @returns {function(*, *): *}\n */\nexport function jsonStringifyReplacer() {\n  const seen = [];\n  return function (key, value) {\n    if(value !== null && typeof value === 'object') {\n      if(seen.indexOf(value) >= 0) {\n        return;\n      }\n      seen.push(value);\n    }\n    return value;\n  };\n}\n\n// 简单缓存计算结果\nexport function memo(fn) {\n  let cache = null;\n  return (...args) => {\n    if(!cache) {\n      cache = fn.apply(null, args);\n    }\n\n    return cache;\n  };\n}\n\n// 返回简单的platform对象\nexport const getSimplePlatform = memo(() => {\n  const platform = getPlatformByUa(navigator.userAgent);\n  const isNativePlatform = platform === PLATFORM.PddAndroid || platform === PLATFORM.PddIOS;\n  const isTinyNativePlatform = platform === PLATFORM.PDDTinyAndorid;\n  const version = isNativePlatform && getNativeVersion(navigator.userAgent, platform);\n  return { isNativePlatform, isTinyNativePlatform, platform, version };\n});\n","/**\n * @file reporter.js 上报模块\n * @author jiangliuer(jiangliuer@pinduoduo.com) zongheng(zongheng@pinduoduo.com)\n */\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\nimport { compareVersion } from '@pdd/platform-util';\nimport { dealError, replaceAccessToken, jsonStringifyReplacer, getSimplePlatform, memo } from './utils';\n\n/**\n * app环境错误日志上报\n * @private\n * @param {Object} params 待上报的错误信息\n * @returns {*|Promise<any>}\n */\nexport function nativeSend(params) {\n  const reportUrl = getReporterUrl();\n  const { isNativePlatform, version } = getSimplePlatform();\n  const errorReportByNative = isNativePlatform && compareVersion(version, '5.41.0') >= 0;\n  if(!errorReportByNative && isErrorSample()) {\n    // 如果超过抽样比例则不上报\n    return;\n  }\n  if(errorReportByNative) {\n    // AMAnalytics.send需要params是flatten之后的obj,JSReporter.addMarmotLog直接上报错误的params即可\n    return invokeBridgeCallNativeFun('JSReporter', 'addMarmotLog', params).catch(onCatchError);\n  }\n  invokeBridgeCallNativeFun('JSNetwork', 'request', {\n    method: 'POST',\n    url: reportUrl,\n    headers: { 'Content-Type': 'text/plain;charset=UTF-8' },\n    data: JSON.stringify(params)\n  }).catch(onCatchError);\n}\n\n/**\n * 非app环境错误日志上报\n * @private\n * @param {object} params 待上报的错误信息\n */\nexport function xhrSend(params) {\n  if(isErrorSample()) {\n    return;\n  }\n  const reportUrl = getReporterUrl();\n  const http = new XMLHttpRequest();\n  http.open('POST', reportUrl, true);\n  http.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8');\n  http.withCredentials = true;\n  http.send(JSON.stringify(params));\n}\n\n/**\n * 用于inline时的错误捕获上报\n * @ignore\n * @param {Object} params 待上报的错误信息\n */\nexport function inlineSend(params) {\n  const { isNativePlatform, version } = getSimplePlatform();\n  const reportByNative = isNativePlatform && window.pinbridge && compareVersion(version, '5.41.0') >= 0;\n\n  if(reportByNative) {\n    window.pinbridge.callNative('JSReporter', 'addMarmotLog', params);\n  } else {\n    xhrSend(params);\n  }\n}\n\n/**\n * 根据平台信息获取该平台使用的日志上报函数\n * @private\n * @return {Function} 该平台使用的日志上报函数\n */\nexport function getDefaultReporter() {\n  const { isNativePlatform, isTinyNativePlatform } = getSimplePlatform();\n  return isNativePlatform || isTinyNativePlatform ? nativeSend : xhrSend;\n}\n\n// 获取错误上报打点地址\nconst getReporterUrl = memo(() => {\n  const isTest = location.href.includes('hutaojie') || location.hostname.includes('panduoduo.yangkeduo.com');\n  return isTest ? 'https://tne.hutaojie.com/tne.gif' : 'https://tne.pinduoduo.com/tne.gif';\n});\n\n/**\n * app内错误上报失败时兜底逻辑\n * @param {Error} e 上报失败时抛出的错误对象\n */\nfunction onCatchError(e) {\n  const error = dealError(e); // send时候的报错通过console.error依赖app上报，防止循环错误上报\n  console.error(replaceAccessToken(JSON.stringify(error, jsonStringifyReplacer()))); // eslint-disable-line\n}\n\n/**\n * 是否对错误上报进行抽样\n * @return {boolean}\n */\nfunction isErrorSample() {\n  return window.__ERROR_SAMPLE_RATE__ && Math.random() > window.__ERROR_SAMPLE_RATE__;\n}\n","import { PLATFORM } from '@pdd/platform-util';\nimport { parseQuery } from '@pdd/core-util';\nimport { memo } from '../common/utils';\n\nconst HTJ_HOST = 'https://pmmtk.hutaojie.com';\nconst HOST = 'https://pmmtk-a.pinduoduo.com';\n\nconst LOG_PATH = '/api/pmm/front_log';\nconst ERROR_PATH = '/api/pmm/front_err';\n\nconst defaultBizSide = 'consumer-platform-fe';\n\n// 日志大分类\nexport const CATEGORY = {\n  ERROR: 5, // 错误日志 5\n  LOG: 6 // 普通日志 6 需要于下面的 type: 600 配合使用\n};\n\nexport const ERROR_TYPE_CONFIG = {\n  API_ERROR: 500,\n  RESOURCE_ERROR: 501,\n  CUSTOM_ERROR: 502,\n  NORMAL_LOG: 600\n};\n\nconst isTestEnv =\n  typeof window !== 'undefined'\n    ? window.location.href.includes('hutaojie') || window.location.hostname.includes('panduoduo.yangkeduo.com')\n    : true;\n\n// 获取错误上报打点地址\nexport const getReporterUrl = (type, appInfo = {}) => {\n  const { pmmHost } = appInfo;\n  const currentHost = pmmHost || HOST;\n  if(type === ERROR_TYPE_CONFIG.NORMAL_LOG) {\n    return isTestEnv ? `${HTJ_HOST}${LOG_PATH}` : `${currentHost}${LOG_PATH}`;\n  }\n  return isTestEnv ? `${HTJ_HOST}${ERROR_PATH}` : `${currentHost}${ERROR_PATH}`;\n};\n\nexport const getAppInfo = ({ bizSide, appId, testAppId }) => {\n  if(typeof window !== 'undefined') {\n    const appInfo = {\n      bizSide: defaultBizSide\n    };\n\n    if(bizSide) {\n      appInfo.bizSide = bizSide;\n    }\n\n    if(isTestEnv && !testAppId) {\n      console.error('缺少 testAppId 测试环境应用 id');\n      return appInfo;\n    }\n\n    if(!appId) {\n      console.error('缺少 appId 正式环境环境应用 id');\n      return appInfo;\n    }\n\n    appInfo.appId = isTestEnv ? testAppId : appId;\n    return appInfo;\n  }\n  return {};\n};\n\nexport const getRunningAppId = (platform) => {\n  const RunningAppConfig = isTestEnv\n    ? {\n        [PLATFORM.PddAndroid]: '1',\n        [PLATFORM.PddIOS]: '3',\n        [PLATFORM.PDDTinyAndorid]: '0'\n      }\n    : {\n        [PLATFORM.PddAndroid]: '3',\n        [PLATFORM.PddIOS]: '5',\n        [PLATFORM.PDDTinyAndorid]: '59'\n      };\n  return RunningAppConfig[platform] || '-1';\n};\n\nexport const getRealPagePath = memo((universalPaths = [], universalQueryKeys = [], reportPath) => {\n  if(reportPath) {\n    return reportPath;\n  }\n\n  const currentPathName = window.location.pathname;\n\n  if(universalPaths.indexOf(currentPathName) < 0 || universalQueryKeys.length <= 0) {\n    return currentPathName;\n  }\n\n  const search = window.location.search;\n  const universalQueryKey = universalQueryKeys.find((key) => {\n    return search.indexOf(key) > -1;\n  });\n\n  let realPathName;\n  if(universalQueryKey) {\n    const queryObject = parseQuery(search);\n    realPathName = queryObject[universalQueryKey];\n  }\n\n  if(!realPathName) {\n    return currentPathName;\n  }\n\n  if(realPathName[0] === '/') {\n    return `${realPathName}.html`;\n  }\n\n  return `/${realPathName}.html`;\n});\n\nexport function isObject(target) {\n  return Object.prototype.toString.call(target) === '[object Object]';\n}\n\nexport function combineURLs(baseURL, relativeURL) {\n  return relativeURL ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '') : baseURL;\n}\n\nlet _pmmAppInfo = {};\nlet _pageInfo = {};\nlet _defaultExtraInfo = {}; // 错误统一带上的信息\n\nexport function setPmmAppInfo(appInfo = {}) {\n  _pmmAppInfo = appInfo;\n}\n\nexport function setPageInfo(pageInfo = {}) {\n  _pageInfo = pageInfo;\n}\n\nexport function setDefaultExtraInfo(defaultExtraInfo = {}) {\n  _defaultExtraInfo = defaultExtraInfo;\n}\n\nexport function getPmmAppInfo() {\n  return _pmmAppInfo;\n}\n\nexport function getPageInfo() {\n  return _pageInfo;\n}\n\nexport function getDefaultExtraInfo() {\n  return _defaultExtraInfo;\n}\n","import { crc32, getCookie } from '@pdd/core-util';\nimport {\n  getReporterUrl,\n  getAppInfo,\n  getRunningAppId,\n  isObject,\n  getDefaultExtraInfo,\n  getRealPagePath,\n  ERROR_TYPE_CONFIG,\n  CATEGORY\n} from './utils';\nimport { getSimplePlatform } from '../common/utils';\nimport { getSystem, getSystemVersion } from '@pdd/platform-util/lib/common';\n\nexport function baseSendPmmError(params, appInfo) {\n  const reportUrl = getReporterUrl(params?.datas[0]?.type, appInfo);\n  const { isNativePlatform } = getSimplePlatform();\n  if(isNativePlatform && window.pinbridge) {\n    window.pinbridge.callNative('JSNetwork', 'request', {\n      method: 'POST',\n      url: reportUrl,\n      headers: { 'Content-Type': 'text/plain;charset=UTF-8' },\n      data: JSON.stringify(params)\n    });\n    return;\n  }\n  const http = new XMLHttpRequest();\n  http.open('POST', reportUrl, true);\n  http.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8');\n  http.withCredentials = true;\n  http.send(JSON.stringify(params));\n}\n\nexport function getOrganizedData(param = {}, appInfo = {}) {\n  const { bizSide, appId, testAppId } = appInfo;\n  const {\n    app_version,\n    log_version,\n    network,\n    page,\n    page_id,\n    page_name,\n    page_sn,\n    page_url,\n    payload,\n    platform,\n    refer_page_id,\n    refer_page_name,\n    refer_page_sn,\n    user_agent,\n    user_id,\n    error_msg, // index_inline 有这个字段\n    error_message, // api error 的接口出错 error_message\n    serverIp = '',\n    httpCode = '',\n    http_code,\n    httpMethod = '',\n    errorCode = '555555', // 业务线全局错误码，前端没用但是必填写死，其他业务线可以创建一样的错误码，如果有自定义的可以覆盖\n    error_code, // api error 的接口出错 error_code\n    module = '',\n    pageId = '', // 在 mcm 上注册的页面的 pageId\n    referPageId = '', // 在 mcm 上注册的页面的 pageId\n    type,\n    url,\n    lvalues,\n    fvalues,\n    ...elseParam\n  } = param;\n  const defaultExtraInfo = getDefaultExtraInfo();\n\n  let isResourceError;\n  let imgErrorUrl;\n  if(error_msg?.indexOf('lazy_image_error') > -1 || error_msg?.indexOf('cui_image_error') > -1) {\n    isResourceError = true;\n    imgErrorUrl = payload?.src;\n  }\n  const isNormalLog = type === ERROR_TYPE_CONFIG.NORMAL_LOG;\n  const extras = transferToString({ ...defaultExtraInfo, ...payload });\n  const { sub_op: subOp } = extras || {};\n  const isApiError = subOp === 'api_error';\n\n  // 优先级，传入的 type -> 根据特征算出来的 -> 自定义错误\n  const errorType =\n    type ||\n    (isResourceError && ERROR_TYPE_CONFIG.RESOURCE_ERROR) ||\n    (isNormalLog && ERROR_TYPE_CONFIG.NORMAL_LOG) ||\n    ERROR_TYPE_CONFIG.CUSTOM_ERROR;\n  const outerData = getOuterDataStructure({ bizSide, appId, testAppId, app_version });\n  const commonTag = getCommonTag(platform, user_id);\n  let tags = getTags(\n    {\n      app_version,\n      log_version,\n      network,\n      page,\n      page_id,\n      page_name,\n      page_sn,\n      page_url,\n      refer_page_id,\n      refer_page_name,\n      refer_page_sn,\n      user_agent,\n      error_msg,\n      // eslint-disable-next-line camelcase\n      error_message: error_message || extras.error_message,\n      serverIp,\n      // eslint-disable-next-line camelcase\n      httpCode: httpCode || http_code,\n      httpMethod,\n      errorCode,\n      error_code,\n      module,\n      pageId,\n      referPageId,\n      url: url || imgErrorUrl\n    },\n    appInfo,\n    isApiError\n  );\n\n  if(isNormalLog) {\n    const stringElseParam = transferToString(elseParam);\n    tags = { ...tags, ...stringElseParam };\n  }\n\n  outerData.common_tags = commonTag;\n  outerData.datas = [\n    {\n      category: type === ERROR_TYPE_CONFIG.NORMAL_LOG ? CATEGORY.LOG : CATEGORY.ERROR,\n      type: errorType,\n      timestamp: Date.now(),\n      tags,\n      extras,\n      ...(type === ERROR_TYPE_CONFIG.NORMAL_LOG\n        ? {\n            lvalues,\n            fvalues\n          }\n        : {}) // 普通日志再上报 其他类型的错误日志不上报这俩字段\n    }\n  ];\n\n  return outerData;\n}\n\nlet versionNumber;\n// eslint-disable-next-line camelcase\nexport function getOuterDataStructure(options) {\n  const { bizSide, appId, testAppId, app_version } = options || {};\n  const appInfo = getAppInfo({ bizSide, appId, testAppId });\n  const time = Date.now();\n  const randomIntVal = 10 ** 5 + Math.floor(Math.random() * (10 ** 6 - 10 ** 5));\n  versionNumber =\n    versionNumber !== undefined\n      ? versionNumber\n      : Number(\n          // eslint-disable-next-line camelcase\n          (app_version || '')?.split('.').reduce((sum, value, index) => {\n            if(index === 0) {\n              return sum + value;\n            }\n            return `${sum}${value.length < 2 ? `0${value}` : value}`;\n          }, '')\n        );\n  return {\n    biz_side: appInfo.bizSide,\n    app: appInfo.appId,\n    /* 0 默认，日志采样； 1 debug，日志不采样； 2 test，日志不采样，使用系统时间戳 */\n    level: 2,\n    /* 这个version 是int不支持 0.x.x暂时有坑, 临时解决办法，在自定义数据中塞版本号，kibana上接着用 */\n    version: versionNumber,\n    /* 上报的time */\n    report_time_ms: time,\n    rand_num: randomIntVal,\n    crc32: crc32(`${time}-${randomIntVal}`)\n  };\n}\n\nlet pddId;\n// eslint-disable-next-line camelcase\nexport function getCommonTag(platform, user_id) {\n  const runningAppId = getRunningAppId(platform);\n  pddId = pddId !== undefined ? pddId : getCookie('ETag');\n  const systemVersion = getSystemVersion(navigator.userAgent);\n  const system = getSystem(navigator.userAgent);\n  return {\n    p: platform,\n    runningPlatform: platform,\n    runningAppId: runningAppId,\n    b: '',\n    did: '',\n    mid: '',\n    osV: `${system}_${systemVersion}`,\n    pid: pddId,\n    // eslint-disable-next-line camelcase\n    uid: user_id ? user_id + '' : ''\n  };\n}\n\n// extra 只能是 [key: string] 单层结构\nexport function transferToString(payload) {\n  if(!isObject(payload)) {\n    return {};\n  }\n  const keys = Object.keys(payload);\n  const temp = {};\n\n  keys.forEach((key) => {\n    const val = payload[key];\n    temp[key] = String(val);\n  });\n\n  return temp;\n}\n\nexport function getTags(params = {}, appInfo = {}, isApiError = false) {\n  const { universalPaths, universalQueryKeys, reportPath } = appInfo;\n  const {\n    app_version,\n    // eslint-disable-next-line camelcase\n    log_version = '0.0.1',\n    network,\n    page = '',\n    page_id,\n    page_name,\n    page_sn,\n    page_url,\n    refer_page_id,\n    refer_page_name,\n    refer_page_sn,\n    user_agent,\n    error_msg,\n    error_message,\n    serverIp = '',\n    httpCode = '',\n    httpMethod = '',\n    errorCode = '555555', // 业务线全局错误码，前端没用但是必填写死，其他业务线可以创建一样的错误码，如果有自定义的可以覆盖\n    error_code,\n    module = '',\n    pageId = '', // 在 mcm 上注册的页面的 pageId\n    referPageId = '', // 在 mcm 上注册的页面的 pageId\n    url\n  } = params;\n  const realPathPath = getRealPagePath(universalPaths, universalQueryKeys, reportPath);\n\n  return {\n    network: (network || '0') + '', // network为 网络类型，取值：0=UNKNOWN，1=WIFI，2=2G，3=3G，4=4G\n    serverIp,\n    url, // 异常url地址，API和资源异常上传\n    // eslint-disable-next-line camelcase\n    errorCode: String(error_code || errorCode), // 业务线全局错误码，前端没用但是必填写死，其他业务线可以创建一样的错误码\n    // eslint-disable-next-line camelcase\n    errorMsg: (error_msg || error_message || '').substr(0, 150), // errorMsg 为业务错误文案，长度不超过150\n    module, // 功能模块，自定义错误使用，一个应用有 n 个组件或者业务模块组成，用来描述，错误属于哪个模块。参考 https://note.pdd.net/doc/348857296509386752\n    pageId, // 页面ID，在MCM维护  https://volantis3.pdd.net/mcm/page，页面匹配规则优先级： pageId > pagePath > pageSn\n    pagePath: realPathPath, //  页面路径，在MCM维护  https://volantis3.pdd.net/mcm/page, 页面匹配规则优先级： pageId > pagePath > pageSn\n    // eslint-disable-next-line camelcase\n    pageSn: page_sn ? page_sn + '' : '', // 必须埋点系统申请，验证不通过将丢弃，https://yolo.pdd.net/?app=c, 页面匹配规则优先级： pageId > pagePath > pageSn\n    // eslint-disable-next-line camelcase\n    pageUrl: page_url ? page_url : window.location.href,\n    referPageId: referPageId,\n    // eslint-disable-next-line camelcase\n    page_id: page_id ? page_id + '' : '',\n    // eslint-disable-next-line camelcase\n    refer_page_id: refer_page_id ? refer_page_id + '' : '',\n    // eslint-disable-next-line camelcase\n    referPageName: refer_page_name ? refer_page_name : '',\n    // eslint-disable-next-line camelcase\n    referPageSn: refer_page_sn ? refer_page_sn + '' : '',\n    // eslint-disable-next-line camelcase\n    pageName: page_name ? page_name : '',\n    page: page, // page 具体的报错内容， 不限制长度\n    log_version: log_version,\n    // eslint-disable-next-line camelcase\n    user_agent: user_agent ? user_agent : window.navigator.userAgent,\n    // eslint-disable-next-line camelcase\n    app_version: app_version ? app_version : '',\n    ...(isApiError\n      ? {\n          httpCode: String(httpCode), //\n          httpMethod: httpMethod // http方法 GET、POST等\n        }\n      : {})\n  };\n}\n","/**\n * @file index.js 异常搜集模块\n * @author jiangliuer(jiangliuer@pinduoduo.com) zongheng(zongheng@pinduoduo.com)\n */\nimport TraceKit from 'tracekit';\nimport { appendQuery, getNetWorkType, isAbsoluteUrl } from '@pdd/core-util';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { getUid } from '@pdd/auth';\nimport { getDefaultReporter } from './common/reporter';\nimport { dealError, replaceAccessToken, jsonStringifyReplacer } from './common/utils';\nimport { getOrganizedData, baseSendPmmError } from './pmm/base';\nimport { setPmmAppInfo, setPageInfo, combineURLs, ERROR_TYPE_CONFIG, setDefaultExtraInfo, isObject } from './pmm/utils';\n\nexport { sendApiError, sendCustomError, sendResourceError, sendError, sendNormalLog } from './pmm';\nexport { setDefaultExtraInfo };\n\n/**\n * 错误日志初始化\n * @params {{pageSN:string, pageName:string, pageId:string, referPageId?:string, referPageSN?:string, referPageName?:string}} pageInfo 页面信息\n * @params {{bizSide: string, appId: string, testAppId: string, universalPaths?:string[], universalQueryKeys: string[] }} appInfo pmm 前端错误上报相关的应用信息\n * @return {Promise<void>}\n */\nexport async function init(pageInfo, appInfo) {\n  setPageInfo(pageInfo);\n  setPmmAppInfo(appInfo);\n  const { bizSide, appId, testAppId } = appInfo || {};\n  if(!bizSide || !appId || !testAppId) {\n    console.error('@pdd/error-logger init 方法第二个参数缺少必传项 bizSide, appId, testAppId');\n  }\n  TraceKit.remoteFetching = false;\n  TraceKit.extendToAsynchronousCallbacks();\n  // reset inline error logger\n  window.__RESET_ERROR_LISTENER__ && window.__RESET_ERROR_LISTENER__();\n  const reporter = getDefaultReporter();\n  // traceKit处理window.onerror信息\n  TraceKit.report.subscribe(async (stackInfo, isWindowError, error) => {\n    let errorStr = '';\n    const { name, message, stack } = stackInfo || {};\n\n    if(stackInfo) {\n      errorStr = name + ':' + message;\n      if(stack && stack.length) {\n        for(let i = 0; i < stack.length; i++) {\n          errorStr += `@ ${stack[i].func}(${stack[i].url}:${stack[i].line}:${stack[i].column})`;\n        }\n      }\n    }\n\n    const params = await resolveErrorParams(\n      {\n        error_message: String(message),\n        ...error?.extraInfo,\n        page: stackInfo ? name + ' ' + message + ' ' + JSON.stringify(stack) : 'no info',\n        debug_url: appendQuery({ JS_ERROR: errorStr }, location.href)\n      },\n      pageInfo\n    );\n    const { sub_op: subOp } = error?.extraInfo || {};\n    const isApiError = subOp === 'api_error';\n\n    const { method, baseURL, url } = error?.config || {};\n    let fullUrl;\n    if(baseURL && url) {\n      if(isAbsoluteUrl(url)) {\n        fullUrl = url;\n      } else {\n        fullUrl = combineURLs(baseURL, url);\n      }\n    }\n    reporter(params);\n    try {\n      baseSendPmmError(\n        getOrganizedData(\n          {\n            ...params,\n            ...(method ? { httpMethod: method } : {}),\n            ...(fullUrl ? { url: fullUrl } : {}),\n            // api error 错误类型判断前置，不在最后上报的时候进行判断。\n            // case，业务不处理接口错误，会通过 unhandledrejection 上报到 api error 日志，其实应该在自定义错误里，存在判断出错的情况\n            ...(isApiError ? { type: ERROR_TYPE_CONFIG.API_ERROR } : {})\n          },\n          appInfo\n        ),\n        appInfo\n      );\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  });\n\n  // unhandledrejection处理\n  window.addEventListener('unhandledrejection', async (event) => {\n    const error = dealError(event.reason);\n    const { error_msg } = error || {};\n    const { errorCode, params: bridgeParams, data } = event.reason || {};\n    const extraInfo = (event.reason || {}).extraInfo || {};\n    const { payload } = extraInfo || {};\n    // errorCode bridgeParams data 三个数据来源是兼容 native-util -> invokeBridgeCallNativeFun 调用出错进行错误上报\n    // 错误上报的 error 没有遵从 throwErrorAsync 的 error 格式，所以兼容之\n    // 改了之后这块逻辑可以删掉\n    if(errorCode) {\n      extraInfo.errorCode = errorCode;\n    }\n    const pinBridgeErrorPayload = {};\n\n    if(bridgeParams) {\n      pinBridgeErrorPayload.apiParams = isObject(bridgeParams) ? JSON.stringify(bridgeParams) : String(bridgeParams);\n    }\n\n    if(data) {\n      pinBridgeErrorPayload.data = isObject(data) ? JSON.stringify(data) : String(data);\n    }\n\n    extraInfo.payload = {\n      ...(isObject(payload) ? payload : {}),\n      ...pinBridgeErrorPayload\n    };\n    const params = await resolveErrorParams(\n      {\n        ...extraInfo,\n        page: 'unhandledrejection reason:' + replaceAccessToken(JSON.stringify(error, jsonStringifyReplacer())),\n        error_msg\n      },\n      pageInfo\n    );\n\n    reporter(params);\n    try {\n      baseSendPmmError(getOrganizedData(params, appInfo), appInfo);\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  });\n}\n\n/**\n * 对上报的错误信息进行预处理\n * @private\n * @param {Object} params 待上报的错误信息\n * @param {{pageSN:string, pageName:string, pageId:string, referPageId?:string, referPageSN?:string, referPageName?:string}} pageInfo 页面信息\n * @return {Object} 处理后的错误上报信息\n */\nasync function resolveErrorParams(params, pageInfo) {\n  /* eslint-disable camelcase */\n  const {\n    pageSN: page_sn,\n    pageId: page_id,\n    pageName: page_name,\n    referPageId: refer_page_id,\n    referPageName: refer_page_name,\n    referPageSN: refer_page_sn\n  } = pageInfo;\n\n  const { platform, version } = getCurrentPlatform();\n  const network = await getNetWorkType().catch(() => 0);\n  const userId = await getUid();\n  const processedParams = {\n    log_version: '1.0.0',\n    page_url: location.href,\n    app_version: version,\n    user_agent: navigator.userAgent,\n    user_id: userId,\n    platform,\n    page_id,\n    page_name,\n    page_sn,\n    refer_page_id,\n    refer_page_name,\n    refer_page_sn,\n    network,\n    ...params\n  };\n\n  processedParams.payload = isObject(processedParams.payload) ? processedParams.payload : {};\n\n  const payloadKeys = ['status_code', 'error_message', 'params', 'sub_op', 'debug_url'];\n  payloadKeys.forEach((property) => {\n    if(typeof processedParams[property] !== 'undefined') {\n      processedParams.payload[property] = processedParams[property];\n      processedParams[property] = undefined;\n    }\n  });\n  processedParams.payload.unique_tag = `${Date.now()}_${userId}`;\n  processedParams.payload.error_logger = 1;\n\n  return processedParams;\n}\n","/**\r\n * @file index.js \r\n * @description\r\n * 在Android这边，滚动时阻止一切点击事件，避免误触发“点击”跳转\r\n */\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { getCurrentPlatform, SYSTEM } from '@pdd/platform-util';\r\nimport throttle from 'lodash/throttle';\r\n\r\nlet platform;\r\nfunction isAndroidSystem() {\r\n    if (!platform) {\r\n        platform = getCurrentPlatform();\r\n    }\r\n    return platform && platform.system === SYSTEM.Android;\r\n}\r\n\r\nfunction preventClick(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n}\r\n\r\nconst DEFAULT_INTERVAL = 200;\r\nfunction DisableClickWhenScroll(props) {\r\n    const [disableClick, setDisableCLick] = useState(false);\r\n    const timeoutRef = useRef();\r\n    useEffect(() => {\r\n        if (!isAndroidSystem()) {\r\n            return;\r\n        }\r\n        const interval = props.interval || DEFAULT_INTERVAL; // interval(毫秒)时间内无scroll事件，视为滚动停止\r\n        const throttleWait = interval / 2; // throttle间隔时间，应该小于interval，这里设置为interval/2较为合理\r\n        const handleScroll = throttle(() => {\r\n            setDisableCLick(true); // 如果在滚动，则禁止点击\r\n\r\n            clearTimeout(timeoutRef.current);\r\n            timeoutRef.current = setTimeout(() => {\r\n                setDisableCLick(false);\r\n            }, interval);\r\n        }, throttleWait);\r\n        window.addEventListener('scroll', handleScroll);\r\n\r\n        return function cleanup() {\r\n            window.removeEventListener('scroll', handleScroll);\r\n        }\r\n    }, [props.interval]);\r\n\r\n\r\n    const maskStyle = {\r\n        opacity: 0,\r\n        height: '100%',\r\n        width: '100%',\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        zIndex: 999,\r\n    };\r\n    return (\r\n        <div style={disableClick ? {} : { display: 'none' }}>\r\n            <div style={maskStyle} onClick={preventClick}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nDisableClickWhenScroll.propTypes = {\r\n    /**\r\n     * interval(毫秒)时间内无scroll事件，视为滚动停止\r\n     */\r\n    interval: PropTypes.number,\r\n}\r\n\r\nlet cleanup;\r\nDisableClickWhenScroll.initGlobal = function () {\r\n    if (!process.env.BROWSER) {\r\n        return;\r\n    }\r\n\r\n    if (cleanup) {\r\n        return;\r\n    }\r\n    let div = document.createElement('div');\r\n    document.body.appendChild(div);\r\n\r\n    cleanup = function() {\r\n        if (!div) {\r\n            return;\r\n        }\r\n        ReactDOM.unmountComponentAtNode(div);\r\n        document.body.removeChild(div);\r\n        div = null;\r\n        cleanup = null;\r\n    };\r\n\r\n    return ReactDOM.render(<DisableClickWhenScroll/>, div);\r\n};\r\n\r\n/**\r\n * 关闭disable click的功能\r\n */\r\nDisableClickWhenScroll.cleanup = function() {\r\n    cleanup && cleanup();\r\n}\r\n\r\nexport default DisableClickWhenScroll;\r\n","/**\n * @file service.js 一些前端接口封装\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport appConfig from '@pdd/configs/app';\nimport { getCurrentPlatform, isWebBundle, PLATFORM, SYSTEM } from '@pdd/platform-util';\nimport { throwErrorAsync } from '@pdd/core-util';\nimport { invokeBridgeCallNativeFun } from '@pdd/native-util';\n\nconst SIGN_URL = 'weixin/jsapi/signature';\n// 微信 iOS 签名是以第一次进入的 url 为准\nconst url = process.env.BROWSER && getCurrentPlatform().system === SYSTEM.IOS ? location.href.split('#')[0] : null;\n\n// 获取微信签名\nexport function fetchWxConfig(http, pageSN) {\n  const nonce = Math.random().toString().substring(2);\n  const timestamp = Date.now().toString();\n  const config = appConfig.get(location.host);\n  const wechatAppID = config.ApiKey.WeChat;\n\n  const params = {\n    page_sn: pageSN,\n    timestamp,\n    noncestr: nonce,\n    // eslint-disable-next-line\n    open_app_id: wechatAppID,\n    url: url || location.href.split('#')[0]\n  };\n\n  return http.get(SIGN_URL, { params }).then((data) => {\n    return {\n      timestamp,\n      nonceStr: nonce,\n      signature: data.signature,\n      wechatAppID: data.mirror ? data.open_app_id : wechatAppID, // use tiny domain config instead\n      shareTypeEnable: data.share_type_enable,\n      shareDomain: data.share_domain,\n      mirror: data.mirror,\n      magicTrace: data.magic_trace\n    };\n  }).catch((error) => {\n    throwErrorAsync(error);\n    return {\n      timestamp,\n      nonceStr: nonce,\n      wechatAppID\n    };\n  });\n}\n\n\n/**\n * 获取当前页面使用的组件包版本号\n */\nexport async function getHybridPackVersion(hybridPackName) {\n  if(!hybridPackName || !isWebBundle()) {\n    return;\n  }\n\n  const name = `com.xunmeng.pinduoduo.${hybridPackName}`;\n  try {\n    const { bundles: [bundle] = [] } = await invokeBridgeCallNativeFun(\n      'AMComponent', 'info', { name }, '4.0.0', '4.0.0'\n    );\n\n    if(bundle) {\n      return getCurrentPlatform().platform === PLATFORM.PddIOS ? bundle.version : bundle;\n    }\n  } catch (e) {\n    return null;\n  }\n}\n","/**\n * @file page.js, 页面初始化\n * @author zongheng\n */\nimport navigation from '@pdd/navigation';\nimport { init as initAuth, login } from '@pdd/auth';\nimport { initGlobalMetrics, setDefaultParams, sendPageViewMetrics } from '@pdd/metrics';\nimport { init as initErrorLogger } from '@pdd/error-logger';\nimport { parseQuery, createPageId, getReferPageInfo, throwErrorAsync } from '@pdd/core-util';\nimport PageManagerObj from '@pdd/page-manager';\nimport DisableClickComponent from '@pdd/ui-disable-click';\nimport { getCurrentPlatform } from '@pdd/platform-util';\nimport { createDefaultAxios } from '@pdd/isomorphic-request';\nimport { fetchWxConfig, getHybridPackVersion } from './service';\nimport {\n  setupPullReload,\n  setTitle,\n  getPageShownType,\n  onWebMounted\n} from '@pdd/native-util';\n\nconst PageManager = PageManagerObj.getInstance();\n\nconst {\n  isNativePlatform,\n  isWeChatPlatform,\n  isQQPlatform,\n  isTinyNativePlatform\n} = process.env.BROWSER ? getCurrentPlatform() : {};\n\nexport default {\n  async prepare(options = {}, render = () => {}) {\n    const {\n      hybridPackName,\n      pageProperty: { pageSN, pageName = getDefaultPageName(), extraPvParams, noReportPv },\n      initNativeBehavior = initDefaultNativeBehavior,\n      pmmAppInfo = {}\n    } = options;\n\n    // 为了在回退场景下用户轨迹系统能关联上，优先拿 query 的page_id\n    const pageId = options.pageId || parseQuery(location.search).page_id || createPageId(pageSN);\n    const pageInfo = { pageSN, pageId, pageName };\n\n    initMetricsAndLogger(pageInfo, hybridPackName, pmmAppInfo).then(() => initPageContext({ pageInfo, extraPvParams, noReportPv }));\n\n    navigation.setNextPageQuery({\n        refer_page_name: pageName,\n        refer_page_id: pageId,\n        refer_page_sn: pageSN\n    });\n\n    const http = createDefaultAxios({ pageInfo: { pageId } });\n\n    await initLogin(http, options);\n\n    // 初始化pddShare得在render前，组件层面有可能重新设置pddShare，不在render前面的话有可能覆盖组件的调用。\n    // 第三方的调用可能会超时，做个兜底逻辑\n    const initShareP = timeout(initShareAndMenu(http, pageInfo, options), 'initShareAndMenu 调用超时').catch(throwErrorAsync);\n\n    if(isNativePlatform) {\n      initNativeBehavior(options.disablePullReload);\n    }\n\n    if(isWeChatPlatform) {\n      await initShareP;\n    }\n\n    render(pageInfo);\n\n    DisableClickComponent.initGlobal();\n  }\n};\n\nfunction timeout(promise, timeoutMsg) {\n  const timeLimit = new Promise((resolve, reject) => {\n    setTimeout(() => reject(new Error(timeoutMsg)), 1000);\n  });\n\n  return Promise.race([promise, timeLimit]);\n}\n\n// 初始化metrics和error-logger\nfunction initMetricsAndLogger(pageInfo, hybridPackName, pmmAppInfo) {\n  const initMetricsP = getHybridPackVersion(hybridPackName).then((version) => {\n    // eslint-disable-next-line camelcase\n    const { pageSN: page_sn, pageId: page_id } = pageInfo;\n\n    // 设置metrics默认上报参数，并初始化全局行为上报\n    const params = version ? { page_sn, page_id, component_version: version } : { page_sn, page_id };\n    setDefaultParams(params);\n    initGlobalMetrics();\n  });\n\n  // 初始化错误上报功能\n  getReferPageInfo().then(({ refer_page_sn, refer_page_id, refer_page_name }) => initErrorLogger({\n    ...pageInfo,\n    referPageSN: refer_page_sn,\n    referPageId: refer_page_id,\n    referPageName: refer_page_name\n  }, pmmAppInfo));\n\n  return initMetricsP;\n}\n\nfunction initPageContext({ pageInfo, extraPvParams, noReportPv }) {\n  PageManager.init(null, {\n    pageProperty: pageInfo,\n    async callback() {\n      navigation.replaceQuery({ page_id: pageInfo.pageId });\n\n      if (noReportPv) {\n        return;\n      }\n      let isEmbedPage = false;\n      if(isNativePlatform) {\n        isEmbedPage = await getPageShownType().then(({ shown_type: shownType }) => +shownType === 1).catch(() => false);\n      }\n\n      !isEmbedPage && sendPageViewMetrics(extraPvParams); // 内嵌页面不打pv\n    }\n  });\n}\n\nfunction initDefaultNativeBehavior(disablePullReload) {\n  onWebMounted();\n  setupPullReload({ enable: !disablePullReload });\n  setTitle({ title: document.title });\n}\n\nasync function initLogin(http, { requireLogin, skipLogin, loginParams = {} }) {\n  try {\n    // 成功后会同步用户信息到@pdd/auth模块内部，同步至cookie，同步至localstorage，后两个同步是为了兼容历史逻辑\n    return await initAuth(http);\n  } catch (e) {\n    requireLogin = requireLogin || isWeChatPlatform || isQQPlatform;\n\n    // 1. 302 code 是auth库的重定向逻辑，非端内页面跳转了新页面会抛出，不需要处理\n    // 2. 非强登录场景不处理（微信和qq会强制登录）\n    // 3. 强制跳过登录的也不处理\n    if(e.errorCode === 302 || !requireLogin || skipLogin) {\n      return;\n    }\n\n    return login(loginParams).catch((e) => {\n      navigation.back();\n      throw e;\n    });\n  }\n}\n\n/**\n * - 需要分享，所有环境下都要加载market-share，且：\n *    1. 微信下需请求signature接口，获取返回的数据给market-share，并设置isSDKPrepare，调用prepareShare\n *    2. app和qq下设置isSDKPrepare，调用prepareShare\n *\n *  - 不需要分享，所有环境下都不需要加载market-share：\n *    1. 微信下需请求signature接口，根据返回的数据初始化微信菜单，并隐藏分享相关的菜单\n */\nasync function initShareAndMenu(http, pageInfo, options) {\n  const { shareInfo = {}, noDefaultShare } = options;\n  const { onlyWeChat, disableCopyUrl, disableShare, enableBrowserOpen } = shareInfo;\n  const setupParams = { shareInfo, noDefaultShare, pageInfo };\n\n  const SharePromise = shareInfo.disableShare ? null : import('@pdd/market-share');\n\n  if(isNativePlatform || isTinyNativePlatform) {\n    return setupShare(SharePromise, setupParams);\n  }\n\n  if(isWeChatPlatform) {\n    const [wxConfig, { initWxConfig }] = await Promise.all([\n      fetchWxConfig(http, pageInfo.pageSN),\n      import(/* webpackChunkName: \"pdd-mod/wechat-service\" */ '@pdd/wechat-service')\n    ]);\n\n    const mergedShareInfo = { ...shareInfo, ...wxConfig };\n    await initWxConfig(mergedShareInfo, { onlyWeChat, disableCopyUrl, disableShare, enableBrowserOpen });\n\n    return setupShare(SharePromise, setupParams);\n  }\n\n  if(isQQPlatform) {\n    const { initQQConfig } = await import(/* webpackChunkName: \"pdd-mod/qq-service\" */ '@pdd/qq-service');\n    initQQConfig(http).then(() => setupShare(SharePromise, setupParams));\n  }\n}\n\nasync function setupShare(PDDSharePromise, { shareInfo = {}, noDefaultShare, pageInfo }) {\n  if(shareInfo.disableShare) {\n    return;\n  }\n\n  const { default: PDDShare, setPageContext } = await PDDSharePromise;\n  setPageContext(pageInfo);\n  shareInfo.isSDKPrepare = true;\n  const pddShare = PDDShare.getInstance({\n    shareManagerConfig: {\n      noDefaultShare\n    }\n  });\n\n  pddShare.setup();\n  pddShare.prepareShare(shareInfo);\n}\n\n// 默认拿最后一个 pathname\nfunction getDefaultPageName() {\n  return location.pathname.split('/').pop().split('.')[0] || 'index';\n}\n","/**\n * @file bootClient.js, render-server + isomorphic-mobx-framework 应用前端启动桥接适配模块\n * @author zongheng(zongheng@pinduoduo.com)\n */\nimport { configure } from 'mobx';\nimport { getCurrentPlatform, SYSTEM } from '@pdd/platform-util';\nimport page from '@pdd/isomorphic-mobx-framework/lib/initPage';\nimport { initCookies } from '@pdd/isomorphic-mobx-framework/lib/cookie';\nimport { waitRawDataReady } from '../core/util';\n\nconst DEFAULTS = {\n  forceWKWebviewBackRefresh: true,\n  useStrict: false\n};\n\n/**\n * 浏览器端入口启动函数\n *\n * @param {React.Component} App 应用组件\n * @param {Object} [options={}] 传递给@pdd/page的选项\n * @param {boolean} [options.useStrict=false] 是否启用mobx的严格模式\n * @param {boolean} [options.disablePullReload=false] 是否禁用下拉刷新\n * @param {function} [options.initNativeBehavior] 初始化客户端行为，会覆盖默认的初始化客户端行为（设置下拉刷新和标题）\n * @param {boolean} [options.forceWKWebviewBackRefresh=true] 是否强制微信WKWebview回退缓存页面时刷新\n */\nexport function bootClient(\n  App,\n  {\n    useStrict = DEFAULTS.useStrict,\n    forceWKWebviewBackRefresh = DEFAULTS.forceWKWebviewBackRefresh,\n    ...pageOptions\n  } = {}\n) {\n  if(useStrict) {\n    configure({ enforceActions: true });\n  }\n\n  return waitRawDataReady().then(() => new Promise(resolve => {\n    page.prepare(\n      {\n        requireLogin: App.appConfig.requireLogin,\n        shareInfo: { disableShare: true },\n        ...pageOptions\n      },\n      pageInfo => resolve(runApp(App, pageInfo.pageId))\n    );\n\n    initCookies();\n\n    // 回退刷新\n    if(window.__wxjs_is_wkwebview && forceWKWebviewBackRefresh) {\n      window.addEventListener('pageshow', ({ persisted }) => {\n        persisted && location.reload();\n      });\n    }\n\n    if(getCurrentPlatform().system === SYSTEM.IOS) {\n      // 1. 解决ios平台active无效的问题\n      // 2. 解决ios非点击元素需要点击二次的问题\n      document.addEventListener('touchstart', () => {});\n    }\n  }));\n}\n\nfunction runApp(App, pageId) {\n  const stores = App.createStores();\n  const pageInfo = { pageId };\n  Object.keys(stores).forEach(key => stores[key].fromJS((window.rawData?.stores || {})[key], pageInfo));\n  if(window.rawData) {\n    window.__INITIAL_PROPS__ = { stores, pageInfo };\n  }\n  App.stores = stores;\n  App.pageInfo = pageInfo;\n  if(process.env.NODE_ENV === 'development') {\n    window.stores = stores;\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"_34XMyt7Q\",\"container\":\"_1R13RRdw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"QkGS9nId\",\"bigger\":\"_2h3oObbv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"_3vblRuQJ\",\"cuiSpinner\":\"_2VSYZIBr\",\"bigger\":\"_3z8HdYNn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"_2c09EThh\",\"fadeIn\":\"_2gSfzSZh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"_3tX2o67p\"};"],"names":["module","exports","utils","settle","cookies","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","defaults","Cancel","config","Promise","resolve","reject","onCanceled","requestData","data","requestHeaders","headers","responseType","done","cancelToken","unsubscribe","signal","removeEventListener","isFormData","request","XMLHttpRequest","auth","username","password","unescape","encodeURIComponent","Authorization","btoa","fullPath","baseURL","url","onloadend","responseHeaders","getAllResponseHeaders","response","responseText","status","statusText","value","err","open","method","toUpperCase","params","paramsSerializer","timeout","onreadystatechange","readyState","responseURL","indexOf","setTimeout","onabort","onerror","ontimeout","timeoutErrorMessage","transitional","clarifyTimeoutError","isStandardBrowserEnv","xsrfValue","withCredentials","xsrfCookieName","read","undefined","xsrfHeaderName","forEach","val","key","toLowerCase","setRequestHeader","isUndefined","onDownloadProgress","addEventListener","onUploadProgress","upload","cancel","type","abort","subscribe","aborted","send","bind","Axios","mergeConfig","axios","createInstance","defaultConfig","context","instance","prototype","extend","create","instanceConfig","CancelToken","isCancel","VERSION","all","promises","spread","isAxiosError","message","this","toString","__CANCEL__","executor","TypeError","resolvePromise","promise","token","then","_listeners","i","l","length","onfulfilled","_resolve","reason","throwIfRequested","listener","push","index","splice","source","c","InterceptorManager","dispatchRequest","validator","validators","interceptors","arguments","assertOptions","silentJSONParsing","boolean","forcedJSONParsing","requestInterceptorChain","synchronousRequestInterceptors","interceptor","runWhen","synchronous","unshift","fulfilled","rejected","responseInterceptorChain","chain","Array","apply","concat","shift","newConfig","onFulfilled","onRejected","error","getUri","replace","handlers","use","options","eject","id","fn","h","isAbsoluteURL","combineURLs","requestedURL","enhanceError","code","Error","transformData","throwIfCancellationRequested","call","transformRequest","merge","common","adapter","transformResponse","toJSON","name","description","number","fileName","lineNumber","columnNumber","stack","config1","config2","getMergedValue","target","isPlainObject","isArray","slice","mergeDeepProperties","prop","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","Object","keys","configValue","validateStatus","fns","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","process","isArrayBuffer","isBuffer","isStream","isFile","isBlob","isArrayBufferView","buffer","isURLSearchParams","isObject","rawValue","parser","encoder","isString","JSON","parse","trim","e","stringify","stringifySafely","strictJSONParsing","maxContentLength","maxBodyLength","thisArg","args","encode","serializedParams","parts","v","isDate","toISOString","join","hashmarkIndex","relativeURL","write","expires","path","domain","secure","cookie","isNumber","Date","toGMTString","document","match","RegExp","decodeURIComponent","remove","now","test","payload","originURL","msie","navigator","userAgent","urlParsingNode","createElement","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","window","location","requestURL","parsed","normalizedName","ignoreDuplicateOf","split","line","substr","callback","arr","thing","deprecatedWarnings","version","formatMessage","opt","desc","opts","console","warn","schema","allowUnknown","result","getPrototypeOf","isFunction","obj","hasOwnProperty","constructor","FormData","ArrayBuffer","isView","pipe","URLSearchParams","product","assignValue","a","b","str","stripBOM","content","charCodeAt","ScopeType","WechatAuthType","LOGIN_RISK_CONTROL_CODE","CookieKey","LocalStorageKey","UnLoginError","errorCode","RedirectedError","resolveQQLoginUrl","redirectUrl","appConfig","redirectUri","RedirectURI","QQConnect","buildQuery","refer","query","response_type","scope","client_id","ApiKey","QQPublic","redirect_uri","oAuthUrl","resolveWechatLoginUrl","scopeType","hasThirdLevelDomain","shareDomain","endsWith","appendQuery","third_level_from_url","thirdLevelLoginPath","appid","WeChat","state","FORBIDDEN_CODE","isForbiddenErrorCode","includes","platform","getCurrentPlatform","getAppId","isWeChatPlatform","AppID","isWeiboPlatform","Weibo","isQQPlatform","isEmbeddedBrowser","QQ","axiosHttp","appId","app_id","is_auth","is_qq_connect","post","defaultErrorHandler","userInfo","accessToken","access_token","verifyAuthToken","verify_auth_token","verifyTtl","verify_ttl","navigation","setCookieValue","attributes","maxAge","getCookie","setCookie","getAccessTokenFromLocal","isNativePlatform","getUserInfo","catch","getUidFromLocal","user_id","getUinFromLocal","uin","fetchAccessTokenAndUid","uid","getDefaults","parseQuery","origin","loginWithCode","isNativeSupportSilentLogin","compareVersion","callNativeLogin","useUniformUrl","forceShow","force_show","others","loginUrl","invokeBridgeCallNativeFun","props","complete","callLogin","loginParams","isNativeSilentLogin","nativeParams","silent","from","resolveH5LoginUrl","authInited","onLoginSuccess","setUserCookie","String","setUserVariableStorage","localStorage","setItem","setUserLocalstorage","logout","removeCookie","removeItem","init","getAccessToken","getUid","getUin","getUserInfoSync","login","hexRegex","hexArgbRegex","ahexToRgba","color","alpha","parseFloat","parseInt","toFixed","red","green","blue","TipOnImageImpl","React","style","outerContainerRef","useRef","textRef","contentRef","minScale","deps","useState","visible","setVisible","scale","setScale","containerWidth","setContainerWidth","useEffect","outerContainerWidth","current","offsetWidth","contentWidth","Math","max","useScale","img_text","className","styles","text_color","background","bg_color","ref","WebkitTransformOrigin","transformOrigin","WebkitTransform","transform","width","overflow","textOverflow","visibility","TipOnImage","UID","UIN","CDNImgHostName","mpConfigs","clientPlatform","isYangkeduoHost","useYangkeduoLogingUrl","baseDomain","commonLogRoutes","loggingURL","__LogingUrl__","getLoggingUrl","logRoutes","ad","__AdLogingUrl__","getAdLoggingUrl","commonTestLogRoutes","httpsLoggingURL","baseProd","httpsLogRoutes","wechat24Config","mps","hutaojie","mobile","weipin","app","huabei","xibei","dongbei","huazhong","huadong","dongnan","xinan","panduoduo","sc","hybrid","hybridTest","huanan","hzsc","dnsc","dbsc","xbsc","xnsc","hnsc","hbsc","pddpt","m","mm","myqxgs","mobpinduoduo","mmpinduoduo","mobilepinduoduo","mobileddlequ","nvude3","mobnvude3","mpinduoduo","mddlequ","hhngpinduoduo","res","deepExtend","valueType","o","chat_error","real_error","hostMap","yangkeduo","ishangtong","yiqixiegushi","pinduoduo","mob","hhng","ddlequ","transferObj","hostName","hostMapArr","hostArr","hostArrLen","firstLevelDomain","item","transferHostName","isModuleVersion","isHybridTest","get","vendor","opera","mpConfig","constant","launchTimer","LAUNCH_FAIL","LAUNCH_TYPE","launchApp","launchType","hidden","visibilityChange","webkitHidden","launchBegin","getLaunchResultPromise","handleVisibilityChange","clearTimeout","visibilityState","openByIframe","openByTag","openDirectly","ua","env","isIOS","system","SYSTEM","isAndroid","isChrome","isQQ","isOriginalChrome","iframe","src","display","body","appendChild","removeChild","DEFAULT_TAG_ID","nanoid","node","getElementById","click","changeTitle","title","setTitle","decode","s","jar","some","assign","stringifiedAttributes","entries","reduce","attrName","attrValue","utf8ToAscii","charcode","fromCharCode","crcTable","n","k","makeCRC32Table","crc32","crc","formatPrice","price","Number","isNaN","floor","priceCent","tidyB64","uniAtob","base64String","atob","uniBtoa","string","utf8Base64Encode","p1","utf8Base64Decode","map","replaceImgDomain","imgUrl","dropCDNParam","IMAGE_PARAM_REG","resizeWatermarkWidth","watermark","imageParam","matchRes","exec","getImageParamFromWatermark","resizedWatermarkUrl","newImageParam","buildImageMogr2","param","sharpen","thumbnail","radius","sigma","custom","commands","isBoolean","getPrefitWidthParam","prefitWidth","getSharpenParam","getWatermarkParam","addToFront","image","getBlurParam","blur","getSearchFromParam","webpEnable","quality","resizeWidth","plainWatermark","imageMogr2","imageWatermarkCommand","gravity","dx","dy","scatype","spcent","blogo","buildImageWatermark","mode","height","format","rQuality","lQuality","buildImageView2","filter","command","DEFAULT_PARAM","isHttp","generateCDNImageUrl","hasQueryStr","forceHttps","newParam","enableGifToWebp","DEFAULT_HOST","PROTOCAL","getCDNImgUrl","rootRelativeUrl","loadScript","attrs","script","onload","size","random","networkTypeMap","unknown","wifi","DEFAULT_TYPE_STRING","DEFAULT_TYPE","getNetWorkTypeBase","WeixinJSBridge","wx","getNetworkType","ready","success","networkType","fail","connection","effectiveType","getNetWorkType","getReferInfo","queryRefer","startsWith","getReferPageContext","getReferPageInfo","refer_page_sn","refer_page_id","refer_page_name","getExtendInfoFromQuery","isIncludeTransferParams","extendParams","createPageId","pageSN","getBodyScrollTop","scrollTop","documentElement","isAbsoluteUrl","memoizedParseQuery","memoize","separator","separatorIndex","splitOnFirst","throwErrorAsync","getPathnameWithSearchAndHash","getURLObject","searchs","urlHash","urlQuerys","parseUrlQuery","queryString","rawUrl","resultUrl","resolveFullUrl","queries","fullUrl","getFullUrl","httpsSafe","func","cacheSize","resolver","cache","cachesKeys","extraInfo","throttle","wait","previous","BGP_IPS","DEFAULT_BACKUP_DOMAIN_CONFIG_MAP","recordFormatError","msg","recordError","errorMsg","formatBackupDomainConfigMap","backupDomainConfigMap","formatRetryLimit","retryLimit","formatUseIpFallback","useIpFallback","Config","rawConfig","customConfig","formatCustomConfig","_backupDomainConfigMap","_useIpFallback","_retryLimit","domainConfig","backupDomain","originHost","GLOBAL_CONFIG_KEY","getConfig","globalConfig","getConfigFromWindow","updateSearch","newQuery","calculator","FallbackUrlCalculator","_config","ips","getBgpIps","ip","excludeDomain","bucketId","getBackupDomainConfig","MAX_SAFE_INTEGER","getDomainByBucketId","currentHost","isBgpIp","_isBgpIp","getOriginHost","retriedTimes","_getBackupDomain","_getBackupIp","_getOriginHost","newHost","_getNewHost","getFallbackUrl","useImageSdk","checkImageProtocol","PLATFORM","imageProtocol","use_image_sdk","domainBucketsConfig","totalBuckets","acc","currentBuckets","throwError","error_msg","renderClient","root","USE_ISO_STYLE_LOADER","StyleContext","require","ReactDOM","Provider","insertCss","removeCss","_insertCss","dispose","withStyles","Component","OBSERVER_CONFIGS","rootMargin","threshold","ImprController","statisfy","createOberver","shown_type","waitTabPageVisible","oberver","IntersectionObserver","observerCallBack","stashQuene","entry","uniqId","dataset","uniqid","isIntersecting","intersectionRatio","elStore","immediate","log","entryQuene","time","lastTimer","info","once","el","handleCustomTracking","unRegister","sendImprMetrics","register","_uniqid","observe","unobserve","Impr","componentDidMount","doImpr","findDOMNode","registerImpr","componentDidUpdate","prevProps","lock","componentWillUnmount","isRegistered","Controller","trackingInfo","children","defaultProps","errors","AUTHENTICATION_FAILED","API_SERVICE_BUSY","GRAPHICAL_CODE_FOR_PHONE_CODE","LOGIN_FAILED","ITEM_REMOVED","OUT_OF_STOCK","NOT_IN_LUCKY_TIME","ADDRESS_UNREACHABLE","UPDATE_USER_PROFILE_FORBIDDEN","NO_COUPON_LEFT","COUPON_TAKEN","COUPON_TAKE_FAILED","COUPON_TAKEN_OUT","PERSONAL_INFO_NO_ID","ORDER_PAYED","NEED_VERFICATION","GROUP_INVALID","GROUP_FAILED","OVER_BUY_LIMIT","GROUP_OVERFLOW","GROUP_AUTO_OPEN_FAILED","GROUP_AUTO_OPEN_SUCCESS","ID_CARD_EMPTY","NO_NAME_ID_BEFORE","ID_CARD_FAKE","ID_CARD_FAIL_TOO_MUCH","INSUFFICIENT_COUPON","AVAILABLE_COUPONS_PER_UNIT","NO_SUCH_ORDER","PREPAY_BUSY","ORDER_PAYING","PAYMENT_DISABLED","SPIKE_COMING","ORDER_PAY_RISK","ORDER_PAY_VERIFICATION_INVALID","ORDER_ALREADY_URGED","ORDER_URGE_ERROR","NATIVE_NORMAL_ERROR","NATIVE_PARAMS_ERROR","NATIVE_USER_REFUSE","NATIVE_USER_CANCEL","NATIVE_AUDIO_RECORD_FAILED","NATIVE_AUDIO_RECORD_UNDETERMINED","NATIVE_AUDIO_TOO_SHORT","NATIVE_AUDIO_UPLOAD_FAILED","NATIVE_AUDIO_PLAY_FAILED","SUCCESSIVE_MOBILE_FEE_ONLY_ONCE","SUCCESSIVE_MOBILE_FEE_RISK","SUCCESSIVE_MOBILE_FEE_UNSIGNED","SUCCESSIVE_MOBILE_FEE_ONLY_WECHAT","OVER_BUY_VIRTUAL_GOODS_LIMIT","AVAILABLE_ACTIVITY_CHANGED","GROUP_COMPLETED","INVALID_ADDRESS","COUPON_DAILY_LIMIT","COUPON_BATCH_LIMIT","COUPON_TOKEN_INVALID","COUPON_TOKEN_EXPIRED","COUPON_PUSH_NOT_IN","COUPON_ACTIVITY_ABSENT","MULTIPLY_DISCOUNT_PAUSE","MULTIPLY_DISCOUNT_END","COUPON_MAX_NUM_REACHED","HISTORY_GROUP_OPEN_FAILED","GOODS_NOT_EXIST","RISK_CONTROL","RISK_CONTROL_FORBIDDEN","NATIVE_PAYMENT_CANCEL","WITHOUT_WE_CHAT_CLIENT","QQ_PAY_FAILED","ORDER_LIMITED_SALES_END","ORDER_LIMITED_SALES_OUT","PAY_LIMITED_SALES_END","PAY_LIMITED_SALES_OUT","SERVER_BUSY","ORDER_SPIKE_MSG_ERROR","WX_DIRECT_PAY_WX_BALANCE_ERROR","WX_DIRECT_PAY_CARD_BALANCE_ERROR","WX_DIRECT_PAY_TELEPHONE_ERROR","WX_DIRECT_PAY_CARD_INVALID_ERROR","WX_DIRECT_PAY_REFUSED_ERROR","WX_DIRECT_PAY_UNKNOWN_ERROR","ACT_GROUP_NOT_EXISTS","ACT_GROUP_FAILED","ACT_GROUP_SUCCESS","ACT_RECORD_NOT_EXISTS","PAY_CHANNEL_NOT_SUPPORT","ACT_RECORD_PAID","ACT_RECORD_REFUND","ASSIST_FOR_ONE_DAILY_LIMIT","ASSIST_FOR_ONE_LIMIT","getMsgFromCode","defaultMsg","PageStore","$axiosHttp","errorRedirectUrl","finishInitLoading","isServerRendered","isFinishInitLoading","handled","alertText","requestContext","initServices","datasource","getDatasource","loadDatasource","pageInfo","initAxiosHttp","initDataCallback","createClientContext","prepareClientData","dealError","req","__req","__res","finishServerRender","rawData","loadDataParallel","createDefaultAxios","toJS","observable","action","store","runInAction","dump","loader","isSupport","img","WEBP_KEY","ATTRS","initCookies","isSupportWebpFromCookie","isSupportWebpCache","getPlatform","isSupportWebp","user","usePlugins","http","plugins","plugin","requestError","responseError","appVersion","supportNativeAntiToken","supportNativeTimeout","nativeRequest","Referer","force_anti_token","useNativeAntiToken","clientTimeout","encode_resp","encodeNativeResponse","deleteAccessToken","AccessToken","pinbridge","nativeResponse","response_encoded","responseEncoded","axiosResponse","error_code","nativeErrorCode","errorType","level","clientAdapter","xhr","isHutaojie","otherProps","cx","role","Portal","getContainer","container","PureComponent","timeoutId","onTimeout","duration","PortalComponent","PortalComponentProps","Toast","ControllerProps","ContainerProps","BaseToastProps","Container","BaseToast","renderContent","renderToast","ceil","cb","infoH5","onClose","otherOptions","infoNative","shouldUseNativeToast","IS_TEST_ENV","RunningAppConfig","DEFAULT_APP_ID","DEFAULT_BIZ_SIDE","cmtUrlPrefix","UID_KEY","CMT_URL","__CMT_HOST__","supportRate","r","sampleRate","__CMT_AMPLIFY_RATE__","rate","error_message","requestTime","resTimeConsume","reqData","resData","apiUrl","statusCode","pageId","reqDataLen","resDataLen","randomIntVal","t","d","tu","rt","q","p","page_id","model","convertVersion","bit","padStart","sendRequest","getRunningPlatform","isLiteNativePlatform","LITE","getBaseParam","groupConfig","pow","reportTime","bizSide","reportPath","runningAppId","runningPlatform","pagePath","report_time_ms","rand_num","biz_side","common_tags","datas","pmmTracking","pmmReport","category","id_raw_value","timestamp","tags","network","lvalues","rspT","values","reqP","rspP","extras","srcPageId","api_ratio","__PMM_HOST__","resolvePmmUrl","handleInIOS","handleInAndroid","handleVerifyAuthInNative","requestLogger","isNative","errorInfo","sub_op","error_type","http_code","logParams","cmt","isDoingLogin","responseErrorHandler","VerifyAuthToken","handleRiskControlError","modifiedOptions","getBaseURL","useGlbDomain","isWebBundle","proxyBase","defaultRequestConfig","isTinyNativePlatform","nativeRequestAdapter","clientRequestAdapter","getItem","pdduid","is_back","useRawResponse","LazyContainer","rootRef","lazyLoader","setLazyLoader","useDefaultContainer","containerRef","thresholds","newLazyLoader","LazyLoader","destroy","contextValue","useMemo","getRetryCount","retryCount","HOSTNAME_REG","recordLoadError","getErrorMsg","LazyLoad","targetOptions","LAZYLOAD_CONFIG","callback_error","_retry","_lazyLoad","_start","lazyload","_observer","_elements","element","classList","removeAttribute","resetLazyloadStatus","update","getRetryLimit","CLASS_NAMES","IMAGE","InitialUrlCalculator","domains","urlObj","getInitialUrl","replaceUrlDomain","newUrl","replaceDomainError","LazyImage","myRef","_startLazyLoad","_lastSrc","start","contextType","Context","setRetryCount","getAttribute","handler","isLoadFailed","naturalHeight","resetWhenRetryFinished","sleep","ms","LoadErrorHandler","retryDurationUnit","_getFallbackUrl","_retryDurationUnit","_handleError","_handleLoad","_loadFallbackUrl","CdnImgConfigContext","Image","clearup","imgRef","handleLoadError","useContext","newSrc","getNewSrc","strip","SimpleEmage","lazy","processParam","Cmp","TrackingChannels","TrackingEvent","OpenAddress","SkipAppGroup","AlertAppDownload","Show","Download","Close","ReferPageKeys","ReferShareKeys","ReferShareMapShort","_sid","_suid","_sc","_sf","PageManager","PageManagerObj","getLogID","getDcf","vds","op","dsk","dst","rkTagCntMap","ckv","dcf","getAppID","cacheContextInfo","contextInfo","isCached","updateCacheContextInfo","referPageQuery","getReferPageQuery","hasReferQuery","userID","uidBase36","page_name","getPageName","errorReportByNative","__ERROR_SAMPLE_RATE__","querys","getKeyParams","log_id","substring","useExistsParams","getPageID","page_sn","getPageSN","wxCheckPdd","wx_check_pdd","transferParameters","getExtendTransferParameters","TrackingKeys","referChannelKey","keyMap","event","page_url","refer_channel_msgid","middlewareArr","preOpts","currentMiddleware","queue","consume","pop","LOG_URL","LOG_ROUTES","impr_id","riskParams","getRiskControlParams","defaultOpts","routeKey","sendBeacon","support_beacon","postData","buildFinalPostData","content_type","status_code","debug_url","log_version","useAMAnalytics","oriParams","use_AMAnalytics","xmlhttp","items","processString","last","next","entryString","processObject","enter_time","parent","parentUrl","referrer","ex","close_time","refer_page_section","refer_page_element","JS_ERROR","screen_width","screen","screen_height","dpr","devicePixelRatio","app_version","riskCookies","pdd_vds","_nano_fp","cookie_fp","storage_fp","sendPv","appendPageId","addDefaultParams","isImprTester","getImprID","goodsID","getImprTime","initLogger","trackingRecord","isAdTrackingTester","addMiddleware","middlewares","isFunc","middleware","assert","logError","logger","page","Formatter","clientInit","leoKeys","leo","csrFallback","fallbackData","leoKey","formatterFunc","formatter","normalFuncExisted","normal","fallbackFuncExisted","fallback","getFormatterFunc","identity","useLeoKeys","keyArray","App","CipherConsumeMode","CONSUME","CONSUME_TIME_DIVIDE","CONSUME_RAW","RECYCLE","RECYCLE_TIME_DIVIDE","RECYCLE_RAW","RECYCLE_TIME_DIVIDE_MULTI","CipherPasteType","DEFAULT","SPECIAL","ShareErrorCode","ShareError","ShareController","ShareEntityClass","ShareEntity","_hasInited","shareEntity","shareEntityMap","disableShareTypes","setMaxListeners","_setupShareTypes","_setupPlatformShareSDK","shareType","SHARE_ACTION_DISABLE","isEnable","noGuarantee","shareTypes","_adjustMenu","initParams","currentEntity","buttonConfig","SHARE_NOT_SUPPORTED","ShareType","getShareEntityByShareType","delayTrigger","cipherScene","cipher","emit","ShareEventType","normalize","norParams","shareID","shareResultType","ShareResultType","rawResponse","getNormalizeErrorHandler","SHARE_PARAMS_NOT_VALID","errorPayload","EventEmitter","getAppVersion","_","NATIVE_SAHRE_ERRORS","validateVersion","iosVersion","androidVersion","checkIOSSystemShare","checkSupportShareCipher","isTPAppShareSupport","checkSupportSilentWakeUp","isLocalCipherSupport","DEFAULT_SHARE_ICON","PATH","ShareLimiter","_inited","_queryShareTypePromise","_rules","_enableShareTypes","appOptional","_rom","_matchedPkgId","_isCipherDowngrade","_enableSilentMode","loadRules","_processRules","MagicTraceManager","build","magicTrace","magic_trace","trackError","page_info","httpClient","pageSn","loadRuleModel","share_types","app_optional","rom","matched_pkg_id","is_weird","degrade","setCipherDowngrade","enableShareTypes","accu","share_type","_innerShareTypes","inner_share_types","SHARE_LIMITER_NOT_INIT","SHARE_TYPE_DISABLED","shareForm","getShareForm","methods","getRuleByType","share_methods","ShareForm","isShortLinkType","urlWrapType","marketActivityID","shortURLApi","LimitMethod","shortCommandApi","URLWrapType","isTinyDomainType","flag","getInstance","TRANSLATE_TP_PATH","TRANSLATE_TP_CARD_PATH","DevType","selectInfoByCategory","infos","generals","TPSelectCategory","tps","main","dev_type","translateTPAppCard","paramMap","scene_id","activitySceneSn","long_url","shareURL","matchedPkgId","pickUpRefer","payloadMixin","param_map","raw","tpInfos","tpDowngrade","translateTPApp","requestParams","activity_code","scene_sn","ReadCipherActionType","formatCipher","template","cipherTemplateCache","getCipherTemplate","consumeMode","scene","processText","txts","date","minute","getMinutes","second","getSeconds","parallelChunksSize","min","__SHARE_CIPHER_PARALLEL_SIZE__","targetInterval","targetChunkIndex","intervalIndex","templates","texts","__SHARE_CIPHER_VER__","text","loadCipherText","getCipherCode","popCipherCode","ciphers","loadCipherCode","popLocalCipher","option","cipherData","getWrappedShareURLInfo","getNativeOnlyWrappedShareURLInfo","missed","getWebWrappedShareURLInfo","getShareLimit","tpSelectCategory","tpInfo","realShareURL","link_url","targetShareURL","shareDomainType","ShareDomainType","requestShareURL","shareDomainRP","shareDomainModel","requestUsePost","getShareDomainPlatform","domainURLApi","isServerControlType","shareURLHash","calculateURLHash","apiCacheManager","getApiCacheManager","remoteRequest","rej","shortURL","shareText","getDomainReplacedURL","useShortURL","cacheResponseByHash","setShareID","URLParser","refer_share_id","cachedResponse","getResponseByHash","increaseCount","isCipherDowngrade","share_id","precacheData","categoryShareInfo","thumbnailURL","thumb_img_url","cipherProcess","cipherProcessor","cipherText","cipherCode","PaintImageMethod","processDrawImageOptions","drawImageOptions","processDrawImageOptionsMuti","processDrawImage","isMutiImage","extra","shareRefer","NativeShareEntity","redirectURI","miniObjectPath","miniObjectID","useWxAppShare","forceDowngrade","excludeShareChoices","thirdPartyOpenType","drawImageClass","needSharedAmount","pinTimelineParams","withShareTicket","systemShareMode","SystemShareMode","wechatMaskConfig","processCipher","share_url","with_share_ticket","system_share_mode","shareRecMask","share_rec_mask","restMaskConfig","wechat_mask_config","share_prefer","isImageShare","mini_object_path","processMiniObjectPath","mini_object_id","multi_image_options","open_type","excluded_types","isShareText","isShareToQQ","shareToQQURL","getQQShareURL","useCipher","pcode","makeUpProtocol","$params","shareTextFinal","withoutDefault","withDefault","ShareMethod","setContent","SUPPORTED_SHARE_TYPE","NativeShareController","shareLimiter","_isEnableShareCheck","setShareCheck","validateShareParams","checkShareTypeSupport","checkResult","checkSync","checkShareTypeEnable","_sharePinTimeline","_nativeShareBigImage","_nativeShareCard","_nativeShareCardSpecial","_nativeShareImage","_nativeShareText","_nativeShareClipboard","copyCipher","reset","waitShareLimiter","restParams","sdkType","sdk_type","shareParams","share_params","share_method","shareEntityToMethod","show_check_detail","dev_app","dev_infos","_invokeNativeShare","responseData","nativeShareErrorCode","callNativeShareType","shareCode","share_code","useCompleteCallback","originContent","shareIcon","shareIconSize","buttons","icons","onSuccess","onFail","shareModuleName","getAppOptional","openType","ThirdPartyOpenType","pasteType","restOptions","isSilentMode","paste_type","QQShareEntity","image_url","back","shareTypeMapType","SHARE_TYPE_MAP_TAG","QQShareController","mqq","ui","shareMessage","createShareCallback","hideMenuItems","menuList","retCode","currentLength","setOnShareHandler","WebShareEntity","WebShareController","WeChatShareEntity","link","SHARE_MENUS","tag","WeChatShareController","refreshWeChatChannelShare","createShareEntity","_setupWeChatChannelShare","interfaceName","trigger","WxAppShareEntity","wxAppRequestPayload","wxAppNavigatePayload","toHttps","WxAppShareController","_shareByNavigate","miniProgram","navigateTo","refreshWxAppChannelShare","postMessage","message_type","share_info","formatString","timelineDomain","timelineAppId","SHARE_TYPE_NOT_FOUND","SHARE_STATUS_ILLEGAL","ON_SHARE_TRIGGER","ON_SHARE_COMPLETED","SDK_INIT_FAILED","ON_SHARE_BUTTON_CLICKED","ON_SHARE_PREPARE","ON_SDK_READY","ON_SHARE_INTERRUPT","SHARE_LIMIT_LOAD_FAIL","PERFORM_LOG_FAILED","SHARE_REACH_LIMIT","COMMAND","TEXT","CARD","WXAPP_CARD","COPY_LINK","CIPHER","LINK","DOMAIN","NORMAL","COPY","platformTag","isWeChatMiniProgram","WxApp","shareEntityToParams","thumb_url","SDK","MANUAL","EXTENSION","STAND","COMPLETE","SUCCESS","FAIL","CANCEL","ERROR","WECHAT_SESSION","WECHAT_TIMELINE","WEIBO","QQ_CHAT_SESSION","QQ_ZONE","TENCENT_WEIBO","WECHAT_SESSION_APP","WECHAT_TIMELINE_IMAGE","WECHAT_TIMELINE_IMAGE_WITH_NO_SDK","WECHAT_SESSION_IMAGE","QQ_CHAT_SESSION_IMAGE","QQ_ZONE_IMAGE","WEIBO_IMAGE","WECHAT_TIMELINE_IMAGES","WECHAT_SESSION_TEXT_WITH_NO_SDK","WECHAT_SESSION_TEXT","IOS_SYSTEM_SHARE_CARD","WECHAT_SESSION_IMAGE_WITH_NO_SDK","WECHAT_SESSION_IMAGES_WITH_NO_SDK","WECHAT_TIMELINE_TEXT","SHARE_IMAGE_PASSIVELY","WECHAT_SESSION_MUSIC","WECHAT_SESSION_VIDEO","COPY_CIPHER","WECHAT_SESSION_CARD_WITH_NO_SDK","WECHAT_TIMELINE_CARD_WITH_NO_SDK","FRIENDS","WECHAT_BIG_IMAGE","PIN_TIMELINE","ANDROID_SP","TP_FIRST","GENERAL_FIRST","GENERAL_ONLY","OPEN_WECHAT","OPEN_QQ","OPEN_WEIBO","OPEN_WECHAT_IOS_SILENT","OPEN_WECHAT_ANDROID_SILENT","TRACKING_OP_NAME","TRACKING_SUB_OP","SHARE","SHARE_RESULT","TrackingEntity","subOP","shareChannel","shareResult","shareMethod","shareAppID","wxShareCount","share_channel","share_domain","share_form","share_app_id","pcode_scene","share_result","wx_share_count","walrusID","walrus_id","walrus_type","walrusType","getTrackingQueries","trackingEntity","refer_share_uin","refer_share_channel","createShareID","len","UNKNOWN","APP_MESSAGE","TIMELINE","QQ_WEIBO","SINA_WEIBO","CLIPBOARD","shareTypeMapChannel","ShareChannel","getShareChannelByType","AppChannel","SHARE_CHANNEL_MAP_APP_CHANNEL","VenderAppIDCache","_venderAppIDs","_isInited","wechatAppID","_buildNativeCache","_buildWeChatCache","appChannels","channels","appChannel","getAppChannel","ShareTracker","transparentTransmission","onTriggerListener","onCompletedListener","shareController","_cachePrepareInfo","disconnect","_setupDefaultTrackListener","_removeDefaultTrackListener","onPrepareListener","_onDefaultSharePrepare","_onDefaultShareTrigger","_onDefaultShareCompleted","on","removeListener","sendMetrics","lastCacheInfo","getUserID","getCachedUin","setShareURLQueries","cacheInfo","_getCachedShareID","preparedInfo","venderAppIDCache","getShareMethod","getAppIDSync","_sendLog","useComplete","currentPlatform","getShareResultByType","ShareResult","wxAppID","group_id","manager","getShareID","REACH_HOUR_LIMIT","REACH_DAY_LIMIT","MenuWatcher","_shareController","_onPerformShareErrorHandler","_setupListener","_onPerformShareError","ErrorCode","hideShareMenuOption","disableShare","isClientEnv","default","getController","HYBRID","ShareManager","shareTracker","menuWatcher","_disableContentCheck","_disablePerformShareLog","controllerOptions","noDefaultShare","_initControllerPromise","loadErrorRetry","enableInfiniteRetry","_loadControllerFailed","_setupShareTracker","_setupMenuWatcher","_setupController","retry","setup","_prepareShareController","listen","_setupPerformShareLog","isInited","initShare","disableTracker","trackerTrans","getShareEntity","performShareLog","refreshUid","invokeShare","me","onResult","removeListeners","shareErrorType","share","shareContentCheck","shareInfoPack","entityConfig","skipShareContentCheck","refreshShare","checkShareContent","onClickListener","removeAllListeners","setupNativeShareButton","SI_ENTITY_KEYS","SI_CONFIG_FLAGS","SI_OTHERS","KT","USELESS","OUT_OF_DATE","FORBIDDEN","ABANDONED","ShareInfoFilter","cacheRaw","deleteAfterCollect","shareInfo","_filterShareEntity","flowControllConfig","_filterShareConfigFlag","otherConfig","_filterShareOther","compatibleShareConfig","_rawShareInfo","filteredItem","_filterByItems","WE_CHAT_MSG","TRANSPARENT","NONE","NO_LOGO","applicationConfig","NEED_REMOVED_QUERIES","isappinstalled","at","list_id","REFER_FILTER_KEYS","addWaterMark","tail","forceChange","PDDShare","shopConfig","defaultShareEntityConfig","shareManager","shareInfoFilter","_sdkPrepared","_setupShareInfoFilter","_setupShareManager","shareManagerConfig","_prepareDefaultShare","waitAppIDCacheBuild","shareInfoFilterConfig","managerConfig","useNativeShareButton","_managerReadyPromise","_managerReady","prepareShare","waitManagerReady","_buildThumbnailURL","_buildShareURL","_prepareShareByShareType","_checkSDKPrepared","isSDKPrepare","waitSDKReady","waitWeChatSDKReady","sdkReadyPromise","getShareControllerAsync","_actualWeChatAppID","appIDReadyPromise","prepareShareSafe","waterMark","ShareWaterMark","urlStatus","referFilter","contextQueries","generalQueries","_wv","_wvx","finalQueries","wechatEnableMap","shareTypeEnable","disabledTypes","QQ_SHARE_TYPES","ApiCacheManager","_cacheMap","_cacheLimit","cacheLimit","cachedNum","count","conf","_read","_write","getCountByHash","transformByMagicTrace","trace","_magicTrace","dynamicTrace","pagename","hashTag","parseURL","splitHash","noHashTag","curr","keyValue","protocolMatch","hostnameResult","pagenameResult","REDIRECT","SERVER_DOMAIN","SERVER_CONTROL","SERVER_SHORT_URL","RAW","SERVER_TINY_DOMAIN","SERVER_DOMAIN_BASE64","DOMAIN_REPLACE","MAGIC_TRACE","MAGIC_TRACE_DYNAMIC","SERVER_SHORT_URL_WITH_CACHE","SERVER_TP_APP","SERVER_TP_APP_CARD","SERVER_QUERY_APPEND","CATEGORY_PROCEDURE","CATEGORY_PROCEDURE_CUSTOM","clearURL","refer_share_uid","payloadString","md5","pageContextCache","setPageContext","pageName","userIDCache","uinCache","statusPartA","statusPartB","target_page","partBQuery","referInfo","specialUrl","jump_url","launch_url","jumpURLStatus","jumpURLQuery","WEIXIN_TINY_DOMAIN","SHORT_LINK","ShareDomainPlatform","WECHAT","IOS","ANDROID","EXTRA_QEURIES_API","getExtraQueriesFromServer","share_refer","apiPath","activity","urlAlias","longUrl","urlCodeQuery","openAppID","open_app_id","short_url","share_text","QQ_ENABLE_DOMAIN","transformByShareEntity","code_method","share_title","share_img","restQueries","targetURL","getBasicEnvParams","fields","getReferQuery","getExtendQuery","getPageManagerParams","referQuery","extendQuery","CHANNEL_KEYS","REFER_SHARE_KEYS","REFER_SHARE_SHORT_MAP","getTransformKeyParams","getQueryParams","isPv","msgId","msgid","getDefaultReporter","nativeReporter","browserReporter","handleReporterError","flatObject","defaultParams","setDefaultParams","reporter","getCompositeParams","basicParams","resolveLogURL","sendPageViewMetrics","pageParams","isInit","enterTime","initGlobalMetrics","logUrl","FirstScreen","_plt","fs","plt","loadEvent","errorEvent","latestTime","imgs","getElementsByTagName","clientHeight","fsItems","isLoad","onLoad","top","getBoundingClientRect","check","load","__fsImgItems","__fsImgSrcs","dangerouslySetInnerHTML","__html","platformInstance","navigationModule","getPageVisibilityPromise","deferedPromise","fullfilled","setPageContextPromise","STORAGE_MODULE","UI_CONTROL_MODULE","WEB_SCENE_MODULE","USER_MODULE","errorMessage","moduleName","funcName","minAndroidVer","minIOSVer","reportWhenTimeout","minVersion","setupPullReload","enable","_setPageContextPromise","onWebMounted","getPageShownType","showRetryPage","PACKAGE_NAME","JSSDK_NOT_READY","launchPDDApp","prefix","isIOSWeChatPlatform","wechatLuanchApplication","isAndroidWeChatPlatform","invoke","packageName","packageUrl","err_msg","versionName","installed","extInfo","appID","messageExt","getPathName","addPageTransferParameters","urlQuery","referParams","referPageELSN","page_el_sn","refer_page_el_sn","getTransientReferPageParams","pre","newKey","BackupHostname","targetPages","NavigationResult","wxAppNavigateWait","Navigation","nextPageQuery","setNextPageQuery","getNextPageQuery","reload","originalURL","querySet","navigationMapInfo","processNavigationMap","history","replaceState","webReload","useUrmNavigation","use_urm_navigation","transientReferPageParams","transient_refer_page_context","directBack","initWxAppNavigateWait","throttleForwardWxAppPage","createThrottleForwardWxAppPage","webForward","isWxAppSupportForward","prepareForwardUrl","isQQMiniProgram","replaceURL","uniformForward","resolvedUrl","launchPromise","paramsNative","tab_index","maskAppPage","defaultMethod","replaceQuery","nativeAppPage","_wxaPageMap","timeoutReject","isWxAppSupport","_x_minpgm_webnav_","forwardWxAppPage","wxaForwardResult","wxaPageMap","defaultRouteType","matchdKey","find","miniProgramUrl","replaceParams","wxaQuery","routeType","supportFallback","getWxaForwardResult","forwardFn","getDestinationPathName","__NAVIGATION_MAP__","pathName","finalUrlInfo","resultUrlMap","finalPathName","finalUrlQuery","destinationPathName","getFinalUrlInfo","replaceReg","pr_domain","__minPgmUrlMap__","race","setMinutes","wxaPageMapCache","timeStamp","getTime","cacheKey","async","crossOrigin","pddMiniProgram","routeConfig","PageInfo","pageProperty","initByUrl","pageELSN","shortPathname","getShortPathname","pageKey","initWithPageKey","tkShareClick","keyParams","native","pageID","createPageID","pvInfo","pv","isAppModal","getQuery","getNativePageContext","pageContext","getAdQuery","cid","campaign","getNativeQuery","nativeInfo","getNativeInfo","queryMap","nativeKey","setKeyParams","checkNativePageVersion","getNativePageName","getKeyParamsFromQuery","mapping","mappingKey","hasIndividualPV","indiv","pickupReferQuery","initPageInfo","updateReferInfo","updateReferPageContextFromNative","isEmbedPage","getPageInfo","getParameters","getParameter","getReferPageID","getReferPageName","getReferPageSection","getReferPageElement","getReferPageQueryString","addReferPageQueryString","addPageNameAsRefer","addPageAsRefer","referPageSN","isTransferParameters","getPageInfoByUrl","transientKey","pageManagerDefaultExport","REG","MiniProgram","QQAndQzone","QQApp","Ios","IosVersion","Android","AndroidVersion","AndroidNative","IosNative","IosApiRequest","Mobile","AndroidNativeVersion","IosNativeVersion","MecoWebViewCore","MecoWebViewSdk","Unknown","PddIOS","PddAndroid","PDDTinyAndorid","getNativeVersion","regNativeVersion","matchVersions","isMecoWebView","v1","v2","toIntArray","parts1","parts2","part1","part2","getCache","isMiniProgram","__wxjs_environment","getPlatformByUa","getSystem","getSystemVersion","regSystemVersion","SystemVersions","isMobilePlatform","IPlatform","regWeChatVersion","WECHATPLATFORM","WechatPlatForm","getWechatVersion","getWechatPlatform","wechatVersion","wechatPlatform","VersionCompareMethod","NativePlatForm","compareMethod","isVersionGreater","isVersionGreaterThanEqual","QQPlatform","WeiboPlatform","UnknownPlatform","TintAndroidPlatform","cachedUA","cachedPlatformByUa","Map","has","NativePlatform","WechatPlatform","TinyNativePlatform","cachePlatformByUa","set","uaForRemove","delete","SIGN_URL","initQQConfig","nonce","noncestr","loadQQScript","signature","debug","nonceStr","jsApiList","showMenuItems","isPureQQPlatform","define","u","C","verifyAppId","verifySignType","verifyTimestamp","verifyNonceStr","verifySignature","package","paySign","signType","postalCode","addressPostalCode","provinceName","proviceFirstStageName","cityName","addressCitySecondStageName","countryName","addressCountiesThirdStageName","detailInfo","addressDetailInfo","errCode","err_code","err_desc","err_detail","errMsg","_complete","isInnerInvoke","alert","w","x","V","systemType","initTime","A","initEndTime","initStartTime","preVerifyTime","preVerifyEndTime","preVerifyStartTime","N","isPreVerifyOk","clientVersion","f","T","S","g","jWeixin","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","previewImage","getLocation","openProductSpecificView","addCard","openCard","chooseWXPay","openEnterpriseRedPacket","startSearchBeacons","stopSearchBeacons","onSearchBeacons","consumeAndShareCard","openAddress","I","y","M","P","L","_completes","B","E","O","verifyJsApiList","_fail","checkJsApi","img_url","data_url","dataUrl","updateTimelineShareData","updateAppMessageShareData","startRecord","stopRecord","onVoiceRecordEnd","playVoice","localId","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","isShowProgressTips","downloadVoice","serverId","translateVoice","chooseImage","sizeType","sourceType","localIds","urls","uploadImage","downloadImage","getLocalImgData","subtype","openLocation","latitude","longitude","address","infoUrl","needResult","scanType","resultStr","scan_code","scan_result","pid","productId","view_type","viewType","ext_info","cardList","card_id","cardId","card_ext","cardExt","card_list","isSuccess","is_succ","location_id","shopId","sign_type","card_type","cardType","card_sign","cardSign","time_stamp","nonce_str","choose_card_info","consumedCardId","consumedCode","ticket","useridlist","userIds","chatname","groupName","targetAppId","envVersion","navigateBack","arg","delta","redirectTo","switchTab","reLaunch","getEnv","miniprogram","R","tagName","preventDefault","stopPropagation","localData","qq","JS_API_LIST","OPEN_TAG_LIST","WX_MENU_ITEMS","DEFAULT_HIDE_ITEM_LIST","SHARE_TYPE","SHARE_TYPE_MAP_MENU_ITEM","DEFAULT_SHARE_TYPE_ENABLE","WX_CHECK_PDD_KEY","initWxConfig","wxMenuConfig","beta","openTagList","onlyWeChat","menuName","menuShareItemsToHide","buff","menuShareItemsToShow","getShareMenuItems","menuItemsToShow","menuItemsToHide","disableCopyUrl","enableBrowserOpen","wxReady","defineProperty","getAppInstallState","uninstall_status","uninstalled","verifyOpenTagList","businessType","extraData","shouldUseNative","showNative","hideBg","loading_style","spinnerUrl","bigger","computedStyle","backgroundColor","hideSpinner","SpinnerImgProps","hasContent","renderPopup","popup","showH5","show","hide","Spinner","TimeoutSpinner","iconType","timer","DEFAULTS","requireLogin","fallbackCSR","beforeRender","stores","renderSpinner","appProvider","Stores","every","displayName","dealServerError","errorTemplateName","serverTemplateName","observer","createPage","hoistNonReactStatics","getInitialProps","createInitialPropsFun","createStores","initClientData","INITIAL_PROPS_LOADED","CHUNK_DATA_LOADED","catchError","waitRawDataReady","onDOMReady","ChunkContext","ChunkProvider","initialContext","chunkContext","setChunkContext","assignChunks","chunks","chunk","readyChunks","isReady","retriever","ensureChunkData","chunkDataLoadedListener","detail","dataKey","propTypes","PropTypes","getHeader","clientController","isSSR","__SSR__","retrieveClientProps","initialProps","chunkProps","getChunkFetcher","initialPropsP","getChunkDataFetcher","getChunkProps","chunkFetcher","chunkData","chunkPromise","__CHUNK_DATA__","__INITIAL_PROPS__","chunkPropsP","ErrorBoundary","hasError","setState","FallbackComponent","chunkDataKey","ComponentProps","suppressHydrationWarning","processStackMsg","error_stack","replaceAccessToken","p2","p3","jsonStringifyReplacer","seen","memo","getSimplePlatform","nativeSend","reportUrl","getReporterUrl","isErrorSample","onCatchError","xhrSend","HTJ_HOST","HOST","LOG_PATH","ERROR_PATH","CATEGORY","ERROR_TYPE_CONFIG","isTestEnv","getRealPagePath","universalPaths","universalQueryKeys","currentPathName","realPathName","universalQueryKey","queryObject","_defaultExtraInfo","setPmmAppInfo","appInfo","setPageInfo","getDefaultExtraInfo","versionNumber","pddId","baseSendPmmError","pmmHost","callNative","getOrganizedData","isResourceError","imgErrorUrl","testAppId","user_agent","serverIp","httpCode","httpMethod","referPageId","fvalues","elseParam","defaultExtraInfo","isNormalLog","transferToString","subOp","isApiError","outerData","getOuterDataStructure","commonTag","getCommonTag","getTags","stringElseParam","getAppInfo","sum","getRunningAppId","systemVersion","did","mid","osV","temp","realPathPath","pageUrl","referPageName","referPageSn","TraceKit","__RESET_ERROR_LISTENER__","stackInfo","isWindowError","errorStr","column","resolveErrorParams","bridgeParams","pinBridgeErrorPayload","apiParams","userId","processedParams","property","unique_tag","error_logger","preventClick","cleanup","DisableClickWhenScroll","disableClick","setDisableCLick","timeoutRef","interval","throttleWait","handleScroll","opacity","position","left","zIndex","onClick","initGlobal","div","fetchWxConfig","mirror","share_type_enable","hybridPackName","bundles","bundle","render","getDefaultPageName","extraPvParams","noReportPv","initNativeBehavior","initDefaultNativeBehavior","pmmAppInfo","initMetricsAndLogger","initPageContext","initLogin","initShareP","initShareAndMenu","disablePullReload","DisableClickComponent","timeoutMsg","timeLimit","initMetricsP","getHybridPackVersion","component_version","initErrorLogger","skipLogin","initAuth","setupParams","SharePromise","setupShare","wxConfig","mergedShareInfo","PDDSharePromise","pddShare","bootClient","useStrict","forceWKWebviewBackRefresh","pageOptions","configure","enforceActions","runApp","__wxjs_is_wkwebview","persisted","fromJS"],"sourceRoot":""}