(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[18],{"5V3U":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._1wpESNhh{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}._39hIKDFd{width:.5rem;height:.5rem}._2RI5nZBq{min-width:.34rem;word-break:keep-all;border-radius:.04rem;position:absolute;color:#8c3a00;font-size:.12rem;top:.32rem;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}._2RI5nZBq,.KzsVu3L7{height:.16rem;line-height:.16rem;font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500;text-align:center}.KzsVu3L7{width:.5rem;background-image:-webkit-linear-gradient(266deg,#ff8c00,#ff6900);background-image:linear-gradient(184deg,#ff8c00,#ff6900);border-radius:.09rem;color:#fff;font-size:.1rem;margin-top:-.01rem;position:relative}._1ll6AIA9{color:hsla(0,0%,100%,.9);font-size:.12rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding-left:.08rem;position:absolute;right:110%;top:.2rem;opacity:0;background:url(https://promotion.pddpic.com/mobile_live/df91d696-774b-4e2f-8ccc-a1e3ee3a582e.png.slim.c1.png) no-repeat;background-size:contain;width:1.05rem;height:.28rem;-webkit-transform:scale(0);transform:scale(0);-webkit-transform-origin:right center;transform-origin:right center;-webkit-transition:opacity .5s,-webkit-transform .5s;transition:opacity .5s,-webkit-transform .5s;transition:opacity .5s,transform .5s;transition:opacity .5s,transform .5s,-webkit-transform .5s}._1ll6AIA9._1VAVrS4k{opacity:1;-webkit-transform:scale(1);transform:scale(1)}",""]),t.locals={wrapper:"_1wpESNhh",bg:"_39hIKDFd",reward:"_2RI5nZBq",text:"KzsVu3L7",bubble:"_1ll6AIA9",show:"_1VAVrS4k"}},LDTw:function(e,t,n){var r=n("5V3U"),a=n("Q8e5"),i="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return a(i,e)}},"X3+C":function(e,t,n){"use strict";n.r(t);var r=n("J4zp"),a=n.n(r),i=n("q1tI"),o=n.n(i),c=n("TyAF"),s=n("SXY3"),l=n("Vpw8"),u=n("mFSr"),b=n("O2NP"),f=n("N4rI"),m=n("HIPb"),p=n("kLkQ"),d=n("zRTd"),w=n("/WLQ"),_=n("fkkr"),g=n("yXPU"),h=n.n(g),k=n("o0o1"),O=n.n(k),v=n("spdq"),S=n("jX+H"),j=Object(l.a)(c.observer)((function(){var e=Object(i.useRef)(null),t=Object(i.useRef)(null),n=Object(i.useState)(!1),r=a()(n,2),c=r[0],s=r[1],l=Object(i.useRef)(""),u=Object(b.k)().store.activityTaskStore.farmDialogType,f=Object(b.h)(u),m=function(){e.current&&clearTimeout(e.current),t.current&&clearTimeout(t.current)},p=function(){var n=h()(O.a.mark((function n(){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:m(),e.current=setTimeout((function(){s(!0)}),500),t.current=setTimeout((function(){s(!1)}),6e3);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){m()}}),[]),Object(i.useEffect)((function(){!u&&[S.a.BrowserGuide,S.a.BuyGuide].includes(f)&&(p(),l.current=f===S.a.BrowserGuide?"浏览直播间可得":"直播间下单可得")}),[u,f]),o.a.createElement(v.a,{isShow:c,text:l.current,bg:"https://promotion.pddpic.com/mobile_live/df91d696-774b-4e2f-8ccc-a1e3ee3a582e.png.slim.c1.png"})})),E=n("eQJp"),y=n("FoiV"),x=Object(l.a)(c.observer)((function(e){var t=Object(b.k)().store.activityTaskStore,n=t.missionMap,r=t.refreshPendantInfo,a=t.requestCompletePendantMission,c=t.showFarmDialog,s=n[y.b.GARDEN_FARM_BROWSER]||{},l=s.completeSeconds,u=s.priceNum,f=(n[y.b.GARDEN_FARM_BUY]||{}).status,m={bizKey:"farmBrowse",completeSeconds:l,onComplete:Object(b.e)(Object(i.useCallback)(h()(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(y.b.GARDEN_FARM_BROWSER);case 2:return null!=(t=e.sent)&&t.success&&(Object(p.p)("当前浏览任务已完成，获得".concat(u,"奖励")),!Object(p.b)(S.b[y.b.GARDEN_FARM_BUY])&&f===y.c.UNDONE&&c(S.a.BuyGuide)),e.next=6,Object(p.o)(1e3);case 6:r();case 7:case"end":return e.stop()}}),e)}))),[f])),onUpdateSeconds:e.onUpdateSeconds};return o.a.createElement(E.a,m)})),R=Object(c.observer)((function(e){var t=e.setIsFrozen,n=Object(b.k)().store.activityTaskStore,r=n.missionMap,o=n.localDiffServer,c=void 0===o?0:o,s=r[y.b.GARDEN_FARM_BROWSER]||{},l=s.finishCount,u=s.nextCompleteTime,f=s.status,m=Object(i.useState)(null),p=a()(m,2),d=p[0],w=p[1],_=f===y.c.UNDONE,g=function(){t(!0),w(1e3)};return Object(b.n)((function(){l>0&&_&&g()}),[l]),Object(b.f)((function(){var e=+new Date-c<1e3*u;l>0&&_&&e&&g()})),Object(b.d)((function(){+new Date-c>=1e3*u&&(t(!1),w(null))}),d),null})),N=n("LDTw"),A=n.n(N);t.default=Object(l.a)(c.observer)((function(){Object(m.a)(A.a);var e=Object(b.k)().store,t=e.activityTaskStore,n=e.roomId,r=t.missionMap,c=t.showFarmDialog,l=t.localDiffServer,g=Object(i.useState)(0),h=a()(g,2),k=h[0],O=h[1],v=r[y.b.GARDEN_FARM_BROWSER]||{},E=v.status,N=v.priceNum,D=v.completeSeconds,T=void 0===D?60:D,F=v.finishCount,C=v.nextCompleteTime,B=r[y.b.GARDEN_FARM_BUY]||{},I=B.status,G=B.priceNum,M=E===y.c.UNDONE,L=I===y.c.UNDONE,U=Object(i.useState)(M&&F>0&&Date.now()-l<1e3*C),z=a()(U,2),P=z[0],Q=z[1],V=M&&!P;Object(b.f)((function(){!Object(p.b)(S.b[y.b.GARDEN_FARM_BROWSER])&&V&&c(S.a.BrowserGuide)}));var K=Object(i.useMemo)((function(){return V?{reward:N,iconText:"看".concat(T-k,"秒得")}:L?{reward:G,iconText:"下单最高得"}:P?{reward:N,iconText:"任务准备中"}:{reward:N,iconText:"浏览已完成"}}),[V,L,N,G,P,k,T]);return o.a.createElement(s.a,{trackingInfo:{page_el_sn:6583633}},o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:A.a.wrapper,onClick:function(){Object(_.a)({page_el_sn:6583633});var e=Math.max(parseInt((1e3*C-(Date.now()-l))/1e3/60),1),t="";V?t="浏览".concat(T,"秒即可获得").concat(N,"g饲料"):L?Object(f.a)("live_shop_coupon_dialog",{openLiveGoods:!0,room_id:n}):P&&(t="需等待".concat(e,"分钟后，可再次进行任务")),Object(d.f)({subType:w.e.GardenFarm}),t&&Object(p.p)(t)}},o.a.createElement(d.b,{subType:w.e.GardenFarm}),o.a.createElement(u.a,{className:A.a.bg,src:S.c}),!(null==K||!K.reward)&&o.a.createElement("span",{className:A.a.reward},K.reward,"g"),o.a.createElement("div",{className:A.a.text},null==K?void 0:K.iconText),o.a.createElement(j,null)),M&&o.a.createElement(R,{setIsFrozen:Q}),V&&o.a.createElement(x,{onUpdateSeconds:O})))}))},eQJp:function(e,t,n){"use strict";var r=n("yXPU"),a=n.n(r),i=n("J4zp"),o=n.n(i),c=n("o0o1"),s=n.n(c),l=n("q1tI"),u=n("TyAF"),b=n("Vpw8"),f=n("O2NP"),m=n("yo/L"),p=n("hA9s"),d=function(e){var t=e.bizKey,n=e.completeSeconds,r=e.onComplete,i=e.onUpdateSeconds,c="LiveOuterTaskWatchedSeconds_"+t,u=(Object(f.k)().store.query||{}).list_id,b=void 0===u?"":u,d=Object(l.useState)(0),w=o()(d,2),_=w[0],g=w[1],h=Object(l.useState)(null),k=o()(h,2),O=k[0],v=k[1],S=function(e){g(e||0),i(e||0)};return Object(l.useEffect)((function(){if(t)(function(){var e=a()(s.a.mark((function e(){var t,n,r,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(Object(m.c)(c)||"").split("$__split__$"),n=o()(t,2),r=n[0],a=n[1],i=void 0===a?0:a,r&&b===r&&S(parseInt(i)||0),v(1e3);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();else if(p.b)throw new Error("BrowseCountdown的bizKey不能为空！")}),[]),Object(f.d)((function(){var e=_+1;Object(m.f)(c,"".concat(b).concat("$__split__$").concat(e)),S(e),e>=n&&(v(null),r(),Object(m.a)(c))}),O),null};d.defaultProps={completeSeconds:31536e3,onComplete:function(){},onUpdateSeconds:function(){}},t.a=Object(b.a)(u.observer)(d)},"jX+H":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var r,a=n("lSNA"),i=n.n(a),o=n("FoiV"),c={BrowserGuide:1,BuyGuide:2},s=(r={},i()(r,o.b.GARDEN_FARM_BROWSER,"farm_water_browser_dialog"),i()(r,o.b.GARDEN_FARM_BUY,"farm_water_buy_dialog"),r),l="https://promotion.pddpic.com/mobile_live/fb363ca7-c7ac-472d-8e1e-82b066ff82f8.png.slim.png"},sN3p:function(e,t,n){var r=n("sT4o"),a=n("Q8e5"),i="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return a(i,e)}},sT4o:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2YwTQJRM{width:1.05rem;height:.28rem;position:absolute;top:50%;left:-.05rem;-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%);pointer-events:none}._2YwTQJRM.Onup0dK3 .ZCnEDGQL{-webkit-transform:scale(1);transform:scale(1)}.ZCnEDGQL{-webkit-transform-origin:right center;transform-origin:right center;-webkit-transform:scale(0);transform:scale(0);will-change:transform;-webkit-transition:-webkit-transform .4s ease;transition:-webkit-transform .4s ease;transition:transform .4s ease;transition:transform .4s ease,-webkit-transform .4s ease}._3uSw1WF0,.ZCnEDGQL{width:100%;height:100%}._3uSw1WF0{position:absolute;left:0;top:0;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;flex-wrap:nowrap;-ms-wrap-through:nowrap;-webkit-flex-wrap:nowrap;padding-right:.05rem;color:#fff;font-size:.12rem}",""]),t.locals={bubble:"_2YwTQJRM",show:"Onup0dK3",bubbleInner:"ZCnEDGQL",bubbleText:"_3uSw1WF0"}},spdq:function(e,t,n){"use strict";var r=n("lSNA"),a=n.n(r),i=n("q1tI"),o=n.n(i),c=n("TyAF"),s=n("TSYQ"),l=n.n(s),u=n("HIPb"),b=n("O2NP"),f=n("mFSr"),m=n("sN3p"),p=n.n(m);t.a=Object(c.observer)((function(e){Object(u.a)(p.a);var t=e.isShow,n=e.text,r=e.bg,i=e.children;return!Object(b.k)().store.activityPopStore.needScroll&&o.a.createElement("div",{className:l()(p.a.bubble,e.className,a()({},p.a.show,t))},o.a.createElement("div",{className:p.a.bubbleInner},o.a.createElement(f.a,{src:r}),o.a.createElement("div",{className:p.a.bubbleText},n),i))}))}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-live-layer/js/loadable_ActivityTasks_GardenFarmEntrance_7c68ebb8be66f01cdb4e.js.map