(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[31],{"+7Xe":function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},"1yY8":function(e,t,n){},"5HhQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){var n=e%t;return n<0?n+t:n};t.default=i},"7HEc":function(e,t,n){"use strict";var i=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.children,i=e.startIndex,o=e.startX,s=e.pageX,c=e.viewLength,l=e.resistance,u=r.default.Children.count(n)-1,f=i+(o-s)/c;l?f<0?f=Math.exp(f*a.default.RESISTANCE_COEF)-1:f>u&&(f=u+1-Math.exp((u-f)*a.default.RESISTANCE_COEF)):f<0?t=((f=0)-i)*c+s:f>u&&(t=((f=u)-i)*c+s);return{index:f,startX:t}};var r=i(n("q1tI")),a=i(n("UlPe"))},"7VIw":function(e,t,n){"use strict";var i=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("xZgz")).default;t.default=r},"8SQk":function(e,t,n){"use strict";var i=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=function(e,t){var n=!1,i=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var a=r.default.Children.map(e.children,i)[e.index];if(null!=a)a===r.default.Children.map(t.children,i)[t.index]&&(n=!0)}return n};t.default=a},EfMx:function(e,t,n){"use strict";n.r(t);var i,r=n("lSNA"),a=n.n(r),o=n("yXPU"),s=n.n(o),c=n("J4zp"),l=n.n(c),u=n("o0o1"),f=n.n(u),d=n("q1tI"),p=n.n(d),h=n("TyAF"),m=n("TSYQ"),g=n.n(m),v=n("MyPv"),y=n("Vpw8"),b=n("O2NP"),S=n("alVk"),w=n("YkDL"),x=n("yo/L"),I=n("HWmn"),A=n("RZS+"),E=n.n(A),k=Object(d.forwardRef)((function(e,t){var n=e.complainText,i=e.changeComplainText,r=(e.selectedId,e.setComputeStyle),a=e.setisOccluded,o=e.otherType,s=Object(d.useRef)(),c=Object(b.c)(),u=l()(c,3),f=u[0],h=u[1],m=u[2];Object(d.useEffect)((function(){!I.d&&r({marginBottom:m?"3rem":"0rem"}),a(m)}),[m]);return Object(d.useImperativeHandle)(t,(function(){return{focus:function(){s.current.focus()}}})),p.a.createElement("div",{className:E.a.complain},p.a.createElement("div",null,p.a.createElement("div",{className:E.a.complaintReasonWrapper},p.a.createElement("textarea",{ref:s,className:E.a.complaintReasonTextarea,placeholder:"请输入详细举报理由(".concat(o?"必":"选","填)"),value:n,onBlur:function(){Object(x.g)("live_complain_unSubmit_text",n),h()},onFocus:f,onChange:function(e){return function(e){var t=e.target.value;if(t.length>100)return i(t.slice(0,100)),void Object(v.info)("不能超过100字哦~",{duration:2});i(t)}(e)}}),p.a.createElement("span",{className:E.a.countWords},n.length,"/100"))))})),C=Object(y.a)(h.observer)(k),P=n("NRZO"),O=n.n(P),L=function(e){var t=e.complainConfig,n=e.selectedId,i=e.setSelectedId;return p.a.createElement("div",{id:"live-goods-list",className:O.a.complaintsList},t.map((function(e,t){return p.a.createElement("span",{key:t,className:g()(O.a.complaintsItem,a()({},O.a.selectComplainItem,n===t)),onClick:function(){return i(t)}},null==e?void 0:e.reason)})))},D=n("pVnL"),M=n.n(D),T=n("lwsE"),N=n.n(T),R=n("W8MJ"),U=n.n(R),_=n("iWIM"),j=n.n(_),F=n("7W2i"),B=n.n(F),H=n("a1gu"),W=n.n(H),X=n("Nsbk"),Q=n.n(X),G=n("U+yc"),V=n.n(G),Y=n("gKdT"),z=n.n(Y);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Q()(e);if(t){var r=Q()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return W()(this,n)}}var J=(i=function(e){B()(n,e);var t=q(n);function n(){return N()(this,n),t.apply(this,arguments)}return U()(n,[{key:"onSelectImage",value:function(){var e=this,t=setTimeout((function(){j()(Q()(n.prototype),"onSelectImage",e).call(e),clearTimeout(t)}),100)}},{key:"commitGetImgInfo",value:function(){return this.isAllImageReady()?{pictures:this.getImageWebInfo()}:{msg:"图片正在上传中，请等待图片上传完毕"}}}]),n}(n("wdb0").a),V()(i.prototype,"onSelectImage",[z.a],Object.getOwnPropertyDescriptor(i.prototype,"onSelectImage"),i.prototype),i);function K(e){var t=e.imageUploaderRef,n=e.axiosHttp;return p.a.createElement(J,M()({},{viewID:"live-activity-complain-upload",bucketTag:"mobile-live-common-fe",maximum:1,fileHttps:!0,enableUploadProgress:!0,indicatorText:"添加照片"},{ref:t,axiosHttp:n}))}var Z=n("4SlK"),$=function(){var e=s()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"api/sprite/live/complain_reason",e.next=3,Object(Z.a)("api/sprite/live/complain_reason",t,{},"get");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=s()(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"api/sprite/live/complain",e.next=3,Object(Z.a)("api/sprite/live/complain",t,{},"get");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=n("qBV1"),ne=n.n(te);t.default=Object(y.a)(h.observer)((function(){var e=Object(b.k)().store,t=e.showId,n=e.mallId,i=e.roomId,r=e.disableLiveRoomSlide,o=e.$axiosHttp,c=Object(d.useState)(!1),u=l()(c,2),h=u[0],m=u[1],y=Object(d.useState)(-1),I=l()(y,2),A=I[0],E=I[1],k=Object(d.useState)(""),P=l()(k,2),O=P[0],D=P[1],M=Object(d.useState)({}),T=l()(M,2),N=T[0],R=T[1],U=Object(d.useState)(!1),_=l()(U,2),j=_[0],F=_[1],B=Object(d.useState)([]),H=l()(B,2),W=H[0],X=H[1],Q=Object(d.useRef)(null),G=Object(d.useRef)(null),V=Object(d.useRef)(null),Y=A===W.length-1,z=function(){O&&Object(x.g)("live_complain_unSubmit_text",O),A>-1&&Object(x.g)("live_complain_unSubmit_type",A),m(!1),r(!1,"ComplainDialog.handleClose")},q=function(){var e=s()(f.a.mark((function e(){var r,a,o,s,c,l,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(o=G.current&&G.current.commitGetImgInfo())||!o.msg){e.next=4;break}return Object(v.info)(o.msg),e.abrupt("return");case 4:if(s=null==o?void 0:o.pictures,c=O.slice(0,100),l=null===(r=W[A])||void 0===r?void 0:r.reason,u=(null==s?void 0:s.length)>0?null===(a=s[0])||void 0===a?void 0:a.url:"",(!Y||c)&&l){e.next=11;break}return Object(v.info)("必须输入申诉原因且上传申诉材料"),e.abrupt("return");case 11:return e.prev=11,e.next=14,ee({show_id:t,mall_id:n,room_id:i,reason:l,desc:c,image:u});case 14:(d=e.sent)&&d.success?(Object(v.info)("您的举报已经提交，我们会尽快处理~"),z(),Object(x.h)("live_report_in_cd",Date.now()),Object(x.g)("live_complain_unSubmit_text",""),Object(x.g)("live_complain_unSubmit_type","")):Object(v.info)("举报失败"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),Object(v.info)("提交举报信息失败");case 21:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(){return e.apply(this,arguments)}}(),J=Object(b.e)(s()(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(x.d)("live_report_in_cd",600)){e.next=3;break}return Object(v.info)("举报操作过于频繁，请10分钟后再试~"),e.abrupt("return");case 3:if(!(A<0)){e.next=6;break}return Object(v.info)("请选择举报类别",{duration:1}),e.abrupt("return");case 6:if(!Y||O){e.next=9;break}return Object(v.info)("输入不能为空~",{duration:1}),e.abrupt("return");case 9:return e.next=11,q();case 11:case"end":return e.stop()}}),e)}))));Object(d.useEffect)((function(){return function(){var e=s()(f.a.mark((function e(){var a,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$({show_id:t,mall_id:n,room_id:i,is_h5:"1"});case 2:(null==(a=e.sent)?void 0:a.result)&&X(a.result),m(!0),Object(S.b)(),r(!0,"ComplainDialog"),Object(w.a)({source:"ComplainDialog"}),o=Object(x.e)("live_complain_unSubmit_text")||"",s=Object(x.e)("live_complain_unSubmit_type")||-1,o&&D(o),s>-1&&E(s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){Object(S.a)(),r(!1,"ComplainDialog"),Object(w.b)({source:"ComplainDialog"})}}),[]),Object(d.useEffect)((function(){j&&V.current&&V.current.scrollIntoView({behavior:"smooth"})}),[j]);return p.a.createElement("div",{className:g()(ne.a.root,a()({},ne.a.show,h)),onTransitionEnd:function(){!h&&e.setValue({complainDialogShow:!1})}},p.a.createElement("div",{className:ne.a.mask,onClick:z}),p.a.createElement("div",{className:g()(ne.a.content)},p.a.createElement("div",{className:ne.a.scrollWrapper},p.a.createElement("div",{className:ne.a.top},p.a.createElement("div",{className:ne.a.back,onClick:z}),p.a.createElement("div",{className:ne.a.title},"举报理由"),p.a.createElement("div",{className:ne.a.close,onClick:z})),p.a.createElement(L,{selectedId:A,setSelectedId:function(e){var t;if(e!==A){E(e);var n=(null===(t=W[e])||void 0===t?void 0:t.desc)||"";D(n),n||Q.current&&Q.current.focus()}},complainConfig:W}),p.a.createElement(C,{ref:Q,complainText:O,changeComplainText:D,selectedId:A,setComputeStyle:R,setisOccluded:F,otherType:Y}),p.a.createElement("div",{className:ne.a.uploadWrap,style:N},p.a.createElement(K,{selectedId:A,imageUploaderRef:G,axiosHttp:o}),p.a.createElement("div",{className:g()(ne.a.submitReason,a()({},ne.a.hasInput,O)),onClick:J},"提交")),p.a.createElement("div",{className:ne.a.anchor,ref:V,style:{top:j?"2rem":"4rem"}}))))}))},FRve:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},G2ut:function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}e.exports=n},HEAb:function(e,t,n){"use strict";var i=n("cDf5"),r=n.n(i),a=n("lwsE"),o=n.n(a),s=n("W8MJ"),c=n.n(s),l=n("7W2i"),u=n.n(l),f=n("a1gu"),d=n.n(f),p=n("Nsbk"),h=n.n(p),m=n("q1tI"),g=n.n(m),v={buildCtx:function(e,t){e=e||{},t=t||{};var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]={value:t[i],enumerable:!0,writable:!1});return Object.create(e,n)},pickCtx:function(e){e=e||{};var t={};for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}},y=n("eHaf"),b=n("KoDT");function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d()(this,n)}}var w=function(e){u()(n,e);var t=S(n);function n(e){var i;return o()(this,n),(i=t.call(this,e)).ctxUtil=v,i.mountViewID=e.mountViewID,i.viewID=e.viewID,i.setupViewContext(e),i.isServerEnv=!1,i.isClientEnv=!i.isServerEnv,i.platform=i.isClientEnv&&Object(b.getPlatform)(navigator.userAgent),i.buildViewContext(),i}return c()(n,[{key:"setupViewContext",value:function(e){var t=e.viewCtx||{};"object"!==r()(t)||0===Object.keys(t).length&&!t.isRoot?((t={}).isRoot=!0,this.viewCtx=t):(Object.keys(t).length&&!t.isRoot&&(t.isRoot=!0),this.viewCtx=this.ctxUtil.buildCtx(t))}},{key:"buildViewContext",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"track",value:function(e,t){if(this.isClientEnv&&e){var n=v.pickCtx(v.buildCtx(this.viewCtx,e));n.ad&&"object"===r()(n.ad)&&(n.ad=JSON.stringify(n.ad)),n.hasOwnProperty("isRoot")&&delete n.isRoot,Object(y.sendMetrics)(n).catch((function(){})).then(t)}}}]),n}(g.a.Component);w.defaultProps={show:!1};t.a=w},KJF0:function(e,t,n){"use strict";var i=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return c.default}});var r=i(n("rRnn")),a=i(n("7HEc")),o=i(n("UlPe")),s=i(n("8SQk")),c=i(n("5HhQ"))},KPHd:function(e,t,n){"use strict";var i=n("lwsE"),r=n.n(i),a=n("W8MJ"),o=n.n(a),s=n("7W2i"),c=n.n(s),l=n("a1gu"),u=n.n(l),f=n("Nsbk"),d=n.n(f),p=n("q1tI"),h=n.n(p),m=n("HEAb"),g=n("KoDT"),v=n("3VHQ"),y=n("MyPv");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}n("1yY8");var S=1,w=2,x=function(e){c()(n,e);var t=b(n);function n(e){var i;return r()(this,n),(i=t.call(this,e)).state={show:!1,isUp:!1},i.animating=!1,i}return o()(n,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.isClientEnv&&!this.animating&&(e.show&&!this.props.show?(this.animating=!0,this.setState({show:!0},(function(){window.setTimeout((function(){t.setState({isUp:!0}),t.animating=!1}),100)}))):!e.show&&this.props.show&&(this.animating=!0,this.setState({isUp:!1}),window.setTimeout((function(){t.setState({show:!1}),t.animating=!1}),100)))}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{id:this.viewID,style:{display:this.state.show?"":"none"},className:"base-image-selector"},h.a.createElement("div",{className:this.state.isUp?"bis-select-image-slide-up bis-select-image":"bis-select-image"},h.a.createElement("div",{className:"bis-select-image-type"},h.a.createElement("p",{id:"".concat(this.viewID,"-camera"),className:"bis-from-camera",onClick:function(){e.selectImageFromCamera()}},"拍照"),h.a.createElement("p",{id:"".concat(this.viewID,"-album"),className:"bis-from-album",onClick:function(){e.selectImageFromAlbum()}},"从相册选择")),h.a.createElement("div",{id:"".concat(this.viewID,"-cancel"),className:"bis-select-cancel",onClick:function(){e.hide()}},"取消")),h.a.createElement("div",{className:"bis-select-image-mask",onClick:function(){e.hide()}}))}},{key:"hide",value:function(){this.props.onClose&&this.props.onClose()}},{key:"selectImageFromCamera",value:function(){this.selectImage(S),this.hide()}},{key:"selectImageFromAlbum",value:function(){this.selectImage(w),this.hide()}},{key:"selectImage",value:function(e){var t=this,n={source:e},i=this.platform.platform===g.PLATFORM.PddIOS,r=i?"4.79.0":"4.85.0",a=Object(g.compareVersion)(this.platform.version,r)>=0;i&&this.props.option&&(n.option=this.props.option),a&&(n.max_images_count=this.props.maxImageCount);var o=a?"getV2":"get";Object(v.invokeBridgeCallNativeFun)("JSPhoto",o,n).then((function(e){if((e=e||{}).image_data){var n=e.image_data,i="".concat("data:image/jpeg;base64,").concat(n);return t.props.onSelectStart&&t.props.onSelectStart(),void(t.props.onSelected&&t.props.onSelected(i))}if(e.image_list){if(!e.image_list.length)return t.props.onSelectFail&&t.props.onSelectFail();e.image_list.reduce((function(e,n){return e.then((function(){return t.props.onSelectStart&&t.props.onSelectStart(),t.props.onSelected&&t.props.onSelected("".concat("data:image/jpeg;base64,").concat(n))}))}),Promise.resolve())}})).catch((function(){t.props.onSelectCancel&&t.props.onSelectCancel()}))}}]),n}(m.a);x.defaultProps={onSelected:null,onSelectStart:null,onSelectCancel:null,onSelectFail:function(){return Object(y.info)("图片上传失败")},onClose:null,option:null};var I={};I=x,t.a=I},MOn9:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},NRM5:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},NRZO:function(e,t,n){e.exports={complaintsList:"_3P1ZthU2",complaintsItem:"_39iJDjgh",selectComplainItem:"fhSkLgyF"}},OYUV:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},PTHm:function(e,t,n){var i=n("ZZx6");e.exports=function(e,t){if(null==e)return{};var n,r,a=i(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},"RZS+":function(e,t,n){e.exports={complain:"EwqWMqde",complaintReasonWrapper:"skpeT49M",complaintReasonTextarea:"_2mHsqpQK",countWords:"_1Ptg6Qkv",submitReason:"_3ucEGshm",hasInput:"_2TdDV2bl"}},Sq8v:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},UlPe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},VJ99:function(e,t,n){var i=n("Sq8v"),r=n("FRve");e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?r(e):t}},ZZx6:function(e,t){e.exports=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}},gKdT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){var t=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach((function(t){if("constructor"!==t){var n=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&Object.defineProperty(e.prototype,t,a(e,t,n))}})),e}function a(e,t,n){var r=n.value;if("function"!=typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+(void 0===r?"undefined":i(r)));var a=!1;return{configurable:!0,get:function(){if(a||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof r)return r;var n=r.bind(this);return a=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){r=e,delete this[t]}}),a=!1,n},set:function(e){r=e}}}t.default=function(){return 1===arguments.length?r.apply(void 0,arguments):a.apply(void 0,arguments)}},hR4y:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},jiea:function(e,t,n){var i=n("+7Xe");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},k0Ia:function(e,t,n){},qBV1:function(e,t,n){e.exports={root:"_3A6TPSn4",show:"_33a_mKai",content:"_26TCczt3",mask:"_3Kkz9Jbe",top:"hhJt3I6s",close:"_3UD12WhF",back:"O4Udzp6e",title:"_3ADhGKFf",scrollWrapper:"_9WXg4NXf",complaintsItemContainer:"_3fOFV7B8",complaintsItem:"_20g8lpdT",selectComplainItem:"_9p9BSQd_",complaintReasonWrapper:"Wyb9Ujq8",complaintReasonTextarea:"_2VZzpes4",countWords:"XnMYpflu",uploadWrap:"_3gmPk-RH",submitReason:"T1ELw6-6",anchor:"_2Mx_S0Y-"}},rRnn:function(e,t,n){"use strict";var i=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("iPTW")),function(e){e.index;var t=e.children;r.default.Children.count(t)});t.default=a},wdb0:function(e,t,n){"use strict";var i=n("yXPU"),r=n.n(i),a=n("lwsE"),o=n.n(a),s=n("W8MJ"),c=n.n(s),l=n("iWIM"),u=n.n(l),f=n("7W2i"),d=n.n(f),p=n("a1gu"),h=n.n(p),m=n("Nsbk"),g=n.n(m),v=n("o0o1"),y=n.n(v),b=n("q1tI"),S=n.n(b),w=n("HEAb"),x=n("KPHd"),I=n("KoDT"),A=n("3VHQ"),E=n("h7Yj"),k=n("lSNA"),C=n.n(k),P=n("J4zp"),O=n.n(P),L=n("7VIw"),D=n.n(L),M=n("i8i4"),T=n.n(M),N=function(e){var t,n=e.index,i=e.height,r=e.width,a=e.imageList,o=e.onClose,s=Object(b.useState)(+n||0),c=O()(s,2),l=c[0],u=c[1];Object(b.useEffect)((function(){return Object(E.disableScroll)(),function(){Object(E.enableScroll)()}}),[a,n]);var f=a.map((function(e,t){return S.a.createElement("div",{key:t,style:{background:'center no-repeat url("'.concat(Object(E.forceHttps)(e),'")'),backgroundSize:"contain",height:i,width:r}})}));return S.a.createElement("div",{style:(t={position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:9999999,background:"#000",display:"flex"},C()(t,"display","-webkit-flex"),C()(t,"justifyContent","center"),C()(t,"WebkitJustifyContent","center"),C()(t,"WebkitAlignItems","center"),C()(t,"alignItems","center"),t),onClick:o},S.a.createElement(D.a,{enableMouseEvents:!0,index:l,onChangeIndex:function(e){u(e)}},f))};function R(e,t,n){if(n=n||{},e=Object(E.forceHttps)(e),t&&(t=t.map((function(e){return Object(E.forceHttps)(e)}))),Object(I.getCurrentPlatform)().isNativePlatform){var i=n,r=i.viewAttri,a=i.showIndexBar,o=void 0===a||a,s=i.comeInAnim,c=i.exitOutAnim,l=i.hybridPhotoBrowser,u=i.longImageOptimizeInIphonex;null==t&&(t=[e]);var f=t.indexOf(e);f<0&&(f=0);var d=t.map((function(e){return{url:e}}));Object(A.invokeBridgeCallNativeFun)("JSNavigation","modal",{type:"photo_browse",props:{browse_items:d,view_attri:r,show_index_bar:o,current_index:f,come_in_anim:s,exit_out_anim:c,hybrid_photo_browser:l,long_image_optimize_in_iphonex:u},navigation_bar:{hidden:!0}})}else{var p,h=n.ViewNotWechatInteraface||!1;if(t=t||[e],p=!(!window.wx||!window.wx.previewImage),Object(I.getCurrentPlatform)().isWechatPlatform&&p&&!h)window.wx.previewImage({urls:t,current:e});else!function(e,t){var n=document.createElement("div");document.body.appendChild(n),T.a.render(S.a.createElement(N,{height:window.innerHeight+"px",width:window.innerWidth+"px",imageList:t,index:t.indexOf(e),onClose:function(){setTimeout((function(){T.a.unmountComponentAtNode(n),document.body.removeChild(n),n=null}),0)}}),n)}(e,t)}}var U=n("cDf5"),_=n.n(U),j=function(){function e(t){o()(this,e),this.bucketTag=null,this.loaded=!1,this.api="image/signature",this.axiosHttp=t}return c()(e,[{key:"load",value:function(e){e=e||{},this.bucketTag=e.bucketTag||this.bucketTag}},{key:"getSign",value:function(){var e=this;return new Promise((function(t,n){e.axiosHttp.post(e.api,{bucket_tag:e.bucketTag}).then((function(e){t({signature:(e=e||{}).signature||""})}),(function(){n()}))}))}}]),e}(),F={DEFAULT:0,LOADING:1,ENCODING:2,ENCODED:3,UPLOADING:4,UPLOADED:5},B={VERTICAL:0,HORIZONTAL:1},H=function e(t){o()(this,e),t=t||{},this.key=t.key||null,this.url=t.url||"",this.status=t.status||F.DEFAULT,this.orientation=t.orientation||B.VERTICAL,this.base64=null,this.width=0,this.height=0,this.webURL=null};H.ImageStatus=F,H.ImageOrientation=B;var W=H,X=function(){function e(){o()(this,e),this.img=null,this.coreContext=null}var t;return c()(e,[{key:"load",value:function(e){e=e||{},this.coreContext=e.context||null}},{key:"onSelected",value:(t=r()(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&this.coreContext&&this.img)){e.next=5;break}return this.coreContext.updateImage(this.img,t),e.next=4,this.coreContext.loadImage(this.img);case 4:this.coreContext.process(this.img);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onSelectStart",value:function(){this.img&&(this.img=null),this.img=this.coreContext.createImage()}},{key:"onSelectCancel",value:function(){this.coreContext&&(this.coreContext.remove(this.img),this.img=null)}}]),e}();var Q=new function(e){Math.round;var t,n,i,r,a,o=Math.floor,s=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),f=new Array(65535),d=new Array(65535),p=new Array(64),h=new Array(64),m=[],g=0,v=7,y=new Array(64),b=new Array(64),S=new Array(64),w=new Array(256),x=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(e,t){for(var n=0,i=0,r=[],a=1;a<=16;a++){for(var o=1;o<=e[a];o++)r[t[i]]=[],r[t[i]][0]=n,r[t[i]][1]=a,i++,n++;n*=2}return r}function T(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(N(255),N(0)):N(g),v=7,g=0)}function N(e){m.push(w[e])}function R(e){N(e>>8&255),N(255&e)}function U(e,t,n,i,r){for(var a,o=r[0],s=r[240],c=function(e,t){var n,i,r,a,o,s,c,l,u,f,d=0;for(u=0;u<8;++u){n=e[d],i=e[d+1],r=e[d+2],a=e[d+3],o=e[d+4],s=e[d+5],c=e[d+6];var h=n+(l=e[d+7]),m=n-l,g=i+c,v=i-c,y=r+s,b=r-s,S=a+o,w=a-o,x=h+S,I=h-S,A=g+y,E=g-y;e[d]=x+A,e[d+4]=x-A;var k=.707106781*(E+I);e[d+2]=I+k,e[d+6]=I-k;var C=.382683433*((x=w+b)-(E=v+m)),P=.5411961*x+C,O=1.306562965*E+C,L=.707106781*(A=b+v),D=m+L,M=m-L;e[d+5]=M+P,e[d+3]=M-P,e[d+1]=D+O,e[d+7]=D-O,d+=8}for(d=0,u=0;u<8;++u){n=e[d],i=e[d+8],r=e[d+16],a=e[d+24],o=e[d+32],s=e[d+40],c=e[d+48];var T=n+(l=e[d+56]),N=n-l,R=i+c,U=i-c,_=r+s,j=r-s,F=a+o,B=a-o,H=T+F,W=T-F,X=R+_,Q=R-_;e[d]=H+X,e[d+32]=H-X;var G=.707106781*(Q+W);e[d+16]=W+G,e[d+48]=W-G;var V=.382683433*((H=B+j)-(Q=U+N)),Y=.5411961*H+V,z=1.306562965*Q+V,q=.707106781*(X=j+U),J=N+q,K=N-q;e[d+40]=K+Y,e[d+24]=K-Y,e[d+8]=J+z,e[d+56]=J-z,d++}for(u=0;u<64;++u)f=e[u]*t[u],p[u]=f>0?f+.5|0:f-.5|0;return p}(e,t),l=0;l<64;++l)h[I[l]]=c[l];var u=h[0]-n;n=h[0],0==u?T(i[0]):(T(i[d[a=32767+u]]),T(f[a]));for(var m=63;m>0&&0==h[m];)m--;if(0==m)return T(o),n;for(var g,v=1;v<=m;){for(var y=v;0==h[v]&&v<=m;)++v;var b=v-y;if(b>=16){g=b>>4;for(var S=1;S<=g;++S)T(s);b&=15}a=32767+h[v],T(r[(b<<4)+d[a]]),T(f[a]),v++}return 63!=m&&T(o),n}function _(e){if(e<=0&&(e=1),e>100&&(e=100),a!=e){(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=o((t[n]*e+50)/100);i<1?i=1:i>255&&(i=255),s[I[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var f=o((r[a]*e+50)/100);f<1?f=1:f>255&&(f=255),c[I[a]]=f}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,h=0;h<8;h++)for(var m=0;m<8;m++)l[p]=1/(s[I[p]]*d[h]*d[m]*8),u[p]=1/(c[I[p]]*d[h]*d[m]*8),p++})(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),a=e}}this.encode=function(e,a,o){(new Date).getTime();a&&_(a),m=[],g=0,v=7,R(65496),R(65504),R(16),N(74),N(70),N(73),N(70),N(0),N(1),N(1),N(0),R(1),R(1),N(0),N(0),function(){R(65499),R(132),N(0);for(var e=0;e<64;e++)N(s[e]);N(1);for(var t=0;t<64;t++)N(c[t])}(),function(e,t){R(65472),R(17),N(8),R(t),R(e),N(3),N(1),N(17),N(0),N(2),N(17),N(1),N(3),N(17),N(1)}(e.width,e.height),function(){R(65476),R(418),N(0);for(var e=0;e<16;e++)N(A[e+1]);for(var t=0;t<=11;t++)N(E[t]);N(16);for(var n=0;n<16;n++)N(k[n+1]);for(var i=0;i<=161;i++)N(C[i]);N(1);for(var r=0;r<16;r++)N(P[r+1]);for(var a=0;a<=11;a++)N(O[a]);N(17);for(var o=0;o<16;o++)N(L[o+1]);for(var s=0;s<=161;s++)N(D[s])}(),R(65498),R(12),N(3),N(1),N(0),N(2),N(17),N(3),N(17),N(0),N(63),N(0);var f=0,d=0,p=0;g=0,v=7,this.encode.displayName="_encode_";for(var h,w,I,M,j,F,B,H,W,X=e.data,Q=e.width,G=e.height,V=4*Q,Y=0;Y<G;){for(h=0;h<V;){for(F=j=V*Y+h,B=-1,H=0,W=0;W<64;W++)F=j+(H=W>>3)*V+(B=4*(7&W)),Y+H>=G&&(F-=V*(Y+1+H-G)),h+B>=V&&(F-=h+B-V+4),w=X[F++],I=X[F++],M=X[F++],y[W]=(x[w]+x[I+256>>0]+x[M+512>>0]>>16)-128,b[W]=(x[w+768>>0]+x[I+1024>>0]+x[M+1280>>0]>>16)-128,S[W]=(x[w+1280>>0]+x[I+1536>>0]+x[M+1792>>0]>>16)-128;f=U(y,l,f,t,i),d=U(b,u,d,n,r),p=U(S,u,p,n,r),h+=32}Y+=8}if(v>=0){var z=[];z[1]=v+1,z[0]=(1<<v+1)-1,T(z)}if(R(65497),o){for(var q=m.length,J=new Uint8Array(q),K=0;K<q;K++)J[K]=m[K].charCodeAt();return m=[],J}var Z="data:image/jpeg;base64,"+btoa(m.join(""));return m=[],Z},e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=M(A,E),n=M(P,O),i=M(k,C),r=M(L,D),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var i=e;i<t;i++)d[32767+i]=n,f[32767+i]=[],f[32767+i][1]=n,f[32767+i][0]=i;for(var r=-(t-1);r<=-e;r++)d[32767+r]=n,f[32767+r]=[],f[32767+r][1]=n,f[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}(),_(e)}(100),G={EXIF:null};(function(){var e=function e(t){return t instanceof e?t:this instanceof e?void 0:new e(t)},t=e.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},n=e.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},i=e.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},r=e.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function a(e){return!!e.exifdata}function o(e,t){function n(n){var i=s(n),r=function(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var n=2,i=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n+5<i;){if(r(t,n)){var a=t.getUint8(n+7);a%2!=0&&(a+=1),0===a&&(a=4);var o=n+8+a,s=t.getUint16(n+6+a);return l(e,o,s)}n++}}(n);e.exifdata=i||{},e.iptcdata=r||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"").replace(/%0A/gi,"");for(var n=atob(e),i=n.length,r=new ArrayBuffer(i),a=new Uint8Array(r),o=0;o<i;o++)a[o]=n.charCodeAt(o);return r}(e.src));else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(function(e){i.readAsArrayBuffer(e)}))}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw new Error("Could not load image");n(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var a=new FileReader;a.onload=function(e){n(e.target.result)},a.readAsArrayBuffer(e)}}function s(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,i=e.byteLength;n<i;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return p(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var c={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function l(e,t,n){for(var i,r,a,o,s=new DataView(e),l={},u=t;u<t+n;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&(o=s.getUint8(u+2))in c&&((a=s.getInt16(u+3))+5,r=c[o],i=d(s,u+5,a),l.hasOwnProperty(r)?l[r]instanceof Array?l[r].push(i):l[r]=[l[r],i]:l[r]=i),u++;return l}function u(e,t,n,i,r){var a,o,s=e.getUint16(n,!r),c={};for(o=0;o<s;o++)a=n+12*o+2,c[i[e.getUint16(a,!r)]]=f(e,a,t,n,r);return c}function f(e,t,n,i,r){var a,o,s,c,l,u,f=e.getUint16(t+2,!r),p=e.getUint32(t+4,!r),h=e.getUint32(t+8,!r)+n;switch(f){case 1:case 7:if(1==p)return e.getUint8(t+8,!r);for(a=p>4?h:t+8,o=[],c=0;c<p;c++)o[c]=e.getUint8(a+c);return o;case 2:return d(e,a=p>4?h:t+8,p-1);case 3:if(1==p)return e.getUint16(t+8,!r);for(a=p>2?h:t+8,o=[],c=0;c<p;c++)o[c]=e.getUint16(a+2*c,!r);return o;case 4:if(1==p)return e.getUint32(t+8,!r);for(o=[],c=0;c<p;c++)o[c]=e.getUint32(h+4*c,!r);return o;case 5:if(1==p)return l=e.getUint32(h,!r),u=e.getUint32(h+4,!r),(s=new Number(l/u)).numerator=l,s.denominator=u,s;for(o=[],c=0;c<p;c++)l=e.getUint32(h+8*c,!r),u=e.getUint32(h+4+8*c,!r),o[c]=new Number(l/u),o[c].numerator=l,o[c].denominator=u;return o;case 9:if(1==p)return e.getInt32(t+8,!r);for(o=[],c=0;c<p;c++)o[c]=e.getInt32(h+4*c,!r);return o;case 10:if(1==p)return e.getInt32(h,!r)/e.getInt32(h+4,!r);for(o=[],c=0;c<p;c++)o[c]=e.getInt32(h+8*c,!r)/e.getInt32(h+4+8*c,!r);return o}}function d(e,t,n){for(var i="",r=t;r<t+n;r++)i+=String.fromCharCode(e.getUint8(r));return i}function p(e,a){if("Exif"!=d(e,a,4))return!1;var o,s,c,l,f=a+6;if(18761==e.getUint16(f))o=!1;else{if(19789!=e.getUint16(f))return!1;o=!0}if(42!=e.getUint16(f+2,!o))return!1;var p=e.getUint32(f+4,!o);if(p<8)return!1;var h=u(e,f,f+p,n,o);if(h.ExifIFDPointer)for(s in c=u(e,f,f+h.ExifIFDPointer,t,o)){switch(s){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":c[s]=r[s][c[s]];break;case"ExifVersion":case"FlashpixVersion":c[s]=String.fromCharCode(c[s][0],c[s][1],c[s][2],c[s][3]);break;case"ComponentsConfiguration":c[s]=r.Components[c[s][0]]+r.Components[c[s][1]]+r.Components[c[s][2]]+r.Components[c[s][3]]}h[s]=c[s]}if(h.GPSInfoIFDPointer)for(s in l=u(e,f,f+h.GPSInfoIFDPointer,i,o)){switch(s){case"GPSVersionID":l[s]=l[s][0]+"."+l[s][1]+"."+l[s][2]+"."+l[s][3]}h[s]=l[s]}return h}e.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(a(e)?t&&t.call(e):o(e,t),!0)},e.getTag=function(e,t){if(a(e))return e.exifdata[t]},e.getAllTags=function(e){if(!a(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},e.pretty=function(e){if(!a(e))return"";var t,n=e.exifdata,i="";for(t in n)n.hasOwnProperty(t)&&("object"===_()(n[t])?n[t]instanceof Number?i+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":i+=t+" : ["+n[t].length+" values]\r\n":i+=t+" : "+n[t]+"\r\n");return i},e.readFromBinaryFile=function(e){return s(e)},G.EXIF=e}).call(window);var V=G,Y=null,z=function(){function e(t){o()(this,e),this.returnNullIfNotFitLimit=t.returnNullIfNotFitLimit||!1,this.limitBase64Length=t.limitBase64Length||0}return c()(e,[{key:"compressImage",value:function(e,t){var n=this;e&&t&&this.getImgData(e,(function(e,i){var r=i.width,a=i.height,o=r/a;(r>1200||a>1200)&&(r=1200,(a=parseInt(r/o,10))>1200&&(a=1200,r=parseInt(a*o,10)));var s=document.createElement("canvas"),c=s.getContext("2d");if(s.width=r,s.height=a,c.drawImage(i,0,0,r,a),e&&1!==e)switch(e){case 6:n.rotateImg(i,"left",s,r,a);break;case 8:n.rotateImg(i,"right",s,r,a);break;case 3:n.rotateImg(i,"right",s,r,a),n.rotateImg(i,"right",s,r,a)}if(6!==e&&8!==e||(r+=a,r-=a=r-a),n.notSupportCompressJpeg||n.tryLoopCompress(r,a,75,(function(e){return s.toDataURL("image/jpeg",e/100)}),!1,t),n.notSupportCompressJpeg){var l=c.getImageData(0,0,r,a);n.tryLoopCompress(r,a,75,(function(e){return Q.encode(l,e,!1)}),!0,t)}}))}},{key:"getImgData",value:function(e,t){var n=new Image;n.src=e.url,n.onload=function(){try{void 0!==e.exifOrientation?t(e.exifOrientation,n):V.EXIF.getData(n,(function(){V.EXIF.getAllTags(n);var e=V.EXIF.getTag(n,"Orientation");t(e,n)}))}catch(e){t(null,n)}}}},{key:"tryLoopCompress",value:function(e,t,n,i,r,a){var o;do{if(o=i(n),n-=10,!r&&(!o||o.length<10||0===o.indexOf("data:image/png;")))return void(this.notSupportCompressJpeg=!0)}while(o.length>this.limitBase64Length&&n>=10);o.length>this.limitBase64Length&&this.returnNullIfNotFitLimit?a&&a(null,e,t):a&&a(o,e,t)}},{key:"rotateImg",value:function(e,t,n,i,r){if(e){var a=2;a||(a=0),"right"===t?++a>3&&(a=0):--a<0&&(a=3);var o=90*a*Math.PI/180,s=n.getContext("2d");switch(a){case 0:n.width=i,n.height=r,s.drawImage(e,0,0,i,r);break;case 1:n.width=r,n.height=i,s.rotate(o),s.drawImage(e,0,-r,i,r);break;case 2:n.width=i,n.height=r,s.rotate(o),s.drawImage(e,-i,-r,i,r);break;case 3:n.width=r,n.height=i,s.rotate(o),s.drawImage(e,-i,0,i,r)}}}}]),e}();z.getInstance=function(){return Y||(Y=new z),Y};var q=z,J=W.ImageStatus,K=W.ImageOrientation,Z=300,$=300;function ee(e,t){if(t&&e){for(var n=[],i=2;i<arguments.length;++i)n.push(arguments[i]);t.apply(e,n)}}var te=function(){function e(t){o()(this,e),this.loaded=!1,this.imageMap=t.imageMap||{},this.keyList=t.keyList||[],this.nativeReceiver=null,this.seed=t.seed||1,this.uploadAPI="v2/store_image",this.signatureModule=null,this.taskMap={},this.callbackMap={},this.context=null,this.imageTargetSize=$,this.imageLimitSize=Z,this.imageUtil=null,this.fileDomain="",this.useXHR=!!t.useXHR,this.axiosHttp=t.axiosHttp}var t,n,i;return c()(e,[{key:"load",value:function(e){this.loaded||(e=e||{},this.uploadAPI=e.uploadAPI||this.uploadAPI,this.callbackMap=e.callbackMap||this.callbackMap,this.context=e.context||this.context,this.imageTargetSize=e.imageTargetSize||this.imageTargetSize,this.imageLimitSize=e.imageLimitSize||this.imageLimitSize,this.fileDomain=e.fileDomain||(location.href.includes("hutaojie")?"https://file.hutaojie.com/":"https://file.pinduoduo.com/"),this.imageUtil=e.imageUtil||new q({limitBase64Length:1024*this.imageLimitSize,returnNullIfNotFitLimit:!1}),this.nativeReceiver=new X,this.signatureModule=new j(this.axiosHttp),this.nativeReceiver.load({context:this}),this.signatureModule.load({bucketTag:e.bucketTag}))}},{key:"createImage",value:function(){return new W({key:"img-"+this.seed++})}},{key:"updateImage",value:function(e,t,n){e&&(n=n||{},e.url=t,e.orientation=n.orientation||e.orientation)}},{key:"loadImage",value:(i=r()(y.a.mark((function e(t){var n,i,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.status!==J.DEFAULT){e.next=11;break}return this.imageMap[t.key]=t,this.keyList.push(t.key),t.status=J.LOADING,e.next=6,this.getImageOrientation(t);case 6:n=e.sent,t.exifOrientation=n,i=this.context,r=this.callbackMap.onLoad,ee(i,r,t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getImageOrientation",value:(n=r()(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new Image;n.onload=function(){if(2===n.width&&3===n.height)return e(0);var i=new Image;i.onload=function(){try{V.EXIF.getData(i,(function(){e(V.EXIF.getTag(i,"Orientation")||0)}))}catch(t){e(V.EXIF.getTag(i,"Orientation")||0)}},i.src=t.url},n.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="})));case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"createImageAndLoad",value:(t=r()(y.a.mark((function e(t,n){var i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.createImage(t,n),this.updateImage(i,t,n),e.next=4,this.loadImage(i);case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"loadImageByFile",value:function(e){if((e=e||{}).type){if(!/^(image\/jpeg|image\/png)$/i.test(e.type))return}else if(e.name){var t=e.name||"";if(-1===(t=t.toUpperCase()).indexOf("IMAGE%3A")&&-1===t.indexOf("IMAGE:"))return}var n=(URL||window.webkitURL).createObjectURL(e);return this.createImageAndLoad(n)}},{key:"remove",value:function(e){if(e){var t=e.key,n=this.keyList.indexOf(t);n>=0&&this.keyList.splice(n,1)}}},{key:"getImage",value:function(e){return this.imageMap[e]||null}},{key:"getImages",value:function(){var e=this.imageMap||{},t=this.keyList||[],n=[];return t.forEach((function(t){var i=e[t]||null;i&&n.push(i)})),n}},{key:"getImageCount",value:function(){return this.keyList.length}},{key:"getImageProperties",value:function(e,t){var n=this.imageMap||{},i=this.keyList||[],r=[];return i.forEach((function(i){var a=n[i];if(e&&a)if("string"==typeof e)a&&a[e]&&r.push(a[e]||t);else if("object"===_()(e)){var o={};for(var s in e)e.hasOwnProperty(s)&&(o[s]=a[e[s]]||t);o&&r.push(o)}})),r}},{key:"encodeImage",value:function(e){e=e||{};var t=this;return new Promise((function(n,i){if(e.status===J.LOADING&&e.url){e.status=J.ENCODING,ee(t.context,t.callbackMap.onEncode,e);var r=new Image,a=e.url,o=function(t,i,r){e.base64=t.replace(/%0A/gi,""),e.width=i,e.height=r,e.orientation=i>r?K.HORIZONTAL:K.VERTICAL,e.status=J.ENCODED,n(e)};r.onload=function(n){0!==a.indexOf("data:image/")||a.length>1024*t.imageLimitSize?t.imageUtil.compressImage(e,o):o(a,r.width,r.height)},r.src=a}else i()}))}},{key:"uploadImage",value:function(e,t){var n=this,i=this;return e=e||{},new Promise((function(r,a){if(t&&e&&e.status===J.ENCODED&&e.base64){e.status=J.UPLOADING,ee(i.context,i.callbackMap.onUpload,e);var o=function(t){e.status=J.UPLOADED,t=t||{},e.webURL=t.url,e.width=t.width,e.height=t.height,r(e)},s=function(e){a(e)},c=n.fileDomain+n.uploadAPI,l={upload_sign:t,image:e.base64};n.useXHR?function(e,t,n,i){var r={method:e,body:null==n?null:JSON.stringify(n),headers:{"Content-Type":null==n?"application/x-www-form-urlencoded;charset=UTF-8":"application/json;charset=UTF-8"},credentials:"include"};r.headers.AccessToken=localStorage.getItem("AccessToken")||"";var a=new XMLHttpRequest;a.open(r.method,t,!0),a.withCredentials=!0;var o=r.headers||{};for(var s in o)a.setRequestHeader(s,o[s]);return a.onerror=i.onUploadError,a.upload.addEventListener("progress",i.onUploadProgress),a.ontimeout=i.onUploadTimeout,a.send(r.body),new Promise((function(e,t){a.onload=function(){var n=null;try{n=JSON.parse(a.responseText)}catch(e){n={}}if(n&&n.error_code)return t({errorCode:n.error_code,errorMessage:n.error_message});e(n)},a.onerror=function(e){t(e)}}))}("POST",c,l,{onUploadProgress:function(t){i.callbackMap.onUploadProgress&&i.callbackMap.onUploadProgress(e.url,t)}}).then(o,s):n.axiosHttp.post(c,l).then(o,s)}else a()}))}},{key:"process",value:function(e){var t=this,n=t.encodeImage(e),i=t.signatureModule.getSign(),r=Promise.all([i,n]).then((function(n){var i=((n=n||[])[0]||{}).signature;return t.uploadImage(n[1]||e,i).then((function(e){ee(t.context,t.callbackMap.onSuccess,e)}),(function(n){ee(t.context,t.callbackMap.onFail,e,n)}))}),(function(){ee(t.context,t.callbackMap.onFail,e)}));return t.taskMap[e.key]=r,r}},{key:"isAllImageReady",value:function(){for(var e=this.keyList||[],t=0,n=e.length;t<n;t++){var i=this.imageMap[e[t]];if(i&&(i.status!==J.UPLOADED||!i.webURL))return!1}return!0}},{key:"waitForAll",value:function(e){var t=[],n=this;this.keyList.forEach((function(e){n.taskMap[e]&&t.push(n.taskMap[e])})),Promise.all(t).then((function(){"function"==typeof e&&e(!0)}),(function(){"function"==typeof e&&e(!1)})).catch((function(t){"function"==typeof e&&e(!1)}))}}]),e}(),ne=n("mG/U"),ie=n("MyPv"),re=n("17x9"),ae=n.n(re);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}n("k0Ia");var se="请选择jpeg、png格式的图片",ce="请检查网络，稍候重试",le="图片上传失败",ue={},fe=function(e){d()(n,e);var t=oe(n);function n(e){var i;return o()(this,n),(i=t.call(this,e)).state=i.state||{},i.state.imageInfoList=Array.isArray(e.imageInfoList)?e.imageInfoList:[],i.state.uploadProgressMap={},i.state.showSelector=!1,i.core=null,i.maximum=parseInt(e.maximum||5,10),i.imageSelectorOption=i.props.imageSelectorOption||"",i.imageTargetSize=e.imageTargetSize||300,i.imageLimitSize=e.imageLimitSize||null,i.bucketTag=e.bucketTag||null,i.fileDomain=e.fileDomain||null,i.disabled=!1,i.onInputChange=null,i.axiosHttp=e.axiosHttp,i}return c()(n,[{key:"initImageInfoList",value:function(){var e=[],t={},n=this.state.imageInfoList;return n.forEach((function(n,i){var r="img-".concat(i+1);e.push(r),n.key=r,t[r]=n})),{keyList:e,imageMap:t,seed:n.length+1,useXHR:!!this.props.enableUploadProgress,axiosHttp:this.axiosHttp}}},{key:"componentWillMount",value:function(){if(u()(g()(n.prototype),"componentWillMount",this).call(this),this.isClientEnv){var e=this.platform,t=e.isNativePlatform,i=e.isWeChatMiniProgram,r=e.version;this.isNativePlatform=t,this.isWeChatMiniProgram=i&&window.wx,this.isPhotoDisabled=this.isNativePlatform&&this.platform.statisfy(["1.2.6","1.2.7","1.2.8"],"","contains");var a=r;this.isNativePlatform&&a.length>0&&Object(I.compareVersion)(a,"1.1.2")>0&&(this.canSelectInNative=!0);var o=this.initImageInfoList();this.core=new te(o)}}},{key:"componentDidMount",value:function(){u()(g()(n.prototype),"componentDidMount",this).call(this),this.core.load({bucketTag:this.bucketTag,fileDomain:this.fileDomain,context:this,callbackMap:{onLoad:this.onImageLoad,onEncode:this.onImageEncode,onUpload:this.onImageUpload,onUploadProgress:this.onUploadProgress.bind(this),onSuccess:this.onUploadSuccess,onFail:this.onUploadFail},fileHttpsTester:this.props.fileHttps,useXHR:this.props.enableUploadProgress}),this.resetInput()}},{key:"render",value:function(){var e=this,t=this.state.imageInfoList,n=void 0===t?[]:t,i=this.maximum,r=n.length>=i?{display:"none"}:{};return S.a.createElement("div",{id:this.viewID,className:"image-uploader-module"},this.renderCubes(n),S.a.createElement("div",{id:"".concat(this.viewID,"-selector"),onClick:function(t){e.onSelectImage()},className:"ium-selector ium-cube ium-cube-last-in-line",style:r},S.a.createElement("div",{id:"".concat(this.viewID,"-indicator"),className:"ium-indicator"},S.a.createElement("div",{className:"ium-indicator-icon icon icon-evaluation-camera"}),0===n.length&&S.a.createElement("div",{className:"ium-indicator-text"},this.props.indicatorText?this.props.indicatorText:"上传图片"),n.length>0&&S.a.createElement("div",{className:"ium-indicator-text"},n.length,S.a.createElement("i",null,"/"),i)),!this.isNativePlatform&&!this.isWeChatMiniProgram&&S.a.createElement("input",{id:"".concat(this.viewID,"-input"),accept:"image/*",type:"file"})),this.renderImageSelector(i-n.length))}},{key:"renderCubes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.state.uploadProgressMap,i=this.props.enableUploadProgress;return t.map((function(t,r){return t=t||{},S.a.createElement("div",{key:r,className:"ium-image-block ium-cube",onClick:function(){e.viewImageList(t)}},!!t.url&&e.renderImgCube(t),!!(i&&t.status<5)&&S.a.createElement("div",{className:"ium-progress-block"},S.a.createElement("div",{style:{width:"".concat(n[t.url],"%")}})),!i&&5!==t.status&&S.a.createElement("div",{className:"ium-tip-block"},"上传中"),S.a.createElement("div",{className:"ium-delete icon icon-close",onClick:function(n){e.deleteInfo(t,n)}}))}))}},{key:"renderImgCube",value:function(e){var t=this.getRotationDegree(e.exifOrientation);return this.platform.platform===I.PLATFORM.PddAndroid||this.isWeChatMiniProgram?S.a.createElement("img",{src:e.url,style:{"-webkit-transform":"rotate(".concat(t,"deg)"),transform:"rotate(".concat(t,"deg)")}}):S.a.createElement("div",{className:"image-box",style:{backgroundImage:"url(".concat(e.url,")"),backgroundSize:"cover",backgroundPosition:"center","-webkit-transform":"rotate(".concat(t,"deg)"),transform:"rotate(".concat(t,"deg)")}})}},{key:"onSelectImage",value:function(){this.isWeChatMiniProgram?this.selectImageInWxMiniProgram():this.onSelectNativeImage()}},{key:"onSelectNativeImage",value:function(){this.disabled||(this.isPhotoDisabled?alert("请升级软件"):this.selectImageInNative())}},{key:"deleteInfo",value:function(e,t){(t=t||event)&&t.preventDefault(),t&&t.stopPropagation(),this.disabled||this.removeImage(e)}},{key:"viewImageList",value:function(e,t){if((t=t||event)&&t.preventDefault(),t&&t.stopPropagation(),!this.disabled){var n=this.getImageWebURLs()||[];if(n.length>0){var i=(e=e||{}).webURL;i&&R(i||n[0],n,{ViewNotWechatInteraface:this.isNativePlatform})}}}},{key:"getImages",value:function(){return this.core.getImages()}},{key:"getImageCount",value:function(){return this.core.keyList.length}},{key:"getImageWebURLs",value:function(){return this.core.getImageProperties("webURL","")}},{key:"getImageWebInfo",value:function(){return this.core.getImageProperties({url:"webURL",height:"height",width:"width"})}},{key:"isAllImageReady",value:function(){return this.core.isAllImageReady()}},{key:"waitForAll",value:function(e){this.core.waitForAll(e)}},{key:"resetInput",value:function(){var e=this,t=document.getElementById("".concat(this.viewID,"-input"));t&&(t.outerHTML=t.outerHTML.replace(/(value=\").+\"/i,'$1"'),t=document.getElementById("".concat(this.viewID,"-input")),this.isNativePlatform||(this.onInputChange&&(t.removeEventListener("change",this.onInputChange),this.onInputChange=null),this.onInputChange=function(){var n=r()(y.a.mark((function n(i){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.disabled){n.next=2;break}return n.abrupt("return");case 2:if(t.files&&t.files[0]){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,e.core.loadImageByFile(t.files[0]);case 6:(r=n.sent)?(e.core.process(r),e.resetInput()):Object(ie.info)(se);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),t.addEventListener("change",this.onInputChange)))}},{key:"onImageLoad",value:function(e){ue[e.url]?ue[e.url]=void 0:this.setState({imageInfoList:this.state.imageInfoList.concat([e])})}},{key:"onImageEncode",value:function(e){}},{key:"onImageUpload",value:function(e){}},{key:"onUploadSuccess",value:function(e){this.updateImage(e),"function"==typeof this.props.onSuccess&&this.props.onSuccess(e)}},{key:"onUploadFail",value:function(e,t){var n=this,i="";i=!(t=t||{}).errorCode||t instanceof ProgressEvent?ce:Object(ne.getMsgFromCode)(t.errorCode)||le,Object(ie.info)(i),ue[e.url]=!0,setTimeout((function(){n.removeImage(e)}),200)}},{key:"removeImage",value:function(e){for(var t=this,n=this.state.imageInfoList||[],i=0,r=n.length;i<r;i++)if(n[i].key===e.key)return n.splice(i,1),void this.setState({imageInfoList:n},(function(){t.core.remove(e)}))}},{key:"updateImage",value:function(e){for(var t=this.state.imageInfoList||[],n=0,i=t.length;n<i;n++)if(t[n].key===e.key)return t[n].status=e.status,t[n].webURL=e.webURL,t[n].exifOrientation=e.exifOrientation,void this.setState({imageInfoList:t})}},{key:"disable",value:function(){this.disable=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"renderImageSelector",value:function(e){var t=this;if(this.canSelectInNative){var n=this.core.nativeReceiver;return S.a.createElement(x.a,{viewID:"".concat(this.viewID,"-native-selector"),viewCtx:this.viewCtx,option:this.imageSelectorOption,show:this.state.showSelector,maxImageCount:e,onSelected:function(e){return n.onSelected(e)},onSelectStart:function(){n.onSelectStart()},onSelectCancel:function(){n.onSelectCancel()},onClose:function(){t.setState({showSelector:!1})}})}return!1}},{key:"selectImageInNative",value:function(){this.setState({showSelector:!0})}},{key:"onWxAppUploadFail",value:function(e){}},{key:"selectImageInWxMiniProgram",value:function(){var e=this,t=this.state.imageInfoList,n=void 0===t?[]:t,i=this.core.nativeReceiver;window.wx&&window.wx.chooseImage({count:this.maximum-n.length,success:function(t){(t.localIds||[]).reduce((function(t,n){return t.then((function(){return i.onSelectStart(),e.getWxMiniProgramImageData(n).then((function(e){return i.onSelected(e)})).catch((function(t){i.onSelectCancel(),e.onWxAppUploadFail(t)}))}))}),Promise.resolve())},fail:function(t){e.onWxAppUploadFail(t)}})}},{key:"getWxMiniProgramImageData",value:function(e){return new Promise((function(t,n){window.wx&&window.wx.getLocalImgData({localId:e,success:function(e){var n=e.localData;/^\s*data:image/.test(n)||(n="data:image/jpeg;base64,".concat(n)),n=n.replace("image/jpg","image/jpeg"),t(n)},fail:function(e){n(e)}})}))}},{key:"getRotationDegree",value:function(e){var t=0;switch(e){case 6:t=90;break;case 8:t=-90;break;case 3:t=180}return t}},{key:"onUploadProgress",value:function(e,t){var n=this.state.uploadProgressMap;n[e]=100*t.loaded/t.total,this.setState({uploadProgressMap:n})}}]),n}(w.a);fe.propTypes={axiosHttp:ae.a.func.isRequired};t.a=fe},xZgz:function(e,t,n){"use strict";var i=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=w,t.findNativeHandler=I,t.default=void 0;var r=i(n("G2ut")),a=i(n("PTHm")),o=i(n("MOn9")),s=i(n("NRM5")),c=i(n("VJ99")),l=i(n("hR4y")),u=i(n("jiea")),f=i(n("q1tI")),d=i(n("17x9")),p=(i(n("iPTW")),n("KJF0"));function h(e,t,n,i){return e.addEventListener(t,n,i),{remove:function(){e.removeEventListener(t,n,i)}}}var m={direction:"ltr",display:"flex",willChange:"transform"},g={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},v={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function y(e,t){var n=t.duration,i=t.easeFunction,r=t.delay;return"".concat(e," ").concat(n," ").concat(i," ").concat(r)}function b(e,t){var n=v.rotationMatrix[t];return{pageX:n.x[0]*e.pageX+n.x[1]*e.pageY,pageY:n.y[0]*e.pageX+n.y[1]*e.pageY}}function S(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function w(e,t){for(var n=[];e&&e!==t&&!e.hasAttribute("data-swipeable");){var i=window.getComputedStyle(e);"absolute"===i.getPropertyValue("position")||"hidden"===i.getPropertyValue("overflow-x")?n=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return n}var x=null;function I(e){var t=e.domTreeShapes,n=e.pageX,i=e.startX,r=e.axis;return t.some((function(e){var t=n>=i;"x"!==r&&"y"!==r||(t=!t);var a=e[v.scrollPosition[r]],o=a>0,s=a+e[v.clientLength[r]]<e[v.scrollLength[r]];return!!(t&&s||!t&&o)&&(x=e.element,!0)}))}var A=function(e){function t(e){var n;return(0,o.default)(this,t),(n=(0,c.default)(this,(0,l.default)(t).call(this,e))).rootNode=null,n.containerNode=null,n.ignoreNextScrollEvents=!1,n.viewLength=0,n.startX=0,n.lastX=0,n.vx=0,n.startY=0,n.isSwiping=void 0,n.started=!1,n.startIndex=0,n.transitionListener=null,n.touchMoveListener=null,n.activeSlide=null,n.indexCurrent=null,n.firstRenderTimeout=null,n.setRootNode=function(e){n.rootNode=e},n.setContainerNode=function(e){n.containerNode=e},n.setActiveSlide=function(e){n.activeSlide=e,n.updateHeight()},n.handleSwipeStart=function(e){var t=n.props.axis,i=b(e.touches[0],t);n.viewLength=n.rootNode.getBoundingClientRect()[v.length[t]],n.startX=i.pageX,n.lastX=i.pageX,n.vx=0,n.startY=i.pageY,n.isSwiping=void 0,n.started=!0;var r=window.getComputedStyle(n.containerNode),a=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("transform");if(a&&"none"!==a){var o=a.split("(")[1].split(")")[0].split(","),s=window.getComputedStyle(n.rootNode),c=b({pageX:parseInt(o[4],10),pageY:parseInt(o[5],10)},t);n.startIndex=-c.pageX/(n.viewLength-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10))||0}},n.handleSwipeMove=function(e){if(n.started){if(null===x||x===n.rootNode){var t=n.props,i=t.axis,r=t.children,a=t.ignoreNativeScroll,o=t.onSwitching,s=t.resistance,c=b(e.touches[0],i);if(void 0===n.isSwiping){var l=Math.abs(c.pageX-n.startX),u=Math.abs(c.pageY-n.startY),d=l>u&&l>p.constant.UNCERTAINTY_THRESHOLD;if(!s&&("y"===i||"y-reverse"===i)&&(0===n.indexCurrent&&n.startX<c.pageX||n.indexCurrent===f.default.Children.count(n.props.children)-1&&n.startX>c.pageX))return void(n.isSwiping=!1);if(l>u&&e.preventDefault(),!0===d||u>p.constant.UNCERTAINTY_THRESHOLD)return n.isSwiping=d,void(n.startX=c.pageX)}if(!0===n.isSwiping){e.preventDefault(),n.vx=.5*n.vx+.5*(c.pageX-n.lastX),n.lastX=c.pageX;var h=(0,p.computeIndex)({children:r,resistance:s,pageX:c.pageX,startIndex:n.startIndex,startX:n.startX,viewLength:n.viewLength}),m=h.index,g=h.startX;if(null===x&&!a)if(I({domTreeShapes:w(e.target,n.rootNode),startX:n.startX,pageX:c.pageX,axis:i}))return;g?n.startX=g:null===x&&(x=n.rootNode),n.setIndexCurrent(m);var v=function(){o&&o(m,"move")};!n.state.displaySameSlide&&n.state.isDragging||n.setState({displaySameSlide:!1,isDragging:!0},v),v()}}}else n.handleTouchStart(e)},n.handleSwipeEnd=function(){if(x=null,n.started&&(n.started=!1,!0===n.isSwiping)){var e,t=n.state.indexLatest,i=n.indexCurrent,r=t-i;e=Math.abs(n.vx)>n.props.threshold?n.vx>0?Math.floor(i):Math.ceil(i):Math.abs(r)>n.props.hysteresis?r>0?Math.floor(i):Math.ceil(i):t;var a=f.default.Children.count(n.props.children)-1;e<0?e=0:e>a&&(e=a),n.setIndexCurrent(e),n.setState({indexLatest:e,isDragging:!1},(function(){n.props.onSwitching&&n.props.onSwitching(e,"end"),n.props.onChangeIndex&&e!==t&&n.props.onChangeIndex(e,t,{reason:"swipe"}),i===t&&n.handleTransitionEnd()}))}},n.handleTouchStart=function(e){n.props.onTouchStart&&n.props.onTouchStart(e),n.handleSwipeStart(e)},n.handleTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),n.handleSwipeEnd(e)},n.handleMouseDown=function(e){n.props.onMouseDown&&n.props.onMouseDown(e),e.persist(),n.handleSwipeStart(S(e))},n.handleMouseUp=function(e){n.props.onMouseUp&&n.props.onMouseUp(e),n.handleSwipeEnd(S(e))},n.handleMouseLeave=function(e){n.props.onMouseLeave&&n.props.onMouseLeave(e),n.started&&n.handleSwipeEnd(S(e))},n.handleMouseMove=function(e){n.props.onMouseMove&&n.props.onMouseMove(e),n.started&&n.handleSwipeMove(S(e))},n.handleScroll=function(e){if(n.props.onScroll&&n.props.onScroll(e),e.target===n.rootNode)if(n.ignoreNextScrollEvents)n.ignoreNextScrollEvents=!1;else{var t=n.state.indexLatest,i=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;n.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,n.props.onChangeIndex&&i!==t&&n.props.onChangeIndex(i,t,{reason:"focus"})}},n.updateHeight=function(){if(null!==n.activeSlide){var e=n.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&n.state.heightLatest!==e.offsetHeight&&n.setState({heightLatest:e.offsetHeight})}},n.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},n.setIndexCurrent(e.index),n}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){var e=this;return{swipeableViews:{slideUpdateHeight:function(){e.updateHeight()}}}}},{key:"componentDidMount",value:function(){var e=this;this.transitionListener=h(this.containerNode,"transitionend",(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=h(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,p.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,n=v.transform[t](100*e);this.containerNode.style.WebkitTransform=n,this.containerNode.style.transform=n}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,n=this,i=this.props,o=(i.action,i.animateHeight),s=i.animateTransitions,c=i.axis,l=i.children,u=i.containerStyle,d=i.disabled,p=(i.disableLazyLoading,i.enableMouseEvents),h=(i.hysteresis,i.ignoreNativeScroll,i.index,i.onChangeIndex,i.onSwitching,i.onTransitionEnd,i.resistance,i.slideStyle),b=i.slideClassName,S=i.springConfig,w=i.style,x=(i.threshold,(0,a.default)(i,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),I=this.state,A=I.displaySameSlide,E=I.heightLatest,k=I.indexLatest,C=I.isDragging,P=I.renderOnlyActive,O=d?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},L=!d&&p?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},D=(0,r.default)({},g,h);if(C||!s||A)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=y("transform",S),t=y("-webkit-transform",S),0!==E){var M=", ".concat(y("height",S));e+=M,t+=M}var T={height:null,WebkitFlexDirection:v.flexDirection[c],flexDirection:v.flexDirection[c],WebkitTransition:t,transition:e};if(!P){var N=v.transform[c](100*this.indexCurrent);T.WebkitTransform=N,T.transform=N}return o&&(T.height=E),f.default.createElement("div",(0,r.default)({ref:this.setRootNode,style:(0,r.default)({},v.root[c],w)},x,O,L,{onScroll:this.handleScroll}),f.default.createElement("div",{ref:this.setContainerNode,style:(0,r.default)({},T,m,u),className:"react-swipeable-view-container"},f.default.Children.map(l,(function(e,t){if(P&&t!==k)return null;var i,r=!0;return t===k&&(r=!1,o&&(i=n.setActiveSlide,D.overflowY="hidden")),f.default.createElement("div",{ref:i,style:D,className:b,"aria-hidden":r,"data-swipeable":"true"},e)}))))}}]),t}(f.default.Component);A.displayName="ReactSwipableView",A.propTypes={},A.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1},A.childContextTypes={swipeableViews:d.default.shape({slideUpdateHeight:d.default.func})};var E=A;t.default=E}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-live-layer/js/loadable_LiveActivityPop_ComplainDialog_64617978347929b1ba8f.js.map