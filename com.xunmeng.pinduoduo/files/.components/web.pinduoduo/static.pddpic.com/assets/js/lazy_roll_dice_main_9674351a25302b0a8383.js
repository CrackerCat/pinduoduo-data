(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{"Fr1h":function(e,t,a){"use strict";a.r(t);var n,o,i,c,r,l,d,u,s,f,b=a("p5LO"),m=a("1OyB"),O=a("vuIU"),j=a("JX7q"),h=a("Ji7U"),p=a("LK+K"),v=a("rePB"),g=a("q1tI"),y=a.n(g),w=a("TyAF"),E=a("99ak"),D=a("a3ss"),R=a("Y65e"),x=(a("+JCI"),a("2vnA")),T=a("bdvc"),M=a("fCYF"),N=a("PS6B"),_=Object(w.observer)((o=function(e){Object(h.default)(FullScreenPop,e);var t=Object(p.default)(FullScreenPop);function FullScreenPop(){var e;Object(m.default)(this,FullScreenPop);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v.default)(Object(j.default)(e),"timer",void 0),Object(v.default)(Object(j.default)(e),"width",0),Object(v.default)(Object(j.default)(e),"startX",void 0),Object(v.default)(Object(j.default)(e),"startY",void 0),Object(D.a)(Object(j.default)(e),"disX",i,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"disY",c,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"showAnimation",r,Object(j.default)(e)),Object(v.default)(Object(j.default)(e),"onTouchStart",(function(t){t&&(t.stopPropagation&&t.stopPropagation(),e.startX=((t.targetTouches||[])[0]||{}).clientX||0,e.startY=((t.targetTouches||[])[0]||{}).clientY||0,e.showAnimation=!1)})),Object(D.a)(Object(j.default)(e),"onTouchMove",l,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"onTouchEnd",d,Object(j.default)(e)),e}return Object(O.default)(FullScreenPop,[{"key":"componentDidMount","value":function componentDidMount(){this.width=Object(T.m)().width||375}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.timer&&clearTimeout(this.timer)}},{"key":"render","value":function render(){var e=(this.props||{}).showBackIcon,t=void 0===e||e;return y.a.createElement(E.a,{"isShow":!0},y.a.createElement(b.a,{"className":"w-full h-full relative","onTouchStart":this.onTouchStart,"onTouchMove":this.onTouchMove,"onTouchEnd":this.onTouchEnd,"style":this.style},t&&y.a.createElement(M.a,{"bg":Object(N.g)("icon_return_back"),"className":"w-22 h-40 absolute left-32 top-66 z-1 btn_hot_space","onClick":this.props.onLeft}),this.props.children))}},{"key":"style","get":function get(){var e=100*this.disX/this.width;if(e=Math.min(Math.max(0,e),100),!(Math.abs(this.disX/this.disY)<4))return{"transform":"translateX(".concat(e,"%)"),"transition":this.showAnimation?"all 0.3s ease":"none","WebkitTransition":this.showAnimation?"all 0.3s ease":"none"}}}]),FullScreenPop}(g.Component),i=Object(R.a)(o.prototype,"disX",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":null}),c=Object(R.a)(o.prototype,"disY",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":null}),r=Object(R.a)(o.prototype,"showAnimation",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){return!1}}),Object(R.a)(o.prototype,"style",[x.computed],Object.getOwnPropertyDescriptor(o.prototype,"style"),o.prototype),l=Object(R.a)(o.prototype,"onTouchMove",[x.action],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(t){if(t){t.stopPropagation&&t.stopPropagation();var a=((t.targetTouches||[])[0]||{}).clientX||0,n=((t.targetTouches||[])[0]||{}).clientY||0;e.disX=a-e.startX,e.disY=n-e.startY}}}}),d=Object(R.a)(o.prototype,"onTouchEnd",[x.action],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(){if(e.showAnimation=!0,e.disX>=(e.props.distance||e.width/2))return e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.props.onLeft&&e.props.onLeft()}),500),void(e.disX=e.width);e.disX=0,e.disY=0}}}),n=o))||n,k=a("D/iT"),A=a("VTBJ"),C=a("tSAD"),S=a("bmJN"),z=a("q0O3"),P=a("TSYQ"),L=a.n(P),F=a("tbnE"),I=a("8tQc"),B=200,Y=76.65,X=38.94,G=300,W=0,U=140;function diceBlockPosition(e,t){return{"left":Object(S.a)(G+Y*(e-t)),"bottom":Object(S.a)(W+X*(e+t))}}!function(e){e[e.normal=1]="normal",e[e.drawable=2]="drawable",e[e.drawed=3]="drawed"}(f||(f={}));var J,H=(u={},Object(v.default)(u,I.h.missionDiceExchange,{"img":"d_m_1","decs":"饲料兑换"}),Object(v.default)(u,I.h.missionDiceFeed,{"img":"d_m_1","decs":"喂食得"}),Object(v.default)(u,I.h.missionDiceView,{"img":"d_m_2","decs":"浏览得"}),Object(v.default)(u,I.h.missionDiceOrder,{"img":"d_m_3","decs":"拼单得"}),u);!function(e){e[e.FENSE_X=1]="FENSE_X",e[e.FENSE_Y=2]="FENSE_Y",e[e.FENSE_C=3]="FENSE_C",e[e.FENSE_D=4]="FENSE_D",e[e.GRASS=5]="GRASS",e[e.ROAD_X=6]="ROAD_X",e[e.ROAD_Y=7]="ROAD_Y",e[e.LAKE=8]="LAKE",e[e.LOTUS=9]="LOTUS",e[e.TREE=10]="TREE",e[e.LOTUS_T=11]="LOTUS_T",e[e.BUSH=12]="BUSH"}(J||(J={}));var V,q,K,Q,Z,$,ee,te,ae,ne,oe,ie,ce,re,le,de,ue,se,fe,be,me,Oe=(s={},Object(v.default)(s,J.FENSE_X,{"img":Object(N.g)("d_fence_7")}),Object(v.default)(s,J.FENSE_Y,{"img":Object(N.g)("d_fencd_8"),"style":{"marginTop":Object(S.a)(10)}}),Object(v.default)(s,J.FENSE_C,{"img":Object(N.g)("d_fencd_9"),"style":{"marginTop":Object(S.a)(10)}}),Object(v.default)(s,J.FENSE_D,{"img":Object(N.g)("d_fencd_10"),"style":{"marginTop":Object(S.a)(10)}}),Object(v.default)(s,J.LAKE,{"img":Object(N.g)("d_lake"),"zIndex":1,"style":{"width":Object(S.a)(148),"height":Object(S.a)(77),"marginLeft":Object(S.a)(10),"marginTop":Object(S.a)(20),"transform":"scale(4)"}}),Object(v.default)(s,J.LOTUS,{"img":Object(N.g)("d_lotus"),"style":{"width":Object(S.a)(242),"height":Object(S.a)(132)}}),Object(v.default)(s,J.LOTUS_T,{"img":Object(N.g)("d_lotus"),"style":{"width":Object(S.a)(242),"height":Object(S.a)(132),"transform":"rotateY(180deg)"}}),Object(v.default)(s,J.ROAD_X,{"img":Object(N.g)("d_road_1"),"style":{"width":Object(S.a)(146),"height":Object(S.a)(132),"marginTop":Object(S.a)(32)}}),Object(v.default)(s,J.ROAD_Y,{"img":Object(N.g)("d_road_2"),"style":{"width":Object(S.a)(146),"height":Object(S.a)(132),"marginTop":Object(S.a)(32)}}),Object(v.default)(s,J.GRASS,{"img":Object(N.g)("d_grass"),"style":{"marginTop":Object(S.a)(26)}}),Object(v.default)(s,J.TREE,{"img":Object(N.g)("di_tree"),"style":{"width":Object(S.a)(254),"height":Object(S.a)(252),"left":Object(S.a)(-40),"bottom":Object(S.a)(80)}}),Object(v.default)(s,J.BUSH,{"img":Object(N.g)("d_bush"),"style":{"width":Object(S.a)(162),"height":Object(S.a)(92),"transform":"scale(0.84)"}}),s),je=(a("Le81"),Object(w.observer)((q=function(e){Object(h.default)(MapCom,e);var t=Object(p.default)(MapCom);function MapCom(){var e;Object(m.default)(this,MapCom);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v.default)(Object(j.default)(e),"timer",void 0),Object(v.default)(Object(j.default)(e),"disposer",void 0),Object(v.default)(Object(j.default)(e),"startY",void 0),Object(v.default)(Object(j.default)(e),"preStart",0),Object(D.a)(Object(j.default)(e),"onTran",K,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"disY",Q,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"guideJudge",Z,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"endTran",$,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"onTouchStart",ee,Object(j.default)(e)),Object(D.a)(Object(j.default)(e),"onTouchMove",te,Object(j.default)(e)),Object(v.default)(Object(j.default)(e),"moveAnimal",(function(e){if("bottom"!==e.propertyName){var t=k.a.diceValue,a=k.a.showJello;t<0||!a||k.a.cowMoveStart()}})),e}return Object(O.default)(MapCom,[{"key":"componentDidMount","value":function componentDidMount(){var e=this;this.guideJudge(1e3),this.disposer=Object(x.autorun)((function(){k.a.switchNewLevel&&(z.default.showStageChangeAnimation(),e.guideJudge(3500),setTimeout((function(){z.default.hideStageChangeAnimation(2e3),k.a.newLevelInit()}),1e3))}))}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.disposer&&this.disposer(),this.timer&&clearTimeout(this.timer)}},{"key":"render","value":function render(){var e=k.a.cellInfo,t=k.a.currentCell,a=void 0===t?{}:t,n=k.a.sceneryInfo,o=k.a.showJello,i=a.cellNum,c=void 0===i?1:i,r=e.length,l=B/2,d=function diceJudgeDirection(e,t){if(!e)return 0;var a=e||{},n=a.coordinateX,o=void 0===n?0:n,i=a.coordinateY,c=void 0===i?0:i,r=t||{},l=r.coordinateX,d=void 0===l?0:l,u=r.coordinateY,s=void 0===u?0:u;return o===d?c-s:c===s?o-d:0}(e[c-2],a);return y.a.createElement(M.a,{"bg":Object(N.f)("di_bg","jpg"),"className":L()("dice-map-wrap absolute w-full h-full left-0 bottom-0",{"guide":this.onTran}),"onTouchStart":this.onTouchStart,"onTouchMove":this.onTouchMove,"style":this.style,"onTransitionEnd":this.endTran},y.a.createElement(b.a,{"className":"map-wrap absolute w-full h-600"},e.map((function(t,a){var n=t.coordinateX,i=void 0===n?0:n,d=t.coordinateY,u=void 0===d?0:d,s=t.rewardType,f=Object(A.default)(Object(A.default)({},diceBlockPosition(i,u)),{},{"zIndex":l-i-u}),m=a===r-1,O=0===a?function diceFirstBlock(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===(null===(e=t[1])||void 0===e?void 0:e.coordinateX)?"d_block_3":"d_block_2"}(e):m?"dice_block_3":"dice_block";return y.a.createElement(b.a,{"key":i+"-"+u,"className":"block-item absolute","style":f},y.a.createElement(C.a,{"className":"w-146 h-132","src":Object(N.g)(O)}),y.a.createElement(b.a,{"className":L()("block-tip block-r absolute left-24 -top-34 w-100 h-100",{"show":a>c-1,"noshow":o&&a<=c-1}),"style":{"animationDelay":"".concat(a%r,"s")}},!!s&&y.a.createElement(F.a,{"rewardType":s,"className":"w-full h-full"})),m&&y.a.createElement(b.a,{"className":L()("block-tip show",{"noshow":c===r})},y.a.createElement(C.a,{"className":"ab-x bottom-72 w-86 h-114","src":Object(N.g)("b_end")})))})),y.a.createElement(b.a,{"className":L()("absolute mb-84 ml-20",{"animal":o},{"down":1===d},{"jello":o}),"style":Object(A.default)(Object(A.default)({},diceBlockPosition(a.coordinateX,a.coordinateY)),{},{"zIndex":l}),"onTransitionEnd":this.moveAnimal},!o&&y.a.createElement(C.a,{"className":"ab-x -bottom-6 w-90 h-32","src":Object(N.g)("d_cow_s")}),y.a.createElement(C.a,{"className":"w-102 h-140","src":Object(N.f)("cow_s_stand")})),n.map((function(e){var t=e.coordinateX,a=void 0===t?0:t,n=e.coordinateY,o=void 0===n?0:n,i=e.type,c=void 0===i?J.GRASS:i,r=Oe[c]||{},d=r.img,u=r.style,s=void 0===u?{}:u,f=r.zIndex,m=Object(A.default)(Object(A.default)({},diceBlockPosition(a,o)),{},{"zIndex":f||l-a-o});return y.a.createElement(b.a,{"key":a+"-"+o+"-"+c,"className":"block-item absolute","style":m},y.a.createElement(C.a,{"style":s,"src":d,"className":"w-full h-full"}))}))))}},{"key":"style","get":function get(){var e=Object(S.a)(this.disY);return{"transform":"translateY(".concat(e,")")}}}]),MapCom}(g.Component),K=Object(R.a)(q.prototype,"onTran",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){return!1}}),Q=Object(R.a)(q.prototype,"disY",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){return 0}}),Object(R.a)(q.prototype,"style",[x.computed],Object.getOwnPropertyDescriptor(q.prototype,"style"),q.prototype),Z=Object(R.a)(q.prototype,"guideJudge",[x.action],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(t){var a=(k.a.diceInfoTmp||{}).cellInfo,n=void 0===a?k.a.cellInfo:a,o=n.length;if(o){var i=n[o-1]||{},c=i.coordinateX,r=void 0===c?0:c,l=i.coordinateY,d=void 0===l?0:l;r+d>=8?(e.disY=X*(d+r-3),e.timer=setTimeout((function(){e.onTran=!0,e.disY=0}),t)):e.disY=0}}}}),$=Object(R.a)(q.prototype,"endTran",[x.action],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(){e.onTran=!1}}}),ee=Object(R.a)(q.prototype,"onTouchStart",[x.action],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(t){t&&(e.onTran&&(e.onTran=!1),e.preStart=e.disY,e.startY=((t.targetTouches||[])[0]||{}).clientY||0)}}}),te=Object(R.a)(q.prototype,"onTouchMove",[x.action],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(t){if(t){var a=((t.targetTouches||[])[0]||{}).clientY||0,n=e.preStart+a-e.startY;e.disY=Math.min(Math.max(-250,n),300)}}}}),V=q))||V),he=a("brQG"),pe=a("SLG6"),ve=a("3uF5"),ge=a("vHnQ"),ye=a("X8mR"),we=a("TRXh"),Ee=(a("gqhj"),Object(w.observer)(ae=function(e){Object(h.default)(ProduceMsg,e);var t=Object(p.default)(ProduceMsg);function ProduceMsg(){var e;Object(m.default)(this,ProduceMsg);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v.default)(Object(j.default)(e),"onProduce",(function(){var e=k.a.canProduce;k.a.oneDiceLock?we.a.showToast("等牛牛移动完成哦～"):e?k.a.produceFood():we.a.showToast("道具不足")})),Object(v.default)(Object(j.default)(e),"onDone",(function(){we.a.showToast("活动已到期！"),k.a.set("showMaxReward",!1),k.a.toggleDiceCenter(!1)})),e}return Object(O.default)(ProduceMsg,[{"key":"render","value":function render(){var e=k.a.propFuseInfo,t=k.a.props,a=k.a.canProduce,n=k.a.expireTime,o=e||{},i=o.fuseFormula,c=o.rewardAmount,r=o.rewardType,l=void 0===r?101:r,d=pe.a.rewardsConfig[l]||{},u=d.name,s=void 0===u?"":u,f=d.unit,m=void 0===f?"":f;return y.a.createElement(b.a,{"className":"dice-pro-msg relative rounded-16 h-220 bg-fff mx-auto text-white text-center","style":{"zIndex":B}},y.a.createElement(b.a,{"className":"title h-60 w-full text-28 leading-60"},y.a.createElement(he.a,{"className":"ff-m"},"收集道具制作",s," "),y.a.createElement(he.a,{"className":"opacity-60"},"| 活动剩余",y.a.createElement(ve.a,{"countText":"","countDown":ge.a.getLeftTime(n,!0),"outputType":"timeWithUnit","countDownText":"活动已到期","onDone":this.onDone}))),y.a.createElement(b.a,{"className":"fl-y-b px-24"},null==i?void 0:i.map((function(e){var a=e.propAmount,n=void 0===a?10:a,o=e.propType,i=void 0===o?0:o,c=e.propDesc,r=t[i]||0,l=(pe.a.rewardsConfig[i]||{}).popReactImg,d=void 0===l?"":l;return y.a.createElement(b.a,{"key":i},y.a.createElement(b.a,{"className":"prop relative w-100 h-100 rounded-12 mt-16"},y.a.createElement(C.a,{"className":"w-full h-full","src":Object(N.d)(d)}),y.a.createElement(b.a,{"className":"absolute bottom-0 name w-full h-40 text-20 ff-s leading-40"},c)),y.a.createElement(b.a,{"className":"w-100 h-24 relative rounded-12 text-20 ff-s mt-4 leading-24"},y.a.createElement(ye.a,{"width":"".concat(r/n*100,"%"),"bgColor":"#995740","barColor":"linear-gradient(180deg, #FFCD56 0%, #FF7353 97%)"}),y.a.createElement(b.a,{"className":"ab-x top-0"},r,"/",n)))})),y.a.createElement(b.a,{"className":"pt-20"},y.a.createElement(b.a,{"onClick":this.onProduce,"className":L()("bg_btn h-60 w-180 rounded-30 text-28 ff-m leading-60 whitespace-nowrap",{"opacity-50":!a})},"制作",Object(T.f)(c),"克",y.a.createElement(F.a,{"rewardType":l,"size":32})),y.a.createElement(b.a,{"className":"text-20 target mt-8"},"每次可制作",c,m))))}}]),ProduceMsg}(g.Component))||ae),De=a("JqEv"),Re=a("vbVB"),xe=a("jxKE"),Te=(a("nyBW"),Object(w.observer)(ne=function(e){Object(h.default)(PointProgress,e);var t=Object(p.default)(PointProgress);function PointProgress(){var e;Object(m.default)(this,PointProgress);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v.default)(Object(j.default)(e),"getInnerWidth",(function(e){for(var t=0,a=0,n=k.a.pointsReward,o=void 0===n?[]:n,i=o.length,c=0;c<i;c++){var r=o[c],l=r.targetStep,d=void 0===l?0:l;if(r.status===f.normal){a=Math.max(c-3,0),t=U*(c-(d-e)/d);break}c===i-1&&(t=U*(i-1)+50)}return{"innnerWidth":t,"currenntIndex":a}})),Object(v.default)(Object(j.default)(e),"handleScroll",(function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()})),Object(v.default)(Object(j.default)(e),"drawReward",(function(e,t){e===f.drawable&&(k.a.oneDiceLock?we.a.showToast("等牛牛移动完成哦～"):z.default.isbagExceedsLimit(xe.j.ROLL_DICE)||k.a.diceGainReward(t))})),e}return Object(O.default)(PointProgress,[{"key":"render","value":function render(){var e=this,t=k.a.pointsReward,a=void 0===t?[]:t,n=k.a.hasPassStep,o=a.length,i=U*(o-1)+50,c=this.getInnerWidth(n),r=c.innnerWidth,l=c.currenntIndex;return o?y.a.createElement(b.a,{"className":"dice-points-wrap ab-x rounded-20 fl-y","style":{"zIndex":B}},y.a.createElement(b.a,{"className":"w-172"},y.a.createElement(b.a,{"className":"pass h-44 rounded-22 leading-44 px-12 ff-s text-20 text-#99431F mx-auto"},"已前进：",n,"步"),y.a.createElement(b.a,{"className":"text-20 text-#99431F mt-8"},"牛牛前进得饲料")),y.a.createElement(b.a,{"className":"pro-wrap relative h-136 rounded-16 overflow-hidden"},y.a.createElement(De.a,{"className":"relative h-136","scrollX":!0,"scrollLeft":U*l,"onTouchMove":this.handleScroll},y.a.createElement(b.a,{"className":"progressBar h-10 w-full ab-y left-20","style":{"width":Object(S.a)(i)}}),y.a.createElement(b.a,{"className":"barInner ab-y h-10 left-20","style":{"width":Object(S.a)(r)}}),a.map((function(t,a){var n=t.targetStep,o=t.rewardType,i=void 0===o?100:o,c=t.rewardAmount,r=t.status;return y.a.createElement(b.a,{"key":n,"className":"fl-xy flex-col justify-between absolute h-full text-24 ff-m text-#99431F w-100 pt-8 pb-4","style":{"left":Object(S.a)(U*a+20)}},y.a.createElement(b.a,{"className":"relative h-60","onClick":e.drawReward.bind(e,r,a)},y.a.createElement(F.a,{"rewardType":i,"size":64}),y.a.createElement(b.a,{"className":"ab-x bottom-0"},c,"g"),r===f.drawable&&y.a.createElement(Re.a,{"className":"tip"},"领")),y.a.createElement(C.a,{"className":"absolute top-70 w-38 h-38","src":Object(N.g)(r===f.normal?"d_point_3":"d_point_1")}),y.a.createElement(b.a,{"className":"whitespace-nowrap"},n,"步"))}))),y.a.createElement(b.a,{"className":"blur-box ab-y -right-20"}),y.a.createElement(b.a,{"className":"blur-box ab-y -left-30"}))):null}}]),PointProgress}(g.Component))||ne),Me=a("V6Hk"),Ne=a("o0o1"),_e=a.n(Ne),ke=a("HaE+"),Ae=a("RHh3"),Ce=a("KQm4"),Se=a("ODXe"),ze=a("xuXt"),Pe=a.n(ze),Le={"diceNumberMap":{"default":{"x":0,"y":.5,"z":.5},"1":{"x":0,"y":.5,"z":.5},"2":{"x":3,"y":3,"z":0},"3":{"x":1,"y":1,"z":3},"4":{"x":2,"y":.5,"z":2.5},"5":{"x":1,"y":1,"z":1},"6":{"x":1,"y":1,"z":0}},"rotateDirection":{"1":"z","2":"y","3":"y","4":"z","5":"y","6":"y"},"initialPos":6,"modelName":"touzi","cameraScale":30,"lights":[{"source":[16773862,2],"pos":[-1,-.5,1]},{"source":[16773862,4],"pos":[-.5,1,0]},{"source":[16757683,2],"pos":[1,.5,0]},{"source":[16757683,2],"pos":[.5,-1,1]}],"initialRotate":{"x":-1/3,"y":-.5,"z":0},"pool":[1,2,3,4,5,6],"defaultValue":6},Fe=Math.PI/2,Ie=Object(w.observer)((ie=function(e){Object(h.default)(Dice3D,e);var t=Object(p.default)(Dice3D);function Dice3D(e){var a;return Object(m.default)(this,Dice3D),a=t.call(this,e),Object(v.default)(Object(j.default)(a),"canvasRef",void 0),Object(v.default)(Object(j.default)(a),"currentDice",void 0),Object(v.default)(Object(j.default)(a),"currentCircle",void 0),Object(v.default)(Object(j.default)(a),"targetRotationRef",void 0),Object(D.a)(Object(j.default)(a),"doAnimate",ce,Object(j.default)(a)),Object(v.default)(Object(j.default)(a),"isAnimating",void 0),Object(v.default)(Object(j.default)(a),"rotateDivide",void 0),Object(v.default)(Object(j.default)(a),"cameraScale",void 0),Object(v.default)(Object(j.default)(a),"callBack",void 0),Object(v.default)(Object(j.default)(a),"timer",void 0),Object(v.default)(Object(j.default)(a),"modelName",void 0),Object(v.default)(Object(j.default)(a),"rotationFunc",void 0),Object(v.default)(Object(j.default)(a),"baseCircle",void 0),Object(v.default)(Object(j.default)(a),"baseRotation",void 0),Object(v.default)(Object(j.default)(a),"environmentRotate",void 0),Object(v.default)(Object(j.default)(a),"diceNumberMap",void 0),Object(v.default)(Object(j.default)(a),"lights",void 0),Object(v.default)(Object(j.default)(a),"rotateDirection",void 0),Object(v.default)(Object(j.default)(a),"Scene",void 0),Object(v.default)(Object(j.default)(a),"WebGLRenderer",void 0),Object(v.default)(Object(j.default)(a),"PerspectiveCamera",void 0),Object(v.default)(Object(j.default)(a),"sRGBEncoding",void 0),Object(v.default)(Object(j.default)(a),"DirectionalLight",void 0),Object(v.default)(Object(j.default)(a),"Euler",void 0),Object(v.default)(Object(j.default)(a),"Model",void 0),Object(v.default)(Object(j.default)(a),"GLTFLoader",void 0),Object(v.default)(Object(j.default)(a),"onModuleLoad",void 0),Object(v.default)(Object(j.default)(a),"model",void 0),Object(v.default)(Object(j.default)(a),"scene",void 0),Object(v.default)(Object(j.default)(a),"camera",void 0),Object(v.default)(Object(j.default)(a),"renderer",void 0),Object(v.default)(Object(j.default)(a),"init",(function(){var e=Le,t=e.diceNumberMap,n=e.rotateDirection,o=e.initialPos,i=e.modelName,c=e.cameraScale,r=e.lights,l=e.initialRotate;a.diceNumberMap=t,a.rotateDirection=n,a.environmentRotate=l,a.currentDice=o,a.modelName=i,a.cameraScale=c,a.callBack=void 0,a.lights=r;var d=t[o];a.baseCircle={"x":(d.x+a.environmentRotate.x)/2,"y":(d.y+a.environmentRotate.y)/2,"z":(d.z+a.environmentRotate.z)/2},a.baseRotation={"x":(d.x+a.environmentRotate.x)*Fe,"y":(d.y+a.environmentRotate.y)*Fe,"z":(d.z+a.environmentRotate.z)*Fe},a.currentCircle=a.baseCircle,a.targetRotationRef=a.baseRotation})),Object(v.default)(Object(j.default)(a),"onModuleImport",(function(e){var t=Object(Se.default)(e,2),n=t[0],o=t[1],i=n.WebGLRenderer,c=n.PerspectiveCamera,r=n.Scene,l=n.sRGBEncoding,d=n.DirectionalLight,u=n.Euler;a.GLTFLoader=o.default,a.Scene=r,a.WebGLRenderer=i,a.PerspectiveCamera=c,a.sRGBEncoding=l,a.DirectionalLight=d,a.Euler=u,a.doPrepare()})),Object(v.default)(Object(j.default)(a),"doPrepare",(function(){a.createRenderer(),a.scene=new a.Scene,a.createCamera(),a.addLight(),a.loadDice()})),Object(v.default)(Object(j.default)(a),"createCamera",(function(){var e=new a.PerspectiveCamera(a.cameraScale,1,.1,1e3);e.position.z=30,a.camera=e})),Object(v.default)(Object(j.default)(a),"loadDice",(function(){return new Promise((function(e){(new a.GLTFLoader).load(Object(N.c)(a.modelName,"glb"),(function(t){a.onLoad(t),e({})}),(function(){}),(function(){a.props.doDwnGrade()}))}))})),Object(v.default)(Object(j.default)(a),"createRenderer",(function(){var e=new a.WebGLRenderer({"antialias":!0,"alpha":!0,"canvas":a.canvasRef});e.setClearColor(16777215,0),e.setPixelRatio(window.devicePixelRatio),e.setSize(a.canvasRef.clientWidth,a.canvasRef.clientHeight),e.outputEncoding=a.sRGBEncoding,e.physicallyCorrectLights=!0,a.renderer=e})),Object(v.default)(Object(j.default)(a),"addLight",(function(){a.lights.map((function(e){var t,n=e.source,o=e.pos,i=Object(Ae.default)(a.DirectionalLight,Object(Ce.default)(n));(t=i.position).set.apply(t,Object(Ce.default)(o)),a.scene.add(i)}))})),Object(v.default)(Object(j.default)(a),"onLoad",(function(e){var t=new a.Euler(a.targetRotationRef.x,a.targetRotationRef.y,a.targetRotationRef.z);a.model&&(a.scene.children=[]),a.model=e.scene,a.model.position.set(0,0,-2),a.model.rotation.setFromVector3(t.toVector3()),a.scene.add(a.model),a.renderFunc()})),Object(v.default)(Object(j.default)(a),"startAnimate",(function(){a.timer=requestAnimationFrame(a.startAnimate),a.renderFunc()})),Object(v.default)(Object(j.default)(a),"stopAnimate",(function(){window.cancelAnimationFrame(a.timer)})),Object(v.default)(Object(j.default)(a),"renderFunc",(function(){if(a.model){var e=2/Math.PI,t=a.rotationFunc,n=t.x,o=t.y,i=t.z,c=!1,r=(a.targetRotationRef.x-a.model.rotation.x)*(1/n),l=(a.targetRotationRef.y-a.model.rotation.y)*(1/o),d=(a.targetRotationRef.z-a.model.rotation.z)*(1/i);Math.abs(r)>e&&(r=r>0?e:-e),Math.abs(l)>e&&(l=l>0?e:-e),Math.abs(d)>e&&(d=d>0?e:-e),Math.abs(r)>=.001&&(a.model.rotation.x+=r,c=!0),Math.abs(l)>=.001&&(a.model.rotation.y+=l,c=!0),Math.abs(d)>=.001&&(a.model.rotation.z+=d,c=!0),c||(a.stopAnimate(),a.callBack&&(a.callBack({"number":a.currentDice}),a.callBack=void 0))}a.renderer&&a.renderer.render(a.scene,a.camera)})),Object(v.default)(Object(j.default)(a),"onRef",(function(e){a.canvasRef=e})),Object(v.default)(Object(j.default)(a),"reset",(function(){a.model.rotation.x=a.baseRotation.x,a.model.rotation.y=a.baseRotation.y,a.model.rotation.z=a.baseRotation.z,a.currentCircle=a.baseCircle,a.targetRotationRef=a.baseRotation})),Object(v.default)(Object(j.default)(a),"doDice",(function(e){var t=e.point,n=e.callBack;!function startDice(){a.getPos(t),a.targetRotationRef={"x":Fe*a.currentCircle.x,"y":Fe*a.currentCircle.y,"z":Fe*a.currentCircle.z},a.rotationFunc={"x":a.rotateDivide,"y":a.rotateDivide,"z":3},a.startAnimate(),a.callBack=n}()})),Object(v.default)(Object(j.default)(a),"doLinearRotate",(function(e){var t=a.rotateDirection[a.currentDice];a.targetRotationRef[t]=a.targetRotationRef[t]+(e||0),a.rotationFunc={"x":a.rotateDivide,"y":a.rotateDivide,"z":a.rotateDivide},a.startAnimate()})),Object(v.default)(Object(j.default)(a),"getPos",(function(e){var t=Math.min(6,e),n=a.currentCircle,o=n.x,i=n.y,c=n.z,r=a.diceNumberMap[t]||a.diceNumberMap.default,l=r.x,d=void 0===l?0:l,u=r.y,s=void 0===u?0:u,f=r.z,b=void 0===f?0:f,m=d+a.environmentRotate.x+(4-o%4)+4*(2+Math.floor(3*Math.random())),O=s+a.environmentRotate.y+(4-i%4)+4*(2+Math.floor(3*Math.random())),j=b+a.environmentRotate.z+(4-c%4)+4;a.currentDice=t,a.currentCircle={"x":a.currentCircle.x+m,"y":a.currentCircle.y+O,"z":a.currentCircle.z+j}})),a.init(),a.onModuleLoad=a.onModuleImport,a}return Object(O.default)(Dice3D,[{"key":"componentDidMount","value":function componentDidMount(){var e=this;this.rotateDivide=30,this.rotationFunc={"x":this.rotateDivide,"y":this.rotateDivide,"z":3},this.props.onRef(this),Promise.all([a.e(3).then(a.bind(null,"Womt")),a.e(3).then(a.t.bind(null,"vS4O",7))]).then(this.onModuleLoad).catch((function(t){e.props.doDwnGrade()}))}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.renderer&&this.renderer.forceContextLoss(),this.renderer&&this.renderer.dispose(),window.cancelAnimationFrame(this.timer),this.onModuleLoad=function(){}}},{"key":"render","value":function render(){return y.a.createElement(b.a,{"className":"relative w-full h-full"},y.a.createElement("canvas",{"ref":this.onRef,"className":L()("absolute w-full h-full left-0 top-0",this.doAnimate&&Pe.a.animate)}))}}]),Dice3D}(g.Component),ce=Object(R.a)(ie.prototype,"doAnimate",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":null}),oe=ie))||oe,Be=a("yvsZ"),Ye=a.n(Be),Xe=Object(w.observer)((le=function(e){Object(h.default)(Dice2D,e);var t=Object(p.default)(Dice2D);function Dice2D(e){var a;return Object(m.default)(this,Dice2D),a=t.call(this,e),Object(v.default)(Object(j.default)(a),"canvasRef",void 0),Object(D.a)(Object(j.default)(a),"currentDice",de,Object(j.default)(a)),Object(D.a)(Object(j.default)(a),"isAnimating",ue,Object(j.default)(a)),Object(D.a)(Object(j.default)(a),"doRotate",se,Object(j.default)(a)),Object(v.default)(Object(j.default)(a),"callBack",void 0),Object(v.default)(Object(j.default)(a),"timer",void 0),Object(v.default)(Object(j.default)(a),"initialPos",void 0),Object(v.default)(Object(j.default)(a),"doDice",(function(e){var t=e.point,n=e.callBack;a.isAnimating=!0,a.currentDice=Math.min(6,t),a.callBack=n,a.timer=setTimeout((function(){a.isAnimating=!1,a.timer=setTimeout((function(){a.callBack&&a.callBack({"number":a.currentDice}),a.callBack=void 0}),1e3)}),2e3)})),a.isAnimating=!1,a.callBack=void 0,a.initialPos=6,a.currentDice=a.initialPos,a}return Object(O.default)(Dice2D,[{"key":"componentDidMount","value":function componentDidMount(){this.props.onRef(this)}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.timer&&clearTimeout(this.timer)}},{"key":"render","value":function render(){return y.a.createElement(b.a,{"className":"relative w-full h-full"},y.a.createElement(C.a,{"className":L()("ab-x",Ye.a.diceImage,Object(v.default)({},Ye.a.rotate,this.doRotate)),"src":this.currentPic}))}},{"key":"currentPic","get":function get(){return this.isAnimating?Object(N.c)("dice_move_pic2","webp"):Object(N.c)("dice_2d_".concat(this.currentDice),"png",!0)}}]),Dice2D}(g.Component),de=Object(R.a)(le.prototype,"currentDice",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":null}),ue=Object(R.a)(le.prototype,"isAnimating",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":null}),se=Object(R.a)(le.prototype,"doRotate",[x.observable],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":null}),Object(R.a)(le.prototype,"currentPic",[x.computed],Object.getOwnPropertyDescriptor(le.prototype,"currentPic"),le.prototype),re=le))||re,Ge=Object(w.observer)(fe=function(e){Object(h.default)(Dice,e);var t=Object(p.default)(Dice);function Dice(){var e;Object(m.default)(this,Dice);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v.default)(Object(j.default)(e),"diceRef",void 0),Object(v.default)(Object(j.default)(e),"dicing",void 0),Object(v.default)(Object(j.default)(e),"state",{"downGrade":!1}),Object(v.default)(Object(j.default)(e),"onMyDiceRef",(function(t){e.diceRef=t})),Object(v.default)(Object(j.default)(e),"doDice",(function(t){var a;e.dicing=!0,e.diceRef&&e.diceRef.doDice({"point":t,"callBack":(a=Object(ke.default)(_e.a.mark((function _callee(){return _e.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:e.myDiceEnd();case 1:case"end":return t.stop()}}),_callee)}))),function callBack(){return a.apply(this,arguments)})})})),Object(v.default)(Object(j.default)(e),"myDiceEnd",(function(){e.dicing=!1,k.a.toggleDicePop()})),Object(v.default)(Object(j.default)(e),"doDwnGrade",(function(){e.setState({"downGrade":!0})})),Object(v.default)(Object(j.default)(e),"onClickMyDice",(function(){var t=k.a.diceAmount,a=k.a.oneDiceLock;t<=0?we.a.showToast("骰子数量不足，快去获取骰子吧！"):a?we.a.showToast("等牛牛移动完成哦～"):(k.a.set("oneDiceLock",!0),k.a.rollDice().then((function(t){t&&e.doDice(t)})))})),e}return Object(O.default)(Dice,[{"key":"componentWillUnmount","value":function componentWillUnmount(){this.diceRef=void 0}},{"key":"render","value":function render(){var e=this.state.downGrade,t=k.a.isLowEndDevice,a=k.a.oneDiceLock,n=k.a.diceAmount;return y.a.createElement(b.a,{"className":"ab-x -top-78","onClick":this.onClickMyDice},t||e?y.a.createElement(b.a,{"className":"w-160 h-160 m-20"},y.a.createElement(Xe,{"onRef":this.onMyDiceRef})):y.a.createElement(b.a,{"className":"w-168 h-168"},y.a.createElement(Ie,{"onRef":this.onMyDiceRef,"doDwnGrade":this.doDwnGrade})),!a&&!!n&&y.a.createElement(Me.a,{"style":{"left":Object(S.a)(100)}}))}}]),Dice}(g.Component))||fe,We=a("h5Qt"),Ue=a("6yFI"),Je=a("BdaA"),He=a("oyLW"),Ve=Object(w.observer)(be=function(e){Object(h.default)(RollMission,e);var t=Object(p.default)(RollMission);function RollMission(){var e;Object(m.default)(this,RollMission);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v.default)(Object(j.default)(e),"onClickItem",(function(t){t===I.h.missionDiceExchange?e.onProduce():t===I.h.missionDiceFeed?e.onFeed():e.goOrder()})),Object(v.default)(Object(j.default)(e),"goOrder",(function(){var e=k.a.missionMap,t=e.get(I.h.missionDiceView)||{},a=e.get(I.h.missionDiceOrder)||{};(null==t?void 0:t.unifiedStatus)!==Ue.b.REACH_LIMIT||(null==a?void 0:a.unifiedStatus)!==Ue.b.REACH_LIMIT?Object(We.a)(I.h.missionDiceOrder,(function(){z.default.refreshData(),k.a.queryDiceActivity()})):we.a.showToast("任务已完成，明日再来吧！")})),Object(v.default)(Object(j.default)(e),"onProduce",(function(){var e=k.a.missionMap;if(k.a.oneDiceLock)we.a.showToast("等牛牛移动完成哦～");else{var t=e.get(I.h.missionDiceExchange)||{},a=t.bizExtMap,n=t.unifiedStatus,o=(null==a?void 0:a.costFoodAmount)||100;Je.a.foodAmount<o?we.a.showToast("剩余饲料不足"):n===Ue.b.COMPLETABLE?k.a.exchangeByFood():we.a.showToast("今日兑换已达上限，明天再来吧！")}})),Object(v.default)(Object(j.default)(e),"onFeed",(function(){var e=(k.a.missionMap.get(I.h.missionDiceFeed)||{}).unifiedStatus;if(e===Ue.b.DRAWABLE)k.a.toggleFeedDraw();else{if(e===Ue.b.REACH_LIMIT)return void we.a.showToast("任务已完成");k.a.toggleDiceCenter(!1),k.a.closeAllInit(),z.default.feedStore.feed()}})),e}return Object(O.default)(RollMission,[{"key":"componentDidMount","value":function componentDidMount(){(pe.a.originAllMissionMap.get(I.h.missionDiceFeed)||{}).unifiedStatus===Ue.b.DRAWABLE&&k.a.toggleFeedDraw()}},{"key":"renderMission","value":function renderMission(){var e=this,t=k.a.missionList,a=void 0===t?[]:t;return y.a.createElement(b.a,{"className":"relative fl-x justify-around px-20 mt-50"},a.map((function(t,a){var n=t||{},o=n.missionType,i=n.rewardResult,c=void 0===i?[]:i,r=n.bizExtMap,l=n.unifiedStatus;if(o){var d=H[o]||{},u=d.img,s=d.decs,f=r||{},m=f.costFoodAmount,O=f.targetFeedCount,j=void 0===O?10:O,h=f.hasFeedCount,p=void 0===h?0:h,v=l===Ue.b.REACH_LIMIT?"已完成":"";if(o===I.h.missionDiceOrder){var g=c[0]||{};g.maxRewardAmount!==g.minRewardAmount&&(s="拼单最高得")}return y.a.createElement(M.a,{"bg":Object(N.g)(u),"className":L()("relative w-212 h-208",{"mt-80":1===a}),"onClick":e.onClickItem.bind(e,o),"key":o},o===I.h.missionDiceExchange&&y.a.createElement(b.a,{"className":"ab-xy mt-20 text-32 ff-s text-#99431F"},m,"g"),o===I.h.missionDiceFeed&&l!==Ue.b.REACH_LIMIT&&y.a.createElement(Re.a,{"defaultCss":"text-24 rounded-20 top-24 -right-10 px-10 py-2 ff-m"},l===Ue.b.DRAWABLE?"可领取":"还差".concat(j-p,"次")),y.a.createElement(b.a,{"className":"mt-decs ab-x -bottom-16 h-56 p-4 rounded-28"},y.a.createElement(b.a,{"className":"decs-inner h-48 rounded-24 ff-m text-28 px-20 text-white leading-48 whitespace-nowrap"},v||y.a.createElement(He.a,{"preWords":s,"rewardResult":c,"size":38}))))}})))}},{"key":"render","value":function render(){var e=k.a.diceAmount;return y.a.createElement(M.a,{"bg":Object(N.g)("d_op"),"className":"absolute bottom-0 w-full h-354","style":{"zIndex":B}},this.renderMission(),y.a.createElement(Ge,null),y.a.createElement(b.a,{"className":"ab-x top-110 fl-y text-30 text-#99431F ff-s"},y.a.createElement(b.a,{"className":"dot"}),y.a.createElement(b.a,{"className":"mx-10"},"剩余",e,"次"),y.a.createElement(b.a,{"className":"dot"})))}}]),RollMission}(g.Component))||be,qe=a("MKeS");a("QLv4");a.d(t,"default",(function(){return Qe}));var Ke=Object(qe.a)((function(){return a.e(115).then(a.bind(null,"hJmG"))})),Qe=Object(w.observer)(me=function(e){Object(h.default)(RollDice,e);var t=Object(p.default)(RollDice);function RollDice(){var e;Object(m.default)(this,RollDice);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(v.default)(Object(j.default)(e),"onClose",(function(){k.a.toggleDiceCenter(!1),k.a.closeAllInit()})),Object(v.default)(Object(j.default)(e),"openRule",(function(){k.a.toggleRule()})),e}return Object(O.default)(RollDice,[{"key":"render","value":function render(){var e=pe.a.isIphoneX;return y.a.createElement(_,{"onLeft":this.onClose},y.a.createElement(b.a,{"className":L()("roll-dice-wrap relative w-full h-full overflow-hidden",{"iphoneX":e})},y.a.createElement(b.a,{"className":"content relative h-full"},y.a.createElement(je,null),y.a.createElement(C.a,{"className":"h-100 block mx-auto","src":Object(N.f)("dice_title")}),y.a.createElement(b.a,{"className":"rule absolute -top-20 right-30 w-64 h-64 rounded-32 text-24 ff-m leading-60 mb-40","onClick":this.openRule},"规则"),y.a.createElement(Ee,null),y.a.createElement(Te,null),y.a.createElement(Ve,null)),e&&y.a.createElement(b.a,{"className":"ipx-bottom w-full bottom-0 absolute"}),y.a.createElement(Ke,null)))}}]),RollDice}(g.Component))||me},"Le81":function(e,t,a){},"QLv4":function(e,t,a){},"RHh3":function(e,t,a){e.exports=a("YZFv")(277)},"gqhj":function(e,t,a){},"nyBW":function(e,t,a){},"xuXt":function(e,t,a){e.exports={"animate":"_Fs9l6BP","diceAnimate":"_3MqvaOc"}},"yvsZ":function(e,t,a){e.exports={"diceImage":"_BeR42Px","rotate":"_JtEG7PO","rotateKey":"_2V0DGB7"}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-ranch/js/lazy_roll_dice_main_9674351a25302b0a8383.js.map