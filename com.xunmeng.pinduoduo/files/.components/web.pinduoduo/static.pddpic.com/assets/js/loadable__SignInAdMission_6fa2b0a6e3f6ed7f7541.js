(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[126],{"+zld":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n("o0o1"),a=n.n(r),o=n("yXPU"),c=n.n(o),s=n("lwsE"),i=n.n(s),u=n("W8MJ"),f=n.n(u),l=n("7W2i"),d=n.n(l),p=n("a1gu"),b=n.n(p),m=n("Nsbk"),v=n.n(m),g=n("UbFF"),h=n("AZ7A"),O=n("UMxp");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var w=function(e){var t=e||{},n=t.message,r=t.response,a=(r=void 0===r?{}:r).status;if(409===(void 0===a?void 0:a))return Object(O.a)("活动太火爆啦，稍后再来吧");Object(O.a)(n||"活动太火爆啦，稍后再来吧")},x=function(e){d()(n,e);var t=y(n);function n(){return i()(this,n),t.apply(this,arguments)}return f()(n,[{key:"queryFunMissionList",value:function(){var e=c()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/query/mission/list",t,{defaultErrorHandler:w});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"completeFunMission",value:function(){var e=c()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/mission/complete",t,{defaultErrorHandler:w});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"gainFunMissionReward",value:function(){var e=c()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/reward/gain",t,{defaultErrorHandler:w});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}(g.a)},"/DE6":function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=n("yXPU"),c=n.n(o),s=n("lSNA"),i=n.n(s),u=n("J4zp"),f=n.n(u),l=n("FdF9"),d=n("+zld"),p=n("xNPO"),b=n("yxhh"),m=n("E5pA"),v=n("WNUw");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.a=function(e){var t=e.params,n=e.queryHandle,r=t.business_id,o=t.biz_source,s=t.mission_type,i=Object(l.useRef)(!1),u=Object(l.useRef)(new d.a).current,g=Object(l.useState)({status:b.a.None}),O=f()(g,2),y=O[0],w=O[1],x=Object(l.useState)({start:!1,endTime:0}),j=f()(x,2),_=j[0],C=j[1];Object(l.useEffect)(function(){var e=y.status===b.a.CountDown;C({endTime:1e3*y.seconds+Date.now(),start:e})},[y.status]),Object(p.a)(function(){u.queryFunMissionList({business_id:r,biz_source:o,mission_type_list:[s]}).then(function(e){var t=e.missionList,r=null===t||void 0===t?void 0:t[s];r&&n(r,w)})}),Object(m.a)(function(){if(_.start){var e=h({},y),t=Object(v.a)(_.endTime),n=t.leftTs,r=t.second;n<1e3?e.status=b.a.CanGetReward:e.seconds=r,w(e)}},_.start?500:null);var E=Object(l.useRef)(c()(a.a.mark(function e(){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.current){e.next=2;break}return e.abrupt("return");case 2:return i.current=!0,e.prev=3,e.next=6,u.completeFunMission(t);case 6:return r=e.sent,(o=!!(null===(n=r.rewardList)||void 0===n?void 0:n.length))&&w(h(h({},y),{},{status:b.a.Completed})),e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",!1);case 15:return e.prev=15,i.current=!1,e.finish(15);case 18:case"end":return e.stop()}},e,null,[[3,12,15,18]])})));return{taskInfo:y,getReward:E.current}}},"1wEd":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"",""])},KX90:function(e,t,n){var r=n("X4LK"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},KgZW:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,".Iqm_Zt2n{width:60px;height:60px}.eX0ogLb2{position:absolute;bottom:0;width:54px;height:16px;background-color:#e02e24;border-radius:8px;font-size:11px;color:#fff;text-align:center;line-height:16px;font-weight:700;font-weight:500}",""]),t.locals={pendant:"Iqm_Zt2n",button:"eX0ogLb2"}},M9FD:function(e,t,n){var r=n("1wEd"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},X4LK:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2_aL6JoV{position:fixed;top:0;bottom:0;left:0;right:0;margin:auto}._3_TjSyma{padding:.16rem .12rem .12rem;border-radius:.04rem;background:rgba(0,0,0,.8)}._2fe8Epz5{margin-bottom:.08rem;width:.64rem;height:.64rem}._2CRInlD8{font-size:.14rem;color:#fff;text-align:center;font-weight:700;font-weight:500;line-height:.2rem}",""]),t.locals={root:"_2_aL6JoV",toast:"_3_TjSyma",icon:"_2fe8Epz5",text:"_2CRInlD8"}},d8uk:function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),o=n("o0o1"),c=n.n(o),s=n("yXPU"),i=n.n(s),u=n("FdF9"),f=n("M9FD"),l=n.n(f),d=n("g5zU"),p=n.n(d),b=n("lSNA"),m=n.n(b),v=n("DzJC"),g=n.n(v),h=n("rGDf"),O=n.n(h),y=n("TSYQ"),w=n.n(y),x=n("33M6"),j=n("yxhh"),_=n("v2IZ"),C=n("xNPO"),E=n("LTlm");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){m()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=function(e){var t=e.icon,n=e.status,r=e.elSn,a=e.buttonStyle,o=e.seconds,c=e.clickHandle,s=e.children;p()(O.a);var i=Object(u.useContext)(E.a),f=Object(u.useRef)(function(){return null});f.current=c;var l=Object(u.useMemo)(function(){switch(n){case j.a.CountDown:return"再看".concat(o,"秒");case j.a.CanGetReward:return"可领取";case j.a.Completed:return"已领取"}},[o,n]);Object(C.a)(function(){Object(_.d)(k({page_el_sn:r},i))});var d=Object(u.useCallback)(g()(function(){var e;Object(_.c)(k({page_el_sn:r,type:n},i)),null===(e=f.current)||void 0===e||e.call(f)},2e3,{trailing:!1}),[]);return u.default.createElement(x.a,{src:t,className:w()(O.a.pendant,"flex-dir-col","flex-box","align-center"),onClick:d},s,u.default.createElement("div",{className:O.a.button,style:a},l))},R=n("2xrx"),S=n("IW0v"),I=n("KX90"),L=n.n(I);function F(e){var t=e.icon,n=e.elSn,r=e.mainText,a=e.subText;return p()(L.a),Object(C.a)(function(){n&&Object(_.d)({page_el_sn:n})}),u.default.createElement("div",{className:w()(L.a.root,"flex-box","align-center","justify-center")},u.default.createElement("div",{className:w()(L.a.toast,"flex-dir-col","flex-box","align-center")},t&&u.default.createElement(S.a,{src:t,className:L.a.icon}),u.default.createElement("p",{className:L.a.text},r),a&&u.default.createElement("p",{className:L.a.text},a)))}function N(e){var t=e.duration,n=void 0===t?2:t,r=e.toastInfo,a=e.onClose;return Object(R.a)({duration:n,children:u.default.createElement(F,r),onClose:a})}var T=n("3vqr"),A=n("qg0D"),z=n("/EUv");t.a=function(e){var t=e.taskInfo,n=e.pendantConfig,r=e.toastInfo,o=e.getReward,s=e.hidePendant;p()(l.a);var f=Object(u.useRef)(!1),d=A.c.useActions().showSignCashAfterToast,b=z.a.useActions().showLimitTimeRedpacketAfterToast,m=function(){var e=i()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=2;break}return e.abrupt("return");case 2:if(f.current=!0,t.status!==j.a.CanGetReward){e.next=10;break}return e.next=6,o();case 6:e.sent?N({toastInfo:r,onClose:function(){d(),b()}}):Object(T.a)("活动太火爆啦，请稍后重试"),e.next=11;break;case 10:Object(T.a)("再看".concat(t.seconds,"秒领取奖励"));case 11:f.current=!1;case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return[j.a.None,j.a.Completed].includes(t.status)?(j.a.Completed===t.status&&s(),null):u.default.createElement(P,a()({},n,t,{clickHandle:m}))}},k1vv:function(e,t,n){"use strict";n.r(t);var r,a=n("FdF9"),o=n("d8uk"),c=n("yxhh"),s={Seconds:60},i={elSn:5424701,icon:"https://funimg.pddpic.com/video-layer/6c9e58fa-12e8-4223-93e0-19a14e594b27.png.slim.png",buttonStyle:{backgroundImage:"linear-gradient(180deg, #FF9D00 3%, #FF3700 100%)"}},u={elSn:5424702,icon:"https://funimg.pddpic.com/video-layer/82414aaa-ccca-4915-8675-abba7414de7d.png.slim.png",mainText:"恭喜获得现金红包",subText:"去“签到页面”开启"},f={business_id:8,biz_source:"SHORT_VIDEO",mission_type:86012};!function(e){e[e.CashRedPacket=13]="CashRedPacket"}(r||(r={}));var l=n("/DE6"),d=n("hKGL");t.default=Object(a.memo)(function(){var e=d.a.useActions().hideSignInPendant,t=Object(l.a)({params:f,queryHandle:function(e,t){var n,a=e.rewardResult,o=e.finishCount,i=e.maxCount,u=null===a||void 0===a?void 0:null===(n=a.find(function(e){return r.CashRedPacket===e.rewardType}))||void 0===n?void 0:n.rewardType;u&&t({seconds:s.Seconds,rewardType:u,status:o>=i?c.a.Completed:c.a.CountDown})}}),n=t.taskInfo,p=t.getReward;return a.default.createElement(o.a,{taskInfo:n,getReward:p,hidePendant:e,pendantConfig:i,toastInfo:u})})},rGDf:function(e,t,n){var r=n("KgZW"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},yxhh:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.CountDown=0]="CountDown",e[e.CanGetReward=1]="CanGetReward",e[e.Completed=2]="Completed",e[e.None=3]="None"}(r||(r={}))}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-video-layer/js/loadable__SignInAdMission_6fa2b0a6e3f6ed7f7541.js.map