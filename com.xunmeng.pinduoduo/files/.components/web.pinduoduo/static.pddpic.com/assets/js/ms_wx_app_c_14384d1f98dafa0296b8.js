(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"YYoc":function(e,a,t){"use strict";t.r(a);var r=t("U8pU"),n=t("1OyB"),i=t("vuIU"),o=t("Ji7U"),h=t("LK+K"),p=t("dKgK"),s=t("a/1V"),c=t("chhR"),l=t("EECB"),u=t("o0o1"),S=t.n(u),y=t("HaE+"),m=t("YSLc"),_=t("W9H9"),f=t("gfNA"),E=t("bbLm"),A=function(e){Object(o.a)(WxAppShareEntity,e);var a,t=Object(h.a)(WxAppShareEntity);function WxAppShareEntity(e){var a;return Object(n.a)(this,WxAppShareEntity),(a=t.call(this,e)).wxAppRequestPayload=e.wxAppRequestPayload,a.miniObjectPath=e.miniObjectPath,a.shortCommandApi=e.shortCommandApi,a.wxAppNavigatePayload=e.wxAppNavigatePayload,a}return Object(i.a)(WxAppShareEntity,[{"key":"normalize","value":(a=Object(y.a)(S.a.mark((function _callee(e){var a,t;return S.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(e!==s.a.COPY_CIPHER){r.next=2;break}return r.abrupt("return",this.processCipher());case 2:if(a=Object.assign({},this),(t=a.miniObjectPath)&&"string"==typeof t)t=Object(E.a)(a);else if("function"==typeof t)try{"string"!=typeof(t=t(a.shareURL))&&(t=null)}catch(e){}return r.abrupt("return",Promise.resolve(Object.assign({},a.wxAppNavigatePayload,{"title":a.title,"thumbnail":a.thumbnailURL,"share_url":t||Object(E.c)(a.shareURL)})));case 6:case"end":return r.stop()}}),_callee,this)}))),function normalize(e){return a.apply(this,arguments)})},{"key":"getShareForm","value":function getShareForm(e){return e===s.a.COPY_CIPHER?_.a.COMMAND:_.a.WXAPP_CARD}},{"key":"getShareMethod","value":function getShareMethod(e){return e===s.a.COPY_CIPHER?m.a.MANUAL:m.a.SDK}}]),WxAppShareEntity}(f.a),O=t("/bZk"),b=t("uf4C"),g=t("mj+i"),P=O.b.ShareErrorCode,C=[s.a.WECHAT_SESSION,s.a.COPY_CIPHER],w=function(e){Object(o.a)(WxAppShareController,e);var a=Object(h.a)(WxAppShareController);function WxAppShareController(e){var t;return Object(n.a)(this,WxAppShareController),(t=a.call(this,e)).ShareEntityClass=A,t._enableShareTypes=C.concat(),t}return Object(i.a)(WxAppShareController,[{"key":"share","value":function share(e){return this._enableShareTypes.indexOf(e)<0?P.SHARE_TYPE_DISABLED:s.a.COPY_CIPHER===e?this.copyCipher():this.getShareEntityByShareType(e)?this._shareByNavigate():P.SHARE_PARAMS_NOT_VALID}},{"key":"_shareByNavigate","value":function _shareByNavigate(){var e=this;if(!window.wx||!window.wx.miniProgram||"function"!=typeof window.wx.miniProgram.navigateTo)return P.SHARE_NOT_SUPPORTED;var a=s.a.WECHAT_SESSION,t=this.getShareEntityByShareType(a);return this.emit(c.a.ON_SHARE_TRIGGER,{"shareType":a}),t.normalize(a).then((function(t){window.wx.miniProgram.navigateTo({"url":"".concat("/pages/web_share/web_share?").concat(Object(g.b)(Object.assign({"page_sn":Object(b.e)()+"","page_name":Object(b.d)(),"page_id":Object(b.c)()},t)))}),e.emit(c.a.ON_SHARE_COMPLETED,{"shareType":a,"shareResultType":l.a.SUCCESS})}),this.getNormalizeErrorHandler(a)),0}},{"key":"refreshWxAppChannelShare","value":function refreshWxAppChannelShare(e){return this._setupPlatformShareSDK()}},{"key":"notifyWxAppShareComplete","value":function notifyWxAppShareComplete(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a.SUCCESS;this.emit(c.a.ON_SHARE_COMPLETED,{"shareType":e,"shareResultType":a}),this.refreshWxAppChannelShare(e)}},{"key":"_setupPlatformShareSDK","value":function _setupPlatformShareSDK(){var e=this;return"object"!==("undefined"==typeof wx?"undefined":Object(r.a)(wx))||"object"!==Object(r.a)(window.wx.miniProgram)||"function"!=typeof window.wx.miniProgram.postMessage?(this.emit(c.a.SDK_INIT_FAILED),Promise.resolve()):Promise.all([s.a.WECHAT_SESSION].map((function(a){var t=e.getShareEntityByShareType(a);return t?(e.emit(c.a.ON_SHARE_PREPARE,{"shareType":a}),t.normalize(a).then((function(e){try{window.wx.miniProgram.postMessage({"data":{"message_type":"share","share_info":e,"page_info":{"page_sn":Object(b.e)()+"","page_name":Object(b.d)(),"page_id":Object(b.c)()}}})}catch(e){}}),e.getNormalizeErrorHandler(a))):Promise.resolve()})))}}]),WxAppShareController}(p.a);a.default=w}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-farm/js/ms_wx_app_c_14384d1f98dafa0296b8.js.map