(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[127],{"+zld":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n("o0o1"),a=n.n(r),o=n("yXPU"),c=n.n(o),i=n("lwsE"),s=n.n(i),u=n("W8MJ"),f=n.n(u),l=n("7W2i"),d=n.n(l),p=n("a1gu"),b=n.n(p),m=n("Nsbk"),g=n.n(m),v=n("UbFF"),h=n("AZ7A"),y=n("UMxp");function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var a=g()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var w=function(e){var t=e||{},n=t.message,r=t.response,a=(r=void 0===r?{}:r).status;if(409===(void 0===a?void 0:a))return Object(y.a)("活动太火爆啦，稍后再来吧");Object(y.a)(n||"活动太火爆啦，稍后再来吧")},x=function(e){d()(n,e);var t=O(n);function n(){return s()(this,n),t.apply(this,arguments)}return f()(n,[{key:"queryFunMissionList",value:function(){var e=c()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/query/mission/list",t,{defaultErrorHandler:w});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"completeFunMission",value:function(){var e=c()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/mission/complete",t,{defaultErrorHandler:w});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"gainFunMissionReward",value:function(){var e=c()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/reward/gain",t,{defaultErrorHandler:w});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}(v.a)},"/DE6":function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=n("yXPU"),c=n.n(o),i=n("lSNA"),s=n.n(i),u=n("J4zp"),f=n.n(u),l=n("FdF9"),d=n("+zld"),p=n("xNPO"),b=n("yxhh"),m=n("E5pA"),g=n("WNUw");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){s()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.a=function(e){var t=e.params,n=e.queryHandle,r=t.business_id,o=t.biz_source,i=t.mission_type,s=Object(l.useRef)(!1),u=Object(l.useRef)(new d.a).current,v=Object(l.useState)({status:b.a.None}),y=f()(v,2),O=y[0],w=y[1],x=Object(l.useState)({start:!1,endTime:0}),j=f()(x,2),_=j[0],C=j[1];Object(l.useEffect)(function(){var e=O.status===b.a.CountDown;C({endTime:1e3*O.seconds+Date.now(),start:e})},[O.status]),Object(p.a)(function(){u.queryFunMissionList({business_id:r,biz_source:o,mission_type_list:[i]}).then(function(e){var t=e.missionList,r=null===t||void 0===t?void 0:t[i];r&&n(r,w)})}),Object(m.a)(function(){if(_.start){var e=h({},O),t=Object(g.a)(_.endTime),n=t.leftTs,r=t.second;n<1e3?e.status=b.a.CanGetReward:e.seconds=r,w(e)}},_.start?500:null);var k=Object(l.useRef)(c()(a.a.mark(function e(){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.current){e.next=2;break}return e.abrupt("return");case 2:return s.current=!0,e.prev=3,e.next=6,u.completeFunMission(t);case 6:return r=e.sent,(o=!!(null===(n=r.rewardList)||void 0===n?void 0:n.length))&&w(h(h({},O),{},{status:b.a.Completed})),e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",!1);case 15:return e.prev=15,s.current=!1,e.finish(15);case 18:case"end":return e.stop()}},e,null,[[3,12,15,18]])})));return{taskInfo:O,getReward:k.current}}},"1wEd":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"",""])},"8Nel":function(e,t,n){"use strict";n.r(t);var r,a=n("FdF9"),o=n("d8uk"),c=n("yxhh"),i={Seconds:60},s={elSn:5421935,icon:"https://funimg.pddpic.com/video-layer/48809d6a-e2dd-4671-9a6d-00eaf8f584c9.png.slim.png",buttonStyle:{backgroundImage:"linear-gradient(180deg, #FFC000 3%, #FF8800 100%)"}},u={elSn:5437348,icon:"https://funimg.pddpic.com/video-layer/6c9e58fa-12e8-4223-93e0-19a14e594b27.png.slim.png",buttonStyle:{backgroundImage:"linear-gradient(180deg, #FF9D00 3%, #FF3700 100%)"}},f={elSn:5421934,icon:"https://funimg.pddpic.com/video-layer/705e8fa5-083e-4f3e-affe-541923adada0.png.slim.png",mainText:"恭喜获得红包",subText:"去“签到页面”开启"},l={elSn:5421934,icon:"https://funimg.pddpic.com/video-layer/82414aaa-ccca-4915-8675-abba7414de7d.png.slim.png",mainText:"恭喜获得现金红包",subText:"去“签到页面”开启"},d={business_id:5,biz_source:"SHORT_VIDEO",mission_type:56081};!function(e){e[e.RedPacket=12]="RedPacket",e[e.CashRedPacket=13]="CashRedPacket"}(r||(r={}));var p=n("/DE6"),b=n("hKGL");t.default=Object(a.memo)(function(){var e=b.a.useActions().hideSignInPendant,t=Object(p.a)({params:d,queryHandle:function(e,t){var n,a=e.rewardResult,o=e.finishCount,s=e.maxCount,u=null===a||void 0===a?void 0:null===(n=a.find(function(e){return[r.RedPacket,r.CashRedPacket].includes(e.rewardType)}))||void 0===n?void 0:n.rewardType;u&&t({seconds:i.Seconds,rewardType:u,status:o>=s?c.a.Completed:c.a.CountDown})}}),n=t.taskInfo,m=t.getReward,g=n.rewardType===r.CashRedPacket;return a.default.createElement(o.a,{taskInfo:n,getReward:m,hidePendant:e,pendantConfig:g?u:s,toastInfo:g?l:f})})},KX90:function(e,t,n){var r=n("X4LK"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},KgZW:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,".Iqm_Zt2n{width:60px;height:60px}.eX0ogLb2{position:absolute;bottom:0;width:54px;height:16px;background-color:#e02e24;border-radius:8px;font-size:11px;color:#fff;text-align:center;line-height:16px;font-weight:700;font-weight:500}",""]),t.locals={pendant:"Iqm_Zt2n",button:"eX0ogLb2"}},M9FD:function(e,t,n){var r=n("1wEd"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},X4LK:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2_aL6JoV{position:fixed;top:0;bottom:0;left:0;right:0;margin:auto}._3_TjSyma{padding:.16rem .12rem .12rem;border-radius:.04rem;background:rgba(0,0,0,.8)}._2fe8Epz5{margin-bottom:.08rem;width:.64rem;height:.64rem}._2CRInlD8{font-size:.14rem;color:#fff;text-align:center;font-weight:700;font-weight:500;line-height:.2rem}",""]),t.locals={root:"_2_aL6JoV",toast:"_3_TjSyma",icon:"_2fe8Epz5",text:"_2CRInlD8"}},d8uk:function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),o=n("o0o1"),c=n.n(o),i=n("yXPU"),s=n.n(i),u=n("FdF9"),f=n("M9FD"),l=n.n(f),d=n("g5zU"),p=n.n(d),b=n("lSNA"),m=n.n(b),g=n("DzJC"),v=n.n(g),h=n("rGDf"),y=n.n(h),O=n("TSYQ"),w=n.n(O),x=n("33M6"),j=n("yxhh"),_=n("v2IZ"),C=n("xNPO"),k=n("LTlm");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){m()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=function(e){var t=e.icon,n=e.status,r=e.elSn,a=e.buttonStyle,o=e.seconds,c=e.clickHandle,i=e.children;p()(y.a);var s=Object(u.useContext)(k.a),f=Object(u.useRef)(function(){return null});f.current=c;var l=Object(u.useMemo)(function(){switch(n){case j.a.CountDown:return"再看".concat(o,"秒");case j.a.CanGetReward:return"可领取";case j.a.Completed:return"已领取"}},[o,n]);Object(C.a)(function(){Object(_.d)(D({page_el_sn:r},s))});var d=Object(u.useCallback)(v()(function(){var e;Object(_.c)(D({page_el_sn:r,type:n},s)),null===(e=f.current)||void 0===e||e.call(f)},2e3,{trailing:!1}),[]);return u.default.createElement(x.a,{src:t,className:w()(y.a.pendant,"flex-dir-col","flex-box","align-center"),onClick:d},i,u.default.createElement("div",{className:y.a.button,style:a},l))},R=n("2xrx"),S=n("IW0v"),F=n("KX90"),T=n.n(F);function I(e){var t=e.icon,n=e.elSn,r=e.mainText,a=e.subText;return p()(T.a),Object(C.a)(function(){n&&Object(_.d)({page_el_sn:n})}),u.default.createElement("div",{className:w()(T.a.root,"flex-box","align-center","justify-center")},u.default.createElement("div",{className:w()(T.a.toast,"flex-dir-col","flex-box","align-center")},t&&u.default.createElement(S.a,{src:t,className:T.a.icon}),u.default.createElement("p",{className:T.a.text},r),a&&u.default.createElement("p",{className:T.a.text},a)))}function L(e){var t=e.duration,n=void 0===t?2:t,r=e.toastInfo,a=e.onClose;return Object(R.a)({duration:n,children:u.default.createElement(I,r),onClose:a})}var N=n("3vqr"),A=n("qg0D"),z=n("/EUv");t.a=function(e){var t=e.taskInfo,n=e.pendantConfig,r=e.toastInfo,o=e.getReward,i=e.hidePendant;p()(l.a);var f=Object(u.useRef)(!1),d=A.c.useActions().showSignCashAfterToast,b=z.a.useActions().showLimitTimeRedpacketAfterToast,m=function(){var e=s()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.current){e.next=2;break}return e.abrupt("return");case 2:if(f.current=!0,t.status!==j.a.CanGetReward){e.next=10;break}return e.next=6,o();case 6:e.sent?L({toastInfo:r,onClose:function(){d(),b()}}):Object(N.a)("活动太火爆啦，请稍后重试"),e.next=11;break;case 10:Object(N.a)("再看".concat(t.seconds,"秒领取奖励"));case 11:f.current=!1;case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return[j.a.None,j.a.Completed].includes(t.status)?(j.a.Completed===t.status&&i(),null):u.default.createElement(P,a()({},n,t,{clickHandle:m}))}},rGDf:function(e,t,n){var r=n("KgZW"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},yxhh:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.CountDown=0]="CountDown",e[e.CanGetReward=1]="CanGetReward",e[e.Completed=2]="Completed",e[e.None=3]="None"}(r||(r={}))}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-video-layer/js/loadable__SignInMission_f668d1925c415c6b8fa1.js.map