(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[59],{BDlz:function(e,t,a){e.exports={shareRewardWrapper:"T-VFbEK9",closeBtn:"UQx8SHZY",title:"SEQ8aXc5",videoIntro:"_2wnlAjmH",videoCover:"_2w4E1GwL",playBtn:"_2S66FAK5",videoIcon:"_2r0HCGu2",videoContent:"_33Rb9CvC",videoTitle:"_3MMDf-_v",videoDesc:"_1nLE42H-",shareLimit:"_4tARs_yO",shareList:"_3mvO6KAn",void:"_1j9IjFjX",shareAllWrapper:"_3m27N4Po",shareAll:"_2wVctfd6",icon:"_11BZzIFh"}},BjUZ:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),c=a("yXPU"),s=a.n(c),i=a("J4zp"),o=a.n(i),l=a("FdF9"),u=a("YsBF"),d=a("fkZF"),f=a("ta72"),m=a("TzJd"),p=a("VrAA"),_=a("IW0v"),v=a("3vqr"),h=a("Pf7F"),b=a("v2IZ"),g=a("CG4k"),E=a.n(g),C=function(e){var t=e.info,a=void 0===t?{}:t,n=e.index,c=e.list,i=e.handler,o=e.setListInfo,u=a.displayName,d=a.avatar,f=a.getCoin,m=Object(l.useRef)(0),p=function(){var e=s()(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(!1,n);case 2:m.current=e.sent,m.current&&((t=c.slice())[n]&&(t[n].getCoin=!0),o(t));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return l.default.createElement("div",{className:E.a.itemWrapper},l.default.createElement(_.a,{className:E.a.avatar,resizeWidth:108,src:d}),l.default.createElement("div",{className:E.a.main},l.default.createElement("span",{className:E.a.nickname},u),f?l.default.createElement("span",{className:E.a.reward},"获得".concat(m.current,"金币")):l.default.createElement("div",{className:E.a.shareBtn,onClick:p},l.default.createElement(_.a,{className:E.a.envelope,resizeWidth:42,src:"https://funimg.pddpic.com/video-layer/2021-03-08/1ccd027c-3d04-45a3-8b95-bf431f7e10c7.png.slim.png"}),"分享")))},O=a("lSNA"),w=a.n(O),N=a("TSYQ"),j=a.n(N),y=a("N23e"),D=a("N5Mi"),S=a.n(D),k=Object(l.memo)(function(e){var t=e.setShowSuccessDialog,a=e.batchDrawInfo,n=void 0===a?{}:a,r=e.toggleShareDrawCoinDialog,c=e.notifyClientBeforeClose,s=n.amount,i=n.records,u=n.currentCoin,d=(n.status,n.shareDrawCoin,n.shareDrawCount,n.shareDrawLimit,Object(l.useState)(!1)),f=o()(d,2),m=f[0],v=f[1];Object(l.useEffect)(function(){Object(b.d)({page_el_sn:5009902,amount:s})},[]);var h=function(){v(!0),c(u),Object(b.c)({page_el_sn:5009902}),setTimeout(function(){t(!1),r({status:!1})},300)};return l.default.createElement(l.Fragment,null,l.default.createElement(p.a,{opacity:m?0:.6},l.default.createElement("div",{className:j()(S.a.shareSuccessWrapper,w()({},S.a.hideAnim,m))},l.default.createElement(y.a,{className:S.a.close,onClose:h}),l.default.createElement(_.a,{className:S.a.packet,resizeWidth:870,src:"https://funimg.pddpic.com/video-layer/8f5e5574-0ff2-40ee-ba52-0602217ad7d5.png.slim.png"}),l.default.createElement("div",{className:S.a.content},l.default.createElement("div",{className:S.a.coinInfo},l.default.createElement("span",{className:S.a.count},s),l.default.createElement("span",{className:S.a.desc},"金币")),l.default.createElement("div",{className:S.a.shareInfo},"共分享给".concat(i.length||0,"个好友"))),l.default.createElement("p",{className:S.a.info},"分享越多 金币越多"),l.default.createElement("button",{className:S.a.button,onClick:h},"收下金币"))))}),x=a("BDlz"),A=a.n(x),I=0;t.default=Object(l.memo)(function(){var e=Object(m.c)().store,t=e.shareDrawCoinInfo,a=e.toggleShareDrawCoinDialog,n=e.getShareResult,c=e.ext,i=c.newComerStage,g=c.newComerVersion,E=e.sharePxqChat,O=e.shareDrawCoin,w=e.toggleShareDrawCoin,N=Object(f.b)().store.videoInfo,j=(null===t||void 0===t?void 0:t.data)||{},y=j.friendList,D=void 0===y?[]:y,S=j.shareDrawCount,x=j.shareDrawLimit,L=N.cover,B=N.desc,F=N.authorInfo,W=N.feedId,H=Object(l.useState)(!0),R=o()(H,2),z=R[0],G=R[1],U=Object(l.useState)(!1),J=o()(U,2),q=J[0],M=J[1],T=Object(l.useState)({}),Y=o()(T,2),P=Y[0],Q=Y[1],V=Object(l.useState)(function(){return D.map(function(e){return e.getCoin=!1,e})}),X=o()(V,2),K=X[0],Z=X[1],$=Object(l.useState)(!1),ee=o()($,2),te=ee[0],ae=ee[1],ne=Object(l.useState)(S),re=o()(ne,2),ce=re[0],se=re[1],ie=!O&&ce<x?"还没有可分享的好友哦":"分享已达".concat(x,"个好友上限"),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(u.c)("WealthGoldShareDrawNotification",{shareDrawCoin:O}),e&&2===(g===h.j.OLD?h.i.COIN:i)&&Object(u.c)("legoWealthGodUpdateReward",{currentCoin:e,updateCoinType:"mission"})},le=function(){var e=s()(r.a.mark(function e(){var t,a,c,s,i,o,l,u,f,m,p,_,h=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]&&h[0],a=h.length>1&&void 0!==h[1]?h[1]:-1,c=0,s=[],o=(i=F||{}).avatar,l=i.header_url,u=i.nickname,f=o||l,Object(b.c)({page_el_sn:5009721,click_type:t?1:2}),!t){e.next=11;break}K.forEach(function(e){!e.getCoin&&s.push(e.scid)},[]),e.next=15;break;case 11:if(!(a<0||K[a].getCoin)){e.next=14;break}return Object(v.a)("该好友已分享成功~"),e.abrupt("return");case 14:a>-1&&(s=[K[a].scid]);case 15:if(m=K.map(function(e){return{scid:e.scid,token:e.token}}),p={campaign:"short_video",biz_type:"wealth_god_share_draw_coin",to_user_list:t?m:[m[a]],request_id:Object(d.a)(),inner_request:{user_name:u,avatar_url:f,feed_id:W}},u&&f&&W){e.next=20;break}return Object(v.a)("视频分享失败，换个视频试试吧"),e.abrupt("return");case 20:return e.next=22,E(p);case 22:if(!e.sent.success){e.next=42;break}return e.next=26,n({target_scids:s});case 26:_=e.sent,e.t0=null===_||void 0===_?void 0:_.status,e.next=1e8===e.t0?30:400000006===e.t0?36:38;break;case 30:return Q(_),c=(null===_||void 0===_?void 0:_.amount)||0,I=(null===_||void 0===_?void 0:_.currentCoin)||0,w(!!(null===_||void 0===_?void 0:_.shareDrawCoin)),t?(G(!1),M(!0)):se(function(e){return e+1}),e.abrupt("break",40);case 36:return Object(v.a)(_.desc||"超过最大分享次数"),e.abrupt("break",40);case 38:return Object(v.a)(_.desc||"请稍后重试"),e.abrupt("break",40);case 40:e.next=43;break;case 42:Object(v.a)("活动太火爆了，请稍后再试");case 43:return e.abrupt("return",c);case 44:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)(function(){var e;e=O?1:!O&&ce<x?2:3,Object(b.d)({page_el_sn:5009721,pop_type:e})},[]),Object(l.useEffect)(function(){K.every(function(e){return e.getCoin})&&ae(!0)},[K]),l.default.createElement(l.Fragment,null,z&&l.default.createElement(p.a,{opacity:.8,innerClass:A.a.shareRewardWrapper,name:"ShareReward"},l.default.createElement("span",{className:A.a.closeBtn,onClick:function(){oe(I),G(!1),a({status:!1})}}),l.default.createElement("h3",{className:A.a.title},"分享领红包"),l.default.createElement("div",{className:A.a.videoIntro},l.default.createElement("div",{className:A.a.videoCover},l.default.createElement(_.a,{className:A.a.videoIcon,resizeWidth:144,src:L||"https://funimg.pddpic.com/video-layer/2020-12-23/a2befe17-0249-4a51-b825-66134eb080d3.png.slim.png"}),l.default.createElement("span",{className:A.a.playBtn})),l.default.createElement("div",{className:A.a.videoContent},l.default.createElement("p",{className:A.a.videoDesc},B||"邀请好友看这个视频"))),l.default.createElement("div",{className:A.a.shareLimit},"每日可分享".concat(x,"人，已分享").concat(ce,"人")),l.default.createElement("div",{className:A.a.shareList},D.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return e.map(function(n,r){return l.default.createElement(C,{key:r,index:r,info:n,list:e,handler:t,setListInfo:a})})}(K,le,Z):l.default.createElement("p",{className:A.a.void},ie)),l.default.createElement("div",{className:A.a.shareAllWrapper},l.default.createElement("div",{className:A.a.shareAll,onClick:function(){if(!K.length||te)return oe(I),G(!1),void a({status:!1});le(!0)}},K.length?te?l.default.createElement("span",null,"已分享 继续看视频"):l.default.createElement(l.default.Fragment,null,l.default.createElement("span",{className:A.a.icon}),l.default.createElement("span",{className:A.a.text},"一键分享领红包")):l.default.createElement("span",null,"继续看视频")))),q&&l.default.createElement(k,{setShowSuccessDialog:M,batchDrawInfo:P,toggleShareDrawCoinDialog:a,notifyClientBeforeClose:oe}))})},CG4k:function(e,t,a){e.exports={itemWrapper:"_22IxARgc",main:"_3kR3ovq6",avatar:"_3Cx7IgB9",nickname:"_3qO-HYzb",reward:"_3ppHsEOd",shareBtn:"_3wY6Eu3q",envelope:"_3OUYOsYf"}},N5Mi:function(e,t,a){e.exports={shareSuccessWrapper:"NBZbgJ3U",close:"PIJyjw0h",packet:"_1N55isHC",hideAnim:"_1fFGrENC",hideBottom:"_3L-YUeXo",avatar:"_2KQeyCB1",content:"_1uMLMDe0",title:"_6JyA7WrQ",count:"_2IXHpGrw",desc:"_2ShJtA6l",shareInfo:"_2VHC5ixA",info:"mwEGEOLQ",button:"_3_CbxIWs",btnBreath:"_2RX3D8vq"}},xIeL:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),c=a("yXPU"),s=a.n(c),i=a("FdF9"),o=a("O+S/"),l=a("MpJ2"),u=a("Fra6"),d=a("eFuA"),f=Object(i.memo)(function(){var e=o.q.useActions().getValue,t=u.f.useActions().hideBottomTabGuide,a=Object(i.useRef)(0),n=Object(o.t)("newComerEnvelopeAutoOpen");return Object(i.useEffect)(function(){function c(){return(c=s()(r.a.mark(function c(){return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(l.f)("JSUniPopup","showHighLayer",{model:{url:"lego_live_lego_ssr.html?lego_minversion=5.57.0&lego_ssr_api=%2Fapi%2Fvideo_lego_ssr%2Fget_config%2Fvideo_bottom_tab_guide_layer&lego_type=v8",data:JSON.stringify({high_layer_id:e().highLayerId,page_from:e().pageFrom,show_finger:!!n}),name:"video_bottom_tab_guide_layer",stat_data:JSON.stringify({}),block_loading:0,occasion:1,render_id:8},on_load_error:function(e,a){null===t||void 0===t||t()},on_state_change:function(e,a){3===(null===a||void 0===a?void 0:a.current_state)&&(null===t||void 0===t||t())}});case 2:a.current=r.sent;case 3:case"end":return r.stop()}},c)}))).apply(this,arguments)}Object(d.d)({subType:"QuickMoney_VideoBottomGuide"}),function(){c.apply(this,arguments)}()},[]),null});t.default=f}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-video-layer/js/loadable_ShareReward_606f535588921fa95823.js.map