(window.ReadWeJsonp=window.ReadWeJsonp||[]).push([[30],{"X22f":function(e,t,o){"use strict";o.r(t);var n,a,i=o("VTBJ"),s=o("a3ss"),r=o("1OyB"),c=o("vuIU"),u=o("JX7q"),d=o("Ji7U"),p=o("LK+K"),l=o("rePB"),f=o("Y65e"),b=(o("+JCI"),o("nigR")),h=o("guv2"),m=o("HIM3"),g=o("gzTa"),C=o("BePE"),A=o("ygK2"),O=o("k/Ow"),S=o("SATD"),R=o("yem+"),M=o("vHnQ"),v=o("e5OJ"),w=o("KWNa"),T=o("jY+O"),I=o("3fu3"),j=o("6OU5"),_=o("4bvG"),N=o("fb3C"),y=o("AKEH"),D=o("bdvc"),E=o("TRXh"),k=o("2vnA"),W=o("q1tI"),B=o.n(W),P=o("Y/FJ"),H=o("e95c"),L=o("SWai"),U=o("DStG"),x=o("deMC"),F=O.g.progressing,G=O.g.drawable,q=O.g.drawableTomorrow,J=O.i.CASH_NEWBIE_READ_1_MIN,K=O.i.CASH_NEWBIE_READ_MULTI_CASH,z=O.i.CASH_READING_GET_CASH,V=O.i.CASH_BIG_TOMORROW,X=O.i.CASH_WELFARE_WECHAT,Y=O.i.CASH_SERIAL_READ,Q=O.i.SCAN_UNLOCK_COOL_DOWN,Z=(O.i.CASH_READ_COIN,[{"ifNeedUpdate":function ifNeedUpdate(e){return!1},"getMissionType":function getMissionType(){return Q},"callback":I.a.bottomUnlockCoolDownStore.startCountDown},{"ifNeedUpdate":function ifNeedUpdate(e){var t=(e||{}).missionCompleteResponseMap,o=void 0===t?{}:t,n=m.b.currentFragmentMissionType;return!o[n]&&m.b.getMissionInfo(n).status===O.g.progressing},"getMissionType":function getMissionType(){return m.b.currentFragmentMissionType},"callback":j.m},{"ifNeedUpdate":function ifNeedUpdate(){return m.b.getMissionInfo(X).status===O.g.progressing},"getMissionType":function getMissionType(){return X},"callback":function callback(){var e=O.i.CASH_WELFARE_WECHAT;m.b.getMissionInfo(e).status===O.g.drawable&&E.a.showToast("恭喜完成福利好书任务\n可立即提现")}}]),$=(n=function(e){Object(d.default)(ReadCountReaction,e);var t=Object(p.default)(ReadCountReaction);function ReadCountReaction(){var e;Object(r.default)(this,ReadCountReaction);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(l.default)(Object(u.default)(e),"mobxDisposers",[]),Object(l.default)(Object(u.default)(e),"handleCashAccountReadTime",(function(t){Object(k.runInAction)((function(){var o,n=t.missionCompleteResponseMap,a=void 0===n?{}:n,i=t.footAdFrequency,s=void 0===i?0:i,r=t.pageAdFrequency,c=void 0===r?0:r,u=t.missionTriggerResponseMap,d=void 0===u?{}:u,p=t.todayReadTime,l=void 0===p?0:p,f=t.totalReadTime,b=t.bookHisReadTime,g=void 0===b?0:b,S=t.coolDown,R=t.missionMap,j=void 0===R?{}:R;a[K]&&((a[K].mission||{}).finishCount!==m.b.getMissionInfo(K).finishCount&&setTimeout((function(){H.a.showMultiFinishTips()}),300));if(x.a.updateAdInfo({"footAdFrequency":s,"pageAdFrequency":c,"totalReadTime":f,"todayReadTime":l}),L.a.recordTime(M.a.serverTime,!0),Object.keys(a).forEach((function(e){var t=a[e]||{},o=t.mission,n=t.completeSuccess,i=t.rewards,s=void 0===i?[]:i;o&&n&&(m.b.updateMissionData(o),Number(e)===Y&&I.a.bottomSerialReadMissionStore.completeTodayMission(s))})),Object.keys(d).forEach((function(e){var t=d[e]||{},o=t.mission,n=t.triggerSuccess;o&&n&&m.b.updateMissionData(o),Number(e)===O.i.CASH_ALLOWANCE_COUPON&&I.a.cashAllowanceGuidePopupStore.openFromSyncRead()})),Object.keys(j).forEach((function(e){var t=j[e]||{};Number(e)===O.i.CASH_COMPETITION&&I.a.cashBigCompetitionRankPopupStore.updateMissionInfo(t)})),a[J]&&(I.a.cashNewbieReadOneBigRewardAniPopupStore.setSourceSyncRead(),I.a.cashNewbieReadOneBigRewardAniPopupStore.openWithData().then((function(){return T.b.refreshAllMission()})).then((function(){I.a.cashReadingWechatRewardPopupStore.open(),m.b.getMissionInfo(V).status===q&&I.a.cashBigTomorrowRewardTipPopupStore.open(),I.a.cashBigThreeMealPopupStore.checkAutoOpen()}))),60===Number(l)&&w.b.canShowAddWidgetPopup&&!w.b.checkTodayShowBefore()&&(a[J]?I.a.widgetAddPopupStore.setShouldShowPopup(!0):w.b.widgetSupportSilent?w.b.newUserSilentAdd(!0).then((function(){I.a.widgetAddSilentPopupStore.open({"priority":C.a.widget})})).catch((function(){})):I.a.widgetAddPopupStore.openWithWidgetSource("read1MinNotSupportSilent")),e.handleAddCalendarPopup(l),e.handleWidgetPushPopupCheck(l),x.a.setBookHisReadTime(g),I.a.bottomInkScreenStore.setBottomInkScreen(l),!h.a.isListenBook){var _=v.a.isVip,N=m.b.notBigCashNewbieThreeDays;S&&!_&&N&&!I.a.bottomInkScreenStore.show||e.handleCheckLockPage(l)}e.checkWater(t),e.handleReadCashMission(t),e.handleCoolDownMission(t),e.updateMission(t),null===A.c||void 0===A.c||null===(o=A.c.getData())||void 0===o||o.forEach((function(e){e&&e(t)}));var y=x.a.showAdInterval,D=void 0===y?0:y;D&&Number(l)%D==0&&(x.a.endAdChapterNum=x.a.chapterNum)}))})),Object(l.default)(Object(u.default)(e),"updateMission",(function(e){var t=Z.filter((function(t){return t.ifNeedUpdate(e)}));m.b.updateMissionListFromRemote(t.map((function(e){return e.getMissionType()}))).then((function(){t.forEach((function(e){var t;return null==e||null===(t=e.callback)||void 0===t?void 0:t.call(e)}))}))})),Object(l.default)(Object(u.default)(e),"checkWater",(function(e){var t=(e||{}).waterAmount,o=void 0===t?0:t,n=m.b.isBigCashReadWeChatCash,a=(Object(D.i)()||{}).fun_id;o>0&&a&&b.o.includes(a)&&(n?I.a.cashBigCashWechatRewardAniPopupStore.setWaterAmount(o):I.a.cashReadingRewardDrawPopupStore.setWaterAmount(o))})),Object(l.default)(Object(u.default)(e),"componentDidMount",(function(){e.mobxDisposers.push(Object(k.reaction)((function(){return L.a.showReadCount>=P.a}),(function(t){if(t){var o=O.i.CASH_NEWBIE_READ_1_MIN;if(m.b.getMissionInfo(o).status===O.g.progressing)return;if(h.a.isListenBook)return;var n=x.a.bidStr,a=Object(D.i)().fun_id;Object(b.lb)({"bidStr":n,"funId":a}).then((function(t){null!=t&&t.success&&e.handleCashAccountReadTime(t)})).catch(N.b)}}))),e.mobxDisposers.push(Object(k.reaction)((function(){var e=O.i.CASH_NEWBIE_READ_1_MIN,t=m.b.isBigCashAccountGray,o=m.b.cashRead1MinActualSecond,n=m.b.getMissionInfo(e).status;return t&&n===O.g.progressing&&L.a.showReadCount>=1e3*o}),(function(e){if(e){var t=O.i.CASH_NEWBIE_READ_1_MIN,o=O.i.CASH_BIG_TOMORROW;Object(b.L)({"missionType":t,"addAmount":60}).then((function(e){var t=e.completeSuccess,n=e.mission,a=(e.rewards,Promise.resolve());t&&Object(k.runInAction)((function(){m.b.updateMissionData(n),a=I.a.cashNewbieReadOneBigRewardAniPopupStore.openWithData()})),a.then((function(){return T.b.refreshAllMission()})).then((function(){if(I.a.cashReadingWechatRewardPopupStore.openWithContinue(),m.b.getMissionInfo(o).status===O.g.drawableTomorrow&&I.a.cashBigTomorrowRewardTipPopupStore.open(),!m.b.isWidgetPushAccountGray){var e=m.b.currentFragmentMissionType,t=m.b.getMissionInfo(e).maxCount;(void 0===t?0:t)?I.a.cashBigIPhoneWelfarePopupStore.open():I.a.cashBigThreeMealPopupStore.checkAutoOpen()}}))})).finally((function(){L.a.resetTime(M.a.serverTime)}))}}))),e.mobxDisposers.push(Object(k.reaction)((function(){var e=O.i.READ_CASH_COIN,t=m.b.getMissionInfo(e),o=t.status,n=t.maxCount,a=void 0===n?0:n;return o===O.g.completed||0===a?0:Math.floor(L.a.showReadCount/U.a)}),(function(t){if(t>0){var o=O.i.CASH_NEWBIE_READ_1_MIN;if(m.b.getMissionInfo(o).status===O.g.progressing)return;if(h.a.isListenBook)return;e.completeReadCashCoin()}})))})),Object(s.a)(Object(u.default)(e),"completeReadCashCoin",a,Object(u.default)(e)),Object(l.default)(Object(u.default)(e),"handleAddCalendarPopup",(function(e){var t=R.a.canAddCalendar;180===Number(e)&&t&&Object(j.q)(5e3).then((function(){I.a.readAddCalendarPopupStore.openFromSyncRead()}))})),Object(l.default)(Object(u.default)(e),"handleWidgetPushPopupCheck",(function(e){var t=(S.b.userInfo||{}).firstLoginTime,o=void 0===t?0:t;m.b.isWidgetPushAccountGray&&60===e&&!Object(y.i)(S.b.globalServerTime,1e3*o)&&o&&I.a.cashBigThreeMealPopupStore.checkAutoOpen()})),Object(l.default)(Object(u.default)(e),"handleCheckLockPage",(function(e){for(var t=[I.a.bottomListenBookStore.checkBottomListenBook,I.a.bottomInkScreenStore.setBottomInkScreen],o=0;o<t.length;o++){if(t[o](e))break}})),Object(l.default)(Object(u.default)(e),"componentWillUnmount",(function(){e.mobxDisposers.forEach((function(e){return null==e?void 0:e()}))})),e}return Object(c.default)(ReadCountReaction,[{"key":"handleCoolDownMission","value":function handleCoolDownMission(e){var t=h.a.isListenBook,o=(e||{}).coolDown,n=v.a.isVip,a=m.b.notBigCashNewbieThreeDays;if(!t&&o&&!n&&a&&!I.a.bottomInkScreenStore.show){var s=m.b.getMissionInfo(Q),r=(s||{}).extMap,c=(r||{}).coolDownTime,u=void 0===c?60:c,d=M.a.serverTime/1e3+u,p=Object(i.default)(Object(i.default)({},s),{},{"extMap":Object(i.default)(Object(i.default)({},r),{},{"coolDownExpireTime":d})});m.b.updateMissionData(p),I.a.bottomUnlockCoolDownStore.startCountDown()}}},{"key":"handleReadCashMission","value":function handleReadCashMission(e){var t=e||{},o=t.missionCompleteResponseMap,n=void 0===o?{}:o,a=t.todayReadTime,s=void 0===a?0:a;if(!n[z]){var r=m.b.getMissionInfo(z),c=r||{},u=c.status,d=c.extMap;if([F,G].includes(u)){var p=Object(i.default)(Object(i.default)({},r),{},{"extMap":Object(i.default)(Object(i.default)({},d),{},{"todayReadTime":s})});m.b.updateMissionData(p)}}}},{"key":"render","value":function render(){return B.a.createElement("div",null)}}]),ReadCountReaction}(W.Component),a=Object(f.a)(n.prototype,"completeReadCashCoin",[_.a],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){return function(){var e=O.i.READ_CASH_COIN;if(m.b.getMissionInfo(e).status!==O.g.completed)return m.b.completeGoldMission({"missionType":e}).then((function(e){var t=e||{},o=t.completeSuccess,n=t.mission,a=t.rewards;o&&Object(k.runInAction)((function(){m.b.updateMissionData(n);var e=Object(g.g)(b.A.CASH_ACCOUNT_AMOUNT,a),t=Object(g.g)(b.A.READ_COIN,a);t&&(Object(j.q)(1e3).then((function(){S.b.addGoldCoinAccount(t)})),I.a.cashCoinAccountWrapperStore.showIncreaseText("".concat(t,"金币")),I.a.readCashCoinWrapperStore.showAnimate()),e&&(I.a.cashCoinAccountWrapperStore.showIncreaseText("".concat(Object(D.d)(e),"元")),Object(j.q)(1e3).then((function(){S.b.addCashAccount(e)})))}))})).catch(j.m)}}}),n);t.default=$}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-fun-read/js/dynamic_read_count_reaction~1d6776d9_44e02ef70292870d3783.js.map