(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[17,29],{"+7Xe":function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},"+vUh":function(e,t,n){e.exports={icon:"_1PJkHLAg",back:"_16nNUClS",horizontalScan:"yXxO4lAH"}},"/++w":function(e,t,n){e.exports={yellowLabelListWrap:"_9kqdzMX6",yellowLabelWrap:"_124NkzTI",listItem:"QAFjCy2I",yellowLabel:"_19oXnsrZ",yellowLabelOC:"WbesAh-B",countDown:"_40JBw-jd",skuSelectorHeadContent:"_1fYHEBIC",skuSelectorHeadContentOC:"_3P4E5ia9",skuSelectorPrice:"_2mtFnR8B",skuSelectorPriceOC:"IvhjY_HV",skuQuantityPriceDesc:"_27FaiT3N",isNewPriceArea:"Cccuw03n",startHide:"C68J1BqP",toHide:"_2NCyKoqd",startDisplay:"_1cpcC5_k",toDisplay:"_1k8KGuTw",horizontalScan:"HtMaPWb-"}},"/4cJ":function(e,t,n){"use strict";var r=n("KoDT"),a=n("h3qu"),o=n("4+4F"),i={BASIC:0,GROUP_FULL_AUTO_OPEN:1,ALIPAY_PASS_PARAMS:2,OVERSEAS_ID_CARD_VERTIFICATION:3};i.currentMaxVersion=i.OVERSEAS_ID_CARD_VERTIFICATION;var s=!1;i.getSupportVersion=function(){var e=Object(r.a)();return e.isNativePlatform?Object(a.c)(e.version,"3.51.0")>=0?i.OVERSEAS_ID_CARD_VERTIFICATION:(s||(Object(o.a)({error_msg:"app版本".concat(e.version,"使用paymentVersion1"),payload:{event:"预支付paymentVersion为1",app_version:e.version}}),s=!0),i.GROUP_FULL_AUTO_OPEN):i.OVERSEAS_ID_CARD_VERTIFICATION},t.a=i},"0+0r":function(e,t,n){var r=n("Nz43");"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n("aET+")(r,a);r.locals&&(e.exports=r.locals)},"0JQy":function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+a+")"+"?",l="[\\ufe0e\\ufe0f]?"+c+("(?:\\u200d(?:"+[o,i,s].join("|")+")[\\ufe0e\\ufe0f]?"+c+")*"),u="(?:"+[o+r+"?",r,i,s,n].join("|")+")",d=RegExp(a+"(?="+a+")|"+u+l,"g");e.exports=function(e){return e.match(d)||[]}},"0ZTe":function(e,t,n){var r=n("wy8a"),a=n("quyA"),o=n("Em2t"),i=n("dt0z");e.exports=function(e){return function(t){t=i(t);var n=a(t)?o(t):void 0,s=n?n[0]:t.charAt(0),c=n?r(n,1).join(""):t.slice(1);return s[e]()+c}}},"0y1f":function(e,t,n){e.exports={disablePromotionItem:"_2k_vx0Gs",disableWrap:"_4nwFZZmx",promotionButtonDesc:"jrd5e26U",buttonWrap:"_2YSiZbER",btn:"xwJAz4fr",isTakenOut:"_11gcuE83",hasNum:"_1uVJvzmT",horizontalScan:"pV7q_ZQy"}},"0yKJ":function(e,t,n){e.exports={address:"_3dnUJxSF",bottomline:"NvihmHhr",addressLine:"_1UK6XxYu",horizontalScan:"_3VDdNcpp"}},"1R20":function(e,t,n){},"1tfv":function(e,t,n){"use strict";t.a={WechatDirect:3,UniversalPay:10050}},"2Pqc":function(e,t,n){e.exports={nameArea:"_207UXmFS",name:"_2FyV2ToV",text:"_25aQu4ow",price:"_18cPPiye",questionIcon:"_nXTc1Jt",questionDialog:"iK0vh05u",question:"_1d2-PSxj",horizontalScan:"_3m4a-hmg"}},"2W6z":function(e,t,n){"use strict";var r=function(){};e.exports=r},"32Nq":function(e,t,n){e.exports={modalCartList:"FzeTXdKd",titleCartSku:"_2eUg3fCf",cartContent:"_2nTVFCTP",skuList:"_2I6B4yA1",cartSkuItem:"WbAzXl55",skuSelectedRightDesc:"_2ScUV4rT",skuSelectedName:"_1zg1w7m9",skuSelectedPricePrefix:"_1AsyBzsJ",skuSelectedPrice:"_1qiSe_9J",skuSelectedSinglePrice:"_1MCU61ji",yen:"_2Q_nMSu7",skuSelectedDelete:"SRwWohQa",skuSelectedNum:"zcOmj4vh",empty:"_3Pt0HhJv",buyMoreBtn:"_26D3yYMZ",cartTotal:"_18iO4-v2",cartBottomBtn:"_2CVKtFrJ",cartDiscount:"_2hRtMz5I",payPrice:"gNCgaRSJ",couponPrice:"_3E-5BsHY",horizontalScan:"_1d7lJ73Q"}},"3EMY":function(e,t,n){var r=n("efXN");"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n("aET+")(r,a);r.locals&&(e.exports=r.locals)},"3cYt":function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},"3oyJ":function(e,t,n){e.exports={container:"_1KXxDdpj",paymentlistv2:"_3SPixsNP",channelBottomContent:"dUZr_cqC",placeholder:"_1yNGB6ns",group:"DEV9y_oe",groupUnspreadContainer:"_28ZaMpmL",groupUnspread:"_2QsxsnqX",groupTitle:"_1ISgtFxl",groupSpreadTitle:"_3n6U5qsG",groupExtensionContent:"_1MxX-d9W",groupSubtitle:"_1ZIqZ-g9",groupSubtitleIcon:"_2zDfFEwJ",combineItems:"_2Ho_SGcd",groupBorder:"_2o34Mu3W",groupSelectedSvg:"_28h4CsHl",groupSelected:"_2Z-dRROu",unableText:"s_SbzFCI",horizontalScan:"_3fC2HaQb"}},"4+4F":function(e,t,n){"use strict";var r=n("iuD5");t.a=function(e){var t=e.payload,n=e.error_msg,a=e.error_code,o=e.page;Object(r.a)({page:o,error_message:n,payload:t,error_code:a},{bizSide:"consumer-platform-fe",appId:"100603",testAppId:"100211"})}},"4V74":function(e,t,n){"use strict";var r=n("M2CY"),a=n("KoDT"),o=n("whv1");t.a=function(e){var t,n,i,s,c=e.paymentType,l=e.hostName,u=e.userAgent;l=location.hostname,u||(u="undefined"!=typeof window&&(window.navigator.userAgent||window.navigator.vendor||window.opera)||"");var d=Object(a.a)();t=d.isNativePlatform,n=d.isWeChatPlatform,s=d.isWeChatMiniProgram,i=d.isTinyNativePlatform;var p=!(!u||!u.match(/phh_ios_version/i)&&!u.match(/phh_android_version/i)),m=r.a.get({isModuleVersion:p,hostName:l});if(c===o.a.WeChat)return t||n||i?m.AppID.WeChat:m.AppID.WeChatH5Pay;if(c===o.a.AliPay)return t||i?m.AppID.AliPay:m.AppID.AliPayWeb;if(c===o.a.QQPay)return t?m.AppID.QQ:m.AppID.QQPublicPayment||m.AppID.QQPublic;if(c===o.a.ApplePay)return m.AppID.ApplePay;if(c===o.a.AliPayDirectDebit)return m.AppID.AliPayDirectDebit;if(c===o.a.HBInstallmentPay)return m.AppID.HBInstallmentPay;if(c===o.a.UnionPay){if(t)return 42001}else{if(c===o.a.FriendPay)return m.AppID.FriendPay;if(c===o.a.HBPay)return 322;if(c===o.a.DuoDuoPay)return 97;if(c===o.a.XianYongHouFu)return"m.hutaojie.com"===l?s?119:n?118:115:s?131:n?130:122;if(c===o.a.DuoDuoPayACS)return 135;if(c===o.a.CreditCardInstallmentPay)return 45001}return m.AppID.WeChat}},"5HhQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){var n=e%t;return n<0?n+t:n};t.default=r},"5Pt6":function(e,t,n){var r=n("wekK"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},"6B3Q":function(e,t,n){"use strict";var r={Success:10001,Paying:10002,Failed:10003,NotFound:10004},a={AliPayDirectDebit:{Rollback:1e4,Unsign:10001,Paying:10002,Success:10003,Failed:10004,Unknown:16666},WechatDirectPayQuery:r,Universal:r,UniversalException:{CHANCE_EXCEEEDED:-999999,QOGIR_EXCEPTION:-999998,QOGIR_PREMATURE_END:-999997},PayStatus:{Unpayed:0,Payed:2,RefundApplied:3,Refunded:4},ParentOrderStatus:{Unpayed:0,Payed:1,Canceled:2}};t.a=a},"6acW":function(e,t,n){var r=n("dt0z"),a=n("gQMU");e.exports=function(e){return a(r(e).toLowerCase())}},"6nK8":function(e,t,n){var r=n("dVn5"),a=n("fo6e"),o=n("dt0z"),i=n("9NmV");e.exports=function(e,t,n){return e=o(e),void 0===(t=n?void 0:t)?a(e)?i(e):r(e):e.match(t)||[]}},"79/T":function(e,t,n){var r=n("sgoq")(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});e.exports=r},"79DA":function(e,t,n){var r=n("7Fyt"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},"79ez":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"@-webkit-keyframes _2fY-0cqS{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _2fY-0cqS{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._2T3MNPwg,._14Av0e22{width:.99rem;height:.4rem;border-radius:.04rem;background-color:#f8f8f8;position:relative;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-flex-direction:column}._1ZwXP2oj._14Av0e22,._2T3MNPwg._1ZwXP2oj{height:.58rem}._14Av0e22{background-color:#fdf3f2}._14Av0e22._1ZwXP2oj{height:.58rem}._14Av0e22 ._298vxvdk{color:#fff;background-color:#e02e24}._298vxvdk{position:absolute;top:0;left:0;padding-left:.03rem;padding-right:.03rem;font-size:.1rem;background-color:#ebebeb;border-top-left-radius:.04rem;border-bottom-right-radius:.04rem}._3I5ESJjt,._298vxvdk,.mn2qKN_8,.Njggb0W3{color:#58595b;height:.12rem;line-height:.12rem}._3I5ESJjt,.mn2qKN_8,.Njggb0W3{font-size:.12rem;text-align:center;overflow:visible}.Njggb0W3{color:#e02e24}.mn2qKN_8{color:#9c9c9c}._2fIkar-1,._2imH6L-E,._3JvB3rx_{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.04rem;font-size:.12rem;text-align:center}._2fIkar-1{color:#e02e24}._3JvB3rx_{color:#9c9c9c}.pdd_payment_list_elder_mode ._2T3MNPwg,.pdd_payment_list_elder_mode ._14Av0e22{width:1.54rem;height:.58rem}.pdd_payment_list_elder_mode ._3I5ESJjt,.pdd_payment_list_elder_mode .mn2qKN_8,.pdd_payment_list_elder_mode .Njggb0W3{height:.16rem;font-size:.16rem;line-height:.16rem}.pdd_payment_list_elder_mode ._2fIkar-1,.pdd_payment_list_elder_mode ._2imH6L-E,.pdd_payment_list_elder_mode ._3JvB3rx_{height:.16rem;margin-top:.06rem;line-height:.16rem;font-size:.16rem}",""]),t.locals={installment:"_2T3MNPwg",selectedInstallment:"_14Av0e22",hasPromotionContent:"_1ZwXP2oj",promotionContent:"_298vxvdk",number:"_3I5ESJjt",selectedNumber:"Njggb0W3",disableNumber:"mn2qKN_8",money:"_2imH6L-E",selectedMoney:"_2fIkar-1",disableMoney:"_3JvB3rx_",horizontalScan:"_2fY-0cqS"}},"7Fyt":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"@-webkit-keyframes db6zC2J4{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes db6zC2J4{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._1gleTZu3,.YzrsYunx,.Z_PzP4Uo{position:absolute;height:.4rem;top:.48rem;left:.44rem;right:0;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.pdd_payment_list_v2_mode ._1gleTZu3,.pdd_payment_list_v2_mode .YzrsYunx,.pdd_payment_list_v2_mode .Z_PzP4Uo{top:.5rem}.Z_PzP4Uo{height:1.38rem}._1gleTZu3,.Z_PzP4Uo{top:.56rem;padding-bottom:.02rem}._1gleTZu3{height:.7rem}.urc_w4Av{margin-right:.1rem}",""]),t.locals={hbInstallmentList:"YzrsYunx",hbInstallmentList4Elder:"Z_PzP4Uo",hbInstallmentList2Elder:"_1gleTZu3",installmentContainer:"urc_w4Av",horizontalScan:"db6zC2J4"}},"7HEc":function(e,t,n){"use strict";var r=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.children,r=e.startIndex,i=e.startX,s=e.pageX,c=e.viewLength,l=e.resistance,u=a.default.Children.count(n)-1,d=r+(i-s)/c;l?d<0?d=Math.exp(d*o.default.RESISTANCE_COEF)-1:d>u&&(d=u+1-Math.exp((u-d)*o.default.RESISTANCE_COEF)):d<0?t=((d=0)-r)*c+s:d>u&&(t=((d=u)-r)*c+s);return{index:d,startX:t}};var a=r(n("q1tI")),o=r(n("UlPe"))},"7MjH":function(e,t,n){e.exports={contact:"h6mab8Em",horizontalScan:"VjEGNA7W"}},"7VIw":function(e,t,n){"use strict";var r=n("Zh31");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"SwipeableViewsContext",{enumerable:!0,get:function(){return a.SwipeableViewsContext}});var a=r(n("xZgz"))},"7wT/":function(e,t,n){e.exports={listTitle:"_2YyJcg_B",noBorder:"SJt1nAY0",horizontalScan:"-TZQ4Pyw"}},"8Pq9":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,".wAJ12ZbP{position:relative;width:100%;background-color:#fff}",""]),t.locals={payment:"wAJ12ZbP"}},"8SQk":function(e,t,n){"use strict";var r=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("q1tI")),o=function(e,t){var n=!1,r=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var o=a.default.Children.map(e.children,r)[e.index];null!==o&&void 0!==o&&o===a.default.Children.map(t.children,r)[t.index]&&(n=!0)}return n};t.default=o},"9K/W":function(e,t,n){e.exports={bgFill:"aXuJ-1SC",bgFillShow:"_3FlpEG1j",container:"_2u4RC_Sy",visibleContainer:"_1GcQ_LEN"}},"9NmV":function(e,t){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",a="\\d+",o="[\\u2700-\\u27bf]",i="[a-z\\xdf-\\xf6\\xf8-\\xff]",s="[^\\ud800-\\udfff"+n+a+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",u="[A-Z\\xc0-\\xd6\\xd8-\\xde]",d="(?:"+i+"|"+s+")",p="(?:"+u+"|"+s+")",m="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",f="[\\ufe0e\\ufe0f]?"+m+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",c,l].join("|")+")[\\ufe0e\\ufe0f]?"+m+")*"),h="(?:"+[o,c,l].join("|")+")"+f,v=RegExp([u+"?"+i+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,u,"$"].join("|")+")",p+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,u+d,"$"].join("|")+")",u+"?"+d+"+(?:['’](?:d|ll|m|re|s|t|ve))?",u+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,h].join("|"),"g");e.exports=function(e){return e.match(v)||[]}},"9ZFI":function(e,t,n){},"9tPo":function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var a,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(a=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},"Ai8/":function(e,t,n){e.exports={receivePromotionItem:"_3vJ9FSjm",buttonWrap:"_2Ku3jCrL",btn:"_3NnDip3N",isTakenOut:"_2av15sjf",hasNum:"_18Jh51Ik",horizontalScan:"_2bRr-jjG"}},BXy8:function(e,t,n){e.exports={"go-top":"_9wRQEN3q","top-button-hide":"_29NPvHYU","top-button-show":"_1mzWEyiw",container:"i3tFT5xs",mainContainer:"_1Pgx6eWp",title:"_1IwZeZUn",catalogTitle:"_ac67ckl",close:"_1G98piv9",highlight:"_3IJSwl5-",shield:"_2sz-EN1t",blockContainer:"_2PtXU0i7",block:"_1d56Yt92",blockMargin:"_2sqDMntk",slot:"PJa-xW5P",slotActive:"_15sflkmk",symptomSlot:"_1bsFLgbX",key:"_3ihTE7be",input:"bH4OaA1G",clearBtn:"_3k50PVrt",temperaturePlaceholder:"_3QGyvOxv",arrow:"adepBZB-",symptomOption:"_2i4pj9-I",selected:"VjZUTqhW",boolSlot:"_3cAT4pab",options:"_21R9m8_k",bottomBtn:"_1tCjXyKe",bottomBtnPadding:"_4Ismrpqv",bottomBtnContainer:"_3TvAbGYu",mask:"_18-xIezQ",selectIcon:"_2uzs2quH",confirm:"_2W0ddzSH",confirmUnselectedBtn:"_3tMYb5DW",confirmSelectedBtn:"_3jdRipwt",occupationTextContainer:"_3567K4BF",occupationText:"xFTeMrwe",catalog:"_1OvPTSAe",catalogText:"_1ZFOi09h",catalogContent:"M0G_eVMZ",catalogPaddingBottom:"_1F89q9Ly",catalogTable:"_12I0IW7C",catalogHeader:"_2_W1hy6Z",catalogRow:"_3UE8EyGQ",catalogItem:"hzB9k6wB",headerItem1:"_28HBqSS7",headerItem2:"wv2CtA2_",headerItem3:"_25GTTWhN",catalogItem1:"_4na2uvH4",catalogItem2:"_2PbDz-Iv",catalogItem3:"_3fYTxS9f",horizontalScan:"_1RZF0lXd"}},BkRI:function(e,t,n){var r=n("OBhP"),a=1,o=4;e.exports=function(e){return r(e,a|o)}},Bogp:function(e,t,n){e.exports={promotionInfo:"_3pIv2nch",high:"_2MZwnMp0",titleDisplayName:"_2aH3Qrcl",hasDetail:"_1SiP3oki",detailShown:"_3jGbIh4K",timeDisplayName:"_37wENJkl",detail:"_19-MYscz",ruleDisplayName:"HoXaR_VH",gray:"Ml-9CzBA",horizontalScan:"_3hsZm4B0"}},CzHs:function(e,t,n){e.exports={ocRefresh:"_2Kk6J62f",netIcon:"_3WnRquCq",note:"XwtomzCr",refreshBtn:"_25FLs9De",horizontalScan:"_3iPpdlMl"}},DOSG:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,'@-webkit-keyframes _3kZhAigz{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _3kZhAigz{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._3s5fmV9c{height:.36rem;line-height:2.72;text-align:center;font-size:0;border-bottom:0;display:block;position:relative;border:none!important}._3s5fmV9c:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid #ededed}._3s5fmV9c span{font-size:.13rem}._3s5fmV9c .HPDn3v3G{padding:0 .03rem}._3s5fmV9c ._1p9-IUem{display:inline-block;height:.14rem;margin:0 .05rem 0 0;width:.14rem;background:url(https://funimg.pddpic.com//order_checkout/pay_icon_v6.png) no-repeat;background-size:1.62rem .14rem;position:relative;top:.02rem;right:-.005rem}._3s5fmV9c ._1p9-IUem._3W830_qi,._3s5fmV9c ._1p9-IUem._34s21a2y{background-position:-.18rem 0}._3s5fmV9c ._3pVk5QL2{display:inline-block;font-size:0}._3s5fmV9c ._143cvGH-{font-size:0}._3s5fmV9c .OQTfixv1{display:inline-block;font-size:.13rem;color:#58595b}._3s5fmV9c ._1iXZpmdh{font-size:0}._3s5fmV9c ._1iXZpmdh:not(:last-of-type):after{content:"\\3001";font-size:.13rem}._3s5fmV9c ._1iXZpmdh span{font-size:.13rem}._3gKyS-Db{display:inline-block;width:.1rem;height:.1rem;margin-right:.06rem;margin-left:.06rem;fill:#666}.pdd_payment_list_elder_mode ._3s5fmV9c{height:.4rem;line-height:.4rem}.pdd_payment_list_elder_mode ._3s5fmV9c .OQTfixv1{font-size:.16rem}.pdd_payment_list_elder_mode ._3s5fmV9c ._3gKyS-Db{width:.1rem;height:.1rem}',""]),t.locals={more:"_3s5fmV9c",space:"HPDn3v3G",moreIcon:"_1p9-IUem",icon1:"_34s21a2y",icon5:"_3W830_qi",payment:"_3pVk5QL2",wrapper:"_143cvGH-",hint:"OQTfixv1",item:"_1iXZpmdh",arrowsDownSvg:"_3gKyS-Db",horizontalScan:"_3kZhAigz"}},DdEg:function(e,t,n){e.exports={payHint:"_1sASCkar",payText:"_3K83fiA_",bottom:"_3cXEe2-_",startHide:"XkonakPy",toHide:"_2dzzl3nE",startDisplay:"_2i6LRdfq",toDisplay:"G9AHJOfM",horizontalScan:"_2qTW5z1Z"}},"E+oP":function(e,t,n){var r=n("A90E"),a=n("QqLw"),o=n("03A+"),i=n("Z0cm"),s=n("MMmD"),c=n("DSRE"),l=n("6sVZ"),u=n("c6wG"),d="[object Map]",p="[object Set]",m=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||u(e)||o(e)))return!e.length;var t=a(e);if(t==d||t==p)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(m.call(e,n))return!1;return!0}},Em2t:function(e,t,n){var r=n("bahg"),a=n("quyA"),o=n("0JQy");e.exports=function(e){return a(e)?o(e):r(e)}},EwQA:function(e,t,n){var r=n("zZ0H");e.exports=function(e){return"function"==typeof e?e:r}},FIFS:function(e,t,n){},FRve:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},FZoo:function(e,t,n){var r=n("MrPd"),a=n("4uTw"),o=n("wJg7"),i=n("GoyQ"),s=n("9Nap");e.exports=function(e,t,n,c){if(!i(e))return e;for(var l=-1,u=(t=a(t,e)).length,d=u-1,p=e;null!=p&&++l<u;){var m=s(t[l]),f=n;if(l!=d){var h=p[m];void 0===(f=c?c(h,m,p):void 0)&&(f=i(h)?h:o(t[l+1])?[]:{})}r(p,m,f),p=p[m]}return e}},FfPP:function(e,t,n){var r=n("idmN"),a=n("hgQt");e.exports=function(e,t){return r(e,t,function(t,n){return a(e,n)})}},G2ut:function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},G7xb:function(e,t,n){e.exports={skuSelectorCloseBtn:"ca4h-IAJ",skuSelectorBody:"_283aPR7a",safeDistance:"Fd9_BrZ5",skuSelectorContainer:"_3nm09z2v",skuSelectorTitleBar:"PY1t6RpZ",skuSelectorHead:"_3oYb1eF3",skuSelectorHeadRight:"_1KJfUbC-",skuSpecs:"_2VFFf5do",selectorNumber:"_3hptWyO7",sizeDesc:"_3jcgzD1i",skuSizeChartRed:"_3QmlGVyu",skuSpecsKey:"_2XbTuPaT",skuSpecValueList:"FkBrLB0v",hotSale:"_4tBXN2sQ",skuSpecValue:"_3dLL_oHX",hotSaleIcon:"_6XG3isQq",skuSpecValueSelected:"_1MhWfqip",skuSpecValueDisable:"_2BgYfOy2",skuSelectorInput:"_1nDpcwrJ",numberStepper:"_2bZCOrbb",skuSelectorReduce:"xxfw656X",skuSelectorReduceEnable:"_3zDXEDTd",skuSelectorReduceDisable:"_114gds5J",skuSelectorIncrease:"_3t4NDMyO",skuSelectorIncreaseEnable:"NYYDeLbf",skuSelectorIncreaseDisable:"_1BrJIVXX",horizontalScan:"_2BI36FBQ"}},GANf:function(e,t,n){e.exports={agreement:"G2lU7b_3",horizontalScan:"fHPseu6S"}},HNyE:function(e,t,n){e.exports={container:"_2Ny6Bvgd",icon:"_2uzDwPP4",title:"caBUfFXg",dot:"_2NOQtQGO",dot1:"R9za4ygw",dot2:"vWabkAUi",dot3:"_2M_gZteX","loading-template-v2-dot1":"_1Vn2jmNY","loading-template-v2-dot3":"_rYxdl4y","loading-template-v2-dot2":"_75vPQyHx"}},JZM8:function(e,t,n){var r=n("FfPP"),a=n("xs/l")(function(e,t){return null==e?{}:r(e,t)});e.exports=a},JiL4:function(e,t,n){e.exports={promotionCell:"_ts7NNxg",stripe:"t5y6S3ui",desc:"qSsXm1rW",hasArrow:"_3X6xzQPn",red:"_1S0Qqpcc",displayItem:"tUFs3O2Q",bubble:"g07iV4XU",promotion3:"_37lfnv2E",horizontalScan:"_3nKMTU5w"}},KJF0:function(e,t,n){"use strict";var r=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return c.default}});var a=r(n("rRnn")),o=r(n("7HEc")),i=r(n("UlPe")),s=r(n("8SQk")),c=r(n("5HhQ"))},KZJt:function(e,t,n){e.exports={displayItem:"_11VJ2k3s",bubble:"YodO_ZM0",promotion3:"_2mxSl1aQ",horizontalScan:"_3SLzzpij"}},KxBF:function(e,t){e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}},"L/R6":function(e,t,n){e.exports={container:"_3-rSWiHc",icon:"raHIMvRi",title:"eIbWbqkK"}},LVsN:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("MVZn"),a=n.n(r),o=n("q1tI"),i=n.n(o),s=n("MpJ2"),c=n("KoDT"),l=n("h3qu");function u(e){var t=e.elementType,n=e.onFocus,r=void 0===n?function(){}:n,u=e.onBlur,d=void 0===u?function(){}:u,p=e.autoFocus,m=void 0!==p&&p,f=e.autoFocusTime,h=void 0===f?0:f,v=e.className,g=e.placeholder,y=e.maxLength,_=e.type,b=void 0===_?"text":_,k=e.onChange,I=void 0===k?function(){}:k,S=e.defaultValue,w=e.value,x=e.id,C=e.extraParams,E=Object(o.useRef)(null);Object(o.useEffect)(function(){m&&setTimeout(function(){var e;null===E||void 0===E||null===(e=E.current)||void 0===e||e.focus(),Object(c.a)().system===l.b.Android&&Object(s.g)("JSKeyboard","showKeyboard")},h)},[]);var P=function(){var e=Object(c.a)();return e.system===l.b.IOS&&Object(l.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo}(),N=a()({type:b,onFocus:function(){window.__currentInput.focusId=x,P&&(window.__currentInput.scrollYWhenFocus=window.scrollY),r()},onBlur:function(){var e;P&&function(e,t){setTimeout(function(){var n;(null===(n=window.__currentInput)||void 0===n?void 0:n.focusId)===t&&(window.scrollTo(0,e),window.__currentInput.focusId=null)},0)}(null===(e=window.__currentInput)||void 0===e?void 0:e.scrollYWhenFocus,x),d()},ref:E,className:v,placeholder:g,maxLength:y,onChange:I,defaultValue:S,value:w,id:x},C);return"textarea"===t?i.a.createElement("textarea",N):i.a.createElement("input",N)}window.__currentInput={scrollYWhenFocus:0,focusId:null}},LrBD:function(e,t,n){e.exports={disablePromotionItem:"_6PVJ16lr",disableWrap:"_2eg0HQDk",horizontalScan:"_2imVJkft"}},LuAP:function(e,t,n){},LzYn:function(e,t,n){var r=n("8Pq9"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},M2CY:function(e,t,n){"use strict";var r=n("cDf5"),a=n.n(r),o=n("MVZn"),i=n.n(o),s=n("KoDT"),c={},l=Object(s.a)(),u="undefined"!=typeof location&&location.hostname.includes("yangkeduo.com"),d=!l.isNativePlatform&&u;var p={loggingURL:function(e){return"undefined"!=typeof window&&window.__LogingUrl__?window.__LogingUrl__:e?"https://th.yangkeduo.com/t.gif":"https://th.pinduoduo.com/t.gif"}(d),logRoutes:{perf:"https://tp.pinduoduo.com/p.gif",error:"https://te.pinduoduo.com/e.gif",chat_error:"https://te.pinduoduo.com/e.gif",real_error:"https://tne.pinduoduo.com/tne.gif",ad:function(e){return"undefined"!=typeof window&&window.__AdLogingUrl__?window.__AdLogingUrl__:e?"https://ta.yangkeduo.com/t.gif":"https://ta.pinduoduo.com/t.gif"}(d),tracking:"https://tldas.pinduoduo.com/e.gif"}},m={shop:{shopID:2,name:"拼多多",logo:"https://pinduoduoimg.yangkeduo.com/base/logo.jpg",weChatTimelineShareDisabled:!1,qqTimelineShareDisabled:!0},loggingURL:p.loggingURL,httpsLoggingURL:p.loggingURL,wxAppLoggingURL:"https://xcxapp.pinduoduo.com/t.gif",qqAppLoggingURL:"https://xcxapp.pinduoduo.com/qqt.gif",logRoutes:i()({download:"https://at.pinduoduo.com/p"},p.logRoutes),httpsLogRoutes:i()({},p.logRoutes),cmtURL:"http://cmtw.pinduoduo.com/api/ajax",httpsCmtURL:"https://cmtw.pinduoduo.com/api/ajax",pushDomain:"ws://ws.pinduoduo.com/",chatDomain:"ws://ws.pinduoduo.com/",wssDomain:"wss://ws.pinduoduo.com/",fileDomain:"http://file.pinduoduo.com/",httpsFileDomain:"https://file.pinduoduo.com/",qqFollowTip:"感谢关注拼多多",AppID:{FriendPay:-1,WeChat:2,WeChatWAPPay:20,SMS:5,AliPay:6,QQ:12,Weibo:11,AliPayWeb:9,QQConnect:13,QQPublicOld:27,QQPublic:30,ApplePay:31,AliPayDirectDebit:35,WeChatH5Pay:38,HBInstallmentPay:52,UnionPay:78,UnionPayWeb:79},ApiKey:{WeChat:"wx839691cce7c102bb",Weibo:"3907421985",QQConnect:"101273489",QQPublicOld:"200633114",QQPublic:"200675334",QQUIN:"1419183687",QQPublicTrack:"10000096",QQPublicMid:"1316857601",BaiduStatistics:"865a6952adbb55a10d86810cdcc6864a"},RedirectURI:{AliPayDirectDebit:"pinduoduoalipays://",Weibo:"http://mobile.yangkeduo.com/wboauth_callback.html",QQConnect:"http://mobile.yangkeduo.com/qqoauth_callback.html"},imgShareDomain:"http://m.pin3pin.com/",ContactUrl:"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170962&idx=1&sn=8763710a673d7b76f418a7ae76cff86c#rd",ForceContactUrl:"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170998&idx=1&sn=684606e474788e7f191f6f6c68d0dfe4#rd",QQContactUrl:"http://post.mp.qq.com/material/show/31343139313833363837-1472733830-1464276288782813-0.html?_wv=2281701505&v=3&sig=73182fcdc7ed1c0b6aeb3ce78501d00b&_bid=2321",thirdLevelLoginPath:"jkr_report.html"},f={AppID:{WeChat:24},ApiKey:{WeChat:"wx20392b0342c8af91"}},h={hutaojie:1,mobile:2,weipin:3,app:4,huabei:17,xibei:18,dongbei:19,huazhong:21,huadong:22,dongnan:23,xinan:24,panduoduo:25,sc:26,hybrid:"hybrid",hybridTest:"hybridTest",huanan:40,hzsc:41,dnsc:42,dbsc:43,xbsc:44,xnsc:45,hnsc:46,hbsc:47,pddpt:48,m:49,mm:66,myqxgs:68,mobpinduoduo:72,mmpinduoduo:73,mobilepinduoduo:74,mobileddlequ:75,nvude3:82,mobnvude3:83,mpinduoduo:63,mddlequ:85,hhngpinduoduo:129},v="https://mobile.yangkeduo.com/",g="https://mobile.yangkeduo.com/";c[h.hutaojie]={},c[h.mobile]={domain:"https://mobile.yangkeduo.com/",BeiTaiShareDomains:["http://mobile.pinduoduo.net/"]},c[h.weipin]={domain:"https://weipin.yangkeduo.com/",AppID:{WeChat:h.weipin},ApiKey:{WeChat:"wx51e5fe8c95f71b20"}},c[h.huabei]={domain:"https://huabei.yangkeduo.com/",AppID:{WeChat:h.huabei},ApiKey:{WeChat:"wx4044e9709b7188ea"}},c[h.xibei]={domain:"https://xibei.yangkeduo.com/",AppID:{WeChat:h.xibei},ApiKey:{WeChat:"wxbc80866520cc300d"}},c[h.dongbei]={domain:"https://dongbei.yangkeduo.com/",AppID:{WeChat:h.dongbei},ApiKey:{WeChat:"wx27901e8ab752ed35"}},c[h.huazhong]={domain:"https://huazhong.yangkeduo.com/",AppID:{WeChat:h.huazhong},ApiKey:{WeChat:"wx95c952f67a727090"}},c[h.huadong]={domain:"https://huadong.yangkeduo.com/",AppID:{WeChat:h.huadong},ApiKey:{WeChat:"wx03908118b84f285a"}},c[h.dongnan]={domain:"https://dongnan.yangkeduo.com/",AppID:{WeChat:h.dongnan},ApiKey:{WeChat:"wxff2e8dc2762c5b92"}},c[h.xinan]=i()({domain:"https://xinan.yangkeduo.com/"},f),c[h.panduoduo]={},c[h.sc]={domain:"https://sc.yangkeduo.com/",AppID:{WeChat:h.sc},ApiKey:{WeChat:"wx32b0d9cdd390ebf0"}},c[h.app]={domain:"https://app.yangkeduo.com/",AppID:{WeChat:4},ApiKey:{WeChat:"wx77d53b84434b9d9a"}},c[h.hybrid]={shareDomain:"https://mobile.yangkeduo.com/",AppID:{WeChat:4},ApiKey:{WeChat:"wx77d53b84434b9d9a"}},c[h.hybridTest]={};var y="http://mp.weixin.qq.com/s?__biz=MzAxMjcyMTkwOA==&mid=401487202&idx=1&sn=37de9db39432edc32e1eb90d885d7a23#rd";function _(e,t,n){n&&(t.apiDomain=t.apiDomain?t.apiDomain:n,t.apiDomainNew=t.apiDomain,t.apiDomainV3=t.apiDomain);var r=t.domain||t.shareDomain||v;for(var o in t.shareDomain||(t.shareDomain=r),t.shareDomains={},e)if(e.hasOwnProperty(o)){var i=e[o];[e.QQChatSession,e.QQZone].indexOf(i)>=0?t.domain&&t.domain.indexOf("m.hutaojie.com")>=0?t.shareDomains[i]=t.shareDomain:t.shareDomains[i]=g:t.shareDomains[i]=t.shareDomain}return function(){for(var e={},t=0;t<arguments.length;t++)"object"===a()(arguments[t])&&b(e,arguments[t]);return e}(m,t)}function b(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o=a()(r);"number"===o||"string"===o||"boolean"===o?e[n]=r:"object"===o?(e[n]=e[n]||{},b(e[n],r)):k(r)&&(e[n]=e[n]||[],b(e[n],r))}}function k(e){return"[object Array]"===Object.prototype.toString.call(e)}c[h.huanan]={shareDomain:"https://huanan.yangkeduo.com/",AppID:{WeChat:40},ApiKey:{WeChat:"wxaffd94b821032481"},ContactUrl:y},c[h.hzsc]={shareDomain:"https://hzsc.yangkeduo.com/",AppID:{WeChat:41},ApiKey:{WeChat:"wx7bca1a27af0a31ed"},ContactUrl:y},c[h.dnsc]={shareDomain:"https://dnsc.yangkeduo.com/",AppID:{WeChat:42},ApiKey:{WeChat:"wxb79645ae502205d9"},ContactUrl:y},c[h.dbsc]={shareDomain:"https://dbsc.yangkeduo.com/",AppID:{WeChat:43},ApiKey:{WeChat:"wx01e7a1f91b8c43d3"},ContactUrl:y},c[h.xbsc]={shareDomain:"https://xbsc.yangkeduo.com",AppID:{WeChat:44},ApiKey:{WeChat:"wxc50a66d9b6d566ed"},ContactUrl:y},c[h.xnsc]={shareDomain:"https://xnsc.yangkeduo.com",AppID:{WeChat:45},ApiKey:{WeChat:"wx52457b6561fcd804"},ContactUrl:y},c[h.hnsc]={shareDomain:"https://hnsc.yangkeduo.com",AppID:{WeChat:46},ApiKey:{WeChat:"wx8e75952076e03567"},ContactUrl:y},c[h.hbsc]={shareDomain:"https://hbsc.yangkeduo.com",AppID:{WeChat:47},ApiKey:{WeChat:"wx7388833e69aafd89"},ContactUrl:y},c[h.pddpt]={shareDomain:"https://pddpt.yangkeduo.com",AppID:{WeChat:48},ApiKey:{WeChat:"wxe1b0f22089fadce1"},ContactUrl:y},c[h.m]={domain:"https://m.ishangtong.com",shareDomain:"https://m.ishangtong.com",AppID:{WeChat:48},ApiKey:{WeChat:"wxe1b0f22089fadce1"},ContactUrl:y},c[h.mm]={shareDomain:"https://mm.ishangtong.com",AppID:{WeChat:66},ApiKey:{WeChat:"wxf05b577296a1b6ec"},ContactUrl:y},c[h.myqxgs]={domain:"https://m.yiqixiegushi.com",shareDomain:"https://m.yiqixiegushi.com",AppID:{WeChat:66},ApiKey:{WeChat:"wxf05b577296a1b6ec"},ContactUrl:y},c[h.mobpinduoduo]={shareDomain:"https://mob.pinduoduo.com",AppID:{WeChat:56},ApiKey:{WeChat:"wx1e2715638762a51b"},ContactUrl:y},c[h.mmpinduoduo]={shareDomain:"https://mm.pinduoduo.com",AppID:{WeChat:57},ApiKey:{WeChat:"wxa19650a24138625a"},ContactUrl:y},c[h.mobileddlequ]=i()({shareDomain:"https://mobile.ddlequ.com/"},f),c[h.mddlequ]=i()({shareDomain:"https://m.ddlequ.com/"},f),c[h.mobilepinduoduo]={domain:"https://mobile.pinduoduo.com",shareDomain:"https://mobile.pinduoduo.com"},c[h.nvude3]=function(){var e="https://m.nvude3.com";return{useProxyDomain:1,domain:e,shareDomain:e,AppID:{WeChat:67},ApiKey:{WeChat:"wx15ee6b92001c5295"},ContactUrl:y,loggingURL:e+"/proxy/th/t.gif",httpsLoggingURL:e+"/proxy/th/t.gif",logRoutes:{error:e+"/proxy/te/e.gif",chat_error:e+"/proxy/te/e.gif",real_error:e+"/proxy/tne/tne.gif"},httpsLogRoutes:{error:e+"/proxy/te/e.gif",chat_error:e+"/proxy/te/e.gif",real_error:e+"/proxy/tne/tne.gif"}}}(),c[h.mobnvude3]={shareDomain:"https://mob.nvude3.com",AppID:{WeChat:65},ApiKey:{WeChat:"wx86161385b94a2ed7"},ContactUrl:y},c[h.mpinduoduo]={shareDomain:"https://mobile.yangkeduo.com/",AppID:{WeChat:h.mpinduoduo},ApiKey:{WeChat:"wx2993126642818cea"}},c[h.hhngpinduoduo]={shareDomain:"https://hhng.pinduoduo.com/",AppID:{WeChat:h.hhngpinduoduo},ApiKey:{WeChat:"wx8aeafb2c4c5252fa"}};var I={hutaojie:{m:"hutaojie",app:"apptest"},yangkeduo:{mobile:"mobile",app:"app",huabei:"huabei",xibei:"xibei",dongbei:"dongbei",xinan:"xinan",huazhong:"huazhong",dongnan:"dongnan",huadong:"huadong",panduoduo:"panduoduo",sc:"sc",huanan:"huanan",hzsc:"hzsc",dnsc:"dnsc",dbsc:"dbsc",xbsc:"xbsc",xnsc:"xnsc",hnsc:"hnsc",hbsc:"hbsc",pddpt:"pddpt",weipin:"weipin"},ishangtong:{m:"m",mm:"mm"},yiqixiegushi:{m:"myqxgs"},pinduoduo:{mob:"mobpinduoduo",mm:"mmpinduoduo",mobile:"mobilepinduoduo",m:"mpinduoduo",hhng:"hhngpinduoduo"},nvude3:{m:"nvude3",mob:"mobnvude3"},ddlequ:{mobile:"mobileddlequ",m:"mddlequ"}};t.a={get:function(e){var t,n=function(e){var t={hostName:e||"",hasThirdLevelDomain:!1};if(!e)return t.hostName=".",t;var n=["m.ishangtong.com","m.yiqixiegushi.com","m.hutaojie.com"],r=e.split("."),a=r.length;if(a<=3)return t;for(var o=r[a-2],i=0;i<n.length;i++){var s=n[i];if(s.indexOf(o)>0)return t.hostName=s,t.hasThirdLevelDomain=!0,t}return t}((e=e||{}).hostName),r=n.hostName||".",a=r.split(".");if(e.isModuleVersion){var o="undefined"!=typeof window?location.href.indexOf("hutaojie")>=0:r.indexOf("hutaojie")>=0;t=c[o?h.hybridTest:h.hybrid]}else a.length>=2&&I[a[1]]&&(t=c[h[I[a[1]][a[0]]]]);return t||(t=c[h.mobile]),t.hasThirdLevelDomain=n.hasThirdLevelDomain||!1,_(e.shareType,t,e.defaultApiDomain)}}},MOn9:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"Ms5+":function(e,t,n){"use strict";var r=n("whv1");n.d(t,"a",function(){return r.a});var a=n("NyLG");n.d(t,"b",function(){return a.a})},NRM5:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},NyLG:function(e,t,n){"use strict";t.a={Normal:"",Tail:"tail",Combine:"combine"}},Nz43:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"@charset \"UTF-8\";\n\n/**\r\n * base.scss, 一些公共的代码\r\n * @author fushi(fushi@yiran.com)\r\n */\n\n/**\r\n * base variable\r\n */\n\n/**\r\n * function 区域\r\n */\n\n/**\r\n * mixin 区域\r\n */\n\n/**\r\n * 父元素必须是position: relative\r\n */\n\n/**\r\n * 字体icon\r\n */\n\n/**\r\n * flex 布局\r\n */\n\n/**\r\n * extend区域\r\n */\n\n/* move from _feature */\n\n/*原来的逻辑*/\n\n/*\r\n* 注意：需要按钮是position(absolute,relative)定位的,按钮没有宽高的，可能会出bug.\r\n* 按钮before已经有样式的就用data-active=after-{type}，after同理。\r\n* eg:<div data-active='before-red'>button</div>\r\n* https://jira2.corp.yiran.com/browse/PDD-10191\r\n* 红色按钮 highlight状态增加 #000000 15%\r\n* 白色按钮 highlight状态增加 #000000 5%\r\n* 红色线框按钮 highlight状态增加 #E02E24 5%\r\n*/\n\n/**\r\n * @file variables.scss, 相关的变量\r\n * @author fushi(fushi@yiran.com)\r\n */\n\n/**\r\n * @file border1px.scss, 1px在devicePixelRatio>2的方案\r\n * @author fushi(fushi@yiran.com)\r\n * updated by shiluo 2020/03/16\r\n */\n\n/**\r\n * 支持设置border-radius的1px方案\r\n * 旨在解决Android下0.5px的进度问题! --from @在渊\r\n * 经测试 在部分OPPO、小米等机型微信环境中，仍然会有右下线框显示不全的bug。\r\n */\n\n/**\r\n * 支持设置border-radius的1px方案\r\n * radius-border1px有问题时可尝试使用此方法\r\n */\n\n.fix-addr-dialog {\n  padding: .25rem .2rem .2rem .2rem;\n}\n\n.fix-addr-dialog.fix-addr-dialog-ios {\n  position: fixed;\n  top: calc(12% + .68rem);\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n\n.fix-addr-dialog-desc {\n  color: #58595B;\n  line-height: .21rem;\n  font-size: .15rem;\n  text-align: center;\n}\n\n.fix-addr-dialog-red-text {\n  color: #E02E24;\n}\n\n.fix-addr-dialog-confirm,\n.fix-addr-dialog-cancel {\n  width: 2.5rem;\n  height: .45rem;\n  text-align: center;\n  line-height: .45rem;\n  font-size: .17rem;\n  border-radius: .04rem;\n  margin-top: .12rem;\n}\n\n.fix-addr-dialog-confirm {\n  background-color: #E02E24;\n  color: #FFF;\n}\n\n.fix-addr-dialog-confirm:active {\n  color: #edbbb8 !important;\n  background-color: #c51e14 !important;\n}\n\n.fix-addr-dialog-cancel {\n  border: 1px solid #9C9C9C;\n  color: #151516;\n  background-color: #FFF;\n}\n\n.fix-addr-dialog-cancel:active {\n  color: #878789 !important;\n  background-color: #ebebeb !important;\n  border-color: #8c8c8c !important;\n}",""])},OIse:function(e,t,n){},OUj1:function(e,t,n){var r=n("79ez"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},OYUV:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},"PB+Z":function(e,t,n){var r=n("DOSG"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},PTHm:function(e,t,n){var r=n("ZZx6");e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},QROL:function(e,t,n){var r=n("vL7J");"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n("aET+")(r,a);r.locals&&(e.exports=r.locals)},RUUx:function(e,t,n){e.exports={cartBg:"j8DQFC9U",cartManagerModal:"u7LZBXUv",horizontalScan:"_1iQVfHts"}},RgGm:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("lSNA"),a=n.n(r),o=n("J4zp"),i=n.n(o),s=n("q1tI"),c=n.n(s),l=n("V00b"),u=n.n(l),d=n("TSYQ"),p=n.n(d),m=c.a.createContext({glide:function(){}}),f=m.Provider;t.b=Object(s.forwardRef)(function(e,t){var n=e.initialVisible,r=void 0===n||n,o=e.onShowStart,l=void 0===o?function(){}:o,d=e.onHideStart,m=void 0===d?function(){}:d,h=e.onShow,v=void 0===h?function(){}:h,g=e.onHide,y=void 0===g?function(){}:g,_=e.children,b=e.bgFillClassName,k=void 0===b?"":b,I=e.containerClassName,S=void 0===I?"":I,w=Object(s.useState)(!1),x=i()(w,2),C=x[0],E=x[1],P=Object(s.useState)(r),N=i()(P,2),O=N[0],D=N[1];function T(e){null===e||void 0===e||e.stopPropagation(),l(e),D(!0)}function A(e){null===e||void 0===e||e.stopPropagation(),m(e),E(!1)}function j(e){null===e||void 0===e||e.stopPropagation(),O?A(e):T(e)}return Object(s.useEffect)(function(){if(O){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,17)};e(function(){e(function(){E(!0)})})}},[O]),Object(s.useImperativeHandle)(t,function(){return{show:T,hide:A,toggle:j,visible:O}}),O?c.a.createElement("div",{className:p()(u.a.bgFill,k,a()({},u.a.bgFillShow,C)),onClick:A},c.a.createElement("div",{className:p()(u.a.container,S,a()({},u.a.visibleContainer,C)),onClick:function(e){return e.stopPropagation()},onTransitionEnd:function(e){null===e||void 0===e||e.stopPropagation(),C?v(e):(y(e),D(!1))}},c.a.createElement(f,{value:{glide:A}},_))):null})},SOyx:function(e,t,n){e.exports={modalCartSku:"_3OiG9sSU",titleCartSku:"_2uBzkCV1",horizontalScan:"YtwUZSDK"}},SeBp:function(e,t,n){e.exports={selectIcon:"_19uMAlci",disable:"_1kUzOaLf",selected:"tEKvOe46",horizontalScan:"_1MK0DCxd"}},Sq8v:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},SzcP:function(e,t,n){e.exports={"go-top":"_23sjf2-g","top-button-hide":"_1Gy_mjzz","top-button-show":"_2hYAwwGF",container:"_3R-1_eSn",picker:"_2CHHBQpW",showPicker:"_1b6vzgEQ",mask:"_2HeJzU-8",panel:"_3lv7iolB",close:"_3vCfpVTD",closeIcon:"_pDK5P8S",content:"_2QDfZ3Gd",maskBottom:"_2WdZbFoo",maskTop:"_19vTsRkW",wrapper:"_1Paw4lTJ",scrollWrap:"_2ZGlyve6",bottomBtn:"_1ZftFGyL",horizontalScan:"_1EE8lSw9"}},TKrE:function(e,t,n){var r=n("qRkn"),a=n("dt0z"),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=a(e))&&e.replace(o,r).replace(i,"")}},UlPe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},"V/7h":function(e,t,n){e.exports={disableList:"_3Pya_Q_H",displayList:"_14lOykl1",displayTitle:"_2496hhou",skuList:"_2hWJ3MhR",skuBox:"GlSkMB0Y",horizontalScan:"_3z-7Z5mo"}},V00b:function(e,t,n){e.exports={bgFill:"_3j1eCmw1",bgFillShow:"_2jUnI3MZ",container:"_1jhs4MN9",visibleContainer:"_3h5sA_T5"}},VERM:function(e,t,n){e.exports={modal:"_2i8YYhhK",noShow:"_2WyLr0L_",title:"_1xwgckgQ",horizontalScan:"_1t-8YV6a"}},VJ99:function(e,t,n){var r=n("Sq8v"),a=n("FRve");e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},"Wgq/":function(e,t,n){e.exports={discountInfo:"_27MZO91g",high:"_9HvfBBpv",discount:"_3wQ6ZDfo",gray:"_2w62lplT",discountIcon:"_3p8fGD4W",percentIcon:"_3RyZUrcl",small:"ccWKI06_",promotionName:"_2oaHBazH",horizontalScan:"_10xV5MTk"}},Wr5u:function(e,t,n){e.exports={skuSelectorDesc:"_2HvLhENT",oneLineStyle:"_2dRWBKFY",skuSelectorDescOC:"_39U91H6w",skuSelectorDescWithIcon:"_3BrHKXok",transparent:"_3O6E7nkD",skuPreSaleIcon:"_2lxyP0wq"}},XEGP:function(e,t,n){e.exports={deliveryStripe:"_3Lu5zWI4",shippingContent:"_1e3OviBJ",mainTitle:"_3G1LZKm9",subTitle:"_3kee_7lX",deliverySvg:"_3x5EVMK4",arrow:"_3DDAx0Ee",AdditionalShippingStrip:"_39T3oEvF",title:"_3bhF_DMD",closeBtn:"_3mXZPB3T",deliveryItem:"_3XsDhB5u",mainTitleFloat:"_1f74n2A5",subTitleFloat:"_3v6hXyKn",selectedSvg:"_339ExKII",notSelectedSvg:"ZKKf3N_O",horizontalScan:"EfmOOp39"}},XkPr:function(e,t,n){},Y2vK:function(e,t,n){"use strict";var r=n("KoDT"),a=n("h3qu"),o=n("MpJ2"),i=n("whv1"),s=function(){};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;var n=Object(r.a)();n.system===a.b.IOS&&n.isNativePlatform?window.__isMagic__?e():Object(a.c)(n.version,"3.43.0")>=0?Object(o.g)("PDDPayment","getAvailableTypes",{}).then(function(n){(n&&n.types||[]).indexOf(i.a.ApplePay)>=0?e():t()}).catch(t):Object(o.g)("AMPay","canSupportApplePay",{}).then(function(n){0===n.status?e():t()}).catch(t):t()}},YU58:function(e,t,n){e.exports={deviceInfo:"_13fhqxBC",deviceImg:"_3oSwltb8",info:"Oe3L5wCG",name:"_1Z6mhfm8",changeText:"_3auFT0Zy",tag:"_3d7o5fl4",bottomTag:"_2bbfX2qF",specsInfo:"TthbJIka",spec:"pOFmSAUi",arrow:"_3yb3MT2G",subTitle:"IkpdgxuC",deduce:"_1TrGdl9T",note:"_304Co_ln",horizontalScan:"RBWlb01T"}},YVoc:function(e,t,n){e.exports={skuSelectorBg:"lSznZClW",cartManagerBg:"_5jJkKh69"}},Z4L4:function(e,t,n){e.exports={selectIcon:"_2empebN8",horizontalScan:"_2--NPSTp"}},Z5Jv:function(e,t,n){e.exports={container:"_33WUFKX4",content:"_2Fc7-FXx",spec:"_35HYDrTV",specItem:"_1zK3AMSr",button:"_12_7YmXo",horizontalScan:"_380_RojM"}},ZK0Z:function(e,t,n){e.exports={container:"U8gvTD0e",content:"_1PmgDBdY",horizontalScan:"_3zJINCKF"}},ZL4E:function(e,t,n){e.exports={skuPreSaleTip:"_2Jgdp4Dm",skuGroupBuyContainer:"LCYzdatu",startHide:"_3z21bZmw",skuGroupBuyTipHide:"_7RteKTw",skuGroupBuyAvatars:"_3kdNKhVk",skuGroupBuyHint:"y1SmezJx",skuGroupBuyHintBtn:"_3qjr7l3Z"}},ZZx6:function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},Zh31:function(e,t){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},a96g:function(e,t,n){e.exports={list:"_1V5O_jZv",arrow:"_1kKAxnq3",item:"_2OEkHxgO",name:"_2I1dD-vI",idCard:"_3gsCZm8_",border:"_28wV6BKW",footer:"_84qUEXe1",horizontalScan:"rCIYUGIe"}},"aET+":function(e,t,n){var r={},a=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e){return void 0===t[e]&&(t[e]=function(e){return document.querySelector(e)}.call(this,e)),t[e]}}(),i=null,s=0,c=[],l=n("9tPo");function u(e,t){for(var n=0;n<e.length;n++){var a=e[n],o=r[a.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](a.parts[i]);for(;i<a.parts.length;i++)o.parts.push(v(a.parts[i],t))}else{var s=[];for(i=0;i<a.parts.length;i++)s.push(v(a.parts[i],t));r[a.id]={id:a.id,refs:1,parts:s}}}}function d(e,t){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],i=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}function p(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function f(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),p(e,t),t}function h(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,a,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var c=s++;n=i||(i=f(t)),r=y.bind(null,n,c,!1),a=y.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),p(e,t),t}(t),r=function(e,t,n){var r=n.css,a=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(r=l(r));a&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}.bind(null,n,t),a=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=f(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),a=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=d(e,t);return u(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var i=n[o];(s=r[i.id]).refs--,a.push(s)}e&&u(d(e,t),t);for(o=0;o<a.length;o++){var s;if(0===(s=a[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}},aR1t:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("kMSe"),i=n("MVZn"),s=n.n(i),c=n("o0o1"),l=n.n(c),u=n("yXPU"),d=n.n(u),p=n("lwsE"),m=n.n(p),f=n("W8MJ"),h=n.n(f),v=n("a1gu"),g=n.n(v),y=n("Nsbk"),_=n.n(y),b=n("7W2i"),k=n.n(b),I=n("BkRI"),S=n.n(I),w=n("mwIZ"),x=n.n(w),C=n("mj+i"),E=n("qnV/"),P=(n("17x9"),n("eHaf")),N=n("QILm"),O=n.n(N),D=n("J4zp"),T=n.n(D),A=n("VERM"),j=n.n(A),R=n("TSYQ"),L=n.n(R),M=n("+vUh"),B=n.n(M),F=function(){return a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5430",width:"200",height:"200"},a.a.createElement("path",{d:"M292.7001 1023.997654c-14.55529 0-29.11058-5.555875-40.222331-16.666452-22.222327-22.222327-22.222327-58.241099 0-80.444661l414.646321-414.64632-415.145962-415.128369c-22.222327-22.203561-22.222327-58.222333 0-80.444661s58.222333-22.222327 80.44466 0l428.554188 428.535422c36.944165 36.981696 36.944165 97.111113 0.037532 134.074043L332.92243 1007.331202c-11.11175 11.11175-25.66704 16.666452-40.22233 16.666452z","p-id":"5431"}))},U=function(){return a.a.createElement("svg",{width:"10",height:"16",viewBox:"0 0 10 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M8.265 15.5a.833.833 0 0 0 .59-1.423L2.78 8.004l6.081-6.081A.833.833 0 1 0 7.684.744L1.406 7.022a1.391 1.391 0 0 0 0 1.964l6.27 6.27a.83.83 0 0 0 .59.244z",fill:"#000",fillRule:"nonzero",stroke:"#000",strokeWidth:".5",opacity:".15"}))},z=function(){return a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4346",width:"200",height:"200"},a.a.createElement("path",{d:"M349.184 279.04v-46.592H230.912c-28.16 0-54.784 12.8-72.704 34.816L67.072 393.216c-13.312 16.384-20.48 36.864-20.48 58.368v269.824c0 42.496 28.672 78.848 68.096 89.6l12.8-45.056c-19.968-5.632-33.792-24.064-33.792-45.056V451.584c0-10.752 3.584-20.992 10.24-29.184l92.672-127.488c7.68-9.216 20.992-15.872 34.816-15.872h117.76z","p-id":"4347"}),a.a.createElement("path",{d:"M93.184 512h186.368c51.2 0 93.184-41.472 93.184-93.184V186.368c0-25.6 20.992-46.592 46.592-46.592h465.408c25.6 0 46.592 20.992 46.592 46.592v535.04c0 20.48-13.312 38.4-32.256 44.544l14.336 44.544c37.376-11.776 65.024-47.104 65.024-88.576V186.368c0-51.2-41.472-93.184-93.184-93.184H418.816c-51.2 0-93.184 41.472-93.184 93.184v232.96c0 25.6-20.992 46.592-46.592 46.592H93.184v46.08zM442.368 768h139.776v46.592H442.368zM279.04 884.224c38.4 0 69.632-31.232 69.632-69.632s-31.232-69.632-69.632-69.632-69.632 31.232-69.632 69.632 31.232 69.632 69.632 69.632z m0 46.592c-64.512 0-116.224-52.224-116.224-116.224 0-64.512 52.224-116.224 116.224-116.224s116.224 52.224 116.224 116.224c0.512 64-51.712 116.224-116.224 116.224z","p-id":"4348"}),a.a.createElement("path",{d:"M744.96 884.224c38.4 0 69.632-31.232 69.632-69.632s-31.232-69.632-69.632-69.632-69.632 31.232-69.632 69.632c-0.512 38.4 30.72 69.632 69.632 69.632z m0 46.592c-64.512 0-116.224-52.224-116.224-116.224 0-64.512 52.224-116.224 116.224-116.224s116.224 52.224 116.224 116.224-52.224 116.224-116.224 116.224z","p-id":"4349"}))},H=function(e){var t=e.className,n=e.onClick;return a.a.createElement("div",{role:"button","aria-label":"关闭谈窗",className:L()(B.a.icon,t),onClick:n},a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5299",width:"200",height:"200"},a.a.createElement("path",{d:"M624.10827 511.996481l375.931278-373.359185c31.939451-31.720125 31.939451-83.127957 0-114.848082-31.940624-31.720125-83.705006-31.720125-115.64563 0l-372.396264 369.828863L139.600218 23.789214c-31.939451-31.720125-83.705006-31.720125-115.644457 0s-31.939451 83.127957 0 114.848082l375.931277 373.359185L23.955761 885.355667c-31.939451 31.720125-31.939451 83.127957 0 114.848082 15.969725 15.859476 36.895977 23.790387 57.822229 23.790387s41.852503-7.929738 57.822228-23.790387l372.397436-369.828863 372.397436 369.828863c15.969725 15.859476 36.895977 23.790387 57.822229 23.790387s41.852503-7.929738 57.822229-23.790387c31.939451-31.720125 31.939451-83.127957 0-114.848082L624.10827 511.996481z","p-id":"5300"})))},V=function(e){var t=e.className,n=e.onClick;return a.a.createElement("div",{className:L()(B.a.icon,B.a.back,t),onClick:n},a.a.createElement(U,null))},G=function(){return a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},a.a.createElement("path",{d:"M512 950c241.9 0 438-196.1 438-438S753.9 74 512 74 74 270.1 74 512s196.1 438 438 438zm0 73C229.8 1023 1 794.2 1 512S229.8 1 512 1s511 228.8 511 511-228.8 511-511 511zm-54.8-277.9c0 30.2 24.5 54.8 54.8 54.8 30.2 0 54.8-24.5 54.8-54.8 0-30.2-24.5-54.8-54.8-54.8-30.2.1-54.8 24.6-54.8 54.8z"}),a.a.createElement("path",{d:"M512.2 634.9c-14.6 0-26.4-12.6-26.4-28.1v-47.5c0-46 32.9-81.1 62-112.1 21.3-22.7 43.4-46.3 43.4-65 0-46.8-35.5-84.9-79.1-84.9-44.3 0-79.1 36.5-79.1 83.1 0 15.5-11.8 28.1-26.4 28.1-14.6 0-26.4-12.6-26.4-28.1 0-76.8 59.1-139.2 131.8-139.2s131.8 63.4 131.8 141.2c0 42.1-30 73.9-58.8 104.8-23 24.4-46.6 49.6-46.6 72.3V607c.2 15.3-11.6 27.9-26.2 27.9z"}),a.a.createElement("path",{d:"M512.2 642.9c-19 0-34.4-16.2-34.4-36.1v-47.5c0-49.2 34-85.5 64.1-117.5l.1-.1c19.3-20.6 41.2-43.9 41.2-59.5 0-42.4-31.9-76.9-71.1-76.9-39.9 0-71.1 33-71.1 75.1 0 19.9-15.4 36.1-34.4 36.1s-34.4-16.2-34.4-36.1c0-81.2 62.7-147.2 139.8-147.2 77.1 0 139.8 66.9 139.8 149.2 0 45-30.6 77.8-60.3 109.6l-.8.8c-21.8 23.2-44.3 47.2-44.3 66.7V607c.1 9.7-3.6 19.2-10.3 25.9-6.4 6.4-14.9 10-23.9 10zm-.1-353.7c48 0 87.1 41.7 87.1 92.9 0 21.9-23.2 46.6-45.6 70.4-28.1 30-59.8 63.8-59.8 106.7v47.5c0 11.1 8.3 20.1 18.4 20.1 4.6 0 9.1-1.9 12.4-5.3 3.7-3.8 5.8-9.1 5.7-14.5v-47.6c0-25.9 24.7-52.2 48.6-77.6l.7-.8c27.5-29.5 56-60 56-98.7 0-73.4-55.5-133.2-123.8-133.2-68.2 0-123.8 58.9-123.8 131.2 0 11.1 8.3 20.1 18.4 20.1 10.1 0 18.4-9 18.4-20.1.2-51.1 38.5-91.1 87.3-91.1z"}))},W=function(){return a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"72737",width:"200",height:"200"},a.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m219.648 307.2l-287.118222 320.398222-122.936889-123.050666L256 570.026667l192.284444 192.398222 352.483556-393.386667L731.648 307.2z","p-id":"72738"}))},q=function(){return a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"72872",width:"200",height:"200"},a.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2z m0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z","p-id":"72873"}))},Q={enter:"translateX(0)",exit:"translateX(-100%)",exitToInit:"translateX(100%)"},Y={enter:"translateY(0)",exit:"translateY(100%)",exitToInit:"translateY(100%)"},X=a.a.forwardRef(function(e,t){var n=e.modalStyle,o=e.modalClassName,i=e.titleClassName,c=e.renderTitle,l=e.renderBack,u=e.renderContent,d=e.onClose,p=e.onBack,m=e.direction,f=void 0===m?"x":m,h=e.afterShow,v=e.initShow,g=e.onClick,y=Object(r.useRef)(),_=Object(r.useState)(v),b=T()(_,2),k=b[0],I=b[1],S="x"===f?Q:Y;Object(r.useEffect)(function(){h&&h(k)},[k]);var w=function(){y.current.classList.add(j.a.noShow)},x=function(){y.current.classList.remove(j.a.noShow)},C=function(e){var t=y.current.style;t.transform&&(t.transform=e),t.webkitTransform&&(t.webkitTransform=e)};Object(r.useImperativeHandle)(t,function(){return{show:function(){w(),C(S.enter),I(!1),setTimeout(function(){x(),I(!0)},0)},enter:function(){x(),I(!1),setTimeout(function(){I(!0),C(S.enter)},16)},enterFromRight:function(){w(),C(S.exitToInit),I(!1),setTimeout(function(){x(),setTimeout(function(){I(!0),C(S.enter)},16)},0)},exit:function(){C(S.exit),I(!1)},exitToRight:function(){C(S.exitToInit),I(!1)},hide:function(){w(),I(!1)},isShow:function(){return k}}});var E=a.a.createElement(V,{onClick:p}),P=v?S.enter:S.exitToInit,N={transform:P,WebkitTransform:P};return a.a.createElement("div",{ref:y,onTransitionEnd:function(){k||w()},style:s()({},N,{},n),className:L()(j.a.modal,o,{}),onClick:function(e){e.stopPropagation(),g&&g()}},c&&a.a.createElement("div",{className:L()(j.a.title,i)},!!p&&(l?l(E):E),c(),a.a.createElement(H,{onClick:d})),u())}),J=n("v/Ss"),K=n.n(J),Z={op:"impr",page_el_sn:398684},$={op:"click",page_el_sn:398684},ee=2,te=3,ne=4,re=["front_promo_price","sku_selector_toast"],ae=a.a.forwardRef(function(e,t){var n=Object(r.useRef)(),o=Object(r.useRef)();Object(r.useImperativeHandle)(t,function(){return{modalRef:o,skuRef:n,exit:function(){o.current.exit()},enter:function(){o.current.enter()},prepare:function(t){var r=e.goods,a=x()(r,"ui.sku_section.view_style_v2")===ee,o=x()(r,"ui.sku_section.view_style_v2")===te,i=x()(r,"ui.sku_section.view_style_v2")===ne,c=a||o||i||x()(t,"preventAutoConfirm"),l=1===r.skus.length&&!x()(r,"skus[0].specs.length")&&!c;return n.current.show(s()({},t,{needNotShow:l,preventAutoConfirm:c})),{needShow:!l}}}});var i=e.children,c=e.showOCSkuSelector,l=O()(e,["children","showOCSkuSelector"]);return a.a.createElement(X,{modalStyle:{height:c?"85%":"5.1rem"},modalClassName:c?K.a.normalSkuModalSkuDirectOrder:K.a.normalSkuModal,direction:"y",ref:o,afterShow:function(e){e&&n.current.setScroll()},renderContent:function(){return i?Object(r.cloneElement)(i,s()({ref:n},l)):null}})}),oe=n("b6XL"),ie=n("rIj9"),se=n("uf4C"),ce=n("3sKm"),le=n("cDf5"),ue=n.n(le),de=n("u6S6"),pe=n.n(de),me=n("mUg4"),fe=n.n(me),he=n("i8i4"),ve=n.n(he),ge=n("KoDT"),ye=n("MpJ2"),_e=n("D+Ft"),be=n("2xwX"),ke=n("gi5g"),Ie=n("v9S7"),Se=!0;function we(e){if(!1===window.p_bodyPositionStyle){var t=Object(ge.a)();Se&&t.isNativePlatform&&Object(ye.p)({enable:!1}),window.p_bodyPositionStyle=document.body.style.position,window.p_topStyle=document.body.style.top,window.p_bodyScrollTop=xe(),document.body.style.position="fixed",document.body.style.top="-".concat(window.p_bodyScrollTop,"px"),window.p_leftStyle=document.body.style.left,document.body.style.left="calc(50vw - 1.875rem)",Object(ke.a)(e)}}function xe(e){return e&&e!==document.body?e.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0)}function Ce(){if(!1!==window.p_bodyPositionStyle){var e=Object(ge.a)();Se&&e.isNativePlatform&&Object(ye.p)({enable:!0}),document.body.style.position=window.p_bodyPositionStyle,window.p_bodyPositionStyle=!1,document.body.style.top=window.p_topStyle,function(e){document.body.scrollTop=e,0!==document.body.scrollTop?document.body:((document.documentElement||{}).scrollTop=e,document.documentElement&&0!==document.documentElement.scrollTop&&document.documentElement)}(window.p_bodyScrollTop),document.body.left=window.p_leftStyle,Object(ke.b)()}}function Ee(e){var t=e,n=(t.type,t.props);var r=document.createElement("div"),o=null;return document.body.appendChild(r),e=a.a.cloneElement(e,{onClose:function(){n.onClose&&n.onClose(),o||(o=setTimeout(function(){ve.a.unmountComponentAtNode(r),document.body.removeChild(r),r=null},0))}}),{componentReference:ve.a.render(e,r)}}function Pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;return"object"===ue()(e)&&null!==e&&(e instanceof Array?(n=[],e.forEach(function(e,r){n[r]=Pe(e,t)})):(n={},fe()(e,function(e,r){var a=pe()(r);t.includes(r)?n[a]=e:n[a]=Pe(e,t)}))),n}"undefined"!=typeof window&&(window.p_bodyPositionStyle=!1);var Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5.1rem";Object(_e.a)(e,s()({},t,{ContainerProps:{style:{pointerEvents:"none",height:n,top:"auto"}},className:"sku-toast-center"}))},Oe=function(e,t){Ne(e,t,"85%")},De=!1;Object(Ie.a)().then(function(e){De=e});var Te,Ae,je=function(){return De},Re={isSpinnerShown:!1,timer:null,showWithoutBg:function(){Re.timer=setTimeout(function(){Object(be.c)(),Re.isSpinnerShown=!0},500)},show:function(){Re.timer=setTimeout(function(){Object(be.b)(),Re.isSpinnerShown=!0},500)},hide:function(){Re.isSpinnerShown?Object(be.a)():Re.timer&&clearTimeout(Re.timer),Re.isSpinnerShown=!1,Re.timer=null}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(Object(P.b)(e),t){var n=Object(ge.a)();n.isNativePlatform||n.isTinyNativePlatform?Promise.resolve().then(function(){t()}):setTimeout(function(){t()},100)}};!function(e){e.POST="POST",e.GET="GET"}(Ae||(Ae={}));var Me=function(){var e=d()(l.a.mark(function e(t){var n,r,a,o=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{isAuth:!1,isFormat:!1},Te||(r=Object(se.c)(),Te=Object(ie.a)({pageInfo:{pageId:r}})),!(null===n||void 0===n?void 0:n.isAuth)){e.next=9;break}return e.next=5,Object(ce.a)();case 5:if(e.sent){e.next=9;break}return e.next=9,Object(ce.f)();case 9:return t&&!t.defaultErrorHandler&&(t.defaultErrorHandler=function(){}),t.encodeNativeResponse=!1,e.next=13,Te(t);case 13:if(a=e.sent,!n||!n.isFormat){e.next=16;break}return e.abrupt("return",Pe(a));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Be=n("BDyI"),Fe=function(e){var t=(e=e||{}).server_time||Date.now()/1e3,n=function(e){e=e||[];for(var t=[],n={},r=0;r<e.length;r++){var a=e[r];0===(parseInt(a.is_open,10)||0)||n[a.customer_num]||(t.push({requireNum:a.customer_num.toString(),price:Object(Be.b)(a.price),groupID:a.group_id,startTime:parseInt(a.start_time,10),endTime:parseInt(a.end_time,10),orderLimit:parseInt(a.order_limit,10)||1}),n[a.customer_num]=!0)}return t.sort(function(e,t){return e.requireNum-t.requireNum}),{list:t}}(e.group).list,r=Object(Be.b)(e.max_on_sale_group_price||0),a=Object(Be.b)(e.min_on_sale_group_price||0),o=Object(Be.b)(e.max_on_sale_normal_price||0),i=Object(Be.b)(e.min_on_sale_normal_price||0);return{serverTime:t,nowTime:t,goodsID:e.goods_id,mallID:e.mall_id,groupTypes:n,skus:function(e,t){return(e=e||[]).map(function(e){return s()({},Pe(e),{skuID:e.sku_id,specs:e.specs,thumbUrl:Object(C.c)(e.thumb_url||t||""),limitQuantity:parseInt(e.limit_quantity,10)||0,normalPrice:Object(Be.b)(e.normal_price),groupPrice:Object(Be.b)(e.group_price),skuExpansionPrice:Object(Be.b)(e.sku_expansion_price)})})}(e.sku,e.thumb_url),thumbUrl:Object(C.c)(e.thumb_url||""),hdThumbUrl:Object(C.c)(e.hd_thumb_url||""),eventType:parseInt(e.event_type,10)||0,activity:function(e){return e&&{activityID:e.activity_id,activityType:e.activity_type,startTime:e.activity_start_time,endTime:e.activity_end_time,activityExplain:e.activity_explain,activitySkuExplain:e.activity_sku_explain,expansion:e.expansion,detailID:e.detail_id,subActivityType:e.sub_activity_type,costType:e.cost_type,activityOptions:e.activity_options,playType:e.play_type}}(e.activity),maxOnSaleGroupPrice:r,minOnSaleGroupPrice:a,maxOnSaleNormalPrice:o,minOnSaleNormalPrice:i,priceStyle:e.price_style||0,pricePrefix:e.price_prefix,goodsExpansionPrice:Object(Be.b)(e.goods_expansion_price),checkQuantity:e.check_quantity,destinationUrl:e.destination_url,vasTemplateId:e.vas_template_id,skuDirectOrder:e.sku_direct_order,skuNewPricePrefix:e.new_price_prefix,goodsType:+e.goods_type||1,catID:e.cat_id,catID1:e.cat_id_1,catID2:e.cat_id_2,catID3:e.cat_id_3,catID4:e.cat_id_4,options:e.options,overseaType:e.oversea_type||0,minOnSaleGroupPriceInCent:e.min_on_sale_group_price,maxOnSaleGroupPriceInCent:e.max_on_sale_group_price}},Ue=function(e){return s()({},e.goods,{},e.price,{server_time:e.server_time,sku:e.sku,activity:(e.activity_collection||{}).activity,destination_url:e.destination_url})};function ze(e,t,n){return Me({method:"POST",url:n||"api/oak/integration/render/sku",data:s()({page_version:7,_component_version:1,hostname:location.hostname,front_supports:re},e)}).then(function(e){var n,r;if(null===(n=e)||void 0===n?void 0:n.toast)return Object(oe.a)(null===(r=e)||void 0===r?void 0:r.toast),!1;if(t&&!(e=t(e)))return!1;var a=Ue(e),o=Fe(a);return o.ui=e.ui||{},{goodsInfo:o}})}var He=n("YVoc"),Ve=n.n(He),Ge=n("lSNA"),We=n.n(Ge),qe=n("U+yc"),Qe=n.n(qe);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t,n){var r=n.value;if("function"!=typeof r)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Ye(r)));var a=!1;return{configurable:!0,get:function(){if(a||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof r)return r;var n=r.bind(this);return a=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){r=e,delete this[t]}}),a=!1,n},set:function(e){r=e}}}function Je(){return 1===arguments.length?function(e){var t;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach(function(t){if("constructor"!==t){var n=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&Object.defineProperty(e.prototype,t,Xe(e,t,n))}}),e}.apply(void 0,arguments):Xe.apply(void 0,arguments)}var Ke=n("h3qu"),Ze=n("W1oA"),$e=n("ECRU"),et=n("pVnL"),tt=n.n(et),nt=(n("wgWF"),function(e){var t=e.goods,n=e.activity,r=e.skuInfos,o=e.selectedSkuID,i=e.specDesc,s=t.minOnSaleGroupPrice,c=t.goodsExpansionPrice,l=n.activitySkuExplain,u=null;if(o){var d=r[o];s=d.groupPrice,c=d.skuExpansionPrice,l=d.skuExplain,u=a.a.createElement("span",{className:"sku-quantity-tip"},d.quantityTip)}var p=x()(t,"ui.sku_section.price_prefix")||"定金";return a.a.createElement("div",{className:"dj-sku-desc"},a.a.createElement("div",{className:"djs-line-1"},a.a.createElement("span",{className:"djsp-1"},p),a.a.createElement("span",{className:"djsp-2"},"￥"),a.a.createElement("span",{className:"djsp-3"},s),s!==c&&a.a.createElement("span",null,a.a.createElement("span",{className:"djsp-4"},"抵"),a.a.createElement("span",{className:"djsp-5"},c)),u),a.a.createElement("div",{className:"djs-line-2"},l),a.a.createElement("div",{className:"djs-line-3 sku-selector-desc"},i))}),rt=n("/++w"),at=n.n(rt),ot=n("qd0Q"),it=n("GftL"),st=n("Wr5u"),ct=n.n(st),lt=1.17;var ut=function(e){var t,n,o=e.specDesc,i=e.skuDirectOrder,s=e.skuPreSaleIcon,c=e.selectedSkuID,l=e.group,u=Object(r.useRef)(),d=Object(r.useState)(!1),p=T()(d,2),m=p[0],f=p[1],h=Object(r.useState)(o),v=T()(h,2),g=v[0],y=v[1],_=Object(r.useState)(!1),b=T()(_,2),k=b[0],I=b[1],S=s||{},w=S.pictureUrl,C=S.clickUrl,E=S.width,P=S.height,N=S.clickNotice;return Object(r.useEffect)(function(){f((x()(u,"current.offsetTop",0)||0)>function(e){var t=375;return window?t=window.innerWidth:document&&document.body&&(t=document.body.offsetWidth),Math.min(t,768)/375*e*100}(.35)),w&&y(function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...",r=0,a="",o=0;o<e.length;o++)if(a+=e.charAt(o),e.charCodeAt(o)>=128||e.charCodeAt(o)<=90&&e.charCodeAt(o)>=64||e.charCodeAt(o)<=38&&e.charCodeAt(o)>=35){if((r+=2)>=t)return a.substring(0,a.length-1)+n}else if((r+=lt)>=t)return a.substring(0,a.length-2)+n;return a}(o,28)),I(!1)},[c,l.requireNum]),w?a.a.createElement("div",{ref:u,className:L()(ct.a.skuSelectorDescWithIcon,(n={},We()(n,ct.a.oneLineStyle,m),We()(n,ct.a.skuSelectorDescOC,i),n))},g,a.a.createElement(it.a,{className:ct.a.skuPreSaleIcon,src:k&&C?C:w,style:{width:"".concat(E/100,"rem"),height:"".concat(P/100,"rem")},onTouchStart:function(){return I(!0)},onTouchEnd:function(){return I(!1)},onClick:function(){N&&Object(ot.a)({title:N,confirmButtonLabel:"知道了"})}})):a.a.createElement("div",{ref:u,className:L()(ct.a.skuSelectorDesc,(t={},We()(t,ct.a.oneLineStyle,m||i),We()(t,ct.a.skuSelectorDescOC,i),t))},o)},dt=n("pbmx"),pt=n.n(dt),mt=function(e){var t=e.onClick,n=e.tip;return a.a.createElement($e.a,{trackingInfo:{page_el_sn:6663725,op:"impr"}},a.a.createElement("div",{className:pt.a.multiChoose,onClick:function(){Object(P.b)({page_el_sn:6663725,op:"click"}),t()}},n,a.a.createElement(F,null)))},ft=function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(a)))).state={retryTimes:n.props.retryTimes||0,error:null,errorInfo:null},n}return k()(t,e),h()(t,[{key:"componentDidCatch",value:function(e,t){this.props.catchCallback&&this.props.catchCallback(),Object(E.c)(e),+this.state.retryTimes>0&&this.setState({retryTimes:this.state.retryTimes-1,error:null,errorInfo:null})}},{key:"render",value:function(){return this.state.error?this.props.fallback||a.a.createElement("div",{className:"error-boundary2"}):this.props.children||null}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),t}(a.a.Component);ft.defaultProps={retryTimes:0,fallback:a.a.createElement("div",{className:"error-boundary"})};var ht,vt,gt,yt=n("gze+"),_t=n.n(yt),bt=function(e){var t,n=e.selectedSkuID,r=e.skuInfos,o=e.skuDirectOrder,i=n&&(x()(r,[[n],"skuPreSaleTip"],"")||"");return i?a.a.createElement("div",{className:L()((t={},We()(t,_t.a.skuPreSaleTip,!o),We()(t,_t.a.skuPreSaleTipOC,o),t))},i):null},kt=n("RIqP"),It=n.n(kt),St={},wt=0,xt=function(){var e=d()(l.a.mark(function e(t,n,r,a,o){var i,c,u,d,p,m,f,h,v,g=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=g.length>5&&void 0!==g[5]?g[5]:{},u="".concat(n,"-").concat(r),!(null===(i=St[u])||void 0===i?void 0:i.promotionPriceDesc)){e.next=4;break}return e.abrupt("return",St);case 4:return d=Object(C.g)(window.location.href),p=t.activity,m=void 0===p?[]:p,f=s()({goods_id:t.goodsID,mall_id:t.mallID,cat_id:t.catID,cat_id1:t.catID1,cat_id2:t.catID2,cat_id3:t.catID3,cat_id4:t.catID4,goods_type:t.goodsType,event_type:t.eventType,options:t.options,oversea_type:t.overseaType,min_on_sale_group_price:t.minOnSaleGroupPriceInCent,max_on_sale_group_price:t.maxOnSaleGroupPriceInCent,activity_type:m.activityType,sub_activity_type:m.subActivityType,activity_id:m.activityID,cost_type:m.costType,activity_options:m.activityOptions,activity_play_type:m.playType,from_page:d.page_from,from_merchant_tag:d._oak_merchant_tag,mkt_domain:d._oc_mkt_domain,sku_id:r,sku_group_price:Math.round(100*+a),goods_number:n,_oc_award_type:d._oc_award_type,normal_price:Math.round(100*+o),vas_template_id:t.vasTemplateId,front_supports:re},c),Object.keys(d).forEach(function(e){var t=d[e];/(^_oc_*)/.test(e)&&t&&(f[e]=t)}),e.prev=8,h=++wt,e.t0=Pe,e.next=14,Me({method:"POST",data:f,url:"api/lisbon/consult_promotion_price"});case 14:if(e.t1=e.sent,v=(0,e.t0)(e.t1),h!==wt){e.next=19;break}return St[u]=v,e.abrupt("return",St);case 19:if(h===wt){e.next=21;break}return e.abrupt("return",null);case 21:e.next=26;break;case 23:return e.prev=23,e.t2=e.catch(8),e.abrupt("return",null);case 26:case"end":return e.stop()}},e,null,[[8,23]])}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Ct=function(e){return e<10?"0"+e:e},Et=function(e,t,n){var r=Math.max(t-e,0),a=Math.floor(r/60),o=Math.floor(a/60),i=Math.floor(o/24);i%=365,o=Ct("hour"!==n?o%24:o),a=Ct(a%60),r=Ct(Math.floor(r%60));var s="";0!==i&&(s=i+"天"+o+"小时");var c=!1;return e>=t&&(c=!0),{over:c,days:i,hours:o,minutes:a,seconds:r,formattedStr:s}},Pt=(ht=function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(a)))).state={nowTime:n.props.goods.nowTime},n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this,t=x()(this.props.goods,"ui.sku_section.yellow_label")||x()(this.props.goods,"ui.price_section.data.yellow_label");if(x()(t,"end_time"))var n=setInterval(function(){e.setState({nowTime:e.state.nowTime+1}),t.end_time<e.state.nowTime&&clearInterval(n)},1e3)}},{key:"genPrice",value:function(){var e,t,n,r=+x()(this.props.goods,"ui.sku_section.car_shop.action_type"),o=this.props,i=o.selectedSkuID,s=o.skuInfos,c=o.goods,l=o.group,u=o.selectedHomeIns,d=o.selectedSendWays,p=o.skuDirectOrder,m=o.styleStatus,f=o.ocData,h=o.useNormalSkuData,v=o.renderPromotionDescContent,g=o.isMutliSku,y=x()(f,"promotionInfo");if(i){var _=s[i];if(n=l.requireNum>1?_.groupPrice:_.normalPrice,x()(c,"ui.sku_section.view_style_v2")===ne)if(x()(u,"srv_type")>0){var b=+Object(Be.b)(x()(u,"fee")||0);+b>0&&(n=Object(Be.a)(+n+b))}var k=+x()(d,"fee")||0;x()(c,"ui.sku_section.view_style_v2")===te&&1===r&&k>0&&(n=Object(Be.a)(+n+k))}else{var I=c.minOnSaleGroupPrice,S=c.maxOnSaleGroupPrice,w=[c.minOnSaleNormalPrice,c.maxOnSaleNormalPrice];if(+l.requireNum>1&&(w=[I,S]),x()(c,"ui.sku_section.view_style_v2")===ne){var C=+Object(Be.b)(x()(u,"fee")||0);C>0&&(w=w.map(function(e){return Object(Be.a)(+e+C)}))}var E=+x()(d,"fee")||0;x()(c,"ui.sku_section.view_style_v2")===te&&1===r&&E>0&&(w=w.map(function(e){return Object(Be.a)(+e+E)})),n=w[0],w[0]!==w[1]&&(n=w.join("-"))}var P="";+l.requireNum>1&&3===c.priceStyle&&c.pricePrefix&&(P=c.pricePrefix);var N="".concat(P,"¥").concat(n),O=(null===(e=N)||void 0===e||e.length,this.props.priceInfo.newPriceDisplay);if(+l.requireNum>1&&(null===O||void 0===O?void 0:O.price)&&!g){var D=O.prefix,T=void 0===D?"":D,A=O.price,j=O.rmb,R=void 0===j?"":j,M=O.suffix,B=void 0===M?"":M,F="".concat(T).concat(R).concat(A).concat(B).length>16?.02:0;N=a.a.createElement("span",{role:"img","aria-label":"".concat(T).concat(R).concat(A).concat(B)},a.a.createElement("span",{"aria-hidden":!0,style:{fontSize:"".concat(.17-F,"rem")}},T),a.a.createElement("span",{"aria-hidden":!0,style:{fontSize:"".concat(.19-F,"rem")}},R,A),a.a.createElement("span",{"aria-hidden":!0,style:{fontSize:"0.13rem"}},B))}var U=x()(this.props.ocData,"goodsInfo.unitPrice"),z=(null===f||void 0===f?void 0:f.goodsInfo)||{},H=z.unitPriceDisplay,V=z.totalPriceDisplay,G=y||{},W=G.isNewPriceArea,q=G.totalDiscountDisplay,Q=G.afterCouponUnitPriceDisplay,Y=!(!Q&&!H),X="¥".concat(U);if(W&&q||V){var J=(q||V).reduce(function(e,t){return e+t.text},"");X=a.a.createElement("span",{"aria-label":J,role:"img",tabIndex:-1},(q||V).map(function(e,t){var n={color:e.font_color,fontSize:e.font_size&&e.font_size/100+"rem"};return a.a.createElement("span",{key:t,style:n,"aria-hidden":!0},e.text)}))}var K=Y&&a.a.createElement(a.a.Fragment,null,(Q||H).map(function(e,t){var n={color:e.font_color,fontSize:e.font_size&&e.font_size/100+"rem"};return a.a.createElement("span",{key:t,style:n},e.text)}));return a.a.createElement("div",{className:L()((t={},We()(t,at.a.skuSelectorPrice,!p||p&&h),We()(t,at.a.skuSelectorPriceOC,p&&!h),We()(t,at.a.startHide,1===m),We()(t,at.a.startDisplay,2===m),t))},a.a.createElement("div",{className:L()(at.a.skuQuantityPriceDesc,We()({},at.a.isNewPriceArea,W))},p&&i&&U&&!h?X:N),K,a.a.createElement(ft,null,!Y&&v&&v(this.props.priceInfo)))}},{key:"getSpecDesc",value:function(){var e=[],t=[],n=this.props,r=n.currentSelect,a=n.selectedSkuID,o=n.skuInfos,i=n.selectedHomeIns,s=n.selectedSendWays;for(var c in r){var l=r[c];l?t.push(l):e.push(c)}if(x()(this.props.goods,"ui.sku_section.view_style_v2")===ne){var u=x()(i,"desc"),d=x()(i,"srv_type");if(!u){var p=x()(this.props.goods,"ui.sku_section.home_install.title")||"服务";e.push(p)}if(u&&a){var m=o[a],f=x()(m,"srvItem",[]).find(function(e){return e&&e.srv_type===d}),h=x()(f,"desc")||"";t.push(h)}}if(x()(this.props.goods,"ui.sku_section.view_style_v2")===te){var v=+x()(this.props.goods,"ui.sku_section.car_shop.action_type"),g=x()(s,"type")||"",y=x()(s,"fee"),_=1===v&&y>=0?"".concat(g," ¥").concat(y):g;if(!g){var b=x()(this.props.goods,"ui.sku_section.car_shop.title")||"送货方式";e.push(b)}g&&t.push(_)}return e.length>0?"请选择 "+e.join(" "):t.length>0?"已选："+t.join(" "):""}},{key:"renderDiscountItem",value:function(e,t){var n=this.props.skuDirectOrder,o=e.labelText,i=e.endTime;if(!o)return null;var s,c=o,l=a.a.createElement(a.a.Fragment,null,c);if(i&&c.search(/#time#/g)>=0){var u=Et(this.state.nowTime,i),d=u.formattedStr,p=u.over,m=u.days,f=u.hours,h=u.minutes,v=u.seconds;p||(l=0===m?c.split(/(#time#)/g).map(function(e,t){return"#time#"===e?a.a.createElement("div",{className:at.a.countDown,key:t},f,":",h,":",v):a.a.createElement(r.Fragment,{key:t},e)}):a.a.createElement(r.Fragment,null,c.replace(/#time#/g,d))),p&&(c="",l=null)}return c&&l?a.a.createElement("div",{className:L()(at.a.yellowLabelWrap,at.a.listItem),key:t},a.a.createElement("span",{className:L()((s={},We()(s,at.a.yellowLabel,!n),We()(s,at.a.yellowLabelOC,n),s))},l)):void 0}},{key:"renderDiscountElement",value:function(){var e=this,t=this.props,n=t.goods,o=t.skuInfos,i=t.group,s=t.selectedSkuID,c=t.skuDirectOrder,l=t.priceInfo;if(t.isMutliSku)return null;if(+i.requireNum>1){var u=l.newYellowLabelList;if(null===u||void 0===u?void 0:u.length)return a.a.createElement("div",{className:at.a.yellowLabelListWrap},u.map(function(t,n){return e.renderDiscountItem(t,n)}));var d=x()(n,"ui.sku_section.yellow_label")||x()(n,"ui.price_section.data.yellow_label"),p=x()(d,"sku_unselect_label")||"";s&&(p=o[s].yellowLabel||"");var m,f=a.a.createElement(a.a.Fragment,null,p);if(x()(d,"end_time")&&p&&p.search(/#time#/g)>=0){var h=Et(this.state.nowTime,d.end_time),v=h.formattedStr,g=h.over,y=h.days,_=h.hours,b=h.minutes,k=h.seconds;g||(f=0===y?p.split(/(#time#)/g).map(function(e,t){return"#time#"===e?a.a.createElement("div",{className:at.a.countDown,key:t},_,":",b,":",k):a.a.createElement(r.Fragment,{key:t},e)}):a.a.createElement(r.Fragment,null,p.replace(/#time#/g,v))),g&&(p="",f=null)}if(p&&f)return a.a.createElement("div",{className:at.a.yellowLabelWrap},a.a.createElement("span",{className:L()((m={},We()(m,at.a.yellowLabel,!c),We()(m,at.a.yellowLabelOC,c),m))},f))}return null}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.goods,o=n.skuInfos,i=n.group,s=n.selectedSkuID,c=n.skuDirectOrder,l=n.style,u=r.activity;if(u&&25===u.activityType)return a.a.createElement(nt,{specDesc:this.getSpecDesc(),selectedSkuID:s,skuInfos:o,goods:r,activity:u});var d=c&&2==+i.requireNum&&x()(r,"ui.sku_section.new_multi_choose.tip"),p=null;return s&&(p=o[s].skuPreSaleIcon),a.a.createElement("div",{className:L()((e={},We()(e,at.a.skuSelectorHeadContent,!c),We()(e,at.a.skuSelectorHeadContentOC,c),e)),style:l},this.genPrice(),this.renderDiscountElement(),a.a.createElement(ft,null,a.a.createElement(ut,{specDesc:this.getSpecDesc(),skuDirectOrder:c,skuPreSaleIcon:p,selectedSkuID:s,group:i})),!!d&&a.a.createElement(mt,{tip:d,onClick:function(){t.props.handleShowCart&&t.props.handleShowCart(!0)}}),c&&a.a.createElement(ft,null,a.a.createElement(bt,{selectedSkuID:s,skuInfos:o,skuDirectOrder:c})))}}]),t}(a.a.Component),Qe()(ht.prototype,"getSpecDesc",[Je],Object.getOwnPropertyDescriptor(ht.prototype,"getSpecDesc"),ht.prototype),Qe()(ht.prototype,"renderDiscountItem",[Je],Object.getOwnPropertyDescriptor(ht.prototype,"renderDiscountItem"),ht.prototype),Qe()(ht.prototype,"renderDiscountElement",[Je],Object.getOwnPropertyDescriptor(ht.prototype,"renderDiscountElement"),ht.prototype),ht),Nt=a.a.forwardRef(function(e,t){var n=Object(r.useRef)();Object(r.useImperativeHandle)(t,function(){return n.current});var o=function(e){var t=Object(r.useState)({}),n=T()(t,2),a=n[0],o=n[1],i=e.goodsNumber,s=e.selectedSkuID,c=e.goods,u=e.group,p=e.skuInfos,m=e.consultPromotionPriceParams,f=e.ocData,h=e.isMutliSku,v=x()(f,"promotionInfo"),g=x()(f,"promotionExtendMap"),y=x()(g,"replace_goods_detail_promotion_label_list"),_=y&&JSON.parse(y),b=v||{},k=b.isNewPriceArea,I=b.discountTagDisplayVos,S=function(e){if(!s)return e;var t=e&&e.length?It()(e):[];return k&&_&&_.length>0&&_.map(function(e,n){var r=I&&!!I.length&&I.reduce(function(t,n){if(n.labelType===e&&n.tagDisplayVo){var r=n.tagDisplayVo;if(r.length)return r[0].text+t}},""),a=t.findIndex(function(t){return t.labelType===e});if(!r&&a>=0&&t.splice(a,1),r){var o={labelText:r,labelType:e,morganLable:!0};a>=0&&(t[a]=o),a<0&&t.unshift(o)}}),t};return Object(r.useEffect)(function(){!function(){var e=d()(l.a.mark(function e(){var t,n,r,a,d,f,v,g,y,_,b,k,I,w,x,C,E,P,N,O;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Pe(null===(t=c.ui)||void 0===t?void 0:t.sku_section)||{},d=s&&p[s],f=(s?null===d||void 0===d?void 0:d.yellowLabelList:null===a||void 0===a?void 0:a.yellowLabelList)||[],v=s?null===d||void 0===d?void 0:d.priceDisplay:null===a||void 0===a?void 0:a.priceDisplay,g=s?h?null===d||void 0===d?void 0:d.newMultiChooseTip:null===d||void 0===d?void 0:d.groupTip:h?"":null===a||void 0===a?void 0:a.skuUnselectTip,y=s?null===d||void 0===d?void 0:d.groupTipColor:null===a||void 0===a?void 0:a.skuUnselectTipColor,_=s?null===d||void 0===d?void 0:d.groupTipFont:null===a||void 0===a?void 0:a.skuUnselectTipFont,1==+u.requireNum&&(g=s?null===d||void 0===d?void 0:d.quantityTip:"",y="",_=""),1===a.consultPromotionPrice&&u.requireNum>1&&s&&i>1&&!h){e.next=12;break}return o({newPriceDisplay:v,newYellowLabelList:S(f),promotionPriceDesc:g,tipColor:y,tipFontSize:_}),e.abrupt("return");case 12:if(b=(null===(n=p[s])||void 0===n?void 0:n.groupPrice)||null,k=(null===(r=p[s])||void 0===r?void 0:r.normalPrice)||null,b){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,xt(c,i,s,b,k,m);case 18:(I=e.sent)&&(w=I["".concat(i,"-").concat(s)]||{},x=w.promotionPriceDesc,C=w.priceDisplay,E=w.yellowLabelList,P=f.slice(),N=(E||[]).find(function(e){return"usable_full_back"===e.labelType})||{},(O=(P||[]).findIndex(function(e){return"usable_full_back"===e.labelType}))>=0&&!P[O].morganLable&&(P[O]=N),O<0&&(null===N||void 0===N?void 0:N.labelText)&&(P||[]).unshift(N),(null===C||void 0===C?void 0:C.price)&&(g="".concat(c.skuNewPricePrefix||"拼单价").concat(b),y="#58595B",_=14),o({newPriceDisplay:C,newYellowLabelList:S(P),promotionPriceDesc:(null===C||void 0===C?void 0:C.price)?g:x,tipColor:y,tipFontSize:_}));case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[i,s,c,p,u,f]),a}(e);return a.a.createElement(Pt,tt()({},e,{ref:n,priceInfo:o}))}),Ot=n("ez7s"),Dt=n("1Irm"),Tt=(vt=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).state={thumb:n.processImage(e.src)},n.imgUrl=e.src,n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectSkuId,n=e.resetSkuId,r=e.usePddNativePhoto,a=Object(ge.a)();if(r&&Object(Ke.c)(a.version,"5.49.0")>=0)try{Object(Dt.a)("video_container_goods_sku_index_change_notification",function(e){var r=(null===e||void 0===e?void 0:e.sku_id)||"";r?t&&t({skuId:r}):n&&n()})}catch(e){}}},{key:"getNativeViewImgList",value:function(){var e=this.props,t=e.skuInfos,n=e.group,r=Object.values(t);r.sort(function(e,t){return x()(e,"previewPriority")-x()(t,"previewPriority")});var a=[];return r.forEach(function(e){if(!(e.quantity<=0)){var t="",r=!0,o=!1,i=void 0;try{for(var s,c=e.specs[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;l.spec_value&&(t+=l.spec_value+" ")}}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}var u=n.requireNum>1?e.groupPrice:e.normalPrice;a.push({image_url:e.thumbUrl,sku_name:t,price:u,sku_id:e.skuId})}}),a}},{key:"viewImg",value:function(){var e=this,t=this.props,n=t.selectedSkuID,r=t.goods,a=t.usePddNativePhoto,o=Object(ge.a)();if(a&&Object(Ke.c)(o.version,"5.50.0")>=0){var i=Object(C.g)(window.location.href),c=this.getNativeViewImgList(),l=c.findIndex(function(e){return e.sku_id===n});if(!n&&l<0){var u=r.hdThumbUrl||r.thumbUrl;c.unshift({image_url:u,sku_mode:1}),l=0}var d={props:{url:"pdd_photo_goods_sku.html?pr_animated=0",index:l,scene_id:"goods_detail_sku",data_list:c,loop:!0,is_h5:!0,activity_style_:1},transient_refer_page_context:{page_id:i.page_id,page_name:i.page_name,page_sn:i.page_sn}};Object(ye.g)("JSNavigation","modal",d).catch(function(t){Object(Ze.a)(e.imgUrl,e.props.imgList)})}else Object(Ze.a)(this.imgUrl,this.props.imgList),Object(P.b)(s()({},$,{goods_id:r.goodsID,event_type:r.eventType}))}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.src,r=this.processImage(n);if(n!==this.imgUrl){var a=new Image;a.onload=function(){t.setState({thumb:r}),t.imgUrl=n},a.src=r}}},{key:"processImage",value:function(e){return Object(Ot.b)(e,{resizeWidth:300,quality:70,webpEnable:je(),sharpen:1})}},{key:"render",value:function(){var e=this.props.goods,t=s()({},Z,{goods_id:e.goodsID,event_type:e.eventType}),n=this.state.thumb;return a.a.createElement($e.a,{trackingInfo:t},a.a.createElement("img",{src:n,onClick:this.viewImg,role:"img","aria-label":"点击查看大图"}))}}]),t}(a.a.PureComponent),Qe()(vt.prototype,"getNativeViewImgList",[Je],Object.getOwnPropertyDescriptor(vt.prototype,"getNativeViewImgList"),vt.prototype),Qe()(vt.prototype,"viewImg",[Je],Object.getOwnPropertyDescriptor(vt.prototype,"viewImg"),vt.prototype),vt),At=(n("h3V6"),n("sEfC")),jt=n.n(At),Rt=n("DzJC"),Lt=n.n(Rt),Mt=(n("XkPr"),[]),Bt=(gt=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).state={data:Mt,currentIndex:0,isSearchBoxFocus:!1,keywords:""},n.containerRef=a.a.createRef(),n.searchBoxRef=a.a.createRef(),n._handleScroll=function(){var e=Math.round(xe(n.containerRef.current)),t=Array.from(document.getElementsByClassName("sku-item-address"));t.forEach(function(r,a){a+1<t.length&&r.offsetTop<e&&t[a+1].offsetTop>e?n.setState({currentIndex:a}):a+1===t.length&&r.offsetTop<e&&n.setState({currentIndex:a})})},n.forwardContent=function(e,t,r){n.setState({currentIndex:r}),document.getElementById(t).scrollIntoView()},n.handleScroll=Lt()(n._handleScroll,300),n.handleSearchBoxChange=jt()(n._handleSearchBoxChange,300),n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this;Object(ke.a)(this.containerRef.current),x()(this.state,"data.length")||(Object(be.c)(),Me({method:"POST",url:"api/virginia/sim_mobile/query_dictionary",data:{goods_id:this.props.goodsID}}).then(function(t){Object(be.a)(),t&&t.result&&t.result.areas&&(Mt=t.result.areas,e.setState({data:t.result.areas}))}).catch(function(){Object(be.a)()}))}},{key:"handleSearchBoxFocus",value:function(){this.setState({isSearchBoxFocus:!0})}},{key:"handleSearchBoxBlur",value:function(){this.setState({isSearchBoxFocus:!1})}},{key:"_handleSearchBoxChange",value:function(){this.setState({keywords:this.searchBoxRef.current.value,currentIndex:0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,r=t.keywords,o=t.currentIndex,i=t.isSearchBoxFocus,s=r?n.reduce(function(e,t){var n,a=null===t||void 0===t?void 0:null===(n=t.citys)||void 0===n?void 0:n.filter(function(e){var t;return null===e||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.includes(r)});return a&&a.length>0&&e.push({citys:a,first_word:t.first_word}),e},[]):n;return a.a.createElement("div",{className:"comm-address-selector-container",onClick:function(t){t.stopPropagation(),e.props.onClose()}},a.a.createElement("div",{className:"comm-add",onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"comm-add-header"},a.a.createElement("div",{className:"comm-add-header-back",onClick:function(t){t.stopPropagation(),e.props.onClose()}}),a.a.createElement("div",{className:"comm-add-header-title"},"号码归属地")),a.a.createElement("div",{className:L()("address-searchbox",{"address-searchbox-focus":i||!!r})},a.a.createElement("div",{className:"search-icon"}),a.a.createElement("input",{ref:this.searchBoxRef,className:"search-input",type:"text",placeholder:"请输入城市名",onFocus:this.handleSearchBoxFocus,onBlur:this.handleSearchBoxBlur,onChange:this.handleSearchBoxChange})),a.a.createElement("div",{className:"address-list",onScroll:this.handleScroll,ref:this.containerRef},s.map(function(t,n){var r=L()("item-title",{"item-title-current":o===n});return a.a.createElement("div",{className:"sku-item-address",key:n},a.a.createElement("div",{className:r,id:t.first_word},t.first_word),a.a.createElement("ul",{className:"item-name"},t.citys.map(function(t,n){return a.a.createElement("li",{onClick:function(){e.props.onClose(),e.props.onClickAddress(t)},key:n},t.name)})))})),a.a.createElement("ul",{className:"address-short-name"},s.map(function(t,n){return a.a.createElement("li",{id:t.first_word,key:n,className:o===n?"current":"",onClick:function(r){return e.forwardContent(r,t.first_word,n)}},t.first_word)}))))}}]),t}(r.Component),Qe()(gt.prototype,"handleSearchBoxFocus",[Je],Object.getOwnPropertyDescriptor(gt.prototype,"handleSearchBoxFocus"),gt.prototype),Qe()(gt.prototype,"handleSearchBoxBlur",[Je],Object.getOwnPropertyDescriptor(gt.prototype,"handleSearchBoxBlur"),gt.prototype),Qe()(gt.prototype,"_handleSearchBoxChange",[Je],Object.getOwnPropertyDescriptor(gt.prototype,"_handleSearchBoxChange"),gt.prototype),gt),Ft=(n("OIse"),function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(a)))).state={data:null,serachKeyValue:"",loading:!0},n.getServiceData=function(){n.setState({loading:!0}),Object(be.c)();var e={goods_id:n.props.goodsID,num:10,mobile:n.state.serachKeyValue||"",city_id:n.props.cityID,province_id:n.props.provinceID};Me({method:"POST",url:"api/virginia/sim_mobile/query_mobiles",data:e}).then(function(e){Object(be.a)(),n.setState({loading:!1,data:e.result})}).then(function(){Object(be.a)()})},n.forwardGoods=function(e){Me({method:"POST",url:"api/virginia/sim_mobile/edit_status",data:{goods_id:n.props.goodsID,mobile_id:e.mobile_id}}).then(function(t){x()(t,"result")?(n.props.onClose(),n.props.onClickNumber(e)):Ne("下手晚了，靓号被别人抢走了")})},n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.getServiceData()}},{key:"loadMoreData",value:function(e){e.preventDefault(),this.getServiceData()}},{key:"fixInputBug",value:function(){var e=Object(ge.a)();e.system===Ke.b.IOS&&Object(Ke.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}},{key:"renderNumList",value:function(){var e=this,t=this.state.data;return x()(t,"length")?a.a.createElement(r.Fragment,null,a.a.createElement("ul",{className:"item-mobile-container"},t.map(function(t,n){return a.a.createElement("li",{className:"item-mobile",key:n,onClick:function(){return e.forwardGoods(t)}},t.mobile)})),a.a.createElement("div",{className:"load-more-data",onClick:function(t){return e.loadMoreData(t)}},"换一批")):a.a.createElement("div",{className:"no-num-container"},a.a.createElement("div",{className:"no-num-image"}),a.a.createElement("div",{className:"no-num-text"},"没有找到匹配的号码"))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"comm-num-selector-container",onClick:function(t){t.stopPropagation(),e.props.onClose()}},a.a.createElement("div",{className:"sku-mobile-num",onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"sku-mobile-num-header"},a.a.createElement("div",{className:"sku-mobile-num-header-back",onClick:function(t){t.stopPropagation(),e.props.onClose()}}),a.a.createElement("div",{className:"sku-mobile-num-header-title"},"手机号码")),a.a.createElement("form",{action:"",onSubmit:function(t){return e.loadMoreData(t)}},a.a.createElement("div",{id:"search-content",className:"search-content"},a.a.createElement("div",{className:"search-icon"}),a.a.createElement("input",{type:"search",placeholder:"输入喜欢的数字",className:"search-input",value:this.state.serachKeyValue,onBlur:function(){e.fixInputBug()},onChange:function(t){e.setState({serachKeyValue:t.target.value})}}))),!this.state.loading&&this.renderNumList()))}}]),t}(r.Component)),Ut=function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(o)))).state={cityName:null,cityID:null,provinceID:null,provinceNname:null,mobileID:null,mobile:null},n.getState=function(){return n.state},n.cityClick=function(){n.props.selectedSkuID?Ee(a.a.createElement(Bt,{goodsID:n.props.goodsID,onClickAddress:function(e){e.id!==n.state.cityID&&n.setState({cityID:e.id,cityName:e.name,provinceName:e.province_name,provinceID:e.province_id,mobileID:null,mobile:null})},getSkuRef:n.props.getSkuRef})):n.props.toastSpec()},n.mobileClick=function(){var e=n.props,t=e.selectedSkuID,r=e.goodsID;if(t){var o=n.state,i=o.cityID,s=o.provinceID;i&&s?Ee(a.a.createElement(Ft,{goodsID:r,cityID:i,provinceID:s,onClickNumber:function(e){n.setState({mobileID:e.mobile_id,mobile:e.mobile})}})):Ne("请先选择号码归属地")}else n.props.toastSpec()},n}return k()(t,e),h()(t,[{key:"render",value:function(){var e=this.state,t=e.cityName,n=e.mobile;return a.a.createElement("div",{className:"sku-specs"},a.a.createElement("span",{className:"sku-specs-key"},"入网信息"),a.a.createElement("div",{className:"sku-spec-value-list"},a.a.createElement("div",{className:"iphone-mark"},a.a.createElement("div",{className:"areas",onClick:this.cityClick},a.a.createElement("span",{className:"are-key"},"号码归属地"),a.a.createElement("span",{className:L()("are-value",{enable:t})},t||"请选择",a.a.createElement("span",{className:"enter-icon"}))),a.a.createElement("div",{className:"iphone-num",onClick:this.mobileClick},a.a.createElement("span",{className:"are-key"},"手机号码"),a.a.createElement("span",{className:L()("are-value",{enable:n})},n||"请选择",a.a.createElement("span",{className:"enter-icon"}))))))}}]),t}(a.a.Component);var zt=null;function Ht(){return new Promise(function(e,t){window.wx.ready(function(){!function(e){zt&&e(zt),window.wx.getLocation({success:function(t){var n=t.latitude,r=t.longitude;e(zt={latitude:n,longitude:r})},cancel:function(){e(zt={latitude:0,longitude:0})}})}(e)})})}function Vt(){return Gt.apply(this,arguments)}function Gt(){return(Gt=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={latitude:0,longitude:0},e.prev=1,e.next=4,Promise.race([Ht(),new Promise(function(e,t){setTimeout(e,1e3)}).then(function(e){throw Error("wx query location timeout")})]);case 4:return t=e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",t);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t,n){window.mqq.ready(function(){window.mqq&&window.mqq.sensor||t({latitude:0,longitude:0}),window.mqq.sensor.getLocation({allowCacheTime:60},function(n,r,a,o){t(0!==n?null:{latitude:r,longitude:a,coord_type:5},e)})})})}var qt=n("3INx"),Qt=n("vBQ9");function Yt(){var e=Object(ge.a)();return!!e.isNativePlatform&&e.statisfy("5.21.0","5.12.0",qt.a.greaterThanEqual)}var Xt="AMLOCATION_HAS_SET_KEY";function Jt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=d()(l.a.mark(function e(){var t,n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ye.g)("AMLocation","check");case 3:return t=e.sent,r=(n=t||{}).is_determined,a=n.is_enabled,o=n.need_reconfirm,Object(ge.a)().platform===Ke.a.PddAndroid&&localStorage.getItem(Xt)&&(r=1),e.abrupt("return",{isDetermined:r,isEnabled:a,needReconfirm:o});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function Zt(){return $t.apply(this,arguments)}function $t(){return($t=d()(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(ge.a)().isNativePlatform){e.next=8;break}return e.next=4,Jt();case 4:return t=e.sent,n=t.isEnabled,r=t.isDetermined,e.abrupt("return",!(!n||!r));case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function en(){return tn.apply(this,arguments)}function tn(){return(tn=d()(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={scene:"install_store"},e.next=4,Object(ye.g)("AMLocation","getLocationId",t);case 4:return n=e.sent,r=(n||{}).location_id,e.abrupt("return",{locationId:r});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{latitude:0,longitude:0});case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}var nn=null;function rn(){return an.apply(this,arguments)}function an(){return(an=d()(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!nn){e.next=2;break}return e.abrupt("return",nn);case 2:if(t={latitude:0,longitude:0},n=Object(ge.a)(),!n.isNativePlatform||!Yt()){e.next=11;break}return e.next=8,en();case 8:t=e.sent,e.next=26;break;case 11:if(!n.isWeChatMiniProgram&&!n.isWeChatPlatform||!window.wx||!window.wx.getLocation){e.next=17;break}return e.next=14,Vt();case 14:t=e.sent,e.next=26;break;case 17:if(!n.isQQPlatform){e.next=23;break}return e.next=20,Wt();case 20:t=e.sent,e.next=26;break;case 23:return e.next=25,new Promise(function(e,t){navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var n=t.coords||{},r=n.latitude,a=void 0===r?0:r,o=n.longitude;e({latitude:a,longitude:void 0===o?0:o})},function(t){e({latitude:0,longitude:0})},{enableHighAccuracy:!1,timeout:6e4,maximumAge:6e4}):e({latitude:0,longitude:0})});case 25:t=e.sent;case 26:return e.next=28,Zt();case 28:return r=e.sent,(t=s()({},t,{hasLocAuth:r}))&&t.latitude&&(nn=t),e.abrupt("return",t);case 32:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(e){return new Promise(function(t,n){setTimeout(t,e)}).then(function(e){throw Error("query location timeout")})}var sn=d()(l.a.mark(function e(){var t,n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(ge.a)(),n=t.isNativePlatform,r={latitude:0,longitude:0},a=t.platform===Ke.a.PddAndroid&&Object(Ke.c)(t.version,"5.10.0")>=0||t.platform===Ke.a.PddIOS&&Object(Ke.c)(t.version,"5.6.0")>=0,e.prev=4,!a){e.next=11;break}return e.next=8,Promise.race([rn(),on(1e4)]);case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,Promise.race([rn(),on(3e3)]);case 13:r=e.sent;case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),o=!a,r=s()({},r,{hasLocAuth:o});case 21:return e.abrupt("return",s()({enabled:!0},r,{isNativePlatform:n}));case 22:case"end":return e.stop()}},e,null,[[4,16]])})),cn=function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(o)))).listWrapperRef=a.a.createRef(),n.listRef=a.a.createRef(),n.state={isLoading:!1},n._handleScroll=function(){n.checkNeedLoadDown()&&!n.state.isLoading&&(n.setState({isLoading:!0}),n.props.loadMoreShops(function(){n.setState({isLoading:!1})}))},n.checkNeedLoadDown=function(){if(n.listRef.current){var e=n.props.hasMore;if(n.listRef.current.getBoundingClientRect().bottom<window.innerHeight+20&&e)return!0}return!1},n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.handleScroll=Lt()(this._handleScroll,300),this.listWrapperRef&&this.listWrapperRef.current&&(Object(ke.a)(this.listWrapperRef.current),this.listWrapperRef.current.addEventListener("scroll",this.handleScroll))}},{key:"renderList",value:function(){var e=this,t=this.props.list;return t&&t.length?a.a.createElement("div",{className:"list-wrapper",ref:this.listRef},t.map(function(t,n){return a.a.createElement("div",{className:"shop-item",key:n,onClick:function(t){e.props.onSelectShop(t,n)}},a.a.createElement("div",{className:"shop-name"},a.a.createElement("div",{className:L()("select-icon",{active:t.selected})}),t.nearestTag?a.a.createElement("div",{className:"shop-name-container"},a.a.createElement("div",{className:"shop-name-text-tag"},t.name),a.a.createElement("span",{className:"shop-nearst-tag"},t.nearestTag)):a.a.createElement("div",{className:"shop-name-text"},t.name)),a.a.createElement("div",{className:"location"},a.a.createElement("div",{className:"address"},t.address),a.a.createElement("div",{className:t.distance?"distance":""},t.distance)))}),this.state.isLoading&&a.a.createElement("div",{className:"downloader-container"},a.a.createElement("div",{className:"loader-spinner "}))):a.a.createElement("div",{className:"no-shop-hint"},"抱歉，该区域暂无可用门店")}},{key:"render",value:function(){return a.a.createElement("div",{className:"shop-list-container",ref:this.listWrapperRef},this.renderList())}}]),t}(r.Component),ln="undefined"!=typeof window,un={PROVINCE:1,CITY:2,DISTRICT:3,SHOP:4},dn=1e6,pn=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).loadShops=function(){var e=d()(l.a.mark(function e(t){var r,a,o,i,c,u,d,p,m,f,h,v,g,y,_,b,k,I,S;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(r=t||{}).provinceID,o=r.cityID,i=r.districtID,e.next=4,sn();case 4:return c=e.sent,u=c.longitude,d=c.latitude,p=c.hasLocAuth,m=c.locationId,f={longitude:u,latitude:d,province_id:a,city_id:o,page:n.page,size:10,goods_id:n.props.goods.goodsID,has_loc_auth:p,location_id:m},i&&i!==dn&&(f.district_id=i),h="api/turing/mall/query_neighbor_mall_list_v2",1===n.props.actionType&&(h="api/osaka/additional/store_install/query_store_list",g=Object(ge.a)(),y="WGS84",g.platform===Ke.a.PddIOS&&(y="BD09"),_=n.props,b=_.selectedSkuID,k=_.skuInfos,f=s()({},f,{coord_type:y,cat_id_3:n.props.goods.catID3,cat_id_4:n.props.goods.catID4,template_sn_list:x()(n.props.goods,"ui.sku_section.car_shop.vas_template_id"),mall_id:n.props.goods.mallID,sku_id:Number(b),sku_attribute:b&&(null===(v=k[b])||void 0===v?void 0:v.attribute)||""})),e.next=16,Me({method:"POST",url:h,data:f});case 16:if(!(I=e.sent)){e.next=20;break}return S=(I.mall_store_info_list||[]).map(function(e){var t=x()(e,"fee")>=0?Object(Be.b)(e.fee):-1;return{mallID:e.mall_id,shopID:e.store_id,distance:e.distance,name:e.store_name,address:e.store_address,nearestTag:e.nearest_tag,fee:t,srvType:e.srv_type}}),e.abrupt("return",S);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error(e.t0);case 25:case"end":return e.stop()}},e,null,[[0,22]])}));return function(t){return e.apply(this,arguments)}}(),n.loadMoreShops=function(){var e=d()(l.a.mark(function e(t){var r,a,o,i,s,c,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.state,a=r.provinceID,o=r.cityID,i=r.districtID,s=r.shopList,e.next=4,n.loadShops({provinceID:a,cityID:o,districtID:i});case 4:c=e.sent,n.page++,u=!!c.length,n.setState({shopList:s.concat(c),hasMore:u}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:return e.prev=13,t(),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[0,10,13,16]])}));return function(t){return e.apply(this,arguments)}}(),n.onShopLoaded=function(e,t){n.page++;var r=e.length,a=e.find(function(e){return e.shopID===t});a&&(a.selected=!0),n.setState({shopList:e,shopID:a?a.shopID:"0",shopName:a?a.name:"",shopAddress:a?a.address:"",hasMore:r,nearestTag:a?a.nearestTag:"",fee:a?a.fee:-1,srvType:a?a.srvType:""},function(){n.selectRegionTab(un.SHOP)})},n.onSelectShop=function(e,t){e&&e.stopPropagation&&e.stopPropagation();var r=n.state.shopList.map(function(e,n){return e.selected=t===n,e}),a=r[t];n.setState({shopList:r,shopID:a.shopID,shopName:a.name,shopAddress:a.address,nearestTag:a.nearestTag,fee:a.fee,srvType:a.srvType},function(){n.selectRegionTab(un.SHOP)})},n.confirmShop=function(e){e&&e.stopPropagation&&e.stopPropagation();var t=n.state,r=t.provinceID,a=t.cityID,o=t.districtID,i=t.shopID,s=t.shopName,c=t.shopAddress,l=t.nearestTag,u=t.fee,d=t.srvType;if("0"!==i){var p={provinceID:r,cityID:a,districtID:o,shopID:i,shopName:s,shopAddress:c,nearestTag:l,fee:u,srvType:d};n.hideRegionSelectorPanel(e,p)}else Ne("请选择门店")},n.state={currentRegionTab:un.PROVINCE,panelStyle:{transform:"translateY(100%)"},provinceID:"0",provinceName:"",provinces:null,cityID:"0",cityName:"",cities:null,districtID:"0",districtName:"",districts:null,shopID:"0",shopList:[],hasMore:!0,nearestTag:""},n.page=1,n.provincesLoaded=!1,n.citiesLoaded=!1,n.districtsLoaded=!1,n.regionSelectorHeader=a.a.createRef(),n}return k()(t,e),h()(t,[{key:"componentWillMount",value:function(){ln&&n("FIFS")}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("region-selector-list-".concat(this.state.currentRegionTab));Object(ke.a)(t);var n=this.props.addressInfo;n&&n.shopID?this.onAddressInfoLoaded(this.props.addressInfo):this.loadRegions(un.PROVINCE,1).then(function(t){e.onProvincesLoaded(e.state.provinceID,t),e.showRegionSelectorPanel()}).catch(function(){Ne("请重新选择地区")})}},{key:"componentWillReceiveProps",value:function(e){var t=e.addressInfo||{},n=this.props.addressInfo||{};t.province_id+""==n.province_id+""&&t.city_id+""==n.city_id+""&&t.district_id+""==n.district_id+""||this.onAddressInfoLoaded(t)}},{key:"onAddressInfoLoaded",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:n=t.regionId||1,r=t.provinceID,a=t.cityID,o=t.districtID,i=t.shopID,s=setTimeout(function(){Object(be.c)()},500),Promise.all([this.loadRegions(un.PROVINCE,n),this.loadRegions(un.CITY,r),this.loadRegions(un.DISTRICT,a),this.loadShops({provinceID:r,cityID:a,districtID:o})]).then(function(e){c.onProvincesLoaded(r,e[0]),c.onCitiesLoaded(a,e[1]),c.onDistrictsLoaded(o,e[2]),c.onShopLoaded(e[3],i),c.showRegionSelectorPanel(),clearTimeout(s),Object(be.a)()}).catch(function(){Ne("请重新选择地区"),clearTimeout(s),Object(be.a)()});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"generateHeader",value:function(){var e=this,t=this.state,n=t.currentRegionTab,r=t.provinceID,o=t.provinceName,i=t.cityID,s=t.cityName,c=t.districtID,l=t.districtName,u=t.shopID,d=t.shopName;return a.a.createElement("div",{className:"mars-panel-header",ref:this.regionSelectorHeader},a.a.createElement("div",{className:"panel-header-tag-wrapper"},a.a.createElement("div",{className:"mars-ph-province ".concat(1===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(un.PROVINCE,t)}},r+""=="0"?a.a.createElement("span",null,"请选择"):a.a.createElement("span",null,o)),r+""!="0"&&a.a.createElement("div",{className:"mars-ph-city ".concat(2===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(un.CITY,t)}},i+""=="0"?a.a.createElement("span",null,"请选择"):a.a.createElement("span",null,s)),i+""!="0"&&a.a.createElement("div",{className:"mars-ph-district ".concat(3===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(un.DISTRICT,t)}},c+""=="0"?a.a.createElement("span",null,"请选择"):a.a.createElement("span",null,l)),c+""!="0"&&a.a.createElement("div",{className:"mars-ph-shop ".concat(4===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(un.SHOP,t)}},u+""=="0"?a.a.createElement("span",null,"请选择"):a.a.createElement("span",null,d))))}},{key:"generateRegions",value:function(){var e=this,t=this.state,n=t.currentRegionTab,r=t.provinces,o=t.provinceID,i=t.cities,s=t.cityID,c=t.districts,l=t.districtID,u=1===n&&r&&r.map(function(t,n){var r=t.region_id+""==o+""?"region-active":"";return a.a.createElement("li",{key:"province-".concat(n),onClick:function(t){return e.selectProvince(t,n)},className:r},a.a.createElement("span",null,t.region_name))}),d=2===n&&i&&i.map(function(t,n){var r=t.region_id+""==s+""?"region-active":"";return a.a.createElement("li",{key:"city-".concat(n),onClick:function(t){return e.selectCity(t,n)},className:r},a.a.createElement("span",null,t.region_name))}),p=3===n&&c&&c.map(function(t,n){var r=t.region_id+""==l+""?"region-active":"";return a.a.createElement("li",{key:"city-".concat(n),onClick:function(t){return e.selectDistrict(t,n)},className:r},a.a.createElement("span",null,t.region_name))});return a.a.createElement("div",{className:"mars-regions"},1===n&&a.a.createElement("ul",{id:"region-selector-list-1",className:"mars-regions-p"},u),2===n&&a.a.createElement("ul",{id:"region-selector-list-2",className:"mars-regions-c"},d),3===n&&a.a.createElement("ul",{id:"region-selector-list-3",className:"mars-regions-d"},p),4===n&&a.a.createElement("ul",{id:"region-selector-list-4",className:"shop-list-wrapper"},a.a.createElement(cn,{list:this.state.shopList,loadMoreShops:this.loadMoreShops,hasMore:this.state.hasMore,onSelectShop:this.onSelectShop,confirmShop:this.confirmShop})))}},{key:"selectDistrict",value:function(e,t){e&&e.stopPropagation();var n=this.state.districts[t];n&&this.onDistrictEdited(n)}},{key:"onDistrictEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={districtID:t.region_id,districtName:t.region_name,shopID:"0"};this.page=1,this.setState(function(e){return n},d()(l.a.mark(function t(){var n,r,a,o,i,s,c;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.provinceID,a=n.cityID,o=n.districtID,i=setTimeout(function(){Object(be.c)()},500),t.prev=2,t.next=5,e.loadShops({provinceID:r,cityID:a,districtID:o});case 5:s=t.sent,clearTimeout(i),Object(be.a)(),e.page++,c=!!s.length,e.setState({shopList:s,hasMore:c}),e.selectRegionTab(un.SHOP),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),Ne("请重新选择地区");case 17:case"end":return t.stop()}},t,null,[[2,14]])})))}},{key:"selectCity",value:function(e,t){e&&e.stopPropagation();var n=this.state.cities[t];n&&this.onCityEdited(n)}},{key:"onCityEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.citiesLoaded)return!1;var n=t.region_id,r=t.region_name;if(n+""!="0"){var a={cityID:n,cityName:r};this.districtsLoaded=!1,this.onDistrictsLoaded("0",[]).then(function(){e.setState(function(e){return a},function(t){e.loadRegions(un.DISTRICT,n).then(function(t){var n=e.state.districtID;e.onDistrictsLoaded(n,t),e.selectRegionTab(un.DISTRICT)})})})}}},{key:"onDistrictsLoaded",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(n=n.regions||[]).length&&n.unshift({region_id:dn,region_name:"全部区域"});var r=this.isRegionIDContainInRegions(e,n),a={districts:n||[],districtID:r&&e||"0",districtName:r&&r.region_name||""};return new Promise(function(e,n){t.setState(function(e){return a},function(n){t.districtsLoaded=!0,e()})})}},{key:"selectProvince",value:function(e,t){e&&e.stopPropagation();var n=this.state.provinces[t];n&&this.onProvinceEdited(n)}},{key:"onProvinceEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.provincesLoaded){var n=t.region_id,r=t.region_name;n+""!="0"&&(this.citiesLoaded=!1,this.districtsLoaded=!1,this.onCitiesLoaded("0",[]).then(function(){e.onDistrictsLoaded("0",[]).then(function(){var t={provinceID:n,provinceName:r};e.setState(function(e){return t},function(t){e.loadRegions(un.CITY,n).then(function(t){var n=e.state.cityID;e.onCitiesLoaded(n,t),e.selectRegionTab(un.CITY)})})})}))}}},{key:"onCitiesLoaded",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.self_city_id;n=n.regions||[],this.removeToFirst(n,r);var a=this.isRegionIDContainInRegions(e,n),o={cities:n,cityID:a&&e||0,cityName:a&&a.region_name||""};return new Promise(function(e,n){t.setState(function(e){return o},function(n){t.citiesLoaded=!0,e()})})}},{key:"loadRegions",value:function(){var e=d()(l.a.mark(function e(t,n){var r,a,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.actionType,a=1===r?"api/osaka/additional/store_install/query_store_regions":"api/turing/mall/query_store_region",o=1===r?{cat_id_3:this.props.goods.catID3,cat_id_4:this.props.goods.catID4,mall_id:this.props.goods.mallID,template_sn_list:x()(this.props.goods,"ui.sku_section.car_shop.vas_template_id")||""}:{},e.prev=3,e.next=6,Me({method:"POST",url:a,data:s()({region_type:t,goods_id:this.props.goods.goodsID,region_id:n},o)});case 6:return i=e.sent,e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}},e,this,[[3,10,13,15]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"isRegionIDContainInRegions",value:function(e,t){if(!t)return null;for(var n=0;n<t.length;++n){var r=t[n];if(r.region_id+""==e+"")return r}return null}},{key:"removeToFirst",value:function(e,t){var n=this.isRegionIDContainInRegions(t,e),r=e.indexOf(n);r<0||(e.splice(r,1),e.unshift(n))}},{key:"onProvincesLoaded",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.self_province_id;n=n.regions||[],this.removeToFirst(n,r);var a=this.isRegionIDContainInRegions(e,n),o={provinces:n,provinceID:e||"0",provinceName:a&&a.region_name||""};return new Promise(function(e,n){t.setState(function(e){return o},function(n){t.provincesLoaded=!0,e()})})}},{key:"hideRegionSelectorPanel",value:function(e,t){e&&e.stopPropagation(),this.setState({panelStyle:{transform:"translateY(100%)"}}),this.props.hideAddressSelector&&this.props.hideAddressSelector(t),this.props.onClose&&this.props.onClose()}},{key:"selectRegionTab",value:function(e,t){var n=this;t&&t.stopPropagation(),this.setState(function(t){return{currentRegionTab:e}},function(t){if(Object(ke.a)(document.getElementById("region-selector-list-".concat(e))),n.regionSelectorHeader&&n.regionSelectorHeader.current){var r=n.regionSelectorHeader.current;if(r.scrollWidth>r.offsetWidth){var a=r.scrollWidth-r.offsetWidth;r.scrollLeft=e>2?a:0,r.style.transition="all .1s"}}})}},{key:"showRegionSelectorPanel",value:function(e){e&&e.stopPropagation()&&e.preventDefault(),this.setState({panelStyle:{transform:"translateY(0)"}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.panelStyle,r=t.currentRegionTab;return a.a.createElement("div",{id:"region-selector",className:"m-addr-region-selector"},a.a.createElement("div",{className:"bg",onClick:function(t){return e.hideRegionSelectorPanel(t)}}),a.a.createElement("div",{id:"region-selector-panel",className:"mars-panel",style:n},a.a.createElement("div",{className:"region-selector-title"},a.a.createElement("div",{className:"back-warp",onClick:function(t){return e.hideRegionSelectorPanel(t)}},a.a.createElement("div",{className:"back-icon"})),a.a.createElement("div",{className:"region-selector-title-txt"},"根据区域选择门店")),this.generateHeader(),this.generateRegions(),4===r&&a.a.createElement("div",{className:"confirm-shop-btn",onClick:this.confirmShop},"确认门店")))}}]),t}(r.Component);pn.defaultProps={};var mn,fn,hn,vn=pn,gn="根据区域选择门店",yn=(mn=function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(a)))).state={addressSelected:!1,storeName:gn,storeAddress:"",showShop:!1,showRegionSelector:!1,nearestTag:"",fee:-1,hasLocAuth:!1,longitude:-1,latitude:-1,locationId:0},n.onClickDeliver=function(e){return d()(l.a.mark(function t(){var r,a,o,i,s,c,u,d,p,m,f,h,v,g,y,_,b,k,I;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.props,a=r.actionType,o=r.goods,i=r.updateSelectedSendWays,s=n.state.fee,c=x()(o,"ui.sku_section.car_shop.send_type")||[],u=c[e]||{},d=u.show_shop,p=u.type,m=u.store_delivery_id,f=1===a&&s>=0?{fee:1===d&&s>=0?s:0,type:p,storeDeliveryId:m}:{type:p,storeDeliveryId:m},t.next=9,i(f);case 9:if(1!==d&&n.setState({showShop:!1}),!n.state.showShop&&1===d){t.next=12;break}return t.abrupt("return");case 12:if(t.prev=12,v=null,n.state.addressInfo){t.next=28;break}return h=setTimeout(function(){Object(be.c)()},500),t.next=18,sn();case 18:return g=t.sent,y=g.longitude,_=g.latitude,b=g.hasLocAuth,k=g.locationId,n.setState({longitude:y,latitude:_,hasLocAuth:b,locationId:k}),t.next=26,n.requestMall(y,_,b,k);case 26:(v=t.sent)&&n.setMallInfo(v);case 28:if(I=x()(v,"fee")||n.state.fee,!(1===a&&I>=0)){t.next=32;break}return t.next=32,i({type:p,storeDeliveryId:m,fee:I});case 32:t.next=37;break;case 34:t.prev=34,t.t0=t.catch(12),console.error(t.t0);case 37:return t.prev=37,n.setState({showShop:!0}),clearTimeout(h),Object(be.a)(),t.finish(37);case 42:case"end":return t.stop()}},t,null,[[12,34,37,42]])}))},n.getDeliveryData=function(){var e=n.state,t=e.addressInfo,r=e.addressSelected,a=(x()(n.props.goods,"ui.sku_section.car_shop.send_type")||[]).find(function(e){return e.type===x()(n.props.selectedSendWays,"type")});if(a)return 1===a.show_shop?r&&t?{shopID:t.shopID,deliveryId:a.store_delivery_id,srvType:t.srvType}:(Ne("请选择门店"),!1):a.electronic_voucher?{electronicVoucher:a.electronic_voucher}:{deliveryId:a.store_delivery_id};var o=x()(n.props.goods,"ui.sku_section.car_shop.title")||"送货方式";return Ne("请选择"+o),!1},n}return k()(t,e),h()(t,[{key:"requestMall",value:function(){var e=d()(l.a.mark(function e(t,n,r,a){var o,i,c,u,d,p,m,f,h,v,g;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="api/turing/mall/query_neighbor_mall_info_v2",i={},1===this.props.actionType&&(d=Object(ge.a)(),p="WGS84",d.platform===Ke.a.PddIOS&&(p="BD09"),o="api/osaka/additional/store_install/query_neighbor_store",m=x()(this.props.goods,"ui.sku_section.car_shop.vas_template_id"),f=this.props,h=f.selectedSkuID,v=f.skuInfos,i={coord_type:p,cat_id_3:this.props.goods.catID3,cat_id_4:this.props.goods.catID4,template_sn_list:m,mall_id:this.props.goods.mallID,sku_id:Number(h),store_id:null===(c=this.state.addressInfo)||void 0===c?void 0:c.shopID,sku_attribute:h&&(null===(u=v[h])||void 0===u?void 0:u.attribute)||""}),e.next=6,Me({method:"POST",url:o,data:s()({goods_id:this.props.goods.goodsID,longitude:t||0,latitude:n||0,has_loc_auth:r||!1,location_id:a},i)});case 6:return g=e.sent,x()(g,"fee")>=0&&(g.fee=+Object(Be.b)(g.fee)),e.abrupt("return",g);case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"setMallInfo",value:function(e){if(e.store_id){var t={provinceID:e.province_id,cityID:e.city_id,districtID:e.district_id,shopID:e.store_id,srvType:e.srv_type};this.setState({storeName:e.store_name,storeAddress:e.store_address,addressInfo:t,addressSelected:!0,nearestTag:x()(e,"nearest_tag"),fee:x()(e,"fee")})}}},{key:"componentDidMount",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ge.a)(),n=t.isNativePlatform,e.next=4,Zt();case 4:if(r=e.sent,!n||!r){e.next=16;break}return e.next=8,sn();case 8:return a=e.sent,o=a.longitude,i=a.latitude,s=a.locationId,e.next=14,this.requestMall(o,i,r,s);case 14:(c=e.sent)&&this.setMallInfo(c);case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=d()(l.a.mark(function e(t,n){var r,a,o,i,s,c,u,d,p,m,f,h,v,g,y,_,b,k,I,S;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.actionType,o=r.goods,i=r.updateSelectedSendWays,s=r.selectedSkuID,!this.state.showShop||1!==a||s===(null===t||void 0===t?void 0:t.selectedSkuID)&&(null===n||void 0===n?void 0:n.showShop)===this.state.showShop){e.next=30;break}if(c=this.state,u=c.hasLocAuth,d=c.longitude,p=c.latitude,m=c.locationId,f=Object(ge.a)(),h=f.isNativePlatform,e.prev=5,!(d<0||p<0||!(null===(v=this.state.addressInfo)||void 0===v?void 0:v.shopID)||u&&0===d&&0===p||h&&!m)){e.next=14;break}return e.next=9,sn();case 9:g=e.sent,d=g.longitude,p=g.latitude,u=g.hasLocAuth,m=g.locationId;case 14:return e.next=16,this.requestMall(d,p,u,m);case 16:if((y=e.sent)&&this.setMallInfo(y),_=x()(y,"fee")||this.state.fee,b=x()(o,"ui.sku_section.car_shop.send_type")||[],k=b.find(function(e){return 1===e.show_shop})||{},I=k.type,S=k.store_delivery_id,!(1===a&&_>=0)){e.next=25;break}return e.next=25,i({type:I,storeDeliveryId:S,fee:_});case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(5),console.error(e.t0);case 30:case"end":return e.stop()}},e,this,[[5,27]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"showRegionSelector",value:function(){Ee(a.a.createElement(vn,{hideAddressSelector:this.hideAddressSelector,addressInfo:this.state.addressInfo,goods:this.props.goods,actionType:this.props.actionType,selectedSkuID:this.props.selectedSkuID,skuInfos:this.props.skuInfos}))}},{key:"hideAddressSelector",value:function(e){var t=this.props,n=t.actionType,r=t.updateSelectedSendWays,a=t.selectedSendWays;if(e){var o=e||{},i=o.shopID,c=o.shopName,l=o.shopAddress,u=o.nearestTag,d=o.fee,p=this.state.addressSelected||i;this.setState({storeName:c||this.state.storeName,storeAddress:l||this.state.storeAddress,addressInfo:e||this.state.addressInfo,nearestTag:u,fee:d,addressSelected:p},function(){1===n&&d>=0&&r(s()({},a,{fee:d}))})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.storeName,r=t.nearestTag,o=t.fee,i=x()(this.props.goods,"ui.sku_section.car_shop.send_type")||[],s=x()(this.props.goods,"ui.sku_section.car_shop.title")||"送货方式",c=this.props.actionType;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"sku-deliver-area"},a.a.createElement("div",{className:"sku-deliver-title"},s),a.a.createElement("div",{className:"sku-deliver-content"},(i||[]).map(function(t,n){var r=x()(e.props.selectedSendWays,"type")===t.type,i=1===x()(t,"show_shop")&&o>=0?o:0;return a.a.createElement("div",{key:n,className:L()("sku-deliver-way",{selected:r}),onClick:e.onClickDeliver(n),index:n},1===c&&o>=0?"".concat(t.type," ¥").concat(i):t.type)}))),this.state.showShop&&a.a.createElement("div",{className:"sku-shop-area"},a.a.createElement("div",{className:"title"},x()(this.props.goods,"ui.sku_section.car_shop.store_title")),a.a.createElement("div",{className:"content",onClick:this.showRegionSelector},a.a.createElement("div",{className:"sku-shop-info"},a.a.createElement("div",{className:"sku-store"},a.a.createElement("div",{className:"sku-store-name"},n),!!r&&a.a.createElement("span",{className:"sku-nearst-tag"},r)),a.a.createElement("div",{className:"sku-address"},this.state.storeAddress)),a.a.createElement("div",{className:"sku-address-select"},this.state.storeName!==gn?"修改":"去选择",a.a.createElement("span",{className:"enter"})))))}}]),t}(r.Component),Qe()(mn.prototype,"requestMall",[Je],Object.getOwnPropertyDescriptor(mn.prototype,"requestMall"),mn.prototype),Qe()(mn.prototype,"setMallInfo",[Je],Object.getOwnPropertyDescriptor(mn.prototype,"setMallInfo"),mn.prototype),Qe()(mn.prototype,"showRegionSelector",[Je],Object.getOwnPropertyDescriptor(mn.prototype,"showRegionSelector"),mn.prototype),Qe()(mn.prototype,"hideAddressSelector",[Je],Object.getOwnPropertyDescriptor(mn.prototype,"hideAddressSelector"),mn.prototype),mn),_n=function(e){function t(){return m()(this,t),g()(this,_()(t).apply(this,arguments))}return k()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.srvItem;if(t.length<1)return null;var n=x()(this.props.goods,"ui.sku_section.home_install.title")||"服务",r=x()(this.props.goods,"ui.sku_section.home_install.tip")||"服务费用根据实际收货地址浮动";return a.a.createElement("div",{className:"sku-on-site-area"},a.a.createElement("div",{className:"sku-on-site-title"},n),a.a.createElement("div",{className:"sku-on-site-content"},(t||[]).map(function(t,n){var r=x()(e.props.selectedHomeIns,"srv_type")===t.srv_type;return a.a.createElement("div",{key:n,className:L()("sku-on-site-way",{selected:r}),onClick:function(){e.props.handleHomeInsClick&&e.props.handleHomeInsClick(r?{}:t)}},t.desc)})),a.a.createElement("div",{className:"sku-on-site-desc"},r))}},{key:"srvItem",get:function(){var e=this.props,t=e.selectedSkuID,n=e.skuInfos,r=e.goods;return t?(n[t]||{}).srvItem||[]:x()(r,"ui.sku_section.home_install.srv_item")||[]}}]),t}(a.a.Component),bn=n("oobu"),kn=n.n(bn),In=function(e){var t=e.goods,n=e.selectedSkuID,r=e.skuInfos,o=n?x()(r,[[n],"bottomTip"])||"":x()(t,"ui.sku_section.unselect_bottom_tip")||"";return o?a.a.createElement("div",{className:kn.a.bottomTip},a.a.createElement("img",{className:kn.a.icon,src:"https://promotion.pddpic.com/upload/commodity/2020-10-16/a67c3cb8-5452-4269-bc6b-65c6e94a1002.png.slim.png"}),a.a.createElement("span",{className:kn.a.tip},o)):null},Sn=n("ZL4E"),wn=n.n(Sn),xn=n("4xEa"),Cn=n("H5w1"),En=function(e){var t=e.setSkuStyleStatus,n=e.styleStatus,r=e.changeToGroupBuy,o=e.group,i=e.goods,s=e.selectedSkuID,c=e.skuInfos,l=e.goodsNumber,u=void 0===l?1:l,d=e.skuDirectOrder,p=void 0!==d&&d;if(s&&x()(c,[[s],"skuPreSaleTip"],""))return null;var m=s?x()(c,[[s],"normalSavePrice"]):i.unselectNormalSavePrice||"";if(1==+o.requireNum&&+m>0){var f=x()(i,"combineGroups.recommendGroup.memberInfoList")||[],h=f.length>0?"拼单购买无需等待":"拼单购买更优惠",v=x()(i,"combineGroups.recommendGroup.buttonDesc")||"去拼单",g=(f||[]).map(function(e){return e.avatar});return a.a.createElement($e.a,{trackingInfo:{op:"impr",page_el_sn:4842358,goods_id:i.goodsID}},a.a.createElement("div",{className:L()(wn.a.skuGroupBuyContainer,We()({},wn.a.startHide,1===n)),onClick:function(){Object(P.b)({op:"click",page_el_sn:4842358,goods_id:i.goodsID}),t(1),setTimeout(function(){r(),t(2)},200),setTimeout(function(){p?Oe("已切换为拼单"):Ne("已切换为拼单")},500)}},a.a.createElement("div",{className:wn.a.skuGroupBuyAvatars},1===g.length&&a.a.createElement(xn.a,{src:g[0],size:".24rem"}),g.length>1&&a.a.createElement(Cn.a,{srcList:g.slice(0,3),size:".24rem",offset:.5})),a.a.createElement("div",{className:wn.a.skuGroupBuyHint},h,"，立省",a.a.createElement("span",null,Object(Be.a)(m*u)),"元"),a.a.createElement("div",{className:wn.a.skuGroupBuyHintBtn,"data-active":"red"},v)))}return null},Pn=n("i4d4"),Nn=n.n(Pn),On=function(e){var t=e.priceInfo,n=t.promotionPriceDesc,r=t.tipColor,o=t.tipFontSize;return n?a.a.createElement("div",{className:Nn.a.skuQuantityTip},a.a.createElement("div",{className:Nn.a.skuQuantityTipTxt,style:{color:r,fontSize:"".concat(o/100,"rem")}},n)):null},Dn=(n("LuAP"),n("uorM")),Tn=n.n(Dn),An={free:Tn.a.skuSpecValue,selected:L()(Tn.a.skuSpecValue,Tn.a.skuSpecValueSelected),disable:L()(Tn.a.skuSpecValue,Tn.a.skuSpecValueDisable)},jn=(fn=function(e){function t(e){var n;m()(this,t),(n=g()(this,_()(t).call(this,e))).deliverRef=a.a.createRef(),n.skuIphoneRef=a.a.createRef(),n.getSkuRef=function(){return n.skuSelectorBodyRef};var r=n.buildSkuData(e.goods.skus),o=r.skuTypeValues,i=r.typeHashToSkuID,s=r.currentSelect,c=r.skuInfos;return n.state={selectedSkuID:null,goodsNumber:1,skuInfos:c,currentSelect:s,skuTypeValues:o,typeHashToSkuID:i,selectedHomeIns:{},selectedSendWays:{},styleStatus:0},n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u,d=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.keys(this.state.skuInfos).filter(function(e){return d.state.skuInfos[e].quantity>0}),!(n=1===t.length?t[0]:this.props.goods&&this.props.goods.selectSkuId)){e.next=6;break}this.selectSkuId({skuId:n}),e.next=34;break;case 6:r=!0,a=!1,o=void 0,e.prev=9,i=this.state.skuTypeValues[Symbol.iterator]();case 11:if(r=(s=i.next()).done){e.next=20;break}if(1!==(c=s.value).values.length){e.next=17;break}return u=c.type,e.next=17,this.selectOneValue(u,c.values[0]);case 17:r=!0,e.next=11;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),a=!0,o=e.t0;case 26:e.prev=26,e.prev=27,r||null==i.return||i.return();case 29:if(e.prev=29,!a){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}},e,this,[[9,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()},{key:"buildSkuData",value:function(e){var t=[],n={},r={},a={};return e.forEach(function(e){var o=e.specs,i=e.skuID;a[i]=e;var s={};o.forEach(function(e){var n=e.spec_key,a=e.spec_value;s[n]=a;var o=t.filter(function(e){return e.type===n});if(o&&o[0]){var i=o[0].values;!i.includes(a)&&i.push(a)}else r[n]=null,t.push({type:n,values:[a]})}),n[JSON.stringify(s)]=i}),{skuTypeValues:t,typeHashToSkuID:n,currentSelect:r,skuInfos:a}}},{key:"checkHas",value:function(e){var t=this.props.goods.skus,n=!0,r=!1,a=void 0;try{for(var o,i=function(){var t=o.value;if(t.quantity<=0)return"continue";var n={};t.specs.forEach(function(e){var t=e.spec_key,r=e.spec_value;n[t]=r});var r=!0;for(var a in e)e[a]&&n[a]!==e[a]&&(r=!1);return r?{v:t.skuID}:void 0},s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=i();switch(c){case"continue":continue;default:if("object"===ue()(c))return c.v}}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return!1}},{key:"getButtonStatus",value:function(e){var t=this,n=e||this.state.currentSelect,r={};return this.props.goods.skus.forEach(function(e){e.specs.forEach(function(e){var a=e.spec_key,o=e.spec_value,i=s()({},n,We()({},a,o)),c=t.checkHas(i);r[a]=s()({},r[a],We()({},o,c))})}),r}},{key:"selectSkuId",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.skuId,r=t.goodsNumber,a=void 0===r?1:r,o=this.state.typeHashToSkuID,e.t0=l.a.keys(o);case 3:if((e.t1=e.t0()).done){e.next=17;break}if(i=e.t1.value,o[i]!==+n){e.next=15;break}s=JSON.parse(i),e.t2=l.a.keys(s);case 8:if((e.t3=e.t2()).done){e.next=14;break}return c=e.t3.value,e.next=12,this.selectOneValue(c,s[c],!0);case 12:e.next=8;break;case 14:+a>0&&this.setState({goodsNumber:a});case 15:e.next=3;break;case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"resetSkuId",value:function(){var e={};(this.props.goods.skus||[]).forEach(function(t){t.specs.forEach(function(t){var n=t.spec_key;e[n]=null})}),this.setState({currentSelect:e,selectedSkuID:null})}},{key:"checkQuantityAsync",value:function(e){var t=this;this.isCheckQuantityAsync||(this.isCheckQuantityAsync=!0,Me({method:"POST",url:"api/oak/quantity/check",data:{goods_id:this.props.goods.goodsID,sku_id:e,mall_id:this.props.goods.mallID,detail_id:x()(this.props.goods,"activity.detailID"),select_quantity:+this.state.goodsNumber,hostname:location.hostname}}).then(function(n){if(n){var r=n.next_quantity,a=t.state.skuInfos[e];a.isQualityCheckEnd=0===n.has_quantity,a.defaultQuantity=r,t.setState({skuInfos:t.state.skuInfos,isQualityCheckEnd:"".concat(e,"+").concat(a.isQualityCheckEnd)},t.amendLimitQuantity)}t.isCheckQuantityAsync=!1}).catch(function(){t.isCheckQuantityAsync=!1}))}},{key:"getLimitGoodsNumber",value:function(){var e=this.state.selectedSkuID,t=1e5;if(e){var n=this.state.skuInfos[e],r=n.quantity,a=n.staticLimitQuantity,o=n.defaultQuantity;if(this.props.goods.checkQuantity&&o){var i=+a||1;if(n.isQualityCheckEnd)t=Math.min(i,o);else{var s=this.state.goodsNumber;i>o&&s>=o&&this.checkQuantityAsync(e),t=Math.min(i,o)}}else t=Math.min(+a,+r)||1}else t=1e5;return+t<1&&(t=1),t}},{key:"amendLimitQuantity",value:function(){var e=this.getLimitGoodsNumber(),t=this.state,n=t.goodsNumber,r=t.selectedSkuID;if(n>e)if(r&&this.props.goods.checkQuantity){var a=this.state.skuInfos[r],o=a.staticLimitQuantity,i=a.defaultQuantity;(a.isQualityCheckEnd||o<i)&&this.setState({goodsNumber:e},function(){Ne("当前款式最多可拼".concat(e,"件"))}),+n>1e3&&1e3==+e&&this.setState({goodsNumber:e})}else this.setState({goodsNumber:e},function(){Ne("当前".concat(r?"款式":"商品","最多可拼").concat(e,"件"))});else n<1&&this.setState({goodsNumber:1})}},{key:"handleHomeInsClick",value:function(e){this.setState({selectedHomeIns:e})}},{key:"selectOneValue",value:function(){var e=d()(l.a.mark(function e(t,n,r){var a,o,i=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=S()(this.state.currentSelect))[t]!==n||r?a[t]=n:a[t]=null,o=this.state.typeHashToSkuID[JSON.stringify(a)],!this.props.selectOneValueCb){e.next=9;break}return e.next=6,this.props.selectOneValueCb({selectedSkuID:o,type:t,value:n,force:r});case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return this.setState({currentSelect:a,selectedSkuID:o,selectedHomeIns:{}},function(){i.amendLimitQuantity()}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fixInputBug",value:function(){var e=Object(ge.a)();e.system===Ke.b.IOS&&Object(Ke.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}},{key:"setCustomState",value:function(e){this.setState(e)}},{key:"show",value:function(e){var t=this,n=this.props.goods,r=e.preventAutoConfirm;if(1===n.skus.length&&!x()(n,"skus[0].specs.length")){var a=n.skus[0].skuID;if(this.setState({selectedSkuID:a,selectedHomeIns:{}},function(){r||(Re.hide(),t.confirmSku())}),!r)return}if(x()(e,"skuID")){var o=e.goodsNumber;this.setState({goodsNumber:Number(o)||1},function(){t.selectSkuId({skuId:e.skuID,goodsNumber:Number(o)||1})})}}},{key:"setScroll",value:function(){Object(ke.a)(this.skuSelectorBodyRef)}},{key:"goodsNumberBlur",value:function(){this.fixInputBug(),this.setState({goodsNumber:Number(this.state.goodsNumber)||1},this.amendLimitQuantity)}},{key:"goodsNumberChange",value:function(e){var t=parseInt(e.target.value,10)||0;this.setState({goodsNumber:t},this.amendLimitQuantity)}},{key:"updateGoodsNumber",value:function(e){var t=parseInt(this.state.goodsNumber,10)||0;this.setState({goodsNumber:t+e})}},{key:"reduceGoodsNumber",value:function(e){e&&e.stopPropagation(),this.isEnableReduce()&&this.updateGoodsNumber(-1)}},{key:"increaseGoodsNumber",value:function(e){if(e&&e.stopPropagation(),this.isEnableIncrease())this.updateGoodsNumber(1);else{var t=this.getLimitGoodsNumber(),n=this.state.selectedSkuID;Ne("当前".concat(n?"款式":"商品","最多可拼").concat(t,"件"))}}},{key:"confirmSku",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.stopPropagation(),n=this.state.selectedSkuID){e.next=5;break}return Ne(this.priceAreaRef.getSpecDesc()),e.abrupt("return");case 5:if(x()(this.props.goods,"ui.sku_section.view_style_v2")!==ne){e.next=10;break}if(+x()(this.state.selectedHomeIns,"srv_type")>=0){e.next=10;break}return Ne("请选择服务"),e.abrupt("return");case 10:if(x()(this.props.goods,"ui.sku_section.view_style_v2")!==te){e.next=15;break}if(!this.deliverRef.current){e.next=15;break}if(r=this.deliverRef.current.getDeliveryData()){e.next=15;break}return e.abrupt("return");case 15:if(x()(this.props.goods,"ui.sku_section.view_style_v2")!==ee){e.next=22;break}if(!this.skuIphoneRef.current){e.next=22;break}if(a=this.skuIphoneRef.current.getState()||{},i=(o=a).mobileID,o.cityID&&i){e.next=22;break}return Ne("请先选择入网信息"),e.abrupt("return");case 22:(s=this.props.confirmSkuCallBack)&&s({selectedSkuID:n,goodsNumber:this.state.goodsNumber,skuInfo:this.state.skuInfos[n],skuInfos:this.state.skuInfos,iphoneInfo:a,deliveryData:r,homeInsData:this.state.selectedHomeIns,state:this.state,props:this.props});case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isEnableIncrease",value:function(){var e=+this.getLimitGoodsNumber(),t=this.state,n=t.selectedSkuID,r=t.goodsNumber;if(n&&this.props.goods.checkQuantity){var a=this.state.skuInfos[n],o=a.staticLimitQuantity,i=a.defaultQuantity;if(+r>1e3)return!a.isQualityCheckEnd;if(a.isQualityCheckEnd)return r<e;var s=Math.min(o,i);return!(s<=r&&s===o)}return r<e}},{key:"isEnableReduce",value:function(){return!(this.state.goodsNumber<=1)}},{key:"renderSkusElement",value:function(){var e=this,t=this.getButtonStatus(),n={};(Object.keys(this.state.currentSelect)||[]).forEach(function(e){n[e]=null});var r=this.getButtonStatus(n),o=this.props.goods.skus.find(function(e){return e.hotSale})||{},i=((null===o||void 0===o?void 0:o.specs)||[]).map(function(e){return e.spec_value}),s=-1,c=this.state.skuTypeValues.map(function(n,o){var c=n.type,l=n.values,u=(Object.values(r[c])||[]).reduce(function(e,t){return e+(t?1:0)},0),d=l.map(function(n,r){var l=An.disable,d=function(){};t[c]&&t[c][n]&&(l=An.free,d=function(){return e.selectOneValue(c,n)}),e.state.currentSelect[c]===n&&(l=An.selected);var p=n;if(1===e.state.skuTypeValues.length){var m=JSON.stringify(We()({},c,n)),f=e.state.typeHashToSkuID[m],h=e.state.skuInfos[f],v=h.groupSkuUnitPrice,g=h.normalSkuUnitPrice,y=+e.props.group.requireNum>1?v:g;y&&(p="".concat(n,"｜").concat(y))}return s<0&&u>1&&n===i[o]&&(s=o),a.a.createElement("div",{role:"button","aria-label":p,key:r,className:l,onClick:d},s===o&&n===i[o]&&a.a.createElement("div",{"aria-hidden":!0,className:L()(Tn.a.hotSale,Tn.a.hotSaleIcon)}),p)}),p=null,m=x()(e.props.goods,"ui.sku_section.size_chart"),f=+x()(e.props.goods,"ui.sku_section.size_chart_entry_type");if(1===o&&m){var h={page_el_sn:"648235",op:"impr",goods_id:e.props.goods.goodsID};p=a.a.createElement($e.a,{trackingInfo:h},a.a.createElement("span",{className:2===f?Tn.a.skuSizeChartRed:"sku-size-chart",onClick:function(){Object(Ze.a)(m),Object(P.b)({page_el_sn:"648235",op:"click",goods_id:e.props.goods.goodsID})}},2===f?"尺码详情":"详情"))}var v=x()(e.props.goods,"ui.sku_section.size_refer_fit_desc"),g=null;return 1===o&&v&&(g=a.a.createElement("span",{className:Tn.a.sizeDesc},v)),a.a.createElement("div",{className:Tn.a.skuSpecs,key:o},a.a.createElement("span",{className:"sku-specs-key"},c,g,p),a.a.createElement("div",{className:Tn.a.skuSpecValueList},d))});if(x()(this.props.goods,"ui.sku_section.view_style_v2")===ee){var l=this.state.selectedSkuID;return a.a.createElement(a.a.Fragment,null,c,a.a.createElement(Ut,{ref:this.skuIphoneRef,selectedSkuID:l,goodsID:this.props.goods.goodsID,toastSpec:function(){Ne(e.priceAreaRef.getSpecDesc())},getSkuRef:this.getSkuRef}))}if(x()(this.props.goods,"ui.sku_section.view_style_v2")===te){var u=+x()(this.props.goods,"ui.sku_section.car_shop.action_type");return a.a.createElement(a.a.Fragment,null,c,a.a.createElement(yn,{ref:this.deliverRef,goods:this.props.goods,updateSelectedSendWays:function(t){e.setState({selectedSendWays:t})},selectedSendWays:this.state.selectedSendWays,actionType:u,selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos}))}var d=this.props.goods.activity;if(x()(this.props.goods,"ui.sku_section.view_style_v2")===ne&&(!d||25!==d.activityType)){var p=this.state,m=p.selectedSkuID,f=p.skuInfos;return a.a.createElement(a.a.Fragment,null,c,a.a.createElement(_n,{selectedSkuID:m,skuInfos:f,selectedHomeIns:this.state.selectedHomeIns,ref:this.homeRef,goods:this.props.goods,handleHomeInsClick:this.handleHomeInsClick}))}return c}},{key:"renderGoodsNumberElement",value:function(){var e,t,n=this.isEnableIncrease(),r=this.isEnableReduce(),o=(this.state.goodsNumber||0).toString().length,i=o>3?36+9*(o-3):36;return a.a.createElement("div",{className:Tn.a.selectorNumber},a.a.createElement("span",null,"数量"),a.a.createElement("div",{className:Tn.a.numberStepper},a.a.createElement("div",{role:"button","aria-label":"减少数量",className:L()(Tn.a.skuSelectorReduce,(e={},We()(e,Tn.a.skuSelectorReduceEnable,r),We()(e,Tn.a.skuSelectorReduceDisable,!r),e)),onClick:this.reduceGoodsNumber}),a.a.createElement("input",{"aria-label":"当前数量为".concat(this.state.goodsNumber,"件"),className:Tn.a.skuSelectorInput,type:"number",maxLength:"5",value:this.state.goodsNumber+"",onBlur:this.goodsNumberBlur,onChange:this.goodsNumberChange,style:{width:"".concat(i/100,"rem")}}),a.a.createElement("div",{role:"button","aria-label":"增加数量",className:L()(Tn.a.skuSelectorIncrease,(t={},We()(t,Tn.a.skuSelectorIncreaseEnable,n),We()(t,Tn.a.skuSelectorIncreaseDisable,!n),t)),onClick:this.increaseGoodsNumber})))}},{key:"getViewImgList",value:function(e){var t=(Object.values(this.state.skuInfos)||[]).filter(function(e){return e.quantity>0});t.sort(function(e,t){return x()(e,"previewPriority")-x()(t,"previewPriority")});var n=t.map(function(e){return e.thumbUrl});return n.unshift(e),n}},{key:"setSkuStyleStatus",value:function(e){this.setState({styleStatus:e})}},{key:"getSkuButtonText",value:function(){var e=this.props,t=e.goods,n=e.group,r=e.buttonText,a=this.state,o=a.skuInfos,i=a.selectedSkuID;return+((i?o[i].normalSavePrice:t.unselectNormalSavePrice)||"")>0&&1==+n.requireNum?"单独购买":r||"确定"}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.goods,o=n.group,i=n.usePddNativePhoto,s=n.changeToGroupBuy,c=n.hideSkuBottomTip,u=n.consultPromotionPriceParams,p=this.state,m=p.skuInfos,f=p.selectedSkuID,h=p.currentSelect,v=p.styleStatus,g=p.goodsNumber,y=r.hdThumbUrl||r.thumbUrl,_=this.getViewImgList(y);if(f)y=this.state.skuInfos[f].thumbUrl;else if(Object.keys(h).some(function(e){return h[e]})){var b=this.checkHas(h);b&&(y=this.state.skuInfos[b].thumbUrl)}return a.a.createElement("div",{role:"dialog","aria-modal":"true",tabIndex:-1,className:L()(Tn.a.skuSelectorContainer,this.props.isMutliSku&&Tn.a.cartSkuUi)},a.a.createElement("div",{className:Tn.a.skuSelectorHead},a.a.createElement(Nt,{ref:function(e){t.priceAreaRef=e},goods:r,group:o,selectedSkuID:f,currentSelect:h,skuInfos:this.state.skuInfos,selectedHomeIns:this.state.selectedHomeIns,selectedSendWays:this.state.selectedSendWays,goodsNumber:this.state.goodsNumber,styleStatus:v,consultPromotionPriceParams:u,renderPromotionDescContent:function(e){return a.a.createElement(On,{priceInfo:e})},style:{paddingLeft:this.props.isMutliSku?"1.1rem":"1.21rem"},isMutliSku:this.props.isMutliSku}),a.a.createElement(Tt,{usePddNativePhoto:i,group:o,src:y,goods:r,imgList:_,skuInfos:m,selectedSkuID:f,selectSkuId:this.selectSkuId,resetSkuId:this.resetSkuId,goodsNumber:this.state.goodsNumber}),a.a.createElement(H,{className:Tn.a.skuSelectorCloseBtn,onClick:d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.props.onClose&&t.props.onClose();case 1:case"end":return e.stop()}},e)}))})),this.props.renderSkuBlackCard&&this.props.renderSkuBlackCard({skuSelector:this.state}),a.a.createElement("div",{ref:function(e){t.skuSelectorBodyRef=e},className:Tn.a.skuSelectorBody},this.renderSkusElement(),this.renderGoodsNumberElement(),a.a.createElement("div",{className:Tn.a.safeDistance})),this.props.renderFooter&&this.props.renderFooter({selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos,goodsNumber:this.state.goodsNumber}),a.a.createElement(ft,null,a.a.createElement(In,{goods:this.props.goods,selectedSkuID:f,skuInfos:m})),a.a.createElement(ft,null,a.a.createElement(bt,{selectedSkuID:f,skuInfos:m})),!c&&a.a.createElement(ft,null,a.a.createElement(En,{changeToGroupBuy:s,setSkuStyleStatus:this.setSkuStyleStatus,styleStatus:v,group:o,goods:r,selectedSkuID:f,skuInfos:m,goodsNumber:g})),this.props.renderSkuBottomTip&&this.props.renderSkuBottomTip(),a.a.createElement("div",{"aria-label":this.getSkuButtonText(),role:"button","data-active":"red",className:L()(Tn.a.skuSelectorBottom,(e={},We()(e,Tn.a.startHide,1===v),We()(e,Tn.a.startDisplay,2===v),e)),onClick:this.confirmSku},this.getSkuButtonText()))}}]),t}(a.a.PureComponent),Qe()(fn.prototype,"buildSkuData",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"buildSkuData"),fn.prototype),Qe()(fn.prototype,"checkHas",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"checkHas"),fn.prototype),Qe()(fn.prototype,"getButtonStatus",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"getButtonStatus"),fn.prototype),Qe()(fn.prototype,"selectSkuId",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"selectSkuId"),fn.prototype),Qe()(fn.prototype,"resetSkuId",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"resetSkuId"),fn.prototype),Qe()(fn.prototype,"checkQuantityAsync",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"checkQuantityAsync"),fn.prototype),Qe()(fn.prototype,"getLimitGoodsNumber",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"getLimitGoodsNumber"),fn.prototype),Qe()(fn.prototype,"amendLimitQuantity",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"amendLimitQuantity"),fn.prototype),Qe()(fn.prototype,"handleHomeInsClick",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"handleHomeInsClick"),fn.prototype),Qe()(fn.prototype,"selectOneValue",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"selectOneValue"),fn.prototype),Qe()(fn.prototype,"setCustomState",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"setCustomState"),fn.prototype),Qe()(fn.prototype,"show",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"show"),fn.prototype),Qe()(fn.prototype,"setScroll",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"setScroll"),fn.prototype),Qe()(fn.prototype,"goodsNumberBlur",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"goodsNumberBlur"),fn.prototype),Qe()(fn.prototype,"goodsNumberChange",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"goodsNumberChange"),fn.prototype),Qe()(fn.prototype,"updateGoodsNumber",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"updateGoodsNumber"),fn.prototype),Qe()(fn.prototype,"reduceGoodsNumber",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"reduceGoodsNumber"),fn.prototype),Qe()(fn.prototype,"increaseGoodsNumber",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"increaseGoodsNumber"),fn.prototype),Qe()(fn.prototype,"confirmSku",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"confirmSku"),fn.prototype),Qe()(fn.prototype,"isEnableIncrease",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"isEnableIncrease"),fn.prototype),Qe()(fn.prototype,"isEnableReduce",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"isEnableReduce"),fn.prototype),Qe()(fn.prototype,"getViewImgList",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"getViewImgList"),fn.prototype),Qe()(fn.prototype,"setSkuStyleStatus",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"setSkuStyleStatus"),fn.prototype),Qe()(fn.prototype,"getSkuButtonText",[Je],Object.getOwnPropertyDescriptor(fn.prototype,"getSkuButtonText"),fn.prototype),fn),Rn=n("rx36"),Ln=!1,Mn=[],Bn=function(){var e=d()(l.a.mark(function e(){var t,n,r,a=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:void 0,!Ln){e.next=3;break}return e.abrupt("return",new Promise(function(e){Mn.push(e)}));case 3:if(Ln=!0,t){e.next=17;break}return e.prev=5,e.t0=Pe,e.next=9,Me({method:Ae.GET,url:"api/server/_stm"});case 9:e.t1=e.sent,n=(0,e.t0)(e.t1),t=n.serverTime||+Date.now(),e.next=17;break;case 14:e.prev=14,e.t2=e.catch(5),t=+Date.now();case 17:r={serverTime:t},hn=new Rn.default(r),Mn.forEach(function(e){return e()}),Ln=!1;case 21:case"end":return e.stop()}},e,null,[[5,14]])}));return function(){return e.apply(this,arguments)}}(),Fn=function(){var e=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(hn){e.next=3;break}return e.next=3,Bn();case 3:return t=hn.messagePack(),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Un=function(e){return new Promise(function(){var t=d()(l.a.mark(function t(n){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(C.g)(window.location.href),setTimeout(n,300),t.t0=Me,t.t1=Ae.POST,t.t2=s.a,t.next=7,Fn();case 7:t.t3=t.sent,t.t4=+r.page_from||0,t.t5={anti_content:t.t3,merchant_tag:4003,page_from:t.t4},t.t6=e,t.t7=(0,t.t2)(t.t5,t.t6),t.t8=function(){},t.t9={method:t.t1,url:"api/promotion/auto_take_merchant_coupon",data:t.t7,defaultErrorHandler:t.t8},t.t10={isAuth:!0},t.t11=n,t.t12=function(){},(0,t.t0)(t.t9,t.t10).then(t.t11).catch(t.t12);case 18:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},zn=function(e){return new Promise(function(){var t=d()(l.a.mark(function t(n){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(C.g)(window.location.href),setTimeout(n,300),t.t0=Me,t.t1=Ae.POST,t.t2=s.a,t.next=7,Fn();case 7:t.t3=t.sent,t.t4=+r.page_from||0,t.t5={anti_content:t.t3,merchant_tag:4003,page_from:t.t4},t.t6=e,t.t7=(0,t.t2)(t.t5,t.t6),t.t8=function(){},t.t9={method:t.t1,url:"api/promotion/batch_auto_take_merchant_coupon",data:t.t7,defaultErrorHandler:t.t8},t.t10={isAuth:!0},t.t11=n,t.t12=function(){},(0,t.t0)(t.t9,t.t10).then(t.t11).catch(t.t12);case 18:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},Hn=function(){var e=d()(l.a.mark(function e(t,n){var r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.filter(function(e){return!!e}),!((a=r.length)>0)){e.next=10;break}if(1!==a){e.next=7;break}return e.next=6,Un(s()({batch_sn:r[0]},n));case 6:return e.abrupt("return");case 7:if(!(a>1)){e.next=10;break}return e.next=10,zn(s()({batch_sn_list:r},n));case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Vn=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).normalSkuRef=a.a.createRef(),n.skuBgRef=a.a.createRef(),n.isShow=!1,n.initRecoverSkuInfo=0,n.checkDefaultSkuInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(n.initRecoverSkuInfo>=1||!e)return!1;n.initRecoverSkuInfo+=1;var r=n.props.goods||n.state.goods;return!!x()(r,"skus").find(function(n){return n.skuId===e&&n.quantity>=t&&n.isOnsale})},n.recoverSkuInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;n.selectSkuId({skuId:e,goodsNumber:t})},n.show=function(){var e=d()(l.a.mark(function e(t){var r,a,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.isRemote||n.state.isFetch){e.next=6;break}return e.next=3,n.loadGoods();case 3:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:if(t&&"function"==typeof t.setStateCallback&&n.normalSkuRef.current.skuRef.current.setCustomState(t.setStateCallback),r=n.normalSkuRef.current.prepare(t),!r.needShow){e.next=15;break}if(!n.isShow){e.next=11;break}return e.abrupt("return");case 11:a=n.props,o=a.defaultSkuId,i=a.defaultGoodsNumber,n.checkDefaultSkuInfo(o,i)&&n.recoverSkuInfo(o,i),n.skuBgRef.current.style.display="block",setTimeout(function(){n.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",n.normalSkuRef.current.enter(),we(),setTimeout(function(){n.isShow=!0},200)},1);case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.hide=d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isShow){e.next=2;break}return e.abrupt("return");case 2:if(Ce(),!n.props.onHide){e.next=6;break}return e.next=6,n.props.onHide();case 6:n.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",n.normalSkuRef.current.exit(),setTimeout(function(){n.isShow=!1,n.skuBgRef.current.style.display="none"},+n.props.delay||200);case 9:case"end":return e.stop()}},e)})),n.getSelectedSkuID=function(){return n.getSelectedSkuId()},n.getSelectedSkuId=function(){return n.normalSkuRef.current.skuRef.current.state.selectedSkuID},n.getGoodsNumber=function(){return n.normalSkuRef.current.skuRef.current.state.goodsNumber||1},n.selectSkuID=function(e){return n.selectSkuId({skuId:e})},n.selectSkuId=function(e){var t=e.skuId,r=e.goodsNumber,a=void 0===r?1:r;return n.normalSkuRef.current.skuRef.current.selectSkuId({skuId:t,goodsNumber:a})},n.setGoodsNumber=function(e){return n.normalSkuRef.current.skuRef.current.setGoodsNumber(e)},n.onCloseNormalSku=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.hide(),t=x()(n.props,"goods.goodsID")||x()(n.state,"goods.goodsID")||0,Object(P.b)({page_element:"close_btn",goods_id:t,page_el_sn:98835,op:"click"});case 3:case"end":return e.stop()}},e)})),n.takeCouponBeforeForward=function(){var e=d()(l.a.mark(function e(t){var r,a,o,i,s,c,u,d,p,m,f,h,v,g,y;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n.props,a=r.isSingleBuy,o=r.autoTakeCouponParams,!a){e.next=4;break}return e.abrupt("return");case 4:if(i=n.props.goods||n.state.goods,s=t.selectedSkuID,c=t.goodsNumber,u=void 0===c?1:c,d=t.skuInfo,p=x()(St,["".concat(u,"-").concat(s),"batchSn"])||"",m=x()(St,["".concat(u,"-").concat(s),"platformBatchSn"])||"",f=(null===d||void 0===d?void 0:d.batchSn)||"",h=(null===d||void 0===d?void 0:d.platformBatchSn)||"",v=x()(i,"ui.sku_section.sku_take_coupon"),!p&&!m){e.next=18;break}return g=[],p&&g.push(p),m&&g.push(m),e.next=17,Hn(g,o);case 17:return e.abrupt("return");case 18:if(1!==v||!f&&!h){e.next=24;break}return y=[],f&&y.push(f),h&&y.push(h),e.next=24,Hn(y,o);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.error(e.t0);case 29:case"end":return e.stop()}},e,null,[[0,26]])}));return function(t){return e.apply(this,arguments)}}(),n.confirmSkuCallBack=function(e){var t=x()(n.props,"goods.goodsID")||x()(n.state,"goods.goodsID")||0;Le({page_element:"confirm_btn",goods_id:t,page_el_sn:98834,op:"click"},d()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.props.autoTakeCouponParams,t.t0=!e.skuDirectOrder&&r,!t.t0){t.next=5;break}return t.next=5,n.takeCouponBeforeForward(e);case 5:n.props.confirmOrder&&n.props.confirmOrder(e);case 6:case"end":return t.stop()}},t)})))},n.state={isFetch:!1,goods:null},n}return k()(t,e),h()(t,[{key:"loadGoods",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,n=t.params,r=t.responseProcessor,e.next=4,ze(n,r,this.props.apiUrl);case 4:return a=e.sent,e.abrupt("return",new Promise(function(e){a?o.setState({goods:x()(a,"goodsInfo"),isFetch:!0},function(){e(!0)}):o.setState({isFetch:!1},function(){e(!1)})}));case 8:e.prev=8,e.t0=e.catch(0),this.props.loadGoodsFail&&this.props.loadGoodsFail(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.isRemote&&!this.state.goods)return null;var t=this.props.goods;this.props.isRemote&&(t=this.state.goods);var n=this.props,r=n.isSingleBuy,o=n.renderSkuBlackCard,i=n.usePddNativePhoto,s=t.groupTypes[1];return r&&(s=t.groupTypes[0]),a.a.createElement("div",{ref:this.skuBgRef,className:L()(Ve.a.skuSelectorBg,"sku-plus1"),onClick:d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.hide();case 1:case"end":return t.stop()}},t)}))},a.a.createElement(ae,{changeToGroupBuy:this.props.changeToGroupBuy,ref:this.normalSkuRef,goods:t,group:s,onClose:this.onCloseNormalSku,renderSkuBlackCard:o,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,usePddNativePhoto:i},a.a.createElement(jn,null)))}}]),t}(a.a.Component),Gn=n("g5zU"),Wn=n.n(Gn),qn=n("LzYn"),Qn=n.n(qn),Yn={WEIXIN:"WEIXIN",ALIPAY:"ALIPAY",QQ:"QQ",WEIXIN_FRIEND:"WEIXIN_FRIEND",LIANLIANPAY:"LIANLIANPAY",UNIONPAY:"UNIONPAY",DUODUOPAY_ACS:"DUODUOPAY_ACS",HBFQ_ALI_PAY:"HBFQ_ALI_PAY",HB_ALI_PAY:"HB_ALI_PAY",DUODUOPAY:"DUODUOPAY",WEIXIN_CREDIT:"WEIXIN_CREDIT",CREDIT_CARD:"DUODUOPAY_INSTAL"},Xn=new Set([Yn.WEIXIN,Yn.WEIXIN_FRIEND,Yn.ALIPAY,Yn.QQ,Yn.DUODUOPAY,Yn.HBFQ_ALI_PAY,Yn.HB_ALI_PAY,Yn.LIANLIANPAY,Yn.DUODUOPAY_ACS,Yn.WEIXIN_CREDIT,Yn.UNIONPAY,Yn.CREDIT_CARD]),Jn={User:0,Mall:1},Kn=n("E+oP"),Zn=n.n(Kn),$n=n("whv1"),er=n("OUj1"),tr=n.n(er);function nr(e){var t=e.promotionContent,n=e.hasPromotionContent,r=e.installmentNum,o=e.serviceAmountContent,i=e.payAmountPerInstallment,s=e.onClick,c=L()(tr.a.installment,We()({},tr.a.hasPromotionContent,n));return a.a.createElement("div",{className:c,onClick:s},t&&a.a.createElement("span",{className:tr.a.promotionContent},t),a.a.createElement("div",{className:tr.a.number},"".concat(r,"期 ").concat(o)),a.a.createElement("div",{className:tr.a.money},"¥ ".concat(i,"/期")))}function rr(e){var t=e.promotionContent,n=e.hasPromotionContent,r=e.installmentNum,o=e.serviceAmountContent,i=e.payAmountPerInstallment,s=e.onClick,c=L()(tr.a.selectedInstallment,We()({},tr.a.hasPromotionContent,n));return a.a.createElement("div",{className:c,onClick:s},t&&a.a.createElement("span",{className:tr.a.promotionContent},t),a.a.createElement("div",{className:tr.a.selectedNumber},"".concat(r,"期 ").concat(o)),a.a.createElement("div",{className:tr.a.selectedMoney},"¥ ".concat(i,"/期")))}function ar(e){var t=e.promotionContent,n=e.hasPromotionContent,r=e.installmentNum,o=e.serviceAmountContent,i=e.payAmountPerInstallment,s=e.onClick;return a.a.createElement(nr,{promotionContent:t,hasPromotionContent:n,installmentNum:r,serviceAmountContent:o,payAmountPerInstallment:i,onClick:s})}function or(e){var t=e.promotionContent,n=e.hasPromotionContent,r=e.installmentNum,o=e.serviceAmountContent,i=e.payAmountPerInstallment,s=e.onClick,c=L()(tr.a.installment,We()({},tr.a.hasPromotionContent,n));return a.a.createElement("div",{className:c,onClick:s},t&&a.a.createElement("span",{className:tr.a.promotionContent},t),a.a.createElement("div",{className:tr.a.disableNumber},"".concat(r,"期 ").concat(o)),a.a.createElement("div",{className:tr.a.disableMoney},"¥ ".concat(i,"/期")))}function ir(e){Wn()(tr.a);var t=e.termIndex,n=e.promotionContent,r=e.hasPromotionContent,o=e.selectInstallmentTerm,i=e.installmentNum,s=e.serviceAmountContent,c=e.payAmountPerInstallment,l=e.selected,u=e.isChannelSelected,d=e.isDisable,p=function(e){e.stopPropagation(),d?Object(oe.a)("分期信息已选择，如需修改可重新下单"):o&&o(t)};return d?a.a.createElement(or,{promotionContent:n,hasPromotionContent:r,installmentNum:i,serviceAmountContent:s,payAmountPerInstallment:c,onClick:p}):l?u?a.a.createElement(rr,{promotionContent:n,hasPromotionContent:r,installmentNum:i,serviceAmountContent:s,payAmountPerInstallment:c,onClick:p}):a.a.createElement(ar,{promotionContent:n,hasPromotionContent:r,installmentNum:i,serviceAmountContent:s,payAmountPerInstallment:c,onClick:p}):a.a.createElement(nr,{promotionContent:n,hasPromotionContent:r,installmentNum:i,serviceAmountContent:s,payAmountPerInstallment:c,onClick:p})}var sr=n("79DA"),cr=n.n(sr);function lr(e){var t=e.installmentList,n=e.selectedTermIndex,r=e.lockInstallmentTerm,o=e.selectInstallmentTerm,i=e.selected,s=e.isElderMode;Wn()(cr.a);var c=r?n:-1,l=null;return l=s?(null===t||void 0===t?void 0:t.length)>2?cr.a.hbInstallmentList4Elder:cr.a.hbInstallmentList2Elder:cr.a.hbInstallmentList,a.a.createElement("div",{className:l},t.map(function(e,t){return a.a.createElement("div",{className:cr.a.installmentContainer,key:e.term},a.a.createElement(ir,{termIndex:t,isDisable:c!==t&&r,installmentNum:e.term,serviceAmountContent:e.commissionType===Jn.User?"含手续费":"0手续费",payAmountPerInstallment:Object(Be.b)(e.termPrice),selectInstallmentTerm:o,paymentType:$n.a.HBInstallmentPay,selected:n===t,isChannelSelected:i}))}))}var ur=n("iYsC"),dr=n.n(ur),pr=function(){Object(oe.a)("分期信息已选择，如需修改可重新下单")};function mr(e){var t=e.creditCardVo,n=e.orderAmount,o=e.changeBindId,i=e.selectInstallmentTerm,s=e.selectedTermIndex,c=e.isChannelSelected,u=e.lockTerm,p=e.isElderMode;Wn()(dr.a);var m=t.recommendCardVo,f=void 0===m?{}:m,h=t.extra,v=void 0===h?{}:h,g=f.creditInstallments,y=void 0===g?[]:g,_=f.virtualCard,b=f.virtualCardTitle,k=f.bankShort,I=f.icon,S=f.cardEnc,w=f.bindId;function x(){return C.apply(this,arguments)}function C(){return(C=d()(l.a.mark(function e(){var t,r,a,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i(void 0,{expandAfterSelection:!0}),!u){e.next=4;break}return pr(),e.abrupt("return");case 4:return _?Object(P.b)({page_el_sn:5882150}):Object(P.b)({page_el_sn:5882151}),e.prev=5,e.next=8,Object(ye.g)("JSDuoduoWallet","selectCreditCard",{amount:n,selected_bind_id:w,extra:v});case 8:r=e.sent,a=null===r||void 0===r?void 0:null===(t=r.selected_card)||void 0===t?void 0:t.bind_id,s=1==+r.result_type,a&&a!==w&&o&&o({selectedBindId:w,newBindId:a,isNewlyAdded:s}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:case"end":return e.stop()}},e,null,[[5,14]])}))).apply(this,arguments)}Object(r.useEffect)(function(){_?Object(P.c)({page_el_sn:5882150}):Object(P.c)({page_el_sn:5882151})},[_]);var E=!p&&y&&y.length>0&&y.some(function(e,t){return!!e.promotionContent}),N=null;N=p?y.length>4?dr.a.installment6ContainerElder:y.length>2?dr.a.installment4ContainerElder:dr.a.installment2ContainerElder:y.length>3?dr.a.installment6Container:dr.a.installment3Container,N=L()(N,We()({},dr.a.hasPromotionContent,E));var O=null;return O=p?y.length>4?dr.a.installment6Elder:y.length>2?dr.a.installment4Elder:dr.a.installment2Elder:y.length>3?dr.a.installments6:dr.a.installments3,O=L()(O,We()({},dr.a.hasPromotionContent,E)),a.a.createElement("div",{className:N},!!_&&a.a.createElement("div",{className:dr.a.mask,onClick:x}),!!_&&a.a.createElement("div",{className:dr.a.title,onClick:x},b,a.a.createElement("div",{className:dr.a.action},"添加"),a.a.createElement(it.a,{className:dr.a.actionBtn,src:"https://funimg.pddpic.com/transaction/a04ef1f3-565b-4b8e-9caf-be6e606972b0.png.slim.png"})),!_&&a.a.createElement("div",{className:dr.a.title,onClick:x},a.a.createElement(it.a,{className:dr.a.bankIcon,src:I}),"".concat(k," (").concat(S,")"),a.a.createElement("div",{className:dr.a.action},"更换"),a.a.createElement(it.a,{className:dr.a.actionBtn,src:"https://funimg.pddpic.com/transaction/a04ef1f3-565b-4b8e-9caf-be6e606972b0.png.slim.png"})),a.a.createElement("div",{className:O},y.map(function(e,t){var n=s!==t&&u;return a.a.createElement("div",{className:dr.a.installmentContainer,key:e.installmentNum},a.a.createElement(ir,{promotionContent:n||p?null:e.promotionContent,hasPromotionContent:E,termIndex:t,isDisable:n,installmentNum:e.installmentNum,serviceAmountContent:e.serviceAmountContent,payAmountPerInstallment:e.payAmountPerInstallment,selectInstallmentTerm:_?x:i,selected:!_&&s===t,isChannelSelected:c}))})))}var fr=n("5Pt6"),hr=n.n(fr),vr=a.a.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064"},a.a.createElement("path",{d:"M361.396862 939.865243L0 578.298315l123.274648-123.274648 231.140111 231.31135 539.668623-602.20026 129.915445 116.379336-662.601965 739.35115z","p-id":"4065"})),gr=function(e,t){return parseInt(e,10)||t},yr=function(e,t){return(e||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?e:t},_r="#58595b",br=13,kr=16;function Ir(e){var t,n,r=e.installmentList,o=void 0===r?[]:r,i=e.lockInstallmentTerm,s=e.lockCreditCardTerm,c=e.selectPayMethod,l=e.channel,u=e.customStyle,d=void 0===u?{}:u,p=e.orderAmount,m=e.changeBindId,f=e.isElderMode;Wn()(hr.a);var h=l.disabled,v=l.disableContent,g=l.selected,y=l.neverBeenSelected,_=l.hint,b=l.hintIcon,k=l.hintStyle,I=l.preHint,S=l.preHintIcon,w=l.preHintStyle,C=l.channelName,E=l.name,P=l.icon,N=l.termIndex,O=l.creditCardTermIndex,D=l.expanding,T=l.creditCardVo,A=l.payIconContent,j=C===Yn.HBFQ_ALI_PAY&&(!h&&g||!!D),R=C===Yn.CREDIT_CARD&&(T&&!h&&g||D),M=o.findIndex(function(e){return e.defaultSelected}),B=M>=0?M:0,F=((null===T||void 0===T?void 0:null===(t=T.recommendCardVo)||void 0===t?void 0:t.creditInstallments)||[]).findIndex(function(e){return!!e.selected});F<0&&(F=0);var U=L()(hr.a.padding,We()({},hr.a.disable,h)),z=L()(hr.a.item,(n={},We()(n,hr.a.itemDisable,h),We()(n,hr.a.installmentFlag,[Yn.HBFQ_ALI_PAY,Yn.CREDIT_CARD].includes(C)),We()(n,hr.a.itemInstallment,!!j),n)),H=d.selectedIconPadding,V=a.a.createElement(a.a.Fragment,null,!P&&a.a.createElement("span",{className:"".concat(hr.a["p"+C])}),P&&a.a.createElement("span",{style:{backgroundImage:"url(".concat(P,")")},className:hr.a.pfuji})),G=a.a.createElement("span",{className:hr.a.method},E),W=k?{fontSize:f?"".concat(kr/100,"rem"):gr(k.fontSize,br)/100+"rem",color:yr(k.fontColor,_r)}:{},q=w?{fontSize:f?"".concat(kr/100,"rem"):gr(w.fontSize,br)/100+"rem",color:yr(w.fontColor,_r)}:{},Q=function(){return h?null:I&&y?a.a.createElement("span",{className:hr.a.hints},S?a.a.createElement("span",{className:hr.a.icon},a.a.createElement("img",{src:S})):null,a.a.createElement("span",{style:q},I),a.a.createElement("span",{className:hr.a.space})):Zn()(A)?_?a.a.createElement("span",{className:hr.a.hints},b?a.a.createElement("span",{className:hr.a.icon},a.a.createElement("img",{src:b})):null,a.a.createElement("span",{style:W},_),a.a.createElement("span",{className:hr.a.space})):null:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e||[]).map(function(e,n){var r=t?kr/100:gr(e.css_vo.font_size,br)/100;return"text"===e.type?a.a.createElement("span",{key:"item_".concat(n),style:{fontSize:"".concat(r,"rem"),color:yr(e.css_vo.font_color,_r)}},e.content):"icon"===e.type?a.a.createElement(it.a,{src:e.icon_url,className:hr.a.richTextImg,key:"item_".concat(n),style:{height:"".concat(+x()(e,"css_vo",{icon_height:17}).icon_height/100,"rem"),width:"".concat(+x()(e,"css_vo",{icon_width:17}).icon_width/100,"rem")}}):null})}(A,f)},Y=a.a.createElement("div",{className:hr.a.itemDisableText,style:{marginRight:H}},v||"该支付方式当前服务不可用");if(l.channelName===Yn.CREDIT_CARD){var X=O;return(null==X||X<0)&&(X=F),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:U,"data-active":"before-white",style:d},a.a.createElement("div",{className:z,onClick:function(){g||(l.creditCardTermIndex=null==O?F:O>=0?O:F,c&&c(l,{expandAfterSelection:!D}))}},g&&!h&&a.a.createElement("div",{className:hr.a.selectedSvg,style:{marginRight:H}},vr),h&&Y,a.a.createElement("div",{className:hr.a.text},V,G,Q()))),T&&R&&a.a.createElement(mr,{creditCardVo:T,selectInstallmentTerm:function(e,t){e>=0&&(l.creditCardTermIndex=e),c&&c(l,t)},selectedTermIndex:X,isChannelSelected:g,changeBindId:m,orderAmount:p,lockTerm:s,isElderMode:f}))}if(l.channelName===Yn.HBFQ_ALI_PAY){var J,K=L()(hr.a.padding,(J={},We()(J,hr.a.disable,h),We()(J,hr.a.paddingInstallment,!f&&j),We()(J,hr.a.paddingInstallment4Elder,f&&j&&(null===o||void 0===o?void 0:o.length)>2),We()(J,hr.a.paddingInstallment2Elder,f&&j&&(null===o||void 0===o?void 0:o.length)<=2),J));return a.a.createElement("div",{className:K,style:d},a.a.createElement("div",{className:hr.a.hbMask,"data-active":"before-white"},a.a.createElement("div",{className:z,onClick:function(){if(!g){var e={};l.channelName===Yn.HBFQ_ALI_PAY&&(l.termIndex=0===N?N:N||B,e.expandAfterSelection=!D),c&&c(l,e)}}},g&&!h&&a.a.createElement("div",{className:hr.a.selectedSvg,style:{marginRight:H}},vr),h&&Y,a.a.createElement("div",{className:hr.a.text},V,G,Q()))),C===Yn.HBFQ_ALI_PAY&&j&&a.a.createElement(lr,{lockInstallmentTerm:i,selectedTermIndex:0===N?N:N||B,installmentList:o,selected:g,selectInstallmentTerm:function(e){l.termIndex=e,c&&c(l)},isElderMode:f}))}return a.a.createElement("div",{className:U,"data-active":"before-white",style:d},a.a.createElement("div",{className:z,onClick:function(){c&&c(l)}},g&&!h&&a.a.createElement("div",{className:hr.a.selectedSvg,style:{marginRight:H}},vr),h&&Y,a.a.createElement("div",{className:hr.a.text},V,G,Q())))}var Sr=n("PB+Z"),wr=n.n(Sr),xr=a.a.createElement("svg",{t:"1629364484227",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2148"},a.a.createElement("path",{d:"M0 350.06106c0-14.555334 5.555892-29.110668 16.666502-40.222451 22.222394-22.222394 58.241275-22.222394 80.444904 0L511.760148 724.487351l415.129619-415.148385c22.203628-22.222394 58.222509-22.222394 80.444903 0 22.222394 22.222394 22.222394 58.222509 0 80.444903l-428.536712 428.555478c-36.981808 36.944276-97.111406 36.944276-134.074448 0.037532L16.667675 390.283512c-11.111784-11.110611-16.667675-25.667118-16.667675-40.222452z","p-id":"2149"}));function Cr(e){var t=e.showFoldAlipayHint,n=e.onClickExpandAll;return Wn()(wr.a),a.a.createElement("div",{className:wr.a.more,"data-active":"cell-white",onClick:n},a.a.createElement("div",{className:wr.a.hint},"更多支付方式",t&&a.a.createElement("div",{className:wr.a.payment},a.a.createElement("span",{className:wr.a.space},"("),a.a.createElement("span",null,"如 "),a.a.createElement("span",{className:wr.a.wrapper},a.a.createElement("span",{className:wr.a.item},a.a.createElement("span",{className:"".concat(wr.a.moreIcon," ").concat(wr.a.icon1)}),a.a.createElement("span",null,"支付宝"))),a.a.createElement("span",{className:wr.a.space},")"))),a.a.createElement("div",{className:wr.a.arrowsDownSvg},xr))}function Er(e){var t=e.payChannels,n=e.installmentList,r=e.lockInstallmentTerm,o=e.lockCreditCardTerm,i=e.onChannelSelected,s=e.onClickExpandAll,c=e.disableFolding,l=e.customStyle,u=e.orderAmount,d=e.changeBindId,p=e.isElderMode;function m(e,t){i&&i(e,t)}Wn()(Qn.a);var f=!1;t.forEach(function(e){e.channelName===Yn.ALIPAY&&(f=!e.display)});var h=t.filter(function(e){return e.display||c}).map(function(e){return a.a.createElement(Ir,{installmentList:n,lockInstallmentTerm:r,lockCreditCardTerm:o,customStyle:l,key:e.channelName,channel:e,selectPayMethod:m,orderAmount:u,changeBindId:d,isElderMode:p})}),v=t.length>h.length&&!c,g=L()(Qn.a.payment,{pdd_payment_list_elder_mode:p});return a.a.createElement("div",{className:g},h,v&&a.a.createElement(Cr,{onClickExpandAll:s,showFoldAlipayHint:f}))}var Pr=n("Y2vK");function Nr(){return(Nr=d()(l.a.mark(function e(){var t,n,r,a,o,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(!(t=Object(ge.a)()).isTinyNativePlatform){e.next=17;break}if(!(Object(Ke.c)(t.version,"6.5.0")<0)){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,Object(ye.g)("JSPackageManager","checkIfAlipayInstalled");case 9:return n=e.sent,r=(n||{}).isAlipayInstalled,e.abrupt("return",!!r);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",!1);case 17:if(!t.isNativePlatform){e.next=36;break}if(t.statisfy&&t.statisfy("3.2.0","3.2.0","greaterThanEqual")){e.next=21;break}return e.abrupt("return",!1);case 21:return a="",(o=t.system)===Ke.b.IOS?a="alipays":o===Ke.b.Android&&(a="com.eg.android.AlipayGphone"),e.prev=24,e.next=27,Object(ye.g)("AMApplication","check",{app:a});case 27:if(!(i=e.sent)||!i.has_installed){e.next=31;break}return s=parseInt(i.has_installed,10)||0,e.abrupt("return",s);case 31:e.next=36;break;case 33:return e.prev=33,e.t1=e.catch(24),e.abrupt("return",!1);case 36:return e.abrupt("return",t.isAliPayAvailable);case 37:case"end":return e.stop()}},e,null,[[6,14],[24,33]])}))).apply(this,arguments)}function Or(e){var t,n=e.alipayInstalled,r=e.isQQUninstall,a=e.isUnionpayUninstall,o=e.isEmbeddedBrowser,i=e.appVersion,s=e.applePayInstalled,c=i&&Object(Ke.c)(i,"3.65.0")>=0;return{disableFolding:o,installMap:(t={},We()(t,Yn.LIANLIANPAY,!!s),We()(t,Yn.QQ,!r),We()(t,Yn.HBFQ_ALI_PAY,c),We()(t,Yn.ALIPAY,!!n),We()(t,Yn.UNIONPAY,!a),t)}}function Dr(){return Promise.all([function(){return Nr.apply(this,arguments)}(),function(){var e=new Promise(function(e){Object(Pr.a)(function(){e({result:!0})},function(){e({result:!1})})}),t=new Promise(function(e){setTimeout(function(){e({result:!1,timeout:!0})},2e3)});return Promise.race([e,t]).then(function(e){var t=e.result;return e.timeout,t})}(),function(){var e=Object(ge.b)(navigator.userAgent);if(!e.isNativePlatform||Object(Ke.c)(e.version,"4.85.0")<0)return!1;var t=e.system===Ke.b.Android?"com.tencent.mobileqq":"mqqwallet";return Object(ye.g)("AMApplication","check",{app:t}).then(function(e){var t=e.has_installed;return Object(ye.g)("AMStorage","set",{key:"qqUninstall",value:t+""}),0===t}).catch(function(){return!1})}(),function(){var e=Object(ge.a)();if(!e.isNativePlatform||Object(Ke.c)(e.version,"4.85.0")<0)return!1;var t=e.system===Ke.b.Android?"com.unionpay":"uppaywallet";return Object(ye.g)("AMApplication","check",{app:t}).then(function(e){var t=e.has_installed;return Object(ye.g)("AMStorage","set",{key:"unionpayUninstall",value:t+""}),0===t}).catch(function(){return!1})}()]).then(function(e){var t=T()(e,4),n=t[0],r=t[1],a=t[2],o=t[3],i=Object(ge.a)();return Or({alipayInstalled:n,applePayInstalled:r,isQQUninstall:a,isUnionpayUninstall:o,appVersion:i.version,isEmbeddedBrowser:i.isEmbeddedBrowser})})}var Tr=0;var Ar=[Yn.LIANLIANPAY,Yn.QQ,Yn.HBFQ_ALI_PAY,Yn.UNIONPAY];function jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=(t||{}).installMap,a=void 0===r?{}:r,o={},i=Ar;return n&&(i=[].concat(Ar,[Yn.ALIPAY])),i.forEach(function(e){o[e]=a&&!a[e]}),e.filter(function(e){return e&&!o[e.channelName]})}function Rr(e){var t=null,n=null;return e.forEach(function(e){!t&&!e.disabled&&(t=e),e.defaultSelected&&!e.disabled&&(n=e)}),n||t}function Lr(e){var t=e.channelName,n=e.existedChannels,r=e.installmentList,a=e.expandAll,o=e.channel,i=null,s=[],c=[];return n.slice().forEach(function(e){if(e.channelName!==t||e.disabled)e.selected=!1;else{if(e.channelName===Yn.HBFQ_ALI_PAY){var n=r.findIndex(function(e){return e.defaultSelected}),l=n>=0?n:0;e.termIndex>=0||(e.termIndex=(null===o||void 0===o?void 0:o.termIndex)||l)}if(e.channelName===Yn.CREDIT_CARD){var u,d,p=((null===o||void 0===o?void 0:null===(u=o.creditCardVo)||void 0===u?void 0:null===(d=u.recommendCardVo)||void 0===d?void 0:d.creditInstallments)||[]).findIndex(function(e){return!!e.selected});p<0&&(p=0),e.creditCardTermIndex>=0||(e.creditCardTermIndex=(null===o||void 0===o?void 0:o.creditCardTermIndex)||p)}e.display=!0,e.selected=!0,e.neverBeenSelected=!1,i=e}a&&(e.display=!0),e.display?s.push(e):c.push(e)}),{newChannels:s.concat(c),selectedChannel:i}}function Mr(e){var t=e.payChannels,n=e.installmentList,o=void 0===n?[]:n,i=e.lockInstallmentTerm,s=e.lockCreditCardTerm,c=e.isRefreshPayChannels,l=e.ignoreChannels,u=void 0===l?[]:l,d=e.ssrOptimizationParams,p=e.onChannelSelected,m=e.onPayChannelsChanged,f=e.selectedChannelName,h=e.termIndex,v=e.creditCardTermIndex,g=e.disableFolding,y=void 0!==g&&g,_=e.orderAmount,b=e.changeBindId,k=e.customStyle,I=e.isElderMode,S=void 0!==I&&I,w=e.isTinyNativePlatform,x=void 0!==w&&w;function C(e){var n=function(e){var t=e||{},n=t.pdd_native_preload2,r=t.appVersion,a=t.isEmbeddedBrowser;if(n)try{var o=JSON.parse(n)||{},i=o.am_app_che_alipays,s=o.am_app_che_applepay,c=o.qqUninstall,l=o.unionpayUninstall,u=!0,d=!1;return i&&(u=1===parseInt(JSON.parse(i).has_installed)),s&&(d=1===parseInt(JSON.parse(s).has_installed)),Or({alipayInstalled:u,applePayInstalled:d,isQQUninstall:"0"===c,isUnionpayUninstall:"0"===l,appVersion:r,isEmbeddedBrowser:a})}catch(e){Object(E.c)(new Error("nativeExtra parsing error"),{installInfo:n})}return null}(e),r=jr(t.filter(function(e){return!u.includes(e.channelName)}),n,x);return Lr({channelName:(Rr(r)||{}).channelName,existedChannels:r,installmentList:o,expandAll:!!n&&n.disableFolding}).newChannels}var P=Object(r.useState)(function(){return C(d)}),N=T()(P,2),O=N[0],D=N[1],A=function(e){m&&m(e),D(e)};function j(e){var t=e.channelName,n=e.channel,r=e.existedChannels,a=e.opts,i=(a||{}).expandAll,s=Lr({channel:n,channelName:t,existedChannels:r,installmentList:o,expandAll:y||i}),c=s.newChannels,l=s.selectedChannel;A(c),p&&p({selectedChannel:l,channelName:t,opts:a})}return Object(r.useEffect)(function(){Dr().then(function(e){var n=jr(t.filter(function(e){return!u.includes(e.channelName)}),e,x);j({channelName:Rr(n).channelName,existedChannels:n,opts:{expandAll:!!e&&e.disableFolding}}),function(e){e.length<1&&!Tr&&(Tr=!0,Object(E.c)(new Error("empty_paymentlist")))}(n)})},[]),Object(r.useEffect)(function(){if(c)Dr().then(function(e){var n=jr(t.filter(function(e){return!u.includes(e.channelName)}),e,x);A(n)});else{var e=O.slice(),n=e.find(function(e){return e.channelName===Yn.CREDIT_CARD}),r=t.find(function(e){return e.channelName===Yn.CREDIT_CARD});n&&!r&&(n.creditCardVo=null);var a=t.map(function(e){return e.channelName});e.forEach(function(e){a.includes(e.channelName)||Object.assign(e,{hint:null,hintStyle:null,hintIcon:null,preHint:null,preHintStyle:null,preHintIcon:null,payIconContent:null})});var o={};e.forEach(function(e){o[e.channelName]=e}),t.forEach(function(e){var t=o[e.channelName];t&&Object.assign(t,{name:e.name,nameStyle:e.nameStyle,hint:e.hint,hintStyle:e.hintStyle,hintIcon:e.hintIcon,preHint:e.preHint,preHintStyle:e.preHintStyle,preHintIcon:e.preHintIcon,payIconContent:e.payIconContent,creditCardVo:e.creditCardVo})}),A(e)}},[t]),Object(r.useEffect)(function(){if(f&&O.filter(function(e){return e.selected})[0]){var e=O.filter(function(e){return e.channelName===Yn.HBFQ_ALI_PAY})[0];e&&h>=0&&(e.termIndex=h);var t=O.filter(function(e){return e.channelName===Yn.CREDIT_CARD})[0];t&&v>=0&&(t.creditCardTermIndex=v);var n=O.slice(),r=Lr({channelName:f,existedChannels:n,installmentList:o}).newChannels;A(r)}},[f,h,v]),a.a.createElement(Er,{payChannels:O,installmentList:o,lockInstallmentTerm:i,lockCreditCardTerm:s,onChannelSelected:function(e,t){j({channel:e,channelName:e.channelName,existedChannels:O,opts:t})},onClickExpandAll:function(){var e=(O||[]).slice();e.forEach(function(e){e.display=!0}),A(e)},disableFolding:y,customStyle:k,orderAmount:_,changeBindId:b,isElderMode:S})}var Br;function Fr(){return Ur.apply(this,arguments)}function Ur(){return(Ur=d()(l.a.mark(function e(){var t,n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(ge.a)(),t.statisfy&&t.statisfy("3.2.0","3.2.0","greaterThanEqual")){e.next=4;break}return e.abrupt("return",!1);case 4:return n="",(r=t.system)===Ke.b.IOS?n="alipays":r===Ke.b.Android&&(n="com.eg.android.AlipayGphone"),e.prev=7,e.next=10,Object(ye.g)("AMApplication","check",{app:n});case 10:if(!(a=e.sent)||!a.has_installed){e.next=14;break}return o=parseInt(a.has_installed,10)||0,e.abrupt("return",o);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[7,16]])}))).apply(this,arguments)}var zr=(Br={},We()(Br,Yn.WEIXIN,$n.a.WeChat),We()(Br,Yn.WEIXIN_FRIEND,$n.a.FriendPay),We()(Br,Yn.ALIPAY,$n.a.AliPay),We()(Br,Yn.QQ,$n.a.QQPay),We()(Br,Yn.DUODUOPAY,$n.a.DuoDuoPay),We()(Br,Yn.HB_ALI_PAY,$n.a.HBPay),We()(Br,Yn.HBFQ_ALI_PAY,$n.a.HBInstallmentPay),We()(Br,Yn.WEIXIN_CREDIT,$n.a.XianYongHouFu),We()(Br,Yn.LIANLIANPAY,$n.a.ApplePay),We()(Br,Yn.DUODUOPAY_ACS,$n.a.DuoDuoPayACS),We()(Br,Yn.UNIONPAY,$n.a.UnionPay),We()(Br,Yn.CREDIT_CARD,$n.a.CreditCardInstallmentPay),Br);function Hr(e){return Vr.apply(this,arguments)}function Vr(){return(Vr=d()(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==Yn.ALIPAY){e.next=5;break}return e.next=3,Fr();case 3:return n=e.sent,e.abrupt("return",n?$n.a.AliPayDirectDebit:$n.a.AliPay);case 5:if(!(r=zr[t])){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Gr=n("3oyJ"),Wr=n.n(Gr),qr=1,Qr=2,Yr=3;function Xr(e){var t=e.items,n=e.isCombine;return a.a.createElement(a.a.Fragment,null,t&&t.map(function(e,t){if(-1===e.displayType)return a.a.createElement("div",{style:{width:"100%"},key:t});if(0===e.displayType){if(!e.text)return null;var r=e.fontColor,o=e.fontSize;return a.a.createElement("span",{key:t,style:{fontSize:o?"".concat(o/100,"rem"):n?"0.13rem":"0.14rem",color:r},"aria-hidden":!0},e.text)}if(1===e.displayType){var i=e.height,s=e.width,c=e.url,l=e.marginLeft,u=e.marginRight;return c?a.a.createElement(it.a,{key:t,style:{height:i,width:s,marginLeft:l,marginRight:u,marginTop:n?"0.02rem":0},className:Wr.a.groupSubtitleIcon,src:c,"aria-hidden":!0}):null}if(2===e.displayType){var d=e.combineItems;return a.a.createElement("span",{className:Wr.a.combineItems,key:t},a.a.createElement(Xr,{items:d,isCombine:!0}))}return null}))}var Jr=a.a.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064",fill:"#E02E24"},a.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m219.648 307.2l-287.118222 320.398222-122.936889-123.050666L256 570.026667l192.284444 192.398222 352.483556-393.386667L731.648 307.2z","p-id":"35481"})),Kr=a.a.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064",fill:"#9C9C9C"},a.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2z m0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z","p-id":"35612"})),Zr=null;function $r(){return($r=d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr();case 2:Zr=e.sent;case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ea(e){var t=Object(r.useRef)(),n=Object(r.useState)(e.subcontent),o=T()(n,2),i=o[0],s=o[1];Object(r.useEffect)(function(){s(e.subcontent)},[e.subcontent]),Object(r.useEffect)(function(){if(t.current&&t.current.getBoundingClientRect().height>30){var e=i.findIndex(function(e){return 0===e.displayType&&"更换"===e.text});e>-1&&!i.find(function(e){return-1===e.displayType})&&(i.splice(e,0,{displayType:-1}),s(i))}});return a.a.createElement("div",{className:Wr.a.groupSubtitle,onClick:e.onSpread,ref:t,"aria-label":function e(t){return t.reduce(function(t,n){return 0===(null===n||void 0===n?void 0:n.displayType)?t+((null===n||void 0===n?void 0:n.text)||""):2===(null===n||void 0===n?void 0:n.displayType)?t+e((null===n||void 0===n?void 0:n.combineItems)||[]):t},"")}(e.subcontent),role:"button"},a.a.createElement(Xr,{items:e.subcontent}))}var ta=Object(r.forwardRef)(function(e,t){var n,o,i=e.payChannelGroup,s=e.payChannels,c=e.isSelected,l=e.onChannelSelected,u=e.onGroupSelected,d=e.installmentList,p=e.lockInstallmentTerm,m=e.lockCreditCardTerm,f=e.isNormalOnlyGroup,h=Object(r.useState)(!1),v=T()(h,2),g=v[0],y=v[1];if(Object(r.useImperativeHandle)(t,function(){return{unspread:function(){i&&(i.channelGroupType===Yr&&c||y(!1))}}}),!i)return null;var _=null===(n=i.groupContent)||void 0===n?void 0:n.content,b=null===i||void 0===i?void 0:i.groupExtensionContent,k=i.enable,I=null===(o=i.channels.find(function(e){return e.defaultSelected}))||void 0===o?void 0:o.channel,S=i.channels.find(function(e){return e.channel===I}),w=s.find(function(e){return e.channelName===I}),x=(null===S||void 0===S?void 0:S.groupSubContent)||[],C=i.channels.map(function(e){return e.channel}),E=function(){if(i.channelGroupType===Yr){if(w.channelName===Yn.CREDIT_CARD&&!(w.creditCardTermIndex>=0)){var e,t,n=((null===w||void 0===w?void 0:null===(e=w.creditCardVo)||void 0===e?void 0:null===(t=e.recommendCardVo)||void 0===t?void 0:t.creditInstallments)||[]).findIndex(function(e){return!!e.selected});n<0&&(n=0),w.creditCardTermIndex=n}y(!0),N(w,{expandAfterSelection:!0})}else u(i)},P=function(){Object(oe.a)("由于服务方繁忙，该支付方式暂不可用")},N=function(e,t){i.channelGroupType===Yr&&(t?t.supressUnspread=!0:t={supressUnspread:!0}),e.selected=!0,l({channelName:e.channelName,selectedChannel:e,opts:t})},O=b||{},D=O.content,A=O.fontSize,j=void 0===A?14:A,R=O.fontColor,L=void 0===R?"#9c9c9c":R,M=D?a.a.createElement("span",{className:Wr.a.groupExtensionContent,style:{fontSize:"".concat(j/100,"rem"),color:L}},D):null;return g||f?a.a.createElement("div",{className:Wr.a.group},a.a.createElement("div",{className:Wr.a.groupSpreadTitle},_,M),k?a.a.createElement("div",{className:Wr.a.groupSelected},c?Jr:Kr):a.a.createElement("span",{className:Wr.a.unableText},"暂不可用"),a.a.createElement("div",{className:"pdd_payment_list_v2_mode"},function(e){var t=[Yn.LIANLIANPAY,Yn.QQ,Yn.HBFQ_ALI_PAY,Yn.UNIONPAY],n=(Zr||{}).installMap,r=void 0===n?{}:n,a={};return t.forEach(function(e){a[e]=r&&!r[e]}),e.filter(function(e){return e&&!a[e.channelName]})}(s).filter(function(e){return C.includes(e.channelName)}).map(function(t,n){return a.a.createElement(Ir,tt()({key:n},e,{channel:t,selectPayMethod:N,installmentList:d,lockInstallmentTerm:p,lockCreditCardTerm:m}))})),a.a.createElement("div",{className:Wr.a.groupBorder})):a.a.createElement("div",{className:Wr.a.groupUnspreadContainer},a.a.createElement("div",{className:Wr.a.groupUnspread,onClick:k?E:P},a.a.createElement("div",{className:Wr.a.groupTitle},_,M),k?a.a.createElement("div",{className:Wr.a.groupSelected},c?Jr:Kr):a.a.createElement("span",{className:Wr.a.unableText},"暂不可用"),a.a.createElement(ea,{subcontent:x,onSpread:k?function(e){var t;return i.channelGroupType===qr?E():i.channelGroupType===Yr&&1===(null===(t=i.channels)||void 0===t?void 0:t.length)?E():(e.stopPropagation(),void y(!0))}:P})),a.a.createElement("div",{className:Wr.a.groupBorder}))}),na=Object(r.forwardRef)(function(e,t){var n=e.onChannelSelected,o=e.payChannels,i=e.payChannelGroups,s=e.selectedChannel,c=e.installmentList,l=e.lockInstallmentTerm,u=e.lockCreditCardTerm;Object(r.useEffect)(function(){Object(ke.a)(document.querySelector("#commodity_paymentlist_v2"))},[]),Object(r.useEffect)(function(){!function(){$r.apply(this,arguments)}()},[]),Object(r.useEffect)(function(){var e=i.find(function(e){return e.defaultSelected});if(e){var t=e.channels.find(function(e){return e.defaultSelected});if(t){var r=o.find(function(e){return e.channelName===t.channel});r.selected=!0,n({channelName:r.channelName,selectedChannel:r})}}},[]);var d=Object(r.useRef)(),p=Object(r.useRef)(),m=function(){var e,t,n,r;null===(e=d.current)||void 0===e||null===(t=e.unspread)||void 0===t||t.call(e),null===(n=p.current)||void 0===n||null===(r=n.unspread)||void 0===r||r.call(n)};Object(r.useImperativeHandle)(t,function(){return{unspread:m}});var f=function(e){e.channelName;var t=e.selectedChannel,r=e.opts;n({channelName:t.channelName,selectedChannel:t,opts:r}),(null===r||void 0===r?void 0:r.expandAfterSelection)||(null===r||void 0===r?void 0:r.supressUnspread)||m()},h=function(e){return e&&e.channels.map(function(e){return e.channel}).includes(null===s||void 0===s?void 0:s.channelName)},v=function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!h(e)){var r=null===(t=e.channels.find(function(e){return e.defaultSelected}))||void 0===t?void 0:t.channel,a=o.find(function(e){return e.channelName===r});a.selected=!0,n({channelName:a.channelName,selectedChannel:a}),m()}},g=null;i.forEach(function(e){if(h(e)){var t,n,r=e.channels.find(function(e){return e.defaultSelected});g=null===r||void 0===r?void 0:null===(t=r.groupBottomContent)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.text}});var y=1===(null===i||void 0===i?void 0:i.length)&&i[0].channelGroupType===Qr;return a.a.createElement("div",{className:Wr.a.container},a.a.createElement("div",{className:Wr.a.paymentlistv2,id:"commodity_paymentlist_v2"},(i||[]).map(function(t){return t.channelGroupType===qr?a.a.createElement(ta,tt()({},e,{key:"xyhfGroup",payChannelGroup:t,onChannelSelected:f,isSelected:h(t),onGroupSelected:v})):t.channelGroupType===Qr?a.a.createElement(ta,tt()({},e,{key:"normalGroup",ref:d,payChannelGroup:t,onChannelSelected:f,isSelected:h(t),onGroupSelected:v,isNormalOnlyGroup:y})):t.channelGroupType===Yr?a.a.createElement(ta,tt()({},e,{key:"installmentGroup",installmentList:c,lockInstallmentTerm:l,lockCreditCardTerm:u,ref:p,payChannelGroup:t,onChannelSelected:f,isSelected:h(t),onGroupSelected:v})):void 0}),a.a.createElement("div",{className:Wr.a.placeholder})),g&&a.a.createElement("div",{className:Wr.a.channelBottomContent},g))}),ra=n("losq"),aa=n.n(ra),oa=n("9K/W"),ia=n.n(oa),sa=a.a.createContext({glide:function(){}}),ca=sa.Provider;function la(e){var t=e.visible,n=e.onHide,o=void 0===n?function(){}:n,i=e.children,s=e.bgFillClassName,c=void 0===s?"":s,l=e.containerClassName,u=void 0===l?"":l,d=Object(r.useState)(!1),p=T()(d,2),m=p[0],f=p[1];function h(e){e&&e.stopPropagation(),f(!1)}return Object(r.useEffect)(function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,17)};t&&e(function(){e(function(){f(!0)})})},[t]),a.a.createElement("div",{style:{display:t?"":"none"}},a.a.createElement("div",{className:L()(ia.a.bgFill,c,We()({},ia.a.bgFillShow,m)),onClick:h}),a.a.createElement("div",{className:L()(ia.a.container,u,We()({},ia.a.visibleContainer,m)),onClick:function(e){return e.stopPropagation()},onTransitionEnd:function(e){m||o(e)}},a.a.createElement(ca,{value:{glide:h}},i)))}var ua=1,da=3,pa=31,ma=33,fa=34,ha="1",va="支付未完成，请重新支付",ga={DEFAULT:0,LUCKY_DRAW:1,SPIKE:2,TZMD:3,GET_EXTRA_FOR_FREE:4,SUPER_SPIKE:5,NEW_USER_GROUP:6,FREE_TRIAL:7,CAPITAL_GIFT:8,CAPITAL_GIFT_LOTTERY:9,TZYY:10,DEPOSITE_GROUP:11,MULTIPLY_GOODS_DISCOUNT:12,LIMITED_TIME_FREE:13,THOUSAND_PEOPLE_GROUP:14,DUODUO_JINBAO:15,LIMITED_TIME_DISCOUNT:16,APP_NEWER_JOIN_GROUP:17,LIMITED_QUANTITY_DISCOUNT:18,WELFARE:19,LUCKY_DRAW_MUST_WIN:20,ACT_FREE_GROUP:21,SIGN_IN:23,MONTHLY_MOBILE_FARE:24},ya={DEFAULT:1,IMPORTS:2,OVERSEAS_TRANSSHIP:3,OVERSEAS_DM:4,MOBILE_DATA:5,MOBILE_FARE:6,TRADE_COUPON:7,QQ:8,GAS_CARD:9,COMPENSATION:10,WECHAT_RED_ENVELOPE:11,SIGN_IN_BONUS:12,AUDIO_VISUAL_MEMBER:16,PRESCRIPTION_MEDICION:20},_a={Unpayed:"0",Payed:"2",RefundApplied:"3",Refunded:"4"},ba=n("Rc36"),ka=n("gzrZ"),Ia=n("ii9O"),Sa={1101:"当前访问人数较多，请稍后重试",4000004:"当前访问人数较多，请稍后重试",45059:"系统繁忙，请您稍后再试！",50000001:"不支持的手机号",46022:"未满16周岁用户暂时不可购买此商品",45037:"系统繁忙，即将跳转到充值中心充值",46023:"购买该商品需要更新至最新客户端版本",45009:"当前支付方式服务不稳定，建议使用其他支付方式",512:"当前访问人数较多，请稍后重试",409:"当前访问人数较多，请稍后重试",511:"当前访问人数较多，请稍后重试",41003:"当前商品已抢完，建议购买其他商品",44093:"当前商品已抢完，建议购买其他商品",40000061:"您已购买过同类补贴商品，建议购买其他相似商品",40000062:"该商品同一用户仅能以补贴价格购买一件，你已购买过该商品，可邀请好友购买"},wa=function(e){var t={};return Object.keys(e).forEach(function(n){t[n]={code:n,message:e[n]}}),t}({1101:"手机网络繁忙，请稍后再试",30400:"没有安装QQ客户端",40000:"错误的请求地址或方法",40001:"登录已过期，请重新登录",40002:"手机网络繁忙，请稍后再试",40003:"错误的请求参数",40004:"微信登录失败",40005:"请求还在处理中",40006:"手机登录验证码错误",40100:"暂未开通该开放平台",40015:"验证码重复请求",40016:"验证码超出当天限制",40017:"今日可发送次数已达上限",40018:"验证码填写错误",40019:"验证码填写超时",40020:"登录失败",40031:"微信登录失败!",40032:"QQ登录失败!",40033:"登录重试失败，请稍后再试",43058:"",41001:"商品不存在",41002:"商品已下架",41003:"商品已售罄",41004:"商品不在同一商店",41005:"该商品当前不在抽奖活动时间",41006:"商品不在可售区域",41101:"抽奖活动暂不支持单独购买",41102:"卡券可使用的时间已过期，请选购其他商品",42001:"拼单已满",42002:"该拼单不存在",42003:"拼单已过期",42004:"您购买此商品次数达到上限，去看看其他商品吧~",42005:"该商品开团数已达上限",42006:"拼单已满",42007:"此拼单已满，正在发起新拼单...",42501:"订单已成团，暂不支持修改收货地址，请与商家客服联系",42502:"该订单已拼单成功，请刷新页面",43001:"用户不存在",43002:"地址错误",43004:"身份证号不存在",43005:"姓名和身份证号不一致",43006:"对不起，您无法获取或更新身份证号",43007:"对不起，您已用完当前最大验证次数，请24小时后再试",43008:"姓名和身份证不匹配，请重新认证",43009:"您今日认证过于频繁，请明天再试",43010:"该地址已存在",43011:"该地址无法导入",43013:"一小时内不能重复提交",43015:"只允许微信用户够买",43016:"创建地址失败",43017:"最多只能添加100个收货地址哦~",43098:"您在店铺没有拼单成功记录，请勿发红包！拼多多不支持通过发红包购买商品！",43099:"该商品仅限新用户购买一件哦~",44001:"优惠券不存在",44002:"优惠券已使用",44003:"优惠券没有达到最小使用金额",44004:"优惠券已过期",44005:"优惠券不属于用户",44006:"优惠券已废弃",44007:"优惠券暂未到使用时间",44008:"优惠券不能在该分类使用",44010:"优惠券已经抢完了，下次早点来哦",44011:"您已经领过该优惠券",44012:"优惠券领取失败",44015:"不是团长不能使用团长免单优惠券",44016:"优惠券批次不存在",44020:"正在处理中，请稍后再试！",44026:"该券太火爆，全部已被领完",44027:"活动已结束！",44033:"优惠券使用失败",44035:"批次类型错误",44036:"团免券已被领完",44037:"用户已达团免券日领取上限",44038:"您已领取该券",44039:"未找到符合条件的团免券批次",44041:"领取失败",44042:"领取链接已失效，下次早点哦",44043:"不符合领取条件哦",44044:"该优惠券活动不存在",44045:"不在活动时间",44046:"只有无订单的新用户可领取哦",44047:"红包券数量不够",44061:"多件优惠活动结束",44063:"多件优惠已经享受过了",44064:"多件优惠活动暂未开始",44065:"多件优惠活动暂未开始",44066:"多件优惠活动结束",44067:"商家券和多件优惠活动不能同时使用",44072:"分享码已过期",44073:"免拼卡不足",44076:"不符合免拼卡的使用条件",44090:"商品活动未开始",44091:"商品活动已结束",44092:"商品活动不存在",44093:"活动商品已售罄",44095:"商品活动已结束",44096:"商品活动不存在",44097:"您购买的该活动商品数量已达上限",44098:"商品订单已创建",44099:"商品活动有误",44100:"您未获取抢购资格，不可购买该商品",44200:"已达红包使用数量上限",44201:"每满{0}元可用{1}个红包",45001:"订单不存在",45002:"订单不属于该用户",45003:"订单不能取消",45004:"订单商品不一致",45005:"订单已经收货",45006:"订单还未发货",45007:"海淘订单没有提交身份证",45008:"订单已支付",45009:"支付繁忙，请重试",45010:"订单正在支付中",45012:"手机充值号码为空",45013:"手机充值号码不支持",45014:"手机充值商品不存在",45015:"确认收货失败",45023:"正在处理您的退款/售后申诉，无法主动确认收货",45026:"超过购买商品限制",45030:"订单正在处理中，请刷新页面",45031:"单次购买金额不得高于9.5万元",45033:"超过每个手机号码购买次数限制",45034:"抱歉，秒杀尚未开始，请稍候",45035:"该商品为App新人专享秒杀，非首次下载App24小时内的用户无法发起拼单",45036:"每名用户只能购买一次哦",45037:"你的当前登录帐号有些风险哦，建议先直接去充值吧",45038:"包月套餐订单购买免密校验失败",45039:"包月套餐功能升级中，当前只支持微信帐号登录的用户哦",45040:"限购商品暂时无法购买哦～",45041:"本次活动期间已抢到过一张神券，不能再抢了~",45042:"手机网络繁忙，请稍后再试",45043:"该类型商品本次活动期间您已抢过，不能再抢了~",45044:"您好，该商品仅可购买一次哦~",45045:"该商品仅能在拼多多App中购买！",45046:"该商品仅允许微信登录用户购买！",45047:"超过该商品每次购买件数限制",45050:"您已经在本场下过单了，去看看其他商品吧~",45051:"已购买过此类优惠商品，看看其他商品吧",45052:"您最近购买此商品次数达到上限，去看看其他商品吧~",45053:"手机网络繁忙，请稍后再试",45054:"需验证码校验！",45055:"手机网络繁忙，请稍后再试",45104:"不是定金类型订单",45105:"订单已取消",45106:"订单已确认",45107:"定金未成团",45206:"创建订单存在风险",45207:"创建订单验证码非法",45208:"价格有变动，请返回上一页查看",45209:"请更换支付方式，花呗分期暂不可用",45210:"手机网络繁忙，请稍后再试",45301:"店铺补差价金额达到上限！",45320:"未获取活动资格！",45321:"该活动必须是微信APP用户参加！",45322:"该活动同一用户不可重复参加！",45323:"该活动同一设备不可重复参加！",45324:"该活动用户微信置信度较低！",45325:"非APP新用户",45326:"手机网络繁忙，请稍后再试",45327:"账户存在风险，无法下单",45402:"该商品秒杀活动已结束",45403:"该商品免单活动已结束",45404:"该商品买二送一活动已结束",45405:"该商品秒杀活动已结束",45406:"该活动已结束",45407:"该活动已结束",45110:"未到尾款支付时间",45111:"超过尾款支付时间",45112:"未到定金支付时间",45113:"超过定金支付时间",45412:"该商品多件优惠活动已结束",45413:"该商品限时免单活动已结",45416:"该商品优惠活动已结束",45417:"该活动已结束",45418:"该优惠商品已被抢空",45420:"该活动已结束",45422:"该活动已结束",45423:"该活动已结束",45424:"该包月活动已结束",45425:"您向商家补的差价已经超过上限",45428:"该商品属于活动商品，无法正常购买",45429:"该地区暂时无货",45450:"此海淘商品仅支持微信支付",45500:"商品信息和充值号码不匹配",45501:"新地址暂不支持，请重新选择",45511:"您不是专属用户，不能以特惠价开团哦~",45514:"库存不足",45515:"低于最低起售件数",45516:"该商品有更低价的优惠活动，请刷新购买",46001:"团订单不存在",46002:"无法重复参团",46012:"商品售罄，免拼失败，拼单到期后将退款",46013:"秒杀活动结束，免拼失败，拼单到期后将退款",46014:"插队拼单已满",47003:"限量件数已被抢光，请重新选购",47101:"支付失败，限时折扣活动已结束",47102:"支付失败，限量折扣活动已结束，请重新购买",47010:"折扣活动检查失败",47011:"限时折扣活动已经使用",47012:"限时折扣活动未开启",47013:"限时折扣活动未到开始时间",47014:"限时折扣活动已经结束",47015:"商家券和限时折扣活动不能同时使用",47030:"已经催过了，正在尽快发货",47031:"催发货请求异常，请稍后重试",48001:"图片格式错误",48002:"图片大小超过限制",49001:"商品不存在",50000:"当前访问人数较多，请稍后再试",50001:"今天票数已用完，明天再来吧",50002:"当前有未完成的团",80001:"投票活动已结束",60000:"",60001:"该团已经结束",60002:"确认收货失败",60003:"参数错误",60004:"您已退款成功，无须确认收货",60005:"用户拒绝",60006:"用户取消",60007:"确认收货失败，请稍后重试",60100:"未安装微信客户端",60110:"未安装微博客户端",60120:"未安装手机QQ",60200:"录制失败",60201:"录音没有权限",60205:"录音时间过短",60210:"上传失败",60220:"播放失败",71001:"获取售后列表失败",71002:"申请售后失败",71003:"获取售后单详情失败",71004:"售后单添加售后信息失败",71005:"售后单修改失败",71006:"撤销售后失败",71007:"售后单用户确认发货失败",71008:"售后单重新申请失败",71009:"售后单申请平台介入失败",71010:"钱款去向查询失败",71011:"留言标记失败",71012:"售后用户待处理未读数量获取失败",71013:"售后未读留言数目获取失败",71014:"获取付款类型失败",71015:"获取售后原因失败",71016:"获取我要发货列表失败",71017:"获取是否使用平台优惠券失败",71018:"售后单用户确认完成失败",71019:"获取小额打款详情失败",71020:"填写账户信息失败",450130:"商品信息和充值号码不匹配",450131:"该商品每个号码每月限充一次",530001:"团不存在",530002:"团已失效",530003:"团已满",530004:"助力单不存在",530005:"不支持该支付方式",530006:"助力单已支付",530007:"助力单已退款",530008:"不在活动时间",530009:"您已经拿过该商品了，不要贪心哦",530010:"已达到今日帮忙付款次数上限，明日再来吧",530011:"已达到今日帮助该好友次数上限，明日再来吧~",530012:"已经达到帮助该好友支付次数上限，赶紧去帮助其他人吧~",530013:"不符合免费帮忙条件",530014:"您不是拼多多App新人，不能开团哦",144073:"您没有免拼卡，请返回重新下单",144076:"不符合免拼卡的使用条件",144078:"请求失败，请重新发起支付",152001:"限量折扣活动已经使用",152002:"限量折扣活动未开启",152003:"限量折扣活动未到开始时间",152004:"限量折扣活动已经结束",152005:"商家券和限量折扣活动不能同时使用",152006:"限量件数已被抢光，请重新选购",152010:"已达到该商品活动期内的最多购买件数，不能再抢了～",3000001:"充值失败，请稍后重试",3000002:"话费充值失败，请稍后重试",3000003:"话费充值下单失败，请稍后重试",400001:"微信零钱不足，且未绑定银行卡，请绑定银行卡再试，或邀请好友代付",400002:"银行卡余额不足，请绑定其他银行卡再试，或邀请好友代付",400003:"银行卡预留手机号不符，请核对后再试，或邀请好友代付",400004:"银行卡已失效，请核对后再试，或邀请好友代付",400005:"银行拒绝交易，请核对后再试，或邀请好友代付",400099:"支付未完成，请更换支付方式",4000004:"手机网络繁忙，请稍后再试",4000005:"手机网络繁忙，请稍后再试",4000006:"",20504101:"团订单不存在",20504005:"手机网络繁忙，请稍后再试",12960005:"商品不存在",12960006:"活动未开始",12960007:"商品已售罄",12960008:"拼单人数已满",12960009:"只有App新人才能参团哦",12960010:"帐号信息异常",12960012:"该商品一次只能购买1件哦",12960014:"请使用微信登录再下单",12960016:"你已经开过团了，请勿重复开团",12960017:"今日开团次数已用完，明天再来吧",12960018:"今日参团次数已用完，明天再来吧",12960019:"该商品你今日已经参过团了"}),xa={AuthenticationFailed:wa[40001],APIServiceBusy:wa[40002],GraphicalCodeForPhoneCode:wa[40017],LoginFailed:wa[40020],NeedAuthenticationLogin:wa[43058],ItemRemoved:wa[41002],OutOfStock:wa[41003],NotInLuckyTime:wa[41005],AddressUnreachable:wa[41006],NoCouponLeft:wa[44010],CouponTaken:wa[44011],CouponTakeFailed:wa[44012],CouponTakenOut:wa[44026],PersonalInfoNoID:wa[45007],OrderPayed:wa[45008],NeedVerfication:wa[45054],GroupInvalid:wa[46001],GroupFailed:wa[42003],OverBuyLimit:wa[42004],GroupOverflow:wa[42005],GroupAutoOpenFailed:wa[42006],GroupAutoOpenSuccess:wa[42007],IDCardEmpty:wa[43004],NoNameIDBefore:wa[43006],IDCardFake:wa[43008],IDCardFailTooMuch:wa[43009],InsufficientCoupon:wa[44047],AvailableCouponsPerUnit:wa[44201],NoSuchOrder:wa[45001],PrepayBusy:wa[45009],OrderPaying:wa[45010],PaymentDisabled:wa[45210],SpikeComing:wa[45034],OrderPayRisk:wa[45206],OrderPayVerificationInvalid:wa[45207],OrderAlreadyUrged:wa[47030],OrderUrgeError:wa[47031],NativeNormalError:wa[6e4],NativeParamsError:wa[60003],NativeUserRefuse:wa[60005],NativeUserCancel:wa[60006],NativeAudioRecordFailed:wa[60200],NativeAudioRecordUndetermined:wa[60201],NativeAudioTooShort:wa[60205],NativeAudioUploadFailed:wa[60210],NativeAudioPlayFailed:wa[60220],SuccessiveMobileFeeOnlyOnce:wa[45036],SuccessiveMobileFeeRisk:wa[45037],SuccessiveMobileFeeUnsigned:wa[45038],SuccessiveMobileFeeOnlyWechat:wa[45039],OverBuyVirtualGoodsLimit:wa[45033],AvailableActivityChanged:wa[45516],GroupCompleted:wa[42001],InvalidAddress:wa[43002],CouponDailyLimit:wa[44037],CouponBatchLimit:wa[44038],CouponTokenInvalid:wa[44041],CouponTokenExpired:wa[44042],CouponPushNotIn:wa[44043],CouponActivityAbsent:wa[44044],MultiplyDiscountPause:wa[44064],MultiplyDiscountEnd:wa[44066],CouponMaxNumReached:wa[44200],HistoryGroupOpenFailed:wa[46014],GoodsNotExist:wa[49001],NativePaymentCancel:wa[60006],WithoutWeChatClient:wa[60100],QQPayFailed:wa[60120],OrderLimitedSalesEnd:wa[152004],OrderLimitedSalesOut:wa[152006],PayLimitedSalesEnd:wa[47102],PayLimitedSalesOut:wa[47003],ServerBusy:wa[4000004],OrderSpikeMsgError:wa[4000006],WxDirectPayWxBalanceError:wa[400001],WxDirectPayCardBalanceError:wa[400002],WxDirectPayTelephoneError:wa[400003],WxDirectPayCardInvalidError:wa[400004],WxDirectPayRefusedError:wa[400005],WxDirectPayUnknownError:wa[400099],ACT_GROUP_NOT_EXISTS:wa[530001],ACT_GROUP_FAILED:wa[530002],ACT_GROUP_SUCCESS:wa[530003],ACT_RECORD_NOT_EXISTS:wa[530004],PAY_CHANNEL_NOT_SUPPORT:wa[530005],ACT_RECORD_PAID:wa[530006],ACT_RECORD_REFUND:wa[530007],ASSIST_FOR_ONE_DAILY_LIMIT:wa[530011],ASSIST_FOR_ONE_LIMIT:wa[530012],getMsgFromCode:function(e){var t=wa[e];return Sa[e+""]?Sa[e+""]:t?t.message:""}},Ca=n("iuD5"),Ea=Object(ge.b)(window.navigator.userAgent);Ia.a.home=function(){Ea.statisfy&&Ea.statisfy("1.2.2","2.0.8","greaterThan")||Ea.isTinyNativePlatform?Object(ye.g)("JSNavigation","selectTab",{tab_index:0}):Ia.a.uniformForward("index.html")},Ia.a.GroupUrl=Ea.isNativePlatform||["app.yangkeduo.com","panduoduo.yangkeduo.com"].indexOf(location.hostname)>=0?"group7.html":"group8.html";var Pa={SpecGroupDomain:"m.ishangtong.com",GoodsEventTypeWhiteList:[1,7]};Ia.a.genGroupPageUrl=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Ea.isNativePlatform,r=Ea.isWeChatPlatform,a=Pa.SpecGroupDomain,o=Pa.GoodsEventTypeWhiteList,i=parseInt(t.goodsEventType,10),s=o.indexOf(i)>=0,c=t.urlParams,l=t.useSpecDomain,u=void 0===l||l;t.addRandomSuffix&&654===(e=Math.floor(9e3*Math.random())+1)&&(e=Math.floor(653*Math.random())+1);var d=n?"group7.html":"group".concat(e||8,".html");(s&&(d=n?"vns_group.html":"vns_group".concat(e||"",".html")),c&&c.biz_type)&&(2012===parseInt(c.biz_type,10)&&(d="mhf_free_group.html"));(c&&(d="".concat(d,"?").concat(Object(C.b)(c))),r)&&(!(["m.hutaojie.com","panduoduo.yangkeduo.com"].indexOf(location.hostname)>=0)&&u&&a&&(d="//".concat(a,"/").concat(d)));return d};var Na=Ia.a;function Oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Array.isArray(e)){var t;try{t=e.reverse().find(function(e,t){if(0===t)return!1;var n=function(e){var t=e.page_url||"",n=e.page_type||"",r=t.split("/"),a=r[r.length-1].split("?")[0],o=Object(C.g)(t);return{pageUrl:t,pageType:n,pathName:a,pageTimestamp:o._t_timestamp,forceSkip:"1"===o.__fast_return_skip}}(e),r=n.pathName,a=n.pageType,o=n.pageTimestamp,i=n.forceSkip,s=/^\/?(vns_)?(goods|group|order_checkout|comm_goods_shoes)\d*\.html/.test(r),c=["pdd_order_confirm","pdd_goods_detail","pdd_goods_detail_photo_video_browser","pdd_comment_list_picture_browser","pdd_comment_list_picture_preview","pdd_goods_detail_photo_video_browser","pdd_comment_browse","pdd_comment_picture_list","pdd_chat_combined_payment"].includes(a),l=["comm_goods_trip"].includes(o);return!(s||c||l||i)})}catch(e){}return t}}function Da(e){Object(ye.g)("PDDNavigator","backToGoodsList",e)}function Ta(){return Aa.apply(this,arguments)}function Aa(){return(Aa=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Object(ge.a)()).isNativePlatform&&!(Object(Ke.c)(t.version,"3.61.0")<0)){e.next=3;break}return e.abrupt("return",null);case 3:return e.abrupt("return",Object(ye.g)("PDDNavigator","pageSourceStack",{}).then(function(e){return e&&e.pageSourceStack?Oa(e.pageSourceStack):null}).catch(function(){return null}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ja(e){var t=e.url,n=e.name;if(Object(ge.a)().statisfy("5.95.0","5.90.0","greaterThanEqual")){var r=(Object(C.g)(t)||{}).new_window,a={url:Object(C.a)({launch_type:"highlayer"},t),new_window:"0"==="".concat(r)?0:1,display_type:0,block_loading:1,delay_loading_ui_time:500,name:n};Object(ye.g)("JSUniPopup","showHighLayer",{model:a,global:1}).catch(function(){return null})}else Object(ye.g)("PDDPopupManager","showWebLayerAndForward",{model:{url:t,data:"{}"}}).catch(function(){return null})}function Ra(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(ge.a)(),r=n.statisfy&&n.statisfy("2.6.0","2.14.0","greaterThanEqual");function a(e){return o.apply(this,arguments)}function o(){return(o=d()(l.a.mark(function t(n){var a,o,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,o=null,null!=n&&(a=n.group_order_id,o=n.pay_status),+o!=+_a.Payed||null==a){t.next=15;break}if(n.orderStatus=1,n.groupOrderID=a,!r){t.next=15;break}return i={order_sn:e,order_status:n.order_status,pay_status:n.pay_status,shipping_status:n.shipping_status,rate_status:n.rate_status,has_extended:0},t.prev=8,t.next=11,Object(Dt.e)("OrderStatusChangedNotification",i);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(8);case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}},t,null,[[8,13]])}))).apply(this,arguments)}return function(){var n=d()(l.a.mark(function n(r){var o,i,s,c,u,d,p,m,f;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=r.maySuccess,i=function(t){var n=t.count,r="api/aristotle/pay_check?order_sn=".concat(e,"&times=").concat(n,"&success=").concat(o?1:0);return Me({method:"GET",url:r}).catch(function(e){throw e={errorCode:e.errorCode,data:(e.response||{}).data}})},s="timeout",c=function(e){return new Promise(function(t){setTimeout(t,1e3*e)})},u=1;case 5:if(!(u<=5)){n.next=35;break}return d=new Promise(function(e,t){setTimeout(function(){t({errorCode:s})},9500)}),Object(Ca.a)({error_message:"before_paycheck_".concat(o?"maysuccess":"mayfail","_").concat(u),payload:{event:"paycheck",order_sn:e}}),n.prev=8,location.href.includes("hutaojie.com")&&Oe("[hutaojie]: 第"+u+"次查单"),n.next=12,Promise.race([i({count:u}),d]);case 12:if(n.t0=n.sent,n.t0){n.next=15;break}n.t0={};case 15:if((p=n.t0).order_goods=[{event_type:p.event_type}],!(+p.pay_status==+_a.Unpayed&&p.wait_time>0)){n.next=22;break}return n.next=20,c(p.wait_time);case 20:n.next=24;break;case 22:return Object(P.d)({op:"event",event:"pay_order",sub_op:"pay_order",goods_id:t.goodsID,order_sn:e,group_order_id:p.groupOrderID,order_amount:t.orderAmount,pay_app_id:t.appID}),n.abrupt("return",a(p));case 24:n.next=32;break;case 26:throw n.prev=26,n.t1=n.catch(8),m=n.t1.errorCode,f=n.t1.data,Object(E.c)(new Error("paycheck_fail"),{error_message:"paycheck_fail_".concat(m),order_sn:e,payload:JSON.stringify(f)}),new Error({errorCode:m,data:f});case 32:u++,n.next=5;break;case 35:case"end":return n.stop()}},n,null,[[8,26]])}));return function(e){return n.apply(this,arguments)}}()}var La=function(e,t){var n=Object(C.g)(location.href),r=x()(n,"last_host")||"",a=Object(C.a)({group_order_id:e.groupOrderID,order_sn:e.order_sn},Na.GroupUrl);r&&r!==location.hostname&&(a="//"+r+"/"+a);var o=t.sourceChannel,i=x()(n,"refer_page_el_sn"),s=e.eventType,c=e.bizType,l=e.groupOrderID,u=Na.genGroupPageUrl({goodsEventType:s,urlParams:{group_order_id:l,biz_type:c,source_channel:o,refer_page_el_sn:i,source_redirect:e.prepayType,order_sn:e.order_sn},addRandomSuffix:!0,useSpecDomain:!1});r&&r!==location.hostname&&(u="//"+r+"/"+u),u.length>0&&(a=u),t.forwardHideSkuSelect&&t.forwardHideSkuSelect(),Na.uniformForward(a)},Ma=function(e){e=e||{};var t="/order.html?"+Object(C.b)(e),n=x()(Object(C.g)(location.href),"last_host")||"";n&&location.hostname!==n&&(t="//"+n+t),Na.uniformForward(t)};function Ba(){return Fa.apply(this,arguments)}function Fa(){return(Fa=d()(l.a.mark(function e(){var t,n,r,a,o,i,s=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,a=Object(ge.a)(),1!==x()(t,"orderStatus")){e.next=24;break}if(!(n.fastReturn&&Object(Ke.c)(a.version,"4.48.0")>=0)){e.next=20;break}return o=Object(C.a)({group_order_id:t.groupOrderID,order_sn:t.order_sn},n.fastReturn),e.next=9,Ta();case 9:if(i=e.sent,!r.paySuccessCb){e.next=15;break}return ja({url:o,name:"grp_lite_group_web"}),r.forwardHideSkuSelect&&r.forwardHideSkuSelect(),r.paySuccessCb({url:o}),e.abrupt("return");case 15:if(!i){e.next=20;break}return ja({url:o,name:"grp_lite_group_web"}),r.forwardHideSkuSelect&&r.forwardHideSkuSelect(),Da(i),e.abrupt("return");case 20:t.prepayType=n.prepayType,La(t,r),e.next=26;break;case 24:r.forwardHideSkuSelect&&r.forwardHideSkuSelect(),Ma({order_sn:t.order_sn,check_order_payed:0});case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ua(e){Object(ge.a)().isWeChatMiniProgram||Oe("支付未完成，请重新支付")}function za(e){var t=e.orderSn,n=e.error,r=e.defaultOnFailed,a=e.ocManager,o=n.errorCode,i=n.extraErrorInfo,s=(i=void 0===i?{}:i).isCheckOrderFail,c=n.errorHandling;if(!(c=void 0===c?{}:c).isErrorAlerted)return s?(a.forwardHideSkuSelect&&a.forwardHideSkuSelect(),void Ma({order_sn:t,check_order_payed:0})):void r(o);r(-1)}var Ha={NOTHING:0,FORWARD:1,BACK:2,GO_HOME:3,RELOAD:4,GO_ADDRESS_SEL:5,SHOW_IDCARD:6,REFRESH:7,COMPLEX:-1};function Va(e,t){var n=function(){};if(!e)return n;var r=x()(e,"type",0),a=x()(e,"param.url"),o=Object(ge.a)().isWeChatMiniProgram;switch(r){case Ha.FORWARD:return function(){return!o&&Na.uniformForward(a)};case Ha.BACK:return function(){o?window.wx.miniProgram.navigateBack():Na.back(a)};case Ha.GO_HOME:return function(){return!o&&Na.home()};case Ha.RELOAD:return function(){return!o&&Na.reload(a)};case Ha.REFRESH:return function(){return location.reload()};default:return n}}var Ga={TOAST:"toast",NOTHING:"nothing",ALERT:"alert",CONFIRM:"confirm"};function Wa(e){if(e){var t=x()(e,"view_style",Ga.TOAST),n=x()(e,"view_object.message")||"",r=x()(e,"view_object.title")||"";n||(r=r||"系统繁忙，请稍后再试");var a=function(e,t){var n=e||{},r=n.on_show,a=n.on_ok,o=n.on_cancel,i={};return i.onShow=Va(r),i.onCancel=Va(o),i.onOk=Va(a),i}(x()(e,"view_object"))||{},o=a.onOk,i=a.onCancel,s=a.onShow,c=x()(e,"view_object.ok_label")||"确定",l=x()(e,"view_object.cancel_label")||"取消",u=+x()(e,"view_object.on_close.type"),d=Object(ge.a)().isWeChatMiniProgram;switch(t){case Ga.NOTHING:break;case Ga.ALERT:Object(ot.a)({title:r,text:n,onConfirm:d?void 0:o,onClose:d?void 0:o,confirmButtonLabel:d?"知道了":c});break;case Ga.CONFIRM:d?Object(ot.a)({title:r,text:n,confirmButtonLabel:"知道了"}):Object(Qt.a)({title:r,text:n,onConfirm:o,onCancel:i,onClose:2==+u?o:i,cancelButtonLabel:l,confirmButtonLabel:c});break;default:Oe(r,{onClose:function(){s&&s()}})}}}var qa=function(e){var t=e||{},n=t.onConfirm,r=t.onClose;Object(ot.a)(s()({},e,{onClose:r||n}))},Qa=function(e){return[xa.MultiplyDiscountEnd.code,xa.MultiplyDiscountPause.code].indexOf(e)>=0},Ya=function(e){return[xa.NotInLuckyTime.code].indexOf(e)>=0},Xa=function(e){return[xa.NeedVerfication.code].indexOf(e)>=0},Ja=function(e,t){return[xa.OutOfStock.code,xa.GroupOverflow.code].indexOf(e)>=0&&[ga.SPIKE,ga.SUPER_SPIKE].indexOf(parseInt(t,10))>=0},Ka=function(e){return[xa.OutOfStock.code].indexOf(e)>=0},Za=function(e){return[xa.ItemRemoved.code,xa.GroupInvalid.code,xa.OverBuyLimit.code,xa.OrderPayed.code,xa.OverBuyVirtualGoodsLimit.code,xa.GroupOverflow.code].indexOf(e)>=0},$a=function(e){return[xa.PersonalInfoNoID.code].indexOf(e)>=0},eo=function(e){return[xa.OrderSpikeMsgError.code].indexOf(e)>=0},to=function(e){return[xa.SpikeComing.code].indexOf(e)>=0},no=function(e){return[+xa.WxDirectPayWxBalanceError.code,+xa.WxDirectPayCardBalanceError.code,+xa.WxDirectPayTelephoneError.code,+xa.WxDirectPayCardInvalidError.code,+xa.WxDirectPayRefusedError.code,+xa.WxDirectPayUnknownError.code].indexOf(+e)>=0},ro=function(e){return[xa.IDCardEmpty.code,xa.IDCardFake.code,xa.IDCardFailTooMuch.code].indexOf(e)>=0},ao=function(e){return[xa.GroupAutoOpenSuccess.code].indexOf(e)>=0},oo=function(e){return[1101,4000004,409,512,511].includes(+e)},io=function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.errorCode,r=t.data,a=t.handleUnclassifiedErrors,o=t.store,n+="",i=r&&r.error_msg||xa.getMsgFromCode(n),s=o.goodsId,c=o.goodsInfo,u=Object(ge.a)(),d=u.isWeChatMiniProgram,!Ja(n,c.eventType)){e.next=10;break}qa({title:i,onConfirm:function(){!d&&Na.reload("spike.html")}}),e.next=76;break;case 10:if(!Ka(n)){e.next=14;break}qa({title:i,onConfirm:function(){!d&&Na.reload("per_similar_rec.html?goods_id=".concat(s,"&source=3"))}}),e.next=76;break;case 14:if(!Za(n)){e.next=18;break}qa({title:i,onConfirm:function(){!d&&Na.home()}}),e.next=76;break;case 18:if(!Qa(n)){e.next=22;break}qa({title:i,onConfirm:function(){location.reload()}}),e.next=76;break;case 22:if(!Ya(n)){e.next=26;break}qa({title:i,onConfirm:function(){!d&&Na.reload("vns_goods_list.html?cid=checkout_expire_choujiang&_ex_src=order_checkout&_ex_sid=checkout_expire_choujiang")}}),e.next=76;break;case 26:if(!$a(n)){e.next=30;break}qa({title:i,onConfirm:function(){}}),e.next=76;break;case 30:if(!ao(n)){e.next=34;break}Oe("拼单已满"),e.next=76;break;case 34:if(!to(n)){e.next=38;break}qa({title:i,onConfirm:function(){}}),e.next=76;break;case 38:if(!no(n)){e.next=42;break}qa({title:"微信免密支付不成功",text:i,confirmButtonLabel:"知道了",onConfirm:function(){Oe(va)}}),e.next=76;break;case 42:if(!Xa(n)){e.next=46;break}!d&&Na.uniformForward("verification.html?scene_type=25"),e.next=76;break;case 46:if(!eo(n)){e.next=50;break}r&&r.error_msg&&qa({title:r.error_msg,onConfirm:function(){!d&&Na.home()}}),e.next=76;break;case 50:if(!ro(n)){e.next=54;break}Oe(i),e.next=76;break;case 54:if(n!==xa.AvailableActivityChanged.code){e.next=58;break}qa({title:i,onConfirm:function(){!d&&Na.reload()}}),e.next=76;break;case 58:if("0"!==n&&"54001"!==n){e.next=61;break}e.next=76;break;case 61:if(!a){e.next=76;break}if(!i&&parseInt(n,10)>0&&(i="系统繁忙，请稍后再试 (".concat(n,")"),Object(E.c)(new Error("order_err_unknown"),{error_message:"err_unknown_".concat(n)})),!oo(n)){e.next=75;break}if(!((p=o.cureNCov>0?o.cureNCov:200)>0)){e.next=71;break}return e.next=68,new Promise(function(e){return setTimeout(e,Math.min(p,3e3))});case 68:return Object(be.a)(),e.next=71,new Promise(function(e){return setTimeout(e,100)});case 71:(m=x()(r,"error_payload"))?Wa(m):qa({title:i}),e.next=76;break;case 75:Oe(i);case 76:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function so(e){var t=e.errorCode,n=e.data,r=e.handleUnclassifiedErrors,a=e.ocData;t=parseInt(t,10);var o=x()(n,"error_payload");if(!o)return io({errorCode:t,data:n,handleUnclassifiedErrors:r,store:a});var i=x()(o,"cure_ncov"),s=x()(o,"order_path");if(i>=0&&(a.cureNCov=i),s&&(a.orderServicePath=s),4000004===t)return io({errorCode:t,data:n,handleUnclassifiedErrors:r,store:a});Wa(o)}var co=n("AV9X");var lo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.groupId,n=void 0===t?"10242":t,r=e.customTags,a=e.customFields,o=void 0===a?{}:a,i=e.customLongFields,c=se.a.getInstance().getPageName(),l=Object(ge.a)(),u=l.version;Object(co.a)({groupId:n,customTags:s()({pageName:c,verNo:function(e){var t=String(e).split(".").reverse().reduce(function(e,t,n){return+e+ +t*Math.pow(100,n)},0);return t>=48700?"after487":t>=45300?"453to486":t>=42600?"426to452":t>=4e4?"400to425":t>=35100?"351to399":t>0?"below350":0}(u),host:function(){var e=location.hostname;return["mobile.yangkeduo.com","m.pinduoduo.net","sc.yangkeduo.com"].includes(e)?e:"other"}(),platform:l.platform},r),customFields:o,customLongFields:i})},uo=function(){var e=Object(ge.a)();return e.statisfy&&e.statisfy("6.3.0","6.3.0","greaterThanEqual")},po=function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.snapshotId,r=t.extMap,a=t.antiContent,e.next=3,Me({method:Ae.POST,url:"api/kali/certification/living/sdk/create_process_and_validate",data:{snapshot_id:n,ext_map:r,anti_content:a}});case 3:return o=e.sent,i=o.result||{},s=i.process_id,c=i.verify_auth_token,e.prev=5,e.next=8,Object(ye.g)("JSFaceDetect","detectFaceLive",{face_app_id:"cpdd_risk_common_toxic_order",extra_info:o.result,is_auth_prompt:!0});case 8:u=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),e.t0.noErrorHandle=!0,e.t0;case 15:return d=u.ticket,e.next=18,Me({method:Ae.POST,url:"api/elmar/certification/living/query",data:{process_id:s,ticket:d,verify_auth_token:c,risk_params:{anti_content:a}}});case 18:e.sent;case 19:case"end":return e.stop()}},e,null,[[5,11]])}));return function(t){return e.apply(this,arguments)}}(),mo=n("4V74"),fo=1,ho=4,vo=5,go=6,yo=7,_o=10,bo=9,ko=12,Io=13,So=1,wo=2,xo=3,Co={OCPrefix:"_oc_",OCGOI:"_oc_goi",ForceShare:"force_share",DuoDuoType:"duoduo_type",GroupOrderId:"group_order_id",AwardType:"award_type",BizType:"biz_type",ShowCouponTip:"show_coupon_tip",Pid:"pid",CPSSign:"cps_sign",OutGroupOrderId:"out_group_order_id",OriginalFrontEnv:"original_front_env",BizTag:"biz_tag",MktTrSc:"mkt_tr_sc",MktTrToken:"mkt_tr_token",MktDomain:"mkt_domain",PromotionTag:"promotion_tag",PhoneCardId:"phone_card_id"},Eo=9,Po={InitSku:1001,InitSkuSelected:1002,ChangeSku:1003,ChangeGoddsNumber:1004,GetCoupon:1005,ChangeAddress:1006,OldForNewChangeGoodsInfo:1009,ChangeDelivery:1012,ChangeDeliveryNoSku:1013,ChangeToGroup:1016,ChangeToGroupNoSku:1017},No=function(e){var t=e.userAgent,n=e.queries;return Object(ge.b)(t).isWeChatPlatform&&n&&"miniprogram"===n._x_sid};function Oo(e,t){return e[t]||e[Co.OCPrefix+t]}var Do=function(e){var t={};if(!e)return t;var n=new RegExp(Co.OCPrefix);for(var r in e){if(r.startsWith(Co.OCPrefix))t[r.replace(n,"")]=e[r]}var a=e[Co.PhoneCardId];return a&&(t[Co.PhoneCardId]=a),t};var To=function(e,t){var n={},r=e[Co.Pid],a=e[Co.CPSSign],o=e[Co.OutGroupOrderId],i=e[Co.BizTag];return r&&(n.DUO_DUO_PID=r),a&&(n.cps_sign=a),o&&(n.out_group_order_id=o),i&&(n.biz_tag=i),t&&Object.assign(n,t),0===Object.keys(n||{}).length?null:n};function Ao(){var e=Object(ge.a)();e.isNativePlatform&&Object(Ke.c)(e.version,"4.0.0")>0?Object(ye.g)("WebScene","reload"):Ia.a.reload(window.location.href)}function jo(){var e=Object(ge.a)(),t=e.isNativePlatform,n=e.isPureWeChatPlatform,r={prom:["gp","rpchs","brandvip","jsfdpd","agbc","rlc","mpp","gbc"]};return oi.getInstance().disableForceUseBestPromotion||r.prom.push("uupc"),(t||n)&&(r.pay=["wxc","ci","cicn"]),r}var Ro=function(e){return e?{styleType:e.style_type,fontColor:e.font_color,fontSize:e.font_size,bgColor:e.bg_color,dropdownType:e.dropdown_type}:null},Lo=function(e){if(!e)return{platformPromotion:null,tradeInInfo:null};var t=e.platform_promotion_consult_vos&&e.platform_promotion_consult_vos.find(function(e){return!x()(e,"extra_display_map.trade_in_info")}),n=e.platform_promotion_consult_vos&&e.platform_promotion_consult_vos.find(function(e){return x()(e,"extra_display_map.trade_in_info")}),r=null;return t?r={promotionUniqueNo:t.promotion_unique_no,promotionIdentityVo:t.promotion_identity_vo,discount:t.discount,notUse:e.not_use,category:e.category_name,displayName:e.display_name,promotionStatus:parseInt(t.promotion_status||0,10)}:e.not_use&&(r={notUse:e.not_use,category:e.category_name,displayName:e.display_name,promotionStatus:ua}),{platformPromotion:r,tradeInInfo:n?Bo(x()(n,"extra_display_map.trade_in_info")):null,tradeInInfoPromotion:n}},Mo=function(e){if(e)return e.map(function(e){if(e)return{labelType:x()(e,"extension_map.label_type"),tagType:e.tag_type,tagDisplayVo:x()(e,"tag_display_vo.display_items")}})};function Bo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;if("object"===ue()(e)&&null!==e)if(e instanceof Array)for(var r in n=[],e)n[r]=Bo(e[r],t);else for(var a in n={},e){var o=a.includes("_")?pe()(a):a;t.includes(a)?n[o]=e[a]:n[o]=Bo(e[a],t)}return n}var Fo,Uo={processCellStyle:Ro,processGoodsInfo:function(e,t,n,r,a){var o,i=e.goods_type,s=e.event_type,c=e.need_account,l=function(e){if(!e)return null;var t=x()(e,"css_vo.font_color");return{text:e.title,font_size:e.font_size,font_color:t}};return{name:e.goods_name,goodsId:e.goods_id,beforeNameIcon:e.goods_before_name_icon,beforeNameIconHeight:e.goods_before_name_icon_height,beforeNameIconWidth:e.goods_before_name_icon_width,allowedRegion:(e.allowed_region||[]).join(","),costProvinceCodes:e.cost_province_codes,isCustoms:e.is_customs,goodsType:i,communityGroupBuying:e.community_group_buying,eventType:s,mallId:e.mall_id,costTemplateId:e.cost_template_id,catId:e.cat_id,catId1:e.cat_id1,catId2:e.cat_id2,catId3:e.cat_id3,catId4:e.cat_id4,stockContent:e.stock_content,stockColor:e.stock_color,stockBackground:e.stock_background,goodsNumber:e.goods_number,isInstallment:e.huabei_status||0,goodsLabels:function(e){return e.map(function(e){var t=e.css_vo||{};return{type:e.type,title:e.title,content:e.content,clickType:e.click_type||0,fontColor:t.font_color,fontSize:t.font_size}})}(e.labels||[]),groupId:t.group_id,customerNum:t.customer_num,buyLimit:t.buy_limit,startTime:t.start_time,thumbUrl:n.thumb_url||"",specs:Array.isArray(n.spec)?n.spec:[],specifications:Array.isArray(n.specifications)?n.specifications:[],skuId:n.sku_id,normalPrice:Object(Be.b)(n.normal_price),normalPriceForCent:n.normal_price,groupPrice:Object(Be.b)(n.group_price),groupPriceForCent:n.group_price,weight:n.weight,wareId:parseInt(n.ware_id,10)?n.ware_id:"",activityId:e.activity_id,activityType:e.activity_type,unitPriceForCent:e.unit_price,unitPrice:Object(Be.b)(e.unit_price),unitPriceDisplay:e.goods_unit_labels&&[l(e.goods_unit_labels)],totalPrice:Object(Be.b)(e.goods_number*e.unit_price),totalPriceDisplay:null===(o=e.goods_amount_labels)||void 0===o?void 0:o.map(l),needId:!!a,quantity:n.quantity,limitStatus:e.limit_status,limitQuantity:function(){for(var e=[],t=0;t<arguments.length;t++){var n=parseInt(arguments[t],10)||0;n>0&&e.push(n)}return e.length?Math.min.apply(Math,e):1}(t.order_limit,e.limit_number,n.quantity),limitMessage:e.limit_message,limitNumber:e.limit_number,leastNumber:t.least_number||1,leastQuantity:t.least_number||1,isDepositInflateGoods:e.step_status,isDepositOfHouse:e.deposit_of_house,isSpikeGoods:s===ga.SPIKE,isCompensationGoods:i===ya.COMPENSATION,isDepositeGoods:s===ga.DEPOSITE_GROUP,isMultiplyGoodsDiscount:s===ga.MULTIPLY_GOODS_DISCOUNT,isThreeForTwo:s===ga.GET_EXTRA_FOR_FREE,isVirtualGoods:function(e,t,n){return!!n||t||[ya.MOBILE_DATA,ya.MOBILE_FARE,ya.QQ,ya.GAS_CARD].indexOf(parseInt(e,10))>=0}(i,c,r),isVirtualReceiveGoods:!!r,isMobile:function(e){return[ya.MOBILE_DATA,ya.MOBILE_FARE].indexOf(parseInt(e,10))>=0}(i),isGasNumber:i===ya.GAS_CARD,isQQNumber:i===ya.QQ,isPhoneNumCard:e.is_phone_num_card,needAccount:c,accountBits:e.account_types,overseaType:e.oversea_type||0}},processStepInfo:function(e){return e?{depositPrice:parseInt(e.deposit_price,10)||0,depositLeftTitle:e.deposit_left_title,depositMiddleDesc:e.deposit_middle_desc,depositRightTitle:e.deposit_right_title,inflatePrice:parseInt(e.inflate_price,10)||0,stepPrice:parseInt(e.step_price,10)||0,stepLeftTitle:e.step_left_title,stepMiddleDesc:e.step_middle_desc,stepRightTitle:e.step_right_title,stepPayStartTime:e.step_pay_start_time}:null},processAddressInfo:function(e){if(!e)return{addressId:0,addressSnapshotId:0,name:"",province:"",city:"",district:"",address:"",mobile:"",provinceId:"",isGoodsSoldHere:!1,addressLabels:[],addressGiftStatus:0};var t=function(e){return(e||[]).map(function(e){if(e&&e.title){var t=e.css_vo||{};return{title:e.title,fontColor:t.font_color,fontSize:t.font_size}}})};return{addressId:e.address_id||0,addressSnapshotId:e.address_snapshot_id_str||0,name:e.name||"",province:e.province||"",city:e.city||"",cityId:e.city_id||"",district:e.district||"",districtId:e.district_id||"",address:e.address||"",mobile:e.mobile||"",provinceId:e.province_id||"",isGoodsSoldHere:e.is_goods_sold_here||!1,addressLabels:t(e.labels)||[],unpayAddressLabels:t(e.unpay_labels)||[],addressGiftStatus:parseInt(e.address_gift_status,10)||0}},processVirtualReceiveMethodVO:function(e){return e?{type:e.type,isMobile:["USER_CONTACT_MOBILE","USER_CHARGE_MOBILE"].includes(e.auto_complete_type),label:e.label,autoCompleteType:e.auto_complete_type,placeholder:e.placeholder,value:e.value,orderKey:e.order_key,icon:e.icon,validateRules:e.validate_rules,validateFailedText:e.validate_failed_text,verifyAccountTypes:e.verify_account_types}:null},processMallInfo:function(e){if(!e)return null;var t=(e.labels||[]).filter(function(e){return!!e}).map(function(e){return{height:e.label_height,width:e.label_width,url:e.label_url}});return{id:e.id,name:e.name||"",logo:e.logo||"",mallOrderPrice:e.mall_order_price||null,canCompensate:e.can_compensate||!1,labels:t}},processInstallmentList:function(e){var t=[];return e&&e[0]&&e[0].term_list&&e[0].term_list.map(function(e){t.push({term:e.term,commissionType:e.commission_type,rate:e.rate,termPrice:e.term_price,defaultSelected:e.default_selected})}),t},processPriceInfo:function(){return{orderPrice:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,mallPromotionPrice:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,platformPromotionPrice:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},processIdCardInfo:function(e){return e?{idCardName:e.id_card_name,idCardNo:e.id_card_no,idCardType:e.id_card_type,snapshotId:e.card_snapshot_id,drugInfoSnapshotId:e.epidemic_drug_info_snapshot_id,isDrugInfo:1==+e.id_card_type,authTitle:e.auth_title,authTip:e.auth_tip,authMainTitleTip:e.auth_main_title_tip,authTipColor:e.auth_tip_color,authTitleTip:e.auth_title_tip,authNameTip:e.auth_name_tip,authIdTip:e.auth_id_tip,extendMap:e.extend_map,sceneCode:e.scene_code,hideEditBtn:e.hide_edit_btn,hideEditBtnAfterOrder:e.hide_edit_btn_after_order,skipVerify:e.skip_verify,isFaceCert:e.is_face_cert,isFaceGoods:e.is_face_goods}:null},processPromotionInfo:function(e){var t,n,r,a=null,o=null;if(!e)return{shopPromotion:o,platformPromotion:a};var i=e.deposit_coupon_vo,s=e.platform_promotions_consult_vo,c=e.platform_promotion_vo,l=x()(e,"total_discount_display_vo.display_items"),u=x()(e,"total_discount_extra_display_vo.display_items"),d=function(e){return e?{clickable:x()(e,"clickable"),categoryName:x()(e,"category_name"),categoryDisplay:x()(e,"category_display_vo.display_items"),discountPayChannel:x()(e,"discount_pay_channel"),discountPayCategoryDisplay:x()(e,"discount_pay_category_display_vo.display_items"),floatTitleDisplay:x()(e,"float_title_display_vo.display_items"),floatCategoryDisplay:x()(e,"float_category_display_vo.display_items"),defaultCategoryDisplay:x()(e,"default_category_display_vo.display_items"),retrievePromotion:x()(e,"retrieve_promotion_vo"),switchPaymentMethodToast:x()(e,"switch_payment_method_toast_display_vo.display_items[0].text"),platformRetrievePromotion:x()(e,"platform_retrieve_promotion_vo")}:null}(x()(e,"total_promotions_consult_vo")),p=!!x()(e,"discount_tag_display_vos"),m=Mo(x()(e,"discount_tag_display_vos")),f=x()(e,"total_promotions_consult_vo.optional_shop_promotion_consult_vo"),h=x()(f,"enable_merchant_promotion_option"),v=x()(f,"merchant_optional_promotion_price"),g=x()(f,"optional_shops_promotions_vos.0"),y=x()(f,"optional_clickable"),_=x()(e,"total_promotions_consult_vo.clickable"),b=g?{mallId:x()(g,"mall_id"),promotionStatus:x()(g,"promotion_status"),displayName:x()(g,"display_name.display_items"),category_name:x()(g,"category_name"),batchSn:x()(g,"shop_promotion_consult_vos.0.promotion_identity_vo.extension.batch_sn")}:null;a=function(e){return e?{promotionUniqueNo:e.promotion_unique_no,promotionIdentityVo:e.promotion_identity_vo,discount:e.discount,notUse:e.not_use,category:e.category_name,displayName:e.display_name,cellStyle:Ro(e.cell_style),promotionStatus:parseInt(e.promotion_status||0,10),extension:e.extension}:null}(c)||Lo(s).platformPromotion,o=x()(e,"shop_promotion_vos.0")?{mallId:x()(e,"shop_promotion_vos.0.mall_id"),notUse:x()(e,"shop_promotion_vos.0.not_use"),promotionStatus:x()(e,"shop_promotion_vos.0.promotion_status"),displayName:x()(e,"shop_promotion_vos.0.display_name.display_items"),categoryName:x()(e,"shop_promotion_vos.0.category_name"),dropdownType:x()(e,"shop_promotion_vos.0.dropdown_type"),promotionUniqueNo:x()(e,"shop_promotion_vos.0.shop_promotion_consult_vos.0.promotion_unique_no"),promotionIdentityVo:x()(e,"shop_promotion_vos.0.shop_promotion_consult_vos.0.promotion_identity_vo")}:null,n=x()(d,"retrievePromotion")?{promotionUniqueNo:x()(d,"retrievePromotion.promotion_unique_no"),promotionIdentityVo:x()(d,"retrievePromotion.promotion_identity_vo"),mallId:x()(d,"retrievePromotion.mall_id"),promotionStatus:x()(d,"retrievePromotion.promotion_status")}:null,r=x()(d,"platformRetrievePromotion")?{promotionUniqueNo:x()(d,"platformRetrievePromotion.promotion_unique_no"),promotionIdentityVo:x()(d,"platformRetrievePromotion.promotion_identity_vo"),mallId:x()(d,"platformRetrievePromotion.mall_id"),promotionStatus:x()(d,"platformRetrievePromotion.promotion_status")}:null,t=i?{eventId:i.event_id}:null;var k=e.goods_promotions_vos,I=!Zn()(k)&&k.reduce(function(e,t){var n=!Zn()(t.goods_promotion_consult_vos)&&t.goods_promotion_consult_vos.reduce(function(e,t){return e.concat(t.promotion_identity_vo)},[]);if(n)return e.concat(n)},[]),S=Bo(x()(e,"platform_promotion_vo.extra_display_map.trade_in_info"))||Lo(s).tradeInInfo;return{platformPromotion:a,platformPromotionVoList:s,tradeInInfoPromotion:Lo(s).tradeInInfoPromotion,shopPromotion:o,retrievePromotion:n,platformRetrievePromotion:r,totalDiscountDisplay:l,afterCouponUnitPriceDisplay:u,depositCoupon:t,totalPromotionClickable:_,totalPromotionsConsult:d,enablePromotionOption:h,optionalPromotionPrice:v,optionalClickable:y,optionalShopsPromotion:b,goodsPromotionList:I,tradeInInfo:S,isNewPriceArea:p,discountTagDisplayVos:m}},processShippingInfo:function(e){return e?{title:e.title||"",cost:e.shipping_price||0,shippingPrice:Object(Be.b)(e.shipping_price)}:{title:"",cost:0,shippingPrice:"0"}},processAdditionalShipping:function(e){return e?{additionalSrvItems:e.additional_srv_items||[]}:{additionalSrvItems:[]}},processPayInfo:function(e){if(!e||!e.pay_channel_list)return[];var t={},n=[];return e.pay_channel_list.filter(function(e){return Xn.has(e.channel)}).forEach(function(e){var r,a,o=e.sub_pay_content_vo||{},i=o.css_vo||{},s=e.pay_content_vo||{},c=s.css_vo||{},l=Bo(e.credit_installment_extra_data_vo,["extra","sku_pay_description"]);t[e.channel]?t[e.channel].appIds.push(e.app_id):(t[e.channel]={channelName:e.channel,allPay:e.all_pay,rank:e.rank,name:e.pay_content||s.content,icon:x()(e,"pay_content_vo.icon"),nameStyle:{fontColor:c.font_color,fontSize:c.font_size},hint:o.content||e.pay_sub_content,hintIcon:o.icon,hintStyle:{fontColor:i.font_color,fontSize:i.font_size},appIds:[e.app_id],display:e.display,disabled:!e.enable,disableContent:null===e||void 0===e?void 0:null===(r=e.disable_content_vo)||void 0===r?void 0:r.content,navToApp:e.nav_to_app,signed:e.signed,toastStressOnFreePay:null===e||void 0===e?void 0:null===(a=e.ext_info)||void 0===a?void 0:a.toast_stress_on_free_pay,selected:!1,expanding:e.expanding,defaultSelected:e.default_selected,payButtonContent:e.pay_button_content,skuPayDescription:e.sku_pay_description,extInfo:e.ext_info,creditCardVo:l},n.push(t[e.channel]))}),n},processPayChannelGroups:function(e){return(null===e||void 0===e?void 0:e.length)>0?Bo(e):null},processOrderInfo:function(e){return e?{orderPrice:e.order_price||null,payPrice:e.pay_price||0,payTitle:e.pay_title||"实付款",payContent:e.pay_content||"",couponPrice:e.coupon_price||0,forceNewLine:e.new_line_content}:{orderPrice:0,payPrice:0,payTitle:"实付款",payContent:"",couponPrice:0,forceNewLine:!1}},processDeliveryInfo:function(e){if(!e)return null;var t={clickType:e.click_type,displayContent:e.display_content,displayTitle:e.display_title,srvShortTag:e.srv_short_tag};return t.templateList=(e.template_result_list||[]).map(function(e){return(e=e||[]).selected&&(t.selectedServiceTransparentField=e.service_transparent_field),{srvCopyWrite:e.srv_copy_write,selected:e.selected,srvShortTag:e.srv_short_tag,serviceTransparentField:e.service_transparent_field}}),t},processCellBarVo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=x()(e,"protocol_title")||"",n=x()(e,"protocol_url")||"",r=x()(e,"protocol_v2")||null;return!r&&t&&n&&(r=[{color:"#9C9C9C",title:"同意",url:null},{color:"#58595B",title:"《".concat(t,"》"),url:n}]),{title:x()(e,"title")||"",content:x()(e,"content")||"",richContents:x()(e,"rich_contents")||null,unSelectedText:x()(e,"un_selected_text")||"",protocolTitle:t,protocolUrl:n,protocolV2:r}},processFastReturn:function(e){if(1==+x()(e,"fast_return"))return x()(e,"fast_return_url")||"grp_lite_group.html"},processShipAdditionalVo:function(e){return e?{hasShipmentStripe:!(!e.content||!e.title),content:e.content,title:e.title,switchStatus:e.switch_status}:{hasShipmentStripe:!1}},processRetainWindowExtend:function(e){if(e)return{displayType:(e=e||{}).display_type,extendType:e.retain_window_extend_type,contents:e.contents,pictures:x()(e,"pictures.picture_url")||[],picWidth:x()(e,"pictures.width")||0,picHeight:x()(e,"pictures.height")||0}},processShopFavCouponPop:function(e){if(e)return{optimalPpayText:x()(e,"optimal_pay_text"),subOptimalPayText:x()(e,"sub_optimal_pay_text")}}},zo=function(){var e=d()(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn();case 2:return r=e.sent,t.anti_content=r,e.abrupt("return",Me({method:Ae.POST,url:n||"api/morgan-quick/confirm/render",data:t}).then(function(e){e=e||{};var t=Object(Be.b)(x()(e,"option_map.mass_subsidy"));return{serverTime:e.server_time,addressInfo:Uo.processAddressInfo(e.address_vo),goodsInfo:Object.assign(Uo.processGoodsInfo(e.goods_vo,e.group_vo,e.sku_vo,e.virtual_receive_method_vo,e.id_card_vo),{massSubsidy:t}),stepInfo:Uo.processStepInfo(e.step_vo),idCardInfo:Uo.processIdCardInfo(e.id_card_vo),mallInfo:Uo.processMallInfo(e.mall_vo),installmentList:Uo.processInstallmentList(e.installment_list),promotionInfo:Uo.processPromotionInfo(e.promotion_vo),shippingInfo:Uo.processShippingInfo(e.shipping_vo),additionalShippingInfo:Uo.processAdditionalShipping(e.additional_display_vo),priceInfo:Uo.processPriceInfo(e.order_price,e.merchant_promotion_price,e.platform_promotion_price),payChannelList:Uo.processPayInfo(e.pay_vo),payChannelGroups:Uo.processPayChannelGroups(e.pay_vo.group_status_list),payTicket:x()(e,"pay_vo.pay_ticket"),piccImageUrl:e.pay_vo&&e.pay_vo.picc_image_url,orderInfo:Uo.processOrderInfo(e.order_vo),xyhfOrderInfo:Uo.processOrderInfo(e.credit_score_final_pay_order_vo),deliveryInfo:Uo.processDeliveryInfo(e.service_vo),returnDialogVo:e.return_dialog_vo||null,finalPayVo:e.credit_score_final_pay_dialog_vo||null,morganDisableBackEvent:+x()(e,"option_map.disable_back_popup")||0,attrMap:(e.pay_vo||{}).attr_map,orderAmount:e.pay_price,orderServicePath:e.order_service_path||"",confirmMessage:e.confirm_message,extendMap:e.extend_map,promotionExtendMap:e.promotion_extend_map,addressRenderExtendMap:e.address_render_extend_map,fastReturn:Uo.processFastReturn(x()(e,"option_map")),noAddressDialogTitle:x()(e,"option_map.render_no_address_dialog_title",null),noAddressAutoPopup:x()(e,"option_map.render_no_address",null),orderRefresh:1===parseInt(x()(e,"option_map.order_refresh"),10),cureNCov:parseInt(x()(e,"option_map.cure_ncov"),10),addrGiftEntryStatus:parseInt(x()(e,"option_map.addr_list_show_gift_entry_status"),10),receiveMethodNone:x()(e,"option_map.receive_method_none"),cellBarVo:Uo.processCellBarVo(e.cell_bar_vo),shipAdditionalVo:Uo.processShipAdditionalVo(e.ship_additional_vo),qiongqiVo:e.qiongqi_vo,retainWindowVo:Uo.processRetainWindowExtend(e.retain_window_extend_vo),virtualReceiveMethodInfo:Uo.processVirtualReceiveMethodVO(e.virtual_receive_method_vo),shopFavCouponPop:Uo.processShopFavCouponPop(e.shop_fav_coupon_pop_window),transferMap:x()(e,"transfer_map")}}));case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Ho=function(){var e=d()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Me({method:Ae.POST,url:"api/morgan/order/refresh",data:t,useNativeAntiToken:!0}).then(function(e){return{payChannelList:Uo.processPayInfo(e.pay_vo),confirmMessage:e.confirm_message}}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Vo=(Fo=function(){function e(){return m()(this,e),this.$mobileNumberInput=void 0,this.mobileNumber="",this.mobileOwner="",e.instance||(e.instance=this),e.instance}return h()(e,[{key:"doInputBlur",value:function(){this.$mobileNumberInput&&this.$mobileNumberInput.blur()}},{key:"doInputFocus",value:function(){this.$mobileNumberInput&&this.$mobileNumberInput.focus()}},{key:"updateMobileInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.mobileNumber=("".concat(e)||"").trim(),this.mobileOwner=t}}],[{key:"getInstance",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),Qe()(Fo.prototype,"doInputBlur",[Je],Object.getOwnPropertyDescriptor(Fo.prototype,"doInputBlur"),Fo.prototype),Qe()(Fo.prototype,"doInputFocus",[Je],Object.getOwnPropertyDescriptor(Fo.prototype,"doInputFocus"),Fo.prototype),Qe()(Fo.prototype,"updateMobileInfo",[Je],Object.getOwnPropertyDescriptor(Fo.prototype,"updateMobileInfo"),Fo.prototype),Fo),Go=Vo.getInstance(),Wo=se.a.getInstance(),qo=function(e){var t=e.ocData.selectedChannel;if((t&&t.paymentType)===$n.a.CreditCardInstallmentPay&&!x()(t,"creditCardVo.recommendCardVo.bindId"))return{success:!1,errMsg:"请添加分期信用卡",shouldShowPaymentList:!0};return{success:!0}},Qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ocData,n=void 0===t?{}:t,r=e.ocManager,a=n.selectedChannel,o=a&&a.paymentType,i=n.goodsInfo,s=n.addressInfo,c=n.idCardInfo,l=n.virtualReceiveMethodInfo,u=n.receiveMethodNone,d=n.cellBarVo||{},p=d.protocolV2,m=d.unSelectedText;if(p&&!r.isSelectedAgreement)return{errMsg:m||"请先同意协议"};if(!u&&!i.isVirtualGoods&&parseInt(s.addressId||0)<=0&&!s.addressGiftStatus)return r.showEditAddress&&r.showEditAddress(),!1;if(!o)return{errMsg:"操作太快，请重试"};var f="";if(l){if(!(f=Go.mobileNumber))return{errMsg:"请输入账号"};var h=l.validateRules,v=l.validateFailedText;if(h&&h.length>0){if(!h.some(function(e){return new RegExp(e).test(f)})&&v)return{errMsg:v}}}var g=i.needId&&c&&!c.isDrugInfo&&(!c||!c.idCardNo||!c.idCardName)&&!c.skipVerify&&(![3,4].includes(+i.goodsType)||o!==$n.a.FriendPay),y=c&&c.isDrugInfo&&!c.drugInfoSnapshotId;return g?(r.showIdcardForm&&r.showIdcardForm(),!1):y?(r.showPurchaseInfo&&r.showPurchaseInfo(),!1):c&&c.isDrugInfo&&!c.isTemperatureSaved?(r.showTemperaturePicker&&r.showTemperaturePicker(),!1):{success:!0}},Yo=function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p,m,f,h,v,g,y,_,b,k,I,S,w,C,E,P,N,O,D,T,A,j,R,L,M,B,F,U,z,H,V,G,W,q,Q,Y,X,J,K,Z,$,ee;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ocData,r=void 0===n?{}:n,a=t.groupType,o=t.orderExtraType,i=t.groupOrderId,s=void 0===i?null:i,c=t.activityParams,u=void 0===c?{}:c,d=t.ocManager,p=r.selectedChannel,m=p&&p.paymentType,f=r.goodsInfo,h=r.addressInfo,v=r.idCardInfo,g=r.promotionInfo,y=r.extendMap,_=r.installmentList,b=r.virtualReceiveMethodInfo,k=f.goodsId,I=function(e,t){so({errorCode:e,data:t||{},handleUnclassifiedErrors:!0,ocData:r})},S=null,w="",C="",b&&(C=Go.mobileNumber,w=Go.mobileOwner||""),E=f.goodsNumber,P=Object(ge.a)(),e.next=14,Fn();case 14:if(N=e.sent,O={address_id:h.addressId,address_snapshot_id:h.addressSnapshotId,goods:[{sku_id:f.skuId,sku_number:E,goods_id:k}],group_id:f.groupId.toString(),anti_content:N,pay_app_id:Object(mo.a)({paymentType:m}),is_app:P.isNativePlatform||P.isTinyNativePlatform?"1":"0",version:1,page_id:Wo.getPageID()},d.pageFrom&&(O.page_from=d.pageFrom),m===$n.a.HBInstallmentPay&&(D=_.findIndex(function(e){return e.defaultSelected}),T=D>=0?D:0,A=p.termIndex||T,S=_[A].term,O.term=S),m!==$n.a.CreditCardInstallmentPay){e.next=49;break}if(p.creditCardVo){e.next=22;break}return Object(oe.a)("当前支付方式暂不可用，请更换其他支付方式"),e.abrupt("return");case 22:if(j=x()(p,"creditCardVo.recommendCardVo.bindId")){e.next=37;break}return R=x()(p,"creditCardVo.extra"),e.prev=25,e.next=28,Object(ye.g)("JSDuoduoWallet","selectCreditCard",{amount:r.orderAmount,selected_bind_id:null,extra:R});case 28:L=e.sent,M=x()(L,"selected_card.bind_id",null),B=1==+L.result_type,d.changeBindId({selectedBindId:null,newBindId:M,isNewlyAdded:B}),e.next=36;break;case 34:e.prev=34,e.t0=e.catch(25);case 36:return e.abrupt("return");case 37:if(F=p.creditCardTermIndex,U=x()(p,"creditCardVo.recommendCardVo.creditInstallments")||[],z=U.findIndex(function(e){return!!e.selected}),F>=0||(F=z),F>=0||(F=0),H=U[F],!((V=H?H.installmentNum:-1)<0)){e.next=47;break}return Object(ot.a)({title:"请选择信用卡分期期数",confirmButtonLabel:"我知道了"}),e.abrupt("return");case 47:O.term=V,O.bindId=j;case 49:return s&&(O.group_order_id=s),G=g.platformPromotion,W=g.platformPromotionVoList,q=x()(g,"tradeInInfoPromotion"),Q=g.shopPromotion,Y=g.goodsPromotionList,O.promotion_union_vo={},Q&&Q.promotionStatus===ua&&!Q.notUse&&(Q.promotionIdentityVo.mall_id=Q.mallId,O.promotion_union_vo.single_promotion_list=[Q.promotionIdentityVo]),W?(G&&G.promotionStatus===ua&&!G.notUse&&(O.promotion_union_vo.use_platform_promotion_list=[G.promotionIdentityVo]),q&&q.promotion_status===ua&&(X=q.promotion_identity_vo,O.promotion_union_vo.use_platform_promotion_list?O.promotion_union_vo.use_platform_promotion_list.push(X):O.promotion_union_vo.use_platform_promotion_list=[X])):G&&G.promotionStatus===ua&&!G.notUse&&(O.promotion_union_vo.use_platform_promotion_vo=G.promotionIdentityVo),Zn()(Y)||(O.promotion_union_vo.goods_promotion_list=Y),b&&((J=b.orderKey)&&(O[J]=C),O.mobile_owner=w,O.address_id=0),f.activityId&&(O.activity_id=f.activityId),(K=x()(r,"deliveryInfo.selectedServiceTransparentField"))&&(O.service_transparent_field=K),Object.assign(O,u),O[Co.DuoDuoType]&&(O.type=O[Co.DuoDuoType],delete O[Co.DuoDuoType]),Z=To(u,y),f.needId&&v.isDrugInfo&&(Z.epidemic_drug_info_snapshot_id=v.drugInfoSnapshotId),v&&!v.isFaceCert&&v.isFaceGoods&&uo()&&(Z.id_card_snapshot_id=v.snapshotId),d.recordId&&(W?($=x()(q,"promotion_identity_vo.extension")||{},Z.trade_in_evaluation_id=$.trade_in_evaluation_id):(ee=x()(r,"promotionInfo.platformPromotion.promotionIdentityVo.extension")||{},Z.trade_in_evaluation_id=ee.trade_in_evaluation_id)),delete O[Co.Pid],delete O[Co.CPSSign],delete O[Co.OutGroupOrderId],delete O[Co.BizTag],O.attribute_fields=Z,O.source_channel=d.sourceChannel,O.source_type=0,1===a?O.source_type=5:2===a?O.source_type=6:3===a&&(O.source_type=2),1==+o&&(O.source_type=7),d.sourceType&&(O.source_type=d.sourceType),e.abrupt("return",{postParams:O,ocHandleError:I});case 80:case"end":return e.stop()}},e,null,[[25,34]])}));return function(t){return e.apply(this,arguments)}}(),Xo=function(e){var t=new Promise(function(e,t){setTimeout(function(){!Object(ge.a)().isNativePlatform&&t({isTimeout:!0})},8e3)});return Promise.race([t,e])};function Jo(e){return Ko.apply(this,arguments)}function Ko(){return(Ko=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p,m,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.params,e.prev=1,e.next=4,Xo(Me({method:"POST",url:n,data:r}));case 4:return a=e.sent,o=a.order_sn,i=a.fp_id,s=void 0===i?null:i,c=a.order_amount,u=a.discount_amount,d=a.prepay_url,e.abrupt("return",{order_sn:o,fp_id:s,order_amount:c,discount_amount:u,prepay_url:d});case 9:if(e.prev=9,e.t0=e.catch(1),!e.t0.isTimeout){e.next=15;break}throw e.t0;case 15:return!(p=e.t0.errorCode)&&e.t0.response&&(p=e.t0.response.status),m=e.t0.response||{},f=m.data,e.abrupt("return",Promise.reject({errorCode:p,data:f}));case 19:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}var Zo,$o=se.a.getInstance(),ei=function(){var e=d()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Me({method:"POST",url:"api/hermione/order/pay/later/status",data:{evaluation_id:t}}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ti=function(){var e=d()(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,e.abrupt("return",new Promise(function(e,a){var o=function(){return r+=1,ei(t).then(function(t){t&&t.success&&t.result&&2===t.result.pay_later_order_status&&(clearInterval(n),e()),t&&t.success&&t.result&&3===t.result.pay_later_order_status&&(clearInterval(n),a())}).catch(function(e){clearInterval(n),a(e)})};o(),n=setInterval(function(){r<=6?o():(clearInterval(n),a())},800)}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function ni(e){return ri.apply(this,arguments)}function ri(){return(ri=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ocData,r=x()(n,"goodsInfo.skuId"),a=x()(n,"goodsInfo.mallId"),i=x()(n,"promotionInfo.platformPromotionVoList"),s=x()(n,"promotionInfo.tradeInInfoPromotion"),o=i?x()(s,"promotion_identity_vo.extension")||{}:x()(n,"promotionInfo.platformPromotion.promotionIdentityVo.extension")||{},c={page_sn:$o.getPageSN()+"",relate_goods_sku_id:r,relate_mall_id:a,evaluation_id:o.trade_in_evaluation_id,evaluation_sign:o.trade_in_evaluation_sign},e.next=9,Me({method:"POST",url:"api/hermione/order/pay/later/create",data:c});case 9:return u=e.sent,d=x()(u,"result.evaluation_id"),e.next=13,ti(d);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ai=se.a.getInstance(),oi=(Zo=function(){function e(){return m()(this,e),this.needReload=!1,this.frontEnv=1,this.frontVersion=Eo,this.activityParams=void 0,this.goodsId=void 0,this.groupType=void 0,this.orderExtraType=void 0,this.groupOrderId=void 0,this.groupId=void 0,this.isApp=void 0,this.extendMap=void 0,this.promotionExtendMap=void 0,this.appIdSet=void 0,this.appPaymentEnv=void 0,this.promotionVo=void 0,this.sourceType=void 0,this.pageFrom=void 0,this.updateOCDataFun=null,this.ocData={},this.isSelectedAgreement=!0,this.customMorganUrl=null,this.prepayUrl=null,this.autoErrSamping=null,this.morganType=null,this.morganRequestId=0,this.recordId=void 0,this.addressId=void 0,this.selectServiceItemIdList=void 0,e.instance||(e.instance=this),e.instance}return h()(e,[{key:"initShowEditAddress",value:function(e){this.showEditAddress=e}},{key:"initShowIdcardForm",value:function(e){this.showIdcardForm=e}},{key:"initShowPurchaseInfo",value:function(e){this.showPurchaseInfo=e}},{key:"initShowTemperaturePicker",value:function(e){this.showTemperaturePicker=e}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateOCDataFun,r=t.setMorganFetching,a=t.setMorganError,o=t.getSelectedSkuId,i=t.groupType,c=t.orderExtraType,l=t.goods,u=t.groupId,d=t.groupOrderId,p=t.communityId,m=t.ignoreGroupOrderIdInUrl,f=t.sourceType,h=t.ocExtend,v=t.hideSkuSelect,g=t.paySuccessCb,y=t.sourceChannel,_=t.frontEnv,b=t.pageFrom;this.updateOCDataFun=n,this.getSelectedSkuId=o,this.setMorganFetching=r,this.setMorganError=a;var k=Object(ba.a)(),I=k.query,S=k.userAgent,w=Object(ge.b)(S),P=w.isNativePlatform,N=w.isTinyNativePlatform;this.forwardHideSkuSelect=function(){e.needReload=!1,v({hideAction:"beforeForward"})},this.paySuccessCb=g,this.isApp=P||N?1:0,this.frontEnv=_||function(e){var t=e.userAgent,n=e.queries,r=Object(ge.b)(t).platform,a=No({userAgent:t,queries:n}),o="qq_wallet"===x()(n,"_x_sid");if(a)return+x()(n,"front_env")||Io;switch(r){case Ke.a.WeChat:case Ke.a.WxApp:return go;case Ke.a.PddAndroid:return vo;case Ke.a.PddIOS:return ho;case Ke.a.QQ:return o?bo:yo;case Ke.a.Weibo:return _o;case Ke.a.PDDTinyAndorid:return ko}return fo}(k),this.activityParams=function(e,t){var n=Object(ge.b)(t),r=Object(Ke.c)(n.version,"4.2.0")>=0,a=e[Co.OCGOI],o=e.group_order_id,i=Oo(e,Co.ForceShare)||0,s=a?0:e[Co.OCPrefix+Co.AwardType],c=e[Co.OCPrefix+Co.BizType]||0,l=e[Co.OCPrefix+Co.Pid]||"",u=e[Co.OCPrefix+Co.CPSSign]||"",d=e[Co.OCPrefix+Co.OutGroupOrderId]||"",p=e[Co.OCPrefix+Co.OriginalFrontEnv],m=e[Co.OCPrefix+Co.BizTag],f=parseInt(Oo(e,Co.DuoDuoType)||0,10),h=!n.isNativePlatform||r?!!o&&o===a:!!o,v={};switch(f){case So:o||(f=0);break;case wo:case xo:break;default:f=0}return h&&(v[Co.ForceShare]=i),v[Co.DuoDuoType]=f,v[Co.AwardType]=s,v[Co.BizType]=c,v[Co.Pid]=l,v[Co.CPSSign]=u,v[Co.OutGroupOrderId]=d,v[Co.OriginalFrontEnv]=p,m&&(v[Co.BizTag]=m),v}(p||m?s()({},I,{group_order_id:null}):I,S),this.goodsId=x()(l,"goodsID"),this.switchToWechatIfSignXyhfFailed=x()(l,"isAbSwitchToWechatIfSignXyhfFailed"),this.enablePaymentListV2=P,this.groupType=i,this.orderExtraType=c,this.groupOrderId=d,this.communityId=p,this.sourceType=f,this.pageFrom=b||parseInt(I.page_from,10)||0,this.groupId=u||l.groupTypes[1].groupID,this.extendMap=Do(I),p&&(this.extendMap.community_id=p),this.appIdSet=function(e){var t=e.userAgent,n=e.hostname,r=e.queries,a=[],o={},i=No({userAgent:t,queries:r});for(var s in $n.a)if(!["AliPayV2","UnionPay"].includes(s)){var c=$n.a[s],l=Object(mo.a)({paymentType:c,userAgent:t,hostName:n});"WeChat"===s&&i&&(l=+x()(r,"pay_app_id")||317),a.includes(l)||(a.push(l),o[l]=c)}return o}(k),this.appPaymentEnv=function(e){if(e&&e.pdd_native_preload2)try{var t,n=JSON.parse(e.pdd_native_preload2)||{},r=n.am_app_che_alipays,a=n.am_app_che_applepay,o=n.last_payment_type2,i=n.qqUninstall,s=!0,c=!1,l=null;return r&&(t={is_install_alipay:(s=1===parseInt(JSON.parse(r).has_installed))?"1":"0"}),a&&(c=1===parseInt(JSON.parse(a).has_installed)),o&&(l=parseInt(JSON.parse(o))),{lastPaymentType:l,applePayInstalled:c,alipayInstalled:s,payExtendMap:t,qqUninstall:i}}catch(e){Object(E.c)(new Error("nativeExtra parsing error"))}return null}(I),this.sourceChannel=y>=0?y:13,this.recordId=void 0,this.hasAddressLine=l.hasAddressLine,this.disableForceUseBestPromotion=+(null===l||void 0===l?void 0:l.disableForceUseBestPromotion);var O=l.destinationUrl;if(O){var D=Object(C.g)(O),T=(D||{}).morgan_type;this.customMorganUrl=T?function(e){return{1:"/api/morgan/confirm/render/spike",2:"/api/morgan/confirm/render/pr_spike"}[e]}(T):null,this.morganType=T;var A=Do(D);this.extendMap=Object.assign(this.extendMap,A)}if(h){var j=Do(h||{});this.extendMap=Object.assign(this.extendMap,j)}null!==y&&void 0!==y||Object(E.c)(new Error("empty_source_channel"))}},{key:"updateOCData",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p,m,f,h,v,g,y,_=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(this.setMorganError(!1),!this.ocData.selectedChannel){e.next=23;break}if(!(null===(n=(t.payChannelList||[]).find(function(e){return e.channelName===_.ocData.selectedChannel.channelName}))||void 0===n?void 0:n.disabled)){e.next=14;break}if(r=t.payChannelList.some(function(e){return e.defaultSelected}),t.payChannelList.forEach(function(e,n){r&&e.defaultSelected?(e.selected=!0,t.selectedChannel=e):r||0!==n?e.selected=!1:(e.selected=!0,t.selectedChannel=e)}),!t.selectedChannel){e.next=12;break}return e.next=11,Hr(t.selectedChannel.channelName);case 11:t.selectedChannel.paymentType=e.sent;case 12:e.next=23;break;case 14:if(t.selectedChannel||!this.ocData.selectedChannel){e.next=23;break}if(a=this.ocData.selectedChannel,o=t.payChannelList.some(function(e){return e.channelName===a.channelName}),i=t.payChannelList.some(function(e){return e.defaultSelected}),t.payChannelList.forEach(function(e,n){o&&e.channelName===a.channelName?(e.selected=!0,t.selectedChannel=e):o?e.selected=!1:i&&e.defaultSelected?(e.selected=!0,t.selectedChannel=e):i||0!==n||(e.selected=!0,t.selectedChannel=e)}),!t.selectedChannel){e.next=23;break}return e.next=22,Hr(t.selectedChannel.channelName);case 22:t.selectedChannel.paymentType=e.sent;case 23:s=this.ocData.payChannelList&&this.ocData.payChannelList.find(function(e){return e.channelName===Yn.CREDIT_CARD}),c=x()(s,"creditCardVo.recommendCardVo.bindId"),u=t.payChannelList&&t.payChannelList.find(function(e){return e.channelName===Yn.CREDIT_CARD}),d=x()(u,"creditCardVo.recommendCardVo.bindId"),s&&u&&d!==c&&(p=x()(s,"creditCardVo.recommendCardVo.creditInstallments")||[],m=x()(u,"creditCardVo.recommendCardVo.creditInstallments")||[],(f=p[s.creditCardTermIndex])&&(h=f.installmentNum,v=m.findIndex(function(e){return+e.installmentNum===h}),u.creditCardTermIndex=v)),g=this.ocData.idCardInfo||{},y=g.isTemperatureSaved,t.idCardInfo&&(t.idCardInfo.isTemperatureSaved=y),x()(t,"addressInfo.addressId")&&(this.addressId=x()(t,"addressInfo.addressId")),this.updateOCDataFun&&this.updateOCDataFun(t),this.ocData=t;case 33:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"clearTradeInfo",value:function(){var e=this.ocData;x()(e,"promotionInfo.tradeInInfo")&&(e.promotionInfo.tradeInInfo=null,this.updateOCData(e))}},{key:"updateAddressInfo",value:function(e){this.refresh({address_id:e.addressId})}},{key:"selectDeliveryItem",value:function(e){var t=e.serviceTransparentField,n=this.getSelectedSkuId&&this.getSelectedSkuId();return this.refresh({service_transparent_field:t,front_action:n?Po.ChangeDelivery:Po.ChangeDeliveryNoSku})}},{key:"selectShippingItem",value:function(e){var t=e.item_id,n=this.getSelectedSkuId&&this.getSelectedSkuId();return this.selectServiceItemIdList=[t],this.refresh({select_service_item_id_list:[t],front_action:n?Po.ChangeDelivery:Po.ChangeDeliveryNoSku})}},{key:"getWxscoreSignScene",value:function(){var e=Object(C.f)(location.search),t="210"===e.page_from,n=e.wxscore_sign_scene;return t?n?+n:16:this.enablePaymentListV2?33:19}},{key:"render",value:function(){var e=d()(l.a.mark(function e(t,n){var r,a,o,i,s,c,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?Object.assign(this.originParams,t):this.originParams,n&&(this.recordId=n,this.sourceChannel=41,r.source_channel=41,r.extend_map?r.extend_map.trade_in_record_id=n:r.extend_map={trade_in_record_id:n}),e.prev=2,a=new Promise(function(e,t){setTimeout(function(){t({errorCode:"timeout"})},2e3)}),e.next=6,Promise.race([zo(r,this.customMorganUrl),a]);case 6:if(!(o=e.sent)){e.next=14;break}return this.extendMap=o.extendMap,this.promotionExtendMap=o.promotionExtendMap,this.transferMap=o.transferMap,this.updateOCData(o),i=o.confirmMessage,e.abrupt("return",i);case 14:e.next=23;break;case 16:e.prev=16,e.t0=e.catch(2),s=e.t0.errorCode,c=e.t0.response,u=x()(c,"data.error_msg"),n&&this.clearTradeInfo(),Object(E.c)(new Error("sku_order_render"),{error_message:u,error_code:s}),this.communityId&&(this.updateOCDataFun&&this.updateOCDataFun(null),this.ocData={});case 23:case"end":return e.stop()}},e,this,[[2,16]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=d()(l.a.mark(function e(t,n){var r,a,o,i,s,c,u,d,p;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=t?Object.assign(this.originParams,t):this.originParams).refresh=!0,n&&this.setMorganFetching(!0),e.prev=3,this.morganRequestId++,a=this.morganRequestId,e.next=8,zo(r,this.customMorganUrl);case 8:if(o=e.sent,a!==this.morganRequestId||!o){e.next=17;break}return this.extendMap=o.extendMap,this.promotionExtendMap=o.promotionExtendMap,this.transferMap=o.transferMap,(i=o.confirmMessage)&&Oe(i),this.updateOCData(o),e.abrupt("return",{success:!0});case 17:e.next=31;break;case 19:if(e.prev=19,e.t0=e.catch(3),s=e.t0.errorCode,c=e.t0.response,u=(c||{}).data,d=x()(u,"error_payload"),x()(d,"not_degrade_sku")||this.setMorganError(!0),!d||!d.view_style){e.next=29;break}return Wa(d),e.abrupt("return");case 29:p=x()(c,"data.error_msg"),Object(E.c)(new Error("sku_order_refresh"),{error_message:p,error_code:s});case 31:return e.prev=31,n&&this.setMorganFetching(!1),e.finish(31);case 34:case"end":return e.stop()}},e,this,[[3,19,31,34]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"refreshPayVoAfterOrder",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={confirm_display_type:1,order_sn:this.ocData.orderSn,front_version:this.frontVersion,front_env:this.frontEnv,refresh_pay_vo:!0,extend_map:this.extendMap,pay_extend_map:t.pay_extend_map,front_supports:jo(),service_transparent_field:x()(this.ocData,"deliveryInfo.selectedServiceTransparentField"),source_channel:this.sourceChannel,transfer_map:this.transferMap},e.prev=1,e.next=4,Ho(n);case 4:r=e.sent,a=S()(this.ocData),o=a.payChannelList.find(function(e){return e.channelName===Yn.CREDIT_CARD}),i=r.payChannelList.find(function(e){return e.channelName===Yn.CREDIT_CARD}),o.creditCardVo=i?i.creditCardVo:null,(s=r.confirmMessage)&&Oe(s),this.updateOCData(a),e.next=22;break;case 14:e.prev=14,e.t0=e.catch(1),c=e.t0.errorCode,u=e.t0.response,d=x()(u,"data.error_msg"),p=d,c&&(d=d||xa.getMsgFromCode(c)),Oe(d||"网络不稳定，请稍后再试"),Object(E.c)(new Error("sku_refresh_after_order"),{error_message:p,error_code:c});case 22:case"end":return e.stop()}},e,this,[[1,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"changeBindId",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.selectedBindId,r=t.newBindId,a=t.isNewlyAdded,o=s()({},x()(this.appPaymentEnv,"payExtendMap")),a?(o.selected_bind_id=n,o.new_card_bind_id=r):o.selected_bind_id=r,this.ocData.orderSn?this.refreshPayVoAfterOrder({pay_extend_map:o}):this.refresh({pay_extend_map:o});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"repay",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u,d,p,m,f,h,v,g,y,_,b,k,I,S,w,E,P,N,O,D,T,A,j,R,L=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.ocData,n=t.orderSn,r=t.chaosOrderSn,a=t.orderAmount,o=t.attrMap,i=t.installmentList,s=t.fastReturn,c=this.ocData.goodsInfo.goodsId,u=this.ocData.selectedChannel,d=u&&u.paymentType,p=u&&u.allPay,m=function(e,t){so({errorCode:e,data:t||{},handleUnclassifiedErrors:!0,ocData:L.ocData})},d!==$n.a.FriendPay){e.next=10;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Ia.a.uniformForward(Object(C.a)({fp_id:r},"friend_pay.html")),e.abrupt("return");case 10:return f={goodsID:c,orderAmount:a,attrMap:o,fastReturn:s},h=function(e){m(e,null),e===xa.PrepayBusy.code&&(L.forwardHideSkuSelect&&L.forwardHideSkuSelect(),Ia.a.uniformForward(Object(C.a)({order_sn:n},"order.html")))},v={order_sn:n},d===$n.a.HBInstallmentPay&&(g=i.findIndex(function(e){return e.defaultSelected}),y=g>=0?g:0,_=u.termIndex||y||0,v.term=i[_].term),d===$n.a.CreditCardInstallmentPay&&(v.bind_id=x()(u,"creditCardVo.recommendCardVo.bindId"),b=u.creditCardTermIndex,k=x()(u,"creditCardVo.recommendCardVo.creditInstallments")||[],I=k.findIndex(function(e){return!!e.selected}),b>=0||(b=I),b>=0||(b=0),S=k[b],v.term=S?S.installmentNum:-1),w=Object(C.f)(location.search),E="210"===w.page_from,P=d===$n.a.XianYongHouFu&&(E||!u.signed),N=this.getWxscoreSignScene(),e.next=21,Fn();case 21:return O=e.sent,D=[1,2].includes(+u.toastStressOnFreePay),T=1==+u.toastStressOnFreePay,Object(be.b)(),e.prev=25,e.next=28,ka.default.pay({url:this.prepayUrl,orderSn:n,paymentType:d,attrMap:o,params:v,attributeFields:{pay_ticket:this.ocData.payTicket},optionalParams:{isSignXianYongHouFu:P,signScene:N,orderAmount:a,antiContent:O,mianmiAutoSwitch:p,mianmiV3:D,mianmiV3SafeHint:T,switchToWechatIfSignXyhfFailed:this.switchToWechatIfSignXyhfFailed},checkOrderStatus:Ra(n,f),checkOrderTimeout:1e4});case 28:Ba(A=e.sent,f,this),lo({groupId:"10242",customTags:{event:"order_payed_judge_"+(x()(A,"orderStatus")||999)}}),e.next=41;break;case 33:if(e.prev=33,e.t0=e.catch(25),j=e.t0||{},R=j.cancelled,d!==$n.a.XianYongHouFu){e.next=40;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Ma({order_sn:n}),e.abrupt("return");case 40:R?Ua():za({orderSn:n,error:e.t0,defaultOnFailed:h,ocManager:this});case 41:if(e.prev=41,Object(be.a)(),d===$n.a.HBInstallmentPay&&(this.ocData.lockInstallmentTerm=!0),d!==$n.a.CreditCardInstallmentPay){e.next=49;break}if(!x()(u,"creditCardVo.recommendCardVo.removeLock")){e.next=48;break}return e.abrupt("return");case 48:this.ocData.lockCreditCardTerm=!0;case 49:return e.finish(41);case 50:case"end":return e.stop()}},e,this,[[25,33,41,50]])}));return function(){return e.apply(this,arguments)}}()},{key:"pay",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,c,u,d,p,m,f,h,v,g,y,_,b,k,I,S,w,N,O,D,T,A,j,R,L,M,B,F,U,z,H,V,G,W,q,Q,Y,X;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ocData.orderSn||!this.ocData.chaosOrderSn){e.next=2;break}return e.abrupt("return",this.repay());case 2:return e.next=4,Yo({ocData:this.ocData,groupType:this.groupType,orderExtraType:this.orderExtraType,groupOrderId:this.groupOrderId,activityParams:this.activityParams,ocManager:this});case 4:if(!(t=e.sent)){e.next=124;break}if(!t.errMsg){e.next=10;break}Oe(t.errMsg),e.next=124;break;case 10:if(n=this.ocData.selectedChannel,r=n&&n.paymentType,a=n&&n.allPay,!this.recordId){e.next=29;break}return e.prev=14,Object(be.b)("正在生成旧机回收订单"),e.next=18,ni({ocData:this.ocData});case 18:Object(be.a)(),e.next=29;break;case 21:return e.prev=21,e.t0=e.catch(14),Object(be.a)(),o=e.t0||{},i=o.response,c=(i||{}).data,(u=c&&c.error_msg)&&Oe(u),e.abrupt("return");case 29:if(this.recordId?Object(be.b)("即将生成新机订单"):Object(be.b)(),d=this.ocData.goodsInfo.goodsId,p=this.ocData.goodsInfo.skuId,m=this.ocData,f=m.orderAmount,h=m.attrMap,v=m.orderServicePath,g=void 0===v?"order":v,y=m.fastReturn,_=m.idCardInfo,b=t.postParams,k=t.ocHandleError,I=b.anti_content,S=null,w=null,e.prev=37,!(this.ocData.goodsInfo.needId&&_&&!_.isFaceCert&&_.isFaceGoods&&uo())){e.next=41;break}return e.next=41,po({snapshotId:_.snapshotId,extMap:_.extendMap,antiContent:I});case 41:return e.next=43,Jo({url:g,params:b});case 43:N=e.sent,O=N.order_sn,D=N.fp_id,T=N.order_amount,A=N.discount_amount,j=N.prepay_url,S=O,w=D,this.needReload=!0,R=x()(this.ocData,"orderInfo.payPrice"),T!==R&&Object(E.c)(new Error("different_price"),{error_message:"order_amount_".concat(T,"_different_with_pay_price_").concat(R)}),this.prepayUrl=j,this.ocData.orderSn=S,this.ocData.chaosOrderSn=w,this.ocData.discountAmount=A,this.updateOCData(this.ocData),Object(be.a)(),e.next=76;break;case 62:if(e.prev=62,e.t1=e.catch(37),!e.t1.noErrorHandle){e.next=67;break}return Object(be.a)(),e.abrupt("return");case 67:if(!e.t1.isTimeout&&!e.t1.isOrderSnEmpty){e.next=71;break}Oe("网络连接不稳定，请刷新后重试"),e.next=74;break;case 71:return L=e.t1.errorCode,M=e.t1.data,e.next=74,k(L,M);case 74:return oo(e.t1.errorCode)||Object(be.a)(),e.abrupt("return");case 76:if(B={op:"event",event:"create_order",goods_id:d,sku_id:p,order_amount:f,pay_app_id:b.app_id,page_name:"order_checkout",auto_group:"0",sub_op:"create_order",refer_page_name:ai.getReferPageName(),refer_page_element:ai.getReferPageElement(),order_sn:S,location:location.href},Object(P.d)(B),Object(Ca.a)({payload:s()({event:"paycheck"},B)}),lo({groupId:"10242",customTags:{event:"create_order"}}),r!==$n.a.FriendPay){e.next=85;break}this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Ia.a.uniformForward(Object(C.a)({fp_id:w},"friend_pay.html")),e.next=124;break;case 85:return F={goodsID:d,orderAmount:f,attrMap:h,fastReturn:y},U=function(e){k(e,null),e===xa.PrepayBusy.code&&Ia.a.reload(Object(C.a)({order_sn:S},"order.html"))},z=Object(C.f)(location.search),H="210"===z.page_from,V=r===$n.a.XianYongHouFu&&(H||!n.signed),G=this.getWxscoreSignScene(),W=[1,2].includes(+n.toastStressOnFreePay),q=1==+n.toastStressOnFreePay,Object(be.b)(),e.prev=94,e.next=97,ka.default.pay({url:this.prepayUrl,orderSn:S,paymentType:r,attrMap:h,params:{order_sn:S,term:b.term,bind_id:b.bindId},attributeFields:{pay_ticket:this.ocData.payTicket},additionalParams:{order_amount:f,goods_id:d},optionalParams:{isSignXianYongHouFu:V,signScene:G,orderAmount:f,antiContent:I,mianmiAutoSwitch:a,mianmiV3:W,mianmiV3SafeHint:q,switchToWechatIfSignXyhfFailed:this.switchToWechatIfSignXyhfFailed},checkOrderStatus:Ra(S,F),checkOrderTimeout:1e4});case 97:Ba(Q=e.sent,F,this),lo({groupId:"10242",customTags:{event:"order_payed_judge_"+(x()(Q,"orderStatus")||999)}}),e.next=115;break;case 102:if(e.prev=102,e.t2=e.catch(94),x()(this.ocData,"promotionInfo.retrievePromotion.promotionStatus")!==ma){e.next=109;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Ma({order_sn:S}),e.abrupt("return");case 109:if(Y=e.t2||{},X=Y.cancelled,r!==$n.a.XianYongHouFu){e.next=114;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Ma({order_sn:S}),e.abrupt("return");case 114:X?Ua():za({orderSn:S,error:e.t2,defaultOnFailed:U,ocManager:this});case 115:if(e.prev=115,Object(be.a)(),r===$n.a.HBInstallmentPay&&(this.ocData.lockInstallmentTerm=!0),r!==$n.a.CreditCardInstallmentPay){e.next=123;break}if(!x()(n,"creditCardVo.recommendCardVo.removeLock")){e.next=122;break}return e.abrupt("return");case 122:this.ocData.lockCreditCardTerm=!0;case 123:return e.finish(115);case 124:case"end":return e.stop()}},e,this,[[14,21],[37,62],[94,102,115,124]])}));return function(){return e.apply(this,arguments)}}()},{key:"selectedChannel",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.channelName)){e.next=14;break}return r=this.ocData,this.ocData&&this.ocData.orderSn&&(r.orderSn=this.ocData.orderSn),this.ocData&&this.ocData.chaosOrderSn&&(r.chaosOrderSn=this.ocData.chaosOrderSn),this.ocData&&this.ocData.lockInstallmentTerm&&(r.lockInstallmentTerm=this.ocData.lockInstallmentTerm),this.ocData&&this.ocData.lockCreditCardTerm&&(r.lockCreditCardTerm=this.ocData.lockCreditCardTerm),(a=x()(r,"payChannelList")||[]).forEach(function(e){e.selected=e.channelName===n}),r.selectedChannel=a.find(function(e){return e.channelName===n}),e.next=12,Hr(n);case 12:r.selectedChannel.paymentType=e.sent,this.updateOCData(r);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"refreshAfterSelectedChannel",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n={use_platform_promotion_request:{not_use:!1,promotion_identity_vo:null},use_shop_promotion_requests:[]},r=x()(this.ocData,"promotionInfo"),a=r.platformPromotion,o=r.shopPromotion,n.use_platform_promotion_request=a&&(a.promotionStatus===ua||a.notUse)?{not_use:a.notUse,promotion_identity_vo:a.promotionIdentityVo}:null,n.use_shop_promotion_requests=o&&(o.promotionStatus===ua||o.notUse)?[{promotion_identity_vos:o.promotionIdentityVo?[o.promotionIdentityVo]:null,mall_id:o.mallId,not_use:o.notUse}]:null,e.next=9,this.refresh(s()({front_action:Po.GetCoupon,promotion_vo:n},t));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"creditCardTermIndex",get:function(){return x()(this.ocData,"selectedChannel.creditCardTermIndex")}},{key:"originParams",get:function(){var e=Object(C.f)(location.search),t=x()(this.ocData,"selectedChannel.creditCardVo.recommendCardVo.bindId"),n=this.getSelectedSkuId&&this.getSelectedSkuId(),r=x()(this.ocData,"selectedChannel.creditCardTermIndex"),a=x()(this.ocData,"selectedChannel.creditCardVo.recommendCardVo.creditInstallments"),o=a&&a[r]&&a[r].installmentNum;return{front_env:this.frontEnv,front_version:this.frontVersion,confirm_display_type:1,front_supports:jo(),original_front_env:parseInt(this.activityParams[Co.OriginalFrontEnv],10)||0,selected_pay_channel:x()(this.ocData,"selectedChannel.channelName"),selected_install_num:o,goods_id:this.goodsId,group_id:this.groupId,group_order_id:this.groupOrderId,sku_id:n||x()(this.ocData,"goodsInfo.skuId"),goods_number:x()(this.ocData,"goodsInfo.goodsNumber"),address_id:this.addressId||e.sel_address_id,is_app:this.isApp,page_from:this.pageFrom,type:this.activityParams[Co.DuoDuoType]||0,award_type:this.activityParams[Co.AwardType]||0,biz_type:this.activityParams[Co.BizType]||0,service_transparent_field:x()(this.ocData,"deliveryInfo.selectedServiceTransparentField"),pay_channel_list:Object.keys(this.appIdSet)||[],biz_tag:this.activityParams[Co.BizTag],extend_map:this.promotionExtendMap?s()({},this.extendMap,{},this.promotionExtendMap):this.extendMap,origin_hostname:location.hostname,pay_extend_map:s()({},x()(this.appPaymentEnv,"payExtendMap"),{selected_bind_id:t}),source_channel:this.sourceChannel,transfer_map:this.transferMap,select_service_item_id_list:this.selectServiceItemIdList}}}],[{key:"getInstance",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),Qe()(Zo.prototype,"updateAddressInfo",[Je],Object.getOwnPropertyDescriptor(Zo.prototype,"updateAddressInfo"),Zo.prototype),Qe()(Zo.prototype,"selectDeliveryItem",[Je],Object.getOwnPropertyDescriptor(Zo.prototype,"selectDeliveryItem"),Zo.prototype),Qe()(Zo.prototype,"selectShippingItem",[Je],Object.getOwnPropertyDescriptor(Zo.prototype,"selectShippingItem"),Zo.prototype),Qe()(Zo.prototype,"getWxscoreSignScene",[Je],Object.getOwnPropertyDescriptor(Zo.prototype,"getWxscoreSignScene"),Zo.prototype),Qe()(Zo.prototype,"refreshPayVoAfterOrder",[Je],Object.getOwnPropertyDescriptor(Zo.prototype,"refreshPayVoAfterOrder"),Zo.prototype),Qe()(Zo.prototype,"changeBindId",[Je],Object.getOwnPropertyDescriptor(Zo.prototype,"changeBindId"),Zo.prototype),Zo),ii=oi.getInstance();function si(e){return ci.apply(this,arguments)}function ci(){return(ci=d()(l.a.mark(function e(t){var n,r,a,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.batchSn,r=t.merchantTag,a=void 0===r?52:r,o=t.mallId,i=Object(C.g)(window.location.href),e.t0=Me,e.t1=Ae.POST,e.next=6,Fn();case 6:return e.t2=e.sent,e.t3=n,e.t4=a,e.t5=i._oc_source,e.t6=ii.pageFrom,e.t7=o+"",e.t8={anti_content:e.t2,batch_sn:e.t3,merchant_tag:e.t4,oc_source:e.t5,page_from:e.t6,mall_id:e.t7},e.t9={method:e.t1,url:"api/promotion/take_merchant_coupon",data:e.t8},e.abrupt("return",(0,e.t0)(e.t9));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function li(e){return ui.apply(this,arguments)}function ui(){return(ui=d()(l.a.mark(function e(t){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.batchSn,r=t.merchantTag,a=void 0===r?50:r,o=Object(C.g)(window.location.href),e.t0=Me,e.t1=Ae.POST,e.next=6,Fn();case 6:return e.t2=e.sent,e.t3=n,e.t4=a,e.t5=o._oc_source,e.t6=ii.pageFrom,e.t7={anti_content:e.t2,batch_sn:e.t3,merchant_tag:e.t4,oc_source:e.t5,page_from:e.t6},e.t8={method:e.t1,url:"api/promotion/auto_take_merchant_coupon",data:e.t7},e.abrupt("return",(0,e.t0)(e.t8));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function di(e){return pi.apply(this,arguments)}function pi(){return(pi=d()(l.a.mark(function e(t){var n,r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.batchSnList,r=t.merchantTag,a=void 0===r?50:r,Object(C.g)(window.location.href),e.t0=Me,e.t1=Ae.POST,e.next=6,Fn();case 6:return e.t2=e.sent,e.t3=n,e.t4=a,e.t5={anti_content:e.t2,batch_sn_list:e.t3,merchant_tag:e.t4},e.t6={method:e.t1,url:"api/promotion/batch_auto_take_merchant_coupon",data:e.t5},e.abrupt("return",(0,e.t0)(e.t6));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mi(e){return fi.apply(this,arguments)}function fi(){return(fi=d()(l.a.mark(function e(t){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mallId,r=t.batchSn,a=t.merchantTag,o=t.likeFrom,e.t0=Me,e.t1=Ae.POST,e.t2=n,e.t3=o,e.t4=r,e.t5=a,e.next=9,Fn();case 9:return e.t6=e.sent,e.t7={mall_id:e.t2,like_from:e.t3,batch_sn:e.t4,merchant_tag:e.t5,anti_content:e.t6},e.t8={method:e.t1,url:"api/promotion/follow_and_take_mall_favorite_coupon",data:e.t7},e.abrupt("return",(0,e.t0)(e.t8));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hi(e){return vi.apply(this,arguments)}function vi(){return(vi=d()(l.a.mark(function e(t){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,r=void 0===n?2:n,a=t.batchSn,o=t.merchantTag,e.t0=Me,e.t1=Ae.POST,e.t2=r,e.t3=a,e.t4=o,e.next=8,Fn();case 8:return e.t5=e.sent,e.t6={type:e.t2,batch_sn:e.t3,merchant_tag:e.t4,anti_content:e.t5},e.t7={method:e.t1,url:"api/promotion/take_coupon_from_promotion_bar",data:e.t6},e.abrupt("return",(0,e.t0)(e.t7));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var gi,yi=29,_i=36,bi=2,ki={LANG_PLATFORM_COUPONS_TITLE:"平台优惠",LANG_REPEATED_COUPON:"可叠加红包",LANG_PLATFORM_COUPON:"通用优惠券",LANE_SCOPE:"满{0}可用",LANG_MALL_PERCENT_COUPON_SCOPE:"最高减{0}元",LANG_COUPON_DISABLE:"已领取",LANG_COUPON_TAKEN_OUT:"已抢光",LANG_COUPON_TAKEN:"领取",LANG_COUPON_TAKEN_MORE:"再领取",LANG_COUPON_LIKE_TAKEN:"收藏并领取",LANG_RECEIVED_SUCCESS:"领取成功",LANG_RECEIVED_FAILED:"领券失败",LANG_LIKE_RECEIVED_FAILED:"领取店铺收藏券失败",LANG_MALL_COUPON_TEXT:"店铺优惠",LANG_PDD_COUPON_TEXT:"拼多多优惠",LANG_COUPONS_TITLE:"平台优惠",LANG_GOODS_COUPON:"指定商品满{0}元可用",LANG_SHOP_COUPON:"订单满{0}元可使用",LANE_UNLIMITED:"优惠无上限",LANE_CANCEL_FAILED:"取消失败",LANE_LIKE_FAILED:"收藏失败",LANE_TRY_LATER:"请稍后再试～"},Ii=(gi={},We()(gi,yi,"mallCommodityCoupon"),We()(gi,_i,"likeMallCoupon"),gi),Si={DISPLAY_AMOUNT:10001,DISPLAY_AMOUNT_UNUSABLE:10002,DISPLAY_AMOUNT_UNUSABLE_INEFFICIENCY:10003,DISPLAY_AMOUNT_UNUSABLE_RULE_REASON:10004,DISPLAY_AMOUNT_APP:10005,DISPLAY_DISCOUNT:20001,DISPLAY_DISCOUNT_UNUSABLE:20002,DISPLAY_DISCOUNT_UNUSABLE_INEFFICIENCY:20003,DISPLAY_DISCOUNT_UNUSABLE_RULE_REASON:20004,SUPERPOSITION_AMOUNT:30001,SUPERPOSITION_AMOUNT_UNUSABLE:30002,SUPERPOSITION_AMOUNT_UNUSABLE_RULE_REASON:30003},wi={44025:["不能领取更多了","去看看别的券吧"],44026:["该券太火爆","全部已被领完"],44027:["好可惜，领券失败","领券活动刚刚结束哦"]},xi={44025:"已领完",44026:"已抢光"};var Ci=function(e){if(e)return e.filter(function(e){return!!e}).map(function(e,t){if(e)return{batchSn:e.batch_sn,discount:Object(Be.b)(e.discount),canTakenCount:e.can_taken_count,subRulesDesc:e.sub_rules_desc,displayType:e.display_type,tagDesc:e.tag_desc,promotionName:e.tag_desc,rulesDesc:e.rules_desc,titleDisplayName:e.rules_desc,richRulesDesc:e.rich_rules_desc,buttonDesc:e.button_desc,buttonSubDesc:e.button_sub_desc,timeDisplayName:e.time_display_name,takeStatus:e.take_status,isFavCoupon:parseInt(e.display_type,10)===_i,goodsId:x()(e,"goods_display.goods_id"),goodsName:x()(e,"goods_display.goods_name"),thumbUrl:x()(e,"goods_display.thumb_url")}})},Ei=function(e){if(e)return e.filter(function(e){return!!e}).map(function(e){var t=e.discount||e.discount_amount;return{discount:Object(Be.b)(t),scope:e.usable_desc,discountType:e.discount_type,displayType:e.display_type,endTime:e.end_time,promotionUniqueNo:e.promotion_unique_no,promotionIdentityVo:e.shop_promotion_detail_result||e.promotion_identity_vo,promotionName:e.promotion_name,startTime:e.start_time,titleDisplayName:e.title_display_name,timeDisplayName:e.time_display_name,usableDesc:e.usable_desc,canClick:e.can_click,checkStatus:e.check_status,extraDisplayMap:e.extra_display_map,topDisplayName:e.top_display_name,unusablePromotionDetail:e.unusable_promotion_display_detail_vos,ruleDisplayName:e.rule_display_name,batchSn:x()(e,"shop_promotion_detail_result.extension.batch_sn")||x()(e,"promotion_identity_vo.extension.batch_sn"),buttonDesc:x()(e,"extra_display_map.button_desc"),isFavCoupon:x()(e,"extra_display_map.is_fav_coupon"),isBrandVipCoupon:x()(e,"extra_display_map.is_brand_vip_coupon"),needJoinBrandVip:x()(e,"extra_display_map.need_join_brand_vip"),isPercentCoupon:function(e){return[Si.DISPLAY_DISCOUNT,Si.DISPLAY_DISCOUNT_UNUSABLE,Si.DISPLAY_DISCOUNT_UNUSABLE_INEFFICIENCY,Si.DISPLAY_DISCOUNT_UNUSABLE_RULE_REASON].includes(parseInt(e,10))}(e.display_type),isRetrieve:e.is_retrieve,isBestJusableOrRetrieve:e.is_best_jusable_or_retrieve}})},Pi=function(e){return e?e.map(function(e){return{fullBackName:x()(e,"full_back_name"),rewardStatus:x()(e,"reward_status"),processStatusDesc:x()(e,"process_status_desc.display_items"),processPercentStr:x()(e,"process_percent_str"),currentConsumeAmount:+Object(Be.b)(x()(e,"current_consume_amount")),needAmount:+Object(Be.b)(x()(e,"need_amount")),rewardAmount:Object(Be.b)(x()(e,"reward_amount")),rewardImgUrl:x()(e,"reward_img_url"),rewardName:x()(e,"reward_name")}}):[]},Ni=oi.getInstance(),Oi=function(){function e(){return m()(this,e),this.isFetching=!1,this.couponTaking=!1,e.instance||(e.instance=this),e.instance}return h()(e,[{key:"initPromotionFunc",value:function(e){var t=e.togglePromotionPopupVisibleFunc,n=e.setPromotionListsFunc;this.togglePromotionPopupVisible=t,this.setPromotionLists=n}},{key:"processParams",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,c,u,d,p,m,f,h=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},n=t.selectedShopPromotion,r=t.selectPlatformPromotion,a=t.refreshAfterReceive,o=x()(Ni,"ocData"),e.next=4,Fn();case 4:return i=e.sent,c=x()(o,"promotionInfo")||{},u=c.shopPromotion,d=c.platformPromotion,p=[],a||(!n&&u&&u.promotionStatus===ua&&(u.notUse?p.push(this.notUsePromotion.shop.promotionIdentityVo):p.push(u.promotionIdentityVo)),n&&p.push(n.promotionIdentityVo),!r&&d&&d.promotionStatus===ua&&(d.notUse?p.push(this.notUsePromotion.platform.promotionIdentityVo):p.push(d.promotionIdentityVo)),r&&p.push(r.promotionIdentityVo)),m=x()(o,"promotionExtendMap"),f=x()(o,"extendMap"),m&&(f=s()({},f,{},m)),e.abrupt("return",{total_price:x()(o,"priceInfo.orderPrice"),source_channel:Ni.sourceChannel,merchant_tag:52,page_from:Ni.pageFrom,front_supports:jo(),address_id:o.addressInfo.addressId,shop_discount_consult_requests:[{mall_id:x()(o,"goodsInfo.mallId"),shop_order_price:x()(o,"priceInfo.orderPrice"),goods_discount_requests:[{goods_id:x()(o,"goodsInfo.goodsId"),sku_id:x()(o,"goodsInfo.skuId"),price:x()(o,"goodsInfo.unitPriceForCent"),group_price:x()(o,"goodsInfo.groupPriceForCent"),group_id:x()(o,"goodsInfo.groupId"),normal_price:x()(o,"goodsInfo.normalPriceForCent"),goods_number:x()(o,"goodsInfo.goodsNumber"),cat_id:x()(o,"goodsInfo.catId"),cat_id1:x()(o,"goodsInfo.catId1"),cat_id2:x()(o,"goodsInfo.catId2"),cat_id3:x()(o,"goodsInfo.catId3"),goods_type:x()(o,"goodsInfo.goodsType"),event_type:x()(o,"goodsInfo.eventType"),activity_type:x()(o,"goodsInfo.activityType"),activity_id:x()(o,"goodsInfo.activityId"),oversea_type:x()(o,"goodsInfo.overseaType"),cost_template_id:x()(o,"goodsInfo.costTemplateId")}]}],extend_map:f,promotion_identity_vos:p,address_vo:{province_id:x()(o,"addressInfo.provinceId"),city_id:x()(o,"addressInfo.cityId"),district_id:x()(o,"addressInfo.districtId"),address_id:x()(o,"addressInfo.addressId")},anti_content:i});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchPromotionList",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i=this,s=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.selectedShopPromotion,r=t.selectPlatformPromotion,a=t.refreshAfterReceive,!this.isFetching){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.processParams({selectedShopPromotion:n,selectPlatformPromotion:r,refreshAfterReceive:a});case 5:return o=e.sent,Object(be.c)(),this.isFetching=!0,e.abrupt("return",Me({method:"POST",url:"api/promotion/query_candidate_promotion",data:o}).then(function(e){var t=Ei(x()(e,"shop_candidate_promotion_results.0.usable_shop_promotions"))||[],n=Ei(x()(e,"usable_platform_promotions"))||[],r=!Zn()(t)&&t.find(function(e){return!!e.checkStatus}),a=!Zn()(n)&&n.find(function(e){return!!e.checkStatus}),o=x()(e,"shop_candidate_promotion_results.0.extra_display_map.not_has_selectable_promotion");return{shopPromotionTitle:x()(e,"shop_candidate_promotion_results.0.shop_promotion_title_vo.display_items"),commonShopPromotions:Ei(x()(e,"shop_candidate_promotion_results.0.shop_promotion_display_results"))||[],retrievableShopPromotions:Ci(x()(e,"shop_candidate_promotion_results.0.retrievable_shop_promotions"))||[],usableShopPromotions:t,unusableShopPromotions:Ei(x()(e,"shop_candidate_promotion_results.0.unusable_shop_promotions"))||[],platformPromotionTitle:x()(e,"platform_promotion_title_vo.display_items"),platformPromotionExtraDisplay:x()(e,"platform_promotion_extra_display_vo.display_items"),usablePlatformPromotions:n,unusablePlatformPromotions:Ei(x()(e,"unusable_platform_promotions"))||[],otherUnusablePlatformPromotions:Ei(x()(e,"other_unusable_platform_promotions"))||[],promotionDisplay:x()(e,"total_discount_display_vo.display_items")||null,mallFullBackDetails:Pi(x()(e,"mall_full_back_details")),crossFullBackDetails:Pi(x()(e,"cross_full_back_details")),selectedShopPromotion:r,selectedPlatformPromotion:a,notHasSelectablePromotion:o,postagePromotion:x()(e,"shop_candidate_promotion_results.0.extra_display_map.postage_promotion_rich_text.display_items")}}).catch(function(){return null}).finally(function(){Object(be.a)(),i.isFetching=!1}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"autoTakeMerchantCoupon",value:function(){var e=d()(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x()(Ni,"ocData"),x()(t,"promotionInfo.shopPromotion.promotionStatus")!==da){e.next=11;break}if(!(n=x()(t,"promotionInfo.shopPromotion.promotionIdentityVo.extension.batch_sn"))){e.next=11;break}return e.next=7,li({batchSn:n});case 7:r=e.sent,lo({groupId:"20203",customTags:{event:"autoReceivePromotion"}}),Ni.needReload=!0,t.promotionInfo.shopPromotion={mallId:r.source_mall_id,promotionStatus:ua,promotionIdentityVo:r.promotion_identity_vo};case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"batchAutoTakeCoupon",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p,m,f,h;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.shopPromotion,r=t.platformPromotion,a=x()(Ni,"ocData"),o=[],i=x()(n,"promotionStatus"),s=x()(n,"promotionIdentityVo.extension.batch_sn"),c=x()(r,"promotionStatus"),u=x()(r,"promotionIdentityVo.extension.batch_sn"),i===da&&s&&o.push(s),c===da&&u&&o.push(u),!(o.length>0)){e.next=23;break}return e.next=12,di({batchSnList:o});case 12:if(d=e.sent,lo({groupId:"20203",customTags:{event:"autoReceivePromotion"}}),Ni.needReload=!0,p=x()(a,"goodsInfo.mallId"),m=(d||{}).coupon_list,(f=m&&m.find(function(e){return 8===x()(e,"promotion_identity_vo.promotion_type")}))&&(a.promotionInfo.shopPromotion={mallId:p,promotionStatus:ua,promotionIdentityVo:f.promotion_identity_vo}),(h=m.find(function(e){return 8!==x()(e,"promotion_identity_vo.promotion_type")}))&&(a.promotionInfo.platformPromotion={mallId:p,promotionStatus:ua,promotionIdentityVo:h.promotion_identity_vo}),m&&o.length===m.length){e.next=23;break}return e.abrupt("return",{notAllSuccess:!0});case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"ddpPromotionClick",value:function(){var e=d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Me({method:"POST",url:"api/buffon/kayle/promotion/click/notify",data:{sceneInfoMap:{fromScene:"DOWN_ORDER_PAGE_CLICK_NOTIFY",subScene:"DOWN_ORDER_PAGE_UPSIDE_CELL_CLICK_NOTIFY"}}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,null,[[0,5]])}));return function(){return e.apply(this,arguments)}}()},{key:"likeAndReceive",value:function(){var e=d()(l.a.mark(function e(t,n,r){var a,o=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=x()(Ni,"ocData"),Object(P.b)({page_el_sn:"4503302",op:"click",goods_id:x()(a,"goodsInfo.goodsId")}),e.t0=Me,e.t1=x()(a,"promotionInfo.shopPromotion.mallId"),e.t2=t,e.next=7,Fn();case 7:return e.t3=e.sent,e.t4={anti_content:e.t3},e.t5={mall_id:e.t1,like_from:101003,batch_sn:e.t2,merchant_tag:50,base_risk_info:e.t4},e.t6={method:"POST",url:"api/zenon/mall/like_and_receive_coupon",data:e.t5},e.t7=function(){Ni.needReload=!0,!n&&o.receiveLikeCouponInfo(),lo({groupId:"20203",customTags:{event:"receivePromotion"}}),!r&&Ni.refresh({front_action:Po.GetCoupon})},e.t8=function(e){var t=e.response,n=(t&&t.data||{}).error_msg||"领取失败~";Oe(n)},e.abrupt("return",(0,e.t0)(e.t6).then(e.t7).catch(e.t8));case 14:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"autoTakeCouponBeforeOldForNew",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u,d,p,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x()(Ni,"ocData"),n=x()(t,"promotionInfo.retrievePromotion")||{},r=x()(n,"promotionStatus"),a=x()(n,"promotionIdentityVo.extension.batch_sn"),o=x()(t,"promotionInfo.platformRetrievePromotion"),i=x()(o,"promotionStatus"),s=x()(t,"promotionInfo.shopPromotion"),c=x()(s,"promotionStatus"),e.prev=8,r!==pa){e.next=13;break}return e.next=12,this.likeAndReceive(a,!0);case 12:return e.abrupt("return");case 13:if(i!==da){e.next=18;break}return e.next=16,this.batchAutoTakeCoupon({shopPromotion:s,platformPromotion:o});case 16:e.next=21;break;case 18:if(c!==da){e.next=21;break}return e.next=21,this.autoTakeMerchantCoupon();case 21:e.next=29;break;case 23:e.prev=23,e.t0=e.catch(8),u=e.t0||{},d=u.response,p=(d||{}).data,m=x()(p,"error_toast")||"领取优惠失败",Oe(m);case 29:case"end":return e.stop()}},e,this,[[8,23]])}));return function(){return e.apply(this,arguments)}}()},{key:"autoTakeCouponOnPromotionCellClickV2",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u,d,p,m,f,h,v,g;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x()(Ni,"ocData"),n=x()(t,"promotionInfo.retrievePromotion")||{},r=x()(n,"promotionStatus"),a=x()(t,"promotionInfo.platformRetrievePromotion"),o=x()(a,"promotionStatus"),i=x()(n,"promotionIdentityVo.extension.batch_sn"),s=x()(n,"promotionIdentityVo.extension.retrievable_promotion_jump_url"),r!==fa||!s){e.next=26;break}if(e.prev=8,o!==da){e.next=12;break}return e.next=12,this.batchAutoTakeCoupon({shopPromotion:n,platformPromotion:a});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:return e.prev=16,c=x()(t,"goodsInfo.skuId"),u=x()(t,"goodsInfo.goodsId"),d=x()(t,"goodsInfo.goodsNumber"),p=x()(Ni,"groupOrderId"),m=Object(C.a)({group_order_id:p,goods_id:u,sku_id:c,goods_number:d},s),Ni.forwardHideSkuSelect&&Ni.forwardHideSkuSelect(),Ia.a.uniformForward(m),e.finish(16);case 25:return e.abrupt("return",{blockPopup:!0});case 26:if(r!==pa){e.next=39;break}return e.next=29,this.likeAndReceive(i,!1,!0);case 29:if(o!==da){e.next=37;break}return e.prev=30,e.next=33,this.batchAutoTakeCoupon({shopPromotion:n,platformPromotion:a});case 33:e.next=37;break;case 35:e.prev=35,e.t1=e.catch(30);case 37:return Ni.refresh({front_action:Po.GetCoupon}),e.abrupt("return",{blockPopup:!0});case 39:if(r!==da&&o!==da){e.next=53;break}return e.prev=40,e.next=43,this.batchAutoTakeCoupon({shopPromotion:n,platformPromotion:a});case 43:e.next=52;break;case 45:return e.prev=45,e.t2=e.catch(40),f=e.t2||{},h=f.response,v=(h||{}).data,g=x()(v,"error_toast")||"领取优惠失败，请重试",Oe(g),e.abrupt("return");case 52:Ni.refresh({front_action:Po.GetCoupon});case 53:case"end":return e.stop()}},e,this,[[8,14,16,25],[30,35],[40,45]])}));return function(){return e.apply(this,arguments)}}()},{key:"autoTakeCouponOnPromotionCellClick",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u,d,p,m,f,h,v,g,y,_,b;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x()(Ni,"ocData"),n=x()(t,"promotionInfo.retrievePromotion")||{},r=x()(n,"promotionStatus"),a=x()(t,"promotionInfo.platformRetrievePromotion"),o=x()(a,"promotionStatus"),i=x()(n,"promotionIdentityVo.extension.batch_sn"),s=x()(n,"promotionIdentityVo.extension.retrievable_promotion_jump_url"),r!==fa||!s){e.next=15;break}return c=x()(t,"goodsInfo.skuId"),u=x()(t,"goodsInfo.goodsNumber"),d=x()(Ni,"groupOrderId"),p=Object(C.a)({group_order_id:d,sku_id:c,goods_number:u},s),Ni.forwardHideSkuSelect&&Ni.forwardHideSkuSelect(),Ia.a.uniformForward(p),e.abrupt("return",{blockPopup:!0});case 15:if(r!==pa){e.next=19;break}return e.next=18,this.likeAndReceive(i);case 18:return e.abrupt("return",{blockPopup:!0});case 19:if(o!==da){e.next=33;break}return e.prev=20,e.next=23,this.batchAutoTakeCoupon({shopPromotion:n,platformPromotion:a});case 23:e.next=31;break;case 25:e.prev=25,e.t0=e.catch(20),m=e.t0||{},f=m.response,h=(f||{}).data,v=x()(h,"error_toast")||"领取优惠失败，请重试",Oe(v);case 31:e.next=45;break;case 33:if(r!==da){e.next=45;break}return e.prev=34,e.next=37,this.autoTakeMerchantCoupon();case 37:e.next=45;break;case 39:e.prev=39,e.t1=e.catch(34),g=e.t1||{},y=g.response,_=(y||{}).data,b=x()(_,"error_toast")||"领取优惠失败，请重试",Oe(b);case 45:case"end":return e.stop()}},e,this,[[20,25],[34,39]])}));return function(){return e.apply(this,arguments)}}()},{key:"receiveLikeCouponInfo",value:function(){var e=x()(Ni,"ocData"),t=x()(e,"mallInfo.name");Oe(a.a.createElement(a.a.Fragment,null,"领券成功，已关注",t&&a.a.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"2.56rem",marginTop:".04rem"}},t)),{duration:3})}},{key:"batchAutoTakeCouponAndReloadToDaCu",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x()(Ni,"ocData"),n=x()(t,"promotionInfo.retrievePromotion")||{},r=x()(n,"promotionStatus"),a=x()(t,"promotionInfo.platformRetrievePromotion"),e.prev=4,r!==da){e.next=8;break}return e.next=8,this.batchAutoTakeCoupon({shopPromotion:n,platformPromotion:a});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return e.prev=12,this.reloadToDaCu(),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[4,10,12,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"reloadToDaCu",value:function(){var e=x()(Ni,"ocData"),t=x()(e,"promotionInfo.platformRetrievePromotion"),n=t.promotionStatus,r=x()(t,"promotionIdentityVo.extension.retrievable_promotion_jump_url");if(n===fa&&r){var a=x()(e,"goodsInfo.skuId"),o=x()(e,"goodsInfo.goodsId"),i=x()(e,"goodsInfo.goodsNumber"),s=x()(Ni,"groupOrderId"),c=Object(C.a)({group_order_id:s,sku_id:a,goods_id:o,goods_number:i},r);Ia.a.reload(c)}}},{key:"notUsePromotion",get:function(){var e=x()(Ni,"ocData");return{shop:{promotionIdentityVo:{promotion_type:8,promotion_id:"-100",extension:{mall_id:x()(e,"goodsInfo.mallId")}}},platform:{promotionIdentityVo:{promotion_type:15,promotion_id:"-100"}}}}}],[{key:"getInstance",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),Di=oi.getInstance(),Ti=Oi.getInstance(),Ai=Object(r.forwardRef)(function(e,t){var n=Object(r.useContext)(sa).glide,o=function(){var t=d()(l.a.mark(function t(n){var r,a,o,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.channelName,a=x()(e,"ocData.promotionInfo.retrievePromotion.promotionStatus"),o=x()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},!(i=o.discountPayChannel)||r!==i||a!==ma){t.next=8;break}return t.next=7,Ti.ddpPromotionClick();case 7:Di.refreshAfterSelectedChannel();case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=d()(l.a.mark(function t(r){var a,i,s,c,u,d,p;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.channelName,i=r.selectedChannel,(s=r.opts)&&s.expandAfterSelection||n(),!a||!i){t.next=21;break}return c=e.ocData,Di.ocData&&Di.ocData.orderSn&&(c.orderSn=Di.ocData.orderSn),Di.ocData&&Di.ocData.chaosOrderSn&&(c.chaosOrderSn=Di.ocData.chaosOrderSn),Di.ocData&&Di.ocData.lockInstallmentTerm&&(c.lockInstallmentTerm=Di.ocData.lockInstallmentTerm),Di.ocData&&Di.ocData.lockCreditCardTerm&&(c.lockCreditCardTerm=Di.ocData.lockCreditCardTerm),(u=x()(c,"payChannelList")||[]).forEach(function(e){e.selected=e.channelName===a}),c.selectedChannel=u.find(function(e){return e.channelName===a}),c.selectedChannel.termIndex=i.termIndex,c.selectedChannel.creditCardTermIndex=i.creditCardTermIndex,i.creditCardTermIndex>=0&&(c.creditCardTermIndex=i.creditCardTermIndex),i.termIndex>=0&&(c.termIndex=i.termIndex),t.next=17,Hr(a);case 17:c.selectedChannel.paymentType=t.sent,c.payChannelGroups&&(null===(d=c.payChannelGroups.find(function(e){return e.channels.map(function(e){return e.channel}).includes(a)}))||void 0===d?void 0:d.channels)&&(d.channels.forEach(function(e){return e.defaultSelected=!1}),(p=d.channels.find(function(e){return e.channel===a}))&&(p.defaultSelected=!0)),Di.updateOCData(c),o({channelName:a,selectedChannel:i});case 21:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),s=Di.enablePaymentListV2&&!!e.ocData.payChannelGroups,c={payChannels:e.ocData.payChannelList,payChannelGroups:e.ocData.payChannelGroups,installmentList:e.ocData.installmentList,lockInstallmentTerm:Di.ocData.lockInstallmentTerm,lockCreditCardTerm:Di.ocData.lockCreditCardTerm,selectedChannelName:e.ocData.selectedChannel&&e.ocData.selectedChannel.channelName,selectedChannel:e.ocData.selectedChannel,onChannelSelected:i,orderAmount:e.ocData.orderAmount,changeBindId:Di.changeBindId,ref:t};return a.a.createElement("div",{className:aa.a.payment,onClick:function(e){return e.stopPropagation()}},a.a.createElement("div",{className:aa.a.title},"选择支付方式",a.a.createElement("span",{className:aa.a.closeIcon,onClick:n,"aria-label":"关闭支付列表浮层",role:"button"})),!s&&a.a.createElement("div",{className:aa.a.paymentlist},a.a.createElement(Mr,{disableFolding:!0,isRefreshPayChannels:!0,payChannels:e.ocData.payChannelList,installmentList:e.ocData.installmentList,lockInstallmentTerm:Di.ocData.lockInstallmentTerm,lockCreditCardTerm:Di.ocData.lockCreditCardTerm,creditCardTermIndex:e.ocData.creditCardTermIndex,termIndex:e.ocData.termIndex,selectedChannelName:e.ocData.selectedChannel&&e.ocData.selectedChannel.channelName,onChannelSelected:i,orderAmount:e.ocData.orderAmount,changeBindId:Di.changeBindId}),a.a.createElement("div",{className:aa.a.border})),s&&a.a.createElement(na,c))}),ji=function(e){var t=Object(r.useRef)();return a.a.createElement(la,{visible:e.visible,onHide:function(n){var r;n&&n.stopPropagation(),e.toggleShowPaymentList(!1),null===(r=t.current)||void 0===r||r.unspread()}},a.a.createElement(Ai,tt()({},e,{ref:t})))},Ri=n("g4LU"),Li=n.n(Ri),Mi=a.a.createContext(!1),Bi=Mi.Provider;var Fi=Object(r.forwardRef)(function(e,t){var n=e.children,o=e.onCloseIconClicked,i=e.additionalClass,s=Object(r.useState)(!1),c=T()(s,2),l=c[0],u=c[1],d=Object(r.useState)(!0),p=T()(d,2),m=p[0],f=p[1];Object(r.useEffect)(function(){u(!0)},[]);var h=function(){u(!1)};Object(r.useImperativeHandle)(t,function(){return{onSlideDowm:h}});var v=L()("".concat(Li.a.popover," ").concat(i||"")),g=L()(Li.a.bg,We()({},Li.a.bgShown,l));return m?a.a.createElement("div",{className:v,ref:t,onClick:function(e){h()}},a.a.createElement("div",{className:g,onClick:function(e){e.stopPropagation(),h()}}),a.a.createElement("div",{className:"".concat(Li.a.main," ").concat(l?Li.a.mainShown:""),onTransitionEnd:function(e){l||(o&&o(e),f(!1))},onClick:function(e){e.stopPropagation()}},a.a.createElement(Bi,{value:{glide:h}},n))):null}),Ui=n("7wT/"),zi=n.n(Ui);var Hi=function(e){var t=e.title,n=e.titleVo,r=e.noBorder;return t||n?a.a.createElement("div",{className:"".concat(zi.a.listTitle," ").concat(r?zi.a.noBorder:"")},Zn()(n)?t:n.map(function(e,t){var n={color:e.font_color,fontSize:e.font_size/100+"rem"};return a.a.createElement("span",{key:t,style:n},e.text)})):null},Vi=n("Wgq/"),Gi=n.n(Vi);var Wi=function(e){var t,n=e.discount,o=e.promotionName,i=e.isPercentCoupon,s=e.isRuleDisable,c=e.high,l=L()(Gi.a.discountInfo,We()({},Gi.a.high,!!c)),u=L()(Gi.a.discount,(t={},We()(t,Gi.a.gray,!!s),We()(t,Gi.a.small,(n+"").replace(".","").length>4),t)),d=L()(Gi.a.promotionName,We()({},Gi.a.small,o.length>7));return a.a.createElement("div",{className:l,"aria-label":i?"".concat(n," 折").concat(o||""):"".concat(n," 元").concat(o||""),role:"img"},a.a.createElement("div",{className:u,"aria-hidden":!0},i?a.a.createElement(r.Fragment,null,a.a.createElement("span",null,n),a.a.createElement("i",{className:Gi.a.percentIcon},"折")):a.a.createElement(r.Fragment,null,a.a.createElement("i",{className:Gi.a.discountIcon},"¥"),a.a.createElement("span",null,n))),a.a.createElement("div",{className:d,"aria-hidden":!0},o))},qi=n("Bogp"),Qi=n.n(qi);var Yi=function(e){var t,n=Object(r.useState)(!1),o=T()(n,2),i=o[0],s=o[1],c=e.titleDisplayName,l=e.timeDisplayName,u=e.ruleDisplayName,d=e.richRulesDesc,p=e.isDisable,m=e.goodsName,f=e.extraDisplayMap,h=e.showGoodsName,v=m||x()(f,"goods_name")||null,g=L()(Qi.a.promotionInfo,We()({},Qi.a.high,!!i||!!u)),y=L()(Qi.a.titleDisplayName,(t={},We()(t,Qi.a.gray,p),We()(t,Qi.a.hasDetail,!!v&&h),We()(t,Qi.a.detailShown,i),t));return a.a.createElement("div",{className:g},a.a.createElement("div",{className:y,onClick:v&&h?function(e){e.stopPropagation(),s(!i)}:null},d&&d.length>0?d.map(function(e){return a.a.createElement("span",{key:e.txt,style:{color:e.color||null}},e.txt)}):c),a.a.createElement("div",{className:Qi.a.timeDisplayName},l),i&&v&&a.a.createElement("div",{className:Qi.a.detail},v),u&&a.a.createElement("div",{className:Qi.a.ruleDisplayName},u))},Xi=n("SeBp"),Ji=n.n(Xi);function Ki(e){return e.selected?a.a.createElement("svg",{t:"1614064061193",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35869"},a.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m219.648 307.2l-287.118222 320.398222-122.936889-123.050666L256 570.026667l192.284444 192.398222 352.483556-393.386667L731.648 307.2z","p-id":"35870"})):e.disable?a.a.createElement("svg",{t:"1614064112414",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"37940"},a.a.createElement("path",{d:"M511.941358 511.941358m-508.657427 0a508.657428 508.657428 0 1 0 1017.314855 0 508.657428 508.657428 0 1 0-1017.314855 0Z","p-id":"37941"})):a.a.createElement("svg",{t:"1614063231082",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35744"},a.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2z m0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z","p-id":"35745"}))}var Zi=function(e){var t,n=L()(Ji.a.selectIcon,(t={},We()(t,Ji.a.selected,e.selected),We()(t,Ji.a.disable,e.disable),t)),r="";return r=e.disable?"当前优惠未达门槛":e.selected?"当前优惠已选中":"当前优惠未选中",a.a.createElement("div",{className:n,style:e.style,"aria-label":r,role:"button"},a.a.createElement(Ki,e))},$i=n("dtTa"),es=n.n($i);var ts=function(e){var t=L()(es.a.usablePromotionItem,e.exClass);return a.a.createElement("div",{className:t,onClick:e.onSelect},a.a.createElement(Wi,e),a.a.createElement(Yi,e),a.a.createElement(Zi,tt()({},e,{style:{height:".78rem"}})))},ns=n("V/7h"),rs=n.n(ns);var as=function(e){var t=e.skuThumbList,n=e.webpEnable;if(!t)return null;for(var r=t&&t.slice(),o=t.length%8?8-t.length%8:0,i=0;i<o;i++)r.push(0);return a.a.createElement("div",{className:rs.a.skuList},t&&!!t.length&&r.map(function(e,t){return a.a.createElement("div",{className:rs.a.skuBox,key:e.sku_id||t},e.thumb_url&&a.a.createElement(it.a,{src:Object(Ot.b)(e.thumb_url,{resizeWidth:300,webpEnable:n})}))}))};var os=function(e){var t=e.unUsableDisplayDetail,n=e.webpEnable;return a.a.createElement("div",{className:rs.a.disableList},t&&!!t.length&&t.map(function(e){var t=e.sku_thumb_url_volist||e.sku_thumb_url_vos;return a.a.createElement("div",{className:rs.a.displayList,key:e.display_name},a.a.createElement("div",{className:rs.a.displayTitle},e.display_name),a.a.createElement(as,{webpEnable:n,skuThumbList:t}))}))},is=n("LrBD"),ss=n.n(is);var cs=function(e){var t=L()(ss.a.disablePromotionItem,e.exClass);return a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:t,onClick:e.onSelect},a.a.createElement(Wi,tt()({},e,{high:!0,isDisable:!0})),a.a.createElement(Yi,tt()({},e,{isDisable:!0})),a.a.createElement(Zi,tt()({},e,{disable:!0,style:{height:"1.03rem"}}))),!!e.canClick&&e.unUsableDisplayDetail&&a.a.createElement("div",{className:ss.a.disableWrap},a.a.createElement(os,{webpEnable:e.webpEnable,unUsableDisplayDetail:e.unUsableDisplayDetail})))},ls=n("0mK9"),us=n("PlGL"),ds=n("ef9M"),ps={isSpinnerShown:!1,index:0,timers:[],show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=ps.index;return ps.timers[ps.index]=setTimeout(function(){ps.isSpinnerShown||(Object(be.b)(),ps.isSpinnerShown=!0)},e),ps.index++,function(){return ps.hide(t)}},showWithoutBg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=ps.index;return ps.timers[ps.index]=setTimeout(function(){ps.isSpinnerShown||(Object(be.c)(),ps.isSpinnerShown=!0)},e),ps.index++,function(){return ps.hide(t)}},hide:function(e){var t=ps.timers[e];t&&(clearTimeout(t),ps.timers[e]=-1),ps.isSpinnerShown&&!ps.timers.some(function(e){return e>-1})&&(Object(be.a)(),ps.isSpinnerShown=!1,ps.timers=[],ps.index=0)}},ms={mutiDelaySpinner:ps},fs=n("LVsN"),hs={memberRuleClick:{page_el_sn:5556244},memberProtoClick:{page_el_sn:5556242},sendCodeClick:{page_el_sn:5556240},changeClick:{page_el_sn:5556239},joinAndTakeCouponClick:{page_el_sn:5556088},mobileImpr:{op:"impr",page_el_sn:5556031},couponImpr:{op:"impr",page_el_sn:5556030}},vs=n("vVBQ"),gs=n.n(vs),ys=function(e){var t=e.memberRuleUrl,n=e.memberProtocolUrl;return a.a.createElement("div",{className:gs.a.rule},a.a.createElement("p",null,"确认加入即表示同意"),a.a.createElement("p",null,a.a.createElement("span",{className:gs.a.ruleText,onClick:function(){Object(P.b)(null===hs||void 0===hs?void 0:hs.memberRuleClick),t&&Ia.a.uniformForward(t)}},"《会员规则》"),"及",a.a.createElement("span",{className:gs.a.ruleText,onClick:function(){Object(P.b)(null===hs||void 0===hs?void 0:hs.memberProtoClick),n&&Ia.a.uniformForward(n)}},"《会员授权协议》")))};function _s(e){return/^[1][3,4,5,7,8,9][0-9]{9}$/.test(e)}function bs(e){return/^[0-9]{6}$/.test(e)}var ks,Is,Ss,ws=n("j5ga"),xs=!1,Cs=[],Es=function(){var e=d()(l.a.mark(function e(){var t,n,r,a=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:void 0,!xs){e.next=3;break}return e.abrupt("return",new Promise(function(e){Cs.push(e)}));case 3:if(xs=!0,t){e.next=11;break}return e.t0=ws.a,e.next=8,Ns({method:Ss.GET,url:"api/server/_stm"});case 8:e.t1=e.sent,n=(0,e.t0)(e.t1),t=n.serverTime;case 11:t=t||+Date.now(),r={serverTime:t},ks=new Rn.default(r),Cs.forEach(function(e){return e()}),xs=!1;case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Ps=function(){var e=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ks){e.next=3;break}return e.next=3,Es();case 3:return t=ks.messagePack(),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();!function(e){e.POST="POST",e.GET="GET"}(Ss||(Ss={}));var Ns=function(e){return Os.apply(this,arguments)};function Os(){return(Os=d()(l.a.mark(function e(t){var n,r,a,o=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{isAuth:!1,isFormat:!1,isAnti:!1},Is||(r=se.a.getInstance().getPageID(),Is=Object(ie.a)({pageInfo:{pageId:r}})),!(null===n||void 0===n?void 0:n.isAuth)){e.next=9;break}return e.next=5,Object(ce.a)();case 5:if(e.sent){e.next=9;break}return e.next=9,Object(ce.f)();case 9:if(t&&!t.defaultErrorHandler&&(t.defaultErrorHandler=function(){}),!(null===n||void 0===n?void 0:n.isAnti)){e.next=22;break}return e.t0=Object,e.t1={},e.t2=s.a,e.t3={},e.t4=t.data||{},e.next=18,Ps();case 18:e.t5=e.sent,e.t6={anti_content:e.t5},e.t7=(0,e.t2)(e.t3,e.t4,e.t6),t.data=e.t0.assign.call(e.t0,e.t1,e.t7);case 22:return t.encodeNativeResponse=!1,e.next=25,Is(t);case 25:if(a=e.sent,!(null===n||void 0===n?void 0:n.isFormat)){e.next=28;break}return e.abrupt("return",Object(ws.a)(a));case 28:return e.abrupt("return",a);case 29:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ds=function(e){return Ns({method:Ss.POST,url:"api/rimini/mall_member/query_join_member_popup",data:e},{isAuth:!0,isFormat:!0,isAnti:!0}).then(function(e){return(null===e||void 0===e?void 0:e.result)||{}})},Ts=function(e){return Ns({method:Ss.POST,url:"api/rimini/mall_member/mobile/code/auth/query",data:e},{isFormat:!0,isAnti:!0}).then(function(e){return(null===e||void 0===e?void 0:e.result)||{}}).catch(function(){return{}})},As=function(e){return Ns({method:Ss.POST,url:"api/rimini/mall_member/mobile/code/auth/verify",data:e},{isFormat:!0,isAnti:!0}).then(function(e){return(null===e||void 0===e?void 0:e.result)||{}}).catch(function(){return{}})},js=function(e){var t=e.mallId,n=e.buttonText,o=(e.autoFocus,e.joinMemberCallback),i=e.memberRuleUrl,s=e.memberProtocolUrl,c=Object(r.useRef)(null),u=Object(r.useRef)(null),p=Object(r.useState)(""),m=T()(p,2),f=m[0],h=m[1],v=Object(r.useState)(!1),g=T()(v,2),y=g[0],_=g[1],b=Object(r.useState)(""),k=T()(b,2),I=k[0],S=k[1],w=Object(r.useRef)(""),x=Object(r.useRef)(!1),C=Object(r.useState)(""),E=T()(C,2),N=E[0],O=E[1],D=Object(r.useRef)(),A=Object(r.useState)("发送验证码"),j=T()(A,2),R=j[0],M=j[1];Object(r.useEffect)(function(){return function(){clearInterval(D.current)}},[]);var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=e--;x.current=!0,O(f),_(!1),M("重新发送(".concat(t,")")),D.current&&clearInterval(D.current),D.current=setInterval(function(){--t>0?M("重新发送(".concat(t,")")):(x.current=!1,M("发送验证码"),O(""),_(!0),clearInterval(D.current))},1e3)},F=function(){var e=d()(l.a.mark(function e(){var n,r,a,o,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(P.b)(null===hs||void 0===hs?void 0:hs.sendCodeClick),_s(f)){e.next=4;break}return Object(oe.a)("请输入正确的手机号"),e.abrupt("return");case 4:if(f!==N||!x.current){e.next=6;break}return e.abrupt("return");case 6:return n={mobile:f,mobile_type:1,digits:6,scene:"1000038",mall_id:+t},e.next=9,Ts(n);case 9:r=e.sent,o=(a=r||{}).result,i=a.mobileId,o?(B(),w.current=i,null===u||void 0===u||null===(s=u.current)||void 0===s||s.focus()):Object(oe.a)("验证码发送失败");case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),U=Object(ds.a)(d()(l.a.mark(function e(){var n,r,a,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(P.b)(null===hs||void 0===hs?void 0:hs.joinAndTakeCouponClick),_s(f)){e.next=4;break}return Object(oe.a)("请输入正确的手机号"),e.abrupt("return");case 4:if(I){e.next=7;break}return Object(oe.a)("请输入验证码"),e.abrupt("return");case 7:if(bs(I)){e.next=10;break}return Object(oe.a)("验证码不正确，请重新输入"),e.abrupt("return");case 10:return r={mobile_id:w.current,code:I,scene:"1000038",mall_id:+t},a=(null===ms||void 0===ms?void 0:null===(n=ms.mutiDelaySpinner)||void 0===n?void 0:n.showWithoutBg)&&ms.mutiDelaySpinner.showWithoutBg(),e.next=14,As(r);case 14:(null===(i=e.sent)||void 0===i?void 0:i.sessionId)?o&&o(null===i||void 0===i?void 0:i.sessionId):Object(oe.a)("验证码不正确，请重新输入"),a&&a();case 17:case"end":return e.stop()}},e)})));return a.a.createElement("div",{className:gs.a.joinContent},a.a.createElement("div",{className:gs.a.phoneContent},a.a.createElement(fs.a,{onChange:function(e){var t,n=(null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)||"",r=_s(n)&&(!x.current||n!==N);I&&y&&!r&&S(""),_(r),h(n)},value:f,className:gs.a.inputBox,placeholder:"请输入手机号",maxLength:11,elementType:"input",type:"tel",id:"phone",extraParams:{ref:c}}),!!f&&a.a.createElement("i",{className:gs.a.clearButton,onClick:function(){var e;h(""),S(""),_(!1),null===c||void 0===c||null===(e=c.current)||void 0===e||e.focus()}})),a.a.createElement("div",{className:gs.a.phoneContent},a.a.createElement(fs.a,{onChange:function(e){var t,n=(null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)||"";S(n)},value:I,className:L()(gs.a.inputBox,gs.a.codeInputBox),placeholder:"请输入验证码",maxLength:6,elementType:"input",type:"tel",id:"code",extraParams:{ref:u}}),a.a.createElement("span",{className:L()(gs.a.verifyCode,We()({},gs.a.verifyCodeActive,y)),onClick:F},f!==N?"发送验证码":R)),a.a.createElement("div",{className:gs.a.joinBtn,onClick:U},n||"加入会员并领取"),a.a.createElement(ys,{memberRuleUrl:i,memberProtocolUrl:s}))},Rs=function(e){var t=e.content,n=e.modifyNumber,r=e.joinMemberCallback,o=e.mallId,i=t||{},s=i.userMobile,c=i.brandLogoUrl,l=i.buttonText,u=i.coupon,d=i.popupTitle,p=i.memberRuleUrl,m=i.memberProtocolUrl,f=(s||{}).fuzzyMobile,h=u||{},v=h.discount,g=h.richRulesDesc,y=h.tagDesc,_=h.timeDisplayName,b=Lt()(function(){Object(P.b)(null===hs||void 0===hs?void 0:hs.joinAndTakeCouponClick),r()},300);return a.a.createElement("div",null,!!c&&a.a.createElement("div",{className:gs.a.logoWrap},a.a.createElement(it.a,{className:gs.a.logo,src:c})),a.a.createElement("div",{className:gs.a.container},a.a.createElement("div",{className:gs.a.titleWrap},a.a.createElement("div",{className:gs.a.title},d)),a.a.createElement($e.a,{trackingInfo:null===hs||void 0===hs?void 0:hs.couponImpr},a.a.createElement("div",{className:gs.a.couponContent},a.a.createElement("div",{className:gs.a.couponItem},a.a.createElement("div",{className:gs.a.couponPrice},a.a.createElement("i",null,"¥"),Object(Be.b)(v||0)),a.a.createElement("div",{className:gs.a.couponInfo},a.a.createElement("p",null,(g||[]).map(function(e){return e.txt})),a.a.createElement("p",null,_)),!!y&&a.a.createElement("div",{className:gs.a.couponTag},y)))),a.a.createElement("div",{className:gs.a.joinContent},f?a.a.createElement(a.a.Fragment,null,a.a.createElement($e.a,{trackingInfo:null===hs||void 0===hs?void 0:hs.mobileImpr},a.a.createElement("div",{className:gs.a.phoneContent,onClick:n},a.a.createElement("p",null,"手机号：",f),a.a.createElement("p",null,"修改"))),a.a.createElement("div",{className:gs.a.joinBtn,onClick:b},l||"加入会员并领取"),a.a.createElement(ys,{memberRuleUrl:p,memberProtocolUrl:m})):a.a.createElement(js,{joinMemberCallback:r,mallId:o,buttonText:l,memberRuleUrl:p,memberProtocolUrl:m}))))},Ls=function(e){var t=e.data,n=e.content,r=e.showBack,o=e.joinMemberCallback,i=e.goBack,s=void 0===i?function(){}:i;return a.a.createElement("div",{className:gs.a.phoneContainer},a.a.createElement("div",{className:gs.a.phoneTitleWrap},r&&a.a.createElement("div",{className:gs.a.backBtnWrap,onClick:s},a.a.createElement("div",{className:gs.a.backBtn})),a.a.createElement("div",{className:gs.a.title},"修改授权手机号")),a.a.createElement(js,{joinMemberCallback:o,mallId:null===t||void 0===t?void 0:t.mallId,buttonText:null===n||void 0===n?void 0:n.buttonText,memberRuleUrl:null===n||void 0===n?void 0:n.memberRuleUrl,memberProtocolUrl:null===n||void 0===n?void 0:n.memberProtocolUrl}))},Ms=Object(r.forwardRef)(function(e,t){var n=e.data,o=void 0===n?{}:n,i=e.onShowFail,s=void 0===i?function(){}:i,c=e.onSuccess,u=void 0===c?function(){}:c,p=e.spinnerTime,m=Object(r.useState)(!1),f=T()(m,2),h=f[0],v=f[1],g=Object(r.useState)(0),y=T()(g,2),_=y[0],b=y[1],k=Object(r.useState)({}),I=T()(k,2),S=I[0],w=I[1],x=o.mallId,C=o.couponId,E=o.sceneId,N=o.merchantTag;Object(r.useImperativeHandle)(t,function(){return{show:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>0&&void 0!==o[0]?o[0]:0,e.next=4;break;case 4:return r=(null===ms||void 0===ms?void 0:null===(t=ms.mutiDelaySpinner)||void 0===t?void 0:t.show)&&ms.mutiDelaySpinner.show(p||300),e.prev=5,e.next=8,Ds({mall_id:+x,coupon_batch_sn:C,scene_id:E});case 8:if(a=e.sent){e.next=12;break}return Object(oe.a)("请稍后再试～"),e.abrupt("return");case 12:w(a),v(!0),b(n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),Object(oe.a)((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"请稍后再试～"),s&&s(e.t0);case 21:return e.prev=21,r&&r(),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[5,17,21,24]])}));return function(){return e.apply(this,arguments)}}(),hide:function(){v(!1)}}});var O=function(e){var t,n=null===S||void 0===S?void 0:null===(t=S.userMobile)||void 0===t?void 0:t.mobileId,r={mall_id:+x||0,scene_id:E,batch_sn:C,merchant_tag:N};e?Object.assign(r,{mobile_session_id:e}):Object.assign(r,{mobile_id:n}),function(e){return Ns({method:Ss.POST,url:"api/promotion/join_and_take_mall_member_coupon",data:e},{isAuth:!0,isFormat:!0,isAnti:!0}).then(function(e){return e||{}})}(r).then(function(e){(null===e||void 0===e?void 0:e.couponId)?(Object(oe.a)((null===e||void 0===e?void 0:e.toast)||"已加入会员并成功领券"),u&&u(e),v(!1)):Object(oe.a)("请稍后再试～")}).catch(function(e){var t,n,r,a,o,i;2000004===(null===e||void 0===e?void 0:e.errorCode)&&(null===e||void 0===e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.error_toast)?(v(!1),Object(ot.a)({title:null===e||void 0===e?void 0:null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.error_toast,confirmButtonLabel:"知道了",onConfirm:function(){v(!0)},onClose:function(){v(!0)}})):Object(oe.a)((null===e||void 0===e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.error_toast)||"请稍后再试～")})};return h?a.a.createElement(us.a,null,1===_||2===_?a.a.createElement(Ls,{data:o,content:S,showBack:2===_,joinMemberCallback:O,goBack:function(){b(0)}}):a.a.createElement(Rs,{content:S,modifyNumber:function(){Object(P.b)(null===hs||void 0===hs?void 0:hs.changeClick),b(2)},joinMemberCallback:O,mallId:x}),a.a.createElement(us.a.CloseButton,{onClick:function(){return v(!1)}})):null}),Bs=n("Ai8/"),Fs=n.n(Bs),Us=Oi.getInstance();var zs=function(e){var t=Object(r.useRef)(null),n=e.canTake,o=e.index,i=e.buttonDesc,s=e.buttonSubDesc,c=e.displayType,u=e.goodsInfo,p=e.batchSn,m=e.isFavCoupon,f=e.isBrandVipCoupon,h=e.needJoinBrandVip,v=e.receiveCallback,g=L()(Fs.a.btn,Fs.a[Ii[c]],We()({},Fs.a.isTakenOut,!n)),y=u.mallId,_=!1,b=function(){var e=d()(l.a.mark(function e(){var n,r,a,i,s,c,u,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=2;break}return e.abrupt("return");case 2:if(_=!0,e.prev=3,!f||!h){e.next=7;break}return t.current.show(),e.abrupt("return");case 7:if(!m){e.next=14;break}return e.next=10,mi({batchSn:p,likeFrom:101003,merchantTag:52,mallId:y});case 10:n=e.sent,Us.receiveLikeCouponInfo(),e.next=19;break;case 14:return e.next=16,si({batchSn:p,merchantTag:52,mallId:y});case 16:n=e.sent,(r=x()(n,"higher_priority_take_toast"))?Object(ls.a)(r,{style:{whiteSpace:"pre-line"},ContainerProps:{style:{height:"85%",top:"auto"}}}):Oe("领取成功");case 19:v&&v({data:n,index:o}),lo({groupId:"20203",customTags:{event:"receivePromotion"}}),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(3),(a=e.t0.errorCode)&&((i=wi[a])?(Oe(i[0]),s=xi[a],v&&v({index:o,buttonText:s})):(c=e.t0.response||{},u=c.data,d=u&&u.error_toast||ki.LANE_TRY_LATER,Oe(d)));case 27:return e.prev=27,_=!1,e.finish(27);case 30:case"end":return e.stop()}},e,null,[[3,23,27,30]])}));return function(){return e.apply(this,arguments)}}(),k=L()(Fs.a.receivePromotionItem,e.exClass);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:k},a.a.createElement(Wi,e),a.a.createElement(Yi,e),a.a.createElement("div",{className:Fs.a.buttonWrap},a.a.createElement("div",{className:g,onClick:function(){n&&b()}},i,!!s&&a.a.createElement("div",{className:Fs.a.hasNum},s)))),a.a.createElement(Ms,{ref:t,data:{mallId:y,couponId:p,sceneId:1006,merchantTag:3},onShowFail:function(e){null===e||void 0===e||e.errorCode},onSuccess:function(e){v&&v({data:{promotion_identity_vo:e.promotionIdentityVo},index:o})}}))},Hs=n("0y1f"),Vs=n.n(Hs),Gs=Oi.getInstance();function Ws(e){var t=e.promotionButtonDesc,n=x()(t,"display_items.0")||{},r=n.font_color,o=n.text,i={color:r};return a.a.createElement("span",{style:i},o)}var qs=function(e){var t=Object(r.useRef)(null),n=L()(Vs.a.disablePromotionItem,e.exClass),o=e.isRetrieve,i=e.isBestJusableOrRetrieve,s=e.displayType,c=e.extraDisplayMap,u=e.receiveCallback,p=c||{},m=p.batch_sn,f=p.is_brand_vip_coupon,h=p.is_fav_coupon,v=p.need_join_brand_vip,g=p.promotion_button_desc,y=p.mall_id,_=!1,b=function(){var e=d()(l.a.mark(function e(){var n,r,a,o,i,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=2;break}return e.abrupt("return");case 2:if(_=!0,e.prev=3,!f||!v){e.next=7;break}return t.current&&t.current.show(),e.abrupt("return");case 7:if(!h){e.next=13;break}return e.next=10,mi({batchSn:m,likeFrom:101003,merchantTag:52,mallId:y});case 10:Gs.receiveLikeCouponInfo(),e.next=18;break;case 13:return e.next=15,si({batchSn:m,merchantTag:52,mallId:y});case 15:n=e.sent,(r=x()(n,"higher_priority_take_toast"))?Object(ls.a)(r,{style:{whiteSpace:"pre-line"},ContainerProps:{style:{height:"85%",top:"auto"}}}):Oe("领取成功");case 18:u(),lo({groupId:"20203",customTags:{event:"receivePromotion"}}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),(a=e.t0.errorCode)&&((o=wi[a])?(Oe(o[0]),u()):(i=e.t0.response||{},s=i.data,c=s&&s.error_toast||ki.LANE_TRY_LATER,Oe(c)));case 26:return e.prev=26,_=!1,e.finish(26);case 29:case"end":return e.stop()}},e,null,[[3,22,26,29]])}));return function(){return e.apply(this,arguments)}}(),k=null;if(o){var I=L()(Vs.a.btn,Vs.a[Ii[s]]);k=a.a.createElement("div",{className:Vs.a.buttonWrap,onClick:b},a.a.createElement("div",{className:I},a.a.createElement(Ws,{promotionButtonDesc:g})))}return a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:n},a.a.createElement(Wi,e),a.a.createElement(Yi,tt()({},e,{isDisable:!i,ruleDisplayName:null})),!o&&g&&a.a.createElement("div",{className:Vs.a.promotionButtonDesc},a.a.createElement(Ws,{promotionButtonDesc:g})),k),a.a.createElement(Ms,{ref:t,data:{mallId:y,couponId:m,sceneId:1006,merchantTag:3},onShowFail:function(e){return null},onSuccess:function(e){return null===u||void 0===u?void 0:u()}}))},Qs=n("cIxk"),Ys=n.n(Qs);var Xs=function(e){var t=L()(Ys.a.dontUseItem,e.exClass);return a.a.createElement("div",{className:t,onClick:e.onSelect,"aria-label":"暂不使用优惠",role:"button"},a.a.createElement("div",{className:Ys.a.label},"暂不使用优惠"),a.a.createElement(Zi,tt()({style:{height:".37rem"}},e)))},Js=n("ooc8"),Ks=n.n(Js),Zs=function(e){var t=e.fullBackName,n=e.rewardStatus,r=e.processStatusDesc,o=e.processPercentStr,i=e.currentConsumeAmount,s=e.needAmount,c=e.rewardAmount,l=e.rewardImgUrl,u=e.rewardName,d=e.exClass,p=L()(Ks.a.redPacketItem,d,We()({},Ks.a.reward,n));return a.a.createElement("div",{className:p},a.a.createElement("div",{className:Ks.a.redPacket,style:{backgroundImage:l&&"url(".concat(l,")")||"none"},"aria-label":"¥".concat(c).concat(u),role:"img"},a.a.createElement("div",{className:Ks.a.couponAmount,"aria-hidden":!0},a.a.createElement("span",{className:Ks.a.priceIcon},"¥"),a.a.createElement("span",{className:Ks.a.num},c)),a.a.createElement("div",{className:Ks.a.couponTag,"aria-hidden":!0},a.a.createElement("div",{className:Ks.a.couponTagTxt},u))),a.a.createElement("div",{className:Ks.a.redPacketInfo},a.a.createElement("div",{className:Ks.a.fullBackName},t),a.a.createElement("div",{className:Ks.a.processStatusDesc,"aria-label":r.map(function(e){return e.text}).join(""),role:"img"},r.map(function(e,t){return a.a.createElement("span",{key:t,"aria-hidden":!0,style:{color:e.font_color,fontSize:e.font_size/100+"rem"}},e.text)})),!n&&a.a.createElement("div",{className:Ks.a.progress},a.a.createElement("div",{className:Ks.a.progressBarOuter},a.a.createElement("div",{className:Ks.a.progressBarInner,style:{width:i/s*100+"%"}})),o)))},$s=n("KZJt"),ec=n.n($s),tc=function(e){var t=e.list;return a.a.createElement(a.a.Fragment,null,t&&t.length>0&&t.map(function(e,t){var n={color:e.font_color,background:e.bg_color},r=L()(ec.a.displayItem,ec.a["promotion".concat(e.display_type)]);return 100===e.display_type?a.a.createElement("img",{style:{height:e.height/100+"rem",width:e.width/100+"rem"},src:Object(Ot.b)(e.url)}):a.a.createElement("span",{key:t,className:r,style:n},e.text)}))},nc=n("xFQA"),rc=n.n(nc),ac=oi.getInstance(),oc=Oi.getInstance(),ic=function(e){var t=e.promotionLists,n=e.disableForceUseBestPromotion,o=Object(r.useState)(!0),i=T()(o,2),s=i[0],c=i[1],u=Object(r.useState)(!0),p=T()(u,2),m=p[0],f=p[1],h=t||{},v=h.shopPromotionTitle,g=h.retrievableShopPromotions,y=h.commonShopPromotions,_=h.usableShopPromotions,b=h.unusableShopPromotions,k=h.platformPromotionTitle,I=h.platformPromotionExtraDisplay,S=h.usablePlatformPromotions,w=h.unusablePlatformPromotions,C=h.otherUnusablePlatformPromotions,E=h.selectedShopPromotion,P=h.mallFullBackDetails,N=h.crossFullBackDetails,O=h.selectedPlatformPromotion,D=h.postagePromotion,A=!Zn()(_)||!Zn()(b),j=!Zn()(S)||!Zn()(w),R=x()(e,"ocData"),M=x()(R,"goodsInfo.mallId"),B=x()(R,"goodsInfo.goodsId"),U=x()(R,"goodsInfo.skuId"),z=x()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},H=x()(z,"floatTitleDisplay"),V=x()(z,"floatCategoryDisplay"),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length>2?[]:t.slice(0,2-e.length)},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length+t.length>2},q=function(){var e=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ac.needReload=!0,e.next=3,oc.fetchPromotionList({refreshAfterReceive:!0});case 3:(t=e.sent)&&!Zn()(t.retrievableShopPromotions)&&(t.retrievableShopPromotions=g),t&&oc.setPromotionLists(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=t.index,a=t.buttonText,ac.needReload=!0,o=g[r],i=n.usable_count_text,s=o.canTakenCount-1,c=s>0?ki.LANG_COUPON_TAKEN_MORE:ki.LANG_COUPON_DISABLE,u={canTakenCount:s,buttonDesc:c},a&&(u={canTakenCount:0,buttonDesc:a}),i&&(u.buttonSubDesc=i),Object.assign(o,u),o.displayType===_i&&(d=g.filter(function(e){return e.displayType===_i})).length>1&&d.forEach(function(e){e.canTakenCount>0&&2===e.takeStatus&&(e.buttonDesc=ki.LANG_COUPON_TAKEN)}),e.next=13,oc.fetchPromotionList({refreshAfterReceive:!0});case 13:(p=e.sent)&&!Zn()(p.retrievableShopPromotions)&&(p.retrievableShopPromotions=g),p&&oc.setPromotionLists(p);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.selectedShopPromotion,r=t.selectPlatformPromotion,e.next=3,oc.fetchPromotionList({selectedShopPromotion:n,selectPlatformPromotion:r});case 3:(a=e.sent)&&oc.setPromotionLists(a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:rc.a.promotionList},a.a.createElement(Hi,{titleVo:v,noBorder:!A}),a.a.createElement("div",{className:rc.a.postagePromotion},a.a.createElement(tc,{list:D})),!n&&!Zn()(y)&&(s?y.slice(0,2):y).map(function(e,t){return a.a.createElement(qs,tt()({exClass:rc.a.promotionItem,key:t,receiveCallback:q},e))}),!n&&(null===y||void 0===y?void 0:y.length)>2&&a.a.createElement("div",{className:L()(rc.a.foldItem,rc.a.promotionItem,We()({},rc.a.foled,s)),onClick:function(){return c(!s)}},a.a.createElement("span",null,a.a.createElement("i",null,s?"展开更多店铺优惠":"收起"),a.a.createElement(F,null))),n&&!Zn()(_)&&(s?_.slice(0,2):_).map(function(t){return t.buttonDesc?a.a.createElement(zs,tt()({exClass:rc.a.promotionItem,goodsInfo:{goodsId:B,skuId:U,mallId:M},key:t.promotionUniqueNo,receiveCallback:function(e){var t=e.data;ac.needReload=!0,t.promotion_identity_vo&&(lo({groupId:"20203",customTags:{event:"selectShopPromotion"}}),Y({selectedShopPromotion:{promotionIdentityVo:t.promotion_identity_vo},selectPlatformPromotion:O||oc.notUsePromotion.platform}))},canTake:!0},t,e)):a.a.createElement(ts,tt()({exClass:rc.a.promotionItem,key:t.promotionUniqueNo},t,e,{selected:!!t.checkStatus,onSelect:d()(l.a.mark(function e(){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.batchSn){e.next=23;break}if(e.prev=1,!t.isFavCoupon){e.next=8;break}return e.next=5,mi({batchSn:t.batchSn,likeFrom:101003,merchantTag:52,mallId:M});case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,si({batchSn:t.batchSn,merchantTag:52,mallId:M});case 10:n=e.sent;case 11:lo({groupId:"20203",customTags:{event:"receivePromotion"}}),n.promotion_identity_vo&&(ac.needReload=!0,lo({groupId:"20203",customTags:{event:"selectShopPromotion"}}),Y({selectedShopPromotion:{promotionIdentityVo:n.promotion_identity_vo},selectPlatformPromotion:O||oc.notUsePromotion.platform})),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(1),r=e.t0.response,a=(r||{}).data,o=x()(a,"error_toast")||"领取优惠失败，请重试",Object(oe.a)(o);case 21:e.next=24;break;case 23:t.checkStatus?Y({selectedShopPromotion:oc.notUsePromotion.shop,selectPlatformPromotion:O||oc.notUsePromotion.platform}):(lo({groupId:"20203",customTags:{event:"selectShopPromotion"}}),Y({selectedShopPromotion:t,selectPlatformPromotion:O||oc.notUsePromotion.platform}));case 24:case"end":return e.stop()}},e,null,[[1,15]])}))}))}),n&&!Zn()(b)&&(s?G(_,b):b).map(function(e,t){return a.a.createElement(cs,tt()({onSelect:function(){Object(oe.a)("此优惠暂不满足使用条件")},exClass:rc.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail,disableForceUseBestPromotion:!0},e))}),n&&W(_,b)&&a.a.createElement("div",{className:L()(rc.a.foldItem,rc.a.promotionItem,We()({},rc.a.foled,s)),onClick:function(){return c(!s)}},a.a.createElement("span",null,a.a.createElement("i",null,s?"展开更多店铺优惠":"收起"),a.a.createElement(F,null))),n&&!Zn()(_)&&a.a.createElement(Xs,{exClass:rc.a.promotionItem,selected:!E,onSelect:function(){E&&Y({selectedShopPromotion:oc.notUsePromotion.shop,selectPlatformPromotion:O||oc.notUsePromotion.platform})}})),(j||k)&&a.a.createElement("div",{className:rc.a.promotionList},a.a.createElement(Hi,{titleVo:k,noBorder:!j&&!I}),I&&a.a.createElement(Hi,{titleVo:I,noBorder:!j}),!Zn()(S)&&(m?S.slice(0,2):S).map(function(t,n){return a.a.createElement(ts,tt()({exClass:rc.a.promotionItem,key:n},t,e,{selected:!!t.checkStatus,onSelect:d()(l.a.mark(function e(){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.batchSn){e.next=17;break}return e.prev=1,e.next=4,hi({batchSn:t.batchSn,merchantTag:52});case 4:n=e.sent,lo({groupId:"20203",customTags:{event:"receivePromotion"}}),n.promotion_identity_vo&&(ac.needReload=!0,lo({groupId:"20203",customTags:{event:"selectPlatformPromotion"}}),Y({selectedShopPromotion:E||oc.notUsePromotion.shop,selectPlatformPromotion:{promotionIdentityVo:n.promotion_identity_vo}})),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),r=e.t0.response,a=(r||{}).data,o=x()(a,"error_toast")||"领取优惠失败，请重试",Object(oe.a)(o);case 15:e.next=18;break;case 17:t.checkStatus?Y({selectedShopPromotion:E||oc.notUsePromotion.shop,selectPlatformPromotion:oc.notUsePromotion.platform}):(lo({groupId:"20203",customTags:{event:"selectPlatformPromotion"}}),Y({selectedShopPromotion:E||oc.notUsePromotion.shop,selectPlatformPromotion:t}));case 18:case"end":return e.stop()}},e,null,[[1,9]])}))}))}),!Zn()(w)&&(m?G(S,w):w).map(function(e,t){var r=n?cs:qs;return a.a.createElement(r,tt()({onSelect:function(){Object(oe.a)("此优惠暂不满足使用条件")},exClass:rc.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e))}),W(S,w)&&a.a.createElement("div",{className:L()(rc.a.foldItem,rc.a.promotionItem,We()({},rc.a.foled,m)),onClick:function(){return f(!m)}},a.a.createElement("span",null,a.a.createElement("i",null,m?"展开更多平台优惠":"收起"),a.a.createElement(F,null))),!Zn()(S)&&a.a.createElement(Xs,{exClass:rc.a.promotionItem,selected:!O,onSelect:function(){O&&Y({selectedShopPromotion:E||oc.notUsePromotion.shop,selectPlatformPromotion:oc.notUsePromotion.platform})}})),n&&!Zn()(g)&&a.a.createElement("div",{className:rc.a.promotionList},a.a.createElement(Hi,{title:"领取更多优惠"}),g.map(function(t,n){var r=t.takeStatus===bi&&t.canTakenCount;return a.a.createElement(zs,tt()({exClass:rc.a.promotionItem,goodsInfo:{goodsId:B,skuId:U,mallId:M},index:n,key:t.batchSn,receiveCallback:Q,canTake:r},t,e))})),!Zn()(C)&&C.map(function(e,t){var r=n?cs:qs;return a.a.createElement(r,tt()({onSelect:function(){Object(oe.a)("此优惠暂不满足使用条件")},isRuleDisable:1,exClass:rc.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e))}),!Zn()(V)&&a.a.createElement("div",{className:rc.a.promotionList},a.a.createElement(Hi,{titleVo:H,title:"支付优惠"}),a.a.createElement("div",{className:rc.a.float,"aria-label":V&&V.reduce(function(e,t){return 100===t.display_type?e:e+t.text},""),role:"button"},V&&V.map(function(e,t){var n={color:e.font_color,background:e.bg_color},r=L()(rc.a.displayItem,rc.a["promotion".concat(e.display_type)]);return 100===e.display_type?a.a.createElement("img",{style:{height:e.height/100+"rem",width:e.width/100+"rem"},src:Object(Ot.b)(e.url)}):a.a.createElement("span",{key:t,className:r,style:n},e.text)}))),(!Zn()(P)||!Zn()(N))&&a.a.createElement("div",{className:rc.a.promotionList},a.a.createElement(Hi,{title:"拼单返现"}),!Zn()(P)&&P.map(function(e,t){return a.a.createElement(Zs,tt()({key:t,exClass:rc.a.promotionItem},e))}),!Zn()(N)&&N.map(function(e,t){return a.a.createElement(Zs,tt()({key:t,exClass:rc.a.promotionItem},e))})))},sc=oi.getInstance(),cc=Oi.getInstance();function lc(e){var t=e.promotionLists,n=Object(r.useContext)(Mi).glide,o=(t||{}).promotionDisplay,i=Object(r.useRef)();Object(r.useEffect)(function(){var e=i&&i.current;return Object(ke.a)(e),function(){Object(ke.b)()}},[]);var s=t||{},c=s.usableShopPromotions,u=s.usablePlatformPromotions,p=s.selectedShopPromotion,m=s.selectedPlatformPromotion,f=s.notHasSelectablePromotion,h=function(){var t=d()(l.a.mark(function t(){var r,a,o,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!cc.isFetching){t.next=2;break}return t.abrupt("return");case 2:return r=x()(e,"ocData"),a=x()(r,"goodsInfo.mallId"),o={use_platform_promotion_request:{not_use:!1,promotion_identity_vo:null},use_shop_promotion_requests:[]},i={promotion_identity_vos:[],mall_id:a,not_use:!1},Zn()(c)||f||(p?i.promotion_identity_vos=[p.promotionIdentityVo]:i.not_use=!0,o.use_shop_promotion_requests=[i]),Zn()(u)||(m?o.use_platform_promotion_request.promotion_identity_vo=m.promotionIdentityVo:o.use_platform_promotion_request.not_use=!0),t.next=10,sc.refresh({promotion_vo:o});case 10:n();case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),v=L()(rc.a.titleContainer,We()({},rc.a.hasBorder,Zn()(o)));return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:v},a.a.createElement("div",{className:rc.a.title},a.a.createElement("span",{className:rc.a.text},"优惠详情"),a.a.createElement("div",{className:rc.a.close,onClick:h},a.a.createElement("div",{className:rc.a.closeIcon,role:"button","aria-label":"关闭优惠浮层"})))),!Zn()(o)&&a.a.createElement("div",{className:rc.a.promotionDisplay},o.map(function(e,t){var n={color:e.font_color,fontSize:e.font_size};return a.a.createElement("span",{key:t,style:n},e.text)})),a.a.createElement("div",{className:"".concat(rc.a.content," ").concat(Zn()(o)?"":rc.a.hasPromotionDisplay),ref:i},a.a.createElement(ic,e)),a.a.createElement("div",{className:rc.a.bottom,"aria-label":"确认",role:"button"},a.a.createElement("div",{className:rc.a.btn,onClick:h,"aria-hidden":!0},"确认")))}var uc=function(e){var t=Object(r.useState)(!1),n=T()(t,2),o=n[0],i=n[1],s=Object(r.useState)({}),c=T()(s,2),l=c[0],u=c[1];Object(r.useEffect)(function(){cc.initPromotionFunc({togglePromotionPopupVisibleFunc:function(e){return i(e)},setPromotionListsFunc:function(e){return u(e)}})},[]);return o?a.a.createElement(Fi,{title:"优惠详情",onCloseIconClicked:function(){i(!1)},contentId:"promotion-popup"},a.a.createElement(lc,tt()({promotionLists:l},e))):null},dc=n("JiL4"),pc=n.n(dc),mc=Oi.getInstance(),fc=oi.getInstance();function hc(e){var t=e.displayItems,n=void 0===t?[]:t,r=e.hasDdpayPromotion,o=e.goodsId;return Zn()(n)?null:n.map(function(e,t){var n={color:e.font_color,background:e.bg_color},i=L()(pc.a.displayItem,pc.a["promotion".concat(e.display_type)]),s=r&&3===e.display_type?{page_el_sn:6127854,goods_id:o}:{};return a.a.createElement($e.a,{key:t,trackingInfo:s},a.a.createElement("span",{className:i,style:n},e.text))})}var vc=function(e){var t,n=e.selectedSkuID,r=e.isMorganFetching,o=x()(e,"ocData.goodsInfo.goodsId"),i=x()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},s=x()(e,"ocData.promotionInfo.retrievePromotion")||{},c=n&&!r&&i.clickable,u=i.categoryName,p=i.categoryDisplay,m=i.discountPayChannel,f=i.discountPayCategoryDisplay,h=i.defaultCategoryDisplay,v=i.switchPaymentMethodToast,g=(x()(e,"ocData.promotionInfo.platformRetrievePromotion")||{}).promotionStatus,y=x()(e,"ocData.selectedChannel"),_=s.promotionStatus,b=_===ma&&m&&y&&y.channelName!==m;if(n&&Zn()(p)||!n&&Zn()(h))return null;t=n&&!r?m&&y&&y.channelName===m&&f?f:p:h;var k=function(){var e=d()(l.a.mark(function e(){var t,n,r,a,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:if(t=_===ma&&m&&y&&y.channelName!==m,g!==fa||!t){e.next=6;break}return mc.reloadToDaCu(),e.abrupt("return");case 6:if(g!==fa){e.next=9;break}return mc.batchAutoTakeCouponAndReloadToDaCu(),e.abrupt("return");case 9:if(!t){e.next=18;break}return e.next=12,mc.ddpPromotionClick();case 12:return e.next=14,fc.selectedChannel({channelName:m});case 14:return fc.refreshAfterSelectedChannel(),Oe(v||"已切换为多多支付付款",{duration:3}),Object(P.b)({page_el_sn:"6127854",op:"click",goods_id:o}),e.abrupt("return");case 18:return e.next=20,mc.autoTakeCouponOnPromotionCellClickV2();case 20:if(!(n=e.sent)||!n.blockPopup){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,mc.fetchPromotionList();case 25:r=e.sent,i=(a=mc||{}).togglePromotionPopupVisible,s=a.setPromotionLists,r&&(lo({groupId:"20203",customTags:{event:"showPromotionPopup"}}),s&&s(r),setTimeout(function(){i&&i(!0)},0));case 28:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),I=L()(pc.a.stripe,We()({},pc.a.hasArrow,c||!1)),S=L()(pc.a.desc,We()({},pc.a.hasArrow,c||!1));return a.a.createElement("div",{className:pc.a.promotionCell,"data-active":c?"cell-white":null,"aria-label":function(){var e,n=u;return(null===(e=t)||void 0===e?void 0:e.length)>0&&t.forEach(function(e){return n+=e.text}),n}(),role:"img"},a.a.createElement("div",{className:I,onClick:k,"aria-hidden":!0},a.a.createElement("span",null,u),a.a.createElement("span",{className:S},a.a.createElement(hc,{displayItems:t,hasDdpayPromotion:b,goodsId:o}),c&&a.a.createElement(F,null))))},gc=n("YU58"),yc=n.n(gc),_c=function(e){var t=e.tag,n=e.name,r=e.goodsImg,o=e.deviceType,i=e.specs,s=e.onDescClick,c=e.recycleOrderSubTitle,l=e.bottomTag,u="old"===o;return a.a.createElement("div",{className:yc.a.deviceInfo},a.a.createElement("div",{className:yc.a.deviceImg},r&&a.a.createElement(it.a,{src:Object(Ot.b)(r)}),a.a.createElement("span",{className:yc.a.tag},t),u&&l&&a.a.createElement("span",{className:yc.a.bottomTag},l)),a.a.createElement("div",{className:yc.a.info},a.a.createElement("div",{className:yc.a.name},n),u&&c&&c.length>0&&a.a.createElement("div",{className:yc.a.subTitle},c.map(function(e,t){var n={fontSize:e.fontSize/100+"rem",color:e.fontColor};return a.a.createElement("span",{key:t,style:n},e.text)})),a.a.createElement("div",{className:yc.a.specsInfo,onClick:s},a.a.createElement("span",{className:yc.a.spec},i),a.a.createElement("span",{className:yc.a.changeText},"修改"),a.a.createElement("span",{className:yc.a.arrow},a.a.createElement(F,null)))))},bc=n("muwb"),kc=n.n(bc),Ic=Oi.getInstance(),Sc=function(e){var t,n=e.currentSelect,r=e.ocData,o=(r||{}).goodsInfo;o.specs&&o.specs.length>0?t=o.specs.reduce(function(e,t){return e+t.spec_value},""):n&&(t=Object.keys(n).reduce(function(e,t){return e+n[t]},""));var i=x()(r,"promotionInfo.totalDiscountDisplay"),s=x()(r,"goodsInfo.unitPrice"),c=(x()(e,"ocData.promotionInfo.totalPromotionsConsult")||{}).clickable,u=function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ic.autoTakeCouponOnPromotionCellClick();case 4:if(!(t=e.sent)||!t.blockPopup){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Ic.fetchPromotionList();case 9:n=e.sent,a=(r=Ic||{}).togglePromotionPopupVisible,o=r.setPromotionLists,n&&(lo({groupId:"20203",customTags:{event:"showPromotionPopup"}}),o&&o(n),setTimeout(function(){a&&a(!0)},0));case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),p=a.a.createElement(a.a.Fragment,null,i&&i.length>0&&i.map(function(e,t){var n=L()(kc.a.promotion,kc.a["promotion".concat(e.display_type)]);return a.a.createElement("span",{key:t,className:n,style:{height:e.height?e.height/100+"rem":null,lineHeight:e.height?e.height/100+"rem":null,fontSize:e.font_size?e.font_size/100+"rem":null,color:e.font_color,backgroundColor:e.bg_color}},e.text)})),m=a.a.createElement("div",{className:kc.a.nameArea},a.a.createElement("span",{className:kc.a.name},o.name),a.a.createElement("span",{className:kc.a.price,onClick:u},i&&i.length>0?a.a.createElement(a.a.Fragment,null,p):a.a.createElement("span",{className:kc.a.ocPrice},"¥",s),c&&a.a.createElement(F,null)));return a.a.createElement(_c,{goodsImg:o.thumbUrl,tag:"新机",name:m,goodsNumber:o.goodsNumber,specs:t,deviceType:"new",onDescClick:e.onDescClick})},wc=n("4fGO"),xc=n("2Pqc"),Cc=n.n(xc),Ec=function(e){var t=x()(e.ocData,"promotionInfo.tradeInInfo"),n=x()(t,"evaluationTotalAmount"),r=x()(t,"tips"),o=x()(t,"tipsTitle"),i=x()(t,"tags.0.text"),s=x()(t,"tradeInOrderInfo.recycleOrderSubTitle.displayItems"),c=r,l=function(){Object(wc.a)({title:o,confirmButtonLabel:"知道了",ContentProps:{className:Cc.a.questionDialog},text:a.a.createElement("div",{className:Cc.a.alertList},c.map(function(e,t){return a.a.createElement("div",{className:Cc.a.question,key:t},e)}))})},u=a.a.createElement("div",{className:Cc.a.nameArea},a.a.createElement("span",{className:Cc.a.name},t.recycleProductName),a.a.createElement("span",{className:Cc.a.text},"可换"),a.a.createElement("span",{className:Cc.a.price},"¥",n&&Object(Be.b)(n)),a.a.createElement("span",{className:Cc.a.questionIcon,onClick:l},a.a.createElement(G,null)));return a.a.createElement($e.a,{trackingInfo:{page_el_sn:5960463,op:"impr",goods_id:e.goods.goodsID}},a.a.createElement(_c,{goodsImg:t.recycleProductUrl,tag:"旧机",name:u,specs:t.recycleSkuSpec,evaluationAmount:t.evaluationAmount,deductAmount:t.deductAmount,estimateSubsidy:t.estimateSubsidy,evaluationRemainingBalance:t.evaluationRemainingBalance,deviceType:"old",onDescClick:e.onDescClick,onQuestionClick:l,bottomTag:i,recycleOrderSubTitle:s}))},Pc=n("DdEg"),Nc=n.n(Pc),Oc=0,Dc=1,Tc=function(e){var t=x()(e,"ocData.selectedChannel",{}),n=x()(t,"payButtonContent"),r=x()(e,"ocData.payChannelList"),o=x()(t,"skuPayDescription"),i=x()(e,"selectedSkuID"),c=x()(e,"goodsNumber"),l=x()(e,"styleStatus"),u=x()(e,"changeToGroupBuy"),d=x()(e,"setSkuStyleStatus"),p=x()(e,"group"),m=x()(e,"goods"),f=x()(e,"skuInfos"),h=x()(e,"useNormalSkuData"),v=x()(e,"oldForNewSelected"),g=x()(e,"ocData.promotionInfo.tradeInInfo"),y=x()(e,"hidePayHint"),_=x()(t,"creditCardTermIndex"),b=n,k=o;if(t&&"DUODUOPAY_INSTAL"===t.channelName&&_>=0){var I=x()(t,"creditCardVo.recommendCardVo.creditInstallments"),S=x()(I,"".concat(_,".payButtonContent")),w=x()(I,"".concat(_,".skuPayDescription"));S&&S.length>0&&(b=S),w&&w.length>0&&(k=w)}var C,E={page_el_sn:4259117,op:"impr",goods_id:e.goods.goodsID},P=k&&k.length>0&&k.reduce(function(e,t){return e+(t.display_type===Oc&&t.text&&t.text.length?t.text.length:0)},0);C=P<24?"0.14rem":P<26?"0.13rem":"0.12rem";return a.a.createElement(a.a.Fragment,null,!y&&a.a.createElement("div",{className:Nc.a.payHint,"aria-label":function(){var e;return(null===(e=k)||void 0===e?void 0:e.length)>0?k.reduce(function(e,t){return t.display_type===Oc?e+t.text:e},""):"当前使用".concat(t.name,"，切换支付方式")}(),role:"button",onClick:function(){Le({page_el_sn:4259116,op:"click",goods_id:e.goods.goodsID},function(){!r||r.length<1||(e.onClickPreCheck?e.onClickPreCheck()&&e.showPaymentList&&e.showPaymentList():e.showPaymentList&&e.showPaymentList())})}},t&&(k?function(){var e;return(null===(e=k)||void 0===e?void 0:e.length)>0?a.a.createElement("div",{className:Nc.a.payText,"aria-hidden":!0},k.map(function(e,t){var n;switch(e.display_type){case Oc:return n={fontSize:C,color:e.font_color},e.text&&a.a.createElement("span",{key:t,style:n},e.text);case Dc:return n={height:e.height/100+"rem",width:e.width/100+"rem",marginLeft:"0.04rem",marginRight:"0.04rem"},a.a.createElement("img",{src:e.url,key:t,style:n})}})):null}():a.a.createElement(a.a.Fragment,null,"当前使用",t.name,"，切换支付方式")),r&&r.length>1&&a.a.createElement(F,null)),a.a.createElement(En,{skuDirectOrder:!0,changeToGroupBuy:u,setSkuStyleStatus:d,styleStatus:l,group:p,goods:m,selectedSkuID:i,skuInfos:f,goodsNumber:c}),function(){var n,r,o,c;return t&&i&&!h&&b&&b.length>0?v&&2===v.type&&!g?a.a.createElement($e.a,{trackingInfo:s()({},E,{type:2})},a.a.createElement("div",{className:L()(Nc.a.bottom,(c={},We()(c,Nc.a.startHide,1===l),We()(c,Nc.a.startDisplay,2===l),c)),"data-active":"red","aria-label":v.pay_button_desc||"通过“以旧换新”购买新机",role:"button",onClick:function(){Le({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:2},function(){e.onClick&&e.onClick()})}},v.pay_button_desc||"通过“以旧换新”购买新机")):a.a.createElement($e.a,{trackingInfo:s()({},E,{op:"impr",type:g?5:1})},a.a.createElement("div",{className:L()(Nc.a.bottom,(r={},We()(r,Nc.a.startHide,1===l),We()(r,Nc.a.startDisplay,2===l),r)),"data-active":"red","aria-label":null===(o=b)||void 0===o?void 0:o.reduce(function(e,t){return e+t.text},""),role:"button",onClick:function(){Le({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:g?5:1},function(){e.onClick&&e.onClick()})}},b.map(function(e,t){return a.a.createElement("span",{key:t},e.text)}))):a.a.createElement($e.a,{trackingInfo:s()({},E,{op:"impr",type:1})},a.a.createElement("div",{className:L()(Nc.a.bottom,(n={},We()(n,Nc.a.startHide,1===l),We()(n,Nc.a.startDisplay,2===l),n)),"data-active":"red",onClick:function(){Le({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:1},function(){e.onClick&&e.onClick()})}},"立即支付"))}())},Ac=n("Z4L4"),jc=n.n(Ac);function Rc(e){return e.selected?a.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M436.517 725.285 256 545.06l61.586-61.44 115.42 115.273 269.531-300.179 64.878 58.003z",fill:"#9c9c9c"}),a.a.createElement("path",{d:"M511.707 1024C229.742 1024 .366 794.331.366 512S229.669 0 511.707 0c281.966 0 511.415 229.669 511.415 512s-229.449 512-511.415 512zm.147-960C265.07 64.073 64.366 264.997 64.366 512S265.07 960 511.854 960s447.488-200.923 447.488-448S758.638 64 511.854 64z",fill:"#9c9c9c"})):a.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#9c9c9c"},a.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2zm0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z"}))}var Lc=function(e){var t=L()(jc.a.selectIcon,We()({},jc.a.selected,e.selected));return a.a.createElement("div",{className:t,style:e.style},a.a.createElement(Rc,e))},Mc=n("GANf"),Bc=n.n(Mc),Fc=oi.getInstance(),Uc=function(e){var t,n,o,i=Object(r.useState)(!0),s=T()(i,2),c=s[0],l=s[1],u=x()(e.ocData,"cellBarVo.protocolV2"),d=x()(e.ocData,"goodsInfo.skuId"),p=x()(e.ocData,"goodsInfo.groupId"),m=x()(e.ocData,"goodsInfo.goodsNumber"),f=null===(t=e.goods)||void 0===t?void 0:null===(n=t.ui)||void 0===n?void 0:null===(o=n.sku_section)||void 0===o?void 0:o.hai_tao_antiepidemic;return a.a.createElement("div",{className:Bc.a.agreement,onClick:function(){l(!c),Fc.isSelectedAgreement=!c},style:f?{marginTop:"-0.04rem"}:{}},a.a.createElement(Lc,{selected:c}),u&&!!u.length&&u.map(function(e,t){return a.a.createElement("span",{style:{color:e.color},key:t,onClick:function(t){t.stopPropagation(),t.preventDefault(),e.url&&function(e){var t=Object(ge.a)(),n=t.isNativePlatform,r=t.isTinyNativePlatform;Ia.a.replaceQuery({sku_id:d,goods_number:m,show_sku_selector:n||r?void 0:1,goodsList:JSON.stringify([{group_id:p,group_order_id:Fc.groupOrderId,group_type:Fc.groupType}])},function(){Ia.a.uniformForward(e)})}(e.url)}},e.title)}))},zc=n("sZZj"),Hc=n.n(zc);function Vc(e){var t,n,r=e.goods,o=null===r||void 0===r?void 0:null===(t=r.ui)||void 0===t?void 0:null===(n=t.sku_section)||void 0===n?void 0:n.hai_tao_antiepidemic;if(!o)return null;var i=o.txt,s=o.color;return a.a.createElement("div",{style:{color:s},className:Hc.a.haiTaoAntiepidemic},i)}var Gc,Wc=n("CzHs"),qc=n.n(Wc),Qc=function(e){var t=e.onRefresh;return a.a.createElement("div",{className:qc.a.ocRefresh},a.a.createElement("div",{className:qc.a.netIcon},a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M791.253 598.23c76.374 0 138.283 61.589 138.283 137.6 0 74.325-59.243 134.89-133.333 137.493l-4.95.085c-76.373 0-138.24-61.59-138.24-137.6 0-74.325 59.222-134.89 133.291-137.493l4.95-.086zM519.531 716.202a74.859 74.859 0 0 1 75.029 74.666 74.837 74.837 0 0 1-70.912 74.56l-4.117.107a74.859 74.859 0 0 1-75.03-74.667 74.837 74.837 0 0 1 70.912-74.56l4.118-.106zm271.722-96.64c-64.597 0-116.906 52.053-116.906 116.266 0 64.171 52.309 116.267 116.906 116.267 64.619 0 116.95-52.096 116.95-116.267 0-64.213-52.331-116.266-116.95-116.266zM519.531 737.536a53.525 53.525 0 0 0-53.696 53.333c0 29.44 24.021 53.334 53.696 53.334a53.525 53.525 0 0 0 53.696-53.334c0-29.44-24.022-53.333-53.696-53.333zm278.613 58.667c8.277 0 15.04 7.168 15.04 16.021s-6.763 16-15.061 16c-8.278 0-15.04-7.147-15.04-16s6.762-16 15.04-16zm-.064-133.611c7.808 0 14.443 6.144 14.976 13.973v2.176l-7.253 93.803c-.32 3.883-3.755 6.699-7.723 6.699a7.68 7.68 0 0 1-7.403-5.12l-.32-1.579-7.253-93.824a15.659 15.659 0 0 1 12.075-15.83l2.005-.277.896-.021zM520.448 527.424c48.576.128 97.28 13.504 140.267 40.533l10.304 6.763-4.246 3.307a201.707 201.707 0 0 0-54.72 65.834l-3.477 7.04-1.835 3.926-3.733-2.24a162.005 162.005 0 0 0-79.445-22.955l-5.888-.043a162.347 162.347 0 0 0-112.747 47.254 51.243 51.243 0 0 1-32.704 14.826l-3.584.128a51.285 51.285 0 0 1-36.288-14.954 50.901 50.901 0 0 1 0-72.256 265.067 265.067 0 0 1 181.483-77.099l6.613-.064zm-173.056 92.288a29.568 29.568 0 0 0 0 42.005c11.733 11.648 30.763 11.648 42.496 0a184.107 184.107 0 0 1 202.496-38.485l5.333 2.41 3.222-5.44a222.873 222.873 0 0 1 29.077-37.631l4.885-4.928-3.072-1.664a244.544 244.544 0 0 0-284.437 43.733zm176-273.152a446.165 446.165 0 0 1 311.85 130.133c20.054 19.947 20.054 52.267 0 72.235a51.243 51.243 0 0 1-32.703 14.827l-3.584.128a51.285 51.285 0 0 1-36.288-14.955 343.51 343.51 0 0 0-235.798-100.16l-7.338-.064c-88 0-176 33.408-243.136 100.224a51.243 51.243 0 0 1-32.704 14.827l-3.584.128a51.285 51.285 0 0 1-36.31-14.955 50.901 50.901 0 0 1 0-72.235A446.165 446.165 0 0 1 515.691 346.56h7.68zM218.859 491.797a29.568 29.568 0 0 0 0 42.006c11.733 11.669 30.762 11.669 42.496 0 142.592-141.91 373.76-141.91 516.352 0 11.733 11.669 30.784 11.669 42.496 0a29.568 29.568 0 0 0 0-42.006c-166.038-165.226-435.307-165.226-601.344 0zM519.53 165.653c160.789 0 321.578 61.035 444.266 183.126 20.054 19.946 20.054 52.266 0 72.234a51.243 51.243 0 0 1-32.725 14.827l-3.584.128a51.285 51.285 0 0 1-36.288-14.955C790.656 320.96 659.52 269.91 527.765 267.861l-8.234-.064c-134.528 0-269.035 51.072-371.67 153.216a51.243 51.243 0 0 1-32.725 14.827l-3.563.128a51.285 51.285 0 0 1-36.309-14.955 50.901 50.901 0 0 1 0-72.234C195.499 229.12 352.32 168.107 509.888 165.739l9.643-.086zM90.304 363.883a29.568 29.568 0 0 0 0 42.005c11.733 11.67 30.784 11.67 42.496 0 213.61-212.544 559.85-212.544 773.44 0 11.733 11.67 30.784 11.67 42.496 0a29.568 29.568 0 0 0 0-41.984C711.723 128 327.36 128 90.326 363.904z",fill:"#CCC"}))),a.a.createElement("div",{className:qc.a.note},"网络不太顺畅"),a.a.createElement("div",{className:qc.a.refreshBtn,onClick:t},"刷新"))},Yc=oi.getInstance(),Xc=function(e,t){return parseInt(e,10)||t},Jc=function(e,t){return(e||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?e:t},Kc=function(e,t){if(Array.isArray(e)){var n=-1,r=-1,a=null;if(e.length<=0)Yc.refresh({front_action:Po.ChangeAddress,address_id:-1});else{for(var o,i=0;i<e.length;i++){if(((o=e[i]).address_id||"").toString()===t){r=i,a=o,Yc.refresh({front_action:Po.ChangeAddress,address_id:a.address_id});break}(o.is_default||"").toString()===ha&&(n=i)}r<0&&n>=0&&(a=e[n],Yc.refresh({front_action:Po.ChangeAddress,address_id:a.address_id}))}}},Zc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kc;if(!(e.addressInfo.addressId<=0)||e.addressInfo.addressGiftStatus){var n=Object(ge.a)(),r=n.isNativePlatform,a=n.isTinyNativePlatform,o={select:1,saleRegions:e.goodsInfo.allowedRegion.split(",")||[],addressID:e.addressInfo.addressId,unreachableRec:1,costTemplateId:e.goodsInfo&&e.goodsInfo.costTemplateId+""||"",mallId:e.goodsInfo&&e.goodsInfo.mallId||"",goodsId:e.goodsInfo.goodsId||"",addressRenderExtendMap:e.addressRenderExtendMap?JSON.stringify(e.addressRenderExtendMap):void 0,goodsList:JSON.stringify([{goods_number:e.goodsInfo.goodsNumber,goods_id:e.goodsInfo.goodsId,sku_id:e.goodsInfo.skuId,group_id:e.goodsInfo.groupId,group_order_id:Yc.groupOrderId,group_type:Yc.groupType,order_extra_type:Yc.orderExtraType}])},i={sel_address_id:o.addressID,allowed_regions:o.saleRegions,allow_shipping_provinces:o.allowShippingRegions,unreachable_rec:o.unreachableRec,cost_template_id:o.costTemplateId,mall_id:o.mallId,goods_id:o.goodsId,goods_number:e.goodsInfo.goodsNumber,sku_id:e.goodsInfo.skuId,address_render_extend_map:o.addressRenderExtendMap,goods_list:o.goodsList,show_sku_selector:1,is_single_buy:+!!e.isSingleBuy,scene:"1",thumb_url:void 0},c={props:{select:o.select||0,sale_provinces:o.saleRegions||[],allow_shipping_provinces:o.allowShippingRegions||[],address_id:o.addressID||"",unreachable_rec:o.unreachableRec,cost_template_id:o.costTemplateId,mall_id:o.mallId,goods_id:o.goodsId,address_render_extend_map:o.addressRenderExtendMap,goods_list:o.goodsList,complete:function(e,n){var r=(n=n||{}).selected_address_id||"",a=n.addresses||[];!e&&n&&t(a,r)}}},l=location.pathname.match(/\/(\S*)\.html/)[1].split("/"),u=l[l.length-1],d="addresses.html";r||(d="addresses.html?"+Object(C.b)(s()({back_page:u},Object(C.g)(location.href),{},i))),Ia.a.replaceQuery({sku_id:e.goodsInfo.skuId,goods_number:e.goodsInfo.goodsNumber,show_sku_selector:r||a?void 0:1,is_single_buy:+!!e.isSingleBuy},function(){Ia.a.uniformForward(d,null,c)})}},$c=n("PJYZ"),el=n.n($c),tl=n("+qE3"),nl=n("9qmp");Gc="undefined"!=typeof window&&window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}:function(){};var rl={};rl.Funcs={Linear:function(e,t,n,r){return n*e/r+t},Cubic:{easeIn:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOut:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}},Sine:{easeIn:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOut:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOut:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t}},Quart:{easeIn:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOut:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t}}},rl.scrollLeftTo=function(e,t,n,r){(n=n||{}).attr="scrollLeft",rl.gradualChange(e,t,n,r)},rl.gradualChange=function(e,t,n,r){if(e&&void 0!==t){var a=(n=n||{}).fn||rl.Funcs.Linear,o=n.wrapValueFn||null,i=n.getValueFn||null,s=n.during||60,c=n.callbackTimeout||0,l=n.inStyle||!1,u=n.stopAdvance||0,d=n.attr;if(d){var p=0,m=0,f=function(){c?r&&setTimeout(r,c):r&&r()};!function n(){p++;var r=0;r="function"==typeof i?i(m):e[d];var c=m=a(p,r,t-r,s);"function"==typeof o&&(c=o(m,p)),l?e.style[d]=c:e[d]=c,p>s-u?f():p<s?Gc(n):f()}()}else r&&r()}};var al=function(e){return e&&e!==document.body?e.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0)},ol=function(e){for(var t=0,n=0;n<e.length;n++)e.charCodeAt(n)<0||e.charCodeAt(n)>255?t+=2:t+=1;return t},il=function e(t,n){return Object.entries(n).forEach(function(n){var r=T()(n,2),a=r[0],o=r[1];"object"===ue()(o)&&o?t[a]=e(t[a],o):t[a]=o}),t},sl=n("fkZF"),cl=n("mG/U"),ll="undefined"!=typeof window,ul=null;function dl(e){return pl.apply(this,arguments)}function pl(){return(pl=d()(l.a.mark(function e(t){var r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ll){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Promise.resolve().then(n.bind(null,"rx36"));case 4:if(r=e.sent,a=r.default,ul||!t){e.next=10;break}return e.next=9,t.get("api/server/_stm",{defaultErrorHandler:function(){}}).then(function(e){return e.server_time}).catch(function(){return 0}).then(function(e){return new a({serverTime:e})});case 9:ul=e.sent;case 10:return e.abrupt("return",ul);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ml="undefined"!=typeof window,fl={PROVINCE:1,CITY:2,DISTRICT:3},hl=["2","27","25"];function vl(e){return e=e||"",hl.includes(e.toString())}var gl=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).state={currentRegionTab:fl.PROVINCE,panelStyle:{transform:"translateY(3.86rem)"},provinceID:"0",provinceName:"",provinces:null,cityID:"0",cityName:"",cities:null,districtID:"0",districtName:"",districts:null},n.provincesLoaded=!1,n.citiesLoaded=!1,n.districtsLoaded=!1,n.regions={},n.$axiosHttp=n.createAxios(),n.selectCity=n.selectCity.bind(el()(n)),n.loadRegions=n.loadRegions.bind(el()(n)),n.onCityEdited=n.onCityEdited.bind(el()(n)),n.selectDistrict=n.selectDistrict.bind(el()(n)),n.generateHeader=n.generateHeader.bind(el()(n)),n.onCitiesLoaded=n.onCitiesLoaded.bind(el()(n)),n.selectProvince=n.selectProvince.bind(el()(n)),n.selectRegionTab=n.selectRegionTab.bind(el()(n)),n.onDistrictEdited=n.onDistrictEdited.bind(el()(n)),n.onProvinceEdited=n.onProvinceEdited.bind(el()(n)),n.onDistrictsLoaded=n.onDistrictsLoaded.bind(el()(n)),n.onProvincesLoaded=n.onProvincesLoaded.bind(el()(n)),n.setRegionUnionName=n.setRegionUnionName.bind(el()(n)),n.onAddressInfoLoaded=n.onAddressInfoLoaded.bind(el()(n)),n.hideRegionSelectorPanel=n.hideRegionSelectorPanel.bind(el()(n)),n.showRegionSelectorPanel=n.showRegionSelectorPanel.bind(el()(n)),n}return k()(t,e),h()(t,[{key:"createAxios",value:function(){var e=se.a.getInstance().getPageID();return Object(ie.a)({pageInfo:{pageId:e}})}},{key:"componentWillMount",value:function(){ml&&n("QROL")}},{key:"render",value:function(){var e=this,t=e.state.panelStyle,n=e.props.isShow;return a.a.createElement("div",{id:"region-selector",className:"edit-addr-region-selector",style:{display:n?"":"none"}},a.a.createElement("div",{className:"mars-panel-mask",onClick:function(t){return e.hideRegionSelectorPanel(t)}}),a.a.createElement("div",{id:"region-selector-panel",ref:"regionSelectorPanel",className:"mars-panel",style:t},e.generateHeader(),e.generateRegions()))}},{key:"componentDidMount",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(ke.a)(),t=this.props,n=t.addressId,r=t.communityId,a=t.extraRequestParams,e.prev=2,n){e.next=15;break}if(!r){e.next=10;break}return e.next=7,this.$axiosHttp.post("api/origenes/address/business/recommend",a,{timeout:1200});case 7:o=e.sent,e.next=13;break;case 10:return this.onAddressInfoLoaded({}),this.props.eventEmitter.emit("fillEditAddress",o),e.abrupt("return");case 13:e.next=20;break;case 15:return i=r?"api/origenes/address/business/query":"api/origenes/address/"+n,e.next=18,this.$axiosHttp.get(i,{timeout:1200,params:s()({address_id:n},a)});case 18:o=e.sent,this.onAddressInfoLoaded(o);case 20:this.props.eventEmitter.emit("fillEditAddress",o.result||o),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(2),Object(E.c)(e.t0),Object(oe.a)(Object(cl.b)(e.t0.errorCode)||"网络异常，请刷新页面后重试"),this.props.eventEmitter.emit("fillEditAddress",e.t0);case 28:case"end":return e.stop()}},e,this,[[2,23]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){var t=e.addressInfo||{},n=this.props.addressInfo||{};t.province_id+""==n.province_id+""&&t.city_id+""==n.city_id+""&&t.district_id+""==n.district_id+""||this.onAddressInfoLoaded(t)}},{key:"componentDidUpdate",value:function(e,t){var n=e.isShow;if(!n&&this.props.isShow!==n){var r=this.state.currentRegionTab;Object(ke.a)(document.getElementById("region-selector-list-".concat(r))),this.showRegionSelectorPanel()}}},{key:"generateHeader",value:function(){var e=this,t=e.state,n=t.currentRegionTab,r=t.provinceID,o=t.provinceName,i=t.cityID,s=t.cityName,c=t.districtID,l=t.districtName;return a.a.createElement("div",{className:"mars-panel-header"},a.a.createElement("div",{className:"mars-ph-province ".concat(1===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(fl.PROVINCE,t)}},r+""=="0"?a.a.createElement("span",null,"请选择"):a.a.createElement("span",null,o)),r+""!="0"&&!vl(r)&&a.a.createElement("div",{className:"mars-ph-city ".concat(2===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(fl.CITY,t)}},i+""=="0"?a.a.createElement("span",null,"请选择"):a.a.createElement("span",null,s)),i+""!="0"&&a.a.createElement("div",{className:"mars-ph-district ".concat(3===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(fl.DISTRICT,t)}},c+""=="0"?a.a.createElement("span",null,"请选择"):a.a.createElement("span",null,l)),a.a.createElement("div",{className:"mars-ph-cancel",onClick:function(t){return e.hideRegionSelectorPanel(t)}},"取消"))}},{key:"generateRegions",value:function(){var e=this,t=e.state,n=t.currentRegionTab,r=t.provinces,o=t.provinceID,i=t.cities,s=t.cityID,c=t.districts,l=t.districtID,u=1===n&&r&&r.map(function(t,n){var r=t.region_id+""==o+""?"region-active":"";return a.a.createElement("li",{key:"province-".concat(n),onClick:function(t){return e.selectProvince(t,n)}},a.a.createElement("span",{className:r},t.region_name))}),d=2===n&&i&&i.map(function(t,n){var r=t.region_id+""==s+""?"region-active":"";return a.a.createElement("li",{key:"city-".concat(n),onClick:function(t){return e.selectCity(t,n)}},a.a.createElement("span",{className:r},t.region_name))}),p=3===n&&c&&c.map(function(t,n){var r=t.region_id+""==l+""?"region-active":"";return a.a.createElement("li",{key:"city-".concat(n),onClick:function(t){return e.selectDistrict(t,n)}},a.a.createElement("span",{className:r},t.region_name))});return a.a.createElement("div",{className:"mars-regions"},1===n&&a.a.createElement("ul",{id:"region-selector-list-1",className:"mars-regions-p"},u),!vl(o)&&2===n&&a.a.createElement("ul",{id:"region-selector-list-2",className:"mars-regions-c"},d),3===n&&a.a.createElement("ul",{id:"region-selector-list-3",className:"mars-regions-d"},p))}},{key:"selectDistrict",value:function(e,t){e&&e.stopPropagation();var n=this.state.districts[t];n&&this.onDistrictEdited(n)}},{key:"onDistrictEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={districtID:t.region_id,districtName:t.region_name};this.setState(function(e){return n},function(t){e.hideRegionSelectorPanel(),e.setRegionUnionName()})}},{key:"selectCity",value:function(e,t){e&&e.stopPropagation();var n=this.state.cities[t];n&&this.onCityEdited(n)}},{key:"onCityEdited",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!t.citiesLoaded)return!1;var n=e.region_id,r=e.region_name;if(n+""!="0"){var a={cityID:n,cityName:r};t.districtsLoaded=!1,t.onDistrictsLoaded("0",[]).then(function(){t.setState(function(e){return a},function(e){t.loadRegions(fl.DISTRICT,n).then(function(e){var n=t.state.districtID;t.onDistrictsLoaded(n,e),t.selectRegionTab(fl.DISTRICT)})})})}}},{key:"onDistrictsLoaded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;t=t.regions||[];var r=this.isRegionIDContainInRegions(e,t),a={districts:t||[],districtID:r&&e||"0",districtName:r&&r.region_name||""};return new Promise(function(e,t){n.setState(function(e){return a},function(t){n.districtsLoaded=!0,e()})})}},{key:"setRegionUnionName",value:function(){var e=this.state,t=e.provinceID,n=e.cityID,r=e.districtID,a=e.provinceName,o=e.cityName,i=e.districtName,s={};t+""!="0"&&n+""!="0"&&r+""!="0"&&(s=Object.assign({},s,{currentProvinceID:t,currentCityID:n,currentDistrictID:r,currentProvinceName:a,currentCityName:o,currentDistrictName:i})),s=Object.assign({},s,{regionUnionName:a===o?"".concat(o," ").concat(i):"".concat(a,"  ").concat(o,"  ").concat(i)}),this.props.eventEmitter.emit("setRegionUnionName",s)}},{key:"selectProvince",value:function(e,t){e&&e.stopPropagation();var n=this.state.provinces[t];n&&this.onProvinceEdited(n)}},{key:"onProvinceEdited",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(t.provincesLoaded){var n=e.region_id,r=e.region_name;n+""!="0"&&(t.citiesLoaded=!1,t.districtsLoaded=!1,t.onCitiesLoaded("0",[]).then(function(){t.onDistrictsLoaded("0",[]).then(function(){var e={provinceID:n,provinceName:r};t.setState(function(t){return e},function(e){t.loadRegions(fl.CITY,n).then(function(e){var r=t.state.cityID;t.onCitiesLoaded(r,e),t.selectRegionTab(fl.CITY),vl(n)&&t.selectCity(null,0)})})})}))}}},{key:"onCitiesLoaded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=t.self_city_id,a=n.state,o=a.provinceID,i=a.cityID;t=t.regions||[],n.removeToFirst(t,r);var s=n.isRegionIDContainInRegions(e,t),c={cities:t,cityID:s&&e||(vl(o)?i:0),cityName:s&&s.region_name||""};return new Promise(function(e,t){n.setState(function(e){return c},function(t){n.citiesLoaded=!0,e()})})}},{key:"loadRegions",value:function(e,t){var n=this;return new Promise(function(e,r){if(n.regions[t])return e(n.regions[t]);n.$axiosHttp.get("api/galen/v2/regions/"+t).then(function(r){n.regions[t]=r,e(r)})})}},{key:"onAddressInfoLoaded",value:function(e){if(e){var t=this,n=e.region_id||1,r=e.province_id,a=e.city_id,o=e.district_id;t.loadRegions(fl.PROVINCE,n).then(function(e){t.onProvincesLoaded(r,e).then(function(){r+""==t.state.provinceID+""&&t.loadRegions(fl.CITY,r).then(function(e){t.onCitiesLoaded(a,e).then(function(){a+""==t.state.cityID+""?t.loadRegions(fl.DISTRICT,a).then(function(e){t.onDistrictsLoaded(o,e),t.isRegionIDContainInRegions(o,e.regions)||Object(oe.a)("请重新选择地区")}):Object(oe.a)("请重新选择地区")})})})})}}},{key:"isRegionIDContainInRegions",value:function(e,t){if(!t)return null;for(var n=0;n<t.length;++n){var r=t[n];if(r.region_id+""==e+"")return r}return null}},{key:"removeToFirst",value:function(e,t){var n=this.isRegionIDContainInRegions(t,e),r=e.indexOf(n);r<0||(e.splice(r,1),e.unshift(n))}},{key:"onProvincesLoaded",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.self_province_id;n=n.regions||[],this.removeToFirst(n,r);var a=this.isRegionIDContainInRegions(e,n),o={provinces:n,provinceID:e||"0",provinceName:a&&a.region_name||""};return new Promise(function(e,n){t.setState(function(e){return o},function(n){t.provincesLoaded=!0,e()})})}},{key:"selectRegionTab",value:function(e,t){t&&t.stopPropagation();this.setState(function(t){return{currentRegionTab:e}},function(t){Object(ke.a)(document.getElementById("region-selector-list-".concat(e)))})}},{key:"hideRegionSelectorPanel",value:function(e){e&&e.stopPropagation();var t=this,n=t.refs.regionSelectorPanel;rl.gradualChange(n,386,{wrapValueFn:function(e){return"translateY(".concat(e/100,"rem)")},getValueFn:function(e){return e||0},inStyle:!0,attr:"transform",during:25,stopAdvance:6},function(){t.props.onClose&&t.props.onClose()})}},{key:"showRegionSelectorPanel",value:function(e){e&&e.stopPropagation()&&e.preventDefault();var t=this.refs.regionSelectorPanel;rl.gradualChange(t,0,{wrapValueFn:function(e,t){return"translateY(".concat(e/100,"rem)")},getValueFn:function(e){return e||386},inStyle:!0,attr:"transform",during:25})}}]),t}(r.Component);gl.defaultProps={addressId:"",isShow:!1};var yl,_l,bl=gl;function kl(e){"function"==typeof window.scrollTo&&(clearTimeout(_l),_l=setTimeout(function(){(!document.activeElement||!["INPUT","TEXTAREA"].includes(document.activeElement.tagName))&&window.scrollTo(0,0)},10))}function Il(e){return yl||(yl=Object(ge.a)()),yl.system===Ke.b.IOS&&Object(Ke.c)(yl.systemVersion,"12.0")>=0?(e.addEventListener("focusout",kl),function(){e.removeEventListener("focusout",kl)}):function(){}}var Sl,wl={YES:!0,NO:!1},xl={43014:"请填写正确的手机号码",43016:"地址保存不成功，建议稍后重试",43017:"已达到地址上限，请先删除不常用地址",43871:"内容中含有不合适的字，无法保存",50000:"地址保存不成功，建议稍后重试"},Cl={NAME_REC:1,MOBILE_REC:2},El=n("X0J6"),Pl=function(e){var t=e.tackingParams,n=e.triangleTop,r=e.triangleTopShadow,o=e.recStyle,i=e.renderedElems;return a.a.createElement(El.a,{trackingInfo:t},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"m-addr-rec-triangle",style:n}),a.a.createElement("div",{className:"m-addr-rec-circle-cover"}),a.a.createElement("div",{className:"m-addr-rec-triangle m-addr-rec-triangle-shadow",style:r}),a.a.createElement("div",{className:"m-addr-rec",style:o},a.a.createElement("div",{className:"m-addr-rec-wrap"},i))))},Nl=a.a.memo(function(e){var t,n=e.type,r=e.recMobiles,o=void 0===r?[]:r,i=e.recCombined,s=void 0===i?[]:i,c=e.onClickHandler,l={op:"impr",page_el_sn:2584388};if(n===Cl.NAME_REC&&s&&s.length>0){t=3,l.tips_id=t;var u=s.map(function(e,n){for(var r=e.name,o=0,i=0;i<r.length;i++)/^%u/.test(escape(r[i]))?o+=.14:o+=.07;o+=1.04;var s="".concat(e.name,"，").concat(e.mobile);return o>1.99&&(s="".concat(r.slice(0,4),"...").concat(r.slice(-2),"，").concat(e.mobile)),a.a.createElement("div",{className:"m-addr-rec-text",key:n,onClick:c(n,Cl.NAME_REC,t)},s)});return a.a.createElement(Pl,{tackingParams:l,triangleTop:{top:".84rem"},triangleTopShadow:{top:".82rem",zIndex:13e3},recStyle:{height:"".concat(.46*s.length+.01*(s.length-1),"rem"),top:".89rem"},renderedElems:u})}if(n===Cl.MOBILE_REC&&o&&o.length>0){s&&s.length>0&&(t=4,l.tips_id=t);var d=o.map(function(e,n){return a.a.createElement("div",{className:"m-addr-rec-text",key:n,onClick:c(n,Cl.MOBILE_REC,t)},e)});return a.a.createElement(Pl,{tackingParams:l,triangleTop:{top:"1.32rem"},triangleTopShadow:{top:"1.3rem",zIndex:13e3},recStyle:{height:"".concat(.46*o.length+.01*(o.length-1),"rem"),top:"1.37rem"},renderedElems:d})}return null}),Ol=n("ZKQX"),Dl=(n("0+0r"),Object(ge.a)());function Tl(e){var t=e.suggestAddress,n=e.onConfirm,r=e.onCancel,o=[t.provinceName,t.cityName,t.districtName].join(" ");return a.a.createElement(us.a.Container,null,a.a.createElement(us.a.Backdrop,null),a.a.createElement(us.a.BaseDialog,{className:L()("fix-addr-dialog",Sl&&"fix-addr-dialog-ios")},a.a.createElement("div",{className:"fix-addr-dialog-desc"},"自动识别到您所在地区为",a.a.createElement("span",{className:"fix-addr-dialog-red-text"},o),"，是否修改?"),a.a.createElement("div",{className:"fix-addr-dialog-confirm",onClick:n},"修改并保存"),a.a.createElement("div",{className:"fix-addr-dialog-cancel",onClick:r},"不修改，直接保存")))}function Al(e){Object(P.b)({page_el_sn:99897,save_time:e})}function jl(e){Object(P.b)({page_el_sn:3813443,request_id:e})}function Rl(e){Object(P.b)({page_el_sn:3813444,request_id:e})}function Ll(e){Object(E.c)(new Error("edit-address: 返回的地址校验数据为空"),{payload:e})}Sl=Dl.system===Ke.b.IOS,Object(cl.c)({43010:"该地址已存在",43011:"该地址无法导入",43002:"地址错误",43017:"最多只能添加100个收货地址哦~"});var Ml,Bl,Fl,Ul,zl,Hl,Vl="undefined"!=typeof window,Gl=2600,Wl=43080,ql="网络异常，请刷新页面后重试",Ql={ContainerProps:{style:{zIndex:12e3}}};function Yl(e){Object(_e.a)(e,Ql),function(e){Object(P.c)({page_el_sn:1449048,address_alert_errorinfo:e})}(e)}Vl&&(Ml=Object(ge.a)(),Bl=Ml.system===Ke.b.IOS&&Object(Ke.c)(Ml.systemVersion,"11.0.0")>=0,zl=Ml.system===Ke.b.IOS,Fl=Ml.version&&Object(Ke.c)(Ml.version,"4.70.0")>=0,Ul=Ml.version&&Object(Ke.c)(Ml.version,"5.96.0")>=0,Hl=Ml.version&&Object(Ke.c)(Ml.version,"4.69.0")>=0);var Xl=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).cancelAnalyzeAddressDialog=function(){n.setState({showAnalyzeAddressDialog:!1})},n.confirmAnalyzeAddressDialog=function(){var e=n.state.clipBoardResult||{};n.setState({showAnalyzeAddressDialog:!1,name:e.name,mobile:e.mobile,address:e.address,currentProvinceID:e.province_id,currentCityID:e.city_id,currentDistrictID:e.district_id,currentProvinceName:e.province,currentCityName:e.city,currentDistrictName:e.district,regionUnionName:"".concat(e.province,"  ").concat(e.city,"  ").concat(e.district)}),n.regionSelectorRef.current&&n.regionSelectorRef.current.onAddressInfoLoaded&&n.regionSelectorRef.current.onAddressInfoLoaded(e)},n.onRecItemSelected=function(e,t,r){return function(a){var o=n.state,i=o.recMobiles,s=void 0===i?[]:i,c=o.recCombined,l=void 0===c?[]:c;!function(e){Object(P.b)({page_el_sn:2584388,tips_id:e})}(r);var u=null;switch(t){case Cl.NAME_REC:u=l[e],n.setState({name:u.name,mobile:u.mobile,isShowNameRec:!1});break;case Cl.MOBILE_REC:u=s[e],n.setState({mobile:u,isShowMobileRec:!1})}}},n.checkToStopClear=function(){n.shouldIgnoreClearBtnClick=!n.state.addressInputFocused},n.clearAddress=function(e){e&&e.stopPropagation(),n.shouldIgnoreClearBtnClick||(n.shouldIgnoreClearBtnClick=!n.state.addressInputFocused,n.setState({address:""}))},n.clearShortAddress=function(e){e&&e.stopPropagation(),n.setState({communityAddressResponse:s()({},n.state.communityAddressResponse,{short_address:""})})},n.dealRecheck=function(e){var t=e.name,r=e.address;Yl(e.recheck_msg),t&&t.length&&t.some(function(e){return e.sensitive&&n.setState({isNameError:!0}),e.sensitive}),r&&r.length&&r.some(function(e){return e.sensitive&&n.setState({isAddressError:!0}),e.sensitive})},n.dealCheckRegionError=function(e){var t=e.params,r=e.response;Object(P.c)({page_el_sn:3812488}),function(e){var t=e.onConfirm,n=e.onCancel,r=O()(e,["onConfirm","onCancel"]),o=Object(Ol.a)(a.a.createElement(Tl,tt()({},r,{onConfirm:function(){t&&t(),o()},onCancel:function(){n&&n(),o()}})))}({suggestAddress:{provinceName:r.suggest_province_name,cityName:r.suggest_city_name,districtName:r.suggest_district_name},onConfirm:function(){var e=d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(be.b)(),jl(r.transaction_id),e.next=4,n._saveAddress(s()({},t,{province_id:r.suggest_province_id,city_id:r.suggest_city_id,district_id:r.suggest_district_id,check_region:!1}));case 4:Object(be.a)();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){var e=d()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(be.b)(),Rl(r.transaction_id),e.next=4,n._saveAddress(s()({},t,{check_region:!1}));case 4:Object(be.a)();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()})},n.saveAddress=d()(l.a.mark(function e(){var t,r,a,o,i,s,c,u,d,p;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isSaveBtnClicked){e.next=2;break}return e.abrupt("return");case 2:if(Al(Date.now()-n.startTime),n.isSaveBtnClicked=!0,n.validAddressInfo()){e.next=7;break}return setTimeout(function(e){n.isSaveBtnClicked=!1},Gl),e.abrupt("return",!1);case 7:if(t=n.state,r=t.name,a=t.mobile,o=t.currentProvinceID,i=t.currentCityID,s=t.currentDistrictID,c=t.address,u=t.isDefault,d=t.communityAddressResponse,p=il({name:r,mobile:n.reduceMobile(a),province_id:o,city_id:i,district_id:s,address:c,community_address_request:{short_address:null===d||void 0===d?void 0:d.short_address},short_address:null===d||void 0===d?void 0:d.short_address,is_default:u,order_sn:n.props.orderSn,check_region:n.props.checkRegion},n.extraRequestParams),Object(be.b)(),!n.antiCrawler){e.next=14;break}return e.next=13,n.antiCrawler.messagePackSync();case 13:p.anti_content=e.sent;case 14:return e.next=16,n._saveAddress(p);case 16:n.isSaveBtnClicked=!1,Object(be.a)();case 18:case"end":return e.stop()}},e)})),n._saveAddress=function(){var e=d()(l.a.mark(function e(t){var r,a,o,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){},a=function(e){var r=e.response&&e.response.data&&e.response.data.result;if(r&&r.need_recheck===wl.YES)n.dealRecheck(r);else if(e.errorCode===Wl){if(!r)return Ll({error:e});n.dealCheckRegionError({params:t,response:r})}else xl[e.errorCode]?Yl(xl[e.errorCode]):Yl(Object(cl.b)(e.errorCode)||ql)},!(o=n.props.addressId)){e.next=9;break}return i=n.props.communityId?"api/origenes/address/business/update":"api/origenes/address_info/".concat(o),t.address_id=o,e.abrupt("return",n.$axiosHttp.post(i,t,{defaultErrorHandler:r,useNativeAntiToken:!0}).then(function(){n.dealSaveResult(o)},a));case 9:return s=n.props.communityId?"api/origenes/address/business/create":"api/origenes/address",e.abrupt("return",n.$axiosHttp.post(s,t,{defaultErrorHandler:r,useNativeAntiToken:!0}).then(function(e){var t=e.address_id||e.result.address_id;t&&n.dealSaveResult(t)},a));case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.addrClose=function(e){e&&e.stopPropagation(),function(e){Object(P.b)({page_el_sn:2586340,close_time:e})}(Date.now()-n.startTime),n.props.onClose&&n.props.onClose()},n.addrBack=function(e){e&&e.stopPropagation(),n.state.isShowPositionList&&n.setState({isShowPositionList:!1,title:"编辑地址"},function(){Object(ke.a)(document.getElementById("address"))})},n.nameOnChange=function(e){e&&e.stopPropagation();var t=el()(n),r=e.target.value;t.setState(function(e){return{name:r}},function(){!!r&&n.validName()})},n.mobileOnChange=function(e){var t=e.target.value;n.setState(function(e){return{mobile:t}})},n.addressOnChange=function(e){e&&e.stopPropagation();var t=el()(n),r=e.target.value;t.setState(function(e){return{address:r}})},n.shortAddressOnChange=function(e){e&&e.stopPropagation();var t=e.target.value;n.setState(function(e){return{communityAddressResponse:s()({},n.state.communityAddressResponse,{short_address:t})}})},n.showDialogRegionSelector=function(e){e&&e.stopPropagation()&&e.preventDefault(),el()(n).setState(function(e){return{showRegionSelector:!0}})},n.hideDialogRegionSelector=function(e){e&&e.stopPropagation()&&e.preventDefault(),el()(n).setState(function(e){return{showRegionSelector:!1}})},n.state={loaded:!1,title:n.props.title,saveAndUse:n.props.saveAndUse,communityAddressResponse:{},isDefault:"0",name:"",nameInputFocused:!1,mobile:"",mobileInputFocused:!1,address:"",showRegionSelector:!1,currentProvinceID:"0",currentCityID:"0",currentDistrictID:"0",currentProvinceName:"",currentCityName:"",currentDistrictName:"",isNameError:!1,isMobileError:!1,isAddressError:!1,focused:!1,addressInputFocused:!1,addressInfo:null,addressSuggestionList:[],isPositionBtnActived:!1,isShowPositionList:!1,isShowNameRec:!1,isShowMobileRec:!1,showAnalyzeAddressDialog:!1,clipBoardResult:{},clipBoardFullAddress:"",analyzeRequestId:""},n.regionSelectorRef=a.a.createRef(),n.dialogContainerRef=a.a.createRef(),n.shortAddressRef=a.a.createRef(),n.eventEmitter=new tl.EventEmitter,n.locateOvertimeCount=0,n.$axiosHttp=n.createAxios(),n.reduceMobile=n.reduceMobile.bind(el()(n)),n.getUserCoords=n.getUserCoords.bind(el()(n)),n.getGeolocation=n.getGeolocation.bind(el()(n)),n.dealSaveResult=n.dealSaveResult.bind(el()(n)),n.generateAddrTitle=n.generateAddrTitle.bind(el()(n)),n.generateAddrBottom=n.generateAddrBottom.bind(el()(n)),n.generateRegionSelector=n.generateRegionSelector.bind(el()(n)),n.setAddressInputFocused=n.setAddressInputFocused.bind(el()(n)),n.antiCrawler=n.props.antiCrawler,n.getEncryptClipBoardData=n.getEncryptClipBoardData.bind(el()(n)),n.analyzeClipBoard=n.analyzeClipBoard.bind(el()(n)),n.genetateAnalyzeAddressDialog=n.genetateAnalyzeAddressDialog.bind(el()(n)),n.addressNameBlurTimeout=null,n.addressMobileBlurTimeout=null,n}return k()(t,e),h()(t,[{key:"createAxios",value:function(){var e=se.a.getInstance().getPageID();return Object(ie.a)({pageInfo:{pageId:e}})}},{key:"componentWillMount",value:function(){var e=this,t=this;Vl&&n("3EMY"),t.eventEmitter.on("setRegionUnionName",function(e){t.setState(function(t){return e})}),t.eventEmitter.on("fillEditAddress",function(n){if(n instanceof Error)t.props.onClose&&t.props.onClose();else{if(Object(be.a)(),!n)return e.setState({loaded:!0});var r=n.is_default,a=n.name,o=void 0===a?"":a,i=n.mobile,s=void 0===i?"":i,c=n.address,l=n.province_id,u=n.city_id,d=n.district_id,p=n.province,m=n.city,f=n.district,h=n.community_address_response,v=void 0===h?{}:h,g={isDefault:r,name:o,mobile:s,address:c,currentProvinceID:l,currentCityID:u,currentDistrictID:d,currentProvinceName:p,currentCityName:m,currentDistrictName:f,regionUnionName:p===m?"".concat(m," ").concat(f):"".concat(p,"  ").concat(m,"  ").concat(f),communityAddressResponse:v,loaded:!0};t.setState(function(e){return g})}})}},{key:"getRecommendType",value:function(e,t){return e?Cl.NAME_REC:t?Cl.MOBILE_REC:null}},{key:"render",value:function(){var e=this.state,t=e.loaded,n=e.isShowPositionList,r=e.isShowNameRec,o=e.isShowMobileRec,i=e.recMobiles,s=e.recCombined,c=this.getRecommendType(r,o),l=n?a.a.createElement("div",{className:"m-addr-mask",onClick:this.addrBack},a.a.createElement("div",{className:"m-addr-main m-addr-main-list"},this.generateAddrTitle(),this.generatePositionList())):a.a.createElement(us.a,{ControllerProps:{PortalComponent:null},className:"m-addr-main m-addr-main-new ".concat(zl?"ios":"")},a.a.createElement(us.a.CloseButton,{onClick:this.addrClose}),this.generateAddrTitle(),this.generateAddrName(),this.generateAddrMobile(),this.generateAddrRegionNew(),this.props.communityId&&this.generatePoi(),this.props.communityId?this.generateShortAddrAddress():this.generateAddrAddressNew(),this.generateAddrBottom(),c&&a.a.createElement(Nl,{type:c,recMobiles:i,recCombined:s,onClickHandler:this.onRecItemSelected}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{ref:this.dialogContainerRef,style:{display:t?"":"none"}},l,this.generateRegionSelector()),this.genetateAnalyzeAddressDialog())}},{key:"componentDidMount",value:function(){var e=d()(l.a.mark(function e(){var t,n=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$axiosHttp.get("api/origenes/rec/mobile_name/list/create_addr").then(function(e){n.setState({recMobiles:e.mobiles,recCombined:e.mobile_names})}),Ml.isNativePlatform&&this.props.componentDisablePullReload&&Object(ye.p)({enable:!1}).catch(function(e){if(e&&e.errorCode)throw e}),this.props.onShowTrackingBase&&Object(P.d)(Object.assign({},this.props.onShowTrackingBase,this.props.trackingContext)),Bl&&(this.bodyPositionStyle=document.body.style.position,this.bodyScrollTop=al(),document.body.style.position="fixed"),!this.props.addressId&&this.props.analyzeClipBoard&&this.analyzeClipBoard(),Object(ke.a)(document.getElementById("address")),this.antiCrawler||Hl){e.next=10;break}return e.next=9,dl(this.$axiosHttp);case 9:this.antiCrawler=e.sent;case 10:this.cleanupFixer=Il(document.body),null===(t=this.shortAddressRef.current)||void 0===t||t.focus();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){Ml.isNativePlatform&&this.props.componentDisablePullReload&&Object(ye.p)({enable:!0}).catch(function(e){if(e&&e.errorCode)throw e}),Object(ke.b)(),this.geoHandler&&clearTimeout(this.geoHandler),this.addressNameBlurTimeout&&clearTimeout(this.addressNameBlurTimeout),this.addressMobileBlurTimeout&&clearTimeout(this.addressMobileBlurTimeout),Bl&&(document.body.style.position=this.bodyPositionStyle,function(e,t){t&&t!==document.body?t.scrollTop=e:0===e?(document.body.scrollTop=0,(document.documentElement||{}).scrollTop=0):(document.body.scrollTop=e,0!==document.body.scrollTop?document.body:((document.documentElement||{}).scrollTop=e,!(!document.documentElement||0===document.documentElement.scrollTop)&&document.documentElement))}(this.bodyScrollTop)),this.cleanupFixer&&this.cleanupFixer()}},{key:"getEncryptClipBoardData",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ml.isNativePlatform){e.next=20;break}if(!Ul){e.next=8;break}return e.next=4,Object(ye.g)("AMStorage","getEncryptedPasteboard");case 4:return t=e.sent,e.abrupt("return",t.result);case 8:return e.next=10,Object(ye.d)();case 10:if(n=e.sent,!((r=n.text)&&r.length>5&&r.length<200)){e.next=20;break}if(!Fl){e.next=19;break}return e.next=16,Object(ye.g)("JSSecure","aesEncrypt",{text:r});case 16:return a=e.sent,o=a.value,e.abrupt("return",o);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"analyzeClipBoard",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new Promise(function(e){setTimeout(function(){return e(null)},100)}),e.next=4,Promise.race([t,this.getEncryptClipBoardData()]);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:r=Object(sl.a)(),this.setState({analyzeRequestId:r}),a={address_info:n,request_id:r},Fl&&(a={eai:n,request_id:r}),Ul&&(a={encrypt_data:n,request_id:r}),this.$axiosHttp.post("api/origenes/analyze_address",a).then(function(e){e&&o.setState({showAnalyzeAddressDialog:!0,clipBoardResult:e,clipBoardFullAddress:"".concat(e.name||""," ").concat(e.mobile||""," ").concat(e.province||""," ").concat(e.city||""," ").concat(e.district||""," ").concat(e.address||"")})}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.message="剪贴板内容解析失败"+e.t0.message,Object(E.c)(e.t0);case 19:case"end":return e.stop()}},e,this,[[0,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"genetateAnalyzeAddressDialog",value:function(){var e=this.state,t=e.isShowPositionList,n=e.showAnalyzeAddressDialog;return!this.props.addressId&&!t&&n&&a.a.createElement(nl.a,{title:"识别到收货信息，是否填入？",text:this.state.clipBoardFullAddress,TextProps:{className:"analyze-address-text"},onConfirm:this.confirmAnalyzeAddressDialog,onCancel:this.cancelAnalyzeAddressDialog,onClose:this.cancelAnalyzeAddressDialog})}},{key:"generateRegionSelector",value:function(){var e=this.state,t=e.showRegionSelector,n=e.addressInfo,r={onClose:this.hideDialogRegionSelector,eventEmitter:this.eventEmitter,isShow:t,addressId:this.props.addressId,addressInfo:n,communityId:this.props.communityId,extraRequestParams:this.extraRequestParams};return a.a.createElement(bl,tt()({},r,{ref:this.regionSelectorRef}))}},{key:"generateAddrTitle",value:function(){var e=this.state,t=e.title,n=e.isShowPositionList;return a.a.createElement("div",{className:"title-wrap-new"},a.a.createElement("div",{className:n?"m-addr-title  m-addr-back":"m-addr-title",onClick:this.addrBack},t),!n&&this.props.contentUnderTitle)}},{key:"clearName",value:function(e){e&&e.stopPropagation(),this.setState({name:""})}},{key:"generateAddrName",value:function(){var e=this,t=this.state,n=t.name,r=t.isNameError,o=t.nameInputFocused,i={className:"m-addr-input ".concat(r?"input-error":""),id:"name",placeholder:"收货人姓名",value:n,type:"text",onChange:this.nameOnChange,onFocus:function(t){e.setState({nameInputFocused:!0,isShowNameRec:!n}),e.removeNameError(t)},onBlur:function(){e.addressNameBlurTimeout=setTimeout(function(){e.setState({nameInputFocused:!1,isShowNameRec:!1})},0)}};return a.a.createElement("div",{className:"m-addr-bar"},a.a.createElement("input",i),n&&a.a.createElement("div",{className:"m-addr-input-clear-wrapper",style:{display:o?"":"none"},onMouseDown:function(t){return e.clearName(t)},onTouchStart:function(t){return e.clearName(t)}},a.a.createElement("div",{className:"m-addr-input-clear"})),a.a.createElement("div",{className:"m-addr-text"},"收货人"))}},{key:"clearMobile",value:function(e){e&&e.stopPropagation(),this.setState({mobile:""})}},{key:"generateAddrMobile",value:function(){var e=this,t=this.state,n=t.mobile,r=t.isMobileError,o=t.mobileInputFocused,i={className:"m-addr-input ".concat(r?"input-error":""),id:"mobile",placeholder:"收货人手机号",value:n,type:"tel",onChange:this.mobileOnChange,onFocus:function(t){e.setState({mobileInputFocused:!0,isShowMobileRec:!n}),e.removeMobileError(t)},onBlur:function(){e.addressMobileBlurTimeout=setTimeout(function(){e.setState({mobileInputFocused:!1,isShowMobileRec:!1})},0)}};return a.a.createElement("div",{className:"m-addr-bar"},a.a.createElement("input",i),n&&a.a.createElement("div",{className:"m-addr-input-clear-wrapper",onMouseDown:function(t){return e.clearMobile(t)},onTouchStart:function(t){return e.clearMobile(t)},style:{display:o?"":"none"}},a.a.createElement("div",{className:"m-addr-input-clear"})),a.a.createElement("div",{className:"m-addr-text"},"手机号"))}},{key:"generateAddrRegionNew",value:function(){var e=this.state,t=e.currentProvinceName,n=e.currentCityName,r=e.currentDistrictName,o=e.regionUnionName,i=t&&n&&r,s=!!this.props.communityId?{className:"m-addr-bar disabled"}:{className:"m-addr-bar",onClick:this.showDialogRegionSelector};return a.a.createElement("div",s,i?a.a.createElement("span",{className:"m-addr-select"},o):a.a.createElement("span",{className:"m-addr-select m-addr-placeholder"},"点击选择"),a.a.createElement("div",{className:"m-addr-text"},"地区"),a.a.createElement("div",{className:"m-addr-more"}))}},{key:"generatePoi",value:function(){var e=this.state.communityAddressResponse||{},t=e.community_title,n=e.community_thumb_address,r=void 0===n?"":n,o=t?r?"".concat(t,"(").concat(r,")"):t:"";return a.a.createElement("div",{className:"m-addr-bar disabled"},a.a.createElement("span",{className:"m-addr-select"},o),a.a.createElement("div",{className:"m-addr-text"},"小区"))}},{key:"generateShortAddrAddress",value:function(){var e=this,t=this.state,n=t.communityAddressResponse,r=t.isAddressError,o=t.addressInputFocused,i=(n||{}).short_address,s={value:i,placeholder:"例：2单元101室",onChange:this.shortAddressOnChange,onFocus:function(t){e.setState({addressInputFocused:!0}),e.removeAddressError(t)},onBlur:function(){e.setState({addressInputFocused:!1})},className:"m-addr-textarea  ".concat(r?"input-error":"")};return a.a.createElement("div",{className:i?"m-addr-bar":"m-addr-address-none m-addr-bar"},a.a.createElement("div",{className:"m-addr-text"},"门牌号"),a.a.createElement("textarea",tt()({ref:this.shortAddressRef},s)),i&&a.a.createElement("div",{className:"m-addr-input-clear-wrapper",onClick:this.clearShortAddress,style:{opacity:o?1:0}},a.a.createElement("div",{className:"m-addr-input-clear"})))}},{key:"generateAddrAddressNew",value:function(){var e=this,t=this.state,n=t.address,r=t.isAddressError,o=t.isPositionBtnActived,i=t.addressSuggestionList,s=t.addressInputFocused,c=(!!i.length&&n.length,Ml&&!Ml.isNativePlatform),l={id:"address",value:n,placeholder:"如街道、门牌号、小区、乡镇、村等",onChange:this.addressOnChange,onFocus:function(t){e.setState({addressInputFocused:!0}),e.removeAddressError(t)},onBlur:function(){e.setState({addressInputFocused:!1})},className:"m-addr-textarea  ".concat(r?"input-error":""," ").concat(c?"":"without-pos-icon")},u={className:"position-icon ".concat(o?"active":"inactive"),onClick:function(t){return e.requestPosition(t)}};return a.a.createElement("div",{className:n?"m-addr-bar":"m-addr-address-none m-addr-bar"},a.a.createElement("div",{className:"m-addr-text"},"详细地址"),a.a.createElement("textarea",l),n&&a.a.createElement("div",{className:"m-addr-input-clear-wrapper",onMouseDown:this.checkToStopClear,onTouchStart:this.checkToStopClear,onClick:this.clearAddress,style:{opacity:s?1:0}},a.a.createElement("div",{className:"m-addr-input-clear"})),c&&a.a.createElement("div",u))}},{key:"generateAddrBottom",value:function(){var e,t=this.state,n=t.saveAndUse,r=t.addressSuggestionList;return t.isShowPositionList&&r.length||(e=a.a.createElement("div",{className:"m-addr-save-new active",onClick:this.saveAddress},a.a.createElement("span",null,n?"保存并使用":"保存"))),this.startTime=Date.now(),e}},{key:"generatePositionList",value:function(){var e,t=this,n=t.state,r=n.addressSuggestionList;return n.isShowPositionList&&r.length&&(e=a.a.createElement("div",{className:"m-addr-address-suggestion"},a.a.createElement("ul",{id:"m-addr-address-suggestion-ul",onClick:t.addrBack},r&&r.map(function(e,n){return a.a.createElement("li",{key:"suggestion-".concat(n),onClick:function(n){return t.selectSuggestionAddress.bind(t,n,e)()}},a.a.createElement("div",{className:"m-addr-suggestion-title"},e.title),a.a.createElement("div",{className:"m-addr-suggestion-address"},e.address))})))),e}},{key:"selectSuggestionAddress",value:function(e,t){var n=this;e&&e.stopPropagation(),this.props.locationAddrClickTracking&&Object(P.d)(Object.assign({},this.props.locationAddrClickTracking,this.props.trackingContext));var r=this.state,a=r.currentProvinceID,o=r.currentCityID,i=r.currentDistrictID;a+""==t.province_id+""&&o+""==t.city_id+""&&i+""==t.district_id+""||Object(_e.a)("省市区的信息已修改",Ql);var s=t.province_id,c=t.city_id,l=t.district_id,u=t.title,d=t.thumb_address,p=t.province,m=t.city,f=t.district,h=(t.address,{currentProvinceID:s,currentCityID:c,currentDistrictID:l,currentProvinceName:p,currentCityName:m,currentDistrictName:f,regionUnionName:p===m?"".concat(m," ").concat(f):"".concat(p,"  ").concat(m,"  ").concat(f),address:d+" "+u,addressSuggestionList:[],addressInfo:t,isShowPositionList:!1,title:"编辑地址"});this.setState(function(e){return h},function(){Object(ke.a)(document.getElementById("address")),n.setAddressInputFocused()})}},{key:"setAddressInputFocused",value:function(){var e=document.getElementById("address"),t=e.value.length,n=t,r=t;if(e.setSelectionRange)e.focus&&e.focus(),e.setSelectionRange(n,r);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",r),a.moveStart("character",n),a.select()}else e.focus&&e.focus()}},{key:"requestPosition",value:function(e){e&&e.stopPropagation();var t=this;t.state.isPositionBtnActived||(t.props.locationBtnClickTracking&&Object(P.d)(Object.assign({},t.props.locationBtnClickTracking,t.props.trackingContext)),t.setState(function(e){return{isPositionBtnActived:!0}},function(e){t.getUserCoords(function(e,n){t.setState(function(e){return{isPositionBtnActived:!1}}),n===t.locateOvertimeCount&&(0!==(e=t.addressListFilter(e)).length?t.setState(function(t){return{addressSuggestionList:e||[],isShowPositionList:!0,title:"根据定位获取附近地址"}},function(e){Object(ke.a)(document.getElementById("m-addr-address-suggestion-ul"))}):Yl("无法获取你的位置，请手动选择"))},t.locateOvertimeCount),t.geoHandler&&clearTimeout(t.geoHandler),t.geoHandler=setTimeout(function(){t.state.isPositionBtnActived&&(Yl("无法获取你的位置"),t.locateOvertimeCount+=1,t.setState(function(e){return{isPositionBtnActived:!1}}))},15e3)}))}},{key:"getUserCoords",value:function(e,t){var n=this;Ml.isWeChatPlatform?window.wx&&window.wx.getLocation({type:"wgs84",success:function(r){var a=r.latitude,o=r.longitude;n.geolocationDecoder(e,{lat:a,lng:o},t)},cancel:function(){e(null,t)}}):Ml.isQQPlatform?window.mqq&&window.mqq.sensor&&window.mqq.sensor.getLocation({allowCacheTime:60},function(r,a,o,i){0!==r?e(null,t):n.geolocationDecoder(e,{lat:a,lng:o,coord_type:5},t)}):n.getGeolocation(function(r){var a=r.coords,o=a.latitude,i=a.longitude;n.geolocationDecoder(e,{lat:o,lng:i},t)},function(){e(null,t)},null)}},{key:"geolocationDecoder",value:function(e,t,n){var r=this;t&&t.lat&&t.lng?(t.coord_type||(t.coord_type=1),(this.antiCrawler?this.antiCrawler.messagePackSync():Promise.resolve("")).then(function(e){var n={payload:{},anti_content:e,location:{lng:t.lng,lat:t.lat,coordinate_type:t.coord_type}};return r.props.scene&&(n.payload.scene=r.props.scene),r.$axiosHttp.post("api/ptolemeaus/poi/nearby/poi_list",n)}).then(function(t){var r;(null===t||void 0===t?void 0:null===(r=t.result)||void 0===r?void 0:r.data)?e(t.result.data,n):e(null,n)}).catch(function(){e(null,n)})):e(null)}},{key:"getGeolocation",value:function(e,t,n){t||(t=function(e){switch(e.code){case e.TIMEOUT:Yl("定位失败，请稍后重试");break;case e.PERMISSION_DENIED:Yl("定位失败，请先同意定位请求");break;case e.POSITION_UNAVAILABLE:case e.UNKNOWN_ERROR:Yl("无法获取你的位置")}}),n||(n={enableHighAccuracy:!1,timeout:6e4,maximumAge:6e4}),navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,n):Yl("定位失败，请手动输入地址")}},{key:"addressListFilter",value:function(e){return e&&e.length>0?e.filter(function(e){return-1!==parseInt(e.city_id,10)&&-1!==parseInt(e.district_id,10)&&-1!==parseInt(e.province_id,10)}):[]}},{key:"reduceMobile",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)e.charCodeAt(r)<255&&(t+=e.substr(r,1));return t.replace(/\s|\-/g,"").replace(/^\+86/,"")}},{key:"dealSaveResult",value:function(e){var t=this;t.props.onSaveClickTrackingBase&&Object(P.d)(Object.assign({},t.props.onSaveClickTrackingBase,t.props.trackingContext));var n=this.props.communityId?"/api/origenes/address/business/query":"api/origenes/address/".concat(e);this.$axiosHttp.get(n,{params:s()({address_id:e},this.extraRequestParams)}).then(function(e){t.props.onConfirm&&t.props.onConfirm(e.result||e)})}},{key:"validName",value:function(){var e=this.state.name;return""===e.trim()?(Yl("请填写收货姓名"),!1):ol(e)>16?(Yl("姓名不能超过8个字"),this.setState(function(e){return{isNameError:!0}}),!1):(this.setState(function(e){return{isNameError:!1}}),!0)}},{key:"validMobile",value:function(){var e=this.state.mobile;return""===e?(Yl("请填写手机号码"),!1):!!e.match(/^\d{11}$/)||(this.setState({isMobileError:!0}),Yl("请填写正确的手机号码"),!1)}},{key:"validAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"address",t=function(e,t){return t.split(".").reduce(function(e,t){return e[t]},e)}(this.state,e)||"";if(!1!==this.shouldIgnoreClearBtnClick){if(""===t.trim())return Yl("请填写详细地址"),!1;if(ol(t)>100)return Yl("地址不能超过100个字，请删除部分内容"),this.setState(function(e){return{isAddressError:!0}}),!1;return/^[0-9]*$/.test(t)?(Yl("请填写正确的地址"),this.setState(function(e){return{isAddressError:!0}}),!1):(this.setState(function(e){return{isAddressError:!1}}),!0)}}},{key:"validRegion",value:function(){var e=this.state,t=e.currentProvinceID,n=e.currentCityID,r=e.currentDistrictID;return t+""!="0"&&n+""!="0"&&r+""!="0"||(Yl("请选择地区"),this.setState(function(){return{showRegionSelector:!0}}),!1)}},{key:"validDetail",value:function(){return this.props.communityId?this.validAddress("communityAddressResponse.short_address"):this.validAddress()}},{key:"validAddressInfo",value:function(){return this.validName()&&this.validDetail()&&this.validRegion()&&this.validMobile()}},{key:"removeNameError",value:function(e){e&&e.stopPropagation(),this.setState(function(e){return{isNameError:!1,focused:!0}})}},{key:"removeMobileError",value:function(e){e&&e.stopPropagation(),this.setState(function(e){return{isMobileError:!1,focused:!0}})}},{key:"removeAddressError",value:function(e){e&&e.stopPropagation(),this.setState(function(e){return{isAddressError:!1,focused:!0}})}},{key:"extraRequestParams",get:function(){return this.props.communityId?{scene_id:"1000097",community_address_request:{community_id:this.props.communityId,group_order_id:this.props.groupOrderId}}:{}}}]),t}(r.Component);Xl.defaultProps={title:"编辑地址",addressId:"",trackingContext:{},groupOrderId:""};var Jl=Xl,Kl=n("i7vn"),Zl=n.n(Kl),$l="#fa323c",eu=12;function tu(e){var t=e.labels;if(!(t&&t.length>0))return null;var n=t.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return a.a.createElement("div",{key:t,style:{fontSize:Xc(e.fontSize,eu)/100+"rem",color:Jc(e.fontColor,$l)}},e.title)});return a.a.createElement("div",{className:Zl.a.instruction},n)}var nu=function(e){var t=Object(r.useState)(!1),n=T()(t,2),o=n[0],i=n[1],s=Object(r.useRef)();Object(r.useEffect)(function(){return s.current=document.createElement("div"),document.body.appendChild(s.current),function(){document.body.removeChild(s.current),s.current=null}},[]);var c=e.addressInfo,l=void 0===c?{}:c,u=e.goodsInfo,d=void 0===u?{}:u,p=e.editAddress,m=e.communityId,f=e.groupOrderId;if(!l.addressId)return null;var h=l.name,v=l.mobile,g=l.province,y=l.city,_=l.district,b=l.address,k=l.addressLabels,I="".concat(h," ").concat(v," 当前收货地址为").concat(g," ").concat(y).concat(_).concat(b);return(null===k||void 0===k?void 0:k.length)>0&&k.forEach(function(e){I+=(null===e||void 0===e?void 0:e.title)||""}),I+="点击可更换",a.a.createElement("div",{className:"oc-address-info ".concat(Zl.a.addressInfo),"data-active":"cell-white",onClick:function(){d.communityGroupBuying&&m?i(!0):p()},"aria-label":I,role:"button"},a.a.createElement("div",{className:Zl.a.location,"aria-hidden":!0},a.a.createElement("svg",{className:Zl.a.icon,fill:"#9c9c9c",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"33987"},a.a.createElement("path",{d:"M512 581.632c-64 0-116.224-52.224-116.224-116.224S448 349.184 512 349.184s116.224 52.224 116.224 116.224-52.224 116.224-116.224 116.224z m0-185.856c-38.4 0-69.632 31.232-69.632 69.632s31.232 69.632 69.632 69.632 69.632-31.232 69.632-69.632-31.232-69.632-69.632-69.632z","p-id":"33988"}),a.a.createElement("path",{d:"M884.224 465.408c0-205.824-166.912-372.224-372.224-372.224S139.776 259.584 139.776 465.408c0 130.048 122.368 283.648 372.224 455.68 249.856-172.032 372.224-325.632 372.224-455.68z m-372.224 512c-279.04-186.88-418.816-357.888-418.816-512 0-231.424 187.392-418.816 418.816-418.816s418.816 187.392 418.816 418.816c0 154.112-139.776 325.12-418.816 512z","p-id":"33989"}))),a.a.createElement("div",{className:Zl.a.info,"aria-hidden":!0},a.a.createElement("div",{className:Zl.a.receiver},a.a.createElement("span",{className:Zl.a.name},h),a.a.createElement("span",{className:Zl.a.mobile},"，",v),a.a.createElement("span",{className:Zl.a.city},"，",g," ",y)),a.a.createElement("div",{className:Zl.a.detail},_," ",b),a.a.createElement(tu,{labels:k})),a.a.createElement("div",{className:Zl.a.arrow,"aria-hidden":!0},a.a.createElement(F,null)),o&&ve.a.createPortal(a.a.createElement(Jl,{title:"请确认收货地址",onConfirm:function(t){i(!1),e.updateAddressInfo({addressId:t.address_id})},onClose:function(){i(!1)},trackingContext:{},analyzeClipBoard:!0,useNewUI:!0,checkRegion:!0,communityId:m,groupOrderId:f,addressId:l.addressId}),s.current))},ru=n("r5oO"),au=n.n(ru),ou=oi.getInstance();var iu=function(e){var t=Object(r.useState)(!1),n=T()(t,2),o=n[0],i=n[1],s=Object(r.useRef)();Object(r.useEffect)(function(){return ou.initShowEditAddress(function(){return i(!0)}),s.current=document.createElement("div"),document.body.appendChild(s.current),function(){document.body.removeChild(s.current),s.current=null}},[]);var c=e.addressInfo,l=void 0===c?{}:c,u=e.communityId,d=e.groupOrderId,p=l.addressId,m=l.addressGiftStatus;return parseInt(p||0)<=0&&!m?a.a.createElement("div",{className:au.a.container,"aria-label":"手动添加收货地址",role:"button"},a.a.createElement("div",{className:au.a.cell,"data-active":"cell-white","aria-hidden":!0},a.a.createElement("div",{className:"".concat(au.a.addAddress," ").concat(au.a.indicator),onClick:function(t){t.stopPropagation(),e.onClickPreCheck?e.onClickPreCheck()&&i(!0):i(!0)}},a.a.createElement("svg",{className:au.a.addIcon,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"33736",width:"20",height:"20",fill:"#E02E24"},a.a.createElement("path",{d:"M336.83 402.19zM622.69 406.86h0.01-0.01zM901.72 2H122.85A120.75 120.75 0 0 0 2.09 122.73v778.88a120.75 120.75 0 0 0 120.76 120.75h778.87a120.76 120.76 0 0 0 120.76-120.75V122.73A120.76 120.76 0 0 0 901.72 2z m-186 561H563.14v152.58a50.86 50.86 0 1 1-101.71 0V563H308.87a50.85 50.85 0 1 1 0-101.7h152.56V308.75a50.86 50.86 0 0 1 101.71 0v152.57H715.7a50.85 50.85 0 0 1 0 101.7z","p-id":"33737"})),a.a.createElement("span",null,"手动添加收货地址"))),o&&ve.a.createPortal(a.a.createElement(Jl,{title:u?"添加新收货地址":"请填写收货地址",onConfirm:function(t){e.updateAddressInfo&&e.updateAddressInfo({addressId:t.address_id,name:t.name,province:t.province,city:t.city,district:t.district,address:t.address,mobile:t.mobile,provinceId:t.province_id,cityId:t.city_id,districtId:t.district_id})},onClose:function(){i(!1)},trackingContext:{},communityId:u,groupOrderId:d,analyzeClipBoard:!0,useNewUI:!0,checkRegion:!0}),s.current)):null},su=n("CFmp"),cu=n("TYy9"),lu=n.n(cu),uu=n("RgGm"),du={MOBILE:"mobile",MOBILE_ID:"mobile_id",NAME:"id_card_name",ID:"id_card_no",ID_SNAPSHOT:"id_card_snapshot_id",TEMPERATURE:"temperature",SYMPTOM:"symptom_type",RISK_TRAVEL:"risk_travel",CONFIRM:"confirm",OCCUPATION:"occupation_type",CATALOG:"catalog",SELF_USE:"self_use"},pu=n("JZM8"),mu=n.n(pu),fu="undefined"!=typeof window,hu={DEFAULT:0,LOADING:1,LOADED:2,LOAD_FAILED:3},vu=null,gu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),this.debug=!1,this.serverTime=t.serverTime||0,this.riskControlCrawler=null}return h()(e,[{key:"getStatus",value:function(){return hu.LOADED}},{key:"loadScript",value:function(){return Promise.resolve()}},{key:"initRiskController",value:function(){!this.riskControlCrawler&&fu&&(this.riskControlCrawler=new Rn.default({serverTime:this.serverTime,_2827c887a48a351a:!1}),this.riskControlCrawler.init(null))}},{key:"getRiskControlInfoSync",value:function(){var e=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.riskControlCrawler){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.riskControlCrawler.messagePackSync({touchEventData:!0,clickEventData:!0,focusblurEventData:!0,changeEventData:!0,locationInfo:!0,referrer:!0,browserSize:!0,browserInfo:!0,token:!0,fingerprint:!0});case 4:return t=e.sent,this.riskControlCrawler.clearCache(),e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRiskControlInfoAsync",value:function(){var e=this;return new Promise(function(t,n){e.initRiskController(),t(e.getRiskControlInfoSync())})}}]),e}();gu.RiskControllerStatus=hu,gu.RISK_SCRIPT_DEV="//cdn.hutaojie.com/hanzo/react-1343CE9FC918BA68DC77A314370FF50B-759d07b714.js",gu.RISK_SCRIPT_PROD="//static.pddpic.com/hanzo/react-1343CE9FC918BA68DC77A314370FF50B-58d69cbc63.js",gu.getInstance=function(e){return fu?(vu||(vu=new gu(e)),vu):null};var yu,_u=gu,bu=function(e){if(!yu){var t=se.a.getInstance().getPageID();yu=Object(ie.a)({pageInfo:{pageId:t}})}return yu(s()({},e,{encodeNativeResponse:!1,defaultErrorHandler:function(){}}))},ku=function(){var e=d()(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new _u({serverTime:Date.now()})).initRiskController(),e.next=4,t.getRiskControlInfoSync();case 4:return n=e.sent,e.prev=5,e.next=8,bu({method:"POST",url:"/api/kali/query/masked/idcard/by/scene",data:{scene:"ANTI_VIRUS",anti_content:n}});case 8:if(!(r=e.sent).success){e.next=11;break}return e.abrupt("return",(r.result||[]).map(function(e){return{snapshotId:e.snapshot_id,idNo:e.id_card_no,name:e.id_card_name}}));case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",[]);case 16:return e.abrupt("return",[]);case 17:case"end":return e.stop()}},e,null,[[5,13]])}));return function(){return e.apply(this,arguments)}}(),Iu=function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u,d,p;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new _u({serverTime:Date.now()})).initRiskController(),e.next=4,n.getRiskControlInfoSync();case 4:return r=e.sent,a=t.snapshotId,o=t.provinceId,i=t.cityId,e.next=8,bu({method:"POST",url:"/api/barbera/biz/info/epidemic/drug/latest",data:{snapshot_id:a,province_id:o,city_id:i,anti_content:r}});case 8:if(null===(s=e.sent)||void 0===s?void 0:s.success){e.next=11;break}throw new Error;case 11:return c=s.result,u=c.epidemic_drug_info_page_template,d=c.epidemic_drug_info,p=c.epidemic_drug_info_page_instruction,d[du.CONFIRM]=!0,e.abrupt("return",{template:u,info:d,instruction:p});case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Su=function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new _u({serverTime:Date.now()})).initRiskController(),e.next=4,n.getRiskControlInfoSync();case 4:return r=e.sent,e.next=7,bu({method:"POST",url:"/api/barbera/biz/info/epidemic/drug/save",data:s()({},mu()(t,Object.values(du)),{province_id:t.provinceId,city_id:t.cityId,anti_content:r})});case 7:if(a=e.sent,o=a.success,i=a.result,!o){e.next=12;break}return e.abrupt("return",null===i||void 0===i?void 0:i.snapshot_id);case 12:throw new Error;case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),wu=function(){var e=d()(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bu({method:"POST",url:"api/barbera/biz/info/epidemic/drug/index"});case 2:if(t=e.sent,n=t.success,r=t.result,n){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",r.epidemic_drug_index_list);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),xu=a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"m624.108 511.996 375.932-373.359c31.939-31.72 31.939-83.128 0-114.848-31.941-31.72-83.705-31.72-115.646 0L511.998 393.62 139.6 23.788c-31.94-31.72-83.705-31.72-115.644 0s-31.94 83.128 0 114.848l375.931 373.36L23.956 885.355c-31.94 31.72-31.94 83.128 0 114.848 15.97 15.86 36.896 23.79 57.822 23.79s41.852-7.93 57.822-23.79l372.398-369.83 372.397 369.83c15.97 15.86 36.896 23.79 57.822 23.79s41.853-7.93 57.823-23.79c31.939-31.72 31.939-83.128 0-114.848l-375.932-373.36z"})),Cu=a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M899.197 147.163C770.636 141.475 647.65 97.161 533.593 15.53L511.976 0l-21.503 15.416c-114.17 81.745-237.1 126.23-364.808 131.747H85.333v346.434c0 253.938 171.738 471.242 417.485 528.526l10.694 1.82 7.737-1.82c245.746-57.284 417.37-274.588 417.37-528.469V147.22h-39.422zM483.25 687.293l-187.21-192.728 50.23-51.766 136.98 141.02 240.058-247.17 50.287 51.71-290.345 298.934z"})),Eu=a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"m512 0 11.123.106C800.768 6.038 1024 232.942 1024 512c0 282.765-229.235 512-512 512S0 794.765 0 512 229.235 0 512 0zM383.576 343.64a28.319 28.319 0 0 0-39.9 0 27.895 27.895 0 0 0 0 39.618L473.336 512 343.71 640.742a27.895 27.895 0 0 0 0 39.618 28.213 28.213 0 0 0 39.9 0L512 552.783 640.424 680.36l3.495 2.93a28.248 28.248 0 0 0 36.37-2.93 27.895 27.895 0 0 0 0-39.618L550.665 512l129.624-128.742 2.719-3.177a27.895 27.895 0 0 0-2.719-36.44l-3.178-2.684a28.354 28.354 0 0 0-36.723 2.683L512 471.181z"})),Pu=a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M292.7 1023.998c-14.555 0-29.11-5.556-40.222-16.667-22.223-22.222-22.223-58.24 0-80.444L667.124 512.24 251.978 97.112c-22.222-22.204-22.222-58.222 0-80.445s58.222-22.222 80.445 0l428.554 428.536c36.944 36.981 36.944 97.11.038 134.074L332.922 1007.33c-11.111 11.112-25.667 16.667-40.222 16.667z"})),Nu=a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#E02E24"},a.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0zm219.648 307.2L444.53 627.598l-122.937-123.05L256 570.027l192.284 192.398 352.484-393.387-69.12-61.838z"})),Ou=a.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#9c9c9c"},a.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2zm0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z"})),Du=a.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#e02e24"},a.a.createElement("path",{d:"M512.28 120.22c-216.15 0-392 175.85-392 392s175.85 392 392 392 392-175.85 392-392-175.84-392-392-392z m0 840c-247 0-448-201-448-448s201-448 448-448 448 201 448 448-200.97 448-448 448z m-66.41-261.94L287.76 540.54l53.93-53.78 101.13 100.91 236.1-262.72 56.84 50.77z"})),Tu=n("xIpx"),Au=n.n(Tu),ju=.3,Ru=function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(o)))).scrollerRef=a.a.createRef(),n.setTranslateY=function(e){n.srollerDom.style.transform="translate3d(0,".concat(e,"px,0)"),n.srollerDom.style.webkitTransform="translate3d(0,".concat(e,"px,0)")},n.setRotateX=function(e){var t=n.srollerDom.children||[];Array.prototype.slice.call(t).forEach(function(t,n){t.style.transform="rotateX(".concat(25*(n+e),"deg)"),t.style.webkitTransform="rotateX(".concat(25*(n+e),"deg)")})},n.setTransitionDuration=function(e,t){e.style.transitionDuration=t;var n=function t(){e.style.transitionDuration="0ms",e.removeEventListener("transitionEnd",t),e.removeEventListener("webkitTransitionEnd",t)};e.addEventListener("transitionEnd",n),e.addEventListener("webkitTransitionEnd",n)},n.bindEvent=function(){var e=0,t=1,r=0,a=0,o=null;n.srollerDom.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),clearInterval(o),e=t.changedTouches[0].clientY,r=e},!1),n.srollerDom.addEventListener("touchmove",function(o){o.preventDefault(),o.stopPropagation();var i=o.changedTouches[0].pageY-e;a=o.changedTouches[0].pageY-r,r=o.changedTouches[0].pageY,(0===n.index&&i>0||n.index===-n.maxIndex&&i<0)&&(t=1-Math.abs(i)/n.srollerDom.clientWidth,t=Math.max(t,0),i=parseInt(i*t)),n.setTranslateY(n.index*n.distance+i),n.setRotateX(n.index+i/n.distance)},!1),n.srollerDom.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation();var r=t.changedTouches[0].pageY-e;0===r?(n.index=-t.target.getAttribute("data-index"),n.setTransitionDuration(n.srollerDom,"200ms"),n.setTranslateY(n.index*n.distance),n.setRotateX(n.index),n.props.setIndex(Math.abs(n.index))):function(e){var t=!1;Math.abs(a)<=1&&(t=!0),o=setInterval(function(){Math.abs(a)<=1?(clearInterval(o),t&&(n.index+=Math.round(e/n.distance)),n.index=n.index>0?0:Math.max(n.index,-n.maxIndex),n.setTransitionDuration(n.srollerDom,"400ms"),Array.prototype.slice.call(n.srollerDom.children).forEach(function(e){n.setTransitionDuration(e,"200ms")}),n.setTranslateY(n.index*n.distance),n.setRotateX(n.index),n.props.setIndex(Math.abs(n.index))):(e+=a*=ju,n.index+=Math.round(e/n.distance))},10)}(r)},!1)},n.ready=function(){n.calculateDistance(),n.setTranslateY(n.index*n.distance),n.setRotateX(n.index),n.props.setIndex(Math.abs(n.index))},n.calculateDistance=function(){var e=n.srollerDom.offsetHeight,t=(n.props.data||[]).length||1;n.distance=(e/t).toFixed(2)},n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=void 0===t?[]:t,r=e.activeIndex;this.index=-r||0,this.maxIndex=n.length-1,this.ready(),this.bindEvent()}},{key:"componentDidUpdate",value:function(){var e=this,t=(this.props.data||[]).length-1;t!==this.maxIndex&&(this.index=-this.props.activeIndex,this.maxIndex=t,this.srollerDom.style.transitionDuration="200ms",setTimeout(function(){e.ready()},0))}},{key:"shouldComponentUpdate",value:function(e){return(e.data.length!==this.props.data.length||e.data[0]!==this.props.data[0]||e.activeIndex!==this.props.activeIndex)&&(this.index=-e.activeIndex,this.ready(),!0)}},{key:"render",value:function(){var e=this.props,t=e.data,n=void 0===t?[]:t,r=e.label,o=e.type;return a.a.createElement("div",{className:Au.a.wheel},a.a.createElement("ul",{ref:this.scrollerRef,className:Au.a.wheelScroll},n.map(function(e,t){return a.a.createElement("div",{key:"date-".concat(o,"-").concat(e),"data-index":t,className:Au.a.wheelItem},"".concat(e).concat(r||""))})))}},{key:"srollerDom",get:function(){return this.scrollerRef.current}}]),t}(a.a.Component),Lu=n("SzcP"),Mu=n.n(Lu),Bu=function(e){var t=e.title,n=e.showPicker,o=e.pickerList,i=e.onSelect,s=e.toggleShowPicker,c=e.selectedItem,l=Object(r.useState)(0),u=T()(l,2),d=u[0],p=u[1],m=function(e){e&&e.stopPropagation(),s&&s()};return o?a.a.createElement("div",{className:L()(Mu.a.picker,We()({},Mu.a.showPicker,n))},a.a.createElement("div",{className:Mu.a.mask,onClick:m}),a.a.createElement("div",{className:Mu.a.container},a.a.createElement("div",{className:Mu.a.panel},t,a.a.createElement("div",{className:Mu.a.close,onClick:m},a.a.createElement("div",{className:Mu.a.closeIcon}))),a.a.createElement("div",{className:Mu.a.scrollWrap},n&&a.a.createElement("div",{className:Mu.a.content},a.a.createElement("div",{className:Mu.a.maskTop}),a.a.createElement("div",{className:Mu.a.maskBottom}),a.a.createElement("div",{className:Mu.a.wrapper},a.a.createElement(Ru,{data:o,activeIndex:c&&o&&o.findIndex(function(e){return e===c}),setIndex:function(e){p(e)}})))),a.a.createElement("div",{className:Mu.a.bottomBtn,onClick:function(e){e&&e.stopPropagation();var t=o[d];i(t),s&&s()},"data-active":"red"},"确认"))):null};var Fu=function(e){var t=e.title,n=e.showPicker,a=e.pickerList,o=e.onSelect,i=e.toggleShowPicker,s=e.selectedItem,c=Object(r.useCallback)(function(e,t){var n=t.closeType,r=t.content;if(1==+n&&r&&r.length){if(!r||!r.length)return;var a=r[0];o(a)}else i()},[i,o]),l=Object(r.useRef)();return Object(r.useEffect)(function(){l.current=function(){if(a&&a.length){var e=t,n=Object(ge.a)();n.isNativePlatform&&n.system===Ke.b.Android&&Object(Ke.c)(n.version,"5.77.0")<0&&(e=""),Object(ye.g)("JSCommonPicker","show",{columnCount:1,defaultValue:[s],listData:[a],titleText:e,maskClosable:!0,closeCallback:c},"5.66.0","5.66.0").catch(function(e){i()})}}},[c,a,s,i,t]),Object(r.useEffect)(function(){n&&l.current()},[n]),null},Uu=function(e){var t=e.title,n=e.showPicker,o=e.pickerList,i=e.onSelect,s=e.toggleShowPicker,c=e.selectedItem,l=Object(r.useState)(""),u=T()(l,2),d=u[0],p=u[1],m=Object(r.useRef)();return Object(r.useEffect)(function(){var e="h5",t=Object(ge.a)();m.current=Bu,t.isNativePlatform&&Object(Ke.c)(t.version,"5.66.0")>=0&&(e="native",m.current=Fu),p(e)},[]),d?a.a.createElement(m.current,{title:t,showPicker:n,pickerList:o,onSelect:i,toggleShowPicker:s,selectedItem:c}):null},zu=n("a96g"),Hu=n.n(zu);function Vu(e){var t=e.onSelect,n=e.visible,r=e.idRecList,o=void 0===r?[]:r;return a.a.createElement("div",{className:Hu.a.list,style:{visibility:n?"":"hidden"}},a.a.createElement("div",{className:Hu.a.arrow}),a.a.createElement("div",{id:"id_rec_list"},o.slice(0,3).map(function(e){var n=e.snapshotId,r=e.idNo,o=e.name;return a.a.createElement("div",{className:Hu.a.item,onClick:function(){t({snapshotId:n,idNo:r,name:o})},key:r},a.a.createElement("div",{className:Hu.a.name},o),a.a.createElement("div",{className:Hu.a.idCard},r),a.a.createElement("div",{className:Hu.a.border}))})),a.a.createElement("div",{className:Hu.a.footer},"近期实名信息（已加密保护）"))}var Gu=n("BXy8"),Wu=n.n(Gu),qu=function(){var e=Object(ge.a)();e.system===Ke.b.IOS&&Object(Ke.c)(e.systemVersion,"12.0")>=0&&Object(Ke.c)(e.systemVersion,"14.0")<0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)},Qu=null,Yu={cancelFix:function(){clearTimeout(Qu),Qu=null},triggerFix:function(){Qu=setTimeout(qu,200)}},Xu={INIT:1,SET_VALUE:2,SET_NAME_OR_ID:3,SET_ID_INFO:4,CLEAR_MOBILE:5,FETCH_CATALOG:6,TOGGLE_CATALOG:7};function Ju(e,t){var n=S()(e),r=t.key,a=t.value,o=t.name,i=void 0===o?"":o,s=t.idNo,c=void 0===s?"":s,l=t.snapshotId,u=void 0===l?null:l;switch(t.type){case Xu.INIT:return t.value;case Xu.SET_VALUE:n.info[r]=a;break;case Xu.SET_NAME_OR_ID:n.info[r]=a,n.info[du.ID_SNAPSHOT]=null;break;case Xu.SET_ID_INFO:n.info[du.NAME]=i,n.info[du.ID]=c,n.info[du.ID_SNAPSHOT]=u;break;case Xu.CLEAR_MOBILE:n.info[du.MOBILE]="",n.info[du.MOBILE_ID]=null;break;case Xu.FETCH_CATALOG:n.catalogData=a;break;case Xu.TOGGLE_CATALOG:n.showCatalog=a;break;default:throw new Error}return n}function Ku(e,t,n){if(e&&t&&n){for(var r=10*e,a=["".concat(e.toFixed(1),"°C")];r<10*t;)r+=10*n,a.push("".concat((r/10).toFixed(1),"°C"));return a}}var Zu=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).el=document.createElement("div"),n.el.setAttribute("id","pickerContainer"),n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){var e=this.props,t=e.showPicker,n=e.toggleShowPicker,r=e.onSelect,o=e.pickerList,i=e.selectedItem,s=e.title;return ve.a.createPortal(a.a.createElement(Uu,{title:s,showPicker:t,pickerList:o,onSelect:r,toggleShowPicker:n,selectedItem:i}),this.el)}}]),t}(a.a.Component);var $u=Object(r.forwardRef)(function(e,t){var n=e.text,o=e.value,i=e.placeholder,s=e.setValue,c=e.mobileId,l=e.clearMobile,u=Object(r.useState)(!1),d=T()(u,2),p=d[0],m=d[1],f=Object(r.useRef)();Object(r.useImperativeHandle)(t,function(){return f.current});var h=function(){s(""),setTimeout(function(){var e;return null===f||void 0===f?void 0:null===(e=f.current)||void 0===e?void 0:e.focus()},0)};return a.a.createElement("div",{className:Wu.a.slot},a.a.createElement("div",{className:Wu.a.key},n),a.a.createElement("input",{className:Wu.a.input,type:"tel",value:o||"",onChange:function(e){var t=e.target.value;t&&!/^1\d{0,10}$/.test(t)||s(t)},onFocus:function(){Yu.triggerFix(),m(!0),c&&l()},onBlur:function(){Object(ge.a)().system===Ke.b.Android?m(!1):setTimeout(function(){return m(!1)},0),Yu.triggerFix()},placeholder:i,ref:f}),p&&o&&a.a.createElement("div",{className:Wu.a.clearBtn,onTouchStart:function(){Object(ge.a)().system===Ke.b.Android&&h()},onClick:function(){Object(ge.a)().system!==Ke.b.Android&&h()}},Eu))});var ed=Object(r.forwardRef)(function(e,t){var n=e.text,o=e.value,i=e.setValue,s=e.setIdInfo,c=e.placeholder,l=e.snapshotId,u=Object(r.useState)(!1),d=T()(u,2),p=d[0],m=d[1],f=Object(r.useState)([]),h=T()(f,2),v=h[0],g=h[1],y=Object(r.useState)(!1),_=T()(y,2),b=_[0],k=_[1],I=Object(r.useRef)();Object(r.useImperativeHandle)(t,function(){return I.current}),Object(r.useEffect)(function(){ku().then(function(e){return g(e)})},[]);var S=function(){i(""),setTimeout(function(){var e;return null===I||void 0===I?void 0:null===(e=I.current)||void 0===e?void 0:e.focus()},0)};return a.a.createElement("div",{className:Wu.a.slot},a.a.createElement("div",{className:Wu.a.key},n),a.a.createElement("input",{maxLength:15,className:Wu.a.input,value:o||"",onChange:function(e){var t=e.target.value;i(t),t||k(!0)},onFocus:function(){Yu.cancelFix(),m(!0),l?(s(),setTimeout(function(){return k(!0)},0)):o||setTimeout(function(){return k(!0)},0)},onBlur:function(){Object(ge.a)().system===Ke.b.Android?m(!1):setTimeout(function(){return m(!1)},0),setTimeout(function(){return k(!1)},0),Yu.triggerFix()},placeholder:c,ref:I}),p&&o&&a.a.createElement("div",{className:Wu.a.clearBtn,onTouchStart:function(){Object(ge.a)().system===Ke.b.Android&&S()},onClick:function(){Object(ge.a)().system!==Ke.b.Android&&S()}},Eu),a.a.createElement(Vu,{visible:!o&&b&&(null===v||void 0===v?void 0:v.length)>0,idRecList:v,onSelect:s}))});var td=Object(r.forwardRef)(function(e,t){var n=e.text,o=e.value,i=e.setValue,s=e.placeholder,c=e.snapshotId,l=e.setIdInfo,u=Object(r.useState)(!1),d=T()(u,2),p=d[0],m=d[1],f=Object(r.useRef)();Object(r.useImperativeHandle)(t,function(){return f.current});var h=function(){i(""),setTimeout(function(){var e;return null===f||void 0===f?void 0:null===(e=f.current)||void 0===e?void 0:e.focus()},0)};return a.a.createElement("div",{className:Wu.a.slot},a.a.createElement("div",{className:Wu.a.key},n),a.a.createElement("input",{maxLength:18,className:Wu.a.input,value:o||"",onChange:function(e){var t=e.target.value;t&&!/^[0-9Xx]{0,18}$/.test(t)||i(t)},onFocus:function(){Yu.cancelFix(),m(!0),c&&l()},onBlur:function(){Object(ge.a)().system===Ke.b.Android?m(!1):setTimeout(function(){return m(!1)},0),Yu.triggerFix()},placeholder:s,ref:f}),p&&o&&a.a.createElement("div",{className:Wu.a.clearBtn,onTouchStart:function(){Object(ge.a)().system===Ke.b.Android&&h()},onClick:function(){Object(ge.a)().system!==Ke.b.Android&&h()}},Eu))});function nd(e){var t=e.text,n=e.value,o=e.setValue,i=e.placeholder,s=e.min,c=e.max,l=e.interval,u=e.defaultTemperature,d=Object(r.useState)(!1),p=T()(d,2),m=p[0],f=p[1],h=Ku(s,c,l);return a.a.createElement("div",{className:"".concat(Wu.a.slot," ").concat(Wu.a.slotActive),onClick:function(){return f(!0)}},a.a.createElement("div",{className:Wu.a.key},t),!!n&&"".concat(n,"°C"),!n&&a.a.createElement("span",{className:Wu.a.temperaturePlaceholder},i),a.a.createElement("div",{className:Wu.a.arrow},Pu),a.a.createElement(Zu,{title:"请选择体温",showPicker:m,toggleShowPicker:function(){return f(!1)},onSelect:function(e){f(!1);var t=e&&e.replace("°C","");o(+t)},selectedItem:u?"".concat((+u).toFixed(1),"°C"):"37.0°C",pickerList:h}))}function rd(e){var t=e.text,n=e.value,o=e.setValue,i=e.options,s=void 0===i?[]:i,c=e.placeholder,l=Object(r.useState)(!1),u=T()(l,2),d=u[0],p=u[1],m=s.find(function(e){return+e.type==+n}),f=null===m||void 0===m?void 0:m.text,h=s.map(function(e){return e.text});return a.a.createElement("div",{className:"".concat(Wu.a.slot," ").concat(Wu.a.slotActive),onClick:function(){return p(!0)}},a.a.createElement("div",{className:Wu.a.key},t),!!f&&a.a.createElement("div",{className:Wu.a.occupationTextContainer},a.a.createElement("span",{className:Wu.a.occupationText},f)),!f&&a.a.createElement("span",{className:Wu.a.temperaturePlaceholder},c),a.a.createElement("div",{className:Wu.a.arrow},Pu),a.a.createElement(Zu,{title:"请选择从事行业",showPicker:d,toggleShowPicker:function(){return p(!1)},onSelect:function(e){p(!1);var t=s.find(function(t){return t.text===e});o(null===t||void 0===t?void 0:t.type)},selectedItem:f,pickerList:h}))}function ad(e){var t=e.text,n=e.value,r=e.setValue,o=e.options,i=void 0===o?[]:o,s=L()(Wu.a.slot,Wu.a.symptomSlot);return a.a.createElement("div",{className:s},a.a.createElement("div",{className:Wu.a.key},t),i.map(function(e,t){var o=L()(Wu.a.symptomOption,We()({},Wu.a.selected,e.type===n));return a.a.createElement("div",{className:o,key:t,onClick:function(){return r(e.type)}},e.text)}))}function od(e){var t=e.text,n=e.value,r=e.setValue,o=e.options,i=L()(Wu.a.slot,Wu.a.boolSlot);return a.a.createElement("div",{className:i},a.a.createElement("div",{className:Wu.a.key},t),a.a.createElement("div",{className:Wu.a.options},o&&!!o.length&&o.map(function(e,t){return a.a.createElement("span",{key:t,className:Wu.a.selectIcon,onClick:function(){return r(e.type)}},n===e.type?Nu:Ou,e.text)})))}function id(e){var t=e.text,n=e.value,r=e.setValue;return a.a.createElement("div",{className:Wu.a.confirm},n&&a.a.createElement("div",{className:Wu.a.confirmSelectedBtn,onClick:function(){return r(!n)}},Du),!n&&a.a.createElement("div",{className:Wu.a.confirmUnselectedBtn,onClick:function(){return r(!n)}},Ou),t)}function sd(e){var t=e.text,n=e.onClick;return a.a.createElement("div",{className:Wu.a.catalog},a.a.createElement("span",{className:Wu.a.catalogText,onClick:n},t))}function cd(e){var t=e.text,n=e.value,o=e.options,i=e.setValue,s=L()(Wu.a.slot,Wu.a.boolSlot),c=Object(r.useCallback)(function(e){n!==e&&Object(ot.a)({title:"目前疫情相关药品仅限本人购买",confirmButtonLabel:"知道了",onConfirm:function(){i(n)},onClose:function(){i(n)}}),i(e)},[i,n]);return a.a.createElement("div",{className:s},a.a.createElement("div",{className:Wu.a.key},t),a.a.createElement("div",{className:Wu.a.options},o&&!!o.length&&o.map(function(e,t){return a.a.createElement("span",{key:t,className:Wu.a.selectIcon,onClick:function(){return c(e.type)}},n===e.type?Nu:Ou,e.text)})))}function ld(e){var t=e.purchaseData,n=e.updateDrugInfo,o=e.provinceId,i=e.cityId,c=Object(r.useReducer)(Ju,t),u=T()(c,2),p=u[0],m=u[1],f=Object(r.useState)(!1),h=T()(f,2),v=h[0],g=h[1],y=Object(r.useRef)(),_=Object(r.useRef)(),b=Object(r.useRef)(),k=Object(r.useContext)(uu.a).glide,I=p.catalogData,S=p.showCatalog,w=function(){var e,t=lu()(p.template).map(function(e){return e.key}),n=p.info[du.NAME],r=p.info[du.ID],a=p.info[du.ID_SNAPSHOT],o=p.info[du.MOBILE],i=p.info[du.MOBILE_ID],s=p.info[du.OCCUPATION],c=p.info[du.TEMPERATURE],l=p.info[du.SYMPTOM],u=p.info[du.RISK_TRAVEL],d=p.info[du.CONFIRM];if(!a){var m,f;if(!n)return Object(oe.a)("请填写用药人"),null===y||void 0===y||null===(m=y.current)||void 0===m||m.focus(),!1;if(!r)return Object(oe.a)("请填写身份证号"),null===_||void 0===_||null===(f=_.current)||void 0===f||f.focus(),!1}return i||o?t.includes(du.OCCUPATION)&&!s?(Object(oe.a)("请选择从事行业"),!1):c?l?null==u?(Object(oe.a)("请选择近期是否去过风险地区"),!1):!(t.includes(du.CONFIRM)&&!d)||(Object(oe.a)("请勾选承诺"),!1):(Object(oe.a)("请选择症状"),!1):(Object(oe.a)("请选择体温"),!1):(Object(oe.a)("请填写联系电话"),null===b||void 0===b||null===(e=b.current)||void 0===e||e.focus(),!1)};Object(r.useEffect)(function(){var e=Object(ge.a)().isNativePlatform;return Object(ke.a)(document.querySelectorAll(".scrollable")),e&&Object(ye.p)({enable:!1}),function(){Object(ke.b)(),e&&Object(ye.p)({enable:!0})}},[]),Object(r.useEffect)(function(){Object(ke.b)(),Object(ke.a)(document.querySelectorAll(".scrollable"))},[S]);var x=function(e,t){m({type:Xu.SET_VALUE,value:t,key:e})},C=function(e,t){m({type:Xu.SET_NAME_OR_ID,value:t,key:e})},E=function(e){m(s()({type:Xu.SET_ID_INFO},e))},P=function(){m({type:Xu.CLEAR_MOBILE})},N=function(){var e=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=I){e.next=11;break}return Object(be.b)(),e.prev=3,e.next=6,wu();case 6:t=e.sent,m({type:Xu.FETCH_CATALOG,value:t});case 8:return e.prev=8,Object(be.a)(),e.finish(8);case 11:t&&m({type:Xu.TOGGLE_CATALOG,value:!0});case 12:case"end":return e.stop()}},e,null,[[3,,8,11]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=d()(l.a.mark(function e(){var t,r,a,c,u,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:if(w()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,g(!0),e.next=8,Su(s()({},p.info,{provinceId:o,cityId:i}));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:t=e.t0,r=p.info[du.NAME],a=p.info[du.ID],n({name:r,id:a,snapshotId:t}),k(),e.next=22;break;case 18:e.prev=18,e.t1=e.catch(4),d=null===e.t1||void 0===e.t1?void 0:null===(c=e.t1.response)||void 0===c?void 0:null===(u=c.data)||void 0===u?void 0:u.error_msg,Object(oe.a)(d||"网络不稳定，请稍后重试");case 22:return e.prev=22,g(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[4,18,22,25]])}));return function(){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,I&&a.a.createElement("div",{className:Wu.a.mainContainer,style:{display:S?"":"none"}},a.a.createElement("div",{className:Wu.a.catalogTitle},"退烧止咳药目录",a.a.createElement("div",{className:Wu.a.close,onClick:function(){m({type:Xu.TOGGLE_CATALOG,value:!1})}},xu)),a.a.createElement("div",{className:"".concat(Wu.a.catalogContent," scrollable")},a.a.createElement("div",{className:Wu.a.catalogHeader},a.a.createElement("div",{className:Wu.a.headerItem1},"序号"),a.a.createElement("div",{className:Wu.a.headerItem2},"通用名称"),a.a.createElement("div",{className:Wu.a.headerItem3},"属性")),I.map(function(e,t){return a.a.createElement("div",{className:Wu.a.catalogRow,key:t},a.a.createElement("div",{className:Wu.a.catalogItem1},t+1),a.a.createElement("div",{className:Wu.a.catalogItem2},e.name),a.a.createElement("div",{className:Wu.a.catalogItem3},e.property))})),a.a.createElement("div",{className:Wu.a.catalogPaddingBottom})),a.a.createElement("div",{className:Wu.a.mainContainer,style:{display:S?"none":""}},a.a.createElement("div",{className:Wu.a.title},"疫情购药登记",a.a.createElement("div",{className:Wu.a.close,onClick:k},xu)),a.a.createElement("div",{className:Wu.a.highlight},a.a.createElement("div",{className:Wu.a.shield},Cu),p.instruction||"根据疫情防控政策要求，需登记信息才能购买该药品。信息将被严格保密，请放心填写"),a.a.createElement("div",{className:"".concat(Wu.a.blockContainer," scrollable")},p.template.map(function(e,t){return a.a.createElement("div",{className:Wu.a.block,key:t},e.map(function(e){var t=e.key,n=e.title,r=e.placeholder,o=e.options,i=e.ext,s=p.info[t],c=p.info[du.ID_SNAPSHOT],l=p.info[du.MOBILE_ID],u=p.defaultTemperature;switch(t){case du.MOBILE:return a.a.createElement($u,{key:t,text:n,value:s,mobileId:l,placeholder:r,setValue:function(e){return x(t,e)},clearMobile:P,ref:b});case du.NAME:return a.a.createElement(ed,{key:t,text:n,value:s,placeholder:r,setValue:function(e){return C(t,e)},setIdInfo:function(e){return E(e)},snapshotId:c,ref:y});case du.ID:return a.a.createElement(td,{key:t,text:n,value:s,placeholder:r,setValue:function(e){return C(t,e)},setIdInfo:function(e){return E(e)},snapshotId:c,ref:_});case du.TEMPERATURE:return a.a.createElement(nd,{key:t,text:n,value:s,defaultTemperature:s||u,min:+i.min,max:+i.max,interval:+i.interval,placeholder:r,setValue:function(e){return x(t,e)}});case du.OCCUPATION:return a.a.createElement(rd,{key:t,text:n,value:s,options:o,placeholder:r,setValue:function(e){return x(t,e)}});case du.SYMPTOM:return a.a.createElement(ad,{key:t,text:n,value:s,options:o,setValue:function(e){return x(t,e)}});case du.RISK_TRAVEL:return a.a.createElement(od,{key:t,text:n,value:s,options:o,setValue:function(e){return x(t,e)}});case du.CONFIRM:return a.a.createElement(id,{key:t,value:s,text:n,setValue:function(e){return x(t,e)}});case du.CATALOG:return a.a.createElement(sd,{key:t,text:n,onClick:N});case du.SELF_USE:return a.a.createElement(cd,{key:t,text:n,value:s,options:o,setValue:function(e){return x(t,e)}});default:return null}}),a.a.createElement("div",{className:Wu.a.blockMargin}))})),a.a.createElement("div",{className:Wu.a.bottomBtnContainer},a.a.createElement("div",{className:Wu.a.bottomBtn,onClick:O},"完成"),a.a.createElement("div",{className:Wu.a.bottomBtnPadding})),v&&a.a.createElement("div",{className:Wu.a.mask})))}function ud(e){var t=e.onHide,n=e.onTemperatureOnlySaved,o=e.updateDrugInfo,i=e.snapshotId,c=e.provinceId,u=e.cityId,p=e.defaultMobile,m=void 0===p?"":p,f=e.temperatureOnly,h=void 0!==f&&f,v=e.isTemperatureSaved,g=Object(r.useState)(null),y=T()(g,2),_=y[0],b=y[1];Object(r.useEffect)(function(){(function(){var e=d()(l.a.mark(function e(){var n,r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(be.b)(),e.prev=1,e.next=4,Iu({snapshotId:i,provinceId:c,cityId:u});case 4:(n=e.sent).info[du.MOBILE]||(n.info[du.MOBILE]=m),v||(n.defaultTemperature=n.info[du.TEMPERATURE],n.info[du.TEMPERATURE]=null),b(n),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),o=null===e.t0||void 0===e.t0?void 0:null===(r=e.t0.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.error_msg,Object(oe.a)(o||"网络不稳定，请稍后重试"),t();case 15:return e.prev=15,Object(be.a)(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[1,10,15,18]])}));return function(){return e.apply(this,arguments)}})()()},[]);var k=function(){var e=d()(l.a.mark(function e(r){var a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r&&r.replace("°C",""),e.prev=1,e.next=4,Su(s()({},_.info,{temperature:+a}));case 4:o=e.sent,n({snapshotId:o}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),Object(oe.a)("保存体温不成功，请稍后重试"),t();case 12:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}();if(!_)return null;if(h){var I=(lu()(_.template).find(function(e){return e.key===du.TEMPERATURE})||{}).ext||{},S=I.min,w=I.max,x=I.interval,C=_.info[du.TEMPERATURE]||(null===_||void 0===_?void 0:_.defaultTemperature),E=Ku(S,w,x);return a.a.createElement(Zu,{title:"根据疫情防控政策要求，需更新体温",showPicker:!0,toggleShowPicker:t,onSelect:k,selectedItem:C?"".concat((+C).toFixed(1),"°C"):"37.0°C",pickerList:E})}return a.a.createElement(uu.b,{onHide:t},a.a.createElement(ld,{purchaseData:_,updateDrugInfo:o,provinceId:c,cityId:u}))}var dd=n("v796"),pd=n.n(dd),md=function(e){var t,n=!(!e.idCardName||!e.idCardNo),r=n?"修改":"填写",o=e.overrideStyles,i=e.authTipColor,s=!n||o,c=L()((t={},We()(t,pd.a.btn,s),We()(t,pd.a.grayBtn,!s),t));return a.a.createElement("div",{className:pd.a.idModifyHint,"data-active":n?"cell-white":null},a.a.createElement("div",{className:pd.a.border},a.a.createElement("div",{className:pd.a.line})),a.a.createElement("div",{className:pd.a.icon},a.a.createElement("svg",{t:"1607326009875",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3768"},a.a.createElement("path",{d:"M909.4 114.8c31.2 0 56.6 25.4 56.6 56.6v681.3c0 31.2-25.4 56.6-56.6 56.6H114.6c-31.2 0-56.6-25.4-56.6-56.6V171.3c0-31.2 25.4-56.6 56.6-56.6h794.8m0-56.9H114.6C51.8 57.8 1 108.6 1 171.3v681.3c0 62.7 50.8 113.6 113.6 113.6h794.9c62.7 0 113.6-50.8 113.6-113.6V171.3c-0.1-62.7-50.9-113.5-113.7-113.5z","p-id":"3769"}),a.a.createElement("path",{d:"M858.3 398.6H688c-15.7 0-28.5-12.8-28.5-28.5s12.8-28.5 28.5-28.5h170.3c15.7 0 28.5 12.8 28.5 28.5s-12.7 28.5-28.5 28.5zM858.3 568.9H744.8c-15.7 0-28.5-12.8-28.5-28.5s12.8-28.5 28.5-28.5h113.6c15.7 0 28.5 12.8 28.5 28.5s-12.8 28.5-28.6 28.5z","p-id":"3770"}),a.a.createElement("path",{d:"M160.8 798.5c-11.9 0-23.1-4.4-31.7-12.6-11.1-10.6-16.4-26.6-14.1-42.8l3.6-25.9c4.2-30 27.8-62.5 54.9-75.5l158.3-76c3.8-1.8 6.2-4.2 6.7-6.5 0.5-2.4-0.8-5.7-3.7-9l-13.3-15.4c-27.4-31.7-48.1-87.4-48.1-129.4v-50.7c0-85.5 68.8-155 153.4-155s153.4 69.6 153.4 155v50.7c0 42.1-20.7 97.7-48.1 129.4l-13.3 15.5c-2.8 3.3-4.2 6.6-3.7 9 0.5 2.3 2.9 4.7 6.7 6.5L680 641.7c27.1 13 50.8 45.5 55 75.5l3.6 25.9c2.3 16.2-3 32.2-14.1 42.8-10 9.6-23.6 14-37.7 12.3h-520c-2 0.2-4 0.3-6 0.3z m12-57.3h508l-2.3-16c-1.6-11.3-13.1-27.2-23.3-32.1L497 617.2c-19.9-9.6-33.7-26.4-37.9-46.3-4.2-19.9 1.8-41 16.4-57.9l13.3-15.5c18.2-21.1 34.2-64.2 34.2-92.2v-50.7c0-54.1-43.2-98-96.4-98s-96.4 44-96.4 98v50.7c0 28 16 71.1 34.2 92.2L378 513c14.5 16.8 20.5 37.9 16.4 57.8-4.1 19.8-17.9 36.7-37.9 46.3l-158.3 76c-10.1 4.8-21.6 20.7-23.2 32.1l-2.2 16z","p-id":"3771"}))),a.a.createElement("div",{className:pd.a.text},a.a.createElement("div",{className:pd.a.title},n?a.a.createElement("div",null,a.a.createElement("span",{className:pd.a.name},e.idCardName),"，",a.a.createElement("span",{className:pd.a.number},e.idCardNo)):e.authTitle),a.a.createElement("div",{className:pd.a.desc,style:{color:i||void 0}},e.desc)),!e.disableEdit&&a.a.createElement("div",{className:pd.a.action},a.a.createElement("div",{className:c,"data-active":s?"ghost-red":null,onClick:e.onClick},r)))},fd=oi.getInstance();function hd(e){var t=Object(r.useRef)();return t.current=document.createElement("div"),t.current.setAttribute("id","purchaseInfoPopup"),t.current.style.position="fixed",t.current.style.top=0,t.current.style.right=0,t.current.style.bottom=0,t.current.style.left=0,t.current.style.zIndex=10023,Object(r.useEffect)(function(){return document.body.appendChild(t.current),function(){document.body.removeChild(t.current)}},[]),ve.a.createPortal(a.a.createElement(ud,{updateDrugInfo:e.updateDrugInfo,snapshotId:e.snapshotId,provinceId:e.provinceId,cityId:e.cityId,defaultMobile:e.defaultMobile,onHide:e.onHide,temperatureOnly:e.temperatureOnly,onTemperatureOnlySaved:e.onTemperatureOnlySaved,isTemperatureSaved:e.isTemperatureSaved}),t.current)}var vd=function(e){var t=e.ocData||{},n=t.goodsInfo||{},o=t.idCardInfo||{},i=t.selectedChannel||{},s=t.addressInfo,c=Object(r.useState)(!1),l=T()(c,2),u=l[0],d=l[1],p=Object(r.useState)(!1),m=T()(p,2),f=m[0],h=m[1],v=Object(r.useState)(o),g=T()(v,2),y=g[0],_=g[1],b=Object(r.useState)(!1),k=T()(b,2),I=k[0],S=k[1];if(Object(r.useEffect)(function(){fd.initShowIdcardForm(function(){return d(!0)}),fd.initShowPurchaseInfo(function(){return h(!0)}),fd.initShowTemperaturePicker(function(){S(!0),h(!0)})},[]),!n.needId)return null;var w=function(){h(!1),S(!1)},x={scene:o.sceneCode||"ORDER",ext_map:o.extendMap},C={title:o.authMainTitleTip||"填写实名信息",formHint:o.authTitleTip,idHint:o.authIdTip,nameHint:o.authNameTip};return a.a.createElement(a.a.Fragment,null,!([3,4].includes(+n.goodsType)&&i.paymentType===$n.a.FriendPay)&&a.a.createElement(md,{onClick:o.isDrugInfo?function(){return h(!0)}:function(){return d(!0)},authTitle:o.authTitle,authTipColor:o.authTipColor,idCardName:y.idCardName||o.idCardName,idCardNo:y.idCardNo||o.idCardNo,desc:o.authTip,disableEdit:o.hideEditBtn||(o.isDrugInfo||o.hideEditBtnAfterOrder)&&t.orderSn}),u&&!o.isDrugInfo&&a.a.createElement(su.a,{extraParams:x,strongAuth:!0,idCardFormVisible:u,onClickClose:function(){return d(!1)},labels:C,submitSuccessCallback:function(e){e.success;var t=e.result,n=e.realName,r=e.idCardNo,a=t||{},o=a.card_snapshot_id,i=a.is_face_cert;fd.ocData.idCardInfo.idCardName=n,fd.ocData.idCardInfo.idCardNo=r,fd.ocData.idCardInfo.snapshotId=o,fd.ocData.idCardInfo.isFaceCert=i,_({idCardName:n,idCardNo:r})},getAntiContent:Fn,disableRec:!0}),o.isDrugInfo&&f&&a.a.createElement(hd,{updateDrugInfo:function(e){var t=e.name,n=e.id,r=e.snapshotId;setTimeout(function(){fd.ocData.idCardInfo.idCardName=t,fd.ocData.idCardInfo.idCardNo=n,fd.ocData.idCardInfo.drugInfoSnapshotId=r,fd.ocData.idCardInfo.isTemperatureSaved=!0,_({idCardName:t,idCardNo:n})},400)},snapshotId:fd.ocData.drugInfoSnapshotId,provinceId:s.provinceId,cityId:s.cityId,defaultMobile:s&&s.mobile,onHide:function(){I?w():h(!1)},temperatureOnly:I,onTemperatureOnlySaved:function(e){var t=e.snapshotId;w(),fd.ocData.idCardInfo.drugInfoSnapshotId=t,fd.ocData.idCardInfo.isTemperatureSaved=!0,fd.pay()},isTemperatureSaved:fd.ocData.idCardInfo.isTemperatureSaved}))},gd=n("v5F4"),yd=n.n(gd);function _d(e){var t=e.templateList,n=e.selectDeliveryItem,o=Object(r.useContext)(uu.a).glide,i=Lt()(function(){var e=d()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selected){e.next=5;break}return Object(be.b)(),e.next=4,n(t);case 4:Object(be.a)();case 5:o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),300,{leading:!0,trailing:!1});return a.a.createElement("div",{className:yd.a.deliveryList},a.a.createElement("div",{className:yd.a.title},"选择送装服务",a.a.createElement("div",{className:yd.a.closeBtn,onClick:o})),(t||[]).map(function(e,t){return a.a.createElement("div",{key:t,className:"".concat(yd.a.deliveryItem," ").concat(e.selected?yd.a.selected:""),onClick:function(){return i(e)}},e.srvCopyWrite)}))}var bd=null,kd=function(){if(!bd){var e=document.createElement("div");e.setAttribute("id","DeliveryList"),e.style.position="fixed",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.left=0,e.style.zIndex=99999,bd=e}return bd};function Id(e){var t=e.onHide,n=e.templateList,o=e.selectDeliveryItem,i=Object(r.useRef)();return i.current=kd(),Object(r.useEffect)(function(){return document.body.appendChild(i.current),function(){document.body.removeChild(i.current)}},[]),ve.a.createPortal(a.a.createElement(uu.b,{onHide:t},a.a.createElement(_d,{templateList:n,selectDeliveryItem:o})),i.current)}var Sd=function(e){var t=Object(r.useState)(!1),n=T()(t,2),o=n[0],i=n[1],s=(e.ocData||{}).deliveryInfo;if(!s)return null;if(2==+s.clickType)return null;var c=s.displayContent,l=s.displayTitle,u=s.templateList;return c&&l?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{"data-active":"cell-white",onClick:function(){return i(!0)}},a.a.createElement("div",{className:yd.a.deliveryStripe},a.a.createElement("div",{className:yd.a.deliverySvg},a.a.createElement(z,null)),a.a.createElement("span",{className:yd.a.deliveryContent},c),a.a.createElement("div",{className:yd.a.arrow},a.a.createElement(F,null)))),o&&a.a.createElement(Id,{onHide:function(){return i(!1)},templateList:u,selectDeliveryItem:e.selectDeliveryItem})):null},wd=n("XEGP"),xd=n.n(wd);function Cd(e){var t=e.templateList,n=e.selectShippingItem,o=Object(r.useContext)(uu.a).glide,i=Lt()(function(){var e=d()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selected){e.next=5;break}return Object(be.b)(),e.next=4,n(t);case 4:Object(be.a)();case 5:o();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),300,{leading:!0,trailing:!1});return a.a.createElement("div",{className:xd.a.AdditionalShippingStrip},a.a.createElement("div",{className:xd.a.title},"选择配送服务",a.a.createElement("div",{className:xd.a.closeBtn,onClick:o})),(t||[]).map(function(e,t){var n=e.float_title_desc,r=e.float_sub_title_desc,o=n||{},s=o.text,c=o.text_format,l=r||{},u=l.text,d=l.text_format,p=c||{},m=p.color,f=p.font_size,h=d||{},v=h.color,g=h.font_size;return a.a.createElement("div",{key:t,className:xd.a.deliveryItem,onClick:function(){return i(e)}},s&&a.a.createElement("div",{style:{color:m,fontSize:f},className:xd.a.mainTitleFloat},s),u&&a.a.createElement("div",{style:{color:v,fontSize:g},className:xd.a.subTitleFloat},u),e.selected?a.a.createElement("div",{className:xd.a.selectedSvg},a.a.createElement(W,null)):a.a.createElement("div",{className:xd.a.notSelectedSvg},a.a.createElement(q,null)))}))}var Ed=null,Pd=function(){if(!Ed){var e=document.createElement("div");e.setAttribute("id","AdditionalShippingStrip"),e.style.position="fixed",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.left=0,e.style.zIndex=99999,Ed=e}return Ed};function Nd(e){var t=e.onHide,n=e.templateList,o=e.selectShippingItem,i=Object(r.useRef)();return i.current=Pd(),Object(r.useEffect)(function(){return document.body.appendChild(i.current),function(){document.body.removeChild(i.current)}},[]),ve.a.createPortal(a.a.createElement(uu.b,{onHide:t},a.a.createElement(Cd,{templateList:n,selectShippingItem:o})),i.current)}var Od=function(e){var t=Object(r.useState)(!1),n=T()(t,2),o=n[0],i=n[1],s=(e.ocData||{}).additionalShippingInfo;if(!s)return null;var c=s.additionalSrvItems;if(!c||c.length<=0)return null;var l=(c[0].cell_display_item_list||[]).find(function(e){return e.selected});if(!l)return null;var u=l.main_title_desc,d=l.main_sub_title_desc,p=u||{},m=p.text,f=p.text_format,h=d||{},v=h.text,g=h.text_format,y=f||{},_=y.color,b=y.font_size,k=g||{},I=k.color,S=k.font_size,w=m&&a.a.createElement("div",{style:{color:_,fontSize:b},className:xd.a.mainTitle},m),x=v&&a.a.createElement("div",{style:{color:I,fontSize:S},className:xd.a.subTitle},v);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{"data-active":"cell-white",onClick:function(){return i(!0)}},a.a.createElement("div",{className:xd.a.deliveryStripe},a.a.createElement("div",{className:xd.a.deliverySvg},a.a.createElement(z,null)),a.a.createElement("div",{className:xd.a.shippingContent},w,x),a.a.createElement("div",{className:xd.a.arrow},a.a.createElement(F,null)))),o&&a.a.createElement(Nd,{onHide:function(){return i(!1)},templateList:c[0].cell_display_item_list,selectShippingItem:e.selectShippingItem}))},Dd=n("gWL1"),Td=n.n(Dd);function Ad(e){var t=e.recordList,n=e.selectRecord;return a.a.createElement(a.a.Fragment,null,t&&t.length>0&&a.a.createElement("div",{className:Td.a.bubbleContainer},a.a.createElement("span",{className:Td.a.recCardTriangle}),a.a.createElement("div",{className:Td.a.recList},t.slice(0,3).map(function(e,t){return a.a.createElement("div",{className:Td.a.recCardItem,key:t,onTouchEnd:function(){return n(t)}},e.separatedMobile?a.a.createElement(a.a.Fragment,null,e.separatedMobile.map(function(e,t){return a.a.createElement("span",{key:e+"_"+t},e)})):a.a.createElement(a.a.Fragment,null,e.name))}))))}var jd=Vo.getInstance();var Rd=function(e){var t=e.isFocused,n=e.recordList,r=e.setFocused,o=e.updateMobileInputNumber;return t?a.a.createElement(Ad,{selectRecord:function(e){var t=n[e];jd.doInputBlur(),jd.updateMobileInfo(t.mobile,t.name||""),o(t.mobile),r(!1)},recordList:n}):null};function Ld(e){return e=(e=(e=(e||"").toString()).replace(/(\+86)/g,"")).replace(/[^\d]*/g,"")}var Md=n("7MjH"),Bd=n.n(Md);var Fd=function(e){var t=e.mobileInputNumber,n=e.isFocused,o=e.isMobile,i=e.updateRecordByContact,s=Object(r.useState)(!1),c=T()(s,2),u=c[0],p=c[1];Object(r.useEffect)(function(){var e=Object(ge.a)();Object(Ke.c)(e.version,"3.17.0")>=0&&p(!0)},[]);var m=function(){var e=d()(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),e.prev=2,e.next=5,Object(ye.i)();case 5:(n=e.sent)&&i(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}();return t&&n||!u||!o?null:a.a.createElement("div",{className:Bd.a.contact,onClick:m})},Ud=n("c3b3"),zd=n.n(Ud),Hd=Vo.getInstance(),Vd={maxLength:30};var Gd=function(e){var t=e.ocData,n=e.setFocused,r=e.isFocused,o=e.mobileInputNumber,i=e.updateMobileInputNumber,s=t.virtualReceiveMethodInfo;if(!s)return null;var c=!!t.orderSn,l=s&&s.isMobile,u=s.label,d=s.placeholder,p=s.icon,m=l?null:Vd;return a.a.createElement("div",{className:zd.a.mainArea},p&&a.a.createElement(it.a,{className:zd.a.icon,src:p}),a.a.createElement("span",null,u,"："),a.a.createElement("input",tt()({type:l?"tel":"text",ref:function(e){Hd.$mobileNumberInput=e},placeholder:d,value:o,onChange:function(){var e=(Hd.$mobileNumberInput.value||"").replace(/ +/g,"");i(e)},onFocus:function(){c?Hd.doInputBlur():n(!0)},onBlur:function(){Hd.updateMobileInfo(o,""),n(!1)}},m)),o&&r&&a.a.createElement("div",{className:zd.a.mobileClear,onTouchEnd:function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Hd.doInputFocus(),i("")}}),a.a.createElement(Fd,{mobileInputNumber:o,isFocused:r,isMobile:l,updateRecordByContact:function(e){var t=e.mobile,r=e.name;(t=Ld(t))&&(Hd.updateMobileInfo(t,r||""),n(!1),i(t))}}))},Wd={Mobile:/(^1)\d{10}$/,GasSinopec:/^\d{16}(\d{3})?$/,QQ:/^[1-9][0-9]{4,9}$/,Mail:/^([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+.[a-zA-Z]{2,4}$/,Phone:/((^1)\d{10}$)|(^(886|852|853)\d{7,11}$)/};function qd(e){e=Ld(e);var t=/^(1\d{2})(\d{4})(\d{4})$/.exec(e);return t&&t[1]&&t[2]&&t[3]?[t[1],t[2],t[3]]:null}var Qd=n("xq+1"),Yd=n.n(Qd),Xd=oi.getInstance(),Jd=Vo.getInstance();var Kd=function(e){var t=e.ocData,n=t.virtualReceiveMethodInfo,o=Object(r.useState)([]),i=T()(o,2),s=i[0],c=i[1],u=Object(r.useState)(!1),p=T()(u,2),m=p[0],f=p[1],h=Object(r.useState)(""),v=T()(h,2),g=v[0],y=v[1];return Object(r.useEffect)(function(){var e=n.value,t=n.validateRules;e&&t&&t.length>0&&t.some(function(t){return new RegExp(t).test(e)})&&(Jd.updateMobileInfo(e,""),y(e));var r=function(e){return{1:!1,2:!0}[e]||!1}(x()(Xd.ocData,"morganType"));r||"USER_CONTACT_MOBILE"!==n.autoCompleteType?r||"USER_CHARGE_MOBILE"!==n.autoCompleteType||function(){var e=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me({method:Ae.GET,url:"api/virginia/get_charge_history"}).then(function(e){return(e.records||[]).map(function(e){return{separatedMobile:qd(e.mobile),mobile:Ld(e.mobile),name:e.name||""}}).slice(0,3)}).catch(function(){});case 2:(t=e.sent)&&c(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()():function(){var e=d()(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me({method:Ae.POST,url:"/api/origenes/mobile_distinct_list"}).then(function(e){return(e||[]).filter(function(e){return Wd.Phone.test(e)}).map(function(e){return{separatedMobile:qd(e),mobile:Ld(e),name:""}}).slice(0,3)}).catch(function(){});case 2:(t=e.sent)&&c(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),n?a.a.createElement("div",{className:Yd.a.virtualAddress},a.a.createElement(Gd,{recordList:s,mobileInputNumber:g,ocData:t,isFocused:m,setFocused:f,updateMobileInputNumber:y}),a.a.createElement(Rd,{isFocused:m,recordList:s,setFocused:f,updateMobileInputNumber:y})):null},Zd=n("0yKJ"),$d=n.n(Zd);var ep,tp,np=function(e){var t=e.addressInfo,n=e.communityId,r=e.groupOrderId,o=e.ocData||{},i={page_el_sn:4259115,op:"impr",goods_id:e.goods.goodsID};if(o.receiveMethodNone)return null;var s=!!x()(o,"virtualReceiveMethodInfo");return a.a.createElement($e.a,{trackingInfo:i},a.a.createElement("div",{className:"oc-address ".concat($d.a.address),onClick:function(e){e.stopPropagation()}},s&&a.a.createElement(Kd,{ocData:o}),!s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(iu,{addressInfo:t,updateAddressInfo:e.updateAddressInfo,onClickPreCheck:e.onClickPreCheck,communityId:n}),a.a.createElement(nu,{editAddress:function(){Le({page_el_sn:4259115,op:"click",goods_id:e.goods.goodsID},function(){e.onClickPreCheck?e.onClickPreCheck()&&Zc(e.ocData):Zc(e.ocData)})},addressInfo:t,communityId:n,groupOrderId:r,goodsInfo:e.goodsInfo,updateAddressInfo:e.updateAddressInfo})),a.a.createElement(Sd,{ocData:o,selectDeliveryItem:e.selectDeliveryItem}),a.a.createElement(Od,{ocData:o,selectShippingItem:e.selectShippingItem}),a.a.createElement(vd,{ocData:o}),!s&&e.hasAddressLine&&a.a.createElement("div",{className:$d.a.addressLine}),a.a.createElement("div",{className:$d.a.bottomline})))},rp=n("x7Ie"),ap=n.n(rp),op=oi.getInstance(),ip=(ep=function(e){function t(){var e,n;m()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=g()(this,(e=_()(t)).call.apply(e,[this].concat(o)))).normalSkuRef=a.a.createRef(),n.skuBgRef=a.a.createRef(),n.isShow=!1,n.confirmSkuCallBack=function(){var e=d()(l.a.mark(function e(t){var r,a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getGoodsNumber(),a=n.getSelectedSkuId(),e.next=4,op.refresh({goods_number:r,sku_id:a,front_action:Po.OldForNewChangeGoodsInfo});case 4:(o=e.sent)&&o.success&&n.props.setSkuInfo({selectedSkuID:+a,goodsNumber:r}),n.hide();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return k()(t,e),h()(t,[{key:"show",value:function(){var e=d()(l.a.mark(function e(t){var n,r=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"function"==typeof t.setStateCallback&&this.normalSkuRef.current.skuRef.current.setCustomState(t.setStateCallback),n=this.normalSkuRef.current.prepare(t),!n.needShow){e.next=7;break}if(!this.isShow){e.next=5;break}return e.abrupt("return");case 5:this.skuBgRef.current.style.display="block",setTimeout(function(){r.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",r.normalSkuRef.current.enter(),we(),setTimeout(function(){r.isShow=!0},200)},1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"hide",value:function(){var e=d()(l.a.mark(function e(t){var n=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isShow){e.next=2;break}return e.abrupt("return");case 2:if(Ce(),!this.props.onHide){e.next=6;break}return e.next=6,this.props.onHide(t);case 6:this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",this.normalSkuRef.current.exit(),setTimeout(function(){n.isShow=!1,n.skuBgRef.current.style.display="none"},+this.props.delay||200);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSelectedSkuId",value:function(){return this.normalSkuRef.current.skuRef.current.state.selectedSkuID}},{key:"getGoodsNumber",value:function(){return this.normalSkuRef.current.skuRef.current.state.goodsNumber||1}},{key:"selectSkuId",value:function(e){var t=e.skuId,n=e.goodsNumber,r=void 0===n?1:n;return this.normalSkuRef.current.skuRef.current.selectSkuId({skuId:t,goodsNumber:r})}},{key:"setGoodsNumber",value:function(e){return this.normalSkuRef.current.skuRef.current.setGoodsNumber(e)}},{key:"render",value:function(){var e=this,t=this.props.goods,n=this.props,r=n.groupOrderId,o=n.usePddNativePhoto,i=n.isOptSoldOut;return a.a.createElement("div",{ref:this.skuBgRef,className:L()(ap.a.ocSkuSelectorBg,"sku-plus1"),onClick:d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.hide();case 1:case"end":return t.stop()}},t)}))},a.a.createElement(ae,{groupOrderId:r,ref:this.normalSkuRef,goods:t,group:this.props.group,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,skuDirectOrder:!1,usePddNativePhoto:o,isOptSoldOut:i,onClose:this.hide,hideSkuBottomTip:!0},a.a.createElement(jn,null)))}}]),t}(a.a.Component),Qe()(ep.prototype,"show",[Je],Object.getOwnPropertyDescriptor(ep.prototype,"show"),ep.prototype),Qe()(ep.prototype,"hide",[Je],Object.getOwnPropertyDescriptor(ep.prototype,"hide"),ep.prototype),Qe()(ep.prototype,"getSelectedSkuId",[Je],Object.getOwnPropertyDescriptor(ep.prototype,"getSelectedSkuId"),ep.prototype),Qe()(ep.prototype,"getGoodsNumber",[Je],Object.getOwnPropertyDescriptor(ep.prototype,"getGoodsNumber"),ep.prototype),Qe()(ep.prototype,"selectSkuId",[Je],Object.getOwnPropertyDescriptor(ep.prototype,"selectSkuId"),ep.prototype),Qe()(ep.prototype,"setGoodsNumber",[Je],Object.getOwnPropertyDescriptor(ep.prototype,"setGoodsNumber"),ep.prototype),ep),sp=n("cBUB"),cp=n.n(sp),lp=oi.getInstance(),up=Oi.getInstance(),dp=function(e){var t=e.ocData;if(!t)return null;var n=e.goods&&e.goods.skuNewPricePrefix,r=x()(t,"goodsInfo.totalPrice"),o=x()(t,"promotionInfo")||{},i=o.isNewPriceArea,s=o.totalDiscountDisplay;if(i)return s?a.a.createElement("span",{className:cp.a.prefixPrice},"".concat(n,"¥").concat(r)):null;var c=(x()(e,"ocData.promotionInfo.totalPromotionsConsult")||{}).categoryDisplay,u=x()(e,"ocData.promotionInfo.shopPromotion.promotionStatus"),p=lp.ocData.goodsId,m=x()(e,"ocData.promotionInfo.totalPromotionClickable")&&Zn()(c),f=function(){var t=d()(l.a.mark(function t(){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Object(P.b)({page_el_sn:"4503302",op:"click",goods_id:p}),n=x()(e,"ocData.promotionInfo.shopPromotion.promotionIdentityVo.extension.batch_sn")||x()(e,"ocData.promotionInfo.optionalShopsPromotion.batchSn"),t.t0=Me,t.t1=x()(e,"ocData.promotionInfo.shopPromotion.mallId"),t.t2=n,t.next=7,Fn();case 7:t.t3=t.sent,t.t4={anti_content:t.t3},t.t5={mall_id:t.t1,like_from:101003,batch_sn:t.t2,merchant_tag:50,base_risk_info:t.t4},t.t6={method:"POST",url:"api/zenon/mall/like_and_receive_coupon",data:t.t5},t.t7=function(){lp.needReload=!0,Oe("领券成功，已关注店铺"),lo({groupId:"20203",customTags:{event:"receivePromotion"}}),lp.refresh({front_action:Po.GetCoupon})},t.t8=function(e){var t=e.response,n=(t&&t.data||{}).error_msg||"领取失败~";Oe(n)},(0,t.t0)(t.t6).then(t.t7).catch(t.t8);case 14:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),h=function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,up.autoTakeMerchantCoupon();case 5:e.next=13;break;case 7:e.prev=7,e.t0=e.catch(2),t=e.t0||{},n=t.response,r=(n||{}).data,a=x()(r,"error_toast")||"领取优惠失败，请重试",Oe(a);case 13:return e.next=15,up.fetchPromotionList();case 15:o=e.sent,s=(i=up||{}).togglePromotionPopupVisible,c=i.setPromotionLists,o&&(lo({groupId:"20203",customTags:{event:"showPromotionPopup"}}),c&&c(o),setTimeout(function(){s&&s(!0)},0));case 18:case"end":return e.stop()}},e,null,[[2,7]])}));return function(){return e.apply(this,arguments)}}(),v=!!x()(e,"ocData.promotionInfo.optionalShopsPromotion.batchSn"),g=u===pa||v;return a.a.createElement(a.a.Fragment,null,s&&s.length>0&&s.map(function(e,t){var n=L()(cp.a.promotion,cp.a["promotion".concat(e.display_type)]),r=g?{page_el_sn:"4503302",op:"impr",goods_id:p}:{};return a.a.createElement($e.a,{trackingInfo:r,key:t},a.a.createElement("div",{className:n,"data-active":g?"red":"",onClick:g?f:h,style:{height:e.height?e.height/100+"rem":null,lineHeight:e.height?e.height/100+"rem":null,color:e.font_color,backgroundColor:e.bg_color}},e.text,m&&a.a.createElement(F,null)))}))},pp=(n("9ZFI"),n("G7xb")),mp=n.n(pp),fp=oi.getInstance(),hp=Oi.getInstance(),vp=!1;"undefined"!=typeof window&&(vp=Object(ge.a)().isWeChatMiniProgram);var gp,yp={free:mp.a.skuSpecValue,selected:L()(mp.a.skuSpecValue,mp.a.skuSpecValueSelected),disable:L()(mp.a.skuSpecValue,mp.a.skuSpecValueDisable)},_p=(tp=function(e){function t(e){var n;m()(this,t),(n=g()(this,_()(t).call(this,e))).deliverRef=a.a.createRef(),n.skuIphoneRef=a.a.createRef(),n.skuRef=a.a.createRef(),n.ocSkuRef=a.a.createRef(),n.isPaying=!1,n.isShowingRecycleHighlayer=void 0,n.getSkuRef=function(){return n.skuSelectorBodyRef};var r=n.buildSkuData(e.goods.skus),o=r.skuTypeValues,i=r.typeHashToSkuID,s=r.currentSelect,c=r.skuInfos,l=r.originButtonStatus;return n.state={originButtonStatus:l,selectedSkuID:null,goodsNumber:1,skuInfos:c,currentSelect:s,skuTypeValues:o,typeHashToSkuID:i,selectedHomeIns:{},selectedSendWays:{},oldForNewSelected:{},promotionDesc:"",showSkuSelectorPopup:!1,styleStatus:0},n}return k()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==(t=Object.keys(this.state.skuInfos).filter(function(e){return u.state.skuInfos[e].quantity>0})).length){e.next=5;break}this.selectSkuId({skuId:t[0]}),e.next=33;break;case 5:n=!0,r=!1,a=void 0,e.prev=8,o=this.state.skuTypeValues[Symbol.iterator]();case 10:if(n=(i=o.next()).done){e.next=19;break}if(1!==(s=i.value).values.length){e.next=16;break}return c=s.type,e.next=16,this.selectOneValue(c,s.values[0]);case 16:n=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),r=!0,a=e.t0;case 25:e.prev=25,e.prev=26,n||null==o.return||o.return();case 28:if(e.prev=28,!r){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}},e,this,[[8,21,25,33],[26,,28,32]])}));return function(){return e.apply(this,arguments)}}()},{key:"buildSkuData",value:function(e){var t=[],n={},r={},a={};return e.forEach(function(e){var o=e.specs,i=e.skuID;a[i]=e;var s={};o.forEach(function(e){var n=e.spec_key,a=e.spec_value;s[n]=a;var o=t.filter(function(e){return e.type===n});if(o&&o[0]){var i=o[0].values;!i.includes(a)&&i.push(a)}else r[n]=null,t.push({type:n,values:[a]})}),n[JSON.stringify(s)]=i}),{originButtonStatus:this.getButtonStatus(r),skuTypeValues:t,typeHashToSkuID:n,currentSelect:r,skuInfos:a}}},{key:"checkHas",value:function(e){var t=this.props.goods.skus,n=!0,r=!1,a=void 0;try{for(var o,i=function(){var t=o.value;if(t.quantity<=0)return"continue";var n={};t.specs.forEach(function(e){var t=e.spec_key,r=e.spec_value;n[t]=r});var r=!0;for(var a in e)e[a]&&n[a]!==e[a]&&(r=!1);return r?{v:t.skuID}:void 0},s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=i();switch(c){case"continue":continue;default:if("object"===ue()(c))return c.v}}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return!1}},{key:"getButtonStatus",value:function(e){var t=this,n=e||this.state.currentSelect,r={};return this.props.goods.skus.forEach(function(e){e.specs.forEach(function(e){var a=e.spec_key,o=e.spec_value,i=s()({},n,We()({},a,o)),c=t.checkHas(i);r[a]=s()({},r[a],We()({},o,c))})}),r}},{key:"selectSkuId",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s,c,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.skuId,r=t.goodsNumber,a=void 0===r?1:r,o=this.props.goods,!(1===(o.skus||[]).length&&!x()(o,"skus[0].specs.length"))||!n){e.next=6;break}return this.setState({selectedSkuID:+n,goodsNumber:a}),e.abrupt("return");case 6:i=this.state.typeHashToSkuID,e.t0=l.a.keys(i);case 8:if((e.t1=e.t0()).done){e.next=22;break}if(s=e.t1.value,i[s]!==+n){e.next=20;break}c=JSON.parse(s),e.t2=l.a.keys(c);case 13:if((e.t3=e.t2()).done){e.next=19;break}return u=e.t3.value,e.next=17,this.selectOneValue(u,c[u],!0);case 17:e.next=13;break;case 19:+a>0&&this.setState({goodsNumber:a});case 20:e.next=8;break;case 22:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setGoodsNumber",value:function(e){this.setState({goodsNumber:e})}},{key:"resetSkuId",value:function(){var e={};(this.props.goods.skus||[]).forEach(function(t){t.specs.forEach(function(t){var n=t.spec_key;e[n]=null})}),this.setState({currentSelect:e,selectedSkuID:null})}},{key:"checkQuantityAsync",value:function(e){var t=this;this.isCheckQuantityAsync||(this.isCheckQuantityAsync=!0,Me({method:"POST",url:"api/oak/quantity/check",data:{goods_id:this.props.goods.goodsID,sku_id:e,mall_id:this.props.goods.mallID,detail_id:x()(this.props.goods,"activity.detailID"),select_quantity:+this.state.goodsNumber,hostname:location.hostname}}).then(function(n){if(n){var r=n.next_quantity,a=t.state.skuInfos[e];a.isQualityCheckEnd=0===n.has_quantity,a.defaultQuantity=r,t.setState({skuInfos:t.state.skuInfos},t.amendLimitQuantity)}t.isCheckQuantityAsync=!1}).catch(function(){t.isCheckQuantityAsync=!1}))}},{key:"getLimitGoodsNumber",value:function(){var e=this.state.selectedSkuID,t=1e5;if(e){var n=this.state.skuInfos[e],r=n.quantity,a=n.staticLimitQuantity,o=n.defaultQuantity;if(this.props.goods.checkQuantity&&o){var i=+a||1;if(n.isQualityCheckEnd)t=Math.min(i,o);else{var s=this.state.goodsNumber;i>o&&s>=o&&this.checkQuantityAsync(e),t=Math.min(i,o)}}else t=Math.min(+a,+r)||1}else t=1e5;return+t<1&&(t=1),t}},{key:"amendLimitQuantity",value:function(){var e=this.getLimitGoodsNumber(),t=this.state,n=t.goodsNumber,r=t.selectedSkuID;if(n>e)if(r&&this.props.goods.checkQuantity){var a=this.state.skuInfos[r],o=a.staticLimitQuantity,i=a.defaultQuantity;(a.isQualityCheckEnd||o<i)&&this.updateAmendLimitQuantityGoodsNumber(e,!0),+n>1e3&&1e3==+e&&this.updateAmendLimitQuantityGoodsNumber(e)}else this.updateAmendLimitQuantityGoodsNumber(e,!0);else n<1&&this.updateAmendLimitQuantityGoodsNumber(1)}},{key:"updateAmendLimitQuantityGoodsNumber",value:function(e,t){var n=this,r=this.state.selectedSkuID;r||this.setState({goodsNumber:e},function(){t&&Oe("当前".concat(r?"款式":"商品","最多可拼").concat(e,"件")),n.state.selectedSkuID&&fp.refresh({goods_number:e,front_action:Po.ChangeGoddsNumber})})}},{key:"handleHomeInsClick",value:function(e){this.setState({selectedHomeIns:e})}},{key:"getSelectedSkuID",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=this.props.isOptSoldOut,o=S()(this.state.currentSelect);if(o[e]!==t||n?o[e]=t:o[e]=null,!a||0!==r||this.checkHas(o))return this.state.typeHashToSkuID[JSON.stringify(o)];for(var i in o)i!==e&&(o[i]=null)}},{key:"selectOneValue",value:function(){var e=d()(l.a.mark(function e(t,n){var r,a,o,i,s,c,u=this,d=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]&&d[2],a=d.length>3&&void 0!==d[3]?d[3]:-1,o=this.props.isOptSoldOut,(i=S()(this.state.currentSelect))[t]!==n||r?i[t]=n:i[t]=null,o&&0===a&&!this.checkHas(i))for(s in i)s!==t&&(i[s]=null);if(c=this.state.typeHashToSkuID[JSON.stringify(i)],!this.props.selectOneValueCb){e.next=13;break}return e.next=10,this.props.selectOneValueCb({selectedSkuID:c,type:t,value:n,force:r});case 10:if(e.sent){e.next=13;break}return e.abrupt("return",!1);case 13:return this.setState({currentSelect:i,selectedSkuID:c,selectedHomeIns:{}},function(){u.amendLimitQuantity()}),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fixInputBug",value:function(){var e=Object(ge.a)();e.system===Ke.b.IOS&&Object(Ke.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}},{key:"setCustomState",value:function(e){this.setState(e)}},{key:"show",value:function(e){var t=this,n=this.props.goods,r=e.preventAutoConfirm;if(1===n.skus.length&&!x()(n,"skus[0].specs.length")){var a=n.skus[0].skuID;if(this.setState({selectedSkuID:a,selectedHomeIns:{}},function(){r||(Re.hide(),t.confirmSku())}),!r)return}if(x()(e,"skuID")){var o=e.goodsNumber;this.setState({goodsNumber:Number(o)||1},function(){t.selectSkuId({skuId:e.skuID,goodsNumber:Number(o)||1})})}}},{key:"setScroll",value:function(){Object(ke.a)(this.skuSelectorBodyRef)}},{key:"goodsNumberBlur",value:function(){this.fixInputBug();var e=Number(this.state.goodsNumber)||1;this.setState({goodsNumber:e},this.amendLimitQuantity),this.state.selectedSkuID&&fp.refresh({goods_number:e,front_action:Po.ChangeGoddsNumber})}},{key:"goodsNumberChangeClick",value:function(e){Object(P.b)({page_el_sn:4259118,op:"click",goods_id:this.props.goods.goodsID,goods_number:e})}},{key:"goodsNumberChange",value:function(e){var t=parseInt(e.target.value,10)||1;this.setState({goodsNumber:t},this.amendLimitQuantity),this.state.selectedSkuID&&fp.refresh({goods_number:t,front_action:Po.ChangeGoddsNumber}),this.goodsNumberChangeClick()}},{key:"updateGoodsNumber",value:function(e){var t=(parseInt(this.state.goodsNumber,10)||1)+e;this.setState({goodsNumber:t}),this.state.selectedSkuID&&fp.refresh({goods_number:t,front_action:Po.ChangeGoddsNumber}),this.goodsNumberChangeClick()}},{key:"reduceGoodsNumber",value:function(e){if(e&&e.stopPropagation(),this.isEnableReduce())this.updateGoodsNumber(-1);else if(this.state.selectedSkuID&&this.props.ocData){var t=this.props.ocData.goodsInfo.leastNumber;t&&t>1&&Oe("该商品至少购买".concat(t,"件"))}}},{key:"increaseGoodsNumber",value:function(e){if(e&&e.stopPropagation(),this.isEnableIncrease())this.updateGoodsNumber(1);else{var t=this.state,n=t.selectedSkuID,r=t.goodsNumber,a=this.props.ocData.goodsInfo||{},o=a.limitMessage,i=a.limitNumber,s=a.limitStatus;if(n&&this.props.ocData)return void Oe(o||(s&&r>1e3?"拼单件数超出范围":"当前款式最多可拼".concat(s?r:i,"件")));var c=this.getLimitGoodsNumber();Oe("当前".concat(n?"款式":"商品","最多可拼").concat(c,"件"))}}},{key:"confirmSku",value:function(){var e=d()(l.a.mark(function e(t){var n,r,a,o,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.stopPropagation(),this.checkSpecDesc()){e.next=3;break}return e.abrupt("return");case 3:if(x()(this.props.goods,"ui.sku_section.view_style_v2")!==ne){e.next=8;break}if(+x()(this.state.selectedHomeIns,"srv_type")>=0){e.next=8;break}return Oe("请选择服务"),e.abrupt("return");case 8:if(x()(this.props.goods,"ui.sku_section.view_style_v2")!==te){e.next=13;break}if(!this.deliverRef.current){e.next=13;break}if(n=this.deliverRef.current.getDeliveryData()){e.next=13;break}return e.abrupt("return");case 13:if(x()(this.props.goods,"ui.sku_section.view_style_v2")!==ee){e.next=20;break}if(!this.skuIphoneRef.current){e.next=20;break}if(r=this.skuIphoneRef.current.getState()||{},o=(a=r).mobileID,a.cityID&&o){e.next=20;break}return Oe("请先选择入网信息"),e.abrupt("return");case 20:i=this.props.confirmSkuCallBack,s=this.state.selectedSkuID,i&&i({selectedSkuID:s,goodsNumber:this.state.goodsNumber,skuInfo:this.state.skuInfos[s],skuInfos:this.state.skuInfos,iphoneInfo:r,deliveryData:n,homeInsData:this.state.selectedHomeIns,state:this.state,props:this.props,skuDirectOrder:!0});case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"checkoutOldForNewSel",value:function(){var e=x()(this.props.goods,"ui.sku_section.old_for_new");return!(e&&e.title&&!this.state.oldForNewSelected.type)||(Oe("请选择".concat(e.title)),!1)}},{key:"checkSpecDesc",value:function(){var e=x()(this.props.goods,"isTopOldForNew");return!(e&&!this.checkoutOldForNewSel())&&(this.state.selectedSkuID?!(!e&&!this.checkoutOldForNewSel()):(Oe(this.priceAreaRef.getSpecDesc()),!1))}},{key:"showRecycleHighlayer",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=fp.ocData,n=x()(t,"goodsInfo.mallId"),r=x()(t,"goodsInfo.skuId"),a=this.props.recordId,o=this.ocSkuRef&&this.ocSkuRef.current.offsetHeight,i=this.state,s=i.selectedSkuID,c=i.goodsNumber,!Object(ge.a)().isNativePlatform){e.next=18;break}if(e.prev=7,!this.isShowingRecycleHighlayer){e.next=10;break}return e.abrupt("return");case 10:return this.isShowingRecycleHighlayer=!0,e.next=13,Object(ye.g)("JSUniPopup","showHighLayer",{model:{url:"/recy_old_device_evaluate_popup.html",data:JSON.stringify({mall_id:n,sku_id:r,record_id:a,height:o}),name:"old_device_evaluate_popup",stat_data:JSON.stringify({page_sn:999999}),block_loading:1,occasion:1,load_timeout:5e3},complete:function(){var e=d()(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.record_id){e.next=5;break}return r=n.record_id,e.next=4,fp.render({sku_id:s,goods_number:c,front_action:Po.InitSkuSelected},r);case 4:u.props.setRecordId&&u.props.setRecordId(r);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),on_load_error:function(e,t){u.isShowingRecycleHighlayer=!1},on_state_change:function(e,t){3===t.current_state&&(u.isShowingRecycleHighlayer=!1)}},"5.6.0","5.6.0");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),this.isShowingRecycleHighlayer=!1;case 18:case"end":return e.stop()}},e,this,[[7,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"pay",value:function(){var e=d()(l.a.mark(function e(){var t,n,r,a,o,i,s,c,u,d,p,m,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkSpecDesc()){e.next=2;break}return e.abrupt("return");case 2:if((t=fp.ocData).orderSn){e.next=10;break}if(!(n=Qo({ocData:t,ocManager:fp})).errMsg){e.next=8;break}return Oe(n.errMsg),e.abrupt("return");case 8:if(n.success){e.next=10;break}return e.abrupt("return");case 10:if(!this.isPaying){e.next=12;break}return e.abrupt("return");case 12:if((r=qo({ocData:t})).success){e.next=16;break}return r.shouldShowPaymentList&&(this.props.showPaymentList(),setTimeout(function(){Oe(r.errMsg)},200)),e.abrupt("return");case 16:if(!this.state.oldForNewSelected||2!==this.state.oldForNewSelected.type||this.props.recordId){e.next=26;break}return e.prev=17,e.next=20,hp.autoTakeCouponBeforeOldForNew();case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:return this.showRecycleHighlayer(),e.abrupt("return");case 26:if(this.isPaying=!0,!t.orderSn){e.next=32;break}return e.next=30,fp.pay();case 30:return this.isPaying=!1,e.abrupt("return");case 32:if(a=x()(t,"promotionInfo.shopPromotion"),o=x()(t,"promotionInfo.platformPromotion"),i=x()(t,"promotionInfo.platformPromotion.promotionStatus"),s=this.state,c=s.selectedSkuID,u=s.goodsNumber,d=s.skuInfos,e.prev=36,c===t.goodsInfo.skuId&&u===t.goodsInfo.goodsNumber){e.next=39;break}throw new Error("面板显示skuId=".concat(c,"或goodsNumber=").concat(u,"和摩根支付skuId=").concat(t.goodsInfo.skuId,"或goodsNumber=").concat(t.goodsInfo.goodsNumber,"不一致!"));case 39:if(i!==da){e.next=47;break}return e.next=42,hp.batchAutoTakeCoupon({shopPromotion:a,platformPromotion:o});case 42:if(!(p=e.sent)||!p.notAllSuccess){e.next=45;break}throw new Error("批量领券未全部成功");case 45:e.next=60;break;case 47:if(!a){e.next=52;break}return e.next=50,hp.autoTakeMerchantCoupon();case 50:e.next=60;break;case 52:if(m=d[c],!(f=St["".concat(u,"-").concat(c)]&&St["".concat(u,"-").concat(c)].batchSn||m&&m.batchSn)){e.next=60;break}return e.next=57,li({batchSn:f});case 57:return fp.needReload=!0,e.next=60,fp.refresh({front_action:Po.GetCoupon});case 60:e.next=68;break;case 62:return e.prev=62,e.t1=e.catch(36),Object(E.c)(new Error("payConfirmSku"),{error_message:(e.t1||{}).message}),this.isPaying=!1,this.confirmSku(),e.abrupt("return");case 68:return e.next=70,fp.pay();case 70:this.isPaying=!1;case 71:case"end":return e.stop()}},e,this,[[17,22],[36,62]])}));return function(){return e.apply(this,arguments)}}()},{key:"isEnableIncrease",value:function(){var e=this.state,t=e.selectedSkuID,n=e.goodsNumber;if(t&&this.props.ocData){var r=this.props.ocData.goodsInfo||{},a=r.limitStatus,o=r.limitNumber;return!a&&n<o}var i=+this.getLimitGoodsNumber();if(t&&this.props.goods.checkQuantity){var s=this.state.skuInfos[t],c=s.staticLimitQuantity,l=s.defaultQuantity;return+n>1e3&&!s.isQualityCheckEnd||!((s.isQualityCheckEnd||c<l)&&n>=i)}return n<i}},{key:"isEnableReduce",value:function(){var e=this.state,t=e.selectedSkuID,n=e.goodsNumber;return t&&this.props.ocData?n>this.props.ocData.goodsInfo.leastNumber:n>1}},{key:"onOldForNewClick",value:function(e){this.state.oldForNewSelected.type===e.type?(this.setState({oldForNewSelected:{}}),Object(P.b)({page_el_sn:5881525,op:"click",goods_id:this.props.goods.goodsID})):this.setState({oldForNewSelected:e})}},{key:"renderOldForNewElement",value:function(){var e=this,t=x()(this.props.goods,"ui.sku_section.old_for_new"),n=t.title,r=t.trade_item;return a.a.createElement("div",{className:mp.a.skuSpecs},a.a.createElement("span",{className:mp.a.skuSpecsKey},n),a.a.createElement("div",{className:mp.a.skuSpecValueList},r.map(function(t,n){var r=t.type===e.state.oldForNewSelected.type;return a.a.createElement($e.a,{key:n,trackingInfo:r?{page_el_sn:"5881525",op:"impr",goods_id:e.props.goods.goodsID}:{}},a.a.createElement("div",{className:L()(mp.a.skuSpecValue,We()({},mp.a.skuSpecValueSelected,r)),onClick:function(){return e.onOldForNewClick(t)}},t.desc))})))}},{key:"renderSkusElement",value:function(){var e=this,t=this.getButtonStatus(),n=this.state.originButtonStatus,r=this.props.goods.skus.find(function(e){return e.hotSale})||{},o=((null===r||void 0===r?void 0:r.specs)||[]).map(function(e){return e.spec_value}),i=-1,s=this.state.skuTypeValues.map(function(r,s){var c=r.type,l=r.values,u=(Object.values(n[c])||[]).reduce(function(e,t){return e+(t?1:0)},0),d=l.map(function(r,l){var d=yp.disable,p=function(){};(t[c]&&t[c][r]||e.props.isOptSoldOut&&0===s&&n[c]&&n[c][r])&&(d=yp.free,p=function(){e.selectOneValue(c,r,!1,s);var t=e.getSelectedSkuID(c,r,!1,s);if(t){var n=!e.state.selectedSkuID;fp.ocData&&fp.ocData.orderSn&&Object(P.b)({page_el_sn:4358286,op:"click",goods_id:e.props.goods.goodsID,goods_number:e.state.goodsNumber}),fp.refresh({sku_id:t,goods_number:e.state.goodsNumber,front_action:Po.ChangeSku},n)}}),e.state.currentSelect[c]===r&&(d=yp.selected);var m=r;if(1===e.state.skuTypeValues.length){var f=JSON.stringify(We()({},c,r)),h=e.state.typeHashToSkuID[f],v=e.state.skuInfos[h],g=v.groupSkuUnitPrice,y=v.normalSkuUnitPrice,_=+e.props.group.requireNum>1?g:y;_&&(m="".concat(r,"｜").concat(_))}return i<0&&u>1&&r===o[s]&&(i=s),a.a.createElement("div",{role:"button","aria-label":m,key:l,className:d,onClick:p},i===s&&r===o[s]&&a.a.createElement("div",{"aria-hidden":!0,className:L()(mp.a.hotSale,mp.a.hotSaleIcon)}),m)}),p=null,m=x()(e.props.goods,"ui.sku_section.size_chart"),f=+x()(e.props.goods,"ui.sku_section.size_chart_entry_type");if(1===s&&m){var h={page_el_sn:"648235",op:"impr",goods_id:e.props.goods.goodsID};p=a.a.createElement($e.a,{trackingInfo:h},a.a.createElement("span",{className:2===f?mp.a.skuSizeChartRed:"sku-size-chart",onClick:function(){Object(Ze.a)(m),Object(P.b)({page_el_sn:"648235",op:"click",goods_id:e.props.goods.goodsID})}},2===f?"尺码详情":"详情"))}var v=x()(e.props.goods,"ui.sku_section.size_refer_fit_desc"),g=null;return 1===s&&v&&(g=a.a.createElement("span",{className:mp.a.sizeDesc},v)),a.a.createElement("div",{className:mp.a.skuSpecs,key:s},a.a.createElement("span",{className:mp.a.skuSpecsKey},c,g,p),a.a.createElement("div",{className:mp.a.skuSpecValueList},d))});if(x()(this.props.goods,"ui.sku_section.view_style_v2")===ee){var c=this.state.selectedSkuID;return a.a.createElement(a.a.Fragment,null,s,a.a.createElement(Ut,{ref:this.skuIphoneRef,selectedSkuID:c,goodsID:this.props.goods.goodsID,toastSpec:function(){Oe(e.priceAreaRef.getSpecDesc())},getSkuRef:this.getSkuRef}))}if(x()(this.props.goods,"ui.sku_section.view_style_v2")===te){var l=+x()(this.props.goods,"ui.sku_section.car_shop.action_type");return a.a.createElement(a.a.Fragment,null,s,a.a.createElement(yn,{ref:this.deliverRef,goods:this.props.goods,updateSelectedSendWays:function(t){e.setState({selectedSendWays:t})},selectedSendWays:this.state.selectedSendWays,actionType:l}))}var u=this.props.goods.activity;if(!(x()(this.props.goods,"ui.sku_section.view_style_v2")!==ne||vp||u&&25===u.activityType)){var d=this.state,p=d.selectedSkuID,m=d.skuInfos;return a.a.createElement(a.a.Fragment,null,s,a.a.createElement(_n,{selectedSkuID:p,skuInfos:m,selectedHomeIns:this.state.selectedHomeIns,ref:this.homeRef,goods:this.props.goods,handleHomeInsClick:this.handleHomeInsClick}))}var f=x()(this.props.goods,"ui.sku_section.old_for_new");if(f&&f.title){var h=x()(this.props.goods,"isTopOldForNew");return a.a.createElement(a.a.Fragment,null,h&&this.renderOldForNewElement(),s,!h&&this.renderOldForNewElement())}return s}},{key:"renderGoodsNumberElement",value:function(){var e,t,n=this.isEnableIncrease(),r=this.isEnableReduce(),o=(this.state.goodsNumber||0).toString().length,i=o>3?36+9*(o-3):36;return a.a.createElement("div",{className:mp.a.selectorNumber},a.a.createElement("div",{className:mp.a.numberStepper},a.a.createElement("div",{className:L()(mp.a.skuSelectorReduce,(e={},We()(e,mp.a.skuSelectorReduceEnable,r),We()(e,mp.a.skuSelectorReduceDisable,!r),e)),onClick:this.reduceGoodsNumber,"aria-label":"减少数量",role:"button"}),a.a.createElement("input",{className:mp.a.skuSelectorInput,type:"number",maxLength:"5",value:this.state.goodsNumber+"","aria-label":"当前数量为".concat(this.state.goodsNumber,"件"),onBlur:this.goodsNumberBlur,onChange:this.goodsNumberChange,style:{width:"".concat(i/100,"rem")}}),a.a.createElement("div",{className:L()(mp.a.skuSelectorIncrease,(t={},We()(t,mp.a.skuSelectorIncreaseEnable,n),We()(t,mp.a.skuSelectorIncreaseDisable,!n),t)),onClick:this.increaseGoodsNumber,"aria-label":"增加数量",role:"button"})))}},{key:"getViewImgList",value:function(e){var t=(Object.values(this.state.skuInfos)||[]).filter(function(e){return e.quantity>0});t.sort(function(e,t){return x()(e,"previewPriority")-x()(t,"previewPriority")});var n=t.map(function(e){return e.thumbUrl});return n.unshift(e),n}},{key:"setSkuStyleStatus",value:function(e){this.setState({styleStatus:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.goods,r=t.group,o=t.changeToGroupBuy,i=t.usePddNativePhoto,s=t.isMorganFetching,c=t.useNormalSkuData,l=t.consultPromotionPriceParams,u=this.state,d=u.skuInfos,p=u.selectedSkuID,m=u.currentSelect,f=u.styleStatus,h=n.hdThumbUrl||n.thumbUrl,v=this.getViewImgList(h);if(p)h=this.state.skuInfos[p].thumbUrl;else if(Object.keys(m).some(function(e){return m[e]})){var g=this.checkHas(m);g&&(h=this.state.skuInfos[g].thumbUrl)}var y=x()(this.props.ocData,"promotionInfo.tradeInInfo"),_=this.props.recordId&&!y;return a.a.createElement("div",{className:L()(mp.a.skuSelectorContainer,this.props.isMutliSku&&mp.a.cartSkuUi),role:"dialog",tabIndex:-1,ref:this.ocSkuRef},a.a.createElement("div",{className:mp.a.skuSelectorTitleBar},a.a.createElement("span",null,this.props.recordId?"确认以旧换新订单":"确认订单"),a.a.createElement(H,{className:mp.a.skuSelectorCloseBtn,role:"button","aria-label":"关闭",onClick:function(){e.props.onClose&&e.props.onClose()}})),_?a.a.createElement(Qc,{onRefresh:function(){var t=e.state,n=t.selectedSkuID,r=t.goodsNumber;fp.render({sku_id:n,goods_number:r,front_action:Po.InitSkuSelected},e.props.recordId)}}):a.a.createElement(a.a.Fragment,null,this.props.ocData&&a.a.createElement(np,{communityId:fp.communityId,groupOrderId:fp.groupOrderId,ocData:this.props.ocData,hasAddressLine:fp.hasAddressLine,goodsInfo:this.props.ocData.goodsInfo,addressInfo:this.props.ocData.addressInfo,updateAddressInfo:fp.updateAddressInfo,selectDeliveryItem:fp.selectDeliveryItem,selectShippingItem:fp.selectShippingItem,goods:n,onClickPreCheck:this.checkSpecDesc}),y&&a.a.createElement(Sc,{ocData:this.props.ocData,currentSelect:this.state.currentSelect,onDescClick:function(){e.skuRef.current.show({skuID:x()(e.props.ocData,"goodsInfo.skuId"),goodsNumber:x()(e.props.ocData,"goodsInfo.goodsNumber")})}}),!y&&a.a.createElement("div",{className:mp.a.skuSelectorHead},a.a.createElement(Tt,{usePddNativePhoto:i,group:r,src:h,goods:n,imgList:v,skuInfos:d,selectedSkuID:p,selectSkuId:this.selectSkuId,resetSkuId:this.resetSkuId,goodsNumber:this.state.goodsNumber}),a.a.createElement("div",{className:mp.a.skuSelectorHeadRight},a.a.createElement(Nt,{ref:function(t){e.priceAreaRef=t},goods:n,group:r,selectedSkuID:p,currentSelect:m,skuInfos:this.state.skuInfos,selectedHomeIns:this.state.selectedHomeIns,selectedSendWays:this.state.selectedSendWays,handleShowCart:function(){e.props.handleShowCart({selectedSkuID:p,goodsNumber:e.state.goodsNumber})},isMutliSku:this.props.isMutliSku,goodsNumber:this.state.goodsNumber,skuDirectOrder:this.props.skuDirectOrder,ocData:this.props.ocData,styleStatus:f,useNormalSkuData:c,consultPromotionPriceParams:l,renderPromotionDescContent:function(t){return s?null:p?a.a.createElement(dp,{ocData:e.props.ocData,goods:e.props.goods,isMutliSku:e.props.isMutliSku}):a.a.createElement(On,{priceInfo:t})}}),this.renderGoodsNumberElement())),this.props.ocData&&!y&&a.a.createElement(vc,{isMorganFetching:s,useNormalSkuData:c,selectedSkuID:this.state.selectedSkuID,ocData:this.props.ocData}),y&&a.a.createElement(Ec,{onDescClick:this.showRecycleHighlayer,ocData:this.props.ocData,goods:n}),!y&&this.props.renderSkuBlackCard&&this.props.renderSkuBlackCard({skuSelector:this.state}),a.a.createElement("div",{ref:function(t){e.skuSelectorBodyRef=t},className:mp.a.skuSelectorBody},!y&&this.renderSkusElement(),a.a.createElement(Vc,{goods:this.props.goods}),this.props.ocData&&x()(this.props.ocData,"cellBarVo.protocolV2")&&a.a.createElement(Uc,{goods:this.props.goods,ocData:this.props.ocData}),a.a.createElement("div",{className:mp.a.safeDistance})),this.props.renderFooter&&this.props.renderFooter({selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos,goodsNumber:this.state.goodsNumber}),a.a.createElement(ft,null,a.a.createElement(In,{goods:this.props.goods,selectedSkuID:p,skuInfos:d})),a.a.createElement(Tc,{changeToGroupBuy:o,setSkuStyleStatus:this.setSkuStyleStatus,styleStatus:f,goods:n,group:r,skuInfos:d,showPaymentList:this.props.showPaymentList,ocData:this.props.ocData,onClick:this.pay,goodsNumber:this.state.goodsNumber,promotionDesc:this.state.promotionDesc,onClickPreCheck:this.checkSpecDesc,selectedSkuID:p,useNormalSkuData:c,oldForNewSelected:this.state.oldForNewSelected,hidePayHint:this.state.oldForNewSelected&&2===this.state.oldForNewSelected.type&&!this.props.recordId}),a.a.createElement(ip,tt()({ref:this.skuRef},this.props,{setSkuInfo:function(t){t&&e.setState(t)}}))))}}]),t}(a.a.PureComponent),Qe()(tp.prototype,"buildSkuData",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"buildSkuData"),tp.prototype),Qe()(tp.prototype,"checkHas",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"checkHas"),tp.prototype),Qe()(tp.prototype,"getButtonStatus",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"getButtonStatus"),tp.prototype),Qe()(tp.prototype,"selectSkuId",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"selectSkuId"),tp.prototype),Qe()(tp.prototype,"setGoodsNumber",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"setGoodsNumber"),tp.prototype),Qe()(tp.prototype,"resetSkuId",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"resetSkuId"),tp.prototype),Qe()(tp.prototype,"checkQuantityAsync",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"checkQuantityAsync"),tp.prototype),Qe()(tp.prototype,"getLimitGoodsNumber",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"getLimitGoodsNumber"),tp.prototype),Qe()(tp.prototype,"amendLimitQuantity",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"amendLimitQuantity"),tp.prototype),Qe()(tp.prototype,"updateAmendLimitQuantityGoodsNumber",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"updateAmendLimitQuantityGoodsNumber"),tp.prototype),Qe()(tp.prototype,"handleHomeInsClick",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"handleHomeInsClick"),tp.prototype),Qe()(tp.prototype,"getSelectedSkuID",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"getSelectedSkuID"),tp.prototype),Qe()(tp.prototype,"selectOneValue",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"selectOneValue"),tp.prototype),Qe()(tp.prototype,"setCustomState",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"setCustomState"),tp.prototype),Qe()(tp.prototype,"show",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"show"),tp.prototype),Qe()(tp.prototype,"setScroll",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"setScroll"),tp.prototype),Qe()(tp.prototype,"goodsNumberBlur",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"goodsNumberBlur"),tp.prototype),Qe()(tp.prototype,"goodsNumberChangeClick",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"goodsNumberChangeClick"),tp.prototype),Qe()(tp.prototype,"goodsNumberChange",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"goodsNumberChange"),tp.prototype),Qe()(tp.prototype,"updateGoodsNumber",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"updateGoodsNumber"),tp.prototype),Qe()(tp.prototype,"reduceGoodsNumber",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"reduceGoodsNumber"),tp.prototype),Qe()(tp.prototype,"increaseGoodsNumber",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"increaseGoodsNumber"),tp.prototype),Qe()(tp.prototype,"confirmSku",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"confirmSku"),tp.prototype),Qe()(tp.prototype,"checkoutOldForNewSel",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"checkoutOldForNewSel"),tp.prototype),Qe()(tp.prototype,"checkSpecDesc",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"checkSpecDesc"),tp.prototype),Qe()(tp.prototype,"showRecycleHighlayer",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"showRecycleHighlayer"),tp.prototype),Qe()(tp.prototype,"pay",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"pay"),tp.prototype),Qe()(tp.prototype,"isEnableIncrease",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"isEnableIncrease"),tp.prototype),Qe()(tp.prototype,"isEnableReduce",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"isEnableReduce"),tp.prototype),Qe()(tp.prototype,"onOldForNewClick",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"onOldForNewClick"),tp.prototype),Qe()(tp.prototype,"renderOldForNewElement",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"renderOldForNewElement"),tp.prototype),Qe()(tp.prototype,"getViewImgList",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"getViewImgList"),tp.prototype),Qe()(tp.prototype,"setSkuStyleStatus",[Je],Object.getOwnPropertyDescriptor(tp.prototype,"setSkuStyleStatus"),tp.prototype),tp),bp=n("XoXN"),kp=n("tehB"),Ip=n.n(kp),Sp=0,wp={},xp=a.a.memo(function(e){var t,n=e.checkQuantity,o=e.defaultQuantity,i=e.quantity,s=e.staticLimitQuantity,c=void 0===s?1:s,u=e.goodsNumber,p=e.onChangeGoodsNumber,m=e.detailId,f=e.mallId,h=e.goodsId,v=e.skuId,g=e.isMutliSku,y=Object(r.useState)(!1),_=T()(y,2),b=_[0],k=_[1],I=u>(g?0:1),S=u<1e5;if(v){var w=wp[v];t=n?w&&+w.nextQuantity||o:i,S=u<c&&u<t}var x=function(e){p(e)},C=function(e){e=+e||1,Ne("当前".concat(v?"款式":"商品","最多可拼").concat(e,"件")),p(e)},E=function(){var e=d()(l.a.mark(function e(){var r,a,i,s,d,p;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=++Sp,!S){e.next=3;break}return e.abrupt("return");case 3:if(!(c<t)){e.next=6;break}return C(c),e.abrupt("return");case 6:if(n&&o){e.next=9;break}return C(t),e.abrupt("return");case 9:if(!n||!o){e.next=27;break}if(!(a=wp[v])||0!==a.hasQuantity){e.next=14;break}return C(t),e.abrupt("return");case 14:return e.prev=14,e.next=17,Me({method:Ae.POST,url:"api/oak/quantity/check",data:{goods_id:h,sku_id:v,mall_id:f,detail_id:m,select_quantity:u,hostname:location.hostname}});case 17:if(i=e.sent,r===Sp){e.next=20;break}return e.abrupt("return");case 20:i&&i.next_quantity&&(s=i.next_quantity,d=i.has_quantity,wp[v]&&wp[v].nextQuantity>s||(wp[v]={nextQuantity:s,hasQuantity:d}),p=wp[v].nextQuantity,u>p?C(p):k(!b)),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(14),console.error(e.t0),C(t);case 27:case"end":return e.stop()}},e,null,[[14,23]])}));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(function(){v&&E()},[u]),a.a.createElement("div",{className:Ip.a.skuNumber},a.a.createElement("div",{className:L()(Ip.a.numberBtn,We()({},Ip.a.disable,!I)),onClick:function(){x(--u)}},a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},a.a.createElement("path",{d:"M1.496584 419.38597h1020.674909V605.567575H1.496584z"}))),a.a.createElement("input",{className:Ip.a.input,type:"number",maxLength:5,value:u,onBlur:function(){var e=Object(ge.a)();if(e.system===Ke.b.IOS&&Object(Ke.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo){var t=document.body.scrollTop+((document.documentElement||{}).scrollTop||0);window.scrollTo(0,t)}},onChange:function(e){var t=+e.target.value||1;x(t)}}),a.a.createElement("div",{className:L()(Ip.a.numberBtn,We()({},Ip.a.disable,!S)),onClick:function(){S?x(++u):Ne("当前".concat(v?"款式":"商品","最多可拼").concat(u,"件"))}},a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},a.a.createElement("path",{d:"M1022.592554 419.397698H605.345902V2.151046h-186.181605V419.397698H1.917645v186.181605h417.246652v417.246653h186.181605V605.579303H1022.592554z"}))))}),Cp=n("ZK0Z"),Ep=n.n(Cp),Pp=a.a.memo(function(e){var t=e.bottomDisplayItems;return(null===t||void 0===t?void 0:t.length)?a.a.createElement($e.a,{trackingInfo:{page_el_sn:6664147,op:"impr"}},a.a.createElement("div",{className:Ep.a.container},a.a.createElement("span",{className:Ep.a.content},t.map(function(e){var t=e.txt,n=e.color,r=e.font;return a.a.createElement("span",{style:{color:n,fontSize:r},key:t},t)})))):null}),Np=function(e){var t,n=e.allowOcHosts,r=e.goodsList,a=e.groupType,o=e.groupOrderId,i=e.forwardUrl,c=Object(C.g)(window.location.href),l={source_channel:11};if(1===(null===r||void 0===r?void 0:r.length)){var u=r[0],d=u.goodsId,p=u.goodsNumber,m=u.groupId,f=u.skuId;l=s()({},l,{sku_id:f,goods_number:p,goods_id:d,group_id:m,group_type:a,group_order_id:o,page_from:+c.page_from||0})}else{var h=function(e){var t={};if(!e)return t;var n=new RegExp(Co.OCPrefix);for(var r in e)r.startsWith(Co.OCPrefix)&&(t[r.replace(n,"")]=e[r]);var a=e[Co.PhoneCardId];return a&&(t[Co.PhoneCardId]=a),t}(Object(C.g)(i));i="transac_batch_checkout.html",l=s()({},l,{goods_list:JSON.stringify(r.map(function(e,t){var n=e.goodsId,r=e.goodsNumber,a=e.groupId,o=e.likeFrom,i=e.price;return{goods_id:n,sku_id:e.skuId,group_id:a,like_from:o||+c.like_from||0,goods_number:r,price:i,extend_map:s()({},h,{trace_mark:c._oc_trace_mark,trace_mark_extra:c._oc_trace_mark_extra})}})),page_from:+c.page_from||0})}Object.keys(c).forEach(function(e){var t=c[e];/^_oc_*/.test(e)&&t&&(l[e]=t)}),Object(ge.a)().isWeChatPlatform&&["mobile.yangkeduo.com","m.hutaojie.com","panduoduo.yangkeduo.com"].concat(It()(n||[])).indexOf(location.hostname)<0?(l.last_host=location.hostname,t="//mobile.yangkeduo.com/"+Object(C.a)(l,i)):t=Object(C.a)(l,i),Ia.a.uniformForward(t)},Op=n("32Nq"),Dp=n.n(Op),Tp=0,Ap=[{txt:"具体优惠见下单页"}],jp=a.a.forwardRef(function(e,t){var n=e.groupType,o=e.groupOrderId,i=e.groupId,s=e.goodsId,c=e.checkQuantity,u=e.detailId,p=e.mallId,m=e.forwardUrl,f=e.selectedSkuList,h=e.addSku,v=e.deleteSku,g=e.onClose,y=e.changeGoodsNumber,_=e.updateBottomDisplayItems,b=Object(r.useRef)({selectedSkuListLen:0}),k=a.a.createRef(),I=Object(r.useState)({orderAmount:0,bottomDisplayItems:[],promotionTakeInfoList:[],skuList:[]}),S=T()(I,2),w=S[0],x=S[1],E=function(){var e=d()(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(C.g)(window.location.href),e.next=3,Promise.race([Me({url:"api/oak/integration/multi_choose",method:Ae.POST,data:{goods_id:s,group_id:i,front_env:1,page_from:t.page_form,_oc_biz_type:t._oc_biz_type,cart_sku_list:f.map(function(e){var t=e.skuInfo,n=e.goodsNumber;return{sku_id:t.skuId,select_number:n}})}}),new Promise(function(e,t){setTimeout(function(){t()},3e3)})]);case 3:return n=e.sent,e.abrupt("return",Pe(n,["promotion_take_info_list"]));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)(function(){var e=function(){var e=d()(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=++Tp,e.prev=2,e.next=5,E();case 5:if(n=e.sent,t===Tp){e.next=8;break}return e.abrupt("return");case 8:if(!n||!n.orderAmount){e.next=13;break}x(n),n.bottomDisplayItems&&_(n.bottomDisplayItems),e.next=14;break;case 13:throw new Error(JSON.stringify(n));case 14:e.next=22;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0),r=f.reduce(function(e,t){return e+100*t.skuInfo.groupPrice*t.goodsNumber},0),x({orderAmount:r,bottomDisplayItems:Ap,promotionTakeInfoList:[],skuList:[]}),_(Ap);case 22:case"end":return e.stop()}},e,null,[[2,16]])}));return function(){return e.apply(this,arguments)}}();f.length&&e()},[f.length,f]),Object(r.useEffect)(function(){setTimeout(function(){b.current.selectedSkuListLen<f.length&&k.current.scrollTo(0,k.current.scrollHeight),b.current.selectedSkuListLen=f.length},0)},[f.length]);return a.a.createElement($e.a,{trackingInfo:{page_el_sn:6664150,op:"impr"}},a.a.createElement(X,{modalClassName:Dp.a.modalCartList,ref:t,afterShow:function(e){e&&Object(ke.a)(k.current)},titleClassName:Dp.a.titleCartSku,renderTitle:function(){return(null===f||void 0===f?void 0:f.length)?"已选".concat(null===f||void 0===f?void 0:f.length,"款商品"):"已选择款式"},onClose:g,renderContent:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Dp.a.cartContent,ref:k},!f.length&&a.a.createElement("div",{className:Dp.a.empty},a.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M842 152H182L2 452v375c0 24.853 20.145 45 45 45h930c24.851 0 45-20.147 45-45V452L842 152zm162.506 300H834.5V168.655L1004.506 452zM819.5 167v285H646.176C638.713 519.499 581.489 572 512 572s-126.716-52.501-134.176-120H204.5V167h615zm-630 1.654V452H19.494L189.5 168.654zM1007 827c0 16.568-13.433 30-30 30H47c-16.571 0-30-13.432-30-30V467h347.999C378.974 535.938 439.937 587 512 587c72.059 0 133.022-51.062 146.997-120H1007v360z"})),"还没有选择款式，快去选择吧"),a.a.createElement("div",{className:Dp.a.skuList},f.map(function(e){var t=e.skuInfo,n=e.goodsNumber,r=t.specs,o=t.thumbUrl,i=t.skuId,l=r.map(function(e){return e.spec_value}).join(", ");return a.a.createElement("div",{className:Dp.a.cartSkuItem,key:i},a.a.createElement("img",{src:Object(Ot.b)(o,{resizeWidth:300,quality:70,webpEnable:je(),sharpen:1})}),a.a.createElement("div",{className:Dp.a.skuSelectedRightDesc},a.a.createElement("div",{className:Dp.a.skuSelectedName},l),function(e){var t=e.skuId,n=e.groupPrice,r=(w.skuList||[]).find(function(e){return e.skuId===t})||{},o=r.goodsAmount,i=r.goodsAmountPrefix,s=r.promotionDisplayItems;return o?s?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:Dp.a.skuSelectedPricePrefix},s.map(function(e){var t=e.color,n=e.font,r=e.txt;return a.a.createElement("span",{style:{color:t,fontSize:n}},r)})),a.a.createElement("div",{className:Dp.a.skuSelectedPrice},i,"¥",Object(Be.b)(o))):a.a.createElement("div",{className:Dp.a.skuSelectedSinglePrice},a.a.createElement("span",{className:Dp.a.yen},"¥"),Object(Be.b)(o)):a.a.createElement("div",{className:Dp.a.skuSelectedSinglePrice},a.a.createElement("span",{className:Dp.a.yen},"¥"),n)}(t),a.a.createElement("div",{className:Dp.a.skuSelectedNum},a.a.createElement(xp,{checkQuantity:c,defaultQuantity:t.defaultQuantity,quantity:t.quantity,staticLimitQuantity:t.staticLimitQuantity,goodsNumber:n,onChangeGoodsNumber:function(e){if(0===e)return v(i),void Ne("该款式已删除");y({skuId:i,goodsNumber:e})},detailId:u,mallId:p,goodsId:s,skuId:i,isMutliSku:!0}))))})),a.a.createElement($e.a,{trackingInfo:{page_el_sn:6664215,op:"impr"}},a.a.createElement(bp.a,{className:L()(Dp.a.buyMoreBtn),borderRadius:".08rem",borderColor:"#e02e24",style:{marginTop:f.length?".3rem":".2rem"},onClick:function(){Le({page_el_sn:6664215,op:"click"}),h()}},a.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},a.a.createElement("path",{d:"M451.7 458.2V2h120.5v456.2H1022v120.6H572.3V1022H451.7V578.8H2V458.2h449.7z"})),f.length?"再选一款":"添加款式"))),!!f.length&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Pp,{bottomDisplayItems:w.bottomDisplayItems}),a.a.createElement($e.a,{trackingInfo:{page_el_sn:6664151,op:"impr"}},a.a.createElement("div",{"data-active":"red",className:Dp.a.cartBottomBtn,onClick:function(){var e=f.map(function(e){return{goodsId:s,skuId:e.skuInfo.skuId,groupId:i,goodsNumber:e.goodsNumber,price:Math.round(100*e.skuInfo.groupPrice)}});Le({page_el_sn:6664151,op:"click"},d()(l.a.mark(function t(){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===w||void 0===w?void 0:null===(r=w.promotionTakeInfoList)||void 0===r?void 0:r.length)){t.next=3;break}return t.next=3,zn({coupon_take_info_list:w.promotionTakeInfoList,mall_id:p,merchant_tag:71,like_from:101008});case 3:Np({forwardUrl:m,goodsList:e,groupType:n,groupOrderId:o});case 4:case"end":return t.stop()}},t)})))}},(null===w||void 0===w?void 0:w.orderAmount)?"合计¥".concat(Object(Be.b)(w.orderAmount),"，去结算"):"价格计算中..."))))}}))}),Rp=n("Z5Jv"),Lp=n.n(Rp),Mp=a.a.memo(function(e){var t=e.selectedSkuList,n=e.goToCartList,r=t.length;return a.a.createElement($e.a,{trackingInfo:{page_el_sn:6664149,op:"impr"}},a.a.createElement("div",{className:Lp.a.container},a.a.createElement("div",{className:Lp.a.content,onClick:function(e){Le({page_el_sn:6664149,op:"click"},function(){n&&n(e)})}},a.a.createElement("div",{className:Lp.a.spec},a.a.createElement("span",{className:Lp.a.specDesc},"已选择",r,"款："),t.map(function(e,t){var n=e.skuInfo,o=n.specs,i=n.thumbUrl,s=o.map(function(e){return e.spec_value}).join(" "),c=t===r-1;return a.a.createElement(a.a.Fragment,null,a.a.createElement("img",{src:Object(Ot.b)(i,{resizeWidth:300,quality:70,webpEnable:je(),sharpen:1})}),a.a.createElement("span",null,s),!c&&a.a.createElement("span",null,"，"))})),a.a.createElement("div",{className:Lp.a.button},"去结算",a.a.createElement(F,null)))))}),Bp=n("SOyx"),Fp=n.n(Bp),Up=a.a.forwardRef(function(e,t){var n=e.goods,o=e.group,i=e.onClose,s=e.confirmSkuCallBack,c=e.addIndex,l=e.selectOneValueCb,u=e.initShow,d=void 0!==u&&u,p=e.initSkuParams,m=e.selectedSkuList,f=e.goToCartList,h=e.bottomDisplayItems,v=Object(r.useRef)(),g=Object(r.useRef)();Object(r.useImperativeHandle)(t,function(){return{modalRef:v,skuRef:g}}),Object(r.useEffect)(function(){p&&g.current.selectSkuId(p)},[]);var y=Object(r.useCallback)(function(e){Object(P.b)({page_el_sn:6664145,op:"click",number:c}),s(e)},[s]);return a.a.createElement(X,{modalClassName:Fp.a.modalCartSku,ref:v,afterShow:function(e){e&&g.current.setScroll()},initShow:d,onClose:function(e){(null===m||void 0===m?void 0:m.length)>1?f():i(e)},titleClassName:Fp.a.titleCartSku,renderTitle:function(){return a.a.createElement($e.a,{trackingInfo:{page_el_sn:6664143,op:"impr"}},a.a.createElement("span",null,"请添加第",c,"款"))},renderContent:function(){return a.a.createElement(a.a.Fragment,null,!!(null===m||void 0===m?void 0:m.length)&&a.a.createElement(Mp,{selectedSkuList:m,goToCartList:f}),a.a.createElement($e.a,{trackingInfo:{page_el_sn:6664145,op:"impr"}},a.a.createElement(jn,{isMutliSku:!0,goods:n,group:o,confirmSkuCallBack:y,ref:g,selectOneValueCb:l,buttonText:"确定选择第".concat(c,"款"),renderSkuBottomTip:function(){return a.a.createElement(Pp,{bottomDisplayItems:h})}})))}})}),zp=a.a.memo(Up),Hp=n("RUUx"),Vp=n.n(Hp);!function(e){e[e.FromCart=0]="FromCart",e[e.FromSku=1]="FromSku"}(gp||(gp={}));var Gp=a.a.forwardRef(function(e,t){var n=e.groupType,o=e.groupOrderId,i=e.groupId,s=e.goodsId,c=e.mallId,l=e.detailId,u=e.checkQuantity,d=e.forwardUrl,p=e.goods,m=e.group,f=e.skuLen,h=e.limitQuantity,v=e.onClose,g=Object(r.useRef)(),y=Object(r.useRef)([]),_=Object(r.useRef)(),b=Object(r.useState)([]),k=T()(b,2),I=k[0],S=k[1],w=Object(r.useState)(x()(p,"ui.sku_section.new_multi_choose.default_bottom_display_items")),C=T()(w,2),E=C[0],P=C[1];Object(r.useImperativeHandle)(t,function(){return{enter:function(e){var t=e.skuId,n=e.goodsNumber,r=e.bottomDisplayItems;I.length>1?(y.current[A.length-1].modalRef.current.hide(),_.current.show(),g.current.enter()):(N({addFrom:gp.FromSku,initSkuParams:{skuId:t,goodsNumber:n},initShow:!0,addIndex:I.length+1,bottomDisplayItems:r}),g.current.enter(),_.current.hide())},exit:function(){g.current.exit()}}});var N=function(e){if(I.length>=h)Ne("最多可选择".concat(h,"款，已达上限"));else if(I.length>=f)Ne("所有可售款式已选完");else{var t=A.concat([e]);j(t)}},O=Object(r.useState)([]),D=T()(O,2),A=D[0],j=D[1];Object(r.useEffect)(function(){setTimeout(function(){if(A.length>0){if(A[A.length-1].addFrom===gp.FromCart)_.current.exit();else{var e=y.current[A.length-2];e&&e.modalRef.current.exit()}y.current[A.length-1].modalRef.current.enter()}},0)},[A.length]);var R=Object(r.useCallback)(function(e){var t,n=e.goodsNumber,r=e.skuInfo,a=I.find(function(e){return e.skuInfo.skuId===r.skuId});if(I.find(function(e){return e.skuInfo.skuId===r.skuId})){var o=+a.goodsNumber||0;a.goodsNumber=o+n,t="你已选择过该款式，数量已更新为".concat(a.goodsNumber,"件")}var i=I.concat([{skuInfo:r,goodsNumber:n}]);(S(a?It()(I):i),i.length<2&&f>=2)?N({addFrom:gp.FromSku,addIndex:i.length+1}):(y.current[A.length-1].modalRef.current.exit(),_.current.enterFromRight());t=t||"第".concat(i.length,"款选择成功"),Ne(t)},[I,N,y]),L=Object(r.useCallback)(function(e){var t=e.skuId,n=e.goodsNumber;I.find(function(e){return e.skuInfo.skuId===t}).goodsNumber=n,S(It()(I))},[I]),M=Object(r.useCallback)(function(){var e,t,n=null===(e=y.current[A.length-1])||void 0===e?void 0:null===(t=e.modalRef)||void 0===t?void 0:t.current;null===n||void 0===n||n.exit(),_.current.enterFromRight()},[]),B=Object(r.useCallback)(function(e){e&&P(e)},[]);return a.a.createElement(X,{ref:g,modalStyle:{height:"75%"},modalClassName:Vp.a.cartManagerModal,direction:"y",renderContent:function(){return a.a.createElement(a.a.Fragment,null,A.map(function(e,t){if(A.length-t>2)return null;var n=e.initSkuParams,r=e.initShow,o=e.addIndex,i=e.addFrom;return a.a.createElement(zp,{initShow:r,initSkuParams:n,key:t,ref:function(e){y.current[t]=e},goods:p,group:m,addIndex:o,confirmSkuCallBack:R,onClose:v,onBack:i===gp.FromCart&&function(){y.current[A.length-1].modalRef.current.exitToRight(),_.current.enter()},selectedSkuList:I,goToCartList:M,bottomDisplayItems:E})}),a.a.createElement(jp,{groupType:n,groupOrderId:o,limitQuantity:h,forwardUrl:d,goodsId:s,groupId:i,mallId:c,detailId:l,checkQuantity:u,ref:_,selectedSkuList:I,addSku:function(){N({addFrom:gp.FromCart,addIndex:I.length+1})},deleteSku:function(e){var t=I.filter(function(t){return t.skuInfo.skuId!==e});S(t)},changeGoodsNumber:L,onClose:v,updateBottomDisplayItems:B}))}})}),Wp=oi.getInstance(),qp=function(e){function t(e){var n;return m()(this,t),(n=g()(this,_()(t).call(this,e))).cartManagerBgRef=a.a.createRef(),n.cartManagerRef=a.a.createRef(),n.initOCManager=function(){var e=d()(l.a.mark(function e(t){var r,a,o,i,s,c,u,d,p,m,f,h,v,g,y,_,b,k;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.isSingleBuy,o=r.groupType,i=r.groupOrderId,s=r.defaultSkuId,c=r.communityId,u=r.ignoreGroupOrderIdInUrl,d=r.defaultGoodsNumber,p=n.checkDefaultSkuInfo(s,d),m=p&&s||n.initSelectedSkuId(),f=p&&d||n.getGoodsNumber(),h=n.props.goods||n.state.goods,v=function(e){n.setState({isMorganFetching:e})},g=function(e){n.setState({isMorganError:e})},y=function(e){if(e){var t=S()(e);(t||{}).isSingleBuy=a,n.setState({ocData:t},function(){var e=x()(t,"goodsInfo.goodsNumber");e&&n.setGoodsNumber(e),p&&n.recoverSkuInfo(s,d),p=!1})}else n.setState({ocData:null})},_=h.groupTypes[1],a&&(_=h.groupTypes[0]),Wp.init({updateOCDataFun:y,setMorganFetching:v,setMorganError:g,getSelectedSkuId:n.getSelectedSkuId,goods:h,groupType:o||t.groupType,orderExtraType:n.props.orderExtraType||t.orderExtraType||0,groupId:_.groupID,groupOrderId:i||t.groupOrderId,communityId:c,ignoreGroupOrderIdInUrl:u,sourceType:n.props.sourceType,ocExtend:n.props.ocExtend,hideSkuSelect:n.hide,paySuccessCb:n.props.paySuccessCb,pageFrom:n.props.pageFrom,sourceChannel:n.props.sourceChannel,frontEnv:n.props.frontEnv}),b=1===x()(h,"skus.length")||!(!p||!s),e.next=14,Wp.render({sku_id:m,goods_number:f,front_action:t.front_action||(b?Po.InitSkuSelected:Po.InitSku)},t.record_id);case 14:return k=e.sent,e.abrupt("return",k);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.initSelectedSkuId=function(){var e=n.props.goods||n.state.goods,t=n.getSelectedSkuID();if(!t){var r=x()(e,"skus").find(function(e){return e.quantity>0&&e.isOnsale})||[];t=r.skuID||r.skuId}return t},n.show=function(){var e=d()(l.a.mark(function e(t){var r,a,o,i,c,u,d,p,m,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(C.g)(window.location.href),a={},!(t||{}).isChangeToGroupBuy&&n.skuDirectOrder&&n.setState({recordId:null}),n.props.communityId&&!n.props.ignoreGroupOrderIdInUrl||!r.group_order_id||(a={groupOrderId:r.group_order_id});try{o=r.goods_list&&JSON.parse(r.goods_list),(i=o&&o[0])&&(a={groupOrderId:i.group_order_id,groupType:i.group_type,orderExtraType:i.order_extra_type})}catch(e){Object(E.c)(new Error("illegal_goods_list"))}if(Re.show(),!n.props.isRemote||n.state.isFetch){e.next=13;break}return e.next=9,n.loadGoods();case 9:if(e.sent){e.next=13;break}return Re.hide(),e.abrupt("return",!1);case 13:if(t&&"function"==typeof t.setStateCallback&&n.normalSkuRef.current.skuRef.current.setCustomState(t.setStateCallback),u=n.normalSkuRef.current.prepare(t),!u.needShow){e.next=34;break}if(!(t||{}).isChangeToGroupBuy||!n.skuDirectOrder){e.next=21;break}return d=Wp.recordId,e.next=20,n.initOCManager(s()({},a,{record_id:d,front_action:n.getSelectedSkuID()?Po.ChangeToGroup:Po.ChangeToGroupNoSku}));case 20:c=e.sent;case 21:if(!n.isShow){e.next=24;break}return Re.hide(),e.abrupt("return");case 24:if((t||{}).isChangeToGroupBuy||!n.skuDirectOrder){e.next=29;break}return e.next=27,n.initOCManager(a);case 27:c=e.sent,Wp.needReload&&(Wp.needReload=!1);case 29:Re.hide(),p=n.props,m=p.defaultSkuId,f=p.defaultGoodsNumber,n.checkDefaultSkuInfo(m,f)&&!n.skuDirectOrder&&n.recoverSkuInfo(m,f),n.skuBgRef.current.style.display="block",setTimeout(function(){n.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",n.normalSkuRef.current.enter(),we(),setTimeout(function(){Re.hide(),n.isShow=!0,c&&Oe(c)},200)},1);case 34:return e.abrupt("return",!0);case 35:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.hide=function(){var e=d()(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isShow){e.next=2;break}return e.abrupt("return");case 2:if(Ce(),!n.props.onHide){e.next=6;break}return e.next=6,n.props.onHide(t);case 6:n.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",n.normalSkuRef.current.exit(),n.cartManagerRef.current&&n.cartManagerRef.current.exit(),setTimeout(function(){n.isShow=!1,n.skuBgRef.current.style.display="none",Wp.needReload&&n.props.canReload&&Ao()},+n.props.delay||200);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleShowCart=function(e){var t=e.selectedSkuID,r=e.goodsNumber;n.cartManagerBgRef.current.style.display="block",setTimeout(function(){n.cartManagerBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",n.cartManagerRef.current.enter({skuId:t,goodsNumber:r})},200)},n.handleHideCart=function(e){e.stopPropagation(),n.cartManagerBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",n.cartManagerRef.current.exit(),setTimeout(function(){n.cartManagerBgRef.current.style.display="none"},200)},n.toggleShowPaymentList=function(e){n.setState({showPaymentList:e})},n.state={isFetch:!1,goods:null,ocData:null,recordId:"",isMorganFetching:!1,showPaymentList:!1,isMorganError:!1,agreeMentInfo:null},n}return k()(t,e),h()(t,[{key:"render",value:function(){var e=this;if(this.props.isRemote&&!this.state.goods)return null;var t=this.props.goods;this.props.isRemote&&(t=this.state.goods);var n=this.props,r=n.isSingleBuy,o=n.renderSkuBlackCard,i=n.groupOrderId,s=n.usePddNativePhoto,c=n.isOptSoldOut,u=n.groupType,p=t.groupTypes[1];r&&(p=t.groupTypes[0]);var m=this.state.isMorganFetching||this.state.isMorganError,f=this.skuDirectOrder&&(this.state.ocData||this.state.recordId),h=!!x()(t,"ui.sku_section.new_multi_choose.tip");return a.a.createElement("div",{ref:this.skuBgRef,className:L()(Ve.a.skuSelectorBg,"sku-plus1"),onClick:d()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.hide();case 1:case"end":return t.stop()}},t)}))},a.a.createElement(ae,{changeToGroupBuy:this.props.changeToGroupBuy,groupOrderId:i,ref:this.normalSkuRef,goods:t,ocData:this.state.ocData,group:p,handleShowCart:this.handleShowCart,onClose:this.onCloseNormalSku,renderSkuBlackCard:o,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,showPaymentList:function(){e.toggleShowPaymentList(!0)},skuDirectOrder:this.skuDirectOrder,usePddNativePhoto:s,isOptSoldOut:c,useNormalSkuData:m,isMorganFetching:this.state.isMorganFetching,recordId:this.state.recordId,setRecordId:function(t){e.setState({recordId:t})},consultPromotionPriceParams:this.props.consultPromotionPriceParams,showOCSkuSelector:f},f?a.a.createElement(_p,null):a.a.createElement(jn,null)),this.skuDirectOrder&&this.state.ocData&&a.a.createElement(ji,{ocData:this.state.ocData,visible:this.state.showPaymentList,toggleShowPaymentList:this.toggleShowPaymentList}),this.skuDirectOrder&&this.state.ocData&&a.a.createElement(uc,{ocData:this.state.ocData,disableForceUseBestPromotion:Wp.disableForceUseBestPromotion}),h&&a.a.createElement("div",{ref:this.cartManagerBgRef,className:Ve.a.cartManagerBg,onClick:this.handleHideCart},a.a.createElement(Gp,{goodsId:this.props.goods.goodsID,groupId:t.groupTypes[1].groupID,forwardUrl:x()(t,"destinationUrl"),limitQuantity:x()(t,"ui.sku_section.new_multi_choose.limit_quantity"),detailId:x()(t,"activity.detailID"),mallId:t.mallID,checkQuantity:t.checkQuantity,ref:this.cartManagerRef,skuLen:t.skus.filter(function(e){return+e.quantity>0}).length,groupType:u,groupOrderId:i,goods:t,group:t.groupTypes[1],onClose:this.handleHideCart})))}},{key:"skuDirectOrder",get:function(){return this.props.isRemote?this.props.skuDirectOrder&&x()(this.state,"goods.skuDirectOrder"):this.props.skuDirectOrder&&x()(this.props,"goods.skuDirectOrder")}}]),t}(Vn),Qp=n("N1ot"),Yp=n("+KkN"),Xp=n("E51d"),Jp=Object(o.c)(function(e){var t=Object(r.useRef)(null),n=e.shopCartStore,o=e.pageSn,i=e.oakStage,s=n.selectedGoods,c=n.isSkuShow,l=Object(r.useMemo)(function(){return{page_sn:o,_oak_stage:i,goods_id:null===s||void 0===s?void 0:s.goodsId,page_from:0,page_version:7}},[null===s||void 0===s?void 0:s.goodsId,o,i]),u=Object(Qp.a)(function(e){n.onAddGoodSku2Cart(e,s)});Object(r.useEffect)(function(){var e,n,r,a;c?null===(e=t.current)||void 0===e||null===(n=e.show)||void 0===n||n.call(e):null===(r=t.current)||void 0===r||null===(a=r.hide)||void 0===a||a.call(r)},[c]);var d=Object(Qp.a)(function(e){var t=e||{},n=t.errorCode,r=((t.response||{}).data||{}).error_msg;Object(Yp.h)(new Xp.c("sku拉起失败",n,r)),Object(oe.a)("活动太火爆了，请稍后再试")});return a.a.createElement(qp,{key:null===s||void 0===s?void 0:s.goodsId,onHide:n.hideSku,ref:t,isRemote:!0,params:l,isSingleBuy:!1,confirmOrder:u,loadGoodsFail:d})});t.default=Jp},asDA:function(e,t){e.exports=function(e,t,n,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}},bahg:function(e,t){e.exports=function(e){return e.split("")}},c3b3:function(e,t,n){e.exports={mainArea:"_2gfjGJi_",icon:"_1w7IKZX7",mobileClear:"_2-ahLH-f",horizontalScan:"_1pWAztc1"}},cBUB:function(e,t,n){e.exports={promotion:"NGUPfMa-",promotion3:"yPVq05d_",prefixPrice:"_3aTaNLaa",horizontalScan:"_28yvHDXV"}},cIxk:function(e,t,n){e.exports={dontUseItem:"_2qt2WU6J",label:"_3eLfDcZQ",horizontalScan:"_3Cgpg6Ao"}},"cq/+":function(e,t,n){var r=n("mc0g")();e.exports=r},dVn5:function(e,t){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(n)||[]}},dtTa:function(e,t,n){e.exports={usablePromotionItem:"TMkGqD8f",horizontalScan:"_3mTOA-hH"}},eJ5W:function(e,t,n){e.exports={container:"_30PbIoSp",icon:"_2G595Nyr",title:"_1ZZe67P-"}},efXN:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'@charset "UTF-8";\n\n/**\r\n * base.scss, 一些公共的代码\r\n * @author fushi(fushi@yiran.com)\r\n */\n\n/**\r\n * base variable\r\n */\n\n/**\r\n * function 区域\r\n */\n\n/**\r\n * mixin 区域\r\n */\n\n/**\r\n * 父元素必须是position: relative\r\n */\n\n/**\r\n * 字体icon\r\n */\n\n/**\r\n * flex 布局\r\n */\n\n/**\r\n * extend区域\r\n */\n\n/* move from _feature */\n\n/*原来的逻辑*/\n\n/*\r\n* 注意：需要按钮是position(absolute,relative)定位的,按钮没有宽高的，可能会出bug.\r\n* 按钮before已经有样式的就用data-active=after-{type}，after同理。\r\n* eg:<div data-active=\'before-red\'>button</div>\r\n* https://jira2.corp.yiran.com/browse/PDD-10191\r\n* 红色按钮 highlight状态增加 #000000 15%\r\n* 白色按钮 highlight状态增加 #000000 5%\r\n* 红色线框按钮 highlight状态增加 #E02E24 5%\r\n*/\n\n/**\r\n * @file variables.scss, 相关的变量\r\n * @author fushi(fushi@yiran.com)\r\n */\n\n/**\r\n * @file border1px.scss, 1px在devicePixelRatio>2的方案\r\n * @author fushi(fushi@yiran.com)\r\n * updated by shiluo 2020/03/16\r\n */\n\n/**\r\n * 支持设置border-radius的1px方案\r\n * 旨在解决Android下0.5px的进度问题! --from @在渊\r\n * 经测试 在部分OPPO、小米等机型微信环境中，仍然会有右下线框显示不全的bug。\r\n */\n\n/**\r\n * 支持设置border-radius的1px方案\r\n * radius-border1px有问题时可尝试使用此方法\r\n */\n\n::-webkit-input-placeholder {\n  color: #d2d2d2;\n}\n\n::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n  display: none;\n}\n\n.m-addr-main.m-addr-main {\n  position: fixed;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n  width: 3.2rem;\n  line-height: 1.5;\n  border-radius: .06rem;\n  background-color: #fff;\n  text-align: center;\n  color: #151516;\n  font-size: 0;\n}\n\n.m-addr-main.m-addr-main-list {\n  height: 4rem;\n}\n\n.m-addr-main.m-addr-main .input-error {\n  color: red;\n}\n\n.m-addr-main.m-addr-main .m-addr-close {\n  position: absolute;\n  padding: .185rem .14rem;\n  top: 0;\n  right: 0;\n}\n\n.m-addr-main.m-addr-main .m-addr-close::before {\n  content: \' \';\n  display: block;\n  width: 0.13rem;\n  height: 0.13rem;\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaAgMAAADUJKRdAAAACVBMVEUAAAAAAAAAAACDY+nAAAAAA3RSTlMAJhQjcpOHAAAAXElEQVQI1zWPsQ3AIAwErXQMkn3SBKVklCwRKQuwJ39Ih0A2vsd+6q+sY1Qntqu+N/Ec7OLSnuC+Dzk1GBpSiiAEYAQzGMEdjABstK7Od/axr3Ocqw996VPf/mMBTsMb0Z2N5NIAAAAASUVORK5CYII=");\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n}\n\n.m-addr-main.m-addr-main .m-addr-close:active::before {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaBAMAAABbZFH9AAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABnRSTlMAWTFQKiwiPbuUAAAAbElEQVQY02NwdmCAARYTBkMhOE9RmCFQUAHKYRIUBWIhmBRQHERApYQgJEwKSsEEITRcDMKACMEkIVIwSSWQFFxSECQFl0RIIXiYKhGmYNqAsB3TZQhXo/kI1bdoIeGIFEoiaCHoHADnsZoAAMzhDFutb7qxAAAAAElFTkSuQmCC");\n}\n\n.m-addr-main.m-addr-main .title-wrap-new {\n  padding-top: .13rem;\n  padding-bottom: .13rem;\n  position: relative;\n  border: none !important;\n}\n\n.m-addr-main.m-addr-main .title-wrap-new::after {\n  content: \'\';\n  display: block;\n  position: absolute;\n  top: 0;\n  right: -100%;\n  bottom: -100%;\n  left: 0;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  pointer-events: none;\n  -webkit-transform: scale(0.5);\n  transform: scale(0.5);\n  width: 200%;\n  box-sizing: border-box;\n  border-bottom: 1px solid #000000;\n  opacity: 0.05;\n  z-index: 1;\n  margin-left: .16rem;\n}\n\n.m-addr-main.m-addr-main .title-wrap-new::after {\n  width: 5.76rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-title {\n  position: relative;\n  height: .24rem;\n  line-height: .24rem;\n  font-size: .17rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-back:before {\n  content: "\\E61B";\n  font-size: 0.2rem;\n  color: #666666;\n  font-family: "icomoon";\n  line-height: 1;\n  font-weight: normal;\n  -webkit-font-smoothing: antialiased;\n}\n\n.m-addr-main.m-addr-main .m-addr-back::before {\n  position: absolute;\n  left: .12rem;\n  line-height: .24rem;\n}\n\n.m-addr-main.m-addr-main .m-address-receiver {\n  position: relative;\n  width: 100%;\n  text-align: left;\n}\n\n.m-addr-main.m-addr-main .m-addr-mobile,\n.m-addr-main.m-addr-main .m-addr-name {\n  height: .45rem;\n  padding: .1rem 0 .1rem .14rem;\n  font-size: .15rem;\n  line-height: normal;\n  position: relative;\n  display: inline-block;\n}\n\n.m-addr-main.m-addr-main .m-addr-name {\n  width: 50%;\n  text-align: left;\n  border-right: 1px solid #ededed;\n  border-radius: 0;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar {\n  position: relative;\n  text-align: left;\n  position: relative;\n  border: none !important;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar::after {\n  content: \'\';\n  display: block;\n  position: absolute;\n  top: 0;\n  right: -100%;\n  bottom: -100%;\n  left: 0;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  pointer-events: none;\n  -webkit-transform: scale(0.5);\n  transform: scale(0.5);\n  width: 200%;\n  box-sizing: border-box;\n  border-bottom: 1px solid #000000;\n  opacity: 0.05;\n  z-index: 1;\n  margin-left: .16rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar::after {\n  width: 5.76rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar.disabled .m-addr-input,\n.m-addr-main.m-addr-main .m-addr-bar.disabled .m-addr-select,\n.m-addr-main.m-addr-main .m-addr-bar.disabled .m-addr-textarea {\n  color: #58595B;\n  -webkit-text-fill-color: #58595B;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar.disabled .m-addr-more {\n  display: none;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-input,\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-select,\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-textarea {\n  min-height: 0.48rem;\n  width: 100%;\n  padding: .13rem 0.1rem .14rem .84rem;\n  font-size: .15rem;\n  text-align: left;\n  background: white;\n  line-height: .21rem;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-input::-webkit-input-placeholder,\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-select::-webkit-input-placeholder,\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-textarea::-webkit-input-placeholder {\n  color: #9c9c9c;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-textarea {\n  height: .68rem;\n  resize: none;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-more {\n  position: absolute;\n  margin-top: .15rem;\n  margin-right: 0.12rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-more:before {\n  content: "\\E617";\n  font-size: 0.12rem;\n  color: #d9d9d9;\n  font-family: "icomoon";\n  line-height: 1;\n  font-weight: normal;\n  -webkit-font-smoothing: antialiased;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-placeholder {\n  color: #9c9c99;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-input-clear {\n  position: relative;\n  width: .18rem;\n  height: .18rem;\n  border-radius: 100%;\n  background: #E0E0E0;\n  margin-top: .15rem;\n  margin-right: 0.12rem;\n  display: inline-block;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-input-clear::before {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  content: \' \';\n  display: block;\n  width: .08rem;\n  height: .08rem;\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAIVBMVEUAAAD////////////////////////////////////////PIev5AAAACnRSTlMA/PlYTeBJjlFLJ3eLCgAAAFFJREFUCNdjKG1gAAKOcIYoYRDDcCmD00IDBgZmKRUGFi1hoMAiBwaQEFAAKM2pJWy4aAJIYdJCKTUGEGDTWpSAYMClEIrh2uEGwq2AWwp3BgACixVjr7eXJwAAAABJRU5ErkJggg==");\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n}\n\n.m-addr-main.m-addr-main .m-addr-bar .m-addr-input-clear:active {\n  background-color: #C0C0C0;\n}\n\n.m-addr-main.m-addr-main .m-addr-text {\n  position: absolute;\n  top: 0.13rem;\n  left: 0.15rem;\n  font-size: 0.15rem;\n  line-height: 0.21rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-text {\n  position: absolute;\n  top: 0.12rem;\n  left: 0.15rem;\n  font-size: 0.15rem;\n  line-height: 0.15rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-mobile {\n  width: 48%;\n  text-align: left;\n}\n\n.m-addr-main.m-addr-main .m-addr-select:before {\n  position: absolute;\n  right: .12rem;\n  top: .18rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-select span {\n  display: inline-block;\n  color: #151516;\n  font-size: .15rem;\n  line-height: .43rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n  padding-right: .27rem;\n}\n\n.m-addr-main.m-addr-main .position-icon {\n  margin-right: .12rem;\n  width: .24rem;\n  height: .34rem;\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABECAMAAADwb0ZiAAAA51BMVEXgLiQXFxiampoqKiva2tq/v79TU1T///8VFRb+/v6bm5zd3d2Pj4/hNi21tbXgMCZRUVI/P0CGhobGxsbrd3HpZ2DmVExtbW6qqqpra2zt7e0fHyCOjo729vfvlI/0sq7hMin4zMnzran97Ov8+fgbGxxkZGWkpKWwsLDiPTSTk5T519XxnZj74+Hsfnd/f4A1NTZNTU7z8/P63t31ubbth4H75uVfX18tLS5zc3TPz88mJic6OjvJyclFRUbyp6LkRz/jQjnqbWbk5OS6urro6Oni4uLU1NSMjIzm5ubnXlbukIv2wr8Jy38pAAACxUlEQVR42tXUyXbaMBSAYZFA7lWpoXYwk8ts5gBhCgQCGZqQ8f2fpwfZSjRYbhfd9N+IY/uzJfkYAnqt5jjfr9f7+XGzBWo6aDxkyWfZh8YfwMglSu4oDtQsomXVjIBWSWRVagD8el1EgxoxVosCc8sMrHkEcElMrgZog8TWUAG48cBVAG1l40G2JQNoyotc1mpLeROaCsgRofzV8dBVngjlFCCetK4AmLDEmyigL5wbQ9hYONhXQF2err6wugLEp99C2K04TwXcyevTd+JOAW/ing+BNRTfzZsClkTovsE+1nsitFTAQnqtxK1WXSK1UIBvkdgsnwNxgeayOVDBnMQ210D8I3Kgg1GdGKuPIgC8m8E7RAE/Twzl/UgAQ8OkrCFEA2hGgw8wAbggetkLUEG8uIA4ALdZ7fp4AAtLegE1UIHWUPiW+h+gAb2W+7n/IzAAOVoNFjL24W8A/9j6CwAT0GvlHlpgAMb+P3DoTEBrkGLDblDWAbXbZVCaeZf0ODrY/QKzZNgAHf5zBkFd/MnGZ1x9gQzqZfhDE6/AutxSAZS+yZU4yGCh8oN1ilM2PjJQBLliCHw7kZ6dShVjwQCnoMXA+XexVM97PJ5Kt/GM7TcEVbq/GPDLvoNi1+H5PTLgYLjwHToMANBy+lgRJ2x8AlYJncQR9PiUTzAVAN4523Repd2hDJSxxO8w44BOHQ2AUwEGwF7T4F3YwMEzTjgQC8EEk8fhFa85oCeYYsAusLoyeER2oIddDmDarjAQVpJBObj1NR44SOMNZeCFBkmAT35tAwcTxG7MGqCTqBzX6XDw6l12vF0MGOAO4AU3HJSwV9l7RWoEm0IS4GZNQ5DBPYXyCu1CFNicBL3gno2UJD0vyXZtj4hb+2zVKXVWZxsOBijnk/Q2A0GHntOZ3qy3XrvdPnBwSMlRAk9g7KT3D/6XfgNpLG66SNEqqAAAAABJRU5ErkJggg==") no-repeat;\n  background-size: contain;\n  font-size: .12rem;\n  margin-top: .15rem;\n}\n\n.m-addr-main.m-addr-main .position-icon::before {\n  margin-left: 1px;\n}\n\n.m-addr-main.m-addr-main .position-icon.active {\n  top: .22rem;\n  width: .22rem;\n  height: .22rem;\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnCAMAAAC7faEHAAAAZlBMVEUAAABnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGlnaGnk4yF5AAAAInRSTlMAUi4EZtqxnkKPGnrrxwkOcRYRIic8MR42WUd9TKeDW8bBCbPWIwAAAaNJREFUOMuN1NmSgyAQheGD7W4GBNcks77/S05DK2WUmpr/IuHiQ1mqRCJN+EfUtu3fwsgvO71NSan2dlt3Z8Igy3TC3Tg6OJ1xCffBrj+4gdmYcObGmehcxjkk6tiVu6NRHpeIbtywOcvsvI2s+FHE/zW7Ato78mwJs+d647bgyplHBcMRtrWyWT93qDlxVIQai4Wdk+OVTbg6RALrQlJ45BRvj6AnYSYusBRoccyKGnBIfXvXv7jFq5nwku4vz6O6njQu2Tg1whdF730op8TcTNI8fNurLuyh9giPt5g5MVKxBRRZeXlxHZ1/cd6HZlyiMQsNhEOLOTurcan9KE8v1nmer+dj/iy5dxxbc+5rPK7jXobWy/M4FW9pFFVZGGUg0TpizKVlmydsBqaqquS7obuuM9C1QBLo1RePXcUN1DdPWHa937HyTotz5WcY5d65R9M0A3qGQ1jUPbd4afBMQbFTcB2HZE9mjd4c7uymFJsqbsLuqON0wjXMnogOE7t7woXNRselVijbyHB0iz/CRI7kWtnJRWv8FbFz+EduJlz6BVzEF8Pl29IZAAAAAElFTkSuQmCC") no-repeat;\n  background-size: contain;\n  -webkit-animation: position-rotate 2s infinite linear;\n  animation: position-rotate 2s infinite linear;\n}\n\n@-webkit-keyframes position-rotate {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes position-rotate {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion {\n  height: auto;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul {\n  overflow: scroll;\n  -webkit-overflow-scrolling: touch;\n  max-height: 3.48rem;\n  background-color: #fff;\n  border-bottom-right-radius: .06rem;\n  border-bottom-left-radius: .06rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li {\n  position: relative;\n  height: .63rem;\n  padding: .12rem 0 .05rem 0;\n  margin-left: .14rem;\n  text-align: left;\n  border-top: solid 1px #ededed;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li:first-child {\n  border-top: none;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li .m-addr-suggestion-title,\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li .m-addr-suggestion-address {\n  overflow: hidden;\n  -webkit-line-clamp: 3;\n  white-space: nowrap;\n  width: 2.62rem;\n  text-overflow: ellipsis;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li .m-addr-suggestion-title {\n  font-size: .15rem;\n  height: .21rem;\n  line-height: .21rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li .m-addr-suggestion-address {\n  font-size: .12rem;\n  height: .17rem;\n  line-height: .17rem;\n  color: #58595b;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li:before {\n  content: "\\E617";\n  font-size: 0.12rem;\n  color: #d2d2d2;\n  font-family: "icomoon";\n  line-height: 1;\n  font-weight: normal;\n  -webkit-font-smoothing: antialiased;\n}\n\n.m-addr-main.m-addr-main .m-addr-address-suggestion ul li:before {\n  position: absolute;\n  right: .12rem;\n  top: .25rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-save,\n.m-addr-main.m-addr-main .m-addr-save-new {\n  position: relative;\n  display: inline-block;\n  width: 2.9rem;\n  height: .43rem;\n  line-height: .42rem;\n  margin: .15rem 0;\n  font-size: .17rem;\n  color: #fff;\n  border-radius: .05rem;\n}\n\n.m-addr-main.m-addr-main .m-addr-save.active,\n.m-addr-main.m-addr-main .active.m-addr-save-new {\n  background-color: #e02e24;\n}\n\n.m-addr-main.m-addr-main .m-addr-save.active:active,\n.m-addr-main.m-addr-main .active.m-addr-save-new:active {\n  color: #edbbb8 !important;\n  background-color: #c51e14 !important;\n}\n\n.m-addr-main.m-addr-main .m-addr-save.inactive,\n.m-addr-main.m-addr-main .inactive.m-addr-save-new {\n  background-color: #ccc;\n}\n\n.m-addr-main.m-addr-main .m-addr-save-new {\n  height: 0.45rem;\n  margin: .16rem 0;\n}\n\n.m-addr-main-new.m-addr-main-new {\n  border-radius: 0.08rem;\n}\n\n.m-addr-main-new.m-addr-main-new.ios {\n  top: 12%;\n  transform: translateY(0);\n  -webkit-transform: translateY(0);\n}\n\n.m-addr-main-list.m-addr-main-list {\n  top: 50%;\n  transform: translateY(-50%);\n  -webkit-transform: translateY(-50%);\n}\n\n.m-addr-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 20;\n}\n\n.analyze-address-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n\n.m-addr-rec-triangle.m-addr-rec-triangle {\n  width: 0;\n  height: 0;\n  border-left: .08rem solid transparent;\n  border-right: .08rem solid transparent;\n  border-bottom: .06rem solid #fff;\n  position: absolute;\n  left: .9rem;\n  z-index: 13001;\n  border-radius: .04rem;\n}\n\n.m-addr-rec-circle-cover.m-addr-rec-circle-cover {\n  position: absolute;\n  top: .84rem;\n  left: .961rem;\n  width: .04rem;\n  height: .04rem;\n  border-radius: 50%;\n  z-index: 13002;\n  background-color: #fff;\n}\n\n.m-addr-rec-triangle-shadow.m-addr-rec-triangle-shadow {\n  border-bottom: 0.07rem solid rgba(0, 0, 0, 0.2);\n  -webkit-filter: blur(4px);\n  filter: blur(4px);\n}\n\n.m-addr-rec.m-addr-rec {\n  position: absolute;\n  left: .84rem;\n  color: #151516;\n  font-size: .14rem;\n  box-shadow: 0 0 0.08rem 0 rgba(0, 0, 0, 0.2);\n  border-radius: .04rem;\n  background-color: #fff;\n  z-index: 13000;\n}\n\n.m-addr-rec.m-addr-rec .m-addr-rec-wrap.m-addr-rec-wrap {\n  padding: 0 .12rem;\n}\n\n.m-addr-rec.m-addr-rec .m-addr-rec-wrap.m-addr-rec-wrap .m-addr-rec-text.m-addr-rec-text {\n  line-height: .14rem;\n  padding: .16rem 0;\n  text-align: left;\n}\n\n.m-addr-rec.m-addr-rec .m-addr-rec-wrap.m-addr-rec-wrap .m-addr-rec-text.m-addr-rec-text:not(:last-child) {\n  position: relative;\n  border: none !important;\n}\n\n.m-addr-rec.m-addr-rec .m-addr-rec-wrap.m-addr-rec-wrap .m-addr-rec-text.m-addr-rec-text:not(:last-child)::after {\n  content: \'\';\n  display: block;\n  position: absolute;\n  top: 0;\n  right: -100%;\n  bottom: -100%;\n  left: 0;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  pointer-events: none;\n  -webkit-transform: scale(0.5);\n  transform: scale(0.5);\n  width: 200%;\n  box-sizing: border-box;\n  border-bottom: 1px solid #000000;\n  opacity: 0.05;\n  z-index: 1;\n  margin-left: .16rem;\n}\n\n.m-addr-rec.m-addr-rec .m-addr-rec-wrap.m-addr-rec-wrap .m-addr-rec-text.m-addr-rec-text:not(:last-child)::after {\n  margin-left: 0;\n}\n\n.icon {\n  z-index: 1;\n}',""])},fo6e:function(e,t){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return n.test(e)}},g4LU:function(e,t,n){e.exports={popover:"_2sFbuBdZ",bg:"MfG-3mB1",bgShown:"V_7xRf2B",main:"_2aePaY0-",mainShown:"_2FXzOBOm",horizontalScan:"_3ACe8xlq"}},gQMU:function(e,t,n){var r=n("0ZTe")("toUpperCase");e.exports=r},gWL1:function(e,t,n){e.exports={bubbleContainer:"_3_Hv0n-A",recCardTriangle:"_3l7sd2NN",recList:"_3cGAdVdi",recCardItem:"_4rnWftx7",horizontalScan:"Gsxkb4zW"}},"gze+":function(e,t,n){e.exports={skuPreSaleTip:"ceMJmCmA",skuPreSaleTipOC:"whL73SdO"}},gzrZ:function(e,t,n){"use strict";n.r(t);var r=n("MVZn"),a=n.n(r),o=n("o0o1"),i=n.n(o),s=n("yXPU"),c=n.n(s),l=n("lwsE"),u=n.n(l),d=n("W8MJ"),p=n.n(d),m=n("mwIZ"),f=n.n(m),h=n("KoDT"),v=n("MpJ2"),g=n("h3qu"),y=(n("p+lt"),{fadeIn:function(e,t){t=t||{};var n=0;this.animate_({duration:t.duration,step:function(t){n+=t,e.style.opacity=n},complete:t.complete})},fadeOut:function(e,t){void 0!==t&&null!=t||(t={});var n=1;this.animate_({duration:t.duration,step:function(t){n-=t,e.style.opacity=n},complete:t.complete})},animate_:function(e){var t=this;(e=e||{}).duration=e.duration||300,null==e.easing&&(e.easing=function(e){return t.easing_.linear(e)}),e.lastProgress=e.easing(0);var n=Date.now(),r=setInterval(function(){var t=Date.now()-n,a=e.easing(Math.min(1,t/e.duration)),o=a-e.lastProgress;null!=e.step&&e.step(o),a>=1&&(clearInterval(r),null!=e.complete&&e.complete()),e.lastProgress=a},1e3/24)},easing_:{linear:function(e){return e}}}),_=document.createElement("div");_.innerHTML='<div class="icon-toast-container">\n    <div class="icon-toast">\n        <div class="icon-toast-background"></div>\n        <div class="icon-toast-box">\n            <i id="icon-toast-icon" class="icon icon-toast-icon"></i>\n        </div>\n        <div id="icon-toast-msg" class="icon-toast-msg"></div>\n    </div>\n</div>';var b=_.firstChild;document.body.appendChild(b);var k={show:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.showDuration||2e3,a=n.complete,o=n.forceH5,i=void 0!==o&&o,s=Object(h.a)(),c=s.isNativePlatform,l=Object(g.c)(s.version,"3.51.0")>=0;if(c&&!i)l?Object(v.g)("PDDUIController","showHUD",{type:1,duration:r,theme:1,message:t,complete:a}):(r=Math.max(r,1e3),Object(v.g)(s.system===g.b.Android?"JSAlert":"AMUIControl","toast",{message:t}),setTimeout(a,r));else{var u=this,d=document.querySelector(".icon-toast"),p=document.getElementById("icon-toast-msg"),m=document.getElementById("icon-toast-icon");n.extraClass&&m.classList.add(n.extraClass),m.innerHTML=e||"",p.innerHTML=t.replace(/\n/g,"<br/>"),d.style.display="block",d.style.opacity=0,y.fadeIn(d,{duration:300,complete:function(){r>=0&&setTimeout(function(){u.hide(function(){null!=n.complete&&n.complete()})},r)}})}},hide:function(e){var t=document.querySelector(".icon-toast");null!=t&&y.fadeOut(t,{duration:300,complete:function(){t.style.display="none",null!=e&&e()}})}},I=n("a1gu"),S=n.n(I),w=n("Nsbk"),x=n.n(w),C=n("7W2i"),E=n.n(C),P=n("q1tI"),N=n.n(P),O=n("i8i4"),D=n.n(O),T=n("2xwX"),A=n("J4zp"),j=n.n(A);n("1R20"),N.a.createElement("svg",{t:"1607528053620",className:"mianmi-spinner-icon ddpay",fill:"#ffffff",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35886",width:"84",height:"84"},N.a.createElement("path",{d:"M215.086545 111.86424234a83.316364 83.316364 0 0 1 95.883637 0.558546l159.371636 113.477818a83.362909 83.362909 0 0 0 96.814546 0l150.574545-107.426909a83.316364 83.316364 0 0 1 97.140364 0.279272l151.319272 109.149091c21.922909 15.825455 34.816 41.332364 34.536728 68.375273l-2.885818 271.778909a83.223273 83.223273 0 0 1-35.560728 67.304727l-64.698182 45.149091 4.235637-2.885818-346.577455 242.129455a83.362909 83.362909 0 0 1-96.954182-1.024l-400.896-292.957091A83.223273 83.223273 0 0 1 23.272727 557.76969734l2.885818-271.965091a83.223273 83.223273 0 0 1 35.74691-67.490909z m461.21891 255.394909l-180.596364 180.596364-93.556364-93.463273-47.802182 47.848727 141.079273 141.125819 228.491637-228.491637-47.616-47.616z","p-id":"35887"})),N.a.createElement("svg",{className:"mianmi-spinner-icon xyhf",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},N.a.createElement("path",{d:"M1005.943 775.828c-.949-1.694-2.088-3.241-3.475-4.57-3.416-3.227-8-5.241-13.067-5.241-2.248 0-4.38.452-6.394 1.182l-266.64 127.356c-3.314 1.212-6.891 1.913-10.629 1.913a30.836 30.836 0 0 1-16.965-5.067l-66.766-47.537a10.412 10.412 0 0 0-6.205-2.059c-5.723 0-10.366 4.643-10.366 10.366 0 1.49.38 3.008.993 4.366l56.59 124.158 1.357 2.978c3.548 6.322 10.293 10.6 18.06 10.6a20.64 20.64 0 0 0 9.33-2.234l2.277-1.314s305.33-189.522 306.41-190.296c4.804-3.46 7.958-9.052 7.958-15.418 0-3.343-.95-6.453-2.468-9.183",fill:"#25B513"}),N.a.createElement("path",{d:"M514.272 313.77c67.408 0 122.26 54.851 122.26 122.26 0 30.776-11.767 60.312-33.142 83.205l-2.014 2.16 1.693 2.424 107.573 153.636-43.523 30.47-108.872-155.49-1.577-2.248-2.613.905c-13.987 4.833-27.01 7.198-39.785 7.198-12.76 0-25.769-2.365-39.77-7.198l-2.614-.905-1.577 2.248-108.872 155.49-43.537-30.47L425.489 523.82l1.694-2.423-2.015-2.161c-21.374-22.893-33.156-52.443-33.156-83.205 0-67.409 54.852-122.26 122.26-122.26zm.006 53.137c-38.12 0-69.117 31.01-69.117 69.117 0 38.12 30.996 69.13 69.117 69.13 38.12 0 69.116-31.01 69.116-69.13 0-38.106-30.996-69.117-69.116-69.117zm494.554 101.535c7.213-8.906 10.235-20.338 8.293-31.332-1.942-11.008-8.687-20.703-18.513-26.601L861.65 328.282c-1.022-.818-2.54-3.446-2.716-4.38l-2.76-160.104c-.204-11.446-5.226-22.148-13.782-29.331-8.555-7.169-19.958-10.308-31.287-8.483l-157.783 25.039c-1.036-.102-4.16-.993-4.905-1.606L543.399 28.544c-7.519-8.644-18.235-13.608-29.404-13.608-11.184 0-21.9 4.964-29.42 13.608l-104.769 120.61c-.993.876-3.825 1.898-4.789 1.913L216.87 125.984c-11.315-1.796-22.718 1.3-31.273 8.483-8.556 7.183-13.593 17.885-13.783 29.331l-2.73 159.724c-.204 1.314-1.723 3.942-2.438 4.555L29.376 410.51c-9.825 5.898-16.57 15.593-18.512 26.601-1.942 10.994 1.08 22.426 8.293 31.346l100.58 124.1c.685 1.139 1.211 4.117 1.05 5.066l-52.15 151.373c-3.738 10.833-2.673 22.601 2.905 32.28 5.591 9.68 15.242 16.484 26.499 18.674l156.818 30.427c1.256.423 3.577 2.38 4.074 3.197l57.334 149.49c4.102 10.701 12.483 19.023 22.98 22.848 10.512 3.826 22.28 2.833 32.31-2.73l139.707-77.497c1.212-.467 4.22-.467 5.14-.16l92.053 51.056-39.64-86.958c-3.547-7.825-5.416-16.425-5.416-24.878 0-33.098 26.922-60.035 60.02-60.035 12.79 0 24.967 3.971 35.289 11.475l56.4 40.15L956.594 740.98l-49.305-143.007c-.248-1.3.278-4.278.745-5.11l100.798-124.421z",fill:"#25B513"})),N.a.createElement("img",{className:"mianmi-spinner-icon",src:"https://funimg.pddpic.com/transaction/pay_icon/mianmi.png.slim.png"});var R=n("HNyE"),L=n.n(R),M=N.a.createElement("svg",{t:"1631178532091",viewBox:"0 0 1024 1024"},N.a.createElement("path",{d:"M943.3 147.7C811.4 142 685 97.8 567.9 16.3L545.7 0.8l-22.1 15.4C406.4 97.8 280.1 142.1 149 147.7h-41.4v345.8c0 253.4 176.4 470.3 428.7 527.5l11 1.8 7.9-1.8c252.4-57.2 428.6-274.1 428.6-527.5V147.7h-40.5zM516.2 686.8L323.9 494.4l51.6-51.6 140.6 140.7 246.6-246.7 51.6 51.6-298.1 298.4z"}));var B=function(e){var t=e.title,n=e.callbacks,r=void 0===n?{}:n,a=Object(P.useState)(!0),o=j()(a,2),i=o[0],s=o[1];r.hideLoading=function(){return s(!1)},r.showLoading=function(){return s(!0)};var c={display:i?"block":"none",opacity:i?1:0};return N.a.createElement("div",{className:L.a.container,style:c},N.a.createElement("div",{className:L.a.icon},M),N.a.createElement("div",{className:L.a.title},t),N.a.createElement("div",{className:L.a.dot1}),N.a.createElement("div",{className:L.a.dot2}),N.a.createElement("div",{className:L.a.dot3}))},F=n("L/R6"),U=n.n(F),z=N.a.createElement("svg",{viewBox:"0 0 1024 1024"},N.a.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var H=function(e){var t=e.title,n=e.callbacks,r=void 0===n?{}:n,a=Object(P.useState)(!0),o=j()(a,2),i=o[0],s=o[1];r.hideLoading=function(){return s(!1)};var c={display:i?"block":"none",opacity:i?1:0};return N.a.createElement("div",{className:U.a.container,style:c},N.a.createElement("div",{className:U.a.icon},z),N.a.createElement("div",{className:U.a.title},t))},V=n("eJ5W"),G=n.n(V),W=N.a.createElement("svg",{viewBox:"0 0 1024 1024"},N.a.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var q=function(e){var t=e.title,n=e.payInfoTitle,r=e.callbacks,a=void 0===r?{}:r,o=Object(P.useState)(!0),i=j()(o,2),s=i[0],c=i[1];a.hideLoading=function(){return c(!1)};var l={display:s?"block":"none",opacity:s?1:0};return N.a.createElement("div",{className:G.a.container,style:l},N.a.createElement("div",{className:G.a.icon},W),N.a.createElement("div",{className:G.a.title},n),N.a.createElement("div",{className:G.a.title},t))},Q=n("whv1"),Y=function(){function e(t){u()(this,e),this.dom=t}return p()(e,[{key:"showSpinner",value:function(){Object(T.b)()}},{key:"hideSpinner",value:function(){Object(T.a)()}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"markSwitched",value:function(){}},{key:"markDuringMianmi",value:function(){}},{key:"markSignXianYongHouFu",value:function(){}},{key:"showSuccess",value:function(){}}]),e}(),X=function(e){function t(){var e,n;u()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=S()(this,(e=x()(t)).call.apply(e,[this].concat(a)))).callbacks={},n.switched=!1,n}return E()(t,e),p()(t,[{key:"markSwitched",value:function(){this.switched=!0}},{key:"show",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title,t=void 0===e?"免密支付中":e;Object(T.a)(),D.a.render(N.a.createElement(B,{title:t,callbacks:this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}},{key:"showSuccess",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.title,r=void 0===n?"支付成功":n,a=t.payInfoTitle;return this.switched?D.a.render(N.a.createElement(q,{payInfoTitle:a,title:r,callbacks:this.callbacks}),this.dom):D.a.render(N.a.createElement(H,{title:r,callbacks:this.callbacks}),this.dom),new Promise(function(t){setTimeout(function(){e.hide(),t()},1500)})}},{key:"hide",value:function(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}]),t}(Y),J=function(e){function t(e,n){var r;return u()(this,t),(r=S()(this,x()(t).call(this,e))).callbacks={},r.switched=!1,r.duringMianmi=!1,r.signXyhf=!1,r.renderProcess=Promise.resolve(),r.showSafeHint=n,r}return E()(t,e),p()(t,[{key:"markSwitched",value:function(){this.switched=!0}},{key:"markDuringMianmi",value:function(){this.duringMianmi=!0}},{key:"markSignXianYongHouFu",value:function(){this.signXyhf=!0}},{key:"getMianmiText",value:function(e){return e===Q.a.WeChat?"微信支付":e===Q.a.DuoDuoPay?"多多支付":e===Q.a.AliPayDirectDebit?"支付宝":void 0}},{key:"show",value:function(){var e=c()(i.a.mark(function e(){var t,n,r,a,o=this,s=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.title,r=void 0===n?"免密支付中":n,a=t.paymentType,Object(T.a)(),this.duringMianmi){e.next=6;break}this.realShow(r),e.next=10;break;case 6:if(!this.switched||this.signXyhf&&a===Q.a.XianYongHouFu){e.next=8;break}return e.abrupt("return");case 8:this.showSafeHint&&(this.showSafeHint=!1,this.renderProcess=this.renderProcess.then(function(){return o.realShow("安全检测通过"),new Promise(function(e){return setTimeout(e,600)})})),this.renderProcess=this.renderProcess.then(function(){return o.realShow(o.signXyhf&&a===Q.a.XianYongHouFu?r:o.getMianmiText(a)),new Promise(function(e){return setTimeout(e,600)})});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"realShow",value:function(e){D.a.render(N.a.createElement(B,{title:e,callbacks:this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}},{key:"showSuccess",value:function(){var e=c()(i.a.mark(function e(){var t,n,r,a,o=this,s=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.title,r=void 0===n?"支付成功":n,a=t.payInfoTitle,e.next=3,this.renderProcess;case 3:return this.switched?D.a.render(N.a.createElement(q,{payInfoTitle:a,title:r,callbacks:this.callbacks}),this.dom):D.a.render(N.a.createElement(H,{title:r,callbacks:this.callbacks}),this.dom),e.abrupt("return",new Promise(function(e){setTimeout(function(){o.realHide(),e()},1500)}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"hide",value:function(){var e=c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.renderProcess;case 2:this.realHide();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"realHide",value:function(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}]),t}(Y),K=new(function(){function e(){u()(this,e),this.el=null,this.renderer=null,this.currentPaymentType=null,this.startChannel=null,this.mianmiChannels=[]}return p()(e,[{key:"getDom",value:function(){return this.el||(this.el=document.createElement("div"),this.el.setAttribute("id","pdd-pay-loading-manager"),document.body.appendChild(this.el)),this.el}},{key:"dispose",value:function(){this.el&&document.body.removeChild(this.el),this.el=null}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.paymentType,n=e.mianmiV3,r=e.mianmiV3SafeHint;this.currentPaymentType=t;var a=this.getDom();this.renderer=n?new J(a,r):new X(a)}},{key:"showSpinner",value:function(){this.renderer.showSpinner()}},{key:"hideSpinner",value:function(){this.renderer.hideSpinner()}},{key:"markDuringMianmi",value:function(){this.renderer.markDuringMianmi()}},{key:"markSignXianYongHouFu",value:function(){this.renderer.markSignXianYongHouFu()}},{key:"show",value:function(e){this.renderer.show(a()({},e,{paymentType:this.currentPaymentType}))}},{key:"hide",value:function(){return this.renderer.hide()}},{key:"isMianmiChannelUsed",value:function(e){return this.startChannel===e||this.mianmiChannels.includes(e)}},{key:"recordMianmiChannel",value:function(e){this.mianmiChannels.push(e),this.renderer.markSwitched()}},{key:"showSuccess",value:function(e){return this.renderer.showSuccess(e)}},{key:"isSwitched",get:function(){return this.mianmiChannels.length>0}}]),e}()),Z=n("6B3Q"),$=n("NyLG"),ee=n("Ms5+"),te=function(e){var t={};return Object.keys(e).forEach(function(n){t[n]={code:n,message:e[n]}}),t}({1101:"手机网络繁忙，请稍后再试",30400:"没有安装QQ客户端",40000:"错误的请求地址或方法",40001:"登录已过期，请重新登录",40002:"手机网络繁忙，请稍后再试",40003:"错误的请求参数",40004:"微信登录失败",40005:"请求还在处理中",40006:"手机登录验证码错误",40100:"暂未开通该开放平台",40015:"验证码重复请求",40016:"验证码超出当天限制",40017:"今日可发送次数已达上限",40018:"验证码填写错误",40019:"验证码填写超时",40020:"登录失败",40031:"微信登录失败!",40032:"QQ登录失败!",40033:"登录重试失败，请稍后再试",43058:"",41001:"商品不存在",41002:"商品已下架",41003:"商品已售罄",41004:"商品不在同一商店",41005:"该商品当前不在抽奖活动时间",41006:"商品不在可售区域",41101:"抽奖活动暂不支持单独购买",41102:"卡券可使用的时间已过期，请选购其他商品",42001:"拼单已满",42002:"该拼单不存在",42003:"拼单已过期",42004:"您购买此商品次数达到上限，去看看其他商品吧~",42005:"该商品开团数已达上限",42006:"拼单已满",42007:"此拼单已满，正在发起新拼单...",42501:"订单已成团，暂不支持修改收货地址，请与商家客服联系",42502:"该订单已拼单成功，请刷新页面",43001:"用户不存在",43002:"地址错误",43004:"身份证号不存在",43005:"姓名和身份证号不一致",43006:"对不起，您无法获取或更新身份证号",43007:"对不起，您已用完当前最大验证次数，请24小时后再试",43008:"姓名和身份证不匹配，请重新认证",43009:"您今日认证过于频繁，请明天再试",43010:"该地址已存在",43011:"该地址无法导入",43013:"一小时内不能重复提交",43015:"只允许微信用户够买",43016:"创建地址失败",43017:"最多只能添加100个收货地址哦~",43098:"您在店铺没有拼单成功记录，请勿发红包！拼多多不支持通过发红包购买商品！",43099:"该商品仅限新用户购买一件哦~",44001:"优惠券不存在",44002:"优惠券已使用",44003:"优惠券没有达到最小使用金额",44004:"优惠券已过期",44005:"优惠券不属于用户",44006:"优惠券已废弃",44007:"优惠券暂未到使用时间",44008:"优惠券不能在该分类使用",44010:"优惠券已经抢完了，下次早点来哦",44011:"您已经领过该优惠券",44012:"优惠券领取失败",44015:"不是团长不能使用团长免单优惠券",44016:"优惠券批次不存在",44020:"正在处理中，请稍后再试！",44026:"该券太火爆，全部已被领完",44027:"活动已结束！",44033:"优惠券使用失败",44035:"批次类型错误",44036:"团免券已被领完",44037:"用户已达团免券日领取上限",44038:"您已领取该券",44039:"未找到符合条件的团免券批次",44041:"领取失败",44042:"领取链接已失效，下次早点哦",44043:"不符合领取条件哦",44044:"该优惠券活动不存在",44045:"不在活动时间",44046:"只有无订单的新用户可领取哦",44047:"红包券数量不够",44061:"多件优惠活动结束",44063:"多件优惠已经享受过了",44064:"多件优惠活动暂未开始",44065:"多件优惠活动暂未开始",44066:"多件优惠活动结束",44067:"商家券和多件优惠活动不能同时使用",44072:"分享码已过期",44073:"免拼卡不足",44076:"不符合免拼卡的使用条件",44090:"商品活动未开始",44091:"商品活动已结束",44092:"商品活动不存在",44093:"活动商品已售罄",44095:"商品活动已结束",44096:"商品活动不存在",44097:"您购买的该活动商品数量已达上限",44098:"商品订单已创建",44099:"商品活动有误",44100:"您未获取抢购资格，不可购买该商品",44200:"已达红包使用数量上限",44201:"每满{0}元可用{1}个红包",45001:"订单不存在",45002:"订单不属于该用户",45003:"订单不能取消",45004:"订单商品不一致",45005:"订单已经收货",45006:"订单还未发货",45007:"海淘订单没有提交身份证",45008:"订单已支付",45009:"支付繁忙，请重试",45010:"订单正在支付中",45012:"手机充值号码为空",45013:"手机充值号码不支持",45014:"手机充值商品不存在",45015:"确认收货失败",45023:"正在处理您的退款/售后申诉，无法主动确认收货",45026:"超过购买商品限制",45030:"订单正在处理中，请刷新页面",45031:"单次购买金额不得高于9.5万元",45033:"超过每个手机号码购买次数限制",45034:"抱歉，秒杀尚未开始，请稍候",45035:"该商品为App新人专享秒杀，非首次下载App24小时内的用户无法发起拼单",45036:"每名用户只能购买一次哦",45037:"你的当前登录帐号有些风险哦，建议先直接去充值吧",45038:"包月套餐订单购买免密校验失败",45039:"包月套餐功能升级中，当前只支持微信帐号登录的用户哦",45040:"限购商品暂时无法购买哦～",45041:"本次活动期间已抢到过一张神券，不能再抢了~",45042:"手机网络繁忙，请稍后再试",45043:"该类型商品本次活动期间您已抢过，不能再抢了~",45044:"您好，该商品仅可购买一次哦~",45045:"该商品仅能在拼多多App中购买！",45046:"该商品仅允许微信登录用户购买！",45047:"超过该商品每次购买件数限制",45050:"您已经在本场下过单了，去看看其他商品吧~",45051:"已购买过此类优惠商品，看看其他商品吧",45052:"您最近购买此商品次数达到上限，去看看其他商品吧~",45053:"手机网络繁忙，请稍后再试",45054:"需验证码校验！",45055:"手机网络繁忙，请稍后再试",45104:"不是定金类型订单",45105:"订单已取消",45106:"订单已确认",45107:"定金未成团",45206:"创建订单存在风险",45207:"创建订单验证码非法",45208:"价格有变动，请返回上一页查看",45209:"请更换支付方式，花呗分期暂不可用",45210:"手机网络繁忙，请稍后再试",45301:"店铺补差价金额达到上限！",45320:"未获取活动资格！",45321:"该活动必须是微信APP用户参加！",45322:"该活动同一用户不可重复参加！",45323:"该活动同一设备不可重复参加！",45324:"该活动用户微信置信度较低！",45325:"非APP新用户",45326:"手机网络繁忙，请稍后再试",45327:"账户存在风险，无法下单",45402:"该商品秒杀活动已结束",45403:"该商品免单活动已结束",45404:"该商品买二送一活动已结束",45405:"该商品秒杀活动已结束",45406:"该活动已结束",45407:"该活动已结束",45110:"未到尾款支付时间",45111:"超过尾款支付时间",45112:"未到定金支付时间",45113:"超过定金支付时间",45412:"该商品多件优惠活动已结束",45413:"该商品限时免单活动已结",45416:"该商品优惠活动已结束",45417:"该活动已结束",45418:"该优惠商品已被抢空",45420:"该活动已结束",45422:"该活动已结束",45423:"该活动已结束",45424:"该包月活动已结束",45425:"您向商家补的差价已经超过上限",45428:"该商品属于活动商品，无法正常购买",45429:"该地区暂时无货",45450:"此海淘商品仅支持微信支付",45500:"商品信息和充值号码不匹配",45501:"新地址暂不支持，请重新选择",45511:"您不是专属用户，不能以特惠价开团哦~",45514:"库存不足",45515:"低于最低起售件数",45516:"该商品有更低价的优惠活动，请刷新购买",46001:"团订单不存在",46002:"无法重复参团",46012:"商品售罄，免拼失败，拼单到期后将退款",46013:"秒杀活动结束，免拼失败，拼单到期后将退款",46014:"插队拼单已满",47003:"限量件数已被抢光，请重新选购",47101:"支付失败，限时折扣活动已结束",47102:"支付失败，限量折扣活动已结束，请重新购买",47010:"折扣活动检查失败",47011:"限时折扣活动已经使用",47012:"限时折扣活动未开启",47013:"限时折扣活动未到开始时间",47014:"限时折扣活动已经结束",47015:"商家券和限时折扣活动不能同时使用",47030:"已经催过了，正在尽快发货",47031:"催发货请求异常，请稍后重试",48001:"图片格式错误",48002:"图片大小超过限制",49001:"商品不存在",50000:"当前访问人数较多，请稍后再试",50001:"今天票数已用完，明天再来吧",50002:"当前有未完成的团",80001:"投票活动已结束",60000:"",60001:"该团已经结束",60002:"确认收货失败",60003:"参数错误",60004:"您已退款成功，无须确认收货",60005:"用户拒绝",60006:"用户取消",60007:"确认收货失败，请稍后重试",60100:"未安装微信客户端",60110:"未安装微博客户端",60120:"未安装手机QQ",60200:"录制失败",60201:"录音没有权限",60205:"录音时间过短",60210:"上传失败",60220:"播放失败",71001:"获取售后列表失败",71002:"申请售后失败",71003:"获取售后单详情失败",71004:"售后单添加售后信息失败",71005:"售后单修改失败",71006:"撤销售后失败",71007:"售后单用户确认发货失败",71008:"售后单重新申请失败",71009:"售后单申请平台介入失败",71010:"钱款去向查询失败",71011:"留言标记失败",71012:"售后用户待处理未读数量获取失败",71013:"售后未读留言数目获取失败",71014:"获取付款类型失败",71015:"获取售后原因失败",71016:"获取我要发货列表失败",71017:"获取是否使用平台优惠券失败",71018:"售后单用户确认完成失败",71019:"获取小额打款详情失败",71020:"填写账户信息失败",450130:"商品信息和充值号码不匹配",450131:"该商品每个号码每月限充一次",530001:"团不存在",530002:"团已失效",530003:"团已满",530004:"助力单不存在",530005:"不支持该支付方式",530006:"助力单已支付",530007:"助力单已退款",530008:"不在活动时间",530009:"您已经拿过该商品了，不要贪心哦",530010:"已达到今日帮忙付款次数上限，明日再来吧",530011:"已达到今日帮助该好友次数上限，明日再来吧~",530012:"已经达到帮助该好友支付次数上限，赶紧去帮助其他人吧~",530013:"不符合免费帮忙条件",530014:"您不是拼多多App新人，不能开团哦",144073:"您没有免拼卡，请返回重新下单",144076:"不符合免拼卡的使用条件",144078:"请求失败，请重新发起支付",152001:"限量折扣活动已经使用",152002:"限量折扣活动未开启",152003:"限量折扣活动未到开始时间",152004:"限量折扣活动已经结束",152005:"商家券和限量折扣活动不能同时使用",152006:"限量件数已被抢光，请重新选购",152010:"已达到该商品活动期内的最多购买件数，不能再抢了～",3000001:"充值失败，请稍后重试",3000002:"话费充值失败，请稍后重试",3000003:"话费充值下单失败，请稍后重试",400001:"微信零钱不足，且未绑定银行卡，请绑定银行卡再试，或邀请好友代付",400002:"银行卡余额不足，请绑定其他银行卡再试，或邀请好友代付",400003:"银行卡预留手机号不符，请核对后再试，或邀请好友代付",400004:"银行卡已失效，请核对后再试，或邀请好友代付",400005:"银行拒绝交易，请核对后再试，或邀请好友代付",400099:"支付未完成，请更换支付方式",4000004:"手机网络繁忙，请稍后再试",4000005:"手机网络繁忙，请稍后再试",4000006:"",20504101:"团订单不存在",20504005:"手机网络繁忙，请稍后再试",12960005:"商品不存在",12960006:"活动未开始",12960007:"商品已售罄",12960008:"拼单人数已满",12960009:"只有App新人才能参团哦",12960010:"帐号信息异常",12960012:"该商品一次只能购买1件哦",12960014:"请使用微信登录再下单",12960016:"你已经开过团了，请勿重复开团",12960017:"今日开团次数已用完，明天再来吧",12960018:"今日参团次数已用完，明天再来吧",12960019:"该商品你今日已经参过团了"}),ne={AuthenticationFailed:te[40001],APIServiceBusy:te[40002],GraphicalCodeForPhoneCode:te[40017],LoginFailed:te[40020],NeedAuthenticationLogin:te[43058],ItemRemoved:te[41002],OutOfStock:te[41003],NotInLuckyTime:te[41005],AddressUnreachable:te[41006],NoCouponLeft:te[44010],CouponTaken:te[44011],CouponTakeFailed:te[44012],CouponTakenOut:te[44026],PersonalInfoNoID:te[45007],OrderPayed:te[45008],NeedVerfication:te[45054],GroupInvalid:te[46001],GroupFailed:te[42003],OverBuyLimit:te[42004],GroupOverflow:te[42005],GroupAutoOpenFailed:te[42006],GroupAutoOpenSuccess:te[42007],IDCardEmpty:te[43004],NoNameIDBefore:te[43006],IDCardFake:te[43008],IDCardFailTooMuch:te[43009],InsufficientCoupon:te[44047],AvailableCouponsPerUnit:te[44201],NoSuchOrder:te[45001],PrepayBusy:te[45009],OrderPaying:te[45010],PaymentDisabled:te[45210],SpikeComing:te[45034],OrderPayRisk:te[45206],OrderPayVerificationInvalid:te[45207],OrderAlreadyUrged:te[47030],OrderUrgeError:te[47031],NativeNormalError:te[6e4],NativeParamsError:te[60003],NativeUserRefuse:te[60005],NativeUserCancel:te[60006],NativeAudioRecordFailed:te[60200],NativeAudioRecordUndetermined:te[60201],NativeAudioTooShort:te[60205],NativeAudioUploadFailed:te[60210],NativeAudioPlayFailed:te[60220],SuccessiveMobileFeeOnlyOnce:te[45036],SuccessiveMobileFeeRisk:te[45037],SuccessiveMobileFeeUnsigned:te[45038],SuccessiveMobileFeeOnlyWechat:te[45039],OverBuyVirtualGoodsLimit:te[45033],AvailableActivityChanged:te[45516],GroupCompleted:te[42001],InvalidAddress:te[43002],CouponDailyLimit:te[44037],CouponBatchLimit:te[44038],CouponTokenInvalid:te[44041],CouponTokenExpired:te[44042],CouponPushNotIn:te[44043],CouponActivityAbsent:te[44044],MultiplyDiscountPause:te[44064],MultiplyDiscountEnd:te[44066],CouponMaxNumReached:te[44200],HistoryGroupOpenFailed:te[46014],GoodsNotExist:te[49001],NativePaymentCancel:te[60006],WithoutWeChatClient:te[60100],QQPayFailed:te[60120],OrderLimitedSalesEnd:te[152004],OrderLimitedSalesOut:te[152006],PayLimitedSalesEnd:te[47102],PayLimitedSalesOut:te[47003],ServerBusy:te[4000004],OrderSpikeMsgError:te[4000006],WxDirectPayWxBalanceError:te[400001],WxDirectPayCardBalanceError:te[400002],WxDirectPayTelephoneError:te[400003],WxDirectPayCardInvalidError:te[400004],WxDirectPayRefusedError:te[400005],WxDirectPayUnknownError:te[400099],ACT_GROUP_NOT_EXISTS:te[530001],ACT_GROUP_FAILED:te[530002],ACT_GROUP_SUCCESS:te[530003],ACT_RECORD_NOT_EXISTS:te[530004],PAY_CHANNEL_NOT_SUPPORT:te[530005],ACT_RECORD_PAID:te[530006],ACT_RECORD_REFUND:te[530007],ASSIST_FOR_ONE_DAILY_LIMIT:te[530011],ASSIST_FOR_ONE_LIMIT:te[530012],getMsgFromCode:function(e){var t=te[e];return t?t.message:""}},re=n("4V74"),ae=n("Y2vK"),oe=function(){var e=Object(h.a)();return!!e.isNativePlatform&&Object(g.c)(e.version,"3.51.0")>=0},ie=function(){},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie;var n=Object(h.a)();n.isNativePlatform&&Object(g.c)(n.version,"3.65.0")>=0?e():t()},ce=function(){},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce;var n=Object(h.a)();if(n.isNativePlatform&&Object(g.c)(n.version,"3.2.0")>=0){var r="",a=n.system;a===g.b.IOS?r="alipays":a===g.b.Android&&(r="com.eg.android.AlipayGphone"),Object(v.g)("AMApplication","check",{app:r}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=parseInt(t.has_installed,10)||0;e(n?Q.a.AliPayDirectDebit:Q.a.AliPay)}).catch(function(){return e(Q.a.AliPay)})}else t()},ue=n("rIj9"),de=n("uf4C"),pe=null,me={post:function(e,t){if(!pe){var n=de.a.getInstance().getPageID();pe=Object(ue.a)({pageInfo:{pageId:n}})}return pe({method:"POST",url:e,data:t,defaultErrorHandler:function(){}}).catch(function(e){var t=e.errorCode,n=(e.response||{}).data;return Promise.reject({errorCode:t,errorObject:n})})}},fe=null,he={getInstance:function(){return fe||(fe=me),fe},setInstance:function(e){fe=e}},ve=n("qd0Q"),ge=n("jtE3"),ye=n("mj+i"),_e=n("ii9O"),be=n("b6XL"),ke=n("4+4F"),Ie=function(){return he.getInstance().post("api/qogir/payment/agreement/pay_score_query")},Se=function(e){var t,n=0;return Object(T.b)(),Object(ke.a)({payload:{event:"before_polling"}}),new Promise(function(r,a){var o=function(){return n+=1,Ie().then(function(e){e.success&&e.wx_signed&&(clearInterval(t),Object(T.a)(),r())}).catch(function(n){clearInterval(t),Object(T.a)(),n.scoreSignSdkSuccess=e,a(n)})};o(),t=setInterval(function(){if(Object(ke.a)({payload:{event:"default_polling",time:n}}),n<=4)o();else{clearInterval(t);var r=new Error("pay_score_query_timeout");r.errorCode=1005,r.scoreSignSdkSuccess=e,Object(T.a)(),a(r)}},800)})},we=function(){var e=c()(i.a.mark(function e(){var t,n,r,a,o,s,c,l,u=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.signScene,r=t.orderSn,a=t.antiContent,o=t.payTicket,!(s=Object(h.a)()).isNativePlatform){e.next=6;break}c="m.hutaojie.com"===location.hostname?"115":"122",e.next=12;break;case 6:if(!s.isPureWeChatPlatform){e.next=10;break}c="m.hutaojie.com"===location.hostname?"118":"130",e.next=12;break;case 10:throw Object(ge.a)("sub_pay_later.html?".concat(Object(ye.b)(Object(ye.g)(location.href)))).then(function(){},function(){_e.a.uniformForward("download.html")}),new Error("not_support_platform");case 12:return l={sign_app_id:c,sign_scene:n||1,anti_content:a,order_sn:r,ext_data:{pay_ticket:o}},e.abrupt("return",he.getInstance().post("api/qogir/payment/agreement/pay_score_sign",l));case 14:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).queryString,t=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i)[1];return Object(g.c)(t,"7.0.5")>=0?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).queryString;return new Promise(function(t,n){Object(ke.a)({payload:{event:"before_wx_score"}}),wx.checkJsApi({jsApiList:["openBusinessView"],success:function(r){r&&r.checkResult&&r.checkResult.openBusinessView&&wx.invoke("openBusinessView",{businessType:"wxpayScoreEnable",queryString:e},function(e){0===parseInt(e.err_code)?(Object(ke.a)({payload:{event:"wx_score_success"}}),t()):(Object(ke.a)({payload:{event:"wx_score_fail",payload:{event:e&&JSON.stringify(e)}}}),n(e))})}})})}({queryString:e}):(Object(be.a)("请将微信更新至最新版后再次尝试"),Promise.reject({errorHandling:{isErrorAlerted:!0}}))},Ce=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).response;return Object(ke.a)({payload:{event:"before_app_sign_score"}}),Object(v.g)("AMAgreement","sign",{type:3,params:e})},Ee=function(){var e=c()(i.a.mark(function e(){var t,n,r,a=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=t.response,!(r=Object(h.a)()).isNativePlatform){e.next=6;break}return e.abrupt("return",Ce({response:n}));case 6:if(!r.isPureWeChatPlatform){e.next=8;break}return e.abrupt("return",xe({queryString:n.query}));case 8:return e.abrupt("return",Promise.reject("Error_Platform"));case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=c()(i.a.mark(function e(){var t,n,r,a,o,s,l,u,d,p,m,f=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:{},n=t.signScene,r=t.antiContent,a=t.orderSn,o=t.pollingFun,s=t.payTicket,(l=Object(h.a)()).isNativePlatform||l.isPureWeChatPlatform){e.next=4;break}return e.abrupt("return",Promise.reject("Error_Platform"));case 4:return e.prev=4,e.next=7,we({signScene:n,antiContent:r,orderSn:a,payTicket:s});case 7:u=e.sent,e.next=19;break;case 10:if(e.prev=10,e.t0=e.catch(4),d=e.t0||{},410011!=+(p=d.errorCode)){e.next=18;break}return Object(ve.a)({title:"先用后付功能逐步开放中\n敬请期待"}),e.abrupt("return",Promise.reject({errorCode:p,errorHandling:{isErrorAlerted:!0}}));case 18:return e.abrupt("return",Promise.reject(e.t0));case 19:if(u&&u.success){e.next=21;break}throw new Error("pay_score_sign_error");case 21:return m=o||Se,e.abrupt("return",Ee({response:u}).then(c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.isPollingError=!0,e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}},e,null,[[0,5]])}))).catch(function(e){if((e||{}).isPollingError)throw e;return m(!1)}));case 23:case"end":return e.stop()}},e,null,[[4,10]])}));return function(){return e.apply(this,arguments)}}(),Ne=function(){function e(){u()(this,e)}return p()(e,[{key:"pay",value:function(){return Promise.reject({errorCode:0})}}]),e}(),Oe=n("cDf5"),De=n.n(Oe),Te=n("M2CY"),Ae=n("/4cJ"),je=function(){function e(t){var n=t.attributeFields,r=t.params,a=t.orderSn,o=t.url,i=t.prepayType;u()(this,e),this.attributeFields=n,this.paymentVersion=Ae.a.getSupportVersion(),this.params=r,this.url=o,this.orderSn=a,this.prepayType=i;var s=window.navigator.userAgent,c=!!s&&!(!s.match(/phh_ios_version/i)&&!s.match(/phh_android_version/i));this.config=Te.a.get({isModuleVersion:c,hostName:location.hostname})}return p()(e,[{key:"realPay",value:function(e){}},{key:"prepayParams",value:function(){return a()({pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:this.attributeFields},this.params)}},{key:"prepay",value:function(e){var t=this.prepayParams(),n=e&&"object"===De()(e)?a()({},e,{},t):t;return he.getInstance().post(this.prepayUrl,n).catch(function(e){var t=e.errorCode,n=e.errorObject;return Promise.reject({errorCode:t,errorObject:n})})}},{key:"pay",value:function(){var e=this;return this.prepay().then(function(t){return e.realPay(t)})}},{key:"appId",get:function(){return null}},{key:"prepayUrl",get:function(){if(this.url)return this.url;switch(this.prepayType){case $.a.Combine:return"api/vancouver/cart/prepay";case $.a.Tail:return"api/vancouver/final_pay_prepay";default:return"order/prepay"}}}]),e}(),Re=n("qnV/"),Le=function(e){function t(e){var n;return u()(this,t),(n=S()(this,x()(t).call(this,e))).prepayType=e.prepayType,n.additionalParams=e.additionalParams,n}return E()(t,e),p()(t,[{key:"realPay",value:function(e){}},{key:"pay",value:function(){var e=this;return new Promise(function(t,n){try{var r="/package_c/pay/pay?order_sn="+encodeURIComponent(e.orderSn);e.prepayType&&(r+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===De()(e.additionalParams)&&Object.keys(e.additionalParams).forEach(function(t){r+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.additionalParams[t]))}),window.wx.miniProgram.navigateTo({url:r,success:function(e){n({cancelled:!0,err_msg:-200})},fail:function(e){Object(ve.a)({title:"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(Re.c)(new Error("调起小程序支付失败_无法唤起")),n({cancelled:!0,err_msg:-400})}})}catch(e){Object(ve.a)({title:"系统繁忙, 请稍后再试(".concat(-500,")")});var a=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(Re.c)(new Error("调起小程序支付失败_内部错误"),{error_msg:a}),n({cancelled:!0,err_msg:-500})}})}}]),t}(je),Me=n("iWIM"),Be=n.n(Me);function Fe(e){Object(ke.a)({error_msg:e.errorMsg||"",payload:{event:"pay_code",payment_type:e.paymentType||0,code:e.errorCode||"",url:e.url||"",order_sn:e.orderSn||"",wait_time:e.waitTime||0,pay_source:e.paySource||0,error_msg:e.errorMsg||""}})}function Ue(e){!e.errorCode&&e.stack&&Object(ke.a)({error_msg:"@pdd/pay stack error",page:e.message+" "+JSON.stringify(e.stack)})}var ze,He=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"prepayParams",value:function(){return a()({},Be()(x()(t.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}},{key:"realPay",value:function(e){var t=this;return e.timestamp=e.timestamp.toString(),Object(v.g)("JSPay","pay",{type:Q.a.WeChat,params:e}).then(function(e){return Fe({paymentType:Q.a.WeChat,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var n=e.errorCode;return Object(ke.a)({payload:{event:"app_wechat_pay",order_sn:t.orderSn,error_code:n+""}}),Promise.reject({errorCode:n})})}},{key:"appId",get:function(){return this.config.AppID.WeChat}}]),t}(je),Ve=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"prepayParams",value:function(){return a()({},Be()(x()(t.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}},{key:"realPay",value:function(e){var t=this;return new Promise(function(n,r){var a=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp.toString(),nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},function(e){if(e&&"object"===De()(e)){if(Fe({paymentType:Q.a.WeChat,errorCode:e.err_msg+"",orderSn:t.orderSn}),"get_brand_wcpay_request:cancel"===e.err_msg)return e.cancelled=!0,void r(e);if("get_brand_wcpay_request:ok"===e.err_msg)return void n(e)}Object(Re.c)(new Error("WeixinJSBridge支付失败")),r(e)})};"undefined"==typeof WeixinJSBridge?Promise.race([new Promise(function(e){document.addEventListener("WeixinJSBridgeReady",e)}),new Promise(function(e,t){setTimeout(function(){"undefined"==typeof WeixinJSBridge?t():e()},2e3)})]).then(a).catch(function(){Object(Re.c)(new Error("WeixinJSBridge未定义")),r({errorCode:0})}):a()})}},{key:"appId",get:function(){return+Object(ye.g)(location.href).pay_app_id||this.config.AppID.WeChat}}]),t}(je),Ge=function(e){function t(e){var n;return u()(this,t),(n=S()(this,x()(t).call(this,e))).additionalParams=e.additionalParams,n}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return new Promise(function(n,r){var a=e.mweb_url;Fe({paymentType:Q.a.WeChat,url:a,orderSn:t.orderSn}),function(e){if((window.navigator.userAgent||"").toLowerCase().indexOf("oppo")>=0){var t=document.createElement("a")||{};t.href=e,t.click&&t.click()}else _e.a.reload(e)}(a)})}},{key:"pay",value:function(){if(localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={time:Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var n=Object(ye.h)("transac_wechat_wapcallback.html",a()({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise(function(e,t){_e.a.reload(n)})}return Be()(x()(t.prototype),"pay",this).call(this)}},{key:"appId",get:function(){return this.config.AppID.WeChatH5Pay}}]),t}(je),We=function(){function e(t){u()(this,e);var n=Object(h.a)(),r=n.isWeChatPlatform,a=n.isNativePlatform,o=n.isTinyNativePlatform;this.innerPay=null,this.innerPay=r?new Ve(t):a||o?new He(t):new Ge(t)}return p()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}(),qe=n("1tfv"),Qe=n("0mK9"),Ye=n("1KKG"),Xe=n("ZKQX"),Je=function(e){return Ie().then(function(t){return Object(ke.a)({payload:{event:"pay_score_query"+(t&&t.wx_signed),order_sn:e}}),t&&t.wx_signed}).catch(function(t){var n=t.errorCode;return Object(ke.a)({payload:{event:"@pdd/pay/pay_score_query_err",order_sn:e,error_code:n+""}}),!1})},Ke=function(e){var t=e.signScene,n=e.orderAmount,r=e.orderSn,a=e.scoreSignSdkSuccess,o=e.payTicket,i=e.switchToWechatIfSignXyhfFailed,s=function(){i?ze&&ze():Object(T.a)()};return i?(Object(T.a)(),ze&&ze(),ze=Object(Xe.a)(N.a.createElement(Ye.a,{style:{height:"1.2rem",width:"1.2rem"}},N.a.createElement("span",null,"订单已生成"),N.a.createElement("br",null),N.a.createElement("span",null,"正前往支付")))):Object(T.b)(),new Promise(function(e,i){var c,l=!1,u=0;c=setInterval(function(){if(u<=4)!function(){var d={pay_ticket:o,sign_scene:t,order_sn:r,order_amount:n,pull_scene:"after_sign",pull_times:u+=1};he.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",d).then(function(t){var n=t.signed,o=t.allow_create,d=t.forbid_create_code,p=t.forbid_create_reason;Object(ke.a)({payload:{event:"query_allow_sign_or_create_time_"+u,result:t&&JSON.stringify(t),order_sn:r}}),!l&&n&&(l=!0,clearInterval(c),s(),o?e():i({scoreSignSdkSuccess:a,errorCode:d,data:{errorCode:d,errorMsg:p}}))}).catch(function(e){var t=e.errorCode;Object(ke.a)({payload:{event:"@pdd/pay/query_allow_sign_or_create_err",order_sn:r,error_code:t+""}}),clearInterval(c),l||(l=!0,s(),e.scoreSignSdkSuccess=a,i(e))})}();else{clearInterval(c);var d=new Error("query_allow_sign_or_create_timeout");d.errorCode=1005,d.scoreSignSdkSuccess=a,Object(ke.a)({payload:{event:"@pdd/pay/query_allow_sign_or_create_timeout",order_sn:r}}),s(),i(d)}},800)})},Ze=function(){var e=c()(i.a.mark(function e(t){var n,r,a,o,s,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signScene,r=t.orderAmount,a=t.orderSn,o=t.antiContent,s=t.payTicket,c=t.switchToWechatIfSignXyhfFailed,l=function(e){return Ke({signScene:n,orderAmount:r,orderSn:a,scoreSignSdkSuccess:e,payTicket:s,switchToWechatIfSignXyhfFailed:c})},e.abrupt("return",Pe({signScene:n,antiContent:o,orderSn:a,pollingFun:l,payTicket:s}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),$e=function(){function e(t){u()(this,e),this.orderSn=t.orderSn,this.prepayType=t.prepayType,this.additionalParams=t.additionalParams,this.optionalParams=t.optionalParams,this.orderAmount=f()(this.optionalParams,"orderAmount")}return p()(e,[{key:"pay",value:function(){var e=this;return new Promise(function(t,n){try{var r="/package_c/pay_score_sign/pay_score_sign?order_sn=".concat(encodeURIComponent(e.orderSn),"&order_amount=").concat(encodeURIComponent(e.orderAmount));e.prepayType&&(r+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===De()(e.additionalParams)&&Object.keys(e.additionalParams).forEach(function(t){r+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.additionalParams[t]))}),window.wx.miniProgram.navigateTo({url:r,success:function(e){n({cancelled:!0,err_msg:-200})},fail:function(e){Object(ve.a)({title:"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(Re.c)(new Error("调起小程序支付失败_无法唤起")),n({cancelled:!0,err_msg:-400})}})}catch(e){Object(ve.a)({title:"系统繁忙, 请稍后再试(".concat(-500,")")});var a=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(Re.c)(new Error("调起小程序支付失败_内部错误"),{error_msg:a}),n({cancelled:!0,err_msg:-500})}})}}]),e}(),et=function(e){function t(e){var n;u()(this,t),n=S()(this,x()(t).call(this,e));var r=Object(h.a)(),a=Object(ye.g)(window.location.href);return n.isNative=r.isNativePlatform,n.isPureWeChatPlatform=r.isPureWeChatPlatform,n.isDdjbWeChatMiniProgram=r.isWeChatMiniProgram&&a._x_cmp_v&&a._x_cmp_v>=1640057746e3,n.isSupportSignXYHFVersion=Object(g.c)(r.version,"5.12.0")>=0,n.optionalParams=e.optionalParams,n.payTicket=f()(e,"attributeFields.pay_ticket"),n.options=e,n}return E()(t,e),p()(t,[{key:"realPay",value:function(){var e=c()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wait_time,r=+(r=void 0===n?2:n),Number.isInteger(r)||(r=1),Object(T.a)(),K.show({title:"0元下单中",icon:"xyhf"}),e.next=7,new Promise(function(e){return setTimeout(e,1e3*r)});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"signXianYongHouFu",value:function(){var e=f()(this.optionalParams,"signScene"),t=f()(this.optionalParams,"orderAmount"),n=f()(this.optionalParams,"antiContent"),r=f()(this.optionalParams,"switchToWechatIfSignXyhfFailed"),a=this.orderSn,o=this.payTicket;return Ze({signScene:e,orderAmount:t,orderSn:a,antiContent:n,payTicket:o,switchToWechatIfSignXyhfFailed:r})}},{key:"pay",value:function(){var e=c()(i.a.mark(function e(){var t,n,r=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f()(this.optionalParams,"isSignXianYongHouFu"),n=f()(this.optionalParams,"switchToWechatIfSignXyhfFailed"),!t||!(this.isNative&&this.isSupportSignXYHFVersion||this.isPureWeChatPlatform||this.isDdjbWeChatMiniProgram)){e.next=14;break}return e.next=5,Je(this.orderSn);case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",this.prepay().then(function(e){return r.realPay(e)}));case 8:if(!this.isDdjbWeChatMiniProgram){e.next=10;break}return e.abrupt("return",new $e(this.options).pay());case 10:return K.markSignXianYongHouFu(),e.abrupt("return",this.signXianYongHouFu().then(function(){return Object(T.b)(),r.prepay.bind(r,{prepay_front_supports:["credit_repay_idempotence"]})().then(function(e){return r.realPay(e)})}).catch(function(){var e=c()(i.a.mark(function e(t){var o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Object(h.a)(),s=o.isWeChatPlatform,!n||!s){e.next=9;break}return e.next=5,new Promise(function(e){Object(Qe.a)("先用后付不成功，正在切换微信支付...",{style:{maxWidth:"3rem"},onClose:e})});case 5:return Object(T.b)(),e.abrupt("return",new St(r.options).pay().then(function(e){return a()({},e,{xyhfSwitchedToWechat:!0})}));case 9:throw t;case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",this.prepay().then(function(e){return r.realPay(e)}));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"appId",get:function(){var e=Object(h.a)(),t=e.isWeChatPlatform,n=e.isWeChatMiniProgram;return"m.hutaojie.com"===location.hostname?n?119:t?118:115:n?131:t?130:122}}]),t}(je),tt=n("lSNA"),nt=n.n(tt),rt=4,at={CHANCE_EXCEEDED:"CHANCE_EXCEEDED",QOGIR_EXCEPTION:"QOGIR_EXCEPTION"};function ot(e){var t=e.orderSn,n=e.attrMap,r=e.payChannel,a=e.transactionId,o=e.waitTimeBeforeQuery,s=void 0===o?null:o,l={allowNextPoll:!0,forceStop:function(){l.allowNextPoll=!1},run:function(){return c()(i.a.mark(function e(){var o,c,u,d,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&+s>0)){e.next=3;break}return e.next=3,new Promise(function(e){return setTimeout(e,1e3*+s)});case 3:o=1;case 4:if(!(o<=rt)){e.next=21;break}if(l.allowNextPoll){e.next=7;break}return e.abrupt("return",{status:Z.a.UniversalException.QOGIR_PREMATURE_END});case 7:return e.prev=7,e.delegateYield(i.a.mark(function e(){var s,c,l,u,d,p,m,f,h;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.getInstance().post("api/qogir/payment/query/pappay",{order_sn:t,times:o,attr_map:n,channel:r,transaction_id:a});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(s=e.t0,c=s.status,l=s.wait_time,u=s.error_info,p=(d=u||{}).error_code,m=d.error_msg,f=d.change_card_pay,h=d.pap_pay_fail_map,Object(ke.a)({error_msg:"qogir-pulling-"+c,payload:{order_sn:t,times:o,qogir_err:u?"".concat(p," | ").concat(m):void 0}}),+c===Z.a.Universal.Paying){e.next=15;break}return e.abrupt("return",{v:{status:+c||0,errorInfo:{errorCode:p,errorMsg:m,changeCardPay:f,papPayFailMap:h,papPayFailCode:p},paySource:0}});case 15:return e.next=17,new Promise(function(e){return setTimeout(e,1e3*+l)});case 17:case"end":return e.stop()}},e)})(),"t0",9);case 9:if(c=e.t0,"object"!==De()(c)){e.next=12;break}return e.abrupt("return",c.v);case 12:e.next=18;break;case 14:return e.prev=14,e.t1=e.catch(7),u=e.t1||{},d=u.errorCode,p=u.message,e.abrupt("return",{status:Z.a.UniversalException.QOGIR_EXCEPTION,errorInfo:{errorCode:d,errorMsg:p},paySource:0});case 18:o++,e.next=4;break;case 21:return e.abrupt("return",{status:at.CHANCE_EXCEEDED,errorInfo:null,paySource:0});case 22:case"end":return e.stop()}},e,null,[[7,14]])}))()}};return l}function it(e){var t=e.orderSn,n=e.listenType,r=e.payChannel,o=Object(h.a)(),s=!1,l={},u=null,d=null;n===qe.a.WechatDirect?(l.type=n,u="PDDInbox",s=o.isNativePlatform&&Object(g.c)(o.version,"4.14.0")>=0,d="receiver"):(l.biz_type=n,u="PDDTitanPush",s=o.isNativePlatform&&Object(g.c)(o.version,"4.76.0")>=0,d="push_receiver");var p={receiverId:null,forceStop:function(){var e=a()({},l);s&&n!==qe.a.WechatDirect&&Object.assign(e,{receiver_id:p.receiverId}),Object(v.g)(u,"unregister",e)},run:function(){return c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",new Promise(function(e){Object(v.g)(u,"register",a()({},l,nt()({},d,function(n,a){var o=null,i=!1;try{o=JSON.parse(a.result[0].payload)}catch(e){i=!0}var s=o||{},c=s.status,l=s.error_info,u=s.order_sn,d=s.channel;if(n||!o)Object(ke.a)({error_msg:"push时查qogir失败",payload:{pinbridge_err:n?"Inbox监听异常":void 0,result_err:o?"Inbox回调数据异常":void 0,data_format_err:i?"Inbox回调数据格式不是JSON":void 0}});else{if(u!==t||d!==r)return void Object(ke.a)({error_msg:"错误的push数据",payload:{pushedOrderSn:u,pushedChannel:d}});var m=l||{},f=m.error_code,h=m.error_msg,v=m.change_card_pay,g=m.pap_pay_fail_map;Object(ke.a)({error_msg:"qogir-push-"+c,payload:{order_sn:t,qogir_err:l?"".concat(f," | ").concat(h):void 0}}),e({status:+c||0,errorInfo:{errorCode:f,errorMsg:h,changeCardPay:v,papPayFailMap:g,papPayFailCode:f},paySource:1})}p.forceStop()}))).then(function(e){p.receiverId=(e||{}).receiver_id})}));case 2:return e.abrupt("return",new Promise(function(e,t){}));case 3:case"end":return e.stop()}},e)}))()}};return p}var st,ct,lt=function(e){var t=Object(h.a)();return!!t.isNativePlatform&&Object(g.c)(t.version,e)>=0},ut=n("vBQ9"),dt=function(e){var t=e.errorMsg,n=e.cancelled,r=e.errorCode;return function(){var e=c()(i.a.mark(function e(a){var o,s,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.originTime,s=a.paySource,c=a.orderSn,Fe({paymentType:Q.a.DuoDuoPay,errorCode:r,orderSn:c,waitTime:Date.now()-o,errorMsg:t,paySource:s}),e.next=4,K.hide();case 4:return e.abrupt("return",Promise.reject({cancelled:n,errorCode:r}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},pt=dt({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),mt=(st={},nt()(st,Z.a.Universal.Success,function(e){var t=e.originTime,n=e.paySource,r=e.orderSn;return new Promise(function(){var e=c()(i.a.mark(function e(a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Fe({paymentType:Q.a.DuoDuoPay,errorCode:0,orderSn:r,waitTime:Date.now()-t,paySource:n}),e.next=3,K.showSuccess({payInfoTitle:"多多支付",title:"支付成功"});case 3:a();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),nt()(st,Z.a.UniversalException.CHANCE_EXCEEEDED,dt({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1})),nt()(st,Z.a.UniversalException.QOGIR_EXCEPTION,dt({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1})),nt()(st,Z.a.Universal.NotFound,dt({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1})),nt()(st,Z.a.Universal.Failed,function(){var e=c()(i.a.mark(function e(t){var n,r,a,o,s,l,u,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.originTime,r=t.paySource,a=t.orderSn,o=t.errorMsg,s=t.changeCardPay,l=t.changeCardCallback,u=t.getAutoSwitchPay,!(d=u()).isAutoSwitchEnabled){e.next=4;break}return e.abrupt("return",d.performAutoSwitchPay());case 4:return e.abrupt("return",new Promise(function(){var e=c()(i.a.mark(function e(t,u){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Fe({paymentType:Q.a.DuoDuoPay,errorCode:0,orderSn:a,waitTime:Date.now()-n,paySource:r}),e.next=3,K.hide();case 3:1==+s&&lt("5.45.0")?Object(ut.a)({title:o||"免密支付失败，请重试",onCancel:function(){u({cancelled:!0})},onClose:function(){u({cancelled:!0})},onConfirm:function(){var e=c()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:n=e.sent,t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),cancelButtonLabel:"取消",confirmButtonLabel:"换卡支付"}):Object(ve.a)({title:o||"免密支付失败，请重试",onConfirm:function(){u({cancelled:!1,errorCode:-1})},onClose:function(){u({cancelled:!1,errorCode:-1})}});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),st),ft=function(e){function t(e){var n;return u()(this,t),n=S()(this,x()(t).call(this,e)),e=e||{},n.attrMap=e.attrMap,n.isSupportDirectPay=e.isSupportDirectPay,n.isSupportChangeCard=lt("5.45.0"),n.autoSwitchPay=new kt(e,n.appId),n}return E()(t,e),p()(t,[{key:"prepayParams",value:function(){return a()({},Be()(x()(t.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields)})}},{key:"realPay",value:function(e,t){return 1==+e.is_pap_pay?this.handleDirectPay():this.handleNormalPay(e,t)}},{key:"handleNormalPay",value:function(e,t){var n=this,r=a()({},e);if(t){var o=t.changeCardPay,i=t.papPayFailMap,s=t.papPayFailCode;o&&(r.change_card_pay=o),i&&Object.assign(r,i),s&&(r.pap_pay_fail_code=s)}return Object(v.g)("JSPay","pay",{type:Q.a.DuoDuoPay,params:r}).then(function(e){return Fe({paymentType:Q.a.DuoDuoPay,errorCode:"0",orderSn:n.orderSn}),e}).catch(function(e){Ue(e);var t=e.data,r=e.errorCode;return Fe({paymentType:Q.a.DuoDuoPay,errorCode:r+"",orderSn:n.orderSn,errorMsg:e.toJSON&&JSON.stringify(e.toJSON())}),Promise.reject({errorCode:r,data:t})})}},{key:"handleDirectPay",value:function(){var e=c()(i.a.mark(function e(){var t,n,r,a,o,s,c,l,u,d,p,m,f,h,v,g,y=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),n=ot({orderSn:this.orderSn,payChannel:"DUODUOPAY",attrMap:this.attrMap}),r=it({orderSn:this.orderSn,listenType:qe.a.UniversalPay,payChannel:"DUODUOPAY"}),e.prev=3,K.hideSpinner(),K.markDuringMianmi(),K.show({title:"免密支付中",icon:"ddpay"}),e.next=9,Promise.race([n.run(),r.run()]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:return a=e.t0,o=a.status,s=a.errorInfo,c=a.paySource,u=(l=s||{}).errorMsg,d=l.changeCardPay,p=l.papPayFailMap,m=l.papPayFailCode,e.abrupt("return",(mt[o]||pt)({originTime:t,paySource:c,orderSn:this.orderSn,errorMsg:u,changeCardPay:d,changeCardCallback:this.pay.bind(this,{changeCardPay:d,papPayFailMap:p,papPayFailCode:m}),getAutoSwitchPay:function(){return y.autoSwitchPay}}));case 20:e.prev=20,e.t1=e.catch(3),f=e.t1||{},h=f.message,v=f.stack,g=f.errorCode,Object(ke.a)({error_msg:"poller与listener内部错误",payload:{message:g||v||h}});case 24:return e.prev=24,n.forceStop(),r.forceStop(),e.finish(24);case 28:case"end":return e.stop()}},e,this,[[3,20,24,28]])}));return function(){return e.apply(this,arguments)}}()},{key:"pay",value:function(e){var t=this;return this.prepay().then(function(n){return Object(T.a)(),t.realPay(n,e)})}},{key:"appId",get:function(){return 97}}]),t}(je),ht=function(e){var t=e.errorMsg,n=e.cancelled,r=e.errorCode;return function(){var e=c()(i.a.mark(function e(a){var o,s,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.originTime,s=a.paySource,c=a.orderSn,Fe({paymentType:Q.a.AliPayDirectDebit,errorCode:r,orderSn:c,waitTime:Date.now()-o,errorMsg:t,paySource:s}),e.next=4,K.hide();case 4:return e.abrupt("return",Promise.reject({cancelled:n,errorCode:r}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},vt=ht({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),gt=(ct={},nt()(ct,Z.a.Universal.Success,function(e){var t=e.originTime,n=e.paySource,r=e.orderSn;return new Promise(function(){var e=c()(i.a.mark(function e(a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Fe({paymentType:Q.a.AliPayDirectDebit,errorCode:0,orderSn:r,waitTime:Date.now()-t,paySource:n}),e.next=3,K.showSuccess({payInfoTitle:"支付宝",title:"支付成功"});case 3:a();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),nt()(ct,Z.a.UniversalException.CHANCE_EXCEEEDED,ht({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1})),nt()(ct,Z.a.UniversalException.QOGIR_EXCEPTION,ht({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1})),nt()(ct,Z.a.Universal.NotFound,ht({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1})),nt()(ct,Z.a.Universal.Failed,function(){var e=c()(i.a.mark(function e(t){var n,r,a,o,s,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.originTime,r=t.paySource,a=t.orderSn,o=t.errorMsg,s=t.getAutoSwitchPay,!(l=s()).isAutoSwitchEnabled){e.next=4;break}return e.abrupt("return",l.performAutoSwitchPay());case 4:return e.abrupt("return",new Promise(function(){var e=c()(i.a.mark(function e(t,s){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Fe({paymentType:Q.a.AliPayDirectDebit,errorCode:0,orderSn:a,waitTime:Date.now()-n,paySource:r}),e.next=3,K.hide();case 3:Object(ve.a)({title:o||"免密支付失败，请重试",onConfirm:function(){s({cancelled:!1,errorCode:-1})},onClose:function(){s({cancelled:!1,errorCode:-1})}});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),ct),yt=Z.a.AliPayDirectDebit,_t=function(e){function t(e){var n;return u()(this,t),n=S()(this,x()(t).call(this,e)),e=e||{},n.attrMap=e.attrMap,n.isSupportDirectPay=e.isSupportDirectPay,n.autoSwitchPay=new kt(e,n.appId),n}return E()(t,e),p()(t,[{key:"prepayParams",value:function(){var e=this.config.RedirectURI.AliPayDirectDebit;return a()({},Be()(x()(t.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields),return_url:e,request_from_url:e})}},{key:"handleAsyncDirectPay",value:function(){var e=c()(i.a.mark(function e(t){var n,r,a,o,s,c,l,u,d,p,m,f,h,v,g=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transactionId,r=t.waitTime,a=Date.now(),o=ot({orderSn:this.orderSn,payChannel:"ALIPAY",attrMap:this.attrMap,transactionId:n,waitTimeBeforeQuery:r}),s=it({orderSn:this.orderSn,listenType:qe.a.UniversalPay,payChannel:"ALIPAY"}),e.prev=4,K.hideSpinner(),K.markDuringMianmi(),K.show({title:"免密支付中"}),e.next=10,Promise.race([o.run(),s.run()]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:return c=e.t0,l=c.status,u=c.errorInfo,d=c.paySource,p=(u||{}).errorMsg,e.abrupt("return",(gt[l]||vt)({originTime:a,paySource:d,orderSn:this.orderSn,errorMsg:p,getAutoSwitchPay:function(){return g.autoSwitchPay}}));case 21:e.prev=21,e.t1=e.catch(4),m=e.t1||{},f=m.message,h=m.stack,v=m.errorCode,Object(ke.a)({error_msg:"poller与listener内部错误",payload:{message:v||h||f}});case 25:return e.prev=25,o.forceStop(),s.forceStop(),e.finish(25);case 29:case"end":return e.stop()}},e,this,[[4,21,25,29]])}));return function(t){return e.apply(this,arguments)}}()},{key:"realPay",value:function(e){var t=this;return 1==+e.is_pap_pay?this.handleAsyncDirectPay({transactionId:e.transaction_id,waitTime:e.wait_time}):new Promise(function(){var n=c()(i.a.mark(function n(r,a){var o,s,l,u,d,p;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=Q.a.AliPayV2,s=!1,l=!1,(u=parseInt(e.status,10))===yt.Unsign?d=e.data:u!==yt.Rollback&&u?u!==yt.Failed&&u!==yt.Unknown||(l=!0):(delete(d=e).status,s=!0),d){n.next=25;break}if(!l){n.next=20;break}if(Fe({paymentType:o,errorCode:u,orderSn:t.orderSn}),u!==yt.Success){n.next=15;break}if(K.isSwitched){n.next=12;break}return n.next=12,K.hide();case 12:r(),n.next=18;break;case 15:return n.next=17,K.hide();case 17:a({errorCode:u});case 18:n.next=24;break;case 20:Object(T.a)(),K.markDuringMianmi(),K.show(),setTimeout(c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Fe({paymentType:o,errorCode:u,orderSn:t.orderSn}),![yt.Success,yt.Paying].includes(u)){e.next=8;break}if(K.isSwitched){e.next=5;break}return e.next=5,K.hide();case 5:r(),e.next=11;break;case 8:return e.next=10,K.hide();case 10:a({errorCode:u});case 11:case"end":return e.stop()}},e)})),u===yt.Paying?4e3:2e3);case 24:return n.abrupt("return");case 25:p=s?o:Q.a.AliPayDirectDebit,Object(v.g)("JSPay","pay",{type:p,params:d}).then(function(e){Fe({paymentType:p,errorCode:"0",orderSn:t.orderSn}),r()}).catch(function(e){Ue(e);var n=e.errorCode;function r(){a({errorCode:n})}Fe({paymentType:p,errorCode:n+"",orderSn:t.orderSn}),n!==parseInt(ne.NativePaymentCancel.code,10)||p!==Q.a.AliPayDirectDebit?r():he.getInstance().post("payment/agreement/reset",{app_id:t.appId}).then(r,r)});case 27:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}},{key:"appId",get:function(){return this.config.AppID.AliPayDirectDebit}}]),t}(je);function bt(e){switch(e){case Q.a.WeChat:return"WEIXIN";case Q.a.AliDirectDebitPay:return"ALIPAY";case Q.a.DuoDuoPay:return"DUODUOPAY";default:return""}}var kt=function(){function e(t,n){u()(this,e),this.options=a()({},t,{attributeFields:a()({},t.attributeFields,{pappay_poll_mode:"T"})}),this.lastPayAppId=n}return p()(e,[{key:"getAutoSwitchChannel",value:function(){var e=c()(i.a.mark(function e(){var t,n,r,a,o,s,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAutoSwitchEnabled){e.next=2;break}return e.abrupt("return",{});case 2:return t=f()(this.options,"attributeFields.pay_ticket"),n=f()(this.options,"optionalParams.signScene"),r=f()(this.options,"optionalParams.orderAmount"),a=this.options.orderSn,e.prev=6,e.next=9,he.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",{pay_ticket:t,last_pay_app_id:this.lastPayAppId,sign_scene:n,order_amount:r,order_sn:a});case 9:if(o=e.sent,c=(s=o||{}).allow_all_pay,l=s.next_channel,u=s.all_pay_type,Object(ke.a)({error_msg:"查询下个免密支付方式结果",payload:{allow_all_pay:c,next_channel:l}}),c){e.next=14;break}return e.abrupt("return",{});case 14:if(!K.isMianmiChannelUsed(l)){e.next=16;break}return e.abrupt("return",{});case 16:return e.abrupt("return",{nextChannel:l,allPayType:u});case 19:return e.prev=19,e.t0=e.catch(6),Object(ke.a)({error_msg:"查询下个免密支付方式异常"}),e.abrupt("return",{});case 23:case"end":return e.stop()}},e,this,[[6,19]])}));return function(){return e.apply(this,arguments)}}()},{key:"performAutoSwitchPay",value:function(){var e=c()(i.a.mark(function e(){var t,n,r,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return K.isSwitched||(t=this.options.paymentType,K.startChannel=bt(t)),e.next=3,this.getAutoSwitchChannel();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:if(n=e.t0,r=n.nextChannel,o=n.allPayType,r){e.next=15;break}return e.next=12,K.hide();case 12:return e.next=14,new Promise(function(e){Object(be.a)("免密支付失败，请更换支付方式",{onClose:e})});case 14:return e.abrupt("return",Promise.reject({errorCode:-1}));case 15:K.recordMianmiChannel(r),e.t1=r,e.next="WEIXIN_CREDIT"===e.t1?19:"WEIXIN"===e.t1?30:"DUODUOPAY"===e.t1?32:"ALIPAY"===e.t1?34:36;break;case 19:if(K.currentPaymentType=Q.a.XianYongHouFu,1!=+o){e.next=29;break}return e.next=23,K.hide();case 23:return e.next=25,new Promise(function(e){Object(Qe.a)("免密支付失败，可使用先用后付<br>0元下单",{style:{maxWidth:"2.6rem"},onClose:e})});case 25:return(s=a()({optionalParams:{}},this.options)).optionalParams.isSignXianYongHouFu=!0,s.optionalParams.signScene=27,e.abrupt("return",new et(s).pay().catch(function(){return Promise.reject({errorCode:-1})}));case 29:return e.abrupt("return",new et(this.options).pay());case 30:return K.currentPaymentType=Q.a.WeChat,e.abrupt("return",new St(this.options).pay());case 32:return K.currentPaymentType=Q.a.DuoDuoPay,e.abrupt("return",new ft(this.options).pay());case 34:return K.currentPaymentType=Q.a.AliPayDirectDebit,e.abrupt("return",new _t(this.options).pay());case 36:return e.abrupt("return",Promise.reject({errorCode:-1}));case 37:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isAutoSwitchEnabled",get:function(){return f()(this.options,"optionalParams.mianmiAutoSwitch")}}]),e}(),It=Z.a.WechatDirectPayQuery,St=function(e){function t(e){var n;u()(this,t),(n=S()(this,x()(t).call(this,e))).attrMap=e.attrMap;var r=Object(h.a)();return n.isNative=r.isNativePlatform,n.isPayWechatDirectStatusVersion=Object(g.c)(r.version,"4.14.0")>=0,n.additionalParams=e.additionalParams,n.innerPay=new We(e).innerPay,n.autoSwitchPay=new kt(e,n.appId),n}return E()(t,e),p()(t,[{key:"prepayParams",value:function(){return a()({},Be()(x()(t.prototype),"prepayParams",this).call(this),{pap_pay:1})}},{key:"isWechatDirectPayError",value:function(e){return[parseInt(ne.WxDirectPayWxBalanceError.code,10),parseInt(ne.WxDirectPayCardBalanceError.code,10),parseInt(ne.WxDirectPayTelephoneError.code,10),parseInt(ne.WxDirectPayCardInvalidError.code,10),parseInt(ne.WxDirectPayRefusedError.code,10),parseInt(ne.WxDirectPayUnknownError.code,10)].includes(e)}},{key:"unregisterStatusMailBox",value:function(){!this.unregistered&&this.isNative&&this.isPayWechatDirectStatusVersion&&(this.unregistered=!0,Object(v.g)("PDDInbox","unregister",{type:qe.a.WechatDirect}))}},{key:"realPay",value:function(e){var t=this;return 1===e.is_pap_pay?new Promise(function(n,r){var a=Date.now(),o=1,s=null,l=function(e){Fe({paymentType:Q.a.WeChat,errorCode:0,orderSn:t.orderSn,waitTime:Date.now()-a,paySource:e||0}),n()},u=function(e){var n=e.errorCode,o=e.paySource,i=e.cancelled,s=e.errorMsg;Fe({paymentType:Q.a.WeChat,errorCode:n||-1,orderSn:t.orderSn,waitTime:Date.now()-a,errorMsg:s,paySource:o||0}),r({errorCode:n,cancelled:i})},d=null,p=function(){var e=c()(i.a.mark(function e(n){var c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=-1,e.t0=n.status,e.next=e.t0===It.Success?4:e.t0===It.Paying?11:e.t0===It.Failed?13:e.t0===It.NotFound?19:21;break;case 4:return t.unregisterStatusMailBox(),e.next=7,K.hide();case 7:return e.next=9,K.showSuccess({payInfoTitle:"微信支付",title:"支付成功"});case 9:return l(0),e.abrupt("break",23);case 11:return n.wait_time>=0?s=setTimeout(function(){d(++o)},1e3*Math.min(n.wait_time||0,15)):u({errorCode:-1,paySource:0,errorMsg:'前端免密支付状态轮询为"Paying"但并未返回等待时间'}),e.abrupt("break",23);case 13:return t.unregisterStatusMailBox(),c=n.error_info&&n.error_info.error_code?parseInt(n.error_info.error_code,10):parseInt(ne.WxDirectPayUnknownError.code,10),t.isWechatDirectPayError(c)||(c=parseInt(ne.WxDirectPayUnknownError.code,10)),Fe({paymentType:Q.a.WeChat,orderSn:t.orderSn,errorCode:c||-1,waitTime:Date.now()-a,paySource:0,errorMsg:'前端免密支付状态轮询为"Failed"'}),r({errorCode:c,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}}),e.abrupt("break",23);case 19:return u({errorCode:-1,paySource:0,cancelled:!0,errorMsg:'前端免密支付状态轮询为"NotFound"'}),e.abrupt("break",23);case 21:return u({errorCode:c,paySource:0,errorMsg:"未知的前端免密轮询状态：".concat(n.status)}),e.abrupt("break",23);case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();d=function(e){e>4?u({errorCode:-1,paySource:0,errorMsg:"前端免密状态轮询超过4次"}):he.getInstance().post("api/qogir/payment/query/wechat/pappay",{order_sn:t.orderSn,times:e,attr_map:t.attrMap}).then(p).catch(function(e){var t=e.errorCode,n=e.errorObject;u({errorCode:-1,errorObject:n,errorMsg:"调用前端免密状态轮询接口失败errorCode：".concat(t)})})};Object(T.a)(),K.markDuringMianmi(),K.show(),t.isNative&&t.isPayWechatDirectStatusVersion&&Object(v.g)("PDDInbox","register",{type:qe.a.WechatDirect,receiver:function(){var e=c()(i.a.mark(function e(n,o){var c,u,d,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=o.result||[],d=(d=u[0]||{}).content,!n&&d&&d.order_sn===t.orderSn){e.next=6;break}return t.unregisterStatusMailBox(),e.abrupt("return");case 6:p=parseInt(d.status||0,10),e.t0=p,e.next=e.t0===It.Success?10:e.t0===It.Failed?17:23;break;case 10:return s&&clearTimeout(s),e.next=13,K.hide();case 13:return e.next=15,K.showSuccess({payInfoTitle:"微信支付",title:"支付成功"});case 15:return l(1),e.abrupt("break",24);case 17:return s&&clearTimeout(s),c=d.error_info&&d.error_info.error_code?parseInt(d.error_info.error_code,10):ne.WxDirectPayUnknownError.code,t.isWechatDirectPayError(c)||(c=ne.WxDirectPayUnknownError.code),Fe({paymentType:Q.a.WeChat,orderSn:t.orderSn,errorCode:c||-1,waitTime:(new Date).getTime()-a,paySource:0}),r({errorCode:c,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}}),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:t.unregisterStatusMailBox();case 25:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}),s=setTimeout(function(){d(o)},1e3*Math.min(e.wait_time||0,15))}).catch(function(){var e=c()(i.a.mark(function e(n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f()(n,"extraErrorInfo.isWechatDirectPayFail")||!t.autoSwitchPay.isAutoSwitchEnabled){e.next=3;break}return e.abrupt("return",t.autoSwitchPay.performAutoSwitchPay());case 3:return e.next=5,K.hide();case 5:throw n;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()):this.innerPay.realPay(e)}},{key:"pay",value:function(){if(this.appId===this.config.AppID.WeChatH5Pay&&localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={time:Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var n="transac_wechat_wapcallback.html?"+Object(ye.b)(a()({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise(function(e,t){_e.a.reload(n)})}return Be()(x()(t.prototype),"pay",this).call(this)}},{key:"appId",get:function(){return this.innerPay.appId}}]),t}(je),wt=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"prepayParams",value:function(){return a()({pap_pay:1,pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:a()({},this.attributeFields,{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:""},this.params)}},{key:"realPay",value:function(e){var t=this,n=Q.a.AliPayV2;return Object(v.g)("JSPay","pay",{type:n,params:e}).then(function(e){return Fe({paymentType:n,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var r=e.errorCode;return Fe({paymentType:n,errorCode:r+"",orderSn:t.orderSn}),Promise.reject({errorCode:r})})}},{key:"appId",get:function(){return this.config.AppID.AliPay}}]),t}(je),xt=function(e){function t(e){var n;return u()(this,t),(n=S()(this,x()(t).call(this,e))).prepayType=e.prepayType,n.additionalParams=e.additionalParams,n}return E()(t,e),p()(t,[{key:"prepayParams",value:function(){var e=Object(ye.h)("transac_wappay_callback.html",a()({order_sn:this.orderSn,prepay_type:this.prepayType},this.additionalParams));return a()({pay_app_id:this.appId,pap_pay:1,version:this.paymentVersion,attribute_fields:a()({},this.attributeFields,{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:e},this.params)}},{key:"realPay",value:function(e){return new Promise(function(t,n){location.href=e.gateway_url+"?"+Object(ye.b)(e.query)})}},{key:"appId",get:function(){return this.config.AppID.AliPayWeb}}]),t}(je),Ct=function(){function e(t){u()(this,e),this.innerPay=null,Object(h.a)().isNativePlatform?this.innerPay=new wt(t):this.innerPay=new xt(t)}return p()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}(),Et=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return Object(v.g)("JSPay","pay",{type:Q.a.QQPay,params:e}).then(function(e){return Fe({paymentType:Q.a.QQPay,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var n=e.errorCode;return Fe({paymentType:Q.a.QQPay,errorCode:n+"",orderSn:t.orderSn}),Promise.reject({errorCode:n})})}},{key:"appId",get:function(){return this.config.AppID.QQ}}]),t}(je),Pt=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return new Promise(function(n,r){var a=function(){void 0===window.mqq.tenpay?(Object(Re.c)(new Error("window.mqq.tenpay未定义")),r({errorCode:0})):"function"!=typeof window.mqq.tenpay.pay&&(Object(Re.c)(new Error("window.mqq.tenpay.pay不是一个函数")),r({errorCode:0}));var a="appid#"+t.config.ApiKey.QQPublicTrack+"|bargainor_id#"+t.config.ApiKey.QQPublicMid+"|channel#wallet";window.mqq.tenpay.pay({tokenId:e.token_id,pubAcc:t.config.ApiKey.QQUIN,pubAccHint:t.config.qqFollowTip,appInfo:a},function(e){Fe({paymentType:Q.a.QQPay,errorCode:e.resultCode+""||"",orderSn:t.orderSn});var a="object"===De()(e)&&0===parseInt(e.resultCode,10),o=e&&-11001==+e.resultCode,i=e&&-1==+e.resultCode&&"用户主动放弃支付"===e.retmsg,s=o||i,c=i?-11001:e.resultCode;a?n(e):s?r({errorCode:c,cancelled:!0}):(Object(Re.c)(new Error("window.mqq支付失败"),{data:JSON.stringify(e)}),r({errorCode:c}))})};"undefined"==typeof mqq?setTimeout(function(){"undefined"==typeof mqq?(Object(Re.c)(new Error("window.mqq未定义")),r({errorCode:0})):a()},2e3):a()})}},{key:"appId",get:function(){return this.config.AppID.QQPublicPayment||this.config.AppID.QQPublic}}]),t}(je),Nt=function(){function e(t){u()(this,e);var n=Object(h.a)().isQQPlatform;this.innerPay=n?new Pt(t):new Et(t)}return p()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}(),Ot=function(e){function t(e){var n;return u()(this,t),(n=S()(this,x()(t).call(this,e))).orderSn=e.orderSn,n}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return e.money_order=e.money_order+"",e.server_time=e.server_time+"",Object(v.g)("JSPay","pay",{type:Q.a.ApplePay,params:e}).then(function(e){return Fe({paymentType:Q.a.ApplePay,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var n=e.errorCode,r=e.data;return Fe({paymentType:Q.a.ApplePay,errorCode:n+"",orderSn:t.orderSn}),Promise.reject({errorCode:n,errorObject:r})})}},{key:"appId",get:function(){return this.config.AppID.ApplePay}}]),t}(je),Dt=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return Object(v.g)("JSPay","pay",{type:Q.a.HBInstallmentPay,params:e}).then(function(e){return Fe({paymentType:Q.a.HBInstallmentPay,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var n=e.errorCode;return Fe({paymentType:Q.a.HBInstallmentPay,errorCode:n+"",orderSn:t.orderSn}),Promise.reject({errorCode:n})})}},{key:"appId",get:function(){return this.config.AppID.HBInstallmentPay}}]),t}(je),Tt=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return oe()?Object(v.g)("JSPay","pay",{type:Q.a.AliPayV2,params:e}).then(function(e){return Fe({paymentType:Q.a.HBPay,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var n=e.errorCode;return Fe({paymentType:Q.a.HBPay,errorCode:n+"",orderSn:t.orderSn}),Promise.reject({errorCode:n})}):(Object(Re.c)(new Error("当前APP版本不支持花呗支付")),Promise.reject({errorCode:0}))}},{key:"appId",get:function(){return 322}}]),t}(je),At=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this,n=e.prepay_id;return new Promise(function(){Object(T.a)(),K.show({title:"转账支付中"}),setTimeout(c()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.hide();case 2:_e.a.reload("transac_return_compensation.html?_t_timestamp=sub_bank_transfer_guide&prepay_id=".concat(n,"&order_sn=").concat(t.orderSn));case 3:case"end":return e.stop()}},e)})),1e3)})}},{key:"appId",get:function(){return 135}}]),t}(je),jt=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return Object(v.g)("JSPay","pay",{type:Q.a.UnionPay,params:e}).then(function(e){return Fe({paymentType:Q.a.UnionPay,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var n=e.errorCode;return Object(ke.a)({payload:{event:"app_unionpay_pay",order_sn:t.orderSn,error_code:n+""}}),Promise.reject({errorCode:n})})}},{key:"appId",get:function(){return 42001}}]),t}(je),Rt=function(e){function t(){return u()(this,t),S()(this,x()(t).apply(this,arguments))}return E()(t,e),p()(t,[{key:"realPay",value:function(e){var t=this;return Object(v.g)("JSPay","pay",{type:Q.a.DuoDuoPay,params:e}).then(function(e){return Fe({paymentType:Q.a.CreditCardInstallmentPay,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Ue(e);var n=e.errorCode;return Fe({paymentType:Q.a.CreditCardInstallmentPay,errorCode:n+"",orderSn:t.orderSn}),Promise.reject({errorCode:n})})}},{key:"appId",get:function(){return 45001}}]),t}(je),Lt={pay:function(e){var t=e.paymentType;void 0===e.isSupportDirectPay&&(e.isSupportDirectPay=!0);var n=Object(h.a)(),r=n.isWeChatPlatform,a=n.isWeChatMiniProgram,o=n.isNativePlatform,i=Ne;switch(t){case Q.a.WeChat:i=a?Le:e.isSupportDirectPay?St:We;break;case Q.a.AliPay:r||(i=Ct);break;case Q.a.AliPayDirectDebit:r||(i=_t);break;case Q.a.QQPay:r||(i=Nt);break;case Q.a.ApplePay:o&&n.system===g.b.IOS&&(i=Ot);break;case Q.a.HBInstallmentPay:r||(i=Dt);break;case Q.a.HBPay:i=Tt;break;case Q.a.DuoDuoPay:i=ft;break;case Q.a.XianYongHouFu:i=et;break;case Q.a.DuoDuoPayACS:i=At;break;case Q.a.UnionPay:i=jt;break;case Q.a.CreditCardInstallmentPay:i=Rt}var s=f()(e,"optionalParams.mianmiV3"),c=f()(e,"optionalParams.mianmiV3SafeHint");return K.init({paymentType:t,mianmiV3:s,mianmiV3SafeHint:c}),new i(e).pay()}};function Mt(){var e=Object(h.a)();if(e.statisfy&&e.statisfy("1.2.2","2.0.8","greaterThan")||e.isTinyNativePlatform)Object(v.g)("JSNavigation","selectTab",{tab_index:0});else{var t="index.html";e.isNativePlatform||e.isTinyNativePlatform?Object(v.g)("JSNavigation","reset",{url:Object(ye.h)(t)}).then(function(){return _e.a.reload(t)},function(){return _e.a.reload(t)}):_e.a.uniformForward(t)}}var Bt={NOTHING:0,FORWARD:1,BACK:2,GO_HOME:3,RELOAD:4,REFRESH:7};function Ft(e){var t=f()(e,"type",0),n=f()(e,"param.url");switch(t){case Bt.FORWARD:return function(){return _e.a.uniformForward(n)};case Bt.BACK:return function(){return _e.a.back(n)};case Bt.GO_HOME:return Mt;case Bt.RELOAD:return function(){return _e.a.reload(n)};case Bt.REFRESH:return function(){return location.reload()}}}var Ut={TOAST:"toast",NOTHING:"nothing",ALERT:"alert",CONFIRM:"confirm"};function zt(e){var t=e.errorCode,n=e.errorObject,r=f()(n,"error_payload");if(!r)return null;var a=f()(r,"view_style",Ut.TOAST);if(a===Ut.NOTHING)return Promise.reject({errorCode:t,errorHandling:{isErrorAlerted:!0}});var o=f()(r,"view_object.message")||"",i=f()(r,"view_object.title")||"";o||(i=i||"系统繁忙，请稍后再试 (".concat(t,")"));var s=function(e){var t=e||{},n=t.on_show,r=t.on_ok,a=t.on_cancel;return{onShow:Ft(n),onCancel:Ft(a),onOk:Ft(r)}}(f()(r,"view_object"))||{},c=s.onOk,l=s.onCancel,u=s.onShow,d=f()(r,"view_object.ok_label")||"确定",p=f()(r,"view_object.cancel_label")||"取消",m=+f()(r,"view_object.on_close.type");return new Promise(function(e,n){var r=function(e){return function(){e?e():n({errorCode:t,errorHandling:{isErrorAlerted:!0}})}};switch(a){case Ut.ALERT:Object(ve.a)({title:i,text:o,onConfirm:r(c),onClose:r(c),confirmButtonLabel:d});break;case Ut.CONFIRM:Object(ut.a)({title:i,text:o,onConfirm:r(c),onCancel:r(l),onClose:r(2===m?c:l),cancelButtonLabel:p,confirmButtonLabel:d});break;default:Object(be.a)(i,{onClose:r(u)})}})}var Ht,Vt={"0010":"交易金额超限，建议更换其他支付方式或稍后重试","0014":"银行阻止了该银行卡交易，建议更换支付方式付款或咨询银行如何解决","0116":"银行卡密码错误次数超限，建议更换其他支付方式或稍后重试","0119":"您的银行卡暂不支持在线支付业务，建议更换其他支付方式或联系银行客服","0124":"您的银行卡余额不足，建议更换其他支付方式"},Gt="交易失败，建议更换其他支付方式或稍后重试",Wt=60136;var qt=(Ht={},nt()(Ht,ne.WithoutWeChatClient.code,"您未安装微信或微信版本过低，建议安装新版微信后重试或使用其他支付方式"),nt()(Ht,60137,"您未安装微信，请安装后再支付或选择其他支付方式重新支付"),nt()(Ht,60138,"您使用的微信非官方版本，建议到官方渠道下载再重新支付"),nt()(Ht,60139,"当前支付方式不可用，请选择其他支付方式再重新支付"),nt()(Ht,60170,"您未安装云闪付或云闪付版本过低，建议安装新版云闪付后重试或使用其他支付方式"),nt()(Ht,60145,"当前支付方式不稳定，请更换其他支付方式"),nt()(Ht,60146,"当前支付方式不稳定，请更换其他支付方式"),nt()(Ht,60105,"当前支付方式不稳定，请更换其他支付方式"),Ht);function Qt(e){var t=e.errorCode,n=zt(e);if(n)return Object(T.a)(),n;var r=function(e){var t=e.errorCode,n=e.errorObject,r=void 0===n?{}:n;if(+t!==Wt)return null;var a=r.sdk_return_code,o=Vt[a]||Gt;return new Promise(function(e,n){var r=function(){n({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Object(ve.a)({title:o,onConfirm:r,onClose:r})})}(e);return r?(Object(T.a)(),r):t===parseInt(ne.NativePaymentCancel.code,10)?Promise.reject({errorCode:t,cancelled:!0}):t===parseInt(ne.QQPayFailed.code,10)?(Object(T.a)(),new Promise(function(e,n){var r=function(){n({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Object(ve.a)({title:"由于QQ版本问题或未安装QQ\n暂时无法使用QQ钱包\n\n请安装新版QQ或选择其他支付方式",onConfirm:r,onClose:r})})):qt[t]?(Object(T.a)(),new Promise(function(e,n){var r=function(){n({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Object(ve.a)({title:qt[t],onConfirm:r,onClose:r})})):function(e){return[parseInt(ne.ItemRemoved.code,10),parseInt(ne.OutOfStock.code,10),parseInt(ne.GroupInvalid.code,10),parseInt(ne.OverBuyLimit.code,10),parseInt(ne.OrderPayed.code,10),parseInt(ne.PrepayBusy.code,10),parseInt(ne.PaymentDisabled.code,10),parseInt(ne.OverBuyVirtualGoodsLimit.code,10)].includes(e)}(t)?(Object(T.a)(),new Promise(function(e,n){var r=function(){n({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Object(ve.a)({title:ne.getMsgFromCode(t),onConfirm:r,onClose:r})})):Promise.reject(e)}n.d(t,"Pay",function(){return Zt}),n.d(t,"Toast",function(){return k}),n.d(t,"PrepayType",function(){return ee.b}),n.d(t,"PaymentType",function(){return ee.a}),n.d(t,"getPaymentAppID",function(){return re.a}),n.d(t,"isHBPayAvailable",function(){return oe}),n.d(t,"isHBInstallmentPayAvailable",function(){return se}),n.d(t,"isApplePayAvailable",function(){return ae.a}),n.d(t,"isAliPayDirectDebitAvailable",function(){return le}),n.d(t,"wechatPayScoreSign",function(){return Pe}),n.d(t,"payScoreQueryService",function(){return Ie});var Yt,Xt="order_paid_times",Jt=Z.a.PayStatus,Kt=Z.a.ParentOrderStatus;Yt=Object(h.a)().isNativePlatform;var Zt=function(){function e(){var t=this;u()(this,e),this.orderPaidTimes=0,this.attributeFields=null,Yt?Object(v.g)("AMStorage","get",{key:Xt}).then(function(e){t.orderPaidTimes=parseInt(e.value||0,10),t.attributeFields={paid_times:t.orderPaidTimes}}):(this.orderPaidTimes=+localStorage.getItem(Xt),isNaN(this.orderPaidTimes)&&(this.orderPaidTimes=0),this.attributeFields={paid_times:this.orderPaidTimes})}return p()(e,[{key:"defaultCheckOrderStatus",value:function(){var e=c()(i.a.mark(function e(t){var n,r,a,o,s,c,l,u,d,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.maySuccess,r=t.orderSn,a=t.prepayType,o=function(e){return new Promise(function(t){setTimeout(t,e)})},s=function(e){var t,o,i=e.retryTime;return a===$.a.Combine?(t="api/aristotle/pay_check_parent_order",o={times:i,success:n?1:0,parent_order_sn:r}):(t="api/aristotle/pay_check",o={times:i,success:n?1:0,order_sn:r}),he.getInstance().post(t,o)},c=1;case 4:if(!(c<6)){e.next=41;break}return Object(ke.a)({error_msg:"paycheck_".concat(n?"maysuccess":"mayfail","_").concat(c),payload:{event:"paycheck",order_sn:r}}),e.prev=6,e.next=9,s({retryTime:c});case 9:if(l=e.sent,u=l.wait_time,d=l.parent_order_status,p=l.pay_status,+d!=+Kt.Unpayed&&+p!=+Jt.Unpayed||!(u>0)){e.next=18;break}return e.next=16,o(1e3*u);case 16:e.next=31;break;case 18:if(a!==$.a.Combine){e.next=26;break}if(+d!=+Kt.Payed){e.next=23;break}return e.abrupt("return",{parentOrderStatus:d});case 23:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 24:e.next=31;break;case 26:if(+p!=+Jt.Payed){e.next=30;break}return e.abrupt("return",{orderStatus:1});case 30:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 31:e.next=38;break;case 33:throw e.prev=33,e.t0=e.catch(6),e.t0=e.t0||{},e.t0.errorCode||(e.t0.errorCode="unknown"),e.t0;case 38:c++,e.next=4;break;case 41:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 42:case"end":return e.stop()}},e,null,[[6,33]])}));return function(t){return e.apply(this,arguments)}}()},{key:"checkOrderStatus",value:function(e){var t=this,n=e.service,r=e.timeout,a=e.success,o=e.orderSn,i=e.prepayType,s=!0;return Promise.race([new Promise(function(e,t){setTimeout(function(){s?t():e()},r||1e4)}),n({maySuccess:a,orderSn:o,prepayType:i}).then(function(e){return s=!1,e})]).then(function(e){return e&&1===e.orderStatus&&(Yt?Object(v.g)("AMStorage","set",{key:Xt,value:t.orderPaidTimes+1+""}):localStorage.setItem(Xt,t.orderPaidTimes+1)),e}).catch(function(){throw{errorCode:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).errorCode||-1,extraErrorInfo:{isCheckOrderFail:!0}}})}},{key:"pay",value:function(e){var t=this,n=e.paymentType,r=e.orderSn;if(n&&n!==Q.a.FriendPay&&(Yt&&Object(v.g)("AMStorage","set",{key:"last_payment_type2",value:n.toString()}),localStorage.setItem("LastPaymentType",n.toString())),Object(ke.a)({payload:{event:"before_prepay",payment_type:n,order_sn:r}}),n===Q.a.FriendPay)return Promise.resolve({redirectToFriendPay:!0});var o=e.checkOrderStatus&&"function"==typeof e.checkOrderStatus?e.checkOrderStatus:this.defaultCheckOrderStatus,s=null;return e.attributeFields=a()({},e.attributeFields,{},this.attributeFields),Lt.pay(e).then(function(n){return s=n,null!==e.checkOrderStatus?t.checkOrderStatus({service:o,timeout:e.checkOrderTimeout,success:!0,orderSn:r,prepayType:e.prepayType}):n}).then(function(){var e=c()(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(r=s)||void 0===r?void 0:r.xyhfSwitchedToWechat,![n,K.currentPaymentType].includes(Q.a.XianYongHouFu)||a){e.next=4;break}return e.next=4,K.showSuccess({title:"下单成功",payInfoTitle:"先用后付"});case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(e){return e!==s?a()({},e,{},s):s}).catch(function(){var a=c()(i.a.mark(function a(){var s,c,l=arguments;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=l.length>0&&void 0!==l[0]?l[0]:{},![n,K.currentPaymentType].includes(Q.a.XianYongHouFu)){a.next=6;break}return a.next=4,K.hide();case 4:a.next=9;break;case 6:if(!K.isSwitched||K.currentPaymentType!==Q.a.AliPayDirectDebit){a.next=9;break}return a.next=9,K.hide();case 9:if(0!=+(c=s.errorCode)&&-1!=+c&&+c!=+ne.NativeNormalError.code&&60160!=+c){a.next=13;break}if(null===e.checkOrderStatus){a.next=13;break}return a.abrupt("return",t.checkOrderStatus({service:o,timeout:e.checkOrderTimeout,success:!1,orderSn:r}));case 13:throw s;case 14:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=f()(e,"optionalParams.errorCodeBlackList")||[],r=t.errorCode;if(Array.isArray(n)&&n.map(function(e){return+e}).includes(+r)||"defaultCheckOrderStatusFail"===r)throw t;if(f()(e,"optionalParams.skipDefaultErrorHandler"))throw t;return Qt(t)})}},{key:"setHttpService",value:function(e){if(!(e&&"post"in e&&"function"==typeof e.post))throw new window.Error("pay.setHttpService的参数必须包含post方法");he.setInstance(e)}}]),e}(),$t={};$t=new Zt;t.default=$t},h3V6:function(e,t,n){},h5Ql:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,'@-webkit-keyframes _2gcojgmg{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _2gcojgmg{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._1trLT2gR{height:.89rem;padding-left:.44rem;position:relative;background:#fff}._1trLT2gR._1XMNcSkC{height:1.07rem}.cYaX87HR{height:1.39rem;padding-left:.44rem;position:relative;background:#fff}.cYaX87HR._1XMNcSkC{height:1.75rem}._3z_wOnyG{height:1.16rem}._3z_wOnyG,._37gvz7E5{padding-left:.44rem;position:relative}._37gvz7E5{height:1.84rem}.px9-vsV6{height:2.52rem;padding-left:.44rem;position:relative}._3hwcg-FO{height:.37rem;line-height:.37rem;color:#151516;font-size:.13rem;position:relative;border:none!important}._3hwcg-FO:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid rgba(0,0,0,.05)}._12T-bV0o{font-size:.13rem;height:.37rem;line-height:.37rem;position:absolute;right:.23rem;top:0;color:#9c9c9c}._12T-bV0o:active{color:#58595b}._12T-bV0o:active:before{color:rgba(0,0,0,.35)}._281ckJtn{position:absolute;height:.12rem;width:.06rem;right:.13rem;top:.12rem}._1WlyLvbS{height:.52rem;padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._1WlyLvbS._1XMNcSkC{height:.7rem}._3FxNqAFV{height:1.02rem;padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._3FxNqAFV._1XMNcSkC{height:1.38rem}._1e4zHMkd,._1kY24ooh{width:.99rem;height:.4rem;border-radius:.04rem;background-color:#f8f8f8;margin-right:.1rem;margin-bottom:.1rem}._1e4zHMkd{background-color:#fdf3f2}._2l0Vd4nR,._3gVdWtVT,.xAtxWEkF{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.06rem;font-size:.12rem;text-align:center}._3gVdWtVT{color:#e02e24}.xAtxWEkF{color:#9c9c9c}._1rGQmS2F,._2IgIVOHE,.gh4-MQFk{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.04rem;font-size:.12rem;text-align:center}.gh4-MQFk{color:#e02e24}._2IgIVOHE{color:#9c9c9c}._3OZkTf6Z{height:.7rem}._3DiwxQrV,._3OZkTf6Z{padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._3DiwxQrV{height:1.38rem}.R6V7Pv0r{height:2.06rem;padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.BxoqmZys{width:.13rem;height:.13rem;margin-right:.04rem;margin-top:.12rem}.sLK1W7j6{position:absolute;top:0;left:0;bottom:0;width:.32rem;z-index:1}.H-GJ_YnZ{margin-right:.1rem}.pdd_payment_list_elder_mode ._3hwcg-FO{height:.46rem;line-height:.44rem;padding-top:.02rem;font-size:.16rem}.pdd_payment_list_elder_mode ._12T-bV0o{height:.44rem;line-height:.44rem;font-size:.16rem}.pdd_payment_list_elder_mode ._12T-bV0o:before{font-size:.13rem;top:.16rem}.pdd_payment_list_elder_mode ._3FxNqAFV{height:2.06rem}.pdd_payment_list_elder_mode .BxoqmZys{width:.16rem;height:.16rem;margin-right:.04rem;margin-top:.14rem}.pdd_payment_list_elder_mode ._281ckJtn{position:absolute;height:.13rem;width:.07rem;right:.12rem;top:.16rem}',""]),t.locals={installment3Container:"_1trLT2gR",hasPromotionContent:"_1XMNcSkC",installment6Container:"cYaX87HR",installment2ContainerElder:"_3z_wOnyG",installment4ContainerElder:"_37gvz7E5",installment6ContainerElder:"px9-vsV6",title:"_3hwcg-FO",action:"_12T-bV0o",actionBtn:"_281ckJtn",installments3:"_1WlyLvbS",installments6:"_3FxNqAFV",installment:"_1kY24ooh",selectedInstallment:"_1e4zHMkd",number:"_2l0Vd4nR",selectedNumber:"_3gVdWtVT",disableNumber:"xAtxWEkF",money:"_1rGQmS2F",selectedMoney:"gh4-MQFk",disableMoney:"_2IgIVOHE",installment2Elder:"_3OZkTf6Z",installment4Elder:"_3DiwxQrV",installment6Elder:"R6V7Pv0r",bankIcon:"BxoqmZys",mask:"sLK1W7j6",installmentContainer:"H-GJ_YnZ",horizontalScan:"_2gcojgmg"}},hR4y:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},i4d4:function(e,t,n){e.exports={skuQuantityTip:"_2Icr8_BZ",skuQuantityTipTxt:"_3Y4I8_Gq"}},i7vn:function(e,t,n){e.exports={addressInfo:"_35_YyHlO",location:"_20Aew5Dn",icon:"_337DifRr",info:"_lytPIiU",receiver:"_2XUxNfYs",name:"_2Ca-NXhN",mobile:"_2KH3N__4",city:"_1e1he_ng",detail:"Y7f6W3f-",instruction:"_2ZvGIBQh",arrow:"anVcJFoP",horizontalScan:"OzFssC46"}},iYsC:function(e,t,n){var r=n("h5Ql"),a=n("Q8e5"),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},idmN:function(e,t,n){var r=n("ZWtO"),a=n("FZoo"),o=n("4uTw");e.exports=function(e,t,n){for(var i=-1,s=t.length,c={};++i<s;){var l=t[i],u=r(e,l);n(u,l)&&a(c,o(l,e),u)}return c}},jiea:function(e,t,n){var r=n("+7Xe");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},losq:function(e,t,n){e.exports={payment:"ZuLf7LIZ",paymentlist:"_35gWhmMg",border:"AIEuNy_D",title:"_1nRWcrCG",closeIcon:"_3NT450Jv",pmBg:"_13CS1S_Z",horizontalScan:"_2QymTb-M"}},mUg4:function(e,t,n){var r=n("cq/+"),a=n("EwQA"),o=n("mTTR");e.exports=function(e,t){return null==e?e:r(e,a(t),o)}},mc0g:function(e,t){e.exports=function(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),s=i.length;s--;){var c=i[e?s:++a];if(!1===n(o[c],c,o))break}return t}}},muwb:function(e,t,n){e.exports={nameArea:"_2dmuG1LA",name:"_2VFBW8vk",price:"_1i_A_hcB",ocPrice:"_2aIxC03A",promotion:"_1XHpKxDC",promotion3:"_1_HbSoTk",horizontalScan:"_1NMYw4Iv"}},oobu:function(e,t,n){e.exports={bottomTip:"_3OF9G0I3",tip:"U-_e98m4",icon:"_17GE0h5R",horizontalScan:"_3i1jFfe0"}},ooc8:function(e,t,n){e.exports={redPacketItem:"_1KcwvgOe",reward:"_2u2Yw3OP",redPacket:"_2P0Eyai_",couponAmount:"_2HAMUW9q",priceIcon:"_2POxf0tc",num:"_376wIwoy",couponTag:"bBKTlu8-",couponTagTxt:"KzVgr315",redPacketInfo:"_3zHxzdtT",fullBackName:"_3GiDgZ99",processStatusDesc:"_2ASfzxT5",progress:"_3xsuSb75",progressBarOuter:"KqC_PZil",progressBarInner:"-OcuSPZl",horizontalScan:"_3aRyikgP"}},"p+lt":function(e,t,n){},pbmx:function(e,t,n){e.exports={multiChoose:"_1ER3SWR8",horizontalScan:"o9huGZ-M"}},qRkn:function(e,t,n){var r=n("3cYt")({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});e.exports=r},quyA:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},r5oO:function(e,t,n){e.exports={container:"_2tMDCcio",cell:"_3wowRIPX",indicator:"_3DqJ9iWK",addAddress:"C5MWyQF5",addIcon:"DDKLQpWM",horizontalScan:"_3oIqEVdE"}},rRnn:function(e,t,n){"use strict";var r=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("q1tI")),o=(r(n("2W6z")),function(e){e.index;var t=e.children;a.default.Children.count(t)});t.default=o},sZZj:function(e,t,n){e.exports={haiTaoAntiepidemic:"gMzcRXnn"}},sgoq:function(e,t,n){var r=n("asDA"),a=n("TKrE"),o=n("6nK8"),i=RegExp("['’]","g");e.exports=function(e){return function(t){return r(o(a(t).replace(i,"")),e,"")}}},tehB:function(e,t,n){e.exports={skuNumber:"_2uDvVQTM",numberBtn:"_1kq3Rc3U",disable:"_2aqnGQ2B",input:"_3kc_u9om",horizontalScan:"RZ3lAcz5"}},u6S6:function(e,t,n){var r=n("6acW"),a=n("sgoq")(function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)});e.exports=a},uorM:function(e,t,n){e.exports={skuSelectorCloseBtn:"_1ifQun1H",skuSelectorBody:"_3NXAWOJU",safeDistance:"_3hcWlBV3",skuSelectorBottom:"_2w4vNs31",startHide:"_3c9_AR-L",toHide:"H5vllzzb",startDisplay:"_3O5dZJUh",toDisplay:"_2MEr7QUP",skuSelectorContainer:"_2Aq-Ugkh",skuSelectorHead:"nxbx3dAD",skuSpecs:"_1XqP0nf5",selectorNumber:"_3Lu0pvej",numberStepper:"N2qkjyDl",skuSelectorReduce:"_35TEciAA",skuSelectorReduceEnable:"_2BM66E_I",skuSelectorReduceDisable:"_6YH6EkH8",skuSelectorInput:"_2Dfevmvi",skuSelectorIncrease:"_3sjUUFAM",skuSelectorIncreaseEnable:"fFnfVnqP",skuSelectorIncreaseDisable:"_1nfoL_XT",sizeDesc:"_1fhWBb8Y",skuSizeChartRed:"aaeM-47L",skuSpecValueList:"_3P3M8kC-",hotSale:"_1aQaErYF",skuSpecValue:"_1WyUf92E",hotSaleIcon:"_1JOBwSlu",skuSpecValueSelected:"_2bBCR7qt",skuSpecValueDisable:"PphFt0vU",cartSkuUi:"_18xWYKbd",skuSelectorMain:"_1sJVEcS6",horizontalScan:"Ak8nfERB"}},"v/Ss":function(e,t,n){e.exports={normalSkuModal:"_1y1aeNA3",normalSkuModalSkuDirectOrder:"_3zIg1i_3"}},v5F4:function(e,t,n){e.exports={deliveryStripe:"_3vO3WpIa",deliveryContent:"_2X1hV6Jv",deliverySvg:"_1cEkez0v",arrow:"_16aZoG9o",deliveryList:"_3htAJlnB",title:"_3P_nZd5j",closeBtn:"_27fcHtOA",deliveryItem:"_3dwidqQm",selected:"_2kGgPlxg",horizontalScan:"_1oGNDG2U"}},v796:function(e,t,n){e.exports={idModifyHint:"kVjIVSxQ",border:"_1KAw0rZw",line:"_2DdaMJny",icon:"B-Jz_LzB",text:"_27OMwNt3",title:"_23-PbjYD",desc:"_1PsHcgrY",action:"_3tN1jEXk",btn:"_2xnh3bvX",grayBtn:"_1raY2VeX",horizontalScan:"ok0Xemz8"}},vL7J:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,'@charset "UTF-8";\n\n/**\r\n * base.scss, 一些公共的代码\r\n * @author fushi(fushi@yiran.com)\r\n */\n\n/**\r\n * base variable\r\n */\n\n/**\r\n * function 区域\r\n */\n\n/**\r\n * mixin 区域\r\n */\n\n/**\r\n * 父元素必须是position: relative\r\n */\n\n/**\r\n * 字体icon\r\n */\n\n/**\r\n * flex 布局\r\n */\n\n/**\r\n * extend区域\r\n */\n\n/* move from _feature */\n\n/*原来的逻辑*/\n\n/*\r\n* 注意：需要按钮是position(absolute,relative)定位的,按钮没有宽高的，可能会出bug.\r\n* 按钮before已经有样式的就用data-active=after-{type}，after同理。\r\n* eg:<div data-active=\'before-red\'>button</div>\r\n* https://jira2.corp.yiran.com/browse/PDD-10191\r\n* 红色按钮 highlight状态增加 #000000 15%\r\n* 白色按钮 highlight状态增加 #000000 5%\r\n* 红色线框按钮 highlight状态增加 #E02E24 5%\r\n*/\n\n/**\r\n * @file variables.scss, 相关的变量\r\n * @author fushi(fushi@yiran.com)\r\n */\n\n/**\r\n * @file border1px.scss, 1px在devicePixelRatio>2的方案\r\n * @author fushi(fushi@yiran.com)\r\n * updated by shiluo 2020/03/16\r\n */\n\n/**\r\n * 支持设置border-radius的1px方案\r\n * 旨在解决Android下0.5px的进度问题! --from @在渊\r\n * 经测试 在部分OPPO、小米等机型微信环境中，仍然会有右下线框显示不全的bug。\r\n */\n\n/**\r\n * 支持设置border-radius的1px方案\r\n * radius-border1px有问题时可尝试使用此方法\r\n */\n\n.edit-addr-region-selector {\n  position: fixed;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  margin: 0 auto;\n  z-index: 11001;\n  width: 3.75rem;\n  text-align: left;\n  height: 100%;\n}\n\n.edit-addr-region-selector .mars-panel-mask {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n.edit-addr-region-selector .mars-panel {\n  background: #fff;\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 3.86rem;\n  max-height: 75%;\n  overflow: hidden;\n}\n\n.edit-addr-region-selector .mars-panel .mars-panel-header {\n  width: 100%;\n  height: .46rem;\n  position: relative;\n  border-bottom: 1px solid #ededed;\n  font-size: 0;\n}\n\n.edit-addr-region-selector .mars-panel .mars-panel-header div {\n  display: inline-block;\n  height: 100%;\n  margin-left: .18rem;\n  line-height: .46rem;\n}\n\n.edit-addr-region-selector .mars-panel .mars-panel-header div span {\n  color: #151516;\n  font-size: .15rem;\n  display: inline-block;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 1rem;\n}\n\n.edit-addr-region-selector .mars-panel .mars-panel-header .mars-ph-cancel {\n  position: absolute;\n  right: .18rem;\n  color: #9c9c9c;\n  font-size: .15rem;\n  line-height: .46rem;\n}\n\n.edit-addr-region-selector .mars-panel .mars-panel-header .mars-ph-cancel:active {\n  color: #58595b !important;\n}\n\n.edit-addr-region-selector .mars-panel .mars-panel-header .mars-ph-active {\n  border-bottom: 2px solid #e02e24;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions {\n  width: 100%;\n  height: 3.4rem;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul {\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul li {\n  position: relative;\n  padding-left: .18rem;\n  width: 100%;\n  height: 0.44rem;\n  font-size: .15rem;\n  border-bottom: 1px solid #f2f2f2;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul li:last-child {\n  border-bottom: none;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul li:active {\n  background-color: rgba(0, 0, 0, 0.08);\n  border-bottom: none;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul li span {\n  line-height: 0.44rem;\n  color: #151516;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul li .region-active {\n  color: #e02e24;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul li:before {\n  content: "\\E617";\n  font-size: 0.11rem;\n  color: #d9d9d9;\n  font-family: "icomoon";\n  line-height: 1;\n  font-weight: normal;\n  -webkit-font-smoothing: antialiased;\n}\n\n.edit-addr-region-selector .mars-panel .mars-regions ul li:before {\n  position: absolute;\n  right: .17rem;\n  top: .17rem;\n}',""])},vVBQ:function(e,t,n){e.exports={logoWrap:"_2fyYanh2",logo:"JwB7pONe",container:"_1ZOUDxNT",titleWrap:"_1Z5-NKbM",title:"_2N3eqqnQ",backBtnWrap:"_1zJsR3Ak",backBtn:"VverBJBN",couponItem:"_1KE5Ff4X",couponTag:"_1HWJRLGb",couponPrice:"_3p55_8W2",couponInfo:"oZGtSc2O",phoneContent:"_3GbNmVDx",clearButton:"_2g_U8jus",verifyCode:"_3aBIMQ0U",verifyCodeActive:"QaofrByL",inputBox:"_3Ij3ZKeN",codeInputBox:"_3X88btx8",joinBtn:"t_hnfMIz",rule:"_1YVeAvo0",ruleText:"_2faMvETa",phoneContainer:"_3DN_lbhf",phoneTitleWrap:"_3PJqQ-xU"}},wekK:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,'@-webkit-keyframes _3Mno39XX{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _3Mno39XX{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._3f1JMFzp{position:relative;padding-left:.12rem;height:.46rem;line-height:.46rem;background-color:#fff}._3f1JMFzp._1frDSkty{pointer-events:none}._3f1JMFzp._14ZLILa-,.pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1rem}._3f1JMFzp:not(._14ZLILa-):active:not(:first-child) ._3t3V2co2:after{content:none}._3f1JMFzp:not(._14ZLILa-):active:not(._14ZLILa-)+._3f1JMFzp ._3t3V2co2{border-top:1px solid #fff}div._3f1JMFzp:first-of-type ._3t3V2co2:after{content:none}._3f1JMFzp[data-active=before-white]:active:before{opacity:.08}._3t3V2co2{width:100%;font-size:0;position:relative;border:none!important}._3t3V2co2:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid #ededed}._3t3V2co2 ._2injgcfL{margin-left:.04rem}._3t3V2co2 ._2injgcfL ._2QBPsFuu{display:inline-block;width:.22rem;height:.45rem;margin-right:.04rem;position:relative;vertical-align:top}._3t3V2co2 ._2injgcfL ._2QBPsFuu img{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:.22rem}._3t3V2co2 ._1Z5TdEwR{position:relative;height:.46rem;text-align:left}._1PFsuIUL{background:url(https://funimg.pddpic.com/pay_icon/alipay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._1CnXvRsx,._1PFsuIUL{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._1CnXvRsx{background:url(https://funimg.pddpic.com/pay_icon/wechat_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3XygMUK5{background:url(https://funimg.pddpic.com/pay_icon/qq_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3vucH7ff,._3XygMUK5{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._3vucH7ff{background:url(https://funimg.pddpic.com/pay_icon/friend_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3McrIaJK{background:url(https://funimg.pddpic.com/pay_icon/duoduo_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._2mAKK6dA,._3McrIaJK{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._2mAKK6dA{background:url(https://funimg.pddpic.com/pay_icon/hb_installment_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3HinBJLb{background:url(https://funimg.pddpic.com/pay_icon/hb_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._1QMjdH6n,._3HinBJLb{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._1QMjdH6n{background:url(https://funimg.pddpic.com/pay_icon/xyhf_v3.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}.bP1-sBd2{background:url(https://funimg.pddpic.com/pay_icon/apple_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._19olO3U_,.bP1-sBd2{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._19olO3U_{background:url(https://funimg.pddpic.com/zhuhai_png/2020-12-06/1aecea68-ed03-41a2-89ef-37b7986a4635.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3EumGWhj{background:url(https://funimg.pddpic.com/zhuhai_png/2020-08-19/e6fb26b4-24bc-43a2-9fd0-a1344e7ea48f.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3EumGWhj,._21GMqN4P{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._21GMqN4P{background-size:.22rem .22rem;background-repeat:no-repeat}._3DLN0C5d{margin-left:.32rem;font-size:.15rem;color:#151516}._30P7ub84{position:absolute;top:.15rem;right:0;width:.16rem;height:.16rem;margin-right:.12rem;line-height:.16rem;fill:#58595b}._1yOWzRTS{height:1rem}._287rdYha[data-active=before-white]:active:before{opacity:.08}._2injgcfL{position:relative;font-size:.13rem;color:#58595b}._2injgcfL ._2qBOBZaq{padding:.01rem}.mtfrtIKR ._3DLN0C5d{color:rgba(21,21,22,.2)}.mtfrtIKR ._3DLN0C5d:before{opacity:.4}.mtfrtIKR ._2injgcfL{color:#9c9c9c}._1cj95KqM{float:right;font-size:.14rem;color:#151516;opacity:.2;margin-right:.12rem}._2HSzi9Mi{position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);vertical-align:top}.pdd_payment_list_v2_mode ._3f1JMFzp{line-height:.5rem;height:.5rem}.pdd_payment_list_elder_mode .pdd_payment_list_v2_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_elder_mode .pdd_payment_list_v2_mode ._3f1JMFzp._27Hsd-bC,.pdd_payment_list_v2_mode ._3f1JMFzp._14ZLILa-,.pdd_payment_list_v2_mode .pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_v2_mode .pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1.02rem}.pdd_payment_list_v2_mode ._3t3V2co2{height:.5rem;line-height:.5rem}.pdd_payment_list_v2_mode ._3t3V2co2 ._1Z5TdEwR{height:.5rem}.pdd_payment_list_v2_mode ._3t3V2co2:after{left:.3rem;right:calc(-100% + .3rem)}.pdd_payment_list_v2_mode ._3t3V2co2._3Pn2PnvI:after{margin-left:0}.pdd_payment_list_v2_mode ._1yOWzRTS{height:1.02rem}.pdd_payment_list_v2_mode ._30P7ub84{top:.17rem}.pdd_payment_list_v2_mode ._1CnXvRsx,.pdd_payment_list_v2_mode ._1PFsuIUL,.pdd_payment_list_v2_mode ._1QMjdH6n,.pdd_payment_list_v2_mode ._2mAKK6dA,.pdd_payment_list_v2_mode ._3EumGWhj,.pdd_payment_list_v2_mode ._3HinBJLb,.pdd_payment_list_v2_mode ._3McrIaJK,.pdd_payment_list_v2_mode ._3vucH7ff,.pdd_payment_list_v2_mode ._3XygMUK5,.pdd_payment_list_v2_mode ._19olO3U_,.pdd_payment_list_v2_mode ._21GMqN4P,.pdd_payment_list_v2_mode .bP1-sBd2{width:.2rem;height:.2rem;background-size:.2rem .2rem;top:.15rem;margin-left:.01rem}.pdd_payment_list_v2_mode ._3DLN0C5d{font-size:.14rem}.pdd_payment_list_elder_mode ._3f1JMFzp{line-height:.56rem;height:.56rem}.pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1.94rem}.pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab{height:1.26rem}.pdd_payment_list_elder_mode ._30P7ub84{top:.2rem}.pdd_payment_list_elder_mode ._1cj95KqM{font-size:.18rem;line-height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2{height:.56rem;line-height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2 ._1Z5TdEwR{height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2 ._2injgcfL ._2QBPsFuu{width:.22rem;height:.56rem}.pdd_payment_list_elder_mode ._1CnXvRsx,.pdd_payment_list_elder_mode ._1PFsuIUL,.pdd_payment_list_elder_mode ._1QMjdH6n,.pdd_payment_list_elder_mode ._2mAKK6dA,.pdd_payment_list_elder_mode ._3EumGWhj,.pdd_payment_list_elder_mode ._3HinBJLb,.pdd_payment_list_elder_mode ._3McrIaJK,.pdd_payment_list_elder_mode ._3vucH7ff,.pdd_payment_list_elder_mode ._3XygMUK5,.pdd_payment_list_elder_mode ._19olO3U_,.pdd_payment_list_elder_mode ._21GMqN4P,.pdd_payment_list_elder_mode .bP1-sBd2{top:.17rem}.pdd_payment_list_elder_mode ._3DLN0C5d{font-size:.18rem}',""]),t.locals={padding:"_3f1JMFzp",disable:"_1frDSkty",paddingInstallment:"_14ZLILa-",paddingInstallment4Elder:"_27Hsd-bC",paddingInstallment2Elder:"_1G7UZoab",item:"_3t3V2co2",hints:"_2injgcfL",icon:"_2QBPsFuu",text:"_1Z5TdEwR",pALIPAY:"_1PFsuIUL",pWEIXIN:"_1CnXvRsx",pQQ:"_3XygMUK5",pWEIXIN_FRIEND:"_3vucH7ff",pDUODUOPAY:"_3McrIaJK",pHBFQ_ALI_PAY:"_2mAKK6dA",pHB_ALI_PAY:"_3HinBJLb",pWEIXIN_CREDIT:"_1QMjdH6n",pLIANLIANPAY:"bP1-sBd2",pUNIONPAY:"_19olO3U_",pDUODUOPAY_ACS:"_3EumGWhj",pfuji:"_21GMqN4P",method:"_3DLN0C5d",selectedSvg:"_30P7ub84",itemInstallment:"_1yOWzRTS",hbMask:"_287rdYha",space:"_2qBOBZaq",itemDisable:"mtfrtIKR",itemDisableText:"_1cj95KqM",richTextImg:"_2HSzi9Mi",installmentFlag:"_3Pn2PnvI",horizontalScan:"_3Mno39XX"}},wgWF:function(e,t,n){},whv1:function(e,t,n){"use strict";t.a={AliPay:1,WeChat:2,QQPay:3,ApplePay:4,AliPayDirectDebit:5,FriendPay:6,HBInstallmentPay:7,AliPayV2:8,UnionPay:9,DuoDuoPay:10,HBPay:11,XianYongHouFu:12,DuoDuoPayACS:13,CreditCardInstallmentPay:14}},wy8a:function(e,t,n){var r=n("KxBF");e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},x7Ie:function(e,t,n){e.exports={ocSkuSelectorBg:"_2zIk0pvb",horizontalScan:"t1GXYzk-"}},xFQA:function(e,t,n){e.exports={promotionList:"_34w2SEkY",postagePromotion:"_2BRDyh8T",promotionItem:"f5srGtiA",titleContainer:"_3myZ3nAP",hasBorder:"_3RxMK8c3",title:"_2qm3tn7H",foldItem:"_3vPh1KJr",foled:"_1CML21tK",close:"eN1J2JTG",closeIcon:"_2aIztqT_",text:"_2DdF0uhN",content:"_2W-zM6Fw",hasPromotionDisplay:"_2R27AZYW",bottom:"cpxcg3RL",promotionDisplay:"_32iTRTrP",btn:"_1W9ox0zY",float:"_3HMTET3t",horizontalScan:"_3Q3jnYMK"}},xIpx:function(e,t,n){e.exports={picker:"Dk8H2PTC",container:"_3ZgfStr5",mask:"SlyH6u_T",panel:"_2cFRKvef",cancel:"_1DxmVUUL",title:"BVFeRMMV",content:"_1THGTrSy",maskBottom:"_26d1VyH_",maskTop:"_38AjMIyV",wrapper:"_1HQzK_aj",wheel:"EmJ244Xm",wheelScroll:"_33sHPv9I",wheelItem:"MEJzOuhS",horizontalScan:"_3hLVV2te"}},xZgz:function(e,t,n){"use strict";var r=n("Zh31"),a=n("OYUV");Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=k,t.findNativeHandler=S,t.default=t.SwipeableViewsContext=void 0;var o=a(n("G2ut")),i=a(n("PTHm")),s=a(n("MOn9")),c=a(n("NRM5")),l=a(n("VJ99")),u=a(n("hR4y")),d=a(n("jiea")),p=r(n("q1tI")),m=(a(n("17x9")),a(n("2W6z")),n("KJF0"));function f(e,t,n,r){return e.addEventListener(t,n,r),{remove:function(){e.removeEventListener(t,n,r)}}}var h={direction:"ltr",display:"flex",willChange:"transform"},v={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},g={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function y(e,t){var n=t.duration,r=t.easeFunction,a=t.delay;return"".concat(e," ").concat(n," ").concat(r," ").concat(a)}function _(e,t){var n=g.rotationMatrix[t];return{pageX:n.x[0]*e.pageX+n.x[1]*e.pageY,pageY:n.y[0]*e.pageX+n.y[1]*e.pageY}}function b(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function k(e,t){for(var n=[];e&&e!==t&&e!==document.body&&!e.hasAttribute("data-swipeable");){var r=window.getComputedStyle(e);"absolute"===r.getPropertyValue("position")||"hidden"===r.getPropertyValue("overflow-x")?n=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return n}var I=null;function S(e){var t=e.domTreeShapes,n=e.pageX,r=e.startX,a=e.axis;return t.some(function(e){var t=n>=r;"x"!==a&&"y"!==a||(t=!t);var o=Math.round(e[g.scrollPosition[a]]),i=o>0,s=o+e[g.clientLength[a]]<e[g.scrollLength[a]];return!!(t&&s||!t&&i)&&(I=e.element,!0)})}var w=p.createContext();t.SwipeableViewsContext=w;var x=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this,e))).rootNode=null,n.containerNode=null,n.ignoreNextScrollEvents=!1,n.viewLength=0,n.startX=0,n.lastX=0,n.vx=0,n.startY=0,n.isSwiping=void 0,n.started=!1,n.startIndex=0,n.transitionListener=null,n.touchMoveListener=null,n.activeSlide=null,n.indexCurrent=null,n.firstRenderTimeout=null,n.setRootNode=function(e){n.rootNode=e},n.setContainerNode=function(e){n.containerNode=e},n.setActiveSlide=function(e){n.activeSlide=e,n.updateHeight()},n.handleSwipeStart=function(e){var t=n.props.axis,r=_(e.touches[0],t);n.viewLength=n.rootNode.getBoundingClientRect()[g.length[t]],n.startX=r.pageX,n.lastX=r.pageX,n.vx=0,n.startY=r.pageY,n.isSwiping=void 0,n.started=!0;var a=window.getComputedStyle(n.containerNode),o=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform");if(o&&"none"!==o){var i=o.split("(")[1].split(")")[0].split(","),s=window.getComputedStyle(n.rootNode),c=_({pageX:parseInt(i[4],10),pageY:parseInt(i[5],10)},t);n.startIndex=-c.pageX/(n.viewLength-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10))||0}},n.handleSwipeMove=function(e){if(n.started){if(null===I||I===n.rootNode){var t=n.props,r=t.axis,a=t.children,o=t.ignoreNativeScroll,i=t.onSwitching,s=t.resistance,c=_(e.touches[0],r);if(void 0===n.isSwiping){var l=Math.abs(c.pageX-n.startX),u=Math.abs(c.pageY-n.startY),d=l>u&&l>m.constant.UNCERTAINTY_THRESHOLD;if(!s&&("y"===r||"y-reverse"===r)&&(0===n.indexCurrent&&n.startX<c.pageX||n.indexCurrent===p.Children.count(n.props.children)-1&&n.startX>c.pageX))return void(n.isSwiping=!1);if(l>u&&e.preventDefault(),!0===d||u>m.constant.UNCERTAINTY_THRESHOLD)return n.isSwiping=d,void(n.startX=c.pageX)}if(!0===n.isSwiping){e.preventDefault(),n.vx=.5*n.vx+.5*(c.pageX-n.lastX),n.lastX=c.pageX;var f=(0,m.computeIndex)({children:a,resistance:s,pageX:c.pageX,startIndex:n.startIndex,startX:n.startX,viewLength:n.viewLength}),h=f.index,v=f.startX;if(null===I&&!o)if(S({domTreeShapes:k(e.target,n.rootNode),startX:n.startX,pageX:c.pageX,axis:r}))return;v?n.startX=v:null===I&&(I=n.rootNode),n.setIndexCurrent(h);var g=function(){i&&i(h,"move")};!n.state.displaySameSlide&&n.state.isDragging||n.setState({displaySameSlide:!1,isDragging:!0},g),g()}}}else n.handleTouchStart(e)},n.handleSwipeEnd=function(){if(I=null,n.started&&(n.started=!1,!0===n.isSwiping)){var e,t=n.state.indexLatest,r=n.indexCurrent,a=t-r;e=Math.abs(n.vx)>n.props.threshold?n.vx>0?Math.floor(r):Math.ceil(r):Math.abs(a)>n.props.hysteresis?a>0?Math.floor(r):Math.ceil(r):t;var o=p.Children.count(n.props.children)-1;e<0?e=0:e>o&&(e=o),n.setIndexCurrent(e),n.setState({indexLatest:e,isDragging:!1},function(){n.props.onSwitching&&n.props.onSwitching(e,"end"),n.props.onChangeIndex&&e!==t&&n.props.onChangeIndex(e,t,{reason:"swipe"}),r===t&&n.handleTransitionEnd()})}},n.handleTouchStart=function(e){n.props.onTouchStart&&n.props.onTouchStart(e),n.handleSwipeStart(e)},n.handleTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),n.handleSwipeEnd(e)},n.handleMouseDown=function(e){n.props.onMouseDown&&n.props.onMouseDown(e),e.persist(),n.handleSwipeStart(b(e))},n.handleMouseUp=function(e){n.props.onMouseUp&&n.props.onMouseUp(e),n.handleSwipeEnd(b(e))},n.handleMouseLeave=function(e){n.props.onMouseLeave&&n.props.onMouseLeave(e),n.started&&n.handleSwipeEnd(b(e))},n.handleMouseMove=function(e){n.props.onMouseMove&&n.props.onMouseMove(e),n.started&&n.handleSwipeMove(b(e))},n.handleScroll=function(e){if(n.props.onScroll&&n.props.onScroll(e),e.target===n.rootNode)if(n.ignoreNextScrollEvents)n.ignoreNextScrollEvents=!1;else{var t=n.state.indexLatest,r=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;n.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,n.props.onChangeIndex&&r!==t&&n.props.onChangeIndex(r,t,{reason:"focus"})}},n.updateHeight=function(){if(null!==n.activeSlide){var e=n.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&n.state.heightLatest!==e.offsetHeight&&n.setState({heightLatest:e.offsetHeight})}},n.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},n.setIndexCurrent(e.index),n}return(0,d.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.transitionListener=f(this.containerNode,"transitionend",function(t){t.target===e.containerNode&&e.handleTransitionEnd()}),this.touchMoveListener=f(this.rootNode,"touchmove",function(t){e.props.disabled||e.handleSwipeMove(t)},{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout(function(){e.setState({renderOnlyActive:!1})},0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,m.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var e=this;return{slideUpdateHeight:function(){e.updateHeight()}}}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,n=g.transform[t](100*e);this.containerNode.style.WebkitTransform=n,this.containerNode.style.transform=n}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=(r.action,r.animateHeight),s=r.animateTransitions,c=r.axis,l=r.children,u=r.containerStyle,d=r.disabled,m=(r.disableLazyLoading,r.enableMouseEvents),f=(r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance,r.slideStyle),_=r.slideClassName,b=r.springConfig,k=r.style,I=(r.threshold,(0,i.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),S=this.state,x=S.displaySameSlide,C=S.heightLatest,E=S.indexLatest,P=S.isDragging,N=S.renderOnlyActive,O=d?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},D=!d&&m?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},T=(0,o.default)({},v,f);if(P||!s||x)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=y("transform",b),t=y("-webkit-transform",b),0!==C){var A=", ".concat(y("height",b));e+=A,t+=A}var j={height:null,WebkitFlexDirection:g.flexDirection[c],flexDirection:g.flexDirection[c],WebkitTransition:t,transition:e};if(!N){var R=g.transform[c](100*this.indexCurrent);j.WebkitTransform=R,j.transform=R}return a&&(j.height=C),p.createElement(w.Provider,{value:this.getSwipeableViewsContext()},p.createElement("div",(0,o.default)({ref:this.setRootNode,style:(0,o.default)({},g.root[c],k)},I,O,D,{onScroll:this.handleScroll}),p.createElement("div",{ref:this.setContainerNode,style:(0,o.default)({},j,h,u),className:"react-swipeable-view-container"},p.Children.map(l,function(e,t){if(N&&t!==E)return null;var r,o=!0;return t===E&&(o=!1,a&&(r=n.setActiveSlide,T.overflowY="hidden")),p.createElement("div",{ref:r,style:T,className:_,"aria-hidden":o,"data-swipeable":"true"},e)}))))}}]),t}(p.Component);x.displayName="ReactSwipableView",x.propTypes={},x.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var C=x;t.default=C},"xq+1":function(e,t,n){e.exports={virtualAddress:"_25PtC6FA",horizontalScan:"_2dPwACKv"}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-eve-spike/js/SkuSelector_51eb2c7eaeaf5e1f99d6.js.map