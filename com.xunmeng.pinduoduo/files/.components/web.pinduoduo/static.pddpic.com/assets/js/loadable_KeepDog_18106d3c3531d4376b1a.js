(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[30],{OMwm:function(e,t,n){"use strict";n.r(t);var r=n("FdF9"),a=n("aSy9"),c=n("y4Rd"),i=n("LyAW"),u=n("aVB2"),o=n("P9so"),s=n("xNPO"),l=n("v2IZ"),f=n("+BxA"),d=n("o0o1"),b=n.n(d),O=n("yXPU"),m=n.n(O),p=n("J4zp"),v=n.n(p),j=n("O+S/"),g=n("piFe"),h=n("tRyy"),w=n("lSNA"),_=n.n(w),E=n("AGSb"),y=n("QjPr"),D=n("E4WP");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){_()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C="dog_watch_meal_time";function S(){var e=Object(y.f)(C),t=Object(E.a)("pdd_user_id");return t&&t!==(null===e||void 0===e?void 0:e.uid)?(Object(y.c)(C),null):e}function T(e){var t=S();return(null===t||void 0===t?void 0:t[e])||0}var k=n("TVmi"),A=n("Q8Yf"),V=n("IkW8"),M=n("wq3h"),W=function(){var e=j.q.useValue(),t=e.belong,n=e.isLiveTabPageVisible,a=e.visibleChangeType,c=g.b.useAtom(),i=v()(c,2),u=i[0],o=u.currentWatchVideoTimeMs,l=u.watchTimeSec,f=u.stage,d=u.stageStatus,O=u.achieveTimes,p=i[1],w=p.setCurrentWatchVideoTimeMs,P=p.finishCountDown,M=p.updateMission,W=p.getMissionData,B=p.showWatchVideoCompleteBubble,L=Object(r.useRef)(),K=Object(r.useRef)(0),N=Object(A.a)({activityName:V.c.DogEat});L.current={watchTimeSec:l,currentWatchVideoTimeMs:o,stage:f,stageStatus:d,watchMs:N};var R=Object(h.d)(f,d,O);return Object(r.useEffect)(function(){function e(){return(e=m()(b.a.mark(function e(){var r,c,i,u,o,s,l,f;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==j.e.Tab||!n||![j.p.Back,j.p.Home].includes(a)){e.next=16;break}if(r=L.current,c=r.watchMs,i=r.stage,u=r.stageStatus,o=r.watchTimeSec,u===k.d.CanWatchVideo){e.next=4;break}return e.abrupt("return");case 4:if(s=Object(h.d)(i,u,O),!((l=T(s))>=1e3*o)){e.next=15;break}return e.next=9,W();case 9:if(f=e.sent){e.next=12;break}return e.abrupt("return");case 12:f.missionExt.stage!==i||f.missionExt.stage!==u||f.achieveTimes!==O?M(f):(K.current=l,w(l)),e.next=16;break;case 15:l>K.current&&(K.current=Math.max(l-c,K.current));case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,n,a,w,M,W,O]),Object(s.a)(function(){K.current=T(R),w(K.current)}),Object(r.useEffect)(function(){var e=K.current+N;w(e),function(e,t){var n=S();n||(n={id:Object(D.a)(),uid:Object(E.a)("pdd_user_id")}),Object(y.m)(C,x(x({},n),{},_()({},e,t)))}(R,e)},[N,w]),Object(r.useEffect)(function(){var e=K.current+N;if(Math.floor(e/1e3)>=l)return P(),void B()},[l,N,P,B]),null},B=Object(r.memo)(function(){var e=g.b.useAtom(),t=v()(e,2),n=t[0],a=n.stage,c=n.stageStatus,i=n.isCountingDown,u=n.achieveTimes,o=t[1],s=o.startCountDown,l=o.finishCountDown,f=o.setCurrentWatchVideoTimeMs,d=o.resetWatchVideoTime,b=Object(h.d)(a,c,u),O=Object(g.f)();return Object(M.a)(function(){f(0)},[b,f]),Object(r.useEffect)(function(){c!==k.d.CanWatchVideo&&l()},[l,c]),Object(r.useEffect)(function(){O?s():c!==k.d.CanWatchVideo&&d()},[O,a,c,s,d]),i?r.default.createElement(W,{key:b}):null});function L(){return r.default.createElement(B,null)}var K=n("RCeL");var N=Object(r.memo)(function(){return r.default.createElement(r.default.Fragment,null,r.default.createElement(K.b,null))});t.default=Object(r.memo)(function(){var e=Object(c.a)(),t=Object(c.b)();return Object(s.a)(function(){console.log("KeepDogMount")}),r.default.createElement("div",null,r.default.createElement(a.a,{name:"alive_treasure_dog",onPageBack:function(){var n,r,a,c;(null===(n=t(o.a))||void 0===n?void 0:null===(r=n.ext)||void 0===r?void 0:r.canDraw)&&(null===(a=t(o.a))||void 0===a?void 0:null===(c=a.ext)||void 0===c?void 0:c.hasAdopted)&&e(i.c).showBubble({type:u.d.KeepDogBack,text:"陪主人看视频\n拿狗粮真开心！",petId:f.c.KEEP_DOG,icon:"https://commfile.pddpic.com/galerie-go/ddvideo/6a5a0eba-f3a5-4911-a669-dae61932beb8.png.slim.png",onImpr:function(){Object(l.d)({page_el_sn:5866768})},onClick:function(){Object(l.c)({page_el_sn:5866768})}})}}),r.default.createElement(L,null),r.default.createElement(N,null))})}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-video-layer/js/loadable_KeepDog_18106d3c3531d4376b1a.js.map