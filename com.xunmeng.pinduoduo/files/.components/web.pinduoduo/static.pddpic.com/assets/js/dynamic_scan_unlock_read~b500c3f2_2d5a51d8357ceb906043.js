(window.ReadWeJsonp=window.ReadWeJsonp||[]).push([[37],{"VzOA":function(e,t,a){"use strict";a.r(t);var o,n,r,c,i,l,s,u,p=a("a+Ds"),h=a("p5LO"),b=a("a3ss"),d=a("1OyB"),f=a("vuIU"),k=a("JX7q"),m=a("Ji7U"),C=a("LK+K"),O=a("rePB"),g=a("Y65e"),v=(a("+JCI"),a("deMC")),_=a("4bvG"),j=a("TyAF"),T=a("q1tI"),y=a.n(T),U={"contain":"_2TC8npv","fontMedium":"_nZ8MCq7","linearBg":"_3UjDhUj","white":"_oyxrkJI","green":"_3DqdMm0","yellow":"_1-L7lzr","blue":"_1Z75Bqs","black":"_1Oealm_","ink":"_BcTLzMW","mountain":"_1FwVX6Y","bamboo":"_aOE5wkU","daisy":"_2rD4Q7T","flower":"_alsIXGw","spring":"_3lF1txL","content":"_OtJrD5c","paddingStyle":"_2ITlD25","text":"_1SDbWgW","iconFont":"_3DtSe1M","tag":"_X7Isa01","readBtnColor":"_17_jNpd","orderBtnColor":"_2RJJ0aQ","topTicket":"_OWH0PLr","price":"_3j6TX1F","ticket":"_zvgCK3n","color":"_3HWROpN","fourColor":"_1ZFA96W","bookWrapper":"_14R5pIx","bookBody":"_3E2Da_f","bookFront":"_2BNyfjq","bookRight":"_Dp961wV","bookBack":"_1Q11jkq","lockWrapper":"_2wpPZbI","lock":"_bkBOucI","autoCheck":"_1ANPLrr","select":"_2vF91FS","topTicketAddAni":"_2mwB_ei","transFadeInOut":"_34Ee1re","placeholder":"_3gJP5RF"},S=a("TSYQ"),I=a.n(S),N=a("Y/FJ"),w=a("NlLh"),E=a("vZ4y"),B=a("cmhe"),D=a("nahQ"),R=a("SQ/9"),M=a("HIM3"),F=a("k/Ow"),A=a("nigR"),P=a("TRXh"),W=a("tKRR"),L=a("9uCs"),x=a("d7Jr"),z=a("FpOS"),J=a("2vnA"),K=a("Mt83"),H=a("laqm"),q=a("bmJN"),X=a("SATD"),Q=a("uQgb"),G=a("jY+O"),Y=a("1KX3"),Z=a("3fu3"),V=a("Be8r"),$=a("gzTa"),ee=a("JAw4"),te=a("fb3C"),ae=a("guv2"),oe=a("6OU5"),ne=Object(Y.a)(U,"#color"),re=F.i.CASH_SCAN_UNLOCK,ce=F.i.CASH_FIXED_VIP,ie=F.i.CASH_ORDER_UNLOCK_BOOK,le=F.i.CASH_FREE_CHAPTER,se=(o=Object(_.b)(1e3),n=Object(_.b)(1e3),Object(j.observer)((c=function(e){Object(m.default)(ScanUnlockRead,e);var t=Object(C.default)(ScanUnlockRead);function ScanUnlockRead(){var e;Object(d.default)(this,ScanUnlockRead);for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o)),Object(O.default)(Object(k.default)(e),"disposer",void 0),Object(O.default)(Object(k.default)(e),"autoUnlockDisposer",void 0),Object(O.default)(Object(k.default)(e),"autoTimeIntervalDisposer",void 0),Object(O.default)(Object(k.default)(e),"handleClickGotoUnlockChapter",(function(t){null==t||t.stopPropagation(),e.handleClickRead(!1)})),Object(b.a)(Object(k.default)(e),"handleClickRead",i,Object(k.default)(e)),Object(O.default)(Object(k.default)(e),"handleClickUnlockBook",(function(t){var a=e.props.chapterNum,o=v.a.bidStr;Object(W.h)({"key":"unlock_order_info","value":JSON.stringify({"b":o})}).then((function(){Object(D.l)((function(){R.a.afterBackWork(),v.a.unlockCurrentBook(a)}),{"bid_str":o})})).catch(oe.m),null==t||t.stopPropagation(),e.clearTimeInterval(),Object(x.a)(z.c.BOTTOM_LOCK_CHAPTER,{"mission_type":ie})})),Object(b.a)(Object(k.default)(e),"handleUseChapterTicket",l,Object(k.default)(e)),Object(b.a)(Object(k.default)(e),"unlockChapterWithTicket",s,Object(k.default)(e)),Object(b.a)(Object(k.default)(e),"handleUnlockFreeChapter",u,Object(k.default)(e)),Object(O.default)(Object(k.default)(e),"handleSetting",(function(){v.a.toggleSettingControl()})),Object(O.default)(Object(k.default)(e),"handleChangeAuto",(function(e){var t=v.a.bidStr,a=v.a.autoUnlock;Object(A.K)({"bidStr":t,"autoUnlock":!a}).then((function(e){e.success&&v.a.toggleAutoUnlock()})),null==e||e.stopPropagation()})),Object(O.default)(Object(k.default)(e),"clearTimeInterval",(function(){var t;null===(t=e.autoTimeIntervalDisposer)||void 0===t||t.clear(),Q.a.setCountDown(0)})),e}return Object(f.default)(ScanUnlockRead,[{"key":"componentDidMount","value":function componentDidMount(){var e=this;this.showUnlock?Object(x.b)(z.c.BOTTOM_LOCK_CHAPTER,{"mission_type":ie}):Object(x.b)(z.c.BOTTOM_LOCK_CHAPTER,{"mission_type":re});var t=X.b.userInfo;if(!X.b.isBlankUser){var a,o=t.chapterTicket;if(!(void 0===o?0:o))null===(a=this.disposer)||void 0===a||a.call(this),this.disposer=Object(J.autorun)((function(){var t,a,o=v.a.chapterNum;(null===(t=e.autoTimeIntervalDisposer)||void 0===t||t.clear(),Q.a.setCountDown(N.b),o===e.props.chapterNum)&&(e.autoTimeIntervalDisposer=Object(H.a)((function(){Object(J.runInAction)((function(){var t=Q.a.autoScanUnlockChapterCountDown;if(!ae.a.showListenBookMask){var a,o=t-1;if(Q.a.setCountDown(o),o<=0&&X.b.pageShow)e.handleClickGotoUnlockChapter(),null===(a=e.autoTimeIntervalDisposer)||void 0===a||a.clear()}}))}),1e3),e.freeChapter&&(e.clearTimeInterval(),null===(a=e.disposer)||void 0===a||a.call(e)))}))}}},{"key":"componentWillUnmount","value":function componentWillUnmount(){var e,t;this.clearTimeInterval(),null===(e=this.disposer)||void 0===e||e.call(this),null===(t=this.autoUnlockDisposer)||void 0===t||t.call(this)}},{"key":"render","value":function render(){var e,t=v.a.colorMode,a=v.a.totalWords,o=v.a.coverUrl,n=(v.a.autoUnlock,Q.a.addChapterTicketAmount,M.b.getMissionInfo(re).extMap),r=M.b.getMissionInfo(ce).extMap,c=void 0===r?{}:r,i=n||{},l=i.firstUnlockTag,s=i.unlockCount,u=i.firstUnlock,b=(c||{}).firstUnlock||u,d=X.b.isIphoneX,f=X.b.userInfo,k=X.b.isBlankUser,m=f.chapterTicket,C=void 0===m?0:m,g={"fontSize":"".concat(Object(q.a)(26)),"fontWeight":600},_={"backgroundImage":"url(".concat(o,")")},j=k?"本章内容已上锁":this.freeChapter?"恭喜获得每日免费解锁".concat(this.freeChapterNumber,"章奖励"):l?"解锁后续更多精彩内容":"使用解锁特权阅读更多内容";return y.a.createElement("div",{"className":U.contain,"onClick":this.handleSetting},y.a.createElement("div",{"className":I()(U.linearBg,ne[t])}),y.a.createElement("div",{"className":I()(U.content,ee.a[t],ne[t],(e={},Object(O.default)(e,K.a.filter,t===N.U.INK),Object(O.default)(e,U.paddingStyle,d),e))},y.a.createElement(h.a,{"className":U.text},!this.freeChapter&&y.a.createElement(B.a,{"fontName":"lock","className":U.iconFont}),j),this.freeChapter&&y.a.createElement(y.a.Fragment,null,y.a.createElement(h.a,{"className":U.bookWrapper},y.a.createElement(h.a,{"className":U.bookBody},y.a.createElement(h.a,{"className":U.bookRight}),y.a.createElement(h.a,{"className":U.bookFront,"style":_}),y.a.createElement(h.a,{"className":U.bookBack}))),y.a.createElement(h.a,{"className":U.lockWrapper},y.a.createElement(h.a,{"className":U.lock}))),this.freeChapter?y.a.createElement(E.a,{"size":w.a.large,"customType":U.orderBtnColor,"onClick":this.handleUnlockFreeChapter,"strongStyle":g,"text":"免费解锁"}):null,k?y.a.createElement(h.a,{"className":U.placeholder}):y.a.createElement(y.a.Fragment,null,!this.freeChapter&&y.a.createElement(E.a,{"size":w.a.large,"customType":U.orderBtnColor,"onClick":this.handleClickGotoUnlockChapter,"strongStyle":g,"text":"浏览商品解锁后".concat(s,"章").concat(this.autoUnlockChapterText)}),this.freeChapter?null:C?y.a.createElement(E.a,{"size":w.a.large,"customType":U.readBtnColor,"onClick":this.handleUseChapterTicket,"text":"使用1张解锁章节券"}):this.showUnlock?y.a.createElement(E.a,{"size":w.a.large,"customType":U.readBtnColor,"onClick":this.handleClickUnlockBook,"text":b?"0元！解锁全部章节":"限时！解锁全部章节"}):null,this.freeChapter?null:C?y.a.createElement(h.a,{"className":U.ticket},"我的解锁章节券：",y.a.createElement(p.a,{"className":U.color},C,"张")):this.showUnlock?y.a.createElement(h.a,{"className":U.price},"本书价值",(a/1e3*.05).toFixed(0),"元·解锁后本书可享免费阅读"):null)))}},{"key":"showUnlock","get":function get(){return M.b.getMissionInfo(re).status===F.g.progressing}},{"key":"freeChapter","get":function get(){var e=M.b.getMissionInfo(le).status,t=F.g.progressing,a=L.a.freeChapterGray,o=Q.a.showFreeChapter;return a&&e===t&&o}},{"key":"freeChapterNumber","get":function get(){var e=M.b.getMissionInfo(le);return Object($.c)(e,A.A.CHAPTER_TICKET)}},{"key":"autoUnlockChapterText","get":function get(){var e=X.b.userInfo.chapterTicket,t=void 0===e?0:e,a=Q.a.autoScanUnlockChapterCountDown;return a>0&&!t?"<（".concat(a,"秒自动跳转）>"):""}}]),ScanUnlockRead}(T.Component),i=Object(g.a)(c.prototype,"handleClickRead",[_.a],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(t){var a=e.props.chapterNum,o=v.a.bidStr,n=v.a.actualCatalogList,r=M.b.getMissionInfo(re),c=r.extMap,i=r.finishCount,l=c||{},s=l.unlockCount,u=l.firstUnlockTag,p=(Number(s)||0)>n.length-a,h=(n[a]||{}).chapterIdStr;return Object(x.a)(z.c.BOTTOM_LOCK_CHAPTER,{"mission_type":re}),e.clearTimeInterval(),!u&&h?Object(A.L)({"missionType":re,"extraInfoMap":{"bidStr":o,"chapterIdStr":h}}).then((function(e){if(e.completeSuccess){var t=Math.min(Number(s)||0,n.length-a);v.a.unlockFromChapterNum(a,t,p,!0),Z.a.cashFreeUnlockRewardPopupStore.openWithData({"noEnoughChapter":p,"unlockCount":t}),Object(W.h)({"key":"first_unlock_tag","value":"1"}).then((function(){M.b.updateMissionFromRemote(re)})).catch(oe.m)}else P.a.showToast("请稍后再试")})).catch((function(){P.a.showToast("请稍后再试")})):Object(W.h)({"key":"unlock_order_info","value":JSON.stringify({"b":o})}).then((function(){Object(D.r)((function(){G.b.afterBackWork().then((function(){var e=M.b.getMissionInfo(re).finishCount;v.a.unlockFromChapterNum(a,Math.min(Number(s)||0,n.length-a),p,e===i)}))}),{"bid_str":o,"chapter_id_str":h,"no_enough_chapter":p,"auto_scan_unlock":t})})).catch(oe.m)}}}),l=Object(g.a)(c.prototype,"handleUseChapterTicket",[o],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(t){var a=X.b.userInfo.chapterTicket;(void 0===a?0:a)>0?e.unlockChapterWithTicket(1):Z.a.cashChapterTicketOrderPopupStore.open(),null==t||t.stopPropagation()}}}),s=Object(g.a)(c.prototype,"unlockChapterWithTicket",[n],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(t){var a=e.props.chapterNum,o=v.a.bidStr,n=v.a.actualCatalogList,r=(n[a]||{}).chapterIdStr,c=void 0===r?"":r;return c&&o?Object(A.qb)({"bidStr":o,"chapterIdStr":c,"amount":t}).then((function(e){var o=e.status,r=e.chapterTicket;if(o===V.a.SUCCESS){var c=(Number(t)||0)>n.length-a;v.a.unlockFromChapterNum(a,t,c,!1),X.b.setChapterTicket(r)}})).catch(te.b):Promise.resolve()}}}),u=Object(g.a)(c.prototype,"handleUnlockFreeChapter",[_.a],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(){return Object(A.L)({"missionType":le}).then((function(t){var a=t.completeSuccess,o=t.mission,n=t.rewards;if(a){var r=Object($.g)(A.A.CHAPTER_TICKET,n);return e.unlockChapterWithTicket(r).then((function(){M.b.updateMissionData(o)}))}return P.a.showToast("网络异常，请稍后重试"),Promise.resolve()})).catch((function(){return P.a.showToast("网络异常，请稍后重试"),Promise.resolve()}))}}}),Object(g.a)(c.prototype,"showUnlock",[J.computed],Object.getOwnPropertyDescriptor(c.prototype,"showUnlock"),c.prototype),Object(g.a)(c.prototype,"freeChapter",[J.computed],Object.getOwnPropertyDescriptor(c.prototype,"freeChapter"),c.prototype),Object(g.a)(c.prototype,"freeChapterNumber",[J.computed],Object.getOwnPropertyDescriptor(c.prototype,"freeChapterNumber"),c.prototype),Object(g.a)(c.prototype,"autoUnlockChapterText",[J.computed],Object.getOwnPropertyDescriptor(c.prototype,"autoUnlockChapterText"),c.prototype),r=c))||r);t.default=se}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-fun-read/js/dynamic_scan_unlock_read~b500c3f2_2d5a51d8357ceb906043.js.map