(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[113],{"+zld":function(e,t,n){"use strict";n.d(t,"a",function(){return j});var r=n("o0o1"),a=n.n(r),i=n("yXPU"),o=n.n(i),c=n("lwsE"),u=n.n(c),s=n("W8MJ"),l=n.n(s),f=n("7W2i"),p=n.n(f),d=n("a1gu"),g=n.n(d),m=n("Nsbk"),b=n.n(m),h=n("UbFF"),w=n("AZ7A"),O=n("UMxp");function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var y=function(e){var t=e||{},n=t.message,r=t.response,a=(r=void 0===r?{}:r).status;if(409===(void 0===a?void 0:a))return Object(O.a)("活动太火爆啦，稍后再来吧");Object(O.a)(n||"活动太火爆啦，稍后再来吧")},j=function(e){p()(n,e);var t=v(n);function n(){return u()(this,n),t.apply(this,arguments)}return l()(n,[{key:"queryFunMissionList",value:function(){var e=o()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/query/mission/list",t,{defaultErrorHandler:y});case 3:return n=e.sent,e.abrupt("return",Object(w.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"completeFunMission",value:function(){var e=o()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/mission/complete",t,{defaultErrorHandler:y});case 3:return n=e.sent,e.abrupt("return",Object(w.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"gainFunMissionReward",value:function(){var e=o()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/reward/gain",t,{defaultErrorHandler:y});case 3:return n=e.sent,e.abrupt("return",Object(w.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}(h.a)},"5Aku":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,'.-IcgMuWI{text-align:center;position:relative;left:0}._3Sjpz1rU{width:111px;height:28px;background:rgba(224,46,36,.9);border-radius:0 14.5px 14.5px 0;font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500;font-size:14px;color:#fff}._3Sjpz1rU:before{content:"\\E611";font-size:.09rem;color:hsla(0,0%,100%,.8);font-family:short-video;line-height:1;font-weight:400;-webkit-font-smoothing:antialiased;margin-right:2px;margin-left:4px}._3Sjpz1rU span{line-height:1}._639AjrsV{position:relative;margin-left:5px}._639AjrsV ._1IF8Pta4{width:78px;height:80px}._639AjrsV .QY8BmgBB{width:78px;height:26px;background-color:#ffda00;box-shadow:inset 0 -1px 0 0 #d88700;border-radius:13px;font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500;font-size:14px;color:#8d4a07;position:absolute;bottom:0}._639AjrsV .QY8BmgBB:before{content:"\\E611";font-size:.09rem;color:rgba(141,74,7,.8);font-family:short-video;line-height:1;font-weight:400;-webkit-font-smoothing:antialiased;margin-right:2px;margin-left:3px}._28lnIUZH{width:64px;height:64px;margin-left:12px;margin-top:12px}._28lnIUZH ._3IyuIUQd{margin-top:20px;font-size:12px;color:#185584;line-height:17px;opacity:.8}._28lnIUZH ._3IyuIUQd,._28lnIUZH .EiO0ynVH{font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500}._28lnIUZH .EiO0ynVH{height:19px;margin-top:3px;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;flex-wrap:nowrap;-ms-wrap-through:nowrap;-webkit-flex-wrap:nowrap;color:#fff;letter-spacing:.01px;font-size:10px}._28lnIUZH .EiO0ynVH .V8vhTiQt{font-size:16px}.gkr3CYWH{width:1rem;height:1rem;background:rgba(0,0,0,.6);border-radius:.06rem;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.gkr3CYWH .ksziqfGg{width:.38rem;height:.38rem;margin-top:.19rem}.gkr3CYWH ._2TK845Ex{opacity:.8;font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500;font-size:.12rem;color:#185584;letter-spacing:.01px;text-align:center;position:absolute;top:.31rem}.gkr3CYWH ._2t04eBCx{line-height:.21rem;font-size:.15rem;color:#fff;text-align:center;margin-top:.1rem}',""]),t.locals={wrap:"-IcgMuWI",backBtn:"_3Sjpz1rU",backBtnNew:"_639AjrsV",gardenImg:"_1IF8Pta4",btn:"QY8BmgBB",waterWrap:"_28lnIUZH",rewardNum:"_3IyuIUQd",getReward:"EiO0ynVH",countdown:"V8vhTiQt",successDialog:"gkr3CYWH",waterIcon:"ksziqfGg",waterNum:"_2TK845Ex",successTip:"_2t04eBCx"}},"9xgk":function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),i=n("yXPU"),o=n.n(i),c=n("lSNA"),u=n.n(c),s=n("J4zp"),l=n.n(s),f=n("FdF9"),p=n("TSYQ"),d=n.n(p),g=n("v2IZ"),m=n("mWrd"),b=n("g5zU"),h=n.n(b),w=n("vkis"),O=n("IW0v"),v=n("33M6"),y=n("3vqr"),j=n("Sj10"),x=n("MAVO"),_=n("+zld"),k=n("yxhh");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){u()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=n("Ro2a"),S=n.n(P),T=n("hKGL"),I=n("qg0D"),N=n("/EUv"),D=n("sCIj"),H=n("O+S/"),R=n("9H8l"),M=n("LyAW"),F=n("6xTs"),A=n("ig5e"),z=n("wq3h");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){u()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function W(e){var t=Object(F.k)({ignoreDemoLimited:!0,customVideoMaxWatchTime:5e3}),n=M.c.useActions().showBubble,r=Object(A.a)(function(){var e=document.getElementById("manor-waterdrop-misson-body");e&&n({type:R.b.WaterDropMission,priority:1,showPeriod:3e3,targets:[e],text:"上滑换个视频可继续计时"})},1e4),a=Object(f.useRef)(null);return Object(z.a)(function(){clearTimeout(a.current),a.current=setTimeout(function(){r()},1500);var n=e.data.totalSecondsToWatch-Math.floor(t/1e3);n<=0&&e.complete(),e.updateTaskInfo(function(e){return U(U({},e),{},{seconds:n})})},[t,e.updateTaskInfo,e.complete,e.data.seconds,e.data.status,e.data.totalSecondsToWatch]),null}var L=n("LTlm");function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){u()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q="https://funimg.pddpic.com/rankiing/3be9adc3-3aa6-4a69-879d-7d88c45b9029.png.slim.png",G=function(e){return h()(S.a),f.default.createPortal(f.default.createElement(w.a,{trackingInfo:{page_el_sn:5310271}},f.default.createElement("div",{className:d()(S.a.successDialog,"flex-dir-col","flex-box","align-center")},f.default.createElement(O.a,{src:q,className:S.a.waterIcon}),f.default.createElement("p",{className:S.a.waterNum},e.waterNum,"g"),f.default.createElement("p",{className:S.a.successTip},"领取成功"))),document.getElementById("main"))};t.default=Object(f.memo)(function(){h()(S.a);var e=Object(f.useContext)(L.a),t=Object(f.useState)(!1),n=l()(t,2),r=n[0],i=n[1],c=Object(f.useRef)(!1),u=Object(f.useRef)(null),s=function(){var e={business_id:3,biz_source:"CPT",mission_type:37079},t=Object(f.useRef)(!1),n=Object(f.useRef)(!1),r=Object(f.useRef)(new _.a).current,i=Object(f.useState)({status:k.a.None,waterNum:null}),c=l()(i,2),u=c[0],s=c[1];Object(f.useEffect)(function(){r.queryFunMissionList({business_id:3,biz_source:"CPT",mission_type_list:[37079]}).then(function(e){var n=e.missionList,r=null===n||void 0===n?void 0:n[37079];if(r){var a,i=r.rewardResult,o=r.isDrawable,c=r.drawCount,u=r.finishCount,l=r.maxCount,f=r.extMap;if(u>=l&&(t.current=!0),!(null===f||void 0===f?void 0:f.scanSecond))return;s({totalSecondsToWatch:Number((null===f||void 0===f?void 0:f.scanSecond)||0),seconds:Number((null===f||void 0===f?void 0:f.scanSecond)||0),waterNum:null===i||void 0===i?void 0:null===(a=i[0])||void 0===a?void 0:a.maxRewardAmount,status:c>=l?k.a.Completed:u>c&&o?k.a.CanGetReward:k.a.CountDown})}})},[]);var p=Object(x.a)(o()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(u.status!==k.a.CanGetReward&&s(C(C({},u),{},{status:k.a.CanGetReward})),!t.current){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.completeFunMission(e);case 5:n.sent&&(t.current=!0);case 7:case"end":return n.stop()}},n)})));return{data:u,getReward:function(){var t=o()(a.a.mark(function t(){var i,o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.current){t.next=2;break}return t.abrupt("return");case 2:return n.current=!0,t.prev=3,t.next=6,p();case 6:return t.next=8,r.gainFunMissionReward(e);case 8:return o=t.sent,(c=!!(null===(i=o.rewardList)||void 0===i?void 0:i.length))&&s(C(C({},u),{},{status:k.a.Completed})),t.abrupt("return",c);case 14:return t.prev=14,t.t0=t.catch(3),t.abrupt("return",!1);case 17:return t.prev=17,n.current=!1,t.finish(17);case 20:case"end":return t.stop()}},t,null,[[3,14,17,20]])}));return function(){return t.apply(this,arguments)}}(),complete:p,updateTaskInfo:s}}(),p=s.data,b=s.getReward,E=p.waterNum,P=p.seconds,R=p.status,M=T.a.useActions().hide,F=I.c.useActions().showSignCashAfterToast,A=N.a.useActions().showLimitTimeRedpacketAfterToast,z=D.b.useActions().getTestStrategy,B=H.q.useValue().belong,U=R===k.a.None,V="B"===z("manorWaterdropMission"),Q=B===H.e.Tab;Object(f.useEffect)(function(){if(!U){Object(g.d)(Y({page_el_sn:V?5347647:5310230,type_number:R},e));var t=setTimeout(function(){M()},6e5);return function(){clearTimeout(t),u.current&&clearTimeout(u.current)}}},[U,V]);var Z=function(){var t=o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(g.c)(Y({page_el_sn:5310231,type_number:R},e)),R!==k.a.CanGetReward||c.current){t.next=8;break}return c.current=!0,t.next=5,b();case 5:t.sent?J():Object(y.a)("网络异常，请稍后重试"),c.current=!1;case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),J=function(){r||(i(!0),u.current=setTimeout(function(){i(!1),clearTimeout(u.current),F(),A()},2e3))},X=Object(f.useMemo)(function(){switch(R){case k.a.CountDown:return f.default.createElement(f.default.Fragment,null,"再看",f.default.createElement("span",{className:S.a.countdown},P),"秒");case k.a.CanGetReward:return"可领取";case k.a.Completed:return"已领取"}},[P,R]);return U?null:f.default.createElement("div",{className:S.a.wrap},f.default.createElement(j.a,{urls:[q]}),Q&&f.default.createElement("div",{onClick:function(){Object(g.c)(Y({page_el_sn:V?5347647:5310230},e)),m.a.uniformForward("garden_home.html?_pdd_fs=1&_pdd_tc=676666&_pdd_sbs=1&pull_up_mission_list=1&fun_id=ddsp1")}},V?f.default.createElement("div",{className:S.a.backBtnNew},f.default.createElement("div",{className:S.a.gardenImg},f.default.createElement(O.a,{src:"https://funimg.pddpic.com/rankiing/1f213ca5-8b2c-4dc4-b58e-5cff9bed8bc3.png.slim.png"})),f.default.createElement("div",{className:d()(S.a.btn,"flex-box","align-center")},"多多果园")):f.default.createElement("div",{className:d()(S.a.backBtn,"flex-box","align-center")},"返回多多果园")),R!==k.a.Completed&&f.default.createElement(f.default.Fragment,null,f.default.createElement(W,s),f.default.createElement(w.a,{trackingInfo:Y({page_el_sn:5310231},e)},f.default.createElement(v.a,{id:"manor-waterdrop-misson-body",src:"https://funimg.pddpic.com/rankiing/7c337b90-4908-4668-8c14-ca2b895d9cec.png.slim.png",resizeWidth:256,className:d()(S.a.waterWrap,"flex-dir-col","flex-box","align-center"),onClick:Z},f.default.createElement("div",{className:S.a.rewardNum},E,"g"),f.default.createElement("div",{className:S.a.getReward},X)))),r&&f.default.createElement(G,{waterNum:E}))})},Ro2a:function(e,t,n){var r=n("5Aku"),a=n("Q8e5"),i="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return a(i,e)}},Sj10:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return p});var r=n("lSNA"),a=n.n(r),i=n("FdF9"),o=n("h3qu"),c=n("ez7s"),u=n("qTo4"),s=n("nY7A");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var f=function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=Object(i.useContext)(u.a),p=Object(i.useContext)(s.b).requestContext,d=null===p||void 0===p?void 0:null===(n=p.platform)||void 0===n?void 0:n.system,g=!!d&&d!==o.b.IOS,m=JSON.stringify(t),b=e.join("&"),h=Object(i.useMemo)(function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({webpEnable:f,enableGifToWebp:g},t)},[m,f,g]);Object(i.useEffect)(function(){r&&e.forEach(function(e){return function(e){var t=new Image;return new Promise(function(n,r){t.onerror=function(){r()},t.onload=function(){n()},t.src=e})}(Object(c.a)(e,h))})},[r,b,h])},p=function(e){return f(e.urls,e.param),null}},yxhh:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.CountDown=0]="CountDown",e[e.CanGetReward=1]="CanGetReward",e[e.Completed=2]="Completed",e[e.None=3]="None"}(r||(r={}))}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-video-layer/js/loadable__ManorWater_c9b988d5b502c246317c.js.map