(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3262],{97719:function(e,t,r){"use strict";r.d(t,{Z:function(){return O}});var n=r(59713),i=r.n(n),o=r(6479),a=r.n(o),s=r(48926),c=r.n(s),u=r(87757),l=r.n(u);r(66337);var p=r(51308),f=r(38533),h=r(36792),d=r(6341),v=r(12045),y=r(62424),m=["extraPageOptions"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(){return S.apply(this,arguments)}function S(){return(S=c()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.X6)().then((function(e){return 1==+e.shown_type})).catch((function(){return!1}));case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,h.Rl)();case 7:(0,v.Ku)();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,y.BY)();var r=t.extraPageOptions,n=void 0===r?{}:r,i=a()(t,m),o=(0,d.rL)(i),s={appId:"100428",bizSide:"consumer-platform-fe",testAppId:"100265"};(0,p.g)(e,b(b({title:e.appConfig.title},o),{},{pmmAppInfo:s}));var c=(0,f.zT)();n.isManualPV&&c.isNativePlatform&&w()}},51375:function(e,t,r){"use strict";r(32e3),r(48977),r(98837),r(52310),r(94899),r(1268),r(30522),r(62773),r(56997),r(19371),r(58295),r(50110),r(20075),r(31842),r(19977),r(41560),r(48377),r(88416),r(11246),r(53403),r(75115),r(48646),r(22658),r(83276),r(89375),r(94882),r(98351),r(79622),r(41520),r(16917),r(30372),r(84672),r(96253),r(99176),r(64157),r(35095),r(49892),r(27476),r(43533),r(68838),r(96409),r(40851),r(9865),r(83946),r(66108),r(98184),r(95767),r(79665),r(29539),r(96620),r(50191),r(62850),r(39115),r(41784),r(92770),r(98306),r(10823),r(17732),r(65869),r(94325),r(32564),r(84633),r(91181),r(35666);var n,i,o,a,s,c,u,l=r(97719),p=r(48926),f=r.n(p),h=r(21165),d=r.n(h),v=r(34575),y=r.n(v),m=r(93913),g=r.n(m),b=r(81506),w=r.n(b),S=r(2205),O=r.n(S),E=r(78585),k=r.n(E),P=r(29754),_=r.n(P),T=r(33124),D=r.n(T),x=(r(67268),r(87757)),C=r.n(x),N=r(67294),L=r.n(N),R=r(49408),A=r(1607),I=r(55622),j=r(66197),B=r(90926),V=r.n(B),H=r(40193),M=r(79072),U=r(39307),F=r(63389),Z=r(53613),z=r(45273),G=r(57186),q=r(11838),K=r(46177),W=r(43230),Y=r(24878),$=r(13890),Q=r(22392),X=r(32129),J=r(38276),ee=r(87319),te=r(57068),re=r(83718),ne=r(23072),ie=r(66525),oe=r(27604),ae=r(84160),se=r(18446),ce=r.n(se),ue=r(22188),le=r(96237),pe=r(93820),fe=r(82469),he=r(82192),de=r(78998),ve=r(59713),ye=r.n(ve),me=r(96521),ge=r(91942),be=r(21590),we=r(35989),Se=r(11947),Oe=r(33611),Ee=r(37874),ke=r(97775),Pe=r(41859),_e=r(54328),Te=r(75048);function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Ne,Le,Re,Ae,Ie=0,je=1,Be=(n=(0,ge.U)(Se.Z),i=ue.aD.bound,o=ue.aD.bound,a=ue.aD.bound,s=function(e){O()(n,e);var t,r=Ce(n);function n(){var e;y()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=r.call.apply(r,[this].concat(i)),d()(e,"vo",c,w()(e)),e.updateSelectStatus=Ie,d()(e,"updateStore",u,w()(e)),e}return g()(n,[{key:"onNextViewObject",value:function(e){(0,Te.w)(this.vo,e)}},{key:"isMutiChecked",get:function(){return this.vo.ifSleepSeat&&this.vo.passengersCount>1}},{key:"selectedSeatLen",get:function(){return this.vo.showElectronicList.reduce((function(e,t){return e+t.count}),0)}},{key:"alreadyMax",get:function(){return this.selectedSeatLen>=this.vo.passengersCount}},{key:"selectedInfoData",get:function(){return this.vo.showElectronicList.map((function(e){return{code:e.code,count:e.count}})).filter((function(e){return e.count>0}))}},{key:"singleClickHandler",value:function(e){var t=this;this.vo.showElectronicList=this.vo.showElectronicList.map((function(r){return xe(xe({},r),{},{count:r.code===e&&0===r.count?t.vo.passengersCount:0})}))}},{key:"mutiClickHandler",value:function(e,t){this.vo.showElectronicList=this.vo.showElectronicList.map((function(r){var n=t?1:-1;return xe(xe({},r),{},{count:e===r.code?r.count+n:r.count})}))}},{key:"selectedSeatHandler",value:(t=f()(C().mark((function e(t,r){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateSelectStatus!==je){e.next=2;break}return e.abrupt("return");case 2:return this.updateSelectStatus=je,(0,Pe.k)({stores:{isMutiChecked:this.isMutiChecked,code:t,isAdd:r},subOp:"electronic seat click"}),this.isMutiChecked?this.mutiClickHandler(t,r):this.singleClickHandler(t),(0,re.y)(),e.next=8,this.updateStore.doPageUpdate({source:q.xi.ELECTRONIC_SEAT});case 8:(0,re.v)(),this.updateSelectStatus=Ie;case 10:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),n}(_e.q),c=D()(s.prototype,"vo",[ue.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{ifSleepSeat:!1,showElectronicList:[],passengersCount:0}}}),u=D()(s.prototype,"updateStore",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D()(s.prototype,"isMutiChecked",[ue.Fl],Object.getOwnPropertyDescriptor(s.prototype,"isMutiChecked"),s.prototype),D()(s.prototype,"selectedSeatLen",[ue.Fl],Object.getOwnPropertyDescriptor(s.prototype,"selectedSeatLen"),s.prototype),D()(s.prototype,"alreadyMax",[ue.Fl],Object.getOwnPropertyDescriptor(s.prototype,"alreadyMax"),s.prototype),D()(s.prototype,"selectedInfoData",[ue.Fl],Object.getOwnPropertyDescriptor(s.prototype,"selectedInfoData"),s.prototype),D()(s.prototype,"singleClickHandler",[i],Object.getOwnPropertyDescriptor(s.prototype,"singleClickHandler"),s.prototype),D()(s.prototype,"mutiClickHandler",[o],Object.getOwnPropertyDescriptor(s.prototype,"mutiClickHandler"),s.prototype),D()(s.prototype,"selectedSeatHandler",[a],Object.getOwnPropertyDescriptor(s.prototype,"selectedSeatHandler"),s.prototype),s);function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var He,Me,Ue,Fe,Ze,ze,Ge=(Ne=(0,ge.U)(Be),Le=function(e){O()(r,e);var t=Ve(r);function r(){var e;y()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),d()(e,"vo",Re,w()(e)),d()(e,"electronicSeatStore",Ae,w()(e)),e}return g()(r,[{key:"hasElectronicSeat",get:function(){return this.electronicSeatStore.selectedSeatLen>0}},{key:"onNextViewObject",value:function(e){(0,Te.w)(this.vo,e)}}]),r}(_e.q),Re=D()(Le.prototype,"vo",[ue.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{hasSkipVerify:!1,isSkipVerifyGray:!1,serviceFeeShow:""}}}),Ae=D()(Le.prototype,"electronicSeatStore",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D()(Le.prototype,"hasElectronicSeat",[ue.Fl],Object.getOwnPropertyDescriptor(Le.prototype,"hasElectronicSeat"),Le.prototype),Le),qe=r(70435),Ke=r(57686);function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Ye,$e,Qe,Xe=(He=(0,ge.U)(Be),Me=(0,ge.U)(qe.Z),Ue=function(e){O()(r,e);var t=We(r);function r(){var e;y()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),d()(e,"vo",Fe,w()(e)),d()(e,"electronicSeatStore",Ze,w()(e)),d()(e,"r12306LoginStore",ze,w()(e)),e}return g()(r,[{key:"hasElectronicSeat",get:function(){return this.electronicSeatStore.selectedSeatLen>0}},{key:"showLoginLessBar",get:function(){var e,t;return!(!+(0,Ke.XX)("login_less")&&!+(0,Ke.XX)("_tp_login_less")||null!==(e=this.r12306LoginStore)&&void 0!==e&&null!==(t=e.vo)&&void 0!==t&&t.account)}},{key:"onNextViewObject",value:function(e){(0,Te.w)(this.vo,e)}}]),r}(_e.q),Fe=D()(Ue.prototype,"vo",[ue.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{hasSkipLogin:!1,isSkipLoginGray:!1,serviceFeeShow:"",isFree:!1}}}),Ze=D()(Ue.prototype,"electronicSeatStore",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=D()(Ue.prototype,"r12306LoginStore",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D()(Ue.prototype,"hasElectronicSeat",[ue.Fl],Object.getOwnPropertyDescriptor(Ue.prototype,"hasElectronicSeat"),Ue.prototype),D()(Ue.prototype,"showLoginLessBar",[ue.Fl],Object.getOwnPropertyDescriptor(Ue.prototype,"showLoginLessBar"),Ue.prototype),Ue),Je=r(45506),et=r(88811),tt=r(53777);function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var nt=(Ye=(0,ge.U)(Xe),$e=function(e){O()(r,e);var t=rt(r);function r(){var e;y()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),d()(e,"skipLoginStore",Qe,w()(e)),e}return g()(r,[{key:"loginlessServiceInfo",get:function(){var e,t=null===(e=this.skipLoginStore)||void 0===e?void 0:e.vo;return{isInGray:t.isSkipLoginGray,serviceFee:t.serviceFeeShow,isFree:t.isFree}}}]),r}(tt.Z),Qe=D()($e.prototype,"skipLoginStore",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e),it=r(92272),ot=r(40755),at=r(24485),st=r(19335);function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passengers_vo;if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t=null}return t=t&&t.length>0?t:null,ut(ut({},e),{},{use_last_order_input:e.use_last_order_input?1:0,passengers_vo:t})}function pt(e){var t,r,n=(e=e||{}).ticketOptionList||[],i=e.verifylessServiceInfo||{},o=i.isInVerifylessGray,a=i.serviceFee,s=(0,st.T4)(a),c=null===(t=e.loginlessServiceInfo)||void 0===t?void 0:t.serviceFee,u=c>=0?(0,st.T4)(c):"";return{ifSleepSeat:!!e.ifSleepSeat,optionList:n.map((function(e){return{code:e.code,desc:e.desc,codeType:e.supportPassengerCountType,price:e.price,priceStd:(0,st.T4)(e.price),marketPriceStd:(0,st.T4)(e.marketPrice)}})),skipVerifyInfo:{isGray:1===parseInt(o,10),serviceFeeShow:"0"===s?"":s},skipLoginInfo:{isGray:1===parseInt(null===(r=e.loginlessServiceInfo)||void 0===r?void 0:r.isInLoginlessGray,10),serviceFeeShow:u,isFree:0===c},emergentBookServiceVo:e.emergentBookServiceVo||{},nightBookServiceVo:e.nightBookServiceVo||{}}}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var ht,dt,vt,yt,mt,gt,bt,wt,St,Ot,Et,kt,Pt,_t,Tt,Dt,xt,Ct,Nt,Lt,Rt="api/mayflower/pre/reserve/get_pre_reserve_info",At="api/mayflower/train/query/dict/query_dict_config_info",It="api/mayflower/reserve/create",jt="api/mayflower/train/query/dict/query_electronic_ticket_config",Bt="api/mayflower/crh/last_login_account",Vt=function(e){O()(n,e);var t,r=ft(n);function n(){return y()(this,n),r.apply(this,arguments)}return g()(n,[{key:"getPreReserveInfo",value:(t=f()(C().mark((function e(t){var r,n,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=lt(t),r=Date.now(),e.next=4,this.post({url:Rt,params:t,risk:!0,customConfig:{skipCamelCaseResponse:!0,fallbackCSR:!0,needTimeoutRetry:!0,retry:3},defaultValue:{}});case 4:return n=e.sent,i=Date.now()-r,(0,at.e)(i,"get_pre_reserve_info"),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"initConfigData",value:function(){return this.post({url:At,risk:!0,customDataHandler:ot.S,defaultValue:{}})}},{key:"reserveCreateOrder",value:function(e){return this.asyncQuerypost({url:It,params:e,risk:!0,defaultValue:{}})}},{key:"getElectronicData",value:function(e){return this.post({url:jt,params:e,customDataHandler:pt,risk:!0,defaultValue:{}})}},{key:"getLastLoginAccount",value:function(){return this.asyncQuerypost({url:Bt,risk:!0,defaultValue:{}})}}]),n}(it.b);function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Ft,Zt=(ht=(0,ge.U)(he.n),dt=(0,ge.U)(Oe.x),vt=(0,ge.U)(Ee.Z),yt=(0,ge.U)(Be),mt=(0,ge.U)(Ge),gt=(0,ge.U)(Xe),bt=(0,ge.U)(Je.Z),wt=(0,ge.U)(et.Z),St=(0,ge.U)(nt),Ot=ue.aD.bound,Et=function(e){O()(i,e);var t,r,n=Ut(i);function i(){var e;y()(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),d()(e,"selectedPassengersStore",kt,w()(e)),d()(e,"couponSelectStore",Pt,w()(e)),d()(e,"addChooseSeatStore",_t,w()(e)),d()(e,"electronicSeatStore",Tt,w()(e)),d()(e,"skipVerifyStore",Dt,w()(e)),d()(e,"skipLoginStore",xt,w()(e)),d()(e,"purchaseServiceFeeStore",Ct,w()(e)),d()(e,"nightTicketServiceStore",Nt,w()(e)),d()(e,"loginPopupStore",Lt,w()(e)),e.getIsSkipVerify=f()(C().mark((function t(){var r,n,i;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,we.c)();case 2:return i=t.sent,t.abrupt("return",(null===(r=e.skipVerifyStore)||void 0===r||null===(n=r.vo)||void 0===n?void 0:n.isSkipVerifyGray)&&i);case 4:case"end":return t.stop()}}),t)}))),e.getIsSkipLogin=function(){var t,r=e.skipLoginStore,n=r.vo,i=r.showLoginLessBar;return(null==n?void 0:n.isSkipLoginGray)&&(i||(null===(t=e.loginPopupStore)||void 0===t?void 0:t.selectSkipLogin))},e}return g()(i,[{key:"$service",get:function(){return this.__$service=this.__$service||new Vt,this.__$service}},{key:"doPageUpdate",value:(r=f()(C().mark((function e(){var t,r,n,i,o,a,s=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},(r=this.selectedPassengersStore.isDraftModified())||t.source){e.next=4;break}return e.abrupt("return",{success:!1});case 4:return t.isSelectedPassengersModify=r,e.next=7,this.doSubmitWithoutToast(t);case 7:if(n=e.sent,i=n.success,o=n.errorMsg,(a=n.errorPayloadVo)&&(0,U.ZP)(a),!i){e.next=14;break}return e.abrupt("return",{success:!a});case 14:return(0,ke.m)(t.source,this.doPageUpdate,o),e.abrupt("return",{success:!1});case 16:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"doSubmitWithoutToast",value:(t=f()(C().mark((function e(){var t,r,n,i,o,a,s,c,u,l,p,f,h,d,v,y,m,g,b,w,S,O,E,k,P=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=P.length>0&&void 0!==P[0]?P[0]:{},p=(0,be.Yp)(be.$0.CHECKOUT),f=l.source===q.xi.ELECTRONIC_SEAT_COMPLETED&&l.passengersData?l.passengersData:(0,be.Pq)(this.selectedPassengersStore.draftOperations),h=(null===(t=f)||void 0===t?void 0:t.passengers_vo)||[],d=(null==h?void 0:h.length)>0&&(null==h?void 0:h.find((function(e){return null==e?void 0:e.verifyless}))),this.getIsSkipLogin()&&!d&&(0,we.Z)(0),e.next=8,this.getIsSkipVerify();case 8:return v=e.sent,y=(null==l||!l.loginSuccess)&&this.getIsSkipLogin(),m=!(null===(r=this.purchaseServiceFeeStore)||void 0===r||null===(n=r.vo)||void 0===n||!n.isSelected),g=!(null===(i=this.nightTicketServiceStore)||void 0===i||null===(o=i.vo)||void 0===o||!o.isSelected),b=Mt(Mt(Mt({},p),f),{},{coupon_id:(null===(a=this.couponSelectStore)||void 0===a?void 0:a.selectedCouponId)||null,is_coupon_do_not_use:(null===(s=this.couponSelectStore)||void 0===s?void 0:s.isDoNotUse)||!1,if_duoduo_reserve:0,verifyless_enabled:v,loginless_enabled:y,is_emergent_book:m,night_issue_ticket:g}),l.isSelectedPassengersModify||(b.train_seat_info_map=null===(w=this.addChooseSeatStore)||void 0===w?void 0:w.selectedInfoData,b.electronic_ticket_option_list=null!==(S=null===(O=this.electronicSeatStore)||void 0===O?void 0:O.selectedInfoData)&&void 0!==S?S:[]),e.next=16,this.$service.getPreReserveInfo(b);case 16:if(!(E=e.sent).isApiError){e.next=20;break}return k=q.I[l.source]||q.I.DEFAULT,e.abrupt("return",{success:!1,data:E,errorCode:E.errorCode,errorMsg:E.errorMsg||k});case 20:return null!==(c=this.couponSelectStore)&&void 0!==c&&null!==(u=c.vo)&&void 0!==u&&u.canShowCoupon&&E.if_coupon_failed&&E.coupon_fail_msg&&(0,ae.wp)({text:E.coupon_fail_msg,okLabel:"知道了"}),this.updateWholeStoresNew(E),(0,de.iA)(this.selectedPassengersStore.draftOperations),this.selectedPassengersStore.setDraftModified(!1),e.abrupt("return",{success:!0,errorPayloadVo:E.error_payload_vo});case 25:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),i}(Se.Z),kt=D()(Et.prototype,"selectedPassengersStore",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=D()(Et.prototype,"couponSelectStore",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=D()(Et.prototype,"addChooseSeatStore",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=D()(Et.prototype,"electronicSeatStore",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=D()(Et.prototype,"skipVerifyStore",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=D()(Et.prototype,"skipLoginStore",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=D()(Et.prototype,"purchaseServiceFeeStore",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=D()(Et.prototype,"nightTicketServiceStore",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=D()(Et.prototype,"loginPopupStore",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D()(Et.prototype,"doPageUpdate",[me.Z],Object.getOwnPropertyDescriptor(Et.prototype,"doPageUpdate"),Et.prototype),D()(Et.prototype,"doSubmitWithoutToast",[Ot],Object.getOwnPropertyDescriptor(Et.prototype,"doSubmitWithoutToast"),Et.prototype),Et);function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Gt=(0,R.f3)((0,pe.O)({selectedPassengersStore:he.n,updateStore:Zt}))(Ft=(0,R.Pi)(Ft=function(e){O()(n,e);var t,r=zt(n);function n(){return y()(this,n),r.apply(this,arguments)}return g()(n,[{key:"componentDidMount",value:(t=f()(C().mark((function e(){var t,r,n,i,o,a;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=JSON.parse(sessionStorage.getItem(fe.UD)),this.props.selectedPassengersStore.resetDraftOperations(),r=(0,ue.ZN)(this.props.selectedPassengersStore.draftOperations),n=ce()(r,t),e.next=7,this.props.updateStore.getIsSkipVerify();case 7:if(i=e.sent,o=this.props.updateStore.getIsSkipLogin(),(a=t&&!n)?this.props.selectedPassengersStore.resetDraftOperations(t):(0,de.iA)(this.props.selectedPassengersStore.draftOperations),!(a||i||o)){e.next=22;break}return(0,re.y)(),e.next=15,this.props.updateStore.doSubmitWithoutToast();case 15:if(e.t0=e.sent,e.t0){e.next=18;break}e.t0={};case 18:!e.t0.success&&a&&(this.props.selectedPassengersStore.resetDraftOperations(),(0,de.iA)(this.props.selectedPassengersStore.draftOperations)),(0,re.v)();case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(0),(0,le.e)({errorMsg:"traincheckout_restore_error",error:e.t1});case 27:case"end":return e.stop()}}),e,this,[[0,24]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return null}}]),n}(L().Component))||Ft)||Ft,qt=r(27361),Kt=r.n(qt),Wt=r(24684),Yt=r(64663),$t=r(94184),Qt=r.n($t),Xt="NOX6xiC-",Jt="YGHa6ekF",er="_5JejpWUQ",tr="lhILsheF",rr="MHfVvtQ4",nr="无指定座位时将转购其他座位（选座费退回）";function ir(){return L().createElement("div",{className:Xt},L().createElement("div",null,"选座服务"),L().createElement("div",{className:er},nr))}function or(e){var t=e.selectedSeatLen,r=e.passengersCount;return L().createElement("div",{className:Qt()(Xt,Jt)},L().createElement("div",null,L().createElement("div",null,"选座服务"),L().createElement("div",{className:Qt()(er,tr)},nr)),L().createElement("div",null,"已选",L().createElement("span",{className:rr},"".concat(t,"/").concat(r))))}function ar(e){var t=e.isMutiChecked,r=e.selectedSeatLen,n=e.passengersCount;return t?L().createElement(or,{selectedSeatLen:r,passengersCount:n}):L().createElement(ir,null)}var sr=(0,N.memo)(ar),cr=r(6341);function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pr=3373851,fr=3373852;function hr(e,t){return f()(C().mark((function r(){return C().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(0,cr.QN)(lr(lr({},e),{},{op:"click"})),null==t||t();case 2:case"end":return r.stop()}}),r)})))}var dr="WD-oZoA6",vr="rsDC0ky5",yr="rwEOyDyH",mr="_8si-8HwC",gr="QGV4Mpen",br="U82HOZgW",wr="_1wEfbymA",Sr="UlQjWbys",Or="IgWGx2eU",Er="Op2nhMYW",kr="fbwlFeP3",Pr="T6TLOBZU",_r="_2fWKB+xS",Tr="JZnStOKr",Dr="Byj6Lxfq";function xr(e){var t=e.price;return"0"===t?null:L().createElement("span",{className:Dr},"￥".concat(t,"/人"))}function Cr(e){var t=e.data,r=e.clickHandler,n=Qt()(yr,ye()({},mr,t.count>0));return L().createElement("div",{className:vr,onClick:r},L().createElement("div",null,L().createElement("span",{className:n}),L().createElement("span",{className:gr},t.desc)),L().createElement("div",{className:br},L().createElement("span",{className:Sr},"￥"),"".concat(t.priceStd,"/人"),L().createElement(xr,{price:t.marketPriceStd})))}function Nr(e){var t=e.data,r=e.alreadyMax,n=e.clickMinusHandler,i=e.clickAddHandler,o=Qt()(Er,kr,ye()({},_r,0===t.count)),a=Qt()(Er,Pr,ye()({},_r,r));return L().createElement("div",{className:vr},L().createElement("span",null,L().createElement("span",{className:gr},t.desc),L().createElement("span",{className:Qt()(br,wr)},L().createElement("span",{className:Sr},"￥"),"".concat(t.priceStd,"/人"),L().createElement(xr,{price:t.marketPriceStd}))),L().createElement("div",{className:Or},L().createElement("div",{className:o,onClick:n}),L().createElement("div",{className:Tr},t.count),L().createElement("div",{className:a,onClick:i})))}var Lr,Rr=(0,R.Pi)((function(e){var t=e.isMutiChecked,r=e.data,n=e.alreadyMax,i=e.selectedSeatHandler,o=hr({page_el_sn:pr,code:r.code},(function(){return i(r.code)})),a=hr({page_el_sn:fr,code:r.code,is_add:!1},(function(){0!==r.count&&i(r.code,!1)})),s=hr({page_el_sn:fr,code:r.code,is_add:!0},(function(){n||i(r.code,!0)}));return t?L().createElement(Nr,{data:r,alreadyMax:n,clickMinusHandler:a,clickAddHandler:s}):L().createElement(Cr,{data:r,clickHandler:o})}));function Ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Ir,jr=(0,R.f3)((0,pe.O)({electronicSeatStore:Be}))(Lr=(0,R.Pi)(Lr=function(e){O()(r,e);var t=Ar(r);function r(){return y()(this,r),t.apply(this,arguments)}return g()(r,[{key:"render",value:function(){var e=Kt()(this.props,"electronicSeatStore")||{},t=e.selectedSeatLen,r=e.alreadyMax,n=e.isMutiChecked,i=e.selectedSeatHandler,o=Kt()(this.props,"electronicSeatStore.vo")||{},a=o.passengersCount,s=o.showElectronicList,c=o.ifSleepSeat;return 0===s.length?null:L().createElement(Wt.Z,{trackingInfo:{psge_el_sn:c?fr:pr}},L().createElement("div",{className:dr},L().createElement(sr,{isMutiChecked:n,selectedSeatLen:t,passengersCount:a}),s.map((function(e){return L().createElement(Rr,{key:e.code,data:e,alreadyMax:r,isMutiChecked:n,selectedSeatHandler:i})})),t>0&&L().createElement(Yt.ZP,{contents:[Yt.Zr]})))}}]),r}(L().Component))||Lr)||Lr,Br=r(63038),Vr=r.n(Br),Hr=r(86546),Mr="FZcacFSb",Ur="VokVu-TK",Fr="L2WboUTN",Zr="POST+P1N",zr="GxYjmG0y",Gr="tVTuMi89",qr="E8nWH6Px",Kr="TH3rfiJf",Wr=(0,N.memo)((function(e){var t=e.vo,r=e.title,n=e.hasElectronicSeat,i=t||{},o=i.serviceFeeShow;return i.isFree?L().createElement("div",{className:Ur},r,L().createElement("div",{className:Kr},"限时免费")):L().createElement(L().Fragment,null,L().createElement("div",{className:Qt()(Ur,Fr)},r),o&&L().createElement("div",{className:Gr},n&&L().createElement("div",{className:qr}),L().createElement("span",{className:Zr},"￥"),o,"/张"))})),Yr=(0,N.memo)((function(e){var t=e.title,r=e.vo,n=e.hasElectronicSeat,i=e.ruleData,o=(0,N.useState)(!1),a=Vr()(o,2),s=a[0],c=a[1],u=function(){c(!s)};return L().createElement(L().Fragment,null,L().createElement("div",{className:Mr,onClick:u},L().createElement(Wr,{vo:r,title:t,hasElectronicSeat:n})),!n&&L().createElement(Yt.ZP,{contents:[Yt.Zr],className:zr}),s&&L().createElement(Hr.Z,{closePopup:u,data:i}))})),$r={page_el_sn:1346899},Qr=["2. 退改签需至车站办理，不支持线上退改签；","3. 出票成功即享受购票服务，若产生退票不退还出票费。"],Xr={VERIFY:{title:"免核验购票",ruleList:["1. 免核验服务开启后，订单内所有乘车人均享受快速免核验服务，需支付服务费；"].concat(Qr)},LOGIN:{title:"免登录购票",ruleList:["1. 免登录服务开启后，订单内所有乘车人均享受免登录服务，需支付服务费；"].concat(Qr)}};function Jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var en,tn=(0,R.f3)((0,pe.O)({skipVerifyStore:Ge}))(Ir=(0,R.Pi)(Ir=function(e){O()(r,e);var t=Jr(r);function r(){return y()(this,r),t.apply(this,arguments)}return g()(r,[{key:"componentDidMount",value:function(){var e=this.props.skipVerifyStore.vo||{},t=e.hasSkipVerify,r=e.serviceFee;(0,Pe.k)({stores:{hasSkipVerify:t,serviceFee:r},subOp:"checkout show skipVerify label"})}},{key:"render",value:function(){var e=this.props.skipVerifyStore,t=e.vo,r=e.hasElectronicSeat;return(t||{}).hasSkipVerify?L().createElement(Yr,{title:"免核验购票",vo:t,hasElectronicSeat:r,ruleData:Xr.VERIFY}):null}}]),r}(L().Component))||Ir)||Ir;function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var nn,on=(0,R.f3)((0,pe.O)({skipLoginStore:Xe}))(en=(0,R.Pi)(en=function(e){O()(r,e);var t=rn(r);function r(){return y()(this,r),t.apply(this,arguments)}return g()(r,[{key:"componentDidMount",value:function(){var e=this.props.skipLoginStore.vo||{},t=e.hasSkipLogin,r=e.serviceFee;(0,Pe.k)({stores:{hasSkipLogin:t,serviceFee:r},subOp:"checkout show skipLogin label"})}},{key:"render",value:function(){var e=this.props.skipLoginStore,t=e.vo,r=e.hasElectronicSeat;return(t||{}).hasSkipLogin?L().createElement(Yr,{title:"免登录购票服务",vo:t,hasElectronicSeat:r,ruleData:Xr.LOGIN}):null}}]),r}(L().Component))||en)||en,an=r(72781),sn="_5mgXjqhW",cn="TP+VJCQk";function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var ln,pn=(0,R.f3)((0,pe.O)({configuration:an.Z}))(nn=(0,R.Pi)(nn=function(e){O()(r,e);var t=un(r);function r(){return y()(this,r),t.apply(this,arguments)}return g()(r,[{key:"render",value:function(){var e=this.props.configuration,t=e.isShowNightTip,r=e.configData;if(!t)return null;var n=r||{},i=n.saleEndTime,o=n.saleBeginTime,a="".concat(i,"-").concat(o,"为系统维护时间，订单将于").concat(o,"后出票");return L().createElement("div",{className:sn},L().createElement("div",{className:cn},a))}}]),r}(L().Component))||nn)||nn,fn=r(65921),hn="TEeSB1GG",dn="V6AGHxYg",vn="_44Y3Rn34",yn="p0feDYW1",mn="vOhStp5a",gn="omcZ-GHu",bn="_8fkty+Vw",wn="q04iaTXy",Sn="_9rRtTwLe",On="y2Mt9Uvy";function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var kn,Pn=5376777,_n=(0,R.f3)((0,pe.O)({purchaseServiceFeeStore:Je.Z}))(ln=(0,R.Pi)(ln=function(e){O()(r,e);var t=En(r);function r(){var e;y()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onSelect=function(){var t=e.props.purchaseServiceFeeStore,r=t.vo,n=t.setShowNoticePop,i=t.setSelected;(0,Pe.k)({stores:{isSelected:!r.isSelected},subOp:"checkout purchaseFee select"}),(0,cr.Vr)(Pn),r.isSelected?n(!0):i(!0)},e}return g()(r,[{key:"componentDidMount",value:function(){var e=this.props.purchaseServiceFeeStore.vo||{},t=e.isSelected,r=e.serviceFee;(0,Pe.k)({stores:{isSelected:t,serviceFee:r},subOp:"checkout show purchaseFee label"})}},{key:"render",value:function(){var e=this.props.purchaseServiceFeeStore,t=e.vo,r=e.showNoticePop,n=t||{},i=n.isSelected,o=n.serviceFeeShow;if(!o)return null;var a=Qt()(Sn,ye()({},On,i));return L().createElement(Wt.Z,{trackingInfo:{page_el_sn:Pn}},L().createElement(L().Fragment,null,L().createElement("div",{className:hn},L().createElement("div",{className:dn},L().createElement("div",{className:vn},"购票服务费",L().createElement("span",{className:yn},"不支持线上退改")),L().createElement("div",{className:mn},"发车前30分钟内专线紧急购票")),o&&L().createElement("div",{className:gn},L().createElement("div",{className:bn},L().createElement("span",{className:wn},"￥"),o,"/人"),L().createElement("span",{onClick:this.onSelect,className:a}))),r&&L().createElement(fn.Z,null)))}}]),r}(L().Component))||ln)||ln,Tn=r(54268),Dn=r(57028),xn=r(78052),Cn="_5DS1Fq4G",Nn="j5Yd45BJ",Ln="Nmi+vdZQ",Rn="oM+crYH8",An="JFkqj+CW",In="pVNa9NTU",jn="Xvur7L7i",Bn="eWYGAuSM",Vn="kETMnv8Z",Hn="zVcI2ep2",Mn="_02sN2PG9",Un="xImO5Utn",Fn="_09iL9jO0",Zn="_77ScuDLo";function zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Gn,qn,Kn,Wn,Yn,$n,Qn,Xn,Jn,ei,ti,ri,ni,ii,oi,ai,si,ci,ui,li,pi,fi,hi,di,vi,yi,mi,gi=5397844,bi=(0,Tn.H)("/order_checkout/20208fe1-e551-43b4-b667-37a1b534213f.png.slim.png"),wi=(0,Tn.H)("/order_checkout/3e7a9948-bff3-4dda-9ac2-640f96d72588.png"),Si=(0,R.f3)((0,pe.O)({nightTicketServiceStore:et.Z}))(kn=(0,R.Pi)(kn=function(e){O()(r,e);var t=zn(r);function r(){var e;y()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).store=e.props.nightTicketServiceStore,e.onSelect=function(){var t=e.store,r=t.vo,n=t.setShowNoticePop,i=t.setSelected;(0,Pe.k)({stores:{isSelected:!r.isSelected},subOp:"checkout nightTicketService select"}),(0,cr.Vr)(gi),r.isSelected?n(!0):i(!0)},e}return g()(r,[{key:"componentDidMount",value:function(){var e=this.store.vo||{},t=e.isSelected,r=e.serviceFee;(0,Pe.k)({stores:{isSelected:t,serviceFee:r},subOp:"checkout show nightTicketService label"})}},{key:"render",value:function(){var e=this.store,t=e.vo,r=e.showNoticePop,n=t||{},i=n.isSelected,o=n.serviceFeeShow,a=n.nightTip;if(!o)return null;var s=Qt()(Mn,ye()({},Un,i));return L().createElement(L().Fragment,null,L().createElement(Wt.Z,{trackingInfo:{page_el_sn:gi}},L().createElement("div",{className:Cn},L().createElement(Dn.Z,{src:bi,className:Rn,background:!0,resizeWidth:750},"夜间立即出票，成功率更高"),L().createElement("div",{className:Nn},L().createElement("div",{className:Ln},L().createElement("div",{className:An},"夜间出票服务",L().createElement("span",{className:In},"不支持线上退改")),L().createElement("div",{className:jn},"预计15分钟内告知结果，如出票失败全额退还")),L().createElement("div",{className:Bn},L().createElement("div",{className:Vn},L().createElement("span",{className:Hn},"￥"),o,"/人"),L().createElement("span",{onClick:this.onSelect,className:s}))),L().createElement(Dn.Z,{src:wi,resizeWidth:702,className:Zn}),L().createElement("div",{className:Fn},a))),r&&L().createElement(xn.Z,null))}}]),r}(L().Component))||kn)||kn,Oi=r(66451),Ei=r(81325),ki=r(86807),Pi=r(9714),_i=r(67825),Ti=r(79052),Di=r(87896),xi=r(85068),Ci=r(51941),Ni=r(521),Li=r(33979),Ri=r(53527),Ai=r(91907),Ii=r(1519),ji=r(59438),Bi=r(80109);function Vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Ui,Fi,Zi,zi,Gi,qi,Ki,Wi,Yi,$i,Qi,Xi,Ji,eo,to,ro,no,io,oo,ao,so,co,uo,lo,po,fo,ho,vo,yo=(Gn=(0,ge.U)(_i.s),qn=(0,ge.U)(he.n),Kn=(0,ge.U)(Ti.Z),Wn=(0,ge.U)(qe.Z),Yn=(0,ge.U)(Oe.x),$n=(0,ge.U)(Ee.Z),Qn=(0,ge.U)(Di.J),Xn=(0,ge.U)(Be),Jn=(0,ge.U)(Ge),ei=(0,ge.U)(Xe),ti=(0,ge.U)(Je.Z),ri=(0,ge.U)(et.Z),ni=(0,ge.U)(Ni.K),ii=function(e){O()(r,e);var t=Mi(r);function r(){var e;y()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),d()(e,"bookingSummaryStore",oi,w()(e)),d()(e,"selectedPassengersStore",ai,w()(e)),d()(e,"telephoneInputStore",si,w()(e)),d()(e,"r12306LoginStore",ci,w()(e)),d()(e,"couponSelectStore",ui,w()(e)),d()(e,"addChooseSeatStore",li,w()(e)),d()(e,"pickListPopupStore",pi,w()(e)),d()(e,"electronicSeatStore",fi,w()(e)),d()(e,"skipVerifyStore",hi,w()(e)),d()(e,"skipLoginStore",di,w()(e)),d()(e,"purchaseServiceFeeStore",vi,w()(e)),d()(e,"nightTicketServiceStore",yi,w()(e)),d()(e,"paymentBottomBar",mi,w()(e)),e}return g()(r,[{key:"verifyAndComputeParams",value:function(){var e,t,r,n,i,o,a,s,c,u,l,p,f,h,d,v,y,m,g=this,b=(0,be.Yp)(be.$0.CHECKOUT),w=null===(e=this.r12306LoginStore)||void 0===e||null===(t=e.vo)||void 0===t?void 0:t.account,S=this.addChooseSeatStore||{},O=S.selectedInfoData,E=S.chooseSeatErrorMsg,k=null!==(r=null===(n=this.electronicSeatStore)||void 0===n?void 0:n.selectedInfoData)&&void 0!==r?r:[],P=((null===(i=this.purchaseServiceFeeStore)||void 0===i?void 0:i.vo)||{}).isSelected,_=((null===(o=this.nightTicketServiceStore)||void 0===o?void 0:o.vo)||{}).isSelected,T=(null===(a=this.selectedPassengersStore)||void 0===a?void 0:a.hasVerifyless)&&!(null!==(s=this.pickListPopupStore)&&void 0!==s&&s.skipVerifyLimited),D=this.bookingSummaryStore.trainInfoList.map((function(e,t){var r,n,i=e.trainNo,o=e.departTime,a=e.arrivalTime,s=e.startStation,c=e.endStation,u=e.segmentNo,l=e.seatType,p=e.ticketPrice,f=e.showAcceptNoSeat,h=e.useIdCardIn;return{train_no:i,search_start_station:null===(r=b.trainInfoList[t])||void 0===r?void 0:r.search_start_station,search_end_station:null===(n=b.trainInfoList[t])||void 0===n?void 0:n.search_end_station,start_station:s,end_station:c,segment_no:u,seat_type:l,ticket_price:p,depart_date:o,arrive_date:a,if_accept_no_seat:f&&g.bookingSummaryStore.acceptNoSeat?1:0,useIdCardIn:h}})),x=(0,Bi.bt)({passengers:null!==(c=null===(u=this.selectedPassengersStore)||void 0===u||null===(l=u.vo)||void 0===l?void 0:l.passengers)&&void 0!==c?c:[],seatType:0,ticketPrice:null===(p=this.paymentBottomBar.vo)||void 0===p?void 0:p.orderAmount}),C=(0,Ai.FY)(E,(0,Ii.y)({passengers:x,errorHandler:this.pickListPopupStore.showPopup,verifyless:T}),(0,ji.gG)({mobile:this.telephoneInputStore.mobile,errorHandler:this.telephoneInputStore.focusInput}))||{};if(C.err)return{success:!1,error:C};var N=null!==(f=null===(h=this.couponSelectStore)||void 0===h?void 0:h.selectedCouponId)&&void 0!==f?f:null,L=Hi(Hi({},b),{},{no_seat:0,train_info_list:D,crh_user_name:w,mobile:this.telephoneInputStore.mobile,passengers:x,coupon_id:N,train_seat_info_map:O,if_duoduo_reserve:0,verifyless_enabled:null===(d=this.skipVerifyStore)||void 0===d||null===(v=d.vo)||void 0===v?void 0:v.hasSkipVerify,loginless_enabled:null===(y=this.skipLoginStore)||void 0===y||null===(m=y.vo)||void 0===m?void 0:m.hasSkipLogin,page_id:(0,Ri.e6)(),is_emergent_book:P,night_issue_ticket:_});return k.length>0&&(L.eticket_choose_vos=k),{success:!0,params:L}}}]),r}(_e.q),oi=D()(ii.prototype,"bookingSummaryStore",[Gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai=D()(ii.prototype,"selectedPassengersStore",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),si=D()(ii.prototype,"telephoneInputStore",[Kn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ci=D()(ii.prototype,"r12306LoginStore",[Wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ui=D()(ii.prototype,"couponSelectStore",[Yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),li=D()(ii.prototype,"addChooseSeatStore",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pi=D()(ii.prototype,"pickListPopupStore",[Qn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi=D()(ii.prototype,"electronicSeatStore",[Xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hi=D()(ii.prototype,"skipVerifyStore",[Jn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),di=D()(ii.prototype,"skipLoginStore",[ei],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=D()(ii.prototype,"purchaseServiceFeeStore",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi=D()(ii.prototype,"nightTicketServiceStore",[ri],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mi=D()(ii.prototype,"paymentBottomBar",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D()(ii.prototype,"verifyAndComputeParams",[me.Z],Object.getOwnPropertyDescriptor(ii.prototype,"verifyAndComputeParams"),ii.prototype),ii),mo=r(12045);function go(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var bo=(Ui=(0,ge.U)(yo),Fi=(0,ge.U)(Di.J),Zi=(0,ge.U)(he.n),zi=(0,ge.U)(Li.Z),Gi=(0,ge.U)(Je.Z),qi=(0,ge.U)(et.Z),Ki=(0,ge.U)(nt),Wi=(0,ge.U)(Xe),Yi=(0,ge.U)(Ge),$i=(0,ge.U)(an.Z),Qi=(0,ge.U)(Se.Z),Xi=ue.aD.bound,Ji=ue.aD.bound,eo=ue.aD.bound,to=ue.aD.bound,ro=ue.aD.bound,no=function(e){O()(a,e);var t,r,n,i,o=go(a);function a(){var e;y()(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=o.call.apply(o,[this].concat(r)),d()(e,"validateFormStore",io,w()(e)),d()(e,"pickListPopupStore",oo,w()(e)),d()(e,"selectedPassengersStore",ao,w()(e)),d()(e,"completePassengerStore",so,w()(e)),d()(e,"purchaseServiceFeeStore",co,w()(e)),d()(e,"nightTicketServiceStore",uo,w()(e)),d()(e,"loginPopupStore",lo,w()(e)),d()(e,"skipLoginStore",po,w()(e)),d()(e,"skipVerifyStore",fo,w()(e)),d()(e,"configurationStore",ho,w()(e)),d()(e,"updateStore",vo,w()(e)),e.orderParams=null,e.verifyAndComputeParams=function(){var t=e.validateFormStore.verifyAndComputeParams(),r=t.success,n=t.params,i=t.error;if(!r)return(0,j.Z)(i.err),i.errorHandler&&i.errorHandler(),{success:!1};var o=e.purchaseServiceFeeStore||{},a=o.vo,s=a.serviceFeeShow,c=a.isSelected,u=o.setShowNoticePop;if(s&&!c)return u(!0),{success:!1};var l=(e.nightTicketServiceStore||{}).vo,p=l.serviceFeeShow,f=l.isSelected;return l.isNightTrain&&p&&!f?(e.nightTicketServiceStore.setShowNoticePop(!0),{success:!1}):{success:r,params:n}},e}return g()(a,[{key:"showLoginPopHandler",value:(i=f()(C().mark((function e(){var t,r,n,i,o,a,s,c,u,l,p,f,h;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.skipLoginStore,s=a.vo,c=a.showLoginLessBar,!((null==s?void 0:s.isSkipLoginGray)&&(c||(null===(t=this.loginPopupStore)||void 0===t?void 0:t.selectSkipLogin))||null!==(r=this.skipVerifyStore)&&void 0!==r&&null!==(n=r.vo)&&void 0!==n&&n.hasSkipVerify||null!==(i=this.configurationStore)&&void 0!==i&&i.pickListSkipVerify)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,this.rootService.getLastLoginAccount();case 6:if(u=e.sent,l=u.account,f=(p=l||{}).loginStatus,h=p.trainAccountName,f!==fe.uw.LOGIN){e.next=11;break}return e.abrupt("return",!1);case 11:return null===(o=this.loginPopupStore)||void 0===o||o.openLoginPop(h,this.payButtonClickHandler,this.verifyAndComputeParams),(0,re.v)(),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"completePassengerHandler",value:function(){var e=this;this.completePassengerStore.showCompletePopup((function(){var t=e.verifyAndComputeParams(),r=t.success,n=t.params;r&&e.payHandlerWrapper(n)}))}},{key:"payButtonClickHandler",value:(n=f()(C().mark((function e(t){var r,n,i,o,a,s,c,u,l=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.rootService=this.getRootService(),(0,re.y)(),e.next=4,this.showLoginPopHandler();case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.rootService.reserveCreateOrder(t);case 9:if(r=e.sent,(0,re.v)(),!(0,U.is)(r)){e.next=16;break}return(null==r?void 0:r.errorPayloadVo)&&(0,F.V)(!1),e.next=15,this.handleApiError(r,(function(){return l.payButtonClickHandler(t)}));case 15:case 25:return e.abrupt("return");case 16:if(n=r.parentTravelSn,i=r.bookType,o=r.parentOrderSn,a=r.orderSn,s=r.duoduoAdditional,i!==xi._i.NIGHT&&i!==xi._i.OFFLINE){e.next=26;break}if(o||a){e.next=21;break}return this.orderParams=null,e.abrupt("return");case 21:return c=r.supportPostPay,u=r.riskMap,this.orderParams={orderSn:o||a,isBatchPay:!!o,parentTravelSn:n,orderAmount:this.vo.orderAmount,duoduoAdditional:s,supportPostPay:c,riskMap:u},e.next=25,this.showPaymentPopup(this.orderParams);case 26:if(!n){e.next=30;break}return p=n,(0,mo.ax)({page_el_sn:1613244,travel_sn:p}),e.next=30,this.showReservePopup({parentTravelSn:n,duoduoAdditional:s});case 30:case"end":return e.stop()}var p}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"payHandlerWrapper",value:(r=f()(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPayBtnStatus(Ci.yD.PAYING),e.prev=1,e.next=4,this.payButtonClickHandler(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),(0,le.e)({errorMsg:"traincheckout_payButtonClick_error",error:e.t0});case 9:this.setPayBtnStatus(Ci.yD.DEFAULT);case 10:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(e){return r.apply(this,arguments)})},{key:"onPayBtnClick",value:(t=f()(C().mark((function e(){var t,r,n,i,o,a,s,c=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,mo.ax)({page_el_sn:802882}),t=this.verifyAndComputeParams(),r=t.success,n=t.params,r){e.next=4;break}return e.abrupt("return");case 4:if(this.payBtnStatus!==Ci.yD.PAYING){e.next=6;break}return e.abrupt("return");case 6:if(!Kt()(this.completePassengerStore,"vo.needCompletePassengers")){e.next=9;break}return this.completePassengerHandler(),e.abrupt("return");case 9:if(!this.checkNeedIncludeStudent()){e.next=12;break}return(0,ae.i0)({text:"您还未添加学生乘客，是否修改乘客？",cancelLabel:"去修改",okLabel:this.vo.bookType===xi._i.NIGHT?"继续支付":"继续预订",onOk:function(){return c.payHandlerWrapper(n)},onCancel:this.pickListPopupStore.showPopup,pureClose:!0}),e.abrupt("return");case 12:if(i=this.checkStudentTicketValid(),o=i.isNotValidDate,a=i.isNotValidSeat,s=i.confirmText,!o&&!a){e.next=16;break}return(0,ae.i0)({text:s,cancelLabel:o?"取消":"修改座席",okLabel:"购买成人票",onCancel:o?null:function(){return A.ZP.back()},onOk:this.selectedPassengersStore.transStudentToAdult,pureClose:!o}),e.abrupt("return");case 16:this.payHandlerWrapper(n);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),a}(Ni.K),io=D()(no.prototype,"validateFormStore",[Ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oo=D()(no.prototype,"pickListPopupStore",[Fi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ao=D()(no.prototype,"selectedPassengersStore",[Zi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),so=D()(no.prototype,"completePassengerStore",[zi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),co=D()(no.prototype,"purchaseServiceFeeStore",[Gi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo=D()(no.prototype,"nightTicketServiceStore",[qi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lo=D()(no.prototype,"loginPopupStore",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=D()(no.prototype,"skipLoginStore",[Wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fo=D()(no.prototype,"skipVerifyStore",[Yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ho=D()(no.prototype,"configurationStore",[$i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo=D()(no.prototype,"updateStore",[Qi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D()(no.prototype,"showLoginPopHandler",[Xi],Object.getOwnPropertyDescriptor(no.prototype,"showLoginPopHandler"),no.prototype),D()(no.prototype,"completePassengerHandler",[Ji],Object.getOwnPropertyDescriptor(no.prototype,"completePassengerHandler"),no.prototype),D()(no.prototype,"payButtonClickHandler",[eo],Object.getOwnPropertyDescriptor(no.prototype,"payButtonClickHandler"),no.prototype),D()(no.prototype,"payHandlerWrapper",[to],Object.getOwnPropertyDescriptor(no.prototype,"payHandlerWrapper"),no.prototype),D()(no.prototype,"onPayBtnClick",[ro],Object.getOwnPropertyDescriptor(no.prototype,"onPayBtnClick"),no.prototype),no),wo=r(21084),So=r(26372);var Oo=r(99510),Eo=r(28444),ko=r(24538);var Po=r(96701),_o=r(14102);var To=r(80267);function Do(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Co(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var No=1,Lo=2;function Ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Io=r(3060);var jo,Bo,Vo,Ho,Mo={bookingSummary:{clazz:_i.s,viewObjectMapper:function(e){var t=Kt()(e,"initData.train_info_list")||[],r=[];t.forEach((function(t){var n=new _i.o;Object.assign(n,{startStation:t.start_station||"出发未知",endStation:t.end_station||"终点未知",trainNo:t.train_no||"--",departDate:t.depart_date,departDateShow:t.depart_date_show||"--",departTimeShow:t.depart_time_show,departTime:t.depart_time_timestamp,arrivalDateShow:t.arrival_date_show||"--",arrivalDate:t.arrival_date,arrivalTimeShow:t.arrival_time_show,arrivalTime:t.arrival_time_timestamp,seat:t.seat||"座席信息未知",seatType:t.seat_type||0,dateTag:t.date_tag,unitAmount:t.unit_amount||"0",ticketPrice:t.ticket_price||0,duration:t.duration||"时长未知",showAcceptNoSeat:!!Kt()(e,"initData.show_if_accept_no_seat"),segmentNo:t.segment_no,useIdCardIn:null==t?void 0:t.use_id_card_in}),r.push(n)}));var n=null;return(null==t?void 0:t.length)>1&&(n=(0,wo.ZW)((0,So.ZV)(Kt()(e,"initData"),{}))),{trainInfoList:r,transitPopupData:n}}},selectedPassengers:{clazz:he.n,viewObjectMapper:function(e){var t=Kt()(e,"initData.passengers_vo"),r=new he.j;return Array.isArray(t)?(t.forEach((function(e){e&&r.passengers.push((0,So.ZV)(e))})),r):r}},configuration:{clazz:an.Z,viewObjectMapper:function(e){var t=Kt()(e,"updateExtraData.configData")||{},r=Kt()(e,"updateExtraData.electronicData.skipVerifyInfo")||{},n=Kt()(e,"initData.train_info_list[0]")||{},i=Kt()(e,"initData.electronic_ticket_option_list")||[];t.skipVerifyInfo=r;var o=Kt()(e,"updateExtraData.electronicData.emergentBookServiceVo")||{},a=(null==o?void 0:o.serviceFee)>0,s=(Kt()(e,"updateExtraData.electronicData.nightBookServiceVo.serviceFee")||0)>0,c=!!Kt()(e,"initData.night_issue_ticket"),u=!!Kt()(e,"initData.is_emergent_book"),l=Kt()(e,"initData.loginless_enabled")||!1,p=t.saleBeginTime,f=t.saleEndTime,h=!s&&!(0,_o.L)(p||Po.oP[0],f||Po.oP[1]),d=Kt()(e,"initData.train_info_list.length")>1,v=Kt()(e,"updateExtraData.grayMap.loginGray")||!1;return{transacType:Ci.iU.CHECKOUT,configData:t,detainMessage:Kt()(e,"initData.detain_msg",null),departDateTimes:[n.depart_date_timestamp],endDateTimes:[n.arrival_date_timestamp],seatTypes:[n.seat_type],pickListSkipVerify:i.length>0||c||u||l,isShowNightTip:h,isImmediateTrain:a,isTransit:d,loginGray:v}}},addChooseSeatStore:{clazz:Ee.Z,viewObjectMapper:function(e){var t=Kt()(e,"initData.train_space_info_map")||{},r=Kt()(e,"initData.train_info_list[0].seat"),n=Kt()(e,"initData.passengers_vo"),i={};Object.keys(t).forEach((function(e){var r=(t[e]||[]).slice&&(t[e]||[]).slice();Array.isArray(r)&&(i[e]=r.map((function(t,r){return{index:r,parentIndex:e,spaceEnumCode:t.space_enum_code,selected:t.if_selected,selectable:t.selectable}})))}));var o=[];return Array.isArray(n)&&n.forEach((function(e){e&&o.push((0,So.ZV)(e))})),{seat:r,seatViewMap:i,passengers:o}}},electronicSeatStore:{clazz:Be,viewObjectMapper:function(e){var t=Kt()(e,"initData.electronic_ticket_option_list")||[],r=Kt()(e,"initData.passengers_vo")||[],n=Kt()(e,"updateExtraData.electronicData")||{},i={};t.forEach((function(e){i[e.code]=e.count}));var o=!!n.ifSleepSeat,a=n.optionList||[],s=(0,Oo.d_)(r);if(0===r.length||s>0)return{ifSleepSeat:o,showElectronicList:[],passengersCount:0};var c,u,l=(c=r.reduce((function(e,t){return(+t.with_children||0)+e}),0),r.length+c),p=(u=l,(o?a.filter((function(e){return e.price>=300*u})):a.filter((function(e){return(u>1?Lo:No)===e.codeType}))).map((function(e){return Co(Co({},e),{},{count:i[e.code]||0})})));return{ifSleepSeat:o,showElectronicList:p,passengersCount:l}}},completePassengerStore:{clazz:Li.Z,viewObjectMapper:function(e){var t=Kt()(e,"initData.electronic_ticket_option_list")||[],r=Kt()(e,"initData.passengers_vo")||[],n=Kt()(e,"initData.verifyless_enabled"),i=Kt()(e,"initData.loginless_enabled"),o=!!Kt()(e,"initData.is_emergent_book"),a=!!Kt()(e,"initData.night_issue_ticket"),s=Kt()(e,"initData.train_info_list.length")>1,c=[],u=[];r.forEach((function(e){if(e){var t={id:e.id,name:e.name,cardNo:e.card_no,cardType:e.card_type,cardTypeCode:e.raw_card_type,withChildren:e.with_children,userType:e.user_type,ticketType:e.ticket_type,userTypeCode:e.user_type_code,isCompleted:!e.need_complete};t.isCompleted?c.push(t):u.push(Ao(Ao({},t),{},{cardNoArr:t.cardNo.split(/\*+/)}))}}));var l=t.length>0||n||o||a||s||i;return{completedPassengers:c,incompletePassengers:u,needCompletePassengers:u.length>0&&l}}},skipVerifyStore:{clazz:Ge,viewObjectMapper:function(e){var t=Kt()(e,"initData.verifyless_enabled"),r=Kt()(e,"updateExtraData.electronicData.skipVerifyInfo")||{};return{hasSkipVerify:t,isSkipVerifyGray:!!r.isGray,serviceFeeShow:r.serviceFeeShow||""}}},skipLoginStore:{clazz:Xe,viewObjectMapper:function(e){var t=Kt()(e,"updateExtraData.electronicData.skipLoginInfo")||{};return{hasSkipLogin:Kt()(e,"initData.loginless_enabled"),isSkipLoginGray:!!t.isGray,serviceFeeShow:t.serviceFeeShow||"",isFree:null==t?void 0:t.isFree}}},pickListPopup:{clazz:Di.J,virtual:!0},telephoneInput:{clazz:Ti.Z,viewObjectMapper:function(e){return Kt()(e,"initData.mobile")||""}},couponSelectStore:{clazz:Oe.x,viewObjectMapper:function(e){var t,r=(null==e||null===(t=e.initData)||void 0===t?void 0:t.coupons)||[],n=Kt()(e,"initData.price_list")||[];return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(r),!0).forEach((function(t){ye()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Do(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({discountPriceShow:(0,st.VB)(n,ko.g.DISCOUNT,!0)},(0,To.j)(r))}},paymentBottomBar:{clazz:bo,viewObjectMapper:function(e){var t=Kt()(e,"initData.checkout_vo"),r=Kt()(e,"initData.book_type"),n=Kt()(e,"initData.price_list")||[],i=(0,st.VB)(n,ko.g.DISCOUNT,!0),o=Kt()(e,"initData.passengers_vo")||[],a=(0,Oo.o5)(o),s=(0,Oo.d_)(o),c=o.find((function(e){return e.user_type_code===Eo.SS.STUDENT})),u=r===xi._i.NIGHT,l=(0,st.$D)(n,!u),p=[{seat_type:Kt()(e,"initData.train_info_list[0].seat_type")}],f=Kt()(e,"initData.electronic_ticket_option_list")||[];if(t){var h=new Ni.y;return Object.assign(h,{orderAmount:t.order_amount_cent,totalPrice:t.order_amount||"--",payLabel:u?"立即支付":"立即预订",discountText:i?"已减".concat(i,"元"):"",ifShowRemind:!!Kt()(e,"initData.if_show_remind"),remindInfo:Kt()(e,"initData.remind_info"),bookType:parseInt(Kt()(e,"initData.book_type"),10),hasChildTicket:a>0,hasStudentTicket:s>0,hasStudentPassenger:!!c,priceDetailList:(0,Oo.$r)(o,l)?[]:l,alterSeatTypes:p,isSelectElectronicSeat:f.length>0,currentCrhName:Kt()(e,"initData.r12306_vo.account",null)}),h}return null}},r12306Login:{clazz:qe.Z,viewObjectMapper:function(e){var t=Kt()(e,"initData.r12306_vo"),r=new qe.l;return t?(Object.assign(r,{account:t.account}),r):r}},validateForm:{clazz:yo,virtual:!0},updateStore:{clazz:Zt,virtual:!0},purchaseServiceFeeStore:{clazz:Je.Z,viewObjectMapper:function(e){var t=Kt()(e,"updateExtraData.electronicData")||{},r=Kt()(e,"initData.passengers_vo")||[],n=(null==t?void 0:t.emergentBookServiceVo)||{},i=n.serviceFee>0?(0,Io.bd)(n.serviceFee):null,o=!!Kt()(e,"initData.is_emergent_book");return{passengerCount:r.length,isSelected:o,serviceFeeShow:i}}},nightTicketServiceStore:{clazz:et.Z,viewObjectMapper:function(e){var t=Kt()(e,"updateExtraData.electronicData")||{},r=Kt()(e,"initData.passengers_vo")||[],n=(null==t?void 0:t.nightBookServiceVo)||{},i=n.serviceFee>0?(0,Io.bd)(n.serviceFee):null,o=!!Kt()(e,"initData.night_issue_ticket"),a=Kt()(e,"updateExtraData.configData")||{},s=a.saleEndTime,c=a.saleBeginTime,u="夜间（".concat(s,"-").concat(c,"）铁路系统维护，该时段订单将在").concat(c,"后出票。您可使用【夜间出票服务】立即出票。"),l=!!Kt()(e,"initData.is_night_train");return{passengerCount:r.length,isSelected:o,serviceFeeShow:i,nightTip:u,isNightTrain:l}}},loginPopupStore:{clazz:nt,virtual:!0}};function Uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Fo,Zo,zo,Go,qo,Ko,Wo,Yo=(jo=(0,Ei.G)(Mo),Bo=ue.aD.bound,jo((Ho=function(e){O()(n,e);var t,r=Uo(n);function n(){var e;y()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).bizError=null,e.updateExtraData={},e.getExtraData=function(){return e.updateExtraData},e.getElectronicParams=function(e){return{trainNo:Kt()(e,"train_no"),seatType:+Kt()(e,"seat_type"),departDate:+Kt()(e,"depart_date")}},e.initGrayMap=function(e){return{loginGray:(0,Pi.KQ)("loginTextGray",e)||!1}},e}return g()(n,[{key:"initServices",value:function(e){this.$service=new Vt(e)}},{key:"setupModel",value:(t=f()(C().mark((function e(t){var r,n,i,o,a,s,c,u,l,p,f,h;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,n=this.initGrayMap(t),i=!!r.f_depart_date,(o=(0,be.Yp)(be.$0.CHECKOUT,r)).use_last_order_input=!0,a=[this.$service.getPreReserveInfo(o||{}),this.$service.initConfigData()],i||(s=this.getElectronicParams(r),a.push(this.$service.getElectronicData(s))),e.next=9,Promise.all(a);case 9:if(c=e.sent,u=Vr()(c,3),l=u[0],p=u[1],f=u[2],h=void 0===f?{}:f,null==l||!l.isApiError){e.next=18;break}return this.isApiError=l.isApiError,e.abrupt("return");case 18:this.updateExtraData={grayMap:n,configData:p,electronicData:h},this.bizError=l.error_payload_vo,Object.defineProperty(this,"initData",{value:l});case 21:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getDatasource",value:function(){return[this.setupModel]}}]),n}(ki.w),D()(Ho.prototype,"setupModel",[Bo],Object.getOwnPropertyDescriptor(Ho.prototype,"setupModel"),Ho.prototype),Vo=Ho))||Vo),$o=r(91293),Qo=r.n($o);function Xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var Jo=(Fo=(0,H.r)(Yo,{serverTemplateName:"tcashier_train_checkout",requireLogin:!0,title:"订单填写",fallbackCSR:!0,bootstrapOptions:{pageProperty:{pageSN:25010,pageName:"tchashier_train_checkout",pv:{keys:["source","_tp_order_source"]},native:{disablepullreload:!0}},disablePullReload:!0}}),Zo=V()(Qo()),zo=(0,R.f3)("store"),Go=(0,I.gH)("1847640"),Fo(qo=Zo(qo=zo(qo=(0,R.Pi)((Ko=function(e){O()(n,e);var t,r=Xo(n);function n(){var e;y()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).state={containerStyle:Qo().container},d()(e,"onBack",Wo,w()(e)),e}return g()(n,[{key:"verifyWebviewBackHandler",value:function(){var e,t=(null===(e=this.props.store)||void 0===e?void 0:e.pickListPopup)||{},r=t.fetchLoginAndPassengers,n=t.initPopup;r&&r(),n&&n()}},{key:"loginWebviewBackHandler",value:(t=f()(C().mark((function e(t){var r,n,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(r=this.props.store)||void 0===r||null===(n=r.updateStore)||void 0===n?void 0:n.doPageUpdate,(0,re.y)(),e.t0=i,!e.t0){e.next=6;break}return e.next=6,i({source:q.xi.LOGIN_MANAGEMENT,loginSuccess:t});case 6:(0,re.v)();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"componentDidMount",value:function(){var e,t,r=this,n=this.props.store,i=n.bizError,o=n.isApiError,a=n.updateStore;if(i&&(0,U.ZP)(i),(0,M.bl)()?this.setState({containerStyle:Qo().containerFixIos10}):M.ZP.isNativePlatform||this.setState({containerStyle:Qo().containerNonApp}),o)(0,ae.wp)({text:K.p.TITLE,okLabel:K.p.BTNTXT,onOk:function(){return null==a?void 0:a.doPageUpdate({source:q.xi.UPDATE_PAGE})},pureClose:!0});else{var s=null===(e=this.props.store)||void 0===e||null===(t=e.configuration)||void 0===t?void 0:t.detainMessage;s&&(0,F.Z)({text:s,onOk:(0,Z.V)("1847639"),onCancel:this.onBack}),(0,G.JE)(),(0,z.Z)(f()(C().mark((function e(){var t,n,i,o,a,s=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:{},n=(0,z.k)(n),i=(n.props||{})[q.jZ]||0,o=+(null===(t=n.props||{})||void 0===t?void 0:t[q.QL])||0,i===q.iV.PAGE&&r.loginWebviewBackHandler(o),i!==q.iV.TOAST){e.next=10;break}return a=(n.props||{})[q.N$]||"",e.next=9,r.loginWebviewBackHandler(o);case 9:a&&(0,j.Z)(a);case 10:i===q.iV.PASSENGER&&r.verifyWebviewBackHandler();case 11:case"end":return e.stop()}}),e)}))))}}},{key:"render",value:function(){var e=this.props.store.updateExtraData.configData,t=void 0===e?{}:e;return L().createElement(te.Z,{perfLog:!0},L().createElement("div",{className:this.state.containerStyle},L().createElement(pn,null),L().createElement(W.Z,null),null!=t&&t.hideLogin?null:L().createElement(X.Z,null),L().createElement(ee._,null),L().createElement(J.Z,null),L().createElement(on,null),L().createElement(tn,null),L().createElement(ne.Z,{logData:$r}),L().createElement(_n,null),L().createElement(Si,null),L().createElement(jr,null),L().createElement($.Z,null),L().createElement(Q.Z,null),L().createElement(Y.ZP,null),L().createElement(Gt,null),L().createElement(ie.Z,null),L().createElement(Oi.Z,null),L().createElement(oe.Z,null)))}}]),n}(L().Component),Wo=D()(Ko.prototype,"onBack",[Go],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){A.ZP.back()}}}),qo=Ko))||qo)||qo)||qo)||qo);(0,l.Z)(Jo,Jo.appConfig.bootstrapOptions)},66451:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"1_complete_passenger"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(3489).then(r.bind(r,50827))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 50827}})},33979:function(e,t,r){"use strict";r.d(t,{Z:function(){return re}});var n=r(59713),i=r.n(n),o=r(48926),a=r.n(o),s=r(21165),c=r.n(s),u=r(34575),l=r.n(u),p=r(93913),f=r.n(p),h=r(81506),d=r.n(h),v=r(2205),y=r.n(v),m=r(78585),g=r.n(m),b=r(29754),w=r.n(b),S=r(33124),O=r.n(S),E=(r(67268),r(87757)),k=r.n(E),P=r(22188),_=r(66197),T=r(54328),D=r(91942),x=r(75048),C=r(33865),N=r(11838),L=r(11947),R=r(83718),A=r(92272);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var i=w()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g()(this,r)}}var j,B,V,H,M,U,F,Z,z,G,q="api/mayflower/frequent_passenger/create_passenger",K=function(e){y()(r,e);var t=I(r);function r(){return l()(this,r),t.apply(this,arguments)}return f()(r,[{key:"savePassenger",value:function(e){return this.post({url:q,params:e,risk:!0,defaultValue:{}})}}]),r}(A.b),W=r(28444);function Y(e,t){return e=e||[],t=(t||"").trim(),(e[0]||"")+t+(e[1]||"")}function $(e,t){return{passengers_vo:e.slice().concat(t.slice()).map((function(e){return{id:e.passengerId||e.id,with_children:e.withChildren,ticket_type:e.ticketType}}))}}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var i=w()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g()(this,r)}}var ee=0,te=1,re=(j=(0,D.U)(L.Z),B=P.aD.bound,V=P.aD.bound,H=P.aD.bound,M=P.aD.bound,U=P.aD.bound,F=function(e){y()(n,e);var t,r=J(n);function n(){var e;l()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=r.call.apply(r,[this].concat(i)),c()(e,"visible",Z,d()(e)),c()(e,"vo",z,d()(e)),e.createCallback=null,e.createStatus=ee,e.completeLoading=!1,c()(e,"updateStore",G,d()(e)),e.submitHandler=a()(k().mark((function t(){var r,n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.createStatus===ee){t.next=2;break}return t.abrupt("return");case 2:if(e.isAllCompleted){t.next=5;break}return!e.completeLoading&&(0,_.Z)("请补全身份信息"),t.abrupt("return");case 5:return e.createStatus=te,r=$(e.vo.completedPassengers,e.vo.incompletePassengers),(0,R.y)(),t.next=10,e.updateStore.doPageUpdate({source:N.xi.ELECTRONIC_SEAT_COMPLETED,passengersData:r});case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0={};case 13:n=t.t0,(0,R.v)(),e.closePopup(),e.createStatus=ee,n.success&&e.createCallback();case 18:case"end":return t.stop()}}),t)}))),e}return f()(n,[{key:"onNextViewObject",value:function(e){e=e||{},(0,x.w)(this.vo,e)}},{key:"$service",get:function(){return this.__$service=this.__$service||new K,this.__$service}},{key:"$userService",get:function(){return this.__$userService=this.__$userService||new C.Z,this.__$userService}},{key:"isAllCompleted",get:function(){return this.vo.incompletePassengers.every((function(e){return e.isCompleted}))}},{key:"showPopup",value:function(){this.visible=!0}},{key:"closePopup",value:function(){this.visible=!1}},{key:"showCompletePopup",value:function(e){this.createCallback=e,this.showPopup()}},{key:"updataIncompleteList",value:function(e,t,r){this.vo.incompletePassengers=this.vo.incompletePassengers.map((function(n){return e===n.id?X(X({},n),{},{passengerId:t,makeupValue:r,isCompleted:!0}):n}))}},{key:"completeHandler",value:(t=a()(k().mark((function e(t){var r,n,i,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(document.getElementById("cpmplete-passenger-".concat(t.id))||{}).value||"",n=Y(t.cardNoArr,r),a=n,s=t.cardTypeCode,c=void 0,!(c=(W.W2[s]||{}).checkIdFunc)||c(a)){e.next=4;break}return e.abrupt("return",{errorMsg:"证件输入有误，请重新输入"});case 4:return this.completeLoading=!0,e.next=7,this.$userService.saveUser({idCardName:t.name,idCardNo:n,type:t.cardTypeCode});case 7:if(!(i=e.sent).isApiError&&i.cardSnapshotId){e.next=10;break}return e.abrupt("return",i);case 10:return e.next=12,this.$service.savePassenger({passengerCardType:t.cardTypeCode,cardSnapshotId:i.cardSnapshotId,passengerUserType:t.userTypeCode});case 12:if(!(o=e.sent).isApiError&&o.id){e.next=15;break}return e.abrupt("return",o);case 15:return this.updataIncompleteList(t.id,o.id,r),this.submitHandler(),this.completeLoading=!this.isAllCompleted,e.abrupt("return",{});case 19:case"end":return e.stop()}var a,s,c}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(T.q),Z=O()(F.prototype,"visible",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=O()(F.prototype,"vo",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{completedPassengers:[],incompletePassengers:[],needCompletePassengers:!1}}}),G=O()(F.prototype,"updateStore",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O()(F.prototype,"isAllCompleted",[P.Fl],Object.getOwnPropertyDescriptor(F.prototype,"isAllCompleted"),F.prototype),O()(F.prototype,"showPopup",[B],Object.getOwnPropertyDescriptor(F.prototype,"showPopup"),F.prototype),O()(F.prototype,"closePopup",[V],Object.getOwnPropertyDescriptor(F.prototype,"closePopup"),F.prototype),O()(F.prototype,"showCompletePopup",[H],Object.getOwnPropertyDescriptor(F.prototype,"showCompletePopup"),F.prototype),O()(F.prototype,"updataIncompleteList",[M],Object.getOwnPropertyDescriptor(F.prototype,"updataIncompleteList"),F.prototype),O()(F.prototype,"completeHandler",[U],Object.getOwnPropertyDescriptor(F.prototype,"completeHandler"),F.prototype),F)},78052:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1nightNoticePop"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(1043).then(r.bind(r,46125))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 46125}},{ssr:!1,style:{}})},88811:function(e,t,r){"use strict";r.d(t,{Z:function(){return z}});var n,i,o,a,s,c,u,l,p,f=r(48926),h=r.n(f),d=r(21165),v=r.n(d),y=r(34575),m=r.n(y),g=r(93913),b=r.n(g),w=r(81506),S=r.n(w),O=r(2205),E=r.n(O),k=r(78585),P=r.n(k),_=r(29754),T=r.n(_),D=r(33124),x=r.n(D),C=(r(67268),r(87757)),N=r.n(C),L=r(22188),R=r(41859),A=r(91942),I=r(54328),j=r(72781),B=r(75048),V=r(11838),H=r(11947),M=r(83718);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var i=T()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P()(this,r)}}var F=0,Z=1,z=(n=(0,A.U)(H.Z),i=(0,A.U)(j.Z),o=L.aD.bound,a=L.aD.bound,s=function(e){E()(n,e);var t,r=U(n);function n(){var e;m()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=r.call.apply(r,[this].concat(i)),v()(e,"vo",c,S()(e)),v()(e,"showNoticePop",u,S()(e)),e.updateSelectStatus=F,v()(e,"updateStore",l,S()(e)),v()(e,"configurationStore",p,S()(e)),e}return b()(n,[{key:"setShowNoticePop",value:function(e){this.showNoticePop=e}},{key:"setSelected",value:(t=h()(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateSelectStatus!==Z){e.next=2;break}return e.abrupt("return");case 2:if(this.updateSelectStatus=Z,(0,R.k)({stores:{serviceFeeShow:this.vo.serviceFeeShow,isSelect:t},subOp:"purchase service fee click"}),this.vo.isSelected=t,!(this.vo.passengerCount>0)){e.next=10;break}return(0,M.y)(),e.next=9,this.updateStore.doPageUpdate({source:V.xi.PURCHASE_SERVICE_FEE_CHANGE});case 9:(0,M.v)();case 10:this.updateSelectStatus=F;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onNextViewObject",value:function(e){e=e||{},(0,B.w)(this.vo,e)}}]),n}(I.q),c=x()(s.prototype,"vo",[L.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{passengerCount:0,isSelected:!0,serviceFeeShow:null,nightTip:null}}}),u=x()(s.prototype,"showNoticePop",[L.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=x()(s.prototype,"updateStore",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=x()(s.prototype,"configurationStore",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x()(s.prototype,"setShowNoticePop",[o],Object.getOwnPropertyDescriptor(s.prototype,"setShowNoticePop"),s.prototype),x()(s.prototype,"setSelected",[a],Object.getOwnPropertyDescriptor(s.prototype,"setSelected"),s.prototype),s)},65921:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1purchaseNoticePop"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(6782).then(r.bind(r,24403))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 24403}},{ssr:!1,style:{}})},45506:function(e,t,r){"use strict";r.d(t,{Z:function(){return U}});var n,i,o,a,s,c,u,l=r(48926),p=r.n(l),f=r(21165),h=r.n(f),d=r(34575),v=r.n(d),y=r(93913),m=r.n(y),g=r(81506),b=r.n(g),w=r(2205),S=r.n(w),O=r(78585),E=r.n(O),k=r(29754),P=r.n(k),_=r(33124),T=r.n(_),D=(r(67268),r(87757)),x=r.n(D),C=r(22188),N=r(41859),L=r(91942),R=r(54328),A=r(75048),I=r(11838),j=r(11947),B=r(83718);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var i=P()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var H=0,M=1,U=(n=(0,L.U)(j.Z),i=C.aD.bound,o=C.aD.bound,a=function(e){S()(n,e);var t,r=V(n);function n(){var e;v()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=r.call.apply(r,[this].concat(i)),h()(e,"vo",s,b()(e)),h()(e,"showNoticePop",c,b()(e)),e.updateSelectStatus=H,h()(e,"updateStore",u,b()(e)),e}return m()(n,[{key:"setShowNoticePop",value:function(e){this.showNoticePop=e}},{key:"setSelected",value:(t=p()(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateSelectStatus!==M){e.next=2;break}return e.abrupt("return");case 2:if(this.updateSelectStatus=M,(0,N.k)({stores:{serviceFeeShow:this.vo.serviceFeeShow,isSelect:t},subOp:"purchase service fee click"}),this.vo.isSelected=t,!(this.vo.passengerCount>0)){e.next=10;break}return(0,B.y)(),e.next=9,this.updateStore.doPageUpdate({source:I.xi.PURCHASE_SERVICE_FEE_CHANGE});case 9:(0,B.v)();case 10:this.updateSelectStatus=H;case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onNextViewObject",value:function(e){e=e||{},(0,A.w)(this.vo,e)}}]),n}(R.q),s=T()(a.prototype,"vo",[C.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{passengerCount:0,isSelected:!0,serviceFeeShow:null}}}),c=T()(a.prototype,"showNoticePop",[C.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=T()(a.prototype,"updateStore",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T()(a.prototype,"setShowNoticePop",[i],Object.getOwnPropertyDescriptor(a.prototype,"setShowNoticePop"),a.prototype),T()(a.prototype,"setSelected",[o],Object.getOwnPropertyDescriptor(a.prototype,"setSelected"),a.prototype),a)},86546:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"skip_verify_rule_popup"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(6073).then(r.bind(r,18855))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 18855}})},77841:function(e,t,r){"use strict";r.d(t,{cx:function(){return s},vD:function(){return c},J6:function(){return u},GY:function(){return l}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=function(){function e(){i()(this,e),this.text=null,this.ts=null}return a()(e,null,[{key:"fromVal",value:function(t){var r=t.ts,n=t.text;return Object.assign(new e,{ts:r,text:n})}}]),e}(),c=function(){function e(){i()(this,e),this.id=null,this.text=null,this.price=0}return a()(e,null,[{key:"fromVal",value:function(t){var r=t.id,n=t.text,i=t.price;return Object.assign(new e,{id:r,text:n,price:i})}}]),e}(),u=function(){function e(){i()(this,e),this.id=null,this.text=null}return a()(e,null,[{key:"fromVal",value:function(t){var r=t.id,n=t.text;return Object.assign(new e,{id:r,text:n})}}]),e}(),l=function(){function e(){i()(this,e),this.idx=null,this.trainNo=null,this.text=null,this.departTime=null,this.arrivalTime=null,this.endStation=null,this.startStation=null,this.trainTime=null,this.priceList=[]}return a()(e,null,[{key:"fromVal",value:function(t){var r=t.idx,n=t.trainNo,i=t.departTime,o=t.arrivalTime,a=t.endStation,s=t.startStation,c=t.trainTime,u=t.priceList;return Object.assign(new e,{text:n,trainNo:n,departTime:i,arrivalTime:o,endStation:a,startStation:s,trainTime:c,idx:r,priceList:u||[]})}}]),e}()},24485:function(e,t,r){"use strict";r.d(t,{e:function(){return i}});var n=r(57576);function i(e,t){(0,n.a)({stores:{checkoutRequestTime:e,timeoutRetryCount:Math.ceil(e/5e3)},subOp:"".concat(t,e>5e3?"_timeout":"_request_time")})}},37185:function(e,t,r){"use strict";var n;r.d(t,{p:function(){return n},h:function(){return i}}),function(e){e.TOAST="toast",e.NOTHING="nothing",e.ALERT="alert",e.CONFIRM="confirm",e.FACE="faceverify",e.BUTTONPOP="up_down_button"}(n||(n={}));var i={9200016:{isAllowSkipLogin:!0,needInfoErrMsg:!1},9300042:{isNeedCompletePassenger:!0,needInfoErrMsg:!1},6000062:{isVerifyRefresh:!0,needInfoErrMsg:!0},9200017:{isForwardReserveFail:!0,needInfoErrMsg:!1}}},86010:function(e,t,r){"use strict";r.d(t,{U:function(){return w},d:function(){return O}});var n=r(48926),i=r.n(n),o=r(50308),a=r.n(o),s=r(27361),c=r.n(s),u=r(87757),l=r.n(u),p=r(1607),f=r(25370),h=r(53527),d=r(66197),v=r(57576),y=r(35077),m=r(83718),g=r(84160),b=r(78667),w={NOTHING:0,FORWARD:1,BACK:2,GO_HOME:3,RELOAD:4,REFRESH:7,EMBED:8,CLEAR:9,REMIND:10,ORDER_CANCEL:100,SKIP_LOGIN:101,SKIP_VERIFY:102};function S(e){var t=c()(e,"type",0),r=c()(e,"param.url")||"";switch(t){case w.FORWARD:return!r&&(0,v.a)({subOp:"action_no_nav_url",stores:{actionObject:e}}),function(){return p.ZP.uniformForward(r)};case w.BACK:return function(){return p.ZP.back(r)};case w.GO_HOME:return(0,v.a)({subOp:"action navigation.home"}),function(){return p.ZP.uniformForward("index.html")};case w.RELOAD:return function(){return p.ZP.reload(r)};case w.REFRESH:return function(){return location.reload()};case w.ORDER_CANCEL:return i()(l().mark((function t(){var r,n,i,o,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c()(e,"param.order_sn"),n=c()(e,"param.prepay_type"),i=h.ZP.getInstance().getPageID(),o=(0,f.e)({pageInfo:{pageId:i}}),(0,m.y)(),a={method:"POST"},n===y.Z.Combine?Object.assign(a,{url:"api/vancouver/parent_order_cancel",data:{parent_order_sn:r,cancel_type:1}}):Object.assign(a,{url:"order/".concat(r,"/cancel?cancel_type=1")}),t.prev=7,t.next=10,o(a);case 10:(0,d.Z)("订单取消成功"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),(0,d.Z)("订单取消异常");case 16:(0,m.v)();case 17:case"end":return t.stop()}}),t,null,[[7,13]])})));case w.EMBED:return function(){return function(e){return E.apply(this,arguments)}(e)};default:return a()}}function O(e){var t=e||{},r=t.on_show,n=t.on_ok,i=t.on_cancel,o=t.customize_ok;return{onShow:S(r),onCancel:S(i),onOk:o||S(n)}}function E(){return(E=i()(l().mark((function e(t){var r,n,i,o,a,s,c,u,p,f,h,d,v;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null==t?void 0:t.embed_payload)||{},n=r.view_object,i=(0,b.qm)(n||{}),o=i.title,a=i.message,s=i.cancel_label,c=i.ok_label,u=i.pure_close,p=O(n)||{},f=p.onOk,h=p.onCancel,d=(0,b.YY)(),v={method:"POST",url:"api/mayflower/pre/reserve/cancel_order_secondary_confirm"},e.prev=5,e.next=8,d(v);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:(0,g.i0)({title:o,text:a,onOk:f,onCancel:h,cancelLabel:s,okLabel:c,pureClose:u});case 13:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}},39307:function(e,t,r){"use strict";r.d(t,{ZP:function(){return d},kr:function(){return y},is:function(){return v}});var n=r(66197),i=r(96237),o=r(84160),a=r(3025),s=r(56893),c=r(27361),u=r.n(c),l=r(57576),p=r(26372),f=r(86010),h=r(37185);function d(e){var t=e.viewStyle;return t===h.p.FACE||t===h.p.BUTTONPOP?(0,a.pb)(e):function(e){if(e){var t=(0,p.$_)(e);(0,l.a)({subOp:"errorPayload handleError",errorMsg:e.view_style});var r=u()(t,"view_style",h.p.TOAST),n=u()(t,"view_object.title")||"",i=u()(t,"view_object.message")||"",a=(0,f.d)(u()(t,"view_object"))||{},s=a.onOk,c=a.onCancel,d=a.onShow,v=u()(t,"view_object.ok_label")||"确定",y=u()(t,"view_object.cancel_label")||"取消",m=u()(t,"view_object.pure_close");switch(r){case h.p.NOTHING:break;case h.p.ALERT:(0,o.wp)({title:n,text:i,onOk:s,okLabel:v,pureClose:m});break;case h.p.CONFIRM:(0,o.i0)({title:n,text:i,onOk:s,onCancel:c,cancelLabel:y,okLabel:v,pureClose:m});break;default:(0,o.wp)({text:n||i||"系统繁忙，请稍后再试"})}return d&&d(),!0}return!1}(e)}function v(e){return(null==e?void 0:e.isApiError)||(null==e?void 0:e.errorPayloadVo)}function y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"网络不稳定，请稍后再试";if(null!=e&&e.isApiError){var a=(0,s.U)({data:e,crhUserName:t}),c=a.errorPayloadVo;if(c)return d(c);var u=h.h[null==e?void 0:e.errorCode],l=(null==e?void 0:e.errorMsg)||r;return(null==u?void 0:u.needInfoErrMsg)&&(0,n.Z)(l),(0,o.wp)({text:l,okLabel:"知道了",pureClose:!0}),!u&&(0,i.e)({errorMsg:"api response no errorPayload",stores:{errMsg:l}}),u||{}}return d(null==e?void 0:e.errorPayloadVo)}},78667:function(e,t,r){"use strict";r.d(t,{qm:function(){return P},YY:function(){return _},dA:function(){return D}});var n=r(48926),i=r.n(n),o=r(50308),a=r.n(o),s=r(87757),c=r.n(s),u=r(1607),l=r(25370),p=r(53527),f=r(66197),h=r(57576),d=r(35077),v=r(83718),y=r(84160),m=1,g=2,b=3,w=4,S=7,O=8,E=100,k={okLabel:"确定",cancelLabel:"取消",title:"",message:""};function P(e){return Object.keys(k).forEach((function(t){e[t]=e[t]||k[t]})),e}function _(){var e=(0,p.e6)();return(0,l.e)({pageInfo:{pageId:e}})}function T(e){var t,r=(null==e?void 0:e.type)||0,n=(null==e||null===(t=e.param)||void 0===t?void 0:t.url)||"";switch(r){case m:return!n&&(0,h.a)({subOp:"action_no_nav_url",stores:{actionObject:e}}),function(){return u.ZP.uniformForward(n)};case g:return function(){return u.ZP.back(n)};case b:return(0,h.a)({subOp:"action navigation.home"}),function(){return u.ZP.uniformForward("index.html")};case w:return function(){return u.ZP.reload(n)};case S:return function(){return location.reload()};case E:return function(e){return i()(c().mark((function t(){var r,n,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(null==e?void 0:e.param)||{},n=r.orderSn,i=r.prepayType,o=_(),(0,v.y)(),a={method:"POST"},i===d.Z.Combine?Object.assign(a,{url:"api/vancouver/parent_order_cancel",data:{parent_order_sn:n,cancel_type:1}}):Object.assign(a,{url:"order/".concat(n,"/cancel?cancel_type=1")}),t.prev=5,t.next=8,o(a);case 8:(0,f.Z)("订单取消成功"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),(0,f.Z)("订单取消异常");case 14:(0,v.v)();case 15:case"end":return t.stop()}}),t,null,[[5,11]])})))}(e);case O:return function(){return function(e){return x.apply(this,arguments)}(e)};default:return a()}}function D(e){var t=e||{},r=t.onShow,n=t.onOk,i=t.onCancel,o=t.customizeOk;return{onShow:T(r),onCancel:T(i),onOk:o||T(n)}}function x(){return(x=i()(c().mark((function e(t){var r,n,i,o,a,s,u,l,p,f,h,d,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null==t?void 0:t.embed_payload)||{},n=r.view_object,i=P(n||{}),o=i.title,a=i.message,s=i.cancel_label,u=i.ok_label,l=i.pure_close,p=D(n)||{},f=p.onOk,h=p.onCancel,d=_(),v={method:"POST",url:"api/mayflower/pre/reserve/cancel_order_secondary_confirm"},e.prev=5,e.next=8,d(v);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:(0,y.i0)({title:o,text:a,onOk:f,onCancel:h,cancelLabel:s,okLabel:u,pureClose:l});case 13:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}},56893:function(e,t,r){"use strict";r.d(t,{U:function(){return l},G:function(){return f}});var n=r(48926),i=r.n(n),o=r(87757),a=r.n(o),s=r(66197),c=r(82469),u=r(37185);function l(e){var t=e.data,r=e.crhUserName,n=t||{},i=n.errorCode,o=n.errorMsg,a=c.ms[i+""];return a&&(t.errorPayloadVo={viewStyle:u.p.FACE,viewObject:{title:"身份核验",message:o||"为保障您的信息安全，本次登录需人脸核验，请确保是本人账号",okLabel:"立即刷脸核验",onOk:{type:9200314,param:{crhUserName:r||t.crhName||"",faceScene:a}}}}),t}function p(e){return new Promise((function(t){null!=e&&e.errorMsg?(0,s.Z)(null==e?void 0:e.errorMsg,{onClose:t}):null==t||t()}))}function f(e,t){return h.apply(this,arguments)}function h(){return(h=i()(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||!t.isFaceError){e.next=4;break}return e.next=3,p(t);case 3:r&&location.reload();case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3025:function(e,t,r){"use strict";r.d(t,{XO:function(){return F},pb:function(){return M}});var n=r(59713),i=r.n(n),o=r(48926),a=r.n(o),s=r(87757),c=r.n(s),u=r(57576),l=r(84160),p=r(95301),f=r(6479),h=r.n(f),d=r(67294),v=r.n(d),y=r(94184),m=r.n(y),g=r(4026),b=r(33162),w=r(1010),S=r(92272),O=null;function E(){return O||(O=new S.b),O}var k=r(86010),P="ybV27eW7",_="JHky+0lz",T="bUPJigZR",D="zHYlhIKd",x="bOYZN1M2",C="kXB3Ju+y",N="bp8I5V+I",L="muy3ggTl",R=["apiUrl"];function A(e){var t=e.data,r=e.btnPopProps,n=e.closePopup,o=(r||{}).onSuccess,a=t||{},s=a.title,c=a.message,u=a.okLabel,l=a.cancelLabel,p=(null==u?void 0:u.split("\n"))||[],f=(null==p?void 0:p.length)>1;return v().createElement(b.Z,{visible:!0,onBackdropClick:n},v().createElement(w.Z,{onClick:n}),v().createElement("div",{className:P},v().createElement("div",{className:_},s),v().createElement("div",{className:T},c),v().createElement("div",{className:m()(D,N,i()({},x,f)),onClick:function(){null==o||o(),n()}},p.map((function(e,t){return v().createElement("div",{key:"btn-text-".concat(t),className:C},e)}))),l&&v().createElement("div",{className:L,onClick:function(){var e=(t||{}).onCancel||{},r=e.type,i=e.param||{},o=i.apiUrl,a=h()(i,R);if(r===k.U.REMIND){var s=E();null==s||s.post({url:o,params:a,risk:!0,defaultValue:{}})}n()}},l)))}function I(e){var t=e.viewObject,r=((null==t?void 0:t.onOk)||{}).type;return new Promise((function(e,n){var i={onSuccess:function(){return e({isOnOk:1,type:r})},onError:function(){return n({isOnCancel:1})}};!function(e){var t=e.btnPopProps,r=e.data,n=(0,g.Z)(v().createElement(A,{data:r,btnPopProps:t,closePopup:function(){return n()}}))}({data:t,btnPopProps:i})}))}var j=r(78667),B=r(37185);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){return U.apply(this,arguments)}function U(){return(U=a()(c().mark((function e(t){var r,n,i,o,a,s,f,h,d,v,y,m,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{success:!1});case 2:if((0,u.a)({errorMsg:"errorPayload handleErrorAsync",subOp:t.viewStyle}),n=(r=t||{}).viewStyle,i=r.viewObject,n!==B.p.FACE){e.next=6;break}return e.abrupt("return",(0,p.Z)(i));case 6:if(n!==B.p.BUTTONPOP){e.next=8;break}return e.abrupt("return",I(t));case 8:o=(0,j.qm)(i||{}),a=o.title,s=o.message,f=o.cancelLabel,h=o.okLabel,d=o.pureClose,v=(0,j.dA)(i)||{},y=v.onOk,m=v.onCancel,g=v.onShow,e.t0=n,e.next=e.t0===B.p.NOTHING?13:e.t0===B.p.ALERT?14:e.t0===B.p.CONFIRM?16:18;break;case 13:return e.abrupt("break",19);case 14:return(0,l.wp)({title:a,text:s,onOk:y,okLabel:h,pureClose:d}),e.abrupt("break",19);case 16:return(0,l.i0)({title:a,text:s,onOk:y,onCancel:m,cancelLabel:f,okLabel:h,pureClose:d}),e.abrupt("break",19);case 18:(0,l.wp)({text:a||s||"系统繁忙，请稍后再试"});case 19:return g&&g(),e.abrupt("return",{success:!0,viewStyle:n});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=(e||{}).viewObject;return H(H({},(0,j.qm)(t||{})),(0,j.dA)(t))}},18873:function(e,t,r){"use strict";r.d(t,{F:function(){return l}});var n,i,o=r(59713),a=r.n(o),s=r(82469),c=(n={},a()(n,s.uw.LOGOUT,"历史账号"),a()(n,s.uw.LOGIN,"当前登录"),n),u=(i={},a()(i,s.uw.LOGOUT,"登录"),a()(i,s.uw.LOGIN,"退出"),i);function l(e,t){var r=(e||{}).accounts,n=!1,i=(r||[]).map((function(e){var t=e.loginStatus===s.uw.LOGIN;n||(n=t);var r={};return r.loginStatusTxt=c[e.loginStatus]||"",r.trainAccountId=e.trainAccountId||"",r.trainAccountName=e.trainAccountName||"",r.isLogged=t,r.handleDesc=u[e.loginStatus]||"",r}));return t&&(i=i.filter((function(e){return e.isLogged}))),{accountList:i,hasLoggedAccount:n}}},40755:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});var n=r(96701),i=r(60308),o=[{id:3,name:"硬座"},{id:7,name:"硬卧"},{id:2,name:"二等座"},{id:0,name:"无座"}];function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=["startDepartDate","endDepartDate","endBookDate","passengerIdTypeList","noAccountServiceInfo"],a={};r.forEach((function(e){a[e]=t[e]})),a.saleBeginTime=t.saleBeginTime||n.oP[0],a.saleEndTime=t.saleEndTime||n.oP[1],a.dateInfo=(0,i._)(t);var s=t.seatTypeList||o;return a.stuSeatTypeList=s.map((function(e){return e.id})),a.stuSeatsName=s.map((function(e){return e.name})).join("、")||"",a.hideLogin=null===(e=t.accountDisableGray)||void 0===e?void 0:e.withAccountDisable,a.couponCashbackTxt=t.couponCashbackText||"",a.isSpring=1===t.springSwitch,a}},80267:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var n=r(26372);function i(e){var t=[],r=[],i=null;return(e=e||[]).forEach((function(e){var o=(0,n.ZV)(e,{});if(o.valid)return t.push(o),void(!i&&o.selected&&(i=o));r.push(o)})),{canShowCoupon:e.length>0,validList:t,unvalidList:r,selectedCoupon:i}}},19335:function(e,t,r){"use strict";r.d(t,{T4:function(){return c},$D:function(){return u},VB:function(){return l}});var n=r(3060),i=r(9709),o=r(24538),a=r(26372);function s(e,t){var r=e.priceType,n=e.ticketType,a=e.segmentNo;if(r===o.g.TICKET){var s=n===i.lL.CHILD;return a?"第".concat(a,"程").concat(s?"儿童":"","票价").concat(s?"(预估)":""):o._[r][n]+(t&&(s||n===i.lL.STUDENT)?"(预估)":"")}return o._[r]||""}function c(e){return(0,n.bd)(e||0)}function u(e,t){return(0,a.ZV)(e||[],[]).map((function(e){return{name:s(e,t),priceStd:c(e.price),ticketType:e.ticketType,count:e.count,priceType:e.priceType}}))}function l(e,t,r){var n=e.find((function(e){return e.price_type===t}));return n?r?c(n.price):n.price||0:r?"":0}},60308:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var n=r(80837),i=function(e){return n.$.chineseMD(e)};function o(e){var t=e||{},r=t.startStudentSummerDepartDate,n=t.endStudentSummerDepartDate,o=t.startStudentWinterDepartDate,a=t.endStudentWinterDepartDate,s=t.ignoreStudentTicketTime,c=r&&n&&o&&a;return{stuDurationShow:c?"暑假(".concat(i(r),"—").concat(i(n),")，寒假(").concat(i(o),"—次年").concat(i(a),")"):"",stuIsValid:c&&!s,stuDateInfo:{summerStart:r,summerEnd:n,winterStart:o,winterEnd:a}}}},21084:function(e,t,r){"use strict";r.d(t,{ZW:function(){return u}});var n=r(3060),i=r(80837),o=r(8750);function a(e,t){if(!e||!t)return 0;var r=864e5,i=new Date(new Date((0,n.mr)(e,"YYYY/MM/DD")).getTime()+r-1).getTime();if(t>i){var o=Math.floor((t-i)/r)+1;return isNaN(o)&&(o=0),o}return 0}function s(e,t,r){var n=t?i.$.diffNowTag(t):"";return{durationTip:e||"全程--时--分",departureTip:n?"".concat(r," ").concat(n,"出发"):"".concat(r," 出发")}}function c(e){var t=e||{},r=t.layover,n=t.changeStation,i=t.inStationConnect;return{remindTime:r||"",transferPreStr:i?"同站换乘":"异站换乘",transferAfterStr:i||!n?"内完成换乘":"内前往".concat(n,"站")}}function u(e){var t=e||{},r=t.duration,n=t.trainInfoList,i=((void 0===n?[]:n)||[]).map((function(e){var t=e||{},r=t.startStation,n=t.endStation,i=t.trainNo,o=t.departTimeTimestamp,s=t.arrivalTimeTimestamp,c=t.duration,u=t.segmentNo,l=t.departTimeShow,p=t.arrivalTimeShow;return{startStation:r||"",endStation:n||"",etd:o,depDate:t.departDateShow||"--月--日",depTime:l||"",endTime:p||"",duration:c||"",trainNo:i||"",periodDay:a(o,s),segmentNo:u,tagTxt:u?"第".concat(u,"程"):""}})),u=(null==i?void 0:i.find((function(e){return(null==e?void 0:e.segmentNo)===o.K.FIRST})))||{},l=u.etd,p=u.depDate;return{trainSegmentList:i,headerDepartureInfo:s(r,l,void 0===p?"--月--日":p),middleTransferInfo:c(e)}}},26372:function(e,t,r){"use strict";r.d(t,{$9:function(){return l},$_:function(){return p},xZ:function(){return f},ZV:function(){return h}});var n=r(50008),i=r.n(n),o=r(11865),a=r.n(o),s=r(68929),c=r.n(s);function u(e){return(e||"").startsWith("_")?"_"+a()(e):a()(e)}function l(e,t){if(!e)return e;for(var r in t=t||{},e)e.hasOwnProperty(r)&&("object"===i()(e[r])&&null!==e[r]?t[u(r)]=l(e[r],Array.isArray(e[r])?[]:{}):t[u(r)]=e[r]);return t}function p(e,t){if(!e)return e;for(var r in t=t||{},e)e.hasOwnProperty(r)&&("object"===i()(e[r])&&null!==e[r]?t[a()(r)]=p(e[r],Array.isArray(e[r])?[]:{}):t[a()(r)]=e[r]);return t}function f(e){if(!e)return e;var t={};return Object.keys(e).forEach((function(r){if(e.hasOwnProperty(r)){var n=a()(r);t[n]=e[r]}})),t}function h(e,t){for(var r in t=t||{},e)e.hasOwnProperty(r)&&("object"===i()(e[r])&&null!==e[r]?t[c()(r)]=h(e[r],Array.isArray(e[r])?[]:{}):t[c()(r)]=e[r]);return t}},29404:function(e,t,r){"use strict";r.d(t,{_B:function(){return b},v_:function(){return O},pr:function(){return E},sl:function(){return k},P5:function(){return P},dT:function(){return T},RG:function(){return D},Um:function(){return x},$b:function(){return C},Hr:function(){return N},B7:function(){return L}});var n=r(59713),i=r.n(n),o=r(1607),a=r(41859),s=r(96237),c=r(36792),u=r(53613),l=r(57686),p=r(79072);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d="tcashier_train_checkout.html?_t_timestamp=",v="order.html",y="transac_combine_order.html",m="transac_orders_search_results.html?keyWord=火车票",g="orders.html",b={TRAIN_HOMEPAGE:"train.html",TRAIN_COMPOSE:"train.html?is_compose_page=1",FLIGHT_COMPOSE:"tandy_recliner.html?is_compose_page=1",TRAIN_TICKETS:"trip_tickets.html?scene_group=12",TRAIN_LIST:"train_list.html",TRAIN_RULE:"train_booking_rules.html",TCASHIER:"tcashier_train_checkout.html",INVITE_USER:"invite_user.html",TCASHIER_CHANGE:"".concat(d,"tcashier_train_change"),TCASHIER_GRAB:"".concat(d,"tcashier_train_grab"),TCASHIER_PAID:"".concat(d,"tcashier_train_paid"),RETRIEVE_PASSWORD:"".concat(d,"tcashier_retrieve_password"),TCASHIER_REGISTER:"".concat(d,"tcashier_12306_register"),TCASHIER_REGISTER_CODE:"".concat(d,"tcashier_12306_register_code"),TCASHIER_MEMBER:"".concat(d,"tcashier_12306_member"),PASSENGER_MANAGEMENT:"".concat(d,"tcashier_passenger_management"),PASSENGER_CENTER:"".concat(d,"tcashier_passenger_center"),LOGIN_MANAGEMENT:"".concat(d,"tcashier_login_management"),LOGIN_CENTER:"".concat(d,"tcashier_login_center"),STATION_SCREEN:"".concat(d,"train_station_screen"),TRAIN_SCREEN_DETAIL:"".concat(d,"train_screen_detail"),MOBILE_CODE:"".concat(d,"tcashier_mobile_code"),RESERVE_DETAIL:"".concat(d,"tcashier_reserve_detail"),FACE_VERIFY_RESULT:"".concat(d,"tcashier_face_verify_result"),TCASHIER_PROTOCOLS:"".concat(d,"tcashier_protocols"),TRANSFER_DETAIL:"".concat(d,"train_transfer_detail"),IDENTITY_VERIFY:"".concat(d,"tcashier_identity_verify")};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.lastIndexOf("/"),r=e.indexOf("?");return e.substring(t>=0?t:0,r>=0?r:void 0)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=w(e);t="".concat(t,"-").concat(r),p.ZP.isNativePlatform&&(0,a.k)({stores:{destUrl:e},subOp:t,isRetry:!1})}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=(0,l.Q2)(e,t,r);S(n,"forward"),n?o.ZP.uniformForward(n):(0,s.e)({errorMsg:"navigation_uniformForward_no_url",stores:{url:e,destUrl:n,params:t,keepCamelParams:r}})}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;(0,u.V)(null==e?void 0:e.page_el_sn,e,(function(){return O(t,r,n)}))}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=(0,l.Q2)(e,t,r);S(n,"reload"),n?o.ZP.reload(n):(0,s.e)({errorMsg:"navigation_reload_no_url",stores:{url:e,destUrl:n,params:t,keepCamelParams:r}})}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;(0,u.V)(null==e?void 0:e.page_el_sn,e,(function(){return k(t,r,n)}))}function _(e){var t={url:m,type:e,props:{search_key:"火车票"}};(0,c.Q6)("JSNavigation","forward",t)}function T(e){p.ZP.isNativePlatform?(0,p.BB)()&&p.ZP.isVersionGreaterThanEqual("4.82.0")?_("pdd_order_search"):(0,p.bM)()&&p.ZP.isVersionGreaterThanEqual("4.60.0")?_():E(e,m):E(e,m)}function D(e,t){var r=e||{},n=r.orderSn,i=r.isBatchPay;return t=t||{},n?{url:i?y:v,query:h(h({},t),{},{parentOrderSn:i?n:void 0,orderSn:i?void 0:n})}:{url:g,query:t}}function x(e,t,r){if(null!=e&&e.orderSn){var n=D(e,r);E(t,n.url,n.query)}else T(t)}function C(e,t,r){var n=D(e,r);P(t,n.url,n.query)}function N(e,t,r){var n=t?b.FLIGHT_COMPOSE:b.TRAIN_COMPOSE;O(p.ZP.isNativePlatform?b.TRAIN_TICKETS:n,e,r)}function L(e){o.ZP.back(window.location.href,null,!0,{props:e})}},75048:function(e,t,r){"use strict";function n(e,t){if(t){for(var r in t)t[r];Object.assign(e,t)}}r.d(t,{w:function(){return n}})},21590:function(e,t,r){"use strict";r.d(t,{$0:function(){return p},Yp:function(){return v},Pq:function(){return y}});var n=r(59713),i=r.n(n),o=r(27361),a=r.n(o),s=r(96237),c=r(57686);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={CHECKOUT:"checkout_params",QUERY:"query_params",CREATE:"post_params",CHANGE_CERATE:"change_post_params",GRAB_CREATE:"grab_post_params"},f={checkout_params:["start_station","end_station","filter_start_station","filter_end_station","search_start_station","search_end_station","seat_type","train_no","depart_date","ticket_price","use_id_card_in"],query_params:["start_station","end_station","filter_start_station","filter_end_station","seat_type","train_no","depart_date","use_id_card_in"],post_params:["filter_start_station","filter_end_station","start_station","end_station","seat_type","train_no"],change_post_params:["filter_start_station","filter_end_station","start_station","end_station","seat_type","train_no"],grab_post_params:["filter_start_station","filter_end_station"]},h=["seat_type","depart_date","f_depart_date","f_seat_type","s_depart_date","s_seat_type","ticket_price","use_id_card_in"];function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n={};return t.forEach((function(t){var i=r+t;n[t]=h.includes(i)?parseInt(e[i],10)||0:e[i]})),n}var v=function(e,t){t||(t=(0,c.ZS)());var r={},n=f[e]||f[p.QUERY];return r=e===p.CHECKOUT?function(e,t){var r=[];return e.f_depart_date&&e.s_depart_date?(r.push(l({segmentNo:1},d(e,t,"f_"))),r.push(l({segmentNo:2},d(e,t,"s_")))):r.push(d(e,t)),{trainInfoList:r}}(t,n):d(t,n),Object.assign(r,function(e){var t={};return Object.keys(e).forEach((function(r){if(/^_tp_order_/.test(r)){var n=r.replace(/^_tp_order_/,"");t[n]="travel_sns"===n?e[r].split(","):e[r]}})),t}(t)),r},y=function(e){e=e||{};var t=[];return Object.keys(e).forEach((function(r){var n=a()(e[r],"passenger.ticketType");a()(e[r],"selected")&&(n||(0,s.e)({errorMsg:"formatPassengersVo ticketType不存在",stores:{draftOperations:e}}),t.push({id:r,with_children:a()(e[r],"withChildren"),ticket_type:n,verifyless:a()(e[r],"passenger.verifyless")}))})),{passengers_vo:t}}},99510:function(e,t,r){"use strict";r.d(t,{o5:function(){return s},d_:function(){return c},$r:function(){return l}});var n=r(59713),i=r.n(n),o=r(9709),a=r(24538);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=parseInt(t.with_children,10)||0;return e+r+(t.ticket_type===o.lL.CHILD?1:0)}),0)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(t.ticket_type===o.lL.STUDENT?1:0)}),0)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+(t.ticket_type===o.lL.ADULT?1:0)}),0)}function l(e,t){var r,n=(r={},i()(r,o.lL.ADULT,u),i()(r,o.lL.CHILD,s),i()(r,o.lL.STUDENT,c),r);return t.some((function(t){return t.priceType===a.g.TICKET&&n[t.ticketType]&&t.count!==n[t.ticketType](e)}))}},29960:function(e,t,r){"use strict";r.d(t,{Z:function(){return E}});var n=r(48926),i=r.n(n),o=r(34575),a=r.n(o),s=r(93913),c=r.n(s),u=r(2205),l=r.n(u),p=r(78585),f=r.n(p),h=r(29754),d=r.n(h),v=r(87757),y=r.n(v),m=r(92272),g=r(18873);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d()(e);if(t){var i=d()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f()(this,r)}}var w="api/mayflower/crh/login",S="api/mayflower/crh/login_by_id",O="api/mayflower/crh/list_all_accounts",E=function(e){l()(n,e);var t,r=b(n);function n(){return a()(this,n),r.apply(this,arguments)}return c()(n,[{key:"doLoginNotId",value:function(e){return this.asyncQuerypost({url:w,params:e,risk:!0,defaultValue:{}})}},{key:"doLoginById",value:function(e){return this.asyncQuerypost({url:S,params:e,risk:!0,defaultValue:{}})}},{key:"doLogin",value:function(e){var t=e.trainAccountId,r=e.loginParams;return t?this.doLoginById({trainAccountId:t}):this.doLoginNotId(r)}},{key:"queryAccountList",value:(t=i()(y().mark((function e(t){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post({url:O,params:t,risk:!0,defaultValue:{}});case 2:return r=e.sent,e.abrupt("return",(0,g.F)(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(m.b)},33865:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(2205),c=r.n(s),u=r(78585),l=r.n(u),p=r(29754),f=r.n(p),h=r(92272),d=r(28444);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var y="提交身份认证失败，请稍后重试",m=[40003,11e4],g="api/origenes/update/user/credential";function b(e){var t=e.errorCode,r=e.message,n=e.response;return{isApiError:!0,errorMsg:m.includes(t)?y:t&&n?r||y:"身份认证失败，请稍后重试"}}var w=function(e){c()(r,e);var t=v(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"saveUser",value:function(e){return e.scene=d.D_.TRAIN,e.riskRequest=!0,this.post({url:g,params:e,risk:!0,customConfig:{skipBizErrorCheck:!0},extrats:{defaultErrorHandler:function(e){return e}},customErrorHandler:b,defaultValue:{}})}}]),r}(h.b)},63389:function(e,t,r){"use strict";r.d(t,{V:function(){return c},Z:function(){return u}});var n=r(36792),i=r(1607),o=r(79072),a=r(84160),s=!0;function c(e){s=e}function u(e,t){e=e||{},o.ZP.isNativePlatform&&(0,n.z2)({callback:function(){if(s){"function"==typeof t&&Object.assign(e,t());var r=e,n=r.title,o=r.text,u=r.onOk,l=r.onCancel,p=r.okLabel,f=void 0===p?"留在此页":p,h=r.cancelLabel;!function(e){c(!1),(0,a.i0)(e)}({title:n,text:o,onOk:function(){c(!0),u&&u()},onCancel:l,okLabel:f,cancelLabel:void 0===h?"离开页面":h})}else i.ZP.back()}})}},72781:function(e,t,r){"use strict";r.d(t,{Z:function(){return A}});var n,i,o,a=r(59713),s=r.n(a),c=r(21165),u=r.n(c),l=r(34575),p=r.n(l),f=r(93913),h=r.n(f),d=r(81506),v=r.n(d),y=r(2205),m=r.n(y),g=r(78585),b=r.n(g),w=r(29754),S=r.n(w),O=r(33124),E=r.n(O),k=(r(67268),r(27361)),P=r.n(k),_=r(22188),T=r(54328),D=r(75048),x=r(63389),C=r(14102);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S()(e);if(t){var i=S()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return b()(this,r)}}var A=(n=function(e){m()(r,e);var t=R(r);function r(){var e;p()(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).transacType=0,e.source="",e.ifStudentTicket=!1,e.configData={},e.detainMessage=null,e.departDateTimes=[],e.seatTypes=[],e.isTransit=!1,u()(e,"is12306Member",i,v()(e)),u()(e,"updateMemberStatus",o,v()(e)),e.checkIsInStuHoliday=function(){var t,r=(null===(t=e.configData)||void 0===t?void 0:t.dateInfo)||{},n=r.stuIsValid,i=r.stuDateInfo,o=void 0===i?{}:i;if(!n)return!0;var a=e.departDateTimes.find((function(e){return!(0,C.W)(L(L({},o),{},{checkTime:e})).isInHoliday}));return a&&(0,x.V)(!1),!a},e.checkIsInValidSeats=function(){var t=e.configData.stuSeatTypeList||[],r=e.seatTypes.find((function(e){return!t.includes(e)}));return(e.isTransit||r)&&(0,x.V)(!1),!r&&!e.isTransit},e}return h()(r,[{key:"initWithContext",value:function(e){this.source=P()(e,"query._tp_order_source",""),this.ifStudentTicket=1===parseInt(P()(e,"query._tp_order_if_student_ticket",0),10)}},{key:"onNextViewObject",value:function(e){(0,D.w)(this,e)}}]),r}(T.q),i=E()(n.prototype,"is12306Member",[_.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=E()(n.prototype,"updateMemberStatus",[_.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.is12306Member=t}}}),n)},80109:function(e,t,r){"use strict";r.d(t,{Li:function(){return s},jj:function(){return c},Np:function(){return u},bt:function(){return l}});var n=r(27361),i=r.n(n),o=r(9709),a=r(77841);function s(e){var t={};return(e||[]).forEach((function(e){(i()(e,"priceList")||[]).forEach((function(e){var r=e.price,n=e.seatType,i=e.seatTypeName;t[n]&&(r=Math.max(r,t[n].price)),t[n]=a.vD.fromVal({id:+n,text:i,price:r})}))})),t}function c(e,t){e=e||{},t=t||{};var r={},n=!1,i={},o=!1;return Object.keys(e).forEach((function(i){t[i]||(r[i]=e[i],n=!0)})),Object.keys(t).forEach((function(r){e[r]||(i[r]=t[r],o=!0)})),{hasAddedTypes:n,hasLostTypes:o,addedTypes:r,lostTypes:i}}function u(e){var t=[];return(e=e||[]).forEach((function(e){var r=e.withChildren;if(e.isAccompanyChild=!1,t.push(e),r>0)for(var n=0;n<r;n++){var i={};Object.assign(i,e),i.childIdx=n+1,i.userType="儿童",i.isAccompanyChild=!0,i.ticketType=o.lL.CHILD,Object.defineProperty(i,"parent",{value:e}),delete i.withChildren,t.push(i)}})),t}var l=function(e){var t=e.passengers,r=e.seatType,n=e.ticketPrice;return(t=u(t)).map((function(e){return{ticket_type:e.ticketType,seat_type:parseInt(r,10),ticket_price:n,passenger_id:e.id}}))}},91907:function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)if(t[n]&&t[n].err)return t[n];return{}}r.d(t,{FY:function(){return n}})},1519:function(e,t,r){"use strict";function n(e){var t=e.passengers,r=e.errorHandler,n=e.verifyless;return null!=t&&t.length?n?{err:"乘车人未通过核验，请重新选择",errorHandler:r}:{}:{err:"请添加乘车人",errorHandler:r}}function i(e){return e.deadline?{}:{err:"请选择抢票截止日期"}}r.d(t,{y:function(){return n},D:function(){return i}})},59438:function(e,t,r){"use strict";r.d(t,{uo:function(){return S},gq:function(){return O},Ol:function(){return E},Wf:function(){return k},oH:function(){return P},gG:function(){return _},HZ:function(){return T},P4:function(){return D}});var n=r(66279),i="请输入登录密码",o="密码由6-20位字母、数字或符号组成",a="请输入确认密码",s="密码不一致",c="请填写真实姓名",u="姓名不能为空",l="证件号码错误，请重新填写",p="证件号码不能为空",f="请输入电子邮箱",h="电子邮箱地址有误",d="手机号码不能为空",v="请填写正确的手机号码",y="请输入验证码",m="验证码有误",g=/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?![,\.#%'\+\*\-:;^_`]+$)[,\.#%'\+\*\-:;^_`0-9A-Za-z]{6,20}$/,b=/^[0-9]+$/,w=/^\d{4}$/;function S(e){var t=e?"":i;return t||g.test(e)||(t=o),{err:t}}function O(e,t){var r=t?"":a;return r||e===t||(r=s),{err:r}}function E(e,t){var r=e?"":u;return!r&&t&&(r=(0,n.zN)(e)?"":c),{err:r}}function k(e,t){var r=e?"":p;return r||!t||t(e)||(r=l),{err:r}}function P(e){var t=e?"":f;return t||(0,n.oP)(e)||(t=h),{err:t}}function _(e){var t=e.mobile,r=e.errorHandler,i=t?"":d;return i||(0,n.z4)(t)||(i=v),{err:i,errorHandler:r}}function T(e){var t=e?"":y;return t||b.test(e)||(t=m),{err:t}}function D(e){var t=e?"":y;return t||w.test(e)||(t=m),{err:t}}},28444:function(e,t,r){"use strict";r.d(t,{W2:function(){return s},uR:function(){return c},D_:function(){return u},SS:function(){return l},sP:function(){return p},OZ:function(){return f},tT:function(){return h},ex:function(){return d}});var n,i=r(59713),o=r.n(i),a=r(66279),s={1:{desc:"居民二代身份证",checkIdFunc:a.SB,length:18},B:{desc:"护照",checkIdFunc:a.uD,length:18,needExpire:!0,needBirth:!0,needGender:!0,needRegion:!0},2:{desc:"港澳台居民居住证",checkIdFunc:a.ZE,length:18},H:{desc:"外国人永久居留身份证",checkIdFunc:a.CG,length:18,needExpire:!0,needBirth:!0,needGender:!0,needRegion:!0},C:{desc:"港澳居民来往内地通行证",checkIdFunc:a.Re,length:18,needExpire:!0,needBirth:!0,needGender:!0},G:{desc:"台湾居民来往大陆通行证",checkIdFunc:a.OA,length:18,needExpire:!0,needBirth:!0,needGender:!0}},c={CHINA_ID:"1",PASSPORT:"B",HONGKONG_MACAO_ID:"C",TAIWAN_PASSPORT:"G",FOAREINER_ID:"H",HONGKONG_MACAO_TAIWAN_ID:"2"},u={TRAIN:"TRAIN"},l={ADULT:1,CHILD:2,STUDENT:3},p={NULL:0,MALE:1,FEMALE:2},f=(n={},o()(n,p.NULL,""),o()(n,p.MALE,"男"),o()(n,p.FEMALE,"女"),n);function h(){return Object.keys(s).map((function(e){return{desc:(s[e]||{}).desc,value:e}}))}var d=[{desc:"男",value:p.MALE},{desc:"女",value:p.FEMALE}]},46177:function(e,t,r){"use strict";r.d(t,{p:function(){return n}});var n={TITLE:"车次信息查询不成功，请刷新重试",BTNTXT:"立即刷新"}},96701:function(e,t,r){"use strict";r.d(t,{xR:function(){return n},oP:function(){return i},$V:function(){return o}});var n=864e5,i=["05:00","23:30","23:55"],o="8"},30023:function(e,t,r){"use strict";r.d(t,{p1:function(){return n},Hx:function(){return i},rC:function(){return o},sz:function(){return a},k2:function(){return s}});var n="网络不稳定，请稍后再试",i={GUOYUAN:"guoyuan",DDJB_PUSH:"1212duoduojinbao"},o={NORMAL:1,PASSWORD_INPUT:2,CARD_SELECT:4,GENDER_SELECT:5,DATE_SELECT:6,REGION_SELECT:7},a="redirect_tcashier_url",s={IF_OPEN_SKIP_VERIFY:"0_if_open_skip_verify",TCASHIER_ORIGIN_URL:"0_origin_checkout_grab_url",BUY_CHANNEL_STORAGE_KEY:"0_trip_ifDuoduoReserve",ENTRANCE_TEACH_POPUP:"4_train_teach_popup",SHOW_PRIVILEGE:"6_train_snap_show_privilege",SHOW_LOGIN_TIP:"4_loginbar_show_guide_tip",CHECKOUT_MOBILE_INPUT:"7_train_checkout_mobile_input"}},11838:function(e,t,r){"use strict";r.d(t,{xi:function(){return a},I:function(){return s},jZ:function(){return c},iV:function(){return u},N$:function(){return l},QL:function(){return p}});var n,i=r(59713),o=r.n(i),a={COUPON:"coupon",ELECTRONIC_SEAT:"electronic_seat",ELECTRONIC_SEAT_COMPLETED:"electronic_seat_completed",LOGIN_MANAGEMENT:"login_management",SKIP_VERIFY_CHANGE:"skip_verify_change",PURCHASE_SERVICE_FEE_CHANGE:"purchase_service_fee_change",SKIP_LOGIN_CHANGE:"skip_login_change",UPDATE_PAGE:"update_page"},s=(n={},o()(n,a.COUPON,"优惠券选择失败"),o()(n,a.ELECTRONIC_SEAT,"选座服务更新失败"),o()(n,"DEFAULT","更新乘车人失败"),n),c="need_refresh_page",u={PAGE:1,PASSENGER:2,AUTOLOGIN:3,TOAST:4},l="refresh_toast_msg",p="login_success"},51941:function(e,t,r){"use strict";r.d(t,{IX:function(){return n},rG:function(){return i},F2:function(){return o},tC:function(){return a},pQ:function(){return s},kK:function(){return c},iU:function(){return u},Xf:function(){return l},yD:function(){return p}});var n={AliPay:1,WeChat:2,QQPay:3,ApplePay:4,AliPayDirectDebit:5,FriendPay:6,HBInstallmentPay:7,AliPayV2:8,UnionPay:9,DuoDuoPay:10,HBPay:11,WexinCredit:12},i={WEIXIN:n.WeChat,ALIPAY:n.AliPay,QQ:n.QQPay,WEIXIN_FRIEND:n.FriendPay,LIANLIANPAY:n.ApplePay,UNIONPAY:n.UnionPay,HBFQ_ALI_PAY:n.HBInstallmentPay,DUODUOPAY:n.DuoDuoPay,WEIXIN_CREDIT:n.WexinCredit},o={WEIXIN:"wechat",WEIXIN_FRIEND:"wechat",ALIPAY:"ali",QQ:"qq",DUODUOPAY:"ddpay",LIANLIANPAY:"apple",WEIXIN_CREDIT:"payAfterUse"},a={NATIVE:108,NATIVE_UES_BEFORE_PAY:125,H5_FOR_OTHER:109,H5_FOR_WECHAT:110,H5_FOR_MINIPROGRAM:111,H5_FOR_QQ:112},s=12,c={CREATED:0,PAYED:1,CANCELED:2},u={CHECKOUT:1,CHANGE:2,GRAB:3},l={PRICEDIFF:"· 当前车次票价有浮动，请以实际付款为准",SEATDIFF:"· 所选座位不足，已为您更换至有票座位"},p={DEFAULT:0,PAYING:1}},24538:function(e,t,r){"use strict";r.d(t,{g:function(){return c},_:function(){return u}});var n,i,o=r(59713),a=r.n(o),s=r(9709),c={TICKET:1,DISCOUNT:2,WINDOW:3,AVENUE:4,TOGETHER:5,TOP:6,MIDDLE_BOTTOM:7,BOTTOM:8,SKIP_VERIFY:10,PURCHASE_SERVICE_FEE:11,NIGHT_SERVICE_FEE:12,GARP_DISCOUNT:13,SKIP_LOGIN:14},u=(i={},a()(i,c.TICKET,(n={},a()(n,s.lL.ADULT,"成人票价"),a()(n,s.lL.CHILD,"儿童票价"),a()(n,s.lL.STUDENT,"学生票价"),n)),a()(i,c.DISCOUNT,"优惠金额"),a()(i,c.WINDOW,"选靠窗"),a()(i,c.AVENUE,"选过道"),a()(i,c.TOGETHER,"选连坐"),a()(i,c.TOP,"选上铺"),a()(i,c.MIDDLE_BOTTOM,"选中、下铺"),a()(i,c.BOTTOM,"选下铺"),a()(i,c.SKIP_VERIFY,"免核验购票"),a()(i,c.SKIP_LOGIN,"免登录购票"),a()(i,c.PURCHASE_SERVICE_FEE,"购票服务费"),a()(i,c.NIGHT_SERVICE_FEE,"夜间出票服务"),a()(i,c.GARP_DISCOUNT,"抢票优惠套餐"),i)},82469:function(e,t,r){"use strict";r.d(t,{uw:function(){return n},Me:function(){return i},TS:function(){return o},CY:function(){return a},ON:function(){return s},UD:function(){return c},om:function(){return u},ms:function(){return l},vE:function(){return p}});var n={LOGIN:1,LOGOUT:2},i={LOGIN:1,PERSON_VERIFY:2,IDENTITY_VERIFY:5,REGISTER_ACCOUNT:6},o={LOGIN:1},a=5,s="一次最多只能买".concat(a,"张票哦"),c="$trainCheckout$draftOps",u=[9200314,9200315,9200309],l={9200314:i.LOGIN,9200315:i.PERSON_VERIFY,9200309:i.LOGIN},p="onTripFaceVerifyCompleted"},70051:function(e,t,r){"use strict";r.d(t,{Xe:function(){return n},a6:function(){return i}});var n=[7,9,14,15,16,19,29,30],i=[{id:3,name:"硬座"},{id:7,name:"硬卧"},{id:2,name:"二等座"},{id:0,name:"无座"}]},8750:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});var n={FIRST:1,SECOND:2}},38232:function(e,t,r){"use strict";r.d(t,{k:function(){return n},$:function(){return i}});var n={FAILED:0,PASSED:1,UNKNOWN:99},i={PASSED:1,NOT_VERIFIED:2,FAILED:3,PRE_VERIFY:4,PRE_PASS:5,EXPIRE:6,NO_RESULT:99}},85068:function(e,t,r){"use strict";r.d(t,{_i:function(){return n},p:function(){return i},u4:function(){return o},Mu:function(){return a},nQ:function(){return s}});var n={CHECKOUT:0,GRAB:1,NIGHT:2,OFFLINE:3},i={CHECKOUT:1,CHANGE:2,GRAB:3},o={Unknown:-1,HighToLow:1,SamePrice:2,LowToHigh:3},a={ONGOING:10,SUCCESS:21,FAILED:12,SUCCESS_BUT_GO_ORDER:100,CHANGE_CONFIRM:101,BEFORE_SUCCESS:11},s=[21,12,100,101]},9709:function(e,t,r){"use strict";r.d(t,{lL:function(){return s},ev:function(){return c},FI:function(){return u}});var n,i,o=r(59713),a=r.n(o),s={ADULT:1,CHILD:2,STUDENT:3,SOLDIER:4},c=(n={},a()(n,s.ADULT,"成人"),a()(n,s.CHILD,"儿童"),a()(n,s.STUDENT,"学生"),a()(n,s.SOLDIER,"残军"),n),u=(i={},a()(i,s.ADULT,"成人票"),a()(i,s.CHILD,"儿童票"),a()(i,s.STUDENT,"学生票"),a()(i,s.SOLDIER,"残军票"),i)},53613:function(e,t,r){"use strict";r.d(t,{V:function(){return c},f:function(){return u}});var n=r(59713),i=r.n(n),o=r(55622),a=r(6341);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){try{if(t=t||{},!e)throw new Error("empty pageElSn");e&&(0,a.QN)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({op:"click",page_el_sn:e},t)),null==r||r()}catch(e){r&&r()}}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,o.cM)((function(){return{op:"click",page_el_sn:e}}),t)}},83714:function(e,t,r){"use strict";r.d(t,{ET:function(){return s},o:function(){return u},L2:function(){return l},Hu:function(){return p}});var n=r(59713),i=r.n(n),o=r(29404),a=r(11838),s={LOGING:"登录不成功",LOGGOUT:"登出失败",DELETE:"删除失败",WRITE_ERR:"请正确填写账号和密码",NOT_AGREE:"请阅读并同意《账户授权协议》"};function c(e,t){return(e||"").length>t}function u(e,t){return{isValid:c(e,3)&&c(t,3),msg:s.WRITE_ERR}}function l(){var e,t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=r?(e={},i()(e,a.jZ,a.iV.TOAST),i()(e,a.N$,n),i()(e,a.QL,s),e):(t={},i()(t,a.jZ,a.iV.PAGE),i()(t,a.QL,s),t);(0,o.B7)(c)}var p={MSG:8000038,FAIL:9200017}},80837:function(e,t,r){"use strict";r.d(t,{e:function(){return f},$:function(){return h}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(30381),c=r.n(s),u=r(2428),l=["今天","明天","后天"],p=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],f=function(e){return c()(e).utc().utcOffset(480)},h=function(){function e(){i()(this,e)}return a()(e,null,[{key:"now",value:function(){var e=u.Z.serverTimeNow();return f(e).valueOf()}},{key:"diffNow",value:function(t){return t-e.now()}},{key:"chineseMD",value:function(e){return f(e).format("M月D日")}},{key:"hColonM",value:function(e){return f(e).format("HH:mm")}},{key:"dateStartTime",value:function(e){return f(e).startOf("day").valueOf()}},{key:"dateEndTime",value:function(e){return f(e).endOf("day").valueOf()}},{key:"isSameDay",value:function(e,t){return f(e).isSame(t,"day")}},{key:"twxDay",value:function(e,t,r){var n=f(e).startOf("day"),i=f(t).endOf("day"),o=f(r);return(o.isAfter(n,"day")||o.isSame(n,"day"))&&(o.isBefore(i,"day")||o.isSame(i,"day"))}},{key:"buyDate",value:function(){return{start:f(e.now()).startOf("day").valueOf(),end:f(e.now()).add(29,"day").endOf("day").valueOf(),book:f(e.now()).add(69,"day").endOf("day").valueOf()}}},{key:"diffNowTag",value:function(t){var r=f(e.now()),n=Math.ceil((f(t).startOf("day")-r.startOf("day"))/864e5);return l[n]||""}},{key:"weekDayTag",value:function(e){var t=f(e).day();return p[t]||""}},{key:"tag",value:function(t){return e.diffNowTag(t)||e.weekDayTag(t)}},{key:"dayIncrease",value:function(e,t){return f(e).add(t?1:-1,"day").valueOf()}},{key:"formatYMD",value:function(e){return f(e).format("YYYY.MM.DD")}},{key:"dayDifference",value:function(e,t){return e&&t?c()(e).startOf("day").diff(c()(t).startOf("day"),"days"):0}},{key:"monthDifference",value:function(e,t){return e&&t?c()(e).startOf("month").diff(c()(t).startOf("month"),"month"):0}}]),e}()},14102:function(e,t,r){"use strict";r.d(t,{L:function(){return o},W:function(){return a}});var n=r(80837),i=function(e,t,r){for(var n=e.split(":"),i=t.split(":"),o=Math.max(n.length,i.length),a=0;a<o;++a){var s=parseInt(n[a]||"0"),c=parseInt(i[a]||"0");if(s!==c)return c>s}return!!r};function o(e,t){var r=n.$.hColonM(n.$.now());return i(t,e)?i(e,r,!0)||i(r,t):i(e,r,!0)&&i(r,t)}function a(e){var t=e.summerStart,r=e.summerEnd,i=e.winterStart,o=e.winterEnd,a=e.checkTime,s=n.$.twxDay(t,r,a),c=!s&&n.$.twxDay(i,o,a);return{isInSummer:s,isInWinter:c,isInHoliday:s||c}}},45273:function(e,t,r){"use strict";r.d(t,{Z:function(){return o},k:function(){return a}});var n=r(82094),i=r(79072);function o(e){i.ZP.isNativePlatform?function(e){(0,n.Fz)(e),(0,n.rB)("onApplicationResume",e)}(e):window.addEventListener("pageshow",(function(e){e.persisted&&location.reload()}))}function a(e){try{return"string"==typeof e&&(e=JSON.parse(e)),e}catch(e){return{}}}},79072:function(e,t,r){"use strict";r.d(t,{bM:function(){return o},JD:function(){return a},BB:function(){return s},bl:function(){return c}});var n=r(38533),i=r(99433);function o(){return(0,n.zT)().platform===i.iw.PddAndroid}function a(){return(0,n.zT)().system===i.we.Android}function s(){return(0,n.zT)().platform===i.iw.PddIOS}function c(){var e=(0,n.zT)();return(0,i.yC)(e.systemVersion,"12.0")<0&&e.system===i.we.IOS}t.ZP=(0,n.zT)()},28085:function(e,t,r){"use strict";function n(e){var t=new(0,r(78330).Z);return t.setPublicKey("-----BEGIN PUBLIC KEY-----MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCNh+5VkmS9LLiGFE/exWH5WqdTxRzENvbHuFtxIZ/F3shofpfd2NviRedXD3glohqlFSXlm9OJ4YWsSQ29DeFXmJOv03/c+uzLCNfUmOEsCNqqOh4BqNpdptboeb1jr7Pbh0GKBc4DZoU0UlcBtsRB1gm1dqn/dtMvqawNlirteQIDAQAB-----END PUBLIC KEY-----"),t.encrypt(e)}r.d(t,{H:function(){return n}})},16932:function(e,t,r){"use strict";r.d(t,{Z:function(){return L}});var n={};r.r(n),r.d(n,{getItem:function(){return b},isNativeSupport:function(){return g},setItem:function(){return S}});var i={};r.r(i),r.d(i,{getItem:function(){return x},setConfig:function(){return C},setItem:function(){return T}});var o=r(48926),a=r.n(o),s=r(34575),c=r.n(s),u=r(93913),l=r.n(u),p=r(87757),f=r.n(p),h=r(69483),d=r.n(h),v=r(96237),y=r(36792),m=r(79072);function g(){return!!m.ZP.isNativePlatform&&m.ZP.isVersionGreaterThanEqual("4.0.0")}function b(e){return w.apply(this,arguments)}function w(){return(w=a()(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,y.Q6)("AMStorage","get",{key:t});case 3:return r=e.sent,e.abrupt("return",r&&r.value);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function S(e,t){return(0,y.Q6)("AMStorage","set",{key:e,value:t})}var O=r(81086);function E(e){return k.apply(this,arguments)}function k(){return(k=a()(f().mark((function e(t){var r,n,i,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().keys();case 2:return r=e.sent,n=r.filter((function(e){var t=parseInt(e.split("_")[0]);return t>=0&&t<=6})).sort().reverse(),e.next=6,Promise.all(n.map((function(e){return d().getItem(e)})));case 6:i=e.sent,o=0,i.forEach((function(e,r){o<2*t&&(o+=JSON.stringify(e).length,d().removeItem(n[r]))}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,r,n){return _.apply(this,arguments)}function _(){return(_=a()(f().mark((function e(t,r,n,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"].includes(t&&t.name)||i<3)){e.next=5;break}return e.next=3,E(JSON.stringify(r).length);case 3:T(n,r,i),i++;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return D.apply(this,arguments)}function D(){return D=a()(f().mark((function e(t,r){var n,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:0,e.prev=1,e.next=4,d().setItem(t,r);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),(0,O.c)(e.t0),e.next=11,P(e.t0,r,t,n);case 11:case"end":return e.stop()}}),e,null,[[1,6]])}))),D.apply(this,arguments)}function x(e){return d().getItem(e)}function C(e){d().config({driver:[d().WEBSQL,d().INDEXEDDB,d().LOCALSTORAGE],name:e})}var N=function(){function e(){c()(this,e),this.utilforage=void 0,g()?this.utilforage=n:(this.utilforage=i,C("TRIP"))}return l()(e,[{key:"getItem",value:function(){var e=a()(f().mark((function e(t){var r,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.utilforage.getItem(t);case 3:return r=e.sent,n=JSON.parse(r),e.abrupt("return",n.value);case 8:return e.prev=8,e.t0=e.catch(0),(0,O.c)("StorageHelper getItem key ".concat(t," ").concat(e.t0)),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setItem",value:function(e,t){try{var r=JSON.stringify({value:t});this.utilforage.setItem(e,r)}catch(t){(0,v.e)({errorMsg:"StorageHelper error ".concat(e),error:t})}}}]),e}(),L=new N},81086:function(e,t,r){"use strict";r.d(t,{c:function(){return c},W:function(){return l}});var n=r(48926),i=r.n(n),o=r(87757),a=r.n(o),s=r(16932);function c(e){}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new Date,n=new Date(Number(e));return!(r<=n)&&(r.setHours(0,0,0,0),n.setHours(0,0,0,0),(r-n)/864e5>=t)}function l(e){return p.apply(this,arguments)}function p(){return(p=i()(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.getItem(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:return r=e.t0,e.abrupt("return",!r||u(r,1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},35989:function(e,t,r){"use strict";r.d(t,{c:function(){return l},Z:function(){return f}});var n=r(48926),i=r.n(n),o=r(87757),a=r.n(o),s=r(9714),c=r(16932),u=r(30023);function l(){return p.apply(this,arguments)}function p(){return(p=i()(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt((0,s.KQ)("skipVerifyTime"),10)||36e5,e.next=3,c.Z.getItem(u.k2.IF_OPEN_SKIP_VERIFY);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=0;case 6:return r=e.t0,e.abrupt("return",Date.now()-r<t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){c.Z.setItem(u.k2.IF_OPEN_SKIP_VERIFY,e?Date.now():0)}},97775:function(e,t,r){"use strict";r.d(t,{m:function(){return a}});var n=r(84160),i=r(11838),o=r(46177);function a(e,t,r){e!==i.xi.UPDATE_PAGE?(0,n.wp)({text:r,okLabel:"知道了"}):(0,n.wp)({text:o.p.TITLE,okLabel:o.p.BTNTXT,onOk:function(){return t({source:i.xi.UPDATE_PAGE})},pureClose:!0})}},57686:function(e,t,r){"use strict";r.d(t,{ZS:function(){return b},XX:function(){return w},Q2:function(){return S},FD:function(){return k},h8:function(){return P}});var n=r(48926),i=r.n(n),o=r(59713),a=r.n(o),s=r(27361),c=r.n(s),u=r(87757),l=r.n(u),p=r(30064),f=r(38533),h=r(36792),d=r(1607),v=r(96237),y=r(26372);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(){return(0,p.mB)(window.location.search)}function w(e){var t=b();return t?t[e]:null}function S(e,t,r){t=t||{},r=r||{};var n=(0,p.XP)(g(g({},(0,y.$9)(t,{})),r));return(e=e||location.pathname)+(e.includes("?")?"&":"?")+n}function O(e){var t=window.location.href;t!==e&&c()(window,"Navigation.CurrentWebUrl")!==e&&(0,v.e)({error:{},errorMsg:"".concat(window.location.pathname,"-check replaceURL failed"),stores:{targetURL:e,currentURL:t}})}function E(){return(E=i()(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=(0,f.zT)()).statisfy||!r.statisfy("1.2.5","2.1.0","greaterThan")){e.next=13;break}return e.prev=2,e.next=5,(0,h.Q6)("WebScene","replaceURL",{url:t});case 5:return window.Navigation.CurrentWebUrl=t,O(t),e.abrupt("return");case 10:e.prev=10,e.t0=e.catch(2),(0,v.e)({error:e.t0,errorMsg:"".concat(window.location.pathname,"-replaceURL failed"),stores:{url:t,currentURL:window.location.href}});case 13:d.ZP.replaceURL(t,(function(){O(t)}));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function k(e){!function(e){E.apply(this,arguments)}(function(e,t){return(0,p.De)(t||location.pathname,g(g({},b()),(0,y.$9)(e,{})))}(e,""))}function P(e){d.ZP.replaceQuery(e),k(e)}},57186:function(e,t,r){"use strict";r.d(t,{TS:function(){return u},AC:function(){return l},JE:function(){return p},XX:function(){return f}});var n=r(23493),i=r.n(n),o=r(1607),a=r(66197),s=r(30023),c=r(16932);function u(e,t){var r={};return Object.keys(e).forEach((function(n){r[n]=e[n]||t[n]})),r}var l=i()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;(0,a.Z)(e,{duration:t/1e3,onClose:function(){return o.ZP.back()}})}),2e3);function p(){var e=location.pathname+location.search;c.Z.setItem(s.k2.TCASHIER_ORIGIN_URL,e)}function f(){return c.Z.getItem(s.k2.TCASHIER_ORIGIN_URL)}},53955:function(e,t,r){"use strict";r.d(t,{Z:function(){return l},d:function(){return p}});var n=r(27361),i=r.n(n),o=r(67294),a=r.n(o),s=r(38533),c=r(99433);function u(e){try{return 1===JSON.parse(i()(e,'headers["p-uno-context"]')||"{}").ls}catch(e){return!1}}var l=a().createContext(null);function p(e){return{webpEnable:i()(e,"isSupportWebp"),platform:(i()(e,"userAgent"),t=(0,s.Xf)(window.navigator.userAgent),{current:t.platform,isNativePlatform:t.isNativePlatform,isWeChat:t.isWeChatPlatform,isTinyNativePlatform:t.isTinyNativePlatform,isIOS:t.system===c.we.IOS}),pageName:i()(e,"__res.locals.pageName"),isLoadScene:u(i()(e,"__req"))};var t}},27325:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(67154),i=r.n(n),o=r(67294),a=r.n(o),s=r(53955);function c(e){return function(t){return a().createElement(s.Z.Consumer,null,(function(r){return a().createElement(e,i()({},t,{ctx:r}))}))}}},92272:function(e,t,r){"use strict";r.d(t,{b:function(){return M}});var n=r(48926),i=r.n(n),o=r(59713),a=r.n(o),s=r(6479),c=r.n(s),u=r(34575),l=r.n(u),p=r(93913),f=r.n(p),h=r(87757),d=r.n(h),v=r(2428),y=r(36406),m=r(50008),g=r.n(m),b=r(97792),w=[5e6,1e7];function S(e,t){return(e=parseInt(e,10))>=w[0]&&e<=w[1]?t:""}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){return parseInt(e.errorCode,10)===b.Bq.AUTHENTICATION_FAILED||"needLogin"===e.errorMsg||"needLogin"===e.errorCode}var k=function(e,t){!function(e){if(E(e=e||{}))throw e}(e)};var P=function(e,t,r,n){var i=(n||{}).useApiErrorMsg||!r.includes("api/mayflower"),o=t||{};if("object"===g()(o)&&!Array.isArray(o)){var s=e.code,c=e.errorCode,u=e.errorMsg;o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isApiError:!0,code:s,errorCode:c,errorMsg:i?u:S(c,u)},o)}return o},_=r(12714);var T=r(46002);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=0,N=1,L={url:"api/mayflower/train/async/result",risk:!0,defaultValue:{}};function R(e,t,r,n){return new Promise((function(o){var a=1,s=null,c=function(){var c=i()(d().mark((function i(){var c,u,l;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e(x(x({params:t},n),L));case 2:u=i.sent,l=null===(c=u.asyncApiData)||void 0===c?void 0:c.status,a>=30&&l===C&&(u.isApiError=!0),(u.isApiError||l===N)&&(clearInterval(s),(0,T.Q)({count:a,params:t,originParams:r,response:u}),o(u));case 6:case"end":return i.stop()}}),i)})));return function(){return c.apply(this,arguments)}}();s=setInterval((function(){a+=1,c()}),1e3),c()}))}var A=["customDataHandler","url"],I=["url","params","extrats","customConfig"],j=["url","params","risk","extrats","customConfig"],B=["url","params"];function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=function(){function e(t){var r=this;if(l()(this,e),this._handleResError=function(e,t){var r=t.customErrorHandler,n=t.defaultValue,i=t.url,o=t.customConfig;return k(e),r?r(e):P(e,n,i,o)},this._handleResData=function(e,t){var r=t.customDataHandler,n=t.url,i=c()(t,A),o=e;return function(e,t){var r=e||{},n=r.result;r.success&&!n&&(0,_.K2)(new Error("api response no result"),{error_msg:"api_response_no_result",params:JSON.stringify({data:e,api_url:t}),sub_op:"api_response_no_result"})}(o,n),r&&(o=r(e,H({},i))),o},this.get=function(){var e=i()(d().mark((function e(t){var n,i,o,a,s,u,l,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.params,o=t.extrats,a=void 0===o?{}:o,s=t.customConfig,u=void 0===s?{}:s,l=c()(t,I),e.prev=1,e.next=4,r.$http.get(n,H(H({},a),{},{params:i,customConfig:u}));case 4:return p=e.sent,e.abrupt("return",r._handleResData(p,H({url:n,params:i},l)));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r._handleResError(e.t0,H({url:n,customConfig:u},l)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.post=function(){var e=i()(d().mark((function e(t){var n,i,o,a,s,u,l,p,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.params,o=void 0===i?{}:i,a=t.risk,s=t.extrats,u=void 0===s?{}:s,l=t.customConfig,p=void 0===l?{}:l,f=c()(t,j),e.prev=1,e.next=4,r.$http.post(n,o,H(H({},u),{},{customConfig:p,risk:a}));case 4:return h=e.sent,e.abrupt("return",r._handleResData(h,H({url:n,params:o},f)));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r._handleResError(e.t0,H({url:n,params:o,customConfig:p},f)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.asyncQuerypost=i()(d().mark((function e(){var t,n,i,o,a,s,u,l,p,f,h=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=h.length>0&&void 0!==h[0]?h[0]:{}).customConfig=H(H({},t.customConfig||{}),{},{asyncApi:!0}),t.params=H(H({},t.params||{}),{},{async:!0}),e.next=5,r.post(t);case 5:if(n=e.sent,o=(i=n||{}).isApiError,a=i.asyncApiData,!o&&null!=a&&a.requestId){e.next=9;break}return e.abrupt("return",n);case 9:return u=(s=t||{}).url,l=s.params,p=c()(s,B),f={url:u,params:l},e.abrupt("return",R(r.post,{requestId:null==a?void 0:a.requestId},f,p));case 12:case"end":return e.stop()}}),e)}))),this.isClient=!0,this.$http=t||this._initClientHttp(),!this.$http)throw Error("$http is lost");this.isClient&&v.Z.serverTime(this.get)}return f()(e,[{key:"_initClientHttp",value:function(){return this.isClient?(0,y.W)():null}}]),e}()},2428:function(e,t,r){"use strict";var n=r(48926),i=r.n(n),o=r(87757),a=r.n(o);t.Z={__serverTimeDiff:0,serverTime:function(e){var t=this;return i()(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.__serverTime){r.next=2;break}return r.abrupt("return",t.__serverTime);case 2:return t.__queryPromise=t.__queryPromise||t.queryServerTime(e),r.abrupt("return",t.__queryPromise);case 4:case"end":return r.stop()}}),r)})))()},queryServerTime:function(e){var t=this;return i()(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getServerTime(e);case 2:return t.__serverTime=r.sent,t.setServerTimeDiff(t.__serverTime),t.__queryPromise=null,r.abrupt("return",t.__serverTime);case 6:case"end":return r.stop()}}),r)})))()},setServerTimeDiff:function(e){this.__serverTimeDiff=e-Date.now()},serverTimeNow:function(){return this.__serverTimeDiff+Date.now()},getServerTime:function(e){return e({url:"api/server/_stm",customConfig:{skipBizErrorCheck:!0}}).then((function(e){return e&&e.serverTime||Date.now()})).catch((function(){return Date.now()}))}}},36406:function(e,t,r){"use strict";r.d(t,{W:function(){return O}});var n=r(25370),i=r(53527),o=r(98717),a=r(59713),s=r.n(a),c=r(97792),u=r(12714),l=r(26372),p=r(46002);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){return{request:function(e){return e.data&&(e.data=(0,l.$_)(e.data)),e.params&&(e.params=(0,l.$_)(e.params)),e}}},v=function(){return{response:function(e){var t=e.config.customConfig;return t&&t.skipCamelCaseResponse||(e.data=(0,l.ZV)(e.data)),e}}},y=function(){return{response:function(e){var t=e.config.customConfig;if(null==t||!t.asyncApi)return e;var r=e.data,n=r.result,i=r.status,o=r.requestId;return e.data.result=h(h({},n||{}),{},{asyncApiData:{status:i,requestId:o}}),e}}},m=function(){return{response:function(e){var t=e.config.customConfig;if(t&&t.skipBizErrorCheck)return e;var r=e.data,n=e.config;if(!r.success||!r.result){var i=r.errorMsg||"project unknown biz error",o=new Error(i);throw o.errorType="project_api_biz_error",o.errorCode=r.errorCode||"unknow",o.data=r,o.config=n,o.isDefaultCustomErrorChecker=!0,o.errorMsg=r.errorMsg,o}return e}}},g=function(e){return{responseError:function(t){var r=t.config,n=r.customConfig||{},i=n.needTimeoutRetry,o=n.retryDelay,a=void 0===o?1:o,s=n.retry,c=void 0===s?3:s;if(!i||![6e4,620011,-40057].includes(t.errorCode))return Promise.reject(t);if(r.__retryCount=r.__retryCount||0,r.__retryCount>=c)return Promise.reject(t);r.__retryCount+=1;var l={sub_op:"project_api_biz_error",url:r.method+":"+r.url,page_url:location.href,error_code:t.errorCode,error_msg:"axiosRetryInterceptor start ".concat(r.__retryCount," times"),error_type:t.errorType,params:JSON.stringify({params:r.params,data:r.data})};(0,u.K2)(t,h(h({},l),{},{sub_op:"api_error"}));var p=new Promise((function(e){setTimeout((function(){e()}),a)}));return r.data=JSON.parse(r.data||{}),p.then((function(){return e(r)}))}}},b=function(){return{responseError:function(e){if("project_api_biz_error"!==e.errorType)throw e;var t=e.errorCode,r=e.errorMsg,n=e.data,i=e.config,o=(i.url.split("?")[0]||"").replace(i.baseURL,""),a="".concat(t,"-").concat(o,"-").concat((0,p.b)(t,r||(0,c.fY)(t))),s={sub_op:"project_api_biz_error",url:i.method+":"+i.url,page_url:location.href,error_code:e.errorCode,error_msg:a,error_type:e.errorType,params:JSON.stringify({params:i.params,data:i.data,apiResponseTimeout:752===e.errorCode}),resData:n};throw(0,u.K2)(e,h(h({},s),{},{sub_op:"api_error"})),e}}},w=r(38356),S=function(e,t){return t.forEach((function(t){e.interceptors.request.use(t.request),e.interceptors.response.use(t.response,t.responseError)}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,r=(0,i.e6)(),a={pageId:r};t=(0,n.e)({pageInfo:a},{useRawResponse:!0});var s=[(0,w.WE)(),d(),v(),y(),m(),b(e),{response:function(e){var t=e.config.customConfig;return null!=t&&t.skipBizErrorCheck?e.data:e.data.result}},g(t)];return s.unshift(o.Z),S(t,s),t}},46002:function(e,t,r){"use strict";r.d(t,{b:function(){return u},Q:function(){return l}});var n=r(59713),i=r.n(n),o=r(12714);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={9200314:{regx:/(「).+(」)/,replaceText:"$1xxx$2"},5000002:{regx:/(乘车人).+(手机号重复)/,replaceText:"$1xxx,xxx$2"},9200309:{msg:"人脸核验+短信错误提示信息"},9200318:{msg:"核对您发送验证短信的手机号码"}};function u(e,t){var r,n;if(null!==(r=c[e])&&void 0!==r&&r.msg)return null===(n=c[e])||void 0===n?void 0:n.msg;var i=c[e];return i&&t?t.replace(i.regx,i.replaceText):t}function l(e){var t=e.count,r=e.params,n=e.originParams,i=e.response,a=new Error("asyncApi resolve result"),c=u(i.errorCode,i.errorMsg),l={error_msg:"asyncApi resolve result",sub_op:"api_error",count:t,params:JSON.stringify({params:r,originParams:n,response:s(s({},i),{},{errorMsg:c})})};(0,o.K2)(a,l)}},38356:function(e,t,r){"use strict";r.d(t,{v0:function(){return d},WE:function(){return g}});var n=r(48926),i=r.n(n),o=r(87757),a=r.n(o),s=r(38533),c=r(99433),u=r(2428),l=null,p=function(){var e=(0,s.zT)(),t=e.version;return e.isNativePlatform&&(0,c.yC)(t,"4.69.0")>=0};function f(){return h.apply(this,arguments)}function h(){return(h=i()(a().mark((function e(){var t,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(5928).then(r.bind(r,96636));case 2:return t=e.sent,n=t.default,e.next=6,u.Z.serverTime();case 6:i=e.sent,l=new n({serverTime:i});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return v.apply(this,arguments)}function v(){return(v=i()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=3;break}return e.next=3,f();case 3:return e.abrupt("return",l.messagePackSync());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return m.apply(this,arguments)}function m(){return(m=i()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||{},!r||!p()){e.next=4;break}return t.useNativeAntiToken=!0,e.abrupt("return",t);case 4:return e.next=6,d();case 6:if(n=e.sent,!t.risk_request){e.next=10;break}return t.risk_request={anti_content:n},e.abrupt("return",t);case 10:return t.anti_content=n,e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){return{request:(e=i()(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.risk){e.next=2;break}return e.abrupt("return",t);case 2:return t.method,r=t.customConfig||{},n=r.useNativeRisk,e.next=6,y(t.data,n);case 6:return t.data=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e}},9714:function(e,t,r){"use strict";r.d(t,{KQ:function(){return i}});var n=r(27527);function i(e,t){return(0,n.ZP)(e,t)}},91942:function(e,t,r){"use strict";r.d(t,{U:function(){return s}});var n=r(50008),i=r.n(n),o=r(61960),a=r(25026),s=function(e,t){return function(r,n,s){return{get:function(){var r=this[o.V];if(r){r[n]||Object.keys(r).includes(n);switch(i()(e)){case"string":return r[n];case"function":return function(e,t,r){var n=e[o.B].get(t);if(n){if(n.duplicatedDeclare)(0,a._)("不允许注入，".concat(t.name,"在当前根store中存在多重定义"));else if(n.instance)return n.instance;(0,a._)("内部错误，instance未被存入storeMapping")}if((r=r||{}).nullable)return null;(0,a._)("rootstore中不存在类型为["+t.name+"] 的子store")}(r,e,t);default:(0,a._)("injectFromRoot仅支持传属性名或类型")}}else(0,a._)("内部错误，请检查rootstore中是否使用了@withSubstores")}}}}},81325:function(e,t,r){"use strict";r.d(t,{G:function(){return S}});var n=r(93913),i=r.n(n),o=r(34575),a=r.n(o),s=r(81506),c=r.n(s),u=r(2205),l=r.n(u),p=r(78585),f=r.n(p),h=r(29754),d=r.n(h),v=r(25026),y=r(61960);function m(){console.warn("不允许对虚拟子store做赋值运算")}function g(e){var t=new Map;Object.defineProperty(e,y.B,{value:t,writable:!1})}function b(e,t,r){var n=r||{},i=n.clazz,o=n.virtual,a=new i;Object.defineProperty(e,t,{enumerable:!o,get:function(){return a},set:o?m:function(e){e&&Object.assign(a,e)}});var s=function(e){for(var t=[],r=e;r&&"function"==typeof r;){t.push(r);var n=Object.getPrototypeOf(r);if(!n||n===Object.prototype)break;r=n}return t}(i);s.forEach((function(t){e[y.B].has(t)?e[y.B].get(t).duplicatedDeclare=!0:e[y.B].set(t,{instance:a,substoreConfig:r})})),Object.defineProperty(a,y.V,{get:function(){return e}})}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d()(e);if(t){var i=d()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f()(this,r)}}var S=function(e){return function(t){var r,n;return n=r=function(r){l()(o,r);var n=w(o);function o(){var r;return a()(this,o),r=n.apply(this,arguments),g(c()(r)),Object.keys(e).forEach((function(n){r[n]&&(0,v._)("".concat(n,"已经定义，请检查根Store[").concat(t.name,"]的声明"));var i=e[n];"function"==typeof e[n]&&(i={clazz:e[n]}),b(c()(r),n,i)})),r}return i()(o)}(t),r.displayName=t.displayName||t.name,n}}},86807:function(e,t,r){"use strict";r.d(t,{O:function(){return g},w:function(){return b}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(2205),c=r.n(s),u=r(78585),l=r.n(u),p=r(29754),f=r.n(p),h=r(96060),d=r(36406),v=r(53955),y=r(61960);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}function g(e){var t=e.data,r=e.rootStore;r&&r[y.B]&&r[y.B].forEach((function(e){var r=e||{},n=r.substoreConfig,i=r.instance;if(i&&i.onNextViewObject){var o=n&&n.viewObjectMapper?n.viewObjectMapper(t):t;i.onNextViewObject&&i.onNextViewObject(o)}}))}var b=function(e){c()(r,e);var t=m(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"initAxiosHttp",value:function(e){e.req,e.res,e.accessToken;var t={pageInfo:e.pageInfo};this.$axiosHttp=(0,d.W)(t)}},{key:"getExtraData",value:function(){}},{key:"initCommonPageData",value:function(e){}},{key:"baseInitDataCallback",value:function(e){this.$ctx=(0,v.d)(e),this.initCommonPageData(e),this.initServices(this.$axiosHttp);var t=this.getDatasource();return this.loadDatasource(t,e)}},{key:"initDataCallback",value:function(e){var t=this;this[y.B]&&this[y.B].forEach((function(t){var r=(t||{}).instance;r&&r.initWithContext&&r.initWithContext(e)}));var r=this.baseInitDataCallback(e);return this[y.B]&&r&&r.then?r.then((function(e){return g({data:t,rootStore:t}),e})):r}},{key:"fromJS",value:function(e,t){e&&e.isServerRendered&&(Object.assign(this,e),this.initAxiosHttp({pageInfo:t}),this.initServices(this.$axiosHttp))}}]),r}(h.j)},54328:function(e,t,r){"use strict";r.d(t,{q:function(){return u}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(61960),c=r(86807),u=function(){function e(){i()(this,e)}return a()(e,[{key:"initWithContext",value:function(e){}},{key:"onNextViewObject",value:function(e){}},{key:"getAxiosHttp",value:function(){var e=this[s.V];return e&&e.$axiosHttp?e.$axiosHttp:(console.warn("未找到$axiosHttp的存在，请不要在initClientData前调用"),null)}},{key:"getRootService",value:function(){var e=this[s.V];return e&&e.$service?e.$service:(console.warn("未找到$service的存在，请确保initService时有创建"),null)}},{key:"updateWholeStores",value:function(e){var t=this[s.V];t&&(0,c.O)({data:e,rootStore:t})}},{key:"updateWholeStoresNew",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this[s.V],r=t&&t.getExtraData&&t.getExtraData()||{},n={initData:e,updateExtraData:r};t&&(0,c.O)({data:n,rootStore:t})}}]),e}()},40193:function(e,t,r){"use strict";r.d(t,{r:function(){return o}});var n=r(693),i=r(86807);function o(e,t){if("function"==typeof i.w&&i.w.isPrototypeOf(e))return(0,n.I)({store:e},t);throw new Error("必须传入一个 RootViewStore 的子类")}},93820:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var n=r(61960);function i(e){return function(t){var r=t.store;if(!r)throw new Error("找不到根store，请确认是否使用了@mstoresAppStore装饰根组件");if(!r[n.B])throw new Error("根store并没有经@withSubstores处理");return Object.keys(e).reduce((function(t,i){var o=e[i],a=r[n.B].get(o);if(!a||!a.instance)throw new Error("内部错误，无法找到子store的instance");if(a.duplicatedDeclare)throw new Error("不允许注入，".concat(o.name,"在当前根store中存在多重定义"));return t[i]=a.instance,t}),{$pStore:r})}}},61960:function(e,t,r){"use strict";r.d(t,{B:function(){return n},V:function(){return i}});var n="$$mstores_root_storeMapping",i="$$mstores_sub_rootlink"},25026:function(e,t,r){"use strict";function n(e){throw console.error(e),new Error(e)}r.d(t,{_:function(){return n}})},23072:function(e,t,r){"use strict";r.d(t,{Z:function(){return I}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(2205),c=r.n(s),u=r(78585),l=r.n(u),p=r(29754),f=r.n(p),h=r(67294),d=r.n(h),v=r(49408),y=r(90926),m=r.n(y),g=r(93820),b=r(37874),w=r(59713),S=r.n(w),O=r(94184),E=r.n(O),k=r(41859),P=r(53613),_=r(64133),T=r.n(_),D=(0,h.memo)((function(e){var t=e.item,r=e.index,n=e.toggleSeatList;return t.selectable?d().createElement("li",{onClick:n,"data-test":"1346899-".concat(r),className:E()(T().seat,T().item,S()({},T().active,t.selected))},t.spaceEnumCode):d().createElement("li",{className:E()(T().seat,T().itemtxt)},t.spaceEnumCode)}));function x(e){var t=e.logData,r=e.data,n=e.toggleSeatList,i=e.seat,o=function(e,r){(0,P.V)(null==t?void 0:t.page_el_sn,{seat:e.spaceEnumCode,type:i}),(0,k.k)({stores:{seat:e.spaceEnumCode,type:i},subOp:"choose seat click"}),n(e)};return d().createElement("ul",{className:T().seatline},r.map((function(e,t){return d().createElement(D,{key:"".concat(e.spaceEnumCode,"-").concat(e.parentIndex,"-").concat(e.index),item:e,index:t,toggleSeatList:function(){return o(e)}})})))}var C,N=(0,h.memo)(x);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var R="*尽量出相邻座席，实际以出票结果为准",A="*所选座位余票不足时，将自动为您选择有票座位",I=m()(T())(C=(0,v.f3)((0,g.O)({addChooseSeatStore:b.Z}))(C=(0,v.Pi)(C=function(e){c()(r,e);var t=L(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"render",value:function(){var e=this.props,t=e.logData,r=void 0===t?{}:t,n=e.addChooseSeatStore||{},i=n.vo,o=n.toggleSeatList,a=n.selectedMaxLenth,s=n.selectedChildrenLen,c=i||{},u=c.seatViewMap,l=c.seat;if(0===a||0===Object.keys(u).length)return null;var p=s>0?R:A;return d().createElement("div",{className:T().box},d().createElement("div",{className:T().between},d().createElement("p",{className:T().title},"在线选座"),d().createElement("p",{className:T().txt},"可选择",a,"个座位")),Object.keys(u).map((function(e,t){return d().createElement(N,{logData:r,data:u[e],seat:l,key:t,toggleSeatList:o})})),d().createElement("p",{className:T().tip},p))}}]),r}(d().Component))||C)||C)||C},37874:function(e,t,r){"use strict";r.d(t,{Z:function(){return C}});var n,i,o,a,s=r(59713),c=r.n(s),u=r(21165),l=r.n(u),p=r(34575),f=r.n(p),h=r(93913),d=r.n(h),v=r(81506),y=r.n(v),m=r(2205),g=r.n(m),b=r(78585),w=r.n(b),S=r(29754),O=r.n(S),E=r(33124),k=r.n(E),P=(r(67268),r(22188)),_=r(54328),T=r(75048);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var i=O()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w()(this,r)}}var C=(n=P.aD.bound,i=function(e){g()(r,e);var t=x(r);function r(){var e;f()(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),l()(e,"selectedList",o,y()(e)),l()(e,"vo",a,y()(e)),e}return d()(r,[{key:"onNextViewObject",value:function(e){(0,T.w)(this.vo,e),this.selectedList=[]}},{key:"selectedChildrenLen",get:function(){var e;return null===(e=this.vo.passengers)||void 0===e?void 0:e.reduce((function(e,t){return(+t.withChildren||0)+e}),0)}},{key:"selectedMaxLenth",get:function(){var e;return(null===(e=this.vo.passengers)||void 0===e?void 0:e.length)+this.selectedChildrenLen}},{key:"selectedListLen",get:function(){var e=0;return Object.values(this.vo.seatViewMap).forEach((function(t){e+=t.filter((function(e){return e.selected&&e.selectable})).length})),e}},{key:"validateChooseSeat",get:function(){return 0===this.selectedListLen||0===this.selectedMaxLenth||this.selectedListLen===this.selectedMaxLenth?{}:{err:"还有".concat(this.selectedMaxLenth-this.selectedListLen,"位乘客没有选座～")}}},{key:"selectedInfoData",get:function(){var e=this,t={};return Object.keys(this.vo.seatViewMap).forEach((function(r){e.vo.seatViewMap[r].forEach((function(e){e.selected&&e.selectable&&(t[r]=t[r]||[],t[r].push("".concat(e.spaceEnumCode)))}))})),t}},{key:"toggleSeatList",value:function(e){var t=this.selectedList.slice(),r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,P.ZN)(this.vo.seatViewMap));if(!e.selected&&t.length===this.selectedMaxLenth&&t.length>0){var n=t.shift(),i=n.index;r[n.parentIndex][i].selected=0}e.selected?this.selectedList=t.filter((function(t){return!function(e,t){return e.parentIndex===t.parentIndex&&(null==e?void 0:e.spaceEnumCode)===t.spaceEnumCode}(t,e)})):(t.push(e),this.selectedList=t);var o=e.index;r[e.parentIndex][o].selected=e.selected?0:1,this.vo.seatViewMap=r}}]),r}(_.q),o=k()(i.prototype,"selectedList",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=k()(i.prototype,"vo",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{seatViewMap:{},seat:null,passengers:[]}}}),k()(i.prototype,"selectedChildrenLen",[P.Fl],Object.getOwnPropertyDescriptor(i.prototype,"selectedChildrenLen"),i.prototype),k()(i.prototype,"selectedMaxLenth",[P.Fl],Object.getOwnPropertyDescriptor(i.prototype,"selectedMaxLenth"),i.prototype),k()(i.prototype,"toggleSeatList",[n],Object.getOwnPropertyDescriptor(i.prototype,"toggleSeatList"),i.prototype),i)},22392:function(e,t,r){"use strict";r.d(t,{Z:function(){return U}});var n,i,o,a=r(21165),s=r.n(a),c=r(34575),u=r.n(c),l=r(93913),p=r.n(l),f=r(81506),h=r.n(f),d=r(2205),v=r.n(d),y=r(78585),m=r.n(y),g=r(29754),b=r.n(g),w=r(33124),S=r.n(w),O=(r(67268),r(67294)),E=r.n(O),k=r(49408),P=r(94184),_=r.n(P),T=r(90926),D=r.n(T),x=r(93820),C=r(72781),N=r(29404),L=r(85068),R=r(59713),A=r.n(R),I=r(55622),j=A()({},L.p.CHECKOUT,802880),B=(0,I.Aw)({makeParams:function(e,t,r){return{op:"click",page_el_sn:j[r]||""}},waitForRecord:!0}),V=r(53092),H=r.n(V);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var i=b()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var U=D()(H())(n=(0,k.f3)((0,x.O)({configurationStore:C.Z}))((i=function(e){v()(r,e);var t=M(r);function r(){var e;u()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),s()(e,"doLoggerAddThen",o,h()(e)),e}return p()(r,[{key:"render",value:function(){var e=this,t=this.props.configurationStore.transacType,r=t===L.p.GRAB?"抢票/退改签须知":"购票/退改签须知";return E().createElement(E().Fragment,null,E().createElement("div",{className:H().agreeContainer},E().createElement("div",{className:H().label},E().createElement("span",null,"点击立即预订即表示您已阅读并同意"),E().createElement("span",{className:H().protocolText,"data-test":"agreement-bar-protocol",onClick:function(){return e.doLoggerAddThen("protocol",t)},"data-active":"link-gray"},"《火车票预订服务协议》"))),E().createElement("div",{className:H().viewContainer,onClick:function(){return e.doLoggerAddThen("rules",t)}},E().createElement("div",{className:H().icon}),E().createElement("div",{className:H().label},E().createElement("span",{className:_()(H().protocolText,H().view)},"点击查看"),E().createElement("span",{className:H().desc,"data-test":"agreement-bar-rules","data-active":"link-gray"},r))))}}]),r}(E().Component),o=S()(i.prototype,"doLoggerAddThen",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e,t){"protocol"===e?(0,N.v_)(N._B.TCASHIER_PROTOCOLS,{protocolName:"reserve_protocol"}):(0,N.v_)(N._B.TRAIN_RULE,{active_tab:t===L.p.GRAB?"grab":"booking"})}}}),n=i))||n)||n},84160:function(e,t,r){"use strict";r.d(t,{wp:function(){return Y},i0:function(){return W},QM:function(){return Q},GN:function(){return $},XA:function(){return X}});var n=r(48926),i=r.n(n),o=r(34575),a=r.n(o),s=r(93913),c=r.n(s),u=r(2205),l=r.n(u),p=r(78585),f=r.n(p),h=r(29754),d=r.n(h),v=r(59713),y=r.n(v),m=r(87757),g=r.n(m),b=r(67294),w=r.n(b),S=r(94184),O=r.n(S),E=r(33162),k=r(4026),P=r(77499),_=r(1010),T="pFQuk6jJ",D="j7EVzWCm",x="Vo82WyOq",C="L7C-N9W+",N="nHgSEAbj",L="HvE-Wtqo",R="FDWMy6q+",A="_2GWFb0P0",I="CfBiUBSd",j="CP6JWdAK",B="_1nCwJY4n";function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){y()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d()(e);if(t){var i=d()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f()(this,r)}}var U=0,F=1,Z="确认",z="取消",G=(0,b.memo)((function(e){var t=e.okLabel,r=e.type,n=e.onOk,i=O()(R,A,y()({},I,r===U));return w().createElement("div",{className:i,onClick:n,"data-active":"link-red"},t||Z)})),q=(0,b.memo)((function(e){var t=e.cancelLabel,r=e.type,n=e.onCancel;return r!==U?null:w().createElement("div",{className:R,onClick:n},t||z)})),K=function(e){l()(r,e);var t=M(r);function r(){var e;a()(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).onOk=i()(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.onOk){t.next=6;break}return t.next=3,e.props.onOk();case 3:if(!1!==t.sent){t.next=6;break}return t.abrupt("return");case 6:e.props.cleanupPopup();case 7:case"end":return t.stop()}}),t)}))),e.onCancel=i()(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.onCancel&&e.props.onCancel(),e.props.cleanupPopup();case 2:case"end":return t.stop()}}),t)}))),e.onClose=i()(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.onClose&&e.props.onClose(),e.props.cleanupPopup();case 2:case"end":return t.stop()}}),t)}))),e}return c()(r,[{key:"render",value:function(){var e=this.props,t=e.title,r=e.text,n=e.cancelLabel,i=e.okLabel,o=e.type,a=e.textArr,s=e.textLeft,c=!!a&&a.length>0,u=O()(x,y()({},C,!!t),y()({},N,s));return w().createElement(E.Z,{visible:!0,onBackdropClick:this.onClose},w().createElement("div",{className:T},w().createElement(_.Z,{onClick:this.onClose}),!!t&&w().createElement("div",{className:D},t),!!r&&w().createElement("div",{className:u},r),c&&w().createElement("div",{className:u},a.map((function(e,t){return w().createElement("div",{key:"confirm-text-arr-".concat(t)},e)}))),w().createElement("div",{className:L},w().createElement(q,{cancelLabel:n,onCancel:this.onCancel,type:o}),w().createElement(G,{okLabel:i,type:o,onOk:this.onOk}))))}}]),r}(w().Component);function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=e.text,n=e.onOk,i=e.onCancel,o=e.okLabel,a=e.cancelLabel,s=e.pureClose,c=e.textArr,u=e.textLeft,l=(0,k.Z)(w().createElement(K,{title:t,text:r,textArr:c,textLeft:u,onOk:n,onCancel:i,onClose:s?null:i,cleanupPopup:function(){return l()},okLabel:o,type:U,cancelLabel:a}))}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=e.text,n=e.onOk,i=e.okLabel,o=e.pureClose,a=e.textArr,s=e.textLeft,c=(0,k.Z)(w().createElement(K,{title:t,text:r,textArr:a,textLeft:s,onOk:n,onClose:o?null:n,cleanupPopup:function(){return c()},okLabel:i,type:F}))}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,r){W(H(H({},e),{},{onOk:t,onCancel:r}))}))}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,r){Y(H(H({},e),{},{onOk:t}))}))}function X(e,t){var r="<div class=".concat(j,">\n        <div class=").concat(B,"></div>\n        <div>").concat(e,"</div>\n    </div>");(0,P.Z)(r,t)}},36423:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_3transitDetailPopup"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(7711).then(r.bind(r,29016))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 29016}})},43230:function(e,t,r){"use strict";r.d(t,{Z:function(){return q}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(2205),c=r.n(s),u=r(78585),l=r.n(u),p=r(29754),f=r.n(p),h=r(67294),d=r.n(h),v=r(49408),y=r(93820),m=r(72781),g=r(521),b=r(59713),w=r.n(b),S=r(94184),O=r.n(S),E=r(54136),k={container:"ZaB6jhir",content:"i6wiSicQ",special:"v10HakLE",left:"_8APgYMq7",right:"MpT5qLT5",station:"_8w8q0yVC",time:"_3qHShfU-",colon:"zZemK33T",block:"W2LQisgo",text:"-a97zhjX",box:"WKMBBAjD",line:"duO4kD8U",schedule:"WxnS9taf",date:"GDVi0eqn",tag:"nu-ojsyG",cardTip:"veBHsXZl",loading:"NhjpC1YL",gradual:"qpou9X59"};function P(e){var t=e.type,r=e.isApiError,n=e.station,i=e.date,o=e.time,a=void 0===o?"":o,s=e.tag,c=a.split(":");return d().createElement("div",{className:k[t]},d().createElement("div",{className:k.station},n),d().createElement("div",{className:k.time},a?d().createElement(h.Fragment,null,c[0],d().createElement("span",{className:k.colon},":"),c[1]):d().createElement("span",null,"--")),d().createElement("div",{className:k.block},r?"--":d().createElement(h.Fragment,null,d().createElement("div",{className:k.date},i),i&&s&&d().createElement("div",{className:k.tag},s))))}var _=(0,h.memo)(P);function T(e){var t=e.trainData,r=e.pageElSn,n=e.isApiError,i=e.hideBorder,o=t||{},a=o.startStation,s=o.endStation,c=o.dateTag,u=o.showEtaDate,l=o.showEtaTime,p=o.showEtdDate,f=o.showEtdTime,v=o.trainTime,y=o.trainNo,m=o.showIdCard;return d().createElement(h.Fragment,null,d().createElement("div",{className:k.container},d().createElement("div",{className:O()(k.content,w()({},k.special,i||m))},d().createElement(_,{type:"left",isApiError:n,station:a,date:p,time:f,tag:c}),d().createElement(E.Z,{hasStationPop:!0,showTimeSchedule:!0,duration:v,trainNo:y,className:k.schedule,clickElSn:r}),d().createElement(_,{type:"right",isApiError:n,station:s,date:u,time:l})),m&&d().createElement("div",{className:k.cardTip},"本车次可刷二代身份证进站乘车")))}var D,x=r(24538),C=r(63038),N=r.n(C),L=r(24684),R=r(6341),A=r(36423),I={container:"teDA04Ep",list:"XIwnZux2",trainInfo:"yKbFyXU-",segmentNo:"oPFca9p-",station:"BUsoSnm9",price:"hlmEN45r",loading:"SiT6+mYQ",gradual:"_5+ZM2OXp"},j=5489507,B=(0,h.memo)((function(e){var t=e.trainInfoList,r=e.transitPopupData,n=(0,h.useState)(!1),i=N()(n,2),o=i[0],a=i[1],s=function(e){(0,R.Vr)(j),a(e)};return d().createElement("div",{className:I.container},d().createElement(L.Z,{trackingInfo:{page_el_sn:j}},d().createElement("div",{className:I.list,onClick:function(){return s(!0)}},t.map((function(e,t){var r=e.departDateShow,n=e.startStation,i=e.endStation,o=e.seat,a=e.unitAmount,s=e.trainNo;return d().createElement("div",{key:"".concat(s,"-").concat(t),className:I.trainInfo},d().createElement("span",{className:I.segmentNo},"第",t+1,"程"),d().createElement("span",{className:I.date},r),d().createElement("span",{className:I.station},n," - ",i),d().createElement("span",{className:I.seat},o),d().createElement("span",{className:I.price},"¥",a))})))),o&&d().createElement(A.Z,{data:r,onClose:s}))})),V=r(67825),H="YK9NFVeY",M="iKeq-AhD",U="_76rNmi7H",F="t85qN4wL",Z="TdAfJynj",z="lPfRITFp";function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var q=(0,v.f3)((0,y.O)({bookingSummaryStore:V.s,paymentBottomBarStore:g.K,configurationStore:m.Z}))(D=(0,v.Pi)(D=function(e){c()(r,e);var t=G(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"render",value:function(){var e,t=this.props.bookingSummaryStore,r=t.trainData,n=t.toggleAcceptNoSeat,i=t.acceptNoSeat,o=t.isTransit,a=t.singleTrainVo,s=t.trainInfoList,c=t.transitPopupData,u=(null===(e=(this.props.paymentBottomBarStore.vo||{}).priceDetailList.find((function(e){return e.priceType===x.g.TICKET})))||void 0===e?void 0:e.priceStd)||0;if(o)return d().createElement(B,{trainInfoList:s,transitPopupData:c});var l=a.seat,p=a.showAcceptNoSeat;return d().createElement(h.Fragment,null,d().createElement(T,{trainData:r,pageElSn:802834}),d().createElement("div",{className:H},l,d().createElement("span",{className:M},"¥",u),d().createElement("span",{className:U}),!!p&&d().createElement("span",{className:F,"data-test":"summary-accept-no-seat",onClick:n},"接受无座 ",d().createElement("span",{className:i?z:Z}))))}}]),r}(d().Component))||D)||D},67825:function(e,t,r){"use strict";r.d(t,{o:function(){return X},s:function(){return J}});var n,i,o,a,s,c,u,l,p,f,h,d,v,y,m,g,b,w,S,O,E,k,P,_,T,D,x,C=r(81506),N=r.n(C),L=r(2205),R=r.n(L),A=r(78585),I=r.n(A),j=r(29754),B=r.n(j),V=r(21165),H=r.n(V),M=r(93913),U=r.n(M),F=r(34575),Z=r.n(F),z=r(33124),G=r.n(z),q=(r(67268),r(22188)),K=r(91942),W=r(54328),Y=r(75048),$=r(72781);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B()(e);if(t){var i=B()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return I()(this,r)}}var X=(n=U()((function e(){Z()(this,e),H()(this,"startStation",i,this),H()(this,"endStation",o,this),H()(this,"trainNo",a,this),H()(this,"departDateShow",s,this),H()(this,"departTimeShow",c,this),H()(this,"arrivalDateShow",u,this),H()(this,"arrivalTimeShow",l,this),H()(this,"seat",p,this),H()(this,"seatType",f,this),H()(this,"dateTag",h,this),H()(this,"unitAmount",d,this),H()(this,"duration",v,this),H()(this,"ticketPrice",y,this),H()(this,"supportSeats",m,this),H()(this,"deadlineList",g,this),H()(this,"showAcceptNoSeat",b,this),H()(this,"segmentNo",w,this),H()(this,"useIdCardIn",S,this)})),i=G()(n.prototype,"startStation",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=G()(n.prototype,"endStation",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=G()(n.prototype,"trainNo",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=G()(n.prototype,"departDateShow",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=G()(n.prototype,"departTimeShow",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=G()(n.prototype,"arrivalDateShow",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=G()(n.prototype,"arrivalTimeShow",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=G()(n.prototype,"seat",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=G()(n.prototype,"seatType",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=G()(n.prototype,"dateTag",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=G()(n.prototype,"unitAmount",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=G()(n.prototype,"duration",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=G()(n.prototype,"ticketPrice",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=G()(n.prototype,"supportSeats",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=G()(n.prototype,"deadlineList",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=G()(n.prototype,"showAcceptNoSeat",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=G()(n.prototype,"segmentNo",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=G()(n.prototype,"useIdCardIn",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n),J=(O=(0,K.U)($.Z),E=q.aD.bound,k=function(e){R()(r,e);var t=Q(r);function r(){var e;Z()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),H()(e,"vo",P,N()(e)),H()(e,"trainInfoList",_,N()(e)),H()(e,"transitPopupData",T,N()(e)),H()(e,"acceptNoSeat",D,N()(e)),H()(e,"configurationStore",x,N()(e)),e}return U()(r,[{key:"singleTrainVo",get:function(){var e;return(null===(e=this.trainInfoList)||void 0===e?void 0:e[0])||this.vo}},{key:"trainData",get:function(){var e=this.singleTrainVo,t=e.startStation,r=e.endStation,n=e.dateTag,i=e.arrivalDateShow,o=e.arrivalTimeShow,a=e.departDateShow,s=e.departTimeShow,c=e.duration,u=e.trainNo,l=e.departTime,p=e.arrivalTime,f=e.useIdCardIn;return{startStation:t,endStation:r,dateTag:n,showEtaDate:i,showEtaTime:o,showEtdDate:a,showEtdTime:s,trainTime:c,trainNo:u,etdSplit:null==s?void 0:s.split(":"),etaSplit:null==o?void 0:o.split(":"),etd:l,eta:p,showIdCard:1===parseInt(f,10)}}},{key:"isTransit",get:function(){var e;return(null===(e=this.trainInfoList)||void 0===e?void 0:e.length)>1}},{key:"onNextViewObject",value:function(e){var t=e.trainInfoList;Array.isArray(t)?(0,Y.w)(this,e):(0,Y.w)(this.vo,e||{})}},{key:"toggleAcceptNoSeat",value:function(){this.acceptNoSeat=!this.acceptNoSeat}}]),r}(W.q),P=G()(k.prototype,"vo",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new X}}),_=G()(k.prototype,"trainInfoList",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=G()(k.prototype,"transitPopupData",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),D=G()(k.prototype,"acceptNoSeat",[q.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=G()(k.prototype,"configurationStore",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G()(k.prototype,"trainData",[q.Fl],Object.getOwnPropertyDescriptor(k.prototype,"trainData"),k.prototype),G()(k.prototype,"toggleAcceptNoSeat",[E],Object.getOwnPropertyDescriptor(k.prototype,"toggleAcceptNoSeat"),k.prototype),k)},11947:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(2205),c=r.n(s),u=r(78585),l=r.n(u),p=r(29754),f=r.n(p);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var d=function(e){c()(r,e);var t=h(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"doPageUpdate",value:function(){throw new Error("unimplemented")}}]),r}(r(54328).q)},13890:function(e,t,r){"use strict";r.d(t,{Z:function(){return P}});var n,i=r(34575),o=r.n(i),a=r(93913),s=r.n(a),c=r(2205),u=r.n(c),l=r(78585),p=r.n(l),f=r(29754),h=r.n(f),d=r(67294),v=r.n(d),y=r(49408),m=r(93820),g=r(53613),b=r(9786),w=r(33611),S="KOzMm5Nx",O="_6PHpMPMA";function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h()(e);if(t){var i=h()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p()(this,r)}}var k=1656561,P=(0,y.f3)((0,m.O)({couponSelectStore:w.x}))(n=(0,y.Pi)(n=function(e){u()(r,e);var t=E(r);function r(){var e;o()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.couponSelectStore,e.clickHandle=function(){(0,g.V)(k,null,e.store.toggleCouponPopup)},e}return s()(r,[{key:"render",value:function(){var e,t;if(null===(e=this.store)||void 0===e||null===(t=e.vo)||void 0===t||!t.canShowCoupon)return null;var r=this.store,n=r.showText,i=r.showCouponPopup,o=r.toggleCouponPopup,a=r.selectedCouponId,s=r.selectHandler,c=this.store.vo||{},u=c.validList,l=c.unvalidList;return v().createElement(d.Fragment,null,v().createElement("div",{className:S,"data-test":"1656561",onClick:this.clickHandle},v().createElement("p",null,"平台优惠"),v().createElement("div",{className:O},n)),i&&v().createElement(b.Z,{validList:u,unvalidList:l,couponId:a,selectHandler:s,closePopup:o}))}}]),r}(v().Component))||n)||n},33611:function(e,t,r){"use strict";r.d(t,{x:function(){return G}});var n,i,o,a,s,c,u,l,p,f,h,d,v,y=r(48926),m=r.n(y),g=r(81506),b=r.n(g),w=r(2205),S=r.n(w),O=r(78585),E=r.n(O),k=r(29754),P=r.n(k),_=r(21165),T=r.n(_),D=r(93913),x=r.n(D),C=r(34575),N=r.n(C),L=r(33124),R=r.n(L),A=(r(67268),r(87757)),I=r.n(A),j=r(22188),B=r(75048),V=r(91942),H=r(54328),M=r(11838),U=r(11947),F=r(83718);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P()(e);if(t){var i=P()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var z=(n=x()((function e(){N()(this,e),T()(this,"canShowCoupon",i,this),T()(this,"validList",o,this),T()(this,"unvalidList",a,this),T()(this,"selectedCoupon",s,this),T()(this,"discountPriceShow",c,this)})),i=R()(n.prototype,"canShowCoupon",[j.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),o=R()(n.prototype,"validList",[j.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=R()(n.prototype,"unvalidList",[j.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=R()(n.prototype,"selectedCoupon",[j.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=R()(n.prototype,"discountPriceShow",[j.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n),G=(u=(0,V.U)(U.Z),l=j.aD.bound,p=j.aD.bound,f=function(e){S()(n,e);var t,r=Z(n);function n(){var e;N()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=r.call.apply(r,[this].concat(i)),T()(e,"showCouponPopup",h,b()(e)),e.isDoNotUse=!1,T()(e,"vo",d,b()(e)),T()(e,"updateStore",v,b()(e)),e}return x()(n,[{key:"onNextViewObject",value:function(e){e=e||{},(0,B.w)(this.vo,e)}},{key:"selectedCouponId",get:function(){var e;return null===(e=this.vo.selectedCoupon)||void 0===e?void 0:e.couponId}},{key:"showText",get:function(){if(this.vo.discountPriceShow)return"已减".concat(this.vo.discountPriceShow,"元");var e=this.vo.validList.length,t=this.vo.unvalidList.length;return e>0?"你有".concat(e,"张无门槛券可使用"):"你有".concat(e+t,"张无门槛券")}},{key:"toggleCouponPopup",value:function(){this.showCouponPopup=!this.showCouponPopup}},{key:"selectHandler",value:(t=m()(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isDoNotUse=!t,this.vo.selectedCoupon=t,(0,F.y)(),e.next=5,this.updateStore.doPageUpdate({source:M.xi.COUPON});case 5:(0,F.v)(),this.toggleCouponPopup();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),n}(H.q),h=R()(f.prototype,"showCouponPopup",[j.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=R()(f.prototype,"vo",[j.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new z}}),v=R()(f.prototype,"updateStore",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R()(f.prototype,"selectedCouponId",[j.Fl],Object.getOwnPropertyDescriptor(f.prototype,"selectedCouponId"),f.prototype),R()(f.prototype,"showText",[j.Fl],Object.getOwnPropertyDescriptor(f.prototype,"showText"),f.prototype),R()(f.prototype,"toggleCouponPopup",[l],Object.getOwnPropertyDescriptor(f.prototype,"toggleCouponPopup"),f.prototype),R()(f.prototype,"selectHandler",[p],Object.getOwnPropertyDescriptor(f.prototype,"selectHandler"),f.prototype),f)},57028:function(e,t,r){"use strict";var n=r(67154),i=r.n(n),o=r(6479),a=r.n(o),s=r(67294),c=r.n(s),u=r(22882),l=r(9164),p=r(44968),f=r(27325),h=["src","background","lazy","children"],d=["src","innerRef","resizeWidth","ctx","quality","preloadResourceName","forceSkipCDN"];function v(e){var t=e.src,r=e.background,n=e.lazy,o=e.children,s=a()(e,h);return r?c().createElement("div",i()({style:{backgroundImage:"url(".concat(t,")")}},s),o):n?c().createElement(u.Z,i()({src:t},s)):c().createElement(l.Z,i()({src:t},s))}t.Z=(0,s.memo)((0,f.Z)((function(e){var t=e.src,r=e.innerRef,n=e.resizeWidth,o=e.ctx,u=e.quality,l=void 0===u?80:u,f=(e.preloadResourceName,e.forceSkipCDN),h=a()(e,d);if(!t)return c().createElement(s.Fragment,null);var y=f?t:(0,p.FT)(t,{resizeWidth:n,quality:l,webpEnable:o.webpEnable});return c().createElement(v,i()({},h,{ref:r,src:y}))})))},38005:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"dynamic_GotoApp"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(4343).then(r.bind(r,16720))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 16720}},{isCloseSpinner:!0})},99349:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1app_share"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(8320).then(r.bind(r,82337))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 82337}},{timeout:300,isCloseSpinner:!0})},37668:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1share_native"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(1312).then(r.bind(r,37578))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 37578}},{isCloseSpinner:!0,timeout:300})},57068:function(e,t,r){"use strict";r.d(t,{Z:function(){return ie}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(2205),c=r.n(s),u=r(78585),l=r.n(u),p=r(29754),f=r.n(p),h=r(67294),d=r.n(h),v=(r(45697),r(49408)),y=r(38533),m=r(59738),g=r(30209),b=r(66197),w=r(53955);function S(e){var t=e.ctx||(0,w.d)();return d().createElement(w.Z.Provider,{value:t},e.children)}var O,E=r(59713),k=r.n(E),P=r(33124),_=r.n(P),T=r(94184),D=r.n(T),x=r(24788),C=r(96521),N=r(65077),L="jvVVFQTB",R="_1jEsgCwd",A="+cd5MS7v",I="o66Fn2Ec",j="_8yvLPUQJ",B="jOOoTBTT",V="_5lWtf8BM";function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var M="_oc_h5_isfirsterror",U=(O=function(e){c()(r,e);var t=H(r);function r(){var e;i()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={refreshing:!1,enableRefresh:!1,showType:2,leftSecond:9,isFirsrtError:!1},e}return a()(r,[{key:"componentDidMount",value:function(){var e=this;if(x.Cp(),(0,N.XY)(),sessionStorage.getItem(M))var t=setInterval((function(){var r=e.state.leftSecond-1;e.setState({leftSecond:r}),r<=0&&(e.setState({enableRefresh:!0}),clearInterval(t))}),1e3);else sessionStorage.setItem(M,"1"),this.setState({leftSecond:0,enableRefresh:!0,isFirsrtError:!0})}},{key:"onClick",value:function(){!this.state.refreshing&&this.state.enableRefresh&&(this.setState({refreshing:!0}),location.reload())}},{key:"render",value:function(){var e,t=this.state,r=t.refreshing,n=t.enableRefresh,i=t.leftSecond,o=D()(j,(e={},k()(e,B,!n),k()(e,V,r),e)),a="重新加载";return i>0&&(a="重新加载("+i+"s)"),d().createElement("div",{className:D()(L,R)},d().createElement("div",{className:A}),d().createElement("p",{className:I},"页面正在加载中，请稍后"),d().createElement("div",{className:o,onClick:this.onClick},a))}}]),r}(d().Component),_()(O.prototype,"onClick",[C.Z],Object.getOwnPropertyDescriptor(O.prototype,"onClick"),O.prototype),O),F=r(48926),Z=r.n(F),z=r(87757),G=r.n(z),q=r(99433),K=r(79072),W=r(37668),Y=r(99349);function $(e){var t=e.shareInfo;return(0,h.useEffect)((function(){var e=function(){var e=Z()(G().mark((function e(){var n,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(902).then(r.bind(r,10902));case 2:if(n=e.sent,i=n.default,o=n.ShareType,i){e.next=7;break}return e.abrupt("return");case 7:i.getInstance().prepareShareSafe(t,o.WECHAT_SESSION).catch((function(){}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),null}function Q(e){var t=e.shareInfo;return K.ZP.isNativePlatform?(0,q.yC)(K.ZP.version,"5.0.0")>=0?d().createElement(Y.Z,{shareInfo:t}):d().createElement(W.Z,{shareInfo:t}):d().createElement($,{shareInfo:t})}var X=(0,h.memo)(Q);function J(e){var t=e.isAddInvisibleChar,r=e.invisibleCharCount,n=void 0===r?200:r;return t?d().createElement("div",{style:{height:0}},"​".repeat(n)):null}var ee,te=r(38005);function re(){return d().createElement("script",{dangerouslySetInnerHTML:{__html:"(function () {\n    var ua = navigator.userAgent || navigator.vendor || window.opera;\n    if (!window.pinbridge || !ua.match(/phh_(android|ios)_version/i)) {\n        return;\n    }\n    window.pinbridge.callNative('JSUIControl', 'hideLoading');\n})();"}})}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var ie=(0,v.f3)("store")(ee=(0,v.Pi)(ee=function(e){c()(r,e);var t=ne(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"componentDidMount",value:function(){(0,m.g)();var e=this.props.store.renderError;e&&(0,b.Z)(e.errorMsg||"系统繁忙，请稍后再试")}},{key:"clientRender",value:function(){var e=this.props,t=e.shareInfo,r=e.shareNativeMap,n=this.props,i=n.isShowGotoApp,o=n.gotoAppStyle,a=(0,y.zT)().isNativePlatform;return d().createElement(d().Fragment,null,!a&&i&&d().createElement(te.Z,{style:o}),t&&d().createElement(X,{shareInfo:t,shareNativeMap:r}))}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.store;if(r&&r.serviceRenderError)return d().createElement(U,null);var n=r.isFinishInitLoading;return d().createElement(S,{ctx:r.$ctx},d().createElement(J,{isAddInvisibleChar:r.$ctx.platform.isIOS}),t,n&&d().createElement(g.eA,null),d().createElement(re,null),this.clientRender())}}]),r}(d().Component))||ee)||ee},27604:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"1_login_pop_content"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(6281).then(r.bind(r,974))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 974}})},53777:function(e,t,r){"use strict";r.d(t,{Z:function(){return ge}});var n,i,o,a,s,c,u,l,p,f,h,d,v,y,m,g,b,w,S,O,E,k,P,_,T,D,x,C,N,L,R=r(48926),A=r.n(R),I=r(21165),j=r.n(I),B=r(34575),V=r.n(B),H=r(93913),M=r.n(H),U=r(81506),F=r.n(U),Z=r(2205),z=r.n(Z),G=r(78585),q=r.n(G),K=r(29754),W=r.n(K),Y=r(33124),$=r.n(Y),Q=(r(67268),r(87757)),X=r.n(Q),J=r(22188),ee=r(66197),te=r(53527),re=r(91942),ne=r(54328),ie=r(29960),oe=r(29404),ae=r(86010),se=r(11947),ce=r(83718),ue=r(521),le=r(70435),pe=r(84160),fe=r(28085),he=r(83714),de=r(57686),ve=r(11838),ye=r(24246);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W()(e);if(t){var i=W()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return q()(this,r)}}var ge=(n=(0,re.U)(se.Z),i=(0,re.U)(le.Z),o=(0,re.U)(ue.K),a=J.aD.bound,s=J.aD.bound,c=J.aD.bound,u=J.aD.bound,l=J.aD.bound,p=J.aD.bound,f=J.aD.bound,h=J.aD.bound,d=J.aD.bound,v=J.aD.bound,y=J.aD.bound,m=J.aD.bound,g=J.aD.bound,b=J.aD.bound,w=J.aD.bound,S=function(e){z()(c,e);var t,r,n,i,o,a,s=me(c);function c(){var e;V()(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=s.call.apply(s,[this].concat(r)),j()(e,"updateStore",O,F()(e)),j()(e,"r12306LoginStore",E,F()(e)),j()(e,"paymentBottomBarStore",k,F()(e)),j()(e,"showLoginPop",P,F()(e)),j()(e,"selectSkipLogin",_,F()(e)),j()(e,"pwdValue",T,F()(e)),j()(e,"accountValue",D,F()(e)),j()(e,"isAgreeProtocol",x,F()(e)),j()(e,"showVerifyPopup",C,F()(e)),j()(e,"verifyPopupText",N,F()(e)),j()(e,"accountList",L,F()(e)),e.loginSuccessCallback=null,e.verifyParamsFun=null,e}return M()(c,[{key:"$service",get:function(){return this.__$service=this.__$service||new ie.Z,this.__$service}},{key:"loginParams",get:function(){return{enCrhName:(0,fe.H)(this.accountValue),enCrhPassword:(0,fe.H)(this.pwdValue),pageSN:(0,te.kd)()}}},{key:"referPageSn",get:function(){return(0,de.XX)("refer_page_sn")}},{key:"accountChange",value:function(e){this.accountValue=e}},{key:"pwdChange",value:function(e){this.pwdValue=e}},{key:"toggleAgreeProtocol",value:function(){this.isAgreeProtocol=!this.isAgreeProtocol}},{key:"getLoginAccountData",value:(a=A()(X().mark((function e(){var t,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$service.queryAccountList();case 2:t=e.sent,r=t.accountList,this.accountList=r||[];case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"openLoginPop",value:(o=A()(X().mark((function e(t,r,n){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.accountValue=t||this.accountValue||"",e.next=3,this.getLoginAccountData();case 3:this.showPopup(),this.loginSuccessCallback=r,this.verifyParamsFun=n;case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return o.apply(this,arguments)})},{key:"closePopup",value:function(){this.showLoginPop=!1}},{key:"showPopup",value:function(){this.showLoginPop=!0}},{key:"skipLoginHandler",value:(i=A()(X().mark((function e(){var t,r,n,i=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]&&i[0],(0,ce.y)(),null!==(t=this.r12306LoginStore)&&void 0!==t&&null!==(r=t.vo)&&void 0!==r&&r.account&&!n||(this.selectSkipLogin=!0),e.next=5,this.updateStore.doPageUpdate({source:ve.xi.SKIP_LOGIN_CHANGE});case 5:(0,ce.v)(),this.closePopup();case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"autoLogin",value:function(){var e,t=this;if(this.accountValue){var r=(null===(e=this.accountList)||void 0===e?void 0:e.find((function(e){return e.trainAccountName===t.accountValue})))||{};this.doLoginHandle(r.trainAccountId,!0)}}},{key:"setAccount",value:function(e){this.accountValue=e||this.accountValue,this.r12306LoginStore.setAccount(e||""),this.paymentBottomBarStore.setAccount(e||"")}},{key:"clearAccount",value:function(e){null==e||e(),this.accountChange(""),this.pwdChange("")}},{key:"doLogin",value:(n=A()(X().mark((function e(t,r){var n,i,o,a,s=this;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ye.U)({trainAccountId:t,isAuto:r,accountValue:this.accountValue,pwdValue:this.pwdValue,service:this.__$service});case 2:if(null!=(n=e.sent)&&n.isLogined&&(this.setAccount(n.crhName),this.loginSuccessHandler()),!(null!=n&&n.isClearSuccess||null!=n&&n.isClearCancel)){e.next=7;break}return this.clearAccount(null==n?void 0:n.callback),e.abrupt("return");case 7:null!=n&&n.isAllowSkipLogin&&(0,pe.i0)({title:"身份核验",text:"您的12306账号需要进行短信核验，您可使用免登录购票或进行短信核验",cancelLabel:"短信核验",okLabel:"免登录购票",onOk:function(){return s.skipLoginHandler()},onCancel:function(){var e,t;return(0,oe.v_)("tcashier_train_checkout.html?_t_timestamp=tcashier_mobile",{mobile:null===(e=s.accountValue)||void 0===e?void 0:e.substring((null===(t=s.accountValue)||void 0===t?void 0:t.length)-4),sms_code:666,account:s.accountValue})},pureClose:!0}),(null==n?void 0:n.type)===ae.U.SKIP_LOGIN&&null!=n&&n.isOnOk&&this.skipLoginHandler(),null!=n&&n.isForwardLoginFail&&(i=this.r12306LoginStore.configurationStore||{},o=i.endDateTimes,a=i.departDateTimes,(0,oe.v_)("tcashier_login_fail.html",{depart_date:null==a?void 0:a[0],endDate:null==o?void 0:o[0],source:"login_fail"}));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"loginSuccessHandler",value:function(){var e=this.verifyParamsFun(),t=e.success,r=e.params;t?(this.loginSuccessCallback(r),this.closePopup()):this.closePopup()}},{key:"doLoginHandle",value:(r=A()(X().mark((function e(t,r){return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAgreeProtocol){e.next=3;break}return(0,ee.Z)(he.ET.NOT_AGREE),e.abrupt("return");case 3:return e.next=5,this.doLogin(t,r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"doSubmit",value:(t=A()(X().mark((function e(){var t,r,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,he.o)(this.accountValue,this.pwdValue),r=t.isValid,n=t.msg,!r){e.next=6;break}return e.next=4,this.doLoginHandle();case 4:e.next=7;break;case 6:(0,ee.Z)(n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),c}(ne.q),O=$()(S.prototype,"updateStore",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=$()(S.prototype,"r12306LoginStore",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=$()(S.prototype,"paymentBottomBarStore",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=$()(S.prototype,"showLoginPop",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=$()(S.prototype,"selectSkipLogin",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=$()(S.prototype,"pwdValue",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),D=$()(S.prototype,"accountValue",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=$()(S.prototype,"isAgreeProtocol",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=$()(S.prototype,"showVerifyPopup",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=$()(S.prototype,"verifyPopupText",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=$()(S.prototype,"accountList",[J.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$()(S.prototype,"accountChange",[a],Object.getOwnPropertyDescriptor(S.prototype,"accountChange"),S.prototype),$()(S.prototype,"pwdChange",[s],Object.getOwnPropertyDescriptor(S.prototype,"pwdChange"),S.prototype),$()(S.prototype,"toggleAgreeProtocol",[c],Object.getOwnPropertyDescriptor(S.prototype,"toggleAgreeProtocol"),S.prototype),$()(S.prototype,"getLoginAccountData",[u],Object.getOwnPropertyDescriptor(S.prototype,"getLoginAccountData"),S.prototype),$()(S.prototype,"openLoginPop",[l],Object.getOwnPropertyDescriptor(S.prototype,"openLoginPop"),S.prototype),$()(S.prototype,"closePopup",[p],Object.getOwnPropertyDescriptor(S.prototype,"closePopup"),S.prototype),$()(S.prototype,"showPopup",[f],Object.getOwnPropertyDescriptor(S.prototype,"showPopup"),S.prototype),$()(S.prototype,"skipLoginHandler",[h],Object.getOwnPropertyDescriptor(S.prototype,"skipLoginHandler"),S.prototype),$()(S.prototype,"autoLogin",[d],Object.getOwnPropertyDescriptor(S.prototype,"autoLogin"),S.prototype),$()(S.prototype,"setAccount",[v],Object.getOwnPropertyDescriptor(S.prototype,"setAccount"),S.prototype),$()(S.prototype,"clearAccount",[y],Object.getOwnPropertyDescriptor(S.prototype,"clearAccount"),S.prototype),$()(S.prototype,"doLogin",[m],Object.getOwnPropertyDescriptor(S.prototype,"doLogin"),S.prototype),$()(S.prototype,"loginSuccessHandler",[g],Object.getOwnPropertyDescriptor(S.prototype,"loginSuccessHandler"),S.prototype),$()(S.prototype,"doLoginHandle",[b],Object.getOwnPropertyDescriptor(S.prototype,"doLoginHandle"),S.prototype),$()(S.prototype,"doSubmit",[w],Object.getOwnPropertyDescriptor(S.prototype,"doSubmit"),S.prototype),S)},24246:function(e,t,r){"use strict";r.d(t,{U:function(){return T}});var n=r(48926),i=r.n(n),o=r(59713),a=r.n(o),s=r(87757),c=r.n(s),u=r(53527),l=r(96237),p=r(28085),f=r(83714),h=r(82469),d=r(83718),v=r(84160),y=r(3025),m=r(56893),g=r(86010);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=e.viewObject||{},r=t.onOk,n=t.onCancel;return(r||{}).type===g.U.CLEAR||(null==n?void 0:n.type)===g.U.CLEAR?function(e){var t=e||{},r=t.message,n=t.onOk,i=t.onCancel;return new Promise((function(t,o){(0,v.i0)(w(w({},e),{},{text:r||"",onOk:function(){return t({isClearSuccess:1,callback:n})},onCancel:function(){return o({isClearCancel:1,callback:i})}}))}))}((0,y.XO)(e)):(0,y.pb)(e)}function O(e){var t=e.accountValue,r=e.pwdValue;return{enCrhName:(0,p.H)(t),enCrhPassword:(0,p.H)(r),pageSN:(0,u.kd)()}}function E(e){return k.apply(this,arguments)}function k(){return(k=i()(c().mark((function e(t){var r,n,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trainAccountId,n=t.isAuto,i=t.accountValue,o=t.pwdValue,a=t.service,(0,d.y)(n?"自动登录中":""),e.next=4,a.doLogin({trainAccountId:r,loginParams:O({accountValue:i,pwdValue:o})});case 4:return s=e.sent,(0,d.v)(),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return(null==e?void 0:e.loginStatus)===h.uw.LOGIN}function _(e,t){var r=t.crhUserName,n=t.accountValue,i=e.errorCode;if(i===f.Hu.MSG)return{isAllowSkipLogin:!0};if(i===f.Hu.FAIL)return{isForwardLoginFail:!0};var o=(0,m.U)({data:e,crhUserName:r||n}).errorPayloadVo;return o?S(o):((0,l.e)({errorMsg:"login response no errorPayload",stores:{errorCode:i}}),(0,v.wp)({text:(null==e?void 0:e.errorMsg)||f.ET.LOGING,okLabel:"知道了",pureClose:!0}),{})}function T(e){return D.apply(this,arguments)}function D(){return(D=i()(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:if(!P(r=e.sent)){e.next=5;break}return e.abrupt("return",w({isLogined:1},r));case 5:return e.prev=5,e.next=8,_(r,t);case 8:if(null==(n=e.sent)||!n.isFaceSuccess){e.next=11;break}return e.abrupt("return",T(w(w({},t),{},{isAuto:!0})));case 11:return e.abrupt("return",n);case 14:return e.prev=14,e.t0=e.catch(5),e.abrupt("return",(0,m.G)(e.t0,!1));case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}},83718:function(e,t,r){"use strict";r.d(t,{v:function(){return P},y:function(){return k}});var n=r(59713),i=r.n(n),o=r(63038),a=r.n(o),s=r(67294),c=r.n(s),u=r(94184),l=r.n(u),p=r(4026),f="w6VCU9RF",h="HYUcilRZ",d="IZrvc8KG",v="qYirjabr",y="_99-+Jahh",m="Rz9FbbJ9",g="EvGdUXuH",b=null,w=null,S=null;function O(){var e=(0,s.useState)(!1),t=a()(e,2),r=t[0],n=t[1],o=(0,s.useState)(""),u=a()(o,2),p=u[0],S=u[1];b=n,w=S;var O=l()(h,i()({},g,!!p));return r?c().createElement("div",{className:f},c().createElement("div",{className:O},c().createElement("div",{className:d}),c().createElement("div",{className:v},c().createElement("div",{className:y})),c().createElement("div",{className:m},p||""))):null}function E(){clearTimeout(S),S=null}function k(e){w&&b&&(w(e),b(!0),E(),S=setTimeout((function(){S=null}),1e4))}function P(){b&&(b(!1),E())}(0,p.Z)(c().createElement(O,null))},24878:function(e,t,r){"use strict";r.d(t,{ZP:function(){return G}});var n=r(34575),i=r.n(n),o=r(93913),a=r.n(o),s=r(2205),c=r.n(s),u=r(78585),l=r.n(u),p=r(29754),f=r.n(p),h=r(59713),d=r.n(h),v=r(67294),y=r.n(v),m=r(49408),g=r(94184),b=r.n(g),w=r(90926),S=r.n(w),O=r(93820),E=r(64663),k=r(52391),P=r(63038),_=r.n(P),T=r(54268),D=r(57028),x="WzM3D8+f",C="XDTnXr-L",N="EW601HBy";var L=(0,m.Pi)((function(e){var t=e.text,r=e.className,n=(0,v.useState)(!1),i=_()(n,2),o=i[0],a=i[1];return(0,v.useEffect)((function(){o||(a(!0),setTimeout((function(){return a(!1)}),2e3))}),[]),t&&o?y().createElement("div",{className:b()(x,r)},y().createElement(D.Z,{src:(0,T.H)("/order_checkout/iconcoupon.png"),className:C}),y().createElement("div",{className:N}),"购票最高返10元"):null})),R=r(53613),A=r(51941),I=r(31458),j=r(12065);var B,V,H=(0,m.Pi)((function(e){var t=e.paymentBottomBarStore,r=t.paymentPopupVisible,n=t.orderParams,i=t.paymentShowCallback,o=t.grabTicketInfo,a=t.reserveResultVisible,s=t.reserveParams,c=t.reserveShowCallback,u=t.handleApiError,l=t.showPaymentPopup,p=t.closeReservePopup;return y().createElement(v.Fragment,null,r&&y().createElement(I.Z,{orderParams:n,finishCallback:i,grabTicketInfo:o}),a&&y().createElement(j.Z,{reserveParams:s,finishCallback:c,payCallback:l,handleApiError:u,closePopup:p}))})),M=r(521),U=r(45128),F=r.n(U);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var i=f()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var z=(B={},d()(B,A.iU.CHECKOUT,2622550),d()(B,A.iU.GRAB,2635940),B),G=S()(F())(V=(0,m.f3)((0,O.O)({paymentBottomBarStore:M.K}))(V=(0,m.Pi)(V=function(e){c()(r,e);var t=Z(r);function r(){var e;i()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).clickDetail=function(){var t=e.props.paymentBottomBarStore,r=t.toggleDetailPopup,n=t.configurationStore;(0,R.V)(z[n.transacType]),r()},e.clickPayButton=function(){var t=e.props.paymentBottomBarStore,r=t.onPayBtnClick;t.showDetailPopup&&e.clickDetail(),r()},e}return a()(r,[{key:"render",value:function(){var e=this.props.paymentBottomBarStore,t=e.payBtnStatus,r=e.showTipContent,n=e.showDetailPopup,i=e.showDetailText,o=e.isChange,a=e.configurationStore,s=this.props.paymentBottomBarStore.vo||{},c=s.totalPrice,u=s.totalLabel,l=s.payLabel,p=s.showSR,f=s.successRate,h=s.discountText,m=s.priceDetailList,g=s.btnIcon,w=a.configData,S=b()(F().button,d()({},F().smallButton,!o)),O=b()(F().detail,n?[F().down]:[F().up]);return y().createElement(v.Fragment,null,y().createElement("div",{className:F().container},y().createElement(E.ZP,{contents:r}),n&&y().createElement(k.Z,{data:m,onClose:this.clickDetail}),y().createElement("div",{className:F().content},y().createElement(L,{text:null==w?void 0:w.couponCashbackTxt}),y().createElement("div",{className:F().amount},y().createElement("div",{className:F().amountContainer},y().createElement("div",{className:F().amountTop},u&&y().createElement("div",{className:F().amountLabel},u),y().createElement("div",{className:F().amountNumber},y().createElement("span",{className:F().amountYuanMark},"￥"),y().createElement("span",{className:F().price},c),p&&h&&y().createElement("span",{className:F().discount},h))),p&&y().createElement("div",{className:F().srContainer},"预估成功率 ",y().createElement("span",{className:F().srText},f)),!p&&h&&y().createElement("span",{className:b()(F().discount,F().disBottom)},h)),i&&y().createElement("span",{className:O,onClick:this.clickDetail},"明细")),y().createElement("div",{className:S,"data-test":"payment-bottom-button",onClick:this.clickPayButton},g&&y().createElement("span",{className:F().icon},""),t===A.yD.PAYING?"请稍候":l))),y().createElement(H,{paymentBottomBarStore:this.props.paymentBottomBarStore}))}}]),r}(y().Component))||V)||V)||V},521:function(e,t,r){"use strict";r.d(t,{y:function(){return Ee},K:function(){return ke}});var n,i,o,a,s,c,u,l,p,f,h,d,v,y,m,g,b,w,S,O,E,k,P,_,T,D,x,C,N,L,R,A,I,j=r(59713),B=r.n(j),V=r(48926),H=r.n(V),M=r(81506),U=r.n(M),F=r(2205),Z=r.n(F),z=r(78585),G=r.n(z),q=r(29754),K=r.n(q),W=r(21165),Y=r.n(W),$=r(93913),Q=r.n($),X=r(34575),J=r.n(X),ee=r(33124),te=r.n(ee),re=(r(67268),r(87757)),ne=r.n(re),ie=r(22188),oe=r(91942),ae=r(54328),se=r(39307),ce=r(56893),ue=r(86010),le=r(70051),pe=r(85068),fe=r(51941),he=r(11838),de=r(75048),ve=r(72781),ye=r(64663),me=r(84160),ge=r(35989),be=r(29404);function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){B()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K()(e);if(t){var i=K()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return G()(this,r)}}var Ee=(n=Q()((function e(){J()(this,e),Y()(this,"totalPrice",i,this),Y()(this,"discountText",o,this),this.orderAmount=0,this.totalLabel="",this.payLabel="",this.showSR=!1,this.successRate="",this.startStation="",this.endStation="",this.currentCrhName="",Y()(this,"alterSeatTypes",a,this),Y()(this,"bookType",s,this),Y()(this,"hasChildTicket",c,this),Y()(this,"hasStudentTicket",u,this),Y()(this,"hasStudentPassenger",l,this),Y()(this,"ifShowRemind",p,this),Y()(this,"remindInfo",f,this),Y()(this,"priceDetailList",h,this),Y()(this,"isSelectElectronicSeat",d,this)})),i=te()(n.prototype,"totalPrice",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=te()(n.prototype,"discountText",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=te()(n.prototype,"alterSeatTypes",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=te()(n.prototype,"bookType",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),c=te()(n.prototype,"hasChildTicket",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=te()(n.prototype,"hasStudentTicket",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=te()(n.prototype,"hasStudentPassenger",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=te()(n.prototype,"ifShowRemind",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=te()(n.prototype,"remindInfo",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=te()(n.prototype,"priceDetailList",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=te()(n.prototype,"isSelectElectronicSeat",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n),ke=(v=(0,oe.U)(ve.Z),y=ie.aD.bound,m=ie.aD.bound,g=ie.aD.bound,b=ie.aD.bound,w=ie.aD.bound,S=ie.aD.bound,O=ie.aD.bound,E=ie.aD.bound,k=function(e){Z()(o,e);var t,r,n,i=Oe(o);function o(){var e;J()(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=i.call.apply(i,[this].concat(r)),Y()(e,"configurationStore",P,U()(e)),Y()(e,"payBtnStatus",_,U()(e)),Y()(e,"showDetailPopup",T,U()(e)),Y()(e,"vo",D,U()(e)),Y()(e,"paymentPopupVisible",x,U()(e)),Y()(e,"orderParams",C,U()(e)),Y()(e,"paymentShowCallback",N,U()(e)),Y()(e,"reserveResultVisible",L,U()(e)),Y()(e,"reserveParams",R,U()(e)),Y()(e,"reserveShowCallback",A,U()(e)),Y()(e,"showVerifyPopup",I,U()(e)),e.verifyPopupText="",e.faceScene=null,e.faceSuccessCallback=null,e.checkNeedIncludeStudent=function(){return e.configurationStore.ifStudentTicket&&!e.vo.hasStudentPassenger},e.checkStudentTicketValid=function(){var t,r=e.configurationStore,n=r.configData,i=r.checkIsInStuHoliday,o=r.checkIsInValidSeats,a=e.vo.hasStudentTicket&&!i(),s=e.vo.hasStudentTicket&&!o(),c="";a?c="学生票优惠时间为：".concat(null===(t=n.dateInfo)||void 0===t?void 0:t.stuDurationShow,"，请重新选择出发日期或为选中的学生乘客直接购买全价成人票。"):s&&(c="学生票仅支持购买：".concat(n.stuSeatsName,"。当前选择了不支持的座席，请返回修改座席或购买全价成人票。"));return{isNotValidDate:a,isNotValidSeat:s,confirmText:c}},e}return Q()(o,[{key:"onPayBtnClick",value:function(){throw new Error("unimplemented")}},{key:"onNextViewObject",value:function(e){(0,de.w)(this.vo,e)}},{key:"grabTicketInfo",get:function(){var e=this.vo;return{startStation:e.startStation,endStation:e.endStation,totalPrice:e.totalPrice}}},{key:"isChange",get:function(){return this.configurationStore.transacType===fe.iU.CHANGE}},{key:"isGrab",get:function(){return this.configurationStore.transacType===fe.iU.GRAB}},{key:"isNightOrder",get:function(){return this.configurationStore.transacType===fe.iU.CHECKOUT&&this.vo.bookType===pe._i.NIGHT}},{key:"showTipContent",get:function(){var e,t,r,n,i=[],o=this.vo,a=o.hasChildTicket,s=o.hasStudentTicket,c=a&&s,u=this.vo.alterSeatTypes.some((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return le.Xe.includes(e.seat_type)})),l=(null===(e=this.skipLoginStore)||void 0===e||null===(t=e.vo)||void 0===t?void 0:t.hasSkipLogin)||!1,p=(null===(r=this.skipVerifyStore)||void 0===r||null===(n=r.vo)||void 0===n?void 0:n.hasSkipVerify)||!1,f="CHECKOUT";if(this.isChange?f="CHANGE":(this.isGrab||this.isNightOrder||this.vo.isSelectElectronicSeat)&&(f="GRAB"),c||s||a||u){var h="";u&&(h=l||p?"_LOWER_BERTH_SLEEP":"_SLEEP");var d="";c?d="_CHILD_STUDENT":a?d="_CHILD":s&&(d="_STUDENT");var v=ye.N_["".concat(f).concat(h).concat(d,"_PRICE")];v&&i.push(v)}return i}},{key:"showDetailText",get:function(){return this.vo.totalPrice>0&&this.configurationStore.transacType!==fe.iU.CHANGE&&this.vo.priceDetailList.length>0}},{key:"setAccount",value:function(e){this.vo.currentCrhName=e||""}},{key:"closeVerifyPopup",value:function(e){this.showVerifyPopup=!1,e&&location.reload()}},{key:"handleApiError",value:(n=H()(ne().mark((function e(t){var r,n,i,o,a,s,c,u,l,p,f,h,d=this,v=arguments;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:location.reload,e.prev=1,n=this.vo.currentCrhName,e.next=5,(0,se.kr)(t,n);case 5:if(null==(i=e.sent)||!i.isAllowSkipLogin){e.next=9;break}return(0,me.wp)({title:"占座不成功",text:"12306账号暂不可用，建议使用免登录购票服务或更换账号重试",okLabel:"免登录购票",pureClose:!0,onOk:function(){return d.loginPopupStore.skipLoginHandler(!0)}}),e.abrupt("return");case 9:if(null==i||!i.isFaceSuccess){e.next=11;break}return e.abrupt("return",null==r?void 0:r());case 11:if(null!=i&&i.isFaceSmsVerify&&null!=i&&i.fromCloseBtn&&location.reload(),null==i||!i.isVerifyRefresh){e.next=15;break}return null===(o=this.pickListPopupStore)||void 0===o||null===(a=o.showPopup)||void 0===a||a.call(o),e.abrupt("return");case 15:if(null==i||!i.isNeedCompletePassenger){e.next=18;break}return null===(s=this.completePassengerHandler)||void 0===s||s.call(this),e.abrupt("return");case 18:if(u=(c=i||{}).type,l=c.isOnOk,u!==ue.U.SKIP_LOGIN||!l){e.next=22;break}return this.loginPopupStore.skipLoginHandler(!0),e.abrupt("return");case 22:if(u!==ue.U.SKIP_VERIFY||!l){e.next=27;break}return(0,ge.Z)(1),e.next=26,this.updateStore.doPageUpdate({source:he.xi.SKIP_VERIFY_CHANGE});case 26:return e.abrupt("return");case 27:if(null==i||!i.isForwardReserveFail){e.next=31;break}return p=this.configurationStore,f=p.endDateTimes,h=p.departDateTimes,(0,be.v_)("tcashier_login_fail.html",{depart_date:null==h?void 0:h[0],endDate:null==f?void 0:f[0],source:"reserve_fail"}),e.abrupt("return");case 31:return e.abrupt("return",i);case 34:return e.prev=34,e.t0=e.catch(1),e.abrupt("return",(0,ce.G)(e.t0,!0));case 37:case"end":return e.stop()}}),e,this,[[1,34]])}))),function(e){return n.apply(this,arguments)})},{key:"setPayBtnStatus",value:function(e){this.payBtnStatus=e}},{key:"toggleDetailPopup",value:function(){this.showDetailPopup=!this.showDetailPopup}},{key:"closeReservePopup",value:function(){this.reserveResultVisible=!1}},{key:"showReservePopup",value:(r=H()(ne().mark((function e(t){var r,n=this;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.configurationStore.transacType,this.reserveParams=Se(Se({},t),{},{transacType:r}),this.reserveResultVisible=!0,e.next=5,new Promise((function(e){n.reserveShowCallback=e}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"showPaymentPopup",value:(t=H()(ne().mark((function e(t){var r,n=this;return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.configurationStore.transacType,this.orderParams=Se(Se({},t),{},{transacType:r}),this.paymentPopupVisible=!0,e.next=5,new Promise((function(e){n.paymentShowCallback=e}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(ae.q),P=te()(k.prototype,"configurationStore",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=te()(k.prototype,"payBtnStatus",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return fe.yD.DEFAULT}}),T=te()(k.prototype,"showDetailPopup",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=te()(k.prototype,"vo",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ee}}),x=te()(k.prototype,"paymentPopupVisible",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=te()(k.prototype,"orderParams",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),N=te()(k.prototype,"paymentShowCallback",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=te()(k.prototype,"reserveResultVisible",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=te()(k.prototype,"reserveParams",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A=te()(k.prototype,"reserveShowCallback",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=te()(k.prototype,"showVerifyPopup",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),te()(k.prototype,"setAccount",[y],Object.getOwnPropertyDescriptor(k.prototype,"setAccount"),k.prototype),te()(k.prototype,"closeVerifyPopup",[m],Object.getOwnPropertyDescriptor(k.prototype,"closeVerifyPopup"),k.prototype),te()(k.prototype,"handleApiError",[g],Object.getOwnPropertyDescriptor(k.prototype,"handleApiError"),k.prototype),te()(k.prototype,"setPayBtnStatus",[b],Object.getOwnPropertyDescriptor(k.prototype,"setPayBtnStatus"),k.prototype),te()(k.prototype,"toggleDetailPopup",[w],Object.getOwnPropertyDescriptor(k.prototype,"toggleDetailPopup"),k.prototype),te()(k.prototype,"closeReservePopup",[S],Object.getOwnPropertyDescriptor(k.prototype,"closeReservePopup"),k.prototype),te()(k.prototype,"showReservePopup",[O],Object.getOwnPropertyDescriptor(k.prototype,"showReservePopup"),k.prototype),te()(k.prototype,"showPaymentPopup",[E],Object.getOwnPropertyDescriptor(k.prototype,"showPaymentPopup"),k.prototype),k)},66525:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"1_picklist_pop_up"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(432).then(r.bind(r,84904))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 84904}},{isCloseSpinner:!0})},87896:function(e,t,r){"use strict";r.d(t,{J:function(){return Oe}});var n=r(48926),i=r.n(n),o=r(21165),a=r.n(o),s=r(34575),c=r.n(s),u=r(93913),l=r.n(u),p=r(81506),f=r.n(p),h=r(2205),d=r.n(h),v=r(78585),y=r.n(v),m=r(29754),g=r.n(m),b=r(33124),w=r.n(b),S=(r(67268),r(27361)),O=r.n(S),E=r(87757),k=r.n(E),P=r(22188),_=r(66197),T=r(41859),D=r(96237),x=r(91942),C=r(54328),N=r(72781),L=r(3025),R=r(30023),A=r(85068),I=r(16932),j=r(35989),B=r(70435),V=r(82192),H=r(55692),M=r(92272),U=r(59713),F=r.n(U),Z=r(38232);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){F()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e){return{list:(e.frequentPassengerList||[]).map((function(e,t){var r=parseInt(e.validateStatus),n=e.mobileValidateStatus===Z.k.PASSED,i=1===parseInt(e.selectable);return G(G({},e),{},{originIndex:t,mobileVerified:n,validateStatus:r,selectable:!0,passengerVerified:i,verifyless:!i||!n,disabledSelect:r===Z.$.FAILED})})),login:{loginStatus:e.loginStatus,crhName:e.crhName,memberStatus:e.crhMemberStatus},idCardForbidden:!O()(e,"passengerAddable",!0),otherCardForbidden:!O()(e,"otherCardPassengerAddable",!0),errorPayloadVo:null==e?void 0:e.errorPayloadVo}}var K={list:[],login:{}};function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Y,$,Q,X,J,ee,te,re,ne,ie,oe,ae,se,ce,ue,le,pe,fe,he,de,ve,ye,me,ge="api/mayflower/crh/get_passenger_list_with_status",be="api/mayflower/crh/refresh",we=function(e){d()(o,e);var t,r,n=W(o);function o(){return c()(this,o),n.apply(this,arguments)}return l()(o,[{key:"fetchListAndStatus",value:(r=i()(k().mark((function e(t){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncQuerypost({url:ge,risk:!0,defaultValue:K,params:t});case 2:return r=e.sent,e.abrupt("return",q(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"refreshListAndStatus",value:(t=i()(k().mark((function e(t){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncQuerypost({url:be,risk:!0,defaultValue:K,params:t});case 2:return r=e.sent,e.abrupt("return",q(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),o}(M.b);function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Oe=(Y=(0,x.U)(B.Z),$=(0,x.U)(N.Z),Q=(0,x.U)(V.n),X=P.aD.bound,J=P.aD.bound,ee=P.aD.bound,te=P.aD.bound,re=P.aD.bound,ne=P.aD.bound,ie=P.aD.bound,oe=P.aD.bound,ae=P.aD.bound,se=P.aD.bound,ce=function(e){d()(u,e);var t,r,n,o,s=Se(u);function u(){var e;c()(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=s.call.apply(s,[this].concat(r))).originIsSkipVerify=!1,a()(e,"visible",ue,f()(e)),a()(e,"isSkipVerify",le,f()(e)),a()(e,"showVerifyPopup",pe,f()(e)),a()(e,"fPassengerList",fe,f()(e)),a()(e,"idCardForbidden",he,f()(e)),a()(e,"otherCardForbidden",de,f()(e)),e.verifyPopupData={},a()(e,"r12306LoginStore",ve,f()(e)),a()(e,"configurationStore",ye,f()(e)),a()(e,"selectedPassengersStore",me,f()(e)),e.asyncLocalSkipVeriy=function(){I.Z.setItem(R.k2.IF_OPEN_SKIP_VERIFY,e.isSkipVerify?Date.now():0)},e}return l()(u,[{key:"$service",get:function(){return this.__$service=this.__$service||new we,this.__$service}},{key:"skipVerifyInfo",get:function(){return O()(this.configurationStore,"configData.skipVerifyInfo")||{}}},{key:"suppertSkipVerify",get:function(){return this.configurationStore.transacType===A.p.CHECKOUT&&this.skipVerifyInfo.isGray}},{key:"params",get:function(){return{scene:this.configurationStore.isTransit?1:0}}},{key:"skipVerifyLimited",get:function(){return this.configurationStore.pickListSkipVerify||this.isSkipVerify}},{key:"skipVerifyHasChanged",get:function(){return this.originIsSkipVerify!==this.isSkipVerify}},{key:"initPopup",value:(o=i()(k().mark((function e(t){var r,n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.c)();case 2:r=e.sent,n=this.suppertSkipVerify&&r,this.isSkipVerify=n,this.originIsSkipVerify=n,!this.isSkipVerify&&this.skipVerifyLimited&&this.changeSkipVerify(!0),this.clearVerifylessPassenger(),this.visible=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"showPopup",value:(n=i()(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchLoginAndPassengers();case 2:e.sent&&this.initPopup(!0);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"closePopup",value:function(){this.visible=!1}},{key:"clearVerifylessPassenger",value:function(){if(!this.skipVerifyLimited){var e=this.selectedPassengersStore,t=e.draftOperations,r=e.deletePassengerDraft,n=(0,H.$Z)(t,this.fPassengerList),i=n.isVerifyless,o=n.verifylessPassengers;i&&(0,T.k)({stores:o,subOp:"PickListPopup clearVerifylessPassenger"}),i&&o.forEach(r)}}},{key:"changeSkipVerify",value:function(e){this.isSkipVerify=e,this.clearVerifylessPassenger()}},{key:"initVerifyPopup",value:function(e,t){this.verifyPopupData={passengerData:e,selectCallback:t},this.showVerifyPopup=!0}},{key:"closeVerifyPopup",value:function(){this.showVerifyPopup=!1}},{key:"fetchLoginAndPassengers",value:(r=i()(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$service.fetchListAndStatus(this.params);case 2:if(null==(t=e.sent)||!t.errorPayloadVo){e.next=6;break}return(0,L.pb)(null==t?void 0:t.errorPayloadVo),e.abrupt("return",!1);case 6:if(!t.isApiError){e.next=10;break}return(0,D.e)({errorMsg:"query passengers no errorPayload",stores:{data:t}}),(0,_.Z)("获取乘车人列表失败"),e.abrupt("return",!0);case 10:return this._updateLoginAndPassengers(t),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"doSync",value:(t=i()(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$service.refreshListAndStatus(this.params);case 2:if(null==(t=e.sent)||!t.errorPayloadVo){e.next=6;break}return(0,L.pb)(null==t?void 0:t.errorPayloadVo),e.abrupt("return");case 6:if(!t.isApiError){e.next=10;break}return(0,D.e)({errorMsg:"refresh response no errorPayload",stores:{data:t}}),(0,_.Z)("同步失败"),e.abrupt("return");case 10:this._updateLoginAndPassengers(t);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_updateLoginAndPassengers",value:function(e){var t=e.login,r=e.list,n=e.idCardForbidden,i=e.otherCardForbidden;this.fPassengerList=r,this.idCardForbidden=n,this.otherCardForbidden=i,this.r12306LoginStore.updateLoginStatus(t),this.configurationStore.is12306Member=!!t.memberStatus}}]),u}(C.q),ue=w()(ce.prototype,"visible",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),le=w()(ce.prototype,"isSkipVerify",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=w()(ce.prototype,"showVerifyPopup",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fe=w()(ce.prototype,"fPassengerList",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),he=w()(ce.prototype,"idCardForbidden",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),de=w()(ce.prototype,"otherCardForbidden",[P.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=w()(ce.prototype,"r12306LoginStore",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=w()(ce.prototype,"configurationStore",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=w()(ce.prototype,"selectedPassengersStore",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w()(ce.prototype,"skipVerifyLimited",[P.Fl],Object.getOwnPropertyDescriptor(ce.prototype,"skipVerifyLimited"),ce.prototype),w()(ce.prototype,"skipVerifyHasChanged",[P.Fl],Object.getOwnPropertyDescriptor(ce.prototype,"skipVerifyHasChanged"),ce.prototype),w()(ce.prototype,"initPopup",[X],Object.getOwnPropertyDescriptor(ce.prototype,"initPopup"),ce.prototype),w()(ce.prototype,"showPopup",[J],Object.getOwnPropertyDescriptor(ce.prototype,"showPopup"),ce.prototype),w()(ce.prototype,"closePopup",[ee],Object.getOwnPropertyDescriptor(ce.prototype,"closePopup"),ce.prototype),w()(ce.prototype,"clearVerifylessPassenger",[te],Object.getOwnPropertyDescriptor(ce.prototype,"clearVerifylessPassenger"),ce.prototype),w()(ce.prototype,"changeSkipVerify",[re],Object.getOwnPropertyDescriptor(ce.prototype,"changeSkipVerify"),ce.prototype),w()(ce.prototype,"initVerifyPopup",[ne],Object.getOwnPropertyDescriptor(ce.prototype,"initVerifyPopup"),ce.prototype),w()(ce.prototype,"closeVerifyPopup",[ie],Object.getOwnPropertyDescriptor(ce.prototype,"closeVerifyPopup"),ce.prototype),w()(ce.prototype,"fetchLoginAndPassengers",[oe],Object.getOwnPropertyDescriptor(ce.prototype,"fetchLoginAndPassengers"),ce.prototype),w()(ce.prototype,"doSync",[ae],Object.getOwnPropertyDescriptor(ce.prototype,"doSync"),ce.prototype),w()(ce.prototype,"_updateLoginAndPassengers",[se],Object.getOwnPropertyDescriptor(ce.prototype,"_updateLoginAndPassengers"),ce.prototype),ce)},55692:function(e,t,r){"use strict";r.d(t,{Qb:function(){return s},UW:function(){return c},y0:function(){return u},RR:function(){return l},ez:function(){return p},$Z:function(){return f}});var n=r(27361),i=r.n(n),o=r(28444),a=r(9709);function s(e){var t=e.draftOperations,r=e.passengerItem,n=void 0===r?{}:r,o=n.id,a=n.selected,s=n.withChildren,c=t[o];return{draftSelected:i()(c,"selected",a),draftWithChildren:i()(c,"withChildren",s),childrenList:i()(c,"childrenList")||[],ticketType:i()(c,"passenger.ticketType")}}function c(e){var t=e.selectedList,r=e.fPassengerList,n=new Set((r||[]).map((function(e){return e?e.id:-1}))),i=(t||[]).filter((function(e){return e&&!n.has(e.id)})).map((function(e){return e.id}));return{isConflict:i.length>0,conflictPassengers:i}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return Object.keys(e).forEach((function(r){var n=e[r],i=n.passenger&&n.passenger.ticketType===a.lL.ADULT;n.selected&&i&&t.push(n.passenger)})),t.sort((function(e,t){return i()(e,"originIndex",0)-i()(t,"originIndex",0)}))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(e||[]).sort((function(e,r){if(e&&r){var n=t.findIndex((function(t){return e&&t&&t.id===e.id}))>-1,o=t.findIndex((function(e){return r&&e&&e.id===r.id}))>-1;if(n&&!o)return-1;if(!n&&o)return 1}return i()(e,"originIndex",0)-i()(r,"originIndex",0)}))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1,r=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n]||{},s=i.passenger||{},c=s.passengerUserType,u=s.ticketType,l=i.selected&&u===a.lL.ADULT,p=i.selected&&c===o.SS.CHILD,f=(i.childrenList||[]).find((function(e){return e.selected}));if(f&&!l)return"儿童不能单独乘车，为确保出行安全，请先勾选该证件对应成人";r=r||p,t=t||l}return r&&!t?"儿童不能单独乘车，为确保出行安全，需有成人同行":""}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],n=function(n){if(!e.hasOwnProperty(n))return"continue";var i=e[n]||{},o=parseInt(n,10),a=t.find((function(e){return e.id===o}));i.selected&&(!a||null!=a&&a.verifyless)&&r.push(n)};for(var i in e)n(i);return{isVerifyless:r.length>0,verifylessPassengers:r}}},96160:function(e,t,r){"use strict";var n=r(67294),i=r.n(n),o=r(94184),a=r.n(o),s=r(24684),c=r(48865),u=(0,n.memo)((function(e){var t=e.text,r=e.desc,n=e.btnText,o=e.className,u=e.onClick,l=e.pageElSn;return i().createElement(s.Z,{doImpr:!!l,trackingInfo:{page_el_sn:l}},i().createElement("div",{className:a()(c.Z.loginBar,o)},i().createElement("div",{className:c.Z.content},i().createElement("div",null,t||"登录12306账号",i().createElement("div",{className:c.Z.text},r||"铁路局要求实名制购票"))),i().createElement("div",{className:c.Z.btn,onClick:u},n||"立即登录")))}));t.Z=u},32129:function(e,t,r){"use strict";r.d(t,{Z:function(){return H}});var n,i=r(59713),o=r.n(i),a=r(48926),s=r.n(a),c=r(34575),u=r.n(c),l=r(93913),p=r.n(l),f=r(2205),h=r.n(f),d=r(78585),v=r.n(d),y=r(29754),m=r.n(y),g=r(67154),b=r.n(g),w=r(87757),S=r.n(w),O=r(67294),E=r.n(O),k=r(49408),P=r(94184),_=r.n(P),T=r(93820),D=r(29404),x=r(30023),C=r(16932),N=r(70435),L=r(96160),R=r(48865);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v()(this,r)}}var I={gray:{text:"铁路局规定必须登录12306购票",desc:"出票更快捷 退改更方便",btnText:"立即登录"},default:{text:"未登录12306账号",desc:"出票更快捷 购票得积分",btnText:"去登录"}},j="已登录12306账号",B="登录后购票更快",V=(0,O.memo)((function(e){var t=e.account,r=e.showTip,n=e.loginGray;if(t)return E().createElement(E().Fragment,null,E().createElement("div",{className:_()(R.Z.content,R.Z.minIcon)},j),E().createElement("div",{className:R.Z.operate},t));var i=n?I.gray:I.default;return E().createElement(E().Fragment,null,E().createElement(L.Z,b()({},i,{className:R.Z.loginBar})),r&&E().createElement("div",{className:R.Z.tip},B,E().createElement("div",{className:R.Z.triangle})))})),H=(0,k.f3)((0,T.O)({r12306LoginStore:N.Z}))(n=(0,k.Pi)(n=function(e){h()(n,e);var t,r=A(n);function n(){var e;u()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).loginStore=e.props.r12306LoginStore,e.state={showTip:!1},e}return p()(n,[{key:"componentDidMount",value:(t=s()(S().mark((function e(){var t,r,n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.getItem(x.k2.SHOW_LOGIN_TIP);case 2:if(r=e.sent,!(null!==(t=this.loginStore)&&void 0!==t&&t.account||1===parseInt(r,10))){e.next=5;break}return e.abrupt("return");case 5:setTimeout((function(){n.setState({showTip:!1}),C.Z.setItem(x.k2.SHOW_LOGIN_TIP,1)}),3e3);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.loginStore||{},t=e.hideLoginBar,r=e.configurationStore,n=e.vo;if(t)return null;var i=r||{},a=i.loginGray,s=i.departDateTimes,c=i.endDateTimes,u=null==n?void 0:n.account;return E().createElement("div",{className:_()(R.Z.container,o()({},R.Z.loged,u)),onClick:function(){return(0,D.v_)(D._B.LOGIN_MANAGEMENT,{depart_date:null==s?void 0:s[0],end_date:null==c?void 0:c[0]})}},E().createElement(V,{account:u,loginGray:a,showTip:this.state.showTip}))}}]),n}(E().Component))||n)||n},70435:function(e,t,r){"use strict";r.d(t,{l:function(){return j},Z:function(){return B}});var n,i,o,a,s,c,u,l,p,f=r(81506),h=r.n(f),d=r(2205),v=r.n(d),y=r(78585),m=r.n(y),g=r(29754),b=r.n(g),w=r(21165),S=r.n(w),O=r(93913),E=r.n(O),k=r(34575),P=r.n(k),_=r(33124),T=r.n(_),D=(r(67268),r(22188)),x=r(91942),C=r(54328),N=r(30023),L=r(82469),R=r(75048),A=r(72781);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b()(e);if(t){var i=b()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var j=(n=E()((function e(){P()(this,e),S()(this,"account",i,this),S()(this,"ifSupportCandidate",o,this)})),i=T()(n.prototype,"account",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),o=T()(n.prototype,"ifSupportCandidate",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n),B=(a=(0,x.U)(A.Z),s=D.aD.bound,c=D.aD.bound,u=function(e){v()(r,e);var t=I(r);function r(){var e;P()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),S()(e,"configurationStore",l,h()(e)),S()(e,"vo",p,h()(e)),e}return E()(r,[{key:"onNextViewObject",value:function(e){(0,R.w)(this.vo,e)}},{key:"hideLoginBar",get:function(){return this.configurationStore.source===N.Hx.DDJB_PUSH}},{key:"updateLoginStatus",value:function(e){var t=e.loginStatus,r=e.crhName;t!==L.uw.LOGIN?this.vo.account="":this.vo.account=r||"已登录"}},{key:"setAccount",value:function(e){this.vo.account=e}}]),r}(C.q),l=T()(u.prototype,"configurationStore",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=T()(u.prototype,"vo",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new j}}),T()(u.prototype,"updateLoginStatus",[s],Object.getOwnPropertyDescriptor(u.prototype,"updateLoginStatus"),u.prototype),T()(u.prototype,"setAccount",[c],Object.getOwnPropertyDescriptor(u.prototype,"setAccount"),u.prototype),u)},75938:function(e,t,r){"use strict";r.d(t,{Z:function(){return B}});var n,i=r(59713),o=r.n(i),a=r(34575),s=r.n(a),c=r(93913),u=r.n(c),l=r(2205),p=r.n(l),f=r(78585),h=r.n(f),d=r(29754),v=r.n(d),y=r(67294),m=r.n(y),g=(r(45697),r(49408)),b=r(90926),w=r.n(b),S=r(93820),O=r(72781),E=r(30021),k=r(96059),P=r(9709),_=r(85068),T=r(53613),D=o()({},_.p.CHECKOUT,803053),x=o()({},_.p.CHECKOUT,802878),C=function(e){(0,T.V)(D[e])},N=function(e){(0,T.V)(x[e])},L=r(93147),R=r.n(L);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h()(this,r)}}var B=w()(R())(n=(0,g.f3)((0,S.O)({configurationStore:O.Z}))(n=(0,g.Pi)(n=function(e){p()(r,e);var t=j(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).transacType=e.props.configurationStore.transacType,e.state={showChildDesc:!1,showStuDesc:!1},e.toggleChildPopup=function(){e.setState((function(e){return I(I({},e),{},{showChildDesc:!e.showChildDesc})}))},e.toggleStuPopup=function(){e.setState((function(e){return I(I({},e),{},{showStuDesc:!e.showStuDesc})}))},e.clickHandle=function(){C(e.transacType),e.toggleChildPopup()},e.removeHandle=function(){N(e.transacType),e.props.onClickRemove()},e}return u()(r,[{key:"render",value:function(){var e=this.props.data,t=e.name,r=e.cardType,n=e.cardNo,i=e.isAccompanyChild,o=e.ticketType,a=this.props.configurationStore.configData||{},s=a.saleBeginTime,c=a.saleEndTime,u=a.dateInfo,l=a.stuSeatsName,p=this.state,f=p.showChildDesc,h=p.showStuDesc,d=i||o===P.lL.CHILD,v=o===P.lL.STUDENT;return m().createElement(y.Fragment,null,m().createElement("div",{className:R().passenger},m().createElement("div",{className:R().rowBorder},m().createElement("div",{className:R().passengerBody},m().createElement("div",{className:R().passengerRow1},m().createElement("div",{className:R().passengerName},t,P.FI[o]&&m().createElement("span",null,"(".concat(P.FI[o],")")),d&&m().createElement("span",{className:R().passengerDescInfo,onClick:this.clickHandle}),v&&m().createElement("span",{className:R().passengerDescInfo,onClick:this.toggleStuPopup}))),m().createElement("div",{className:R().passengerRow2},i?m().createElement(m().Fragment,null,m().createElement("div",{className:R().passengerDesc},"用",m().createElement("span",{className:R().passengerBold},t),"证件取票，儿童身高需在1.2~1.5米间")):m().createElement("div",{className:R().passengerDesc},"".concat(r," ").concat(n)))),this.props.hasRemoveBtn&&m().createElement("div",{className:R().passengerBtn,"data-test":"selected-passenger-remove-icon",onClick:this.removeHandle}))),f&&m().createElement(E.Z,{onClosePopup:this.toggleChildPopup,saleBeginTime:s,saleEndTime:c}),h&&m().createElement(k.Z,{onClosePopup:this.toggleStuPopup,saleBeginTime:s,saleEndTime:c,stuDurationShow:null==u?void 0:u.stuDurationShow,stuSeatsName:l}))}}]),r}(m().Component))||n)||n)||n},87319:function(e,t,r){"use strict";r.d(t,{_:function(){return W}});var n,i,o,a=r(48926),s=r.n(a),c=r(34575),u=r.n(c),l=r(93913),p=r.n(l),f=r(2205),h=r.n(f),d=r(78585),v=r.n(d),y=r(29754),m=r.n(y),g=r(27361),b=r.n(g),w=r(87757),S=r.n(w),O=r(67294),E=r.n(O),k=r(49408),P=r(41859),_=r(93820),T=r(80109),D=r(72781),x=r(75938),C=r(11947),N=r(64663),L=r(83718),R=r(87896),A=r(82192),I=r(59713),j=r.n(I),B=r(85068),V=r(53613),H=(n={},j()(n,B.p.CHECKOUT,802843),j()(n,B.p.GRAB,1055958),n),M=(i={},j()(i,B.p.CHECKOUT,802878),j()(i,B.p.GRAB,1055959),i),U=function(e){(0,V.V)(H[e])},F=function(e){(0,V.V)(M[e])},Z="V071E83C",z="Nw7OU7Lz",G="L2qMavls",q="m1oquG3C";function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v()(this,r)}}var W=(0,k.f3)((0,_.O)({selectedPassengersStore:A.n,pickListPopupStore:R.J,updateStore:C.Z,configurationStore:D.Z}))(o=(0,k.Pi)(o=function(e){h()(r,e);var t=K(r);function r(){var e;u()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).clearDraftAndPopup=function(){var t=e.props.pickListPopupStore.showPopup;(0,e.props.selectedPassengersStore.resetDraftOperations)(),t(),U(b()(e.props,"configurationStore.transacType"))},e.getTrueChildIdx=function(e,t){var r=1,n=t-1;return e.forEach((function(e,i){e.selected&&(r===t?n=i:r+=1)})),n},e.doRemoveAndSubmit=function(){var t=s()(S().mark((function t(r){var n,i,o,a,s,c,u,l;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(n=r=r||{}).id,(o=n.childIdx)>=0?(a=e.props.selectedPassengersStore.draftOperations[i]||{},s=a.passenger,c=a.withChildren,u=a.childrenList,l=e.getTrueChildIdx(u,o),u.splice(l,1),e.props.selectedPassengersStore.changeChildrenList({passenger:s,withChildren:c>0?c-1:c,childrenList:u})):e.props.selectedPassengersStore.deletePassengerDraft(r.id),(0,P.k)({stores:{ticketObj:r},subOp:"delete selected passenger"}),(0,L.y)(),t.next=7,e.props.updateStore.doPageUpdate();case 7:(0,L.v)(),F(b()(e.props,"configurationStore.transacType"));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return p()(r,[{key:"componentDidMount",value:function(){this.props.selectedPassengersStore.resetDraftOperations()}},{key:"render",value:function(){var e=this,t=(0,T.Np)(b()(this.props,"selectedPassengersStore.vo.passengers")),r=b()(this.props,"selectedPassengersStore.getTipContent"),n=r&&r(t.length)||"";return E().createElement("div",{className:Z},E().createElement(N.ZP,{contents:n}),t.map((function(t){return E().createElement(x.Z,{key:t.id+"_"+t.childIdx,data:t,hasRemoveBtn:!0,onClickRemove:function(){return e.doRemoveAndSubmit(t)}})})),E().createElement("div",{className:z,"data-test":"passenger-list-add-passenger",onClick:this.clearDraftAndPopup,"data-active":"link-red"},E().createElement("div",{className:G}),E().createElement("div",{className:q},"选择乘车人")))}}]),r}(E().Component))||o)||o},82192:function(e,t,r){"use strict";r.d(t,{j:function(){return X},n:function(){return ee}});var n,i,o,a,s,c,u,l,p,f,h,d,v,y,m=r(59713),g=r.n(m),b=r(81506),w=r.n(b),S=r(2205),O=r.n(S),E=r(78585),k=r.n(E),P=r(29754),_=r.n(P),T=r(21165),D=r.n(T),x=r(93913),C=r.n(x),N=r(34575),L=r.n(N),R=r(33124),A=r.n(R),I=(r(67268),r(27361)),j=r.n(I),B=r(22188),V=r(96237),H=r(91942),M=r(54328),U=r(75048),F=r(72781),Z=r(11947),z=r(51941),G=r(28444),q=r(9709),K=r(64663),W=r(78998);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_()(e);if(t){var i=_()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return k()(this,r)}}var X=(n=C()((function e(){L()(this,e),D()(this,"passengers",i,this)})),i=A()(n.prototype,"passengers",[B.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),n),J=!1,ee=(o=(0,H.U)(F.Z),a=(0,H.U)(Z.Z),s=B.aD.bound,c=B.aD.bound,u=B.aD.bound,l=B.aD.bound,p=B.aD.bound,f=function(e){O()(r,e);var t=Q(r);function r(){var e;L()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),D()(e,"vo",h,w()(e)),D()(e,"configurationStore",d,w()(e)),D()(e,"updateStore",v,w()(e)),D()(e,"draftOperations",y,w()(e)),e.getTipContent=function(t){return t<=1?[]:e.configurationStore.transacType===z.iU.GRAB?[K.N_.MUTI_PASSENGER]:[]},e.canAddMoreToDraft=function(t){return t=t||1,(0,W.nb)(e.draftOperations,t)},e}return C()(r,[{key:"onNextViewObject",value:function(e){(0,U.w)(this.vo,e)}},{key:"hasVerifyless",get:function(){var e;return null===(e=this.vo.passengers)||void 0===e?void 0:e.find((function(e){return!e.crhBookPass}))}},{key:"transStudentToAdult",value:function(){var e=this;Object.keys(this.draftOperations).forEach((function(t){var r=e.draftOperations[t]||{};(r.passenger||{}).passengerUserType===G.SS.STUDENT&&(r.passenger.ticketType=q.lL.ADULT)})),this.setDraftModified(!0),this.updateStore.doPageUpdate()}},{key:"changeSelect",value:function(e){var t=e.passenger,r=e.selected,n=e.studentTransAdult;t.ticketType=n?q.lL.ADULT:t.passengerUserType;var i={passenger:t,withChildren:0,selected:r,childrenList:[]};this.draftOperations[t.id]&&(i.withChildren=this.draftOperations[t.id].withChildren,i.childrenList=this.draftOperations[t.id].childrenList||[]),this._replaceOperation(i)}},{key:"_formatDraftPassenger",value:function(e){var t=e.passengerUserType||e.userTypeCode,r=e.ticketType||t;return r||(0,V.e)({errorMsg:"draftOperations ticketType不存在",stores:{passenger:e}}),$($({},e),{},{passengerName:e.passengerName||e.name,passengerCardTypeDesc:e.passengerCardTypeDesc||e.cardType,passengerCardId:e.passengerCardId||e.cardNo,passengerUserTypeDesc:e.passengerUserTypeDesc||e.userType,passengerUserType:t,ticketType:r})}},{key:"_replaceOperation",value:function(e){var t=e.withChildren,r=e.passenger,n=e.selected,i=e.childrenList,o=void 0===i?[]:i,a=this.draftOperations;this.draftOperations={},Object.assign(this.draftOperations,a),this.draftOperations[r.id]={passenger:this._formatDraftPassenger(r),withChildren:t,selected:n,childrenList:o},this.setDraftModified(!0)}},{key:"resetDraftOperations",value:function(e){var t=this;e?this.draftOperations=e:(this.draftOperations={},this.vo.passengers&&this.vo.passengers.forEach((function(e,r){e.originIndex=r;var n=t._formatDraftPassenger(e),i=t.initChildrenList(n,n.withChildren);t.draftOperations[n.id]={passenger:n,withChildren:n.withChildren,selected:!0,childrenList:i}}))),this.setDraftModified(!1)}},{key:"deletePassengerDraft",value:function(e){delete this.draftOperations[e],this.setDraftModified(!0)}},{key:"setDraftModified",value:function(e){J=e}},{key:"isDraftModified",value:function(){return J}},{key:"changeChildrenList",value:function(e){var t=e.passenger,r=e.withChildren,n=e.childrenList;this._replaceOperation({passenger:t,withChildren:r,selected:j()(this.draftOperations[t.id],"selected")||t.selected,childrenList:n||this.initChildrenList(t,r)})}},{key:"initChildrenList",value:function(e,t){for(var r=[],n=0;n<t;n++)r.push(this.initChildPassengerInfo(e));return r}},{key:"initChildPassengerInfo",value:function(e){e=e||{};var t={};return Object.assign(t,e),t.selected=!0,delete t.withChildren,delete t.childrenList,t}}]),r}(M.q),h=A()(f.prototype,"vo",[B.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new X}}),d=A()(f.prototype,"configurationStore",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=A()(f.prototype,"updateStore",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=A()(f.prototype,"draftOperations",[B.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),A()(f.prototype,"transStudentToAdult",[s],Object.getOwnPropertyDescriptor(f.prototype,"transStudentToAdult"),f.prototype),A()(f.prototype,"changeSelect",[c],Object.getOwnPropertyDescriptor(f.prototype,"changeSelect"),f.prototype),A()(f.prototype,"resetDraftOperations",[u],Object.getOwnPropertyDescriptor(f.prototype,"resetDraftOperations"),f.prototype),A()(f.prototype,"deletePassengerDraft",[l],Object.getOwnPropertyDescriptor(f.prototype,"deletePassengerDraft"),f.prototype),A()(f.prototype,"changeChildrenList",[p],Object.getOwnPropertyDescriptor(f.prototype,"changeChildrenList"),f.prototype),f)},78998:function(e,t,r){"use strict";r.d(t,{nb:function(){return i},iA:function(){return o}});var n=r(82469);function i(e,t){e=e||{};var r=0;return Object.keys(e).forEach((function(t){e[t].selected&&(r+=1+(e[t].withChildren||0))})),r+t<=n.CY}function o(e){try{e=e||{},sessionStorage.setItem(n.UD,JSON.stringify(e))}catch(e){}}},38276:function(e,t,r){"use strict";r.d(t,{Z:function(){return ie}});var n,i,o,a,s=r(48926),c=r.n(s),u=r(34575),l=r.n(u),p=r(93913),f=r.n(p),h=r(2205),d=r.n(h),v=r(78585),y=r.n(v),m=r(29754),g=r.n(m),b=r(87757),w=r.n(b),S=r(67294),O=r.n(S),E=r(49408),k=r(36792),P=r(4042),_=r(93820),T=r(72781),D=r(79072),x=r(79052),C=r(59713),N=r.n(C),L=r(85068),R=r(53613),A=(n={},N()(n,L.p.CHECKOUT,802877),N()(n,L.p.GRAB,1055952),n),I=(i={},N()(i,L.p.CHECKOUT,802876),N()(i,L.p.GRAB,1055953),i),j=(o={},N()(o,L.p.CHECKOUT,2056204),N()(o,L.p.GRAB,2056205),o),B=function(e){(0,R.V)(A[e])},V=function(e){(0,R.V)(I[e])},H=function(e){(0,R.V)(j[e])},M="_0+ISB0QS",U="gihdq8Df",F="Tg2-F-xF",Z="sqrU1R71",z="HUhPoxjO",G="_6KU1z1kr",q="wVOomYzC",K="D5pmk9ee",W="hJMZgEAG";function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var $,Q=(0,E.f3)((0,_.O)({telephoneInputStore:x.Z}))(a=(0,E.Pi)(a=function(e){d()(r,e);var t=Y(r);function r(){var e;l()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={items:[],loaded:!1},e.telStore=e.props.telephoneInputStore,e.doSelect=function(t){H(e.props.transacType),e.telStore.setShowAutoComplete(!1),e.telStore.resetCurrentMobile(t)},e.doRemove=function(t,r){r&&r.stopPropagation(),r&&r.preventDefault();var n=e.state.items||[],i=n[t];n.splice(t,1),e.setState({items:n}),e.telStore.removeMobile({mobile:i})},e.doClear=function(){e.setState({items:[]}),e.telStore.clearMobiles()},e}return f()(r,[{key:"componentDidMount",value:function(){var e=this;setTimeout(c()(w().mark((function t(){var r,n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.telStore.queryMobileHistory();case 2:r=t.sent,n=r.mobileList,e.setState({loaded:!0,items:n||[]});case 5:case"end":return t.stop()}}),t)}))),200)}},{key:"render",value:function(){var e=this,t=this.telStore,r=t.setShowAutoComplete,n=t.showAutoComplete,i=this.state,o=i.loaded,a=i.items,s=null;return n?(o?a&&a.length>0&&(s=a.map((function(t,r){return O().createElement("div",{key:t,className:G,onClick:function(){return e.doSelect(t)}},O().createElement("div",null,t),O().createElement("div",{className:q,onClick:function(t){return e.doRemove(r,t)}}))}))).push(O().createElement("div",{key:"clear-mobile",className:z,onClick:this.doClear},"清空历史")):s=O().createElement("div",{className:K},O().createElement("div",{className:W})),s?O().createElement(O().Fragment,null,O().createElement("div",{className:M,onClick:function(){return r(!1)}}),O().createElement("div",{className:U},O().createElement("div",{className:Z},s),O().createElement("div",{className:F,onClick:function(){return r(!1)}}))):null):null}}]),r}(O().Component))||a)||a,X="iCM4K3Tm",J="iWdKY6l7",ee="DxPyZxfX",te="_3M0W96Xw",re="mgawa7Bm";function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var ie=(0,E.f3)((0,_.O)({telephoneInputStore:x.Z,configurationStore:T.Z}))($=(0,E.Pi)($=function(e){d()(n,e);var t,r=ne(n);function n(){var e;l()(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.call.apply(r,[this].concat(i))).state={offsetTop:0,offsetHeight:0},e.telStore=e.props.telephoneInputStore,e.borderElem=null,e.isAndroid=!1,e.onFocus=function(){var t=e.telStore.setShowAutoComplete;B(e.props.configurationStore.transacType),t(!0),e.refreshAutoInputPos(),e.isAndroid||setTimeout((function(){document.activeElement.scrollIntoView({block:"center"})}),100)},e.onBlur=function(){setTimeout((function(){e.telStore.setShowAutoComplete(!1)}),0)},e.invokeContact=function(){V(e.props.configurationStore.transacType),(0,k.KJ)().then((function(t){t=t||{},e.telStore.resetCurrentMobile(t.mobile)})).catch((function(){}))},e.refreshAutoInputPos=function(){e.borderElem&&e.setState({offsetHeight:e.borderElem.offsetHeight,offsetTop:e.borderElem.offsetTop})},e}return f()(n,[{key:"componentDidMount",value:(t=c()(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.telStore.getLocalCacheMobile();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=this.telStore.lastOrderInput;case 5:(t=e.t0)&&this.telStore.resetCurrentMobile(t),this.refreshAutoInputPos(),this.isAndroid=(0,D.JD)(),this.isAndroid&&window.addEventListener("resize",(function(){"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName||window.setTimeout((function(){var e,t;"scrollIntoView"in document.activeElement?document.activeElement.scrollIntoView({block:"center"}):null===(e=(t=document.activeElement).scrollIntoViewIfNeeded)||void 0===e||e.call(t)}),100)}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.telStore,r=t.showNativeMobileSelect,n=t.setInputElement,i=t.mobile,o=t.onMobileChange,a=this.props.configurationStore.transacType;return O().createElement("div",{className:X,ref:function(t){e.borderElem=t}},O().createElement("div",{className:J},"手机号码"),O().createElement("div",{className:te},O().createElement(P.Z,{className:re,inputRef:function(e){return n(e)},placeholder:"用于接收短信通知",type:"tel",value:i,onChange:o,onFocus:this.onFocus,onBlur:this.onBlur})),r&&O().createElement("div",{className:ee,onClick:this.invokeContact}),O().createElement(Q,{telInputTop:this.state.offsetTop,telInputHeight:this.state.offsetHeight,transacType:a}))}}]),n}(O().Component))||$)||$},79052:function(e,t,r){"use strict";r.d(t,{Z:function(){return z}});var n=r(48926),i=r.n(n),o=r(21165),a=r.n(o),s=r(34575),c=r.n(s),u=r(93913),l=r.n(u),p=r(81506),f=r.n(p),h=r(2205),d=r.n(h),v=r(78585),y=r.n(v),m=r(29754),g=r.n(m),b=r(33124),w=r.n(b),S=(r(67268),r(87757)),O=r.n(S),E=r(22188),k=r(38533),P=r(54328),_=r(9714),T=r(30023),D=r(16932),x=r(92272);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var N,L,R,A,I,j,B,V="api/mayflower/history/query",H="api/mayflower/history/delete",M="api/mayflower/history/clear",U=function(e){d()(r,e);var t=C(r);function r(){return c()(this,r),t.apply(this,arguments)}return l()(r,[{key:"queryMobiles",value:function(){return this.post({url:V,defaultValue:{}})}},{key:"removeMobile",value:function(e){return this.post({url:H,params:e,customConfig:{skipBizErrorCheck:!0},defaultValue:{}})}},{key:"clearMobiles",value:function(){return this.post({url:M,customConfig:{skipBizErrorCheck:!0},defaultValue:{}})}}]),r}(x.b);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g()(e);if(t){var i=g()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var Z=null,z=(N=E.aD.bound,L=E.aD.bound,R=E.aD.bound,A=function(e){d()(r,e);var t=F(r);function r(){var e;c()(this,r);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).lastOrderInput=null,a()(e,"showNativeMobileSelect",I,f()(e)),a()(e,"mobile",j,f()(e)),a()(e,"showAutoComplete",B,f()(e)),e.queryMobileHistory=function(){return e.$service.queryMobiles()},e.removeMobile=function(t){e.$service.removeMobile(t)},e.clearMobiles=function(){e.$service.clearMobiles()},e.setInputElement=function(e){Z=e},e.focusInput=function(){Z&&Z.focus()},e.getLocalCacheMobile=i()(O().mark((function e(){var t,r,n,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.Z.getItem(T.k2.CHECKOUT_MOBILE_INPUT);case 2:if(!(t=e.sent)){e.next=8;break}if(r=t.time,n=t.mobile,i=(0,_.KQ)("mobileCacheTime")||216e5,!(Date.now()-r<i&&n)){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}}),e)}))),e}return l()(r,[{key:"initWithContext",value:function(e){var t=(0,k.Xf)(e.userAgent);this.showNativeMobileSelect=t.isNativePlatform&&t.isVersionGreaterThanEqual("3.17.0")}},{key:"onNextViewObject",value:function(e){this.lastOrderInput=e}},{key:"$service",get:function(){return this.__$service=this.__$service||new U,this.__$service}},{key:"resetCurrentMobile",value:function(e){this.mobile=function(e){return(e=(e=(e||"").toString()).replace(/(\+86)/g,"")).replace(/[^\d]*/g,"")}(e),D.Z.setItem(T.k2.CHECKOUT_MOBILE_INPUT,{time:Date.now(),mobile:this.mobile})}},{key:"onMobileChange",value:function(e){var t,r,n=((null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"").trim();this.resetCurrentMobile(n),this.verifyCode=((null==e||null===(r=e.target)||void 0===r?void 0:r.value)||"").trim()}},{key:"setShowAutoComplete",value:function(e){this.showAutoComplete=e}}]),r}(P.q),I=w()(A.prototype,"showNativeMobileSelect",[E.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=w()(A.prototype,"mobile",[E.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=w()(A.prototype,"showAutoComplete",[E.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w()(A.prototype,"resetCurrentMobile",[N],Object.getOwnPropertyDescriptor(A.prototype,"resetCurrentMobile"),A.prototype),w()(A.prototype,"onMobileChange",[L],Object.getOwnPropertyDescriptor(A.prototype,"onMobileChange"),A.prototype),w()(A.prototype,"setShowAutoComplete",[R],Object.getOwnPropertyDescriptor(A.prototype,"setShowAutoComplete"),A.prototype),A)},54136:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(59713),i=r.n(n),o=r(63038),a=r.n(o),s=r(67294),c=r.n(s),u=r(49408),l=r(94184),p=r.n(l),f=r(26961),h=r(53613),d={center:"N2zwb46+",text:"Uy7GhPVx",trainNo:"a1QHuEXl",box:"F-CznYFG",line:"fFPeEluH",arrow:"N8mBfOTm",label:"SdmW6ClV",change:"FbaK7RMQ",rightArrow:"ETTKUpKQ",loading:"ihktstJL",gradual:"yGgrEAY1"};var v=(0,u.Pi)((function(e){var t=e.duration,r=e.trainNo,n=e.hasStationPop,o=void 0!==n&&n,u=e.showTimeSchedule,l=e.className,v=e.clickElSn,y=e.stationTimeParams,m=(0,s.useState)(!1),g=a()(m,2),b=g[0],w=g[1],S=function(){o&&((0,h.V)(v),w(!b))};return c().createElement(c().Fragment,null,c().createElement("div",{className:p()(d.center,l),onClick:S},c().createElement("div",{className:d.text},t),c().createElement("div",{className:d.box},c().createElement("div",{className:d.line},c().createElement("i",{className:d.arrow})),u&&c().createElement("div",{className:p()(d.label,l,i()({},d.change,!!o))},"时刻表",o&&c().createElement("i",{className:d.rightArrow}))),c().createElement("div",{className:p()(d.text,d.trainNo)},c().createElement("span",{className:d.trainNoTxt},r))),b&&c().createElement(f.Z,{closePopup:S,stationTimeParams:y}))}))},64663:function(e,t,r){"use strict";r.d(t,{Sx:function(){return u},Zr:function(){return c},N_:function(){return l},ZP:function(){return p}});var n=r(67294),i=r.n(n),o=r(94184),a=r.n(o),s="Gu0T5mDl",c="退改需至车站办理，不支持线上改退签",u="根据铁路局规定，购票须提供每位乘车人手机号并核验，该乘客联系方式尚未通过核验，请您尽快完成核验",l={MUTI_SEAT:"多选座席按最高价收取，出票后按实际座席退还差价",MUTI_PASSENGER:"多个乘车人建议分开抢票，成功率更高",MULTIPLE_TIP:"多选车次、日期、座席，可大幅提高抢票成功率",CHECKOUT_CHILD_PRICE:"儿童票暂展示预估价格，实际以占座后价格为准",CHECKOUT_STUDENT_PRICE:"学生票暂展示预估价格，实际以占座后价格为准",CHECKOUT_CHILD_STUDENT_PRICE:"儿童、学生票暂展示预估价格，实际以占座后价格为准",CHECKOUT_SLEEP_PRICE:"卧铺暂按上铺票价展示，实际以占座后价格为准",CHECKOUT_LOWER_BERTH_SLEEP_PRICE:"卧铺暂按下铺票价收费，出票后按实际铺型退还差价",CHECKOUT_SLEEP_CHILD_PRICE:"儿童票暂展示预估价格，卧铺暂按上铺票价展示，实际以占座后价格为准",CHECKOUT_SLEEP_STUDENT_PRICE:"学生票暂展示预估价格，卧铺暂按上铺票价展示，实际以占座后价格为准",CHECKOUT_SLEEP_CHILD_STUDENT_PRICE:"儿童、学生票暂展示预估价格，卧铺暂按上铺票价展示，实际以占座后价格为准",GRAB_CHILD_PRICE:"儿童票暂按成人票价收费，出票后按实际票价退还差价",GRAB_STUDENT_PRICE:"学生票暂按成人票价收费，出票后按实际票价退还差价",GRAB_CHILD_STUDENT_PRICE:"儿童、学生票暂按成人票价收费，出票后按实际票价退还差价",GRAB_SLEEP_PRICE:"卧铺暂按下铺票价收费，出票后按实际铺型退还差价",GRAB_SLEEP_CHILD_PRICE:"儿童票暂按成人票价收费，卧铺暂按下铺票价收费，出票后按实际票价退还差价",GRAB_SLEEP_STUDENT_PRICE:"学生票暂按成人票价收费，卧铺暂按下铺票价收费，出票后按实际票价退还差价",GRAB_SLEEP_CHILD_STUDENT_PRICE:"儿童、学生票暂按成人票价收费，卧铺暂按下铺票价收费，出票后按实际票价退还差价",CHANGE_CHILD_PRICE:"儿童票暂按成人票价展示，以实际占座结果为准",CHANGE_STUDENT_PRICE:"学生票暂按成人票价展示，以实际占座结果为准",CHANGE_CHILD_STUDENT_PRICE:"儿童、学生票暂按成人票价展示，以实际占座结果为准",CHANGE_SLEEP_PRICE:"卧铺暂按上铺票价展示，以实际占座结果为准",CHANGE_SLEEP_CHILD_PRICE:"儿童票暂按成人票价展示，卧铺暂按上铺票价展示，以实际占座结果为准",CHANGE_SLEEP_STUDENT_PRICE:"学生票暂按成人票价展示，卧铺暂按上铺票价展示，以实际占座结果为准",CHANGE_SLEEP_CHILD_STUDENT_PRICE:"儿童、学生票暂按成人票价展示，卧铺暂按上铺票价展示，以实际占座结果为准"},p=(0,n.memo)((function(e){var t=e.contents,r=void 0===t?[]:t,n=e.className;return null!=r&&r.length?i().createElement("div",{className:a()(s,n)},r.map((function(e){return i().createElement("span",{key:"yellow-tip-".concat(e)},e)}))):null}))},30021:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"2_child_description_popup"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(4094).then(r.bind(r,71954))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 71954}})},9786:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_tcashier_couponPopup"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(5362).then(r.bind(r,45297))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 45297}})},95301:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(48926),i=r.n(n),o=r(59713),a=r.n(o),s=r(87757),c=r.n(s),u=r(67294),l=r.n(u),p=r(38871),f=r(4026),h=r(1607),d=r(79072);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=(0,p.n)({resolved:{},chunkName:function(){return"index"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(4826).then(r.bind(r,14845))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 14845}},{isCloseSpinner:!0});function g(e){return y(y({},e),{},{isFaceSmsVerify:!0})}function b(e){return w.apply(this,arguments)}function w(){return(w=i()(c().mark((function e(t){var r,n,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null===(r=t.onTextLink)||void 0===r||null===(n=r.param)||void 0===n?void 0:n.url,d.ZP.isNativePlatform||!i){e.next=4;break}return h.ZP.uniformForward(i),e.abrupt("return");case 4:return e.abrupt("return",new Promise((function(e,r){var n={onSuccess:function(){return e(g({isFaceSuccess:1}))},onError:function(){return r(g({isFaceError:1}))}},i=function(){};i=(0,f.Z)(l().createElement(m,{data:t,faceBtnProps:n,closePopup:function(t){i(),null!=t&&t.fromFace||e(g(t))}}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},31458:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1payment_popup"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(8308).then(r.bind(r,42552))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 42552}})},52391:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1priceDetailPopup"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(199).then(r.bind(r,75843))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 75843}})},12065:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1reserve_result"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(8835).then(r.bind(r,27655))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 27655}})},26961:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1station_times"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(7235).then(r.bind(r,14891))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 14891}})},96059:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"2_student_description_popup"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(5846).then(r.bind(r,47102))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 47102}})},91293:function(e,t,r){var n=r(65893),i=r(84718),o="string"==typeof n?[[e.id,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return o},t._getCss=function(){return""+n},t._insertCss=function(e){return i(o,e)}},64133:function(e,t,r){var n=r(84930),i=r(84718),o="string"==typeof n?[[e.id,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return o},t._getCss=function(){return""+n},t._insertCss=function(e){return i(o,e)}},53092:function(e,t,r){var n=r(65273),i=r(84718),o="string"==typeof n?[[e.id,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return o},t._getCss=function(){return""+n},t._insertCss=function(e){return i(o,e)}},45128:function(e,t,r){var n=r(10284),i=r(84718),o="string"==typeof n?[[e.id,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return o},t._getCss=function(){return""+n},t._insertCss=function(e){return i(o,e)}},93147:function(e,t,r){var n=r(31026),i=r(84718),o="string"==typeof n?[[e.id,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return o},t._getCss=function(){return""+n},t._insertCss=function(e){return i(o,e)}},78330:function(e,t,r){"use strict";r.d(t,{Z:function(){return ae}});function n(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function i(e,t){return e&t}function o(e,t){return e|t}function a(e,t){return e^t}function s(e,t){return e&~t}function c(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function u(e){for(var t=0;0!=e;)e&=e-1,++t;return t}var l,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function f(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=p.charAt(r>>6)+p.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=p.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=p.charAt(r>>2)+p.charAt((3&r)<<4));(3&n.length)>0;)n+="=";return n}function h(e){var t,r="",i=0,o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t){var a=p.indexOf(e.charAt(t));a<0||(0==i?(r+=n(a>>2),o=3&a,i=1):1==i?(r+=n(o<<2|a>>4),o=15&a,i=2):2==i?(r+=n(o),r+=n(a>>2),o=3&a,i=3):(r+=n(o<<2|a>>4),r+=n(15&a),i=0))}return 1==i&&(r+=n(o<<2)),r}var d,v=function(e){var t;if(void 0===l){var r="0123456789ABCDEF",n=" \f\n\r\t \u2028\u2029";for(l={},t=0;t<16;++t)l[r.charAt(t)]=t;for(r=r.toLowerCase(),t=10;t<16;++t)l[r.charAt(t)]=t;for(t=0;t<n.length;++t)l[n.charAt(t)]=-1}var i=[],o=0,a=0;for(t=0;t<e.length;++t){var s=e.charAt(t);if("="==s)break;if(-1!=(s=l[s])){if(void 0===s)throw new Error("Illegal character at offset "+t);o|=s,++a>=2?(i[i.length]=o,o=0,a=0):o<<=4}}if(a)throw new Error("Hex encoding incomplete: 4 bits missing");return i},y={decode:function(e){var t;if(void 0===d){var r="= \f\n\r\t \u2028\u2029";for(d=Object.create(null),t=0;t<64;++t)d["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)]=t;for(d["-"]=62,d._=63,t=0;t<r.length;++t)d[r.charAt(t)]=-1}var n=[],i=0,o=0;for(t=0;t<e.length;++t){var a=e.charAt(t);if("="==a)break;if(-1!=(a=d[a])){if(void 0===a)throw new Error("Illegal character at offset "+t);i|=a,++o>=4?(n[n.length]=i>>16,n[n.length]=i>>8&255,n[n.length]=255&i,i=0,o=0):i<<=6}}switch(o){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=i>>10;break;case 3:n[n.length]=i>>16,n[n.length]=i>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=y.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw new Error("RegExp out of sync");e=t[2]}return y.decode(e)}},m=1e13,g=function(){function e(e){this.buf=[+e||0]}return e.prototype.mulAdd=function(e,t){var r,n,i=this.buf,o=i.length;for(r=0;r<o;++r)(n=i[r]*e+t)<m?t=0:n-=(t=0|n/m)*m,i[r]=n;t>0&&(i[r]=t)},e.prototype.sub=function(e){var t,r,n=this.buf,i=n.length;for(t=0;t<i;++t)(r=n[t]-e)<0?(r+=m,e=1):e=0,n[t]=r;for(;0===n[n.length-1];)n.pop()},e.prototype.toString=function(e){if(10!=(e||10))throw new Error("only base 10 is supported");for(var t=this.buf,r=t[t.length-1].toString(),n=t.length-2;n>=0;--n)r+=(m+t[n]).toString().substring(1);return r},e.prototype.valueOf=function(){for(var e=this.buf,t=0,r=e.length-1;r>=0;--r)t=t*m+e[r];return t},e.prototype.simplify=function(){var e=this.buf;return 1==e.length?e[0]:this},e}(),b=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,w=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function S(e,t){return e.length>t&&(e=e.substring(0,t)+"…"),e}var O,E=function(){function e(t,r){this.hexDigits="0123456789ABCDEF",t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=r)}return e.prototype.get=function(e){if(void 0===e&&(e=this.pos++),e>=this.enc.length)throw new Error("Requesting byte offset "+e+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(e):this.enc[e]},e.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},e.prototype.hexDump=function(e,t,r){for(var n="",i=e;i<t;++i)if(n+=this.hexByte(this.get(i)),!0!==r)switch(15&i){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},e.prototype.isASCII=function(e,t){for(var r=e;r<t;++r){var n=this.get(r);if(n<32||n>176)return!1}return!0},e.prototype.parseStringISO=function(e,t){for(var r="",n=e;n<t;++n)r+=String.fromCharCode(this.get(n));return r},e.prototype.parseStringUTF=function(e,t){for(var r="",n=e;n<t;){var i=this.get(n++);r+=i<128?String.fromCharCode(i):i>191&&i<224?String.fromCharCode((31&i)<<6|63&this.get(n++)):String.fromCharCode((15&i)<<12|(63&this.get(n++))<<6|63&this.get(n++))}return r},e.prototype.parseStringBMP=function(e,t){for(var r,n,i="",o=e;o<t;)r=this.get(o++),n=this.get(o++),i+=String.fromCharCode(r<<8|n);return i},e.prototype.parseTime=function(e,t,r){var n=this.parseStringISO(e,t),i=(r?b:w).exec(n);return i?(r&&(i[1]=+i[1],i[1]+=+i[1]<70?2e3:1900),n=i[1]+"-"+i[2]+"-"+i[3]+" "+i[4],i[5]&&(n+=":"+i[5],i[6]&&(n+=":"+i[6],i[7]&&(n+="."+i[7]))),i[8]&&(n+=" UTC","Z"!=i[8]&&(n+=i[8],i[9]&&(n+=":"+i[9]))),n):"Unrecognized time: "+n},e.prototype.parseInteger=function(e,t){for(var r,n=this.get(e),i=n>127,o=i?255:0,a="";n==o&&++e<t;)n=this.get(e);if(0===(r=t-e))return i?-1:0;if(r>4){for(a=n,r<<=3;0==(128&(+a^o));)a=+a<<1,--r;a="("+r+" bit)\n"}i&&(n-=256);for(var s=new g(n),c=e+1;c<t;++c)s.mulAdd(256,this.get(c));return a+s.toString()},e.prototype.parseBitString=function(e,t,r){for(var n=this.get(e),i="("+((t-e-1<<3)-n)+" bit)\n",o="",a=e+1;a<t;++a){for(var s=this.get(a),c=a==t-1?n:0,u=7;u>=c;--u)o+=s>>u&1?"1":"0";if(o.length>r)return i+S(o,r)}return i+o},e.prototype.parseOctetString=function(e,t,r){if(this.isASCII(e,t))return S(this.parseStringISO(e,t),r);var n=t-e,i="("+n+" byte)\n";n>(r/=2)&&(t=e+r);for(var o=e;o<t;++o)i+=this.hexByte(this.get(o));return n>r&&(i+="…"),i},e.prototype.parseOID=function(e,t,r){for(var n="",i=new g,o=0,a=e;a<t;++a){var s=this.get(a);if(i.mulAdd(128,127&s),o+=7,!(128&s)){if(""===n)if((i=i.simplify())instanceof g)i.sub(80),n="2."+i.toString();else{var c=i<80?i<40?0:1:2;n=c+"."+(i-40*c)}else n+="."+i.toString();if(n.length>r)return S(n,r);i=new g,o=0}}return o>0&&(n+=".incomplete"),n},e}(),k=function(){function e(e,t,r,n,i){if(!(n instanceof P))throw new Error("Invalid tag value.");this.stream=e,this.header=t,this.length=r,this.tag=n,this.sub=i}return e.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},e.prototype.content=function(e){if(void 0===this.tag)return null;void 0===e&&(e=1/0);var t=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(t)?"false":"true";case 2:return this.stream.parseInteger(t,t+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(t,t+r,e);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);case 6:return this.stream.parseOID(t,t+r,e);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return S(this.stream.parseStringUTF(t,t+r),e);case 18:case 19:case 20:case 21:case 22:case 26:return S(this.stream.parseStringISO(t,t+r),e);case 30:return S(this.stream.parseStringBMP(t,t+r),e);case 23:case 24:return this.stream.parseTime(t,t+r,23==this.tag.tagNumber)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},e.prototype.toPrettyString=function(e){void 0===e&&(e="");var t=e+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(t+="+"),t+=this.length,this.tag.tagConstructed?t+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(t+=" (encapsulates)"),t+="\n",null!==this.sub){e+="  ";for(var r=0,n=this.sub.length;r<n;++r)t+=this.sub[r].toPrettyString(e)}return t},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},e.decodeLength=function(e){var t=e.get(),r=127&t;if(r==t)return r;if(r>6)throw new Error("Length over 48 bits not supported at position "+(e.pos-1));if(0===r)return null;t=0;for(var n=0;n<r;++n)t=256*t+e.get();return t},e.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,r=2*this.length;return e.substr(t,r)},e.decode=function(t){var r;r=t instanceof E?t:new E(t,0);var n=new E(r),i=new P(r),o=e.decodeLength(r),a=r.pos,s=a-n.pos,c=null,u=function(){var t=[];if(null!==o){for(var n=a+o;r.pos<n;)t[t.length]=e.decode(r);if(r.pos!=n)throw new Error("Content size is not correct for container starting at offset "+a)}else try{for(;;){var i=e.decode(r);if(i.tag.isEOC())break;t[t.length]=i}o=a-r.pos}catch(e){throw new Error("Exception while decoding undefined length content: "+e)}return t};if(i.tagConstructed)c=u();else if(i.isUniversal()&&(3==i.tagNumber||4==i.tagNumber))try{if(3==i.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");c=u();for(var l=0;l<c.length;++l)if(c[l].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(e){c=null}if(null===c){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+a);r.pos=a+Math.abs(o)}return new e(n,s,o,i,c)},e}(),P=function(){function e(e){var t=e.get();if(this.tagClass=t>>6,this.tagConstructed=0!=(32&t),this.tagNumber=31&t,31==this.tagNumber){var r=new g;do{t=e.get(),r.mulAdd(128,127&t)}while(128&t);this.tagNumber=r.simplify()}}return e.prototype.isUniversal=function(){return 0===this.tagClass},e.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},e}(),_=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],T=(1<<26)/_[_.length-1],D=function(){function e(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}return e.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,i=(1<<t)-1,o=!1,a="",s=this.t,c=this.DB-s*this.DB%t;if(s-- >0)for(c<this.DB&&(r=this[s]>>c)>0&&(o=!0,a=n(r));s>=0;)c<t?(r=(this[s]&(1<<c)-1)<<t-c,r|=this[--s]>>(c+=this.DB-t)):(r=this[s]>>(c-=t)&i,c<=0&&(c+=this.DB,--s)),r>0&&(o=!0),o&&(a+=n(r));return o?a:"0"},e.prototype.negate=function(){var t=R();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+U(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(t){var r=R();return this.abs().divRemTo(t,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&t.subTo(r,r),r},e.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new C(t):new N(t),this.exp(e,r)},e.prototype.clone=function(){var e=R();return this.copyTo(e),e},e.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},e.prototype.equals=function(e){return 0==this.compareTo(e)},e.prototype.min=function(e){return this.compareTo(e)<0?this:e},e.prototype.max=function(e){return this.compareTo(e)>0?this:e},e.prototype.and=function(e){var t=R();return this.bitwiseTo(e,i,t),t},e.prototype.or=function(e){var t=R();return this.bitwiseTo(e,o,t),t},e.prototype.xor=function(e){var t=R();return this.bitwiseTo(e,a,t),t},e.prototype.andNot=function(e){var t=R();return this.bitwiseTo(e,s,t),t},e.prototype.not=function(){for(var e=R(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},e.prototype.shiftLeft=function(e){var t=R();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},e.prototype.shiftRight=function(e){var t=R();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},e.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+c(this[e]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=u(this[r]^t);return e},e.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},e.prototype.setBit=function(e){return this.changeBit(e,o)},e.prototype.clearBit=function(e){return this.changeBit(e,s)},e.prototype.flipBit=function(e){return this.changeBit(e,a)},e.prototype.add=function(e){var t=R();return this.addTo(e,t),t},e.prototype.subtract=function(e){var t=R();return this.subTo(e,t),t},e.prototype.multiply=function(e){var t=R();return this.multiplyTo(e,t),t},e.prototype.divide=function(e){var t=R();return this.divRemTo(e,t,null),t},e.prototype.remainder=function(e){var t=R();return this.divRemTo(e,null,t),t},e.prototype.divideAndRemainder=function(e){var t=R(),r=R();return this.divRemTo(e,t,r),[t,r]},e.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),o=M(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new C(t):t.isEven()?new L(t):new N(t);var a=[],s=3,c=r-1,u=(1<<r)-1;if(a[1]=n.convert(this),r>1){var l=R();for(n.sqrTo(a[1],l);s<=u;)a[s]=R(),n.mulTo(l,a[s-2],a[s]),s+=2}var p,f,h=e.t-1,d=!0,v=R();for(i=U(e[h])-1;h>=0;){for(i>=c?p=e[h]>>i-c&u:(p=(e[h]&(1<<i+1)-1)<<c-i,h>0&&(p|=e[h-1]>>this.DB+i-c)),s=r;0==(1&p);)p>>=1,--s;if((i-=s)<0&&(i+=this.DB,--h),d)a[p].copyTo(o),d=!1;else{for(;s>1;)n.sqrTo(o,v),n.sqrTo(v,o),s-=2;s>0?n.sqrTo(o,v):(f=o,o=v,v=f),n.mulTo(v,a[p],o)}for(;h>=0&&0==(e[h]&1<<i);)n.sqrTo(o,v),f=o,o=v,v=f,--i<0&&(i=this.DB-1,--h)}return n.revert(o)},e.prototype.modInverse=function(t){var r=t.isEven();if(this.isEven()&&r||0==t.signum())return e.ZERO;for(var n=t.clone(),i=this.clone(),o=M(1),a=M(0),s=M(0),c=M(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),r?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),r?(s.isEven()&&c.isEven()||(s.addTo(this,s),c.subTo(t,c)),s.rShiftTo(1,s)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);n.compareTo(i)>=0?(n.subTo(i,n),r&&o.subTo(s,o),a.subTo(c,a)):(i.subTo(n,i),r&&s.subTo(o,s),c.subTo(a,c))}return 0!=i.compareTo(e.ONE)?e.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},e.prototype.pow=function(e){return this.exp(e,new x)},e.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},e.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=_[_.length-1]){for(t=0;t<_.length;++t)if(r[0]==_[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<_.length;){for(var n=_[t],i=t+1;i<_.length&&n<T;)n*=_[i++];for(n=r.modInt(n);t<i;)if(n%_[t++]==0)return!1}return r.millerRabin(e)},e.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},e.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},e.prototype.fromString=function(t,r){var n;if(16==r)n=4;else if(8==r)n=3;else if(256==r)n=8;else if(2==r)n=1;else if(32==r)n=5;else{if(4!=r)return void this.fromRadix(t,r);n=2}this.t=0,this.s=0;for(var i=t.length,o=!1,a=0;--i>=0;){var s=8==n?255&+t[i]:H(t,i);s<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==a?this[this.t++]=s:a+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,(a+=n)>=this.DB&&(a-=this.DB))}8==n&&0!=(128&+t[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},e.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},e.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},e.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(e/this.DB),a=this.s<<r&this.DM,s=this.t-1;s>=0;--s)t[s+o+1]=this[s]>>n|a,a=(this[s]&i)<<r;for(s=o-1;s>=0;--s)t[s]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},e.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&o)<<i,t[a-r]=this[a]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},e.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},e.prototype.multiplyTo=function(t,r){var n=this.abs(),i=t.abs(),o=n.t;for(r.t=o+i.t;--o>=0;)r[o]=0;for(o=0;o<i.t;++o)r[o+n.t]=n.am(0,i[o],r,o,0,n.t);r.s=0,r.clamp(),this.s!=t.s&&e.ZERO.subTo(r,r)},e.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},e.prototype.divRemTo=function(t,r,n){var i=t.abs();if(!(i.t<=0)){var o=this.abs();if(o.t<i.t)return null!=r&&r.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=R());var a=R(),s=this.s,c=t.s,u=this.DB-U(i[i.t-1]);u>0?(i.lShiftTo(u,a),o.lShiftTo(u,n)):(i.copyTo(a),o.copyTo(n));var l=a.t,p=a[l-1];if(0!=p){var f=p*(1<<this.F1)+(l>1?a[l-2]>>this.F2:0),h=this.FV/f,d=(1<<this.F1)/f,v=1<<this.F2,y=n.t,m=y-l,g=null==r?R():r;for(a.dlShiftTo(m,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),e.ONE.dlShiftTo(l,g),g.subTo(a,a);a.t<l;)a[a.t++]=0;for(;--m>=0;){var b=n[--y]==p?this.DM:Math.floor(n[y]*h+(n[y-1]+v)*d);if((n[y]+=a.am(0,b,n,m,0,l))<b)for(a.dlShiftTo(m,g),n.subTo(g,n);n[y]<--b;)n.subTo(g,n)}null!=r&&(n.drShiftTo(l,r),s!=c&&e.ZERO.subTo(r,r)),n.t=l,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&e.ZERO.subTo(n,n)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.exp=function(t,r){if(t>4294967295||t<1)return e.ONE;var n=R(),i=R(),o=r.convert(this),a=U(t)-1;for(o.copyTo(n);--a>=0;)if(r.sqrTo(n,i),(t&1<<a)>0)r.mulTo(i,o,n);else{var s=n;n=i,i=s}return r.revert(n)},e.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},e.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=M(r),i=R(),o=R(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(e)+a},e.prototype.fromRadix=function(t,r){this.fromInt(0),null==r&&(r=10);for(var n=this.chunkSize(r),i=Math.pow(r,n),o=!1,a=0,s=0,c=0;c<t.length;++c){var u=H(t,c);u<0?"-"==t.charAt(c)&&0==this.signum()&&(o=!0):(s=r*s+u,++a>=n&&(this.dMultiply(i),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(r,a)),this.dAddOffset(s,0)),o&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(t,r,n){if("number"==typeof r)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),o,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(e.ONE.shiftLeft(t-1),this);else{var i=[],a=7&t;i.length=1+(t>>3),r.nextBytes(i),a>0?i[0]&=(1<<a)-1:i[0]=0,this.fromString(i,256)}},e.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},e.prototype.changeBit=function(t,r){var n=e.ONE.shiftLeft(t);return this.bitwiseTo(n,r,n),n},e.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},e.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},e.prototype.multiplyLowerTo=function(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;for(var i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},e.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},e.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},e.prototype.millerRabin=function(t){var r=this.subtract(e.ONE),n=r.getLowestSetBit();if(n<=0)return!1;var i=r.shiftRight(n);(t=t+1>>1)>_.length&&(t=_.length);for(var o=R(),a=0;a<t;++a){o.fromInt(_[Math.floor(Math.random()*_.length)]);var s=o.modPow(i,this);if(0!=s.compareTo(e.ONE)&&0!=s.compareTo(r)){for(var c=1;c++<n&&0!=s.compareTo(r);)if(0==(s=s.modPowInt(2,this)).compareTo(e.ONE))return!1;if(0!=s.compareTo(r))return!1}}return!0},e.prototype.square=function(){var e=R();return this.squareTo(e),e},e.prototype.gcda=function(e,t){var r=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(r.compareTo(n)<0){var i=r;r=n,n=i}var o=r.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)t(r);else{o<a&&(a=o),a>0&&(r.rShiftTo(a,r),n.rShiftTo(a,n));var s=function(){(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),r.compareTo(n)>=0?(r.subTo(n,r),r.rShiftTo(1,r)):(n.subTo(r,n),n.rShiftTo(1,n)),r.signum()>0?setTimeout(s,0):(a>0&&n.lShiftTo(a,n),setTimeout((function(){t(n)}),0))};setTimeout(s,10)}},e.prototype.fromNumberAsync=function(t,r,n,i){if("number"==typeof r)if(t<2)this.fromInt(1);else{this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(e.ONE.shiftLeft(t-1),o,this),this.isEven()&&this.dAddOffset(1,0);var a=this,s=function(){a.dAddOffset(2,0),a.bitLength()>t&&a.subTo(e.ONE.shiftLeft(t-1),a),a.isProbablePrime(r)?setTimeout((function(){i()}),0):setTimeout(s,0)};setTimeout(s,0)}else{var c=[],u=7&t;c.length=1+(t>>3),r.nextBytes(c),u>0?c[0]&=(1<<u)-1:c[0]=0,this.fromString(c,256)}},e}(),x=function(){function e(){}return e.prototype.convert=function(e){return e},e.prototype.revert=function(e){return e},e.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},e.prototype.sqrTo=function(e,t){e.squareTo(t)},e}(),C=function(){function e(e){this.m=e}return e.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},e.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),N=function(){function e(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}return e.prototype.convert=function(e){var t=R();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(D.ZERO)>0&&this.m.subTo(t,t),t},e.prototype.revert=function(e){var t=R();return e.copyTo(t),this.reduce(t),t},e.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),L=function(){function e(e){this.m=e,this.r2=R(),this.q3=R(),D.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e)}return e.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=R();return e.copyTo(t),this.reduce(t),t},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}();function R(){return new D(null)}function A(e,t){return new D(e,t)}var I="undefined"!=typeof navigator;I&&"Microsoft Internet Explorer"==navigator.appName?(D.prototype.am=function(e,t,r,n,i,o){for(var a=32767&t,s=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,l=s*c+u*a;i=((c=a*c+((32767&l)<<15)+r[n]+(1073741823&i))>>>30)+(l>>>15)+s*u+(i>>>30),r[n++]=1073741823&c}return i},O=30):I&&"Netscape"!=navigator.appName?(D.prototype.am=function(e,t,r,n,i,o){for(;--o>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a}return i},O=26):(D.prototype.am=function(e,t,r,n,i,o){for(var a=16383&t,s=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,l=s*c+u*a;i=((c=a*c+((16383&l)<<14)+r[n]+i)>>28)+(l>>14)+s*u,r[n++]=268435455&c}return i},O=28),D.prototype.DB=O,D.prototype.DM=(1<<O)-1,D.prototype.DV=1<<O;D.prototype.FV=Math.pow(2,52),D.prototype.F1=52-O,D.prototype.F2=2*O-52;var j,B,V=[];for(j="0".charCodeAt(0),B=0;B<=9;++B)V[j++]=B;for(j="a".charCodeAt(0),B=10;B<36;++B)V[j++]=B;for(j="A".charCodeAt(0),B=10;B<36;++B)V[j++]=B;function H(e,t){var r=V[e.charCodeAt(t)];return null==r?-1:r}function M(e){var t=R();return t.fromInt(e),t}function U(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}D.ZERO=M(0),D.ONE=M(1);var F=function(){function e(){this.i=0,this.j=0,this.S=[]}return e.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},e.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},e}();var Z,z,G=null;if(null==G){G=[],z=0;var q=void 0;if(window.crypto&&window.crypto.getRandomValues){var K=new Uint32Array(256);for(window.crypto.getRandomValues(K),q=0;q<K.length;++q)G[z++]=255&K[q]}var W=0,Y=function(e){if((W=W||0)>=256||z>=256)window.removeEventListener?window.removeEventListener("mousemove",Y,!1):window.detachEvent&&window.detachEvent("onmousemove",Y);else try{var t=e.x+e.y;G[z++]=255&t,W+=1}catch(e){}};window.addEventListener?window.addEventListener("mousemove",Y,!1):window.attachEvent&&window.attachEvent("onmousemove",Y)}function $(){if(null==Z){for(Z=new F;z<256;){var e=Math.floor(65536*Math.random());G[z++]=255&e}for(Z.init(G),z=0;z<G.length;++z)G[z]=0;z=0}return Z.next()}var Q=function(){function e(){}return e.prototype.nextBytes=function(e){for(var t=0;t<e.length;++t)e[t]=$()},e}();var X=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},e.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},e.prototype.setPublic=function(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=A(e,16),this.e=parseInt(t,16)):console.error("Invalid RSA public key")},e.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)return console.error("Message too long for RSA"),null;for(var r=[],n=e.length-1;n>=0&&t>0;){var i=e.charCodeAt(n--);i<128?r[--t]=i:i>127&&i<2048?(r[--t]=63&i|128,r[--t]=i>>6|192):(r[--t]=63&i|128,r[--t]=i>>6&63|128,r[--t]=i>>12|224)}r[--t]=0;for(var o=new Q,a=[];t>2;){for(a[0]=0;0==a[0];)o.nextBytes(a);r[--t]=a[0]}return r[--t]=2,r[--t]=0,new D(r)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},e.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=A(e,16),this.e=parseInt(t,16),this.d=A(r,16)):console.error("Invalid RSA private key")},e.prototype.setPrivateEx=function(e,t,r,n,i,o,a,s){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=A(e,16),this.e=parseInt(t,16),this.d=A(r,16),this.p=A(n,16),this.q=A(i,16),this.dmp1=A(o,16),this.dmq1=A(a,16),this.coeff=A(s,16)):console.error("Invalid RSA private key")},e.prototype.generate=function(e,t){var r=new Q,n=e>>1;this.e=parseInt(t,16);for(var i=new D(t,16);;){for(;this.p=new D(e-n,1,r),0!=this.p.subtract(D.ONE).gcd(i).compareTo(D.ONE)||!this.p.isProbablePrime(10););for(;this.q=new D(n,1,r),0!=this.q.subtract(D.ONE).gcd(i).compareTo(D.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var a=this.p.subtract(D.ONE),s=this.q.subtract(D.ONE),c=a.multiply(s);if(0==c.gcd(i).compareTo(D.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(c),this.dmp1=this.d.mod(a),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},e.prototype.decrypt=function(e){var t=A(e,16),r=this.doPrivate(t);return null==r?null:function(e,t){var r=e.toByteArray(),n=0;for(;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;++n;for(;0!=r[n];)if(++n>=r.length)return null;var i="";for(;++n<r.length;){var o=255&r[n];o<128?i+=String.fromCharCode(o):o>191&&o<224?(i+=String.fromCharCode((31&o)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&o)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return i}(r,this.n.bitLength()+7>>3)},e.prototype.generateAsync=function(e,t,r){var n=new Q,i=e>>1;this.e=parseInt(t,16);var o=new D(t,16),a=this,s=function(){var t=function(){if(a.p.compareTo(a.q)<=0){var e=a.p;a.p=a.q,a.q=e}var t=a.p.subtract(D.ONE),n=a.q.subtract(D.ONE),i=t.multiply(n);0==i.gcd(o).compareTo(D.ONE)?(a.n=a.p.multiply(a.q),a.d=o.modInverse(i),a.dmp1=a.d.mod(t),a.dmq1=a.d.mod(n),a.coeff=a.q.modInverse(a.p),setTimeout((function(){r()}),0)):setTimeout(s,0)},c=function(){a.q=R(),a.q.fromNumberAsync(i,1,n,(function(){a.q.subtract(D.ONE).gcda(o,(function(e){0==e.compareTo(D.ONE)&&a.q.isProbablePrime(10)?setTimeout(t,0):setTimeout(c,0)}))}))},u=function(){a.p=R(),a.p.fromNumberAsync(e-i,1,n,(function(){a.p.subtract(D.ONE).gcda(o,(function(e){0==e.compareTo(D.ONE)&&a.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(u,0)}))}))};setTimeout(u,0)};setTimeout(s,0)},e.prototype.sign=function(e,t,r){var n=function(e,t){if(t<e.length+22)return console.error("Message too long for RSA"),null;for(var r=t-e.length-6,n="",i=0;i<r;i+=2)n+="ff";return A("0001"+n+"00"+e,16)}((J[r]||"")+t(e).toString(),this.n.bitLength()/4);if(null==n)return null;var i=this.doPrivate(n);if(null==i)return null;var o=i.toString(16);return 0==(1&o.length)?o:"0"+o},e.prototype.verify=function(e,t,r){var n=A(t,16),i=this.doPublic(n);return null==i?null:function(e){for(var t in J)if(J.hasOwnProperty(t)){var r=J[t],n=r.length;if(e.substr(0,n)==r)return e.substr(n)}return e}(i.toString(16).replace(/^1f+00/,""))==r(e).toString()},e}();var J={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};var ee={};ee.lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var n=function(){};if(n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){var i;for(i in r)e.prototype[i]=r[i];var o=function(){},a=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(o=function(e,t){for(i=0;i<a.length;i+=1){var r=a[i],n=t[r];"function"==typeof n&&n!=Object.prototype[r]&&(e[r]=n)}})}catch(e){}o(e.prototype,r)}}};var te={};void 0!==te.asn1&&te.asn1||(te.asn1={}),te.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";t=new D(n,16).xor(e).add(D.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t=te.asn1,r=t.DERBoolean,n=t.DERInteger,i=t.DERBitString,o=t.DEROctetString,a=t.DERNull,s=t.DERObjectIdentifier,c=t.DEREnumerated,u=t.DERUTF8String,l=t.DERNumericString,p=t.DERPrintableString,f=t.DERTeletexString,h=t.DERIA5String,d=t.DERUTCTime,v=t.DERGeneralizedTime,y=t.DERSequence,m=t.DERSet,g=t.DERTaggedObject,b=t.ASN1Util.newObject,w=Object.keys(e);if(1!=w.length)throw"key of param shall be only one.";var S=w[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+S+":"))throw"undefined key: "+S;if("bool"==S)return new r(e[S]);if("int"==S)return new n(e[S]);if("bitstr"==S)return new i(e[S]);if("octstr"==S)return new o(e[S]);if("null"==S)return new a(e[S]);if("oid"==S)return new s(e[S]);if("enum"==S)return new c(e[S]);if("utf8str"==S)return new u(e[S]);if("numstr"==S)return new l(e[S]);if("prnstr"==S)return new p(e[S]);if("telstr"==S)return new f(e[S]);if("ia5str"==S)return new h(e[S]);if("utctime"==S)return new d(e[S]);if("gentime"==S)return new v(e[S]);if("seq"==S){for(var O=e[S],E=[],k=0;k<O.length;k++){var P=b(O[k]);E.push(P)}return new y({array:E})}if("set"==S){for(O=e[S],E=[],k=0;k<O.length;k++){P=b(O[k]);E.push(P)}return new m({array:E})}if("tag"==S){var _=e[S];if("[object Array]"===Object.prototype.toString.call(_)&&3==_.length){var T=b(_[2]);return new g({tag:_[0],explicit:_[1],obj:T})}var D={};if(void 0!==_.explicit&&(D.explicit=_.explicit),void 0!==_.tag&&(D.tag=_.tag),void 0===_.obj)throw"obj shall be specified for 'tag'.";return D.obj=b(_.obj),new g(D)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},te.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),i=2;i<e.length;i+=2){var o=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);if(n+=o.substr(1,7),"0"==o.substr(0,1))t=t+"."+new D(n,2).toString(10),n=""}return t},te.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=new D(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",a=0;a<i;a++)o+="0";n=o+n;for(a=0;a<n.length-1;a+=7){var s=n.substr(a,7);a!=n.length-7&&(s="1"+s),r+=t(parseInt(s,2))}return r};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",i=e.split("."),o=40*parseInt(i[0])+parseInt(i[1]);n+=t(o),i.splice(0,2);for(var a=0;a<i.length;a++)n+=r(i[a]);return n},te.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},te.asn1.DERAbstractString=function(e){te.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},ee.lang.extend(te.asn1.DERAbstractString,te.asn1.ASN1Object),te.asn1.DERAbstractTime=function(e){te.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,r){var n=this.zeroPadding,i=this.localDateToUTC(e),o=String(i.getFullYear());"utc"==t&&(o=o.substr(2,2));var a=o+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var s=i.getMilliseconds();if(0!=s){var c=n(String(s),3);a=a+"."+(c=c.replace(/[0]+$/,""))}}return a+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,r,n,i,o){var a=new Date(Date.UTC(e,t-1,r,n,i,o,0));this.setByDate(a)},this.getFreshValueHex=function(){return this.hV}},ee.lang.extend(te.asn1.DERAbstractTime,te.asn1.ASN1Object),te.asn1.DERAbstractStructured=function(e){te.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},ee.lang.extend(te.asn1.DERAbstractStructured,te.asn1.ASN1Object),te.asn1.DERBoolean=function(){te.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},ee.lang.extend(te.asn1.DERBoolean,te.asn1.ASN1Object),te.asn1.DERInteger=function(e){te.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=te.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new D(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},ee.lang.extend(te.asn1.DERInteger,te.asn1.ASN1Object),te.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=te.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}te.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var i=e.substr(r,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),n+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},ee.lang.extend(te.asn1.DERBitString,te.asn1.ASN1Object),te.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=te.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}te.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},ee.lang.extend(te.asn1.DEROctetString,te.asn1.DERAbstractString),te.asn1.DERNull=function(){te.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},ee.lang.extend(te.asn1.DERNull,te.asn1.ASN1Object),te.asn1.DERObjectIdentifier=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=new D(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",a=0;a<i;a++)o+="0";n=o+n;for(a=0;a<n.length-1;a+=7){var s=n.substr(a,7);a!=n.length-7&&(s="1"+s),r+=t(parseInt(s,2))}return r};te.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",i=e.split("."),o=40*parseInt(i[0])+parseInt(i[1]);n+=t(o),i.splice(0,2);for(var a=0;a<i.length;a++)n+=r(i[a]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.setValueName=function(e){var t=te.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},ee.lang.extend(te.asn1.DERObjectIdentifier,te.asn1.ASN1Object),te.asn1.DEREnumerated=function(e){te.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=te.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new D(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},ee.lang.extend(te.asn1.DEREnumerated,te.asn1.ASN1Object),te.asn1.DERUTF8String=function(e){te.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},ee.lang.extend(te.asn1.DERUTF8String,te.asn1.DERAbstractString),te.asn1.DERNumericString=function(e){te.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},ee.lang.extend(te.asn1.DERNumericString,te.asn1.DERAbstractString),te.asn1.DERPrintableString=function(e){te.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},ee.lang.extend(te.asn1.DERPrintableString,te.asn1.DERAbstractString),te.asn1.DERTeletexString=function(e){te.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},ee.lang.extend(te.asn1.DERTeletexString,te.asn1.DERAbstractString),te.asn1.DERIA5String=function(e){te.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},ee.lang.extend(te.asn1.DERIA5String,te.asn1.DERAbstractString),te.asn1.DERUTCTime=function(e){te.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},ee.lang.extend(te.asn1.DERUTCTime,te.asn1.DERAbstractTime),te.asn1.DERGeneralizedTime=function(e){te.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},ee.lang.extend(te.asn1.DERGeneralizedTime,te.asn1.DERAbstractTime),te.asn1.DERSequence=function(e){te.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){e+=this.asn1Array[t].getEncodedHex()}return this.hV=e,this.hV}},ee.lang.extend(te.asn1.DERSequence,te.asn1.DERAbstractStructured),te.asn1.DERSet=function(e){te.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},ee.lang.extend(te.asn1.DERSet,te.asn1.DERAbstractStructured),te.asn1.DERTaggedObject=function(e){te.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},ee.lang.extend(te.asn1.DERTaggedObject,te.asn1.ASN1Object);var re,ne=(re=function(e,t){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},re(e,t)},function(e,t){function r(){this.constructor=e}re(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ie=function(e){function t(r){var n=e.call(this)||this;return r&&("string"==typeof r?n.parseKey(r):(t.hasPrivateKeyProperty(r)||t.hasPublicKeyProperty(r))&&n.parsePropertiesFrom(r)),n}return ne(t,e),t.prototype.parseKey=function(e){try{var t=0,r=0,n=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?v(e):y.unarmor(e),i=k.decode(n);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){t=i.sub[1].getHexStringValue(),this.n=A(t,16),r=i.sub[2].getHexStringValue(),this.e=parseInt(r,16);var o=i.sub[3].getHexStringValue();this.d=A(o,16);var a=i.sub[4].getHexStringValue();this.p=A(a,16);var s=i.sub[5].getHexStringValue();this.q=A(s,16);var c=i.sub[6].getHexStringValue();this.dmp1=A(c,16);var u=i.sub[7].getHexStringValue();this.dmq1=A(u,16);var l=i.sub[8].getHexStringValue();this.coeff=A(l,16)}else{if(2!==i.sub.length)return!1;var p=i.sub[1].sub[0];t=p.sub[0].getHexStringValue(),this.n=A(t,16),r=p.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(e){return!1}},t.prototype.getPrivateBaseKey=function(){var e={array:[new te.asn1.DERInteger({int:0}),new te.asn1.DERInteger({bigint:this.n}),new te.asn1.DERInteger({int:this.e}),new te.asn1.DERInteger({bigint:this.d}),new te.asn1.DERInteger({bigint:this.p}),new te.asn1.DERInteger({bigint:this.q}),new te.asn1.DERInteger({bigint:this.dmp1}),new te.asn1.DERInteger({bigint:this.dmq1}),new te.asn1.DERInteger({bigint:this.coeff})]};return new te.asn1.DERSequence(e).getEncodedHex()},t.prototype.getPrivateBaseKeyB64=function(){return f(this.getPrivateBaseKey())},t.prototype.getPublicBaseKey=function(){var e=new te.asn1.DERSequence({array:[new te.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new te.asn1.DERNull]}),t=new te.asn1.DERSequence({array:[new te.asn1.DERInteger({bigint:this.n}),new te.asn1.DERInteger({int:this.e})]}),r=new te.asn1.DERBitString({hex:"00"+t.getEncodedHex()});return new te.asn1.DERSequence({array:[e,r]}).getEncodedHex()},t.prototype.getPublicBaseKeyB64=function(){return f(this.getPublicBaseKey())},t.wordwrap=function(e,t){if(!e)return e;var r="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})";return e.match(RegExp(r,"g")).join("\n")},t.prototype.getPrivateKey=function(){var e="-----BEGIN RSA PRIVATE KEY-----\n";return e+=t.wordwrap(this.getPrivateBaseKeyB64())+"\n",e+="-----END RSA PRIVATE KEY-----"},t.prototype.getPublicKey=function(){var e="-----BEGIN PUBLIC KEY-----\n";return e+=t.wordwrap(this.getPublicBaseKeyB64())+"\n",e+="-----END PUBLIC KEY-----"},t.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")},t.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},t.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)},t}(X),oe="3.0.1",ae=function(){function e(e){e=e||{},this.default_key_size=e.default_key_size?parseInt(e.default_key_size,10):1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null}return e.prototype.setKey=function(e){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new ie(e)},e.prototype.setPrivateKey=function(e){this.setKey(e)},e.prototype.setPublicKey=function(e){this.setKey(e)},e.prototype.decrypt=function(e){try{return this.getKey().decrypt(h(e))}catch(e){return!1}},e.prototype.encrypt=function(e){try{return f(this.getKey().encrypt(e))}catch(e){return!1}},e.prototype.sign=function(e,t,r){try{return f(this.getKey().sign(e,t,r))}catch(e){return!1}},e.prototype.verify=function(e,t,r){try{return this.getKey().verify(e,h(t),r)}catch(e){return!1}},e.prototype.getKey=function(e){if(!this.key){if(this.key=new ie,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},e.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},e.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},e.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},e.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},e.version=oe,e}()},46384:function(e,t,r){var n=r(38407),i=r(37465),o=r(63779),a=r(67599),s=r(44758),c=r(34309);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},82908:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},90939:function(e,t,r){var n=r(2492),i=r(37005);e.exports=function e(t,r,o,a,s){return t===r||(null==t||null==r||!i(t)&&!i(r)?t!=t&&r!=r:n(t,r,o,a,e,s))}},2492:function(e,t,r){var n=r(46384),i=r(67114),o=r(18351),a=r(16096),s=r(64160),c=r(1469),u=r(44144),l=r(36719),p="[object Arguments]",f="[object Array]",h="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,v,y,m){var g=c(e),b=c(t),w=g?f:s(e),S=b?f:s(t),O=(w=w==p?h:w)==h,E=(S=S==p?h:S)==h,k=w==S;if(k&&u(e)){if(!u(t))return!1;g=!0,O=!1}if(k&&!O)return m||(m=new n),g||l(e)?i(e,t,r,v,y,m):o(e,t,w,r,v,y,m);if(!(1&r)){var P=O&&d.call(e,"__wrapped__"),_=E&&d.call(t,"__wrapped__");if(P||_){var T=P?e.value():e,D=_?t.value():t;return m||(m=new n),y(T,D,r,v,m)}}return!!k&&(m||(m=new n),a(e,t,r,v,y,m))}},67114:function(e,t,r){var n=r(88668),i=r(82908),o=r(74757);e.exports=function(e,t,r,a,s,c){var u=1&r,l=e.length,p=t.length;if(l!=p&&!(u&&p>l))return!1;var f=c.get(e);if(f&&c.get(t))return f==t;var h=-1,d=!0,v=2&r?new n:void 0;for(c.set(e,t),c.set(t,e);++h<l;){var y=e[h],m=t[h];if(a)var g=u?a(m,y,h,t,e,c):a(y,m,h,e,t,c);if(void 0!==g){if(g)continue;d=!1;break}if(v){if(!i(t,(function(e,t){if(!o(v,t)&&(y===e||s(y,e,r,a,c)))return v.push(t)}))){d=!1;break}}else if(y!==m&&!s(y,m,r,a,c)){d=!1;break}}return c.delete(e),c.delete(t),d}},18351:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},16096:function(e,t,r){var n=r(58234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,a,s){var c=1&r,u=n(e),l=u.length;if(l!=n(t).length&&!c)return!1;for(var p=l;p--;){var f=u[p];if(!(c?f in t:i.call(t,f)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var d=!0;s.set(e,t),s.set(t,e);for(var v=c;++p<l;){var y=e[f=u[p]],m=t[f];if(o)var g=c?o(m,y,f,t,e,s):o(y,m,f,e,t,s);if(!(void 0===g?y===m||a(y,m,r,o,s):g)){d=!1;break}v||(v="constructor"==f)}if(d&&!v){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(d=!1)}return s.delete(e),s.delete(t),d}},58234:function(e,t,r){var n=r(5569)(Object.keys,Object);e.exports=n},64160:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},37465:function(e,t,r){var n=r(38407);e.exports=function(){this.__data__=new n,this.size=0}},63779:function(e){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},67599:function(e){e.exports=function(e){return this.__data__.get(e)}},44758:function(e){e.exports=function(e){return this.__data__.has(e)}},34309:function(e,t,r){var n=r(38407),i=r(57071),o=r(83369);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,t),this.size=r.size,this}},44144:function(e){e.exports=function(){return!1}},18446:function(e,t,r){var n=r(90939);e.exports=function(e,t){return n(e,t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},36719:function(e){e.exports=function(){return!1}},48865:function(e,t){"use strict";t.Z={container:"IEr2uH54",loged:"fRaVwUIg",content:"_6vGVguG2",minIcon:"yszQsSZs",text:"dot8MPCP",operate:"-WkkYQCt",btn:"_4i5QfeSO",tip:"CYEDnU-Q",triangle:"Ywv+tbkx",loginBar:"zxN3nRsh",loading:"p9d-PbOU",gradual:"tghxSVQN"}},49674:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=49674,e.exports=t},65893:function(e,t,r){var n=r(23645)((function(e){return e[1]}));n.push([e.id,"@-webkit-keyframes YZRcxrJ5{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes YZRcxrJ5{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes Y7UzW-9F{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@keyframes Y7UzW-9F{0%{opacity:1}50%{opacity:.2}to{opacity:1}}.UWOUg9Zf{-webkit-overflow-scrolling:touch;bottom:0;left:0;max-width:768px;overflow:scroll;position:absolute;right:0;top:0;width:100%}.UWOUg9Zf,.jpYyhumF,.k2Wr-GNA{padding-bottom:1rem}.k2Wr-GNA{position:static}@media only screen and (min-device-height:812px){.UWOUg9Zf,.k2Wr-GNA{padding-bottom:calc(1rem + env(safe-area-inset-bottom))}}",""]),n.locals={container:"UWOUg9Zf",containerFixIos10:"jpYyhumF",containerNonApp:"k2Wr-GNA",loading:"YZRcxrJ5",gradual:"Y7UzW-9F"},e.exports=n},84930:function(e,t,r){var n=r(23645)((function(e){return e[1]}));n.push([e.id,"@-webkit-keyframes P7ZE2CZk{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes P7ZE2CZk{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes d5d4sLWV{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@keyframes d5d4sLWV{0%{opacity:1}50%{opacity:.2}to{opacity:1}}._6vd5duIr{background:#fff;margin-top:.08rem;padding:.12rem .12rem .16rem}.iBhZdHNc{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.bD5BnOjy{color:#151516;font-size:.15rem;line-height:.15rem}._87oP83QW{color:#58595b}.IfIyw2nn,._87oP83QW{font-size:.13rem}.IfIyw2nn{background:#fff;color:#9c9c9c;line-height:.13rem}._75WQjfCO{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin:.16rem 0}._75WQjfCO :last-child{margin-right:0}.nGe62lMB{background-repeat:no-repeat;background-size:100%;-webkit-box-flex:1;-webkit-flex:1;flex:1;height:.26rem;line-height:.26rem;margin-right:.16rem;max-width:.31rem;text-align:center}.iLNO71CE{color:#58595b;font-family:PingFangSC-Medium,PingFang SC;font-size:.13rem;font-weight:500}.izy\\+iLe\\+{background-image:url(https://funimg.pddpic.com/tcashier/2020-08-13/4339e9c2-289c-4b43-87bd-d6fb898215d1.png.slim.png);color:#ccc;font-size:.12rem;line-height:.12rem;padding-top:.04rem}.Q4EC6tW6{background-image:url(https://funimg.pddpic.com/tcashier/2020-08-13/5b18473e-dd4d-4518-94cb-2a564a469498.png.slim.png);color:#fff}",""]),n.locals={box:"_6vd5duIr",between:"iBhZdHNc",title:"bD5BnOjy",txt:"_87oP83QW",tip:"IfIyw2nn",seatline:"_75WQjfCO",seat:"nGe62lMB",itemtxt:"iLNO71CE",item:"izy+iLe+",active:"Q4EC6tW6",loading:"P7ZE2CZk",gradual:"d5d4sLWV"},e.exports=n},65273:function(e,t,r){var n=r(23645)((function(e){return e[1]}));n.push([e.id,"@-webkit-keyframes bHuSqZtU{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes bHuSqZtU{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes ggQEEHtA{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@keyframes ggQEEHtA{0%{opacity:1}50%{opacity:.2}to{opacity:1}}.dSQ6Sby7,.cu8bYQf5{-webkit-box-align:center;align-items:center;-webkit-align-items:center;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;font-size:.13rem;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;line-height:.21rem;margin:.11rem .12rem 0}.cu8bYQf5{margin-top:.01rem}.Vkb4ZAcq{color:#9c9c9c}.SF784shI{color:#58595b;font-size:.13rem}._8Xfvg0RD{color:#58595b}.N59IPs1o{color:#9c9c9c}",""]),n.locals={agreeContainer:"dSQ6Sby7",viewContainer:"cu8bYQf5",label:"Vkb4ZAcq",protocolText:"SF784shI",desc:"_8Xfvg0RD",view:"N59IPs1o",loading:"bHuSqZtU",gradual:"ggQEEHtA"},e.exports=n},10284:function(e,t,r){var n=r(23645)((function(e){return e[1]}));n.push([e.id,'@-webkit-keyframes R6wr0xuh{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes R6wr0xuh{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes LuY25O5Y{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@keyframes LuY25O5Y{0%{opacity:1}50%{opacity:.2}to{opacity:1}}.GOkKnuId{bottom:0;max-width:768px;position:fixed;z-index:1}.GOkKnuId,.X1hzSaRr{background:#fff;width:100%}.X1hzSaRr{-webkit-box-align:center;align-items:center;-webkit-align-items:center;border-top:1px solid rgba(0,0,0,.05);display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;height:.54rem;-webkit-box-pack:justify;justify-content:space-between;-webkit-justify-content:space-between;line-height:1;position:relative;z-index:10000}@media only screen and (min-device-height:812px){.X1hzSaRr{height:calc(.54rem + constant(safe-area-inset-bottom));height:calc(.54rem + env(safe-area-inset-bottom));padding-bottom:calc(0px + env(safe-area-inset-bottom))}}.JINvvEx3{-webkit-box-align:center;align-items:center;-webkit-align-items:center;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;-webkit-justify-content:space-between}.dre16VEa{background:#fff;-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:.12rem}.BkIco7ov{-webkit-box-align:baseline;align-items:baseline;-webkit-align-items:baseline;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start}._5-jvpd2d{color:#151516;-webkit-flex-shrink:0;flex-shrink:0;font-size:.14rem;margin-right:.02rem}.BGkncbuA{-webkit-box-align:baseline;align-items:baseline;-webkit-align-items:baseline;color:#e02e24;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-shrink:0;flex-shrink:0;font-size:.2rem;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start}.TdDRzpx2{display:inline-block;font-size:.14rem;font-weight:600;letter-spacing:-.02rem}._1y0YwdZM{display:inline-block;font-family:SFProText-Medium;font-weight:500}.yb4qn1EO{color:#e02e24;font-size:.13rem;line-height:.21rem;margin-left:.04rem}.AMETpQFZ{margin-left:0}._4RC9OFCQ{-webkit-box-align:center;align-items:center;-webkit-align-items:center;background:#e02e24;color:#fff;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-shrink:0;flex-shrink:0;font-size:.17rem;height:100%;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;line-height:normal;padding:.02rem;position:relative;text-align:center;width:1.87rem}._4RC9OFCQ:active{background-color:#c51e14!important;color:#edbbb8!important}.jDQiRs3l{width:1.46rem}.m9TuBrj4{color:#fff;font-family:icomoon-tcashier;font-size:.16rem;line-height:1;margin-right:.07rem}.W-YFXSFa{color:#58595b;font-size:.13rem;margin-top:.04rem}.W-YFXSFa .vqwQzlgY{color:#e02e24}.FhiCJnOm{-webkit-box-align:center;align-items:center;-webkit-align-items:center;color:#9c9c9c;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;font-size:.13rem;-webkit-box-pack:end;justify-content:flex-end;-webkit-justify-content:flex-end;line-height:.18rem;margin-right:.14rem;text-align:right}.FhiCJnOm:active,.FhiCJnOm:active:after{color:#151516!important}.ZVTVe8Zc:after{content:"";margin-left:.04rem}.LZX1AFON:after,.ZVTVe8Zc:after{color:#9c9c9c;font-family:icomoon-tcashier;font-size:.09rem;font-weight:400;line-height:1}.LZX1AFON:after{content:"";margin-left:.04rem}.nHh3c2Xl{color:#151516;font-size:.14rem;line-height:.21rem;margin-right:.06rem}',""]),n.locals={container:"GOkKnuId",content:"X1hzSaRr",amount:"JINvvEx3",amountContainer:"dre16VEa",amountTop:"BkIco7ov",amountLabel:"_5-jvpd2d",amountNumber:"BGkncbuA",amountYuanMark:"TdDRzpx2",price:"_1y0YwdZM",discount:"yb4qn1EO",disBottom:"AMETpQFZ",button:"_4RC9OFCQ",smallButton:"jDQiRs3l",icon:"m9TuBrj4",srContainer:"W-YFXSFa",srText:"vqwQzlgY",detail:"FhiCJnOm",up:"ZVTVe8Zc",down:"LZX1AFON",desc:"nHh3c2Xl",loading:"R6wr0xuh",gradual:"LuY25O5Y"},e.exports=n},31026:function(e,t,r){var n=r(23645)((function(e){return e[1]}));n.push([e.id,'@-webkit-keyframes FxAAFNw3{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes FxAAFNw3{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes lQtvDuCX{0%{opacity:1}50%{opacity:.2}to{opacity:1}}@keyframes lQtvDuCX{0%{opacity:1}50%{opacity:.2}to{opacity:1}}.PoNwZdid{padding:.16rem .12rem;width:100%}.PcTCwQhj{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-flex-shrink:1;flex-shrink:1}.dMZG7IAL,.u0x8Kb\\+m{-webkit-box-align:center;align-items:center;-webkit-align-items:center;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start}.u0x8Kb\\+m{margin-top:.08rem}.\\-2aQigud{color:#151516;font-size:.15rem}._0d7tFhk0{-webkit-line-clamp:1;-webkit-box-orient:vertical;color:#58595b;display:-webkit-box;font-size:.14rem;line-height:.16rem;overflow:hidden;padding-top:.01rem;text-overflow:ellipsis}.UegfkMYx{margin-left:.04rem;width:.16rem}.UegfkMYx:before{-webkit-font-smoothing:antialiased;color:#9c9c9c;content:"";font-family:icomoon;font-size:.14rem;font-weight:400;line-height:1}.UegfkMYx:active:before{color:#58595b!important}.U5arUGDx{font-weight:700}.nruHp96Y{-webkit-flex-shrink:0;flex-shrink:0;font-size:.13rem;padding:.12rem 0 .12rem .12rem}.nruHp96Y:before{-webkit-font-smoothing:antialiased;color:#9c9c9c;content:"";font-family:icomoon;font-size:.13rem;font-weight:400;line-height:1}.nruHp96Y:active:before{color:#58595b!important}.myfnWN5N{background:#ffeee6;border-radius:.02rem;color:#ff5706;font-size:.12rem;margin-left:.06rem;padding:.01rem}.wbETtRM\\+{-webkit-box-align:center;align-items:center;-webkit-align-items:center;border-bottom:1px solid rgba(0,0,0,.05);display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;margin-bottom:-.16rem;padding-bottom:.16rem}',""]),n.locals={passenger:"PoNwZdid",passengerBody:"PcTCwQhj",passengerRow1:"dMZG7IAL",passengerRow2:"u0x8Kb+m",passengerName:"-2aQigud",passengerDesc:"_0d7tFhk0",passengerDescInfo:"UegfkMYx",passengerBold:"U5arUGDx",passengerBtn:"nruHp96Y",passengerTag:"myfnWN5N",rowBorder:"wbETtRM+",loading:"FxAAFNw3",gradual:"lQtvDuCX"},e.exports=n},34968:function(e){"use strict";e.exports=window.pinbridge}},function(e){e.O(0,[4736,4181],(function(){return t=51375,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/m100428/js/react_tcashier_train_checkout_7c055f85d4fc47ea9eaa.js.map