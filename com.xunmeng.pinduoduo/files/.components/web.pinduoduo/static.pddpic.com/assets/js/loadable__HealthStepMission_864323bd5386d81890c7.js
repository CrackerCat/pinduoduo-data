(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[111],{"+zld":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n("o0o1"),a=n.n(r),i=n("yXPU"),o=n.n(i),s=n("lwsE"),c=n.n(s),u=n("W8MJ"),f=n.n(u),l=n("7W2i"),p=n.n(l),d=n("a1gu"),g=n.n(d),m=n("Nsbk"),b=n.n(m),w=n("UbFF"),h=n("AZ7A"),v=n("UMxp");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var O=function(e){var t=e||{},n=t.message,r=t.response,a=(r=void 0===r?{}:r).status;if(409===(void 0===a?void 0:a))return Object(v.a)("活动太火爆啦，稍后再来吧");Object(v.a)(n||"活动太火爆啦，稍后再来吧")},x=function(e){p()(n,e);var t=y(n);function n(){return c()(this,n),t.apply(this,arguments)}return f()(n,[{key:"queryFunMissionList",value:function(){var e=o()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/query/mission/list",t,{defaultErrorHandler:O});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"completeFunMission",value:function(){var e=o()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/mission/complete",t,{defaultErrorHandler:O});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"gainFunMissionReward",value:function(){var e=o()(a.a.mark(function e(){var t,n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.post("/api/fun-gateway/command/reward/gain",t,{defaultErrorHandler:O});case 3:return n=e.sent,e.abrupt("return",Object(h.d)(n));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}(w.a)},"1b1Q":function(e,t,n){var r=n("iA9U"),a=n("Q8e5"),i="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return i},t._getCss=function(){return""+r},t._insertCss=function(e){return a(i,e)}},i693:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),i=n("lSNA"),o=n.n(i),s=n("yXPU"),c=n.n(s),u=n("J4zp"),f=n.n(u),l=n("FdF9"),p=n("TSYQ"),d=n.n(p),g=n("v2IZ"),m=n("g5zU"),b=n.n(m),w=n("vkis"),h=n("IW0v"),v=n("33M6"),y=n("3vqr"),O=n("hKGL"),x=n("E5pA"),_=n("xNPO"),j=n("+zld"),C=n("yxhh");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P=n("1b1Q"),E=n.n(P),R=n("LTlm");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){o()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T=function(e){var t=e.rewardCount;return b()(E.a),l.default.createPortal(l.default.createElement(w.a,{trackingInfo:{page_el_sn:5380864}},l.default.createElement("div",{className:d()(E.a.successToast,"flex-dir-col","flex-box","align-center")},l.default.createElement(h.a,{src:"https://funimg.pddpic.com/rankiing/73d29016-7652-49e5-8fb3-1d7e89486824.png.slim.png",className:E.a.stepIcon}),l.default.createElement("p",{className:E.a.successTip},"恭喜获得"),l.default.createElement("p",{className:E.a.successTip},t,"步数奖励"))),document.getElementById("main"))};t.default=Object(l.memo)(function(e){e.hide;b()(E.a);var t=Object(l.useState)(!1),n=f()(t,2),r=n[0],i=n[1],o=Object(l.useRef)(!1),s=Object(l.useContext)(R.a),u=function(e){var t=e.business_id,n=e.biz_source,r=e.mission_type,i=Object(l.useRef)(!1),o=Object(l.useRef)(new j.a).current,s=Object(l.useState)({status:C.a.None,rewardCount:null,seconds:null}),u=f()(s,2),p=u[0],d=u[1];return Object(_.a)(function(){o.queryFunMissionList({business_id:t,biz_source:n,mission_type_list:[r]}).then(function(e){var t=e.missionList,n=null===t||void 0===t?void 0:t[r];if(n){var a,i=n.extMap,o=n.rewardResult,s=n.isDrawable,c=n.drawCount,u=n.finishCount,f=n.maxCount,l=(null===i||void 0===i?void 0:i.browseUnit)&&Number(i.browseUnit),p=null===o||void 0===o?void 0:null===(a=o.find(function(e){return 1===e.rewardType}))||void 0===a?void 0:a.maxRewardAmount;if(!l||!p)return;d({seconds:l,rewardCount:p,status:c>=f?C.a.Completed:u>c&&s?C.a.CanGetReward:C.a.CountDown})}})}),Object(x.a)(function(){if(p.status===C.a.CountDown){var e=k({},p);p.seconds<=1?e.status=C.a.CanGetReward:e.seconds-=1,d(e)}},p.status===C.a.CountDown?1e3:null),{data:p,getReward:function(){var t=c()(a.a.mark(function t(){var n,r,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.current){t.next=2;break}return t.abrupt("return");case 2:return i.current=!0,t.prev=3,t.next=6,o.completeFunMission(e);case 6:return r=t.sent,(s=!!(null===(n=r.rewardList)||void 0===n?void 0:n.length))&&d(k(k({},p),{},{status:C.a.Completed})),t.abrupt("return",s);case 12:return t.prev=12,t.t0=t.catch(3),t.abrupt("return",!1);case 15:return t.prev=15,i.current=!1,t.finish(15);case 18:case"end":return t.stop()}},t,null,[[3,12,15,18]])}));return function(){return t.apply(this,arguments)}}()}}({business_id:7,biz_source:"SHORT_VIDEO",mission_type:97017}),p=u.data,m=u.getReward,h=p.rewardCount,S=p.seconds,P=p.status,D=O.a.useActions().hideHealthStepPendant,H=P===C.a.None;Object(l.useEffect)(function(){if(!H){var e=setTimeout(function(){D()},6e5);return function(){return clearTimeout(e)}}},[H]);var M=function(){var e=c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(g.c)(N({page_el_sn:5380863,type:P},s)),!o.current){e.next=3;break}return e.abrupt("return");case 3:if(o.current=!0,P!==C.a.CanGetReward){e.next=11;break}return e.next=7,m();case 7:e.sent?A():Object(y.a)("活动太火爆啦，请稍后重试"),e.next=12;break;case 11:Object(y.a)("再看".concat(S,"秒领取步数奖励"));case 12:o.current=!1;case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){if(!r){i(!0);var e=setTimeout(function(){i(!1),clearTimeout(e)},2e3)}},F=Object(l.useMemo)(function(){switch(P){case C.a.CountDown:return"再看".concat(S,"秒");case C.a.CanGetReward:return"可领取";case C.a.Completed:return"已领取"}},[S,P]);return H?null:l.default.createElement("div",{className:E.a.wrap},P!==C.a.Completed&&l.default.createElement(w.a,{trackingInfo:N({page_el_sn:5380863,type:P},s)},l.default.createElement(v.a,{src:"https://funimg.pddpic.com/rankiing/bccacb1e-39e0-4ff0-8025-795958051bef.png.slim.png",resizeWidth:256,className:d()(E.a.contentWrap,"flex-dir-col","flex-box","align-center"),onClick:M},l.default.createElement("div",{className:E.a.rewardNum},h,"步"),l.default.createElement("div",{className:E.a.getReward},F))),r&&l.default.createElement(T,{rewardCount:h}))})},iA9U:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,'._3eAPXC81{text-align:center;position:relative;left:0}.bsgz6kiP{width:126px;height:28px;background:rgba(224,46,36,.9);border-radius:0 14.5px 14.5px 0;font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500;font-size:14px;color:#fff}.bsgz6kiP:before{content:"\\E611";font-size:.09rem;color:hsla(0,0%,100%,.8);font-family:short-video;line-height:1;font-weight:400;-webkit-font-smoothing:antialiased;margin-right:2px;margin-left:4px}.bsgz6kiP span{line-height:1}._39SuQwSr{width:64px;height:64px;margin-left:12px;margin-top:12px;position:relative}._39SuQwSr ._1B3GGlU7{margin-top:18px;font-size:14px;color:#3a7b16;line-height:20px;opacity:.8}._39SuQwSr ._1B3GGlU7,._39SuQwSr .tT8Sl1sJ{font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500}._39SuQwSr .tT8Sl1sJ{position:absolute;bottom:4px;height:16px;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;flex-wrap:nowrap;-ms-wrap-through:nowrap;-webkit-flex-wrap:nowrap;color:#fff;letter-spacing:.01px;font-size:11px;white-space:nowrap}.Hhl_psJ-{width:1.2rem;height:1.2rem;background:rgba(0,0,0,.8);border-radius:.04rem;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.Hhl_psJ- ._1vc-NKGh{width:.38rem;height:.38rem;margin-top:.12rem;margin-bottom:.12rem}.Hhl_psJ- ._31jBAwRB{line-height:.22rem;font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500;font-size:.16rem;color:#fff;text-align:center}',""]),t.locals={wrap:"_3eAPXC81",backBtn:"bsgz6kiP",contentWrap:"_39SuQwSr",rewardNum:"_1B3GGlU7",getReward:"tT8Sl1sJ",successToast:"Hhl_psJ-",stepIcon:"_1vc-NKGh",successTip:"_31jBAwRB"}},yxhh:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e[e.CountDown=0]="CountDown",e[e.CanGetReward=1]="CanGetReward",e[e.Completed=2]="Completed",e[e.None=3]="None"}(r||(r={}))}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-video-layer/js/loadable__HealthStepMission_864323bd5386d81890c7.js.map