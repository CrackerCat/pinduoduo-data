(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"EP3j":function(e,a,t){"use strict";t.r(a);var r,n=t("1OyB"),h=t("vuIU"),i=t("Ji7U"),s=t("LK+K"),S=t("rePB"),o=t("dKgK"),u=t("a/1V"),l=t("chhR"),c=t("EECB"),E=t("YSLc"),C=t("W9H9"),f=t("gfNA"),_=t("Upw4"),m=t("Ne86"),p=function(e){Object(i.a)(WeChatShareEntity,e);var a=Object(s.a)(WeChatShareEntity);function WeChatShareEntity(){return Object(n.a)(this,WeChatShareEntity),a.apply(this,arguments)}return Object(h.a)(WeChatShareEntity,[{"key":"normalize","value":function normalize(e){var a=this,t=Object.assign({},this);return e===u.a.COPY_CIPHER?this.processCipher():new Promise((function(r,n){var h=t.shareURL;a.targetShareURL=a.shareURL,a.realShareURL=a.shareURL,a.useShortURL=!1,e===u.a.WECHAT_TIMELINE||e===u.a.WECHAT_SESSION?Object(m.d)(t).then((function(e){var n=e.realShareURL,h=e.targetShareURL,i=e.useShortURL;a.useShortURL=i,a.targetShareURL=h,a.realShareURL=n,r({"title":t.title,"desc":t.message,"imgUrl":t.thumbnailURL,"link":n})}),(function(){})):Object(_.a)(e)?(a.targetShareURL=Object(m.b)(e,h),a.realShareURL=a.targetShareURL,r({"title":t.title,"desc":t.message,"imgUrl":t.thumbnailURL,"link":a.realShareURL})):r({"title":t.title,"desc":t.message,"imgUrl":t.thumbnailURL,"link":h})}))}},{"key":"getShareForm","value":function getShareForm(e){return e===u.a.COPY_CIPHER?C.a.COMMAND:C.a.CARD}},{"key":"getShareMethod","value":function getShareMethod(e){return e===u.a.COPY_CIPHER?E.a.MANUAL:E.a.SDK}}]),WeChatShareEntity}(f.a),y=t("/bZk").b.ShareErrorCode,O=(r={},Object(S.a)(r,u.a.WECHAT_SESSION,{"name":"onMenuShareAppMessage","tag":"menuItem:share:appMessage"}),Object(S.a)(r,u.a.WECHAT_TIMELINE,{"name":"onMenuShareTimeline","tag":"menuItem:share:timeline"}),Object(S.a)(r,u.a.QQ_CHAT_SESSION,{"name":"onMenuShareQQ","tag":"menuItem:share:qq"}),Object(S.a)(r,u.a.QQ_ZONE,{"name":"onMenuShareQZone","tag":"menuItem:share:QZone"}),Object(S.a)(r,u.a.TENCENT_WEIBO,{"name":"onMenuShareWeibo","tag":"menuItem:share:weiboApp"}),r),T=[u.a.WECHAT_SESSION,u.a.WECHAT_TIMELINE,u.a.QQ_CHAT_SESSION,u.a.QQ_ZONE,u.a.TENCENT_WEIBO,u.a.COPY_CIPHER],R=function(e){Object(i.a)(WeChatShareController,e);var a=Object(s.a)(WeChatShareController);function WeChatShareController(e){var t;return Object(n.a)(this,WeChatShareController),(t=a.call(this,e)).ShareEntityClass=p,t._enableShareTypes=T.concat(),t}return Object(h.a)(WeChatShareController,[{"key":"share","value":function share(e){return e===u.a.COPY_CIPHER?this.copyCipher():y.SHARE_ACTION_DISABLE}},{"key":"refreshShare","value":function refreshShare(e,a){var t=this;return e?a?(this.shareEntityMap[a]=e,"undefined"==typeof wx?(this.emit(l.a.SDK_INIT_FAILED),Promise.resolve()):this.refreshWeChatChannelShare(a)):(this.shareEntity=e,this._enableShareTypes.forEach((function(a){t.shareEntityMap[a]=t.createShareEntity(e,a)})),this._setupPlatformShareSDK()):Promise.resolve()}},{"key":"_setupShareTypes","value":function _setupShareTypes(){var e=this,a=this._enableShareTypes.length;return this._enableShareTypes=T.filter((function(a){return e.disableShareTypes.indexOf(a)<0})),a===this._enableShareTypes.length}},{"key":"_setupPlatformShareSDK","value":function _setupPlatformShareSDK(){var e=this;return"undefined"==typeof wx?(this.emit(l.a.SDK_INIT_FAILED),Promise.resolve()):Promise.all(this._enableShareTypes.map((function(a){e.refreshWeChatChannelShare(a)})))}},{"key":"_adjustMenu","value":function _adjustMenu(){var e=this,a=T.filter((function(a){return e._enableShareTypes.indexOf(a)<0})).map((function(e){return O[e].tag}));window.wx&&window.wx.hideMenuItems({"menuList":a})}},{"key":"refreshWeChatChannelShare","value":function refreshWeChatChannelShare(e){var a=O[e];return a?this._setupWeChatChannelShare(e,a.name):Promise.resolve()}},{"key":"_setupWeChatChannelShare","value":function _setupWeChatChannelShare(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!window.wx||"function"!=typeof window.wx[t])return Promise.resolve();var r=this.shareEntityMap[e]||this.shareEntity;return r?(this.emit(l.a.ON_SHARE_PREPARE,{"shareType":e}),r.normalize(e).then((function(r){var n=Object.assign({"trigger":function trigger(){a.emit(l.a.ON_SHARE_TRIGGER,{"shareType":e})},"success":function success(){a.emit(l.a.ON_SHARE_COMPLETED,{"shareType":e,"shareResultType":c.a.SUCCESS}),a.refreshWeChatChannelShare(e)},"fail":function fail(){a.emit(l.a.ON_SHARE_COMPLETED,{"shareType":e,"shareResultType":c.a.FAIL}),a.refreshWeChatChannelShare(e)},"cancel":function cancel(){a.emit(l.a.ON_SHARE_COMPLETED,{"shareType":e,"shareResultType":c.a.CANCEL}),a.refreshWeChatChannelShare(e)}},r);window.wx[t](n)}),this.getNormalizeErrorHandler(e))):Promise.resolve()}},{"key":"checkShareTypeEnable","value":function checkShareTypeEnable(e){return this._enableShareTypes.indexOf(e)<0?y.SHARE_TYPE_DISABLED:0}}]),WeChatShareController}(o.a);R.SUPPORTED_SHARE_TYPE=T.concat();a.default=R}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-farm/js/ms_wx_c_4c9322f9bb124a741cfa.js.map