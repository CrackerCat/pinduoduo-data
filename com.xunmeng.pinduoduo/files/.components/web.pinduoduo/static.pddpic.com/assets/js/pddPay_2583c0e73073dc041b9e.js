(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[29],{"/4cJ":function(e,r,t){"use strict";var n=t("KoDT"),a=t("h3qu"),i=t("4+4F"),o={BASIC:0,GROUP_FULL_AUTO_OPEN:1,ALIPAY_PASS_PARAMS:2,OVERSEAS_ID_CARD_VERTIFICATION:3};o.currentMaxVersion=o.OVERSEAS_ID_CARD_VERTIFICATION;var c=!1;o.getSupportVersion=function(){var e=Object(n.a)();return e.isNativePlatform?Object(a.c)(e.version,"3.51.0")>=0?o.OVERSEAS_ID_CARD_VERTIFICATION:(c||(Object(i.a)({error_msg:"app版本".concat(e.version,"使用paymentVersion1"),payload:{event:"预支付paymentVersion为1",app_version:e.version}}),c=!0),o.GROUP_FULL_AUTO_OPEN):o.OVERSEAS_ID_CARD_VERTIFICATION},r.a=o},"1R20":function(e,r,t){},"1tfv":function(e,r,t){"use strict";r.a={WechatDirect:3,UniversalPay:10050}},"4+4F":function(e,r,t){"use strict";var n=t("iuD5");r.a=function(e){var r=e.payload,t=e.error_msg,a=e.error_code,i=e.page;Object(n.a)({page:i,error_message:t,payload:r,error_code:a},{bizSide:"consumer-platform-fe",appId:"100603",testAppId:"100211"})}},"4V74":function(e,r,t){"use strict";var n=t("M2CY"),a=t("KoDT"),i=t("whv1");r.a=function(e){var r,t,o,c,s=e.paymentType,u=e.hostName,p=e.userAgent;u=location.hostname,p||(p="undefined"!=typeof window&&(window.navigator.userAgent||window.navigator.vendor||window.opera)||"");var d=Object(a.a)();r=d.isNativePlatform,t=d.isWeChatPlatform,c=d.isWeChatMiniProgram,o=d.isTinyNativePlatform;var l=!(!p||!p.match(/phh_ios_version/i)&&!p.match(/phh_android_version/i)),h=n.a.get({isModuleVersion:l,hostName:u});if(s===i.a.WeChat)return r||t||o?h.AppID.WeChat:h.AppID.WeChatH5Pay;if(s===i.a.AliPay)return r||o?h.AppID.AliPay:h.AppID.AliPayWeb;if(s===i.a.QQPay)return r?h.AppID.QQ:h.AppID.QQPublicPayment||h.AppID.QQPublic;if(s===i.a.ApplePay)return h.AppID.ApplePay;if(s===i.a.AliPayDirectDebit)return h.AppID.AliPayDirectDebit;if(s===i.a.HBInstallmentPay)return h.AppID.HBInstallmentPay;if(s===i.a.UnionPay){if(r)return 42001}else{if(s===i.a.FriendPay)return h.AppID.FriendPay;if(s===i.a.HBPay)return 322;if(s===i.a.DuoDuoPay)return 97;if(s===i.a.XianYongHouFu)return"m.hutaojie.com"===u?c?119:t?118:115:c?131:t?130:122;if(s===i.a.DuoDuoPayACS)return 135;if(s===i.a.CreditCardInstallmentPay)return 45001}return h.AppID.WeChat}},"6B3Q":function(e,r,t){"use strict";var n={Success:10001,Paying:10002,Failed:10003,NotFound:10004},a={AliPayDirectDebit:{Rollback:1e4,Unsign:10001,Paying:10002,Success:10003,Failed:10004,Unknown:16666},WechatDirectPayQuery:n,Universal:n,UniversalException:{CHANCE_EXCEEEDED:-999999,QOGIR_EXCEPTION:-999998,QOGIR_PREMATURE_END:-999997},PayStatus:{Unpayed:0,Payed:2,RefundApplied:3,Refunded:4},ParentOrderStatus:{Unpayed:0,Payed:1,Canceled:2}};r.a=a},HNyE:function(e,r,t){e.exports={container:"_2Ny6Bvgd",icon:"_2uzDwPP4",title:"caBUfFXg",dot:"_2NOQtQGO",dot1:"R9za4ygw",dot2:"vWabkAUi",dot3:"_2M_gZteX","loading-template-v2-dot1":"_1Vn2jmNY","loading-template-v2-dot3":"_rYxdl4y","loading-template-v2-dot2":"_75vPQyHx"}},"L/R6":function(e,r,t){e.exports={container:"_3-rSWiHc",icon:"raHIMvRi",title:"eIbWbqkK"}},M2CY:function(e,r,t){"use strict";var n=t("cDf5"),a=t.n(n),i=t("MVZn"),o=t.n(i),c=t("KoDT"),s={},u=Object(c.a)(),p="undefined"!=typeof location&&location.hostname.includes("yangkeduo.com"),d=!u.isNativePlatform&&p;var l={loggingURL:function(e){return"undefined"!=typeof window&&window.__LogingUrl__?window.__LogingUrl__:e?"https://th.yangkeduo.com/t.gif":"https://th.pinduoduo.com/t.gif"}(d),logRoutes:{perf:"https://tp.pinduoduo.com/p.gif",error:"https://te.pinduoduo.com/e.gif",chat_error:"https://te.pinduoduo.com/e.gif",real_error:"https://tne.pinduoduo.com/tne.gif",ad:function(e){return"undefined"!=typeof window&&window.__AdLogingUrl__?window.__AdLogingUrl__:e?"https://ta.yangkeduo.com/t.gif":"https://ta.pinduoduo.com/t.gif"}(d),tracking:"https://tldas.pinduoduo.com/e.gif"}},h={shop:{shopID:2,name:"拼多多",logo:"https://pinduoduoimg.yangkeduo.com/base/logo.jpg",weChatTimelineShareDisabled:!1,qqTimelineShareDisabled:!0},loggingURL:l.loggingURL,httpsLoggingURL:l.loggingURL,wxAppLoggingURL:"https://xcxapp.pinduoduo.com/t.gif",qqAppLoggingURL:"https://xcxapp.pinduoduo.com/qqt.gif",logRoutes:o()({download:"https://at.pinduoduo.com/p"},l.logRoutes),httpsLogRoutes:o()({},l.logRoutes),cmtURL:"http://cmtw.pinduoduo.com/api/ajax",httpsCmtURL:"https://cmtw.pinduoduo.com/api/ajax",pushDomain:"ws://ws.pinduoduo.com/",chatDomain:"ws://ws.pinduoduo.com/",wssDomain:"wss://ws.pinduoduo.com/",fileDomain:"http://file.pinduoduo.com/",httpsFileDomain:"https://file.pinduoduo.com/",qqFollowTip:"感谢关注拼多多",AppID:{FriendPay:-1,WeChat:2,WeChatWAPPay:20,SMS:5,AliPay:6,QQ:12,Weibo:11,AliPayWeb:9,QQConnect:13,QQPublicOld:27,QQPublic:30,ApplePay:31,AliPayDirectDebit:35,WeChatH5Pay:38,HBInstallmentPay:52,UnionPay:78,UnionPayWeb:79},ApiKey:{WeChat:"wx839691cce7c102bb",Weibo:"3907421985",QQConnect:"101273489",QQPublicOld:"200633114",QQPublic:"200675334",QQUIN:"1419183687",QQPublicTrack:"10000096",QQPublicMid:"1316857601",BaiduStatistics:"865a6952adbb55a10d86810cdcc6864a"},RedirectURI:{AliPayDirectDebit:"pinduoduoalipays://",Weibo:"http://mobile.yangkeduo.com/wboauth_callback.html",QQConnect:"http://mobile.yangkeduo.com/qqoauth_callback.html"},imgShareDomain:"http://m.pin3pin.com/",ContactUrl:"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170962&idx=1&sn=8763710a673d7b76f418a7ae76cff86c#rd",ForceContactUrl:"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170998&idx=1&sn=684606e474788e7f191f6f6c68d0dfe4#rd",QQContactUrl:"http://post.mp.qq.com/material/show/31343139313833363837-1472733830-1464276288782813-0.html?_wv=2281701505&v=3&sig=73182fcdc7ed1c0b6aeb3ce78501d00b&_bid=2321",thirdLevelLoginPath:"jkr_report.html"},y={AppID:{WeChat:24},ApiKey:{WeChat:"wx20392b0342c8af91"}},m={hutaojie:1,mobile:2,weipin:3,app:4,huabei:17,xibei:18,dongbei:19,huazhong:21,huadong:22,dongnan:23,xinan:24,panduoduo:25,sc:26,hybrid:"hybrid",hybridTest:"hybridTest",huanan:40,hzsc:41,dnsc:42,dbsc:43,xbsc:44,xnsc:45,hnsc:46,hbsc:47,pddpt:48,m:49,mm:66,myqxgs:68,mobpinduoduo:72,mmpinduoduo:73,mobilepinduoduo:74,mobileddlequ:75,nvude3:82,mobnvude3:83,mpinduoduo:63,mddlequ:85,hhngpinduoduo:129},f="https://mobile.yangkeduo.com/",v="https://mobile.yangkeduo.com/";s[m.hutaojie]={},s[m.mobile]={domain:"https://mobile.yangkeduo.com/",BeiTaiShareDomains:["http://mobile.pinduoduo.net/"]},s[m.weipin]={domain:"https://weipin.yangkeduo.com/",AppID:{WeChat:m.weipin},ApiKey:{WeChat:"wx51e5fe8c95f71b20"}},s[m.huabei]={domain:"https://huabei.yangkeduo.com/",AppID:{WeChat:m.huabei},ApiKey:{WeChat:"wx4044e9709b7188ea"}},s[m.xibei]={domain:"https://xibei.yangkeduo.com/",AppID:{WeChat:m.xibei},ApiKey:{WeChat:"wxbc80866520cc300d"}},s[m.dongbei]={domain:"https://dongbei.yangkeduo.com/",AppID:{WeChat:m.dongbei},ApiKey:{WeChat:"wx27901e8ab752ed35"}},s[m.huazhong]={domain:"https://huazhong.yangkeduo.com/",AppID:{WeChat:m.huazhong},ApiKey:{WeChat:"wx95c952f67a727090"}},s[m.huadong]={domain:"https://huadong.yangkeduo.com/",AppID:{WeChat:m.huadong},ApiKey:{WeChat:"wx03908118b84f285a"}},s[m.dongnan]={domain:"https://dongnan.yangkeduo.com/",AppID:{WeChat:m.dongnan},ApiKey:{WeChat:"wxff2e8dc2762c5b92"}},s[m.xinan]=o()({domain:"https://xinan.yangkeduo.com/"},y),s[m.panduoduo]={},s[m.sc]={domain:"https://sc.yangkeduo.com/",AppID:{WeChat:m.sc},ApiKey:{WeChat:"wx32b0d9cdd390ebf0"}},s[m.app]={domain:"https://app.yangkeduo.com/",AppID:{WeChat:4},ApiKey:{WeChat:"wx77d53b84434b9d9a"}},s[m.hybrid]={shareDomain:"https://mobile.yangkeduo.com/",AppID:{WeChat:4},ApiKey:{WeChat:"wx77d53b84434b9d9a"}},s[m.hybridTest]={};var g="http://mp.weixin.qq.com/s?__biz=MzAxMjcyMTkwOA==&mid=401487202&idx=1&sn=37de9db39432edc32e1eb90d885d7a23#rd";function b(e,r,t){t&&(r.apiDomain=r.apiDomain?r.apiDomain:t,r.apiDomainNew=r.apiDomain,r.apiDomainV3=r.apiDomain);var n=r.domain||r.shareDomain||f;for(var i in r.shareDomain||(r.shareDomain=n),r.shareDomains={},e)if(e.hasOwnProperty(i)){var o=e[i];[e.QQChatSession,e.QQZone].indexOf(o)>=0?r.domain&&r.domain.indexOf("m.hutaojie.com")>=0?r.shareDomains[o]=r.shareDomain:r.shareDomains[o]=v:r.shareDomains[o]=r.shareDomain}return function(){for(var e={},r=0;r<arguments.length;r++)"object"===a()(arguments[r])&&P(e,arguments[r]);return e}(h,r)}function P(e,r){for(var t in r)if(r.hasOwnProperty(t)){var n=r[t],i=a()(n);"number"===i||"string"===i||"boolean"===i?e[t]=n:"object"===i?(e[t]=e[t]||{},P(e[t],n)):_(n)&&(e[t]=e[t]||[],P(e[t],n))}}function _(e){return"[object Array]"===Object.prototype.toString.call(e)}s[m.huanan]={shareDomain:"https://huanan.yangkeduo.com/",AppID:{WeChat:40},ApiKey:{WeChat:"wxaffd94b821032481"},ContactUrl:g},s[m.hzsc]={shareDomain:"https://hzsc.yangkeduo.com/",AppID:{WeChat:41},ApiKey:{WeChat:"wx7bca1a27af0a31ed"},ContactUrl:g},s[m.dnsc]={shareDomain:"https://dnsc.yangkeduo.com/",AppID:{WeChat:42},ApiKey:{WeChat:"wxb79645ae502205d9"},ContactUrl:g},s[m.dbsc]={shareDomain:"https://dbsc.yangkeduo.com/",AppID:{WeChat:43},ApiKey:{WeChat:"wx01e7a1f91b8c43d3"},ContactUrl:g},s[m.xbsc]={shareDomain:"https://xbsc.yangkeduo.com",AppID:{WeChat:44},ApiKey:{WeChat:"wxc50a66d9b6d566ed"},ContactUrl:g},s[m.xnsc]={shareDomain:"https://xnsc.yangkeduo.com",AppID:{WeChat:45},ApiKey:{WeChat:"wx52457b6561fcd804"},ContactUrl:g},s[m.hnsc]={shareDomain:"https://hnsc.yangkeduo.com",AppID:{WeChat:46},ApiKey:{WeChat:"wx8e75952076e03567"},ContactUrl:g},s[m.hbsc]={shareDomain:"https://hbsc.yangkeduo.com",AppID:{WeChat:47},ApiKey:{WeChat:"wx7388833e69aafd89"},ContactUrl:g},s[m.pddpt]={shareDomain:"https://pddpt.yangkeduo.com",AppID:{WeChat:48},ApiKey:{WeChat:"wxe1b0f22089fadce1"},ContactUrl:g},s[m.m]={domain:"https://m.ishangtong.com",shareDomain:"https://m.ishangtong.com",AppID:{WeChat:48},ApiKey:{WeChat:"wxe1b0f22089fadce1"},ContactUrl:g},s[m.mm]={shareDomain:"https://mm.ishangtong.com",AppID:{WeChat:66},ApiKey:{WeChat:"wxf05b577296a1b6ec"},ContactUrl:g},s[m.myqxgs]={domain:"https://m.yiqixiegushi.com",shareDomain:"https://m.yiqixiegushi.com",AppID:{WeChat:66},ApiKey:{WeChat:"wxf05b577296a1b6ec"},ContactUrl:g},s[m.mobpinduoduo]={shareDomain:"https://mob.pinduoduo.com",AppID:{WeChat:56},ApiKey:{WeChat:"wx1e2715638762a51b"},ContactUrl:g},s[m.mmpinduoduo]={shareDomain:"https://mm.pinduoduo.com",AppID:{WeChat:57},ApiKey:{WeChat:"wxa19650a24138625a"},ContactUrl:g},s[m.mobileddlequ]=o()({shareDomain:"https://mobile.ddlequ.com/"},y),s[m.mddlequ]=o()({shareDomain:"https://m.ddlequ.com/"},y),s[m.mobilepinduoduo]={domain:"https://mobile.pinduoduo.com",shareDomain:"https://mobile.pinduoduo.com"},s[m.nvude3]=function(){var e="https://m.nvude3.com";return{useProxyDomain:1,domain:e,shareDomain:e,AppID:{WeChat:67},ApiKey:{WeChat:"wx15ee6b92001c5295"},ContactUrl:g,loggingURL:e+"/proxy/th/t.gif",httpsLoggingURL:e+"/proxy/th/t.gif",logRoutes:{error:e+"/proxy/te/e.gif",chat_error:e+"/proxy/te/e.gif",real_error:e+"/proxy/tne/tne.gif"},httpsLogRoutes:{error:e+"/proxy/te/e.gif",chat_error:e+"/proxy/te/e.gif",real_error:e+"/proxy/tne/tne.gif"}}}(),s[m.mobnvude3]={shareDomain:"https://mob.nvude3.com",AppID:{WeChat:65},ApiKey:{WeChat:"wx86161385b94a2ed7"},ContactUrl:g},s[m.mpinduoduo]={shareDomain:"https://mobile.yangkeduo.com/",AppID:{WeChat:m.mpinduoduo},ApiKey:{WeChat:"wx2993126642818cea"}},s[m.hhngpinduoduo]={shareDomain:"https://hhng.pinduoduo.com/",AppID:{WeChat:m.hhngpinduoduo},ApiKey:{WeChat:"wx8aeafb2c4c5252fa"}};var w={hutaojie:{m:"hutaojie",app:"apptest"},yangkeduo:{mobile:"mobile",app:"app",huabei:"huabei",xibei:"xibei",dongbei:"dongbei",xinan:"xinan",huazhong:"huazhong",dongnan:"dongnan",huadong:"huadong",panduoduo:"panduoduo",sc:"sc",huanan:"huanan",hzsc:"hzsc",dnsc:"dnsc",dbsc:"dbsc",xbsc:"xbsc",xnsc:"xnsc",hnsc:"hnsc",hbsc:"hbsc",pddpt:"pddpt",weipin:"weipin"},ishangtong:{m:"m",mm:"mm"},yiqixiegushi:{m:"myqxgs"},pinduoduo:{mob:"mobpinduoduo",mm:"mmpinduoduo",mobile:"mobilepinduoduo",m:"mpinduoduo",hhng:"hhngpinduoduo"},nvude3:{m:"nvude3",mob:"mobnvude3"},ddlequ:{mobile:"mobileddlequ",m:"mddlequ"}};r.a={get:function(e){var r,t=function(e){var r={hostName:e||"",hasThirdLevelDomain:!1};if(!e)return r.hostName=".",r;var t=["m.ishangtong.com","m.yiqixiegushi.com","m.hutaojie.com"],n=e.split("."),a=n.length;if(a<=3)return r;for(var i=n[a-2],o=0;o<t.length;o++){var c=t[o];if(c.indexOf(i)>0)return r.hostName=c,r.hasThirdLevelDomain=!0,r}return r}((e=e||{}).hostName),n=t.hostName||".",a=n.split(".");if(e.isModuleVersion){var i="undefined"!=typeof window?location.href.indexOf("hutaojie")>=0:n.indexOf("hutaojie")>=0;r=s[i?m.hybridTest:m.hybrid]}else a.length>=2&&w[a[1]]&&(r=s[m[w[a[1]][a[0]]]]);return r||(r=s[m.mobile]),r.hasThirdLevelDomain=t.hasThirdLevelDomain||!1,b(e.shareType,r,e.defaultApiDomain)}}},"Ms5+":function(e,r,t){"use strict";var n=t("whv1");t.d(r,"a",function(){return n.a});var a=t("NyLG");t.d(r,"b",function(){return a.a})},NyLG:function(e,r,t){"use strict";r.a={Normal:"",Tail:"tail",Combine:"combine"}},Y2vK:function(e,r,t){"use strict";var n=t("KoDT"),a=t("h3qu"),i=t("MpJ2"),o=t("whv1"),c=function(){};r.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;var t=Object(n.a)();t.system===a.b.IOS&&t.isNativePlatform?window.__isMagic__?e():Object(a.c)(t.version,"3.43.0")>=0?Object(i.g)("PDDPayment","getAvailableTypes",{}).then(function(t){(t&&t.types||[]).indexOf(o.a.ApplePay)>=0?e():r()}).catch(r):Object(i.g)("AMPay","canSupportApplePay",{}).then(function(t){0===t.status?e():r()}).catch(r):r()}},eJ5W:function(e,r,t){e.exports={container:"_30PbIoSp",icon:"_2G595Nyr",title:"_1ZZe67P-"}},gzrZ:function(e,r,t){"use strict";t.r(r);var n=t("MVZn"),a=t.n(n),i=t("o0o1"),o=t.n(i),c=t("yXPU"),s=t.n(c),u=t("lwsE"),p=t.n(u),d=t("W8MJ"),l=t.n(d),h=t("mwIZ"),y=t.n(h),m=t("KoDT"),f=t("MpJ2"),v=t("h3qu"),g=(t("p+lt"),{fadeIn:function(e,r){r=r||{};var t=0;this.animate_({duration:r.duration,step:function(r){t+=r,e.style.opacity=t},complete:r.complete})},fadeOut:function(e,r){void 0!==r&&null!=r||(r={});var t=1;this.animate_({duration:r.duration,step:function(r){t-=r,e.style.opacity=t},complete:r.complete})},animate_:function(e){var r=this;(e=e||{}).duration=e.duration||300,null==e.easing&&(e.easing=function(e){return r.easing_.linear(e)}),e.lastProgress=e.easing(0);var t=Date.now(),n=setInterval(function(){var r=Date.now()-t,a=e.easing(Math.min(1,r/e.duration)),i=a-e.lastProgress;null!=e.step&&e.step(i),a>=1&&(clearInterval(n),null!=e.complete&&e.complete()),e.lastProgress=a},1e3/24)},easing_:{linear:function(e){return e}}}),b=document.createElement("div");b.innerHTML='<div class="icon-toast-container">\n    <div class="icon-toast">\n        <div class="icon-toast-background"></div>\n        <div class="icon-toast-box">\n            <i id="icon-toast-icon" class="icon icon-toast-icon"></i>\n        </div>\n        <div id="icon-toast-msg" class="icon-toast-msg"></div>\n    </div>\n</div>';var P=b.firstChild;document.body.appendChild(P);var _={show:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.showDuration||2e3,a=t.complete,i=t.forceH5,o=void 0!==i&&i,c=Object(m.a)(),s=c.isNativePlatform,u=Object(v.c)(c.version,"3.51.0")>=0;if(s&&!o)u?Object(f.g)("PDDUIController","showHUD",{type:1,duration:n,theme:1,message:r,complete:a}):(n=Math.max(n,1e3),Object(f.g)(c.system===v.b.Android?"JSAlert":"AMUIControl","toast",{message:r}),setTimeout(a,n));else{var p=this,d=document.querySelector(".icon-toast"),l=document.getElementById("icon-toast-msg"),h=document.getElementById("icon-toast-icon");t.extraClass&&h.classList.add(t.extraClass),h.innerHTML=e||"",l.innerHTML=r.replace(/\n/g,"<br/>"),d.style.display="block",d.style.opacity=0,g.fadeIn(d,{duration:300,complete:function(){n>=0&&setTimeout(function(){p.hide(function(){null!=t.complete&&t.complete()})},n)}})}},hide:function(e){var r=document.querySelector(".icon-toast");null!=r&&g.fadeOut(r,{duration:300,complete:function(){r.style.display="none",null!=e&&e()}})}},w=t("a1gu"),C=t.n(w),S=t("Nsbk"),k=t.n(S),D=t("7W2i"),x=t.n(D),O=t("q1tI"),A=t.n(O),I=t("i8i4"),T=t.n(I),j=t("2xwX"),E=t("J4zp"),W=t.n(E);t("1R20"),A.a.createElement("svg",{t:"1607528053620",className:"mianmi-spinner-icon ddpay",fill:"#ffffff",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35886",width:"84",height:"84"},A.a.createElement("path",{d:"M215.086545 111.86424234a83.316364 83.316364 0 0 1 95.883637 0.558546l159.371636 113.477818a83.362909 83.362909 0 0 0 96.814546 0l150.574545-107.426909a83.316364 83.316364 0 0 1 97.140364 0.279272l151.319272 109.149091c21.922909 15.825455 34.816 41.332364 34.536728 68.375273l-2.885818 271.778909a83.223273 83.223273 0 0 1-35.560728 67.304727l-64.698182 45.149091 4.235637-2.885818-346.577455 242.129455a83.362909 83.362909 0 0 1-96.954182-1.024l-400.896-292.957091A83.223273 83.223273 0 0 1 23.272727 557.76969734l2.885818-271.965091a83.223273 83.223273 0 0 1 35.74691-67.490909z m461.21891 255.394909l-180.596364 180.596364-93.556364-93.463273-47.802182 47.848727 141.079273 141.125819 228.491637-228.491637-47.616-47.616z","p-id":"35887"})),A.a.createElement("svg",{className:"mianmi-spinner-icon xyhf",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},A.a.createElement("path",{d:"M1005.943 775.828c-.949-1.694-2.088-3.241-3.475-4.57-3.416-3.227-8-5.241-13.067-5.241-2.248 0-4.38.452-6.394 1.182l-266.64 127.356c-3.314 1.212-6.891 1.913-10.629 1.913a30.836 30.836 0 0 1-16.965-5.067l-66.766-47.537a10.412 10.412 0 0 0-6.205-2.059c-5.723 0-10.366 4.643-10.366 10.366 0 1.49.38 3.008.993 4.366l56.59 124.158 1.357 2.978c3.548 6.322 10.293 10.6 18.06 10.6a20.64 20.64 0 0 0 9.33-2.234l2.277-1.314s305.33-189.522 306.41-190.296c4.804-3.46 7.958-9.052 7.958-15.418 0-3.343-.95-6.453-2.468-9.183",fill:"#25B513"}),A.a.createElement("path",{d:"M514.272 313.77c67.408 0 122.26 54.851 122.26 122.26 0 30.776-11.767 60.312-33.142 83.205l-2.014 2.16 1.693 2.424 107.573 153.636-43.523 30.47-108.872-155.49-1.577-2.248-2.613.905c-13.987 4.833-27.01 7.198-39.785 7.198-12.76 0-25.769-2.365-39.77-7.198l-2.614-.905-1.577 2.248-108.872 155.49-43.537-30.47L425.489 523.82l1.694-2.423-2.015-2.161c-21.374-22.893-33.156-52.443-33.156-83.205 0-67.409 54.852-122.26 122.26-122.26zm.006 53.137c-38.12 0-69.117 31.01-69.117 69.117 0 38.12 30.996 69.13 69.117 69.13 38.12 0 69.116-31.01 69.116-69.13 0-38.106-30.996-69.117-69.116-69.117zm494.554 101.535c7.213-8.906 10.235-20.338 8.293-31.332-1.942-11.008-8.687-20.703-18.513-26.601L861.65 328.282c-1.022-.818-2.54-3.446-2.716-4.38l-2.76-160.104c-.204-11.446-5.226-22.148-13.782-29.331-8.555-7.169-19.958-10.308-31.287-8.483l-157.783 25.039c-1.036-.102-4.16-.993-4.905-1.606L543.399 28.544c-7.519-8.644-18.235-13.608-29.404-13.608-11.184 0-21.9 4.964-29.42 13.608l-104.769 120.61c-.993.876-3.825 1.898-4.789 1.913L216.87 125.984c-11.315-1.796-22.718 1.3-31.273 8.483-8.556 7.183-13.593 17.885-13.783 29.331l-2.73 159.724c-.204 1.314-1.723 3.942-2.438 4.555L29.376 410.51c-9.825 5.898-16.57 15.593-18.512 26.601-1.942 10.994 1.08 22.426 8.293 31.346l100.58 124.1c.685 1.139 1.211 4.117 1.05 5.066l-52.15 151.373c-3.738 10.833-2.673 22.601 2.905 32.28 5.591 9.68 15.242 16.484 26.499 18.674l156.818 30.427c1.256.423 3.577 2.38 4.074 3.197l57.334 149.49c4.102 10.701 12.483 19.023 22.98 22.848 10.512 3.826 22.28 2.833 32.31-2.73l139.707-77.497c1.212-.467 4.22-.467 5.14-.16l92.053 51.056-39.64-86.958c-3.547-7.825-5.416-16.425-5.416-24.878 0-33.098 26.922-60.035 60.02-60.035 12.79 0 24.967 3.971 35.289 11.475l56.4 40.15L956.594 740.98l-49.305-143.007c-.248-1.3.278-4.278.745-5.11l100.798-124.421z",fill:"#25B513"})),A.a.createElement("img",{className:"mianmi-spinner-icon",src:"https://funimg.pddpic.com/transaction/pay_icon/mianmi.png.slim.png"});var N=t("HNyE"),M=t.n(N),F=A.a.createElement("svg",{t:"1631178532091",viewBox:"0 0 1024 1024"},A.a.createElement("path",{d:"M943.3 147.7C811.4 142 685 97.8 567.9 16.3L545.7 0.8l-22.1 15.4C406.4 97.8 280.1 142.1 149 147.7h-41.4v345.8c0 253.4 176.4 470.3 428.7 527.5l11 1.8 7.9-1.8c252.4-57.2 428.6-274.1 428.6-527.5V147.7h-40.5zM516.2 686.8L323.9 494.4l51.6-51.6 140.6 140.7 246.6-246.7 51.6 51.6-298.1 298.4z"}));var U=function(e){var r=e.title,t=e.callbacks,n=void 0===t?{}:t,a=Object(O.useState)(!0),i=W()(a,2),o=i[0],c=i[1];n.hideLoading=function(){return c(!1)},n.showLoading=function(){return c(!0)};var s={display:o?"block":"none",opacity:o?1:0};return A.a.createElement("div",{className:M.a.container,style:s},A.a.createElement("div",{className:M.a.icon},F),A.a.createElement("div",{className:M.a.title},r),A.a.createElement("div",{className:M.a.dot1}),A.a.createElement("div",{className:M.a.dot2}),A.a.createElement("div",{className:M.a.dot3}))},L=t("L/R6"),R=t.n(L),Q=A.a.createElement("svg",{viewBox:"0 0 1024 1024"},A.a.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var q=function(e){var r=e.title,t=e.callbacks,n=void 0===t?{}:t,a=Object(O.useState)(!0),i=W()(a,2),o=i[0],c=i[1];n.hideLoading=function(){return c(!1)};var s={display:o?"block":"none",opacity:o?1:0};return A.a.createElement("div",{className:R.a.container,style:s},A.a.createElement("div",{className:R.a.icon},Q),A.a.createElement("div",{className:R.a.title},r))},H=t("eJ5W"),B=t.n(H),X=A.a.createElement("svg",{viewBox:"0 0 1024 1024"},A.a.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var V=function(e){var r=e.title,t=e.payInfoTitle,n=e.callbacks,a=void 0===n?{}:n,i=Object(O.useState)(!0),o=W()(i,2),c=o[0],s=o[1];a.hideLoading=function(){return s(!1)};var u={display:c?"block":"none",opacity:c?1:0};return A.a.createElement("div",{className:B.a.container,style:u},A.a.createElement("div",{className:B.a.icon},X),A.a.createElement("div",{className:B.a.title},t),A.a.createElement("div",{className:B.a.title},r))},K=t("whv1"),J=function(){function e(r){p()(this,e),this.dom=r}return l()(e,[{key:"showSpinner",value:function(){Object(j.b)()}},{key:"hideSpinner",value:function(){Object(j.a)()}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"markSwitched",value:function(){}},{key:"markDuringMianmi",value:function(){}},{key:"markSignXianYongHouFu",value:function(){}},{key:"showSuccess",value:function(){}}]),e}(),Y=function(e){function r(){var e,t;p()(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=C()(this,(e=k()(r)).call.apply(e,[this].concat(a)))).callbacks={},t.switched=!1,t}return x()(r,e),l()(r,[{key:"markSwitched",value:function(){this.switched=!0}},{key:"show",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title,r=void 0===e?"免密支付中":e;Object(j.a)(),T.a.render(A.a.createElement(U,{title:r,callbacks:this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}},{key:"showSuccess",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.title,n=void 0===t?"支付成功":t,a=r.payInfoTitle;return this.switched?T.a.render(A.a.createElement(V,{payInfoTitle:a,title:n,callbacks:this.callbacks}),this.dom):T.a.render(A.a.createElement(q,{title:n,callbacks:this.callbacks}),this.dom),new Promise(function(r){setTimeout(function(){e.hide(),r()},1500)})}},{key:"hide",value:function(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}]),r}(J),G=function(e){function r(e,t){var n;return p()(this,r),(n=C()(this,k()(r).call(this,e))).callbacks={},n.switched=!1,n.duringMianmi=!1,n.signXyhf=!1,n.renderProcess=Promise.resolve(),n.showSafeHint=t,n}return x()(r,e),l()(r,[{key:"markSwitched",value:function(){this.switched=!0}},{key:"markDuringMianmi",value:function(){this.duringMianmi=!0}},{key:"markSignXianYongHouFu",value:function(){this.signXyhf=!0}},{key:"getMianmiText",value:function(e){return e===K.a.WeChat?"微信支付":e===K.a.DuoDuoPay?"多多支付":e===K.a.AliPayDirectDebit?"支付宝":void 0}},{key:"show",value:function(){var e=s()(o.a.mark(function e(){var r,t,n,a,i=this,c=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>0&&void 0!==c[0]?c[0]:{},t=r.title,n=void 0===t?"免密支付中":t,a=r.paymentType,Object(j.a)(),this.duringMianmi){e.next=6;break}this.realShow(n),e.next=10;break;case 6:if(!this.switched||this.signXyhf&&a===K.a.XianYongHouFu){e.next=8;break}return e.abrupt("return");case 8:this.showSafeHint&&(this.showSafeHint=!1,this.renderProcess=this.renderProcess.then(function(){return i.realShow("安全检测通过"),new Promise(function(e){return setTimeout(e,600)})})),this.renderProcess=this.renderProcess.then(function(){return i.realShow(i.signXyhf&&a===K.a.XianYongHouFu?n:i.getMianmiText(a)),new Promise(function(e){return setTimeout(e,600)})});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"realShow",value:function(e){T.a.render(A.a.createElement(U,{title:e,callbacks:this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}},{key:"showSuccess",value:function(){var e=s()(o.a.mark(function e(){var r,t,n,a,i=this,c=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},t=r.title,n=void 0===t?"支付成功":t,a=r.payInfoTitle,e.next=3,this.renderProcess;case 3:return this.switched?T.a.render(A.a.createElement(V,{payInfoTitle:a,title:n,callbacks:this.callbacks}),this.dom):T.a.render(A.a.createElement(q,{title:n,callbacks:this.callbacks}),this.dom),e.abrupt("return",new Promise(function(e){setTimeout(function(){i.realHide(),e()},1500)}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"hide",value:function(){var e=s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.renderProcess;case 2:this.realHide();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"realHide",value:function(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}]),r}(J),z=new(function(){function e(){p()(this,e),this.el=null,this.renderer=null,this.currentPaymentType=null,this.startChannel=null,this.mianmiChannels=[]}return l()(e,[{key:"getDom",value:function(){return this.el||(this.el=document.createElement("div"),this.el.setAttribute("id","pdd-pay-loading-manager"),document.body.appendChild(this.el)),this.el}},{key:"dispose",value:function(){this.el&&document.body.removeChild(this.el),this.el=null}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.paymentType,t=e.mianmiV3,n=e.mianmiV3SafeHint;this.currentPaymentType=r;var a=this.getDom();this.renderer=t?new G(a,n):new Y(a)}},{key:"showSpinner",value:function(){this.renderer.showSpinner()}},{key:"hideSpinner",value:function(){this.renderer.hideSpinner()}},{key:"markDuringMianmi",value:function(){this.renderer.markDuringMianmi()}},{key:"markSignXianYongHouFu",value:function(){this.renderer.markSignXianYongHouFu()}},{key:"show",value:function(e){this.renderer.show(a()({},e,{paymentType:this.currentPaymentType}))}},{key:"hide",value:function(){return this.renderer.hide()}},{key:"isMianmiChannelUsed",value:function(e){return this.startChannel===e||this.mianmiChannels.includes(e)}},{key:"recordMianmiChannel",value:function(e){this.mianmiChannels.push(e),this.renderer.markSwitched()}},{key:"showSuccess",value:function(e){return this.renderer.showSuccess(e)}},{key:"isSwitched",get:function(){return this.mianmiChannels.length>0}}]),e}()),Z=t("6B3Q"),$=t("NyLG"),ee=t("Ms5+"),re=function(e){var r={};return Object.keys(e).forEach(function(t){r[t]={code:t,message:e[t]}}),r}({1101:"手机网络繁忙，请稍后再试",30400:"没有安装QQ客户端",40000:"错误的请求地址或方法",40001:"登录已过期，请重新登录",40002:"手机网络繁忙，请稍后再试",40003:"错误的请求参数",40004:"微信登录失败",40005:"请求还在处理中",40006:"手机登录验证码错误",40100:"暂未开通该开放平台",40015:"验证码重复请求",40016:"验证码超出当天限制",40017:"今日可发送次数已达上限",40018:"验证码填写错误",40019:"验证码填写超时",40020:"登录失败",40031:"微信登录失败!",40032:"QQ登录失败!",40033:"登录重试失败，请稍后再试",43058:"",41001:"商品不存在",41002:"商品已下架",41003:"商品已售罄",41004:"商品不在同一商店",41005:"该商品当前不在抽奖活动时间",41006:"商品不在可售区域",41101:"抽奖活动暂不支持单独购买",41102:"卡券可使用的时间已过期，请选购其他商品",42001:"拼单已满",42002:"该拼单不存在",42003:"拼单已过期",42004:"您购买此商品次数达到上限，去看看其他商品吧~",42005:"该商品开团数已达上限",42006:"拼单已满",42007:"此拼单已满，正在发起新拼单...",42501:"订单已成团，暂不支持修改收货地址，请与商家客服联系",42502:"该订单已拼单成功，请刷新页面",43001:"用户不存在",43002:"地址错误",43004:"身份证号不存在",43005:"姓名和身份证号不一致",43006:"对不起，您无法获取或更新身份证号",43007:"对不起，您已用完当前最大验证次数，请24小时后再试",43008:"姓名和身份证不匹配，请重新认证",43009:"您今日认证过于频繁，请明天再试",43010:"该地址已存在",43011:"该地址无法导入",43013:"一小时内不能重复提交",43015:"只允许微信用户够买",43016:"创建地址失败",43017:"最多只能添加100个收货地址哦~",43098:"您在店铺没有拼单成功记录，请勿发红包！拼多多不支持通过发红包购买商品！",43099:"该商品仅限新用户购买一件哦~",44001:"优惠券不存在",44002:"优惠券已使用",44003:"优惠券没有达到最小使用金额",44004:"优惠券已过期",44005:"优惠券不属于用户",44006:"优惠券已废弃",44007:"优惠券暂未到使用时间",44008:"优惠券不能在该分类使用",44010:"优惠券已经抢完了，下次早点来哦",44011:"您已经领过该优惠券",44012:"优惠券领取失败",44015:"不是团长不能使用团长免单优惠券",44016:"优惠券批次不存在",44020:"正在处理中，请稍后再试！",44026:"该券太火爆，全部已被领完",44027:"活动已结束！",44033:"优惠券使用失败",44035:"批次类型错误",44036:"团免券已被领完",44037:"用户已达团免券日领取上限",44038:"您已领取该券",44039:"未找到符合条件的团免券批次",44041:"领取失败",44042:"领取链接已失效，下次早点哦",44043:"不符合领取条件哦",44044:"该优惠券活动不存在",44045:"不在活动时间",44046:"只有无订单的新用户可领取哦",44047:"红包券数量不够",44061:"多件优惠活动结束",44063:"多件优惠已经享受过了",44064:"多件优惠活动暂未开始",44065:"多件优惠活动暂未开始",44066:"多件优惠活动结束",44067:"商家券和多件优惠活动不能同时使用",44072:"分享码已过期",44073:"免拼卡不足",44076:"不符合免拼卡的使用条件",44090:"商品活动未开始",44091:"商品活动已结束",44092:"商品活动不存在",44093:"活动商品已售罄",44095:"商品活动已结束",44096:"商品活动不存在",44097:"您购买的该活动商品数量已达上限",44098:"商品订单已创建",44099:"商品活动有误",44100:"您未获取抢购资格，不可购买该商品",44200:"已达红包使用数量上限",44201:"每满{0}元可用{1}个红包",45001:"订单不存在",45002:"订单不属于该用户",45003:"订单不能取消",45004:"订单商品不一致",45005:"订单已经收货",45006:"订单还未发货",45007:"海淘订单没有提交身份证",45008:"订单已支付",45009:"支付繁忙，请重试",45010:"订单正在支付中",45012:"手机充值号码为空",45013:"手机充值号码不支持",45014:"手机充值商品不存在",45015:"确认收货失败",45023:"正在处理您的退款/售后申诉，无法主动确认收货",45026:"超过购买商品限制",45030:"订单正在处理中，请刷新页面",45031:"单次购买金额不得高于9.5万元",45033:"超过每个手机号码购买次数限制",45034:"抱歉，秒杀尚未开始，请稍候",45035:"该商品为App新人专享秒杀，非首次下载App24小时内的用户无法发起拼单",45036:"每名用户只能购买一次哦",45037:"你的当前登录帐号有些风险哦，建议先直接去充值吧",45038:"包月套餐订单购买免密校验失败",45039:"包月套餐功能升级中，当前只支持微信帐号登录的用户哦",45040:"限购商品暂时无法购买哦～",45041:"本次活动期间已抢到过一张神券，不能再抢了~",45042:"手机网络繁忙，请稍后再试",45043:"该类型商品本次活动期间您已抢过，不能再抢了~",45044:"您好，该商品仅可购买一次哦~",45045:"该商品仅能在拼多多App中购买！",45046:"该商品仅允许微信登录用户购买！",45047:"超过该商品每次购买件数限制",45050:"您已经在本场下过单了，去看看其他商品吧~",45051:"已购买过此类优惠商品，看看其他商品吧",45052:"您最近购买此商品次数达到上限，去看看其他商品吧~",45053:"手机网络繁忙，请稍后再试",45054:"需验证码校验！",45055:"手机网络繁忙，请稍后再试",45104:"不是定金类型订单",45105:"订单已取消",45106:"订单已确认",45107:"定金未成团",45206:"创建订单存在风险",45207:"创建订单验证码非法",45208:"价格有变动，请返回上一页查看",45209:"请更换支付方式，花呗分期暂不可用",45210:"手机网络繁忙，请稍后再试",45301:"店铺补差价金额达到上限！",45320:"未获取活动资格！",45321:"该活动必须是微信APP用户参加！",45322:"该活动同一用户不可重复参加！",45323:"该活动同一设备不可重复参加！",45324:"该活动用户微信置信度较低！",45325:"非APP新用户",45326:"手机网络繁忙，请稍后再试",45327:"账户存在风险，无法下单",45402:"该商品秒杀活动已结束",45403:"该商品免单活动已结束",45404:"该商品买二送一活动已结束",45405:"该商品秒杀活动已结束",45406:"该活动已结束",45407:"该活动已结束",45110:"未到尾款支付时间",45111:"超过尾款支付时间",45112:"未到定金支付时间",45113:"超过定金支付时间",45412:"该商品多件优惠活动已结束",45413:"该商品限时免单活动已结",45416:"该商品优惠活动已结束",45417:"该活动已结束",45418:"该优惠商品已被抢空",45420:"该活动已结束",45422:"该活动已结束",45423:"该活动已结束",45424:"该包月活动已结束",45425:"您向商家补的差价已经超过上限",45428:"该商品属于活动商品，无法正常购买",45429:"该地区暂时无货",45450:"此海淘商品仅支持微信支付",45500:"商品信息和充值号码不匹配",45501:"新地址暂不支持，请重新选择",45511:"您不是专属用户，不能以特惠价开团哦~",45514:"库存不足",45515:"低于最低起售件数",45516:"该商品有更低价的优惠活动，请刷新购买",46001:"团订单不存在",46002:"无法重复参团",46012:"商品售罄，免拼失败，拼单到期后将退款",46013:"秒杀活动结束，免拼失败，拼单到期后将退款",46014:"插队拼单已满",47003:"限量件数已被抢光，请重新选购",47101:"支付失败，限时折扣活动已结束",47102:"支付失败，限量折扣活动已结束，请重新购买",47010:"折扣活动检查失败",47011:"限时折扣活动已经使用",47012:"限时折扣活动未开启",47013:"限时折扣活动未到开始时间",47014:"限时折扣活动已经结束",47015:"商家券和限时折扣活动不能同时使用",47030:"已经催过了，正在尽快发货",47031:"催发货请求异常，请稍后重试",48001:"图片格式错误",48002:"图片大小超过限制",49001:"商品不存在",50000:"当前访问人数较多，请稍后再试",50001:"今天票数已用完，明天再来吧",50002:"当前有未完成的团",80001:"投票活动已结束",60000:"",60001:"该团已经结束",60002:"确认收货失败",60003:"参数错误",60004:"您已退款成功，无须确认收货",60005:"用户拒绝",60006:"用户取消",60007:"确认收货失败，请稍后重试",60100:"未安装微信客户端",60110:"未安装微博客户端",60120:"未安装手机QQ",60200:"录制失败",60201:"录音没有权限",60205:"录音时间过短",60210:"上传失败",60220:"播放失败",71001:"获取售后列表失败",71002:"申请售后失败",71003:"获取售后单详情失败",71004:"售后单添加售后信息失败",71005:"售后单修改失败",71006:"撤销售后失败",71007:"售后单用户确认发货失败",71008:"售后单重新申请失败",71009:"售后单申请平台介入失败",71010:"钱款去向查询失败",71011:"留言标记失败",71012:"售后用户待处理未读数量获取失败",71013:"售后未读留言数目获取失败",71014:"获取付款类型失败",71015:"获取售后原因失败",71016:"获取我要发货列表失败",71017:"获取是否使用平台优惠券失败",71018:"售后单用户确认完成失败",71019:"获取小额打款详情失败",71020:"填写账户信息失败",450130:"商品信息和充值号码不匹配",450131:"该商品每个号码每月限充一次",530001:"团不存在",530002:"团已失效",530003:"团已满",530004:"助力单不存在",530005:"不支持该支付方式",530006:"助力单已支付",530007:"助力单已退款",530008:"不在活动时间",530009:"您已经拿过该商品了，不要贪心哦",530010:"已达到今日帮忙付款次数上限，明日再来吧",530011:"已达到今日帮助该好友次数上限，明日再来吧~",530012:"已经达到帮助该好友支付次数上限，赶紧去帮助其他人吧~",530013:"不符合免费帮忙条件",530014:"您不是拼多多App新人，不能开团哦",144073:"您没有免拼卡，请返回重新下单",144076:"不符合免拼卡的使用条件",144078:"请求失败，请重新发起支付",152001:"限量折扣活动已经使用",152002:"限量折扣活动未开启",152003:"限量折扣活动未到开始时间",152004:"限量折扣活动已经结束",152005:"商家券和限量折扣活动不能同时使用",152006:"限量件数已被抢光，请重新选购",152010:"已达到该商品活动期内的最多购买件数，不能再抢了～",3000001:"充值失败，请稍后重试",3000002:"话费充值失败，请稍后重试",3000003:"话费充值下单失败，请稍后重试",400001:"微信零钱不足，且未绑定银行卡，请绑定银行卡再试，或邀请好友代付",400002:"银行卡余额不足，请绑定其他银行卡再试，或邀请好友代付",400003:"银行卡预留手机号不符，请核对后再试，或邀请好友代付",400004:"银行卡已失效，请核对后再试，或邀请好友代付",400005:"银行拒绝交易，请核对后再试，或邀请好友代付",400099:"支付未完成，请更换支付方式",4000004:"手机网络繁忙，请稍后再试",4000005:"手机网络繁忙，请稍后再试",4000006:"",20504101:"团订单不存在",20504005:"手机网络繁忙，请稍后再试",12960005:"商品不存在",12960006:"活动未开始",12960007:"商品已售罄",12960008:"拼单人数已满",12960009:"只有App新人才能参团哦",12960010:"帐号信息异常",12960012:"该商品一次只能购买1件哦",12960014:"请使用微信登录再下单",12960016:"你已经开过团了，请勿重复开团",12960017:"今日开团次数已用完，明天再来吧",12960018:"今日参团次数已用完，明天再来吧",12960019:"该商品你今日已经参过团了"}),te={AuthenticationFailed:re[40001],APIServiceBusy:re[40002],GraphicalCodeForPhoneCode:re[40017],LoginFailed:re[40020],NeedAuthenticationLogin:re[43058],ItemRemoved:re[41002],OutOfStock:re[41003],NotInLuckyTime:re[41005],AddressUnreachable:re[41006],NoCouponLeft:re[44010],CouponTaken:re[44011],CouponTakeFailed:re[44012],CouponTakenOut:re[44026],PersonalInfoNoID:re[45007],OrderPayed:re[45008],NeedVerfication:re[45054],GroupInvalid:re[46001],GroupFailed:re[42003],OverBuyLimit:re[42004],GroupOverflow:re[42005],GroupAutoOpenFailed:re[42006],GroupAutoOpenSuccess:re[42007],IDCardEmpty:re[43004],NoNameIDBefore:re[43006],IDCardFake:re[43008],IDCardFailTooMuch:re[43009],InsufficientCoupon:re[44047],AvailableCouponsPerUnit:re[44201],NoSuchOrder:re[45001],PrepayBusy:re[45009],OrderPaying:re[45010],PaymentDisabled:re[45210],SpikeComing:re[45034],OrderPayRisk:re[45206],OrderPayVerificationInvalid:re[45207],OrderAlreadyUrged:re[47030],OrderUrgeError:re[47031],NativeNormalError:re[6e4],NativeParamsError:re[60003],NativeUserRefuse:re[60005],NativeUserCancel:re[60006],NativeAudioRecordFailed:re[60200],NativeAudioRecordUndetermined:re[60201],NativeAudioTooShort:re[60205],NativeAudioUploadFailed:re[60210],NativeAudioPlayFailed:re[60220],SuccessiveMobileFeeOnlyOnce:re[45036],SuccessiveMobileFeeRisk:re[45037],SuccessiveMobileFeeUnsigned:re[45038],SuccessiveMobileFeeOnlyWechat:re[45039],OverBuyVirtualGoodsLimit:re[45033],AvailableActivityChanged:re[45516],GroupCompleted:re[42001],InvalidAddress:re[43002],CouponDailyLimit:re[44037],CouponBatchLimit:re[44038],CouponTokenInvalid:re[44041],CouponTokenExpired:re[44042],CouponPushNotIn:re[44043],CouponActivityAbsent:re[44044],MultiplyDiscountPause:re[44064],MultiplyDiscountEnd:re[44066],CouponMaxNumReached:re[44200],HistoryGroupOpenFailed:re[46014],GoodsNotExist:re[49001],NativePaymentCancel:re[60006],WithoutWeChatClient:re[60100],QQPayFailed:re[60120],OrderLimitedSalesEnd:re[152004],OrderLimitedSalesOut:re[152006],PayLimitedSalesEnd:re[47102],PayLimitedSalesOut:re[47003],ServerBusy:re[4000004],OrderSpikeMsgError:re[4000006],WxDirectPayWxBalanceError:re[400001],WxDirectPayCardBalanceError:re[400002],WxDirectPayTelephoneError:re[400003],WxDirectPayCardInvalidError:re[400004],WxDirectPayRefusedError:re[400005],WxDirectPayUnknownError:re[400099],ACT_GROUP_NOT_EXISTS:re[530001],ACT_GROUP_FAILED:re[530002],ACT_GROUP_SUCCESS:re[530003],ACT_RECORD_NOT_EXISTS:re[530004],PAY_CHANNEL_NOT_SUPPORT:re[530005],ACT_RECORD_PAID:re[530006],ACT_RECORD_REFUND:re[530007],ASSIST_FOR_ONE_DAILY_LIMIT:re[530011],ASSIST_FOR_ONE_LIMIT:re[530012],getMsgFromCode:function(e){var r=re[e];return r?r.message:""}},ne=t("4V74"),ae=t("Y2vK"),ie=function(){var e=Object(m.a)();return!!e.isNativePlatform&&Object(v.c)(e.version,"3.51.0")>=0},oe=function(){},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe;var t=Object(m.a)();t.isNativePlatform&&Object(v.c)(t.version,"3.65.0")>=0?e():r()},se=function(){},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se;var t=Object(m.a)();if(t.isNativePlatform&&Object(v.c)(t.version,"3.2.0")>=0){var n="",a=t.system;a===v.b.IOS?n="alipays":a===v.b.Android&&(n="com.eg.android.AlipayGphone"),Object(f.g)("AMApplication","check",{app:n}).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=parseInt(r.has_installed,10)||0;e(t?K.a.AliPayDirectDebit:K.a.AliPay)}).catch(function(){return e(K.a.AliPay)})}else r()},pe=t("rIj9"),de=t("uf4C"),le=null,he={post:function(e,r){if(!le){var t=de.a.getInstance().getPageID();le=Object(pe.a)({pageInfo:{pageId:t}})}return le({method:"POST",url:e,data:r,defaultErrorHandler:function(){}}).catch(function(e){var r=e.errorCode,t=(e.response||{}).data;return Promise.reject({errorCode:r,errorObject:t})})}},ye=null,me={getInstance:function(){return ye||(ye=he),ye},setInstance:function(e){ye=e}},fe=t("qd0Q"),ve=t("jtE3"),ge=t("mj+i"),be=t("ii9O"),Pe=t("b6XL"),_e=t("4+4F"),we=function(){return me.getInstance().post("api/qogir/payment/agreement/pay_score_query")},Ce=function(e){var r,t=0;return Object(j.b)(),Object(_e.a)({payload:{event:"before_polling"}}),new Promise(function(n,a){var i=function(){return t+=1,we().then(function(e){e.success&&e.wx_signed&&(clearInterval(r),Object(j.a)(),n())}).catch(function(t){clearInterval(r),Object(j.a)(),t.scoreSignSdkSuccess=e,a(t)})};i(),r=setInterval(function(){if(Object(_e.a)({payload:{event:"default_polling",time:t}}),t<=4)i();else{clearInterval(r);var n=new Error("pay_score_query_timeout");n.errorCode=1005,n.scoreSignSdkSuccess=e,Object(j.a)(),a(n)}},800)})},Se=function(){var e=s()(o.a.mark(function e(){var r,t,n,a,i,c,s,u,p=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>0&&void 0!==p[0]?p[0]:{},t=r.signScene,n=r.orderSn,a=r.antiContent,i=r.payTicket,!(c=Object(m.a)()).isNativePlatform){e.next=6;break}s="m.hutaojie.com"===location.hostname?"115":"122",e.next=12;break;case 6:if(!c.isPureWeChatPlatform){e.next=10;break}s="m.hutaojie.com"===location.hostname?"118":"130",e.next=12;break;case 10:throw Object(ve.a)("sub_pay_later.html?".concat(Object(ge.b)(Object(ge.g)(location.href)))).then(function(){},function(){be.a.uniformForward("download.html")}),new Error("not_support_platform");case 12:return u={sign_app_id:s,sign_scene:t||1,anti_content:a,order_sn:n,ext_data:{pay_ticket:i}},e.abrupt("return",me.getInstance().post("api/qogir/payment/agreement/pay_score_sign",u));case 14:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).queryString,r=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i)[1];return Object(v.c)(r,"7.0.5")>=0?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).queryString;return new Promise(function(r,t){Object(_e.a)({payload:{event:"before_wx_score"}}),wx.checkJsApi({jsApiList:["openBusinessView"],success:function(n){n&&n.checkResult&&n.checkResult.openBusinessView&&wx.invoke("openBusinessView",{businessType:"wxpayScoreEnable",queryString:e},function(e){0===parseInt(e.err_code)?(Object(_e.a)({payload:{event:"wx_score_success"}}),r()):(Object(_e.a)({payload:{event:"wx_score_fail",payload:{event:e&&JSON.stringify(e)}}}),t(e))})}})})}({queryString:e}):(Object(Pe.a)("请将微信更新至最新版后再次尝试"),Promise.reject({errorHandling:{isErrorAlerted:!0}}))},De=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).response;return Object(_e.a)({payload:{event:"before_app_sign_score"}}),Object(f.g)("AMAgreement","sign",{type:3,params:e})},xe=function(){var e=s()(o.a.mark(function e(){var r,t,n,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>0&&void 0!==a[0]?a[0]:{},t=r.response,!(n=Object(m.a)()).isNativePlatform){e.next=6;break}return e.abrupt("return",De({response:t}));case 6:if(!n.isPureWeChatPlatform){e.next=8;break}return e.abrupt("return",ke({queryString:t.query}));case 8:return e.abrupt("return",Promise.reject("Error_Platform"));case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=s()(o.a.mark(function e(){var r,t,n,a,i,c,u,p,d,l,h,y=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>0&&void 0!==y[0]?y[0]:{},t=r.signScene,n=r.antiContent,a=r.orderSn,i=r.pollingFun,c=r.payTicket,(u=Object(m.a)()).isNativePlatform||u.isPureWeChatPlatform){e.next=4;break}return e.abrupt("return",Promise.reject("Error_Platform"));case 4:return e.prev=4,e.next=7,Se({signScene:t,antiContent:n,orderSn:a,payTicket:c});case 7:p=e.sent,e.next=19;break;case 10:if(e.prev=10,e.t0=e.catch(4),d=e.t0||{},410011!=+(l=d.errorCode)){e.next=18;break}return Object(fe.a)({title:"先用后付功能逐步开放中\n敬请期待"}),e.abrupt("return",Promise.reject({errorCode:l,errorHandling:{isErrorAlerted:!0}}));case 18:return e.abrupt("return",Promise.reject(e.t0));case 19:if(p&&p.success){e.next=21;break}throw new Error("pay_score_sign_error");case 21:return h=i||Ce,e.abrupt("return",xe({response:p}).then(s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.isPollingError=!0,e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}},e,null,[[0,5]])}))).catch(function(e){if((e||{}).isPollingError)throw e;return h(!1)}));case 23:case"end":return e.stop()}},e,null,[[4,10]])}));return function(){return e.apply(this,arguments)}}(),Ae=function(){function e(){p()(this,e)}return l()(e,[{key:"pay",value:function(){return Promise.reject({errorCode:0})}}]),e}(),Ie=t("cDf5"),Te=t.n(Ie),je=t("M2CY"),Ee=t("/4cJ"),We=function(){function e(r){var t=r.attributeFields,n=r.params,a=r.orderSn,i=r.url,o=r.prepayType;p()(this,e),this.attributeFields=t,this.paymentVersion=Ee.a.getSupportVersion(),this.params=n,this.url=i,this.orderSn=a,this.prepayType=o;var c=window.navigator.userAgent,s=!!c&&!(!c.match(/phh_ios_version/i)&&!c.match(/phh_android_version/i));this.config=je.a.get({isModuleVersion:s,hostName:location.hostname})}return l()(e,[{key:"realPay",value:function(e){}},{key:"prepayParams",value:function(){return a()({pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:this.attributeFields},this.params)}},{key:"prepay",value:function(e){var r=this.prepayParams(),t=e&&"object"===Te()(e)?a()({},e,{},r):r;return me.getInstance().post(this.prepayUrl,t).catch(function(e){var r=e.errorCode,t=e.errorObject;return Promise.reject({errorCode:r,errorObject:t})})}},{key:"pay",value:function(){var e=this;return this.prepay().then(function(r){return e.realPay(r)})}},{key:"appId",get:function(){return null}},{key:"prepayUrl",get:function(){if(this.url)return this.url;switch(this.prepayType){case $.a.Combine:return"api/vancouver/cart/prepay";case $.a.Tail:return"api/vancouver/final_pay_prepay";default:return"order/prepay"}}}]),e}(),Ne=t("qnV/"),Me=function(e){function r(e){var t;return p()(this,r),(t=C()(this,k()(r).call(this,e))).prepayType=e.prepayType,t.additionalParams=e.additionalParams,t}return x()(r,e),l()(r,[{key:"realPay",value:function(e){}},{key:"pay",value:function(){var e=this;return new Promise(function(r,t){try{var n="/package_c/pay/pay?order_sn="+encodeURIComponent(e.orderSn);e.prepayType&&(n+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===Te()(e.additionalParams)&&Object.keys(e.additionalParams).forEach(function(r){n+="&".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e.additionalParams[r]))}),window.wx.miniProgram.navigateTo({url:n,success:function(e){t({cancelled:!0,err_msg:-200})},fail:function(e){Object(fe.a)({title:"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(Ne.c)(new Error("调起小程序支付失败_无法唤起")),t({cancelled:!0,err_msg:-400})}})}catch(e){Object(fe.a)({title:"系统繁忙, 请稍后再试(".concat(-500,")")});var a=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(Ne.c)(new Error("调起小程序支付失败_内部错误"),{error_msg:a}),t({cancelled:!0,err_msg:-500})}})}}]),r}(We),Fe=t("iWIM"),Ue=t.n(Fe);function Le(e){Object(_e.a)({error_msg:e.errorMsg||"",payload:{event:"pay_code",payment_type:e.paymentType||0,code:e.errorCode||"",url:e.url||"",order_sn:e.orderSn||"",wait_time:e.waitTime||0,pay_source:e.paySource||0,error_msg:e.errorMsg||""}})}function Re(e){!e.errorCode&&e.stack&&Object(_e.a)({error_msg:"@pdd/pay stack error",page:e.message+" "+JSON.stringify(e.stack)})}var Qe,qe=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"prepayParams",value:function(){return a()({},Ue()(k()(r.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}},{key:"realPay",value:function(e){var r=this;return e.timestamp=e.timestamp.toString(),Object(f.g)("JSPay","pay",{type:K.a.WeChat,params:e}).then(function(e){return Le({paymentType:K.a.WeChat,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var t=e.errorCode;return Object(_e.a)({payload:{event:"app_wechat_pay",order_sn:r.orderSn,error_code:t+""}}),Promise.reject({errorCode:t})})}},{key:"appId",get:function(){return this.config.AppID.WeChat}}]),r}(We),He=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"prepayParams",value:function(){return a()({},Ue()(k()(r.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}},{key:"realPay",value:function(e){var r=this;return new Promise(function(t,n){var a=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp.toString(),nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},function(e){if(e&&"object"===Te()(e)){if(Le({paymentType:K.a.WeChat,errorCode:e.err_msg+"",orderSn:r.orderSn}),"get_brand_wcpay_request:cancel"===e.err_msg)return e.cancelled=!0,void n(e);if("get_brand_wcpay_request:ok"===e.err_msg)return void t(e)}Object(Ne.c)(new Error("WeixinJSBridge支付失败")),n(e)})};"undefined"==typeof WeixinJSBridge?Promise.race([new Promise(function(e){document.addEventListener("WeixinJSBridgeReady",e)}),new Promise(function(e,r){setTimeout(function(){"undefined"==typeof WeixinJSBridge?r():e()},2e3)})]).then(a).catch(function(){Object(Ne.c)(new Error("WeixinJSBridge未定义")),n({errorCode:0})}):a()})}},{key:"appId",get:function(){return+Object(ge.g)(location.href).pay_app_id||this.config.AppID.WeChat}}]),r}(We),Be=function(e){function r(e){var t;return p()(this,r),(t=C()(this,k()(r).call(this,e))).additionalParams=e.additionalParams,t}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return new Promise(function(t,n){var a=e.mweb_url;Le({paymentType:K.a.WeChat,url:a,orderSn:r.orderSn}),function(e){if((window.navigator.userAgent||"").toLowerCase().indexOf("oppo")>=0){var r=document.createElement("a")||{};r.href=e,r.click&&r.click()}else be.a.reload(e)}(a)})}},{key:"pay",value:function(){if(localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={time:Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var t=Object(ge.h)("transac_wechat_wapcallback.html",a()({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise(function(e,r){be.a.reload(t)})}return Ue()(k()(r.prototype),"pay",this).call(this)}},{key:"appId",get:function(){return this.config.AppID.WeChatH5Pay}}]),r}(We),Xe=function(){function e(r){p()(this,e);var t=Object(m.a)(),n=t.isWeChatPlatform,a=t.isNativePlatform,i=t.isTinyNativePlatform;this.innerPay=null,this.innerPay=n?new He(r):a||i?new qe(r):new Be(r)}return l()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}(),Ve=t("1tfv"),Ke=t("0mK9"),Je=t("1KKG"),Ye=t("ZKQX"),Ge=function(e){return we().then(function(r){return Object(_e.a)({payload:{event:"pay_score_query"+(r&&r.wx_signed),order_sn:e}}),r&&r.wx_signed}).catch(function(r){var t=r.errorCode;return Object(_e.a)({payload:{event:"@pdd/pay/pay_score_query_err",order_sn:e,error_code:t+""}}),!1})},ze=function(e){var r=e.signScene,t=e.orderAmount,n=e.orderSn,a=e.scoreSignSdkSuccess,i=e.payTicket,o=e.switchToWechatIfSignXyhfFailed,c=function(){o?Qe&&Qe():Object(j.a)()};return o?(Object(j.a)(),Qe&&Qe(),Qe=Object(Ye.a)(A.a.createElement(Je.a,{style:{height:"1.2rem",width:"1.2rem"}},A.a.createElement("span",null,"订单已生成"),A.a.createElement("br",null),A.a.createElement("span",null,"正前往支付")))):Object(j.b)(),new Promise(function(e,o){var s,u=!1,p=0;s=setInterval(function(){if(p<=4)!function(){var d={pay_ticket:i,sign_scene:r,order_sn:n,order_amount:t,pull_scene:"after_sign",pull_times:p+=1};me.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",d).then(function(r){var t=r.signed,i=r.allow_create,d=r.forbid_create_code,l=r.forbid_create_reason;Object(_e.a)({payload:{event:"query_allow_sign_or_create_time_"+p,result:r&&JSON.stringify(r),order_sn:n}}),!u&&t&&(u=!0,clearInterval(s),c(),i?e():o({scoreSignSdkSuccess:a,errorCode:d,data:{errorCode:d,errorMsg:l}}))}).catch(function(e){var r=e.errorCode;Object(_e.a)({payload:{event:"@pdd/pay/query_allow_sign_or_create_err",order_sn:n,error_code:r+""}}),clearInterval(s),u||(u=!0,c(),e.scoreSignSdkSuccess=a,o(e))})}();else{clearInterval(s);var d=new Error("query_allow_sign_or_create_timeout");d.errorCode=1005,d.scoreSignSdkSuccess=a,Object(_e.a)({payload:{event:"@pdd/pay/query_allow_sign_or_create_timeout",order_sn:n}}),c(),o(d)}},800)})},Ze=function(){var e=s()(o.a.mark(function e(r){var t,n,a,i,c,s,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.signScene,n=r.orderAmount,a=r.orderSn,i=r.antiContent,c=r.payTicket,s=r.switchToWechatIfSignXyhfFailed,u=function(e){return ze({signScene:t,orderAmount:n,orderSn:a,scoreSignSdkSuccess:e,payTicket:c,switchToWechatIfSignXyhfFailed:s})},e.abrupt("return",Oe({signScene:t,antiContent:i,orderSn:a,pollingFun:u,payTicket:c}));case 3:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}(),$e=function(){function e(r){p()(this,e),this.orderSn=r.orderSn,this.prepayType=r.prepayType,this.additionalParams=r.additionalParams,this.optionalParams=r.optionalParams,this.orderAmount=y()(this.optionalParams,"orderAmount")}return l()(e,[{key:"pay",value:function(){var e=this;return new Promise(function(r,t){try{var n="/package_c/pay_score_sign/pay_score_sign?order_sn=".concat(encodeURIComponent(e.orderSn),"&order_amount=").concat(encodeURIComponent(e.orderAmount));e.prepayType&&(n+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===Te()(e.additionalParams)&&Object.keys(e.additionalParams).forEach(function(r){n+="&".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e.additionalParams[r]))}),window.wx.miniProgram.navigateTo({url:n,success:function(e){t({cancelled:!0,err_msg:-200})},fail:function(e){Object(fe.a)({title:"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(Ne.c)(new Error("调起小程序支付失败_无法唤起")),t({cancelled:!0,err_msg:-400})}})}catch(e){Object(fe.a)({title:"系统繁忙, 请稍后再试(".concat(-500,")")});var a=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(Ne.c)(new Error("调起小程序支付失败_内部错误"),{error_msg:a}),t({cancelled:!0,err_msg:-500})}})}}]),e}(),er=function(e){function r(e){var t;p()(this,r),t=C()(this,k()(r).call(this,e));var n=Object(m.a)(),a=Object(ge.g)(window.location.href);return t.isNative=n.isNativePlatform,t.isPureWeChatPlatform=n.isPureWeChatPlatform,t.isDdjbWeChatMiniProgram=n.isWeChatMiniProgram&&a._x_cmp_v&&a._x_cmp_v>=1640057746e3,t.isSupportSignXYHFVersion=Object(v.c)(n.version,"5.12.0")>=0,t.optionalParams=e.optionalParams,t.payTicket=y()(e,"attributeFields.pay_ticket"),t.options=e,t}return x()(r,e),l()(r,[{key:"realPay",value:function(){var e=s()(o.a.mark(function e(r){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.wait_time,n=+(n=void 0===t?2:t),Number.isInteger(n)||(n=1),Object(j.a)(),z.show({title:"0元下单中",icon:"xyhf"}),e.next=7,new Promise(function(e){return setTimeout(e,1e3*n)});case 7:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()},{key:"signXianYongHouFu",value:function(){var e=y()(this.optionalParams,"signScene"),r=y()(this.optionalParams,"orderAmount"),t=y()(this.optionalParams,"antiContent"),n=y()(this.optionalParams,"switchToWechatIfSignXyhfFailed"),a=this.orderSn,i=this.payTicket;return Ze({signScene:e,orderAmount:r,orderSn:a,antiContent:t,payTicket:i,switchToWechatIfSignXyhfFailed:n})}},{key:"pay",value:function(){var e=s()(o.a.mark(function e(){var r,t,n=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y()(this.optionalParams,"isSignXianYongHouFu"),t=y()(this.optionalParams,"switchToWechatIfSignXyhfFailed"),!r||!(this.isNative&&this.isSupportSignXYHFVersion||this.isPureWeChatPlatform||this.isDdjbWeChatMiniProgram)){e.next=14;break}return e.next=5,Ge(this.orderSn);case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",this.prepay().then(function(e){return n.realPay(e)}));case 8:if(!this.isDdjbWeChatMiniProgram){e.next=10;break}return e.abrupt("return",new $e(this.options).pay());case 10:return z.markSignXianYongHouFu(),e.abrupt("return",this.signXianYongHouFu().then(function(){return Object(j.b)(),n.prepay.bind(n,{prepay_front_supports:["credit_repay_idempotence"]})().then(function(e){return n.realPay(e)})}).catch(function(){var e=s()(o.a.mark(function e(r){var i,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Object(m.a)(),c=i.isWeChatPlatform,!t||!c){e.next=9;break}return e.next=5,new Promise(function(e){Object(Ke.a)("先用后付不成功，正在切换微信支付...",{style:{maxWidth:"3rem"},onClose:e})});case 5:return Object(j.b)(),e.abrupt("return",new Cr(n.options).pay().then(function(e){return a()({},e,{xyhfSwitchedToWechat:!0})}));case 9:throw r;case 10:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",this.prepay().then(function(e){return n.realPay(e)}));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"appId",get:function(){var e=Object(m.a)(),r=e.isWeChatPlatform,t=e.isWeChatMiniProgram;return"m.hutaojie.com"===location.hostname?t?119:r?118:115:t?131:r?130:122}}]),r}(We),rr=t("lSNA"),tr=t.n(rr),nr=4,ar={CHANCE_EXCEEDED:"CHANCE_EXCEEDED",QOGIR_EXCEPTION:"QOGIR_EXCEPTION"};function ir(e){var r=e.orderSn,t=e.attrMap,n=e.payChannel,a=e.transactionId,i=e.waitTimeBeforeQuery,c=void 0===i?null:i,u={allowNextPoll:!0,forceStop:function(){u.allowNextPoll=!1},run:function(){return s()(o.a.mark(function e(){var i,s,p,d,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c&&+c>0)){e.next=3;break}return e.next=3,new Promise(function(e){return setTimeout(e,1e3*+c)});case 3:i=1;case 4:if(!(i<=nr)){e.next=21;break}if(u.allowNextPoll){e.next=7;break}return e.abrupt("return",{status:Z.a.UniversalException.QOGIR_PREMATURE_END});case 7:return e.prev=7,e.delegateYield(o.a.mark(function e(){var c,s,u,p,d,l,h,y,m;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.getInstance().post("api/qogir/payment/query/pappay",{order_sn:r,times:i,attr_map:t,channel:n,transaction_id:a});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(c=e.t0,s=c.status,u=c.wait_time,p=c.error_info,l=(d=p||{}).error_code,h=d.error_msg,y=d.change_card_pay,m=d.pap_pay_fail_map,Object(_e.a)({error_msg:"qogir-pulling-"+s,payload:{order_sn:r,times:i,qogir_err:p?"".concat(l," | ").concat(h):void 0}}),+s===Z.a.Universal.Paying){e.next=15;break}return e.abrupt("return",{v:{status:+s||0,errorInfo:{errorCode:l,errorMsg:h,changeCardPay:y,papPayFailMap:m,papPayFailCode:l},paySource:0}});case 15:return e.next=17,new Promise(function(e){return setTimeout(e,1e3*+u)});case 17:case"end":return e.stop()}},e)})(),"t0",9);case 9:if(s=e.t0,"object"!==Te()(s)){e.next=12;break}return e.abrupt("return",s.v);case 12:e.next=18;break;case 14:return e.prev=14,e.t1=e.catch(7),p=e.t1||{},d=p.errorCode,l=p.message,e.abrupt("return",{status:Z.a.UniversalException.QOGIR_EXCEPTION,errorInfo:{errorCode:d,errorMsg:l},paySource:0});case 18:i++,e.next=4;break;case 21:return e.abrupt("return",{status:ar.CHANCE_EXCEEDED,errorInfo:null,paySource:0});case 22:case"end":return e.stop()}},e,null,[[7,14]])}))()}};return u}function or(e){var r=e.orderSn,t=e.listenType,n=e.payChannel,i=Object(m.a)(),c=!1,u={},p=null,d=null;t===Ve.a.WechatDirect?(u.type=t,p="PDDInbox",c=i.isNativePlatform&&Object(v.c)(i.version,"4.14.0")>=0,d="receiver"):(u.biz_type=t,p="PDDTitanPush",c=i.isNativePlatform&&Object(v.c)(i.version,"4.76.0")>=0,d="push_receiver");var l={receiverId:null,forceStop:function(){var e=a()({},u);c&&t!==Ve.a.WechatDirect&&Object.assign(e,{receiver_id:l.receiverId}),Object(f.g)(p,"unregister",e)},run:function(){return s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return",new Promise(function(e){Object(f.g)(p,"register",a()({},u,tr()({},d,function(t,a){var i=null,o=!1;try{i=JSON.parse(a.result[0].payload)}catch(e){o=!0}var c=i||{},s=c.status,u=c.error_info,p=c.order_sn,d=c.channel;if(t||!i)Object(_e.a)({error_msg:"push时查qogir失败",payload:{pinbridge_err:t?"Inbox监听异常":void 0,result_err:i?"Inbox回调数据异常":void 0,data_format_err:o?"Inbox回调数据格式不是JSON":void 0}});else{if(p!==r||d!==n)return void Object(_e.a)({error_msg:"错误的push数据",payload:{pushedOrderSn:p,pushedChannel:d}});var h=u||{},y=h.error_code,m=h.error_msg,f=h.change_card_pay,v=h.pap_pay_fail_map;Object(_e.a)({error_msg:"qogir-push-"+s,payload:{order_sn:r,qogir_err:u?"".concat(y," | ").concat(m):void 0}}),e({status:+s||0,errorInfo:{errorCode:y,errorMsg:m,changeCardPay:f,papPayFailMap:v,papPayFailCode:y},paySource:1})}l.forceStop()}))).then(function(e){l.receiverId=(e||{}).receiver_id})}));case 2:return e.abrupt("return",new Promise(function(e,r){}));case 3:case"end":return e.stop()}},e)}))()}};return l}var cr,sr,ur=function(e){var r=Object(m.a)();return!!r.isNativePlatform&&Object(v.c)(r.version,e)>=0},pr=t("vBQ9"),dr=function(e){var r=e.errorMsg,t=e.cancelled,n=e.errorCode;return function(){var e=s()(o.a.mark(function e(a){var i,c,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.originTime,c=a.paySource,s=a.orderSn,Le({paymentType:K.a.DuoDuoPay,errorCode:n,orderSn:s,waitTime:Date.now()-i,errorMsg:r,paySource:c}),e.next=4,z.hide();case 4:return e.abrupt("return",Promise.reject({cancelled:t,errorCode:n}));case 5:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()},lr=dr({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),hr=(cr={},tr()(cr,Z.a.Universal.Success,function(e){var r=e.originTime,t=e.paySource,n=e.orderSn;return new Promise(function(){var e=s()(o.a.mark(function e(a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Le({paymentType:K.a.DuoDuoPay,errorCode:0,orderSn:n,waitTime:Date.now()-r,paySource:t}),e.next=3,z.showSuccess({payInfoTitle:"多多支付",title:"支付成功"});case 3:a();case 4:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}())}),tr()(cr,Z.a.UniversalException.CHANCE_EXCEEEDED,dr({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1})),tr()(cr,Z.a.UniversalException.QOGIR_EXCEPTION,dr({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1})),tr()(cr,Z.a.Universal.NotFound,dr({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1})),tr()(cr,Z.a.Universal.Failed,function(){var e=s()(o.a.mark(function e(r){var t,n,a,i,c,u,p,d;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.originTime,n=r.paySource,a=r.orderSn,i=r.errorMsg,c=r.changeCardPay,u=r.changeCardCallback,p=r.getAutoSwitchPay,!(d=p()).isAutoSwitchEnabled){e.next=4;break}return e.abrupt("return",d.performAutoSwitchPay());case 4:return e.abrupt("return",new Promise(function(){var e=s()(o.a.mark(function e(r,p){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Le({paymentType:K.a.DuoDuoPay,errorCode:0,orderSn:a,waitTime:Date.now()-t,paySource:n}),e.next=3,z.hide();case 3:1==+c&&ur("5.45.0")?Object(pr.a)({title:i||"免密支付失败，请重试",onCancel:function(){p({cancelled:!0})},onClose:function(){p({cancelled:!0})},onConfirm:function(){var e=s()(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u();case 3:t=e.sent,r(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),cancelButtonLabel:"取消",confirmButtonLabel:"换卡支付"}):Object(fe.a)({title:i||"免密支付失败，请重试",onConfirm:function(){p({cancelled:!1,errorCode:-1})},onClose:function(){p({cancelled:!1,errorCode:-1})}});case 4:case"end":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),cr),yr=function(e){function r(e){var t;return p()(this,r),t=C()(this,k()(r).call(this,e)),e=e||{},t.attrMap=e.attrMap,t.isSupportDirectPay=e.isSupportDirectPay,t.isSupportChangeCard=ur("5.45.0"),t.autoSwitchPay=new _r(e,t.appId),t}return x()(r,e),l()(r,[{key:"prepayParams",value:function(){return a()({},Ue()(k()(r.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields)})}},{key:"realPay",value:function(e,r){return 1==+e.is_pap_pay?this.handleDirectPay():this.handleNormalPay(e,r)}},{key:"handleNormalPay",value:function(e,r){var t=this,n=a()({},e);if(r){var i=r.changeCardPay,o=r.papPayFailMap,c=r.papPayFailCode;i&&(n.change_card_pay=i),o&&Object.assign(n,o),c&&(n.pap_pay_fail_code=c)}return Object(f.g)("JSPay","pay",{type:K.a.DuoDuoPay,params:n}).then(function(e){return Le({paymentType:K.a.DuoDuoPay,errorCode:"0",orderSn:t.orderSn}),e}).catch(function(e){Re(e);var r=e.data,n=e.errorCode;return Le({paymentType:K.a.DuoDuoPay,errorCode:n+"",orderSn:t.orderSn,errorMsg:e.toJSON&&JSON.stringify(e.toJSON())}),Promise.reject({errorCode:n,data:r})})}},{key:"handleDirectPay",value:function(){var e=s()(o.a.mark(function e(){var r,t,n,a,i,c,s,u,p,d,l,h,y,m,f,v,g=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),t=ir({orderSn:this.orderSn,payChannel:"DUODUOPAY",attrMap:this.attrMap}),n=or({orderSn:this.orderSn,listenType:Ve.a.UniversalPay,payChannel:"DUODUOPAY"}),e.prev=3,z.hideSpinner(),z.markDuringMianmi(),z.show({title:"免密支付中",icon:"ddpay"}),e.next=9,Promise.race([t.run(),n.run()]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:return a=e.t0,i=a.status,c=a.errorInfo,s=a.paySource,p=(u=c||{}).errorMsg,d=u.changeCardPay,l=u.papPayFailMap,h=u.papPayFailCode,e.abrupt("return",(hr[i]||lr)({originTime:r,paySource:s,orderSn:this.orderSn,errorMsg:p,changeCardPay:d,changeCardCallback:this.pay.bind(this,{changeCardPay:d,papPayFailMap:l,papPayFailCode:h}),getAutoSwitchPay:function(){return g.autoSwitchPay}}));case 20:e.prev=20,e.t1=e.catch(3),y=e.t1||{},m=y.message,f=y.stack,v=y.errorCode,Object(_e.a)({error_msg:"poller与listener内部错误",payload:{message:v||f||m}});case 24:return e.prev=24,t.forceStop(),n.forceStop(),e.finish(24);case 28:case"end":return e.stop()}},e,this,[[3,20,24,28]])}));return function(){return e.apply(this,arguments)}}()},{key:"pay",value:function(e){var r=this;return this.prepay().then(function(t){return Object(j.a)(),r.realPay(t,e)})}},{key:"appId",get:function(){return 97}}]),r}(We),mr=function(e){var r=e.errorMsg,t=e.cancelled,n=e.errorCode;return function(){var e=s()(o.a.mark(function e(a){var i,c,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.originTime,c=a.paySource,s=a.orderSn,Le({paymentType:K.a.AliPayDirectDebit,errorCode:n,orderSn:s,waitTime:Date.now()-i,errorMsg:r,paySource:c}),e.next=4,z.hide();case 4:return e.abrupt("return",Promise.reject({cancelled:t,errorCode:n}));case 5:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()},fr=mr({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),vr=(sr={},tr()(sr,Z.a.Universal.Success,function(e){var r=e.originTime,t=e.paySource,n=e.orderSn;return new Promise(function(){var e=s()(o.a.mark(function e(a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Le({paymentType:K.a.AliPayDirectDebit,errorCode:0,orderSn:n,waitTime:Date.now()-r,paySource:t}),e.next=3,z.showSuccess({payInfoTitle:"支付宝",title:"支付成功"});case 3:a();case 4:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}())}),tr()(sr,Z.a.UniversalException.CHANCE_EXCEEEDED,mr({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1})),tr()(sr,Z.a.UniversalException.QOGIR_EXCEPTION,mr({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1})),tr()(sr,Z.a.Universal.NotFound,mr({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1})),tr()(sr,Z.a.Universal.Failed,function(){var e=s()(o.a.mark(function e(r){var t,n,a,i,c,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.originTime,n=r.paySource,a=r.orderSn,i=r.errorMsg,c=r.getAutoSwitchPay,!(u=c()).isAutoSwitchEnabled){e.next=4;break}return e.abrupt("return",u.performAutoSwitchPay());case 4:return e.abrupt("return",new Promise(function(){var e=s()(o.a.mark(function e(r,c){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Le({paymentType:K.a.AliPayDirectDebit,errorCode:0,orderSn:a,waitTime:Date.now()-t,paySource:n}),e.next=3,z.hide();case 3:Object(fe.a)({title:i||"免密支付失败，请重试",onConfirm:function(){c({cancelled:!1,errorCode:-1})},onClose:function(){c({cancelled:!1,errorCode:-1})}});case 4:case"end":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()),sr),gr=Z.a.AliPayDirectDebit,br=function(e){function r(e){var t;return p()(this,r),t=C()(this,k()(r).call(this,e)),e=e||{},t.attrMap=e.attrMap,t.isSupportDirectPay=e.isSupportDirectPay,t.autoSwitchPay=new _r(e,t.appId),t}return x()(r,e),l()(r,[{key:"prepayParams",value:function(){var e=this.config.RedirectURI.AliPayDirectDebit;return a()({},Ue()(k()(r.prototype),"prepayParams",this).call(this),{pap_pay:1,attribute_fields:a()({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields),return_url:e,request_from_url:e})}},{key:"handleAsyncDirectPay",value:function(){var e=s()(o.a.mark(function e(r){var t,n,a,i,c,s,u,p,d,l,h,y,m,f,v=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.transactionId,n=r.waitTime,a=Date.now(),i=ir({orderSn:this.orderSn,payChannel:"ALIPAY",attrMap:this.attrMap,transactionId:t,waitTimeBeforeQuery:n}),c=or({orderSn:this.orderSn,listenType:Ve.a.UniversalPay,payChannel:"ALIPAY"}),e.prev=4,z.hideSpinner(),z.markDuringMianmi(),z.show({title:"免密支付中"}),e.next=10,Promise.race([i.run(),c.run()]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:return s=e.t0,u=s.status,p=s.errorInfo,d=s.paySource,l=(p||{}).errorMsg,e.abrupt("return",(vr[u]||fr)({originTime:a,paySource:d,orderSn:this.orderSn,errorMsg:l,getAutoSwitchPay:function(){return v.autoSwitchPay}}));case 21:e.prev=21,e.t1=e.catch(4),h=e.t1||{},y=h.message,m=h.stack,f=h.errorCode,Object(_e.a)({error_msg:"poller与listener内部错误",payload:{message:f||m||y}});case 25:return e.prev=25,i.forceStop(),c.forceStop(),e.finish(25);case 29:case"end":return e.stop()}},e,this,[[4,21,25,29]])}));return function(r){return e.apply(this,arguments)}}()},{key:"realPay",value:function(e){var r=this;return 1==+e.is_pap_pay?this.handleAsyncDirectPay({transactionId:e.transaction_id,waitTime:e.wait_time}):new Promise(function(){var t=s()(o.a.mark(function t(n,a){var i,c,u,p,d,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=K.a.AliPayV2,c=!1,u=!1,(p=parseInt(e.status,10))===gr.Unsign?d=e.data:p!==gr.Rollback&&p?p!==gr.Failed&&p!==gr.Unknown||(u=!0):(delete(d=e).status,c=!0),d){t.next=25;break}if(!u){t.next=20;break}if(Le({paymentType:i,errorCode:p,orderSn:r.orderSn}),p!==gr.Success){t.next=15;break}if(z.isSwitched){t.next=12;break}return t.next=12,z.hide();case 12:n(),t.next=18;break;case 15:return t.next=17,z.hide();case 17:a({errorCode:p});case 18:t.next=24;break;case 20:Object(j.a)(),z.markDuringMianmi(),z.show(),setTimeout(s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Le({paymentType:i,errorCode:p,orderSn:r.orderSn}),![gr.Success,gr.Paying].includes(p)){e.next=8;break}if(z.isSwitched){e.next=5;break}return e.next=5,z.hide();case 5:n(),e.next=11;break;case 8:return e.next=10,z.hide();case 10:a({errorCode:p});case 11:case"end":return e.stop()}},e)})),p===gr.Paying?4e3:2e3);case 24:return t.abrupt("return");case 25:l=c?i:K.a.AliPayDirectDebit,Object(f.g)("JSPay","pay",{type:l,params:d}).then(function(e){Le({paymentType:l,errorCode:"0",orderSn:r.orderSn}),n()}).catch(function(e){Re(e);var t=e.errorCode;function n(){a({errorCode:t})}Le({paymentType:l,errorCode:t+"",orderSn:r.orderSn}),t!==parseInt(te.NativePaymentCancel.code,10)||l!==K.a.AliPayDirectDebit?n():me.getInstance().post("payment/agreement/reset",{app_id:r.appId}).then(n,n)});case 27:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}())}},{key:"appId",get:function(){return this.config.AppID.AliPayDirectDebit}}]),r}(We);function Pr(e){switch(e){case K.a.WeChat:return"WEIXIN";case K.a.AliDirectDebitPay:return"ALIPAY";case K.a.DuoDuoPay:return"DUODUOPAY";default:return""}}var _r=function(){function e(r,t){p()(this,e),this.options=a()({},r,{attributeFields:a()({},r.attributeFields,{pappay_poll_mode:"T"})}),this.lastPayAppId=t}return l()(e,[{key:"getAutoSwitchChannel",value:function(){var e=s()(o.a.mark(function e(){var r,t,n,a,i,c,s,u,p;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAutoSwitchEnabled){e.next=2;break}return e.abrupt("return",{});case 2:return r=y()(this.options,"attributeFields.pay_ticket"),t=y()(this.options,"optionalParams.signScene"),n=y()(this.options,"optionalParams.orderAmount"),a=this.options.orderSn,e.prev=6,e.next=9,me.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",{pay_ticket:r,last_pay_app_id:this.lastPayAppId,sign_scene:t,order_amount:n,order_sn:a});case 9:if(i=e.sent,s=(c=i||{}).allow_all_pay,u=c.next_channel,p=c.all_pay_type,Object(_e.a)({error_msg:"查询下个免密支付方式结果",payload:{allow_all_pay:s,next_channel:u}}),s){e.next=14;break}return e.abrupt("return",{});case 14:if(!z.isMianmiChannelUsed(u)){e.next=16;break}return e.abrupt("return",{});case 16:return e.abrupt("return",{nextChannel:u,allPayType:p});case 19:return e.prev=19,e.t0=e.catch(6),Object(_e.a)({error_msg:"查询下个免密支付方式异常"}),e.abrupt("return",{});case 23:case"end":return e.stop()}},e,this,[[6,19]])}));return function(){return e.apply(this,arguments)}}()},{key:"performAutoSwitchPay",value:function(){var e=s()(o.a.mark(function e(){var r,t,n,i,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z.isSwitched||(r=this.options.paymentType,z.startChannel=Pr(r)),e.next=3,this.getAutoSwitchChannel();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:if(t=e.t0,n=t.nextChannel,i=t.allPayType,n){e.next=15;break}return e.next=12,z.hide();case 12:return e.next=14,new Promise(function(e){Object(Pe.a)("免密支付失败，请更换支付方式",{onClose:e})});case 14:return e.abrupt("return",Promise.reject({errorCode:-1}));case 15:z.recordMianmiChannel(n),e.t1=n,e.next="WEIXIN_CREDIT"===e.t1?19:"WEIXIN"===e.t1?30:"DUODUOPAY"===e.t1?32:"ALIPAY"===e.t1?34:36;break;case 19:if(z.currentPaymentType=K.a.XianYongHouFu,1!=+i){e.next=29;break}return e.next=23,z.hide();case 23:return e.next=25,new Promise(function(e){Object(Ke.a)("免密支付失败，可使用先用后付<br>0元下单",{style:{maxWidth:"2.6rem"},onClose:e})});case 25:return(c=a()({optionalParams:{}},this.options)).optionalParams.isSignXianYongHouFu=!0,c.optionalParams.signScene=27,e.abrupt("return",new er(c).pay().catch(function(){return Promise.reject({errorCode:-1})}));case 29:return e.abrupt("return",new er(this.options).pay());case 30:return z.currentPaymentType=K.a.WeChat,e.abrupt("return",new Cr(this.options).pay());case 32:return z.currentPaymentType=K.a.DuoDuoPay,e.abrupt("return",new yr(this.options).pay());case 34:return z.currentPaymentType=K.a.AliPayDirectDebit,e.abrupt("return",new br(this.options).pay());case 36:return e.abrupt("return",Promise.reject({errorCode:-1}));case 37:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isAutoSwitchEnabled",get:function(){return y()(this.options,"optionalParams.mianmiAutoSwitch")}}]),e}(),wr=Z.a.WechatDirectPayQuery,Cr=function(e){function r(e){var t;p()(this,r),(t=C()(this,k()(r).call(this,e))).attrMap=e.attrMap;var n=Object(m.a)();return t.isNative=n.isNativePlatform,t.isPayWechatDirectStatusVersion=Object(v.c)(n.version,"4.14.0")>=0,t.additionalParams=e.additionalParams,t.innerPay=new Xe(e).innerPay,t.autoSwitchPay=new _r(e,t.appId),t}return x()(r,e),l()(r,[{key:"prepayParams",value:function(){return a()({},Ue()(k()(r.prototype),"prepayParams",this).call(this),{pap_pay:1})}},{key:"isWechatDirectPayError",value:function(e){return[parseInt(te.WxDirectPayWxBalanceError.code,10),parseInt(te.WxDirectPayCardBalanceError.code,10),parseInt(te.WxDirectPayTelephoneError.code,10),parseInt(te.WxDirectPayCardInvalidError.code,10),parseInt(te.WxDirectPayRefusedError.code,10),parseInt(te.WxDirectPayUnknownError.code,10)].includes(e)}},{key:"unregisterStatusMailBox",value:function(){!this.unregistered&&this.isNative&&this.isPayWechatDirectStatusVersion&&(this.unregistered=!0,Object(f.g)("PDDInbox","unregister",{type:Ve.a.WechatDirect}))}},{key:"realPay",value:function(e){var r=this;return 1===e.is_pap_pay?new Promise(function(t,n){var a=Date.now(),i=1,c=null,u=function(e){Le({paymentType:K.a.WeChat,errorCode:0,orderSn:r.orderSn,waitTime:Date.now()-a,paySource:e||0}),t()},p=function(e){var t=e.errorCode,i=e.paySource,o=e.cancelled,c=e.errorMsg;Le({paymentType:K.a.WeChat,errorCode:t||-1,orderSn:r.orderSn,waitTime:Date.now()-a,errorMsg:c,paySource:i||0}),n({errorCode:t,cancelled:o})},d=null,l=function(){var e=s()(o.a.mark(function e(t){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=-1,e.t0=t.status,e.next=e.t0===wr.Success?4:e.t0===wr.Paying?11:e.t0===wr.Failed?13:e.t0===wr.NotFound?19:21;break;case 4:return r.unregisterStatusMailBox(),e.next=7,z.hide();case 7:return e.next=9,z.showSuccess({payInfoTitle:"微信支付",title:"支付成功"});case 9:return u(0),e.abrupt("break",23);case 11:return t.wait_time>=0?c=setTimeout(function(){d(++i)},1e3*Math.min(t.wait_time||0,15)):p({errorCode:-1,paySource:0,errorMsg:'前端免密支付状态轮询为"Paying"但并未返回等待时间'}),e.abrupt("break",23);case 13:return r.unregisterStatusMailBox(),s=t.error_info&&t.error_info.error_code?parseInt(t.error_info.error_code,10):parseInt(te.WxDirectPayUnknownError.code,10),r.isWechatDirectPayError(s)||(s=parseInt(te.WxDirectPayUnknownError.code,10)),Le({paymentType:K.a.WeChat,orderSn:r.orderSn,errorCode:s||-1,waitTime:Date.now()-a,paySource:0,errorMsg:'前端免密支付状态轮询为"Failed"'}),n({errorCode:s,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}}),e.abrupt("break",23);case 19:return p({errorCode:-1,paySource:0,cancelled:!0,errorMsg:'前端免密支付状态轮询为"NotFound"'}),e.abrupt("break",23);case 21:return p({errorCode:s,paySource:0,errorMsg:"未知的前端免密轮询状态：".concat(t.status)}),e.abrupt("break",23);case 23:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}();d=function(e){e>4?p({errorCode:-1,paySource:0,errorMsg:"前端免密状态轮询超过4次"}):me.getInstance().post("api/qogir/payment/query/wechat/pappay",{order_sn:r.orderSn,times:e,attr_map:r.attrMap}).then(l).catch(function(e){var r=e.errorCode,t=e.errorObject;p({errorCode:-1,errorObject:t,errorMsg:"调用前端免密状态轮询接口失败errorCode：".concat(r)})})};Object(j.a)(),z.markDuringMianmi(),z.show(),r.isNative&&r.isPayWechatDirectStatusVersion&&Object(f.g)("PDDInbox","register",{type:Ve.a.WechatDirect,receiver:function(){var e=s()(o.a.mark(function e(t,i){var s,p,d,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p=i.result||[],d=(d=p[0]||{}).content,!t&&d&&d.order_sn===r.orderSn){e.next=6;break}return r.unregisterStatusMailBox(),e.abrupt("return");case 6:l=parseInt(d.status||0,10),e.t0=l,e.next=e.t0===wr.Success?10:e.t0===wr.Failed?17:23;break;case 10:return c&&clearTimeout(c),e.next=13,z.hide();case 13:return e.next=15,z.showSuccess({payInfoTitle:"微信支付",title:"支付成功"});case 15:return u(1),e.abrupt("break",24);case 17:return c&&clearTimeout(c),s=d.error_info&&d.error_info.error_code?parseInt(d.error_info.error_code,10):te.WxDirectPayUnknownError.code,r.isWechatDirectPayError(s)||(s=te.WxDirectPayUnknownError.code),Le({paymentType:K.a.WeChat,orderSn:r.orderSn,errorCode:s||-1,waitTime:(new Date).getTime()-a,paySource:0}),n({errorCode:s,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}}),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:r.unregisterStatusMailBox();case 25:case"end":return e.stop()}},e)}));return function(r,t){return e.apply(this,arguments)}}()}),c=setTimeout(function(){d(i)},1e3*Math.min(e.wait_time||0,15))}).catch(function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!y()(t,"extraErrorInfo.isWechatDirectPayFail")||!r.autoSwitchPay.isAutoSwitchEnabled){e.next=3;break}return e.abrupt("return",r.autoSwitchPay.performAutoSwitchPay());case 3:return e.next=5,z.hide();case 5:throw t;case 6:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()):this.innerPay.realPay(e)}},{key:"pay",value:function(){if(this.appId===this.config.AppID.WeChatH5Pay&&localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={time:Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var t="transac_wechat_wapcallback.html?"+Object(ge.b)(a()({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise(function(e,r){be.a.reload(t)})}return Ue()(k()(r.prototype),"pay",this).call(this)}},{key:"appId",get:function(){return this.innerPay.appId}}]),r}(We),Sr=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"prepayParams",value:function(){return a()({pap_pay:1,pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:a()({},this.attributeFields,{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:""},this.params)}},{key:"realPay",value:function(e){var r=this,t=K.a.AliPayV2;return Object(f.g)("JSPay","pay",{type:t,params:e}).then(function(e){return Le({paymentType:t,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var n=e.errorCode;return Le({paymentType:t,errorCode:n+"",orderSn:r.orderSn}),Promise.reject({errorCode:n})})}},{key:"appId",get:function(){return this.config.AppID.AliPay}}]),r}(We),kr=function(e){function r(e){var t;return p()(this,r),(t=C()(this,k()(r).call(this,e))).prepayType=e.prepayType,t.additionalParams=e.additionalParams,t}return x()(r,e),l()(r,[{key:"prepayParams",value:function(){var e=Object(ge.h)("transac_wappay_callback.html",a()({order_sn:this.orderSn,prepay_type:this.prepayType},this.additionalParams));return a()({pay_app_id:this.appId,pap_pay:1,version:this.paymentVersion,attribute_fields:a()({},this.attributeFields,{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:e},this.params)}},{key:"realPay",value:function(e){return new Promise(function(r,t){location.href=e.gateway_url+"?"+Object(ge.b)(e.query)})}},{key:"appId",get:function(){return this.config.AppID.AliPayWeb}}]),r}(We),Dr=function(){function e(r){p()(this,e),this.innerPay=null,Object(m.a)().isNativePlatform?this.innerPay=new Sr(r):this.innerPay=new kr(r)}return l()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}(),xr=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return Object(f.g)("JSPay","pay",{type:K.a.QQPay,params:e}).then(function(e){return Le({paymentType:K.a.QQPay,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var t=e.errorCode;return Le({paymentType:K.a.QQPay,errorCode:t+"",orderSn:r.orderSn}),Promise.reject({errorCode:t})})}},{key:"appId",get:function(){return this.config.AppID.QQ}}]),r}(We),Or=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return new Promise(function(t,n){var a=function(){void 0===window.mqq.tenpay?(Object(Ne.c)(new Error("window.mqq.tenpay未定义")),n({errorCode:0})):"function"!=typeof window.mqq.tenpay.pay&&(Object(Ne.c)(new Error("window.mqq.tenpay.pay不是一个函数")),n({errorCode:0}));var a="appid#"+r.config.ApiKey.QQPublicTrack+"|bargainor_id#"+r.config.ApiKey.QQPublicMid+"|channel#wallet";window.mqq.tenpay.pay({tokenId:e.token_id,pubAcc:r.config.ApiKey.QQUIN,pubAccHint:r.config.qqFollowTip,appInfo:a},function(e){Le({paymentType:K.a.QQPay,errorCode:e.resultCode+""||"",orderSn:r.orderSn});var a="object"===Te()(e)&&0===parseInt(e.resultCode,10),i=e&&-11001==+e.resultCode,o=e&&-1==+e.resultCode&&"用户主动放弃支付"===e.retmsg,c=i||o,s=o?-11001:e.resultCode;a?t(e):c?n({errorCode:s,cancelled:!0}):(Object(Ne.c)(new Error("window.mqq支付失败"),{data:JSON.stringify(e)}),n({errorCode:s}))})};"undefined"==typeof mqq?setTimeout(function(){"undefined"==typeof mqq?(Object(Ne.c)(new Error("window.mqq未定义")),n({errorCode:0})):a()},2e3):a()})}},{key:"appId",get:function(){return this.config.AppID.QQPublicPayment||this.config.AppID.QQPublic}}]),r}(We),Ar=function(){function e(r){p()(this,e);var t=Object(m.a)().isQQPlatform;this.innerPay=t?new Or(r):new xr(r)}return l()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}(),Ir=function(e){function r(e){var t;return p()(this,r),(t=C()(this,k()(r).call(this,e))).orderSn=e.orderSn,t}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return e.money_order=e.money_order+"",e.server_time=e.server_time+"",Object(f.g)("JSPay","pay",{type:K.a.ApplePay,params:e}).then(function(e){return Le({paymentType:K.a.ApplePay,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var t=e.errorCode,n=e.data;return Le({paymentType:K.a.ApplePay,errorCode:t+"",orderSn:r.orderSn}),Promise.reject({errorCode:t,errorObject:n})})}},{key:"appId",get:function(){return this.config.AppID.ApplePay}}]),r}(We),Tr=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return Object(f.g)("JSPay","pay",{type:K.a.HBInstallmentPay,params:e}).then(function(e){return Le({paymentType:K.a.HBInstallmentPay,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var t=e.errorCode;return Le({paymentType:K.a.HBInstallmentPay,errorCode:t+"",orderSn:r.orderSn}),Promise.reject({errorCode:t})})}},{key:"appId",get:function(){return this.config.AppID.HBInstallmentPay}}]),r}(We),jr=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return ie()?Object(f.g)("JSPay","pay",{type:K.a.AliPayV2,params:e}).then(function(e){return Le({paymentType:K.a.HBPay,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var t=e.errorCode;return Le({paymentType:K.a.HBPay,errorCode:t+"",orderSn:r.orderSn}),Promise.reject({errorCode:t})}):(Object(Ne.c)(new Error("当前APP版本不支持花呗支付")),Promise.reject({errorCode:0}))}},{key:"appId",get:function(){return 322}}]),r}(We),Er=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this,t=e.prepay_id;return new Promise(function(){Object(j.a)(),z.show({title:"转账支付中"}),setTimeout(s()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.hide();case 2:be.a.reload("transac_return_compensation.html?_t_timestamp=sub_bank_transfer_guide&prepay_id=".concat(t,"&order_sn=").concat(r.orderSn));case 3:case"end":return e.stop()}},e)})),1e3)})}},{key:"appId",get:function(){return 135}}]),r}(We),Wr=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return Object(f.g)("JSPay","pay",{type:K.a.UnionPay,params:e}).then(function(e){return Le({paymentType:K.a.UnionPay,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var t=e.errorCode;return Object(_e.a)({payload:{event:"app_unionpay_pay",order_sn:r.orderSn,error_code:t+""}}),Promise.reject({errorCode:t})})}},{key:"appId",get:function(){return 42001}}]),r}(We),Nr=function(e){function r(){return p()(this,r),C()(this,k()(r).apply(this,arguments))}return x()(r,e),l()(r,[{key:"realPay",value:function(e){var r=this;return Object(f.g)("JSPay","pay",{type:K.a.DuoDuoPay,params:e}).then(function(e){return Le({paymentType:K.a.CreditCardInstallmentPay,errorCode:"0",orderSn:r.orderSn}),e}).catch(function(e){Re(e);var t=e.errorCode;return Le({paymentType:K.a.CreditCardInstallmentPay,errorCode:t+"",orderSn:r.orderSn}),Promise.reject({errorCode:t})})}},{key:"appId",get:function(){return 45001}}]),r}(We),Mr={pay:function(e){var r=e.paymentType;void 0===e.isSupportDirectPay&&(e.isSupportDirectPay=!0);var t=Object(m.a)(),n=t.isWeChatPlatform,a=t.isWeChatMiniProgram,i=t.isNativePlatform,o=Ae;switch(r){case K.a.WeChat:o=a?Me:e.isSupportDirectPay?Cr:Xe;break;case K.a.AliPay:n||(o=Dr);break;case K.a.AliPayDirectDebit:n||(o=br);break;case K.a.QQPay:n||(o=Ar);break;case K.a.ApplePay:i&&t.system===v.b.IOS&&(o=Ir);break;case K.a.HBInstallmentPay:n||(o=Tr);break;case K.a.HBPay:o=jr;break;case K.a.DuoDuoPay:o=yr;break;case K.a.XianYongHouFu:o=er;break;case K.a.DuoDuoPayACS:o=Er;break;case K.a.UnionPay:o=Wr;break;case K.a.CreditCardInstallmentPay:o=Nr}var c=y()(e,"optionalParams.mianmiV3"),s=y()(e,"optionalParams.mianmiV3SafeHint");return z.init({paymentType:r,mianmiV3:c,mianmiV3SafeHint:s}),new o(e).pay()}};function Fr(){var e=Object(m.a)();if(e.statisfy&&e.statisfy("1.2.2","2.0.8","greaterThan")||e.isTinyNativePlatform)Object(f.g)("JSNavigation","selectTab",{tab_index:0});else{var r="index.html";e.isNativePlatform||e.isTinyNativePlatform?Object(f.g)("JSNavigation","reset",{url:Object(ge.h)(r)}).then(function(){return be.a.reload(r)},function(){return be.a.reload(r)}):be.a.uniformForward(r)}}var Ur={NOTHING:0,FORWARD:1,BACK:2,GO_HOME:3,RELOAD:4,REFRESH:7};function Lr(e){var r=y()(e,"type",0),t=y()(e,"param.url");switch(r){case Ur.FORWARD:return function(){return be.a.uniformForward(t)};case Ur.BACK:return function(){return be.a.back(t)};case Ur.GO_HOME:return Fr;case Ur.RELOAD:return function(){return be.a.reload(t)};case Ur.REFRESH:return function(){return location.reload()}}}var Rr={TOAST:"toast",NOTHING:"nothing",ALERT:"alert",CONFIRM:"confirm"};function Qr(e){var r=e.errorCode,t=e.errorObject,n=y()(t,"error_payload");if(!n)return null;var a=y()(n,"view_style",Rr.TOAST);if(a===Rr.NOTHING)return Promise.reject({errorCode:r,errorHandling:{isErrorAlerted:!0}});var i=y()(n,"view_object.message")||"",o=y()(n,"view_object.title")||"";i||(o=o||"系统繁忙，请稍后再试 (".concat(r,")"));var c=function(e){var r=e||{},t=r.on_show,n=r.on_ok,a=r.on_cancel;return{onShow:Lr(t),onCancel:Lr(a),onOk:Lr(n)}}(y()(n,"view_object"))||{},s=c.onOk,u=c.onCancel,p=c.onShow,d=y()(n,"view_object.ok_label")||"确定",l=y()(n,"view_object.cancel_label")||"取消",h=+y()(n,"view_object.on_close.type");return new Promise(function(e,t){var n=function(e){return function(){e?e():t({errorCode:r,errorHandling:{isErrorAlerted:!0}})}};switch(a){case Rr.ALERT:Object(fe.a)({title:o,text:i,onConfirm:n(s),onClose:n(s),confirmButtonLabel:d});break;case Rr.CONFIRM:Object(pr.a)({title:o,text:i,onConfirm:n(s),onCancel:n(u),onClose:n(2===h?s:u),cancelButtonLabel:l,confirmButtonLabel:d});break;default:Object(Pe.a)(o,{onClose:n(p)})}})}var qr,Hr={"0010":"交易金额超限，建议更换其他支付方式或稍后重试","0014":"银行阻止了该银行卡交易，建议更换支付方式付款或咨询银行如何解决","0116":"银行卡密码错误次数超限，建议更换其他支付方式或稍后重试","0119":"您的银行卡暂不支持在线支付业务，建议更换其他支付方式或联系银行客服","0124":"您的银行卡余额不足，建议更换其他支付方式"},Br="交易失败，建议更换其他支付方式或稍后重试",Xr=60136;var Vr=(qr={},tr()(qr,te.WithoutWeChatClient.code,"您未安装微信或微信版本过低，建议安装新版微信后重试或使用其他支付方式"),tr()(qr,60137,"您未安装微信，请安装后再支付或选择其他支付方式重新支付"),tr()(qr,60138,"您使用的微信非官方版本，建议到官方渠道下载再重新支付"),tr()(qr,60139,"当前支付方式不可用，请选择其他支付方式再重新支付"),tr()(qr,60170,"您未安装云闪付或云闪付版本过低，建议安装新版云闪付后重试或使用其他支付方式"),tr()(qr,60145,"当前支付方式不稳定，请更换其他支付方式"),tr()(qr,60146,"当前支付方式不稳定，请更换其他支付方式"),tr()(qr,60105,"当前支付方式不稳定，请更换其他支付方式"),qr);function Kr(e){var r=e.errorCode,t=Qr(e);if(t)return Object(j.a)(),t;var n=function(e){var r=e.errorCode,t=e.errorObject,n=void 0===t?{}:t;if(+r!==Xr)return null;var a=n.sdk_return_code,i=Hr[a]||Br;return new Promise(function(e,t){var n=function(){t({errorCode:r,errorHandling:{isErrorAlerted:!0}})};Object(fe.a)({title:i,onConfirm:n,onClose:n})})}(e);return n?(Object(j.a)(),n):r===parseInt(te.NativePaymentCancel.code,10)?Promise.reject({errorCode:r,cancelled:!0}):r===parseInt(te.QQPayFailed.code,10)?(Object(j.a)(),new Promise(function(e,t){var n=function(){t({errorCode:r,errorHandling:{isErrorAlerted:!0}})};Object(fe.a)({title:"由于QQ版本问题或未安装QQ\n暂时无法使用QQ钱包\n\n请安装新版QQ或选择其他支付方式",onConfirm:n,onClose:n})})):Vr[r]?(Object(j.a)(),new Promise(function(e,t){var n=function(){t({errorCode:r,errorHandling:{isErrorAlerted:!0}})};Object(fe.a)({title:Vr[r],onConfirm:n,onClose:n})})):function(e){return[parseInt(te.ItemRemoved.code,10),parseInt(te.OutOfStock.code,10),parseInt(te.GroupInvalid.code,10),parseInt(te.OverBuyLimit.code,10),parseInt(te.OrderPayed.code,10),parseInt(te.PrepayBusy.code,10),parseInt(te.PaymentDisabled.code,10),parseInt(te.OverBuyVirtualGoodsLimit.code,10)].includes(e)}(r)?(Object(j.a)(),new Promise(function(e,t){var n=function(){t({errorCode:r,errorHandling:{isErrorAlerted:!0}})};Object(fe.a)({title:te.getMsgFromCode(r),onConfirm:n,onClose:n})})):Promise.reject(e)}t.d(r,"Pay",function(){return Zr}),t.d(r,"Toast",function(){return _}),t.d(r,"PrepayType",function(){return ee.b}),t.d(r,"PaymentType",function(){return ee.a}),t.d(r,"getPaymentAppID",function(){return ne.a}),t.d(r,"isHBPayAvailable",function(){return ie}),t.d(r,"isHBInstallmentPayAvailable",function(){return ce}),t.d(r,"isApplePayAvailable",function(){return ae.a}),t.d(r,"isAliPayDirectDebitAvailable",function(){return ue}),t.d(r,"wechatPayScoreSign",function(){return Oe}),t.d(r,"payScoreQueryService",function(){return we});var Jr,Yr="order_paid_times",Gr=Z.a.PayStatus,zr=Z.a.ParentOrderStatus;Jr=Object(m.a)().isNativePlatform;var Zr=function(){function e(){var r=this;p()(this,e),this.orderPaidTimes=0,this.attributeFields=null,Jr?Object(f.g)("AMStorage","get",{key:Yr}).then(function(e){r.orderPaidTimes=parseInt(e.value||0,10),r.attributeFields={paid_times:r.orderPaidTimes}}):(this.orderPaidTimes=+localStorage.getItem(Yr),isNaN(this.orderPaidTimes)&&(this.orderPaidTimes=0),this.attributeFields={paid_times:this.orderPaidTimes})}return l()(e,[{key:"defaultCheckOrderStatus",value:function(){var e=s()(o.a.mark(function e(r){var t,n,a,i,c,s,u,p,d,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r.maySuccess,n=r.orderSn,a=r.prepayType,i=function(e){return new Promise(function(r){setTimeout(r,e)})},c=function(e){var r,i,o=e.retryTime;return a===$.a.Combine?(r="api/aristotle/pay_check_parent_order",i={times:o,success:t?1:0,parent_order_sn:n}):(r="api/aristotle/pay_check",i={times:o,success:t?1:0,order_sn:n}),me.getInstance().post(r,i)},s=1;case 4:if(!(s<6)){e.next=41;break}return Object(_e.a)({error_msg:"paycheck_".concat(t?"maysuccess":"mayfail","_").concat(s),payload:{event:"paycheck",order_sn:n}}),e.prev=6,e.next=9,c({retryTime:s});case 9:if(u=e.sent,p=u.wait_time,d=u.parent_order_status,l=u.pay_status,+d!=+zr.Unpayed&&+l!=+Gr.Unpayed||!(p>0)){e.next=18;break}return e.next=16,i(1e3*p);case 16:e.next=31;break;case 18:if(a!==$.a.Combine){e.next=26;break}if(+d!=+zr.Payed){e.next=23;break}return e.abrupt("return",{parentOrderStatus:d});case 23:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 24:e.next=31;break;case 26:if(+l!=+Gr.Payed){e.next=30;break}return e.abrupt("return",{orderStatus:1});case 30:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 31:e.next=38;break;case 33:throw e.prev=33,e.t0=e.catch(6),e.t0=e.t0||{},e.t0.errorCode||(e.t0.errorCode="unknown"),e.t0;case 38:s++,e.next=4;break;case 41:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 42:case"end":return e.stop()}},e,null,[[6,33]])}));return function(r){return e.apply(this,arguments)}}()},{key:"checkOrderStatus",value:function(e){var r=this,t=e.service,n=e.timeout,a=e.success,i=e.orderSn,o=e.prepayType,c=!0;return Promise.race([new Promise(function(e,r){setTimeout(function(){c?r():e()},n||1e4)}),t({maySuccess:a,orderSn:i,prepayType:o}).then(function(e){return c=!1,e})]).then(function(e){return e&&1===e.orderStatus&&(Jr?Object(f.g)("AMStorage","set",{key:Yr,value:r.orderPaidTimes+1+""}):localStorage.setItem(Yr,r.orderPaidTimes+1)),e}).catch(function(){throw{errorCode:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).errorCode||-1,extraErrorInfo:{isCheckOrderFail:!0}}})}},{key:"pay",value:function(e){var r=this,t=e.paymentType,n=e.orderSn;if(t&&t!==K.a.FriendPay&&(Jr&&Object(f.g)("AMStorage","set",{key:"last_payment_type2",value:t.toString()}),localStorage.setItem("LastPaymentType",t.toString())),Object(_e.a)({payload:{event:"before_prepay",payment_type:t,order_sn:n}}),t===K.a.FriendPay)return Promise.resolve({redirectToFriendPay:!0});var i=e.checkOrderStatus&&"function"==typeof e.checkOrderStatus?e.checkOrderStatus:this.defaultCheckOrderStatus,c=null;return e.attributeFields=a()({},e.attributeFields,{},this.attributeFields),Mr.pay(e).then(function(t){return c=t,null!==e.checkOrderStatus?r.checkOrderStatus({service:i,timeout:e.checkOrderTimeout,success:!0,orderSn:n,prepayType:e.prepayType}):t}).then(function(){var e=s()(o.a.mark(function e(r){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=c)||void 0===n?void 0:n.xyhfSwitchedToWechat,![t,z.currentPaymentType].includes(K.a.XianYongHouFu)||a){e.next=4;break}return e.next=4,z.showSuccess({title:"下单成功",payInfoTitle:"先用后付"});case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()).then(function(e){return e!==c?a()({},e,{},c):c}).catch(function(){var a=s()(o.a.mark(function a(){var c,s,u=arguments;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=u.length>0&&void 0!==u[0]?u[0]:{},![t,z.currentPaymentType].includes(K.a.XianYongHouFu)){a.next=6;break}return a.next=4,z.hide();case 4:a.next=9;break;case 6:if(!z.isSwitched||z.currentPaymentType!==K.a.AliPayDirectDebit){a.next=9;break}return a.next=9,z.hide();case 9:if(0!=+(s=c.errorCode)&&-1!=+s&&+s!=+te.NativeNormalError.code&&60160!=+s){a.next=13;break}if(null===e.checkOrderStatus){a.next=13;break}return a.abrupt("return",r.checkOrderStatus({service:i,timeout:e.checkOrderTimeout,success:!1,orderSn:n}));case 13:throw c;case 14:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()).catch(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=y()(e,"optionalParams.errorCodeBlackList")||[],n=r.errorCode;if(Array.isArray(t)&&t.map(function(e){return+e}).includes(+n)||"defaultCheckOrderStatusFail"===n)throw r;if(y()(e,"optionalParams.skipDefaultErrorHandler"))throw r;return Kr(r)})}},{key:"setHttpService",value:function(e){if(!(e&&"post"in e&&"function"==typeof e.post))throw new window.Error("pay.setHttpService的参数必须包含post方法");me.setInstance(e)}}]),e}(),$r={};$r=new Zr;r.default=$r},"p+lt":function(e,r,t){},whv1:function(e,r,t){"use strict";r.a={AliPay:1,WeChat:2,QQPay:3,ApplePay:4,AliPayDirectDebit:5,FriendPay:6,HBInstallmentPay:7,AliPayV2:8,UnionPay:9,DuoDuoPay:10,HBPay:11,XianYongHouFu:12,DuoDuoPayACS:13,CreditCardInstallmentPay:14}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-eve-spike/js/pddPay_2583c0e73073dc041b9e.js.map