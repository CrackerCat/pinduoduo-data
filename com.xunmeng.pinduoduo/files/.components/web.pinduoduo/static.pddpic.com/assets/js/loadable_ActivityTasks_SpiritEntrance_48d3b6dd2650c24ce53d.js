(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[26],{Cyn0:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var i={BrowseGuide:1,BuyGuide:2},o="LiveOuterTask_SpiritBrowserCompleteKey"},I28V:function(e,t,n){"use strict";n.r(t);var i=n("lSNA"),o=n.n(i),r=n("J4zp"),c=n.n(r),a=n("q1tI"),s=n.n(a),u=n("TyAF"),l=n("TSYQ"),p=n.n(l),f=n("mFSr"),d=n("N4rI"),b=n("HIPb"),m=n("DCTZ"),v=n("kLkQ"),w=n("zRTd"),_=n("/WLQ"),g=n("gWvw"),y=n("FoiV"),O=n("Cyn0"),h=n("yXPU"),S=n.n(h),j=n("o0o1"),k=n.n(j),x=n("Vpw8"),T=n("O2NP"),D=n("eQJp"),C=Object(x.a)(u.observer)((function(e){var t=Object(T.k)().store,n=t.activityTaskStore,i=t.query,o=n.missionTypeMap,r=n.requestCompleteGenieMission,c=n.refreshPendantInfo,u=n.showSpiritDialog,l=o[y.d.BROWSE]||{},p=l.completeSeconds,f=l.missionId,d=l.finishCount,b=Object(T.e)(Object(a.useCallback)(S()(k.a.mark((function e(){var t,o,a,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(f);case 2:return o=e.sent,a=n.missionTypeMap[y.d.BUY]||{},s=a.status,null!=o&&null!==(t=o.result)&&void 0!==t&&t.finish&&(Object(v.n)(null==i?void 0:i.list_id,O.b),s===y.c.UNDONE&&u(O.a.BuyGuide)),e.next=7,Object(v.o)(1e3);case 7:c();case 8:case"end":return e.stop()}}),e)}))),[])),m={bizKey:"spiritBrowse-".concat(d),completeSeconds:p,onComplete:b,onUpdateSeconds:e.onUpdateSeconds};return s.a.createElement(D.a,m)})),E=n("m664"),N=n.n(E);t.default=Object(u.observer)((function(){var e;Object(b.a)(N.a);var t=Object(a.useState)(0),n=c()(t,2),i=n[0],r=n[1],u=Object(T.k)().store,l=u.activityTaskStore,h=u.roomId,S=u.query,j=l.missionTypeMap,k=j[y.d.BROWSE]||{},x=k.status,D=k.priceNum,E=k.completeSeconds,U=void 0===E?60:E,B=j[y.d.BUY]||{},L=B.status,P=B.priceNum,I=L===y.c.UNDONE,A=x===y.c.UNDONE&&!Object(v.k)(null==S?void 0:S.list_id,O.b),K=A?"看".concat(U-i,"秒得"):I?"下单得金币":"领取金币";return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:N.a.entrance,onClick:function(){Object(w.f)({subType:_.e.DuoDuoSpiritNew}),A?Object(v.p)("浏览".concat(U,"秒即可获得金币")):I?Object(d.a)("live_shop_coupon_dialog",{openLiveGoods:!0,room_id:h,lego_data:{goodsListTopHint:"直播间下单可得金币"}}):Object(m.a)()}},s.a.createElement(w.b,{subType:_.e.DuoDuoSpiritNew}),s.a.createElement(f.a,{className:N.a.bg,src:"https://promotion.pddpic.com/mobile_live/c20a8d85-f648-4eb4-a354-4858c227e4cf.png.slim.png"}),s.a.createElement("div",{className:N.a.rewardText},Object(g.a)(A?D:P)),s.a.createElement("div",{className:p()((e={},o()(e,N.a.countDownText,A),o()(e,N.a.buyText,!A),e))},K)),A&&s.a.createElement(C,{onUpdateSeconds:r}))}))},eQJp:function(e,t,n){"use strict";var i=n("yXPU"),o=n.n(i),r=n("J4zp"),c=n.n(r),a=n("o0o1"),s=n.n(a),u=n("q1tI"),l=n("TyAF"),p=n("Vpw8"),f=n("O2NP"),d=n("yo/L"),b=n("hA9s"),m=function(e){var t=e.bizKey,n=e.completeSeconds,i=e.onComplete,r=e.onUpdateSeconds,a="LiveOuterTaskWatchedSeconds_"+t,l=(Object(f.k)().store.query||{}).list_id,p=void 0===l?"":l,m=Object(u.useState)(0),v=c()(m,2),w=v[0],_=v[1],g=Object(u.useState)(null),y=c()(g,2),O=y[0],h=y[1],S=function(e){_(e||0),r(e||0)};return Object(u.useEffect)((function(){if(t)(function(){var e=o()(s.a.mark((function e(){var t,n,i,o,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(Object(d.c)(a)||"").split("$__split__$"),n=c()(t,2),i=n[0],o=n[1],r=void 0===o?0:o,i&&p===i&&S(parseInt(r)||0),h(1e3);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();else if(b.b)throw new Error("BrowseCountdown的bizKey不能为空！")}),[]),Object(f.d)((function(){var e=w+1;Object(d.f)(a,"".concat(p).concat("$__split__$").concat(e)),S(e),e>=n&&(h(null),i(),Object(d.a)(a))}),O),null};m.defaultProps={completeSeconds:31536e3,onComplete:function(){},onUpdateSeconds:function(){}},t.a=Object(p.a)(l.observer)(m)},gWvw:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=["个","万","亿","兆","垓"];if(!/^(([1-9][0-9]*)|0)$/.test(e))return console.warn("字符串传参不标准，返回为空字符串"),{value:"",unit:"",valueStr:"",takeUnitStr:""};var i=""+e,o=Math.floor((i.length-1)/4),r=o<n.length?o:n.length-1,c=i.length-4*r,a=i.slice(0,c),s=i.slice(c,c+t),u=n[r]||n[n.length-1],l=0===r?a:a+"."+s;return l+(0===r?"":u)}},m664:function(e,t,n){var i=n("rIpv"),o=n("Q8e5"),r="string"==typeof i?[[e.i,i,""]]:i;(t=e.exports=i.locals||{})._getContent=function(){return r},t._getCss=function(){return""+i},t._insertCss=function(e){return o(r,e)}},rIpv:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._3XsKYwvP{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;position:relative}._3XsKYwvP img{width:.72rem;height:.637rem}._3Dp5qo0U{position:absolute;top:.22rem;width:.65rem;height:.14rem;background:#c91f07;border-radius:.14rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#fff;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}._1Qgi4nZZ,._3jDi5fv2{position:absolute;color:#fff;font-family:PingFangSC-Medium,PingFang SC,PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;font-weight:700;font-weight:500;text-align:center}._3jDi5fv2{bottom:.05rem;font-size:.16rem}._1Qgi4nZZ{bottom:.06rem;font-size:.13rem}",""]),t.locals={entrance:"_3XsKYwvP",rewardText:"_3Dp5qo0U",countDownText:"_3jDi5fv2",buyText:"_1Qgi4nZZ"}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-live-layer/js/loadable_ActivityTasks_SpiritEntrance_48d3b6dd2650c24ce53d.js.map