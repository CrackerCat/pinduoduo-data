(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[19],{"+57a":function(e,t,a){"use strict";var o=a("FdF9"),r=a("kMSe"),n=a("MVZn"),s=a.n(n),i=a("CSCl");const l=[{type:"default",colNum:7,imageStyle:{width:".32rem"},showDesc:!1,typeBar:{icon:Object(i.a)("/chat/emoji_type_default.png"),style:{width:".26rem"}},emojiList:[{id:"01",desc:"微笑",res:"01.png"},{id:"02",desc:"撇嘴",res:"02.png"},{id:"03",desc:"大爱",res:"03.png"},{id:"04",desc:"呆住",res:"04.png"},{id:"05",desc:"酷",res:"05.png"},{id:"06",desc:"流泪",res:"06.png"},{id:"07",desc:"害羞",res:"07.png"},{id:"08",desc:"闭嘴",res:"08.png"},{id:"09",desc:"困",res:"09.png"},{id:"10",desc:"大哭",res:"10.png"},{id:"11",desc:"流鼻血",res:"11.png"},{id:"12",desc:"发怒",res:"12.png"},{id:"13",desc:"耶",res:"13.png"},{id:"14",desc:"嘻嘻",res:"14.png"},{id:"15",desc:"惊讶",res:"15.png"},{id:"16",desc:"难过",res:"16.png"},{id:"17",desc:"囧",res:"17.png"},{id:"18",desc:"抓狂",res:"18.png"},{id:"19",desc:"吐",res:"19.png"},{id:"20",desc:"偷笑",res:"20.png"},{id:"21",desc:"愉快",res:"21.png"},{id:"22",desc:"白眼",res:"22.png"},{id:"23",desc:"偷看",res:"23.png"},{id:"24",desc:"馋",res:"24.png"},{id:"25",desc:"羡慕",res:"25.png"},{id:"26",desc:"汗",res:"26.png"},{id:"27",desc:"大笑",res:"27.png"},{id:"28",desc:"skr",res:"28.png"},{id:"29",desc:"奋斗",res:"29.png"},{id:"30",desc:"咒骂",res:"30.png"},{id:"31",desc:"疑问",res:"31.png"},{id:"32",desc:"嘘",res:"32.png"},{id:"33",desc:"晕",res:"33.png"},{id:"34",desc:"衰",res:"34.png"},{id:"35",desc:"生病",res:"35.png"},{id:"36",desc:"敲打",res:"36.png"},{id:"37",desc:"再见",res:"37.png"},{id:"38",desc:"擦汗",res:"38.png"},{id:"39",desc:"抠鼻",res:"39.png"},{id:"40",desc:"鼓掌",res:"40.png"},{id:"41",desc:"坏笑",res:"41.png"},{id:"42",desc:"左哼哼",res:"42.png"},{id:"43",desc:"右哼哼",res:"43.png"},{id:"44",desc:"皱眉",res:"44.png"},{id:"45",desc:"鄙视",res:"45.png"},{id:"46",desc:"委屈",res:"46.png"},{id:"47",desc:"哭了",res:"47.png"},{id:"48",desc:"阴险",res:"48.png"},{id:"49",desc:"亲亲",res:"49.png"},{id:"50",desc:"可怜",res:"50.png"},{id:"51",desc:"笑哭",res:"51.png"},{id:"52",desc:"捂脸",res:"52.png"},{id:"53",desc:"吐舌头",res:"53.png"},{id:"54",desc:"头疼",res:"54.png"},{id:"55",desc:"吃手",res:"55.png"},{id:"56",desc:"吃手手",res:"56.png"},{id:"57",desc:"吐血",res:"57.png"},{id:"58",desc:"小心心",res:"58.png"},{id:"59",desc:"吃西瓜",res:"59.png"},{id:"60",desc:"吐瓜籽",res:"60.png"},{id:"61",desc:"柠檬",res:"61.png"},{id:"62",desc:"剁手手",res:"62.png"},{id:"63",desc:"好的",res:"63.png"},{id:"64",desc:"点赞",res:"64.png"},{id:"65",desc:"弱",res:"65.png"},{id:"66",desc:"握手",res:"66.png"},{id:"67",desc:"强壮",res:"67.png"},{id:"68",desc:"拥抱",res:"68.png"},{id:"69",desc:"玫瑰",res:"69.png"},{id:"70",desc:"凋谢",res:"70.png"},{id:"71",desc:"爱心",res:"71.png"},{id:"72",desc:"心碎",res:"72.png"},{id:"73",desc:"买买买",res:"73.png"}].map((e=>s()(s()({},e),{},{label:`[${e.desc}]`,src:Object(i.a)("/chat/emojis/emoji_"+e.res)})))}],c=l.reduce(((e,t)=>("default"===t.type&&(t.emojiList||[]).forEach((({label:t,src:a}={})=>{t&&(e[t]={src:a})})),e)),{});t.a=Object(o.memo)(Object(r.d)(Object(o.forwardRef)((function({content:e,containerClass:t="",imageClass:a="",children:r},n){const s=Object(o.useRef)();Object(o.useImperativeHandle)(n,(()=>s.current));const i=[];return e.split(/(\[.*?])/g).map((e=>e.split(/(.*)(\[.+])$/))).forEach((e=>e.forEach((e=>{const t=i.length;var r;e&&(c.hasOwnProperty(e)?i.push(o.default.createElement("img",{key:t,src:null===(r=c[e])||void 0===r?void 0:r.src,className:a,alt:e})):i.push(o.default.createElement(o.Fragment,{key:t},e)))})))),o.default.createElement("span",{className:t,ref:s},i,r)}))))},"+j3k":function(e,t,a){var o=a("5E9K"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"+vUh":function(e,t,a){e.exports={icon:"_1PJkHLAg",back:"_16nNUClS",horizontalScan:"yXxO4lAH"}},"/++w":function(e,t,a){e.exports={yellowLabelListWrap:"_9kqdzMX6",yellowLabelWrap:"_124NkzTI",listItem:"QAFjCy2I",yellowLabel:"_19oXnsrZ",yellowLabelOC:"WbesAh-B",countDown:"_40JBw-jd",skuSelectorHeadContent:"_1fYHEBIC",skuSelectorHeadContentOC:"_3P4E5ia9",skuSelectorPrice:"_2mtFnR8B",skuSelectorPriceOC:"IvhjY_HV",skuQuantityPriceDesc:"_27FaiT3N",isNewPriceArea:"Cccuw03n",startHide:"C68J1BqP",toHide:"_2NCyKoqd",startDisplay:"_1cpcC5_k",toDisplay:"_1k8KGuTw",horizontalScan:"HtMaPWb-"}},"/tZv":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"._2lZKk9YL{position:relative;overflow:hidden}._2TzgBdA6{height:3.75rem;width:3.75rem}._3dz3_nUY{margin:0;padding:0;width:100%;height:3.75rem;white-space:nowrap}._3YxyRP2l{position:relative;display:inline-block;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}._3YxyRP2l,._3YxyRP2l>img{width:100%;height:100%}._1cXo17L0{box-sizing:content-box;text-align:center;position:absolute;right:.12rem;bottom:.12rem;height:.18rem;line-height:.18rem;color:#fff;font-size:.13rem;font-family:PingFangSC-Regular,STHeiti STXihei,Microsoft YaHei,Microsoft JhengHei,miui;padding:0 .05rem;border-radius:.09rem;background-color:rgba(0,0,0,.3409);z-index:1}._1bHKghrQ{position:absolute;top:0;right:-.74rem;bottom:0;width:.74rem}._1bHKghrQ ._3l-YVWKU{width:.16rem;height:.16rem;left:.12rem}._1bHKghrQ ._1TN1numE,._1bHKghrQ ._3l-YVWKU{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}._1bHKghrQ ._1TN1numE{left:.36rem;width:.14rem;line-height:.18rem;font-size:.14rem;color:#58595b;white-space:normal}._3H8oYA2r{position:absolute;top:0;left:0;width:100%;z-index:1;pointer-events:none;opacity:1;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in;will-change:opacity}._2sx9rvZV{opacity:0}._3g1TendM{position:fixed}._3g1TendM,._3Q9UT_dS{left:0;width:3.75rem;pointer-events:none}._3Q9UT_dS{position:absolute;bottom:0;height:.75rem;background-image:-webkit-linear-gradient(transparent,rgba(0,0,0,.7));background-image:linear-gradient(transparent,rgba(0,0,0,.7));z-index:1}._3Q9UT_dS ._2gxZULPY{width:3.08rem;height:.24rem;margin-top:.42rem;margin-left:.12rem;font-size:.18rem;font-weight:600;line-height:.24rem;color:#fff;word-break:break-all;overflow:hidden}",""]),t.locals={bannerContainer:"_2lZKk9YL",bannerDiv:"_2TzgBdA6",bannerContent:"_3dz3_nUY",bannerItem:"_3YxyRP2l",bannerIndex:"_1cXo17L0",seeMore:"_1bHKghrQ",icon:"_3l-YVWKU",text:"_1TN1numE",img:"_3H8oYA2r",hideImg:"_2sx9rvZV",fakeClickItem:"_3g1TendM",goodsName:"_3Q9UT_dS",name:"_2gxZULPY"}},"0+0r":function(e,t,a){},"0JxP":function(e,t,a){"use strict";var o=a("MVZn"),r=a.n(o),n=a("FdF9"),s=a("kMSe"),i=a("ECpg"),l=a("fG2L"),c=a("S8c2"),d=a("eHaf"),u=a("mj+i"),p=a("LdZ1"),m=a("/Cc8"),h=a("P4n2"),f=a.n(h);t.a=Object(s.d)((function(e){Object(i.d)(f.a);const{queries:t}=Object(m.a)(),{goods:a,tabId:o,commonTrackingInfo:s={}}=e,{data:h,idx:g,position:_}=a,{behavior:y,goodsList:b=[],title:v,pRec:k,avatars:I=[]}=h||{},w={page_el_sn:3296619,idx:g,position:_,p_rec:JSON.stringify(k)},S=r()({page_el_sn:3221854,title:v,position:_,prom_level_three_name:"list_exposed_goods",prom_name:"bestgoods"},s),E=Object(n.useCallback)((()=>{const{contentId:e,listToken:a,contentName:r,firstGoods:n,contentOrg:i,contentSceneId:l,contentType:c,contentHot:d,contentXrecOriname:m,contentXrecGtype:f,type:g,catId3:_,minPrice:k,maxPrice:I}=h,w=(b||[]).map((e=>null==e?void 0:e.goodsId)).join("_");Object(p.b)(Object(u.a)({title:v,behavior:y,type:g,tabId:o,content_id:e,list_token:a||w,content_name:r,first_goods:n,content_org:i,content_scene_id:l,content_type:c,content_hot:d,content_xrec_oriname:m,content_xrec_gtype:f,cat_id_3:_,min_price:k,max_price:I,top_goods_id:null==t?void 0:t.goods_id,_pdd_fs:1,_pdd_tc:"ffffff",_pdd_sbs:1,refer_prom_name:"bestgoods",refer_prom_level_one_name:s.prom_level_one_name,refer_prom_level_two_name:s.prom_level_two_name,refer_prom_level_three_name:s.prom_level_three_name||"list_exposed_goods"},"sbxeghhl.html?__rp_name=bestgoods_list"))}),[y,h,o,v]),C=Object(n.useCallback)(((e,t)=>{e.stopPropagation(),Object(d.d)(r()(r()({},t),{},{op:"click"})).finally((()=>{E()}))}),[E]);return n.default.createElement(l.a,{trackingInfo:w},n.default.createElement("div",{className:f.a.wrapper,onClick:E},n.default.createElement("div",{className:f.a.content},n.default.createElement("div",{className:f.a.title},v),n.default.createElement("div",{className:f.a.tip},n.default.createElement("div",{className:f.a.avatar},!!I.length&&I.slice(0,3).map(((e,t)=>n.default.createElement("div",{className:f.a.imgBg,key:t},n.default.createElement(c.a,{processParam:{resizeWidth:54},className:f.a.imgAvatar,src:e,lazy:!1}))))||null),y||"大家都在逛"),n.default.createElement("div",{className:f.a.imgList},b.map(((e,t)=>{const a=r()(r()({},S),{},{idx:t,expose_goods_id:e.goodsId,p_rec:JSON.stringify(e.pRec||e.prec)});return n.default.createElement(l.a,{trackingInfo:a,key:e.goodsId},n.default.createElement("div",{className:f.a.imgWrapper,onClick:e=>C(e,a)},n.default.createElement(c.a,{src:e.whiteThumbUrl||e.hdThumbUrl||"",processParam:{resizeWidth:231},className:f.a.img})))}))))))}))},"0b1t":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));var o=a("eHaf"),r=a("BDyI");function n(e,t){try{const a=localStorage.getItem(e);return t?Object(r.c)(a,{})||{}:a}catch(a){return Object(o.d)({op:"real_error",sub_op:"op_error",params:a,error_message:"getLocalStorage error",page_url:window.location.href}),null}}function s(e,t,a){try{localStorage.setItem(e,a?JSON.stringify(t):t)}catch(r){Object(o.d)({op:"real_error",sub_op:"op_error",params:r,error_message:"setLocalStorage error",page_url:window.location.href})}}},"0yKJ":function(e,t,a){e.exports={address:"_3dnUJxSF",bottomline:"NvihmHhr",addressLine:"_1UK6XxYu",horizontalScan:"_3VDdNcpp"}},"1OsA":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"._3nKDNkf-{background-color:#f4f4f4;margin:0 .08rem}._19f7eycJ{margin-top:-.01rem}._2eZYstku{background-color:#f4f4f4}._27rUiPbJ{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:0 .08rem}.Ke-P_wzG{margin-bottom:.07rem;width:1.76rem;height:2.32rem;background-color:#fff;border-radius:.04rem;overflow:hidden;background-repeat:no-repeat;background-size:100% 100%;background-position:50%}._1m6iqgw1{width:100%;height:100%}",""]),t.locals={recListWrap:"_3nKDNkf-",goodsWrap:"_19f7eycJ",phWrap:"_2eZYstku",phList:"_27rUiPbJ",phGoodsWrap:"Ke-P_wzG",phSmallGoods:"_1m6iqgw1"}},"1R20":function(e,t,a){},"2Pqc":function(e,t,a){e.exports={nameArea:"_207UXmFS",name:"_2FyV2ToV",text:"_25aQu4ow",price:"_18cPPiye",questionIcon:"_nXTc1Jt",questionDialog:"iK0vh05u",question:"_1d2-PSxj",horizontalScan:"_3m4a-hmg"}},3:function(e,t,a){e.exports=a("KXGE")},"3EMY":function(e,t,a){},"3H76":function(e,t,a){"use strict";a.d(t,"l",(function(){return o})),a.d(t,"o",(function(){return r})),a.d(t,"k",(function(){return n})),a.d(t,"j",(function(){return s})),a.d(t,"m",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"d",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"i",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"n",(function(){return g})),a.d(t,"a",(function(){return _}));const o="74842",r="发现好货",n="bestgoods_middle",s=20,i="sbxeghhl.html",l="sbxeghhl.html?_pdd_fs=1&_pdd_nc=ffffff&_pdd_tc=00ffffff&_pdd_sbs=1",c="https://funimg.pddpic.com/2020-10-28/048dc43d-0d1e-4d84-9b01-344f5e781c42.png.slim.png",d="https://funimg.pddpic.com/2020-11-02/e1335a83-6816-420b-8150-80abf429168e.png.slim.png",u="https://funimg.pddpic.com/2020-11-02/6d5c1f3f-5a68-451f-87e1-02b667c57518.png.slim.png",p="https://funimg.pddpic.com/2020-12-24/22f04105-016e-4590-8bd3-12846069e752.png.slim.png";let m,h,f,g,_;!function(e){e.PinDanButton="BestgoodsMiddle.GoToDetail",e.GoodsCardType="BestgoodsIndex.Feeds.GoodsType",e.MiddleHomeIcon="BestgoodsIndex.BackToIndex",e.BannerToComment="BestgoodsMiddle.BannerToComment"}(m||(m={})),function(e){e[e.Ready=0]="Ready",e[e.Loading=1]="Loading",e[e.End=2]="End"}(h||(h={})),function(e){e[e.Banner=0]="Banner",e[e.CommentPopup=1]="CommentPopup"}(f||(f={})),function(e){e[e.ServiceExplain=0]="ServiceExplain",e[e.ProductParameters=1]="ProductParameters"}(g||(g={})),function(e){e.Comment="comment",e.Order="order"}(_||(_={}))},"50WD":function(e,t,a){},"5E9K":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"._1UBkv9hu{position:relative;z-index:0}._1kCCxWJk{display:inline-block;vertical-align:top;position:relative;left:-2px}._1kCCxWJk:last-child{margin-right:-2px}._1kCCxWJk:first-child{left:0;margin-right:0}",""]),t.locals={root:"_1UBkv9hu",avatar:"_1kCCxWJk"}},"5Jhb":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"._3nzkSxnk{position:relative;color:#58595b;margin-top:.02rem;word-break:break-all;overflow:hidden;font-size:.14rem;line-height:.2rem}._2bSsJq5-{display:-webkit-box;-webkit-line-clamp:6;-webkit-box-orient:vertical}._3-7CmHu4{position:absolute;bottom:0;right:0;height:.2rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#fff;color:#151516}._2mEZH2u8{color:#fff;background:#000}._3boFu54u{position:absolute;right:100%;width:.3rem;height:100%;background:-webkit-linear-gradient(right,#fff,#fff .06rem,hsla(0,0%,100%,0));background:linear-gradient(270deg,#fff,#fff .06rem,hsla(0,0%,100%,0))}._2DqFqguM{background:-webkit-linear-gradient(right,#000,#000 .06rem,transparent);background:linear-gradient(270deg,#000,#000 .06rem,transparent)}._2tCSCuDv{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:.14rem;line-height:.14rem;height:.14rem;color:#151516;margin:.07rem 0 .1rem}._1o16lAwj{color:#fff;margin:.12rem 0 0}._1APkLRvl{color:#fff}._1PFxx9f4{width:.2rem;height:.2rem}",""]),t.locals={container:"_3nzkSxnk",expended:"_2bSsJq5-",moreButton:"_3-7CmHu4",whiteStyleMoreButton:"_2mEZH2u8",moreBlank:"_3boFu54u",whiteStyleMoreBlank:"_2DqFqguM",foldedButton:"_2tCSCuDv",whiteStyleFoldedButton:"_1o16lAwj",whiteStyle:"_1APkLRvl",emojiImage:"_1PFxx9f4"}},"5Pt6":function(e,t,a){var o=a("wekK"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"79DA":function(e,t,a){var o=a("7Fyt"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"79ez":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"._2T3MNPwg,._14Av0e22{width:.99rem;height:.4rem;border-radius:.04rem;background-color:#f8f8f8}._14Av0e22{background-color:#fdf3f2}._3I5ESJjt,.mn2qKN_8,.Njggb0W3{height:.18rem;line-height:.12rem;color:#58595b;padding-top:.06rem;font-size:.12rem;text-align:center}.Njggb0W3{color:#e02e24}.mn2qKN_8{color:#9c9c9c}._2fIkar-1,._2imH6L-E,._3JvB3rx_{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.04rem;font-size:.12rem;text-align:center}._2fIkar-1{color:#e02e24}._3JvB3rx_{color:#9c9c9c}.pdd_payment_list_elder_mode ._2T3MNPwg,.pdd_payment_list_elder_mode ._14Av0e22{width:1.54rem;height:.58rem}.pdd_payment_list_elder_mode ._3I5ESJjt,.pdd_payment_list_elder_mode .mn2qKN_8,.pdd_payment_list_elder_mode .Njggb0W3{height:.26rem;padding-top:.1rem;font-size:.16rem;line-height:.16rem}.pdd_payment_list_elder_mode ._2fIkar-1,.pdd_payment_list_elder_mode ._2imH6L-E,.pdd_payment_list_elder_mode ._3JvB3rx_{height:.16rem;margin-top:.06rem;line-height:.16rem;font-size:.16rem}",""]),t.locals={installment:"_2T3MNPwg",selectedInstallment:"_14Av0e22",number:"_3I5ESJjt",selectedNumber:"Njggb0W3",disableNumber:"mn2qKN_8",money:"_2imH6L-E",selectedMoney:"_2fIkar-1",disableMoney:"_3JvB3rx_"}},"7Fyt":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"@-webkit-keyframes db6zC2J4{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes db6zC2J4{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._1gleTZu3,.YzrsYunx,.Z_PzP4Uo{position:absolute;height:.4rem;top:.48rem;left:.44rem;right:0;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.pdd_payment_list_v2_mode ._1gleTZu3,.pdd_payment_list_v2_mode .YzrsYunx,.pdd_payment_list_v2_mode .Z_PzP4Uo{top:.5rem}.Z_PzP4Uo{height:1.38rem}._1gleTZu3,.Z_PzP4Uo{top:.56rem;padding-bottom:.02rem}._1gleTZu3{height:.7rem}.urc_w4Av{margin-right:.1rem}",""]),t.locals={hbInstallmentList:"YzrsYunx",hbInstallmentList4Elder:"Z_PzP4Uo",hbInstallmentList2Elder:"_1gleTZu3",installmentContainer:"urc_w4Av",horizontalScan:"db6zC2J4"}},"7K1G":function(e,t,a){var o=a("Ch6r"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"7MjH":function(e,t,a){e.exports={contact:"h6mab8Em",horizontalScan:"VjEGNA7W"}},"7wT/":function(e,t,a){e.exports={listTitle:"_2YyJcg_B",noBorder:"SJt1nAY0",horizontalScan:"-TZQ4Pyw"}},"8Pq9":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,".wAJ12ZbP{position:relative;width:100%;background-color:#fff}",""]),t.locals={payment:"wAJ12ZbP"}},"9K/W":function(e,t,a){e.exports={bgFill:"aXuJ-1SC",bgFillShow:"_3FlpEG1j",container:"_2u4RC_Sy",visibleContainer:"_1GcQ_LEN"}},"9ZFI":function(e,t,a){},AU1v:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes _18USTZTf{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _18USTZTf{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._2K9nARRy{margin-top:.08rem;padding-left:.12rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;width:.74rem;height:.3rem;color:#a37c4a;font-size:.14rem;font-weight:600;background-color:#fff6ec;line-height:normal;border-radius:1rem 0 0 1rem}._2K9nARRy:active{color:#7d5623;background-color:#fcebd8}._2K9nARRy:active ._24e5lWrE{background:url("https://funimg.pddpic.com/2020-11-29/36f18dca-ea04-45ed-b56b-bf4dad8b010c.png.slim.png?imageView2/2/w/36/q/80") no-repeat;background-size:contain}._24e5lWrE{margin-left:.04rem;height:.12rem;width:.06rem;background:url("https://funimg.pddpic.com/2020-11-29/f9de82cc-ccbd-44b7-8f60-5bfede42987b.png.slim.png?imageView2/2/w/36/q/80") no-repeat;background-size:contain}.zTWuX8qH{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 .12rem;min-width:1.12rem;height:.36rem;border-radius:.2rem;font-size:.14rem;font-weight:700;color:#fff;background:-webkit-linear-gradient(116deg,#af875d,#e5cb85);background:linear-gradient(334deg,#af875d,#e5cb85)}._2G4P19m5{fill:#fff;height:.2rem;width:.14rem;margin-right:.01rem}._2AxqCuKz{font-size:.18rem;margin-right:.04rem;-webkit-transform:translateY(-.01rem);transform:translateY(-.01rem)}',""]),t.locals={pinWrapper:"_2K9nARRy",arrowIcon:"_24e5lWrE",buttonWrapper:"zTWuX8qH",iconRmb:"_2G4P19m5",buttonPrice:"_2AxqCuKz",horizontalScan:"_18USTZTf"}},"Ac+V":function(e,t,a){var o=a("oyVP"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"Ai8/":function(e,t,a){e.exports={receivePromotionItem:"_3vJ9FSjm",buttonWrap:"_2Ku3jCrL",btn:"_3NnDip3N",isTakenOut:"_2av15sjf",hasNum:"_18Jh51Ik",horizontalScan:"_2bRr-jjG"}},BXy8:function(e,t,a){e.exports={"go-top":"_9wRQEN3q","top-button-hide":"_29NPvHYU","top-button-show":"_1mzWEyiw",container:"i3tFT5xs",mainContainer:"_1Pgx6eWp",title:"_1IwZeZUn",catalogTitle:"_ac67ckl",close:"_1G98piv9",highlight:"_3IJSwl5-",shield:"_2sz-EN1t",blockContainer:"_2PtXU0i7",block:"_1d56Yt92",blockMargin:"_2sqDMntk",slot:"PJa-xW5P",slotActive:"_15sflkmk",symptomSlot:"_1bsFLgbX",key:"_3ihTE7be",input:"bH4OaA1G",clearBtn:"_3k50PVrt",temperaturePlaceholder:"_3QGyvOxv",arrow:"adepBZB-",symptomOption:"_2i4pj9-I",selected:"VjZUTqhW",boolSlot:"_3cAT4pab",options:"_21R9m8_k",bottomBtn:"_1tCjXyKe",bottomBtnPadding:"_4Ismrpqv",bottomBtnContainer:"_3TvAbGYu",mask:"_18-xIezQ",selectIcon:"_2uzs2quH",confirm:"_2W0ddzSH",confirmUnselectedBtn:"_3tMYb5DW",confirmSelectedBtn:"_3jdRipwt",occupationTextContainer:"_3567K4BF",occupationText:"xFTeMrwe",catalog:"_1OvPTSAe",catalogText:"_1ZFOi09h",catalogContent:"M0G_eVMZ",catalogPaddingBottom:"_1F89q9Ly",catalogTable:"_12I0IW7C",catalogHeader:"_2_W1hy6Z",catalogRow:"_3UE8EyGQ",catalogItem:"hzB9k6wB",headerItem1:"_28HBqSS7",headerItem2:"wv2CtA2_",headerItem3:"_25GTTWhN",catalogItem1:"_4na2uvH4",catalogItem2:"_2PbDz-Iv",catalogItem3:"_3fYTxS9f",horizontalScan:"_1RZF0lXd"}},Bogp:function(e,t,a){e.exports={promotionInfo:"_3pIv2nch",high:"_2MZwnMp0",titleDisplayName:"_2aH3Qrcl",hasDetail:"_1SiP3oki",detailShown:"_3jGbIh4K",timeDisplayName:"_37wENJkl",detail:"_19-MYscz",ruleDisplayName:"HoXaR_VH",gray:"Ml-9CzBA",horizontalScan:"_3hsZm4B0"}},Ch6r:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'.N1OHE66l{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:.48rem;padding:.15rem 0;border-bottom:1px solid rgba(0,0,0,.05);font-size:.17rem;font-weight:700;line-height:.17rem;color:#151516}._1F3KCdyy{overflow-x:hidden;overflow-y:auto;height:100%}._1lZJTojF{padding:.15rem .12rem .5rem}._1O9REgVr{margin-bottom:.12rem;width:100%}._1O9REgVr ._2Q7DK4cS{font-size:.14rem;color:#9c9c9c;line-height:.22rem;margin-left:.11rem}._1NpSVzOC{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}._1NpSVzOC ._1qiw9zwf{width:.03rem;height:.03rem;background-color:#d8d8d8;border-radius:50%}._1NpSVzOC ._2idj66jV{font-size:.15rem;color:#151516;line-height:.22rem;margin-left:.08rem}._3nJWB7sI{padding-left:.12rem;padding-bottom:.5rem}._3tMjAgpg{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;min-height:.39rem;width:100%;font-size:.15rem;line-height:.21rem}._3tMjAgpg:after{content:"";position:absolute;left:0;bottom:0;width:200%;height:1px;background-color:#f2f2f2;-webkit-transform:scale(.5) translateZ(0);transform:scale(.5) translateZ(0);-webkit-transform-origin:0 0;transform-origin:0 0}._3tMjAgpg ._1Mo4r71s{width:1.17rem;color:#9c9c9c;-webkit-flex-shrink:0;flex-shrink:0}._3tMjAgpg ._3EyYBUKA{margin:0 .2rem;color:#151516}',""]),t.locals={title:"N1OHE66l",scroll:"_1F3KCdyy",serviceContent:"_1lZJTojF",serviceItem:"_1O9REgVr",serviceDesc:"_2Q7DK4cS",serviceTitleLine:"_1NpSVzOC",dot:"_1qiw9zwf",serviceTitle:"_2idj66jV",parameterContent:"_3nJWB7sI",parameterItem:"_3tMjAgpg",parameterTitle:"_1Mo4r71s",parameterValues:"_3EyYBUKA"}},ChCh:function(e,t,a){var o=a("Z69V"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},CzHs:function(e,t,a){e.exports={ocRefresh:"_2Kk6J62f",netIcon:"_3WnRquCq",note:"XwtomzCr",refreshBtn:"_25FLs9De",horizontalScan:"_3iPpdlMl"}},DOSG:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes _3kZhAigz{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _3kZhAigz{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._3s5fmV9c{height:.36rem;line-height:2.72;text-align:center;font-size:0;border-bottom:0;display:block;position:relative;border:none!important}._3s5fmV9c:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid #ededed}._3s5fmV9c span{font-size:.13rem}._3s5fmV9c .HPDn3v3G{padding:0 .03rem}._3s5fmV9c ._1p9-IUem{display:inline-block;height:.14rem;margin:0 .05rem 0 0;width:.14rem;background:url(https://funimg.pddpic.com//order_checkout/pay_icon_v6.png) no-repeat;background-size:1.62rem .14rem;position:relative;top:.02rem;right:-.005rem}._3s5fmV9c ._1p9-IUem._3W830_qi,._3s5fmV9c ._1p9-IUem._34s21a2y{background-position:-.18rem 0}._3s5fmV9c ._3pVk5QL2{display:inline-block;font-size:0}._3s5fmV9c ._143cvGH-{font-size:0}._3s5fmV9c .OQTfixv1{display:inline-block;font-size:.13rem;color:#58595b}._3s5fmV9c ._1iXZpmdh{font-size:0}._3s5fmV9c ._1iXZpmdh:not(:last-of-type):after{content:"\\3001";font-size:.13rem}._3s5fmV9c ._1iXZpmdh span{font-size:.13rem}._3gKyS-Db{display:inline-block;width:.1rem;height:.1rem;margin-right:.06rem;margin-left:.06rem;fill:#666}.pdd_payment_list_elder_mode ._3s5fmV9c{height:.4rem;line-height:.4rem}.pdd_payment_list_elder_mode ._3s5fmV9c .OQTfixv1{font-size:.16rem}.pdd_payment_list_elder_mode ._3s5fmV9c ._3gKyS-Db{width:.1rem;height:.1rem}',""]),t.locals={more:"_3s5fmV9c",space:"HPDn3v3G",moreIcon:"_1p9-IUem",icon1:"_34s21a2y",icon5:"_3W830_qi",payment:"_3pVk5QL2",wrapper:"_143cvGH-",hint:"OQTfixv1",item:"_1iXZpmdh",arrowsDownSvg:"_3gKyS-Db",horizontalScan:"_3kZhAigz"}},DdEg:function(e,t,a){e.exports={payHint:"_1sASCkar",payText:"_3K83fiA_",bottom:"_3cXEe2-_",startHide:"XkonakPy",toHide:"_2dzzl3nE",startDisplay:"_2i6LRdfq",toDisplay:"G9AHJOfM",horizontalScan:"_2qTW5z1Z"}},EUmn:function(e,t,a){e.exports={header:"_1r1kMk4c",countDownHeader:"h1OZfQac",countDown:"LuBgfnUV",closeWrap:"_1b4piM5b",close:"_2D4Linth",retainBar:"_1kB02k7U",retainBarIcon:"_3lZQMLif",retainBarIconBody:"DuhElTN-",retainBarIconBordered:"yc6HJ7to",retainBarLabel:"_2_INH_0a",retainBarText:"_286Id7Bs",horizontalScan:"_3NGriWCy"}},FIFS:function(e,t,a){},G7xb:function(e,t,a){e.exports={skuSelectorCloseBtn:"ca4h-IAJ",skuSelectorBody:"_283aPR7a",safeDistance:"Fd9_BrZ5",skuSelectorContainer:"_3nm09z2v",skuSelectorTitleBar:"PY1t6RpZ",skuSelectorHead:"_3oYb1eF3",skuSelectorHeadRight:"_1KJfUbC-",skuSpecs:"_2VFFf5do",selectorNumber:"_3hptWyO7",sizeDesc:"_3jcgzD1i",skuSizeChartRed:"_3QmlGVyu",skuSpecsKey:"_2XbTuPaT",skuSpecValueList:"FkBrLB0v",hotSale:"_4tBXN2sQ",skuSpecValue:"_3dLL_oHX",hotSaleIcon:"_6XG3isQq",skuSpecValueSelected:"_1MhWfqip",skuSpecValueDisable:"_2BgYfOy2",skuSelectorInput:"_1nDpcwrJ",numberStepper:"_2bZCOrbb",skuSelectorReduce:"xxfw656X",skuSelectorReduceEnable:"_3zDXEDTd",skuSelectorReduceDisable:"_114gds5J",skuSelectorIncrease:"_3t4NDMyO",skuSelectorIncreaseEnable:"NYYDeLbf",skuSelectorIncreaseDisable:"_1BrJIVXX",horizontalScan:"_2BI36FBQ"}},GANf:function(e,t,a){e.exports={agreement:"G2lU7b_3",container:"DKWgbTLF",content:"_3HvOxxHa",agreementCom:"_3CA3ULLU",horizontalScan:"fHPseu6S"}},Gxv9:function(e,t,a){var o=a("1OsA"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},HNyE:function(e,t,a){e.exports={container:"_2Ny6Bvgd",icon:"_2uzDwPP4",title:"caBUfFXg",dot:"_2NOQtQGO",dot1:"R9za4ygw",dot2:"vWabkAUi",dot3:"_2M_gZteX","loading-template-v2-dot1":"_1Vn2jmNY","loading-template-v2-dot3":"_rYxdl4y","loading-template-v2-dot2":"_75vPQyHx"}},HbtU:function(e,t,a){var o=a("neJy"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},HzqW:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"._1TPW6t5o{width:100%;height:.35rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:.13rem;color:#656565}._101-m3yC{margin-left:.04rem;width:.05rem;height:.08rem}@supports not (-webkit-overflow-scrolling:touch){._1TPW6t5o{margin-bottom:.03rem}}",""]),t.locals={noMore:"_1TPW6t5o",arrowIcon:"_101-m3yC"}},IYLM:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes _2Dp0QlCA{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _2Dp0QlCA{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}.WXOJMOwX{margin-top:-.08rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;height:.38rem;font-weight:500;color:#58595b;font-size:.14rem;background-color:#f4f4f4}._4xjs6_X4{position:relative}._4xjs6_X4:before{left:-.25rem}._4xjs6_X4:after,._4xjs6_X4:before{content:"";position:absolute;top:50%;background-color:#9c9c9c;width:.2rem;height:1px}._4xjs6_X4:after{right:-.25rem}',""]),t.locals={titleWrap:"WXOJMOwX",title:"_4xjs6_X4",horizontalScan:"_2Dp0QlCA"}},JWkn:function(e,t,a){e.exports={msCountDown:"_1GcyqSWZ",horizontalScan:"_3S2bxbXL"}},JiL4:function(e,t,a){e.exports={promotionCell:"_ts7NNxg",stripe:"t5y6S3ui",desc:"qSsXm1rW",hasArrow:"_3X6xzQPn",red:"_1S0Qqpcc",displayItem:"tUFs3O2Q",bubble:"g07iV4XU",promotion3:"_37lfnv2E",horizontalScan:"_3nKMTU5w"}},KXGE:function(e,t,a){"use strict";a.r(t);var o=a("v1Eo"),r=a("MVZn"),n=a.n(r),s=a("FdF9"),i=a("kMSe"),l=a("ECpg"),c=a("dDoh"),d=a("1z3X"),u=a("kqQl"),p=a("B5Xf"),m=a("mj+i"),h=a("UpG1"),f=a("mnCI"),g=a("L67k"),_=a("e6sO"),y=a("fMod"),b=a("B+OI"),v=a("1T2z"),k=a("v1gd"),I=a("pVnL"),w=a.n(I);const S=["rmb"],E=S.reduce(((e,t)=>{const a="icon-"+t,o=a.replace(/(-|_|\b)(\w)/g,(function(e,t,a){return a.toUpperCase()}));return n()(n()({},e),{},{[t]:{id:a,comp:o}})}),{}),C=Object(s.memo)((function(){return s.default.createElement("svg",{style:{display:"none"}},s.default.createElement("symbol",{viewBox:"0 0 1024 1024",id:E.rmb.id},s.default.createElement("path",{d:"M867.512 73.486H705.273L512.308 450.814 319.342 73.486H157.104l239.67 431.407H234.536v76.204h205.256l1.229 1.229v105.7H234.536v76.203H441.02v186.82h142.574V764.23h207.714v-76.203H583.595v-105.7l1.23-1.23h206.484v-76.203H627.842z"})))}));function P({color:e="#58595B",width:t="",height:a="",size:o="24px",style:r={},type:n,className:i=""}){return s.default.createElement("svg",{fill:e,width:t||o,height:a||o,style:r,className:i},s.default.createElement("use",{xlinkHref:"#"+n}))}const N=S.reduce(((e,t)=>n()(n()({},e),{},{[E[t].comp]:Object(s.memo)((function(e){return s.default.createElement(P,w()({},e,{type:E[t].id}))}))})),{});var O=a("KoDT"),D=a("h3qu");const x="undefined"!=typeof window,T={SAFARI:"SAFARI",UIWEBVIEW_LIKE_SAFARI:"UIWEBVIEW_LIKE_SAFARI",WKWEBVIEW_LIKE_SAFARI:"WKWEBVIEW_LIKE_SAFARI",UIWEBVIEW:"UIWEBVIEW",WKWEBVIEW:"WKWEBVIEW"};const j={IOS_DEVICE_WEBVIEW_TYPES:T,getIOSDeviceWebviewType:function(){if(!x)return!1;if("iP"===navigator.platform.substr(0,2)){const e=/constructor/i.test(window.HTMLElement),t=window.navigator,a=t.userAgent,o=!!window.indexedDB;if(-1!==a.indexOf("Safari")&&-1!==a.indexOf("Version")&&!t.standalone)return!o&&e||!window.statusbar.visible?T.UIWEBVIEW_LIKE_SAFARI:window.webkit&&window.webkit.messageHandlers||!e||o?T.WKWEBVIEW_LIKE_SAFARI:T.SAFARI;if(!o&&e||!window.statusbar.visible)return T.UIWEBVIEW;if(window.webkit&&window.webkit.messageHandlers||!e||o)return T.WKWEBVIEW}return!1}},A=(()=>{const e=j.getIOSDeviceWebviewType();return e===j.IOS_DEVICE_WEBVIEW_TYPES.WKWEBVIEW||e===j.IOS_DEVICE_WEBVIEW_TYPES.WKWEBVIEW_LIKE_SAFARI})();j.doHackOfIOSWkWebViewPositionFixedFailureByKeyboard=A;const L=x&&(window.__wxjs_is_wkwebview||(()=>{const e=j.getIOSDeviceWebviewType();return e===j.IOS_DEVICE_WEBVIEW_TYPES.WKWEBVIEW||e===j.IOS_DEVICE_WEBVIEW_TYPES.WKWEBVIEW_LIKE_SAFARI})());j.isWKWebView=L;var R=j,M=a("eHaf");function B({backUrl:e=""}){Object(s.useEffect)((()=>{let t=()=>{};if(!e)return t;const{location:o,history:r}=window,s=Object(m.g)(o.href),i=Object(O.a)(),l=!!i.isIOSWeChatPlatform&&Object(D.c)(i.wechatVersion,"6.6.6")<0,c=R.isWKWebView&&l;if(i.isWeChatPlatform&&("refer_share_id"in s||"share_uid"in s)&&!c){const s="push_"+e,i=t=>{var a;1===(null==t||null===(a=t.state)||void 0===a?void 0:a[s])&&o.replace(e)};t=()=>{window.removeEventListener("popstate",i)},a.e(14).then(a.bind(null,"PVRb")).then((()=>{window.wx&&window.wx.ready((()=>{(function(e){try{return sessionStorage.getItem(e)}catch(t){return Object(M.d)({op:"real_error",sub_op:"op_error",params:t,error_message:"getSessionStorage error",page_url:window.location.href}),null}})(s)||(r.replaceState(n()(n()({},r.state),{},{[s]:1}),"","#"),r.pushState(null,"","#pushState"),function(e,t){try{sessionStorage.setItem(e,t)}catch(a){Object(M.d)({op:"real_error",sub_op:"op_error",params:a,error_message:"setSessionStorage error",page_url:window.location.href})}}(s,!0)),window.addEventListener("popstate",i)}))}))}return t}),[e])}function F({backUrl:e=""}){return B({backUrl:e}),null}var z=a("MIjw"),H=a("3OsT"),V=a.n(H);const U=(...e)=>{const t=e.map((e=>e._insertCss()));return()=>t.forEach((e=>e()))};function W(e={}){return s.default.createElement(V.a.Provider,{value:{insertCss:U}},e.children||"")}function G({children:e}){const t=Object(s.useRef)(null),a=Object(s.useContext)(i.a),{$isBackCache:o}=a.store||{},r=Object(s.useRef)(!1),n=o||!window.rawData;return Object(s.useEffect)((()=>{if(r.current||n)return;const o=t.current,l=new IntersectionObserver((([t])=>{if(!t.isIntersecting)return;r.current=!0,l.disconnect();const{store:n}=a;s.hydrate.call(s.default,s.default.createElement(W,null,s.default.createElement(i.b,a,s.default.createElement(u.a,{store:n},s.default.createElement(_.a.Provider,{value:n.$ctx},e)))),o)}));return l.observe(o),()=>{l.disconnect()}}),[o,e,r,a]),n?s.default.createElement("section",null,e):s.default.createElement("section",{ref:t,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0})}var q=a("xxtC"),Q=a("s+hE"),Y=a("+aNZ"),J=a("3H76"),X=[{leoKey:J.h.PinDanButton,formatter:Y.a.ABTest},{leoKey:J.h.GoodsCardType,formatter:Y.a.ABTest},{leoKey:J.h.MiddleHomeIcon,formatter:Y.a.ABTest},{leoKey:J.h.BannerToComment,formatter:Y.a.ABTest}],K=a("yG8O"),$=a.n(K),Z=a("U+yc"),ee=a.n(Z),te=(a("1ABj"),a("2vnA")),ae=a("MpJ2"),oe=a("ii9O"),re=a("LdZ1"),ne=a("0K67");class se extends ne.a{constructor(...e){super(...e),this.queryTopGoods=(e={})=>this.post("/api/lithium/query/middle_page_top_goods",e,{ignoreTransferKeys:["p_rec"],enableAntiContent:!0}),this.queryRecGoods=(e={})=>this.post("/api/lithium/query/middle_page_rec_goods",e,{ignoreTransferKeys:["p_rec"],enableAntiContent:!0}),this.queryCommentsPopupData=(e={})=>this.post("/api/lithium/query/middle_page_goods_comments",e,{ignoreTransferKeys:["p_rec"],enableAntiContent:!0})}}var ie=a("HWRh"),le=a("AnIH"),ce=a("H2i1"),de=a("SM5K"),ue=a("jxKE"),pe=a("0b1t");class me{constructor({restoreCb:e=(()=>{}),triggerCb:t=(()=>{}),initial:a=0}){this.current=0,this.restoreCb=()=>{},this.triggerCb=()=>{},"function"==typeof e&&(this.restoreCb=e),"function"==typeof t&&(this.triggerCb=t),"number"==typeof a&&(this.current=a)}add(){this.current+=1,this.judge("add")}remove(){this.current-=1,this.judge("remove")}judge(e){"add"===e&&1===this.current&&this.triggerCb(),"remove"===e&&0===this.current&&this.restoreCb()}}var he=a("ez7s");const fe=["mp4","m2v","mkv","rmvb","wmv","avi","flv","mov","m4v"];function ge({goods:e,webpEnable:t,preGoodsImage:a="",preImageInsert:o=!1}){const r=Object(ce.c)(e,t),{hdThumbWm:s,imageList:i,imgUrl:l}=r||{},c=i||[l]||[];if(a){const e=c.findIndex((e=>Object(de.c)(e,a))),t=e>=0;t&&c.splice(e,1),(t||o)&&c.unshift(Object(m.c)(a.split("?")[0]))}const d=c.filter((e=>{const t=e.split(".").pop().toLowerCase();return!fe.includes(t)})).map(((e,a)=>0===a&&s?{originUrl:e,url:Object(he.a)(e||"",{webpEnable:t,resizeWidth:1125,quality:80,prefitWidth:!0,plainWatermark:s})}:{originUrl:e,url:Object(he.a)(e,{resizeWidth:1125,quality:80,webpEnable:t})}));let u;return d.length&&(u=Object(he.a)(d[0].originUrl,n()({webpEnable:t},ce.a))),n()(n()({},r),{},{firstScreenImg:u,imageList:d})}var _e,ye,be,ve,ke,Ie,we,Se,Ee,Ce,Pe,Ne,Oe,De,xe,Te,je,Ae,Le,Re,Me,Be,Fe,ze,He,Ve,Ue,We,Ge,qe,Qe,Ye,Je,Xe,Ke,$e,Ze,et,tt,at,ot=a("AaJO");let rt=(_e=te.d.bound,ye=te.d.bound,be=te.d.bound,ve=te.d.bound,ke=te.d.bound,Ie=te.d.bound,we=te.d.bound,Se=Object(h.a)("abChunkStore"),Ee=te.d.bound,Ce=te.d.bound,Pe=Object(h.a)("topGoodsChunkStore"),Ne=te.d.bound,Oe=Object(h.a)("recommendListChunkStore"),De=te.d.bound,xe=Object(h.a)("goodsLikeListChunkStore"),Te=te.d.bound,je=te.d.bound,Ae=te.d.bound,Le=te.d.bound,Re=te.d.bound,Me=te.d.bound,Be=te.d.bound,Fe=te.d.bound,ze=te.d.bound,He=te.d.bound,Ve=te.d.bound,Ue=te.d.bound,We=te.d.bound,Ge=class extends l.b{constructor(...e){var t;super(...e),t=this,$()(this,"pageListData",qe,this),$()(this,"isListHasMoreData",Qe,this),$()(this,"userInfo",Ye,this),$()(this,"showLikeIconTooltips",Je,this),$()(this,"showILikeTooltips",Xe,this),$()(this,"pageTopGoods",Ke,this),$()(this,"showMiddleHomeIcon",$e,this),$()(this,"showBannerTail",Ze,this),$()(this,"recommendPopupId",et,this),$()(this,"recommendGoodsDetailsMap",tt,this),$()(this,"showBigImg",at,this),this.commentsTotalPicNum=0,this.bestgoodsMiddleService=new se(this),this.commonService=new ie.a(this),this.isFetchList=!1,this.uniGoodsIdsArr=[],this.offset=0,this.serverTabId=void 0,this.preGoodsImage="",this.preImageInsert=!1,this.stateManager=null,this.dataPromise=null,this.dataABPromise=null,this.init=async function(){t.showMiddleHomeIcon="A"===Object(c.a)(J.h.MiddleHomeIcon,t.$ctx.requestContext),t.showBannerTail="A"===Object(c.a)(J.h.BannerToComment,t.$ctx.requestContext),t.updateShareInfo(n()(n()({},t.$shareInfo),{},{title:"我在【发现好货】看到一个好东西",message:"发现颜值高、价格香、质量可的好货",thumbnailURL:ot.a.shareIcon,shareURL:Object(m.a)(t.queries,J.m)})),t.updateShareConfig({setNativeShareButton:!1});const e=t.queries.pre_goods_image||"",a=1==+t.queries.pre_image_insert;t.preGoodsImage=Object(de.a)(e)?e:"",t.preImageInsert=a,await t.initData()},this.hasLikeTipShow=!1,this.likeTipStorage=null}get queries(){return this.$ctx.requestContext.query}get webpEnable(){return this.$ctx.webpEnable}get tabId(){return this.serverTabId||this.queries.tab_id||""}async loadMoreListData(){await this.loadData()}getStorageIsShowTip(){return Object(pe.a)(ue.d,!0)}setLikeTooltips(e){this.showLikeIconTooltips=e}setILikeTooltips(e){this.showILikeTooltips=e,e&&Object(pe.b)(ue.d,n()(n()({},this.getStorageIsShowTip()),{},{myLikeGuideShow:!0}),!0)}updateLargeGoods(e,t){e===+this.queries.goods_id?Object.assign(this.pageTopGoods,t):Object.assign(this.recommendGoodsDetailsMap[e].goodsDetails,t)}async setLikeQuery(e,t,a){try{return await this.commonService.queryGoodsLike({goods_id:e,like:t,source:a})}catch(o){return{}}}async getABResult(e){}initRecommendGoodsDetailsMap(e,t){Object(te.p)(this.recommendGoodsDetailsMap,e,{showBannerTail:this.showBannerTail,goodsDetails:{},commentsPopupStatus:J.i.Ready,commentsPopupLabels:[],commentsPopupList:[],commentsPics:[],commentsPopupListOffset:0,commentsPopupVisible:!1,servicePopupVisible:!1,picCommentKey:0,popupHeight:t||this.$ctx.platform.system!==D.b.IOS?"6.06rem":"6.39rem"})}async getTopGoods(e){try{this.initRecommendGoodsDetailsMap(+this.queries.goods_id,!0);const[e]=await Promise.all([this.bestgoodsMiddleService.queryTopGoods({listId:this.$listId+"_topgoods",goods_id:+this.queries.goods_id}),this.dataABPromise]),{topGoods:t}=(null==e?void 0:e.result)||{};Object(te.o)((()=>{var e;t&&(this.pageTopGoods=ge({goods:t||{},webpEnable:this.$ctx.webpEnable,preGoodsImage:this.preGoodsImage,preImageInsert:this.preImageInsert}),(null==t||null===(e=t.data)||void 0===e?void 0:e.picNum)||(this.recommendGoodsDetailsMap[+this.queries.goods_id].showBannerTail=!1))}))}catch(t){return{}}}async getRecommendList(e){await Promise.all([this.dataPromise,this.dataABPromise])}async getGoodsLikeList(e){await Promise.all([this.dataPromise,this.dataABPromise])}async loadData(e=J.j){if(!this.isFetchList&&this.isListHasMoreData){this.isFetchList=!0;try{const t=await this.bestgoodsMiddleService.queryRecGoods({offset:this.offset,listId:this.$listId,count:e,goods_id:+this.queries.goods_id,goods_price:this.queries.goods_price});return this.isFetchList=!1,this.offset+=e,Object(te.o)((()=>{const{recList:e,hasMore:a,serverTabId:o}=(null==t?void 0:t.result)||{},r=this.formatRecListData((e||[]).filter(((e={})=>{var t,a;return e.type===le.c.RecommendGoods||e.type===le.c.InventoryCard&&!!(null===(t=e.data)||void 0===t||null===(a=t.goodsList)||void 0===a?void 0:a.length)})).map((e=>Object(ce.c)(e,this.webpEnable))),this.pageListData.length),n=this.pageListData;this.pageListData=n.concat(r),this.isListHasMoreData=a&&r.length>0,this.serverTabId=o})),t}catch(t){return{}}}}formatRecListData(e=[],t=0){return e.map(((e={},a)=>n()(n()({},e),{},{idx:a+t})))}updateRecommendGoods(e){this.pageListData.filter(((t={})=>t.goodsId&&t.goodsId===(null==e?void 0:e.goodsId))).forEach(((t={})=>{Object.assign(t,e)}))}gotoIndex(){Object(M.d)({page_el_sn:3850899,op:"click"}).finally((()=>{Object(re.b)(J.b)}))}gotoDetailPage(e){var t;Object(re.b)(e||(null===(t=this.pageTopGoods)||void 0===t?void 0:t.linkUrl)||"")}async initData(){this.dataPromise=this.loadData(10),this.dataABPromise=this.commonService.queryUserAbTest(),await Promise.all([this.getABResult(this.$ctx.requestContext),this.getTopGoods(this.$ctx.requestContext),this.getRecommendList(this.$ctx.requestContext),this.getGoodsLikeList(this.$ctx.requestContext)])}getDatasource(){return this.init}prepareClientData(){this.showLikeTips(),this.dealPopups()}showLikeTips(){var e;const t=+new Date;this.likeTipStorage||(this.likeTipStorage=this.getStorageIsShowTip());const{comeTime:a=0}=this.likeTipStorage||{};!(null===(e=this.pageTopGoods)||void 0===e?void 0:e.alreadyLike)&&t-a>864e5&&!this.hasLikeTipShow&&(this.hasLikeTipShow=!0,this.setLikeTooltips(!0),setTimeout((()=>{Object(te.o)((()=>{this.setLikeTooltips(!1)}))}),3e3),Object(pe.b)(ue.d,n()(n()({},this.getStorageIsShowTip()),{},{comeTime:t}),!0))}async getCommentsPopupData(e){const{commentsPopupStatus:t,commentsPopupList:a,commentsPopupListOffset:o}=this.recommendGoodsDetailsMap[e];if(t!==J.i.Loading){Object(te.o)((()=>{this.recommendGoodsDetailsMap[e].commentsPopupStatus=J.i.Loading}));try{const t=await this.bestgoodsMiddleService.queryCommentsPopupData({offset:o,count:10,goods_id:e});this.recommendGoodsDetailsMap[e].commentsPopupListOffset+=10,Object(te.o)((()=>{const{commentDtos:o=[],commentLabels:r=[],hasMore:s,picNum:i}=(null==t?void 0:t.result)||{};0===a.length&&(this.recommendGoodsDetailsMap[e].commentsPopupLabels=r,this.recommendGoodsDetailsMap[e].commentsTotalPicNum=i),o.forEach(((t,a)=>{var o,r;t.video&&this.recommendGoodsDetailsMap[e].commentsPics.push(n()(n()({},t.video),{},{src:t.video.url,url:t.video.coverImageUrl,key:this.recommendGoodsDetailsMap[e].picCommentKey})),(null===(o=t.pictures)||void 0===o?void 0:o.length)&&(t.pictures.forEach((t=>{t.key=this.recommendGoodsDetailsMap[e].picCommentKey})),this.recommendGoodsDetailsMap[e].commentsPics.push(...t.pictures)),(t.video||(null===(r=t.pictures)||void 0===r?void 0:r.length))&&(this.recommendGoodsDetailsMap[e].picCommentKey+=1)})),this.recommendGoodsDetailsMap[e].commentsPopupList.push(...o),s&&0!==o.length?this.recommendGoodsDetailsMap[e].commentsPopupStatus=J.i.Ready:this.recommendGoodsDetailsMap[e].commentsPopupStatus=J.i.End}))}catch(r){this.recommendGoodsDetailsMap[e].commentsPopupStatus=J.i.End}}}dealPopups(){Object(O.a)().isNativePlatform&&(this.stateManager=new me({restoreCb:()=>{Object(ae.p)({enable:!0}),Object(ae.b)(),Object(ae.k)({callback(){oe.a.back()}})},triggerCb:()=>{Object(ae.p)({enable:!1}),Object(ae.a)()}}))}setPopupStates(e){this.stateManager&&(e?this.stateManager.add():this.stateManager.remove())}setCommentsPopupVisible(e,t){this.recommendGoodsDetailsMap[e].commentsPopupVisible=t,this.setPopupStates(t)}setRecommendPopupId(e){this.recommendPopupId=e,this.setPopupStates(!!e)}setServicePopupVisible(e,t){this.recommendGoodsDetailsMap[e].servicePopupVisible=t,this.setPopupStates(t)}async getRecommendGoodsDetails(e){try{if(this.recommendGoodsDetailsMap[e])return;this.initRecommendGoodsDetailsMap(e,!1);const[t]=await Promise.all([this.bestgoodsMiddleService.queryTopGoods({listId:""+this.$listId,goods_id:e}),this.dataABPromise]),{topGoods:a}=(null==t?void 0:t.result)||{};Object(te.o)((()=>{var t;a&&(this.recommendGoodsDetailsMap[e].goodsDetails=ge({goods:a||{},webpEnable:this.$ctx.webpEnable}),(null==a||null===(t=a.data)||void 0===t?void 0:t.picNum)||(this.recommendGoodsDetailsMap[e].showBannerTail=!1))}))}catch(t){return{}}}},qe=ee()(Ge.prototype,"pageListData",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qe=ee()(Ge.prototype,"isListHasMoreData",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ye=ee()(Ge.prototype,"userInfo",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Je=ee()(Ge.prototype,"showLikeIconTooltips",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xe=ee()(Ge.prototype,"showILikeTooltips",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ke=ee()(Ge.prototype,"pageTopGoods",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=ee()(Ge.prototype,"showMiddleHomeIcon",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ze=ee()(Ge.prototype,"showBannerTail",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),et=ee()(Ge.prototype,"recommendPopupId",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tt=ee()(Ge.prototype,"recommendGoodsDetailsMap",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),at=ee()(Ge.prototype,"showBigImg",[te.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ee()(Ge.prototype,"queries",[te.e],Object.getOwnPropertyDescriptor(Ge.prototype,"queries"),Ge.prototype),ee()(Ge.prototype,"webpEnable",[te.e],Object.getOwnPropertyDescriptor(Ge.prototype,"webpEnable"),Ge.prototype),ee()(Ge.prototype,"tabId",[te.e],Object.getOwnPropertyDescriptor(Ge.prototype,"tabId"),Ge.prototype),ee()(Ge.prototype,"loadMoreListData",[_e],Object.getOwnPropertyDescriptor(Ge.prototype,"loadMoreListData"),Ge.prototype),ee()(Ge.prototype,"getStorageIsShowTip",[ye],Object.getOwnPropertyDescriptor(Ge.prototype,"getStorageIsShowTip"),Ge.prototype),ee()(Ge.prototype,"setLikeTooltips",[be],Object.getOwnPropertyDescriptor(Ge.prototype,"setLikeTooltips"),Ge.prototype),ee()(Ge.prototype,"setILikeTooltips",[ve],Object.getOwnPropertyDescriptor(Ge.prototype,"setILikeTooltips"),Ge.prototype),ee()(Ge.prototype,"updateLargeGoods",[ke],Object.getOwnPropertyDescriptor(Ge.prototype,"updateLargeGoods"),Ge.prototype),ee()(Ge.prototype,"setLikeQuery",[Ie],Object.getOwnPropertyDescriptor(Ge.prototype,"setLikeQuery"),Ge.prototype),ee()(Ge.prototype,"getABResult",[we,Se],Object.getOwnPropertyDescriptor(Ge.prototype,"getABResult"),Ge.prototype),ee()(Ge.prototype,"initRecommendGoodsDetailsMap",[Ee],Object.getOwnPropertyDescriptor(Ge.prototype,"initRecommendGoodsDetailsMap"),Ge.prototype),ee()(Ge.prototype,"getTopGoods",[Ce,Pe],Object.getOwnPropertyDescriptor(Ge.prototype,"getTopGoods"),Ge.prototype),ee()(Ge.prototype,"getRecommendList",[Ne,Oe],Object.getOwnPropertyDescriptor(Ge.prototype,"getRecommendList"),Ge.prototype),ee()(Ge.prototype,"getGoodsLikeList",[De,xe],Object.getOwnPropertyDescriptor(Ge.prototype,"getGoodsLikeList"),Ge.prototype),ee()(Ge.prototype,"loadData",[Te],Object.getOwnPropertyDescriptor(Ge.prototype,"loadData"),Ge.prototype),ee()(Ge.prototype,"formatRecListData",[je],Object.getOwnPropertyDescriptor(Ge.prototype,"formatRecListData"),Ge.prototype),ee()(Ge.prototype,"updateRecommendGoods",[Ae],Object.getOwnPropertyDescriptor(Ge.prototype,"updateRecommendGoods"),Ge.prototype),ee()(Ge.prototype,"gotoIndex",[Le],Object.getOwnPropertyDescriptor(Ge.prototype,"gotoIndex"),Ge.prototype),ee()(Ge.prototype,"gotoDetailPage",[Re],Object.getOwnPropertyDescriptor(Ge.prototype,"gotoDetailPage"),Ge.prototype),ee()(Ge.prototype,"showLikeTips",[Me],Object.getOwnPropertyDescriptor(Ge.prototype,"showLikeTips"),Ge.prototype),ee()(Ge.prototype,"getCommentsPopupData",[Be],Object.getOwnPropertyDescriptor(Ge.prototype,"getCommentsPopupData"),Ge.prototype),ee()(Ge.prototype,"dealPopups",[Fe],Object.getOwnPropertyDescriptor(Ge.prototype,"dealPopups"),Ge.prototype),ee()(Ge.prototype,"setPopupStates",[ze],Object.getOwnPropertyDescriptor(Ge.prototype,"setPopupStates"),Ge.prototype),ee()(Ge.prototype,"setCommentsPopupVisible",[He],Object.getOwnPropertyDescriptor(Ge.prototype,"setCommentsPopupVisible"),Ge.prototype),ee()(Ge.prototype,"setRecommendPopupId",[Ve],Object.getOwnPropertyDescriptor(Ge.prototype,"setRecommendPopupId"),Ge.prototype),ee()(Ge.prototype,"setServicePopupVisible",[Ue],Object.getOwnPropertyDescriptor(Ge.prototype,"setServicePopupVisible"),Ge.prototype),ee()(Ge.prototype,"getRecommendGoodsDetails",[We],Object.getOwnPropertyDescriptor(Ge.prototype,"getRecommendGoodsDetails"),Ge.prototype),Ge);var nt=a("Vkgz"),st=a("fG2L"),it=a("+57a"),lt=a("bdZy"),ct=a("TSYQ"),dt=a.n(ct),ut=a("/Cc8"),pt=a("S8c2"),mt=a("Ip76"),ht=a("K7Sh"),ft=a("gi5g"),gt=a("XcyU"),_t=a("QYOo"),yt=a.n(_t);mt.a.use(ht.a);const bt=Object(i.d)((function({store:e,imageList:t,commentsPics:a,btnClickHandler:o,setCurrentIndex:r,showBannerTail:n,setFirstImg:i,currentIdx:l,setFakeClickItemStyle:c,setCommentImgShow:d,goodsId:u}){const p=Object(s.useRef)(),m=Object(s.useRef)(null);return Object(s.useEffect)((()=>{if(!p)return;const o=!n&&t.length>1,s=new mt.a(p.current,{scrollX:!0,scrollY:!1,slide:{threshold:15,speed:600,loop:o,autoplay:!1},momentum:!1,bounce:!0,eventPassthrough:"vertical",bindToWrapper:!0,probeType:3});let h=0;return s.scroller.actionsHandler.hooks.on("start",(e=>{if(i(""),null!==m.current){const{pageX:e,pageY:t}=m.current;s.stop(),s.goToPage(e,t,0)}l.current===t.length-1&&(h=e.targetTouches[0].pageX)})),s.on("slideWillChange",(e=>{m.current=e,r(e.pageX)})),n&&s.scroller.actions.hooks.on("beforeEnd",(o=>{if(l.current===t.length-1){if(h-o.changedTouches[0].pageX>75){var r,n;e.popupOverflowVisible=!0;const t=null===(r=a[0])||void 0===r?void 0:r.width,o=null===(n=a[0])||void 0===n?void 0:n.height,{offsetWidth:s,offsetHeight:i}=document.documentElement;c({top:.5*i-s*(o/t)*.5,height:o/t*3.75+"rem"}),d(!0),setTimeout((()=>{e.setCommentsPopupVisible(u,!0)}),1e3)}}})),()=>{s.destroy()}}),[t]),s.default.createElement("div",{id:"banner",className:yt.a.bannerDiv,ref:p,onClick:o},s.default.createElement("ul",{className:yt.a.bannerContent},t.map((({url:e=""},a)=>s.default.createElement("li",{className:yt.a.bannerItem},s.default.createElement("img",{src:e,alt:""}),t.length===a+1&&n&&s.default.createElement("div",{className:yt.a.seeMore},s.default.createElement("img",{className:yt.a.icon,src:"https://funimg.pddpic.com/mobile-subjects/2021-01-07/ab4535b8-d1d8-4a47-a3fb-f61b31a2e1a1.png.slim.png"}),s.default.createElement("span",{className:yt.a.text},"滑动查看带图评论")))))))}));var vt=Object(i.d)((function({goods:e,goToDetail:t}){Object(l.d)(yt.a);const a=Object(s.useContext)(y.a),o=Object(ut.a)(),{imageList:r=[],firstScreenImg:n,goodsId:i,goodsName:c}=e||{},{commentsPics:d,showBannerTail:u}=Object(te.h)(o.recommendGoodsDetailsMap,i),[p,m]=Object(s.useState)(0),[h,f]=Object(s.useState)(n),[g,_]=Object(s.useState)(!1),[b,v]=Object(s.useState)(!1),[k,I]=Object(s.useState)({}),w=Object(s.useRef)(0);w.current=p,Object(s.useEffect)((()=>{var e;const t=new Image;let a;return t.src=null===(e=r[0])||void 0===e?void 0:e.url,t.onload=()=>{_(!0),a=setTimeout((()=>{f("")}),200)},()=>{clearTimeout(a),a=null}}),[r]);const S=Object(s.useCallback)((()=>r.length<1?null:s.default.createElement("div",{className:yt.a.bannerIndex},p+1,"/",r.length)),[p,r.length]),E=Object(s.useCallback)((()=>{Object(M.d)({page_el_sn:3851108,op:"click"}).finally((()=>{t()}))}),[t]);return s.default.createElement(s.default.Fragment,null,s.default.createElement(st.a,{trackingInfo:{page_el_sn:3851108},inlineLogger:!0},s.default.createElement("div",{className:yt.a.bannerContainer},s.default.createElement(bt,{store:o,imageList:r,commentsPics:d,showBannerTail:u,btnClickHandler:E,currentIdx:w,setCurrentIndex:m,setFirstImg:f,setFakeClickItemStyle:I,setCommentImgShow:v,goodsId:i}),(null==h?void 0:h.length)>0&&s.default.createElement("img",{src:h,className:dt()(yt.a.img,g?yt.a.hideImg:""),alt:""}),s.default.createElement("div",{className:yt.a.goodsName},s.default.createElement("div",{className:yt.a.name},c)),S(),s.default.createElement("div",{className:yt.a.fakeClickItem,style:k,id:"fakeClickItem-"+i}))),b&&s.default.createElement(gt.b,{commentIndex:0,clickIndex:0,currentImg:d[0],appBarCtx:a,clickItemRef:{current:document.getElementById("fakeClickItem-"+i)},listRef:{},onClose:()=>{const e=document.getElementById("commentList"),t=document.getElementById("orderList");Object(ft.a)([e,t]),v(!1)},source:J.c.Banner,goodsId:i}))})),kt=a("b6XL"),It=a("Qhqg"),wt=a.n(It),St=Object(i.d)((function({goods:e,noShowTooltips:t,renderPinButton:a}){Object(l.d)(wt.a);const o=Object(s.useRef)(),r=Object(ut.a)(),{showLikeIconTooltips:n,setLikeTooltips:i,setILikeTooltips:c,getStorageIsShowTip:d,setLikeQuery:u,updateRecommendGoods:p,updateLargeGoods:m}=r,{likeCount:h=0,alreadyLike:f=!1,goodsId:g}=e||{},[_,y]=Object(s.useState)(h),[b,v]=Object(s.useState)(f?"已喜欢":"喜欢"),[k,I]=Object(s.useState)(!1),[w,S]=Object(s.useState)(!1),E=Object(s.useMemo)((()=>nt.a.sales(_)),[_]),C=Object(s.useCallback)((e=>{const{result:t}=e||{};!f&&t?y(_+1):(v("喜欢"),y(_-1))}),[_,f]),P=Object(s.useCallback)((e=>{const{result:t}=e||{};!f&&t?(I(!0),setTimeout((()=>{S(!0),v("已喜欢")}),200),setTimeout((()=>{I(!1),m(g,{alreadyLike:!f,likeCount:h+1}),p({alreadyLike:!f,goodsId:g,likeCount:h+1})}),1e3)):(S(!1),m(g,{alreadyLike:!f,likeCount:h-1}),p({alreadyLike:!f,goodsId:g,likeCount:h-1}))}),[f,g,h,m,p]),N=Object(s.useCallback)((e=>{const{result:t}=e||{};t?(C(e),P(e)):Object(kt.a)("操作失败，请稍后再试")}),[C,P]),O=Object(s.useCallback)((()=>{o&&o.current&&(o.current.style.pointerEvents="none",setTimeout((()=>{o.current.style.pointerEvents="auto"}),1200))}),[]),D=Object(s.useCallback)((async()=>{await Object(lt.a)({page_el_sn:4149252}),f||(i(!1),d().myLikeGuideShow||c(!0)),O(),u(g,!f,le.b.MiddleTopGoods).then((e=>{N(e)}))}),[f,O,u,g,i,d,c,N]);return s.default.createElement("div",{className:wt.a.likeWrap},s.default.createElement(st.a,{trackingInfo:{page_el_sn:4149252}},s.default.createElement("div",{onClick:D,ref:o},s.default.createElement("div",{className:dt()(wt.a.likeRightWrap,{[wt.a.likedRightWrap]:f||w})},s.default.createElement("div",{className:dt()(wt.a.circleImg,{[wt.a.circleAnimeImg]:k})}),s.default.createElement("div",{className:dt()(wt.a.likeIcon,wt.a.likeImg,{[wt.a.animeLikeImg]:k},{[wt.a.normalLikeImg]:!k},{[wt.a.activeLikedImg]:!k&&f})}),s.default.createElement("span",{className:dt()(wt.a.likeBtnTips,{[wt.a.likedBtnTips]:f&&!k},{[wt.a.likeBtnTipsAnime]:k})},s.default.createElement("span",null,b),s.default.createElement("span",{style:{marginLeft:".04rem"}},E))),!t&&n&&s.default.createElement(st.a,{trackingInfo:{page_el_sn:4149276}},s.default.createElement("div",{className:wt.a.tooltipWrap},s.default.createElement("div",{className:dt()(wt.a.tooltip)},"喜欢就点一下, 让它被更多人看到！"))))),a())}));let Et=null,Ct=0;class Pt{static getInstance(){return Et||(Et=new Pt),Et}enableScroll(){document.body.style.overflow="",document.body.style.position=null,document.body.style.top=null,window.scrollTo(0,Ct),Object(ft.b)()}disableScroll(e){(()=>{const e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Ct=e,document.body.style.top=-1*e+"px",document.body.style.position="fixed"})(),Object(ft.a)(e)}}var Nt=a("mElW"),Ot=a("BkRI"),Dt=a.n(Ot),xt=a("mwIZ"),Tt=a.n(xt),jt=a("usyV"),At=a("qnV/"),Lt=(a("17x9"),a("QILm")),Rt=a.n(Lt),Mt=a("VERM"),Bt=a.n(Mt),Ft=a("+vUh"),zt=a.n(Ft);const Ht=()=>s.default.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5430",width:"200",height:"200"},s.default.createElement("path",{d:"M292.7001 1023.997654c-14.55529 0-29.11058-5.555875-40.222331-16.666452-22.222327-22.222327-22.222327-58.241099 0-80.444661l414.646321-414.64632-415.145962-415.128369c-22.222327-22.203561-22.222327-58.222333 0-80.444661s58.222333-22.222327 80.44466 0l428.554188 428.535422c36.944165 36.981696 36.944165 97.111113 0.037532 134.074043L332.92243 1007.331202c-11.11175 11.11175-25.66704 16.666452-40.22233 16.666452z","p-id":"5431"})),Vt=()=>s.default.createElement("svg",{width:"10",height:"16",viewBox:"0 0 10 16",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M8.265 15.5a.833.833 0 0 0 .59-1.423L2.78 8.004l6.081-6.081A.833.833 0 1 0 7.684.744L1.406 7.022a1.391 1.391 0 0 0 0 1.964l6.27 6.27a.83.83 0 0 0 .59.244z",fill:"#000",fillRule:"nonzero",stroke:"#000",strokeWidth:".5",opacity:".15"})),Ut=()=>s.default.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4346",width:"200",height:"200"},s.default.createElement("path",{d:"M349.184 279.04v-46.592H230.912c-28.16 0-54.784 12.8-72.704 34.816L67.072 393.216c-13.312 16.384-20.48 36.864-20.48 58.368v269.824c0 42.496 28.672 78.848 68.096 89.6l12.8-45.056c-19.968-5.632-33.792-24.064-33.792-45.056V451.584c0-10.752 3.584-20.992 10.24-29.184l92.672-127.488c7.68-9.216 20.992-15.872 34.816-15.872h117.76z","p-id":"4347"}),s.default.createElement("path",{d:"M93.184 512h186.368c51.2 0 93.184-41.472 93.184-93.184V186.368c0-25.6 20.992-46.592 46.592-46.592h465.408c25.6 0 46.592 20.992 46.592 46.592v535.04c0 20.48-13.312 38.4-32.256 44.544l14.336 44.544c37.376-11.776 65.024-47.104 65.024-88.576V186.368c0-51.2-41.472-93.184-93.184-93.184H418.816c-51.2 0-93.184 41.472-93.184 93.184v232.96c0 25.6-20.992 46.592-46.592 46.592H93.184v46.08zM442.368 768h139.776v46.592H442.368zM279.04 884.224c38.4 0 69.632-31.232 69.632-69.632s-31.232-69.632-69.632-69.632-69.632 31.232-69.632 69.632 31.232 69.632 69.632 69.632z m0 46.592c-64.512 0-116.224-52.224-116.224-116.224 0-64.512 52.224-116.224 116.224-116.224s116.224 52.224 116.224 116.224c0.512 64-51.712 116.224-116.224 116.224z","p-id":"4348"}),s.default.createElement("path",{d:"M744.96 884.224c38.4 0 69.632-31.232 69.632-69.632s-31.232-69.632-69.632-69.632-69.632 31.232-69.632 69.632c-0.512 38.4 30.72 69.632 69.632 69.632z m0 46.592c-64.512 0-116.224-52.224-116.224-116.224 0-64.512 52.224-116.224 116.224-116.224s116.224 52.224 116.224 116.224-52.224 116.224-116.224 116.224z","p-id":"4349"})),Wt=({className:e,onClick:t})=>s.default.createElement("div",{className:dt()(zt.a.icon,e),onClick:t},s.default.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5299",width:"200",height:"200"},s.default.createElement("path",{d:"M624.10827 511.996481l375.931278-373.359185c31.939451-31.720125 31.939451-83.127957 0-114.848082-31.940624-31.720125-83.705006-31.720125-115.64563 0l-372.396264 369.828863L139.600218 23.789214c-31.939451-31.720125-83.705006-31.720125-115.644457 0s-31.939451 83.127957 0 114.848082l375.931277 373.359185L23.955761 885.355667c-31.939451 31.720125-31.939451 83.127957 0 114.848082 15.969725 15.859476 36.895977 23.790387 57.822229 23.790387s41.852503-7.929738 57.822228-23.790387l372.397436-369.828863 372.397436 369.828863c15.969725 15.859476 36.895977 23.790387 57.822229 23.790387s41.852503-7.929738 57.822229-23.790387c31.939451-31.720125 31.939451-83.127957 0-114.848082L624.10827 511.996481z","p-id":"5300"}))),Gt=({className:e,onClick:t})=>s.default.createElement("div",{className:dt()(zt.a.icon,zt.a.back,e),onClick:t},s.default.createElement(Vt,null)),qt=()=>s.default.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},s.default.createElement("path",{d:"M512 950c241.9 0 438-196.1 438-438S753.9 74 512 74 74 270.1 74 512s196.1 438 438 438zm0 73C229.8 1023 1 794.2 1 512S229.8 1 512 1s511 228.8 511 511-228.8 511-511 511zm-54.8-277.9c0 30.2 24.5 54.8 54.8 54.8 30.2 0 54.8-24.5 54.8-54.8 0-30.2-24.5-54.8-54.8-54.8-30.2.1-54.8 24.6-54.8 54.8z"}),s.default.createElement("path",{d:"M512.2 634.9c-14.6 0-26.4-12.6-26.4-28.1v-47.5c0-46 32.9-81.1 62-112.1 21.3-22.7 43.4-46.3 43.4-65 0-46.8-35.5-84.9-79.1-84.9-44.3 0-79.1 36.5-79.1 83.1 0 15.5-11.8 28.1-26.4 28.1-14.6 0-26.4-12.6-26.4-28.1 0-76.8 59.1-139.2 131.8-139.2s131.8 63.4 131.8 141.2c0 42.1-30 73.9-58.8 104.8-23 24.4-46.6 49.6-46.6 72.3V607c.2 15.3-11.6 27.9-26.2 27.9z"}),s.default.createElement("path",{d:"M512.2 642.9c-19 0-34.4-16.2-34.4-36.1v-47.5c0-49.2 34-85.5 64.1-117.5l.1-.1c19.3-20.6 41.2-43.9 41.2-59.5 0-42.4-31.9-76.9-71.1-76.9-39.9 0-71.1 33-71.1 75.1 0 19.9-15.4 36.1-34.4 36.1s-34.4-16.2-34.4-36.1c0-81.2 62.7-147.2 139.8-147.2 77.1 0 139.8 66.9 139.8 149.2 0 45-30.6 77.8-60.3 109.6l-.8.8c-21.8 23.2-44.3 47.2-44.3 66.7V607c.1 9.7-3.6 19.2-10.3 25.9-6.4 6.4-14.9 10-23.9 10zm-.1-353.7c48 0 87.1 41.7 87.1 92.9 0 21.9-23.2 46.6-45.6 70.4-28.1 30-59.8 63.8-59.8 106.7v47.5c0 11.1 8.3 20.1 18.4 20.1 4.6 0 9.1-1.9 12.4-5.3 3.7-3.8 5.8-9.1 5.7-14.5v-47.6c0-25.9 24.7-52.2 48.6-77.6l.7-.8c27.5-29.5 56-60 56-98.7 0-73.4-55.5-133.2-123.8-133.2-68.2 0-123.8 58.9-123.8 131.2 0 11.1 8.3 20.1 18.4 20.1 10.1 0 18.4-9 18.4-20.1.2-51.1 38.5-91.1 87.3-91.1z"})),Qt={enter:"translateX(0)",exit:"translateX(-100%)",exitToInit:"translateX(100%)"},Yt={enter:"translateY(0)",exit:"translateY(100%)",exitToInit:"translateY(100%)"};var Jt=s.default.forwardRef((({modalStyle:e,modalClassName:t,renderTitle:a,renderBack:o,renderContent:r,onClose:i,onBack:l,direction:c="x",afterShow:d,initShow:u,onClick:p},m)=>{const h=Object(s.useRef)(),[f,g]=Object(s.useState)(u),_="x"===c?Qt:Yt;Object(s.useEffect)((()=>{d&&d(f)}),[f]);const y=()=>{h.current.classList.add(Bt.a.noShow)},b=()=>{h.current.classList.remove(Bt.a.noShow)},v=e=>{const t=h.current.style;t.transform&&(t.transform=e),t.webkitTransform&&(t.webkitTransform=e)};Object(s.useImperativeHandle)(m,(()=>({show(){y(),v(_.enter),g(!1),setTimeout((()=>{b(),g(!0)}),0)},enter(){b(),g(!1),setTimeout((()=>{g(!0),v(_.enter)}),16)},enterFromRight(){y(),v(_.exitToInit),g(!1),setTimeout((()=>{b(),setTimeout((()=>{g(!0),v(_.enter)}),16)}),0)},exit(){v(_.exit),g(!1)},exitToRight(){v(_.exitToInit),g(!1)},hide(){y(),g(!1)},isShow:()=>f})));const k=s.default.createElement(Gt,{onClick:l}),I=u?_.enter:_.exitToInit,w={transform:I,WebkitTransform:I};return s.default.createElement("div",{ref:h,onTransitionEnd:()=>{f||y()},style:n()(n()({},w),e),className:dt()(Bt.a.modal,t,{}),onClick:e=>{e.stopPropagation(),p&&p()}},a&&s.default.createElement("div",{className:Bt.a.title},!!l&&(o?o(k):k),a(),s.default.createElement(Wt,{onClick:i})),r())})),Xt=a("v/Ss"),Kt=a.n(Xt);const $t={op:"impr",page_el_sn:398684},Zt={op:"click",page_el_sn:398684},ea=2,ta=3,aa=4,oa=["front_promo_price"],ra=(e,t)=>{const a=Object(s.useRef)(),o=Object(s.useRef)();Object(s.useImperativeHandle)(t,(()=>({modalRef:o,skuRef:a,exit(){o.current.exit()},enter(){o.current.enter()},prepare(t){const{goods:o}=e,r=Tt()(o,"ui.sku_section.view_style_v2")===ea,s=Tt()(o,"ui.sku_section.view_style_v2")===ta,i=Tt()(o,"ui.sku_section.view_style_v2")===aa,l=r||s||i||Tt()(t,"preventAutoConfirm"),c=1===o.skus.length&&!Tt()(o,"skus[0].specs.length")&&!l;return a.current.show(n()(n()({},t),{},{needNotShow:c,preventAutoConfirm:l})),{needShow:!c}}})));const{children:r,showOCSkuSelector:i}=e,l=Rt()(e,["children","showOCSkuSelector"]);return s.default.createElement(Jt,{modalStyle:{height:i?"85%":"5.1rem"},modalClassName:i?Kt.a.normalSkuModalSkuDirectOrder:Kt.a.normalSkuModal,direction:"y",ref:o,afterShow:e=>{e&&a.current.setScroll()},renderContent:()=>r?Object(s.cloneElement)(r,n()({ref:a},l)):null})};var na=s.default.forwardRef(ra),sa=a("rIj9"),ia=a("uf4C"),la=a("3sKm"),ca=a("u6S6"),da=a.n(ca),ua=a("mUg4"),pa=a.n(ua),ma=a("D+Ft"),ha=a("2xwX"),fa=a("v9S7");let ga=!0;function _a(e){if(!1!==window.p_bodyPositionStyle)return;const t=Object(O.a)();ga&&t.isNativePlatform&&Object(ae.p)({enable:!1}),window.p_bodyPositionStyle=document.body.style.position,window.p_topStyle=document.body.style.top,window.p_bodyScrollTop=ya(),document.body.style.position="fixed",document.body.style.top=`-${window.p_bodyScrollTop}px`,window.p_leftStyle=document.body.style.left,document.body.style.left="calc(50vw - 1.875rem)",Object(ft.a)(e)}function ya(e){return e&&e!==document.body?e.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0)}function ba(){if(!1===window.p_bodyPositionStyle)return;const e=Object(O.a)();var t;ga&&e.isNativePlatform&&Object(ae.p)({enable:!0}),document.body.style.position=window.p_bodyPositionStyle,window.p_bodyPositionStyle=!1,document.body.style.top=window.p_topStyle,t=window.p_bodyScrollTop,document.body.scrollTop=t,0!==document.body.scrollTop?document.body:((document.documentElement||{}).scrollTop=t,document.documentElement&&0!==document.documentElement.scrollTop&&document.documentElement),document.body.left=window.p_leftStyle,Object(ft.b)()}function va(e){const t=e,a=(t.type,t.props);let o=document.createElement("div"),r=null;document.body.appendChild(o),e=s.default.cloneElement(e,{onClose:function(){a.onClose&&a.onClose(),r||(r=setTimeout((function(){s.default.unmountComponentAtNode(o),document.body.removeChild(o),o=null}),0))}});return{componentReference:s.default.render(e,o)}}function ka(e,t=[]){let a=e;return"object"==typeof e&&null!==e&&(e instanceof Array?(a=[],e.forEach(((e,o)=>{a[o]=ka(e,t)}))):(a={},pa()(e,((e,o)=>{const r=da()(o);t.includes(o)?a[r]=e:a[r]=ka(e,t)})))),a}"undefined"!=typeof window&&(window.p_bodyPositionStyle=!1);const Ia=(e,t={},a="5.1rem")=>{Object(ma.a)(e,n()(n()({},t),{},{ContainerProps:{style:{pointerEvents:"none",height:a,top:"auto"}},className:"sku-toast-center"}))},wa=(e,t)=>{Ia(e,t,"85%")};let Sa=!1;Object(fa.a)().then((e=>{Sa=e}));const Ea={isSpinnerShown:!1,timer:null,showWithoutBg(){Ea.timer=setTimeout((()=>{Object(ha.c)(),Ea.isSpinnerShown=!0}),500)},show(){Ea.timer=setTimeout((()=>{Object(ha.b)(),Ea.isSpinnerShown=!0}),500)},hide(){Ea.isSpinnerShown?Object(ha.a)():Ea.timer&&clearTimeout(Ea.timer),Ea.isSpinnerShown=!1,Ea.timer=null}},Ca=(e={},t)=>{if(Object(M.b)(e),t){const e=Object(O.a)();e.isNativePlatform||e.isTinyNativePlatform?Promise.resolve().then((()=>{t()})):setTimeout((()=>{t()}),100)}};let Pa,Na;!function(e){e.POST="POST",e.GET="GET"}(Na||(Na={}));var Oa=async(e,t={isAuth:!1,isFormat:!1})=>{if(!Pa){const e=Object(ia.c)();Pa=Object(sa.a)({pageInfo:{pageId:e}})}if(null==t?void 0:t.isAuth){await Object(la.a)()||await Object(la.f)()}e&&!e.defaultErrorHandler&&(e.defaultErrorHandler=()=>{}),e.encodeNativeResponse=!1;const a=await Pa(e);return t&&t.isFormat?ka(a):a},Da=a("BDyI");var xa=function(e){const t=(e=e||{}).server_time||Date.now()/1e3,a=function(e){e=e||[];const t=[],a={};for(let o=0;o<e.length;o++){const r=e[o];0===(parseInt(r.is_open,10)||0)||a[r.customer_num]||(t.push({requireNum:r.customer_num.toString(),price:Object(Da.b)(r.price),groupID:r.group_id,startTime:parseInt(r.start_time,10),endTime:parseInt(r.end_time,10),orderLimit:parseInt(r.order_limit,10)||1}),a[r.customer_num]=!0)}return t.sort((function(e,t){return e.requireNum-t.requireNum})),{list:t}}(e.group).list,o=Object(Da.b)(e.max_on_sale_group_price||0),r=Object(Da.b)(e.min_on_sale_group_price||0),s=Object(Da.b)(e.max_on_sale_normal_price||0),i=Object(Da.b)(e.min_on_sale_normal_price||0);return{serverTime:t,nowTime:t,goodsID:e.goods_id,mallID:e.mall_id,groupTypes:a,skus:(c=e.sku,d=e.thumb_url,(c=c||[]).map((e=>n()(n()({},ka(e)),{},{skuID:e.sku_id,specs:e.specs,thumbUrl:Object(m.c)(e.thumb_url||d||""),limitQuantity:parseInt(e.limit_quantity,10)||0,normalPrice:Object(Da.b)(e.normal_price),groupPrice:Object(Da.b)(e.group_price),skuExpansionPrice:Object(Da.b)(e.sku_expansion_price)})))),thumbUrl:Object(m.c)(e.thumb_url||""),hdThumbUrl:Object(m.c)(e.hd_thumb_url||""),eventType:parseInt(e.event_type,10)||0,activity:(l=e.activity,l&&{activityID:l.activity_id,activityType:l.activity_type,startTime:l.activity_start_time,endTime:l.activity_end_time,activityExplain:l.activity_explain,activitySkuExplain:l.activity_sku_explain,expansion:l.expansion,detailID:l.detail_id,subActivityType:l.sub_activity_type,costType:l.cost_type,activityOptions:l.activity_options,playType:l.play_type}),maxOnSaleGroupPrice:o,minOnSaleGroupPrice:r,maxOnSaleNormalPrice:s,minOnSaleNormalPrice:i,priceStyle:e.price_style||0,pricePrefix:e.price_prefix,goodsExpansionPrice:Object(Da.b)(e.goods_expansion_price),checkQuantity:e.check_quantity,destinationUrl:e.destination_url,vasTemplateId:e.vas_template_id,skuDirectOrder:e.sku_direct_order,skuNewPricePrefix:e.new_price_prefix,goodsType:+e.goods_type||1,catID:e.cat_id,catID1:e.cat_id_1,catID2:e.cat_id_2,catID3:e.cat_id_3,catID4:e.cat_id_4,options:e.options,overseaType:e.oversea_type||0,minOnSaleGroupPriceInCent:e.min_on_sale_group_price,maxOnSaleGroupPriceInCent:e.max_on_sale_group_price};var l,c,d};function Ta(e,t,a){return Oa({method:"POST",url:a||"api/oak/integration/render/sku",data:n()({page_version:7,_component_version:1,hostname:location.hostname,front_supports:oa},e)}).then((e=>{if(t&&!(e=t(e)))return!1;const a=(e=>n()(n()(n()({},e.goods),e.price),{},{server_time:e.server_time,sku:e.sku,activity:(e.activity_collection||{}).activity,destination_url:e.destination_url}))(e),o=xa(a);return o.ui=e.ui||{},{goodsInfo:o}}))}var ja=a("YVoc"),Aa=a.n(ja),La=a("W1oA"),Ra=a("SXY3");a("wgWF");var Ma=e=>{const{goods:t,activity:a,skuInfos:o,selectedSkuID:r,specDesc:n}=e;let i=t.minOnSaleGroupPrice,l=t.goodsExpansionPrice,c=a.activitySkuExplain,d=null;if(r){const e=o[r];i=e.groupPrice,l=e.skuExpansionPrice,c=e.skuExplain,d=s.default.createElement("span",{className:"sku-quantity-tip"},e.quantityTip)}const u=Tt()(t,"ui.sku_section.price_prefix")||"定金";return s.default.createElement("div",{className:"dj-sku-desc"},s.default.createElement("div",{className:"djs-line-1"},s.default.createElement("span",{className:"djsp-1"},u),s.default.createElement("span",{className:"djsp-2"},"￥"),s.default.createElement("span",{className:"djsp-3"},i),i!==l&&s.default.createElement("span",null,s.default.createElement("span",{className:"djsp-4"},"抵"),s.default.createElement("span",{className:"djsp-5"},l)),d),s.default.createElement("div",{className:"djs-line-2"},c),s.default.createElement("div",{className:"djs-line-3 sku-selector-desc"},n))},Ba=a("/++w"),Fa=a.n(Ba),za=a("MVQ+");function Ha(e){return Object(za.a)(n()(n()({},e),{},{onCancel:void 0}))}var Va=a("hVdf");function Ua(e){Object(Va.b)()?function(e){Object(Va.a)(n()(n()({},e),{},{onCancel:void 0}))}(e):Ha(e)}var Wa=a("GftL"),Ga=a("Wr5u"),qa=a.n(Ga);var Qa=({specDesc:e,skuDirectOrder:t,skuPreSaleIcon:a,selectedSkuID:o,group:r})=>{const n=Object(s.useRef)(),[i,l]=Object(s.useState)(!1),[c,d]=Object(s.useState)(e),[u,p]=Object(s.useState)(!1),{pictureUrl:m,clickUrl:h,width:f,height:g,clickNotice:_}=a||{};return Object(s.useEffect)((()=>{l((Tt()(n,"current.offsetTop",0)||0)>function(e){let t=375;return window?t=window.innerWidth:document&&document.body&&(t=document.body.offsetWidth),Math.min(t,768)/375*e*100}(.35)),m&&d(function(e,t,a="..."){let o=0,r="";for(let n=0;n<e.length;n++)if(r+=e.charAt(n),e.charCodeAt(n)>=128||e.charCodeAt(n)<=90&&e.charCodeAt(n)>=64||e.charCodeAt(n)<=38&&e.charCodeAt(n)>=35){if(o+=2,o>=t)return r.substring(0,r.length-1)+a}else if(o+=1.17,o>=t)return r.substring(0,r.length-2)+a;return r}(e,28)),p(!1)}),[o,r.requireNum]),m?s.default.createElement("div",{ref:n,className:dt()(qa.a.skuSelectorDescWithIcon,{[qa.a.oneLineStyle]:i,[qa.a.skuSelectorDescOC]:t})},c,s.default.createElement(Wa.a,{className:qa.a.skuPreSaleIcon,src:u&&h?h:m,style:{width:f/100+"rem",height:g/100+"rem"},onTouchStart:()=>p(!0),onTouchEnd:()=>p(!1),onClick:()=>{_&&Ua({title:_,confirmButtonLabel:"知道了"})}})):s.default.createElement("div",{ref:n,className:dt()(qa.a.skuSelectorDesc,{[qa.a.oneLineStyle]:i||t,[qa.a.skuSelectorDescOC]:t})},e)};class Ya extends s.default.Component{constructor(...e){super(...e),this.state={retryTimes:this.props.retryTimes||0,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){this.props.catchCallback&&this.props.catchCallback(),Object(At.c)(e),+this.state.retryTimes>0&&this.setState({retryTimes:this.state.retryTimes-1,error:null,errorInfo:null})}render(){return this.state.error?this.props.fallback||s.default.createElement("div",{className:"error-boundary2"}):this.props.children||null}}Ya.defaultProps={retryTimes:0,fallback:s.default.createElement("div",{className:"error-boundary"})};var Ja=a("gze+"),Xa=a.n(Ja);var Ka=({selectedSkuID:e,skuInfos:t,skuDirectOrder:a})=>{const o=e&&(Tt()(t,[[e],"skuPreSaleTip"],"")||"");return o?s.default.createElement("div",{className:dt()({[Xa.a.skuPreSaleTip]:!a,[Xa.a.skuPreSaleTipOC]:a})},o):null};const $a={};let Za=0;var eo,to=e=>{const[t,a]=Object(s.useState)({}),{goodsNumber:o,selectedSkuID:r,goods:i,group:l,skuInfos:c,consultPromotionPriceParams:d}=e,u=Tt()(e.ocData,"promotionInfo"),{isNewPriceArea:p,discountTagDisplayVos:h}=u||{},f=p&&h&&!!h.length&&h.reduce(((e,t)=>{if(5===t.tagType&&t.tagDisplayVo){const a=t.tagDisplayVo;if(a.length){return a[0].text+e}}}),""),g=(e,t)=>{if(!e||!r)return t;const a={labelText:e,labelType:"usable_full_back",morganLable:!0};if(!t||!t.length)return[a];if(t&&t.length){const e=t.findIndex((e=>"usable_full_back"===e.labelType));return e>=0&&(t[e]=a),e<0&&t.unshift(a),t}};return Object(s.useEffect)((()=>{(async()=>{var e,t,s;const u=ka(null===(e=i.ui)||void 0===e?void 0:e.sku_section)||{},p=r&&c[r],h=(r?null==p?void 0:p.yellowLabelList:null==u?void 0:u.yellowLabelList)||[],_=r?null==p?void 0:p.priceDisplay:null==u?void 0:u.priceDisplay;let y=r?null==p?void 0:p.groupTip:null==u?void 0:u.skuUnselectTip,b=r?null==p?void 0:p.groupTipColor:null==u?void 0:u.skuUnselectTipColor,v=r?null==p?void 0:p.groupTipFont:null==u?void 0:u.skuUnselectTipFont;1==+l.requireNum&&(y=r?null==p?void 0:p.quantityTip:"",b="",v="");if(!(1===u.consultPromotionPrice&&l.requireNum>1&&r&&o>1))return void a({newPriceDisplay:_,newYellowLabelList:g(f,h),promotionPriceDesc:y,tipColor:b,tipFontSize:v});const k=(null===(t=c[r])||void 0===t?void 0:t.groupPrice)||null,I=(null===(s=c[r])||void 0===s?void 0:s.normalPrice)||null;if(!k)return;const w=await(async(e,t,a,o,r,s={})=>{var i;const l=`${t}-${a}`;if(null===(i=$a[l])||void 0===i?void 0:i.promotionPriceDesc)return $a;const c=Object(m.g)(window.location.href),{activity:d=[]}=e,u=n()({goods_id:e.goodsID,mall_id:e.mallID,cat_id:e.catID,cat_id1:e.catID1,cat_id2:e.catID2,cat_id3:e.catID3,cat_id4:e.catID4,goods_type:e.goodsType,event_type:e.eventType,options:e.options,oversea_type:e.overseaType,min_on_sale_group_price:e.minOnSaleGroupPriceInCent,max_on_sale_group_price:e.maxOnSaleGroupPriceInCent,activity_type:d.activityType,sub_activity_type:d.subActivityType,activity_id:d.activityID,cost_type:d.costType,activity_options:d.activityOptions,activity_play_type:d.playType,from_page:c.page_from,from_merchant_tag:c._oak_merchant_tag,mkt_domain:c._oc_mkt_domain,sku_id:a,sku_group_price:Math.round(100*+o),goods_number:t,_oc_award_type:c._oc_award_type,normal_price:Math.round(100*+r),vas_template_id:e.vasTemplateId,front_supports:oa},s);Object.keys(c).forEach((e=>{const t=c[e];/(^_oc_*)/.test(e)&&t&&(u[e]=t)}));try{Za++;const e=Za,t=ka(await Oa({method:"POST",data:u,url:"api/lisbon/consult_promotion_price"}));if(e===Za)return $a[l]=t,$a;if(e!==Za)return null}catch(p){return null}})(i,o,r,k,I,d);if(w){const{promotionPriceDesc:e,priceDisplay:t,yellowLabelList:n}=w[`${o}-${r}`]||{},s=h.slice(),l=(n||[]).find((e=>"usable_full_back"===e.labelType))||{},c=(s||[]).findIndex((e=>"usable_full_back"===e.labelType));c>=0&&!s[c].morganLable&&(s[c]=l),c<0&&(null==l?void 0:l.labelText)&&(s||[]).unshift(l),(null==t?void 0:t.price)&&(y=`${i.skuNewPricePrefix||"拼单价"}${k}`,b="#58595B",v=14),a({newPriceDisplay:t,newYellowLabelList:g(f,s),promotionPriceDesc:(null==t?void 0:t.price)?y:e,tipColor:b,tipFontSize:v})}})()}),[o,r,i,c,l,f]),t};const ao=e=>e<10?"0"+e:e,oo=(e,t,a)=>{let o=Math.max(t-e,0),r=Math.floor(o/60),n=Math.floor(r/60),s=Math.floor(n/24);s%=365,n=ao("hour"!==a?n%24:n),r=ao(r%60),o=ao(Math.floor(o%60));let i="";0!==s&&(i=s+"天"+n+"小时");let l=!1;return e>=t&&(l=!0),{over:l,days:s,hours:n,minutes:r,seconds:o,formattedStr:i}};let ro=(eo=class extends s.default.Component{constructor(...e){super(...e),this.state={nowTime:this.props.goods.nowTime}}componentDidMount(){const e=Tt()(this.props.goods,"ui.sku_section.yellow_label")||Tt()(this.props.goods,"ui.price_section.data.yellow_label");if(Tt()(e,"end_time")){const t=setInterval((()=>{this.setState({nowTime:this.state.nowTime+1}),e.end_time<this.state.nowTime&&clearInterval(t)}),1e3)}}genPrice(){var e;const t=+Tt()(this.props.goods,"ui.sku_section.car_shop.action_type"),{selectedSkuID:a,skuInfos:o,goods:r,group:n,selectedHomeIns:i,selectedSendWays:l,skuDirectOrder:c,styleStatus:d,ocData:u,useNormalSkuData:p,renderPromotionDescContent:m}=this.props,h=Tt()(u,"promotionInfo");let f;if(a){const e=o[a];if(f=n.requireNum>1?e.groupPrice:e.normalPrice,Tt()(r,"ui.sku_section.view_style_v2")===aa){if(Tt()(i,"srv_type")>0){const e=+Object(Da.b)(Tt()(i,"fee")||0);+e>0&&(f=Object(Da.a)(+f+e))}}const s=+Tt()(l,"fee")||0;Tt()(r,"ui.sku_section.view_style_v2")===ta&&1===t&&s>0&&(f=Object(Da.a)(+f+s))}else{const{minOnSaleGroupPrice:e,maxOnSaleGroupPrice:a,minOnSaleNormalPrice:o,maxOnSaleNormalPrice:s}=r;let c=[o,s];if(+n.requireNum>1&&(c=[e,a]),Tt()(r,"ui.sku_section.view_style_v2")===aa){const e=+Object(Da.b)(Tt()(i,"fee")||0);e>0&&(c=c.map((t=>Object(Da.a)(+t+e))))}const d=+Tt()(l,"fee")||0;Tt()(r,"ui.sku_section.view_style_v2")===ta&&1===t&&d>0&&(c=c.map((e=>Object(Da.a)(+e+d)))),f=c[0],c[0]!==c[1]&&(f=c.join("-"))}let g="";+n.requireNum>1&&3===r.priceStyle&&r.pricePrefix&&(g=r.pricePrefix);let _=`${g}¥${f}`,y=null===(e=_)||void 0===e?void 0:e.length;const{newPriceDisplay:b}=this.props.priceInfo;if(+n.requireNum>1&&(null==b?void 0:b.price)){const{prefix:e="",price:t,rmb:a="",suffix:o=""}=b;y=`${e}${a}${t}${o}`.length;const r=y>16?.02:0;_=s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{style:{fontSize:.17-r+"rem"}},e),s.default.createElement("span",{style:{fontSize:.19-r+"rem"}},a,t),s.default.createElement("span",{style:{fontSize:"0.13rem"}},o))}const v=Tt()(this.props.ocData,"goodsInfo.unitPrice"),{isNewPriceArea:k,totalDiscountDisplay:I}=h||{};let w="¥"+v;return k&&I&&(w=s.default.createElement(s.default.Fragment,null,I.map(((e,t)=>{const a={color:e.font_color,fontSize:e.font_size&&e.font_size/100+"rem"};return s.default.createElement("span",{key:t,style:a},e.text)})))),s.default.createElement("div",{className:dt()({[Fa.a.skuSelectorPrice]:!c||c&&p,[Fa.a.skuSelectorPriceOC]:c&&!p,[Fa.a.startHide]:1===d,[Fa.a.startDisplay]:2===d})},s.default.createElement("div",{className:dt()(Fa.a.skuQuantityPriceDesc,{[Fa.a.isNewPriceArea]:k})},c&&a&&v&&!p?w:_),s.default.createElement(Ya,null,m&&m(this.props.priceInfo)))}getSpecDesc(){const e=[],t=[],{currentSelect:a,selectedSkuID:o,skuInfos:r,selectedHomeIns:n,selectedSendWays:s}=this.props;for(const i in a){const o=a[i];o?t.push(o):e.push(i)}if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===aa){const a=Tt()(n,"desc"),s=Tt()(n,"srv_type");if(!a){const t=Tt()(this.props.goods,"ui.sku_section.home_install.title")||"服务";e.push(t)}if(a&&o){const e=r[o],a=Tt()(e,"srvItem",[]).find((e=>e&&e.srv_type===s)),n=Tt()(a,"desc")||"";t.push(n)}}if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ta){const a=+Tt()(this.props.goods,"ui.sku_section.car_shop.action_type"),o=Tt()(s,"type")||"",r=Tt()(s,"fee"),n=1===a&&r>=0?`${o} ¥${r}`:o;if(!o){const t=Tt()(this.props.goods,"ui.sku_section.car_shop.title")||"送货方式";e.push(t)}o&&t.push(n)}return e.length>0?"请选择 "+e.join(" "):t.length>0?"已选："+t.join(" "):""}renderDiscountItem(e,t){const{skuDirectOrder:a}=this.props,{labelText:o,endTime:r}=e;if(!o)return null;let n=o,i=s.default.createElement(s.default.Fragment,null,n);if(r&&n.search(/#time#/g)>=0){const{formattedStr:e,over:t,days:a,hours:o,minutes:l,seconds:c}=oo(this.state.nowTime,r);t||(i=0===a?n.split(/(#time#)/g).map(((e,t)=>"#time#"===e?s.default.createElement("div",{className:Fa.a.countDown,key:t},o,":",l,":",c):s.default.createElement(s.Fragment,{key:t},e))):s.default.createElement(s.Fragment,null,n.replace(/#time#/g,e))),t&&(n="",i=null)}return n&&i?s.default.createElement("div",{className:dt()(Fa.a.yellowLabelWrap,Fa.a.listItem),key:t},s.default.createElement("span",{className:dt()({[Fa.a.yellowLabel]:!a,[Fa.a.yellowLabelOC]:a})},i)):void 0}renderDiscountElement(){const{goods:e,skuInfos:t,group:a,selectedSkuID:o,skuDirectOrder:r,priceInfo:n}=this.props;if(+a.requireNum>1){const{newYellowLabelList:a}=n;if(null==a?void 0:a.length)return s.default.createElement("div",{className:Fa.a.yellowLabelListWrap},a.map(((e,t)=>this.renderDiscountItem(e,t))));const i=Tt()(e,"ui.sku_section.yellow_label")||Tt()(e,"ui.price_section.data.yellow_label");let l=Tt()(i,"sku_unselect_label")||"";o&&(l=t[o].yellowLabel||"");let c=s.default.createElement(s.default.Fragment,null,l);if(Tt()(i,"end_time")&&l&&l.search(/#time#/g)>=0){const{formattedStr:e,over:t,days:a,hours:o,minutes:r,seconds:n}=oo(this.state.nowTime,i.end_time);t||(c=0===a?l.split(/(#time#)/g).map(((e,t)=>"#time#"===e?s.default.createElement("div",{className:Fa.a.countDown,key:t},o,":",r,":",n):s.default.createElement(s.Fragment,{key:t},e))):s.default.createElement(s.Fragment,null,l.replace(/#time#/g,e))),t&&(l="",c=null)}if(l&&c)return s.default.createElement("div",{className:Fa.a.yellowLabelWrap},s.default.createElement("span",{className:dt()({[Fa.a.yellowLabel]:!r,[Fa.a.yellowLabelOC]:r})},c))}return null}render(){const{goods:e,skuInfos:t,group:a,selectedSkuID:o,skuDirectOrder:r}=this.props,{activity:n}=e;if(n&&25===n.activityType)return s.default.createElement(Ma,{specDesc:this.getSpecDesc(),selectedSkuID:o,skuInfos:t,goods:e,activity:n});let i=null;return o&&(i=t[o].skuPreSaleIcon),s.default.createElement("div",{className:dt()({[Fa.a.skuSelectorHeadContent]:!r,[Fa.a.skuSelectorHeadContentOC]:r})},this.genPrice(),this.renderDiscountElement(),s.default.createElement(Ya,null,s.default.createElement(Qa,{specDesc:this.getSpecDesc(),skuDirectOrder:r,skuPreSaleIcon:i,selectedSkuID:o,group:a})),r&&s.default.createElement(Ya,null,s.default.createElement(Ka,{selectedSkuID:o,skuInfos:t,skuDirectOrder:r})))}},ee()(eo.prototype,"getSpecDesc",[jt.a],Object.getOwnPropertyDescriptor(eo.prototype,"getSpecDesc"),eo.prototype),ee()(eo.prototype,"renderDiscountItem",[jt.a],Object.getOwnPropertyDescriptor(eo.prototype,"renderDiscountItem"),eo.prototype),ee()(eo.prototype,"renderDiscountElement",[jt.a],Object.getOwnPropertyDescriptor(eo.prototype,"renderDiscountElement"),eo.prototype),eo);var no,so=s.default.forwardRef(((e,t)=>{const a=Object(s.useRef)();Object(s.useImperativeHandle)(t,(()=>a.current));const o=to(e);return s.default.createElement(ro,w()({},e,{ref:a,priceInfo:o}))})),io=a("1Irm");let lo=(no=class extends s.default.PureComponent{constructor(e){super(e),this.state={thumb:this.processImage(e.src)},this.imgUrl=e.src}componentDidMount(){const{selectSkuId:e,resetSkuId:t,usePddNativePhoto:a}=this.props,o=Object(O.a)();if(a&&Object(D.c)(o.version,"5.49.0")>=0)try{Object(io.a)("video_container_goods_sku_index_change_notification",(a=>{const o=(null==a?void 0:a.sku_id)||"";o?e&&e({skuId:o}):t&&t()}))}catch(r){}}getNativeViewImgList(){const{skuInfos:e,group:t}=this.props,a=Object.values(e);a.sort(((e,t)=>Tt()(e,"previewPriority")-Tt()(t,"previewPriority")));const o=[];return a.forEach((e=>{if(e.quantity<=0)return;let a="";var r=!0,n=!1,s=void 0;try{for(var i,l=e.specs[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){const e=i.value;e.spec_value&&(a+=e.spec_value+" ")}}catch(d){n=!0,s=d}finally{try{r||null==l.return||l.return()}finally{if(n)throw s}}const c=t.requireNum>1?e.groupPrice:e.normalPrice;o.push({image_url:e.thumbUrl,sku_name:a,price:c,sku_id:e.skuId})})),o}viewImg(){const{selectedSkuID:e,goods:t,usePddNativePhoto:a}=this.props,o=Object(O.a)();if(a&&Object(D.c)(o.version,"5.50.0")>=0){const a=Object(m.g)(window.location.href),o=this.getNativeViewImgList();let r=o.findIndex((t=>t.sku_id===e));if(!e&&r<0){const e=t.hdThumbUrl||t.thumbUrl;o.unshift({image_url:e,sku_mode:1}),r=0}const n={props:{url:"pdd_photo_goods_sku.html?pr_animated=0",index:r,scene_id:"goods_detail_sku",data_list:o,loop:!0,is_h5:!0,activity_style_:1},transient_refer_page_context:{page_id:a.page_id,page_name:a.page_name,page_sn:a.page_sn}};Object(ae.g)("JSNavigation","modal",n).catch((e=>{Object(La.a)(this.imgUrl,this.props.imgList)}))}else Object(La.a)(this.imgUrl,this.props.imgList),Object(M.b)(n()(n()({},Zt),{},{goods_id:t.goodsID,event_type:t.eventType}))}componentWillReceiveProps(e){const{src:t}=e,a=this.processImage(t);if(t!==this.imgUrl){const e=new Image;e.onload=()=>{this.setState({thumb:a}),this.imgUrl=t},e.src=a}}processImage(e){return Object(he.a)(e,{resizeWidth:300,quality:70,webpEnable:Sa,sharpen:1})}render(){const{goods:e}=this.props,t=n()(n()({},$t),{},{goods_id:e.goodsID,event_type:e.eventType}),{thumb:a}=this.state;return s.default.createElement(Ra.a,{trackingInfo:t},s.default.createElement("img",{src:a,onClick:this.viewImg}))}},ee()(no.prototype,"getNativeViewImgList",[jt.a],Object.getOwnPropertyDescriptor(no.prototype,"getNativeViewImgList"),no.prototype),ee()(no.prototype,"viewImg",[jt.a],Object.getOwnPropertyDescriptor(no.prototype,"viewImg"),no.prototype),no);a("h3V6");var co,uo=a("sEfC"),po=a.n(uo),mo=a("DzJC"),ho=a.n(mo);a("XkPr");let fo=[],go=(co=class extends s.Component{constructor(e){super(e),this.state={data:fo,currentIndex:0,isSearchBoxFocus:!1,keywords:""},this.containerRef=s.default.createRef(),this.searchBoxRef=s.default.createRef(),this._handleScroll=()=>{const e=Math.round(ya(this.containerRef.current)),t=Array.from(document.getElementsByClassName("sku-item-address"));t.forEach(((a,o)=>{(o+1<t.length&&a.offsetTop<e&&t[o+1].offsetTop>e||o+1===t.length&&a.offsetTop<e)&&this.setState({currentIndex:o})}))},this.forwardContent=(e,t,a)=>{this.setState({currentIndex:a});document.getElementById(t).scrollIntoView()},this.handleScroll=ho()(this._handleScroll,300),this.handleSearchBoxChange=po()(this._handleSearchBoxChange,300)}componentDidMount(){Object(ft.a)(this.containerRef.current),Tt()(this.state,"data.length")||(Object(ha.c)(),Oa({method:"POST",url:"api/virginia/sim_mobile/query_dictionary",data:{goods_id:this.props.goodsID}}).then((e=>{Object(ha.a)(),e&&e.result&&e.result.areas&&(fo=e.result.areas,this.setState({data:e.result.areas}))})).catch((()=>{Object(ha.a)()})))}handleSearchBoxFocus(){this.setState({isSearchBoxFocus:!0})}handleSearchBoxBlur(){this.setState({isSearchBoxFocus:!1})}_handleSearchBoxChange(){this.setState({keywords:this.searchBoxRef.current.value,currentIndex:0})}render(){const{data:e,keywords:t,currentIndex:a,isSearchBoxFocus:o}=this.state,r=t?e.reduce(((e,a)=>{var o;const r=null==a||null===(o=a.citys)||void 0===o?void 0:o.filter((e=>{var a;return null==e||null===(a=e.name)||void 0===a?void 0:a.includes(t)}));return r&&r.length>0&&e.push({citys:r,first_word:a.first_word}),e}),[]):e;return s.default.createElement("div",{className:"comm-address-selector-container",onClick:e=>{e.stopPropagation(),this.props.onClose()}},s.default.createElement("div",{className:"comm-add",onClick:e=>{e.stopPropagation()}},s.default.createElement("div",{className:"comm-add-header"},s.default.createElement("div",{className:"comm-add-header-back",onClick:e=>{e.stopPropagation(),this.props.onClose()}}),s.default.createElement("div",{className:"comm-add-header-title"},"号码归属地")),s.default.createElement("div",{className:dt()("address-searchbox",{"address-searchbox-focus":o||!!t})},s.default.createElement("div",{className:"search-icon"}),s.default.createElement("input",{ref:this.searchBoxRef,className:"search-input",type:"text",placeholder:"请输入城市名",onFocus:this.handleSearchBoxFocus,onBlur:this.handleSearchBoxBlur,onChange:this.handleSearchBoxChange})),s.default.createElement("div",{className:"address-list",onScroll:this.handleScroll,ref:this.containerRef},r.map(((e,t)=>{const o=dt()("item-title",{"item-title-current":a===t});return s.default.createElement("div",{className:"sku-item-address",key:t},s.default.createElement("div",{className:o,id:e.first_word},e.first_word),s.default.createElement("ul",{className:"item-name"},e.citys.map(((e,t)=>s.default.createElement("li",{onClick:()=>{this.props.onClose(),this.props.onClickAddress(e)},key:t},e.name)))))}))),s.default.createElement("ul",{className:"address-short-name"},r.map(((e,t)=>s.default.createElement("li",{id:e.first_word,key:t,className:a===t?"current":"",onClick:a=>this.forwardContent(a,e.first_word,t)},e.first_word))))))}},ee()(co.prototype,"handleSearchBoxFocus",[jt.a],Object.getOwnPropertyDescriptor(co.prototype,"handleSearchBoxFocus"),co.prototype),ee()(co.prototype,"handleSearchBoxBlur",[jt.a],Object.getOwnPropertyDescriptor(co.prototype,"handleSearchBoxBlur"),co.prototype),ee()(co.prototype,"_handleSearchBoxChange",[jt.a],Object.getOwnPropertyDescriptor(co.prototype,"_handleSearchBoxChange"),co.prototype),co);a("OIse");class _o extends s.Component{constructor(...e){super(...e),this.state={data:null,serachKeyValue:"",loading:!0},this.getServiceData=()=>{this.setState({loading:!0}),Object(ha.c)();const e={goods_id:this.props.goodsID,num:10,mobile:this.state.serachKeyValue||"",city_id:this.props.cityID,province_id:this.props.provinceID};Oa({method:"POST",url:"api/virginia/sim_mobile/query_mobiles",data:e}).then((e=>{Object(ha.a)(),this.setState({loading:!1,data:e.result})})).then((()=>{Object(ha.a)()}))},this.forwardGoods=e=>{Oa({method:"POST",url:"api/virginia/sim_mobile/edit_status",data:{goods_id:this.props.goodsID,mobile_id:e.mobile_id}}).then((t=>{Tt()(t,"result")?(this.props.onClose(),this.props.onClickNumber(e)):Ia("下手晚了，靓号被别人抢走了")}))}}componentDidMount(){this.getServiceData()}loadMoreData(e){e.preventDefault(),this.getServiceData()}fixInputBug(){const e=Object(O.a)();e.system===D.b.IOS&&Object(D.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}renderNumList(){const e=this.state.data;return Tt()(e,"length")?s.default.createElement(s.Fragment,null,s.default.createElement("ul",{className:"item-mobile-container"},e.map(((e,t)=>s.default.createElement("li",{className:"item-mobile",key:t,onClick:()=>this.forwardGoods(e)},e.mobile)))),s.default.createElement("div",{className:"load-more-data",onClick:e=>this.loadMoreData(e)},"换一批")):s.default.createElement("div",{className:"no-num-container"},s.default.createElement("div",{className:"no-num-image"}),s.default.createElement("div",{className:"no-num-text"},"没有找到匹配的号码"))}render(){return s.default.createElement("div",{className:"comm-num-selector-container",onClick:e=>{e.stopPropagation(),this.props.onClose()}},s.default.createElement("div",{className:"sku-mobile-num",onClick:e=>{e.stopPropagation()}},s.default.createElement("div",{className:"sku-mobile-num-header"},s.default.createElement("div",{className:"sku-mobile-num-header-back",onClick:e=>{e.stopPropagation(),this.props.onClose()}}),s.default.createElement("div",{className:"sku-mobile-num-header-title"},"手机号码")),s.default.createElement("form",{action:"",onSubmit:e=>this.loadMoreData(e)},s.default.createElement("div",{id:"search-content",className:"search-content"},s.default.createElement("div",{className:"search-icon"}),s.default.createElement("input",{type:"search",placeholder:"输入喜欢的数字",className:"search-input",value:this.state.serachKeyValue,onBlur:()=>{this.fixInputBug()},onChange:e=>{this.setState({serachKeyValue:e.target.value})}}))),!this.state.loading&&this.renderNumList()))}}class yo extends s.default.Component{constructor(...e){super(...e),this.state={cityName:null,cityID:null,provinceID:null,provinceNname:null,mobileID:null,mobile:null},this.getState=()=>this.state,this.cityClick=()=>{const{selectedSkuID:e}=this.props;e?va(s.default.createElement(go,{goodsID:this.props.goodsID,onClickAddress:e=>{e.id!==this.state.cityID&&this.setState({cityID:e.id,cityName:e.name,provinceName:e.province_name,provinceID:e.province_id,mobileID:null,mobile:null})},getSkuRef:this.props.getSkuRef})):this.props.toastSpec()},this.mobileClick=()=>{const{selectedSkuID:e,goodsID:t}=this.props;if(!e)return void this.props.toastSpec();const{cityID:a,provinceID:o}=this.state;a&&o?va(s.default.createElement(_o,{goodsID:t,cityID:a,provinceID:o,onClickNumber:e=>{this.setState({mobileID:e.mobile_id,mobile:e.mobile})}})):Ia("请先选择号码归属地")}}render(){const{cityName:e,mobile:t}=this.state;return s.default.createElement("div",{className:"sku-specs"},s.default.createElement("span",{className:"sku-specs-key"},"入网信息"),s.default.createElement("div",{className:"sku-spec-value-list"},s.default.createElement("div",{className:"iphone-mark"},s.default.createElement("div",{className:"areas",onClick:this.cityClick},s.default.createElement("span",{className:"are-key"},"号码归属地"),s.default.createElement("span",{className:dt()("are-value",{enable:e})},e||"请选择",s.default.createElement("span",{className:"enter-icon"}))),s.default.createElement("div",{className:"iphone-num",onClick:this.mobileClick},s.default.createElement("span",{className:"are-key"},"手机号码"),s.default.createElement("span",{className:dt()("are-value",{enable:t})},t||"请选择",s.default.createElement("span",{className:"enter-icon"}))))))}}let bo=null;function vo(){return new Promise(((e,t)=>{window.wx.ready((function(){!function(e){bo&&e(bo),window.wx.getLocation({success:function(t){const a=t.latitude,o=t.longitude;bo={latitude:a,longitude:o},e(bo)},cancel:function(){bo={latitude:0,longitude:0},e(bo)}})}(e)}))}))}var ko=a("3INx"),Io=a("vBQ9");const wo="AMLOCATION_HAS_SET_KEY";async function So(){try{const e=await Object(ae.g)("AMLocation","check");let{is_determined:t,is_enabled:a,need_reconfirm:o}=e||{};return Object(O.a)().platform===D.a.PddAndroid&&localStorage.getItem(wo)&&(t=1),{isDetermined:t,isEnabled:a,needReconfirm:o}}catch(e){return{}}}async function Eo(){if(Object(O.a)().isNativePlatform){const{isEnabled:e,isDetermined:t}=await So();return!(!e||!t)}return!0}let Co=null;async function Po(){if(Co)return Co;let e={latitude:0,longitude:0};const t=Object(O.a)();e=t.isNativePlatform&&function(){const e=Object(O.a)();return!!e.isNativePlatform&&e.statisfy("5.21.0","5.12.0",ko.a.greaterThanEqual)}()?await async function(){try{const e={scene:"install_store"},t=await Object(ae.g)("AMLocation","getLocationId",e),{location_id:a}=t||{};return{locationId:a}}catch(e){return{latitude:0,longitude:0}}}():(t.isWeChatMiniProgram||t.isWeChatPlatform)&&window.wx&&window.wx.getLocation?await async function(){let e={latitude:0,longitude:0};try{return e=await Promise.race([vo(),new Promise(((e,t)=>{setTimeout(e,1e3)})).then((e=>{throw Error("wx query location timeout")}))]),e}catch(t){return e}}():t.isQQPlatform?await function(e=0){return new Promise(((t,a)=>{window.mqq.ready((function(){window.mqq&&window.mqq.sensor||t({latitude:0,longitude:0}),window.mqq.sensor.getLocation({allowCacheTime:60},((a,o,r,n)=>{t(0!==a?null:{latitude:o,longitude:r,coord_type:5},e)}))}))}))}():await new Promise(((e,t)=>{navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){const{latitude:a=0,longitude:o=0}=t.coords||{};e({latitude:a,longitude:o})}),(t=>{e({latitude:0,longitude:0})}),{enableHighAccuracy:!1,timeout:6e4,maximumAge:6e4}):e({latitude:0,longitude:0})}));const a=await Eo();return e=n()(n()({},e),{},{hasLocAuth:a}),e&&e.latitude&&(Co=e),e}function No(e){return new Promise(((t,a)=>{setTimeout(t,e)})).then((e=>{throw Error("query location timeout")}))}var Oo=async()=>{const e=Object(O.a)(),t=e.isNativePlatform;let a={latitude:0,longitude:0};const o=e.platform===D.a.PddAndroid&&Object(D.c)(e.version,"5.10.0")>=0||e.platform===D.a.PddIOS&&Object(D.c)(e.version,"5.6.0")>=0;try{a=o?await Promise.race([Po(),No(1e4)]):await Promise.race([Po(),No(3e3)])}catch(r){const e=!o;a=n()(n()({},a),{},{hasLocAuth:e})}return n()(n()({enabled:!0},a),{},{isNativePlatform:t})};class Do extends s.Component{constructor(...e){super(...e),this.listWrapperRef=s.default.createRef(),this.listRef=s.default.createRef(),this.state={isLoading:!1},this._handleScroll=()=>{this.checkNeedLoadDown()&&!this.state.isLoading&&(this.setState({isLoading:!0}),this.props.loadMoreShops((()=>{this.setState({isLoading:!1})})))},this.checkNeedLoadDown=()=>{if(this.listRef.current){const{hasMore:e}=this.props;if(this.listRef.current.getBoundingClientRect().bottom<window.innerHeight+20&&e)return!0}return!1}}componentDidMount(){this.handleScroll=ho()(this._handleScroll,300),this.listWrapperRef&&this.listWrapperRef.current&&(Object(ft.a)(this.listWrapperRef.current),this.listWrapperRef.current.addEventListener("scroll",this.handleScroll))}renderList(){const{list:e}=this.props;return e&&e.length?s.default.createElement("div",{className:"list-wrapper",ref:this.listRef},e.map(((e,t)=>s.default.createElement("div",{className:"shop-item",key:t,onClick:e=>{this.props.onSelectShop(e,t)}},s.default.createElement("div",{className:"shop-name"},s.default.createElement("div",{className:dt()("select-icon",{active:e.selected})}),e.nearestTag?s.default.createElement("div",{className:"shop-name-container"},s.default.createElement("div",{className:"shop-name-text-tag"},e.name),s.default.createElement("span",{className:"shop-nearst-tag"},e.nearestTag)):s.default.createElement("div",{className:"shop-name-text"},e.name)),s.default.createElement("div",{className:"location"},s.default.createElement("div",{className:"address"},e.address),s.default.createElement("div",{className:e.distance?"distance":""},e.distance))))),this.state.isLoading&&s.default.createElement("div",{className:"downloader-container"},s.default.createElement("div",{className:"loader-spinner "}))):s.default.createElement("div",{className:"no-shop-hint"},"抱歉，该区域暂无可用门店")}render(){return s.default.createElement("div",{className:"shop-list-container",ref:this.listWrapperRef},this.renderList())}}const xo="undefined"!=typeof window,To="请重新选择地区",jo=1,Ao=2,Lo=3,Ro=4,Mo=1e6;class Bo extends s.Component{constructor(e){var t;super(e),t=this,this.loadShops=async function(e){try{const{provinceID:o,cityID:r,districtID:s}=e||{},{longitude:i,latitude:l,hasLocAuth:c,locationId:d}=await Oo();let u={longitude:i,latitude:l,province_id:o,city_id:r,page:t.page,size:10,goods_id:t.props.goods.goodsID,has_loc_auth:c,location_id:d};s&&s!==Mo&&(u.district_id=s);let p="api/turing/mall/query_neighbor_mall_list_v2";const{actionType:m}=t.props;if(1===m){var a;p="api/osaka/additional/store_install/query_store_list";const e=Object(O.a)();let o="WGS84";e.platform===D.a.PddIOS&&(o="BD09");const{selectedSkuID:r,skuInfos:s}=t.props;u=n()(n()({},u),{},{coord_type:o,cat_id_3:t.props.goods.catID3,cat_id_4:t.props.goods.catID4,template_sn_list:Tt()(t.props.goods,"ui.sku_section.car_shop.vas_template_id"),mall_id:t.props.goods.mallID,sku_id:Number(r),sku_attribute:r&&(null===(a=s[r])||void 0===a?void 0:a.attribute)||""})}const h=await Oa({method:"POST",url:p,data:u});if(h){return(h.mall_store_info_list||[]).map((e=>{const t=Tt()(e,"fee")>=0?Object(Da.b)(e.fee):-1;return{mallID:e.mall_id,shopID:e.store_id,distance:e.distance,name:e.store_name,address:e.store_address,nearestTag:e.nearest_tag,fee:t,srvType:e.srv_type}}))}}catch(o){console.error(o)}},this.loadMoreShops=async function(e){try{const{provinceID:a,cityID:o,districtID:r,shopList:n}=t.state,s=await t.loadShops({provinceID:a,cityID:o,districtID:r});t.page++;const i=!!s.length;t.setState({shopList:n.concat(s),hasMore:i})}catch(a){console.error(a)}finally{e()}},this.onShopLoaded=(e,t)=>{this.page++;const a=e.length,o=e.find((e=>e.shopID===t));o&&(o.selected=!0),this.setState({shopList:e,shopID:o?o.shopID:"0",shopName:o?o.name:"",shopAddress:o?o.address:"",hasMore:a,nearestTag:o?o.nearestTag:"",fee:o?o.fee:-1,srvType:o?o.srvType:""},(()=>{this.selectRegionTab(Ro)}))},this.onSelectShop=(e,t)=>{e&&e.stopPropagation&&e.stopPropagation();const{shopList:a}=this.state,o=a.map(((e,a)=>(e.selected=t===a,e))),r=o[t];this.setState({shopList:o,shopID:r.shopID,shopName:r.name,shopAddress:r.address,nearestTag:r.nearestTag,fee:r.fee,srvType:r.srvType},(()=>{this.selectRegionTab(Ro)}))},this.confirmShop=e=>{e&&e.stopPropagation&&e.stopPropagation();const{provinceID:t,cityID:a,districtID:o,shopID:r,shopName:n,shopAddress:s,nearestTag:i,fee:l,srvType:c}=this.state;if("0"===r)return void Ia("请选择门店");const d={provinceID:t,cityID:a,districtID:o,shopID:r,shopName:n,shopAddress:s,nearestTag:i,fee:l,srvType:c};this.hideRegionSelectorPanel(e,d)},this.state={currentRegionTab:jo,panelStyle:{transform:"translateY(100%)"},provinceID:"0",provinceName:"",provinces:null,cityID:"0",cityName:"",cities:null,districtID:"0",districtName:"",districts:null,shopID:"0",shopList:[],hasMore:!0,nearestTag:""},this.page=1,this.provincesLoaded=!1,this.citiesLoaded=!1,this.districtsLoaded=!1,this.regionSelectorHeader=s.default.createRef()}componentWillMount(){xo&&a("FIFS")}componentDidMount(){const e=document.getElementById("region-selector-list-"+this.state.currentRegionTab);Object(ft.a)(e);const{addressInfo:t}=this.props;t&&t.shopID?this.onAddressInfoLoaded(this.props.addressInfo):this.loadRegions(jo,1).then((e=>{this.onProvincesLoaded(this.state.provinceID,e),this.showRegionSelectorPanel()})).catch((()=>{Ia(To)}))}componentWillReceiveProps(e){const t=e.addressInfo||{},a=this.props.addressInfo||{};t.province_id+""==a.province_id+""&&t.city_id+""==a.city_id+""&&t.district_id+""==a.district_id+""||this.onAddressInfoLoaded(t)}async onAddressInfoLoaded(e){if(!e)return;const t=e.regionId||1,{provinceID:a,cityID:o,districtID:r,shopID:n}=e;let s=setTimeout((function(){Object(ha.c)()}),500);Promise.all([this.loadRegions(jo,t),this.loadRegions(Ao,a),this.loadRegions(Lo,o),this.loadShops({provinceID:a,cityID:o,districtID:r})]).then((e=>{this.onProvincesLoaded(a,e[0]),this.onCitiesLoaded(o,e[1]),this.onDistrictsLoaded(r,e[2]),this.onShopLoaded(e[3],n),this.showRegionSelectorPanel(),clearTimeout(s),Object(ha.a)()})).catch((()=>{Ia(To),clearTimeout(s),Object(ha.a)()}))}generateHeader(){const{currentRegionTab:e,provinceID:t,provinceName:a,cityID:o,cityName:r,districtID:n,districtName:i,shopID:l,shopName:c}=this.state;return s.default.createElement("div",{className:"mars-panel-header",ref:this.regionSelectorHeader},s.default.createElement("div",{className:"panel-header-tag-wrapper"},s.default.createElement("div",{className:"mars-ph-province "+(1===e?"mars-ph-active":""),onClick:e=>this.selectRegionTab(jo,e)},t+""=="0"?s.default.createElement("span",null,"请选择"):s.default.createElement("span",null,a)),t+""!="0"&&s.default.createElement("div",{className:"mars-ph-city "+(2===e?"mars-ph-active":""),onClick:e=>this.selectRegionTab(Ao,e)},o+""=="0"?s.default.createElement("span",null,"请选择"):s.default.createElement("span",null,r)),o+""!="0"&&s.default.createElement("div",{className:"mars-ph-district "+(3===e?"mars-ph-active":""),onClick:e=>this.selectRegionTab(Lo,e)},n+""=="0"?s.default.createElement("span",null,"请选择"):s.default.createElement("span",null,i)),n+""!="0"&&s.default.createElement("div",{className:"mars-ph-shop "+(4===e?"mars-ph-active":""),onClick:e=>this.selectRegionTab(Ro,e)},l+""=="0"?s.default.createElement("span",null,"请选择"):s.default.createElement("span",null,c))))}generateRegions(){const{currentRegionTab:e,provinces:t,provinceID:a,cities:o,cityID:r,districts:n,districtID:i}=this.state,l=1===e&&t&&t.map(((e,t)=>{const o=e.region_id+""==a+""?"region-active":"";return s.default.createElement("li",{key:"province-"+t,onClick:e=>this.selectProvince(e,t),className:o},s.default.createElement("span",null,e.region_name))})),c=2===e&&o&&o.map(((e,t)=>{const a=e.region_id+""==r+""?"region-active":"";return s.default.createElement("li",{key:"city-"+t,onClick:e=>this.selectCity(e,t),className:a},s.default.createElement("span",null,e.region_name))})),d=3===e&&n&&n.map(((e,t)=>{const a=e.region_id+""==i+""?"region-active":"";return s.default.createElement("li",{key:"city-"+t,onClick:e=>this.selectDistrict(e,t),className:a},s.default.createElement("span",null,e.region_name))}));return s.default.createElement("div",{className:"mars-regions"},1===e&&s.default.createElement("ul",{id:"region-selector-list-1",className:"mars-regions-p"},l),2===e&&s.default.createElement("ul",{id:"region-selector-list-2",className:"mars-regions-c"},c),3===e&&s.default.createElement("ul",{id:"region-selector-list-3",className:"mars-regions-d"},d),4===e&&s.default.createElement("ul",{id:"region-selector-list-4",className:"shop-list-wrapper"},s.default.createElement(Do,{list:this.state.shopList,loadMoreShops:this.loadMoreShops,hasMore:this.state.hasMore,onSelectShop:this.onSelectShop,confirmShop:this.confirmShop})))}selectDistrict(e,t){e&&e.stopPropagation();const{districts:a}=this.state,o=a[t];o&&this.onDistrictEdited(o)}onDistrictEdited(e={}){var t=this;const a={districtID:e.region_id,districtName:e.region_name,shopID:"0"};this.page=1,this.setState((e=>a),(async function(){const{provinceID:e,cityID:a,districtID:o}=t.state;let r=setTimeout((function(){Object(ha.c)()}),500);try{const n=await t.loadShops({provinceID:e,cityID:a,districtID:o});clearTimeout(r),Object(ha.a)(),t.page++;const s=!!n.length;t.setState({shopList:n,hasMore:s}),t.selectRegionTab(Ro)}catch(n){Ia(To)}}))}selectCity(e,t){e&&e.stopPropagation();const{cities:a}=this.state,o=a[t];o&&this.onCityEdited(o)}onCityEdited(e={}){if(!this.citiesLoaded)return!1;const t=e.region_id,a=e.region_name;if(t+""=="0")return;const o={cityID:t,cityName:a};this.districtsLoaded=!1,this.onDistrictsLoaded("0",[]).then((()=>{this.setState((e=>o),(e=>{this.loadRegions(Lo,t).then((e=>{const{districtID:t}=this.state;this.onDistrictsLoaded(t,e),this.selectRegionTab(Lo)}))}))}))}onDistrictsLoaded(e,t={}){(t=t.regions||[]).length&&t.unshift({region_id:Mo,region_name:"全部区域"});const a=this.isRegionIDContainInRegions(e,t),o={districts:t||[],districtID:a&&e||"0",districtName:a&&a.region_name||""};return new Promise(((e,t)=>{this.setState((e=>o),(t=>{this.districtsLoaded=!0,e()}))}))}selectProvince(e,t){e&&e.stopPropagation();const{provinces:a}=this.state,o=a[t];o&&this.onProvinceEdited(o)}onProvinceEdited(e={}){if(!this.provincesLoaded)return;const t=e.region_id,a=e.region_name;t+""!="0"&&(this.citiesLoaded=!1,this.districtsLoaded=!1,this.onCitiesLoaded("0",[]).then((()=>{this.onDistrictsLoaded("0",[]).then((()=>{const e={provinceID:t,provinceName:a};this.setState((t=>e),(e=>{this.loadRegions(Ao,t).then((e=>{const{cityID:t}=this.state;this.onCitiesLoaded(t,e),this.selectRegionTab(Ao)}))}))}))})))}onCitiesLoaded(e,t={}){const a=t.self_city_id;t=t.regions||[],this.removeToFirst(t,a);const o=this.isRegionIDContainInRegions(e,t),r={cities:t,cityID:o&&e||0,cityName:o&&o.region_name||""};return new Promise(((e,t)=>{this.setState((e=>r),(t=>{this.citiesLoaded=!0,e()}))}))}async loadRegions(e,t){const{actionType:a}=this.props,o=1===a?"api/osaka/additional/store_install/query_store_regions":"api/turing/mall/query_store_region",r=1===a?{cat_id_3:this.props.goods.catID3,cat_id_4:this.props.goods.catID4,mall_id:this.props.goods.mallID,template_sn_list:Tt()(this.props.goods,"ui.sku_section.car_shop.vas_template_id")||""}:{};try{return await Oa({method:"POST",url:o,data:n()({region_type:e,goods_id:this.props.goods.goodsID,region_id:t},r)})}catch(s){console.error(s)}}isRegionIDContainInRegions(e,t){if(!t)return null;for(let a=0;a<t.length;++a){const o=t[a];if(o.region_id+""==e+"")return o}return null}removeToFirst(e,t){const a=this.isRegionIDContainInRegions(t,e),o=e.indexOf(a);o<0||(e.splice(o,1),e.unshift(a))}onProvincesLoaded(e,t={}){const a=t.self_province_id;t=t.regions||[],this.removeToFirst(t,a);const o=this.isRegionIDContainInRegions(e,t),r={provinces:t,provinceID:e||"0",provinceName:o&&o.region_name||""};return new Promise(((e,t)=>{this.setState((e=>r),(t=>{this.provincesLoaded=!0,e()}))}))}hideRegionSelectorPanel(e,t){e&&e.stopPropagation(),this.setState({panelStyle:{transform:"translateY(100%)"}}),this.props.hideAddressSelector&&this.props.hideAddressSelector(t),this.props.onClose&&this.props.onClose()}selectRegionTab(e,t){t&&t.stopPropagation(),this.setState((t=>({currentRegionTab:e})),(t=>{if(Object(ft.a)(document.getElementById("region-selector-list-"+e)),this.regionSelectorHeader&&this.regionSelectorHeader.current){const t=this.regionSelectorHeader.current;if(t.scrollWidth>t.offsetWidth){const a=t.scrollWidth-t.offsetWidth;t.scrollLeft=e>2?a:0,t.style.transition="all .1s"}}}))}showRegionSelectorPanel(e){e&&e.stopPropagation()&&e.preventDefault(),this.setState({panelStyle:{transform:"translateY(0)"}})}render(){const{panelStyle:e,currentRegionTab:t}=this.state;return s.default.createElement("div",{id:"region-selector",className:"m-addr-region-selector"},s.default.createElement("div",{className:"bg",onClick:e=>this.hideRegionSelectorPanel(e)}),s.default.createElement("div",{id:"region-selector-panel",className:"mars-panel",style:e},s.default.createElement("div",{className:"region-selector-title"},s.default.createElement("div",{className:"back-warp",onClick:e=>this.hideRegionSelectorPanel(e)},s.default.createElement("div",{className:"back-icon"})),s.default.createElement("div",{className:"region-selector-title-txt"},"根据区域选择门店")),this.generateHeader(),this.generateRegions(),4===t&&s.default.createElement("div",{className:"confirm-shop-btn",onClick:this.confirmShop},"确认门店")))}}Bo.defaultProps={};var Fo,zo=Bo;const Ho="根据区域选择门店";let Vo=(Fo=class extends s.Component{constructor(...e){var t;super(...e),t=this,this.state={addressSelected:!1,storeName:Ho,storeAddress:"",showShop:!1,showRegionSelector:!1,nearestTag:"",fee:-1,hasLocAuth:!1,longitude:-1,latitude:-1,locationId:0},this.onClickDeliver=e=>async function(){const{actionType:a,goods:o,updateSelectedSendWays:r}=t.props,{fee:n}=t.state,s=(Tt()(o,"ui.sku_section.car_shop.send_type")||[])[e]||{},{show_shop:i,type:l,store_delivery_id:c}=s,d=1===a&&n>=0?{fee:1===i&&n>=0?n:0,type:l,storeDeliveryId:c}:{type:l,storeDeliveryId:c};if(await r(d),1!==i&&t.setState({showShop:!1}),t.state.showShop||1!==i)return;let u;try{let e=null;if(!t.state.addressInfo){u=setTimeout((function(){Object(ha.c)()}),500);const{longitude:a,latitude:o,hasLocAuth:r,locationId:n}=await Oo();t.setState({longitude:a,latitude:o,hasLocAuth:r,locationId:n}),e=await t.requestMall(a,o,r,n),e&&t.setMallInfo(e)}const o=Tt()(e,"fee")||t.state.fee;1===a&&o>=0&&await r({type:l,storeDeliveryId:c,fee:o})}catch(p){console.error(p)}finally{t.setState({showShop:!0}),clearTimeout(u),Object(ha.a)()}},this.getDeliveryData=()=>{const{addressInfo:e,addressSelected:t}=this.state,a=(Tt()(this.props.goods,"ui.sku_section.car_shop.send_type")||[]).find((e=>e.type===Tt()(this.props.selectedSendWays,"type")));if(a){let o;return 1===a.show_shop?t&&e?(o={shopID:e.shopID,deliveryId:a.store_delivery_id,srvType:e.srvType},o):(Ia("请选择门店"),!1):a.electronic_voucher?{electronicVoucher:a.electronic_voucher}:{deliveryId:a.store_delivery_id}}const o=Tt()(this.props.goods,"ui.sku_section.car_shop.title")||"送货方式";return Ia("请选择"+o),!1}}async requestMall(e,t,a,o){let r="api/turing/mall/query_neighbor_mall_info_v2",s={};const{actionType:i}=this.props;if(1===i){var l,c;let e="WGS84";Object(O.a)().platform===D.a.PddIOS&&(e="BD09"),r="api/osaka/additional/store_install/query_neighbor_store";const t=Tt()(this.props.goods,"ui.sku_section.car_shop.vas_template_id"),{selectedSkuID:a,skuInfos:o}=this.props;s={coord_type:e,cat_id_3:this.props.goods.catID3,cat_id_4:this.props.goods.catID4,template_sn_list:t,mall_id:this.props.goods.mallID,sku_id:Number(a),store_id:null===(l=this.state.addressInfo)||void 0===l?void 0:l.shopID,sku_attribute:a&&(null===(c=o[a])||void 0===c?void 0:c.attribute)||""}}let d=await Oa({method:"POST",url:r,data:n()({goods_id:this.props.goods.goodsID,longitude:e||0,latitude:t||0,has_loc_auth:a||!1,location_id:o},s)});return Tt()(d,"fee")>=0&&(d.fee=+Object(Da.b)(d.fee)),d}setMallInfo(e){if(e.store_id){const t={provinceID:e.province_id,cityID:e.city_id,districtID:e.district_id,shopID:e.store_id,srvType:e.srv_type};this.setState({storeName:e.store_name,storeAddress:e.store_address,addressInfo:t,addressSelected:!0,nearestTag:Tt()(e,"nearest_tag"),fee:Tt()(e,"fee")})}}async componentDidMount(){const e=Object(O.a)().isNativePlatform,t=await Eo();if(e&&t){const{longitude:e,latitude:a,locationId:o}=await Oo(),r=await this.requestMall(e,a,t,o);r&&this.setMallInfo(r)}}async componentDidUpdate(e,t){const{actionType:a,goods:o,updateSelectedSendWays:r,selectedSkuID:n}=this.props;if(this.state.showShop&&1===a&&(n!==(null==e?void 0:e.selectedSkuID)||(null==t?void 0:t.showShop)!==this.state.showShop)){let{hasLocAuth:e,longitude:t,latitude:n,locationId:l}=this.state;const c=Object(O.a)().isNativePlatform;try{var s;if(t<0||n<0||!(null===(s=this.state.addressInfo)||void 0===s?void 0:s.shopID)||e&&0===t&&0===n||c&&!l){const a=await Oo();t=a.longitude,n=a.latitude,e=a.hasLocAuth,l=a.locationId}const i=await this.requestMall(t,n,e,l);i&&this.setMallInfo(i);const d=Tt()(i,"fee")||this.state.fee,u=(Tt()(o,"ui.sku_section.car_shop.send_type")||[]).find((e=>1===e.show_shop))||{},{type:p,store_delivery_id:m}=u;1===a&&d>=0&&await r({type:p,storeDeliveryId:m,fee:d})}catch(i){console.error(i)}}}showRegionSelector(){va(s.default.createElement(zo,{hideAddressSelector:this.hideAddressSelector,addressInfo:this.state.addressInfo,goods:this.props.goods,actionType:this.props.actionType,selectedSkuID:this.props.selectedSkuID,skuInfos:this.props.skuInfos}))}hideAddressSelector(e){const{actionType:t,updateSelectedSendWays:a,selectedSendWays:o}=this.props;if(!e)return;const{shopID:r,shopName:s,shopAddress:i,nearestTag:l,fee:c}=e||{},d=this.state.addressSelected||r;this.setState({storeName:s||this.state.storeName,storeAddress:i||this.state.storeAddress,addressInfo:e||this.state.addressInfo,nearestTag:l,fee:c,addressSelected:d},(()=>{1===t&&c>=0&&a(n()(n()({},o),{},{fee:c}))}))}render(){const{storeName:e,nearestTag:t,fee:a}=this.state,o=Tt()(this.props.goods,"ui.sku_section.car_shop.send_type")||[],r=Tt()(this.props.goods,"ui.sku_section.car_shop.title")||"送货方式",{actionType:n}=this.props;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"sku-deliver-area"},s.default.createElement("div",{className:"sku-deliver-title"},r),s.default.createElement("div",{className:"sku-deliver-content"},(o||[]).map(((e,t)=>{const o=Tt()(this.props.selectedSendWays,"type")===e.type,r=1===Tt()(e,"show_shop")&&a>=0?a:0;return s.default.createElement("div",{key:t,className:dt()("sku-deliver-way",{selected:o}),onClick:this.onClickDeliver(t),index:t},1===n&&a>=0?`${e.type} ¥${r}`:e.type)})))),this.state.showShop&&s.default.createElement("div",{className:"sku-shop-area"},s.default.createElement("div",{className:"title"},Tt()(this.props.goods,"ui.sku_section.car_shop.store_title")),s.default.createElement("div",{className:"content",onClick:this.showRegionSelector},s.default.createElement("div",{className:"sku-shop-info"},s.default.createElement("div",{className:"sku-store"},s.default.createElement("div",{className:"sku-store-name"},e),!!t&&s.default.createElement("span",{className:"sku-nearst-tag"},t)),s.default.createElement("div",{className:"sku-address"},this.state.storeAddress)),s.default.createElement("div",{className:"sku-address-select"},this.state.storeName!==Ho?"修改":"去选择",s.default.createElement("span",{className:"enter"})))))}},ee()(Fo.prototype,"requestMall",[jt.a],Object.getOwnPropertyDescriptor(Fo.prototype,"requestMall"),Fo.prototype),ee()(Fo.prototype,"setMallInfo",[jt.a],Object.getOwnPropertyDescriptor(Fo.prototype,"setMallInfo"),Fo.prototype),ee()(Fo.prototype,"showRegionSelector",[jt.a],Object.getOwnPropertyDescriptor(Fo.prototype,"showRegionSelector"),Fo.prototype),ee()(Fo.prototype,"hideAddressSelector",[jt.a],Object.getOwnPropertyDescriptor(Fo.prototype,"hideAddressSelector"),Fo.prototype),Fo);class Uo extends s.default.Component{get srvItem(){const{selectedSkuID:e,skuInfos:t,goods:a}=this.props;if(!e)return Tt()(a,"ui.sku_section.home_install.srv_item")||[];return(t[e]||{}).srvItem||[]}render(){const{srvItem:e}=this;if(e.length<1)return null;const t=Tt()(this.props.goods,"ui.sku_section.home_install.title")||"服务",a=Tt()(this.props.goods,"ui.sku_section.home_install.tip")||"服务费用根据实际收货地址浮动";return s.default.createElement("div",{className:"sku-on-site-area"},s.default.createElement("div",{className:"sku-on-site-title"},t),s.default.createElement("div",{className:"sku-on-site-content"},(e||[]).map(((e,t)=>{const a=Tt()(this.props.selectedHomeIns,"srv_type")===e.srv_type;return s.default.createElement("div",{key:t,className:dt()("sku-on-site-way",{selected:a}),onClick:()=>{this.props.handleHomeInsClick&&this.props.handleHomeInsClick(a?{}:e)}},e.desc)}))),s.default.createElement("div",{className:"sku-on-site-desc"},a))}}var Wo=a("oobu"),Go=a.n(Wo);var qo=({goods:e,selectedSkuID:t,skuInfos:a})=>{const o=t?Tt()(a,[[t],"bottomTip"])||"":Tt()(e,"ui.sku_section.unselect_bottom_tip")||"";return o?s.default.createElement("div",{className:Go.a.bottomTip},s.default.createElement("img",{className:Go.a.icon,src:"https://promotion.pddpic.com/upload/commodity/2020-10-16/a67c3cb8-5452-4269-bc6b-65c6e94a1002.png.slim.png"}),s.default.createElement("span",{className:Go.a.tip},o)):null},Qo=a("ZL4E"),Yo=a.n(Qo),Jo=a("/jjR");let Xo=e=>{0};Xo=a("g5zU");var Ko=Xo,$o=a("KidB"),Zo=a.n($o);const er={border:void 0,borderColor:void 0,borderWidth:void 0,borderStyle:void 0,borderRadius:void 0};var tr=Object(s.memo)((function(e){let{style:t,size:a,borderColor:o,lazy:r,src:i,processParam:l,SimpleEmageProps:c={}}=e,d=Rt()(e,["style","size","borderColor","lazy","src","processParam","SimpleEmageProps"]);Ko(Zo.a);const u=Object(s.useMemo)((()=>n()(n()(n()({},t),er),{},{width:a,height:a})),[t,a]),p=Object(s.useMemo)((()=>o?{boxShadow:"0 0 0 2px "+o}:{}),[o]),m=n()(n()({},c),{},{src:i,lazy:r,processParam:l});return s.default.createElement("div",w()({},d,{className:dt()(d.className,Zo.a.root,o&&Zo.a.hasBorder),style:u}),s.default.createElement(Jo.a,w()({},m,{className:dt()(Zo.a.image,m.className)})),s.default.createElement("div",{className:Zo.a.border,style:p}))})),ar=a("+j3k"),or=a.n(ar);const rr=Object(s.memo)((function(e){let{srcList:t,size:a,offset:o,AvatarProps:r={}}=e,i=Rt()(e,["srcList","size","offset","AvatarProps"]);Ko(or.a);const l=function(e,t){const a=e.replace(/[\d-.]/g,"");return`-${Number(e.replace(/[^\d-.]/g,""))*t}${a}`}(a,o),c=(t||[]).map(((e,t)=>{const o=0===t?void 0:l,i=-t,c=n()(n()({},r.style),{},{zIndex:i,marginLeft:o}),d=r.borderColor||"#FFFFFF";return s.default.createElement(tr,w()({key:e||t},r,{src:e,size:a,style:c,className:dt()(or.a.avatar,r.className),borderColor:d}))}));return s.default.createElement("div",w()({},i,{className:dt()(i.className,or.a.root)}),c)}));rr.Offset={DEFAULT:.15,CLOSER:.5},rr.defaultProps={offset:rr.Offset.DEFAULT};var nr=rr;var sr=({setSkuStyleStatus:e,styleStatus:t,changeToGroupBuy:a,group:o,goods:r,selectedSkuID:n,skuInfos:i,goodsNumber:l=1,skuDirectOrder:c=!1})=>{if(n&&(Tt()(i,[[n],"skuPreSaleTip"],"")||""))return null;const d=n?Tt()(i,[[n],"normalSavePrice"]):r.unselectNormalSavePrice||"";if(1==+o.requireNum&&+d>0){const o=Tt()(r,"combineGroups.recommendGroup.memberInfoList")||[],n=o.length>0?"拼单购买无需等待":"拼单购买更优惠",i=Tt()(r,"combineGroups.recommendGroup.buttonDesc")||"去拼单",u=(o||[]).map((e=>e.avatar));return s.default.createElement(Ra.a,{trackingInfo:{op:"impr",page_el_sn:4842358,goods_id:r.goodsID}},s.default.createElement("div",{className:dt()(Yo.a.skuGroupBuyContainer,{[Yo.a.startHide]:1===t}),onClick:()=>{Object(M.b)({op:"click",page_el_sn:4842358,goods_id:r.goodsID}),e(1),setTimeout((()=>{a(),e(2)}),200),setTimeout((()=>{c?wa("已切换为拼单"):Ia("已切换为拼单")}),500)}},s.default.createElement("div",{className:Yo.a.skuGroupBuyAvatars},1===u.length&&s.default.createElement(tr,{src:u[0],size:".24rem"}),u.length>1&&s.default.createElement(nr,{srcList:u.slice(0,3),size:".24rem",offset:.5})),s.default.createElement("div",{className:Yo.a.skuGroupBuyHint},n,"，立省",s.default.createElement("span",null,Object(Da.a)(d*l)),"元"),s.default.createElement("div",{className:Yo.a.skuGroupBuyHintBtn,"data-active":"red"},i)))}return null},ir=a("i4d4"),lr=a.n(ir);var cr,dr=({priceInfo:e})=>{const{promotionPriceDesc:t,tipColor:a,tipFontSize:o}=e;return t?s.default.createElement("div",{className:lr.a.skuQuantityTip},s.default.createElement("div",{className:lr.a.skuQuantityTipTxt,style:{color:a,fontSize:o/100+"rem"}},t)):null},ur=(a("LuAP"),a("uorM")),pr=a.n(ur);const mr={free:pr.a.skuSpecValue,selected:dt()(pr.a.skuSpecValue,pr.a.skuSpecValueSelected),disable:dt()(pr.a.skuSpecValue,pr.a.skuSpecValueDisable)},hr=1e5;let fr=(cr=class extends s.default.PureComponent{constructor(e){super(e),this.deliverRef=s.default.createRef(),this.skuIphoneRef=s.default.createRef(),this.getSkuRef=()=>this.skuSelectorBodyRef;const{skuTypeValues:t,typeHashToSkuID:a,currentSelect:o,skuInfos:r}=this.buildSkuData(e.goods.skus);this.state={selectedSkuID:null,goodsNumber:1,skuInfos:r,currentSelect:o,skuTypeValues:t,typeHashToSkuID:a,selectedHomeIns:{},selectedSendWays:{},styleStatus:0}}async componentDidMount(){const e=Object.keys(this.state.skuInfos).filter((e=>this.state.skuInfos[e].quantity>0)),t=1===e.length?e[0]:this.props.goods&&this.props.goods.selectSkuId;if(t)this.selectSkuId({skuId:t});else{var a=!0,o=!1,r=void 0;try{for(var n,s=this.state.skuTypeValues[Symbol.iterator]();!(a=(n=s.next()).done);a=!0){const e=n.value;if(1===e.values.length){const{type:t}=e;await this.selectOneValue(t,e.values[0])}}}catch(i){o=!0,r=i}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}}}buildSkuData(e){const t=[],a={},o={},r={};return e.forEach((e=>{const{specs:n,skuID:s}=e;r[s]=e;const i={};n.forEach((e=>{const{spec_key:a,spec_value:r}=e;i[a]=r;const n=t.filter((e=>e.type===a));if(n&&n[0]){const{values:e}=n[0];!e.includes(r)&&e.push(r)}else o[a]=null,t.push({type:a,values:[r]})})),a[JSON.stringify(i)]=s})),{skuTypeValues:t,typeHashToSkuID:a,currentSelect:o,skuInfos:r}}checkHas(e){const{skus:t}=this.props.goods;var a=!0,o=!1,r=void 0;try{for(var n,s=t[Symbol.iterator]();!(a=(n=s.next()).done);a=!0){const t=n.value;if(t.quantity<=0)continue;const a={},{specs:o}=t;o.forEach((e=>{const{spec_key:t,spec_value:o}=e;a[t]=o}));let r=!0;for(const n in e)e[n]&&a[n]!==e[n]&&(r=!1);if(r)return t.skuID}}catch(i){o=!0,r=i}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return!1}getButtonStatus(e){let t=e||this.state.currentSelect;const{skus:a}=this.props.goods,o={};return a.forEach((e=>{const{specs:a}=e;a.forEach((e=>{const{spec_key:a,spec_value:r}=e,s=n()(n()({},t),{},{[a]:r}),i=this.checkHas(s);o[a]=n()(n()({},o[a]),{},{[r]:i})}))})),o}async selectSkuId({skuId:e,goodsNumber:t=1}){const{typeHashToSkuID:a}=this.state;for(const o in a)if(a[o]===+e){const e=JSON.parse(o);for(const t in e)await this.selectOneValue(t,e[t],!0);+t>0&&this.setState({goodsNumber:t})}}resetSkuId(){const e={};(this.props.goods.skus||[]).forEach((t=>{const{specs:a}=t;a.forEach((t=>{const{spec_key:a}=t;e[a]=null}))})),this.setState({currentSelect:e,selectedSkuID:null})}checkQuantityAsync(e){this.isCheckQuantityAsync||(this.isCheckQuantityAsync=!0,Oa({method:"POST",url:"api/oak/quantity/check",data:{goods_id:this.props.goods.goodsID,sku_id:e,mall_id:this.props.goods.mallID,detail_id:Tt()(this.props.goods,"activity.detailID"),select_quantity:+this.state.goodsNumber,hostname:location.hostname}}).then((t=>{if(t){const{next_quantity:a}=t,o=this.state.skuInfos[e];o.isQualityCheckEnd=0===t.has_quantity,o.defaultQuantity=a,this.setState({skuInfos:this.state.skuInfos,isQualityCheckEnd:`${e}+${o.isQualityCheckEnd}`},this.amendLimitQuantity)}this.isCheckQuantityAsync=!1})).catch((()=>{this.isCheckQuantityAsync=!1})))}getLimitGoodsNumber(){const e=this.state.selectedSkuID;let t=hr;if(e){const a=this.state.skuInfos[e],{quantity:o,staticLimitQuantity:r,defaultQuantity:n}=a;if(this.props.goods.checkQuantity&&n){const o=+r||1;if(a.isQualityCheckEnd)t=Math.min(o,n);else{const{goodsNumber:a}=this.state;o>n&&a>=n&&this.checkQuantityAsync(e),t=Math.min(o,n)}}else t=Math.min(+r,+o)||1}else t=hr;return+t<1&&(t=1),t}amendLimitQuantity(){const e=this.getLimitGoodsNumber(),{goodsNumber:t,selectedSkuID:a}=this.state;if(t>e)if(a&&this.props.goods.checkQuantity){const o=this.state.skuInfos[a],{staticLimitQuantity:r,defaultQuantity:n}=o;(o.isQualityCheckEnd||r<n)&&this.setState({goodsNumber:e},(()=>{Ia(`当前款式最多可拼${e}件`)})),+t>1e3&&1e3==+e&&this.setState({goodsNumber:e})}else this.setState({goodsNumber:e},(()=>{Ia(`当前${a?"款式":"商品"}最多可拼${e}件`)}));else t<1&&this.setState({goodsNumber:1})}handleHomeInsClick(e){this.setState({selectedHomeIns:e})}async selectOneValue(e,t,a){const o=Dt()(this.state.currentSelect);o[e]!==t||a?o[e]=t:o[e]=null;const r=this.state.typeHashToSkuID[JSON.stringify(o)];if(this.props.selectOneValueCb){if(!(await this.props.selectOneValueCb({selectedSkuID:r,type:e,value:t,force:a})))return!1}return this.setState({currentSelect:o,selectedSkuID:r,selectedHomeIns:{}},(()=>{this.amendLimitQuantity()})),!0}fixInputBug(){const e=Object(O.a)();e.system===D.b.IOS&&Object(D.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}setCustomState(e){this.setState(e)}show(e){const{goods:t}=this.props,{preventAutoConfirm:a}=e;if(1===t.skus.length&&!Tt()(t,"skus[0].specs.length")){const e=t.skus[0].skuID;if(this.setState({selectedSkuID:e,selectedHomeIns:{}},(()=>{a||(Ea.hide(),this.confirmSku())})),!a)return}if(Tt()(e,"skuID")){const{goodsNumber:t}=e;this.setState({goodsNumber:Number(t)||1},(()=>{this.selectSkuId({skuId:e.skuID,goodsNumber:Number(t)||1})}))}}setScroll(){Object(ft.a)(this.skuSelectorBodyRef)}goodsNumberBlur(){this.fixInputBug(),this.setState({goodsNumber:Number(this.state.goodsNumber)||1},this.amendLimitQuantity)}goodsNumberChange(e){const t=parseInt(e.target.value,10)||0;this.setState({goodsNumber:t},this.amendLimitQuantity)}updateGoodsNumber(e){const t=parseInt(this.state.goodsNumber,10)||0;this.setState({goodsNumber:t+e})}reduceGoodsNumber(e){e&&e.stopPropagation(),this.isEnableReduce()&&this.updateGoodsNumber(-1)}increaseGoodsNumber(e){if(e&&e.stopPropagation(),this.isEnableIncrease())this.updateGoodsNumber(1);else{const e=this.getLimitGoodsNumber(),{selectedSkuID:t}=this.state;Ia(`当前${t?"款式":"商品"}最多可拼${e}件`)}}async confirmSku(e){e&&e.stopPropagation();const{selectedSkuID:t}=this.state;if(!t)return void Ia(this.priceAreaRef.getSpecDesc());if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===aa){if(!(+Tt()(this.state.selectedHomeIns,"srv_type")>=0))return void Ia("请选择服务")}let a,o;if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ta&&this.deliverRef.current&&(a=this.deliverRef.current.getDeliveryData(),!a))return;if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ea&&this.skuIphoneRef.current){o=this.skuIphoneRef.current.getState()||{};const{mobileID:e,cityID:t}=o;if(!t||!e)return void Ia("请先选择入网信息")}const{confirmSkuCallBack:r}=this.props;r&&r({selectedSkuID:t,goodsNumber:this.state.goodsNumber,skuInfo:this.state.skuInfos[t],skuInfos:this.state.skuInfos,iphoneInfo:o,deliveryData:a,homeInsData:this.state.selectedHomeIns,state:this.state,props:this.props})}isEnableIncrease(){const e=+this.getLimitGoodsNumber(),{selectedSkuID:t,goodsNumber:a}=this.state;if(t&&this.props.goods.checkQuantity){const o=this.state.skuInfos[t],{staticLimitQuantity:r,defaultQuantity:n}=o;if(+a>1e3)return!o.isQualityCheckEnd;if(o.isQualityCheckEnd)return a<e;const s=Math.min(r,n);return!(s<=a&&s===r)}return a<e}isEnableReduce(){return!(this.state.goodsNumber<=1)}renderSkusElement(){const e=this.getButtonStatus(),t={};(Object.keys(this.state.currentSelect)||[]).forEach((e=>{t[e]=null}));const a=this.getButtonStatus(t),o=this.props.goods.skus.find((e=>e.hotSale))||{},r=((null==o?void 0:o.specs)||[]).map((e=>e.spec_value));let n=-1;const i=this.state.skuTypeValues.map(((t,o)=>{const{type:i,values:l}=t,c=(Object.values(a[i])||[]).reduce(((e,t)=>e+(t?1:0)),0),d=l.map(((t,a)=>{let l=mr.disable,d=()=>{};e[i]&&e[i][t]&&(l=mr.free,d=()=>this.selectOneValue(i,t)),this.state.currentSelect[i]===t&&(l=mr.selected);let u=t;if(1===this.state.skuTypeValues.length){const e=JSON.stringify({[i]:t}),a=this.state.typeHashToSkuID[e],{groupSkuUnitPrice:o,normalSkuUnitPrice:r}=this.state.skuInfos[a],n=+this.props.group.requireNum>1?o:r;n&&(u=`${t}｜${n}`)}return n<0&&c>1&&t===r[o]&&(n=o),s.default.createElement("div",{key:a,className:l,onClick:d},n===o&&t===r[o]&&s.default.createElement("div",{className:dt()(pr.a.hotSale,pr.a.hotSaleIcon)}),u)}));let u=null;const p=Tt()(this.props.goods,"ui.sku_section.size_chart"),m=+Tt()(this.props.goods,"ui.sku_section.size_chart_entry_type");if(1===o&&p){const e={page_el_sn:"648235",op:"impr",goods_id:this.props.goods.goodsID};u=s.default.createElement(Ra.a,{trackingInfo:e},s.default.createElement("span",{className:2===m?pr.a.skuSizeChartRed:"sku-size-chart",onClick:()=>{Object(La.a)(p),Object(M.b)({page_el_sn:"648235",op:"click",goods_id:this.props.goods.goodsID})}},2===m?"尺码详情":"详情"))}const h=Tt()(this.props.goods,"ui.sku_section.size_refer_fit_desc");let f=null;return 1===o&&h&&(f=s.default.createElement("span",{className:pr.a.sizeDesc},h)),s.default.createElement("div",{className:pr.a.skuSpecs,key:o},s.default.createElement("span",{className:"sku-specs-key"},i,f,u),s.default.createElement("div",{className:pr.a.skuSpecValueList},d))}));if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ea){const{selectedSkuID:e}=this.state;return s.default.createElement(s.default.Fragment,null,i,s.default.createElement(yo,{ref:this.skuIphoneRef,selectedSkuID:e,goodsID:this.props.goods.goodsID,toastSpec:()=>{Ia(this.priceAreaRef.getSpecDesc())},getSkuRef:this.getSkuRef}))}if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ta){const e=+Tt()(this.props.goods,"ui.sku_section.car_shop.action_type");return s.default.createElement(s.default.Fragment,null,i,s.default.createElement(Vo,{ref:this.deliverRef,goods:this.props.goods,updateSelectedSendWays:e=>{this.setState({selectedSendWays:e})},selectedSendWays:this.state.selectedSendWays,actionType:e,selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos}))}const{activity:l}=this.props.goods;if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===aa&&(!l||25!==l.activityType)){const{selectedSkuID:e,skuInfos:t}=this.state;return s.default.createElement(s.default.Fragment,null,i,s.default.createElement(Uo,{selectedSkuID:e,skuInfos:t,selectedHomeIns:this.state.selectedHomeIns,ref:this.homeRef,goods:this.props.goods,handleHomeInsClick:this.handleHomeInsClick}))}return i}renderGoodsNumberElement(){const e=this.isEnableIncrease(),t=this.isEnableReduce(),a=(this.state.goodsNumber||0).toString().length,o=a>3?36+9*(a-3):36;return s.default.createElement("div",{className:pr.a.selectorNumber},s.default.createElement("span",null,"数量"),s.default.createElement("div",{className:pr.a.numberStepper},s.default.createElement("div",{className:dt()(pr.a.skuSelectorReduce,{[pr.a.skuSelectorReduceEnable]:t,[pr.a.skuSelectorReduceDisable]:!t}),onClick:this.reduceGoodsNumber}),s.default.createElement("input",{className:pr.a.skuSelectorInput,type:"number",maxLength:"5",value:this.state.goodsNumber+"",onBlur:this.goodsNumberBlur,onChange:this.goodsNumberChange,style:{width:o/100+"rem"}}),s.default.createElement("div",{className:dt()(pr.a.skuSelectorIncrease,{[pr.a.skuSelectorIncreaseEnable]:e,[pr.a.skuSelectorIncreaseDisable]:!e}),onClick:this.increaseGoodsNumber})))}getViewImgList(e){const t=(Object.values(this.state.skuInfos)||[]).filter((e=>e.quantity>0));t.sort(((e,t)=>Tt()(e,"previewPriority")-Tt()(t,"previewPriority")));const a=t.map((e=>e.thumbUrl));return a.unshift(e),a}setSkuStyleStatus(e){this.setState({styleStatus:e})}getSkuButtonText(){const{goods:e,group:t,buttonText:a}=this.props,{skuInfos:o,selectedSkuID:r}=this.state;return+((r?o[r].normalSavePrice:e.unselectNormalSavePrice)||"")>0&&1==+t.requireNum?"单独购买":a||"确定"}render(){var e=this;const{goods:t,group:a,usePddNativePhoto:o,changeToGroupBuy:r,hideSkuBottomTip:n,consultPromotionPriceParams:i}=this.props,{skuInfos:l,selectedSkuID:c,currentSelect:d,styleStatus:u,goodsNumber:p}=this.state;let m=t.hdThumbUrl||t.thumbUrl;const h=this.getViewImgList(m);if(c)m=this.state.skuInfos[c].thumbUrl;else{if(Object.keys(d).some((e=>d[e]))){const e=this.checkHas(d);e&&(m=this.state.skuInfos[e].thumbUrl)}}return s.default.createElement("div",{className:pr.a.skuSelectorContainer},s.default.createElement("div",{className:pr.a.skuSelectorHead},s.default.createElement(so,{ref:e=>{this.priceAreaRef=e},goods:t,group:a,selectedSkuID:c,currentSelect:d,skuInfos:this.state.skuInfos,selectedHomeIns:this.state.selectedHomeIns,selectedSendWays:this.state.selectedSendWays,goodsNumber:this.state.goodsNumber,styleStatus:u,consultPromotionPriceParams:i,renderPromotionDescContent:e=>s.default.createElement(dr,{priceInfo:e})}),s.default.createElement(lo,{usePddNativePhoto:o,group:a,src:m,goods:t,imgList:h,skuInfos:l,selectedSkuID:c,selectSkuId:this.selectSkuId,resetSkuId:this.resetSkuId,goodsNumber:this.state.goodsNumber}),s.default.createElement("div",{className:pr.a.skuSelectorCloseBtn,onClick:async function(){e.props.onClose&&e.props.onClose()}})),this.props.renderSkuBlackCard&&this.props.renderSkuBlackCard({skuSelector:this.state}),s.default.createElement("div",{ref:e=>{this.skuSelectorBodyRef=e},className:pr.a.skuSelectorBody},this.renderSkusElement(),this.renderGoodsNumberElement(),s.default.createElement("div",{className:pr.a.safeDistance})),this.props.renderFooter&&this.props.renderFooter({selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos,goodsNumber:this.state.goodsNumber}),s.default.createElement(Ya,null,s.default.createElement(qo,{goods:this.props.goods,selectedSkuID:c,skuInfos:l})),s.default.createElement(Ya,null,s.default.createElement(Ka,{selectedSkuID:c,skuInfos:l})),!n&&s.default.createElement(Ya,null,s.default.createElement(sr,{changeToGroupBuy:r,setSkuStyleStatus:this.setSkuStyleStatus,styleStatus:u,group:a,goods:t,selectedSkuID:c,skuInfos:l,goodsNumber:p})),s.default.createElement("div",{"data-active":"red",className:dt()(pr.a.skuSelectorBottom,{[pr.a.startHide]:1===u,[pr.a.startDisplay]:2===u}),onClick:this.confirmSku},this.getSkuButtonText()))}},ee()(cr.prototype,"buildSkuData",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"buildSkuData"),cr.prototype),ee()(cr.prototype,"checkHas",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"checkHas"),cr.prototype),ee()(cr.prototype,"getButtonStatus",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"getButtonStatus"),cr.prototype),ee()(cr.prototype,"selectSkuId",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"selectSkuId"),cr.prototype),ee()(cr.prototype,"resetSkuId",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"resetSkuId"),cr.prototype),ee()(cr.prototype,"checkQuantityAsync",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"checkQuantityAsync"),cr.prototype),ee()(cr.prototype,"getLimitGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"getLimitGoodsNumber"),cr.prototype),ee()(cr.prototype,"amendLimitQuantity",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"amendLimitQuantity"),cr.prototype),ee()(cr.prototype,"handleHomeInsClick",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"handleHomeInsClick"),cr.prototype),ee()(cr.prototype,"selectOneValue",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"selectOneValue"),cr.prototype),ee()(cr.prototype,"setCustomState",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"setCustomState"),cr.prototype),ee()(cr.prototype,"show",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"show"),cr.prototype),ee()(cr.prototype,"setScroll",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"setScroll"),cr.prototype),ee()(cr.prototype,"goodsNumberBlur",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"goodsNumberBlur"),cr.prototype),ee()(cr.prototype,"goodsNumberChange",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"goodsNumberChange"),cr.prototype),ee()(cr.prototype,"updateGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"updateGoodsNumber"),cr.prototype),ee()(cr.prototype,"reduceGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"reduceGoodsNumber"),cr.prototype),ee()(cr.prototype,"increaseGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"increaseGoodsNumber"),cr.prototype),ee()(cr.prototype,"confirmSku",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"confirmSku"),cr.prototype),ee()(cr.prototype,"isEnableIncrease",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"isEnableIncrease"),cr.prototype),ee()(cr.prototype,"isEnableReduce",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"isEnableReduce"),cr.prototype),ee()(cr.prototype,"getViewImgList",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"getViewImgList"),cr.prototype),ee()(cr.prototype,"setSkuStyleStatus",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"setSkuStyleStatus"),cr.prototype),ee()(cr.prototype,"getSkuButtonText",[jt.a],Object.getOwnPropertyDescriptor(cr.prototype,"getSkuButtonText"),cr.prototype),cr);var gr=a("rx36");let _r,yr=!1;const br=[],vr=async()=>{_r||await(async e=>{if(yr)return new Promise((e=>{br.push(e)}));if(yr=!0,!e)try{e=ka(await Oa({method:Na.GET,url:"api/server/_stm"})).serverTime||+Date.now()}catch(a){e=+Date.now()}const t={serverTime:e};_r=new gr.default(t),br.forEach((e=>e())),yr=!1})();return _r.messagePack()},kr=async(e,t)=>{const a=e.filter((e=>!!e)),o=a.length;if(o>0){if(1===o)return void(await(e=>new Promise((async t=>{const a=Object(m.g)(window.location.href);setTimeout(t,300),Oa({method:Na.POST,url:"api/promotion/auto_take_merchant_coupon",data:n()({anti_content:await vr(),merchant_tag:4003,page_from:+a.page_from||0},e),defaultErrorHandler:()=>{}},{isAuth:!0}).then(t).catch((()=>{}))})))(n()({batch_sn:a[0]},t)));o>1&&await(e=>new Promise((async t=>{const a=Object(m.g)(window.location.href);setTimeout(t,300),Oa({method:Na.POST,url:"api/promotion/batch_auto_take_merchant_coupon",data:n()({anti_content:await vr(),merchant_tag:4003,page_from:+a.page_from||0},e),defaultErrorHandler:()=>{}},{isAuth:!0}).then(t).catch((()=>{}))})))(n()({batch_sn_list:a},t))}};var Ir;let wr=(Ir=class extends s.default.Component{constructor(e){var t;super(e),t=this,this.normalSkuRef=s.default.createRef(),this.skuBgRef=s.default.createRef(),this.isShow=!1,this.initRecoverSkuInfo=0,this.onCloseNormalSku=async function(){t.hide();const e=Tt()(t.props,"goods.goodsID")||Tt()(t.state,"goods.goodsID")||0;Object(M.b)({page_element:"close_btn",goods_id:e,page_el_sn:98835,op:"click"})},this.confirmSkuCallBack=e=>{const a=Tt()(this.props,"goods.goodsID")||Tt()(this.state,"goods.goodsID")||0;Ca({page_element:"confirm_btn",goods_id:a,page_el_sn:98834,op:"click"},(async function(){const{autoTakeCouponParams:a}=t.props;!e.skuDirectOrder&&a&&await t.takeCouponBeforeForward(e),t.props.confirmOrder&&t.props.confirmOrder(e)}))},this.state={isFetch:!1,goods:null}}async loadGoods(){try{const{params:e,responseProcessor:t}=this.props,a=await Ta(e,t,this.props.apiUrl);return new Promise((e=>{a?this.setState({goods:Tt()(a,"goodsInfo"),isFetch:!0},(()=>{e(!0)})):this.setState({isFetch:!0},(()=>{e(!1)}))}))}catch(e){this.props.loadGoodsFail&&this.props.loadGoodsFail(e)}}checkDefaultSkuInfo(e,t=1){if(this.initRecoverSkuInfo>=1||!e)return!1;this.initRecoverSkuInfo+=1;const a=this.props.goods||this.state.goods;return!!Tt()(a,"skus").find((a=>a.skuId===e&&a.quantity>=t&&a.isOnsale))}recoverSkuInfo(e,t=1){this.selectSkuId({skuId:e,goodsNumber:t})}async show(e){if(this.props.isRemote&&!this.state.isFetch){if(!(await this.loadGoods()))return!1}e&&"function"==typeof e.setStateCallback&&this.normalSkuRef.current.skuRef.current.setCustomState(e.setStateCallback);const{needShow:t}=this.normalSkuRef.current.prepare(e);if(t){if(this.isShow)return;const{defaultSkuId:e,defaultGoodsNumber:t}=this.props;this.checkDefaultSkuInfo(e,t)&&this.recoverSkuInfo(e,t),this.skuBgRef.current.style.display="block",setTimeout((()=>{this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",this.normalSkuRef.current.enter(),_a(),setTimeout((()=>{this.isShow=!0}),200)}),1)}return!0}async hide(){this.isShow&&(ba(),this.props.onHide&&await this.props.onHide(),this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",this.normalSkuRef.current.exit(),setTimeout((()=>{this.isShow=!1,this.skuBgRef.current.style.display="none"}),+this.props.delay||200))}getSelectedSkuID(){return this.getSelectedSkuId()}getSelectedSkuId(){return this.normalSkuRef.current.skuRef.current.state.selectedSkuID}getGoodsNumber(){return this.normalSkuRef.current.skuRef.current.state.goodsNumber||1}selectSkuID(e){return this.selectSkuId({skuId:e})}selectSkuId({skuId:e,goodsNumber:t=1}){return this.normalSkuRef.current.skuRef.current.selectSkuId({skuId:e,goodsNumber:t})}setGoodsNumber(e){return this.normalSkuRef.current.skuRef.current.setGoodsNumber(e)}async takeCouponBeforeForward(e){try{const{isSingleBuy:t,autoTakeCouponParams:a}=this.props;if(t)return;const o=this.props.goods||this.state.goods,{selectedSkuID:r,goodsNumber:n=1,skuInfo:s}=e,i=Tt()($a,[`${n}-${r}`,"batchSn"])||"",l=Tt()($a,[`${n}-${r}`,"platformBatchSn"])||"",c=(null==s?void 0:s.batchSn)||"",d=(null==s?void 0:s.platformBatchSn)||"",u=Tt()(o,"ui.sku_section.sku_take_coupon");if(i||l){const e=[];return i&&e.push(i),l&&e.push(l),void(await kr(e,a))}if(1===u&&(c||d)){const e=[];c&&e.push(c),d&&e.push(d),await kr(e,a)}}catch(t){console.error(t)}}render(){var e=this;if(this.props.isRemote&&!this.state.goods)return null;let{goods:t}=this.props;this.props.isRemote&&(t=this.state.goods);const{isSingleBuy:a,renderSkuBlackCard:o,usePddNativePhoto:r}=this.props;let n=t.groupTypes[1];return a&&(n=t.groupTypes[0]),s.default.createElement("div",{ref:this.skuBgRef,className:dt()(Aa.a.skuSelectorBg,"sku-plus1"),onClick:async function(){e.hide()}},s.default.createElement(na,{changeToGroupBuy:this.props.changeToGroupBuy,ref:this.normalSkuRef,goods:t,group:n,onClose:this.onCloseNormalSku,renderSkuBlackCard:o,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,usePddNativePhoto:r},s.default.createElement(fr,null)))}},ee()(Ir.prototype,"checkDefaultSkuInfo",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"checkDefaultSkuInfo"),Ir.prototype),ee()(Ir.prototype,"recoverSkuInfo",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"recoverSkuInfo"),Ir.prototype),ee()(Ir.prototype,"show",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"show"),Ir.prototype),ee()(Ir.prototype,"hide",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"hide"),Ir.prototype),ee()(Ir.prototype,"getSelectedSkuID",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"getSelectedSkuID"),Ir.prototype),ee()(Ir.prototype,"getSelectedSkuId",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"getSelectedSkuId"),Ir.prototype),ee()(Ir.prototype,"getGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"getGoodsNumber"),Ir.prototype),ee()(Ir.prototype,"selectSkuID",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"selectSkuID"),Ir.prototype),ee()(Ir.prototype,"selectSkuId",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"selectSkuId"),Ir.prototype),ee()(Ir.prototype,"setGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"setGoodsNumber"),Ir.prototype),ee()(Ir.prototype,"takeCouponBeforeForward",[jt.a],Object.getOwnPropertyDescriptor(Ir.prototype,"takeCouponBeforeForward"),Ir.prototype),Ir);var Sr=a("g5zU"),Er=a.n(Sr),Cr=a("LzYn"),Pr=a.n(Cr);const Nr={WEIXIN:"WEIXIN",ALIPAY:"ALIPAY",QQ:"QQ",WEIXIN_FRIEND:"WEIXIN_FRIEND",LIANLIANPAY:"LIANLIANPAY",UNIONPAY:"UNIONPAY",DUODUOPAY_ACS:"DUODUOPAY_ACS",HBFQ_ALI_PAY:"HBFQ_ALI_PAY",HB_ALI_PAY:"HB_ALI_PAY",DUODUOPAY:"DUODUOPAY",WEIXIN_CREDIT:"WEIXIN_CREDIT",CREDIT_CARD:"DUODUOPAY_INSTAL"},Or=new Set([Nr.WEIXIN,Nr.WEIXIN_FRIEND,Nr.ALIPAY,Nr.QQ,Nr.DUODUOPAY,Nr.HBFQ_ALI_PAY,Nr.HB_ALI_PAY,Nr.LIANLIANPAY,Nr.DUODUOPAY_ACS,Nr.WEIXIN_CREDIT,Nr.UNIONPAY,Nr.CREDIT_CARD]),Dr=0;var xr=a("E+oP"),Tr=a.n(xr);var jr={AliPay:1,WeChat:2,QQPay:3,ApplePay:4,AliPayDirectDebit:5,FriendPay:6,HBInstallmentPay:7,AliPayV2:8,UnionPay:9,DuoDuoPay:10,HBPay:11,XianYongHouFu:12,DuoDuoPayACS:13,CreditCardInstallmentPay:14},Ar=a("OUj1"),Lr=a.n(Ar);function Rr({installmentNum:e,serviceAmountContent:t,payAmountPerInstallment:a,onClick:o}){return s.default.createElement("div",{className:Lr.a.installment,onClick:o},s.default.createElement("div",{className:Lr.a.number},`${e}期 ${t}`),s.default.createElement("div",{className:Lr.a.money},`¥ ${a}/期`))}function Mr({installmentNum:e,serviceAmountContent:t,payAmountPerInstallment:a,onClick:o}){return s.default.createElement("div",{className:Lr.a.selectedInstallment,onClick:o},s.default.createElement("div",{className:Lr.a.selectedNumber},`${e}期 ${t}`),s.default.createElement("div",{className:Lr.a.selectedMoney},`¥ ${a}/期`))}function Br({installmentNum:e,serviceAmountContent:t,payAmountPerInstallment:a,onClick:o}){return s.default.createElement(Rr,{installmentNum:e,serviceAmountContent:t,payAmountPerInstallment:a,onClick:o})}function Fr({installmentNum:e,serviceAmountContent:t,payAmountPerInstallment:a,onClick:o}){return s.default.createElement("div",{className:Lr.a.installment,onClick:o},s.default.createElement("div",{className:Lr.a.disableNumber},`${e}期 ${t}`),s.default.createElement("div",{className:Lr.a.disableMoney},`¥ ${a}/期`))}function zr(e){Er()(Lr.a);const{termIndex:t,selectInstallmentTerm:a,installmentNum:o,serviceAmountContent:r,payAmountPerInstallment:n,selected:i,isChannelSelected:l,isDisable:c}=e,d=e=>{e.stopPropagation(),c?Object(kt.a)("分期信息已选择，如需修改可重新下单"):a&&a(t)};return c?s.default.createElement(Fr,{installmentNum:o,serviceAmountContent:r,payAmountPerInstallment:n,onClick:d}):i?l?s.default.createElement(Mr,{installmentNum:o,serviceAmountContent:r,payAmountPerInstallment:n,onClick:d}):s.default.createElement(Br,{installmentNum:o,serviceAmountContent:r,payAmountPerInstallment:n,onClick:d}):s.default.createElement(Rr,{installmentNum:o,serviceAmountContent:r,payAmountPerInstallment:n,onClick:d})}var Hr=a("79DA"),Vr=a.n(Hr);function Ur({installmentList:e,selectedTermIndex:t,lockInstallmentTerm:a,selectInstallmentTerm:o,selected:r,isElderMode:n}){Er()(Vr.a);const i=a?t:-1;let l=null;return l=n?(null==e?void 0:e.length)>2?Vr.a.hbInstallmentList4Elder:Vr.a.hbInstallmentList2Elder:Vr.a.hbInstallmentList,s.default.createElement("div",{className:l},e.map(((e,n)=>s.default.createElement("div",{className:Vr.a.installmentContainer,key:e.term},s.default.createElement(zr,{termIndex:n,isDisable:i!==n&&a,installmentNum:e.term,serviceAmountContent:e.commissionType===Dr?"含手续费":"0手续费",payAmountPerInstallment:Object(Da.b)(e.termPrice),selectInstallmentTerm:o,paymentType:jr.HBInstallmentPay,selected:t===n,isChannelSelected:r})))))}var Wr=a("iYsC"),Gr=a.n(Wr);function qr({creditCardVo:e,orderAmount:t,changeBindId:a,selectInstallmentTerm:o,selectedTermIndex:r,isChannelSelected:n,lockTerm:i,isElderMode:l}){Er()(Gr.a);const{recommendCardVo:c={},extra:d={}}=e,{creditInstallments:u=[],virtualCard:p,virtualCardTitle:m,bankShort:h,icon:f,cardEnc:g,bindId:_}=c;async function y(){if(o(void 0,{expandAfterSelection:!0}),i)Object(kt.a)("分期信息已选择，如需修改可重新下单");else{p?Object(M.b)({page_el_sn:5882150}):Object(M.b)({page_el_sn:5882151});try{var e;const o=await Object(ae.g)("JSDuoduoWallet","selectCreditCard",{amount:t,selected_bind_id:_,extra:d}),r=null==o||null===(e=o.selected_card)||void 0===e?void 0:e.bind_id,n=1==+o.result_type;r&&r!==_&&a&&a({selectedBindId:_,newBindId:r,isNewlyAdded:n})}catch(r){}}}Object(s.useEffect)((()=>{p?Object(M.c)({page_el_sn:5882150}):Object(M.c)({page_el_sn:5882151})}),[p]);let b=null;b=l?u.length>4?Gr.a.installment6ContainerElder:u.length>2?Gr.a.installment4ContainerElder:Gr.a.installment2ContainerElder:u.length>3?Gr.a.installment6Container:Gr.a.installment3Container;let v=null;return v=l?u.length>4?Gr.a.installment6Elder:u.length>2?Gr.a.installment4Elder:Gr.a.installment2Elder:u.length>3?Gr.a.installments6:Gr.a.installments3,s.default.createElement("div",{className:b},!!p&&s.default.createElement("div",{className:Gr.a.mask,onClick:y}),!!p&&s.default.createElement("div",{className:Gr.a.title,onClick:y},m,s.default.createElement("div",{className:Gr.a.action},"添加"),s.default.createElement(Wa.a,{className:Gr.a.actionBtn,src:"https://funimg.pddpic.com/transaction/a04ef1f3-565b-4b8e-9caf-be6e606972b0.png.slim.png"})),!p&&s.default.createElement("div",{className:Gr.a.title,onClick:y},s.default.createElement(Wa.a,{className:Gr.a.bankIcon,src:f}),`${h} (${g})`,s.default.createElement("div",{className:Gr.a.action},"更换"),s.default.createElement(Wa.a,{className:Gr.a.actionBtn,src:"https://funimg.pddpic.com/transaction/a04ef1f3-565b-4b8e-9caf-be6e606972b0.png.slim.png"})),s.default.createElement("div",{className:v},u.map(((e,t)=>s.default.createElement("div",{className:Gr.a.installmentContainer,key:e.installmentNum},s.default.createElement(zr,{termIndex:t,isDisable:r!==t&&i,installmentNum:e.installmentNum,serviceAmountContent:e.serviceAmountContent,payAmountPerInstallment:e.payAmountPerInstallment,selectInstallmentTerm:p?y:o,selected:!p&&r===t,isChannelSelected:n}))))))}var Qr=a("5Pt6"),Yr=a.n(Qr);const Jr=s.default.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064"},s.default.createElement("path",{d:"M361.396862 939.865243L0 578.298315l123.274648-123.274648 231.140111 231.31135 539.668623-602.20026 129.915445 116.379336-662.601965 739.35115z","p-id":"4065"})),Xr=(e,t)=>parseInt(e,10)||t,Kr=(e,t)=>(e||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?e:t,$r="#58595b";function Zr({installmentList:e=[],lockInstallmentTerm:t,lockCreditCardTerm:a,selectPayMethod:o,channel:r,customStyle:n={},orderAmount:i,changeBindId:l,isElderMode:c}){var d;Er()(Yr.a);const{disabled:u,selected:p,neverBeenSelected:m,hint:h,hintIcon:f,hintStyle:g,preHint:_,preHintIcon:y,preHintStyle:b,channelName:v,name:k,icon:I,termIndex:w,creditCardTermIndex:S,expanding:E,creditCardVo:C,payIconContent:P}=r,N=v===Nr.HBFQ_ALI_PAY&&(!u&&p||!!E),O=v===Nr.CREDIT_CARD&&(C&&!u&&p||E),D=e.findIndex((e=>e.defaultSelected)),x=D>=0?D:0;let T=((null==C||null===(d=C.recommendCardVo)||void 0===d?void 0:d.creditInstallments)||[]).findIndex((e=>!!e.selected));T<0&&(T=0);const j=dt()(Yr.a.padding,{[Yr.a.disable]:u}),A=dt()(Yr.a.item,{[Yr.a.itemDisable]:u,[Yr.a.installmentFlag]:[Nr.HBFQ_ALI_PAY,Nr.CREDIT_CARD].includes(v),[Yr.a.itemInstallment]:!!N}),{selectedIconPadding:L}=n,R=s.default.createElement(s.default.Fragment,null,!I&&s.default.createElement("span",{className:""+Yr.a["p"+v]}),I&&s.default.createElement("span",{style:{backgroundImage:`url(${I})`},className:Yr.a.pfuji})),M=s.default.createElement("span",{className:Yr.a.method},k),B=g?{fontSize:c?"0.16rem":Xr(g.fontSize,13)/100+"rem",color:Kr(g.fontColor,$r)}:{},F=b?{fontSize:c?"0.16rem":Xr(b.fontSize,13)/100+"rem",color:Kr(b.fontColor,$r)}:{},z=()=>u?null:_&&m?s.default.createElement("span",{className:Yr.a.hints},y?s.default.createElement("span",{className:Yr.a.icon},s.default.createElement("img",{src:y})):null,s.default.createElement("span",{style:F},_),s.default.createElement("span",{className:Yr.a.space})):Tr()(P)?h?s.default.createElement("span",{className:Yr.a.hints},f?s.default.createElement("span",{className:Yr.a.icon},s.default.createElement("img",{src:f})):null,s.default.createElement("span",{style:B},h),s.default.createElement("span",{className:Yr.a.space})):null:function(e,t=!1){return(e||[]).map(((e,a)=>{const o=t?.16:Xr(e.css_vo.font_size,13)/100;return"text"===e.type?s.default.createElement("span",{key:"item_"+a,style:{fontSize:o+"rem",color:Kr(e.css_vo.font_color,$r)}},e.content):"icon"===e.type?s.default.createElement(Wa.a,{src:e.icon_url,className:Yr.a.richTextImg,key:"item_"+a,style:{height:+Tt()(e,"css_vo",{icon_height:17}).icon_height/100+"rem",width:+Tt()(e,"css_vo",{icon_width:17}).icon_width/100+"rem"}}):null}))}(P,c);if(r.channelName===Nr.CREDIT_CARD){let e=S;return(null==e||e<0)&&(e=T),s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:j,"data-active":"before-white",style:n},s.default.createElement("div",{className:A,onClick:()=>{if(p)return;r.creditCardTermIndex=null==S?T:S>=0?S:T;o&&o(r,{expandAfterSelection:!E})}},p&&!u&&s.default.createElement("div",{className:Yr.a.selectedSvg,style:{marginRight:L}},Jr),u&&s.default.createElement("div",{className:Yr.a.itemDisableText,style:{marginRight:L}},"该支付方式当前服务不可用"),s.default.createElement("div",{className:Yr.a.text},R,M,z()))),C&&O&&s.default.createElement(qr,{creditCardVo:C,selectInstallmentTerm:(e,t)=>{e>=0&&(r.creditCardTermIndex=e),o&&o(r,t)},selectedTermIndex:e,isChannelSelected:p,changeBindId:l,orderAmount:i,lockTerm:a,isElderMode:c}))}if(r.channelName===Nr.HBFQ_ALI_PAY){const a=dt()(Yr.a.padding,{[Yr.a.disable]:u,[Yr.a.paddingInstallment]:!c&&N,[Yr.a.paddingInstallment4Elder]:c&&N&&(null==e?void 0:e.length)>2,[Yr.a.paddingInstallment2Elder]:c&&N&&(null==e?void 0:e.length)<=2});return s.default.createElement("div",{className:a,style:n},s.default.createElement("div",{className:Yr.a.hbMask,"data-active":"before-white"},s.default.createElement("div",{className:A,onClick:()=>{if(p)return;const e={};r.channelName===Nr.HBFQ_ALI_PAY&&(r.termIndex=0===w?w:w||x,e.expandAfterSelection=!E),o&&o(r,e)}},p&&!u&&s.default.createElement("div",{className:Yr.a.selectedSvg,style:{marginRight:L}},Jr),u&&s.default.createElement("div",{className:Yr.a.itemDisableText,style:{marginRight:L}},"该支付方式当前服务不可用"),s.default.createElement("div",{className:Yr.a.text},R,M,z()))),v===Nr.HBFQ_ALI_PAY&&N&&s.default.createElement(Ur,{lockInstallmentTerm:t,selectedTermIndex:0===w?w:w||x,installmentList:e,selected:p,selectInstallmentTerm:e=>{r.termIndex=e,o&&o(r)},isElderMode:c}))}return s.default.createElement("div",{className:j,"data-active":"before-white",style:n},s.default.createElement("div",{className:A,onClick:()=>{o&&o(r)}},p&&!u&&s.default.createElement("div",{className:Yr.a.selectedSvg,style:{marginRight:L}},Jr),u&&s.default.createElement("div",{className:Yr.a.itemDisableText,style:{marginRight:L}},"该支付方式当前服务不可用"),s.default.createElement("div",{className:Yr.a.text},R,M,z())))}var en=a("PB+Z"),tn=a.n(en);const an=s.default.createElement("svg",{t:"1629364484227",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2148"},s.default.createElement("path",{d:"M0 350.06106c0-14.555334 5.555892-29.110668 16.666502-40.222451 22.222394-22.222394 58.241275-22.222394 80.444904 0L511.760148 724.487351l415.129619-415.148385c22.203628-22.222394 58.222509-22.222394 80.444903 0 22.222394 22.222394 22.222394 58.222509 0 80.444903l-428.536712 428.555478c-36.981808 36.944276-97.111406 36.944276-134.074448 0.037532L16.667675 390.283512c-11.111784-11.110611-16.667675-25.667118-16.667675-40.222452z","p-id":"2149"}));function on({showFoldAlipayHint:e,onClickExpandAll:t}){return Er()(tn.a),s.default.createElement("div",{className:tn.a.more,"data-active":"cell-white",onClick:t},s.default.createElement("div",{className:tn.a.hint},"更多支付方式",e&&s.default.createElement("div",{className:tn.a.payment},s.default.createElement("span",{className:tn.a.space},"("),s.default.createElement("span",null,"如 "),s.default.createElement("span",{className:tn.a.wrapper},s.default.createElement("span",{className:tn.a.item},s.default.createElement("span",{className:`${tn.a.moreIcon} ${tn.a.icon1}`}),s.default.createElement("span",null,"支付宝"))),s.default.createElement("span",{className:tn.a.space},")"))),s.default.createElement("div",{className:tn.a.arrowsDownSvg},an))}function rn({payChannels:e,installmentList:t,lockInstallmentTerm:a,lockCreditCardTerm:o,onChannelSelected:r,onClickExpandAll:n,disableFolding:i,customStyle:l,orderAmount:c,changeBindId:d,isElderMode:u}){function p(e,t){r&&r(e,t)}Er()(Pr.a);let m=!1;e.forEach((e=>{e.channelName===Nr.ALIPAY&&(m=!e.display)}));const h=e.filter((e=>e.display||i)).map((e=>s.default.createElement(Zr,{installmentList:t,lockInstallmentTerm:a,lockCreditCardTerm:o,customStyle:l,key:e.channelName,channel:e,selectPayMethod:p,orderAmount:c,changeBindId:d,isElderMode:u}))),f=e.length>h.length&&!i,g=dt()(Pr.a.payment,{pdd_payment_list_elder_mode:u});return s.default.createElement("div",{className:g},h,f&&s.default.createElement(on,{onClickExpandAll:n,showFoldAlipayHint:m}))}var nn=a("3OdE");const sn=()=>{};var ln=(e=sn,t=sn)=>{const a=Object(O.a)();a.system===D.b.IOS&&a.isNativePlatform?window.__isMagic__?e():Object(D.c)(a.version,"3.43.0")>=0?Object(ae.g)("PDDPayment","getAvailableTypes",{}).then((a=>{(a&&a.types||[]).indexOf(jr.ApplePay)>=0?e():t()})).catch(t):Object(ae.g)("AMPay","canSupportApplePay",{}).then((a=>{a.status===nn.a.constant.ApplePaySupportStatus.Support?e():t()})).catch(t):t()};function cn(){const e=new Promise((e=>{ln((()=>{e({result:!0})}),(()=>{e({result:!1})}))})),t=new Promise((e=>{setTimeout((()=>{e({result:!1,timeout:!0})}),2e3)}));return Promise.race([e,t]).then((function({result:e,timeout:t}){return e}))}async function dn(){const e=Object(O.a)();if(!(e.statisfy&&e.statisfy("3.2.0","3.2.0","greaterThanEqual")))return!1;let t="";const a=e.system;a===D.b.IOS?t="alipays":a===D.b.Android&&(t="com.eg.android.AlipayGphone");try{const e=await Object(ae.g)("AMApplication","check",{app:t});if(e&&e.has_installed){return parseInt(e.has_installed,10)||0}}catch(o){return!1}}function un(){const e=Object(O.b)(navigator.userAgent);if(!e.isNativePlatform||Object(D.c)(e.version,"4.85.0")<0)return!1;const t=e.system===D.b.Android?"com.tencent.mobileqq":"mqqwallet";return Object(ae.g)("AMApplication","check",{app:t}).then((({has_installed:e})=>(Object(ae.g)("AMStorage","set",{key:"qqUninstall",value:e+""}),0===e))).catch((()=>!1))}function pn(){const e=Object(O.a)();if(!e.isNativePlatform||Object(D.c)(e.version,"4.85.0")<0)return!1;const t=e.system===D.b.Android?"com.unionpay":"uppaywallet";return Object(ae.g)("AMApplication","check",{app:t}).then((({has_installed:e})=>(Object(ae.g)("AMStorage","set",{key:"unionpayUninstall",value:e+""}),0===e))).catch((()=>!1))}function mn({alipayInstalled:e,isQQUninstall:t,isUnionpayUninstall:a,isEmbeddedBrowser:o,appVersion:r,applePayInstalled:n}){const s=r&&Object(D.c)(r,"3.65.0")>=0;return{disableFolding:o,installMap:{[Nr.LIANLIANPAY]:!!n,[Nr.QQ]:!t,[Nr.HBFQ_ALI_PAY]:s,[Nr.ALIPAY]:!!e,[Nr.UNIONPAY]:!a}}}function hn(){return Promise.all([dn(),cn(),un(),pn()]).then((e=>{const[t,a,o,r]=e,n=Object(O.a)();return mn({alipayInstalled:t,applePayInstalled:a,isQQUninstall:o,isUnionpayUninstall:r,appVersion:n.version,isEmbeddedBrowser:n.isEmbeddedBrowser})}))}let fn=0;const gn=[Nr.LIANLIANPAY,Nr.QQ,Nr.HBFQ_ALI_PAY,Nr.UNIONPAY];function _n(e=[],t){const{installMap:a={}}=t||{},o={};return gn.forEach((e=>{o[e]=a&&!a[e]})),e.filter((e=>e&&!o[e.channelName]))}function yn(e){let t=null,a=null;return e.forEach((e=>{!t&&!e.disabled&&(t=e),e.defaultSelected&&!e.disabled&&(a=e)})),a||t}function bn({channelName:e,existedChannels:t,installmentList:a,expandAll:o,channel:r}){const n=t.slice();let s=null;const i=[],l=[];return n.forEach((t=>{if(t.channelName!==e||t.disabled)t.selected=!1;else{if(t.channelName===Nr.HBFQ_ALI_PAY){const e=a.findIndex((e=>e.defaultSelected)),o=e>=0?e:0;t.termIndex>=0||(t.termIndex=(null==r?void 0:r.termIndex)||o)}if(t.channelName===Nr.CREDIT_CARD){var n,c;let e=((null==r||null===(n=r.creditCardVo)||void 0===n||null===(c=n.recommendCardVo)||void 0===c?void 0:c.creditInstallments)||[]).findIndex((e=>!!e.selected));e<0&&(e=0),t.creditCardTermIndex>=0||(t.creditCardTermIndex=(null==r?void 0:r.creditCardTermIndex)||e)}t.display=!0,t.selected=!0,t.neverBeenSelected=!1,s=t}o&&(t.display=!0),t.display?i.push(t):l.push(t)})),{newChannels:i.concat(l),selectedChannel:s}}function vn({payChannels:e,installmentList:t=[],lockInstallmentTerm:a,lockCreditCardTerm:o,isRefreshPayChannels:r,ignoreChannels:n=[],ssrOptimizationParams:i,onChannelSelected:l,onPayChannelsChanged:c,selectedChannelName:d,termIndex:u,creditCardTermIndex:p,disableFolding:m=!1,orderAmount:h,changeBindId:f,customStyle:g,isElderMode:_=!1}){function y(a){const o=function(e){const{pdd_native_preload2:t,appVersion:a,isEmbeddedBrowser:o}=e||{};if(t)try{const{am_app_che_alipays:e,am_app_che_applepay:r,qqUninstall:n,unionpayUninstall:s}=JSON.parse(t)||{};let i=!0,l=!1;return e&&(i=1===parseInt(JSON.parse(e).has_installed)),r&&(l=1===parseInt(JSON.parse(r).has_installed)),mn({alipayInstalled:i,applePayInstalled:l,isQQUninstall:"0"===n,isUnionpayUninstall:"0"===s,appVersion:a,isEmbeddedBrowser:o})}catch(r){const e="nativeExtra parsing error";Object(At.c)(new Error(e),{installInfo:t})}return null}(a),r=_n(e.filter((e=>!n.includes(e.channelName))),o),s=yn(r)||{},{newChannels:i}=bn({channelName:s.channelName,existedChannels:r,installmentList:t,expandAll:!!o&&o.disableFolding});return i}const[b,v]=Object(s.useState)((()=>y(i))),k=e=>{c&&c(e),v(e)};function I({channelName:e,channel:a,existedChannels:o,opts:r}){const{expandAll:n}=r||{},{newChannels:s,selectedChannel:i}=bn({channel:a,channelName:e,existedChannels:o,installmentList:t,expandAll:m||n});k(s),l&&l({selectedChannel:i,channelName:e,opts:r})}return Object(s.useEffect)((()=>{hn().then((t=>{const a=_n(e.filter((e=>!n.includes(e.channelName))),t);I({channelName:yn(a).channelName,existedChannels:a,opts:{expandAll:!!t&&t.disableFolding}}),a.length<1&&!fn&&(fn=!0,Object(At.c)(new Error("empty_paymentlist")))}))}),[]),Object(s.useEffect)((()=>{if(r)hn().then((t=>{const a=_n(e.filter((e=>!n.includes(e.channelName))),t);k(a)}));else{const t=b.slice(),a=t.find((e=>e.channelName===Nr.CREDIT_CARD)),o=e.find((e=>e.channelName===Nr.CREDIT_CARD));a&&!o&&(a.creditCardVo=null);const r=e.map((e=>e.channelName));t.forEach((e=>{r.includes(e.channelName)||Object.assign(e,{hint:null,hintStyle:null,hintIcon:null,preHint:null,preHintStyle:null,preHintIcon:null,payIconContent:null})}));const n={};t.forEach((e=>{n[e.channelName]=e})),e.forEach((e=>{const t=n[e.channelName];t&&Object.assign(t,{name:e.name,nameStyle:e.nameStyle,hint:e.hint,hintStyle:e.hintStyle,hintIcon:e.hintIcon,preHint:e.preHint,preHintStyle:e.preHintStyle,preHintIcon:e.preHintIcon,payIconContent:e.payIconContent,creditCardVo:e.creditCardVo})})),k(t)}}),[e]),Object(s.useEffect)((()=>{if(!d)return;if(!b.filter((e=>e.selected))[0])return;const e=b.filter((e=>e.channelName===Nr.HBFQ_ALI_PAY))[0];e&&u>=0&&(e.termIndex=u);const a=b.filter((e=>e.channelName===Nr.CREDIT_CARD))[0];a&&p>=0&&(a.creditCardTermIndex=p);const o=b.slice(),{newChannels:r}=bn({channelName:d,existedChannels:o,installmentList:t});k(r)}),[d,u,p]),s.default.createElement(rn,{payChannels:b,installmentList:t,lockInstallmentTerm:a,lockCreditCardTerm:o,onChannelSelected:(e,t)=>{I({channel:e,channelName:e.channelName,existedChannels:b,opts:t})},onClickExpandAll:()=>{const e=(b||[]).slice();e.forEach((e=>{e.display=!0})),k(e)},disableFolding:m,customStyle:g,orderAmount:h,changeBindId:f,isElderMode:_})}const kn={[Nr.WEIXIN]:jr.WeChat,[Nr.WEIXIN_FRIEND]:jr.FriendPay,[Nr.ALIPAY]:jr.AliPay,[Nr.QQ]:jr.QQPay,[Nr.DUODUOPAY]:jr.DuoDuoPay,[Nr.HB_ALI_PAY]:jr.HBPay,[Nr.HBFQ_ALI_PAY]:jr.HBInstallmentPay,[Nr.WEIXIN_CREDIT]:jr.XianYongHouFu,[Nr.LIANLIANPAY]:jr.ApplePay,[Nr.DUODUOPAY_ACS]:jr.DuoDuoPayACS,[Nr.UNIONPAY]:jr.UnionPay,[Nr.CREDIT_CARD]:jr.CreditCardInstallmentPay};async function In(e){if(e===Nr.ALIPAY){return await async function(){const e=Object(O.a)();if(!e.statisfy||!e.statisfy("3.2.0","3.2.0","greaterThanEqual"))return!1;let t="";const a=e.system;a===D.b.IOS?t="alipays":a===D.b.Android&&(t="com.eg.android.AlipayGphone");try{const e=await Object(ae.g)("AMApplication","check",{app:t});if(e&&e.has_installed)return parseInt(e.has_installed,10)||0}catch(o){return!1}}()?jr.AliPayDirectDebit:jr.AliPay}const t=kn[e];return t||null}var wn,Sn=a("j3Tn"),En=a.n(Sn);let Cn=(wn=class extends s.Component{constructor(...e){super(...e),this.state={slideIn:!0,show:this.props.visible}}UNSAFE_componentWillReceiveProps({visible:e}){e&&Object(M.c)({page_el_sn:4912845,op:"impr"}),e&&e!==this.props.visible?(this.setState({show:!0},(()=>{this.props.onShow&&this.props.onShow()})),setTimeout((()=>{this.setState({slideIn:!0})}),50)):e||e===this.props.visible||(this.setState({slideIn:!1}),setTimeout((()=>{this.setState({show:!1})}),300))}defaultClick(e){e&&e.preventDefault(),e&&e.stopPropagation()}render(){const e=dt()("oc-repay-modify-panel "+En.a.repayModifyPanel,{[En.a.slideIn]:this.state.slideIn});return s.default.createElement("div",{className:e,style:{display:this.state.show?"":"none"},onClick:this.props.doHide},s.default.createElement("div",{className:"rmp-content "+En.a.content,onClick:this.defaultClick},this.props.children))}},ee()(wn.prototype,"defaultClick",[jt.a],Object.getOwnPropertyDescriptor(wn.prototype,"defaultClick"),wn.prototype),wn);a("50WD");var Pn=a("nvxi"),Nn=a.n(Pn);function On({discountPrice:e,orderAmount:t,shouldShowPrice:a=!0,onRepay:o,onCancel:r}){return s.default.createElement("div",{id:"rmp-confirm",className:Nn.a.confirm},!!e&&s.default.createElement("div",{className:Nn.a.tips},s.default.createElement("span",{className:Nn.a.discount},"已优惠",s.default.createElement("i",null,Object(Da.b)(e),"元"))),!e&&s.default.createElement("div",{className:Nn.a.placeholder}),s.default.createElement("div",{className:Nn.a.button,"data-active":"red",onClick:o},"继续支付",a&&s.default.createElement("span",{className:Nn.a.price},s.default.createElement("i",null,"¥"),Object(Da.b)(t))),s.default.createElement("div",{className:Nn.a.cancel,onClick:r},"取消订单"))}var Dn=a("NmGg"),xn=a.n(Dn);class Tn extends s.Component{constructor(...e){super(...e),this.state={isNativePlatform:!1}}componentDidMount(){const e=Object(O.a)(),{isNativePlatform:t}=e;this.setState({isNativePlatform:t})}render(){const{isNativePlatform:e}=this.state,t=!!Tt()(this.props.ocData,"virtualReceiveMethodInfo"),a=Tt()(this.props.ocData,"receiveMethodNone");if(t||a)return null;const{address:o,city:r,province:n,district:i,unpayAddressLabels:l=[]}=this.props.address||this.props.ocData.addressInfo,c=dt()(xn.a.address,{[xn.a.hasUnpayLabel]:l&&!!l.length,[xn.a.hideArrow]:!e});return s.default.createElement("div",{className:xn.a.wrap},s.default.createElement("div",{className:xn.a.addressWrap,"data-active":e?"before-white":""},s.default.createElement("div",{className:c,onClick:this.props.onEditAddress},s.default.createElement("div",{className:xn.a.detail},s.default.createElement("div",{className:xn.a.info},n,r,i,o),l&&!!l.length&&s.default.createElement("div",{className:xn.a.labels},l.map((e=>{return s.default.createElement("span",{key:e.title,style:{fontSize:(o=e.fontSize,r=12,(parseInt(o,10)||r)/100+"rem"),color:(t=e.fontColor,a="#fa323c",(t||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?t:a)}},e.title);var t,a,o,r})))))))}}var jn=Tn,An=a("JWkn"),Ln=a.n(An);class Rn extends s.Component{constructor(...e){super(...e),this.state={initialTs:0,currentTs:0}}render(){const{countDown:e}=this.props,{initialTs:t,currentTs:a}=this.state,o=parseInt((t+e-a)/100),r=o%10,n=Math.floor(o/10),i=Math.floor(n/60),l=Math.floor(i/60),c=this.padleft(l),d=`${c>0?c+":":""}${this.padleft(i%60)+":"+this.padleft(Math.floor(n%60))}${"."+r%10}`;return s.default.createElement("span",{className:Ln.a.msCountDown},d)}componentDidMount(){const{countDown:e}=this.props,t=Date.now();this.setState({initialTs:t,currentTs:t}),this.timer=setInterval((()=>{const{initialTs:t}=this.state;let a=Date.now();a-t>=e&&(clearInterval(this.timer),a=t+e),this.setState({currentTs:a})}),100)}componentWillUnmount(){clearInterval(this.timer)}padleft(e){return e<10?"0"+e:e}}var Mn=a("EUmn"),Bn=a.n(Mn);const Fn={LEFT_PIC_RIGHT_TEXT:1,LIYIDIAN:2,COMMENT:3},zn={[Fn.LIYIDIAN]:4},Hn={[Fn.LIYIDIAN]:-18},Vn={[Fn.LIYIDIAN]:15};function Un({countDown:e,doHide:t,retainWindowVo:a}){const o=s.default.createElement("div",{className:Bn.a.countDown},"订单待支付，请在",s.default.createElement(Rn,{countDown:e}),"内支付");return s.default.createElement("div",{className:Bn.a.header},s.default.createElement("div",{className:Bn.a.countDownHeader},o,s.default.createElement("div",{className:Bn.a.closeWrap},s.default.createElement("div",{className:Bn.a.close,onClick:t}))),function(e){if(!e)return null;const t=e.pictures||[],a=e.picWidth,o=e.picHeight,r=+e.displayType,n=t.length>0&&[Fn.LEFT_PIC_RIGHT_TEXT,Fn.COMMENT,Fn.LIYIDIAN].includes(r),i=(zn[r]||8)/100+"rem",l=+e.displayType===Fn.LEFT_PIC_RIGHT_TEXT,c=(Hn[r]||-12)/100+"rem",d=(Vn[r]||12)/100+"rem",u=(e.contents||[]).filter((e=>!!e)).map(((e,t)=>{const{font_size:a,font_color:o}=e.css_vo||{};return s.default.createElement("span",{key:t+"_"+e.content,style:{color:o,fontSize:a>0?a/100+"rem":void 0}},e.content)}));return n||u.length>0?s.default.createElement("div",{className:Bn.a.retainBar,style:{marginTop:c,paddingBottom:d}},n?s.default.createElement("div",{className:Bn.a.retainBarIcon,style:{marginRight:i}},t.map(((e,n)=>{let i=".26rem",l=".26rem",c="50%";const d=[Bn.a.retainBarIconBody];return a>0&&o>0?(c=void 0,i=a/100+"rem",l=o/100+"rem"):r===Fn.COMMENT&&d.push(Bn.a.retainBarIconBordered),s.default.createElement("div",{className:d.join(" "),key:e,style:{width:i,height:l,zIndex:t.length-n+1}},s.default.createElement(Wa.a,{src:e,style:{borderRadius:c}}))})),l?s.default.createElement("div",{className:Bn.a.retainBarLabel},"好友"):null):null,s.default.createElement("div",{className:Bn.a.retainBarText},s.default.createElement("p",null,u))):null}(a))}var Wn=a("Rc36");a("1R20");var Gn=a("HNyE"),qn=a.n(Gn);const Qn=s.default.createElement("svg",{t:"1631178532091",viewBox:"0 0 1024 1024"},s.default.createElement("path",{d:"M943.3 147.7C811.4 142 685 97.8 567.9 16.3L545.7 0.8l-22.1 15.4C406.4 97.8 280.1 142.1 149 147.7h-41.4v345.8c0 253.4 176.4 470.3 428.7 527.5l11 1.8 7.9-1.8c252.4-57.2 428.6-274.1 428.6-527.5V147.7h-40.5zM516.2 686.8L323.9 494.4l51.6-51.6 140.6 140.7 246.6-246.7 51.6 51.6-298.1 298.4z"}));var Yn=function({title:e,callbacks:t={}}){const[a,o]=Object(s.useState)(!0);t.hideLoading=()=>o(!1),t.showLoading=()=>o(!0);const r={display:a?"block":"none",opacity:a?1:0};return s.default.createElement("div",{className:qn.a.container,style:r},s.default.createElement("div",{className:qn.a.icon},Qn),s.default.createElement("div",{className:qn.a.title},e),s.default.createElement("div",{className:qn.a.dot1}),s.default.createElement("div",{className:qn.a.dot2}),s.default.createElement("div",{className:qn.a.dot3}))},Jn=a("L/R6"),Xn=a.n(Jn);const Kn=s.default.createElement("svg",{viewBox:"0 0 1024 1024"},s.default.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var $n=function({title:e,callbacks:t={}}){const[a,o]=Object(s.useState)(!0);t.hideLoading=()=>o(!1);const r={display:a?"block":"none",opacity:a?1:0};return s.default.createElement("div",{className:Xn.a.container,style:r},s.default.createElement("div",{className:Xn.a.icon},Kn),s.default.createElement("div",{className:Xn.a.title},e))},Zn=a("eJ5W"),es=a.n(Zn);const ts=s.default.createElement("svg",{viewBox:"0 0 1024 1024"},s.default.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var as=function({title:e,payInfoTitle:t,callbacks:a={}}){const[o,r]=Object(s.useState)(!0);a.hideLoading=()=>r(!1);const n={display:o?"block":"none",opacity:o?1:0};return s.default.createElement("div",{className:es.a.container,style:n},s.default.createElement("div",{className:es.a.icon},ts),s.default.createElement("div",{className:es.a.title},t),s.default.createElement("div",{className:es.a.title},e))};a("p+lt");const os={fadeIn:function(e,t){t=t||{};let a=0;this.animate_({duration:t.duration,step:function(t){a+=t,e.style.opacity=a},complete:t.complete})},fadeOut:function(e,t){void 0!==t&&null!=t||(t={});let a=1;this.animate_({duration:t.duration,step:function(t){a-=t,e.style.opacity=a},complete:t.complete})},animate_:function(e){const t=this;(e=e||{}).duration=e.duration||300,null==e.easing&&(e.easing=function(e){return t.easing_.linear(e)}),e.lastProgress=e.easing(0);const a=Date.now(),o=setInterval((function(){const t=Date.now()-a,r=e.easing(Math.min(1,t/e.duration)),n=r-e.lastProgress;null!=e.step&&e.step(n),r>=1&&(clearInterval(o),null!=e.complete&&e.complete()),e.lastProgress=r}),1e3/24)},easing_:{linear:function(e){return e}}};let rs=null;{const e=document.createElement("div");e.innerHTML='<div class="icon-toast-container">\n    <div class="icon-toast">\n        <div class="icon-toast-background"></div>\n        <div class="icon-toast-box">\n            <i id="icon-toast-icon" class="icon icon-toast-icon"></i>\n        </div>\n        <div id="icon-toast-msg" class="icon-toast-msg"></div>\n    </div>\n</div>';const t=e.firstChild;document.body.appendChild(t),rs={show:function(e,t,a={}){let o=a.showDuration||2e3;const{complete:r,forceH5:n=!1}=a,s=Object(O.a)(),i=s.isNativePlatform,l=Object(D.c)(s.version,"3.51.0")>=0;if(i&&!n)l?Object(ae.g)("PDDUIController","showHUD",{type:1,duration:o,theme:1,message:t,complete:r}):(o=Math.max(o,1e3),Object(ae.g)(s.system===D.b.Android?"JSAlert":"AMUIControl","toast",{message:t}),setTimeout(r,o));else{const r=this,n=document.querySelector(".icon-toast"),s=document.getElementById("icon-toast-msg"),i=document.getElementById("icon-toast-icon");a.extraClass&&i.classList.add(a.extraClass),i.innerHTML=e||"",s.innerHTML=t.replace(/\n/g,"<br/>"),n.style.display="block",n.style.opacity=0,os.fadeIn(n,{duration:300,complete:()=>{o>=0&&setTimeout((()=>{r.hide((()=>{null!=a.complete&&a.complete()}))}),o)}})}},hide:function(e){const t=document.querySelector(".icon-toast");null!=t&&os.fadeOut(t,{duration:300,complete:()=>{t.style.display="none",null!=e&&e()}})}}}var ns=rs;const ss='<svg t="1606749646670" class="success-svg" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="101652" width="200" height="200"><path d="M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z" p-id="101653"></path></svg>';class is{constructor(e){this.dom=e}showSpinner(){Object(ha.b)()}hideSpinner(){Object(ha.a)()}show(){}hide(){}markSwitched(){}showSuccess(){}}class ls extends is{constructor(...e){super(...e),this.callbacks={},this.switched=!1}markSwitched(){this.switched=!0}show({title:e="免密支付中"}={}){Object(ha.a)(),s.default.render(s.default.createElement(Yn,{title:e,callbacks:this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}showSuccess({title:e="支付成功",payInfoTitle:t}={},a){this.switched?s.default.render(s.default.createElement(as,{payInfoTitle:t,title:e,callbacks:this.callbacks}),this.dom):s.default.render(s.default.createElement($n,{title:e,callbacks:this.callbacks}),this.dom),setTimeout((()=>{this.hide(),a()}),1500)}hide(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}class cs extends is{async showSpinner(e){try{await Object(ae.g)("JSDuoduoWallet","showLoading",{is_transaction:!0,display_title:e})}catch(t){Object(ha.b)()}}async hideSpinner({isTransaction:e=!0}={}){Object(ha.a)();const t=Object(O.a)().system===D.b.IOS;try{await Object(ae.g)("JSDuoduoWallet","hideLoading",{is_transaction:!!t||e})}catch(a){}}show(){this.showSpinner("免密支付中")}hide(){this.hideSpinner({isTransaction:!1})}showSuccess(e,t){this.hide(),ns.show(ss,"支付成功",{showDuration:1500,forceH5:!0,extraClass:"ddpay",complete:t})}}var ds=e=>{const t=Object(O.a)();return!!t.isNativePlatform&&Object(D.c)(t.version,e)>=0};var us=new class{constructor(){this.el=null,this.renderer=null,this.currentPaymentType=null,this.startChannel=null,this.mianmiChannels=[]}getDom(){return this.el||(this.el=document.createElement("div"),this.el.setAttribute("id","pdd-pay-loading-manager"),document.body.appendChild(this.el)),this.el}dispose(){this.el&&document.body.removeChild(this.el),this.el=null}init({paymentType:e,ddpayMianmiV2:t}={}){if(this.currentPaymentType=e,(()=>{const e=Object(O.a)(),t=window.navigator.userAgent;return ds("5.56.0")&&!e.isTinyNativePlatform&&!e.isLiteNativePlatform&&!t.toLowerCase().includes("app_type/plugin")})()&&(e===jr.DuoDuoPay||e===jr.CreditCardInstallmentPay)&&!t)return void(this.renderer=new cs);const a=this.getDom();this.renderer=new ls(a)}showSpinner(){this.renderer.showSpinner()}hideSpinner(){this.renderer.hideSpinner()}show(e){this.renderer.show(e)}hide(){this.renderer.hide()}isMianmiChannelUsed(e){return this.startChannel===e||this.mianmiChannels.includes(e)}recordMianmiChannel(e){this.mianmiChannels.push(e),this.renderer.markSwitched()}get isSwitched(){return this.mianmiChannels.length>0}showSuccess(e,t){this.renderer.showSuccess(e,t)}};const ps=async({paymentType:e,ddpayMianmiV2:t=!1,mianmiAutoSwitch:a=!1}={})=>{us.init({paymentType:e,ddpayMianmiV2:t||a}),us.showSpinner()},ms=async()=>{us.hideSpinner()},hs={Success:10001,Paying:10002,Failed:10003,NotFound:10004};var fs={AliPayDirectDebit:{Rollback:1e4,Unsign:10001,Paying:10002,Success:10003,Failed:10004,Unknown:16666},WechatDirectPayQuery:hs,Universal:hs,UniversalException:{CHANCE_EXCEEEDED:-999999,QOGIR_EXCEPTION:-999998,QOGIR_PREMATURE_END:-999997},PayStatus:{Unpayed:0,Payed:2,RefundApplied:3,Refunded:4},ParentOrderStatus:{Unpayed:0,Payed:1,Canceled:2}};var gs={Normal:"",Tail:"tail",Combine:"combine"},_s=a("iuD5");var ys=({payload:e,error_msg:t,error_code:a,page:o})=>{Object(_s.a)({page:o,error_message:t,payload:e,error_code:a},{bizSide:"consumer-platform-fe",appId:"100603",testAppId:"100211"})};class bs{pay(){return Promise.reject({errorCode:0})}}const vs={BASIC:0,GROUP_FULL_AUTO_OPEN:1,ALIPAY_PASS_PARAMS:2,OVERSEAS_ID_CARD_VERTIFICATION:3};vs.currentMaxVersion=vs.OVERSEAS_ID_CARD_VERTIFICATION;let ks=!1;vs.getSupportVersion=()=>{const e=Object(O.a)();return e.isNativePlatform?Object(D.c)(e.version,"3.51.0")>=0?vs.OVERSEAS_ID_CARD_VERTIFICATION:(ks||(ys({error_msg:`app版本${e.version}使用paymentVersion1`,payload:{event:"预支付paymentVersion为1",app_version:e.version}}),ks=!0),vs.GROUP_FULL_AUTO_OPEN):vs.OVERSEAS_ID_CARD_VERTIFICATION};var Is=vs;let ws=null;const Ss={post(e,t){if(!ws){const e=ia.a.getInstance().getPageID();ws=Object(sa.a)({pageInfo:{pageId:e}})}return ws({method:"POST",url:e,data:t,defaultErrorHandler:()=>{}}).catch((e=>{const{errorCode:t}=e,{data:a}=e.response||{};return Promise.reject({errorCode:t,errorObject:a})}))}};let Es=null;var Cs={getInstance:()=>(Es||(Es=Ss),Es),setInstance(e){Es=e}};var Ps=class{constructor({attributeFields:e,params:t,orderSn:a,url:o,prepayType:r}){this.attributeFields=e,this.paymentVersion=Is.getSupportVersion(),this.params=t,this.url=o,this.orderSn=a,this.prepayType=r,this.config=nn.a.get(location.hostname)}get appId(){return null}realPay(e){}prepayParams(){return n()({pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:this.attributeFields},this.params)}get prepayUrl(){if(this.url)return this.url;switch(this.prepayType){case gs.Combine:return"api/vancouver/cart/prepay";case gs.Tail:return"api/vancouver/final_pay_prepay";default:return"order/prepay"}}prepay(e){const t=this.prepayParams(),a=e&&"object"==typeof e?n()(n()({},e),t):t;return Cs.getInstance().post(this.prepayUrl,a).catch((({errorCode:e,errorObject:t})=>Promise.reject({errorCode:e,errorObject:t})))}pay(){return this.prepay().then((e=>this.realPay(e)))}};class Ns extends Ps{constructor(e){super(e),this.prepayType=e.prepayType,this.additionalParams=e.additionalParams}realPay(e){}pay(){return new Promise(((e,t)=>{try{let e="/package_c/pay/pay?order_sn="+encodeURIComponent(this.orderSn);this.prepayType&&(e+="&prepay_type="+this.prepayType),this.additionalParams&&"object"==typeof this.additionalParams&&Object.keys(this.additionalParams).forEach((t=>{e+=`&${encodeURIComponent(t)}=${encodeURIComponent(this.additionalParams[t])}`})),window.wx.miniProgram.navigateTo({url:e,success(e){t({cancelled:!0,err_msg:-200})},fail(e){Ua({title:"系统繁忙, 请稍后再试(-400)"}),Object(At.c)(new Error("调起小程序支付失败_无法唤起")),t({cancelled:!0,err_msg:-400})}})}catch(a){Ua({title:"系统繁忙, 请稍后再试(-500)"});const e=a&&a.errMsg||(a instanceof Error?a.message:JSON.stringify(a));Object(At.c)(new Error("调起小程序支付失败_内部错误"),{error_msg:e}),t({cancelled:!0,err_msg:-500})}}))}}function Os(e){ys({error_msg:e.errorMsg||"",payload:{event:"pay_code",payment_type:e.paymentType||0,code:e.errorCode||"",url:e.url||"",order_sn:e.orderSn||"",wait_time:e.waitTime||0,pay_source:e.paySource||0,error_msg:e.errorMsg||""}})}function Ds(e){!e.errorCode&&e.stack&&ys({error_msg:"@pdd/pay stack error",page:e.message+" "+JSON.stringify(e.stack)})}var xs=class extends Ps{get appId(){return this.config.AppID.WeChat}prepayParams(){return n()(n()({},super.prepayParams()),{},{pap_pay:1,attribute_fields:n()({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}realPay(e){return e.timestamp=e.timestamp.toString(),Object(ae.g)("JSPay","pay",{type:jr.WeChat,params:e}).then((e=>(Os({paymentType:jr.WeChat,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:t}=e;return ys({payload:{event:"app_wechat_pay",order_sn:this.orderSn,error_code:t+""}}),Promise.reject({errorCode:t})}))}};var Ts=class extends Ps{get appId(){return+Object(m.g)(location.href).pay_app_id||this.config.AppID.WeChat}prepayParams(){return n()(n()({},super.prepayParams()),{},{pap_pay:1,attribute_fields:n()({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}realPay(e){return new Promise(((t,a)=>{const o=()=>{WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp.toString(),nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(e=>{if(e&&"object"==typeof e){if(Os({paymentType:jr.WeChat,errorCode:e.err_msg+"",orderSn:this.orderSn}),"get_brand_wcpay_request:cancel"===e.err_msg)return e.cancelled=!0,void a(e);if("get_brand_wcpay_request:ok"===e.err_msg)return void t(e)}Object(At.c)(new Error("WeixinJSBridge支付失败")),a(e)}))};"undefined"==typeof WeixinJSBridge?Promise.race([new Promise((e=>{document.addEventListener("WeixinJSBridgeReady",e)})),new Promise(((e,t)=>{setTimeout((()=>{"undefined"==typeof WeixinJSBridge?t():e()}),2e3)}))]).then(o).catch((()=>{Object(At.c)(new Error("WeixinJSBridge未定义")),a({errorCode:0})})):o()}))}};var js=class extends Ps{constructor(e){super(e),this.additionalParams=e.additionalParams}get appId(){return this.config.AppID.WeChatH5Pay}realPay(e){return new Promise(((t,a)=>{const o=e.mweb_url;Os({paymentType:jr.WeChat,url:o,orderSn:this.orderSn}),function(e){if((window.navigator.userAgent||"").toLowerCase().indexOf("oppo")>=0){const t=document.createElement("a")||{};t.href=e,t.click&&t.click()}else oe.a.reload(e)}(o)}))}pay(){if(localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){const e={time:Date.now()};localStorage.setItem(nn.a.constant.LocalStorageKey.WeChatH5Pay,JSON.stringify(e));const t=Object(m.h)("transac_wechat_wapcallback.html",n()({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise(((e,a)=>{oe.a.reload(t)}))}return super.pay()}};var As=class{constructor(e){const t=Object(O.a)(),a=t.isWeChatPlatform,o=t.isNativePlatform,r=t.isTinyNativePlatform;this.innerPay=null,this.innerPay=a?new Ts(e):o||r?new xs(e):new js(e)}pay(){return this.innerPay.pay()}};var Ls={WechatDirect:3,UniversalPay:10050},Rs=a("RgOI");function Ms(e,t={}){let{onClose:a}=t,o=Rt()(t,["onClose"]);e&&Object(Rs.a)(n()({onTimeout:a,children:s.default.createElement("div",{dangerouslySetInnerHTML:{__html:e}})},o))}var Bs=a("1KKG"),Fs=a("jtE3");const zs=()=>Cs.getInstance().post("api/qogir/payment/agreement/pay_score_query"),Hs=e=>{let t,a=0;return Object(ha.b)(),ys({payload:{event:"before_polling"}}),new Promise(((o,r)=>{const n=()=>(a+=1,zs().then((e=>{e.success&&e.wx_signed&&(clearInterval(t),Object(ha.a)(),o())})).catch((a=>{clearInterval(t),Object(ha.a)(),a.scoreSignSdkSuccess=e,r(a)})));n(),t=setInterval((()=>{if(ys({payload:{event:"default_polling",time:a}}),a<=4)n();else{clearInterval(t);const a=new Error("pay_score_query_timeout");a.errorCode=1005,a.scoreSignSdkSuccess=e,Object(ha.a)(),r(a)}}),800)}))},Vs=({queryString:e}={})=>{const t=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i)[1];return Object(D.c)(t,"7.0.5")>=0?(({queryString:e}={})=>new Promise(((t,a)=>{ys({payload:{event:"before_wx_score"}}),wx.checkJsApi({jsApiList:["openBusinessView"],success:function(o){o&&o.checkResult&&o.checkResult.openBusinessView&&wx.invoke("openBusinessView",{businessType:"wxpayScoreEnable",queryString:e},(function(e){0===parseInt(e.err_code)?(ys({payload:{event:"wx_score_success"}}),t()):(ys({payload:{event:"wx_score_fail",payload:{event:e&&JSON.stringify(e)}}}),a(e))}))}})})))({queryString:e}):(Object(kt.a)("请将微信更新至最新版后再次尝试"),Promise.reject({errorHandling:{isErrorAlerted:!0}}))},Us=async({response:e}={})=>{const t=Object(O.a)();return t.isNativePlatform?(({response:e}={})=>(ys({payload:{event:"before_app_sign_score"}}),Object(ae.g)("AMAgreement","sign",{type:3,params:e})))({response:e}):t.isPureWeChatPlatform?Vs({queryString:e.query}):Promise.reject("Error_Platform")};var Ws=async({signScene:e,antiContent:t,orderSn:a,pollingFun:o,payTicket:r}={})=>{const n=Object(O.a)();if(!n.isNativePlatform&&!n.isPureWeChatPlatform)return Promise.reject("Error_Platform");let s;try{s=await(async({signScene:e,orderSn:t,antiContent:a,payTicket:o}={})=>{const r=Object(O.a)();let n;if(r.isNativePlatform)n="m.hutaojie.com"===location.hostname?"115":"122";else{if(!r.isPureWeChatPlatform)throw Object(Fs.a)("sub_pay_later.html?"+Object(m.b)(Object(m.g)(location.href))).then((()=>{}),(()=>{oe.a.uniformForward("download.html")})),new Error("not_support_platform");n="m.hutaojie.com"===location.hostname?"118":"130"}const s={sign_app_id:n,sign_scene:e||1,anti_content:a,order_sn:t,ext_data:{pay_ticket:o}};return Cs.getInstance().post("api/qogir/payment/agreement/pay_score_sign",s)})({signScene:e,antiContent:t,orderSn:a,payTicket:r})}catch(l){const{errorCode:e}=l||{};return 410011==+e?(Ua({title:"先用后付功能逐步开放中\n敬请期待"}),Promise.reject({errorCode:e,errorHandling:{isErrorAlerted:!0}})):Promise.reject(l)}if(!s||!s.success)throw new Error("pay_score_sign_error");const i=o||Hs;return Us({response:s}).then((async()=>{try{await i(!0)}catch(l){return l.isPollingError=!0,Promise.reject(l)}})).catch((e=>{const{isPollingError:t}=e||{};if(t)throw e;return i(!1)}))},Gs=a("ZKQX");let qs;const Qs=({signScene:e,orderAmount:t,orderSn:a,scoreSignSdkSuccess:o,payTicket:r,switchToWechatIfSignXyhfFailed:n})=>{const i=()=>{n?qs&&qs():Object(ha.a)()};return n?(Object(ha.a)(),qs&&qs(),qs=Object(Gs.a)(s.default.createElement(Bs.a,{style:{height:"1.2rem",width:"1.2rem"}},s.default.createElement("span",null,"订单已生成"),s.default.createElement("br",null),s.default.createElement("span",null,"正前往支付")))):Object(ha.b)(),new Promise(((n,s)=>{let l,c=!1,d=0;l=setInterval((()=>{if(d<=4)(()=>{d+=1;const u={pay_ticket:r,sign_scene:e,order_sn:a,order_amount:t,pull_scene:"after_sign",pull_times:d};Cs.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",u).then((e=>{const{signed:t,allow_create:r,forbid_create_code:u,forbid_create_reason:p}=e;ys({payload:{event:"query_allow_sign_or_create_time_"+d,result:e&&JSON.stringify(e),order_sn:a}}),!c&&t&&(c=!0,clearInterval(l),i(),r?n():s({scoreSignSdkSuccess:o,errorCode:u,data:{errorCode:u,errorMsg:p}}))})).catch((e=>{const{errorCode:t}=e;ys({payload:{event:"@pdd/pay/query_allow_sign_or_create_err",order_sn:a,error_code:t+""}}),clearInterval(l),c||(c=!0,i(),e.scoreSignSdkSuccess=o,s(e))}))})();else{clearInterval(l);const e=new Error("query_allow_sign_or_create_timeout");e.errorCode=1005,e.scoreSignSdkSuccess=o,ys({payload:{event:"@pdd/pay/query_allow_sign_or_create_timeout",order_sn:a}}),i(),s(e)}}),800)}))};var Ys=async({signScene:e,orderAmount:t,orderSn:a,antiContent:o,payTicket:r,switchToWechatIfSignXyhfFailed:n})=>Ws({signScene:e,antiContent:o,orderSn:a,pollingFun:o=>Qs({signScene:e,orderAmount:t,orderSn:a,scoreSignSdkSuccess:o,payTicket:r,switchToWechatIfSignXyhfFailed:n}),payTicket:r});class Js{constructor(e){this.orderSn=e.orderSn,this.prepayType=e.prepayType,this.additionalParams=e.additionalParams,this.optionalParams=e.optionalParams,this.orderAmount=Tt()(this.optionalParams,"orderAmount")}pay(){return new Promise(((e,t)=>{try{let e=`/package_c/pay_score_sign/pay_score_sign?order_sn=${encodeURIComponent(this.orderSn)}&order_amount=${encodeURIComponent(this.orderAmount)}`;this.prepayType&&(e+="&prepay_type="+this.prepayType),this.additionalParams&&"object"==typeof this.additionalParams&&Object.keys(this.additionalParams).forEach((t=>{e+=`&${encodeURIComponent(t)}=${encodeURIComponent(this.additionalParams[t])}`})),window.wx.miniProgram.navigateTo({url:e,success(e){t({cancelled:!0,err_msg:-200})},fail(e){Ua({title:"系统繁忙, 请稍后再试(-400)"}),Object(At.c)(new Error("调起小程序支付失败_无法唤起")),t({cancelled:!0,err_msg:-400})}})}catch(a){Ua({title:"系统繁忙, 请稍后再试(-500)"});const e=a&&a.errMsg||(a instanceof Error?a.message:JSON.stringify(a));Object(At.c)(new Error("调起小程序支付失败_内部错误"),{error_msg:e}),t({cancelled:!0,err_msg:-500})}}))}}var Xs=class extends Ps{constructor(e){super(e);const t=Object(O.a)(),a=Object(m.g)(window.location.href);this.isNative=t.isNativePlatform,this.isPureWeChatPlatform=t.isPureWeChatPlatform,this.isDdjbWeChatMiniProgram=t.isWeChatMiniProgram&&a._x_cmp_v&&a._x_cmp_v>=1640057746e3,this.isSupportSignXYHFVersion=Object(D.c)(t.version,"5.12.0")>=0,this.optionalParams=e.optionalParams,this.payTicket=Tt()(e,"attributeFields.pay_ticket"),this.options=e}get appId(){const e=Object(O.a)(),t=e.isWeChatPlatform,a=e.isWeChatMiniProgram;return"m.hutaojie.com"===location.hostname?a?119:t?118:115:a?131:t?130:122}async realPay(e){let{wait_time:t=2}=e;t=+t,Number.isInteger(t)||(t=1),Object(ha.a)(),us.show({title:"0元下单中",icon:"xyhf"}),await new Promise((e=>setTimeout(e,1e3*t)))}signXianYongHouFu(){const e=Tt()(this.optionalParams,"signScene"),t=Tt()(this.optionalParams,"orderAmount"),a=Tt()(this.optionalParams,"antiContent"),o=Tt()(this.optionalParams,"switchToWechatIfSignXyhfFailed"),r=this.orderSn,n=this.payTicket;return Ys({signScene:e,orderAmount:t,orderSn:r,antiContent:a,payTicket:n,switchToWechatIfSignXyhfFailed:o})}async pay(){var e=this;const t=Tt()(this.optionalParams,"isSignXianYongHouFu"),a=Tt()(this.optionalParams,"switchToWechatIfSignXyhfFailed");if(t&&(this.isNative&&this.isSupportSignXYHFVersion||this.isPureWeChatPlatform||this.isDdjbWeChatMiniProgram)){return await(o=this.orderSn,zs().then((e=>(ys({payload:{event:"pay_score_query"+(e&&e.wx_signed),order_sn:o}}),e&&e.wx_signed))).catch((e=>{const{errorCode:t}=e;return ys({payload:{event:"@pdd/pay/pay_score_query_err",order_sn:o,error_code:t+""}}),!1})))?this.prepay().then((e=>this.realPay(e))):this.isDdjbWeChatMiniProgram?new Js(this.options).pay():this.signXianYongHouFu().then((()=>(Object(ha.b)(),this.prepay.bind(this,{prepay_front_supports:["credit_repay_idempotence"]})().then((e=>this.realPay(e)))))).catch((async function(t){const o=Object(O.a)().isWeChatPlatform;if(a&&o)return await new Promise((e=>{Ms("先用后付不成功，正在切换微信支付...",{style:{maxWidth:"3rem"},onClose:e})})),Object(ha.b)(),new mi(e.options).pay().then((e=>n()(n()({},e),{},{xyhfSwitchedToWechat:!0})));throw t}))}return this.prepay().then((e=>this.realPay(e)));var o}};const Ks="CHANCE_EXCEEDED";function $s({orderSn:e,attrMap:t,payChannel:a,transactionId:o,waitTimeBeforeQuery:r=null}){const n={allowNextPoll:!0,forceStop(){n.allowNextPoll=!1},async run(){r&&+r>0&&await new Promise((e=>setTimeout(e,1e3*+r)));for(let r=1;r<=4;r++){if(!n.allowNextPoll)return{status:fs.UniversalException.QOGIR_PREMATURE_END};try{const{status:n,wait_time:s,error_info:i}=await Cs.getInstance().post("api/qogir/payment/query/pappay",{order_sn:e,times:r,attr_map:t,channel:a,transaction_id:o})||{},{error_code:l,error_msg:c,change_card_pay:d,pap_pay_fail_map:u}=i||{};if(ys({error_msg:"qogir-pulling-"+n,payload:{order_sn:e,times:r,qogir_err:i?`${l} | ${c}`:void 0}}),+n!==fs.Universal.Paying)return{status:+n||0,errorInfo:{errorCode:l,errorMsg:c,changeCardPay:d,papPayFailMap:u,papPayFailCode:l},paySource:0};await new Promise((e=>setTimeout(e,1e3*+s)))}catch(s){const{errorCode:e,message:t}=s||{};return{status:fs.UniversalException.QOGIR_EXCEPTION,errorInfo:{errorCode:e,errorMsg:t},paySource:0}}}return{status:Ks,errorInfo:null,paySource:0}}};return n}function Zs({orderSn:e,listenType:t,payChannel:a}){const o=Object(O.a)();let r=!1;const s={};let i=null,l=null;t===Ls.WechatDirect?(s.type=t,i="PDDInbox",r=o.isNativePlatform&&Object(D.c)(o.version,"4.14.0")>=0,l="receiver"):(s.biz_type=t,i="PDDTitanPush",r=o.isNativePlatform&&Object(D.c)(o.version,"4.76.0")>=0,l="push_receiver");const c={receiverId:null,forceStop(){const e=n()({},s);r&&t!==Ls.WechatDirect&&Object.assign(e,{receiver_id:c.receiverId}),Object(ae.g)(i,"unregister",e)},run:async()=>new Promise(r?t=>{Object(ae.g)(i,"register",n()(n()({},s),{},{[l]:function(o,r){let n=null,s=!1;try{n=JSON.parse(r.result[0].payload)}catch(p){s=!0}const{status:i,error_info:l,order_sn:d,channel:u}=n||{};if(o||!n)ys({error_msg:"push时查qogir失败",payload:{pinbridge_err:o?"Inbox监听异常":void 0,result_err:n?"Inbox回调数据异常":void 0,data_format_err:s?"Inbox回调数据格式不是JSON":void 0}});else{if(d!==e||u!==a)return void ys({error_msg:"错误的push数据",payload:{pushedOrderSn:d,pushedChannel:u}});{const{error_code:a,error_msg:o,change_card_pay:r,pap_pay_fail_map:n}=l||{};ys({error_msg:"qogir-push-"+i,payload:{order_sn:e,qogir_err:l?`${a} | ${o}`:void 0}}),t({status:+i||0,errorInfo:{errorCode:a,errorMsg:o,changeCardPay:r,papPayFailMap:n,papPayFailCode:a},paySource:1})}}c.forceStop()}})).then((e=>{c.receiverId=(e||{}).receiver_id}))}:(e,t)=>{})};return c}const ei=({errorMsg:e,cancelled:t,errorCode:a})=>({originTime:o,paySource:r,orderSn:n})=>(Os({paymentType:jr.DuoDuoPay,errorCode:a,orderSn:n,waitTime:Date.now()-o,errorMsg:e,paySource:r}),us.hide(),Promise.reject({cancelled:t,errorCode:a})),ti=ei({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),ai={[fs.Universal.Success]:({originTime:e,paySource:t,orderSn:a})=>new Promise((o=>{Os({paymentType:jr.DuoDuoPay,errorCode:0,orderSn:a,waitTime:Date.now()-e,paySource:t}),us.showSuccess({payInfoTitle:"多多支付",title:"支付成功"},o)})),[fs.UniversalException.CHANCE_EXCEEEDED]:ei({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1}),[fs.UniversalException.QOGIR_EXCEPTION]:ei({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1}),[fs.Universal.NotFound]:ei({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1}),[fs.Universal.Failed]:async({originTime:e,paySource:t,orderSn:a,errorMsg:o,changeCardPay:r,changeCardCallback:n,getAutoSwitchPay:s})=>{const i=s();return i.isAutoSwitchEnabled?i.performAutoSwitchPay():new Promise((async(s,i)=>{Os({paymentType:jr.DuoDuoPay,errorCode:0,orderSn:a,waitTime:Date.now()-e,paySource:t}),us.hide(),1==+r&&ds("5.45.0")?Object(Io.a)({title:o||"免密支付失败，请重试",onCancel(){i({cancelled:!0})},onClose(){i({cancelled:!0})},onConfirm:async()=>{try{const e=await n();s(e)}catch(e){i(e)}},cancelButtonLabel:"取消",confirmButtonLabel:"换卡支付"}):Ua({title:o||"免密支付失败，请重试",onConfirm(){i({cancelled:!1,errorCode:-1})},onClose(){i({cancelled:!1,errorCode:-1})}})}))}};var oi=class extends Ps{constructor(e){super(e),e=e||{},this.attrMap=e.attrMap,this.isSupportDirectPay=e.isSupportDirectPay,this.isSupportChangeCard=ds("5.45.0"),this.autoSwitchPay=new di(e,this.appId)}get appId(){return 97}prepayParams(){return n()(n()({},super.prepayParams()),{},{pap_pay:1,attribute_fields:n()({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields)})}realPay(e,t){return 1==+e.is_pap_pay?this.handleDirectPay():this.handleNormalPay(e,t)}handleNormalPay(e,t){const a=n()({},e);if(t){const{changeCardPay:e,papPayFailMap:o,papPayFailCode:r}=t;e&&(a.change_card_pay=e),o&&Object.assign(a,o),r&&(a.pap_pay_fail_code=r)}return Object(ae.g)("JSPay","pay",{type:jr.DuoDuoPay,params:a}).then((e=>(Os({paymentType:jr.DuoDuoPay,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{data:t,errorCode:a}=e;return Os({paymentType:jr.DuoDuoPay,errorCode:a+"",orderSn:this.orderSn,errorMsg:e.toJSON&&JSON.stringify(e.toJSON())}),Promise.reject({errorCode:a,data:t})}))}async handleDirectPay(){const e=Date.now(),t=$s({orderSn:this.orderSn,payChannel:"DUODUOPAY",attrMap:this.attrMap}),a=Zs({orderSn:this.orderSn,listenType:Ls.UniversalPay,payChannel:"DUODUOPAY"});try{us.hideSpinner(),us.show({title:"免密支付中",icon:"ddpay"});const{status:o,errorInfo:r,paySource:n}=await Promise.race([t.run(),a.run()])||{},{errorMsg:s,changeCardPay:i,papPayFailMap:l,papPayFailCode:c}=r||{};return(ai[o]||ti)({originTime:e,paySource:n,orderSn:this.orderSn,errorMsg:s,changeCardPay:i,changeCardCallback:this.pay.bind(this,{changeCardPay:i,papPayFailMap:l,papPayFailCode:c}),getAutoSwitchPay:()=>this.autoSwitchPay})}catch(o){const{message:e,stack:t,errorCode:a}=o||{};ys({error_msg:"poller与listener内部错误",payload:{message:a||t||e}})}finally{t.forceStop(),a.forceStop()}}pay(e){return this.prepay().then((t=>(Object(ha.a)(),this.realPay(t,e))))}};const ri=({errorMsg:e,cancelled:t,errorCode:a})=>({originTime:o,paySource:r,orderSn:n})=>(Os({paymentType:jr.AliPayDirectDebit,errorCode:a,orderSn:n,waitTime:Date.now()-o,errorMsg:e,paySource:r}),us.hide(),Promise.reject({cancelled:t,errorCode:a})),ni=ri({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),si={[fs.Universal.Success]:({originTime:e,paySource:t,orderSn:a})=>new Promise((o=>{Os({paymentType:jr.AliPayDirectDebit,errorCode:0,orderSn:a,waitTime:Date.now()-e,paySource:t}),us.showSuccess({payInfoTitle:"支付宝",title:"支付成功"},o)})),[fs.UniversalException.CHANCE_EXCEEEDED]:ri({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1}),[fs.UniversalException.QOGIR_EXCEPTION]:ri({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1}),[fs.Universal.NotFound]:ri({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1}),[fs.Universal.Failed]:async({originTime:e,paySource:t,orderSn:a,errorMsg:o,getAutoSwitchPay:r})=>{const n=r();return n.isAutoSwitchEnabled?n.performAutoSwitchPay():new Promise((async(r,n)=>{Os({paymentType:jr.AliPayDirectDebit,errorCode:0,orderSn:a,waitTime:Date.now()-e,paySource:t}),us.hide(),Ua({title:o||"免密支付失败，请重试",onConfirm(){n({cancelled:!1,errorCode:-1})},onClose(){n({cancelled:!1,errorCode:-1})}})}))}},ii=nn.a.error,li=fs.AliPayDirectDebit;var ci=class extends Ps{constructor(e){super(e),e=e||{},this.attrMap=e.attrMap,this.isSupportDirectPay=e.isSupportDirectPay,this.autoSwitchPay=new di(e,this.appId)}get appId(){return this.config.AppID.AliPayDirectDebit}prepayParams(){const e=this.config.RedirectURI.AliPayDirectDebit;return n()(n()({},super.prepayParams()),{},{pap_pay:1,attribute_fields:n()({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields),return_url:e,request_from_url:e})}async handleAsyncDirectPay({transactionId:e,waitTime:t}){const a=Date.now(),o=$s({orderSn:this.orderSn,payChannel:"ALIPAY",attrMap:this.attrMap,transactionId:e,waitTimeBeforeQuery:t}),r=Zs({orderSn:this.orderSn,listenType:Ls.UniversalPay,payChannel:"ALIPAY"});try{us.hideSpinner(),us.show({title:"免密支付中"});const{status:e,errorInfo:t,paySource:n}=await Promise.race([o.run(),r.run()])||{},{errorMsg:s}=t||{};return(si[e]||ni)({originTime:a,paySource:n,orderSn:this.orderSn,errorMsg:s,getAutoSwitchPay:()=>this.autoSwitchPay})}catch(n){const{message:e,stack:t,errorCode:a}=n||{};ys({error_msg:"poller与listener内部错误",payload:{message:a||t||e}})}finally{o.forceStop(),r.forceStop()}}realPay(e){return 1==+e.is_pap_pay?this.handleAsyncDirectPay({transactionId:e.transaction_id,waitTime:e.wait_time}):new Promise(((t,a)=>{const o=jr.AliPayV2;let r=!1,n=!1;const s=parseInt(e.status,10);let i;if(s===li.Unsign?i=e.data:s!==li.Rollback&&s?s!==li.Failed&&s!==li.Unknown||(n=!0):(i=e,delete i.status,r=!0),!i)return void(n?(Os({paymentType:o,errorCode:s,orderSn:this.orderSn}),s===li.Success?(us.isSwitched||us.hide(),t()):(us.hide(),a({errorCode:s}))):(Object(ha.a)(),us.show(),setTimeout((()=>{Os({paymentType:o,errorCode:s,orderSn:this.orderSn}),[li.Success,li.Paying].includes(s)?(us.isSwitched||us.hide(),t()):(us.hide(),a({errorCode:s}))}),s===li.Paying?4e3:2e3)));const l=r?o:jr.AliPayDirectDebit;Object(ae.g)("JSPay","pay",{type:l,params:i}).then((e=>{Os({paymentType:l,errorCode:"0",orderSn:this.orderSn}),t()})).catch((e=>{Ds(e);const{errorCode:t}=e;function o(){a({errorCode:t})}Os({paymentType:l,errorCode:t+"",orderSn:this.orderSn}),t!==parseInt(ii.NativePaymentCancel.code,10)||l!==jr.AliPayDirectDebit?o():Cs.getInstance().post("payment/agreement/reset",{app_id:this.appId}).then(o,o)}))}))}};var di=class{constructor(e,t){this.options=n()(n()({},e),{},{attributeFields:n()(n()({},e.attributeFields),{},{pappay_poll_mode:"T"})}),this.lastPayAppId=t}get isAutoSwitchEnabled(){return Tt()(this.options,"optionalParams.mianmiAutoSwitch")}async getAutoSwitchChannel(){if(!this.isAutoSwitchEnabled)return{};const e=Tt()(this.options,"attributeFields.pay_ticket"),t=Tt()(this.options,"optionalParams.signScene"),a=Tt()(this.options,"optionalParams.orderAmount"),o=this.options.orderSn;try{const r=await Cs.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",{pay_ticket:e,last_pay_app_id:this.lastPayAppId,sign_scene:t,order_amount:a,order_sn:o}),{allow_all_pay:n,next_channel:s,all_pay_type:i}=r||{};return ys({error_msg:"查询下个免密支付方式结果",payload:{allow_all_pay:n,next_channel:s}}),n?us.isMianmiChannelUsed(s)?{}:{nextChannel:s,allPayType:i}:{}}catch(r){return ys({error_msg:"查询下个免密支付方式异常"}),{}}}async performAutoSwitchPay(){if(!us.isSwitched){const{paymentType:e}=this.options;us.startChannel=function(e){switch(e){case jr.WeChat:return"WEIXIN";case jr.AliDirectDebitPay:return"ALIPAY";case jr.DuoDuoPay:return"DUODUOPAY";default:return""}}(e)}const{nextChannel:e,allPayType:t}=await this.getAutoSwitchChannel()||{};if(!e)return us.hide(),await new Promise((e=>{Object(kt.a)("免密支付失败，请更换支付方式",{onClose:e})})),Promise.reject({errorCode:-1});switch(us.recordMianmiChannel(e),e){case"WEIXIN_CREDIT":if(us.currentPaymentType=jr.XianYongHouFu,1==+t){us.hide(),await new Promise((e=>{Ms("免密支付失败，可使用先用后付<br>0元下单",{style:{maxWidth:"2.6rem"},onClose:e})}));const e=n()({optionalParams:{}},this.options);return e.optionalParams.isSignXianYongHouFu=!0,e.optionalParams.signScene=27,new Xs(e).pay().catch((()=>Promise.reject({errorCode:-1})))}return new Xs(this.options).pay();case"WEIXIN":return us.currentPaymentType=jr.WeChat,new mi(this.options).pay();case"DUODUOPAY":return us.currentPaymentType=jr.DuoDuoPay,new oi(this.options).pay();case"ALIPAY":return us.currentPaymentType=jr.AliPayDirectDebit,new ci(this.options).pay();default:return Promise.reject({errorCode:-1})}}};const ui=nn.a.error,pi=fs.WechatDirectPayQuery;var mi=class extends Ps{constructor(e){super(e),this.attrMap=e.attrMap;const t=Object(O.a)();this.isNative=t.isNativePlatform,this.isPayWechatDirectStatusVersion=Object(D.c)(t.version,"4.14.0")>=0,this.additionalParams=e.additionalParams,this.innerPay=new As(e).innerPay,this.autoSwitchPay=new di(e,this.appId)}get appId(){return this.innerPay.appId}prepayParams(){return n()(n()({},super.prepayParams()),{},{pap_pay:1})}isWechatDirectPayError(e){return[parseInt(ui.WxDirectPayWxBalanceError.code,10),parseInt(ui.WxDirectPayCardBalanceError.code,10),parseInt(ui.WxDirectPayTelephoneError.code,10),parseInt(ui.WxDirectPayCardInvalidError.code,10),parseInt(ui.WxDirectPayRefusedError.code,10),parseInt(ui.WxDirectPayUnknownError.code,10)].includes(e)}unregisterStatusMailBox(){!this.unregistered&&this.isNative&&this.isPayWechatDirectStatusVersion&&(this.unregistered=!0,Object(ae.g)("PDDInbox","unregister",{type:Ls.WechatDirect}))}realPay(e){var t=this;return 1===e.is_pap_pay?new Promise(((t,a)=>{const o=Date.now();let r=1,n=null;const s=e=>{Os({paymentType:jr.WeChat,errorCode:0,orderSn:this.orderSn,waitTime:Date.now()-o,paySource:e||0}),t()},i=({errorCode:e,paySource:t,cancelled:r,errorMsg:n})=>{Os({paymentType:jr.WeChat,errorCode:e||-1,orderSn:this.orderSn,waitTime:Date.now()-o,errorMsg:n,paySource:t||0}),a({errorCode:e,cancelled:r})};let l=null;const c=e=>{let t=-1;switch(e.status){case pi.Success:this.unregisterStatusMailBox(),us.hide(),us.showSuccess({payInfoTitle:"微信支付",title:"支付成功"},(()=>s(0)));break;case pi.Paying:e.wait_time>=0?n=setTimeout((()=>{l(++r)}),1e3*Math.min(e.wait_time||0,15)):i({errorCode:-1,paySource:0,errorMsg:'前端免密支付状态轮询为"Paying"但并未返回等待时间'});break;case pi.Failed:this.unregisterStatusMailBox(),t=e.error_info&&e.error_info.error_code?parseInt(e.error_info.error_code,10):parseInt(ui.WxDirectPayUnknownError.code,10),this.isWechatDirectPayError(t)||(t=parseInt(ui.WxDirectPayUnknownError.code,10)),Os({paymentType:jr.WeChat,orderSn:this.orderSn,errorCode:t||-1,waitTime:Date.now()-o,paySource:0,errorMsg:'前端免密支付状态轮询为"Failed"'}),a({errorCode:t,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}});break;case pi.NotFound:i({errorCode:-1,paySource:0,cancelled:!0,errorMsg:'前端免密支付状态轮询为"NotFound"'});break;default:i({errorCode:t,paySource:0,errorMsg:"未知的前端免密轮询状态："+e.status})}};l=e=>{e>4?i({errorCode:-1,paySource:0,errorMsg:"前端免密状态轮询超过4次"}):Cs.getInstance().post("api/qogir/payment/query/wechat/pappay",{order_sn:this.orderSn,times:e,attr_map:this.attrMap}).then(c).catch((({errorCode:e,errorObject:t})=>{i({errorCode:-1,errorObject:t,errorMsg:"调用前端免密状态轮询接口失败errorCode："+e})}))};Object(ha.a)(),us.show(),(()=>{this.isNative&&this.isPayWechatDirectStatusVersion&&Object(ae.g)("PDDInbox","register",{type:Ls.WechatDirect,receiver:(e,t)=>{let r;let i=(t.result||[])[0]||{};if(i=i.content,e||!i||i.order_sn!==this.orderSn)return void this.unregisterStatusMailBox();switch(parseInt(i.status||0,10)){case pi.Success:n&&clearTimeout(n),us.hide(),us.showSuccess({payInfoTitle:"微信支付",title:"支付成功"},(()=>s(1)));break;case pi.Failed:n&&clearTimeout(n),r=i.error_info&&i.error_info.error_code?parseInt(i.error_info.error_code,10):ui.WxDirectPayUnknownError.code,this.isWechatDirectPayError(r)||(r=ui.WxDirectPayUnknownError.code),Os({paymentType:jr.WeChat,orderSn:this.orderSn,errorCode:r||-1,waitTime:(new Date).getTime()-o,paySource:0}),a({errorCode:r,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}})}this.unregisterStatusMailBox()}})})(),n=setTimeout((()=>{l(r)}),1e3*Math.min(e.wait_time||0,15))})).catch((async function(e){if(Tt()(e,"extraErrorInfo.isWechatDirectPayFail")&&t.autoSwitchPay.isAutoSwitchEnabled)return t.autoSwitchPay.performAutoSwitchPay();throw us.hide(),e})):this.innerPay.realPay(e)}pay(){if(this.appId===this.config.AppID.WeChatH5Pay&&localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){const e={time:Date.now()};localStorage.setItem(nn.a.constant.LocalStorageKey.WeChatH5Pay,JSON.stringify(e));const t="transac_wechat_wapcallback.html?"+Object(m.b)(n()({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise(((e,a)=>{oe.a.reload(t)}))}return super.pay()}};var hi=class extends Ps{get appId(){return this.config.AppID.AliPay}prepayParams(){return n()({pap_pay:1,pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:n()(n()({},this.attributeFields),{},{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:""},this.params)}realPay(e){const t=jr.AliPayV2;return Object(ae.g)("JSPay","pay",{type:t,params:e}).then((e=>(Os({paymentType:t,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:a}=e;return Os({paymentType:t,errorCode:a+"",orderSn:this.orderSn}),Promise.reject({errorCode:a})}))}};var fi=class extends Ps{constructor(e){super(e),this.prepayType=e.prepayType,this.additionalParams=e.additionalParams}get appId(){return this.config.AppID.AliPayWeb}prepayParams(){const e=Object(m.h)("transac_wappay_callback.html",n()({order_sn:this.orderSn,prepay_type:this.prepayType},this.additionalParams));return n()({pay_app_id:this.appId,pap_pay:1,version:this.paymentVersion,attribute_fields:n()(n()({},this.attributeFields),{},{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:e},this.params)}realPay(e){return new Promise(((t,a)=>{location.href=e.gateway_url+"?"+Object(m.b)(e.query)}))}};var gi=class{constructor(e){this.innerPay=null,Object(O.a)().isNativePlatform?this.innerPay=new hi(e):this.innerPay=new fi(e)}pay(){return this.innerPay.pay()}};var _i=class extends Ps{get appId(){return this.config.AppID.QQ}realPay(e){return Object(ae.g)("JSPay","pay",{type:jr.QQPay,params:e}).then((e=>(Os({paymentType:jr.QQPay,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:t}=e;return Os({paymentType:jr.QQPay,errorCode:t+"",orderSn:this.orderSn}),Promise.reject({errorCode:t})}))}};const yi=-11001;var bi=class extends Ps{get appId(){return this.config.AppID.QQPublicPayment||this.config.AppID.QQPublic}realPay(e){return new Promise(((t,a)=>{const o=()=>{void 0===window.mqq.tenpay?(Object(At.c)(new Error("window.mqq.tenpay未定义")),a({errorCode:0})):"function"!=typeof window.mqq.tenpay.pay&&(Object(At.c)(new Error("window.mqq.tenpay.pay不是一个函数")),a({errorCode:0}));const o="appid#"+this.config.ApiKey.QQPublicTrack+"|bargainor_id#"+this.config.ApiKey.QQPublicMid+"|channel#wallet";window.mqq.tenpay.pay({tokenId:e.token_id,pubAcc:this.config.ApiKey.QQUIN,pubAccHint:this.config.qqFollowTip,appInfo:o},(e=>{Os({paymentType:jr.QQPay,errorCode:e.resultCode+""||"",orderSn:this.orderSn});const o="object"==typeof e&&0===parseInt(e.resultCode,10),r=e&&+e.resultCode===yi,n=e&&-1==+e.resultCode&&"用户主动放弃支付"===e.retmsg,s=r||n,i=n?yi:e.resultCode;o?t(e):s?a({errorCode:i,cancelled:!0}):(Object(At.c)(new Error("window.mqq支付失败"),{data:JSON.stringify(e)}),a({errorCode:i}))}))};"undefined"==typeof mqq?setTimeout((function(){"undefined"==typeof mqq?(Object(At.c)(new Error("window.mqq未定义")),a({errorCode:0})):o()}),2e3):o()}))}};var vi=class{constructor(e){const t=Object(O.a)().isQQPlatform;this.innerPay=t?new bi(e):new _i(e)}pay(){return this.innerPay.pay()}};var ki=class extends Ps{constructor(e){super(e),this.orderSn=e.orderSn}get appId(){return this.config.AppID.ApplePay}realPay(e){return e.money_order=e.money_order+"",e.server_time=e.server_time+"",Object(ae.g)("JSPay","pay",{type:jr.ApplePay,params:e}).then((e=>(Os({paymentType:jr.ApplePay,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:t,data:a}=e;return Os({paymentType:jr.ApplePay,errorCode:t+"",orderSn:this.orderSn}),Promise.reject({errorCode:t,errorObject:a})}))}};var Ii=class extends Ps{get appId(){return this.config.AppID.HBInstallmentPay}realPay(e){return Object(ae.g)("JSPay","pay",{type:jr.HBInstallmentPay,params:e}).then((e=>(Os({paymentType:jr.HBInstallmentPay,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:t}=e;return Os({paymentType:jr.HBInstallmentPay,errorCode:t+"",orderSn:this.orderSn}),Promise.reject({errorCode:t})}))}};var wi=()=>{const e=Object(O.a)();return!!e.isNativePlatform&&Object(D.c)(e.version,"3.51.0")>=0};var Si=class extends Ps{get appId(){return 322}realPay(e){return wi()?Object(ae.g)("JSPay","pay",{type:jr.AliPayV2,params:e}).then((e=>(Os({paymentType:jr.HBPay,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:t}=e;return Os({paymentType:jr.HBPay,errorCode:t+"",orderSn:this.orderSn}),Promise.reject({errorCode:t})})):(Object(At.c)(new Error("当前APP版本不支持花呗支付")),Promise.reject({errorCode:0}))}};var Ei=class extends Ps{get appId(){return 135}realPay(e){const{prepay_id:t}=e;return new Promise((()=>{Object(ha.a)(),us.show({title:"转账支付中"}),setTimeout((()=>{us.hide(),oe.a.reload(`transac_return_compensation.html?_t_timestamp=sub_bank_transfer_guide&prepay_id=${t}&order_sn=${this.orderSn}`)}),1e3)}))}};var Ci=class extends Ps{get appId(){return 42001}realPay(e){return Object(ae.g)("JSPay","pay",{type:jr.UnionPay,params:e}).then((e=>(Os({paymentType:jr.UnionPay,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:t}=e;return ys({payload:{event:"app_unionpay_pay",order_sn:this.orderSn,error_code:t+""}}),Promise.reject({errorCode:t})}))}};var Pi=class extends Ps{get appId(){return 45001}realPay(e){return Object(ae.g)("JSPay","pay",{type:jr.DuoDuoPay,params:e}).then((e=>(Os({paymentType:jr.CreditCardInstallmentPay,errorCode:"0",orderSn:this.orderSn}),e))).catch((e=>{Ds(e);const{errorCode:t}=e;return Os({paymentType:jr.CreditCardInstallmentPay,errorCode:t+"",orderSn:this.orderSn}),Promise.reject({errorCode:t})}))}};var Ni={pay(e){const{paymentType:t}=e;void 0===e.isSupportDirectPay&&(e.isSupportDirectPay=!0);const a=Object(O.a)(),o=a.isWeChatPlatform,r=a.isWeChatMiniProgram,n=a.isNativePlatform;let s=bs;switch(t){case jr.WeChat:s=r?Ns:e.isSupportDirectPay?mi:As;break;case jr.AliPay:o||(s=gi);break;case jr.AliPayDirectDebit:o||(s=ci);break;case jr.QQPay:o||(s=vi);break;case jr.ApplePay:n&&a.system===D.b.IOS&&(s=ki);break;case jr.HBInstallmentPay:o||(s=Ii);break;case jr.HBPay:s=Si;break;case jr.DuoDuoPay:s=oi;break;case jr.XianYongHouFu:s=Xs;break;case jr.DuoDuoPayACS:s=Ei;break;case jr.UnionPay:s=Ci;break;case jr.CreditCardInstallmentPay:s=Pi}const i=Tt()(e,"optionalParams.ddpayMianmiV2"),l=Tt()(e,"optionalParams.mianmiAutoSwitch");return us.init({paymentType:t,ddpayMianmiV2:i||l}),new s(e).pay()}};function Oi(){const e=Object(O.a)();if(e.statisfy&&e.statisfy("1.2.2","2.0.8","greaterThan")||e.isTinyNativePlatform)Object(ae.g)("JSNavigation","selectTab",{tab_index:0});else{const t="index.html";e.isNativePlatform||e.isTinyNativePlatform?Object(ae.g)("JSNavigation","reset",{url:Object(m.h)(t)}).then((()=>oe.a.reload(t)),(()=>oe.a.reload(t))):oe.a.uniformForward(t)}}const Di=1,xi=2,Ti=3,ji=4,Ai=7;function Li(e){const t=Tt()(e,"type",0),a=Tt()(e,"param.url");switch(t){case Di:return()=>oe.a.uniformForward(a);case xi:return()=>oe.a.back(a);case Ti:return Oi;case ji:return()=>oe.a.reload(a);case Ai:return()=>location.reload()}}const Ri="toast",Mi="nothing",Bi="alert",Fi="confirm";function zi(e){const{errorCode:t,errorObject:a}=e,o=Tt()(a,"error_payload");if(!o)return null;let r=Tt()(o,"view_style",Ri);if(r===Mi)return Promise.reject({errorCode:t,errorHandling:{isErrorAlerted:!0}});const n=Tt()(o,"view_object.message")||"";let s=Tt()(o,"view_object.title")||"";n||(s=s||`系统繁忙，请稍后再试 (${t})`);let{onOk:i,onCancel:l,onShow:c}=function(e){const{on_show:t,on_ok:a,on_cancel:o}=e||{};return{onShow:Li(t),onCancel:Li(o),onOk:Li(a)}}(Tt()(o,"view_object"))||{};const d=Tt()(o,"view_object.ok_label")||"确定",u=Tt()(o,"view_object.cancel_label")||"取消",p=+Tt()(o,"view_object.on_close.type");return new Promise(((e,a)=>{const o=e=>()=>{e?e():a({errorCode:t,errorHandling:{isErrorAlerted:!0}})};switch(r){case Bi:Ua({title:s,text:n,onConfirm:o(i),onClose:o(i),confirmButtonLabel:d});break;case Fi:Object(Io.a)({title:s,text:n,onConfirm:o(i),onCancel:o(l),onClose:o(2===p?i:l),cancelButtonLabel:u,confirmButtonLabel:d});break;default:Object(kt.a)(s,{onClose:o(c)})}}))}const Hi={"0010":"交易金额超限，建议更换其他支付方式或稍后重试","0014":"银行阻止了该银行卡交易，建议更换支付方式付款或咨询银行如何解决","0116":"银行卡密码错误次数超限，建议更换其他支付方式或稍后重试","0119":"您的银行卡暂不支持在线支付业务，建议更换其他支付方式或联系银行客服","0124":"您的银行卡余额不足，建议更换其他支付方式"};const Vi=nn.a.error;const Ui="当前支付方式不稳定，请更换其他支付方式",Wi={[Vi.WithoutWeChatClient.code]:"您未安装微信或微信版本过低，建议安装新版微信后重试或使用其他支付方式",60137:"您未安装微信，请安装后再支付或选择其他支付方式重新支付",60138:"您使用的微信非官方版本，建议到官方渠道下载再重新支付",60139:"当前支付方式不可用，请选择其他支付方式再重新支付",60170:"您未安装云闪付或云闪付版本过低，建议安装新版云闪付后重试或使用其他支付方式",60145:Ui,60146:Ui,60105:Ui};function Gi(e){const{errorCode:t}=e,a=zi(e);if(a)return ms(),a;const o=function(e){const{errorCode:t,errorObject:a={}}=e;if(60136!=+t)return null;const{sdk_return_code:o}=a,r=Hi[o]||"交易失败，建议更换其他支付方式或稍后重试";return new Promise(((e,a)=>{const o=()=>{a({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Ua({title:r,onConfirm:o,onClose:o})}))}(e);return o?(ms(),o):t===parseInt(Vi.NativePaymentCancel.code,10)?Promise.reject({errorCode:t,cancelled:!0}):t===parseInt(Vi.QQPayFailed.code,10)?(ms(),new Promise(((e,a)=>{const o=()=>{a({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Ua({title:"由于QQ版本问题或未安装QQ\n暂时无法使用QQ钱包\n\n请安装新版QQ或选择其他支付方式",onConfirm:o,onClose:o})}))):Wi[t]?(ms(),new Promise(((e,a)=>{const o=()=>{a({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Ua({title:Wi[t],onConfirm:o,onClose:o})}))):function(e){return[parseInt(Vi.ItemRemoved.code,10),parseInt(Vi.OutOfStock.code,10),parseInt(Vi.GroupInvalid.code,10),parseInt(Vi.OverBuyLimit.code,10),parseInt(Vi.OrderPayed.code,10),parseInt(Vi.PrepayBusy.code,10),parseInt(Vi.PaymentDisabled.code,10),parseInt(Vi.OverBuyVirtualGoodsLimit.code,10)].includes(e)}(t)?(ms(),new Promise(((e,a)=>{const o=()=>{a({errorCode:t,errorHandling:{isErrorAlerted:!0}})};Ua({title:Vi.getMsgFromCode(t),onConfirm:o,onClose:o})}))):Promise.reject(e)}const qi=fs.PayStatus,Qi=fs.ParentOrderStatus,Yi=nn.a.error;let Ji;Ji=Object(O.a)().isNativePlatform;const Xi=nn.a.constant;class Ki{constructor(){this.orderPaidTimes=0,this.attributeFields=null,Ji?Object(ae.g)("AMStorage","get",{key:Xi.LocalStorageKey.OrderPaidTimes}).then((e=>{this.orderPaidTimes=parseInt(e.value||0,10),this.attributeFields={paid_times:this.orderPaidTimes}})):(this.orderPaidTimes=+localStorage.getItem(Xi.LocalStorageKey.OrderPaidTimes),isNaN(this.orderPaidTimes)&&(this.orderPaidTimes=0),this.attributeFields={paid_times:this.orderPaidTimes})}async defaultCheckOrderStatus({maySuccess:e,orderSn:t,prepayType:a}){const o=function(e){return new Promise((t=>{setTimeout(t,e)}))},r=({retryTime:o})=>{let r,n;return a===gs.Combine?(r="api/aristotle/pay_check_parent_order",n={times:o,success:e?1:0,parent_order_sn:t}):(r="api/aristotle/pay_check",n={times:o,success:e?1:0,order_sn:t}),Cs.getInstance().post(r,n)};let n=1;for(;n<6;){ys({error_msg:`paycheck_${e?"maysuccess":"mayfail"}_${n}`,payload:{event:"paycheck",order_sn:t}});try{const{wait_time:e,parent_order_status:t,pay_status:s}=await r({retryTime:n});if(+t!=+Qi.Unpayed&&+s!=+qi.Unpayed||!(e>0))return a===gs.Combine?+t==+Qi.Payed?{parentOrderStatus:t}:Promise.reject({errorCode:"defaultCheckOrderStatusFail"}):+s==+qi.Payed?{orderStatus:1}:Promise.reject({errorCode:"defaultCheckOrderStatusFail"});await o(1e3*e)}catch(s){throw(s=s||{}).errorCode||(s.errorCode="unknown"),s}n++}return Promise.reject({errorCode:"defaultCheckOrderStatusFail"})}checkOrderStatus({service:e,timeout:t,success:a,orderSn:o,prepayType:r}){let n=!0;return Promise.race([new Promise(((e,a)=>{setTimeout((()=>{n?a():e()}),t||1e4)})),e({maySuccess:a,orderSn:o,prepayType:r}).then((e=>(n=!1,e)))]).then((e=>(e&&1===e.orderStatus&&(Ji?Object(ae.g)("AMStorage","set",{key:Xi.LocalStorageKey.OrderPaidTimes,value:this.orderPaidTimes+1+""}):localStorage.setItem(Xi.LocalStorageKey.OrderPaidTimes,this.orderPaidTimes+1)),e))).catch(((e={})=>{throw{errorCode:e.errorCode||-1,extraErrorInfo:{isCheckOrderFail:!0}}}))}pay(e){const{paymentType:t,orderSn:a}=e;if(t&&t!==jr.FriendPay&&(Ji&&Object(ae.g)("AMStorage","set",{key:"last_payment_type2",value:t.toString()}),localStorage.setItem(Xi.LocalStorageKey.LastPaymentType,t.toString())),ys({payload:{event:"before_prepay",payment_type:t,order_sn:a}}),t===jr.FriendPay)return Promise.resolve({redirectToFriendPay:!0});const o=e.checkOrderStatus&&"function"==typeof e.checkOrderStatus?e.checkOrderStatus:this.defaultCheckOrderStatus;let r=null;return e.attributeFields=n()(n()({},e.attributeFields),this.attributeFields),Ni.pay(e).then((t=>(r=t,null!==e.checkOrderStatus?this.checkOrderStatus({service:o,timeout:e.checkOrderTimeout,success:!0,orderSn:a,prepayType:e.prepayType}):t))).then((e=>{var a;const o=null===(a=r)||void 0===a?void 0:a.xyhfSwitchedToWechat;return[t,us.currentPaymentType].includes(jr.XianYongHouFu)&&!o?new Promise((t=>{us.showSuccess({title:"下单成功",payInfoTitle:"先用后付"},(()=>t(e)))})):e})).then((e=>e!==r?n()(n()({},e),r):r)).catch(((r={})=>{([t,us.currentPaymentType].includes(jr.XianYongHouFu)||us.isSwitched&&us.currentPaymentType===jr.AliPayDirectDebit)&&us.hide();const{errorCode:n}=r;if((0==+n||-1==+n||+n==+Yi.NativeNormalError.code||60160==+n)&&null!==e.checkOrderStatus)return this.checkOrderStatus({service:o,timeout:e.checkOrderTimeout,success:!1,orderSn:a});throw r})).catch(((t={})=>{const a=Tt()(e,"optionalParams.errorCodeBlackList")||[],{errorCode:o}=t;if(Array.isArray(a)&&a.map((e=>+e)).includes(+o)||"defaultCheckOrderStatusFail"===o)throw t;if(Tt()(e,"optionalParams.skipDefaultErrorHandler"))throw t;return Gi(t)}))}setHttpService(e){if(!e||!("post"in e)||"function"!=typeof e.post)throw new window.Error("pay.setHttpService的参数必须包含post方法");Cs.setInstance(e)}}let $i={};$i=new Ki;var Zi=$i,el=a("3Yh8");function tl(e=null){if(!Array.isArray(e))return;let t;try{t=e.reverse().find(((e,t)=>{if(0===t)return!1;const{pathName:a,pageType:o,pageTimestamp:r,forceSkip:n}=function(e){const t=e.page_url||"",a=e.page_type||"",o=t.split("/"),r=o[o.length-1].split("?")[0],n=Object(m.g)(t);return{pageUrl:t,pageType:a,pathName:r,pageTimestamp:n._t_timestamp,forceSkip:"1"===n.__fast_return_skip}}(e),s=/^\/?(vns_)?(goods|group|order_checkout|comm_goods_shoes)\d*\.html/.test(a),i=["pdd_order_confirm","pdd_goods_detail","pdd_goods_detail_photo_video_browser","pdd_comment_list_picture_browser","pdd_comment_list_picture_preview","pdd_goods_detail_photo_video_browser","pdd_comment_browse","pdd_comment_picture_list","pdd_chat_combined_payment"].includes(o),l=["comm_goods_trip"].includes(r);return!(s||i||l||n)}))}catch(a){}return t}function al({url:e,name:t}){if(Object(O.a)().statisfy("5.95.0","5.90.0","greaterThanEqual")){const{new_window:a}=Object(m.g)(e)||{},o={url:Object(m.a)({launch_type:"highlayer"},e),new_window:""+a=="0"?0:1,display_type:0,block_loading:1,delay_loading_ui_time:500,name:t};Object(ae.g)("JSUniPopup","showHighLayer",{model:o,global:1}).catch((()=>null))}else Object(ae.g)("PDDPopupManager","showWebLayerAndForward",{model:{url:e,data:"{}"}}).catch((()=>null))}const ol=nn.a.constant;function rl(e,t={}){const a=Object(O.a)(),o=a.statisfy&&a.statisfy("2.6.0","2.14.0","greaterThanEqual");async function r(t){let a=null,r=null;if(null!=t&&(a=t.group_order_id,r=t.pay_status),+r==+ol.PaymentStatus.Payed&&null!=a&&(t.orderStatus=1,t.groupOrderID=a,o)){const a={order_sn:e,order_status:t.order_status,pay_status:t.pay_status,shipping_status:t.shipping_status,rate_status:t.rate_status,has_extended:0};try{await Object(io.e)("OrderStatusChangedNotification",a)}catch(n){}}return t}return async({maySuccess:a})=>{const o=function({count:t}){return Oa({method:"GET",url:`api/aristotle/pay_check?order_sn=${e}&times=${t}&success=${a?1:0}`}).catch((e=>{const{errorCode:t}=e,{data:a}=e.response||{};throw e={errorCode:t,data:a}}))},n=function(e){return new Promise((t=>{setTimeout(t,1e3*e)}))};let s=1;for(;s<=5;){const c=new Promise(((e,t)=>{setTimeout((()=>{t({errorCode:"timeout"})}),9500)}));Object(_s.a)({error_message:`before_paycheck_${a?"maysuccess":"mayfail"}_${s}`,payload:{event:"paycheck",order_sn:e}});try{location.href.includes("hutaojie.com")&&wa("[hutaojie]: 第"+s+"次查单");const a=await Promise.race([o({count:s}),c])||{};if(a.order_goods=[{event_type:a.event_type}],!(+a.pay_status==+ol.PaymentStatus.Unpayed&&a.wait_time>0))return Object(M.d)({op:"event",event:"pay_order",sub_op:"pay_order",goods_id:t.goodsID,order_sn:e,group_order_id:a.groupOrderID,order_amount:t.orderAmount,pay_app_id:t.appID}),r(a);await n(a.wait_time)}catch({errorCode:i,data:l}){throw Object(At.c)(new Error("paycheck_fail"),{error_message:"paycheck_fail_"+i,order_sn:e,payload:JSON.stringify(l)}),new Error({errorCode:i,data:l})}s++}}}const nl=e=>{e=e||{};let t="/order.html?"+Object(m.b)(e);const a=Tt()(Object(m.g)(location.href),"last_host")||"";a&&location.hostname!==a&&(t="//"+a+t),oe.a.uniformForward(t)};async function sl(e={},t={},a){const o=Object(O.a)();if(1===Tt()(e,"orderStatus")){if(t.fastReturn&&Object(D.c)(o.version,"4.48.0")>=0){const o=Object(m.a)({group_order_id:e.groupOrderID,order_sn:e.order_sn},t.fastReturn),r=await async function(){const e=Object(O.a)();return!e.isNativePlatform||Object(D.c)(e.version,"3.61.0")<0?null:Object(ae.g)("PDDNavigator","pageSourceStack",{}).then((e=>e&&e.pageSourceStack?tl(e.pageSourceStack):null)).catch((()=>null))}();if(a.paySuccessCb)return al({url:o,name:"grp_lite_group_web"}),a.forwardHideSkuSelect&&a.forwardHideSkuSelect(),void a.paySuccessCb({url:o});if(r)return al({url:o,name:"grp_lite_group_web"}),a.forwardHideSkuSelect&&a.forwardHideSkuSelect(),void function(e){Object(ae.g)("PDDNavigator","backToGoodsList",e)}(r)}e.prepayType=t.prepayType,((e,t)=>{const a=Object(m.g)(location.href),o=Tt()(a,"last_host")||"";let r=Object(m.a)({group_order_id:e.groupOrderID,order_sn:e.order_sn},oe.a.GroupUrl);o&&o!==location.hostname&&(r="//"+o+"/"+r);const n=t.sourceChannel,s=Tt()(a,"refer_page_el_sn"),i=e.eventType,l=e.bizType,c=e.groupOrderID;let d=oe.a.genGroupPageUrl({goodsEventType:i,urlParams:{group_order_id:c,biz_type:l,source_channel:n,refer_page_el_sn:s,source_redirect:e.prepayType,order_sn:e.order_sn},addRandomSuffix:!0,useSpecDomain:!1});o&&o!==location.hostname&&(d="//"+o+"/"+d),d.length>0&&(r=d),t.forwardHideSkuSelect&&t.forwardHideSkuSelect(),oe.a.uniformForward(r)})(e,a)}else a.forwardHideSkuSelect&&a.forwardHideSkuSelect(),nl({order_sn:e.order_sn,check_order_payed:0})}function il(e){Object(O.a)().isWeChatMiniProgram||(e.showRepayModifyPanel?e.showRepayModifyPanel():wa("支付未完成，请重新支付"))}function ll({orderSn:e,error:t,defaultOnFailed:a,ocManager:o}){const{errorCode:r,extraErrorInfo:{isCheckOrderFail:n}={},errorHandling:{isErrorAlerted:s}={}}=t;if(!s)return n?(o.forwardHideSkuSelect&&o.forwardHideSkuSelect(),void nl({order_sn:e,check_order_payed:0})):void a(r);a(-1)}const cl=1,dl=2,ul=3,pl=4,ml=7;function hl(e,t){const a=()=>{};if(!e)return a;const o=Tt()(e,"type",0),r=Tt()(e,"param.url"),n=Object(O.a)().isWeChatMiniProgram;switch(o){case cl:return()=>!n&&oe.a.forward(r);case dl:return()=>{n?window.wx.miniProgram.navigateBack():oe.a.back(r)};case ul:return()=>!n&&oe.a.home();case pl:return()=>!n&&oe.a.reload(r);case ml:return()=>location.reload();default:return a}}const fl="toast",gl="nothing",_l="alert",yl="confirm";function bl(e){if(e){const t=Tt()(e,"view_style",fl),a=Tt()(e,"view_object.message")||"";let o=Tt()(e,"view_object.title")||"";a||(o=o||"系统繁忙，请稍后再试");const{onOk:r,onCancel:n,onShow:s}=function(e,t){const{on_show:a,on_ok:o,on_cancel:r}=e||{},n={};return n.onShow=hl(a),n.onCancel=hl(r),n.onOk=hl(o),n}(Tt()(e,"view_object"))||{},i=Tt()(e,"view_object.ok_label")||"确定",l=Tt()(e,"view_object.cancel_label")||"取消",c=+Tt()(e,"view_object.on_close.type"),{isWeChatMiniProgram:d}=Object(O.a)();switch(t){case gl:break;case _l:Ua({title:o,text:a,onConfirm:d?void 0:r,onClose:d?void 0:r,confirmButtonLabel:d?"知道了":i});break;case yl:d?Ua({title:o,text:a,confirmButtonLabel:"知道了"}):Object(Io.a)({title:o,text:a,onConfirm:r,onCancel:n,onClose:2==+c?r:n,cancelButtonLabel:l,confirmButtonLabel:i});break;default:wa(o,{onClose(){s&&s()}})}}}el.a.$getMsgFromCode=el.a.getMsgFromCode;const vl="当前访问人数较多，请稍后重试",kl="当前商品已抢完，建议购买其他商品",Il={1101:vl,4000004:vl,45059:"系统繁忙，请您稍后再试！",50000001:"不支持的手机号",46022:"未满16周岁用户暂时不可购买此商品",45037:"系统繁忙，即将跳转到充值中心充值",46023:"购买该商品需要更新至最新客户端版本",45009:"当前支付方式服务不稳定，建议使用其他支付方式",512:vl,409:vl,511:vl,41003:kl,44093:kl,40000061:"您已购买过同类补贴商品，建议购买其他相似商品",40000062:"该商品同一用户仅能以补贴价格购买一件，你已购买过该商品，可邀请好友购买"};el.a.getMsgFromCode=function(e){return Il[e+""]||el.a.$getMsgFromCode(e)};var wl=el.a,Sl=a("x9OC");const El=1,Cl=3,Pl=31,Nl=33,Ol=34,Dl="1",xl="支付未完成，请重新支付",Tl=e=>{const{onConfirm:t,onClose:a}=e||{};Ua(n()(n()({},e),{},{onClose:a||t}))},jl=e=>[1101,4000004,409,512,511].includes(+e),Al=async({errorCode:e,data:t,handleUnclassifiedErrors:a,store:o})=>{e+="";let r=wl.getMsgFromCode(e);const{goodsId:n,goodsInfo:s}=o,i=Object(O.a)().isWeChatMiniProgram;if(((e,t)=>{const{EventType:a}=Sl.a;return[wl.OutOfStock.code,wl.GroupOverflow.code].indexOf(e)>=0&&[a.SPIKE,a.SUPER_SPIKE].indexOf(parseInt(t,10))>=0})(e,s.eventType))Tl({title:r,onConfirm:()=>{!i&&oe.a.reload("spike.html")}});else if((e=>[wl.OutOfStock.code].indexOf(e)>=0)(e))Tl({title:r,onConfirm:()=>{!i&&oe.a.reload(`per_similar_rec.html?goods_id=${n}&source=3`)}});else if((e=>[wl.ItemRemoved.code,wl.GroupInvalid.code,wl.OverBuyLimit.code,wl.OrderPayed.code,wl.OverBuyVirtualGoodsLimit.code,wl.GroupOverflow.code].indexOf(e)>=0)(e))Tl({title:r,onConfirm:()=>{!i&&oe.a.home()}});else if((e=>[wl.MultiplyDiscountEnd.code,wl.MultiplyDiscountPause.code].indexOf(e)>=0)(e))Tl({title:r,onConfirm:()=>{location.reload()}});else if((e=>[wl.NotInLuckyTime.code].indexOf(e)>=0)(e))Tl({title:r,onConfirm:()=>{!i&&oe.a.reload("vns_goods_list.html?cid=checkout_expire_choujiang&_ex_src=order_checkout&_ex_sid=checkout_expire_choujiang")}});else if((e=>[wl.PersonalInfoNoID.code].indexOf(e)>=0)(e))Tl({title:r,onConfirm:()=>{}});else if((e=>[wl.GroupAutoOpenSuccess.code].indexOf(e)>=0)(e))wa("拼单已满");else if((e=>[wl.SpikeComing.code].indexOf(e)>=0)(e))Tl({title:r,onConfirm:()=>{}});else if((e=>[+wl.WxDirectPayWxBalanceError.code,+wl.WxDirectPayCardBalanceError.code,+wl.WxDirectPayTelephoneError.code,+wl.WxDirectPayCardInvalidError.code,+wl.WxDirectPayRefusedError.code,+wl.WxDirectPayUnknownError.code].indexOf(+e)>=0)(e))Tl({title:"微信免密支付不成功",text:r,confirmButtonLabel:"知道了",onConfirm:()=>{wa(xl)}});else if((e=>[wl.NeedVerfication.code].indexOf(e)>=0)(e))!i&&oe.a.forward("verification.html?scene_type=25");else if((e=>[wl.OrderSpikeMsgError.code].indexOf(e)>=0)(e))t&&t.error_msg&&Tl({title:t.error_msg,onConfirm:()=>{!i&&oe.a.home()}});else if((e=>[wl.IDCardEmpty.code,wl.IDCardFake.code,wl.IDCardFailTooMuch.code].indexOf(e)>=0)(e))wa(r);else if(e===wl.AvailableActivityChanged.code)Tl({title:r,onConfirm:()=>{!i&&oe.a.reload()}});else if("0"===e||"54001"===e);else if(a)if(!r&&parseInt(e,10)>0&&(r=`系统繁忙，请稍后再试 (${e})`,Object(At.c)(new Error("order_err_unknown"),{error_message:"err_unknown_"+e})),jl(e)){const e=o.cureNCov>0?o.cureNCov:200;e>0&&(await new Promise((t=>setTimeout(t,Math.min(e,3e3)))),ms(),await new Promise((e=>setTimeout(e,100))));const a=Tt()(t,"error_payload");a?bl(a):Tl({title:r})}else wa(r)};function Ll({errorCode:e,data:t,handleUnclassifiedErrors:a,ocData:o}){e=parseInt(e,10);const r=Tt()(t,"error_payload");if(!r)return Al({errorCode:e,data:t,handleUnclassifiedErrors:a,store:o});{const n=Tt()(r,"cure_ncov"),s=Tt()(r,"order_path");if(n>=0&&(o.cureNCov=n),s&&(o.orderServicePath=s),4000004===e)return Al({errorCode:e,data:t,handleUnclassifiedErrors:a,store:o});bl(r)}}a("vN+2"),a("PtqM"),a("lSCD");var Rl=a("xJ31"),Ml=a("AGSb");const Bl={[D.a.PddAndroid]:"3",[D.a.PddIOS]:"5",[D.a.PDDTinyAndorid]:"59",LITE:"33"},Fl="pdd_user_id";var zl=a("fkZF"),Hl=a("gNBk");function Vl(e){if(!e)return 0;let[t,a,o]=e.split(".");return[a,o]=[a,o].map((e=>"string"!=typeof e?"00":e.padStart(2,"0"))),+[t,a,o].join("")}Object(At.a)((function(e){const t=window.__MONITOR_INFOS__;return t&&t.reqId?`monitor_${e}_${t.reqId}`:`monitor_${e}_${Object(zl.a)()}`}));const Ul={appId:"",bizSide:""};function Wl(e=[],t,a,o){if(!e.length)return;const r=function(e,t={},a){const o=Math.pow(10,5)+Math.floor(Math.random()*(Math.pow(10,6)-Math.pow(10,5))),r=Date.now();return{version:a?0:Vl(Hl.a.version),report_time_ms:r,rand_num:o,crc32:Object(Rl.a)(r+"-"+o),biz_side:t.bizSide||Ul.bizSide||"pinduoduo",app:String(t.appId||Ul.appId||"138"),common_tags:{uid:Object(Ml.a)(Fl)||"0",runningAppId:Hl.a.isNativePlatform?Hl.a.isLiteNativePlatform?Bl.LITE:Bl[Hl.a.platform]||"-1":"-1"},datas:e}}(e,a,o);Object(Hl.d)(t,r)}const Gl=Object(At.a)((function(e){const{protocol:t}=window.location;return`${"amcomponent:"===t?"https:":t}//${window.__PMM_HOST__||"pmmtk.pinduoduo.com"}/${e}`}));function ql(e,t){return Object.keys(e).reduce(((a,o)=>(t(a,o,e[o]),a)),{})}function Ql(e){return void 0===e?e:String(e)}var Yl=function(e,t={}){const{groupConfig:a}=t;(()=>{const t=[];e.mutipleKvList.forEach((e=>{const a=e.tags,{groupId:o}=a,r=Rt()(a,["groupId"]);t.push({groupId:o,tags:r,fields:e.fields,longFields:e.longFields})})),function(e=[],t,a=!1){Array.isArray(e)||(e=[e]);const o=[];e.forEach((e=>{const{groupId:t,amplifyRate:a=1,tags:r={},fields:n={},longFields:s={}}=e;if(!t)return;const i=ql(r,((e,t,a)=>e["custom_"+t]=Ql(a))),l=ql(s,((e,t,a)=>e[t]={values:[parseInt(a,10)||0]})),c=ql(n,((e,t,a)=>e[t]=Ql(a))),d={category:4,type:400,id_raw_value:String(t),timestamp:Date.now(),tags:i,lvalues:l,extras:c,api_ratio:a};o.push(d)})),Wl(o,Gl("api/pmm/defined"),t,a)}(t,a)})()};a("SxTj"),a("m7/H");const Jl=async({groupId:e="",customFields:t={},customLongFields:a={},customTags:o={},groupConfig:r={},useBothReport:s=!0})=>{if(!e)return void 0;Object.keys(o).length;const i=Object(Hl.b)(),{sampleRate:l,amplifyRate:c}=i;if(Math.random()>l)return;const d=location.href,u=Object(Ml.a)(),p=Object(ia.e)(),m=n()({groupId:e,pageName:p,type:"cmt_log"},o);Yl({mutipleKvList:[{tags:m,fields:n()({url:d,uid:+u.pdd_user_id||0,userAgent:navigator.userAgent},t),longFields:n()(n()({},a),{},{amplifyRate:c})}]},{reportCmtcByH5:!0,groupConfig:r,useBothReport:s})},Xl=e=>{document.readyState,Jl(e).catch((e=>{}))},Kl=async(e,t=!1)=>{if(t)Xl(e);else try{"function"==typeof window.requestIdleCallback&&await new Promise((e=>window.requestIdleCallback(e,{timeout:1e3}))),await Jl(e)}catch(a){}};const $l=e=>{const t=String(e).split(".").reverse().reduce(((e,t,a)=>+e+ +t*Math.pow(100,a)),0);return t>=48700?"after487":t>=45300?"453to486":t>=42600?"426to452":t>=4e4?"400to425":t>=35100?"351to399":t>0?"below350":0};function Zl(){const e=location.hostname;return["mobile.yangkeduo.com","m.pinduoduo.net","sc.yangkeduo.com"].includes(e)?e:"other"}const ec=({groupId:e="10242",customTags:t,customFields:a={},customLongFields:o}={})=>{const r=ia.a.getInstance().getPageName(),s=Object(O.a)(),{version:i}=s;Kl({groupId:e,customTags:n()({pageName:r,verNo:$l(i),host:Zl(),platform:s.platform},t),customFields:a,customLongFields:o})};var tc=({paymentType:e,hostName:t,userAgent:a})=>{let o,r,n,s;t=location.hostname;let i=Object(O.a)();o=i.isNativePlatform,r=i.isWeChatPlatform,s=i.isWeChatMiniProgram,n=i.isTinyNativePlatform;const l=nn.a.get(t,a);if(e===jr.WeChat)return o||r||n?l.AppID.WeChat:l.AppID.WeChatH5Pay;if(e===jr.AliPay)return o?l.AppID.AliPay:l.AppID.AliPayWeb;if(e===jr.QQPay)return o?l.AppID.QQ:l.AppID.QQPublicPayment||l.AppID.QQPublic;if(e===jr.ApplePay)return l.AppID.ApplePay;if(e===jr.AliPayDirectDebit)return l.AppID.AliPayDirectDebit;if(e===jr.HBInstallmentPay)return l.AppID.HBInstallmentPay;if(e===jr.UnionPay){if(o)return 42001}else{if(e===jr.FriendPay)return l.AppID.FriendPay;if(e===jr.HBPay)return 322;if(e===jr.DuoDuoPay)return 97;if(e===jr.XianYongHouFu)return"m.hutaojie.com"===t?s?119:r?118:115:s?131:r?130:122;if(e===jr.DuoDuoPayACS)return 135;if(e===jr.CreditCardInstallmentPay)return 45001}return l.AppID.WeChat};const ac=1,oc=4,rc=5,nc=6,sc=7,ic=10,lc=9,cc=12,dc=13,uc=1,pc=2,mc=3,hc="_oc_",fc="_oc_goi",gc="force_share",_c="duoduo_type",yc="award_type",bc="biz_type",vc="pid",kc="cps_sign",Ic="out_group_order_id",wc="original_front_env",Sc="biz_tag",Ec="phone_card_id",Cc=1001,Pc=1002,Nc=1003,Oc=1004,Dc=1005,xc=1006,Tc=1009,jc=1012,Ac=1013,Lc=1016,Rc=1017,Mc=({userAgent:e,queries:t})=>Object(O.b)(e).isWeChatPlatform&&t&&"miniprogram"===t._x_sid;function Bc(e,t){return e[t]||e[hc+t]}const Fc=e=>{const t={};if(!e)return t;const a=new RegExp(hc);for(const r in e)if(r.startsWith(hc)){t[r.replace(a,"")]=e[r]}const o=e[Ec];return o&&(t[Ec]=o),t};function zc(){const e=Object(O.a)(),t=e.isNativePlatform,a=e.isPureWeChatPlatform,o={prom:["gp","rpchs","brandvip","jsfdpd","agbc","rlc","mpp"]};return(t||a)&&(o.pay=["wxc","ci"]),o}const{EventType:Hc,GoodsType:Vc}=Sl.a;function Uc(){const e=[];for(let t=0;t<arguments.length;t++){const a=parseInt(arguments[t],10)||0;a>0&&e.push(a)}return e.length?Math.min(...e):1}const Wc=e=>e?{styleType:e.style_type,fontColor:e.font_color,fontSize:e.font_size,bgColor:e.bg_color,dropdownType:e.dropdown_type}:null,Gc=e=>{if(!e)return{platformPromotion:null,tradeInInfo:null};const t=e.platform_promotion_consult_vos&&e.platform_promotion_consult_vos.find((e=>!Tt()(e,"extra_display_map.trade_in_info"))),a=e.platform_promotion_consult_vos&&e.platform_promotion_consult_vos.find((e=>Tt()(e,"extra_display_map.trade_in_info")));let o=null;t?o={promotionUniqueNo:t.promotion_unique_no,promotionIdentityVo:t.promotion_identity_vo,discount:t.discount,notUse:e.not_use,category:e.category_name,displayName:e.display_name,promotionStatus:parseInt(t.promotion_status||0,10)}:e.not_use&&(o={notUse:e.not_use,category:e.category_name,displayName:e.display_name,promotionStatus:El});return{platformPromotion:o,tradeInInfo:a?Qc(Tt()(a,"extra_display_map.trade_in_info")):null,tradeInInfoPromotion:a}},qc=e=>{if(e)return e.map((e=>{if(e)return{tagType:e.tag_type,tagDisplayVo:Tt()(e,"tag_display_vo.display_items")}}))};function Qc(e,t=[]){let a=e;if("object"==typeof e&&null!==e)if(e instanceof Array){a=[];for(const o in e)a[o]=Qc(e[o],t)}else{a={};for(const o in e){const r=o.includes("_")?da()(o):o;t.includes(o)?a[r]=e[o]:a[r]=Qc(e[o],t)}}return a}var Yc,Jc={processCellStyle:Wc,processGoodsInfo:(e,t,a,o)=>{const r=e.goods_type,n=e.event_type,s=e.need_account;var i,l;return{name:e.goods_name,goodsId:e.goods_id,beforeNameIcon:e.goods_before_name_icon,beforeNameIconHeight:e.goods_before_name_icon_height,beforeNameIconWidth:e.goods_before_name_icon_width,allowedRegion:(e.allowed_region||[]).join(","),costProvinceCodes:e.cost_province_codes,isCustoms:e.is_customs,goodsType:r,eventType:n,mallId:e.mall_id,costTemplateId:e.cost_template_id,catId:e.cat_id,catId1:e.cat_id1,catId2:e.cat_id2,catId3:e.cat_id3,catId4:e.cat_id4,stockContent:e.stock_content,stockColor:e.stock_color,stockBackground:e.stock_background,realNameAuth:e.real_name_auth||0,goodsNumber:e.goods_number,isInstallment:e.huabei_status||0,goodsLabels:(l=e.labels||[],l.map((e=>{const t=e.css_vo||{};return{type:e.type,title:e.title,content:e.content,clickType:e.click_type||0,fontColor:t.font_color,fontSize:t.font_size}}))),groupId:t.group_id,customerNum:t.customer_num,buyLimit:t.buy_limit,startTime:t.start_time,thumbUrl:a.thumb_url||"",specs:Array.isArray(a.spec)?a.spec:[],specifications:Array.isArray(a.specifications)?a.specifications:[],skuId:a.sku_id,normalPrice:Object(Da.b)(a.normal_price),normalPriceForCent:a.normal_price,groupPrice:Object(Da.b)(a.group_price),groupPriceForCent:a.group_price,weight:a.weight,wareId:parseInt(a.ware_id,10)?a.ware_id:"",activityId:e.activity_id,activityType:e.activity_type,unitPriceForCent:e.unit_price,unitPrice:Object(Da.b)(e.unit_price),totalPrice:Object(Da.b)(e.goods_number*e.unit_price),needId:e.real_name_auth||[Vc.OVERSEAS_TRANSSHIP,Vc.OVERSEAS_DM,18].indexOf(r)>=0,quantity:a.quantity,limitStatus:e.limit_status,limitQuantity:Uc(t.order_limit,e.limit_number,a.quantity),limitMessage:e.limit_message,limitNumber:e.limit_number,leastNumber:t.least_number||1,leastQuantity:t.least_number||1,isDepositInflateGoods:e.step_status,isDepositOfHouse:e.deposit_of_house,isSpikeGoods:n===Hc.SPIKE,isCompensationGoods:r===Vc.COMPENSATION,isDepositeGoods:n===Hc.DEPOSITE_GROUP,isMultiplyGoodsDiscount:n===Hc.MULTIPLY_GOODS_DISCOUNT,isThreeForTwo:n===Hc.GET_EXTRA_FOR_FREE,isVirtualGoods:((e,t,a)=>!!a||(t||[Vc.MOBILE_DATA,Vc.MOBILE_FARE,Vc.QQ,Vc.GAS_CARD].indexOf(parseInt(e,10))>=0))(r,s,o),isVirtualReceiveGoods:!!o,isMobile:(i=r,[Vc.MOBILE_DATA,Vc.MOBILE_FARE].indexOf(parseInt(i,10))>=0),isGasNumber:r===Vc.GAS_CARD,isQQNumber:r===Vc.QQ,isPhoneNumCard:e.is_phone_num_card,needAccount:s,accountBits:e.account_types,overseaType:e.oversea_type||0}},processStepInfo:function(e){return e?{depositPrice:parseInt(e.deposit_price,10)||0,depositLeftTitle:e.deposit_left_title,depositMiddleDesc:e.deposit_middle_desc,depositRightTitle:e.deposit_right_title,inflatePrice:parseInt(e.inflate_price,10)||0,stepPrice:parseInt(e.step_price,10)||0,stepLeftTitle:e.step_left_title,stepMiddleDesc:e.step_middle_desc,stepRightTitle:e.step_right_title,stepPayStartTime:e.step_pay_start_time}:null},processAddressInfo:e=>{if(!e)return{addressId:0,addressSnapshotId:0,name:"",province:"",city:"",district:"",address:"",mobile:"",provinceId:"",isGoodsSoldHere:!1,addressLabels:[],addressGiftStatus:0};const t=e=>(e||[]).map((e=>{if(e&&e.title){const t=e.css_vo||{};return{title:e.title,fontColor:t.font_color,fontSize:t.font_size}}}));return{addressId:e.address_id||0,addressSnapshotId:e.address_snapshot_id_str||0,name:e.name||"",province:e.province||"",city:e.city||"",cityId:e.city_id||"",district:e.district||"",districtId:e.district_id||"",address:e.address||"",mobile:e.mobile||"",provinceId:e.province_id||"",isGoodsSoldHere:e.is_goods_sold_here||!1,addressLabels:t(e.labels)||[],unpayAddressLabels:t(e.unpay_labels)||[],addressGiftStatus:parseInt(e.address_gift_status,10)||0}},processVirtualReceiveMethodVO:e=>e?{type:e.type,isMobile:["USER_CONTACT_MOBILE","USER_CHARGE_MOBILE"].includes(e.auto_complete_type),label:e.label,autoCompleteType:e.auto_complete_type,placeholder:e.placeholder,value:e.value,orderKey:e.order_key,icon:e.icon,validateRules:e.validate_rules,validateFailedText:e.validate_failed_text,verifyAccountTypes:e.verify_account_types}:null,processMallInfo:e=>{if(!e)return null;const t=(e.labels||[]).filter((e=>!!e)).map((e=>({height:e.label_height,width:e.label_width,url:e.label_url})));return{id:e.id,name:e.name||"",logo:e.logo||"",mallOrderPrice:e.mall_order_price||null,canCompensate:e.can_compensate||!1,labels:t}},processInstallmentList:e=>{const t=[];return e&&e[0]&&e[0].term_list&&e[0].term_list.map((e=>{t.push({term:e.term,commissionType:e.commission_type,rate:e.rate,termPrice:e.term_price,defaultSelected:e.default_selected})})),t},processPriceInfo:(e=0,t=0,a=0)=>({orderPrice:e,mallPromotionPrice:t,platformPromotionPrice:a}),processIdCardInfo:e=>e?{idCardName:e.id_card_name,idCardNo:e.id_card_no,idCardType:e.id_card_type,snapshotId:e.card_snapshot_id,drugInfoSnapshotId:e.epidemic_drug_info_snapshot_id,isDrugInfo:1==+e.id_card_type,authTitle:e.auth_title,authTip:e.auth_tip,authMainTitleTip:e.auth_main_title_tip,authTipColor:e.auth_tip_color,authTitleTip:e.auth_title_tip,authNameTip:e.auth_name_tip,authIdTip:e.auth_id_tip,extendMap:e.extend_map,sceneCode:e.scene_code,hideEditBtn:e.hide_edit_btn,hideEditBtnAfterOrder:e.hide_edit_btn_after_order,skipVerify:e.skip_verify}:null,processPromotionInfo:e=>{let t=null,a=null,o=null,r=null,n=null;if(!e)return{shopPromotion:a,platformPromotion:t};const s=e.deposit_coupon_vo,i=e.platform_promotions_consult_vo,l=e.platform_promotion_vo,c=Tt()(e,"total_discount_display_vo.display_items"),d=(u=Tt()(e,"total_promotions_consult_vo"))?{clickable:Tt()(u,"clickable"),categoryName:Tt()(u,"category_name"),categoryDisplay:Tt()(u,"category_display_vo.display_items"),discountPayChannel:Tt()(u,"discount_pay_channel"),discountPayCategoryDisplay:Tt()(u,"discount_pay_category_display_vo.display_items"),floatTitleDisplay:Tt()(u,"float_title_display_vo.display_items"),floatCategoryDisplay:Tt()(u,"float_category_display_vo.display_items"),defaultCategoryDisplay:Tt()(u,"default_category_display_vo.display_items"),retrievePromotion:Tt()(u,"retrieve_promotion_vo"),platformRetrievePromotion:Tt()(u,"platform_retrieve_promotion_vo")}:null;var u;const p=!!Tt()(e,"discount_tag_display_vos"),m=qc(Tt()(e,"discount_tag_display_vos")),h=Tt()(e,"total_promotions_consult_vo.optional_shop_promotion_consult_vo"),f=Tt()(h,"enable_merchant_promotion_option"),g=Tt()(h,"merchant_optional_promotion_price"),_=Tt()(h,"optional_shops_promotions_vos.0"),y=Tt()(h,"optional_clickable"),b=Tt()(e,"total_promotions_consult_vo.clickable"),v=_?{mallId:Tt()(_,"mall_id"),promotionStatus:Tt()(_,"promotion_status"),displayName:Tt()(_,"display_name.display_items"),category_name:Tt()(_,"category_name"),batchSn:Tt()(_,"shop_promotion_consult_vos.0.promotion_identity_vo.extension.batch_sn")}:null;var k;t=((k=l)?{promotionUniqueNo:k.promotion_unique_no,promotionIdentityVo:k.promotion_identity_vo,discount:k.discount,notUse:k.not_use,category:k.category_name,displayName:k.display_name,cellStyle:Wc(k.cell_style),promotionStatus:parseInt(k.promotion_status||0,10),extension:k.extension}:null)||Gc(i).platformPromotion,a=Tt()(e,"shop_promotion_vos.0")?{mallId:Tt()(e,"shop_promotion_vos.0.mall_id"),notUse:Tt()(e,"shop_promotion_vos.0.not_use"),promotionStatus:Tt()(e,"shop_promotion_vos.0.promotion_status"),displayName:Tt()(e,"shop_promotion_vos.0.display_name.display_items"),categoryName:Tt()(e,"shop_promotion_vos.0.category_name"),dropdownType:Tt()(e,"shop_promotion_vos.0.dropdown_type"),promotionUniqueNo:Tt()(e,"shop_promotion_vos.0.shop_promotion_consult_vos.0.promotion_unique_no"),promotionIdentityVo:Tt()(e,"shop_promotion_vos.0.shop_promotion_consult_vos.0.promotion_identity_vo")}:null,r=Tt()(d,"retrievePromotion")?{promotionUniqueNo:Tt()(d,"retrievePromotion.promotion_unique_no"),promotionIdentityVo:Tt()(d,"retrievePromotion.promotion_identity_vo"),mallId:Tt()(d,"retrievePromotion.mall_id"),promotionStatus:Tt()(d,"retrievePromotion.promotion_status")}:null,n=Tt()(d,"platformRetrievePromotion")?{promotionUniqueNo:Tt()(d,"platformRetrievePromotion.promotion_unique_no"),promotionIdentityVo:Tt()(d,"platformRetrievePromotion.promotion_identity_vo"),mallId:Tt()(d,"platformRetrievePromotion.mall_id"),promotionStatus:Tt()(d,"platformRetrievePromotion.promotion_status")}:null,o=s?{eventId:s.event_id}:null;const I=e.goods_promotions_vos,w=!Tr()(I)&&I.reduce(((e,t)=>{const a=!Tr()(t.goods_promotion_consult_vos)&&t.goods_promotion_consult_vos.reduce(((e,t)=>e.concat(t.promotion_identity_vo)),[]);if(a)return e.concat(a)}),[]),S=Qc(Tt()(e,"platform_promotion_vo.extra_display_map.trade_in_info"))||Gc(i).tradeInInfo;return{platformPromotion:t,platformPromotionVoList:i,tradeInInfoPromotion:Gc(i).tradeInInfoPromotion,shopPromotion:a,retrievePromotion:r,platformRetrievePromotion:n,totalDiscountDisplay:c,depositCoupon:o,totalPromotionClickable:b,totalPromotionsConsult:d,enablePromotionOption:f,optionalPromotionPrice:g,optionalClickable:y,optionalShopsPromotion:v,goodsPromotionList:w,tradeInInfo:S,isNewPriceArea:p,discountTagDisplayVos:m}},processShippingInfo:e=>e?{title:e.title||"",cost:e.shipping_price||0,shippingPrice:Object(Da.b)(e.shipping_price)}:{title:"",cost:0,shippingPrice:"0"},processPayInfo:e=>{if(!e||!e.pay_channel_list)return[];const t={},a=[];return e.pay_channel_list.filter((e=>Or.has(e.channel))).forEach((e=>{const o=e.sub_pay_content_vo||{},r=o.css_vo||{},n=e.pay_content_vo||{},s=n.css_vo||{},i=Qc(e.credit_installment_extra_data_vo,["extra"]);t[e.channel]?t[e.channel].appIds.push(e.app_id):(t[e.channel]={channelName:e.channel,allPay:e.all_pay,rank:e.rank,name:e.pay_content||n.content,icon:Tt()(e,"pay_content_vo.icon"),nameStyle:{fontColor:s.font_color,fontSize:s.font_size},hint:o.content||e.pay_sub_content,hintIcon:o.icon,hintStyle:{fontColor:r.font_color,fontSize:r.font_size},appIds:[e.app_id],display:e.display,disabled:!e.enable,navToApp:e.nav_to_app,signed:e.signed,selected:!1,expanding:e.expanding,defaultSelected:e.default_selected,payButtonContent:e.pay_button_content,skuPayDescription:e.sku_pay_description,creditCardVo:i},a.push(t[e.channel]))})),a},processPayChannelGroups:e=>(null==e?void 0:e.length)>0?Qc(e):null,processOrderInfo:e=>e?{orderPrice:e.order_price||null,payPrice:e.pay_price||0,payTitle:e.pay_title||"实付款",payContent:e.pay_content||"",couponPrice:e.coupon_price||0,forceNewLine:e.new_line_content}:{orderPrice:0,payPrice:0,payTitle:"实付款",payContent:"",couponPrice:0,forceNewLine:!1},processDeliveryInfo:e=>{if(!e)return null;const t={clickType:e.click_type,displayContent:e.display_content,displayTitle:e.display_title,srvShortTag:e.srv_short_tag};return t.templateList=(e.template_result_list||[]).map((e=>((e=e||[]).selected&&(t.selectedServiceTransparentField=e.service_transparent_field),{srvCopyWrite:e.srv_copy_write,selected:e.selected,srvShortTag:e.srv_short_tag,serviceTransparentField:e.service_transparent_field}))),t},processCellBarVo:(e={})=>{const t=Tt()(e,"protocol_title")||"",a=Tt()(e,"protocol_url")||"";let o=Tt()(e,"protocol_v2")||null;return!o&&t&&a&&(o=[{color:"#9C9C9C",title:"同意",url:null},{color:"#58595B",title:`《${t}》`,url:a}]),{title:Tt()(e,"title")||"",content:Tt()(e,"content")||"",richContents:Tt()(e,"rich_contents")||null,unSelectedText:Tt()(e,"un_selected_text")||"",protocolTitle:t,protocolUrl:a,protocolV2:o}},processFastReturn:e=>{if(1==+Tt()(e,"fast_return"))return Tt()(e,"fast_return_url")||"grp_lite_group.html"},processShipAdditionalVo:e=>e?{hasShipmentStripe:!(!e.content||!e.title),content:e.content,title:e.title,switchStatus:e.switch_status}:{hasShipmentStripe:!1},processRetainWindowExtend:function(e){if(e)return{displayType:(e=e||{}).display_type,extendType:e.retain_window_extend_type,contents:e.contents,pictures:Tt()(e,"pictures.picture_url")||[],picWidth:Tt()(e,"pictures.width")||0,picHeight:Tt()(e,"pictures.height")||0}},processShopFavCouponPop:function(e){if(e)return{optimalPpayText:Tt()(e,"optimal_pay_text"),subOptimalPayText:Tt()(e,"sub_optimal_pay_text")}}},Xc=async(e,t)=>{const a=await vr();return e.anti_content=a,Oa({method:Na.POST,url:t||"api/morgan-quick/confirm/render",data:e}).then((e=>{e=e||{};const t=Object(Da.b)(Tt()(e,"option_map.mass_subsidy"));return{serverTime:e.server_time,addressInfo:Jc.processAddressInfo(e.address_vo),goodsInfo:Object.assign(Jc.processGoodsInfo(e.goods_vo,e.group_vo,e.sku_vo,e.virtual_receive_method_vo),{massSubsidy:t}),stepInfo:Jc.processStepInfo(e.step_vo),idCardInfo:Jc.processIdCardInfo(e.id_card_vo),mallInfo:Jc.processMallInfo(e.mall_vo),installmentList:Jc.processInstallmentList(e.installment_list),promotionInfo:Jc.processPromotionInfo(e.promotion_vo),shippingInfo:Jc.processShippingInfo(e.shipping_vo),priceInfo:Jc.processPriceInfo(e.order_price,e.merchant_promotion_price,e.platform_promotion_price),payChannelList:Jc.processPayInfo(e.pay_vo),payChannelGroups:Jc.processPayChannelGroups(e.pay_vo.group_status_list),payTicket:Tt()(e,"pay_vo.pay_ticket"),piccImageUrl:e.pay_vo&&e.pay_vo.picc_image_url,repayModifyCountdown:1e3*+e.payment_effective_time,orderInfo:Jc.processOrderInfo(e.order_vo),xyhfOrderInfo:Jc.processOrderInfo(e.credit_score_final_pay_order_vo),deliveryInfo:Jc.processDeliveryInfo(e.service_vo),returnDialogVo:e.return_dialog_vo||null,finalPayVo:e.credit_score_final_pay_dialog_vo||null,morganDisableBackEvent:+Tt()(e,"option_map.disable_back_popup")||0,attrMap:(e.pay_vo||{}).attr_map,orderAmount:e.pay_price,orderServicePath:e.order_service_path||"",confirmMessage:e.confirm_message,extendMap:e.extend_map,promotionExtendMap:e.promotion_extend_map,addressRenderExtendMap:e.address_render_extend_map,fastReturn:Jc.processFastReturn(Tt()(e,"option_map")),noAddressDialogTitle:Tt()(e,"option_map.render_no_address_dialog_title",null),noAddressAutoPopup:Tt()(e,"option_map.render_no_address",null),orderRefresh:1===parseInt(Tt()(e,"option_map.order_refresh"),10),cureNCov:parseInt(Tt()(e,"option_map.cure_ncov"),10),addrGiftEntryStatus:parseInt(Tt()(e,"option_map.addr_list_show_gift_entry_status"),10),receiveMethodNone:Tt()(e,"option_map.receive_method_none"),cellBarVo:Jc.processCellBarVo(e.cell_bar_vo),shipAdditionalVo:Jc.processShipAdditionalVo(e.ship_additional_vo),qiongqiVo:e.qiongqi_vo,retainWindowVo:Jc.processRetainWindowExtend(e.retain_window_extend_vo),virtualReceiveMethodInfo:Jc.processVirtualReceiveMethodVO(e.virtual_receive_method_vo),shopFavCouponPop:Jc.processShopFavCouponPop(e.shop_fav_coupon_pop_window),transferMap:Tt()(e,"transfer_map")}}))};let Kc=(Yc=class e{constructor(){return this.$mobileNumberInput=void 0,this.mobileNumber="",this.mobileOwner="",e.instance||(e.instance=this),e.instance}doInputBlur(){this.$mobileNumberInput&&this.$mobileNumberInput.blur()}doInputFocus(){this.$mobileNumberInput&&this.$mobileNumberInput.focus()}updateMobileInfo(e="",t=""){this.mobileNumber=(""+e||"").trim(),this.mobileOwner=t}static getInstance(){return this.instance?this.instance:this.instance=new e}},ee()(Yc.prototype,"doInputBlur",[jt.a],Object.getOwnPropertyDescriptor(Yc.prototype,"doInputBlur"),Yc.prototype),ee()(Yc.prototype,"doInputFocus",[jt.a],Object.getOwnPropertyDescriptor(Yc.prototype,"doInputFocus"),Yc.prototype),ee()(Yc.prototype,"updateMobileInfo",[jt.a],Object.getOwnPropertyDescriptor(Yc.prototype,"updateMobileInfo"),Yc.prototype),Yc);const $c=Kc.getInstance(),Zc=ia.a.getInstance();var ed=async({ocData:e={},groupType:t,orderExtraType:a,groupOrderId:o=null,activityParams:r={},ocManager:n})=>{const s=e.selectedChannel,i=s&&s.paymentType,{goodsInfo:l,addressInfo:c,idCardInfo:d,promotionInfo:u,extendMap:p,installmentList:m,virtualReceiveMethodInfo:h}=e,f=l.goodsId;let g=null,_="",y="";h&&(y=$c.mobileNumber,_=$c.mobileOwner||"");const b=l.goodsNumber,v=Object(O.a)(),k=await vr(),I={address_id:c.addressId,address_snapshot_id:c.addressSnapshotId,goods:[{sku_id:l.skuId,sku_number:b,goods_id:f}],group_id:l.groupId.toString(),anti_content:k,pay_app_id:tc({paymentType:i}),is_app:v.isNativePlatform||v.isTinyNativePlatform?"1":"0",version:1,page_id:Zc.getPageID()};if(n.pageFrom&&(I.page_from=n.pageFrom),i===jr.HBInstallmentPay){const e=m.findIndex((e=>e.defaultSelected)),t=e>=0?e:0;g=m[s.termIndex||t].term,I.term=g}if(i===jr.CreditCardInstallmentPay){if(!s.creditCardVo)return void Object(kt.a)("当前支付方式暂不可用，请更换其他支付方式");const t=Tt()(s,"creditCardVo.recommendCardVo.bindId");if(!t){const t=Tt()(s,"creditCardVo.extra");try{const a=await Object(ae.g)("JSDuoduoWallet","selectCreditCard",{amount:e.orderAmount,selected_bind_id:null,extra:t}),o=Tt()(a,"selected_card.bind_id",null),r=1==+a.result_type;n.changeBindId({selectedBindId:null,newBindId:o,isNewlyAdded:r})}catch(x){}return}let a=s.creditCardTermIndex;const o=Tt()(s,"creditCardVo.recommendCardVo.creditInstallments")||[],r=o.findIndex((e=>!!e.selected));a>=0||(a=r),a>=0||(a=0);const i=o[a],l=i?i.installmentNum:-1;if(l<0)return void Ua({title:"请选择信用卡分期期数",confirmButtonLabel:"我知道了"});I.term=l,I.bindId=t}o&&(I.group_order_id=o);const w=u.platformPromotion,S=u.platformPromotionVoList,E=Tt()(u,"tradeInInfoPromotion"),C=u.shopPromotion,P=u.goodsPromotionList;if(I.promotion_union_vo={},C&&C.promotionStatus===El&&!C.notUse&&(C.promotionIdentityVo.mall_id=C.mallId,I.promotion_union_vo.single_promotion_list=[C.promotionIdentityVo]),S){if(w&&w.promotionStatus===El&&!w.notUse&&(I.promotion_union_vo.use_platform_promotion_list=[w.promotionIdentityVo]),E&&E.promotion_status===El){const e=E.promotion_identity_vo;I.promotion_union_vo.use_platform_promotion_list?I.promotion_union_vo.use_platform_promotion_list.push(e):I.promotion_union_vo.use_platform_promotion_list=[e]}}else w&&w.promotionStatus===El&&!w.notUse&&(I.promotion_union_vo.use_platform_promotion_vo=w.promotionIdentityVo);if(Tr()(P)||(I.promotion_union_vo.goods_promotion_list=P),h){const{orderKey:e}=h;e&&(I[e]=y),I.mobile_owner=_,I.address_id=0}l.activityId&&(I.activity_id=l.activityId);const N=Tt()(e,"deliveryInfo.selectedServiceTransparentField");N&&(I.service_transparent_field=N),Object.assign(I,r),I[_c]&&(I.type=I[_c],delete I[_c]);const D=((e,t)=>{const a={},o=e[vc],r=e[kc],n=e[Ic],s=e[Sc];return o&&(a.DUO_DUO_PID=o),r&&(a.cps_sign=r),n&&(a.out_group_order_id=n),s&&(a.biz_tag=s),t&&Object.assign(a,t),0===Object.keys(a||{}).length?null:a})(r,p);if(l.needId&&d.isDrugInfo&&(D.epidemic_drug_info_snapshot_id=d.drugInfoSnapshotId),n.recordId)if(S){const e=Tt()(E,"promotion_identity_vo.extension")||{};D.trade_in_evaluation_id=e.trade_in_evaluation_id}else{const t=Tt()(e,"promotionInfo.platformPromotion.promotionIdentityVo.extension")||{};D.trade_in_evaluation_id=t.trade_in_evaluation_id}return delete I[vc],delete I[kc],delete I[Ic],delete I[Sc],I.attribute_fields=D,I.source_channel=n.sourceChannel,I.source_type=0,1===t?I.source_type=5:2===t?I.source_type=6:3===t&&(I.source_type=2),1==+a&&(I.source_type=7),n.sourceType&&(I.source_type=n.sourceType),{postParams:I,ocHandleError:(t,a)=>{Ll({errorCode:t,data:a||{},handleUnclassifiedErrors:!0,ocData:e})}}};async function td({url:e,params:t}){try{const a=await(e=>{const t=new Promise(((e,t)=>{setTimeout((()=>{!Object(O.a)().isNativePlatform&&t({isTimeout:!0})}),8e3)}));return Promise.race([t,e])})(Oa({method:"POST",url:e,data:t})),{order_sn:o,fp_id:r=null,order_amount:n,discount_amount:s,prepay_url:i}=a;return{order_sn:o,fp_id:r,order_amount:n,discount_amount:s,prepay_url:i}}catch(a){if(a.isTimeout)throw a;{let{errorCode:e}=a;!e&&a.response&&(e=a.response.status);const{data:t}=a.response||{};return Promise.reject({errorCode:e,data:t})}}}const ad=ia.a.getInstance(),od=async e=>{let t,a=0;return new Promise(((o,r)=>{const n=()=>(a+=1,(async e=>Oa({method:"POST",url:"api/hermione/order/pay/later/status",data:{evaluation_id:e}}))(e).then((e=>{e&&e.success&&e.result&&2===e.result.pay_later_order_status&&(clearInterval(t),o()),e&&e.success&&e.result&&3===e.result.pay_later_order_status&&(clearInterval(t),r())})).catch((e=>{clearInterval(t),r(e)})));n(),t=setInterval((()=>{a<=6?n():(clearInterval(t),r())}),800)}))};var rd;const nd=ia.a.getInstance();let sd=(rd=class e{constructor(){return this.needReload=!1,this.frontEnv=1,this.frontVersion=9,this.activityParams=void 0,this.goodsId=void 0,this.groupType=void 0,this.orderExtraType=void 0,this.groupOrderId=void 0,this.groupId=void 0,this.isApp=void 0,this.extendMap=void 0,this.promotionExtendMap=void 0,this.appIdSet=void 0,this.appPaymentEnv=void 0,this.promotionVo=void 0,this.sourceType=void 0,this.pageFrom=void 0,this.updateOCDataFun=null,this.ocData={},this.isSelectedAgreement=!0,this.customMorganUrl=null,this.prepayUrl=null,this.autoErrSamping=null,this.morganType=null,this.morganRequestId=0,this.recordId=void 0,this.addressId=void 0,e.instance||(e.instance=this),e.instance}get originParams(){const e=Object(m.f)(location.search),t=Tt()(this.ocData,"selectedChannel.creditCardVo.recommendCardVo.bindId"),a=this.getSelectedSkuId&&this.getSelectedSkuId();return{front_env:this.frontEnv,front_version:this.frontVersion,confirm_display_type:1,front_supports:zc(),original_front_env:parseInt(this.activityParams[wc],10)||0,selected_pay_channel:Tt()(this.ocData,"selectedChannel.channelName"),goods_id:this.goodsId,group_id:this.groupId,group_order_id:this.groupOrderId,sku_id:a||Tt()(this.ocData,"goodsInfo.skuId"),goods_number:Tt()(this.ocData,"goodsInfo.goodsNumber"),address_id:this.addressId||e.sel_address_id,is_app:this.isApp,page_from:this.pageFrom,type:this.activityParams[_c]||0,award_type:this.activityParams[yc]||0,biz_type:this.activityParams[bc]||0,service_transparent_field:Tt()(this.ocData,"deliveryInfo.selectedServiceTransparentField"),pay_channel_list:Object.keys(this.appIdSet)||[],biz_tag:this.activityParams[Sc],extend_map:this.promotionExtendMap?n()(n()({},this.extendMap),this.promotionExtendMap):this.extendMap,origin_hostname:location.hostname,pay_extend_map:n()(n()({},Tt()(this.appPaymentEnv,"payExtendMap")),{},{selected_bind_id:t}),source_channel:this.sourceChannel,transfer_map:this.transferMap}}initShowEditAddress(e){this.showEditAddress=e}initShowIdcardForm(e){this.showIdcardForm=e}initShowPurchaseInfo(e){this.showPurchaseInfo=e}initShowTemperaturePicker(e){this.showTemperaturePicker=e}initShowRepayModifyPanel(e){this.showRepayModifyPanel=e}init({updateOCDataFun:e,setMorganFetching:t,setMorganError:a,getSelectedSkuId:o,groupType:r,orderExtraType:n,goods:s,groupId:i,groupOrderId:l,sourceType:c,ocExtend:d,hideSkuSelect:u,paySuccessCb:p,sourceChannel:h,frontEnv:f,pageFrom:g}={}){this.updateOCDataFun=e,this.getSelectedSkuId=o,this.setMorganFetching=t,this.setMorganError=a;const _=Object(Wn.a)(),{query:y,userAgent:b}=_,v=Object(O.b)(b),k=v.isNativePlatform,I=v.isTinyNativePlatform;this.forwardHideSkuSelect=()=>{this.needReload=!1,u({hideAction:"beforeForward"})},this.paySuccessCb=p,this.isApp=k||I?1:0,this.frontEnv=f||(({userAgent:e,queries:t})=>{const a=Object(O.b)(e).platform,o=Mc({userAgent:e,queries:t}),r="qq_wallet"===Tt()(t,"_x_sid");if(o)return+Tt()(t,"front_env")||dc;switch(a){case D.a.WeChat:case D.a.WxApp:return nc;case D.a.PddAndroid:return rc;case D.a.PddIOS:return oc;case D.a.QQ:return r?lc:sc;case D.a.Weibo:return ic;case D.a.PDDTinyAndorid:return cc}return ac})(_),this.activityParams=((e,t)=>{const a=Object(O.b)(t),o=Object(D.c)(a.version,"4.2.0")>=0,r=e[fc],n=e.group_order_id,s=Bc(e,gc)||0,i=r?0:e[hc+yc],l=e[hc+bc]||0,c=e[hc+vc]||"",d=e[hc+kc]||"",u=e[hc+Ic]||"",p=e[hc+wc],m=e[hc+Sc];let h=parseInt(Bc(e,_c)||0,10);const f=!a.isNativePlatform||o?!!n&&n===r:!!n,g={};switch(h){case uc:n||(h=0);break;case pc:case mc:break;default:h=0}return f&&(g[gc]=s),g[_c]=h,g[yc]=i,g[bc]=l,g[vc]=c,g[kc]=d,g[Ic]=u,g[wc]=p,m&&(g[Sc]=m),g})(y,b),this.goodsId=Tt()(s,"goodsID"),this.ddpayMianmiV2=Tt()(s,"isAbDirectOrderMianmiV2"),this.switchToWechatIfSignXyhfFailed=Tt()(s,"isAbSwitchToWechatIfSignXyhfFailed"),this.enablePaymentListV2=k&&Tt()(s,"enablePaymentListV2"),this.groupType=r,this.orderExtraType=n,this.groupOrderId=l,this.sourceType=c,this.pageFrom=g||parseInt(y.page_from,10)||0,this.groupId=i||s.groupTypes[1].groupID,this.extendMap=Fc(y),this.appIdSet=(({userAgent:e,hostname:t,queries:a})=>{const o=[],r={},n=Mc({userAgent:e,queries:a});for(const s in jr){if(["AliPayV2","UnionPay"].includes(s))continue;const i=jr[s];let l=tc({paymentType:i,userAgent:e,hostName:t});"WeChat"===s&&n&&(l=+Tt()(a,"pay_app_id")||317),o.includes(l)||(o.push(l),r[l]=i)}return r})(_),this.appPaymentEnv=function(e){if(e&&e.pdd_native_preload2)try{const{am_app_che_alipays:t,am_app_che_applepay:a,last_payment_type2:o,qqUninstall:r}=JSON.parse(e.pdd_native_preload2)||{};let n,s=!0,i=!1,l=null;return t&&(s=1===parseInt(JSON.parse(t).has_installed),n={is_install_alipay:s?"1":"0"}),a&&(i=1===parseInt(JSON.parse(a).has_installed)),o&&(l=parseInt(JSON.parse(o))),{lastPaymentType:l,applePayInstalled:i,alipayInstalled:s,payExtendMap:n,qqUninstall:r}}catch(t){Object(At.c)(new Error("nativeExtra parsing error"))}return null}(y),this.sourceChannel=h>=0?h:13,this.recordId=void 0,this.hasAddressLine=s.hasAddressLine;const w=s.destinationUrl;if(w){const e=Object(m.g)(w),{morgan_type:t}=e||{};this.customMorganUrl=t?function(e){return{1:"/api/morgan/confirm/render/spike",2:"/api/morgan/confirm/render/pr_spike"}[e]}(t):null,this.morganType=t;const a=Fc(e);this.extendMap=Object.assign(this.extendMap,a)}if(d){const e=Fc(d||{});this.extendMap=Object.assign(this.extendMap,e)}null==h&&Object(At.c)(new Error("empty_source_channel"))}async updateOCData(e){if(!e)return;if(this.setMorganError(!1),!e.selectedChannel&&this.ocData.selectedChannel){const t=this.ocData.selectedChannel,a=e.payChannelList.some((e=>e.channelName===t.channelName)),o=e.payChannelList.some((e=>e.defaultSelected));e.payChannelList.forEach(((r,n)=>{a&&r.channelName===t.channelName?(r.selected=!0,e.selectedChannel=r):a?r.selected=!1:o&&r.defaultSelected?(r.selected=!0,e.selectedChannel=r):o||0!==n||(r.selected=!0,e.selectedChannel=r)})),e.selectedChannel&&(e.selectedChannel.paymentType=await In(e.selectedChannel.channelName))}const t=this.ocData.payChannelList&&this.ocData.payChannelList.find((e=>e.channelName===Nr.CREDIT_CARD)),a=Tt()(t,"creditCardVo.recommendCardVo.bindId"),o=e.payChannelList&&e.payChannelList.find((e=>e.channelName===Nr.CREDIT_CARD)),r=Tt()(o,"creditCardVo.recommendCardVo.bindId");if(t&&o&&r!==a){const e=Tt()(t,"creditCardVo.recommendCardVo.creditInstallments")||[],a=Tt()(o,"creditCardVo.recommendCardVo.creditInstallments")||[],r=e[t.creditCardTermIndex];if(r){const e=r.installmentNum,t=a.findIndex((t=>+t.installmentNum===e));o.creditCardTermIndex=t}}const{isTemperatureSaved:n}=this.ocData.idCardInfo||{};e.idCardInfo&&(e.idCardInfo.isTemperatureSaved=n),Tt()(e,"addressInfo.addressId")&&(this.addressId=Tt()(e,"addressInfo.addressId")),this.updateOCDataFun&&this.updateOCDataFun(e),this.ocData=e}clearTradeInfo(){const e=this.ocData;Tt()(e,"promotionInfo.tradeInInfo")&&(e.promotionInfo.tradeInInfo=null,this.updateOCData(e))}updateAddressInfo(e){this.refresh({address_id:e.addressId})}selectDeliveryItem({serviceTransparentField:e}){const t=this.getSelectedSkuId&&this.getSelectedSkuId();return this.refresh({service_transparent_field:e,front_action:t?jc:Ac})}getWxscoreSignScene(){const e=Object(m.f)(location.search),t="210"===e.page_from,a=e.wxscore_sign_scene;return t?a?+a:16:this.enablePaymentListV2?33:19}async render(e,t){const a=e?Object.assign(this.originParams,e):this.originParams;t&&(this.recordId=t,this.sourceChannel=41,a.source_channel=41,a.extend_map?a.extend_map.trade_in_record_id=t:a.extend_map={trade_in_record_id:t});try{const e=new Promise(((e,t)=>{setTimeout((()=>{t({errorCode:"timeout"})}),2e3)})),t=await Promise.race([Xc(a,this.customMorganUrl),e]);if(t){this.extendMap=t.extendMap,this.promotionExtendMap=t.promotionExtendMap,this.transferMap=t.transferMap,this.updateOCData(t);const{confirmMessage:e}=t;return e}}catch(o){const{errorCode:e,response:a}=o;let r=Tt()(a,"data.error_msg");t&&this.clearTradeInfo(),Object(At.c)(new Error("sku_order_render"),{error_message:r,error_code:e})}}async refresh(e,t){const a=e?Object.assign(this.originParams,e):this.originParams;a.refresh=!0,t&&this.setMorganFetching(!0);try{this.morganRequestId++;const e=this.morganRequestId,o=await Xc(a,this.customMorganUrl);if(e===this.morganRequestId&&o){this.extendMap=o.extendMap,this.promotionExtendMap=o.promotionExtendMap,this.transferMap=o.transferMap;const{confirmMessage:e}=o;return e&&wa(e),this.updateOCData(o),{success:!0}}}catch(o){const{errorCode:e,response:t}=o,{data:a}=t||{},r=Tt()(a,"error_payload");if(Tt()(r,"not_degrade_sku")||this.setMorganError(!0),r&&r.view_style)return void bl(r);const n=Tt()(t,"data.error_msg");Object(At.c)(new Error("sku_order_refresh"),{error_message:n,error_code:e})}finally{t&&this.setMorganFetching(!1)}}async refreshPayVoAfterOrder(e){const t={confirm_display_type:1,order_sn:this.ocData.orderSn,front_version:this.frontVersion,front_env:this.frontEnv,refresh_pay_vo:!0,extend_map:this.extendMap,pay_extend_map:e.pay_extend_map,front_supports:zc(),service_transparent_field:Tt()(this.ocData,"deliveryInfo.selectedServiceTransparentField"),source_channel:this.sourceChannel,transfer_map:this.transferMap};try{const e=await(async e=>Oa({method:Na.POST,url:"api/morgan/order/refresh",data:e,useNativeAntiToken:!0}).then((e=>({payChannelList:Jc.processPayInfo(e.pay_vo),confirmMessage:e.confirm_message}))))(t),a=Dt()(this.ocData),o=a.payChannelList.find((e=>e.channelName===Nr.CREDIT_CARD)),r=e.payChannelList.find((e=>e.channelName===Nr.CREDIT_CARD));o.creditCardVo=r?r.creditCardVo:null;const{confirmMessage:n}=e;n&&wa(n),this.updateOCData(a)}catch(a){const{errorCode:e,response:t}=a;let o=Tt()(t,"data.error_msg");const r=o;e&&(o=o||el.a.getMsgFromCode(e)),wa(o||"网络不稳定，请稍后再试"),Object(At.c)(new Error("sku_refresh_after_order"),{error_message:r,error_code:e})}}async changeBindId({selectedBindId:e,newBindId:t,isNewlyAdded:a}){const o=n()({},Tt()(this.appPaymentEnv,"payExtendMap"));a?(o.selected_bind_id=e,o.new_card_bind_id=t):o.selected_bind_id=t;const{orderSn:r}=this.ocData;r?this.refreshPayVoAfterOrder({pay_extend_map:o}):this.refresh({pay_extend_map:o})}async repay(){const{orderSn:e,chaosOrderSn:t,orderAmount:a,attrMap:o,installmentList:r,fastReturn:n}=this.ocData,s=this.ocData.goodsInfo.goodsId,i=this.ocData.selectedChannel,l=i&&i.paymentType,c=i&&i.allPay,d=(e,t)=>{Ll({errorCode:e,data:t||{},handleUnclassifiedErrors:!0,ocData:this.ocData})};if(l===jr.FriendPay)return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),void oe.a.forward(Object(m.a)({fp_id:t},"friend_pay.html"));const u={goodsID:s,orderAmount:a,attrMap:o,fastReturn:n},p=t=>{d(t,null),t===el.a.PrepayBusy.code&&(this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),oe.a.orderPage("forward",{order_sn:e}))},h={order_sn:e};if(l===jr.HBInstallmentPay){const e=r.findIndex((e=>e.defaultSelected)),t=e>=0?e:0,a=i.termIndex||t||0;h.term=r[a].term}if(l===jr.CreditCardInstallmentPay){h.bind_id=Tt()(i,"creditCardVo.recommendCardVo.bindId");let e=i.creditCardTermIndex;const t=Tt()(i,"creditCardVo.recommendCardVo.creditInstallments")||[],a=t.findIndex((e=>!!e.selected));e>=0||(e=a),e>=0||(e=0);const o=t[e];h.term=o?o.installmentNum:-1}const f="210"===Object(m.f)(location.search).page_from,g=l===jr.XianYongHouFu&&(f||!i.signed),_=this.getWxscoreSignScene(),y=await vr();ps({paymentType:l,ddpayMianmiV2:this.ddpayMianmiV2,mianmiAutoSwitch:c});try{const t=await Zi.pay({url:this.prepayUrl,orderSn:e,paymentType:l,attrMap:o,params:h,attributeFields:{pay_ticket:this.ocData.payTicket},optionalParams:{isSignXianYongHouFu:g,signScene:_,orderAmount:a,antiContent:y,ddpayMianmiV2:this.ddpayMianmiV2,mianmiAutoSwitch:c,switchToWechatIfSignXyhfFailed:this.switchToWechatIfSignXyhfFailed},checkOrderStatus:rl(e,u),checkOrderTimeout:1e4});sl(t,u,this),ec({groupId:"10242",customTags:{event:"order_payed_judge_"+(Tt()(t,"orderStatus")||999)}})}catch(b){const{cancelled:t}=b||{};if(l===jr.XianYongHouFu)return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),void nl({order_sn:e});t?il(this):ll({orderSn:e,error:b,defaultOnFailed:p,ocManager:this})}finally{ms(),l===jr.HBInstallmentPay&&(this.ocData.lockInstallmentTerm=!0),l===jr.CreditCardInstallmentPay&&(this.ocData.lockCreditCardTerm=!0)}}async pay(){if(this.ocData.orderSn&&this.ocData.chaosOrderSn)return this.repay();const e=await ed({ocData:this.ocData,groupType:this.groupType,orderExtraType:this.orderExtraType,groupOrderId:this.groupOrderId,activityParams:this.activityParams,ocManager:this});if(e)if(e.errMsg)wa(e.errMsg);else{const a=this.ocData.selectedChannel,o=a&&a.paymentType,r=a&&a.allPay;if(this.recordId)try{Object(ha.b)("正在生成旧机回收订单"),await async function({ocData:e}){const t=Tt()(e,"goodsInfo.skuId"),a=Tt()(e,"goodsInfo.mallId");let o;const r=Tt()(e,"promotionInfo.platformPromotionVoList"),n=Tt()(e,"promotionInfo.tradeInInfoPromotion");o=r?Tt()(n,"promotion_identity_vo.extension")||{}:Tt()(e,"promotionInfo.platformPromotion.promotionIdentityVo.extension")||{};const s={page_sn:ad.getPageSN()+"",relate_goods_sku_id:t,relate_mall_id:a,evaluation_id:o.trade_in_evaluation_id,evaluation_sign:o.trade_in_evaluation_sign},i=await Oa({method:"POST",url:"api/hermione/order/pay/later/create",data:s}),l=Tt()(i,"result.evaluation_id");await od(l)}({ocData:this.ocData}),Object(ha.a)()}catch(t){Object(ha.a)();const{response:e}=t||{},{data:a}=e||{},o=a&&a.error_msg;return void(o&&wa(o))}this.recordId?Object(ha.b)("即将生成新机订单"):ps({paymentType:o,ddpayMianmiV2:this.ddpayMianmiV2,mianmiAutoSwitch:r});const s=this.ocData.goodsInfo.goodsId,i=this.ocData.goodsInfo.skuId,{orderAmount:l,attrMap:c,orderServicePath:d="order",fastReturn:u}=this.ocData,{postParams:p,ocHandleError:h}=e,f=p.anti_content;let g=null,_=null;try{const{order_sn:e,fp_id:t,order_amount:a,discount_amount:o,prepay_url:r}=await td({url:d,params:p});g=e,_=t,this.needReload=!0;const n=Tt()(this.ocData,"orderInfo.payPrice");a!==n&&Object(At.c)(new Error("different_price"),{error_message:`order_amount_${a}_different_with_pay_price_${n}`}),this.prepayUrl=r,this.ocData.orderSn=g,this.ocData.chaosOrderSn=_,this.ocData.discountAmount=o,this.updateOCData(this.ocData),this.recordId?Object(ha.a)():ms()}catch(t){if(t.isTimeout||t.isOrderSnEmpty)wa("网络连接不稳定，请刷新后重试");else{const{errorCode:e,data:a}=t;await h(e,a)}return void(jl(t.errorCode)||(Object(ha.a)(),ms()))}const y={op:"event",event:"create_order",goods_id:s,sku_id:i,order_amount:l,pay_app_id:p.app_id,page_name:"order_checkout",auto_group:"0",sub_op:"create_order",refer_page_name:nd.getReferPageName(),refer_page_element:nd.getReferPageElement(),order_sn:g,location:location.href};if(Object(M.d)(y),Object(_s.a)({payload:n()({event:"paycheck"},y)}),ec({groupId:"10242",customTags:{event:"create_order"}}),o===jr.FriendPay)this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),oe.a.forward(Object(m.a)({fp_id:_},"friend_pay.html"));else{const e={goodsID:s,orderAmount:l,attrMap:c,fastReturn:u},n=e=>{h(e,null),e===el.a.PrepayBusy.code&&oe.a.orderPage("reload",{order_sn:g})},i="210"===Object(m.f)(location.search).page_from,d=o===jr.XianYongHouFu&&(i||!a.signed),_=this.getWxscoreSignScene();ps({paymentType:o,ddpayMianmiV2:this.ddpayMianmiV2,mianmiAutoSwitch:r});try{const t=await Zi.pay({url:this.prepayUrl,orderSn:g,paymentType:o,attrMap:c,params:{order_sn:g,term:p.term,bind_id:p.bindId},attributeFields:{pay_ticket:this.ocData.payTicket},additionalParams:{order_amount:l,goods_id:s},optionalParams:{isSignXianYongHouFu:d,signScene:_,orderAmount:l,antiContent:f,ddpayMianmiV2:this.ddpayMianmiV2,mianmiAutoSwitch:r,switchToWechatIfSignXyhfFailed:this.switchToWechatIfSignXyhfFailed},checkOrderStatus:rl(g,e),checkOrderTimeout:1e4});sl(t,e,this),ec({groupId:"10242",customTags:{event:"order_payed_judge_"+(Tt()(t,"orderStatus")||999)}})}catch(t){if(Tt()(this.ocData,"promotionInfo.retrievePromotion.promotionStatus")===Nl)return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),void nl({order_sn:g});const{cancelled:e}=t||{};if(o===jr.XianYongHouFu)return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),void nl({order_sn:g});e?il(this):ll({orderSn:g,error:t,defaultOnFailed:n,ocManager:this})}finally{ms(),o===jr.HBInstallmentPay&&(this.ocData.lockInstallmentTerm=!0),o===jr.CreditCardInstallmentPay&&(this.ocData.lockCreditCardTerm=!0)}}}}async selectedChannel({channelName:e}){if(e){const t=this.ocData;this.ocData&&this.ocData.orderSn&&(t.orderSn=this.ocData.orderSn),this.ocData&&this.ocData.chaosOrderSn&&(t.chaosOrderSn=this.ocData.chaosOrderSn),this.ocData&&this.ocData.lockInstallmentTerm&&(t.lockInstallmentTerm=this.ocData.lockInstallmentTerm),this.ocData&&this.ocData.lockCreditCardTerm&&(t.lockCreditCardTerm=this.ocData.lockCreditCardTerm);const a=Tt()(t,"payChannelList")||[];a.forEach((t=>{t.selected=t.channelName===e})),t.selectedChannel=a.find((t=>t.channelName===e)),t.selectedChannel.paymentType=await In(e),this.updateOCData(t)}}async refreshAfterSelectedChannel(){const e={use_platform_promotion_request:{not_use:!1,promotion_identity_vo:null},use_shop_promotion_requests:[]},t=Tt()(this.ocData,"promotionInfo"),a=t.platformPromotion,o=t.shopPromotion;e.use_platform_promotion_request=a&&(a.promotionStatus===El||a.notUse)?{not_use:a.notUse,promotion_identity_vo:a.promotionIdentityVo}:null,e.use_shop_promotion_requests=o&&(o.promotionStatus===El||o.notUse)?[{promotion_identity_vos:o.promotionIdentityVo?[o.promotionIdentityVo]:null,mall_id:o.mallId,not_use:o.notUse}]:null,await this.refresh({front_action:Dc,promotion_vo:e})}static getInstance(){return this.instance?this.instance:this.instance=new e}},ee()(rd.prototype,"updateAddressInfo",[jt.a],Object.getOwnPropertyDescriptor(rd.prototype,"updateAddressInfo"),rd.prototype),ee()(rd.prototype,"selectDeliveryItem",[jt.a],Object.getOwnPropertyDescriptor(rd.prototype,"selectDeliveryItem"),rd.prototype),ee()(rd.prototype,"getWxscoreSignScene",[jt.a],Object.getOwnPropertyDescriptor(rd.prototype,"getWxscoreSignScene"),rd.prototype),ee()(rd.prototype,"refreshPayVoAfterOrder",[jt.a],Object.getOwnPropertyDescriptor(rd.prototype,"refreshPayVoAfterOrder"),rd.prototype),ee()(rd.prototype,"changeBindId",[jt.a],Object.getOwnPropertyDescriptor(rd.prototype,"changeBindId"),rd.prototype),rd);var id=a("tV1M"),ld=a.n(id);const cd=sd.getInstance(),dd=(e,t)=>{if(!Array.isArray(e))return;let a,o=-1,r=-1,n=null;if(e.length<=0)cd.refresh({front_action:xc,address_id:-1});else{for(let s=0;s<e.length;s++){if(a=e[s],(a.address_id||"").toString()===t){r=s,n=a,cd.refresh({front_action:xc,address_id:n.address_id});break}(a.is_default||"").toString()===Dl&&(o=s)}r<0&&o>=0&&(n=e[o],cd.refresh({front_action:xc,address_id:n.address_id}))}},ud=(e,t=dd)=>{if(e.addressInfo.addressId<=0&&!e.addressInfo.addressGiftStatus)return;const a=Object(O.a)(),o=a.isNativePlatform,r=a.isTinyNativePlatform,s={select:1,saleRegions:e.goodsInfo.allowedRegion.split(",")||[],addressID:e.addressInfo.addressId,unreachableRec:1,costTemplateId:e.goodsInfo&&e.goodsInfo.costTemplateId+""||"",mallId:e.goodsInfo&&e.goodsInfo.mallId||"",goodsId:e.goodsInfo.goodsId||"",addressRenderExtendMap:e.addressRenderExtendMap?JSON.stringify(e.addressRenderExtendMap):void 0,goodsList:JSON.stringify([{goods_number:e.goodsInfo.goodsNumber,goods_id:e.goodsInfo.goodsId,sku_id:e.goodsInfo.skuId,group_id:e.goodsInfo.groupId,group_order_id:cd.groupOrderId,group_type:cd.groupType,order_extra_type:cd.orderExtraType}])},i={sel_address_id:s.addressID,allowed_regions:s.saleRegions,allow_shipping_provinces:s.allowShippingRegions,unreachable_rec:s.unreachableRec,cost_template_id:s.costTemplateId,mall_id:s.mallId,goods_id:s.goodsId,goods_number:e.goodsInfo.goodsNumber,sku_id:e.goodsInfo.skuId,address_render_extend_map:s.addressRenderExtendMap,goods_list:s.goodsList,show_sku_selector:1,is_single_buy:+!!e.isSingleBuy,scene:"1",thumb_url:void 0},l={props:{select:s.select||0,sale_provinces:s.saleRegions||[],allow_shipping_provinces:s.allowShippingRegions||[],address_id:s.addressID||"",unreachable_rec:s.unreachableRec,cost_template_id:s.costTemplateId,mall_id:s.mallId,goods_id:s.goodsId,address_render_extend_map:s.addressRenderExtendMap,goods_list:s.goodsList,complete:(e,a)=>{const o=(a=a||{}).selected_address_id||"",r=a.addresses||[];!e&&a&&t(r,o)}}},c=location.pathname.match(/\/(\S*)\.html/)[1].split("/"),d=c[c.length-1];let u="addresses.html";o||(u="addresses.html?"+Object(m.b)(n()(n()({back_page:d},Object(m.g)(location.href)),i))),oe.a.replaceQuery({sku_id:e.goodsInfo.skuId,goods_number:e.goodsInfo.goodsNumber,show_sku_selector:o||r?void 0:1,is_single_buy:+!!e.isSingleBuy},(()=>{oe.a.uniformForward(u,null,l)}))};var pd;const md=sd.getInstance();let hd=(pd=class extends s.Component{constructor(...e){super(...e),this.state={address:null,countDownInit:!1}}async onChannelSelected({channelName:e,selectedChannel:t}){if(e&&t){Object(M.b)({page_el_sn:"4912874",op:"click"});const a=this.props.ocData;md.ocData&&md.ocData.orderSn&&(a.orderSn=md.ocData.orderSn),md.ocData&&md.ocData.chaosOrderSn&&(a.chaosOrderSn=md.ocData.chaosOrderSn),md.ocData&&md.ocData.lockInstallmentTerm&&(a.lockInstallmentTerm=md.ocData.lockInstallmentTerm),md.ocData&&md.ocData.discountAmount&&(a.discountAmount=md.ocData.discountAmount);const o=Tt()(a,"payChannelList")||[];o.forEach((t=>{t.selected=t.channelName===e})),a.selectedChannel=o.find((t=>t.channelName===e)),a.selectedChannel.termIndex=t.termIndex,a.selectedChannel.paymentType=await In(e),md.updateOCData(a)}}onEditAddress(){var e=this;Object(O.a)().isNativePlatform&&(Object(M.b)({page_el_sn:"4912852",op:"click"}),ud(n()(n()({},md.ocData),{},{addressInfo:this.state.address||md.ocData.addressInfo}),(async function(t,a){const o=md.ocData.orderSn,r=t.find((e=>+e.address_id==+a));try{await Oa({method:"POST",url:"api/vancouver/update_address",data:{order_sn:o,address_id:r.address_id}}),r.addressId=r.address_id,e.setState({address:r}),wa("收货地址修改成功")}catch(n){const e=n.response.data,t=Tt()(e,"error_payload");t?bl(t):wa("收货地址修改失败，建议重新下单")}})))}show(){this.state.countDownInit||this.setState({countDownInit:!0})}hide(e){e&&e.stopPropagation(),Object(M.b)({page_el_sn:"4912867",op:"click"}),md.refresh(),this.props.toggle(),this.setState({address:null})}repay(){Object(M.b)({page_el_sn:"4912853",op:"click"}),md.pay()}async cancel(){Object(M.b)({page_el_sn:"4912854",op:"click"});const{orderSn:e}=md.ocData;try{await Oa({method:Na.POST,url:`order/${e}/cancel`}),wa("订单已取消"),md.refresh(),this.props.toggle(),this.setState({address:null})}catch(t){wa("订单取消失败")}}componentDidMount(){md.initShowRepayModifyPanel((()=>this.props.toggle(!0))),Object(ft.a)(document.querySelectorAll("#rmp-payments"))}render(){const e=this.props.ocData,t=Tt()(e,"selectedChannel.paymentType")!==jr.XianYongHouFu,a=e.repayModifyCountdown||18e5,o=e.orderAmount,r=md.ocData.discountAmount||0;return s.default.createElement(Cn,{visible:this.props.visible,doHide:this.hide,onShow:this.show},this.state.countDownInit&&s.default.createElement(Un,{countDown:a,doHide:this.hide}),s.default.createElement(jn,{ocData:this.props.ocData,onEditAddress:this.onEditAddress,address:this.state.address}),s.default.createElement("div",{className:ld.a.paymentList,id:"rmp-payments"},s.default.createElement(vn,{disableFolding:!0,isRefreshPayChannels:!0,payChannels:this.props.ocData.payChannelList,installmentList:this.props.ocData.installmentList,lockInstallmentTerm:md.ocData.lockInstallmentTerm,selectedChannelName:this.props.ocData.selectedChannel&&this.props.ocData.selectedChannel.channelName,onChannelSelected:this.onChannelSelected}),s.default.createElement(Wa.a,{className:ld.a.picc,src:"https://funimg.pddpic.com/transaction/959fca13-7914-4f1b-b4ec-660d7752e4c5.png.slim.png"})),s.default.createElement(On,{discountPrice:r,onRepay:this.repay,onCancel:this.cancel,orderAmount:o,shouldShowPrice:t}))}},ee()(pd.prototype,"onChannelSelected",[jt.a],Object.getOwnPropertyDescriptor(pd.prototype,"onChannelSelected"),pd.prototype),ee()(pd.prototype,"onEditAddress",[jt.a],Object.getOwnPropertyDescriptor(pd.prototype,"onEditAddress"),pd.prototype),ee()(pd.prototype,"show",[jt.a],Object.getOwnPropertyDescriptor(pd.prototype,"show"),pd.prototype),ee()(pd.prototype,"hide",[jt.a],Object.getOwnPropertyDescriptor(pd.prototype,"hide"),pd.prototype),ee()(pd.prototype,"repay",[jt.a],Object.getOwnPropertyDescriptor(pd.prototype,"repay"),pd.prototype),ee()(pd.prototype,"cancel",[jt.a],Object.getOwnPropertyDescriptor(pd.prototype,"cancel"),pd.prototype),pd);var fd=a("nPn9"),gd=a.n(fd);const _d=1,yd=2,bd=3;function vd({items:e,onSpread:t}){return s.default.createElement(s.default.Fragment,null,e&&e.map(((e,a)=>{if(0===e.displayType)return e.text?s.default.createElement("span",{key:a,onClick:e=>t&&t(e)},e.text):null;if(1===e.displayType){const{height:o,width:r,url:n}=e;return n?s.default.createElement(Wa.a,{key:a,style:{height:o,width:r},className:gd.a.groupSubtitleIcon,src:n,onClick:e=>t&&t(e)}):null}return null})))}const kd=s.default.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064"},s.default.createElement("path",{d:"M361.396862 939.865243L0 578.298315l123.274648-123.274648 231.140111 231.31135 539.668623-602.20026 129.915445 116.379336-662.601965 739.35115z","p-id":"4065"}));let Id=null;const wd=Object(s.forwardRef)(((e,t)=>{var a,o;const{payChannelGroup:r,payChannels:n,isSelected:i,onChannelSelected:l,onGroupSelected:c,installmentList:d,lockInstallmentTerm:u,lockCreditCardTerm:p}=e,[m,h]=Object(s.useState)(!1);if(Object(s.useImperativeHandle)(t,(()=>({unspread:()=>{r&&(r.channelGroupType===bd&&i||h(!1))}}))),!r)return null;const f=null===(a=r.groupContent)||void 0===a?void 0:a.content,g=null===(o=r.channels.find((e=>e.defaultSelected)))||void 0===o?void 0:o.channel,_=r.channels.find((e=>e.channel===g)),y=n.find((e=>e.channelName===g)),b=(null==_?void 0:_.groupSubContent)||[],v=r.channels.map((e=>e.channel)),k=()=>{r.channelGroupType===bd?(h(!0),I(y,{expandAfterSelection:!0})):c(r)},I=(e,t)=>{r.channelGroupType===bd&&(t?t.supressUnspread=!0:t={supressUnspread:!0}),e.selected=!0,l({channelName:e.channelName,selectedChannel:e,opts:t})};return m?s.default.createElement("div",{className:gd.a.group},s.default.createElement("div",{className:gd.a.groupSpreadTitle},f),s.default.createElement("div",{className:"pdd_payment_list_v2_mode"},function(e){const t=[Nr.LIANLIANPAY,Nr.QQ,Nr.HBFQ_ALI_PAY,Nr.UNIONPAY],{installMap:a={}}=Id||{},o={};return t.forEach((e=>{o[e]=a&&!a[e]})),e.filter((e=>e&&!o[e.channelName]))}(n).filter((e=>v.includes(e.channelName))).map(((t,a)=>s.default.createElement(Zr,w()({key:a},e,{channel:t,selectPayMethod:I,installmentList:d,lockInstallmentTerm:u,lockCreditCardTerm:p}))))),s.default.createElement("div",{className:gd.a.groupBorder})):s.default.createElement("div",{className:gd.a.groupUnspreadContainer},s.default.createElement("div",{className:gd.a.groupUnspread,onClick:k},s.default.createElement("div",{className:gd.a.groupTitle},f),i&&s.default.createElement("div",{className:gd.a.groupSelectedSvg},kd)),s.default.createElement("div",{className:gd.a.groupSubtitle},s.default.createElement(vd,{items:b,onSpread:e=>{if(r.channelGroupType===_d)return k();e.stopPropagation(),h(!0)}})),s.default.createElement("div",{className:gd.a.groupBorder}))}));var Sd=Object(s.forwardRef)(((e,t)=>{const{onChannelSelected:a,payChannels:o,payChannelGroups:r,selectedChannel:n,installmentList:i,lockInstallmentTerm:l,lockCreditCardTerm:c}=e;Object(s.useEffect)((()=>{Object(ft.a)(document.querySelector("#commodity_paymentlist_v2"))}),[]),Object(s.useEffect)((()=>{!async function(){Id=await hn()}()}),[]),Object(s.useEffect)((()=>{const e=r.find((e=>e.defaultSelected));if(!e)return;const t=e.channels.find((e=>e.defaultSelected));if(!t)return;const n=o.find((e=>e.channelName===t.channel));n.selected=!0,a({channelName:n.channelName,selectedChannel:n})}),[]);const d=r.find((e=>e.channelGroupType===_d)),u=r.find((e=>e.channelGroupType===yd)),p=Object(s.useRef)(),m=r.find((e=>e.channelGroupType===bd)),h=Object(s.useRef)(),f=()=>{var e,t,a,o;null===(e=p.current)||void 0===e||null===(t=e.unspread)||void 0===t||t.call(e),null===(a=h.current)||void 0===a||null===(o=a.unspread)||void 0===o||o.call(a)};Object(s.useImperativeHandle)(t,(()=>({unspread:f})));const g=({channelName:e,selectedChannel:t,opts:o})=>{a({channelName:t.channelName,selectedChannel:t,opts:o}),(null==o?void 0:o.expandAfterSelection)||(null==o?void 0:o.supressUnspread)||f()},_=e=>e&&e.channels.map((e=>e.channel)).includes(null==n?void 0:n.channelName),y=(e,t=!1)=>{var r;if(_(e))return;const n=null===(r=e.channels.find((e=>e.defaultSelected)))||void 0===r?void 0:r.channel,s=o.find((e=>e.channelName===n));s.selected=!0,a({channelName:s.channelName,selectedChannel:s}),f()};let b=null;return r.forEach((e=>{if(_(e)){var t,a;const o=e.channels.find((e=>e.defaultSelected));b=null==o||null===(t=o.groupBottomContent)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.text}})),s.default.createElement("div",{className:gd.a.container},s.default.createElement("div",{className:gd.a.paymentlistv2,id:"commodity_paymentlist_v2"},s.default.createElement(wd,w()({},e,{payChannelGroup:d,onChannelSelected:g,isSelected:_(d),onGroupSelected:y})),s.default.createElement(wd,w()({},e,{ref:p,payChannelGroup:u,onChannelSelected:g,isSelected:_(u),onGroupSelected:y})),s.default.createElement(wd,w()({},e,{installmentList:i,lockInstallmentTerm:l,lockCreditCardTerm:c,ref:h,payChannelGroup:m,onChannelSelected:g,isSelected:_(m),onGroupSelected:y})),s.default.createElement("div",{className:gd.a.placeholder})),b&&s.default.createElement("div",{className:gd.a.channelBottomContent},b))})),Ed=a("losq"),Cd=a.n(Ed),Pd=a("9K/W"),Nd=a.n(Pd);const Od=s.default.createContext({glide:()=>{}}),Dd=Od.Provider;function xd({visible:e,onHide:t=(()=>{}),children:a,bgFillClassName:o="",containerClassName:r=""}){const[n,i]=Object(s.useState)(!1);function l(e){e&&e.stopPropagation(),i(!1)}return Object(s.useEffect)((()=>{const t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,17)};e&&t((()=>{t((()=>{i(!0)}))}))}),[e]),s.default.createElement("div",{style:{display:e?"":"none"}},s.default.createElement("div",{className:dt()(Nd.a.bgFill,o,{[Nd.a.bgFillShow]:n}),onClick:l}),s.default.createElement("div",{className:dt()(Nd.a.container,r,{[Nd.a.visibleContainer]:n}),onClick:e=>e.stopPropagation(),onTransitionEnd:function(e){n||t(e)}},s.default.createElement(Dd,{value:{glide:l}},a)))}const Td=sd.getInstance();async function jd({batchSn:e,merchantTag:t=52,mallId:a}){const o=Object(m.g)(window.location.href);return Oa({method:Na.POST,url:"api/promotion/take_merchant_coupon",data:{anti_content:await vr(),batch_sn:e,merchant_tag:t,oc_source:o._oc_source,page_from:Td.pageFrom,mall_id:a+""}})}async function Ad({batchSn:e,merchantTag:t=50}){const a=Object(m.g)(window.location.href);return Oa({method:Na.POST,url:"api/promotion/auto_take_merchant_coupon",data:{anti_content:await vr(),batch_sn:e,merchant_tag:t,oc_source:a._oc_source,page_from:Td.pageFrom}})}async function Ld({mallId:e,batchSn:t,merchantTag:a,likeFrom:o}){return Oa({method:Na.POST,url:"api/promotion/follow_and_take_mall_favorite_coupon",data:{mall_id:e,like_from:o,batch_sn:t,merchant_tag:a,anti_content:await vr()}})}const Rd=36,Md=2,Bd="已领取",Fd="领取",zd="再领取",Hd="请稍后再试～",Vd={[29]:"mallCommodityCoupon",[Rd]:"likeMallCoupon"},Ud={DISPLAY_AMOUNT:10001,DISPLAY_AMOUNT_UNUSABLE:10002,DISPLAY_AMOUNT_UNUSABLE_INEFFICIENCY:10003,DISPLAY_AMOUNT_UNUSABLE_RULE_REASON:10004,DISPLAY_AMOUNT_APP:10005,DISPLAY_DISCOUNT:20001,DISPLAY_DISCOUNT_UNUSABLE:20002,DISPLAY_DISCOUNT_UNUSABLE_INEFFICIENCY:20003,DISPLAY_DISCOUNT_UNUSABLE_RULE_REASON:20004,SUPERPOSITION_AMOUNT:30001,SUPERPOSITION_AMOUNT_UNUSABLE:30002,SUPERPOSITION_AMOUNT_UNUSABLE_RULE_REASON:30003},Wd={44025:["不能领取更多了","去看看别的券吧"],44026:["该券太火爆","全部已被领完"],44027:["好可惜，领券失败","领券活动刚刚结束哦"]},Gd={44025:"已领完",44026:"已抢光"};const qd=e=>{if(e)return e.filter((e=>!!e)).map(((e,t)=>{if(e)return{batchSn:e.batch_sn,discount:Object(Da.b)(e.discount),canTakenCount:e.can_taken_count,subRulesDesc:e.sub_rules_desc,displayType:e.display_type,tagDesc:e.tag_desc,promotionName:e.tag_desc,rulesDesc:e.rules_desc,titleDisplayName:e.rules_desc,richRulesDesc:e.rich_rules_desc,buttonDesc:e.button_desc,buttonSubDesc:e.button_sub_desc,timeDisplayName:e.time_display_name,takeStatus:e.take_status,isFavCoupon:parseInt(e.display_type,10)===Rd,goodsId:Tt()(e,"goods_display.goods_id"),goodsName:Tt()(e,"goods_display.goods_name"),thumbUrl:Tt()(e,"goods_display.thumb_url")}}))},Qd=e=>{if(e)return e.filter((e=>!!e)).map((e=>{const t=e.discount||e.discount_amount;return{discount:Object(Da.b)(t),scope:e.usable_desc,discountType:e.discount_type,endTime:e.end_time,promotionUniqueNo:e.promotion_unique_no,promotionIdentityVo:e.shop_promotion_detail_result||e.promotion_identity_vo,promotionName:e.promotion_name,startTime:e.start_time,titleDisplayName:e.title_display_name,timeDisplayName:e.time_display_name,usableDesc:e.usable_desc,canClick:e.can_click,checkStatus:e.check_status,extraDisplayMap:e.extra_display_map,topDisplayName:e.top_display_name,unusablePromotionDetail:e.unusable_promotion_display_detail_vos,ruleDisplayName:e.rule_display_name,batchSn:Tt()(e,"shop_promotion_detail_result.extension.batch_sn"),buttonDesc:Tt()(e,"extra_display_map.button_desc"),isFavCoupon:Tt()(e,"extra_display_map.is_fav_coupon"),isBrandVipCoupon:Tt()(e,"extra_display_map.is_brand_vip_coupon"),needJoinBrandVip:Tt()(e,"extra_display_map.need_join_brand_vip"),isPercentCoupon:(a=e.display_type,[Ud.DISPLAY_DISCOUNT,Ud.DISPLAY_DISCOUNT_UNUSABLE,Ud.DISPLAY_DISCOUNT_UNUSABLE_INEFFICIENCY,Ud.DISPLAY_DISCOUNT_UNUSABLE_RULE_REASON].includes(parseInt(a,10)))};var a}))},Yd=e=>e?e.map((e=>({fullBackName:Tt()(e,"full_back_name"),rewardStatus:Tt()(e,"reward_status"),processStatusDesc:Tt()(e,"process_status_desc.display_items"),processPercentStr:Tt()(e,"process_percent_str"),currentConsumeAmount:+Object(Da.b)(Tt()(e,"current_consume_amount")),needAmount:+Object(Da.b)(Tt()(e,"need_amount")),rewardAmount:Object(Da.b)(Tt()(e,"reward_amount")),rewardImgUrl:Tt()(e,"reward_img_url"),rewardName:Tt()(e,"reward_name")}))):[],Jd=sd.getInstance();class Xd{constructor(){return this.isFetching=!1,this.couponTaking=!1,Xd.instance||(Xd.instance=this),Xd.instance}initPromotionFunc({togglePromotionPopupVisibleFunc:e,setPromotionListsFunc:t}){this.togglePromotionPopupVisible=e,this.setPromotionLists=t}get notUsePromotion(){const e=Tt()(Jd,"ocData");return{shop:{promotionIdentityVo:{promotion_type:8,promotion_id:"-100",extension:{mall_id:Tt()(e,"goodsInfo.mallId")}}},platform:{promotionIdentityVo:{promotion_type:15,promotion_id:"-100"}}}}async processParams({selectedShopPromotion:e,selectPlatformPromotion:t,refreshAfterReceive:a}={}){const o=Tt()(Jd,"ocData"),r=await vr(),s=Tt()(o,"promotionInfo")||{},{shopPromotion:i,platformPromotion:l}=s,c=[];a||(!e&&i&&i.promotionStatus===El&&(i.notUse?c.push(this.notUsePromotion.shop.promotionIdentityVo):c.push(i.promotionIdentityVo)),e&&c.push(e.promotionIdentityVo),!t&&l&&l.promotionStatus===El&&(l.notUse?c.push(this.notUsePromotion.platform.promotionIdentityVo):c.push(l.promotionIdentityVo)),t&&c.push(t.promotionIdentityVo));const d=Tt()(o,"promotionExtendMap");let u=Tt()(o,"extendMap");return d&&(u=n()(n()({},u),d)),{total_price:Tt()(o,"priceInfo.orderPrice"),source_channel:Jd.sourceChannel,merchant_tag:52,page_from:Jd.pageFrom,front_supports:zc(),address_id:o.addressInfo.addressId,shop_discount_consult_requests:[{mall_id:Tt()(o,"goodsInfo.mallId"),shop_order_price:Tt()(o,"priceInfo.orderPrice"),goods_discount_requests:[{goods_id:Tt()(o,"goodsInfo.goodsId"),sku_id:Tt()(o,"goodsInfo.skuId"),price:Tt()(o,"goodsInfo.unitPriceForCent"),group_price:Tt()(o,"goodsInfo.groupPriceForCent"),group_id:Tt()(o,"goodsInfo.groupId"),normal_price:Tt()(o,"goodsInfo.normalPriceForCent"),goods_number:Tt()(o,"goodsInfo.goodsNumber"),cat_id:Tt()(o,"goodsInfo.catId"),cat_id1:Tt()(o,"goodsInfo.catId1"),cat_id2:Tt()(o,"goodsInfo.catId2"),cat_id3:Tt()(o,"goodsInfo.catId3"),goods_type:Tt()(o,"goodsInfo.goodsType"),event_type:Tt()(o,"goodsInfo.eventType"),activity_type:Tt()(o,"goodsInfo.activityType"),activity_id:Tt()(o,"goodsInfo.activityId"),oversea_type:Tt()(o,"goodsInfo.overseaType")}]}],extend_map:u,promotion_identity_vos:c,anti_content:r}}async fetchPromotionList({selectedShopPromotion:e,selectPlatformPromotion:t,refreshAfterReceive:a}={}){if(this.isFetching)return;const o=await this.processParams({selectedShopPromotion:e,selectPlatformPromotion:t,refreshAfterReceive:a});return Object(ha.c)(),this.isFetching=!0,Oa({method:"POST",url:"api/promotion/query_candidate_promotion",data:o}).then((e=>{const t=Qd(Tt()(e,"shop_candidate_promotion_results.0.usable_shop_promotions"))||[],a=Qd(Tt()(e,"usable_platform_promotions"))||[],o=!Tr()(t)&&t.find((e=>!!e.checkStatus)),r=!Tr()(a)&&a.find((e=>!!e.checkStatus)),n=Tt()(e,"shop_candidate_promotion_results.0.extra_display_map.not_has_selectable_promotion");return{shopPromotionTitle:Tt()(e,"shop_candidate_promotion_results.0.shop_promotion_title_vo.display_items"),retrievableShopPromotions:qd(Tt()(e,"shop_candidate_promotion_results.0.retrievable_shop_promotions"))||[],usableShopPromotions:t,unusableShopPromotions:Qd(Tt()(e,"shop_candidate_promotion_results.0.unusable_shop_promotions"))||[],platformPromotionTitle:Tt()(e,"platform_promotion_title_vo.display_items"),platformPromotionExtraDisplay:Tt()(e,"platform_promotion_extra_display_vo.display_items"),usablePlatformPromotions:a,unusablePlatformPromotions:Qd(Tt()(e,"unusable_platform_promotions"))||[],otherUnusablePlatformPromotions:Qd(Tt()(e,"other_unusable_platform_promotions"))||[],promotionDisplay:Tt()(e,"total_discount_display_vo.display_items")||null,mallFullBackDetails:Yd(Tt()(e,"mall_full_back_details")),crossFullBackDetails:Yd(Tt()(e,"cross_full_back_details")),selectedShopPromotion:o,selectedPlatformPromotion:r,notHasSelectablePromotion:n}})).catch((()=>null)).finally((()=>{Object(ha.a)(),this.isFetching=!1}))}async autoTakeMerchantCoupon(){const e=Tt()(Jd,"ocData");if(Tt()(e,"promotionInfo.shopPromotion.promotionStatus")===Cl){const t=Tt()(e,"promotionInfo.shopPromotion.promotionIdentityVo.extension.batch_sn");if(t){const a=await Ad({batchSn:t});ec({groupId:"20203",customTags:{event:"autoReceivePromotion"}}),Jd.needReload=!0,e.promotionInfo.shopPromotion={mallId:a.source_mall_id,promotionStatus:El,promotionIdentityVo:a.promotion_identity_vo}}}}async batchAutoTakeCoupon(){const e=Tt()(Jd,"ocData");let t=[];const a=Tt()(e,"promotionInfo.shopPromotion.promotionStatus"),o=Tt()(e,"promotionInfo.shopPromotion.promotionIdentityVo.extension.batch_sn"),r=Tt()(e,"promotionInfo.platformPromotion.promotionStatus"),n=Tt()(e,"promotionInfo.platformPromotion.promotionIdentityVo.extension.batch_sn");if(a===Cl&&o&&t.push(o),r===Cl&&n&&t.push(n),t.length>0){const a=await async function({batchSnList:e,merchantTag:t=50}){return Object(m.g)(window.location.href),Oa({method:Na.POST,url:"api/promotion/batch_auto_take_merchant_coupon",data:{anti_content:await vr(),batch_sn_list:e,merchant_tag:t}})}({batchSnList:t});ec({groupId:"20203",customTags:{event:"autoReceivePromotion"}}),Jd.needReload=!0;const o=Tt()(e,"goodsInfo.mallId"),{coupon_list:r}=a||{},n=r&&r.find((e=>8===Tt()(e,"promotion_identity_vo.promotion_type")));n&&(e.promotionInfo.shopPromotion={mallId:o,promotionStatus:El,promotionIdentityVo:n.promotion_identity_vo});const s=r.find((e=>8!==Tt()(e,"promotion_identity_vo.promotion_type")));if(s&&(e.promotionInfo.platformPromotion={mallId:o,promotionStatus:El,promotionIdentityVo:s.promotion_identity_vo}),!r||t.length!==r.length)return{notAllSuccess:!0}}}async ddpPromotionClick(){try{await Oa({method:"POST",url:"api/buffon/kayle/promotion/click/notify",data:{sceneInfoMap:{fromScene:"DOWN_ORDER_PAGE_CLICK_NOTIFY",subScene:"DOWN_ORDER_PAGE_UPSIDE_CELL_CLICK_NOTIFY"}}})}catch(e){}}async likeAndReceive(e){const t=Tt()(Jd,"ocData");Object(M.b)({page_el_sn:"4503302",op:"click",goods_id:Tt()(t,"goodsInfo.goodsId")}),Oa({method:"POST",url:"api/zenon/mall/like_and_receive_coupon",data:{mall_id:Tt()(t,"promotionInfo.shopPromotion.mallId"),like_from:101003,batch_sn:e,merchant_tag:50,base_risk_info:{anti_content:await vr()}}}).then((()=>{Jd.needReload=!0,this.receiveLikeCouponInfo(),ec({groupId:"20203",customTags:{event:"receivePromotion"}}),Jd.refresh({front_action:Dc})})).catch((e=>{const{response:t}=e,a=(t&&t.data||{}).error_msg||"领取失败~";wa(a)}))}receiveLikeCouponInfo(){const e=Tt()(Jd,"ocData"),t=Tt()(e,"mallInfo.name");wa(s.default.createElement(s.default.Fragment,null,"领券成功，已关注",t&&s.default.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"2.56rem",marginTop:".04rem"}},t)),{duration:3})}static getInstance(){return this.instance?this.instance:this.instance=new Xd}}const Kd=sd.getInstance(),$d=Xd.getInstance(),Zd=Object(s.forwardRef)(((e,t)=>{const{glide:a}=Object(s.useContext)(Od),o=async({channelName:t,selectedChannel:o,opts:r})=>{if(r&&r.expandAfterSelection||a(),t&&o){const a=e.ocData;Kd.ocData&&Kd.ocData.orderSn&&(a.orderSn=Kd.ocData.orderSn),Kd.ocData&&Kd.ocData.chaosOrderSn&&(a.chaosOrderSn=Kd.ocData.chaosOrderSn),Kd.ocData&&Kd.ocData.lockInstallmentTerm&&(a.lockInstallmentTerm=Kd.ocData.lockInstallmentTerm),Kd.ocData&&Kd.ocData.lockCreditCardTerm&&(a.lockCreditCardTerm=Kd.ocData.lockCreditCardTerm);const r=Tt()(a,"payChannelList")||[];if(r.forEach((e=>{e.selected=e.channelName===t})),a.selectedChannel=r.find((e=>e.channelName===t)),a.selectedChannel.termIndex=o.termIndex,a.selectedChannel.creditCardTermIndex=o.creditCardTermIndex,o.creditCardTermIndex>=0&&(a.creditCardTermIndex=o.creditCardTermIndex),o.termIndex>=0&&(a.termIndex=o.termIndex),a.selectedChannel.paymentType=await In(t),a.payChannelGroups){const e=a.payChannelGroups.find((e=>e.channels.map((e=>e.channel)).includes(t)));if(null==e?void 0:e.channels){e.channels.forEach((e=>e.defaultSelected=!1));const a=e.channels.find((e=>e.channel===t));a&&(a.defaultSelected=!0)}}Kd.updateOCData(a),(async({channelName:t})=>{const a=Tt()(e,"ocData.promotionInfo.retrievePromotion.promotionStatus"),o=(Tt()(e,"ocData.promotionInfo.totalPromotionsConsult")||{}).discountPayChannel;o&&t===o&&a===Nl&&(await $d.ddpPromotionClick(),Kd.refreshAfterSelectedChannel())})({channelName:t})}},r=Kd.enablePaymentListV2&&!!e.ocData.payChannelGroups;return s.default.createElement("div",{className:Cd.a.payment,onClick:e=>e.stopPropagation()},s.default.createElement("div",{className:Cd.a.title},"选择支付方式",s.default.createElement("span",{className:Cd.a.closeIcon,onClick:a})),!r&&s.default.createElement("div",{className:Cd.a.paymentlist},s.default.createElement(vn,{disableFolding:!0,isRefreshPayChannels:!0,payChannels:e.ocData.payChannelList,installmentList:e.ocData.installmentList,lockInstallmentTerm:Kd.ocData.lockInstallmentTerm,lockCreditCardTerm:Kd.ocData.lockCreditCardTerm,creditCardTermIndex:e.ocData.creditCardTermIndex,termIndex:e.ocData.termIndex,selectedChannelName:e.ocData.selectedChannel&&e.ocData.selectedChannel.channelName,onChannelSelected:o,orderAmount:e.ocData.orderAmount,changeBindId:Kd.changeBindId}),s.default.createElement("div",{className:Cd.a.border})),r&&s.default.createElement(Sd,{payChannels:e.ocData.payChannelList,payChannelGroups:e.ocData.payChannelGroups,installmentList:e.ocData.installmentList,lockInstallmentTerm:Kd.ocData.lockInstallmentTerm,lockCreditCardTerm:Kd.ocData.lockCreditCardTerm,selectedChannelName:e.ocData.selectedChannel&&e.ocData.selectedChannel.channelName,selectedChannel:e.ocData.selectedChannel,onChannelSelected:o,orderAmount:e.ocData.orderAmount,changeBindId:Kd.changeBindId,ref:t}))}));var eu=e=>{const t=Object(s.useRef)();return s.default.createElement(xd,{visible:e.visible,onHide:a=>{var o;a&&a.stopPropagation(),e.toggleShowPaymentList(!1),null===(o=t.current)||void 0===o||o.unspread()}},s.default.createElement(Zd,w()({},e,{ref:t})))},tu=a("g4LU"),au=a.n(tu);const ou=s.default.createContext(!1),ru=ou.Provider;function nu({children:e,onCloseIconClicked:t,additionalClass:a},o){const[r,n]=Object(s.useState)(!1),[i,l]=Object(s.useState)(!0);Object(s.useEffect)((()=>{n(!0)}),[]);const c=()=>{n(!1)};Object(s.useImperativeHandle)(o,(()=>({onSlideDowm:c})));const d=dt()(`${au.a.popover} ${a||""}`),u=dt()(au.a.bg,{[au.a.bgShown]:r});return i?s.default.createElement("div",{className:d,ref:o,onClick:e=>{c()}},s.default.createElement("div",{className:u,onClick:e=>{e.stopPropagation(),c()}}),s.default.createElement("div",{className:`${au.a.main} ${r?au.a.mainShown:""}`,onTransitionEnd:e=>{r||(t&&t(e),l(!1))},onClick:e=>{e.stopPropagation()}},s.default.createElement(ru,{value:{glide:c}},e))):null}var su=Object(s.forwardRef)(nu),iu=a("7wT/"),lu=a.n(iu);var cu=function({title:e,titleVo:t,noBorder:a}){return e||t?s.default.createElement("div",{className:`${lu.a.listTitle} ${a?lu.a.noBorder:""}`},Tr()(t)?e:t.map(((e,t)=>{const a={color:e.font_color,fontSize:e.font_size/100+"rem"};return s.default.createElement("span",{key:t,style:a},e.text)}))):null},du=a("Wgq/"),uu=a.n(du);var pu=function(e){const{discount:t,promotionName:a,isPercentCoupon:o,isRuleDisable:r,high:n}=e,i=dt()(uu.a.discountInfo,{[uu.a.high]:!!n}),l=dt()(uu.a.discount,{[uu.a.gray]:!!r,[uu.a.small]:(t+"").replace(".","").length>4}),c=dt()(uu.a.promotionName,{[uu.a.small]:a.length>7});return s.default.createElement("div",{className:i},s.default.createElement("div",{className:l},o?s.default.createElement(s.Fragment,null,s.default.createElement("span",null,t),s.default.createElement("i",{className:uu.a.percentIcon},"折")):s.default.createElement(s.Fragment,null,s.default.createElement("i",{className:uu.a.discountIcon},"¥"),s.default.createElement("span",null,t))),s.default.createElement("div",{className:c},a))},mu=a("Bogp"),hu=a.n(mu);var fu=function(e){const[t,a]=Object(s.useState)(!1),{titleDisplayName:o,timeDisplayName:r,ruleDisplayName:n,richRulesDesc:i,isDisable:l,goodsName:c,extraDisplayMap:d,showGoodsName:u}=e,p=c||Tt()(d,"goods_name")||null,m=dt()(hu.a.promotionInfo,{[hu.a.high]:!!t||!!n}),h=dt()(hu.a.titleDisplayName,{[hu.a.gray]:l,[hu.a.hasDetail]:!!p&&u,[hu.a.detailShown]:t});return s.default.createElement("div",{className:m},s.default.createElement("div",{className:h,onClick:p&&u?e=>{e.stopPropagation(),a(!t)}:null},i&&i.length>0?i.map((e=>s.default.createElement("span",{key:e.txt,style:{color:e.color||null}},e.txt))):o),s.default.createElement("div",{className:hu.a.timeDisplayName},r),t&&p&&s.default.createElement("div",{className:hu.a.detail},p),n&&s.default.createElement("div",{className:hu.a.ruleDisplayName},n))},gu=a("SeBp"),_u=a.n(gu);function yu(e){return e.selected?s.default.createElement("svg",{t:"1614064061193",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35869"},s.default.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m219.648 307.2l-287.118222 320.398222-122.936889-123.050666L256 570.026667l192.284444 192.398222 352.483556-393.386667L731.648 307.2z","p-id":"35870"})):e.disable?s.default.createElement("svg",{t:"1614064112414",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"37940"},s.default.createElement("path",{d:"M511.941358 511.941358m-508.657427 0a508.657428 508.657428 0 1 0 1017.314855 0 508.657428 508.657428 0 1 0-1017.314855 0Z","p-id":"37941"})):s.default.createElement("svg",{t:"1614063231082",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35744"},s.default.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2z m0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z","p-id":"35745"}))}var bu=function(e){const t=dt()(_u.a.selectIcon,{[_u.a.selected]:e.selected,[_u.a.disable]:e.disable});return s.default.createElement("div",{className:t,style:e.style},s.default.createElement(yu,e))},vu=a("dtTa"),ku=a.n(vu);var Iu=function(e){const t=dt()(ku.a.usablePromotionItem,e.exClass);return s.default.createElement("div",{className:t,onClick:e.onSelect},s.default.createElement(pu,e),s.default.createElement(fu,e),s.default.createElement(bu,w()({},e,{style:{height:".78rem"}})))},wu=a("V/7h"),Su=a.n(wu);var Eu=function(e){const{skuThumbList:t,webpEnable:a}=e;if(!t)return null;const o=t&&t.slice(),r=t.length%8?8-t.length%8:0;for(let n=0;n<r;n++)o.push(0);return s.default.createElement("div",{className:Su.a.skuList},t&&!!t.length&&o.map(((e,t)=>s.default.createElement("div",{className:Su.a.skuBox,key:e.sku_id||t},e.thumb_url&&s.default.createElement(Wa.a,{src:Object(he.a)(e.thumb_url,{resizeWidth:300,webpEnable:a})})))))};var Cu=function(e){const{unUsableDisplayDetail:t,webpEnable:a}=e;return s.default.createElement("div",{className:Su.a.disableList},t&&!!t.length&&t.map((e=>{const t=e.sku_thumb_url_volist||e.sku_thumb_url_vos;return s.default.createElement("div",{className:Su.a.displayList,key:e.display_name},s.default.createElement("div",{className:Su.a.displayTitle},e.display_name),s.default.createElement(Eu,{webpEnable:a,skuThumbList:t}))})))},Pu=a("LrBD"),Nu=a.n(Pu);var Ou=function(e){const t=dt()(Nu.a.disablePromotionItem,e.exClass);return s.default.createElement(s.Fragment,null,s.default.createElement("div",{className:t,onClick:e.onSelect},s.default.createElement(pu,w()({},e,{high:!0,isDisable:!0})),s.default.createElement(fu,w()({},e,{isDisable:!0})),s.default.createElement(bu,w()({},e,{disable:!0,style:{height:"1.03rem"}}))),!!e.canClick&&e.unUsableDisplayDetail&&s.default.createElement("div",{className:Nu.a.disableWrap},s.default.createElement(Cu,{webpEnable:e.webpEnable,unUsableDisplayDetail:e.unUsableDisplayDetail})))},Du=a("PlGL");function xu(e){let t;return async function(...a){if(!t)try{return t=e.apply(this,a),await t}catch(o){throw o}finally{t=null}}}Tu=e=>xu(e);var Tu;const ju={isSpinnerShown:!1,index:0,timers:[],show(e=500){const t=ju.index;return ju.timers[ju.index]=setTimeout((()=>{ju.isSpinnerShown||(Object(ha.b)(),ju.isSpinnerShown=!0)}),e),ju.index++,()=>ju.hide(t)},showWithoutBg(e=500){const t=ju.index;return ju.timers[ju.index]=setTimeout((()=>{ju.isSpinnerShown||(Object(ha.c)(),ju.isSpinnerShown=!0)}),e),ju.index++,()=>ju.hide(t)},hide(e){const t=ju.timers[e];t&&(clearTimeout(t),ju.timers[e]=-1),ju.isSpinnerShown&&!ju.timers.some((e=>e>-1))&&(Object(ha.a)(),ju.isSpinnerShown=!1,ju.timers=[],ju.index=0)}};var Au={mutiDelaySpinner:ju};function Lu({elementType:e,onFocus:t=(()=>{}),onBlur:a=(()=>{}),autoFocus:o=!1,autoFocusTime:r=0,className:i,placeholder:l,maxLength:c,type:d="text",onChange:u=(()=>{}),defaultValue:p,value:m,id:h,extraParams:f}){const g=Object(s.useRef)(null);Object(s.useEffect)((()=>{o&&setTimeout((()=>{var e;null==g||null===(e=g.current)||void 0===e||e.focus();Object(O.a)().system===D.b.Android&&Object(ae.g)("JSKeyboard","showKeyboard")}),r)}),[]);const _=function(){{const e=Object(O.a)();return e.system===D.b.IOS&&Object(D.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo}}(),y=n()({type:d,onFocus:()=>{window.__currentInput.focusId=h,_&&(window.__currentInput.scrollYWhenFocus=window.scrollY),t()},onBlur:()=>{var e;_&&function(e,t){setTimeout((()=>{var a;(null===(a=window.__currentInput)||void 0===a?void 0:a.focusId)===t&&(window.scrollTo(0,e),window.__currentInput.focusId=null)}),0)}(null===(e=window.__currentInput)||void 0===e?void 0:e.scrollYWhenFocus,h),a()},ref:g,className:i,placeholder:l,maxLength:c,onChange:u,defaultValue:p,value:m,id:h},f);return"textarea"===e?s.default.createElement("textarea",y):s.default.createElement("input",y)}window.__currentInput={scrollYWhenFocus:0,focusId:null};var Ru={memberRuleClick:{page_el_sn:5556244},memberProtoClick:{page_el_sn:5556242},sendCodeClick:{page_el_sn:5556240},changeClick:{page_el_sn:5556239},joinAndTakeCouponClick:{page_el_sn:5556088},mobileImpr:{op:"impr",page_el_sn:5556031},couponImpr:{op:"impr",page_el_sn:5556030}},Mu=a("vVBQ"),Bu=a.n(Mu);var Fu=({memberRuleUrl:e,memberProtocolUrl:t})=>s.default.createElement("div",{className:Bu.a.rule},s.default.createElement("p",null,"确认加入即表示同意"),s.default.createElement("p",null,s.default.createElement("span",{className:Bu.a.ruleText,onClick:()=>{Object(M.b)(null==Ru?void 0:Ru.memberRuleClick),e&&oe.a.uniformForward(e)}},"《会员规则》"),"及",s.default.createElement("span",{className:Bu.a.ruleText,onClick:()=>{Object(M.b)(null==Ru?void 0:Ru.memberProtoClick),t&&oe.a.uniformForward(t)}},"《会员授权协议》")));function zu(e){return/^[1][3,4,5,7,8,9][0-9]{9}$/.test(e)}var Hu=a("79/T"),Vu=a.n(Hu);function Uu(e,t=[],a=!1){let o=e;if("object"==typeof e&&null!==e)if(e instanceof Array){o=[];for(const r in e)o[r]=Uu(e[r],t,a)}else o={},pa()(e,((e,r)=>{const n=a?Vu()(r):r.includes("_")?da()(r):r;t.includes(r)?o[n]=e:o[n]=Uu(e,t,a)}));return o}let Wu,Gu=!1;const qu=[],Qu=async()=>{Wu||await(async e=>{if(Gu)return new Promise((e=>{qu.push(e)}));Gu=!0,e||(e=Uu(await Xu({method:Ju.GET,url:"api/server/_stm"})).serverTime);const t={serverTime:e=e||+Date.now()};Wu=new gr.default(t),qu.forEach((e=>e())),Gu=!1})();return Wu.messagePack()};let Yu,Ju;!function(e){e.POST="POST",e.GET="GET"}(Ju||(Ju={}));var Xu=async function(e,t={isAuth:!1,isFormat:!1,isAnti:!1}){if(!Yu){const e=ia.a.getInstance().getPageID();Yu=Object(sa.a)({pageInfo:{pageId:e}})}if(null==t?void 0:t.isAuth){await Object(la.a)()||await Object(la.f)()}e&&!e.defaultErrorHandler&&(e.defaultErrorHandler=()=>{}),(null==t?void 0:t.isAnti)&&(e.data=Object.assign({},n()(n()({},e.data||{}),{},{anti_content:await Qu()}))),e.encodeNativeResponse=!1;const a=await Yu(e);return(null==t?void 0:t.isFormat)?Uu(a):a};var Ku=({mallId:e,buttonText:t,autoFocus:a=!0,joinMemberCallback:o,memberRuleUrl:r,memberProtocolUrl:n})=>{const i=Object(s.useRef)(null),l=Object(s.useRef)(null),[c,d]=Object(s.useState)(""),[u,p]=Object(s.useState)(!1),[m,h]=Object(s.useState)(""),f=Object(s.useRef)(""),g=Object(s.useRef)(!1),[_,y]=Object(s.useState)(""),b=Object(s.useRef)(),[v,k]=Object(s.useState)("发送验证码");Object(s.useEffect)((()=>()=>{clearInterval(b.current)}),[]);const I=xu((async()=>{var t;if(Object(M.b)(null==Ru?void 0:Ru.joinAndTakeCouponClick),!zu(c))return void Object(kt.a)("请输入正确的手机号");if(!m)return void Object(kt.a)("请输入验证码");if(!/^[0-9]{6}$/.test(m))return void Object(kt.a)("验证码不正确，请重新输入");const a={mobile_id:f.current,code:m,scene:"1000038",mall_id:+e},r=(null==Au||null===(t=Au.mutiDelaySpinner)||void 0===t?void 0:t.showWithoutBg)&&Au.mutiDelaySpinner.showWithoutBg(),n=await(s=a,Xu({method:Ju.POST,url:"api/rimini/mall_member/mobile/code/auth/verify",data:s},{isFormat:!0,isAnti:!0}).then((e=>(null==e?void 0:e.result)||{})).catch((()=>({}))));var s;(null==n?void 0:n.sessionId)?o&&o(null==n?void 0:n.sessionId):Object(kt.a)("验证码不正确，请重新输入"),r&&r()}));return s.default.createElement("div",{className:Bu.a.joinContent},s.default.createElement("div",{className:Bu.a.phoneContent},s.default.createElement(Lu,{onChange:e=>{var t;const a=(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"",o=zu(a)&&(!g.current||a!==_);m&&u&&!o&&h(""),p(o),d(a)},value:c,className:Bu.a.inputBox,placeholder:"请输入手机号",maxLength:11,elementType:"input",type:"tel",id:"phone",extraParams:{ref:i}}),!!c&&s.default.createElement("i",{className:Bu.a.clearButton,onClick:()=>{var e;d(""),h(""),p(!1),null==i||null===(e=i.current)||void 0===e||e.focus()}})),s.default.createElement("div",{className:Bu.a.phoneContent},s.default.createElement(Lu,{onChange:e=>{var t;const a=(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"";h(a)},value:m,className:dt()(Bu.a.inputBox,Bu.a.codeInputBox),placeholder:"请输入验证码",maxLength:6,elementType:"input",type:"tel",id:"code",extraParams:{ref:l}}),s.default.createElement("span",{className:dt()(Bu.a.verifyCode,{[Bu.a.verifyCodeActive]:u}),onClick:async()=>{if(Object(M.b)(null==Ru?void 0:Ru.sendCodeClick),!zu(c))return void Object(kt.a)("请输入正确的手机号");if(c===_&&g.current)return;const t={mobile:c,mobile_type:1,digits:6,scene:"1000038",mall_id:+e},a=await(e=>Xu({method:Ju.POST,url:"api/rimini/mall_member/mobile/code/auth/query",data:e},{isFormat:!0,isAnti:!0}).then((e=>(null==e?void 0:e.result)||{})).catch((()=>({}))))(t),{result:o,mobileId:r}=a||{};var n;o?(((e=60)=>{let t=e--;g.current=!0,y(c),p(!1),k(`重新发送(${t})`),b.current&&clearInterval(b.current),b.current=setInterval((()=>{--t>0?k(`重新发送(${t})`):(g.current=!1,k("发送验证码"),y(""),p(!0),clearInterval(b.current))}),1e3)})(),f.current=r,null==l||null===(n=l.current)||void 0===n||n.focus()):Object(kt.a)("验证码发送失败")}},c!==_?"发送验证码":v)),s.default.createElement("div",{className:Bu.a.joinBtn,onClick:I},t||"加入会员并领取"),s.default.createElement(Fu,{memberRuleUrl:r,memberProtocolUrl:n}))};var $u=({content:e,modifyNumber:t,joinMemberCallback:a,mallId:o})=>{const{userMobile:r,brandLogoUrl:n,buttonText:i,coupon:l,popupTitle:c,memberRuleUrl:d,memberProtocolUrl:u}=e||{},{fuzzyMobile:p}=r||{},{discount:m,richRulesDesc:h,tagDesc:f,timeDisplayName:g}=l||{},_=ho()((()=>{Object(M.b)(null==Ru?void 0:Ru.joinAndTakeCouponClick),a()}),300);return s.default.createElement("div",null,!!n&&s.default.createElement("div",{className:Bu.a.logoWrap},s.default.createElement(Wa.a,{className:Bu.a.logo,src:n})),s.default.createElement("div",{className:Bu.a.container},s.default.createElement("div",{className:Bu.a.titleWrap},s.default.createElement("div",{className:Bu.a.title},c)),s.default.createElement(Ra.a,{trackingInfo:null==Ru?void 0:Ru.couponImpr},s.default.createElement("div",{className:Bu.a.couponContent},s.default.createElement("div",{className:Bu.a.couponItem},s.default.createElement("div",{className:Bu.a.couponPrice},s.default.createElement("i",null,"¥"),Object(Da.b)(m||0)),s.default.createElement("div",{className:Bu.a.couponInfo},s.default.createElement("p",null,(h||[]).map((e=>e.txt))),s.default.createElement("p",null,g)),!!f&&s.default.createElement("div",{className:Bu.a.couponTag},f)))),s.default.createElement("div",{className:Bu.a.joinContent},p?s.default.createElement(s.default.Fragment,null,s.default.createElement(Ra.a,{trackingInfo:null==Ru?void 0:Ru.mobileImpr},s.default.createElement("div",{className:Bu.a.phoneContent,onClick:t},s.default.createElement("p",null,"手机号：",p),s.default.createElement("p",null,"修改"))),s.default.createElement("div",{className:Bu.a.joinBtn,onClick:_},i||"加入会员并领取"),s.default.createElement(Fu,{memberRuleUrl:d,memberProtocolUrl:u})):s.default.createElement(Ku,{joinMemberCallback:a,mallId:o,buttonText:i,memberRuleUrl:d,memberProtocolUrl:u}))))};var Zu=({data:e,content:t,showBack:a,joinMemberCallback:o,goBack:r=(()=>{})})=>s.default.createElement("div",{className:Bu.a.phoneContainer},s.default.createElement("div",{className:Bu.a.phoneTitleWrap},a&&s.default.createElement("div",{className:Bu.a.backBtnWrap,onClick:r},s.default.createElement("div",{className:Bu.a.backBtn})),s.default.createElement("div",{className:Bu.a.title},"修改授权手机号")),s.default.createElement(Ku,{joinMemberCallback:o,mallId:null==e?void 0:e.mallId,buttonText:null==t?void 0:t.buttonText,memberRuleUrl:null==t?void 0:t.memberRuleUrl,memberProtocolUrl:null==t?void 0:t.memberProtocolUrl}));var ep=Object(s.forwardRef)((({data:e={},onShowFail:t=(()=>{}),onSuccess:a=(()=>{}),spinnerTime:o},r)=>{const[n,i]=Object(s.useState)(!1),[l,c]=Object(s.useState)(0),[d,u]=Object(s.useState)({}),{mallId:p,couponId:m,sceneId:h,merchantTag:f}=e;Object(s.useImperativeHandle)(r,(()=>({show:async(e=0)=>{var a;const r=(null==Au||null===(a=Au.mutiDelaySpinner)||void 0===a?void 0:a.show)&&Au.mutiDelaySpinner.show(o||300);try{const t=await(n={mall_id:+p,coupon_batch_sn:m,scene_id:h},Xu({method:Ju.POST,url:"api/rimini/mall_member/query_join_member_popup",data:n},{isAuth:!0,isFormat:!0,isAnti:!0}).then((e=>(null==e?void 0:e.result)||{})));if(!t)return void Object(kt.a)("请稍后再试～");u(t),i(!0),c(e)}catch(s){Object(kt.a)((null==s?void 0:s.message)||"请稍后再试～"),t&&t(s)}finally{r&&r()}var n},hide:()=>{i(!1)}})));const g=e=>{var t;const o=null==d||null===(t=d.userMobile)||void 0===t?void 0:t.mobileId,r={mall_id:+p||0,scene_id:h,batch_sn:m,merchant_tag:f};e?Object.assign(r,{mobile_session_id:e}):Object.assign(r,{mobile_id:o}),(e=>Xu({method:Ju.POST,url:"api/promotion/join_and_take_mall_member_coupon",data:e},{isAuth:!0,isFormat:!0,isAnti:!0}).then((e=>e||{})))(r).then((e=>{(null==e?void 0:e.couponId)?(Object(kt.a)((null==e?void 0:e.toast)||"已加入会员并成功领券"),a&&a(e),i(!1)):Object(kt.a)("请稍后再试～")})).catch((e=>{var t,a,o,r,n,s;2000004===(null==e?void 0:e.errorCode)&&(null==e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error_toast)?(i(!1),Ua({title:null==e||null===(o=e.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.error_toast,confirmButtonLabel:"知道了",onConfirm:()=>{i(!0)},onClose:()=>{i(!0)}})):Object(kt.a)((null==e||null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error_toast)||"请稍后再试～")}))};return n?s.default.createElement(Du.a,null,1===l||2===l?s.default.createElement(Zu,{data:e,content:d,showBack:2===l,joinMemberCallback:g,goBack:()=>{c(0)}}):s.default.createElement($u,{content:d,modifyNumber:()=>{Object(M.b)(null==Ru?void 0:Ru.changeClick),c(2)},joinMemberCallback:g,mallId:p}),s.default.createElement(Du.a.CloseButton,{onClick:()=>i(!1)})):null})),tp=a("Ai8/"),ap=a.n(tp);const op=Xd.getInstance();var rp=function(e){const t=Object(s.useRef)(null),{canTake:a,index:o,buttonDesc:r,buttonSubDesc:n,displayType:i,goodsInfo:l,batchSn:c,isFavCoupon:d,isBrandVipCoupon:u,needJoinBrandVip:p,receiveCallback:m}=e,h=dt()(ap.a.btn,ap.a[Vd[i]],{[ap.a.isTakenOut]:!a}),{mallId:f}=l;let g=!1;const _=async()=>{if(!g){g=!0;try{let e;if(u&&p)return void t.current.show();if(d)e=await Ld({batchSn:c,likeFrom:101003,merchantTag:52,mallId:f}),op.receiveLikeCouponInfo();else{e=await jd({batchSn:c,merchantTag:52,mallId:f});const t=Tt()(e,"higher_priority_take_toast");t?Ms(t,{style:{whiteSpace:"pre-line"},ContainerProps:{style:{height:"85%",top:"auto"}}}):wa("领取成功")}m&&m({data:e,index:o}),ec({groupId:"20203",customTags:{event:"receivePromotion"}})}catch(e){const{errorCode:t}=e;if(t){const a=Wd[t];if(a){wa(a[0]);const e=Gd[t];m&&m({index:o,buttonText:e})}else{const{data:t}=e.response||{},a=t&&t.error_toast||Hd;wa(a)}}}finally{g=!1}}},y=dt()(ap.a.receivePromotionItem,e.exClass);return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:y},s.default.createElement(pu,e),s.default.createElement(fu,e),s.default.createElement("div",{className:ap.a.buttonWrap},s.default.createElement("div",{className:h,onClick:()=>{a&&_()}},r,!!n&&s.default.createElement("div",{className:ap.a.hasNum},n)))),s.default.createElement(ep,{ref:t,data:{mallId:f,couponId:c,sceneId:1006,merchantTag:3},onShowFail:e=>{null==e||e.errorCode},onSuccess:e=>{m&&m({data:{promotion_identity_vo:e.promotionIdentityVo},index:o})}}))},np=a("cIxk"),sp=a.n(np);var ip=function(e){const t=dt()(sp.a.dontUseItem,e.exClass);return s.default.createElement("div",{className:t,onClick:e.onSelect},s.default.createElement("div",{className:sp.a.label},"暂不使用优惠"),s.default.createElement(bu,w()({style:{height:".37rem"}},e)))},lp=a("ooc8"),cp=a.n(lp);var dp=({fullBackName:e,rewardStatus:t,processStatusDesc:a,processPercentStr:o,currentConsumeAmount:r,needAmount:n,rewardAmount:i,rewardImgUrl:l,rewardName:c,exClass:d})=>{const u=dt()(cp.a.redPacketItem,d,{[cp.a.reward]:t});return s.default.createElement("div",{className:u},s.default.createElement("div",{className:cp.a.redPacket,style:{backgroundImage:l&&`url(${l})`||"none"}},s.default.createElement("div",{className:cp.a.couponAmount},s.default.createElement("span",{className:cp.a.priceIcon},"¥"),s.default.createElement("span",{className:cp.a.num},i)),s.default.createElement("div",{className:cp.a.couponTag},s.default.createElement("div",{className:cp.a.couponTagTxt},c))),s.default.createElement("div",{className:cp.a.redPacketInfo},s.default.createElement("div",{className:cp.a.fullBackName},e),s.default.createElement("div",{className:cp.a.processStatusDesc},a.map(((e,t)=>s.default.createElement("span",{key:t,style:{color:e.font_color,fontSize:e.font_size/100+"rem"}},e.text)))),!t&&s.default.createElement("div",{className:cp.a.progress},s.default.createElement("div",{className:cp.a.progressBarOuter},s.default.createElement("div",{className:cp.a.progressBarInner,style:{width:r/n*100+"%"}})),o)))},up=a("xFQA"),pp=a.n(up);const mp=sd.getInstance(),hp=Xd.getInstance();var fp=e=>{const{promotionLists:t}=e,[a,o]=Object(s.useState)(!0),[r,n]=Object(s.useState)(!0),{shopPromotionTitle:i,retrievableShopPromotions:l,usableShopPromotions:c,unusableShopPromotions:d,platformPromotionTitle:u,platformPromotionExtraDisplay:p,usablePlatformPromotions:m,unusablePlatformPromotions:h,otherUnusablePlatformPromotions:f,selectedShopPromotion:g,mallFullBackDetails:_,crossFullBackDetails:y,selectedPlatformPromotion:b}=t||{},v=!Tr()(c)||!Tr()(d),k=!Tr()(m)||!Tr()(h),I=Tt()(e,"ocData"),S=Tt()(I,"goodsInfo.mallId"),E=Tt()(I,"goodsInfo.goodsId"),C=Tt()(I,"goodsInfo.skuId"),P=Tt()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},N=Tt()(P,"floatTitleDisplay"),O=Tt()(P,"floatCategoryDisplay"),D=(e=[],t=[])=>e.length>2?[]:t.slice(0,2-e.length),x=(e=[],t=[])=>e.length+t.length>2,T=async({data:e,index:t,buttonText:a})=>{mp.needReload=!0;const o=l[t],r=e.usable_count_text,n=o.canTakenCount-1;let s={canTakenCount:n,buttonDesc:n>0?zd:Bd};if(a&&(s={canTakenCount:0,buttonDesc:a}),r&&(s.buttonSubDesc=r),Object.assign(o,s),o.displayType===Rd){const e=l.filter((e=>e.displayType===Rd));e.length>1&&e.forEach((e=>{e.canTakenCount>0&&2===e.takeStatus&&(e.buttonDesc=Fd)}))}const i=await hp.fetchPromotionList({refreshAfterReceive:!0});i&&!Tr()(i.retrievableShopPromotions)&&(i.retrievableShopPromotions=l),i&&hp.setPromotionLists(i)},j=async({selectedShopPromotion:e,selectPlatformPromotion:t}={})=>{const a=await hp.fetchPromotionList({selectedShopPromotion:e,selectPlatformPromotion:t});a&&hp.setPromotionLists(a)};return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:pp.a.promotionList},s.default.createElement(cu,{titleVo:i,noBorder:!v}),!Tr()(c)&&(a?c.slice(0,2):c).map((t=>t.buttonDesc?s.default.createElement(rp,w()({exClass:pp.a.promotionItem,goodsInfo:{goodsId:E,skuId:C,mallId:S},key:t.promotionUniqueNo,receiveCallback:({data:e})=>{mp.needReload=!0,e.promotion_identity_vo&&(ec({groupId:"20203",customTags:{event:"selectShopPromotion"}}),j({selectedShopPromotion:{promotionIdentityVo:e.promotion_identity_vo},selectPlatformPromotion:b||hp.notUsePromotion.platform}))},canTake:!0},t,e)):s.default.createElement(Iu,w()({exClass:pp.a.promotionItem,key:t.promotionUniqueNo},t,e,{selected:!!t.checkStatus,onSelect:async()=>{if(t.batchSn)try{let e;e=t.isFavCoupon?await Ld({batchSn:t.batchSn,likeFrom:101003,merchantTag:52,mallId:S}):await jd({batchSn:t.batchSn,merchantTag:52,mallId:S}),ec({groupId:"20203",customTags:{event:"receivePromotion"}}),e.promotion_identity_vo&&(mp.needReload=!0,ec({groupId:"20203",customTags:{event:"selectShopPromotion"}}),j({selectedShopPromotion:{promotionIdentityVo:e.promotion_identity_vo},selectPlatformPromotion:b||hp.notUsePromotion.platform}))}catch(e){const{response:t}=e,{data:a}=t||{},o=Tt()(a,"error_toast")||"领取优惠失败，请重试";Object(kt.a)(o)}else t.checkStatus?j({selectedShopPromotion:hp.notUsePromotion.shop,selectPlatformPromotion:b||hp.notUsePromotion.platform}):(ec({groupId:"20203",customTags:{event:"selectShopPromotion"}}),j({selectedShopPromotion:t,selectPlatformPromotion:b||hp.notUsePromotion.platform}))}})))),!Tr()(d)&&(a?D(c,d):d).map(((e,t)=>s.default.createElement(Ou,w()({onSelect:()=>{Object(kt.a)("此优惠暂不满足使用条件")},exClass:pp.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e)))),x(c,d)&&s.default.createElement("div",{className:dt()(pp.a.foldItem,pp.a.promotionItem,{[pp.a.foled]:a}),onClick:()=>o(!a)},s.default.createElement("span",null,s.default.createElement("i",null,a?"展开更多店铺优惠":"收起"),s.default.createElement(Ht,null))),!Tr()(c)&&s.default.createElement(ip,{exClass:pp.a.promotionItem,selected:!g,onSelect:()=>{g&&j({selectedShopPromotion:hp.notUsePromotion.shop,selectPlatformPromotion:b||hp.notUsePromotion.platform})}})),(k||u)&&s.default.createElement("div",{className:pp.a.promotionList},s.default.createElement(cu,{titleVo:u,noBorder:!k&&!p}),p&&s.default.createElement(cu,{titleVo:p,noBorder:!k}),!Tr()(m)&&(r?m.slice(0,2):m).map((t=>s.default.createElement(Iu,w()({exClass:pp.a.promotionItem,key:t.promotionUniqueNo},t,e,{selected:!!t.checkStatus,onSelect:()=>{t.checkStatus?j({selectedShopPromotion:g||hp.notUsePromotion.shop,selectPlatformPromotion:hp.notUsePromotion.platform}):(ec({groupId:"20203",customTags:{event:"selectPlatformPromotion"}}),j({selectedShopPromotion:g||hp.notUsePromotion.shop,selectPlatformPromotion:t}))}})))),!Tr()(h)&&(r?D(m,h):h).map(((e,t)=>s.default.createElement(Ou,w()({onSelect:()=>{Object(kt.a)("此优惠暂不满足使用条件")},exClass:pp.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e)))),x(m,h)&&s.default.createElement("div",{className:dt()(pp.a.foldItem,pp.a.promotionItem,{[pp.a.foled]:r}),onClick:()=>n(!r)},s.default.createElement("span",null,s.default.createElement("i",null,r?"展开更多平台优惠":"收起"),s.default.createElement(Ht,null))),!Tr()(m)&&s.default.createElement(ip,{exClass:pp.a.promotionItem,selected:!b,onSelect:()=>{b&&j({selectedShopPromotion:g||hp.notUsePromotion.shop,selectPlatformPromotion:hp.notUsePromotion.platform})}})),!Tr()(l)&&s.default.createElement("div",{className:pp.a.promotionList},s.default.createElement(cu,{title:"领取更多优惠"}),l.map(((t,a)=>{const o=t.takeStatus===Md&&t.canTakenCount;return s.default.createElement(rp,w()({exClass:pp.a.promotionItem,goodsInfo:{goodsId:E,skuId:C,mallId:S},index:a,key:t.batchSn,receiveCallback:T,canTake:o},t,e))}))),!Tr()(f)&&f.map(((e,t)=>s.default.createElement(Ou,w()({onSelect:()=>{Object(kt.a)("此优惠暂不满足使用条件")},isRuleDisable:1,exClass:pp.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e)))),!Tr()(O)&&s.default.createElement("div",{className:pp.a.promotionList},s.default.createElement(cu,{titleVo:N,title:"支付优惠"}),s.default.createElement("div",{className:pp.a.float},O&&O.map(((e,t)=>{const a={color:e.font_color,background:e.bg_color},o=dt()(pp.a.displayItem,pp.a["promotion"+e.display_type]);return 100===e.display_type?s.default.createElement("img",{style:{height:e.height/100+"rem",width:e.width/100+"rem"},src:Object(he.a)(e.url)}):s.default.createElement("span",{key:t,className:o,style:a},e.text)})))),(!Tr()(_)||!Tr()(y))&&s.default.createElement("div",{className:pp.a.promotionList},s.default.createElement(cu,{title:"拼单返现"}),!Tr()(_)&&_.map(((e,t)=>s.default.createElement(dp,w()({key:t,exClass:pp.a.promotionItem},e)))),!Tr()(y)&&y.map(((e,t)=>s.default.createElement(dp,w()({key:t,exClass:pp.a.promotionItem},e))))))};const gp=sd.getInstance(),_p=Xd.getInstance();function yp(e){const{promotionLists:t}=e,{glide:a}=Object(s.useContext)(ou),{promotionDisplay:o}=t||{},r=Object(s.useRef)();Object(s.useEffect)((()=>{const e=r&&r.current;return Object(ft.a)(e),()=>{Object(ft.b)()}}),[]);const{usableShopPromotions:n,usablePlatformPromotions:i,selectedShopPromotion:l,selectedPlatformPromotion:c,notHasSelectablePromotion:d}=t||{},u=async()=>{if(_p.isFetching)return;const t=Tt()(e,"ocData"),o={use_platform_promotion_request:{not_use:!1,promotion_identity_vo:null},use_shop_promotion_requests:[]},r={promotion_identity_vos:[],mall_id:Tt()(t,"goodsInfo.mallId"),not_use:!1};Tr()(n)||d||(l?r.promotion_identity_vos=[l.promotionIdentityVo]:r.not_use=!0,o.use_shop_promotion_requests=[r]),Tr()(i)||(c?o.use_platform_promotion_request.promotion_identity_vo=c.promotionIdentityVo:o.use_platform_promotion_request.not_use=!0),await gp.refresh({promotion_vo:o}),a()},p=dt()(pp.a.titleContainer,{[pp.a.hasBorder]:Tr()(o)});return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:p},s.default.createElement("div",{className:pp.a.title},s.default.createElement("span",{className:pp.a.text},"优惠详情"),s.default.createElement("div",{className:pp.a.close,onClick:u},s.default.createElement("div",{className:pp.a.closeIcon})))),!Tr()(o)&&s.default.createElement("div",{className:pp.a.promotionDisplay},o.map(((e,t)=>{const a={color:e.font_color,fontSize:e.font_size};return s.default.createElement("span",{key:t,style:a},e.text)}))),s.default.createElement("div",{className:`${pp.a.content} ${Tr()(o)?"":pp.a.hasPromotionDisplay}`,ref:r},s.default.createElement(fp,e)),s.default.createElement("div",{className:pp.a.bottom},s.default.createElement("div",{className:pp.a.btn,onClick:u},"确认")))}var bp=e=>{const[t,a]=Object(s.useState)(!1),[o,r]=Object(s.useState)({});Object(s.useEffect)((()=>{_p.initPromotionFunc({togglePromotionPopupVisibleFunc:e=>a(e),setPromotionListsFunc:e=>r(e)})}),[]);return t?s.default.createElement(su,{title:"优惠详情",onCloseIconClicked:()=>{a(!1)},contentId:"promotion-popup"},s.default.createElement(yp,w()({promotionLists:o},e))):null},vp=a("JiL4"),kp=a.n(vp);const Ip=Xd.getInstance(),wp=sd.getInstance();function Sp({displayItems:e=[],hasDdpayPromotion:t,goodsId:a}){return Tr()(e)?null:e.map(((e,o)=>{const r={color:e.font_color,background:e.bg_color},n=dt()(kp.a.displayItem,kp.a["promotion"+e.display_type]),i=t&&3===e.display_type?{page_el_sn:6127854,goods_id:a}:{};return s.default.createElement(Ra.a,{key:o,trackingInfo:i},s.default.createElement("span",{className:n,style:r},e.text))}))}var Ep=e=>{const t=e.selectedSkuID,a=e.isMorganFetching,o=Tt()(e,"ocData.goodsInfo.goodsId"),r=Tt()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},n=Tt()(e,"ocData.promotionInfo.retrievePromotion")||{},i=Tt()(e,"ocData.promotionInfo.platformRetrievePromotion")||{},l=t&&!a&&r.clickable,c=r.categoryName,d=r.categoryDisplay,u=r.discountPayChannel,p=r.discountPayCategoryDisplay,h=r.defaultCategoryDisplay,f=Tt()(e,"ocData.selectedChannel"),g=n.promotionStatus,_=i.promotionStatus,y=Tt()(n,"promotionIdentityVo.extension.retrievable_promotion_jump_url"),b=g===Nl&&u&&f&&f.channelName!==u,v=Tt()(n,"promotionIdentityVo.extension.batch_sn");let k;if(t&&Tr()(d)||!t&&Tr()(h))return null;k=t&&!a?u&&f&&f.channelName===u&&p?p:d:h;const I=dt()(kp.a.stripe,{[kp.a.hasArrow]:l||!1}),w=dt()(kp.a.desc,{[kp.a.hasArrow]:l||!1});return s.default.createElement("div",{className:kp.a.promotionCell,"data-active":l?"cell-white":null},s.default.createElement("div",{className:I,onClick:async()=>{if(!l)return;if(g===Ol&&y){const t=Tt()(e,"ocData.goodsInfo.skuId"),a=Tt()(e,"ocData.goodsInfo.goodsNumber"),o=Tt()(wp,"groupOrderId"),r=Object(m.a)({group_order_id:o,sku_id:t,goods_number:a},y);return wp.forwardHideSkuSelect&&wp.forwardHideSkuSelect(),void oe.a.uniformForward(r)}if(g===Pl)return void(await Ip.likeAndReceive(v));if(g===Nl&&u&&f&&f.channelName!==u)return await Ip.ddpPromotionClick(),await wp.selectedChannel({channelName:u}),wp.refreshAfterSelectedChannel(),wa(s.default.createElement(s.default.Fragment,null,"领取成功",s.default.createElement("br",null),"已更换为多多支付付款"),{duration:3}),void Object(M.b)({page_el_sn:"6127854",op:"click",goods_id:o});if(_===Cl)try{await Ip.batchAutoTakeCoupon()}catch(n){const{response:e}=n||{},{data:t}=e||{},a=Tt()(t,"error_toast")||"领取优惠失败，请重试";wa(a)}else if(g===Cl)try{await Ip.autoTakeMerchantCoupon()}catch(n){const{response:e}=n||{},{data:t}=e||{},a=Tt()(t,"error_toast")||"领取优惠失败，请重试";wa(a)}const t=await Ip.fetchPromotionList(),{togglePromotionPopupVisible:a,setPromotionLists:r}=Ip||{};t&&(ec({groupId:"20203",customTags:{event:"showPromotionPopup"}}),r&&r(t),setTimeout((()=>{a&&a(!0)}),0))}},s.default.createElement("span",null,c),s.default.createElement("span",{className:w},s.default.createElement(Sp,{displayItems:k,hasDdpayPromotion:b,goodsId:o}),l&&s.default.createElement(Ht,null))))},Cp=a("YU58"),Pp=a.n(Cp);var Np=e=>{const{tag:t,name:a,goodsImg:o,deviceType:r,specs:n,onDescClick:i,recycleOrderSubTitle:l,bottomTag:c}=e,d="old"===r;return s.default.createElement("div",{className:Pp.a.deviceInfo},s.default.createElement("div",{className:Pp.a.deviceImg},o&&s.default.createElement(Wa.a,{src:Object(he.a)(o)}),s.default.createElement("span",{className:Pp.a.tag},t),d&&c&&s.default.createElement("span",{className:Pp.a.bottomTag},c)),s.default.createElement("div",{className:Pp.a.info},s.default.createElement("div",{className:Pp.a.name},a),d&&l&&l.length>0&&s.default.createElement("div",{className:Pp.a.subTitle},l.map(((e,t)=>{const a={fontSize:e.fontSize/100+"rem",color:e.fontColor};return s.default.createElement("span",{key:t,style:a},e.text)}))),s.default.createElement("div",{className:Pp.a.specsInfo,onClick:i},s.default.createElement("span",{className:Pp.a.spec},n),s.default.createElement("span",{className:Pp.a.changeText},"修改"),s.default.createElement("span",{className:Pp.a.arrow},s.default.createElement(Ht,null)))))},Op=a("muwb"),Dp=a.n(Op);var xp=e=>{const t=e.currentSelect,a=e.ocData,{goodsInfo:o}=a||{};let r;o.specs&&o.specs.length>0?r=o.specs.reduce(((e,t)=>e+t.spec_value),""):t&&(r=Object.keys(t).reduce(((e,a)=>e+t[a]),""));const n=Tt()(a,"promotionInfo.totalDiscountDisplay"),i=Tt()(a,"goodsInfo.unitPrice"),l=s.default.createElement(s.default.Fragment,null,n&&n.length>0&&n.map(((e,t)=>{const a=dt()(Dp.a.promotion,Dp.a["promotion"+e.display_type]);return s.default.createElement("span",{key:t,className:a,style:{height:e.height?e.height/100+"rem":null,lineHeight:e.height?e.height/100+"rem":null,color:e.font_color,backgroundColor:e.bg_color}},e.text)}))),c=s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{className:Dp.a.name},o.name),s.default.createElement("span",{className:Dp.a.price},n&&n.length>0?s.default.createElement(s.default.Fragment,null,l):s.default.createElement(s.default.Fragment,null,"¥",i)));return s.default.createElement(Np,{goodsImg:o.thumbUrl,tag:"新机",name:c,goodsNumber:o.goodsNumber,specs:r,deviceType:"new",onDescClick:e.onDescClick})},Tp=a("2Pqc"),jp=a.n(Tp);var Ap=e=>{const t=Tt()(e.ocData,"promotionInfo.tradeInInfo"),a=Tt()(t,"evaluationTotalAmount"),o=Tt()(t,"tips"),r=Tt()(t,"tipsTitle"),n=Tt()(t,"tags.0.text"),i=Tt()(t,"tradeInOrderInfo.recycleOrderSubTitle.displayItems"),l=o,c=()=>{Ha({title:r,confirmButtonLabel:"知道了",ContentProps:{className:jp.a.questionDialog},text:s.default.createElement("div",{className:jp.a.alertList},l.map(((e,t)=>s.default.createElement("div",{className:jp.a.question,key:t},e))))})},d=s.default.createElement("div",{className:jp.a.nameArea},s.default.createElement("span",{className:jp.a.name},t.recycleProductName),s.default.createElement("span",{className:jp.a.text},"可换"),s.default.createElement("span",{className:jp.a.price},"¥",a&&Object(Da.b)(a)),s.default.createElement("span",{className:jp.a.questionIcon,onClick:c},s.default.createElement(qt,null)));return s.default.createElement(Ra.a,{trackingInfo:{page_el_sn:5960463,op:"impr",goods_id:e.goods.goodsID}},s.default.createElement(Np,{goodsImg:t.recycleProductUrl,tag:"旧机",name:d,specs:t.recycleSkuSpec,evaluationAmount:t.evaluationAmount,deductAmount:t.deductAmount,estimateSubsidy:t.estimateSubsidy,evaluationRemainingBalance:t.evaluationRemainingBalance,deviceType:"old",onDescClick:e.onDescClick,onQuestionClick:c,bottomTag:n,recycleOrderSubTitle:i}))},Lp=a("DdEg"),Rp=a.n(Lp);const Mp=0,Bp=1;var Fp=e=>{const t=Tt()(e,"ocData.selectedChannel",{}),a=Tt()(t,"payButtonContent"),o=Tt()(e,"ocData.payChannelList"),r=Tt()(t,"skuPayDescription"),i=Tt()(e,"selectedSkuID"),l=Tt()(e,"goodsNumber"),c=Tt()(e,"styleStatus"),d=Tt()(e,"changeToGroupBuy"),u=Tt()(e,"setSkuStyleStatus"),p=Tt()(e,"group"),m=Tt()(e,"goods"),h=Tt()(e,"skuInfos"),f=Tt()(e,"useNormalSkuData"),g=Tt()(e,"oldForNewSelected"),_=Tt()(e,"ocData.promotionInfo.tradeInInfo"),y=Tt()(e,"hidePayHint"),b={page_el_sn:4259117,op:"impr",goods_id:e.goods.goodsID},v=r&&r.length>0&&r.reduce(((e,t)=>e+(t.display_type===Mp&&t.text&&t.text.length?t.text.length:0)),0);let k;return k=v<24?"0.14rem":v<26?"0.13rem":"0.12rem",s.default.createElement(s.default.Fragment,null,!y&&s.default.createElement("div",{className:Rp.a.payHint,onClick:()=>{Ca({page_el_sn:4259116,op:"click",goods_id:e.goods.goodsID},(()=>{!o||o.length<1||(e.onClickPreCheck?e.onClickPreCheck()&&e.showPaymentList&&e.showPaymentList():e.showPaymentList&&e.showPaymentList())}))}},t&&(r?s.default.createElement("div",{className:Rp.a.payText},r.length>0&&r.map(((e,t)=>{let a;switch(e.display_type){case Mp:return a={fontSize:k,color:e.font_color},e.text&&s.default.createElement("span",{key:t,style:a},e.text);case Bp:return a={height:e.height/100+"rem",width:e.width/100+"rem",marginLeft:"0.04rem",marginRight:"0.04rem"},s.default.createElement("img",{src:e.url,key:t,style:a})}}))):s.default.createElement(s.default.Fragment,null,"当前使用",t.name,"，切换支付方式")),o&&o.length>1&&s.default.createElement(Ht,null)),s.default.createElement(sr,{skuDirectOrder:!0,changeToGroupBuy:d,setSkuStyleStatus:u,styleStatus:c,group:p,goods:m,selectedSkuID:i,skuInfos:h,goodsNumber:l}),t&&i&&!f&&a&&a.length>0?g&&2===g.type&&!_?s.default.createElement(Ra.a,{trackingInfo:n()(n()({},b),{},{type:2})},s.default.createElement("div",{className:dt()(Rp.a.bottom,{[Rp.a.startHide]:1===c,[Rp.a.startDisplay]:2===c}),"data-active":"red",onClick:()=>{Ca({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:2},(()=>{e.onClick&&e.onClick()}))}},g.pay_button_desc||"通过“以旧换新”购买新机")):s.default.createElement(Ra.a,{trackingInfo:n()(n()({},b),{},{op:"impr",type:_?5:1})},s.default.createElement("div",{className:dt()(Rp.a.bottom,{[Rp.a.startHide]:1===c,[Rp.a.startDisplay]:2===c}),"data-active":"red",onClick:()=>{Ca({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:_?5:1},(()=>{e.onClick&&e.onClick()}))}},a.map(((e,t)=>s.default.createElement("span",{key:t},e.text))))):s.default.createElement(Ra.a,{trackingInfo:n()(n()({},b),{},{op:"impr",type:1})},s.default.createElement("div",{className:dt()(Rp.a.bottom,{[Rp.a.startHide]:1===c,[Rp.a.startDisplay]:2===c}),"data-active":"red",onClick:()=>{Ca({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:1},(()=>{e.onClick&&e.onClick()}))}},"立即支付")))},zp=a("Z4L4"),Hp=a.n(zp);function Vp(e){return e.selected?s.default.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M436.517 725.285 256 545.06l61.586-61.44 115.42 115.273 269.531-300.179 64.878 58.003z",fill:"#9c9c9c"}),s.default.createElement("path",{d:"M511.707 1024C229.742 1024 .366 794.331.366 512S229.669 0 511.707 0c281.966 0 511.415 229.669 511.415 512s-229.449 512-511.415 512zm.147-960C265.07 64.073 64.366 264.997 64.366 512S265.07 960 511.854 960s447.488-200.923 447.488-448S758.638 64 511.854 64z",fill:"#9c9c9c"})):s.default.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#9c9c9c"},s.default.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2zm0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z"}))}var Up=function(e){const t=dt()(Hp.a.selectIcon,{[Hp.a.selected]:e.selected});return s.default.createElement("div",{className:t,style:e.style},s.default.createElement(Vp,e))},Wp=a("GANf"),Gp=a.n(Wp);const qp=sd.getInstance();var Qp=e=>{const[t,a]=Object(s.useState)(!0),o=Tt()(e.ocData,"cellBarVo.protocolV2"),r=Tt()(e.ocData,"goodsInfo.skuId"),n=Tt()(e.ocData,"goodsInfo.groupId"),i=Tt()(e.ocData,"goodsInfo.goodsNumber");return s.default.createElement("div",{className:Gp.a.agreement,onClick:()=>{a(!t),qp.isSelectedAgreement=!t}},s.default.createElement(Up,{selected:t}),o&&!!o.length&&o.map(((e,t)=>s.default.createElement("span",{style:{color:e.color},key:t,onClick:t=>{t.stopPropagation(),t.preventDefault(),e.url&&(e=>{const t=Object(O.a)(),a=t.isNativePlatform,o=t.isTinyNativePlatform;oe.a.replaceQuery({sku_id:r,goods_number:i,show_sku_selector:a||o?void 0:1,goodsList:JSON.stringify([{group_id:n,group_order_id:qp.groupOrderId,group_type:qp.groupType}])},(()=>{oe.a.uniformForward(e)}))})(e.url)}},e.title))))},Yp=a("CzHs"),Jp=a.n(Yp);var Xp=({onRefresh:e})=>s.default.createElement("div",{className:Jp.a.ocRefresh},s.default.createElement("div",{className:Jp.a.netIcon},s.default.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M791.253 598.23c76.374 0 138.283 61.589 138.283 137.6 0 74.325-59.243 134.89-133.333 137.493l-4.95.085c-76.373 0-138.24-61.59-138.24-137.6 0-74.325 59.222-134.89 133.291-137.493l4.95-.086zM519.531 716.202a74.859 74.859 0 0 1 75.029 74.666 74.837 74.837 0 0 1-70.912 74.56l-4.117.107a74.859 74.859 0 0 1-75.03-74.667 74.837 74.837 0 0 1 70.912-74.56l4.118-.106zm271.722-96.64c-64.597 0-116.906 52.053-116.906 116.266 0 64.171 52.309 116.267 116.906 116.267 64.619 0 116.95-52.096 116.95-116.267 0-64.213-52.331-116.266-116.95-116.266zM519.531 737.536a53.525 53.525 0 0 0-53.696 53.333c0 29.44 24.021 53.334 53.696 53.334a53.525 53.525 0 0 0 53.696-53.334c0-29.44-24.022-53.333-53.696-53.333zm278.613 58.667c8.277 0 15.04 7.168 15.04 16.021s-6.763 16-15.061 16c-8.278 0-15.04-7.147-15.04-16s6.762-16 15.04-16zm-.064-133.611c7.808 0 14.443 6.144 14.976 13.973v2.176l-7.253 93.803c-.32 3.883-3.755 6.699-7.723 6.699a7.68 7.68 0 0 1-7.403-5.12l-.32-1.579-7.253-93.824a15.659 15.659 0 0 1 12.075-15.83l2.005-.277.896-.021zM520.448 527.424c48.576.128 97.28 13.504 140.267 40.533l10.304 6.763-4.246 3.307a201.707 201.707 0 0 0-54.72 65.834l-3.477 7.04-1.835 3.926-3.733-2.24a162.005 162.005 0 0 0-79.445-22.955l-5.888-.043a162.347 162.347 0 0 0-112.747 47.254 51.243 51.243 0 0 1-32.704 14.826l-3.584.128a51.285 51.285 0 0 1-36.288-14.954 50.901 50.901 0 0 1 0-72.256 265.067 265.067 0 0 1 181.483-77.099l6.613-.064zm-173.056 92.288a29.568 29.568 0 0 0 0 42.005c11.733 11.648 30.763 11.648 42.496 0a184.107 184.107 0 0 1 202.496-38.485l5.333 2.41 3.222-5.44a222.873 222.873 0 0 1 29.077-37.631l4.885-4.928-3.072-1.664a244.544 244.544 0 0 0-284.437 43.733zm176-273.152a446.165 446.165 0 0 1 311.85 130.133c20.054 19.947 20.054 52.267 0 72.235a51.243 51.243 0 0 1-32.703 14.827l-3.584.128a51.285 51.285 0 0 1-36.288-14.955 343.51 343.51 0 0 0-235.798-100.16l-7.338-.064c-88 0-176 33.408-243.136 100.224a51.243 51.243 0 0 1-32.704 14.827l-3.584.128a51.285 51.285 0 0 1-36.31-14.955 50.901 50.901 0 0 1 0-72.235A446.165 446.165 0 0 1 515.691 346.56h7.68zM218.859 491.797a29.568 29.568 0 0 0 0 42.006c11.733 11.669 30.762 11.669 42.496 0 142.592-141.91 373.76-141.91 516.352 0 11.733 11.669 30.784 11.669 42.496 0a29.568 29.568 0 0 0 0-42.006c-166.038-165.226-435.307-165.226-601.344 0zM519.53 165.653c160.789 0 321.578 61.035 444.266 183.126 20.054 19.946 20.054 52.266 0 72.234a51.243 51.243 0 0 1-32.725 14.827l-3.584.128a51.285 51.285 0 0 1-36.288-14.955C790.656 320.96 659.52 269.91 527.765 267.861l-8.234-.064c-134.528 0-269.035 51.072-371.67 153.216a51.243 51.243 0 0 1-32.725 14.827l-3.563.128a51.285 51.285 0 0 1-36.309-14.955 50.901 50.901 0 0 1 0-72.234C195.499 229.12 352.32 168.107 509.888 165.739l9.643-.086zM90.304 363.883a29.568 29.568 0 0 0 0 42.005c11.733 11.67 30.784 11.67 42.496 0 213.61-212.544 559.85-212.544 773.44 0 11.733 11.67 30.784 11.67 42.496 0a29.568 29.568 0 0 0 0-41.984C711.723 128 327.36 128 90.326 363.904z",fill:"#CCC"}))),s.default.createElement("div",{className:Jp.a.note},"网络不太顺畅"),s.default.createElement("div",{className:Jp.a.refreshBtn,onClick:e},"刷新")),Kp=a("i7vn"),$p=a.n(Kp);function Zp({labels:e}){if(!(e&&e.length>0))return null;const t=e.map(((e={},t)=>{return s.default.createElement("div",{key:t,style:{fontSize:(r=e.fontSize,n=12,(parseInt(r,10)||n)/100+"rem"),color:(a=e.fontColor,o="#fa323c",(a||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?a:o)}},e.title);var a,o,r,n}));return s.default.createElement("div",{className:$p.a.instruction},t)}var em=function(e){const t=e.addressInfo||{};return t.addressId?s.default.createElement("div",{className:"oc-address-info "+$p.a.addressInfo,"data-active":"cell-white",onClick:e.editAddress},s.default.createElement("div",{className:$p.a.location},s.default.createElement("svg",{className:$p.a.icon,fill:"#9c9c9c",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"33987"},s.default.createElement("path",{d:"M512 581.632c-64 0-116.224-52.224-116.224-116.224S448 349.184 512 349.184s116.224 52.224 116.224 116.224-52.224 116.224-116.224 116.224z m0-185.856c-38.4 0-69.632 31.232-69.632 69.632s31.232 69.632 69.632 69.632 69.632-31.232 69.632-69.632-31.232-69.632-69.632-69.632z","p-id":"33988"}),s.default.createElement("path",{d:"M884.224 465.408c0-205.824-166.912-372.224-372.224-372.224S139.776 259.584 139.776 465.408c0 130.048 122.368 283.648 372.224 455.68 249.856-172.032 372.224-325.632 372.224-455.68z m-372.224 512c-279.04-186.88-418.816-357.888-418.816-512 0-231.424 187.392-418.816 418.816-418.816s418.816 187.392 418.816 418.816c0 154.112-139.776 325.12-418.816 512z","p-id":"33989"}))),s.default.createElement("div",{className:$p.a.info},s.default.createElement("div",{className:$p.a.receiver},s.default.createElement("span",{className:$p.a.name},t.name),s.default.createElement("span",{className:$p.a.mobile},"，",t.mobile),s.default.createElement("span",{className:$p.a.city},"，",t.province," ",t.city)),s.default.createElement("div",{className:$p.a.detail},t.district," ",t.address),s.default.createElement(Zp,{labels:t.addressLabels})),s.default.createElement("div",{className:$p.a.arrow},s.default.createElement(Ht,null))):null},tm=a("+qE3"),am=a("9qmp");let om;om="undefined"!=typeof window&&window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}:function(){};const rm={};rm.Funcs={Linear:function(e,t,a,o){return a*e/o+t},Cubic:{easeIn:function(e,t,a,o){return a*(e/=o)*e*e+t},easeOut:function(e,t,a,o){return a*((e=e/o-1)*e*e+1)+t},easeInOut:function(e,t,a,o){return(e/=o/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t}},Sine:{easeIn:function(e,t,a,o){return-a*Math.cos(e/o*(Math.PI/2))+a+t},easeOut:function(e,t,a,o){return a*Math.sin(e/o*(Math.PI/2))+t},easeInOut:function(e,t,a,o){return-a/2*(Math.cos(Math.PI*e/o)-1)+t}},Quart:{easeIn:function(e,t,a,o){return a*(e/=o)*e*e*e+t},easeOut:function(e,t,a,o){return-a*((e=e/o-1)*e*e*e-1)+t},easeInOut:function(e,t,a,o){return(e/=o/2)<1?a/2*e*e*e*e+t:-a/2*((e-=2)*e*e*e-2)+t}}},rm.scrollLeftTo=function(e,t,a,o){(a=a||{}).attr="scrollLeft",rm.gradualChange(e,t,a,o)},rm.gradualChange=function(e,t,a,o){if(!e||void 0===t)return;const r=(a=a||{}).fn||rm.Funcs.Linear,n=a.wrapValueFn||null,s=a.getValueFn||null,i=a.during||60,l=a.callbackTimeout||0,c=a.inStyle||!1,d=a.stopAdvance||0,u=a.attr;if(!u)return void(o&&o());let p=0,m=0;const h=()=>{l?o&&setTimeout(o,l):o&&o()};!function a(){p++;let o=0;o="function"==typeof s?s(m):e[u],m=r(p,o,t-o,i);let l=m;"function"==typeof n&&(l=n(m,p)),c?e.style[u]=l:e[u]=l,p>i-d?h():p<i?om(a):h()}()};const nm=function(e){let t=0;for(let a=0;a<e.length;a++)e.charCodeAt(a)<0||e.charCodeAt(a)>255?t+=2:t+=1;return t};var sm=a("mG/U");const im="undefined"!=typeof window;let lm=null;const cm="undefined"!=typeof window,dm="请重新选择地区",um=1,pm=2,mm=3,hm=["2","27","25"];function fm(e){return e=e||"",hm.includes(e.toString())}class gm extends s.Component{constructor(e){super(e),this.state={currentRegionTab:um,panelStyle:{transform:"translateY(3.86rem)"},provinceID:"0",provinceName:"",provinces:null,cityID:"0",cityName:"",cities:null,districtID:"0",districtName:"",districts:null},this.provincesLoaded=!1,this.citiesLoaded=!1,this.districtsLoaded=!1,this.regions={},this.$axiosHttp=this.createAxios(),this.selectCity=this.selectCity.bind(this),this.loadRegions=this.loadRegions.bind(this),this.onCityEdited=this.onCityEdited.bind(this),this.selectDistrict=this.selectDistrict.bind(this),this.generateHeader=this.generateHeader.bind(this),this.onCitiesLoaded=this.onCitiesLoaded.bind(this),this.selectProvince=this.selectProvince.bind(this),this.selectRegionTab=this.selectRegionTab.bind(this),this.onDistrictEdited=this.onDistrictEdited.bind(this),this.onProvinceEdited=this.onProvinceEdited.bind(this),this.onDistrictsLoaded=this.onDistrictsLoaded.bind(this),this.onProvincesLoaded=this.onProvincesLoaded.bind(this),this.setRegionUnionName=this.setRegionUnionName.bind(this),this.onAddressInfoLoaded=this.onAddressInfoLoaded.bind(this),this.hideRegionSelectorPanel=this.hideRegionSelectorPanel.bind(this),this.showRegionSelectorPanel=this.showRegionSelectorPanel.bind(this)}createAxios(){{const e=ia.a.getInstance().getPageID();return Object(sa.a)({pageInfo:{pageId:e}})}}componentWillMount(){cm&&a("QROL")}render(){const e=this,{panelStyle:t}=e.state,{isShow:a}=e.props;return s.default.createElement("div",{id:"region-selector",className:"edit-addr-region-selector",style:{display:a?"":"none"}},s.default.createElement("div",{className:"mars-panel-mask",onClick:t=>e.hideRegionSelectorPanel(t)}),s.default.createElement("div",{id:"region-selector-panel",ref:"regionSelectorPanel",className:"mars-panel",style:t},e.generateHeader(),e.generateRegions()))}componentDidMount(){Object(ft.a)();const e=this;e.props.addressId+""==""?(e.props.eventEmitter.emit("fillEditAddress"),e.onAddressInfoLoaded({})):this.$axiosHttp.get("api/origenes/address/"+e.props.addressId,{timeout:1200}).then((t=>{e.props.eventEmitter.emit("fillEditAddress",t),e.onAddressInfoLoaded(t)})).catch((t=>{Object(kt.a)(Object(sm.b)(t.errorCode)||"网络异常，请刷新页面后重试"),e.props.eventEmitter.emit("fillEditAddress",t)}))}componentWillReceiveProps(e){const t=e.addressInfo||{},a=this.props.addressInfo||{};t.province_id+""==a.province_id+""&&t.city_id+""==a.city_id+""&&t.district_id+""==a.district_id+""||this.onAddressInfoLoaded(t)}componentDidUpdate(e,t){const a=this,{isShow:o}=e;if(!o&&this.props.isShow!==o){const{currentRegionTab:e}=a.state;Object(ft.a)(document.getElementById("region-selector-list-"+e)),this.showRegionSelectorPanel()}}generateHeader(){const e=this,{currentRegionTab:t,provinceID:a,provinceName:o,cityID:r,cityName:n,districtID:i,districtName:l}=e.state;return s.default.createElement("div",{className:"mars-panel-header"},s.default.createElement("div",{className:"mars-ph-province "+(1===t?"mars-ph-active":""),onClick:t=>e.selectRegionTab(um,t)},a+""=="0"?s.default.createElement("span",null,"请选择"):s.default.createElement("span",null,o)),a+""!="0"&&!fm(a)&&s.default.createElement("div",{className:"mars-ph-city "+(2===t?"mars-ph-active":""),onClick:t=>e.selectRegionTab(pm,t)},r+""=="0"?s.default.createElement("span",null,"请选择"):s.default.createElement("span",null,n)),r+""!="0"&&s.default.createElement("div",{className:"mars-ph-district "+(3===t?"mars-ph-active":""),onClick:t=>e.selectRegionTab(mm,t)},i+""=="0"?s.default.createElement("span",null,"请选择"):s.default.createElement("span",null,l)),s.default.createElement("div",{className:"mars-ph-cancel",onClick:t=>e.hideRegionSelectorPanel(t)},"取消"))}generateRegions(){const e=this,{currentRegionTab:t,provinces:a,provinceID:o,cities:r,cityID:n,districts:i,districtID:l}=e.state,c=1===t&&a&&a.map(((t,a)=>{const r=t.region_id+""==o+""?"region-active":"";return s.default.createElement("li",{key:"province-"+a,onClick:t=>e.selectProvince(t,a)},s.default.createElement("span",{className:r},t.region_name))})),d=2===t&&r&&r.map(((t,a)=>{const o=t.region_id+""==n+""?"region-active":"";return s.default.createElement("li",{key:"city-"+a,onClick:t=>e.selectCity(t,a)},s.default.createElement("span",{className:o},t.region_name))})),u=3===t&&i&&i.map(((t,a)=>{const o=t.region_id+""==l+""?"region-active":"";return s.default.createElement("li",{key:"city-"+a,onClick:t=>e.selectDistrict(t,a)},s.default.createElement("span",{className:o},t.region_name))}));return s.default.createElement("div",{className:"mars-regions"},1===t&&s.default.createElement("ul",{id:"region-selector-list-1",className:"mars-regions-p"},c),!fm(o)&&2===t&&s.default.createElement("ul",{id:"region-selector-list-2",className:"mars-regions-c"},d),3===t&&s.default.createElement("ul",{id:"region-selector-list-3",className:"mars-regions-d"},u))}selectDistrict(e,t){e&&e.stopPropagation();const{districts:a}=this.state,o=a[t];o&&this.onDistrictEdited(o)}onDistrictEdited(e={}){const t={districtID:e.region_id,districtName:e.region_name};this.setState((e=>t),(e=>{this.hideRegionSelectorPanel(),this.setRegionUnionName()}))}selectCity(e,t){e&&e.stopPropagation();const{cities:a}=this.state,o=a[t];o&&this.onCityEdited(o)}onCityEdited(e={}){const t=this;if(!t.citiesLoaded)return!1;const a=e.region_id,o=e.region_name;if(a+""=="0")return;const r={cityID:a,cityName:o};t.districtsLoaded=!1,t.onDistrictsLoaded("0",[]).then((()=>{t.setState((e=>r),(e=>{t.loadRegions(mm,a).then((e=>{const{districtID:a}=t.state;t.onDistrictsLoaded(a,e),t.selectRegionTab(mm)}))}))}))}onDistrictsLoaded(e,t={}){const a=this;t=t.regions||[];const o=this.isRegionIDContainInRegions(e,t),r={districts:t||[],districtID:o&&e||"0",districtName:o&&o.region_name||""};return new Promise(((e,t)=>{a.setState((e=>r),(t=>{a.districtsLoaded=!0,e()}))}))}setRegionUnionName(){const{provinceID:e,cityID:t,districtID:a,provinceName:o,cityName:r,districtName:n}=this.state;let s={};e+""!="0"&&t+""!="0"&&a+""!="0"&&(s=Object.assign({},s,{currentProvinceID:e,currentCityID:t,currentDistrictID:a,currentProvinceName:o,currentCityName:r,currentDistrictName:n})),s=Object.assign({},s,{regionUnionName:o===r?`${r} ${n}`:`${o}  ${r}  ${n}`}),this.props.eventEmitter.emit("setRegionUnionName",s)}selectProvince(e,t){e&&e.stopPropagation();const{provinces:a}=this.state,o=a[t];o&&this.onProvinceEdited(o)}onProvinceEdited(e={}){const t=this;if(!t.provincesLoaded)return;const a=e.region_id,o=e.region_name;a+""!="0"&&(t.citiesLoaded=!1,t.districtsLoaded=!1,t.onCitiesLoaded("0",[]).then((()=>{t.onDistrictsLoaded("0",[]).then((()=>{const e={provinceID:a,provinceName:o};t.setState((t=>e),(e=>{t.loadRegions(pm,a).then((e=>{const{cityID:o}=t.state;t.onCitiesLoaded(o,e),t.selectRegionTab(pm),fm(a)&&t.selectCity(null,0)}))}))}))})))}onCitiesLoaded(e,t={}){const a=this,o=t.self_city_id,{provinceID:r,cityID:n}=a.state;t=t.regions||[],a.removeToFirst(t,o);const s=a.isRegionIDContainInRegions(e,t),i={cities:t,cityID:s&&e||(fm(r)?n:0),cityName:s&&s.region_name||""};return new Promise(((e,t)=>{a.setState((e=>i),(t=>{a.citiesLoaded=!0,e()}))}))}loadRegions(e,t){return new Promise(((e,a)=>{if(this.regions[t])return e(this.regions[t]);this.$axiosHttp.get("api/galen/v2/regions/"+t).then((a=>{this.regions[t]=a,e(a)}))}))}onAddressInfoLoaded(e){if(!e)return;const t=this,a=e.region_id||1,o=e.province_id,r=e.city_id,n=e.district_id;t.loadRegions(um,a).then((e=>{t.onProvincesLoaded(o,e).then((()=>{o+""==t.state.provinceID+""&&t.loadRegions(pm,o).then((e=>{t.onCitiesLoaded(r,e).then((()=>{r+""==t.state.cityID+""?t.loadRegions(mm,r).then((e=>{t.onDistrictsLoaded(n,e),t.isRegionIDContainInRegions(n,e.regions)||Object(kt.a)(dm)})):Object(kt.a)(dm)}))}))}))}))}isRegionIDContainInRegions(e,t){if(!t)return null;for(let a=0;a<t.length;++a){const o=t[a];if(o.region_id+""==e+"")return o}return null}removeToFirst(e,t){const a=this.isRegionIDContainInRegions(t,e),o=e.indexOf(a);o<0||(e.splice(o,1),e.unshift(a))}onProvincesLoaded(e,t={}){const a=t.self_province_id;t=t.regions||[],this.removeToFirst(t,a);const o=this.isRegionIDContainInRegions(e,t),r={provinces:t,provinceID:e||"0",provinceName:o&&o.region_name||""};return new Promise(((e,t)=>{this.setState((e=>r),(t=>{this.provincesLoaded=!0,e()}))}))}selectRegionTab(e,t){t&&t.stopPropagation();this.setState((t=>({currentRegionTab:e})),(t=>{Object(ft.a)(document.getElementById("region-selector-list-"+e))}))}hideRegionSelectorPanel(e){e&&e.stopPropagation();const t=this,a=t.refs.regionSelectorPanel;rm.gradualChange(a,386,{wrapValueFn:e=>`translateY(${e/100}rem)`,getValueFn:e=>e||0,inStyle:!0,attr:"transform",during:25,stopAdvance:6},(()=>{t.props.onClose&&t.props.onClose()}))}showRegionSelectorPanel(e){e&&e.stopPropagation()&&e.preventDefault();const t=this.refs.regionSelectorPanel;rm.gradualChange(t,0,{wrapValueFn:(e,t)=>`translateY(${e/100}rem)`,getValueFn:e=>e||386,inStyle:!0,attr:"transform",during:25})}}gm.defaultProps={addressId:"",isShow:!1};var _m=gm;let ym,bm;function vm(e){"function"==typeof window.scrollTo&&(clearTimeout(bm),bm=setTimeout((()=>{(!document.activeElement||!["INPUT","TEXTAREA"].includes(document.activeElement.tagName))&&window.scrollTo(0,0)}),10))}function km(e){return ym||(ym=Object(O.a)()),ym.system===D.b.IOS&&Object(D.c)(ym.systemVersion,"12.0")>=0?(e.addEventListener("focusout",vm),function(){e.removeEventListener("focusout",vm)}):()=>{}}const Im=!0,wm={43014:"请填写正确的手机号码",43016:"地址保存不成功，建议稍后重试",43017:"已达到地址上限，请先删除不常用地址",43871:"内容中含有不合适的字，无法保存",5e4:"地址保存不成功，建议稍后重试"},Sm=1,Em=2;var Cm=a("X0J6");var Pm=e=>{const{tackingParams:t,triangleTop:a,triangleTopShadow:o,recStyle:r,renderedElems:n}=e;return s.default.createElement(Cm.a,{trackingInfo:t},s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"m-addr-rec-triangle",style:a}),s.default.createElement("div",{className:"m-addr-rec-circle-cover"}),s.default.createElement("div",{className:"m-addr-rec-triangle m-addr-rec-triangle-shadow",style:o}),s.default.createElement("div",{className:"m-addr-rec",style:r},s.default.createElement("div",{className:"m-addr-rec-wrap"},n))))};var Nm=s.default.memo((e=>{const{type:t,recMobiles:a=[],recCombined:o=[],onClickHandler:r}=e,n={op:"impr",page_el_sn:2584388};let i;if(t===Sm&&o&&o.length>0){i=3,n.tips_id=i;const e=o.map(((e,t)=>{const a=e.name;let o=0;for(let r=0;r<a.length;r++)/^%u/.test(escape(a[r]))?o+=.14:o+=.07;o+=1.04;let n=`${e.name}，${e.mobile}`;return o>1.99&&(n=`${a.slice(0,4)}...${a.slice(-2)}，${e.mobile}`),s.default.createElement("div",{className:"m-addr-rec-text",key:t,onClick:r(t,Sm,i)},n)}));return s.default.createElement(Pm,{tackingParams:n,triangleTop:{top:".84rem"},triangleTopShadow:{top:".82rem",zIndex:13e3},recStyle:{height:.46*o.length+.01*(o.length-1)+"rem",top:".89rem"},renderedElems:e})}if(t===Em&&a&&a.length>0){o&&o.length>0&&(i=4,n.tips_id=i);const e=a.map(((e,t)=>s.default.createElement("div",{className:"m-addr-rec-text",key:t,onClick:r(t,Em,i)},e)));return s.default.createElement(Pm,{tackingParams:n,triangleTop:{top:"1.32rem"},triangleTopShadow:{top:"1.3rem",zIndex:13e3},recStyle:{height:.46*a.length+.01*(a.length-1)+"rem",top:"1.37rem"},renderedElems:e})}return null}));a("0+0r");let Om;{const e=Object(O.a)();Om=e.system===D.b.IOS}function Dm({suggestAddress:e,onConfirm:t,onCancel:a}){const{provinceName:o,cityName:r,districtName:n}=e,i=[o,r,n].join(" ");return s.default.createElement(Du.a.Container,null,s.default.createElement(Du.a.Backdrop,null),s.default.createElement(Du.a.BaseDialog,{className:dt()("fix-addr-dialog",Om&&"fix-addr-dialog-ios")},s.default.createElement("div",{className:"fix-addr-dialog-desc"},"自动识别到您所在地区为",s.default.createElement("span",{className:"fix-addr-dialog-red-text"},i),"，是否修改?"),s.default.createElement("div",{className:"fix-addr-dialog-confirm",onClick:t},"修改并保存"),s.default.createElement("div",{className:"fix-addr-dialog-cancel",onClick:a},"不修改，直接保存")))}const xm="undefined"!=typeof window,Tm={ContainerProps:{style:{zIndex:12e3}}};let jm,Am,Lm,Rm,Mm,Bm;function Fm(e){var t;Object(ma.a)(e,Tm),t=e,Object(M.c)({page_el_sn:1449048,address_alert_errorinfo:t})}xm&&(jm=Object(O.a)(),Am=jm.system===D.b.IOS&&Object(D.c)(jm.systemVersion,"11.0.0")>=0,Mm=jm.system===D.b.IOS,Lm=jm.version&&Object(D.c)(jm.version,"4.70.0")>=0,Rm=jm.version&&Object(D.c)(jm.version,"5.96.0")>=0,Bm=jm.version&&Object(D.c)(jm.version,"4.69.0")>=0);class zm extends s.Component{constructor(e){var t;super(e),t=this,this.cancelAnalyzeAddressDialog=()=>{this.setState({showAnalyzeAddressDialog:!1})},this.confirmAnalyzeAddressDialog=()=>{const e=this.state.clipBoardResult||{};this.setState({showAnalyzeAddressDialog:!1,name:e.name,mobile:e.mobile,address:e.address,currentProvinceID:e.province_id,currentCityID:e.city_id,currentDistrictID:e.district_id,currentProvinceName:e.province,currentCityName:e.city,currentDistrictName:e.district,regionUnionName:`${e.province}  ${e.city}  ${e.district}`}),this.regionSelectorRef.current&&this.regionSelectorRef.current.onAddressInfoLoaded&&this.regionSelectorRef.current.onAddressInfoLoaded(e)},this.onRecItemSelected=(e,t,a)=>o=>{const{recMobiles:r=[],recCombined:n=[]}=this.state;!function(e){Object(M.b)({page_el_sn:2584388,tips_id:e})}(a);let s=null;switch(t){case Sm:s=n[e],this.setState({name:s.name,mobile:s.mobile,isShowNameRec:!1});break;case Em:s=r[e],this.setState({mobile:s,isShowMobileRec:!1})}},this.checkToStopClear=()=>{this.shouldIgnoreClearBtnClick=!this.state.addressInputFocused},this.clearAddress=e=>{e&&e.stopPropagation(),this.shouldIgnoreClearBtnClick||(this.shouldIgnoreClearBtnClick=!this.state.addressInputFocused,this.setState({address:""}))},this.dealRecheck=e=>{const{name:t,address:a,recheck_msg:o}=e;Fm(o),t&&t.length&&t.some((e=>(e.sensitive&&this.setState({isNameError:!0}),e.sensitive))),a&&a.length&&a.some((e=>(e.sensitive&&this.setState({isAddressError:!0}),e.sensitive)))},this.dealCheckRegionError=({params:e,response:a})=>{Object(M.c)({page_el_sn:3812488}),function(e){let{onConfirm:t,onCancel:a}=e,o=Rt()(e,["onConfirm","onCancel"]);const r=Object(Gs.a)(s.default.createElement(Dm,w()({},o,{onConfirm:()=>{t&&t(),r()},onCancel:()=>{a&&a(),r()}})))}({suggestAddress:{provinceName:a.suggest_province_name,cityName:a.suggest_city_name,districtName:a.suggest_district_name},onConfirm:async function(){var o;Object(ha.b)(),o=a.transaction_id,Object(M.b)({page_el_sn:3813443,request_id:o}),await t._saveAddress(n()(n()({},e),{},{province_id:a.suggest_province_id,city_id:a.suggest_city_id,district_id:a.suggest_district_id,check_region:!1})),Object(ha.a)()},onCancel:async function(){var o;Object(ha.b)(),o=a.transaction_id,Object(M.b)({page_el_sn:3813444,request_id:o}),await t._saveAddress(n()(n()({},e),{},{check_region:!1})),Object(ha.a)()}})},this.saveAddress=async function(){if(t.isSaveBtnClicked)return;var e;if(e=Date.now()-t.startTime,Object(M.b)({page_el_sn:99897,save_time:e}),t.isSaveBtnClicked=!0,!t.validAddressInfo())return setTimeout((e=>{t.isSaveBtnClicked=!1}),2600),!1;const{name:a,mobile:o,currentProvinceID:r,currentCityID:n,currentDistrictID:s,address:i,isDefault:l}=t.state,c={name:a,mobile:t.reduceMobile(o),province_id:r,city_id:n,district_id:s,address:i,is_default:l,order_sn:t.props.orderSn,check_region:t.props.checkRegion};Object(ha.b)(),t.antiCrawler&&(c.anti_content=await t.antiCrawler.messagePackSync()),await t._saveAddress(c),t.isSaveBtnClicked=!1,Object(ha.a)()},this._saveAddress=async function(e){const a=()=>{},o=a=>{const o=a.response&&a.response.data&&a.response.data.result;if(o&&o.need_recheck===Im)t.dealRecheck(o);else if(43080===a.errorCode){if(!o)return r={error:a},void Object(At.c)(new Error("edit-address: 返回的地址校验数据为空"),{payload:r});t.dealCheckRegionError({params:e,response:o})}else wm[a.errorCode]?Fm(wm[a.errorCode]):Fm(Object(sm.b)(a.errorCode)||"网络异常，请刷新页面后重试");var r};return t.props.addressId?t.$axiosHttp.post("api/origenes/address_info/"+t.props.addressId,e,{defaultErrorHandler:a,useNativeAntiToken:!0}).then((e=>{t.dealSaveResult(t.props.addressId)}),o):t.$axiosHttp.post("api/origenes/address",e,{defaultErrorHandler:a,useNativeAntiToken:!0}).then((e=>{e.address_id&&t.dealSaveResult(e.address_id)}),o)},this.addrClose=e=>{var t;e&&e.stopPropagation(),t=Date.now()-this.startTime,Object(M.b)({page_el_sn:2586340,close_time:t}),this.props.onClose&&this.props.onClose()},this.addrBack=e=>{e&&e.stopPropagation(),this.state.isShowPositionList&&this.setState({isShowPositionList:!1,title:"编辑地址"},(()=>{Object(ft.a)(document.getElementById("address"))}))},this.nameOnChange=e=>{e&&e.stopPropagation();const t=e.target.value;this.setState((e=>({name:t})),(()=>{!!t&&this.validName()}))},this.mobileOnChange=e=>{const t=e.target.value;this.setState((e=>({mobile:t})))},this.addressOnChange=e=>{e&&e.stopPropagation();const t=e.target.value;this.setState((e=>({address:t})))},this.showDialogRegionSelector=e=>{e&&e.stopPropagation()&&e.preventDefault();this.setState((e=>({showRegionSelector:!0})))},this.hideDialogRegionSelector=e=>{e&&e.stopPropagation()&&e.preventDefault();this.setState((e=>({showRegionSelector:!1})))},this.validItem=e=>()=>{switch(e){case"name":this.validName();break;case"mobile":this.validMobile();break;case"address":this.validAddress()}},this.state={loaded:!this.props.addressId,title:this.props.title,saveAndUse:this.props.saveAndUse,isDefault:"0",name:"",nameInputFocused:!1,mobile:"",mobileInputFocused:!1,address:"",showRegionSelector:!1,currentProvinceID:"0",currentCityID:"0",currentDistrictID:"0",currentProvinceName:"",currentCityName:"",currentDistrictName:"",isNameError:!1,isMobileError:!1,isAddressError:!1,focused:!1,addressInputFocused:!1,addressInfo:null,addressSuggestionList:[],isPositionBtnActived:!1,isShowPositionList:!1,isShowNameRec:!1,isShowMobileRec:!1,showAnalyzeAddressDialog:!1,clipBoardResult:{},clipBoardFullAddress:"",analyzeRequestId:""},this.regionSelectorRef=s.default.createRef(),this.dialogContainerRef=s.default.createRef(),this.eventEmitter=new tm.EventEmitter,this.locateOvertimeCount=0,this.$axiosHttp=this.createAxios(),this.reduceMobile=this.reduceMobile.bind(this),this.getUserCoords=this.getUserCoords.bind(this),this.getGeolocation=this.getGeolocation.bind(this),this.dealSaveResult=this.dealSaveResult.bind(this),this.generateAddrTitle=this.generateAddrTitle.bind(this),this.generateAddrBottom=this.generateAddrBottom.bind(this),this.generateRegionSelector=this.generateRegionSelector.bind(this),this.setAddressInputFocused=this.setAddressInputFocused.bind(this),this.antiCrawler=this.props.antiCrawler,this.getEncryptClipBoardData=this.getEncryptClipBoardData.bind(this),this.analyzeClipBoard=this.analyzeClipBoard.bind(this),this.genetateAnalyzeAddressDialog=this.genetateAnalyzeAddressDialog.bind(this),this.addressNameBlurTimeout=null,this.addressMobileBlurTimeout=null}createAxios(){{const e=ia.a.getInstance().getPageID();return Object(sa.a)({pageInfo:{pageId:e}})}}componentWillMount(){const e=this;xm&&a("3EMY"),e.eventEmitter.on("setRegionUnionName",(t=>{e.setState((e=>t))})),e.eventEmitter.on("fillEditAddress",(t=>{if(t instanceof Error)return void(e.props.onClose&&e.props.onClose());if(!t)return;const{is_default:a,name:o,mobile:r,address:n,province_id:s,city_id:i,district_id:l,province:c,city:d,district:u}=t,p={isDefault:a,name:o,mobile:r,address:n,currentProvinceID:s,currentCityID:i,currentDistrictID:l,currentProvinceName:c,currentCityName:d,currentDistrictName:u,regionUnionName:c===d?`${d} ${u}`:`${c}  ${d}  ${u}`,loaded:!0};Object(ha.a)(),e.setState((e=>p))}))}getRecommendType(e,t){return e?Sm:t?Em:null}render(){const{loaded:e,isShowPositionList:t,isShowNameRec:a,isShowMobileRec:o,recMobiles:r,recCombined:n}=this.state,i=this.getRecommendType(a,o),l=t?s.default.createElement("div",{className:"m-addr-mask",onClick:this.addrBack},s.default.createElement("div",{className:"m-addr-main m-addr-main-list"},this.generateAddrTitle(),this.generatePositionList())):s.default.createElement(Du.a,{ControllerProps:{PortalComponent:null},className:"m-addr-main m-addr-main-new "+(Mm?"ios":"")},s.default.createElement(Du.a.CloseButton,{onClick:this.addrClose}),this.generateAddrTitle(),this.generateAddrName(),this.generateAddrMobile(),this.generateAddrRegionNew(),this.generateAddrAddressNew(),this.generateAddrBottom(),i&&s.default.createElement(Nm,{type:i,recMobiles:r,recCombined:n,onClickHandler:this.onRecItemSelected}));return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{ref:this.dialogContainerRef,style:{display:e?"":"none"}},l,this.generateRegionSelector()),this.genetateAnalyzeAddressDialog())}async componentDidMount(){var e;this.$axiosHttp.get("api/origenes/rec/mobile_name/list/create_addr").then((e=>{this.setState({recMobiles:e.mobiles,recCombined:e.mobile_names})})),jm.isNativePlatform&&this.props.componentDisablePullReload&&Object(ae.p)({enable:!1}).catch((e=>{if(e&&e.errorCode)throw e})),this.props.onShowTrackingBase&&Object(M.d)(Object.assign({},this.props.onShowTrackingBase,this.props.trackingContext)),Am&&(this.bodyPositionStyle=document.body.style.position,this.bodyScrollTop=e&&e!==document.body?e.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0),document.body.style.position="fixed"),!this.props.addressId&&this.props.analyzeClipBoard&&this.analyzeClipBoard(),Object(ft.a)(document.getElementById("address")),this.antiCrawler||Bm||(this.antiCrawler=await async function(e){if(!im)return null;const{default:t}=await Promise.resolve().then(a.bind(null,"rx36"));return!lm&&e&&(lm=await e.get("api/server/_stm",{defaultErrorHandler:()=>{}}).then((e=>e.server_time)).catch((()=>0)).then((e=>new t({serverTime:e})))),lm}(this.$axiosHttp)),this.cleanupFixer=km(document.body)}componentWillUnmount(){var e,t;jm.isNativePlatform&&this.props.componentDisablePullReload&&Object(ae.p)({enable:!0}).catch((e=>{if(e&&e.errorCode)throw e})),Object(ft.b)(),this.geoHandler&&clearTimeout(this.geoHandler),this.addressNameBlurTimeout&&clearTimeout(this.addressNameBlurTimeout),this.addressMobileBlurTimeout&&clearTimeout(this.addressMobileBlurTimeout),Am&&(document.body.style.position=this.bodyPositionStyle,e=this.bodyScrollTop,t&&t!==document.body?t.scrollTop=e:0===e?(document.body.scrollTop=0,(document.documentElement||{}).scrollTop=0):(document.body.scrollTop=e,0!==document.body.scrollTop?document.body:((document.documentElement||{}).scrollTop=e,document.documentElement&&0!==document.documentElement.scrollTop&&document.documentElement))),this.cleanupFixer&&this.cleanupFixer()}async getEncryptClipBoardData(){if(jm.isNativePlatform){if(Rm){return(await Object(ae.g)("AMStorage","getEncryptedPasteboard")).result}{const e=(await Object(ae.d)()).text;if(e&&e.length>5&&e.length<200){if(Lm){return(await Object(ae.g)("JSSecure","aesEncrypt",{text:e})).value}return e}}}}async analyzeClipBoard(){try{const e=new Promise((e=>{setTimeout((()=>e(null)),100)})),t=await Promise.race([e,this.getEncryptClipBoardData()]);if(!t)return;const a=Object(zl.a)();this.setState({analyzeRequestId:a});let o={address_info:t,request_id:a};Lm&&(o={eai:t,request_id:a}),Rm&&(o={encrypt_data:t,request_id:a}),this.$axiosHttp.post("api/origenes/analyze_address",o).then((e=>{e&&this.setState({showAnalyzeAddressDialog:!0,clipBoardResult:e,clipBoardFullAddress:`${e.name||""} ${e.mobile||""} ${e.province||""} ${e.city||""} ${e.district||""} ${e.address||""}`})}))}catch(e){e.message="剪贴板内容解析失败"+e.message,Object(At.c)(e)}}genetateAnalyzeAddressDialog(){const{isShowPositionList:e,showAnalyzeAddressDialog:t}=this.state;return!this.props.addressId&&!e&&t&&s.default.createElement(am.a,{title:"识别到收货信息，是否填入？",text:this.state.clipBoardFullAddress,TextProps:{className:"analyze-address-text"},onConfirm:this.confirmAnalyzeAddressDialog,onCancel:this.cancelAnalyzeAddressDialog,onClose:this.cancelAnalyzeAddressDialog})}generateRegionSelector(){const e=this,{showRegionSelector:t,addressInfo:a}=e.state,o={onClose:e.hideDialogRegionSelector,eventEmitter:e.eventEmitter,isShow:t,addressId:e.props.addressId,addressInfo:a};return s.default.createElement(_m,w()({},o,{ref:this.regionSelectorRef}))}generateAddrTitle(){const{title:e,isShowPositionList:t}=this.state;return s.default.createElement("div",{className:"title-wrap-new"},s.default.createElement("div",{className:t?"m-addr-title  m-addr-back":"m-addr-title",onClick:this.addrBack},e),!t&&this.props.contentUnderTitle)}clearName(e){e&&e.stopPropagation(),this.setState({name:""})}generateAddrName(){const{name:e,isNameError:t,nameInputFocused:a}=this.state,o={className:"m-addr-input "+(t?"input-error":""),id:"name",placeholder:"收货人姓名",value:e,type:"text",onChange:this.nameOnChange,onFocus:t=>{this.setState({nameInputFocused:!0,isShowNameRec:!e}),this.removeNameError(t)},onBlur:()=>{this.addressNameBlurTimeout=setTimeout((()=>{this.setState({nameInputFocused:!1,isShowNameRec:!1})}),0)}};return s.default.createElement("div",{className:"m-addr-bar"},s.default.createElement("input",o),e&&s.default.createElement("div",{className:"m-addr-input-clear-wrapper",style:{display:a?"":"none"},onMouseDown:e=>this.clearName(e),onTouchStart:e=>this.clearName(e)},s.default.createElement("div",{className:"m-addr-input-clear"})),s.default.createElement("div",{className:"m-addr-text"},"收货人"))}clearMobile(e){e&&e.stopPropagation(),this.setState({mobile:""})}generateAddrMobile(){const{mobile:e,isMobileError:t,mobileInputFocused:a}=this.state,o={className:"m-addr-input "+(t?"input-error":""),id:"mobile",placeholder:"收货人手机号",value:e,type:"tel",onChange:this.mobileOnChange,onFocus:t=>{this.setState({mobileInputFocused:!0,isShowMobileRec:!e}),this.removeMobileError(t)},onBlur:()=>{this.addressMobileBlurTimeout=setTimeout((()=>{this.setState({mobileInputFocused:!1,isShowMobileRec:!1})}),0)}};return s.default.createElement("div",{className:"m-addr-bar"},s.default.createElement("input",o),e&&s.default.createElement("div",{className:"m-addr-input-clear-wrapper",onMouseDown:e=>this.clearMobile(e),onTouchStart:e=>this.clearMobile(e),style:{display:a?"":"none"}},s.default.createElement("div",{className:"m-addr-input-clear"})),s.default.createElement("div",{className:"m-addr-text"},"手机号"))}generateAddrRegionNew(){const{currentProvinceName:e,currentCityName:t,currentDistrictName:a,regionUnionName:o}=this.state,r=e&&t&&a;return s.default.createElement("div",{className:"m-addr-region-new","data-active":"cell-white",onClick:this.showDialogRegionSelector},r?s.default.createElement("span",{className:"m-addr-region-text"},o):s.default.createElement("span",{className:"m-addr-region-text m-addr-region-placeholder"},"点击选择"),s.default.createElement("div",{className:"m-addr-text"},"地区"))}generateAddrAddressNew(){const{address:e,isAddressError:t,isPositionBtnActived:a,addressSuggestionList:o,addressInputFocused:r}=this.state,n=(!!o.length&&e.length,jm&&!jm.isNativePlatform),i={id:"address",value:e,placeholder:"如街道、门牌号、小区、乡镇、村等",onChange:this.addressOnChange,onFocus:e=>{this.setState({addressInputFocused:!0}),this.removeAddressError(e)},onBlur:()=>{this.setState({addressInputFocused:!1})},className:`m-addr-textarea  ${t?"input-error":""} ${n?"":"without-pos-icon"}`},l={className:"position-icon "+(a?"active":"inactive"),onClick:e=>this.requestPosition(e)};return s.default.createElement("div",{className:e?"m-addr-address-new":"m-addr-address-none m-addr-address-new"},s.default.createElement("div",{className:"m-addr-address-text"},"详细地址"),s.default.createElement("textarea",i),e&&s.default.createElement("div",{className:"m-addr-address-clear-wrapper "+(n?"":"wrapper-without-pos-icon"),onMouseDown:this.checkToStopClear,onTouchStart:this.checkToStopClear,onClick:this.clearAddress,style:{opacity:r?1:0}},s.default.createElement("div",{className:"m-addr-address-clear"})),n&&s.default.createElement("div",l))}generateAddrBottom(){const{saveAndUse:e,addressSuggestionList:t,isShowPositionList:a}=this.state;let o;return a&&t.length||(o=s.default.createElement("div",{className:"m-addr-save-new active",onClick:this.saveAddress},s.default.createElement("span",null,e?"保存并使用":"保存"))),this.startTime=Date.now(),o}generatePositionList(){const e=this,{addressSuggestionList:t,isShowPositionList:a}=e.state;let o;return a&&t.length&&(o=s.default.createElement("div",{className:"m-addr-address-suggestion"},s.default.createElement("ul",{id:"m-addr-address-suggestion-ul",onClick:e.addrBack},t&&t.map(((t,a)=>s.default.createElement("li",{key:"suggestion-"+a,onClick:a=>e.selectSuggestionAddress.bind(e,a,t)()},s.default.createElement("div",{className:"m-addr-suggestion-title"},t.title),s.default.createElement("div",{className:"m-addr-suggestion-address"},t.address))))))),o}selectSuggestionAddress(e,t){e&&e.stopPropagation(),this.props.locationAddrClickTracking&&Object(M.d)(Object.assign({},this.props.locationAddrClickTracking,this.props.trackingContext));const{currentProvinceID:a,currentCityID:o,currentDistrictID:r}=this.state;a+""==t.province_id+""&&o+""==t.city_id+""&&r+""==t.district_id+""||Object(ma.a)("省市区的信息已修改",Tm);const{province_id:n,city_id:s,district_id:i,title:l,thumb_address:c,province:d,city:u,district:p,address:m}=t,h={currentProvinceID:n,currentCityID:s,currentDistrictID:i,currentProvinceName:d,currentCityName:u,currentDistrictName:p,regionUnionName:d===u?`${u} ${p}`:`${d}  ${u}  ${p}`,address:c+" "+l,addressSuggestionList:[],addressInfo:t,isShowPositionList:!1,title:"编辑地址"};this.setState((e=>h),(()=>{Object(ft.a)(document.getElementById("address")),this.setAddressInputFocused()}))}setAddressInputFocused(){const e=document.getElementById("address"),t=e.value.length,a=t,o=t;if(e.setSelectionRange)e.focus&&e.focus(),e.setSelectionRange(a,o);else if(e.createTextRange){const t=e.createTextRange();t.collapse(!0),t.moveEnd("character",o),t.moveStart("character",a),t.select()}else e.focus&&e.focus()}requestPosition(e){e&&e.stopPropagation();const t=this,{isPositionBtnActived:a}=t.state;a||(t.props.locationBtnClickTracking&&Object(M.d)(Object.assign({},t.props.locationBtnClickTracking,t.props.trackingContext)),t.setState((e=>({isPositionBtnActived:!0})),(e=>{t.getUserCoords(((e,a)=>{t.setState((e=>({isPositionBtnActived:!1}))),a===t.locateOvertimeCount&&(0!==(e=t.addressListFilter(e)).length?t.setState((t=>({addressSuggestionList:e||[],isShowPositionList:!0,title:"根据定位获取附近地址"})),(e=>{Object(ft.a)(document.getElementById("m-addr-address-suggestion-ul"))})):Fm("无法获取你的位置，请手动选择"))}),t.locateOvertimeCount),t.geoHandler&&clearTimeout(t.geoHandler),t.geoHandler=setTimeout((()=>{const{isPositionBtnActived:e}=t.state;e&&(Fm("无法获取你的位置"),t.locateOvertimeCount+=1,t.setState((e=>({isPositionBtnActived:!1}))))}),15e3)})))}getUserCoords(e,t){const a=this;jm.isWeChatPlatform?window.wx&&window.wx.getLocation({type:"wgs84",success:o=>{const r=o.latitude,n=o.longitude;a.geolocationDecoder(e,{lat:r,lng:n},t)},cancel:function(){e(null,t)}}):jm.isQQPlatform?window.mqq&&window.mqq.sensor&&window.mqq.sensor.getLocation({allowCacheTime:60},((o,r,n,s)=>{0!==o?e(null,t):a.geolocationDecoder(e,{lat:r,lng:n,coord_type:5},t)})):a.getGeolocation((o=>{const r=o.coords,n=r.latitude,s=r.longitude;a.geolocationDecoder(e,{lat:n,lng:s},t)}),(()=>{e(null,t)}),null)}geolocationDecoder(e,t,a){t&&t.lat&&t.lng?(t.coord_type||(t.coord_type=1),(this.antiCrawler?this.antiCrawler.messagePackSync():Promise.resolve("")).then((e=>{const a={payload:{},anti_content:e,location:{lng:t.lng,lat:t.lat,coordinate_type:t.coord_type}};return this.props.scene&&(a.payload.scene=this.props.scene),this.$axiosHttp.post("api/ptolemeaus/poi/nearby/poi_list",a)})).then((t=>{var o;(null==t||null===(o=t.result)||void 0===o?void 0:o.data)?e(t.result.data,a):e(null,a)})).catch((()=>{e(null,a)}))):e(null)}getGeolocation(e,t,a){t||(t=function(e){switch(e.code){case e.TIMEOUT:Fm("定位失败，请稍后重试");break;case e.PERMISSION_DENIED:Fm("定位失败，请先同意定位请求");break;case e.POSITION_UNAVAILABLE:case e.UNKNOWN_ERROR:Fm("无法获取你的位置")}}),a||(a={enableHighAccuracy:!1,timeout:6e4,maximumAge:6e4}),navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,a):Fm("定位失败，请手动输入地址")}addressListFilter(e){return e&&e.length>0?e.filter((e=>-1!==parseInt(e.city_id,10)&&-1!==parseInt(e.district_id,10)&&-1!==parseInt(e.province_id,10))):[]}reduceMobile(e){let t="";const a=e.length;for(let o=0;o<a;o++)e.charCodeAt(o)<255&&(t+=e.substr(o,1));return t.replace(/\s|\-/g,"").replace(/^\+86/,"")}dealSaveResult(e){const t=this;t.props.onSaveClickTrackingBase&&Object(M.d)(Object.assign({},t.props.onSaveClickTrackingBase,t.props.trackingContext)),this.$axiosHttp.get("api/origenes/address/"+e).then((e=>{t.props.onConfirm&&t.props.onConfirm(e)}))}validName(){const e=this,{name:t}=e.state;return""===t.trim()?(Fm("请填写收货姓名"),!1):nm(t)>16?(Fm("姓名不能超过8个字"),e.setState((e=>({isNameError:!0}))),!1):(e.setState((e=>({isNameError:!1}))),!0)}validMobile(){const{mobile:e}=this.state;return""!==e||(Fm("请填写手机号码"),!1)}validAddress(){const e=this,{address:t}=e.state;if(!1===this.shouldIgnoreClearBtnClick)return;if(""===t.trim())return Fm("请填写详细地址"),!1;if(nm(t)>100)return Fm("地址不能超过100个字，请删除部分内容"),e.setState((e=>({isAddressError:!0}))),!1;return/^[0-9]*$/.test(t)?(Fm("请填写正确的地址"),e.setState((e=>({isAddressError:!0}))),!1):(e.setState((e=>({isAddressError:!1}))),!0)}validAddressInfo(){if(!this.validName())return!1;const{currentProvinceID:e,currentCityID:t,currentDistrictID:a}=this.state;return e+""=="0"||t+""=="0"||a+""=="0"?(Fm("请选择地区"),this.setState((()=>({showRegionSelector:!0}))),!1):!!this.validAddress()&&!!this.validMobile()}removeNameError(e){e&&e.stopPropagation(),this.setState((e=>({isNameError:!1,focused:!0})))}removeMobileError(e){e&&e.stopPropagation(),this.setState((e=>({isMobileError:!1,focused:!0})))}removeAddressError(e){e&&e.stopPropagation(),this.setState((e=>({isAddressError:!1,focused:!0})))}}zm.defaultProps={title:"编辑地址",addressId:"",trackingContext:{}};let Hm={};Hm=zm;var Vm=Hm,Um=a("r5oO"),Wm=a.n(Um);const Gm=sd.getInstance();var qm=function(e){const[t,a]=Object(s.useState)(!1);Object(s.useEffect)((()=>{Gm.initShowEditAddress((()=>a(!0)))}),[]);const{addressInfo:o={}}=e,r=o.addressId,n=o.addressGiftStatus;return parseInt(r||0)<=0&&!n?s.default.createElement("div",{className:Wm.a.container},s.default.createElement("div",{className:Wm.a.cell,"data-active":"cell-white"},s.default.createElement("div",{className:`${Wm.a.addAddress} ${Wm.a.indicator}`,onClick:t=>{t.stopPropagation(),e.onClickPreCheck?e.onClickPreCheck()&&a(!0):a(!0)}},s.default.createElement("svg",{className:Wm.a.addIcon,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"33736",width:"20",height:"20",fill:"#E02E24"},s.default.createElement("path",{d:"M336.83 402.19zM622.69 406.86h0.01-0.01zM901.72 2H122.85A120.75 120.75 0 0 0 2.09 122.73v778.88a120.75 120.75 0 0 0 120.76 120.75h778.87a120.76 120.76 0 0 0 120.76-120.75V122.73A120.76 120.76 0 0 0 901.72 2z m-186 561H563.14v152.58a50.86 50.86 0 1 1-101.71 0V563H308.87a50.85 50.85 0 1 1 0-101.7h152.56V308.75a50.86 50.86 0 0 1 101.71 0v152.57H715.7a50.85 50.85 0 0 1 0 101.7z","p-id":"33737"})),s.default.createElement("span",null,"手动添加收货地址"))),t&&s.default.createElement(Vm,{title:"添加新收货地址",onConfirm:t=>{e.updateAddressInfo&&e.updateAddressInfo({addressId:t.address_id,name:t.name,province:t.province,city:t.city,district:t.district,address:t.address,mobile:t.mobile,provinceId:t.province_id,cityId:t.city_id,districtId:t.district_id})},onClose:()=>{a(!1)},trackingContext:{},analyzeClipBoard:!0,componentDisablePullReload:!0,useNewUI:!0,checkRegion:!0})):null};const Qm="请填写真实姓名",Ym="请填写身份证号",Jm="请填写正确的身份证号",Xm="姓名和身份证不匹配，请重新认证，已保留上次认证信息",Km="带*信息无法提交，请重新认证，已保留上次认证信息",$m="提交身份认证失败，请稍后重试",Zm="身份认证失败，请稍后重试",eh=[40003,11e4];let th;var ah=async(e,t)=>{if(!th){const e=ia.a.getInstance().getPageID();th=Object(sa.a)({pageInfo:{pageId:e}})}return th(n()(n()({},e),{},{defaultErrorHandler:()=>{}}))};const oh=Object(O.b)(window.navigator.userAgent);function rh(e,t){return function(a){if(a&&a.target&&/\*/.test(a.target.value)){const a={};a[t]="",e.setState(a)}e.isFocus=!0,e.scrollYWhenFocus=window.scrollY}}function nh(e,t){return function(a){const o={snapshotId:""};/\*/.test(e.state.realName)||/\*/.test(e.state.idCardNo)?(o.realName="",o.idCardNo=""):o[t]=a.target.value,e.setState(o)}}a("gvmc");function sh({visible:e,extraParams:t,onRecIdcardClick:a}){const[o,r]=Object(s.useState)([]);return Object(s.useEffect)((()=>{var e;(e=t,ah({method:"POST",url:"api/origenes/recommend/user/cards/order",data:e}).then((e=>e)).catch((e=>{}))).then((e=>{const t=e&&e.result||[];t&&t.length&&r(t)}))}),[]),s.default.createElement(s.default.Fragment,null,e&&o&&o.length>0&&s.default.createElement("div",{className:"bubbleContainer"},s.default.createElement("span",{className:"recCardTriangle"}),s.default.createElement("div",{className:"idCardList"},o.slice(0,3).map(((e,t)=>s.default.createElement("div",{className:"recCardItem",key:t,onClick:t=>{a(e)}},e.id_card_name))))))}a("v9rC");class ih extends s.default.Component{constructor(e){super(e),this.state={idFocus:!1},this.idcardFormRef=s.default.createRef(),this.nameInputRef=s.default.createRef(),this.onIdFocus=this.onIdFocus.bind(this),this.onIdBlur=this.onIdBlur.bind(this)}componentDidMount(){this.props.onShow&&this.props.onShow();const e=this.idcardFormRef.current,t=this.nameInputRef.current;Object(ft.a)(e),t&&t.focus()}componentWillUnmount(){Object(ft.b)()}onIdFocus(){this.props.onIdFocus(),this.setState({idFocus:!0})}onIdBlur(){this.props.onBlur(),this.setState({idFocus:!1})}render(){const{onClickClose:e,onClickSubmit:t,realName:a,idCardNo:o,onNameFocus:r,onNameChange:n,onIdChange:i,labels:l,onBlur:c,submitText:d,onRecIdcardClick:u,disableRec:p}=this.props;return s.default.createElement("div",{className:"new-idcard-form",id:"new-id-card",ref:this.idcardFormRef},s.default.createElement("div",{className:"new-idcard-form-container"},s.default.createElement("div",{className:"new-idcard-form-title"},l&&l.title||"实名认证",s.default.createElement("div",{className:"new-idcard-form-close",onClick:e})),l&&l.formHint&&s.default.createElement("div",{className:"new-idcard-form-hint"},l.formHint),s.default.createElement("div",{className:"new-idcard-form-row"},s.default.createElement("div",{className:"new-idcard-form-label"},"真实姓名"),s.default.createElement("div",{className:"new-idcard-form-input"},p?null:s.default.createElement(sh,{visible:!this.state.idFocus&&!a,extraParams:this.props.extraParams,onRecIdcardClick:u}),s.default.createElement("input",{onFocus:r,onChange:n,type:"text",value:a,placeholder:l&&l.nameHint||"请填写姓名",onBlur:c,ref:this.nameInputRef}))),s.default.createElement("div",{className:"new-idcard-form-row"},s.default.createElement("div",{className:"new-idcard-form-label"},"身份证号"),s.default.createElement("div",{className:"new-idcard-form-input"},s.default.createElement("input",{onFocus:this.onIdFocus,onChange:i,type:"text",value:o,placeholder:l&&l.idHint||"请填写身份证号码",onBlur:this.onIdBlur}))),s.default.createElement("div",{className:"new-idcard-form-action","data-active":"red"},s.default.createElement("div",{className:"new-idcard-form-btn",onClick:t},d||"保存"))))}}class lh extends s.Component{constructor(e){var t;super(e),this.hasAuthenticId=!1,this.isSubmitting=!1,this.state={realName:"",idCardNo:"",snapshotId:"",inHystrixAlert:!1},this.focusRealName=rh(this,"realName"),this.focusIdCardNo=rh(this,"idCardNo"),this.changeRealName=nh(this,"realName"),this.changeIdCardNo=nh(this,"idCardNo"),this.onBlur=(t=this,function(){t.isFocus=!1,oh.systemVersion&&Object(D.c)(oh.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&setTimeout((()=>{t.isFocus||window.scrollTo(0,t.scrollYWhenFocus)}),0)}),this.validateInfo=function(e,t){let a=null,o=!0;return function(e){return/^[\u2f00-\u9fff]{1,10}([.·]{0,1}[\u2f00-\u9fff]+)*$/gi.test(e)}(e)?t?/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)||(a=Jm,o=!1):(a=Ym,o=!1):(a=Qm,o=!1),{valid:o,errorHint:a}},this.onShow=this.onShow.bind(this),this.onClickClose=this.onClickClose.bind(this),this.submit=this.submit.bind(this),this.onRecIdcardClick=this.onRecIdcardClick.bind(this)}componentDidMount(){const{idCardName:e,idCardNo:t}=this.props||{};this.setState({realName:e||"",idCardNo:t||""})}onRecIdcardClick(e){e&&e.card_snapshot_id&&this.setState({realName:e.id_card_name,idCardNo:e.mask_id_card_no,snapshotId:e.card_snapshot_id})}onShow(){const{trackingConstant:e}=this.props;e&&e.IDCardPopupShow&&Object(M.c)(e.IDCardPopupShow)}onClickClose(e){this.props.onClickClose&&this.props.onClickClose()}async submit(){const{trackingConstant:e,extraParams:t,submitSuccessCallback:a,getAntiContent:o}=this.props,r=(this.state.realName||"").trim();let n=(this.state.idCardNo||"").trim();const s=this.state.snapshotId;let i={id_card_name:r,id_card_no:n},l="api/origenes/strong/update/user/card";if(this.isSubmitting)return;if(s)i={snapshot_id:s},l="api/origenes/update/user/card/snapshotid";else{if(/\*/.test(r)||/\*/.test(n))return Object(kt.a)(Km),void this.onClickClose();const e=this.validateInfo(r,n);if(!e.valid)return void Object(kt.a)(e.errorHint,{duration:3});18===n.length&&"x"===n.charAt(17)&&(n=n.toUpperCase())}this.isSubmitting=!0;const c=await async function({baseParams:e,queryUrl:t,extraParams:a,getAntiContent:o}){let r;return Object(ha.b)(),a&&(r=Object.assign(e,a)),o&&(r.risk_request={anti_content:await o()}),ah({method:"POST",url:t,data:r}).then((e=>(Object(ha.a)(),{success:!0,result:e}))).catch((e=>{Object(ha.a)();let t=(e=e||{}).errorCode;const a=e.response;let o;return a&&a.data&&(o=a.data.error_msg),!t&&a&&(t=a.status),{success:!1,errorCode:t,message:o,response:a}}))}({baseParams:i,queryUrl:l,extraParams:t,getAntiContent:o})||{};if(c.success){this.hasAuthenticId=!0;const t=e&&e.IDCardPopupSaveClick;t&&Object(M.b)(t),a&&a({success:!0,result:c.result,realName:r,idCardNo:n}),this.onClickClose()}else{const{errorCode:e,message:t,response:a}=c;if([1101,409,512,511,11e4,500,5e4].includes(+e))Ua({title:"当前实名信息提交人数较多，请稍后再试",confirmButtonLabel:"知道了",onConfirm:()=>{this.setState({inHystrixAlert:!1})}}),this.setState({inHystrixAlert:!0}),await new Promise((e=>setTimeout(e,200)));else{let o;o=eh.includes(e)?$m:43008===e&&this.hasAuthenticId?Xm:e&&a?t||$m:Zm,Object(kt.a)(o)}}this.isSubmitting=!1}render(){const e=this.state,t=this.props.labels;return this.props.idCardFormVisible&&!this.state.inHystrixAlert?s.default.createElement(ih,{onClickClose:this.onClickClose,onShow:this.onShow,onIdFocus:this.focusIdCardNo,onNameChange:this.changeRealName,onNameFocus:this.focusRealName,onIdChange:this.changeIdCardNo,realName:e.realName,idCardNo:e.idCardNo,onClickSubmit:this.submit,onBlur:this.onBlur,labels:t,submitText:this.props.submitText,extraParams:this.props.extraParams,onRecIdcardClick:this.onRecIdcardClick,disableRec:this.props.disableRec}):null}}var ch=lh,dh=a("TYy9"),uh=a.n(dh),ph=a("V00b"),mh=a.n(ph);const hh=s.default.createContext({glide:()=>{}}),fh=hh.Provider;var gh=Object(s.forwardRef)((({initialVisible:e=!0,onShowStart:t=(()=>{}),onHideStart:a=(()=>{}),onShow:o=(()=>{}),onHide:r=(()=>{}),children:n,bgFillClassName:i="",containerClassName:l=""},c)=>{const[d,u]=Object(s.useState)(!1),[p,m]=Object(s.useState)(e);function h(e){null==e||e.stopPropagation(),t(e),m(!0)}function f(e){null==e||e.stopPropagation(),a(e),u(!1)}function g(e){null==e||e.stopPropagation(),p?f(e):h(e)}return Object(s.useEffect)((()=>{if(p){const e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,17)};e((()=>{e((()=>{u(!0)}))}))}}),[p]),Object(s.useImperativeHandle)(c,(()=>({show:h,hide:f,toggle:g,visible:p}))),p?s.default.createElement("div",{className:dt()(mh.a.bgFill,i,{[mh.a.bgFillShow]:d}),onClick:f},s.default.createElement("div",{className:dt()(mh.a.container,l,{[mh.a.visibleContainer]:d}),onClick:e=>e.stopPropagation(),onTransitionEnd:function(e){null==e||e.stopPropagation(),d?o(e):(r(e),m(!1))}},s.default.createElement(fh,{value:{glide:f}},n))):null}));const _h={MOBILE:"mobile",MOBILE_ID:"mobile_id",NAME:"id_card_name",ID:"id_card_no",ID_SNAPSHOT:"id_card_snapshot_id",TEMPERATURE:"temperature",SYMPTOM:"symptom_type",RISK_TRAVEL:"risk_travel",CONFIRM:"confirm",OCCUPATION:"occupation_type",CATALOG:"catalog",SELF_USE:"self_use"};var yh=a("JZM8"),bh=a.n(yh);const vh="undefined"!=typeof window,kh={DEFAULT:0,LOADING:1,LOADED:2,LOAD_FAILED:3};let Ih=null;class wh{constructor(e={}){this.debug=!1,this.serverTime=e.serverTime||0,this.riskControlCrawler=null}getStatus(){return kh.LOADED}loadScript(){return Promise.resolve()}initRiskController(){!this.riskControlCrawler&&vh&&(this.riskControlCrawler=new gr.default({serverTime:this.serverTime,_2827c887a48a351a:!1}),this.riskControlCrawler.init(null))}async getRiskControlInfoSync(){if(!this.riskControlCrawler)return null;const e=await this.riskControlCrawler.messagePackSync({touchEventData:!0,clickEventData:!0,focusblurEventData:!0,changeEventData:!0,locationInfo:!0,referrer:!0,browserSize:!0,browserInfo:!0,token:!0,fingerprint:!0});return this.riskControlCrawler.clearCache(),e}getRiskControlInfoAsync(){return new Promise(((e,t)=>{this.initRiskController(),e(this.getRiskControlInfoSync())}))}}wh.RiskControllerStatus=kh,wh.RISK_SCRIPT_DEV="//cdn.hutaojie.com/hanzo/react-1343CE9FC918BA68DC77A314370FF50B-759d07b714.js",wh.RISK_SCRIPT_PROD="//static.pddpic.com/hanzo/react-1343CE9FC918BA68DC77A314370FF50B-58d69cbc63.js",wh.getInstance=function(e){return vh?(Ih||(Ih=new wh(e)),Ih):null};var Sh=wh;let Eh;var Ch=e=>{if(!Eh){const e=ia.a.getInstance().getPageID();Eh=Object(sa.a)({pageInfo:{pageId:e}})}return Eh(n()(n()({},e),{},{encodeNativeResponse:!1,defaultErrorHandler:()=>{}}))};const Ph=async e=>{const t=new Sh({serverTime:Date.now()});t.initRiskController();const a=await t.getRiskControlInfoSync(),{success:o,result:r}=await Ch({method:"POST",url:"/api/barbera/biz/info/epidemic/drug/save",data:n()(n()({},bh()(e,Object.values(_h))),{},{province_id:e.provinceId,city_id:e.cityId,anti_content:a})});if(o)return null==r?void 0:r.snapshot_id;throw new Error},Nh=s.default.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"m624.108 511.996 375.932-373.359c31.939-31.72 31.939-83.128 0-114.848-31.941-31.72-83.705-31.72-115.646 0L511.998 393.62 139.6 23.788c-31.94-31.72-83.705-31.72-115.644 0s-31.94 83.128 0 114.848l375.931 373.36L23.956 885.355c-31.94 31.72-31.94 83.128 0 114.848 15.97 15.86 36.896 23.79 57.822 23.79s41.852-7.93 57.822-23.79l372.398-369.83 372.397 369.83c15.97 15.86 36.896 23.79 57.822 23.79s41.853-7.93 57.823-23.79c31.939-31.72 31.939-83.128 0-114.848l-375.932-373.36z"})),Oh=s.default.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M899.197 147.163C770.636 141.475 647.65 97.161 533.593 15.53L511.976 0l-21.503 15.416c-114.17 81.745-237.1 126.23-364.808 131.747H85.333v346.434c0 253.938 171.738 471.242 417.485 528.526l10.694 1.82 7.737-1.82c245.746-57.284 417.37-274.588 417.37-528.469V147.22h-39.422zM483.25 687.293l-187.21-192.728 50.23-51.766 136.98 141.02 240.058-247.17 50.287 51.71-290.345 298.934z"})),Dh=s.default.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"m512 0 11.123.106C800.768 6.038 1024 232.942 1024 512c0 282.765-229.235 512-512 512S0 794.765 0 512 229.235 0 512 0zM383.576 343.64a28.319 28.319 0 0 0-39.9 0 27.895 27.895 0 0 0 0 39.618L473.336 512 343.71 640.742a27.895 27.895 0 0 0 0 39.618 28.213 28.213 0 0 0 39.9 0L512 552.783 640.424 680.36l3.495 2.93a28.248 28.248 0 0 0 36.37-2.93 27.895 27.895 0 0 0 0-39.618L550.665 512l129.624-128.742 2.719-3.177a27.895 27.895 0 0 0-2.719-36.44l-3.178-2.684a28.354 28.354 0 0 0-36.723 2.683L512 471.181z"})),xh=s.default.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s.default.createElement("path",{d:"M292.7 1023.998c-14.555 0-29.11-5.556-40.222-16.667-22.223-22.222-22.223-58.24 0-80.444L667.124 512.24 251.978 97.112c-22.222-22.204-22.222-58.222 0-80.445s58.222-22.222 80.445 0l428.554 428.536c36.944 36.981 36.944 97.11.038 134.074L332.922 1007.33c-11.111 11.112-25.667 16.667-40.222 16.667z"})),Th=s.default.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#E02E24"},s.default.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0zm219.648 307.2L444.53 627.598l-122.937-123.05L256 570.027l192.284 192.398 352.484-393.387-69.12-61.838z"})),jh=s.default.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#9c9c9c"},s.default.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2zm0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z"})),Ah=s.default.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#e02e24"},s.default.createElement("path",{d:"M512.28 120.22c-216.15 0-392 175.85-392 392s175.85 392 392 392 392-175.85 392-392-175.84-392-392-392z m0 840c-247 0-448-201-448-448s201-448 448-448 448 201 448 448-200.97 448-448 448z m-66.41-261.94L287.76 540.54l53.93-53.78 101.13 100.91 236.1-262.72 56.84 50.77z"}));var Lh=a("xIpx"),Rh=a.n(Lh);class Mh extends s.default.Component{constructor(...e){super(...e),this.scrollerRef=s.default.createRef(),this.setTranslateY=e=>{this.srollerDom.style.transform=`translate3d(0,${e}px,0)`,this.srollerDom.style.webkitTransform=`translate3d(0,${e}px,0)`},this.setRotateX=e=>{const t=this.srollerDom.children||[];Array.prototype.slice.call(t).forEach(((t,a)=>{t.style.transform=`rotateX(${25*(a+e)}deg)`,t.style.webkitTransform=`rotateX(${25*(a+e)}deg)`}))},this.setTransitionDuration=(e,t)=>{e.style.transitionDuration=t;const a=()=>{e.style.transitionDuration="0ms",e.removeEventListener("transitionEnd",a),e.removeEventListener("webkitTransitionEnd",a)};e.addEventListener("transitionEnd",a),e.addEventListener("webkitTransitionEnd",a)},this.bindEvent=()=>{let e=0,t=1,a=0,o=0,r=null;const n=e=>{let t=!1;Math.abs(o)<=1&&(t=!0),r=setInterval((()=>{Math.abs(o)<=1?(clearInterval(r),t&&(this.index+=Math.round(e/this.distance)),this.index=this.index>0?0:Math.max(this.index,-this.maxIndex),this.setTransitionDuration(this.srollerDom,"400ms"),Array.prototype.slice.call(this.srollerDom.children).forEach((e=>{this.setTransitionDuration(e,"200ms")})),this.setTranslateY(this.index*this.distance),this.setRotateX(this.index),this.props.setIndex(Math.abs(this.index))):(o*=.3,e+=o,this.index+=Math.round(e/this.distance))}),10)};this.srollerDom.addEventListener("touchstart",(t=>{t.preventDefault(),t.stopPropagation(),clearInterval(r),e=t.changedTouches[0].clientY,a=e}),!1),this.srollerDom.addEventListener("touchmove",(r=>{r.preventDefault(),r.stopPropagation();let n=r.changedTouches[0].pageY-e;o=r.changedTouches[0].pageY-a,a=r.changedTouches[0].pageY,(0===this.index&&n>0||this.index===-this.maxIndex&&n<0)&&(t=1-Math.abs(n)/this.srollerDom.clientWidth,t=Math.max(t,0),n=parseInt(n*t)),this.setTranslateY(this.index*this.distance+n),this.setRotateX(this.index+n/this.distance)}),!1),this.srollerDom.addEventListener("touchend",(t=>{t.preventDefault(),t.stopPropagation();const a=t.changedTouches[0].pageY-e;0===a?(this.index=-t.target.getAttribute("data-index"),this.setTransitionDuration(this.srollerDom,"200ms"),this.setTranslateY(this.index*this.distance),this.setRotateX(this.index),this.props.setIndex(Math.abs(this.index))):n(a)}),!1)},this.ready=()=>{this.calculateDistance(),this.setTranslateY(this.index*this.distance),this.setRotateX(this.index),this.props.setIndex(Math.abs(this.index))},this.calculateDistance=()=>{const e=this.srollerDom.offsetHeight,t=(this.props.data||[]).length||1;this.distance=(e/t).toFixed(2)}}get srollerDom(){return this.scrollerRef.current}componentDidMount(){const{data:e=[],activeIndex:t}=this.props;this.index=-t||0,this.maxIndex=e.length-1,this.ready(),this.bindEvent()}componentDidUpdate(){const e=(this.props.data||[]).length-1;e!==this.maxIndex&&(this.index=-this.props.activeIndex,this.maxIndex=e,this.srollerDom.style.transitionDuration="200ms",setTimeout((()=>{this.ready()}),0))}shouldComponentUpdate(e){return(e.data.length!==this.props.data.length||e.data[0]!==this.props.data[0]||e.activeIndex!==this.props.activeIndex)&&(this.index=-e.activeIndex,this.ready(),!0)}render(){const{data:e=[],label:t,type:a}=this.props;return s.default.createElement("div",{className:Rh.a.wheel},s.default.createElement("ul",{ref:this.scrollerRef,className:Rh.a.wheelScroll},e.map(((e,o)=>s.default.createElement("div",{key:`date-${a}-${e}`,"data-index":o,className:Rh.a.wheelItem},`${e}${t||""}`)))))}}var Bh=a("SzcP"),Fh=a.n(Bh);var zh=({title:e,showPicker:t,pickerList:a,onSelect:o,toggleShowPicker:r,selectedItem:n})=>{const[i,l]=Object(s.useState)(0),c=e=>{e&&e.stopPropagation(),r&&r()};return a?s.default.createElement("div",{className:dt()(Fh.a.picker,{[Fh.a.showPicker]:t})},s.default.createElement("div",{className:Fh.a.mask,onClick:c}),s.default.createElement("div",{className:Fh.a.container},s.default.createElement("div",{className:Fh.a.panel},e,s.default.createElement("div",{className:Fh.a.close,onClick:c},s.default.createElement("div",{className:Fh.a.closeIcon}))),s.default.createElement("div",{className:Fh.a.scrollWrap},t&&s.default.createElement("div",{className:Fh.a.content},s.default.createElement("div",{className:Fh.a.maskTop}),s.default.createElement("div",{className:Fh.a.maskBottom}),s.default.createElement("div",{className:Fh.a.wrapper},s.default.createElement(Mh,{data:a,activeIndex:n&&a&&a.findIndex((e=>e===n)),setIndex:e=>{l(e)}})))),s.default.createElement("div",{className:Fh.a.bottomBtn,onClick:e=>{e&&e.stopPropagation();const t=a[i];o(t),r&&r()},"data-active":"red"},"确认"))):null};var Hh=function({title:e,showPicker:t,pickerList:a,onSelect:o,toggleShowPicker:r,selectedItem:n}){const i=Object(s.useCallback)(((e,t)=>{const{closeType:a,content:n}=t;if(1==+a&&n&&n.length){if(!n||!n.length)return;const e=n[0];o(e)}else r()}),[r,o]),l=Object(s.useRef)();return Object(s.useEffect)((()=>{l.current=()=>{if(!a||!a.length)return;let t=e;const o=Object(O.a)();o.isNativePlatform&&o.system===D.b.Android&&Object(D.c)(o.version,"5.77.0")<0&&(t=""),Object(ae.g)("JSCommonPicker","show",{columnCount:1,defaultValue:[n],listData:[a],titleText:t,maskClosable:!0,closeCallback:i},"5.66.0","5.66.0").catch((e=>{r()}))}}),[i,a,n,r,e]),Object(s.useEffect)((()=>{t&&l.current()}),[t]),null};var Vh=({title:e,showPicker:t,pickerList:a,onSelect:o,toggleShowPicker:r,selectedItem:n})=>{const[i,l]=Object(s.useState)(""),c=Object(s.useRef)();return Object(s.useEffect)((()=>{let e="h5";const t=Object(O.a)();c.current=zh,t.isNativePlatform&&Object(D.c)(t.version,"5.66.0")>=0&&(e="native",c.current=Hh),l(e)}),[]),i?s.default.createElement(c.current,{title:e,showPicker:t,pickerList:a,onSelect:o,toggleShowPicker:r,selectedItem:n}):null},Uh=a("a96g"),Wh=a.n(Uh);function Gh({onSelect:e,visible:t,idRecList:a=[]}){return s.default.createElement("div",{className:Wh.a.list,style:{visibility:t?"":"hidden"}},s.default.createElement("div",{className:Wh.a.arrow}),s.default.createElement("div",{id:"id_rec_list"},a.slice(0,3).map((({snapshotId:t,idNo:a,name:o})=>s.default.createElement("div",{className:Wh.a.item,onClick:()=>{e({snapshotId:t,idNo:a,name:o})},key:a},s.default.createElement("div",{className:Wh.a.name},o),s.default.createElement("div",{className:Wh.a.idCard},a),s.default.createElement("div",{className:Wh.a.border}))))),s.default.createElement("div",{className:Wh.a.footer},"近期实名信息（已加密保护）"))}var qh=a("BXy8"),Qh=a.n(qh);const Yh=()=>{const e=Object(O.a)();e.system===D.b.IOS&&Object(D.c)(e.systemVersion,"12.0")>=0&&Object(D.c)(e.systemVersion,"14.0")<0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)};let Jh=null;const Xh={cancelFix(){clearTimeout(Jh),Jh=null},triggerFix(){Jh=setTimeout(Yh,200)}},Kh=1,$h=2,Zh=3,ef=4,tf=5,af=6,of=7;function rf(e,t){const a=Dt()(e),{key:o,value:r,name:n="",idNo:s="",snapshotId:i=null}=t;switch(t.type){case Kh:return t.value;case $h:a.info[o]=r;break;case Zh:a.info[o]=r,a.info[_h.ID_SNAPSHOT]=null;break;case ef:a.info[_h.NAME]=n,a.info[_h.ID]=s,a.info[_h.ID_SNAPSHOT]=i;break;case tf:a.info[_h.MOBILE]="",a.info[_h.MOBILE_ID]=null;break;case af:a.catalogData=r;break;case of:a.showCatalog=r;break;default:throw new Error}return a}function nf(e,t,a){if(!e||!t||!a)return;let o=10*e;const r=[e.toFixed(1)+"°C"];for(;o<10*t;)o+=10*a,r.push((o/10).toFixed(1)+"°C");return r}class sf extends s.default.Component{constructor(e){super(e),this.el=document.createElement("div"),this.el.setAttribute("id","pickerContainer")}componentDidMount(){document.body.appendChild(this.el)}componentWillUnmount(){document.body.removeChild(this.el)}render(){const{showPicker:e,toggleShowPicker:t,onSelect:a,pickerList:o,selectedItem:r,title:n}=this.props;return s.default.createPortal(s.default.createElement(Vh,{title:n,showPicker:e,pickerList:o,onSelect:a,toggleShowPicker:t,selectedItem:r}),this.el)}}function lf({text:e,value:t,placeholder:a,setValue:o,mobileId:r,clearMobile:n},i){const[l,c]=Object(s.useState)(!1),d=Object(s.useRef)();Object(s.useImperativeHandle)(i,(()=>d.current));const u=()=>{o(""),setTimeout((()=>{var e;return null==d||null===(e=d.current)||void 0===e?void 0:e.focus()}),0)};return s.default.createElement("div",{className:Qh.a.slot},s.default.createElement("div",{className:Qh.a.key},e),s.default.createElement("input",{className:Qh.a.input,type:"tel",value:t||"",onChange:e=>{const{value:t}=e.target;t&&!/^1\d{0,10}$/.test(t)||o(t)},onFocus:()=>{Xh.triggerFix(),c(!0),r&&n()},onBlur:()=>{const{system:e}=Object(O.a)();e===D.b.Android?c(!1):setTimeout((()=>c(!1)),0),Xh.triggerFix()},placeholder:a,ref:d}),l&&t&&s.default.createElement("div",{className:Qh.a.clearBtn,onTouchStart:()=>{const{system:e}=Object(O.a)();e===D.b.Android&&u()},onClick:()=>{const{system:e}=Object(O.a)();e!==D.b.Android&&u()}},Dh))}const cf=Object(s.forwardRef)(lf);function df({text:e,value:t,setValue:a,setIdInfo:o,placeholder:r,snapshotId:n},i){const[l,c]=Object(s.useState)(!1),[d,u]=Object(s.useState)([]),[p,m]=Object(s.useState)(!1),h=Object(s.useRef)();Object(s.useImperativeHandle)(i,(()=>h.current)),Object(s.useEffect)((()=>{(async()=>{const e=new Sh({serverTime:Date.now()});e.initRiskController();const t=await e.getRiskControlInfoSync();try{const e=await Ch({method:"POST",url:"/api/kali/query/masked/idcard/by/scene",data:{scene:"ANTI_VIRUS",anti_content:t}});if(e.success)return(e.result||[]).map((e=>({snapshotId:e.snapshot_id,idNo:e.id_card_no,name:e.id_card_name})))}catch(a){return[]}return[]})().then((e=>u(e)))}),[]);const f=()=>{a(""),setTimeout((()=>{var e;return null==h||null===(e=h.current)||void 0===e?void 0:e.focus()}),0)};return s.default.createElement("div",{className:Qh.a.slot},s.default.createElement("div",{className:Qh.a.key},e),s.default.createElement("input",{maxLength:15,className:Qh.a.input,value:t||"",onChange:e=>{const t=e.target.value;a(t),t||m(!0)},onFocus:()=>{Xh.cancelFix(),c(!0),n?(o(),setTimeout((()=>m(!0)),0)):t||setTimeout((()=>m(!0)),0)},onBlur:()=>{const{system:e}=Object(O.a)();e===D.b.Android?c(!1):setTimeout((()=>c(!1)),0),setTimeout((()=>m(!1)),0),Xh.triggerFix()},placeholder:r,ref:h}),l&&t&&s.default.createElement("div",{className:Qh.a.clearBtn,onTouchStart:()=>{const{system:e}=Object(O.a)();e===D.b.Android&&f()},onClick:()=>{const{system:e}=Object(O.a)();e!==D.b.Android&&f()}},Dh),s.default.createElement(Gh,{visible:!t&&p&&(null==d?void 0:d.length)>0,idRecList:d,onSelect:o}))}const uf=Object(s.forwardRef)(df);function pf({text:e,value:t,setValue:a,placeholder:o,snapshotId:r,setIdInfo:n},i){const[l,c]=Object(s.useState)(!1),d=Object(s.useRef)();Object(s.useImperativeHandle)(i,(()=>d.current));const u=()=>{a(""),setTimeout((()=>{var e;return null==d||null===(e=d.current)||void 0===e?void 0:e.focus()}),0)};return s.default.createElement("div",{className:Qh.a.slot},s.default.createElement("div",{className:Qh.a.key},e),s.default.createElement("input",{maxLength:18,className:Qh.a.input,value:t||"",onChange:e=>{const{value:t}=e.target;t&&!/^[0-9Xx]{0,18}$/.test(t)||a(t)},onFocus:()=>{Xh.cancelFix(),c(!0),r&&n()},onBlur:()=>{const{system:e}=Object(O.a)();e===D.b.Android?c(!1):setTimeout((()=>c(!1)),0),Xh.triggerFix()},placeholder:o,ref:d}),l&&t&&s.default.createElement("div",{className:Qh.a.clearBtn,onTouchStart:()=>{const{system:e}=Object(O.a)();e===D.b.Android&&u()},onClick:()=>{const{system:e}=Object(O.a)();e!==D.b.Android&&u()}},Dh))}const mf=Object(s.forwardRef)(pf);function hf({text:e,value:t,setValue:a,placeholder:o,min:r,max:n,interval:i,defaultTemperature:l}){const[c,d]=Object(s.useState)(!1),u=nf(r,n,i);return s.default.createElement("div",{className:`${Qh.a.slot} ${Qh.a.slotActive}`,onClick:()=>d(!0)},s.default.createElement("div",{className:Qh.a.key},e),!!t&&t+"°C",!t&&s.default.createElement("span",{className:Qh.a.temperaturePlaceholder},o),s.default.createElement("div",{className:Qh.a.arrow},xh),s.default.createElement(sf,{title:"请选择体温",showPicker:c,toggleShowPicker:()=>d(!1),onSelect:e=>{d(!1);const t=e&&e.replace("°C","");a(+t)},selectedItem:l?(+l).toFixed(1)+"°C":"37.0°C",pickerList:u}))}function ff({text:e,value:t,setValue:a,options:o=[],placeholder:r}){const[n,i]=Object(s.useState)(!1),l=o.find((e=>+e.type==+t)),c=null==l?void 0:l.text,d=o.map((e=>e.text));return s.default.createElement("div",{className:`${Qh.a.slot} ${Qh.a.slotActive}`,onClick:()=>i(!0)},s.default.createElement("div",{className:Qh.a.key},e),!!c&&s.default.createElement("div",{className:Qh.a.occupationTextContainer},s.default.createElement("span",{className:Qh.a.occupationText},c)),!c&&s.default.createElement("span",{className:Qh.a.temperaturePlaceholder},r),s.default.createElement("div",{className:Qh.a.arrow},xh),s.default.createElement(sf,{title:"请选择从事行业",showPicker:n,toggleShowPicker:()=>i(!1),onSelect:e=>{i(!1);const t=o.find((t=>t.text===e));a(null==t?void 0:t.type)},selectedItem:c,pickerList:d}))}function gf({text:e,value:t,setValue:a,options:o=[]}){const r=dt()(Qh.a.slot,Qh.a.symptomSlot);return s.default.createElement("div",{className:r},s.default.createElement("div",{className:Qh.a.key},e),o.map(((e,o)=>{const r=dt()(Qh.a.symptomOption,{[Qh.a.selected]:e.type===t});return s.default.createElement("div",{className:r,key:o,onClick:()=>a(e.type)},e.text)})))}function _f({text:e,value:t,setValue:a,options:o}){const r=dt()(Qh.a.slot,Qh.a.boolSlot);return s.default.createElement("div",{className:r},s.default.createElement("div",{className:Qh.a.key},e),s.default.createElement("div",{className:Qh.a.options},o&&!!o.length&&o.map(((e,o)=>s.default.createElement("span",{key:o,className:Qh.a.selectIcon,onClick:()=>a(e.type)},t===e.type?Th:jh,e.text)))))}function yf({text:e,value:t,setValue:a}){return s.default.createElement("div",{className:Qh.a.confirm},t&&s.default.createElement("div",{className:Qh.a.confirmSelectedBtn,onClick:()=>a(!t)},Ah),!t&&s.default.createElement("div",{className:Qh.a.confirmUnselectedBtn,onClick:()=>a(!t)},jh),e)}function bf({text:e,onClick:t}){return s.default.createElement("div",{className:Qh.a.catalog},s.default.createElement("span",{className:Qh.a.catalogText,onClick:t},e))}function vf({text:e,value:t,options:a,setValue:o}){const r=dt()(Qh.a.slot,Qh.a.boolSlot),n=Object(s.useCallback)((e=>{t!==e&&Ua({title:"目前疫情相关药品仅限本人购买",confirmButtonLabel:"知道了",onConfirm:()=>{o(t)},onClose:()=>{o(t)}}),o(e)}),[o,t]);return s.default.createElement("div",{className:r},s.default.createElement("div",{className:Qh.a.key},e),s.default.createElement("div",{className:Qh.a.options},a&&!!a.length&&a.map(((e,a)=>s.default.createElement("span",{key:a,className:Qh.a.selectIcon,onClick:()=>n(e.type)},t===e.type?Th:jh,e.text)))))}function kf({purchaseData:e,updateDrugInfo:t,provinceId:a,cityId:o}){const[r,i]=Object(s.useReducer)(rf,e),[l,c]=Object(s.useState)(!1),d=Object(s.useRef)(),u=Object(s.useRef)(),p=Object(s.useRef)(),{glide:m}=Object(s.useContext)(hh),{catalogData:h,showCatalog:f}=r;Object(s.useEffect)((()=>{const{isNativePlatform:e}=Object(O.a)();return Object(ft.a)(document.querySelectorAll(".scrollable")),e&&Object(ae.p)({enable:!1}),()=>{Object(ft.b)(),e&&Object(ae.p)({enable:!0})}}),[]),Object(s.useEffect)((()=>{Object(ft.b)(),Object(ft.a)(document.querySelectorAll(".scrollable"))}),[f]);const g=(e,t)=>{i({type:$h,value:t,key:e})},_=(e,t)=>{i({type:Zh,value:t,key:e})},y=e=>{i(n()({type:ef},e))},b=()=>{i({type:tf})},v=async()=>{let e=h;if(!e){Object(ha.b)();try{e=await(async()=>{const{success:e,result:t}=await Ch({method:"POST",url:"api/barbera/biz/info/epidemic/drug/index"});return e?t.epidemic_drug_index_list:null})(),i({type:af,value:e})}finally{Object(ha.a)()}}e&&i({type:of,value:!0})};return s.default.createElement(s.default.Fragment,null,h&&s.default.createElement("div",{className:Qh.a.mainContainer,style:{display:f?"":"none"}},s.default.createElement("div",{className:Qh.a.catalogTitle},"退烧止咳药目录",s.default.createElement("div",{className:Qh.a.close,onClick:()=>{i({type:of,value:!1})}},Nh)),s.default.createElement("div",{className:Qh.a.catalogContent+" scrollable"},s.default.createElement("div",{className:Qh.a.catalogHeader},s.default.createElement("div",{className:Qh.a.headerItem1},"序号"),s.default.createElement("div",{className:Qh.a.headerItem2},"通用名称"),s.default.createElement("div",{className:Qh.a.headerItem3},"属性")),h.map(((e,t)=>s.default.createElement("div",{className:Qh.a.catalogRow,key:t},s.default.createElement("div",{className:Qh.a.catalogItem1},t+1),s.default.createElement("div",{className:Qh.a.catalogItem2},e.name),s.default.createElement("div",{className:Qh.a.catalogItem3},e.property))))),s.default.createElement("div",{className:Qh.a.catalogPaddingBottom})),s.default.createElement("div",{className:Qh.a.mainContainer,style:{display:f?"none":""}},s.default.createElement("div",{className:Qh.a.title},"疫情购药登记",s.default.createElement("div",{className:Qh.a.close,onClick:m},Nh)),s.default.createElement("div",{className:Qh.a.highlight},s.default.createElement("div",{className:Qh.a.shield},Oh),r.instruction||"根据疫情防控政策要求，需登记信息才能购买该药品。信息将被严格保密，请放心填写"),s.default.createElement("div",{className:Qh.a.blockContainer+" scrollable"},r.template.map(((e,t)=>s.default.createElement("div",{className:Qh.a.block,key:t},e.map((e=>{const{key:t,title:a,placeholder:o,options:n,ext:i}=e,l=r.info[t],c=r.info[_h.ID_SNAPSHOT],m=r.info[_h.MOBILE_ID],{defaultTemperature:h}=r;switch(t){case _h.MOBILE:return s.default.createElement(cf,{key:t,text:a,value:l,mobileId:m,placeholder:o,setValue:e=>g(t,e),clearMobile:b,ref:p});case _h.NAME:return s.default.createElement(uf,{key:t,text:a,value:l,placeholder:o,setValue:e=>_(t,e),setIdInfo:e=>y(e),snapshotId:c,ref:d});case _h.ID:return s.default.createElement(mf,{key:t,text:a,value:l,placeholder:o,setValue:e=>_(t,e),setIdInfo:e=>y(e),snapshotId:c,ref:u});case _h.TEMPERATURE:return s.default.createElement(hf,{key:t,text:a,value:l,defaultTemperature:l||h,min:+i.min,max:+i.max,interval:+i.interval,placeholder:o,setValue:e=>g(t,e)});case _h.OCCUPATION:return s.default.createElement(ff,{key:t,text:a,value:l,options:n,placeholder:o,setValue:e=>g(t,e)});case _h.SYMPTOM:return s.default.createElement(gf,{key:t,text:a,value:l,options:n,setValue:e=>g(t,e)});case _h.RISK_TRAVEL:return s.default.createElement(_f,{key:t,text:a,value:l,options:n,setValue:e=>g(t,e)});case _h.CONFIRM:return s.default.createElement(yf,{key:t,value:l,text:a,setValue:e=>g(t,e)});case _h.CATALOG:return s.default.createElement(bf,{key:t,text:a,onClick:v});case _h.SELF_USE:return s.default.createElement(vf,{key:t,text:a,value:l,options:n,setValue:e=>g(t,e)});default:return null}})),s.default.createElement("div",{className:Qh.a.blockMargin}))))),s.default.createElement("div",{className:Qh.a.bottomBtnContainer},s.default.createElement("div",{className:Qh.a.bottomBtn,onClick:async()=>{if(!l&&(()=>{const e=uh()(r.template).map((e=>e.key)),t=r.info[_h.NAME],a=r.info[_h.ID],o=r.info[_h.ID_SNAPSHOT],n=r.info[_h.MOBILE],s=r.info[_h.MOBILE_ID],i=r.info[_h.OCCUPATION],l=r.info[_h.TEMPERATURE],c=r.info[_h.SYMPTOM],m=r.info[_h.RISK_TRAVEL],h=r.info[_h.CONFIRM];if(!o){var f,g;if(!t)return Object(kt.a)("请填写用药人"),null==d||null===(f=d.current)||void 0===f||f.focus(),!1;if(!a)return Object(kt.a)("请填写身份证号"),null==u||null===(g=u.current)||void 0===g||g.focus(),!1}var _;return s||n?e.includes(_h.OCCUPATION)&&!i?(Object(kt.a)("请选择从事行业"),!1):l?c?null==m?(Object(kt.a)("请选择近期是否去过风险地区"),!1):!(e.includes(_h.CONFIRM)&&!h&&(Object(kt.a)("请勾选承诺"),1)):(Object(kt.a)("请选择症状"),!1):(Object(kt.a)("请选择体温"),!1):(Object(kt.a)("请填写联系电话"),null==p||null===(_=p.current)||void 0===_||_.focus(),!1)})())try{c(!0);const e=await Ph(n()(n()({},r.info),{},{provinceId:a,cityId:o}))||{},s=r.info[_h.NAME],i=r.info[_h.ID];t({name:s,id:i,snapshotId:e}),m()}catch(i){var e,s;const t=null==i||null===(e=i.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.error_msg;Object(kt.a)(t||"网络不稳定，请稍后重试")}finally{c(!1)}}},"完成"),s.default.createElement("div",{className:Qh.a.bottomBtnPadding})),l&&s.default.createElement("div",{className:Qh.a.mask})))}function If({onHide:e,onTemperatureOnlySaved:t,updateDrugInfo:a,snapshotId:o,provinceId:r,cityId:i,defaultMobile:l="",temperatureOnly:c=!1,isTemperatureSaved:d}){const[u,p]=Object(s.useState)(null);Object(s.useEffect)((()=>{(async()=>{Object(ha.b)();try{const e=await(async e=>{const t=new Sh({serverTime:Date.now()});t.initRiskController();const a=await t.getRiskControlInfoSync(),{snapshotId:o,provinceId:r,cityId:n}=e,s=await Ch({method:"POST",url:"/api/barbera/biz/info/epidemic/drug/latest",data:{snapshot_id:o,province_id:r,city_id:n,anti_content:a}});if(!(null==s?void 0:s.success))throw new Error;const{epidemic_drug_info_page_template:i,epidemic_drug_info:l,epidemic_drug_info_page_instruction:c}=s.result;return l[_h.CONFIRM]=!0,{template:i,info:l,instruction:c}})({snapshotId:o,provinceId:r,cityId:i});e.info[_h.MOBILE]||(e.info[_h.MOBILE]=l),d||(e.defaultTemperature=e.info[_h.TEMPERATURE],e.info[_h.TEMPERATURE]=null),p(e)}catch(n){var t,a;const o=null==n||null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error_msg;Object(kt.a)(o||"网络不稳定，请稍后重试"),e()}finally{Object(ha.a)()}})()}),[]);const m=async a=>{const o=a&&a.replace("°C","");try{const e=await Ph(n()(n()({},u.info),{},{temperature:+o}));t({snapshotId:e})}catch(r){Object(kt.a)("保存体温不成功，请稍后重试"),e()}};if(!u)return null;if(c){const t=uh()(u.template).find((e=>e.key===_h.TEMPERATURE)),{ext:a}=t||{},{min:o,max:r,interval:n}=a||{},i=u.info[_h.TEMPERATURE]||(null==u?void 0:u.defaultTemperature),l=nf(o,r,n);return s.default.createElement(sf,{title:"根据疫情防控政策要求，需更新体温",showPicker:!0,toggleShowPicker:e,onSelect:m,selectedItem:i?(+i).toFixed(1)+"°C":"37.0°C",pickerList:l})}return s.default.createElement(gh,{onHide:e},s.default.createElement(kf,{purchaseData:u,updateDrugInfo:a,provinceId:r,cityId:i}))}var wf=a("v796"),Sf=a.n(wf);var Ef=e=>{const t=!(!e.idCardName||!e.idCardNo),a=t?"修改":"填写",o=e.overrideStyles,{authTipColor:r}=e,n=!t||o,i=dt()({[Sf.a.btn]:n,[Sf.a.grayBtn]:!n});return s.default.createElement("div",{className:Sf.a.idModifyHint,"data-active":t?"cell-white":null},s.default.createElement("div",{className:Sf.a.border},s.default.createElement("div",{className:Sf.a.line})),s.default.createElement("div",{className:Sf.a.icon},s.default.createElement("svg",{t:"1607326009875",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3768"},s.default.createElement("path",{d:"M909.4 114.8c31.2 0 56.6 25.4 56.6 56.6v681.3c0 31.2-25.4 56.6-56.6 56.6H114.6c-31.2 0-56.6-25.4-56.6-56.6V171.3c0-31.2 25.4-56.6 56.6-56.6h794.8m0-56.9H114.6C51.8 57.8 1 108.6 1 171.3v681.3c0 62.7 50.8 113.6 113.6 113.6h794.9c62.7 0 113.6-50.8 113.6-113.6V171.3c-0.1-62.7-50.9-113.5-113.7-113.5z","p-id":"3769"}),s.default.createElement("path",{d:"M858.3 398.6H688c-15.7 0-28.5-12.8-28.5-28.5s12.8-28.5 28.5-28.5h170.3c15.7 0 28.5 12.8 28.5 28.5s-12.7 28.5-28.5 28.5zM858.3 568.9H744.8c-15.7 0-28.5-12.8-28.5-28.5s12.8-28.5 28.5-28.5h113.6c15.7 0 28.5 12.8 28.5 28.5s-12.8 28.5-28.6 28.5z","p-id":"3770"}),s.default.createElement("path",{d:"M160.8 798.5c-11.9 0-23.1-4.4-31.7-12.6-11.1-10.6-16.4-26.6-14.1-42.8l3.6-25.9c4.2-30 27.8-62.5 54.9-75.5l158.3-76c3.8-1.8 6.2-4.2 6.7-6.5 0.5-2.4-0.8-5.7-3.7-9l-13.3-15.4c-27.4-31.7-48.1-87.4-48.1-129.4v-50.7c0-85.5 68.8-155 153.4-155s153.4 69.6 153.4 155v50.7c0 42.1-20.7 97.7-48.1 129.4l-13.3 15.5c-2.8 3.3-4.2 6.6-3.7 9 0.5 2.3 2.9 4.7 6.7 6.5L680 641.7c27.1 13 50.8 45.5 55 75.5l3.6 25.9c2.3 16.2-3 32.2-14.1 42.8-10 9.6-23.6 14-37.7 12.3h-520c-2 0.2-4 0.3-6 0.3z m12-57.3h508l-2.3-16c-1.6-11.3-13.1-27.2-23.3-32.1L497 617.2c-19.9-9.6-33.7-26.4-37.9-46.3-4.2-19.9 1.8-41 16.4-57.9l13.3-15.5c18.2-21.1 34.2-64.2 34.2-92.2v-50.7c0-54.1-43.2-98-96.4-98s-96.4 44-96.4 98v50.7c0 28 16 71.1 34.2 92.2L378 513c14.5 16.8 20.5 37.9 16.4 57.8-4.1 19.8-17.9 36.7-37.9 46.3l-158.3 76c-10.1 4.8-21.6 20.7-23.2 32.1l-2.2 16z","p-id":"3771"}))),s.default.createElement("div",{className:Sf.a.text},s.default.createElement("div",{className:Sf.a.title},t?s.default.createElement("div",null,s.default.createElement("span",{className:Sf.a.name},e.idCardName),"，",s.default.createElement("span",{className:Sf.a.number},e.idCardNo)):e.authTitle),s.default.createElement("div",{className:Sf.a.desc,style:{color:r||void 0}},e.desc)),!e.disableEdit&&s.default.createElement("div",{className:Sf.a.action},s.default.createElement("div",{className:i,"data-active":n?"ghost-red":null,onClick:e.onClick},a)))};const Cf=sd.getInstance();function Pf(e){const t=Object(s.useRef)();return t.current=document.createElement("div"),t.current.setAttribute("id","purchaseInfoPopup"),t.current.style.position="fixed",t.current.style.top=0,t.current.style.right=0,t.current.style.bottom=0,t.current.style.left=0,t.current.style.zIndex=10023,Object(s.useEffect)((()=>(document.body.appendChild(t.current),()=>{document.body.removeChild(t.current)})),[]),s.default.createPortal(s.default.createElement(If,{updateDrugInfo:e.updateDrugInfo,snapshotId:e.snapshotId,provinceId:e.provinceId,cityId:e.cityId,defaultMobile:e.defaultMobile,onHide:e.onHide,temperatureOnly:e.temperatureOnly,onTemperatureOnlySaved:e.onTemperatureOnlySaved,isTemperatureSaved:e.isTemperatureSaved}),t.current)}var Nf=function(e){const t=e.ocData||{},a=t.goodsInfo||{},o=t.idCardInfo||{},r=t.selectedChannel||{},n=t.addressInfo,[i,l]=Object(s.useState)(!1),[c,d]=Object(s.useState)(!1),[u,p]=Object(s.useState)(o),[m,h]=Object(s.useState)(!1);if(Object(s.useEffect)((()=>{Cf.initShowIdcardForm((()=>l(!0))),Cf.initShowPurchaseInfo((()=>d(!0))),Cf.initShowTemperaturePicker((()=>{h(!0),d(!0)}))}),[]),!a.needId)return null;const f=()=>{d(!1),h(!1)},g={scene:o.sceneCode||"ORDER",ext_map:o.extendMap},_={title:o.authMainTitleTip||"填写实名信息",formHint:o.authTitleTip,idHint:o.authIdTip,nameHint:o.authNameTip};return s.default.createElement(s.default.Fragment,null,!([3,4].includes(+a.goodsType)&&r.paymentType===jr.FriendPay)&&s.default.createElement(Ef,{onClick:o.isDrugInfo?()=>d(!0):()=>l(!0),authTitle:o.authTitle,authTipColor:o.authTipColor,idCardName:u.idCardName,idCardNo:u.idCardNo,desc:o.authTip,disableEdit:o.hideEditBtn||(o.isDrugInfo||o.hideEditBtnAfterOrder)&&t.orderSn}),i&&!o.isDrugInfo&&s.default.createElement(ch,{extraParams:g,strongAuth:!0,idCardFormVisible:i,onClickClose:()=>l(!1),labels:_,submitSuccessCallback:({success:e,result:t,realName:a,idCardNo:o})=>{Cf.ocData.idCardInfo.idCardName=a,Cf.ocData.idCardInfo.idCardNo=o,p({idCardName:a,idCardNo:o})},getAntiContent:vr,disableRec:!0}),o.isDrugInfo&&c&&s.default.createElement(Pf,{updateDrugInfo:({name:e,id:t,snapshotId:a})=>{setTimeout((()=>{Cf.ocData.idCardInfo.idCardName=e,Cf.ocData.idCardInfo.idCardNo=t,Cf.ocData.idCardInfo.drugInfoSnapshotId=a,Cf.ocData.idCardInfo.isTemperatureSaved=!0,p({idCardName:e,idCardNo:t})}),400)},snapshotId:Cf.ocData.drugInfoSnapshotId,provinceId:n.provinceId,cityId:n.cityId,defaultMobile:n&&n.mobile,onHide:()=>{m?f():d(!1)},temperatureOnly:m,onTemperatureOnlySaved:({snapshotId:e})=>{f(),Cf.ocData.idCardInfo.drugInfoSnapshotId=e,Cf.ocData.idCardInfo.isTemperatureSaved=!0,Cf.pay()},isTemperatureSaved:Cf.ocData.idCardInfo.isTemperatureSaved}))},Of=a("v5F4"),Df=a.n(Of);function xf({templateList:e,selectDeliveryItem:t}){const{glide:a}=Object(s.useContext)(hh),o=ho()((async e=>{e.selected||(Object(ha.b)(),await t(e),Object(ha.a)()),a()}),300,{leading:!0,trailing:!1});return s.default.createElement("div",{className:Df.a.deliveryList},s.default.createElement("div",{className:Df.a.title},"选择送装服务",s.default.createElement("div",{className:Df.a.closeBtn,onClick:a})),(e||[]).map(((e,t)=>s.default.createElement("div",{key:t,className:`${Df.a.deliveryItem} ${e.selected?Df.a.selected:""}`,onClick:()=>o(e)},e.srvCopyWrite))))}let Tf=null;function jf({onHide:e,templateList:t,selectDeliveryItem:a}){const o=Object(s.useRef)();return o.current=(()=>{if(!Tf){const e=document.createElement("div");e.setAttribute("id","DeliveryList"),e.style.position="fixed",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.left=0,e.style.zIndex=10023,Tf=e}return Tf})(),Object(s.useEffect)((()=>(document.body.appendChild(o.current),()=>{document.body.removeChild(o.current)})),[]),s.default.createPortal(s.default.createElement(gh,{onHide:e},s.default.createElement(xf,{templateList:t,selectDeliveryItem:a})),o.current)}var Af=function(e){const[t,a]=Object(s.useState)(!1),{deliveryInfo:o}=e.ocData||{};if(!o)return null;if(2==+o.clickType)return null;const{displayContent:r,displayTitle:n,templateList:i}=o;return r&&n?s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{"data-active":"cell-white",onClick:()=>a(!0)},s.default.createElement("div",{className:Df.a.deliveryStripe},s.default.createElement("div",{className:Df.a.deliverySvg},s.default.createElement(Ut,null)),s.default.createElement("span",{className:Df.a.deliveryContent},r),s.default.createElement("div",{className:Df.a.arrow},s.default.createElement(Ht,null)))),t&&s.default.createElement(jf,{onHide:()=>a(!1),templateList:i,selectDeliveryItem:e.selectDeliveryItem})):null},Lf=a("gWL1"),Rf=a.n(Lf);function Mf({recordList:e,selectRecord:t}){return s.default.createElement(s.default.Fragment,null,e&&e.length>0&&s.default.createElement("div",{className:Rf.a.bubbleContainer},s.default.createElement("span",{className:Rf.a.recCardTriangle}),s.default.createElement("div",{className:Rf.a.recList},e.slice(0,3).map(((e,a)=>s.default.createElement("div",{className:Rf.a.recCardItem,key:a,onTouchEnd:()=>t(a)},e.separatedMobile?s.default.createElement(s.default.Fragment,null,e.separatedMobile.map(((e,t)=>s.default.createElement("span",{key:e+"_"+t},e)))):s.default.createElement(s.default.Fragment,null,e.name)))))))}const Bf=Kc.getInstance();var Ff=function({isFocused:e,recordList:t,setFocused:a,updateMobileInputNumber:o}){return e?s.default.createElement(Mf,{selectRecord:e=>{const r=t[e];Bf.doInputBlur(),Bf.updateMobileInfo(r.mobile,r.name||""),o(r.mobile),a(!1)},recordList:t}):null};function zf(e){return e=(e=(e=(e||"").toString()).replace(/(\+86)/g,"")).replace(/[^\d]*/g,"")}var Hf=a("7MjH"),Vf=a.n(Hf);var Uf=function({mobileInputNumber:e,isFocused:t,isMobile:a,updateRecordByContact:o}){const[r,n]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{const e=Object(O.a)();Object(D.c)(e.version,"3.17.0")>=0&&n(!0)}),[]),e&&t||!r||!a?null:s.default.createElement("div",{className:Vf.a.contact,onClick:async e=>{e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();try{const e=await Object(ae.j)();e&&o(e)}catch(t){}}})},Wf=a("c3b3"),Gf=a.n(Wf);const qf=Kc.getInstance(),Qf={maxLength:30};var Yf=function({ocData:e,setFocused:t,isFocused:a,mobileInputNumber:o,updateMobileInputNumber:r}){const n=e.virtualReceiveMethodInfo;if(!n)return null;const i=!!e.orderSn,l=n&&n.isMobile,{label:c,placeholder:d,icon:u}=n,p=l?null:Qf;return s.default.createElement("div",{className:Gf.a.mainArea},u&&s.default.createElement(Wa.a,{className:Gf.a.icon,src:u}),s.default.createElement("span",null,c,"："),s.default.createElement("input",w()({type:l?"tel":"text",ref:e=>{qf.$mobileNumberInput=e},placeholder:d,value:o,onChange:()=>{const e=(qf.$mobileNumberInput.value||"").replace(/ +/g,"");r(e)},onFocus:()=>{i?qf.doInputBlur():t(!0)},onBlur:()=>{qf.updateMobileInfo(o,""),t(!1)}},p)),o&&a&&s.default.createElement("div",{className:Gf.a.mobileClear,onTouchEnd:e=>{e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),qf.doInputFocus(),r("")}}),s.default.createElement(Uf,{mobileInputNumber:o,isFocused:a,isMobile:l,updateRecordByContact:({mobile:e,name:a})=>{(e=zf(e))&&(qf.updateMobileInfo(e,a||""),t(!1),r(e))}}))};const Jf={Mobile:/(^1)\d{10}$/,GasSinopec:/^\d{16}(\d{3})?$/,QQ:/^[1-9][0-9]{4,9}$/,Mail:/^([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+.[a-zA-Z]{2,4}$/,Phone:/((^1)\d{10}$)|(^(886|852|853)\d{7,11}$)/};function Xf(e){e=zf(e);const t=/^(1\d{2})(\d{4})(\d{4})$/.exec(e);return t&&t[1]&&t[2]&&t[3]?[t[1],t[2],t[3]]:null}var Kf=a("xq+1"),$f=a.n(Kf);const Zf=sd.getInstance(),eg=Kc.getInstance();var tg=function({ocData:e}){const t=e.virtualReceiveMethodInfo,[a,o]=Object(s.useState)([]),[r,n]=Object(s.useState)(!1),[i,l]=Object(s.useState)("");return Object(s.useEffect)((()=>{const{value:e,validateRules:a}=t;e&&a&&a.length>0&&a.some((t=>new RegExp(t).test(e)))&&(eg.updateMobileInfo(e,""),l(e));const r=function(e){return{1:!1,2:!0}[e]||!1}(Tt()(Zf.ocData,"morganType"));if(r||"USER_CONTACT_MOBILE"!==t.autoCompleteType){if(!r&&"USER_CHARGE_MOBILE"===t.autoCompleteType){(async()=>{const e=await Oa({method:Na.GET,url:"api/virginia/get_charge_history"}).then((e=>(e.records||[]).map((e=>({separatedMobile:Xf(e.mobile),mobile:zf(e.mobile),name:e.name||""}))).slice(0,3))).catch((()=>{}));e&&o(e)})()}}else{(async()=>{const e=await Oa({method:Na.POST,url:"/api/origenes/mobile_distinct_list"}).then((e=>(e||[]).filter((e=>Jf.Phone.test(e))).map((e=>({separatedMobile:Xf(e),mobile:zf(e),name:""}))).slice(0,3))).catch((()=>{}));e&&o(e)})()}}),[]),t?s.default.createElement("div",{className:$f.a.virtualAddress},s.default.createElement(Yf,{recordList:a,mobileInputNumber:i,ocData:e,isFocused:r,setFocused:n,updateMobileInputNumber:l}),s.default.createElement(Ff,{isFocused:r,recordList:a,setFocused:n,updateMobileInputNumber:l})):null},ag=a("0yKJ"),og=a.n(ag);var rg,ng=function(e){const t=e.addressInfo,a=e.ocData||{},o={page_el_sn:4259115,op:"impr",goods_id:e.goods.goodsID};if(a.receiveMethodNone)return null;const r=!!Tt()(a,"virtualReceiveMethodInfo");return s.default.createElement(Ra.a,{trackingInfo:o},s.default.createElement("div",{className:"oc-address "+og.a.address,onClick:e=>{e.stopPropagation()}},r&&s.default.createElement(tg,{ocData:a}),!r&&s.default.createElement(s.default.Fragment,null,s.default.createElement(qm,{addressInfo:t,updateAddressInfo:e.updateAddressInfo,onClickPreCheck:e.onClickPreCheck}),s.default.createElement(em,{editAddress:()=>{Ca({page_el_sn:4259115,op:"click",goods_id:e.goods.goodsID},(()=>{e.onClickPreCheck?e.onClickPreCheck()&&ud(e.ocData):ud(e.ocData)}))},addressInfo:t})),s.default.createElement(Af,{ocData:a,selectDeliveryItem:e.selectDeliveryItem}),s.default.createElement(Nf,{ocData:a}),!r&&e.hasAddressLine&&s.default.createElement("div",{className:og.a.addressLine}),s.default.createElement("div",{className:og.a.bottomline})))},sg=a("x7Ie"),ig=a.n(sg);const lg=sd.getInstance();let cg=(rg=class extends s.default.Component{constructor(...e){var t;super(...e),t=this,this.normalSkuRef=s.default.createRef(),this.skuBgRef=s.default.createRef(),this.isShow=!1,this.confirmSkuCallBack=async function(e){const a=t.getGoodsNumber(),o=t.getSelectedSkuId(),r=await lg.refresh({goods_number:a,sku_id:o,front_action:Tc});r&&r.success&&t.props.setSkuInfo({selectedSkuID:+o,goodsNumber:a}),t.hide()}}async show(e){e&&"function"==typeof e.setStateCallback&&this.normalSkuRef.current.skuRef.current.setCustomState(e.setStateCallback);const{needShow:t}=this.normalSkuRef.current.prepare(e);if(t){if(this.isShow)return;this.skuBgRef.current.style.display="block",setTimeout((()=>{this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",this.normalSkuRef.current.enter(),_a(),setTimeout((()=>{this.isShow=!0}),200)}),1)}return!0}async hide(e){this.isShow&&(ba(),this.props.onHide&&await this.props.onHide(e),this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",this.normalSkuRef.current.exit(),setTimeout((()=>{this.isShow=!1,this.skuBgRef.current.style.display="none"}),+this.props.delay||200))}getSelectedSkuId(){return this.normalSkuRef.current.skuRef.current.state.selectedSkuID}getGoodsNumber(){return this.normalSkuRef.current.skuRef.current.state.goodsNumber||1}selectSkuId({skuId:e,goodsNumber:t=1}){return this.normalSkuRef.current.skuRef.current.selectSkuId({skuId:e,goodsNumber:t})}setGoodsNumber(e){return this.normalSkuRef.current.skuRef.current.setGoodsNumber(e)}render(){var e=this;let{goods:t}=this.props;const{groupOrderId:a,usePddNativePhoto:o,isOptSoldOut:r}=this.props;return s.default.createElement("div",{ref:this.skuBgRef,className:dt()(ig.a.ocSkuSelectorBg,"sku-plus1"),onClick:async function(){e.hide()}},s.default.createElement(na,{groupOrderId:a,ref:this.normalSkuRef,goods:t,group:this.props.group,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,skuDirectOrder:!1,usePddNativePhoto:o,isOptSoldOut:r,onClose:this.hide,hideSkuBottomTip:!0},s.default.createElement(fr,null)))}},ee()(rg.prototype,"show",[jt.a],Object.getOwnPropertyDescriptor(rg.prototype,"show"),rg.prototype),ee()(rg.prototype,"hide",[jt.a],Object.getOwnPropertyDescriptor(rg.prototype,"hide"),rg.prototype),ee()(rg.prototype,"getSelectedSkuId",[jt.a],Object.getOwnPropertyDescriptor(rg.prototype,"getSelectedSkuId"),rg.prototype),ee()(rg.prototype,"getGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(rg.prototype,"getGoodsNumber"),rg.prototype),ee()(rg.prototype,"selectSkuId",[jt.a],Object.getOwnPropertyDescriptor(rg.prototype,"selectSkuId"),rg.prototype),ee()(rg.prototype,"setGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(rg.prototype,"setGoodsNumber"),rg.prototype),rg);var dg=a("cBUB"),ug=a.n(dg);const pg=sd.getInstance(),mg=Xd.getInstance();var hg,fg=e=>{const t=e.ocData;if(!t)return null;const a=e.goods&&e.goods.skuNewPricePrefix,o=Tt()(t,"goodsInfo.totalPrice"),r=Tt()(t,"promotionInfo"),{isNewPriceArea:n,totalDiscountDisplay:i}=r||{};if(n)return i?s.default.createElement("span",{className:ug.a.prefixPrice},a,"¥",o):null;const l=(Tt()(e,"ocData.promotionInfo.totalPromotionsConsult")||{}).categoryDisplay,c=Tt()(e,"ocData.promotionInfo.shopPromotion.promotionStatus"),d=pg.ocData.goodsId,u=Tt()(e,"ocData.promotionInfo.totalPromotionClickable")&&Tr()(l),p=async()=>{Object(M.b)({page_el_sn:"4503302",op:"click",goods_id:d});const t=Tt()(e,"ocData.promotionInfo.shopPromotion.promotionIdentityVo.extension.batch_sn")||Tt()(e,"ocData.promotionInfo.optionalShopsPromotion.batchSn");Oa({method:"POST",url:"api/zenon/mall/like_and_receive_coupon",data:{mall_id:Tt()(e,"ocData.promotionInfo.shopPromotion.mallId"),like_from:101003,batch_sn:t,merchant_tag:50,base_risk_info:{anti_content:await vr()}}}).then((()=>{pg.needReload=!0,wa("领券成功，已关注店铺"),ec({groupId:"20203",customTags:{event:"receivePromotion"}}),pg.refresh({front_action:Dc})})).catch((e=>{const{response:t}=e,a=(t&&t.data||{}).error_msg||"领取失败~";wa(a)}))},m=async()=>{if(!u)return;try{await mg.autoTakeMerchantCoupon()}catch(o){const{response:e}=o||{},{data:t}=e||{},a=Tt()(t,"error_toast")||"领取优惠失败，请重试";wa(a)}const e=await mg.fetchPromotionList(),{togglePromotionPopupVisible:t,setPromotionLists:a}=mg||{};e&&(ec({groupId:"20203",customTags:{event:"showPromotionPopup"}}),a&&a(e),setTimeout((()=>{t&&t(!0)}),0))},h=!!Tt()(e,"ocData.promotionInfo.optionalShopsPromotion.batchSn"),f=c===Pl||h;return s.default.createElement(s.default.Fragment,null,i&&i.length>0&&i.map(((e,t)=>{const a=dt()(ug.a.promotion,ug.a["promotion"+e.display_type]),o=f?{page_el_sn:"4503302",op:"impr",goods_id:d}:{};return s.default.createElement(Ra.a,{trackingInfo:o,key:t},s.default.createElement("div",{className:a,"data-active":f?"red":"",onClick:f?p:m,style:{height:e.height?e.height/100+"rem":null,lineHeight:e.height?e.height/100+"rem":null,color:e.font_color,backgroundColor:e.bg_color}},e.text,u&&s.default.createElement(Ht,null)))})))},gg=(a("9ZFI"),a("G7xb")),_g=a.n(gg);const yg=sd.getInstance(),bg=Xd.getInstance();let vg=!1;"undefined"!=typeof window&&(vg=Object(O.a)().isWeChatMiniProgram);const kg={free:_g.a.skuSpecValue,selected:dt()(_g.a.skuSpecValue,_g.a.skuSpecValueSelected),disable:dt()(_g.a.skuSpecValue,_g.a.skuSpecValueDisable)},Ig=1e5;let wg=(hg=class extends s.default.PureComponent{constructor(e){super(e),this.deliverRef=s.default.createRef(),this.skuIphoneRef=s.default.createRef(),this.skuRef=s.default.createRef(),this.ocSkuRef=s.default.createRef(),this.isPaying=!1,this.isShowingRecycleHighlayer=void 0,this.getSkuRef=()=>this.skuSelectorBodyRef;const{skuTypeValues:t,typeHashToSkuID:a,currentSelect:o,skuInfos:r,originButtonStatus:n}=this.buildSkuData(e.goods.skus);this.state={originButtonStatus:n,selectedSkuID:null,goodsNumber:1,skuInfos:r,currentSelect:o,skuTypeValues:t,typeHashToSkuID:a,selectedHomeIns:{},selectedSendWays:{},oldForNewSelected:{},promotionDesc:"",showSkuSelectorPopup:!1,styleStatus:0}}async componentDidMount(){const e=Object.keys(this.state.skuInfos).filter((e=>this.state.skuInfos[e].quantity>0));if(1===e.length)this.selectSkuId({skuId:e[0]});else{var t=!0,a=!1,o=void 0;try{for(var r,n=this.state.skuTypeValues[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){const e=r.value;if(1===e.values.length){const{type:t}=e;await this.selectOneValue(t,e.values[0])}}}catch(s){a=!0,o=s}finally{try{t||null==n.return||n.return()}finally{if(a)throw o}}}}buildSkuData(e){const t=[],a={},o={},r={};e.forEach((e=>{const{specs:n,skuID:s}=e;r[s]=e;const i={};n.forEach((e=>{const{spec_key:a,spec_value:r}=e;i[a]=r;const n=t.filter((e=>e.type===a));if(n&&n[0]){const{values:e}=n[0];!e.includes(r)&&e.push(r)}else o[a]=null,t.push({type:a,values:[r]})})),a[JSON.stringify(i)]=s}));return{originButtonStatus:this.getButtonStatus(o),skuTypeValues:t,typeHashToSkuID:a,currentSelect:o,skuInfos:r}}checkHas(e){const{skus:t}=this.props.goods;var a=!0,o=!1,r=void 0;try{for(var n,s=t[Symbol.iterator]();!(a=(n=s.next()).done);a=!0){const t=n.value;if(t.quantity<=0)continue;const a={},{specs:o}=t;o.forEach((e=>{const{spec_key:t,spec_value:o}=e;a[t]=o}));let r=!0;for(const n in e)e[n]&&a[n]!==e[n]&&(r=!1);if(r)return t.skuID}}catch(i){o=!0,r=i}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return!1}getButtonStatus(e){let t=e||this.state.currentSelect;const{skus:a}=this.props.goods,o={};return a.forEach((e=>{const{specs:a}=e;a.forEach((e=>{const{spec_key:a,spec_value:r}=e,s=n()(n()({},t),{},{[a]:r}),i=this.checkHas(s);o[a]=n()(n()({},o[a]),{},{[r]:i})}))})),o}async selectSkuId({skuId:e,goodsNumber:t=1}){const{goods:a}=this.props;if(1===(a.skus||[]).length&&!Tt()(a,"skus[0].specs.length")&&e)return void this.setState({selectedSkuID:+e,goodsNumber:t});const{typeHashToSkuID:o}=this.state;for(const r in o)if(o[r]===+e){const e=JSON.parse(r);for(const t in e)await this.selectOneValue(t,e[t],!0);+t>0&&this.setState({goodsNumber:t})}}setGoodsNumber(e){this.setState({goodsNumber:e})}resetSkuId(){const e={};(this.props.goods.skus||[]).forEach((t=>{const{specs:a}=t;a.forEach((t=>{const{spec_key:a}=t;e[a]=null}))})),this.setState({currentSelect:e,selectedSkuID:null})}checkQuantityAsync(e){this.isCheckQuantityAsync||(this.isCheckQuantityAsync=!0,Oa({method:"POST",url:"api/oak/quantity/check",data:{goods_id:this.props.goods.goodsID,sku_id:e,mall_id:this.props.goods.mallID,detail_id:Tt()(this.props.goods,"activity.detailID"),select_quantity:+this.state.goodsNumber,hostname:location.hostname}}).then((t=>{if(t){const{next_quantity:a}=t,o=this.state.skuInfos[e];o.isQualityCheckEnd=0===t.has_quantity,o.defaultQuantity=a,this.setState({skuInfos:this.state.skuInfos},this.amendLimitQuantity)}this.isCheckQuantityAsync=!1})).catch((()=>{this.isCheckQuantityAsync=!1})))}getLimitGoodsNumber(){const e=this.state.selectedSkuID;let t=Ig;if(e){const a=this.state.skuInfos[e],{quantity:o,staticLimitQuantity:r,defaultQuantity:n}=a;if(this.props.goods.checkQuantity&&n){const o=+r||1;if(a.isQualityCheckEnd)t=Math.min(o,n);else{const{goodsNumber:a}=this.state;o>n&&a>=n&&this.checkQuantityAsync(e),t=Math.min(o,n)}}else t=Math.min(+r,+o)||1}else t=Ig;return+t<1&&(t=1),t}amendLimitQuantity(){const e=this.getLimitGoodsNumber(),{goodsNumber:t,selectedSkuID:a}=this.state;if(t>e)if(a&&this.props.goods.checkQuantity){const o=this.state.skuInfos[a],{staticLimitQuantity:r,defaultQuantity:n}=o;(o.isQualityCheckEnd||r<n)&&this.updateAmendLimitQuantityGoodsNumber(e,!0),+t>1e3&&1e3==+e&&this.updateAmendLimitQuantityGoodsNumber(e)}else this.updateAmendLimitQuantityGoodsNumber(e,!0);else t<1&&this.updateAmendLimitQuantityGoodsNumber(1)}updateAmendLimitQuantityGoodsNumber(e,t){const{selectedSkuID:a}=this.state;a||this.setState({goodsNumber:e},(()=>{t&&wa(`当前${a?"款式":"商品"}最多可拼${e}件`),this.state.selectedSkuID&&yg.refresh({goods_number:e,front_action:Oc})}))}handleHomeInsClick(e){this.setState({selectedHomeIns:e})}getSelectedSkuID(e,t,a=!1,o){const{isOptSoldOut:r}=this.props,n=Dt()(this.state.currentSelect);if(n[e]!==t||a?n[e]=t:n[e]=null,r&&0===o&&!this.checkHas(n)){for(const t in n)t!==e&&(n[t]=null);return}return this.state.typeHashToSkuID[JSON.stringify(n)]}async selectOneValue(e,t,a=!1,o=-1){const{isOptSoldOut:r}=this.props,n=Dt()(this.state.currentSelect);if(n[e]!==t||a?n[e]=t:n[e]=null,r&&0===o&&!this.checkHas(n))for(const i in n)i!==e&&(n[i]=null);const s=this.state.typeHashToSkuID[JSON.stringify(n)];if(this.props.selectOneValueCb){if(!(await this.props.selectOneValueCb({selectedSkuID:s,type:e,value:t,force:a})))return!1}return this.setState({currentSelect:n,selectedSkuID:s,selectedHomeIns:{}},(()=>{this.amendLimitQuantity()})),!0}fixInputBug(){const e=Object(O.a)();e.system===D.b.IOS&&Object(D.c)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}setCustomState(e){this.setState(e)}show(e){const{goods:t}=this.props,{preventAutoConfirm:a}=e;if(1===t.skus.length&&!Tt()(t,"skus[0].specs.length")){const e=t.skus[0].skuID;if(this.setState({selectedSkuID:e,selectedHomeIns:{}},(()=>{a||(Ea.hide(),this.confirmSku())})),!a)return}if(Tt()(e,"skuID")){const{goodsNumber:t}=e;this.setState({goodsNumber:Number(t)||1},(()=>{this.selectSkuId({skuId:e.skuID,goodsNumber:Number(t)||1})}))}}setScroll(){Object(ft.a)(this.skuSelectorBodyRef)}goodsNumberBlur(){this.fixInputBug();const e=Number(this.state.goodsNumber)||1;this.setState({goodsNumber:e},this.amendLimitQuantity),this.state.selectedSkuID&&yg.refresh({goods_number:e,front_action:Oc})}goodsNumberChangeClick(e){Object(M.b)({page_el_sn:4259118,op:"click",goods_id:this.props.goods.goodsID,goods_number:e})}goodsNumberChange(e){const t=parseInt(e.target.value,10)||1;this.setState({goodsNumber:t},this.amendLimitQuantity),this.state.selectedSkuID&&yg.refresh({goods_number:t,front_action:Oc}),this.goodsNumberChangeClick()}updateGoodsNumber(e){const t=(parseInt(this.state.goodsNumber,10)||1)+e;this.setState({goodsNumber:t}),this.state.selectedSkuID&&yg.refresh({goods_number:t,front_action:Oc}),this.goodsNumberChangeClick()}reduceGoodsNumber(e){if(e&&e.stopPropagation(),this.isEnableReduce())this.updateGoodsNumber(-1);else{const{selectedSkuID:e}=this.state;if(e&&this.props.ocData){const{goodsInfo:e}=this.props.ocData,t=e.leastNumber;t&&t>1&&wa(`该商品至少购买${t}件`)}}}increaseGoodsNumber(e){if(e&&e.stopPropagation(),this.isEnableIncrease())this.updateGoodsNumber(1);else{const{selectedSkuID:e,goodsNumber:t}=this.state,{goodsInfo:a}=this.props.ocData,{limitMessage:o,limitNumber:r,limitStatus:n}=a||{};if(e&&this.props.ocData)return void wa(o||(n&&t>1e3?"拼单件数超出范围":n?`当前款式最多可拼${t}件`:`当前款式最多可拼${r}件`));const s=this.getLimitGoodsNumber();wa(`当前${e?"款式":"商品"}最多可拼${s}件`)}}async confirmSku(e){if(e&&e.stopPropagation(),!this.checkSpecDesc())return;if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===aa){if(!(+Tt()(this.state.selectedHomeIns,"srv_type")>=0))return void wa("请选择服务")}let t,a;if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ta&&this.deliverRef.current&&(t=this.deliverRef.current.getDeliveryData(),!t))return;if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ea&&this.skuIphoneRef.current){a=this.skuIphoneRef.current.getState()||{};const{mobileID:e,cityID:t}=a;if(!t||!e)return void wa("请先选择入网信息")}const{confirmSkuCallBack:o}=this.props,{selectedSkuID:r}=this.state;o&&o({selectedSkuID:r,goodsNumber:this.state.goodsNumber,skuInfo:this.state.skuInfos[r],skuInfos:this.state.skuInfos,iphoneInfo:a,deliveryData:t,homeInsData:this.state.selectedHomeIns,state:this.state,props:this.props,skuDirectOrder:!0})}checkSpecDesc(){const{selectedSkuID:e}=this.state;if(!e)return wa(this.priceAreaRef.getSpecDesc()),!1;const t=Tt()(this.props.goods,"ui.sku_section.old_for_new");return!(t&&t.title&&!this.state.oldForNewSelected.type)||(wa("请选择"+t.title),!1)}async showRecycleHighlayer(){var e=this;const t=yg.ocData,a=Tt()(t,"goodsInfo.mallId"),o=Tt()(t,"goodsInfo.skuId"),r=this.props.recordId,n=this.ocSkuRef&&this.ocSkuRef.current.offsetHeight,{selectedSkuID:s,goodsNumber:i}=this.state;if(Object(O.a)().isNativePlatform)try{if(this.isShowingRecycleHighlayer)return;this.isShowingRecycleHighlayer=!0,await Object(ae.g)("JSUniPopup","showHighLayer",{model:{url:"/recy_old_device_evaluate_popup.html",data:JSON.stringify({mall_id:a,sku_id:o,record_id:r,height:n}),name:"old_device_evaluate_popup",stat_data:JSON.stringify({page_sn:999999}),block_loading:1,occasion:1,load_timeout:5e3},complete:async function(t,a){if(a.record_id){const t=a.record_id;await yg.render({sku_id:s,goods_number:i,front_action:Pc},t),e.props.setRecordId&&e.props.setRecordId(t)}},on_load_error:(e,t)=>{this.isShowingRecycleHighlayer=!1},on_state_change:(e,t)=>{3===t.current_state&&(this.isShowingRecycleHighlayer=!1)}},"5.6.0","5.6.0")}catch(l){this.isShowingRecycleHighlayer=!1}}async pay(){if(!this.checkSpecDesc())return;const e=yg.ocData;if(!e.orderSn){const t=(({ocData:e={},ocManager:t}={})=>{const a=e.selectedChannel,o=a&&a.paymentType,{goodsInfo:r,addressInfo:n,idCardInfo:s,virtualReceiveMethodInfo:i,receiveMethodNone:l,cellBarVo:c}=e,{protocolV2:d,unSelectedText:u}=c||{};if(d&&!t.isSelectedAgreement)return{errMsg:u||"请先同意协议"};if(!l&&!r.isVirtualGoods&&parseInt(n.addressId||0)<=0&&!n.addressGiftStatus)return t.showEditAddress&&t.showEditAddress(),!1;if(!o)return{errMsg:"操作太快，请重试"};let p="";if(i){if(p=$c.mobileNumber,!p)return{errMsg:"请输入账号"};const{validateRules:e,validateFailedText:t}=i;if(e&&e.length>0&&!e.some((e=>new RegExp(e).test(p)))&&t)return{errMsg:t}}const m=r.needId&&s&&!s.isDrugInfo&&(!s||!s.idCardNo||!s.idCardName)&&!s.skipVerify&&(![3,4].includes(+r.goodsType)||o!==jr.FriendPay),h=s&&s.isDrugInfo&&!s.drugInfoSnapshotId;return m?(t.showIdcardForm&&t.showIdcardForm(),!1):h?(t.showPurchaseInfo&&t.showPurchaseInfo(),!1):s&&s.isDrugInfo&&!s.isTemperatureSaved?(t.showTemperaturePicker&&t.showTemperaturePicker(),!1):{success:!0}})({ocData:e,ocManager:yg});if(t.errMsg)return void wa(t.errMsg);if(!t.success)return}if(this.isPaying)return;const t=(({ocData:e})=>{const t=e.selectedChannel;if((t&&t.paymentType)===jr.CreditCardInstallmentPay&&!Tt()(t,"creditCardVo.recommendCardVo.bindId"))return{success:!1,errMsg:"请添加分期信用卡",shouldShowPaymentList:!0};return{success:!0}})({ocData:e});if(!t.success)return void(t.shouldShowPaymentList&&(this.props.showPaymentList(),setTimeout((()=>{wa(t.errMsg)}),200)));if(this.state.oldForNewSelected&&2===this.state.oldForNewSelected.type&&!this.props.recordId)return void this.showRecycleHighlayer();if(this.isPaying=!0,e.orderSn)return await yg.pay(),void(this.isPaying=!1);const a=Tt()(e,"promotionInfo.shopPromotion"),o=Tt()(e,"promotionInfo.platformPromotion.promotionStatus"),{selectedSkuID:r,goodsNumber:n,skuInfos:s}=this.state;try{if(r!==e.goodsInfo.skuId||n!==e.goodsInfo.goodsNumber)throw new Error(`面板显示skuId=${r}或goodsNumber=${n}和摩根支付skuId=${e.goodsInfo.skuId}或goodsNumber=${e.goodsInfo.goodsNumber}不一致!`);if(o===Cl){const e=await bg.batchAutoTakeCoupon();if(e&&e.notAllSuccess)throw new Error("批量领券未全部成功")}else if(a)await bg.autoTakeMerchantCoupon();else{const e=s[r],t=$a[`${n}-${r}`]&&$a[`${n}-${r}`].batchSn||e&&e.batchSn;t&&(await Ad({batchSn:t}),yg.needReload=!0,await yg.refresh({front_action:Dc}))}}catch(i){return Object(At.c)(new Error("payConfirmSku"),{error_message:(i||{}).message}),this.isPaying=!1,void this.confirmSku()}await yg.pay(),this.isPaying=!1}isEnableIncrease(){const{selectedSkuID:e,goodsNumber:t}=this.state;if(e&&this.props.ocData){const{goodsInfo:e}=this.props.ocData,{limitStatus:a,limitNumber:o}=e||{};return!a&&t<o}const a=+this.getLimitGoodsNumber();if(e&&this.props.goods.checkQuantity){const o=this.state.skuInfos[e],{staticLimitQuantity:r,defaultQuantity:n}=o;return+t>1e3&&!o.isQualityCheckEnd||!((o.isQualityCheckEnd||r<n)&&t>=a)}return t<a}isEnableReduce(){const{selectedSkuID:e,goodsNumber:t}=this.state;if(e&&this.props.ocData){const{goodsInfo:e}=this.props.ocData;return t>e.leastNumber}return t>1}onOldForNewClick(e){this.state.oldForNewSelected.type===e.type?(this.setState({oldForNewSelected:{}}),Object(M.b)({page_el_sn:5881525,op:"click",goods_id:this.props.goods.goodsID})):this.setState({oldForNewSelected:e})}renderSkusElement(){const e=this.getButtonStatus(),{originButtonStatus:t}=this.state,a=this.props.goods.skus.find((e=>e.hotSale))||{},o=((null==a?void 0:a.specs)||[]).map((e=>e.spec_value));let r=-1;const n=this.state.skuTypeValues.map(((a,n)=>{const{type:i,values:l}=a,c=(Object.values(t[i])||[]).reduce(((e,t)=>e+(t?1:0)),0),d=l.map(((a,l)=>{let d=kg.disable,u=()=>{};(e[i]&&e[i][a]||this.props.isOptSoldOut&&0===n&&t[i]&&t[i][a])&&(d=kg.free,u=()=>{this.selectOneValue(i,a,!1,n);const e=this.getSelectedSkuID(i,a,!1,n);if(e){const t=!this.state.selectedSkuID;yg.ocData&&yg.ocData.orderSn&&Object(M.b)({page_el_sn:4358286,op:"click",goods_id:this.props.goods.goodsID,goods_number:this.state.goodsNumber}),yg.refresh({sku_id:e,goods_number:this.state.goodsNumber,front_action:Nc},t)}}),this.state.currentSelect[i]===a&&(d=kg.selected);let p=a;if(1===this.state.skuTypeValues.length){const e=JSON.stringify({[i]:a}),t=this.state.typeHashToSkuID[e],{groupSkuUnitPrice:o,normalSkuUnitPrice:r}=this.state.skuInfos[t],n=+this.props.group.requireNum>1?o:r;n&&(p=`${a}｜${n}`)}return r<0&&c>1&&a===o[n]&&(r=n),s.default.createElement("div",{key:l,className:d,onClick:u},r===n&&a===o[n]&&s.default.createElement("div",{className:dt()(_g.a.hotSale,_g.a.hotSaleIcon)}),p)}));let u=null;const p=Tt()(this.props.goods,"ui.sku_section.size_chart"),m=+Tt()(this.props.goods,"ui.sku_section.size_chart_entry_type");if(1===n&&p){const e={page_el_sn:"648235",op:"impr",goods_id:this.props.goods.goodsID};u=s.default.createElement(Ra.a,{trackingInfo:e},s.default.createElement("span",{className:2===m?_g.a.skuSizeChartRed:"sku-size-chart",onClick:()=>{Object(La.a)(p),Object(M.b)({page_el_sn:"648235",op:"click",goods_id:this.props.goods.goodsID})}},2===m?"尺码详情":"详情"))}const h=Tt()(this.props.goods,"ui.sku_section.size_refer_fit_desc");let f=null;return 1===n&&h&&(f=s.default.createElement("span",{className:_g.a.sizeDesc},h)),s.default.createElement("div",{className:_g.a.skuSpecs,key:n},s.default.createElement("span",{className:_g.a.skuSpecsKey},i,f,u),s.default.createElement("div",{className:_g.a.skuSpecValueList},d))}));if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ea){const{selectedSkuID:e}=this.state;return s.default.createElement(s.default.Fragment,null,n,s.default.createElement(yo,{ref:this.skuIphoneRef,selectedSkuID:e,goodsID:this.props.goods.goodsID,toastSpec:()=>{wa(this.priceAreaRef.getSpecDesc())},getSkuRef:this.getSkuRef}))}if(Tt()(this.props.goods,"ui.sku_section.view_style_v2")===ta){const e=+Tt()(this.props.goods,"ui.sku_section.car_shop.action_type");return s.default.createElement(s.default.Fragment,null,n,s.default.createElement(Vo,{ref:this.deliverRef,goods:this.props.goods,updateSelectedSendWays:e=>{this.setState({selectedSendWays:e})},selectedSendWays:this.state.selectedSendWays,actionType:e}))}const{activity:i}=this.props.goods;if(!(Tt()(this.props.goods,"ui.sku_section.view_style_v2")!==aa||vg||i&&25===i.activityType)){const{selectedSkuID:e,skuInfos:t}=this.state;return s.default.createElement(s.default.Fragment,null,n,s.default.createElement(Uo,{selectedSkuID:e,skuInfos:t,selectedHomeIns:this.state.selectedHomeIns,ref:this.homeRef,goods:this.props.goods,handleHomeInsClick:this.handleHomeInsClick}))}const l=Tt()(this.props.goods,"ui.sku_section.old_for_new");if(l&&l.title){const{title:e,trade_item:t}=l;return s.default.createElement(s.default.Fragment,null,n,s.default.createElement("div",{className:_g.a.skuSpecs},s.default.createElement("span",{className:_g.a.skuSpecsKey},e),s.default.createElement("div",{className:_g.a.skuSpecValueList},t.map(((e,t)=>{const a=e.type===this.state.oldForNewSelected.type;return s.default.createElement(Ra.a,{key:t,trackingInfo:a?{page_el_sn:"5881525",op:"impr",goods_id:this.props.goods.goodsID}:{}},s.default.createElement("div",{className:dt()(_g.a.skuSpecValue,{[_g.a.skuSpecValueSelected]:a}),onClick:()=>this.onOldForNewClick(e)},e.desc))})))))}return n}renderGoodsNumberElement(){const e=this.isEnableIncrease(),t=this.isEnableReduce(),a=(this.state.goodsNumber||0).toString().length,o=a>3?36+9*(a-3):36;return s.default.createElement("div",{className:_g.a.selectorNumber},s.default.createElement("div",{className:_g.a.numberStepper},s.default.createElement("div",{className:dt()(_g.a.skuSelectorReduce,{[_g.a.skuSelectorReduceEnable]:t,[_g.a.skuSelectorReduceDisable]:!t}),onClick:this.reduceGoodsNumber}),s.default.createElement("input",{className:_g.a.skuSelectorInput,type:"number",maxLength:"5",value:this.state.goodsNumber+"",onBlur:this.goodsNumberBlur,onChange:this.goodsNumberChange,style:{width:o/100+"rem"}}),s.default.createElement("div",{className:dt()(_g.a.skuSelectorIncrease,{[_g.a.skuSelectorIncreaseEnable]:e,[_g.a.skuSelectorIncreaseDisable]:!e}),onClick:this.increaseGoodsNumber})))}getViewImgList(e){const t=(Object.values(this.state.skuInfos)||[]).filter((e=>e.quantity>0));t.sort(((e,t)=>Tt()(e,"previewPriority")-Tt()(t,"previewPriority")));const a=t.map((e=>e.thumbUrl));return a.unshift(e),a}setSkuStyleStatus(e){this.setState({styleStatus:e})}render(){const{goods:e,group:t,changeToGroupBuy:a,usePddNativePhoto:o,isMorganFetching:r,useNormalSkuData:n,consultPromotionPriceParams:i}=this.props,{skuInfos:l,selectedSkuID:c,currentSelect:d,styleStatus:u}=this.state;let p=e.hdThumbUrl||e.thumbUrl;const m=this.getViewImgList(p);if(c)p=this.state.skuInfos[c].thumbUrl;else{if(Object.keys(d).some((e=>d[e]))){const e=this.checkHas(d);e&&(p=this.state.skuInfos[e].thumbUrl)}}const h=Tt()(this.props.ocData,"promotionInfo.tradeInInfo"),f=this.props.recordId&&!h;return s.default.createElement("div",{className:dt()(_g.a.skuSelectorContainer),ref:this.ocSkuRef},s.default.createElement("div",{className:_g.a.skuSelectorTitleBar},s.default.createElement("span",null,this.props.recordId?"确认以旧换新订单":"确认订单"),s.default.createElement("div",{className:_g.a.skuSelectorCloseBtn,onClick:()=>{this.props.onClose&&this.props.onClose()}})),f?s.default.createElement(Xp,{onRefresh:()=>{const{selectedSkuID:e,goodsNumber:t}=this.state;yg.render({sku_id:e,goods_number:t,front_action:Pc},this.props.recordId)}}):s.default.createElement(s.default.Fragment,null,this.props.ocData&&s.default.createElement(ng,{ocData:this.props.ocData,hasAddressLine:yg.hasAddressLine,goodsInfo:this.props.ocData.goodsInfo,addressInfo:this.props.ocData.addressInfo,updateAddressInfo:yg.updateAddressInfo,selectDeliveryItem:yg.selectDeliveryItem,goods:e,onClickPreCheck:this.checkSpecDesc}),h&&s.default.createElement(xp,{ocData:this.props.ocData,currentSelect:this.state.currentSelect,onDescClick:()=>{this.skuRef.current.show({skuID:Tt()(this.props.ocData,"goodsInfo.skuId"),goodsNumber:Tt()(this.props.ocData,"goodsInfo.goodsNumber")})}}),!h&&s.default.createElement("div",{className:_g.a.skuSelectorHead},s.default.createElement(lo,{usePddNativePhoto:o,group:t,src:p,goods:e,imgList:m,skuInfos:l,selectedSkuID:c,selectSkuId:this.selectSkuId,resetSkuId:this.resetSkuId,goodsNumber:this.state.goodsNumber}),s.default.createElement("div",{className:_g.a.skuSelectorHeadRight},s.default.createElement(so,{ref:e=>{this.priceAreaRef=e},goods:e,group:t,selectedSkuID:c,currentSelect:d,skuInfos:this.state.skuInfos,selectedHomeIns:this.state.selectedHomeIns,selectedSendWays:this.state.selectedSendWays,handleShowCart:()=>{this.props.handleShowCart({selectedSkuID:c,goodsNumber:this.state.goodsNumber})},isMutliSku:this.props.isMutliSku,goodsNumber:this.state.goodsNumber,skuDirectOrder:this.props.skuDirectOrder,ocData:this.props.ocData,styleStatus:u,useNormalSkuData:n,consultPromotionPriceParams:i,renderPromotionDescContent:e=>r?null:c?s.default.createElement(fg,{ocData:this.props.ocData,goods:this.props.goods}):s.default.createElement(dr,{priceInfo:e})}),this.renderGoodsNumberElement())),this.props.ocData&&s.default.createElement(Ep,{isMorganFetching:r,useNormalSkuData:n,selectedSkuID:this.state.selectedSkuID,ocData:this.props.ocData}),h&&s.default.createElement(Ap,{onDescClick:this.showRecycleHighlayer,ocData:this.props.ocData,goods:e}),!h&&this.props.renderSkuBlackCard&&this.props.renderSkuBlackCard({skuSelector:this.state}),s.default.createElement("div",{ref:e=>{this.skuSelectorBodyRef=e},className:_g.a.skuSelectorBody},!h&&this.renderSkusElement(),this.props.ocData&&Tt()(this.props.ocData,"cellBarVo.protocolV2")&&s.default.createElement(Qp,{ocData:this.props.ocData}),s.default.createElement("div",{className:_g.a.safeDistance})),this.props.renderFooter&&this.props.renderFooter({selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos,goodsNumber:this.state.goodsNumber}),s.default.createElement(Ya,null,s.default.createElement(qo,{goods:this.props.goods,selectedSkuID:c,skuInfos:l})),s.default.createElement(Fp,{changeToGroupBuy:a,setSkuStyleStatus:this.setSkuStyleStatus,styleStatus:u,goods:e,group:t,skuInfos:l,showPaymentList:this.props.showPaymentList,ocData:this.props.ocData,onClick:this.pay,goodsNumber:this.state.goodsNumber,promotionDesc:this.state.promotionDesc,onClickPreCheck:this.checkSpecDesc,selectedSkuID:c,useNormalSkuData:n,oldForNewSelected:this.state.oldForNewSelected,hidePayHint:this.state.oldForNewSelected&&2===this.state.oldForNewSelected.type&&!this.props.recordId}),s.default.createElement(cg,w()({ref:this.skuRef},this.props,{setSkuInfo:e=>{e&&this.setState(e)}}))))}},ee()(hg.prototype,"buildSkuData",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"buildSkuData"),hg.prototype),ee()(hg.prototype,"checkHas",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"checkHas"),hg.prototype),ee()(hg.prototype,"getButtonStatus",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"getButtonStatus"),hg.prototype),ee()(hg.prototype,"selectSkuId",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"selectSkuId"),hg.prototype),ee()(hg.prototype,"setGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"setGoodsNumber"),hg.prototype),ee()(hg.prototype,"resetSkuId",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"resetSkuId"),hg.prototype),ee()(hg.prototype,"checkQuantityAsync",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"checkQuantityAsync"),hg.prototype),ee()(hg.prototype,"getLimitGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"getLimitGoodsNumber"),hg.prototype),ee()(hg.prototype,"amendLimitQuantity",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"amendLimitQuantity"),hg.prototype),ee()(hg.prototype,"updateAmendLimitQuantityGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"updateAmendLimitQuantityGoodsNumber"),hg.prototype),ee()(hg.prototype,"handleHomeInsClick",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"handleHomeInsClick"),hg.prototype),ee()(hg.prototype,"getSelectedSkuID",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"getSelectedSkuID"),hg.prototype),ee()(hg.prototype,"selectOneValue",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"selectOneValue"),hg.prototype),ee()(hg.prototype,"setCustomState",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"setCustomState"),hg.prototype),ee()(hg.prototype,"show",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"show"),hg.prototype),ee()(hg.prototype,"setScroll",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"setScroll"),hg.prototype),ee()(hg.prototype,"goodsNumberBlur",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"goodsNumberBlur"),hg.prototype),ee()(hg.prototype,"goodsNumberChangeClick",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"goodsNumberChangeClick"),hg.prototype),ee()(hg.prototype,"goodsNumberChange",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"goodsNumberChange"),hg.prototype),ee()(hg.prototype,"updateGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"updateGoodsNumber"),hg.prototype),ee()(hg.prototype,"reduceGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"reduceGoodsNumber"),hg.prototype),ee()(hg.prototype,"increaseGoodsNumber",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"increaseGoodsNumber"),hg.prototype),ee()(hg.prototype,"confirmSku",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"confirmSku"),hg.prototype),ee()(hg.prototype,"checkSpecDesc",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"checkSpecDesc"),hg.prototype),ee()(hg.prototype,"showRecycleHighlayer",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"showRecycleHighlayer"),hg.prototype),ee()(hg.prototype,"pay",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"pay"),hg.prototype),ee()(hg.prototype,"isEnableIncrease",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"isEnableIncrease"),hg.prototype),ee()(hg.prototype,"isEnableReduce",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"isEnableReduce"),hg.prototype),ee()(hg.prototype,"onOldForNewClick",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"onOldForNewClick"),hg.prototype),ee()(hg.prototype,"getViewImgList",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"getViewImgList"),hg.prototype),ee()(hg.prototype,"setSkuStyleStatus",[jt.a],Object.getOwnPropertyDescriptor(hg.prototype,"setSkuStyleStatus"),hg.prototype),hg);var Sg;const Eg=sd.getInstance();let Cg=(Sg=class extends wr{constructor(e){super(e),this.state={isFetch:!1,goods:null,showRepayModifyPanel:!1,ocData:null,recordId:"",isMorganFetching:!1,showPaymentList:!1,isMorganError:!1,agreeMentInfo:null}}async initOCManager(e){const{isSingleBuy:t,groupType:a,groupOrderId:o,defaultSkuId:r,defaultGoodsNumber:n}=this.props;let s=this.checkDefaultSkuInfo(r,n);const i=s&&r||this.initSelectedSkuId(),l=s&&n||this.getGoodsNumber(),c=this.props.goods||this.state.goods;let d=c.groupTypes[1];t&&(d=c.groupTypes[0]),Eg.init({updateOCDataFun:e=>{if(!e)return void this.setState({ocData:null});const a=Dt()(e);(a||{}).isSingleBuy=t,this.setState({ocData:a},(()=>{const e=Tt()(a,"goodsInfo.goodsNumber");e&&this.setGoodsNumber(e),s&&this.recoverSkuInfo(r,n),s=!1}))},setMorganFetching:e=>{this.setState({isMorganFetching:e})},setMorganError:e=>{this.setState({isMorganError:e})},getSelectedSkuId:this.getSelectedSkuId,goods:c,groupType:a||e.groupType,orderExtraType:this.props.orderExtraType||e.orderExtraType||0,groupId:d.groupID,groupOrderId:o||e.groupOrderId,sourceType:this.props.sourceType,ocExtend:this.props.ocExtend,hideSkuSelect:this.hide,paySuccessCb:this.props.paySuccessCb,pageFrom:this.props.pageFrom,sourceChannel:this.props.sourceChannel,frontEnv:this.props.frontEnv});const u=1===Tt()(c,"skus.length")||!(!s||!r);return await Eg.render({sku_id:i,goods_number:l,front_action:e.front_action||(u?Pc:Cc)},e.record_id)}initSelectedSkuId(){const e=this.props.goods||this.state.goods;let t=this.getSelectedSkuID();if(!t){const a=Tt()(e,"skus").find((e=>e.quantity>0&&e.isOnsale))||[];t=a.skuID||a.skuId}return t}async show(e){const t=Object(m.g)(window.location.href);let a,o={};!(e||{}).isChangeToGroupBuy&&this.skuDirectOrder&&this.setState({recordId:null}),t.group_order_id&&(o={groupOrderId:t.group_order_id});try{const e=t.goods_list&&JSON.parse(t.goods_list),a=e&&e[0];a&&(o={groupOrderId:a.group_order_id,groupType:a.group_type,orderExtraType:a.order_extra_type})}catch(s){Object(At.c)(new Error("illegal_goods_list"))}if(Ea.show(),this.props.isRemote&&!this.state.isFetch){if(!(await this.loadGoods()))return Ea.hide(),!1}e&&"function"==typeof e.setStateCallback&&this.normalSkuRef.current.skuRef.current.setCustomState(e.setStateCallback);const{needShow:r}=this.normalSkuRef.current.prepare(e);if(r){if((e||{}).isChangeToGroupBuy&&this.skuDirectOrder){const e=Eg.recordId;a=await this.initOCManager(n()(n()({},o),{},{record_id:e,front_action:this.getSelectedSkuID()?Lc:Rc}))}if(this.isShow)return void Ea.hide();!(e||{}).isChangeToGroupBuy&&this.skuDirectOrder&&(a=await this.initOCManager(o),Eg.needReload&&(Eg.needReload=!1)),Ea.hide();const{defaultSkuId:t,defaultGoodsNumber:r}=this.props;this.checkDefaultSkuInfo(t,r)&&!this.skuDirectOrder&&this.recoverSkuInfo(t,r),this.skuBgRef.current.style.display="block",setTimeout((()=>{this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",this.normalSkuRef.current.enter(),_a(),setTimeout((()=>{Ea.hide(),this.isShow=!0,a&&wa(a)}),200)}),1)}return!0}async hide(e){this.isShow&&(ba(),this.props.onHide&&await this.props.onHide(e),this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",this.normalSkuRef.current.exit(),setTimeout((()=>{this.isShow=!1,this.skuBgRef.current.style.display="none",Eg.needReload&&this.props.canReload&&function(){const e=Object(O.a)();e.isNativePlatform&&Object(D.c)(e.version,"4.0.0")>0?Object(ae.g)("WebScene","reload"):oe.a.reload(window.location.href)}()}),+this.props.delay||200))}toggleShowPaymentList(e){this.setState({showPaymentList:e})}get skuDirectOrder(){return this.props.isRemote?this.props.skuDirectOrder&&Tt()(this.state,"goods.skuDirectOrder"):this.props.skuDirectOrder&&Tt()(this.props,"goods.skuDirectOrder")}toggleRepayModifyPanel(e){null==e&&this.setState({showRepayModifyPanel:!this.state.showRepayModifyPanel}),this.setState({showRepayModifyPanel:e})}render(){var e=this;if(this.props.isRemote&&!this.state.goods)return null;let{goods:t}=this.props;this.props.isRemote&&(t=this.state.goods);const{isSingleBuy:a,renderSkuBlackCard:o,groupOrderId:r,usePddNativePhoto:n,isOptSoldOut:i}=this.props;let l=t.groupTypes[1];a&&(l=t.groupTypes[0]);const c=this.state.isMorganFetching||this.state.isMorganError,d=this.skuDirectOrder&&(this.state.ocData||this.state.recordId);return s.default.createElement("div",{ref:this.skuBgRef,className:dt()(Aa.a.skuSelectorBg,"sku-plus1"),onClick:async function(){e.hide()}},s.default.createElement(na,{changeToGroupBuy:this.props.changeToGroupBuy,groupOrderId:r,ref:this.normalSkuRef,goods:t,ocData:this.state.ocData,group:l,onClose:this.onCloseNormalSku,renderSkuBlackCard:o,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,showPaymentList:()=>{this.toggleShowPaymentList(!0)},skuDirectOrder:this.skuDirectOrder,usePddNativePhoto:n,isOptSoldOut:i,useNormalSkuData:c,isMorganFetching:this.state.isMorganFetching,recordId:this.state.recordId,setRecordId:e=>{this.setState({recordId:e})},consultPromotionPriceParams:this.props.consultPromotionPriceParams,showOCSkuSelector:d},d?s.default.createElement(wg,null):s.default.createElement(fr,null)),this.skuDirectOrder&&this.state.ocData&&s.default.createElement(eu,{ocData:this.state.ocData,visible:this.state.showPaymentList,toggleShowPaymentList:this.toggleShowPaymentList}),this.skuDirectOrder&&this.state.ocData&&s.default.createElement(bp,{ocData:this.state.ocData}),this.skuDirectOrder&&this.state.ocData&&t.isAbDirectOrderRepayModifyPanel&&s.default.createElement(hd,{ocData:this.state.ocData,visible:this.state.showRepayModifyPanel,toggle:this.toggleRepayModifyPanel}))}},ee()(Sg.prototype,"initOCManager",[jt.a],Object.getOwnPropertyDescriptor(Sg.prototype,"initOCManager"),Sg.prototype),ee()(Sg.prototype,"initSelectedSkuId",[jt.a],Object.getOwnPropertyDescriptor(Sg.prototype,"initSelectedSkuId"),Sg.prototype),ee()(Sg.prototype,"show",[jt.a],Object.getOwnPropertyDescriptor(Sg.prototype,"show"),Sg.prototype),ee()(Sg.prototype,"hide",[jt.a],Object.getOwnPropertyDescriptor(Sg.prototype,"hide"),Sg.prototype),ee()(Sg.prototype,"toggleShowPaymentList",[jt.a],Object.getOwnPropertyDescriptor(Sg.prototype,"toggleShowPaymentList"),Sg.prototype),ee()(Sg.prototype,"toggleRepayModifyPanel",[jt.a],Object.getOwnPropertyDescriptor(Sg.prototype,"toggleRepayModifyPanel"),Sg.prototype),Sg);var Pg=a("m3JE"),Ng=Object(i.d)(Object(s.forwardRef)(((e,t)=>{const a=Object(ut.a)(),{$ctx:o}=a,[r,i]=Object(Pg.a)(!0),l={goods_id:e.goodsId,page_from:0,page_version:7,page_sn:J.l,_oak_stage:J.k},c=Object(s.useCallback)((()=>{Object(Nt.b)(),e.onHide()}),[]);return r?s.default.createElement(Cg,{ref:t,isRemote:!0,params:l,isSingleBuy:!1,confirmOrder:t=>{var a,r,s,l,c;const{selectedSkuID:d,goodsNumber:u=1,props:p={}}=t,h=o.requestContext.query,f=Object.keys(h).reduce(((e,t)=>{const a=h[t];return/(^_oc_*)|(^_oak_*)/.test(t)&&a&&(e[t]=a),e}),{}),g=null!==(a=null===(r=p.group)||void 0===r?void 0:r.groupID)&&void 0!==a?a:null===(s=p.goods)||void 0===s||null===(l=s.groupTypes)||void 0===l||null===(c=l[1])||void 0===c?void 0:c.groupID,_=n()({sku_id:d,goods_id:e.goodsId,goods_number:u,group_id:g,pr_remote:1},f),y=Object(m.a)(_,"order_checkout.html");Object(Nt.b)(),Object(O.a)().isNativePlatform?Object(re.b)(y):i(!1,(()=>{Object(re.b)(y)}))},onHide:c,sourceChannel:78,skuDirectOrder:!0}):null}))),Og=a("LR3Q"),Dg=a.n(Og),xg=Object(i.d)((function({goodsId:e,linkUrl:t,hasCoupon:a,price:o,isFromRecommend:r=!1}){Object(l.d)(Dg.a);const{gotoDetailPage:n}=Object(ut.a)(),i=Object(s.useRef)(),c={page_el_sn:3851086,type:1};return s.default.createElement(s.default.Fragment,null,s.default.createElement(st.a,{trackingInfo:c},s.default.createElement("div",{className:Dg.a.buttonWrapper,onClick:async()=>{i.current?(Object(lt.a)(c),r&&Pt.getInstance().enableScroll(),i.current.show({preventAutoConfirm:!0}),Object(Nt.a)((()=>{i.current.hide(),Object(Nt.b)()}))):(await Object(lt.a)(c),n(t))}},a?s.default.createElement(s.default.Fragment,null,"券后",s.default.createElement(N.IconRmb,{className:Dg.a.iconRmb,style:{marginLeft:"0.02rem"}}),s.default.createElement("div",{className:Dg.a.buttonPrice,style:{marginRight:"0rem"}},o)):s.default.createElement(s.default.Fragment,null,s.default.createElement(N.IconRmb,{className:Dg.a.iconRmb}),s.default.createElement("div",{className:Dg.a.buttonPrice},o),"去拼单"))),s.default.createElement(f.a,null,s.default.createElement(Ng,{ref:i,goodsId:e,onHide:()=>{if(r){const t=document.getElementById("LargeGoodsLikeItem-"+e);Pt.getInstance().disableScroll(t)}}})))})),Tg=a("n1qw"),jg=a.n(Tg);const Ag=s.default.memo((({handleClose:e})=>s.default.createElement("svg",{viewBox:"0 0 14 14",className:jg.a.close,onClick:e},s.default.createElement("path",{d:"M12.0913929,0.325256959 C12.5280835,-0.108418986 13.2358035,-0.108418986 13.6724941,0.325256959 C14.1091686,0.758932905 14.1091686,1.46177818 13.6724941,1.89545412 L13.6724941,1.89545412 L8.53276465,7 L13.6724941,12.1045499 C14.1091686,12.5382258 14.1091686,13.2410711 13.6724941,13.674747 C13.4541568,13.891577 13.1680381,14 12.8819355,14 C12.5958328,14 12.3097302,13.891577 12.0913929,13.674747 L12.0913929,13.674747 L7,8.619 L1.90860311,13.674747 C1.69026583,13.891577 1.40416318,14 1.11806052,14 C0.831957873,14 0.545855221,13.891577 0.327517943,13.674747 C-0.109172648,13.2410711 -0.109172648,12.5382258 0.327517943,12.1045499 L5.46723134,7 L0.327517943,1.89545412 C-0.109172648,1.46177818 -0.109172648,0.758932905 0.327517943,0.325256959 C0.764208534,-0.108418986 1.47192855,-0.108418986 1.90860311,0.325256959 L7,5.38 Z",fill:"currentColor"})))),Lg=s.default.memo((({handleBack:e})=>s.default.createElement("svg",{viewBox:"0 0 1024 1024",className:jg.a.back,onClick:e},s.default.createElement("path",{d:"M525.89 1021.75a24.63 24.63 0 0 1-17.21-7L8.51 529.45a24.72 24.72 0 0 1 0-35.48L508.68 8.64a24.72 24.72 0 0 1 34.42 35.49L61.21 511.71l481.9 467.59a24.72 24.72 0 0 1-17.21 42.46z m0 0"}))));function Rg({handleClose:e,popupHeight:t,bgClassName:a,children:o,useOwnContent:r=!1,isAnimationHorizontal:n=!1}){return Object(l.d)(jg.a),s.default.createElement("div",{className:dt()(jg.a.bg,a)},s.default.createElement("div",{style:{height:`calc(100% - ${t})`,minHeight:"16%"},onClick:e}),s.default.createElement("div",{className:jg.a.downBlock,style:{height:""+t,maxHeight:"84%"}},r?o:s.default.createElement("div",{className:dt()(jg.a.content,n?jg.a.horizontalAnimate:jg.a.verticalAnimate)},o)))}var Mg=a("4yjR"),Bg=a("ST2r"),Fg=a("xjmN"),zg=a("gI7+"),Hg=a("HbtU"),Vg=a.n(Hg);const Ug=s.default.memo((function({comment:e,index:t,listRef:a,goodsId:o}){Object(l.d)(Vg.a);const r=Object(s.useContext)(y.a),i=Object(ut.a)(),[c,d]=Object(s.useState)(-1),u=Object(s.useRef)([]),p={page_el_sn:4424938,type:e.video?2:e.pictures?1:0},m=[...e.pictures||[]];var h;e.video&&m.unshift((h=e.video,n()(n()({},h),{},{src:h.url,url:h.coverImageUrl})));return s.default.createElement(s.default.Fragment,null,s.default.createElement(st.a,{trackingInfo:p},s.default.createElement("div",{className:Vg.a.item,key:"comment-"+t},s.default.createElement("div",{className:Vg.a.avatar},s.default.createElement(pt.a,{src:e.avatar,processParam:{resizeWidth:48}})),s.default.createElement("div",{className:Vg.a.desc},s.default.createElement("div",{className:Vg.a.name},e.name),s.default.createElement(zg.a,{text:e.comment}),m.length>0&&s.default.createElement("div",{className:Vg.a.imgList},m.slice(0,3).map(((e,a)=>{const o=m.length>3?"+"+(m.length-3):null,r=Object(he.a)(e.url,{resizeWidth:306,quality:80,webpEnable:i.webpEnable});return s.default.createElement("div",{key:`img-${t}-${a}`,ref:e=>{u.current[a]=e},className:Vg.a.imgItem,style:{backgroundImage:`url(${r})`},onClick:()=>(async e=>{await Object(lt.a)(p),Pt.getInstance().enableScroll(),d(e)})(a)},o&&2===a&&s.default.createElement("div",{className:Vg.a.imgMask},o),!!e.src&&s.default.createElement(pt.a,{src:"https://funimg.pddpic.com//commodity/goods_video_player.png",className:Vg.a.videoIcon,processParam:{resizeWidth:72}}))})))))),-1!==c&&s.default.createElement(gt.b,{commentIndex:t,clickIndex:c,currentImg:m[c],appBarCtx:r,clickItemRef:{current:u.current[c]},listRef:a,onClose:()=>d(-1),source:J.c.CommentPopup,goodsId:o}))})),Wg=Object(i.d)((function({commentCount:e,goodsId:t,orderInfos:a,isFromRecommend:o,handleRecommendPopupClose:r}){Object(l.d)(Vg.a);const n=Object(ut.a)(),i=Object(s.useRef)([]),[c,d]=Object(s.useState)(!1),[u,p]=Object(s.useState)(0===e?J.a.Order:J.a.Comment),{commentsPopupVisible:m,commentsPopupList:h=[],commentsPopupLabels:f=[],commentsPopupStatus:g,popupHeight:_}=Object(te.h)(n.recommendGoodsDetailsMap,t),y=Object(s.useCallback)((()=>{n.getCommentsPopupData(t)}),[t]),b=async()=>{await Object(lt.a)({page_el_sn:4425634}),n.setCommentsPopupVisible(t,!1),o&&n.setRecommendPopupId(0),n.popupOverflowVisible=!1,Pt.getInstance().enableScroll()},v=async()=>{n.popupOverflowVisible=!1,n.setCommentsPopupVisible(t,!1);const e=document.getElementById("LargeGoodsLikeItem-"+t);Pt.getInstance().enableScroll(),Pt.getInstance().disableScroll(e)};return Object(s.useEffect)((()=>{d(!0)}),[d]),Object(s.useEffect)((()=>{gt.a.preload(),o&&Pt.getInstance().enableScroll(),Pt.getInstance().disableScroll(i.current)}),[]),Object(s.useEffect)((()=>{if(Object(O.a)().isNativePlatform&&m)return Object(ae.k)({callback:o?v:b}),()=>{0!==n.recommendPopupId&&Object(ae.k)({callback:r})}}),[t,n.recommendGoodsDetailsMap]),s.default.createElement(Rg,{handleClose:b,popupHeight:_,isAnimationHorizontal:o},s.default.createElement("div",{className:Vg.a.titleContainer},o&&s.default.createElement(Lg,{handleBack:v}),s.default.createElement(Ag,{handleClose:b}),s.default.createElement("div",{className:Vg.a.titleBlockLine},!!e&&s.default.createElement("div",{className:dt()(Vg.a.titleBlock,{[Vg.a.activeTitleBlock]:u===J.a.Comment&&!!a.length},{[Vg.a.aloneTitleBlock]:u===J.a.Comment&&!a.length}),onClick:()=>p(J.a.Comment)},"精彩评论"),!!a.length&&s.default.createElement("div",{className:dt()(Vg.a.titleBlock,{[Vg.a.activeTitleBlock]:u===J.a.Order&&!!e},{[Vg.a.aloneTitleBlock]:u===J.a.Order&&!e}),onClick:async()=>{await Object(lt.a)({page_el_sn:4905272}),p(J.a.Order)}},"拼单记录"))),s.default.createElement("div",{className:dt()(Vg.a.bigBlock,{[Vg.a.move]:u===J.a.Order})},s.default.createElement("div",{className:Vg.a.left},s.default.createElement("div",{className:Vg.a.whiteBlock}),!!(null==f?void 0:f.length)&&s.default.createElement("div",{className:Vg.a.tags},f.map(((e,t)=>s.default.createElement("div",{key:t,className:Vg.a.tag},`${e.commentLabel} (${e.commentLabelCount})`)))),s.default.createElement("div",{className:Vg.a.list,style:(null==f?void 0:f.length)?{height:"calc(100% - 0.3rem)"}:{},ref:e=>i.current[0]=e,id:"commentList"},h.map(((e,a)=>s.default.createElement(Ug,{key:"comment-"+a,comment:e,index:a,listRef:i,goodsId:t}))),c&&g!==J.i.End&&s.default.createElement(Mg.a,{onIntersecting:y}),s.default.createElement(Bg.a,{show:g===J.i.Loading}),s.default.createElement(Fg.a,{show:g===J.i.End&&!!h.length,className:Vg.a.listEnd,text:"精选评论看完啦"}))),s.default.createElement("div",{className:Vg.a.right},s.default.createElement("div",{className:Vg.a.list,ref:e=>i.current[1]=e,id:"orderList"},a.map(((e,t)=>{const{avatar:a="",name:o,spec:r=[],payTime:n}=e;return s.default.createElement("div",{className:Vg.a.orderLine,key:"orderInfo-"+t},s.default.createElement(pt.a,{src:a,processParam:{resizeWidth:72},className:Vg.a.orderAvatar}),s.default.createElement("div",{className:Vg.a.orderName},o),s.default.createElement("div",{className:Vg.a.orderText},r.map(((e,a)=>s.default.createElement("span",{key:`OrderSpec_${t}_${a}`},e)))),s.default.createElement("div",{className:Vg.a.orderPayTime},n))}))))))}));var Gg=a("7K1G"),qg=a.n(Gg);const Qg=Object(i.d)((function({servicePopupStyle:e,data:t,goodsId:a,isFromRecommend:o,handleRecommendPopupClose:r}){Object(l.d)(qg.a);const n=Object(s.useRef)(),i=Object(ut.a)(),{servicePopupVisible:c,popupHeight:d}=Object(te.h)(i.recommendGoodsDetailsMap,a),u=async()=>{if(i.setServicePopupVisible(a,!1),Pt.getInstance().enableScroll(),o){const e=document.getElementById("LargeGoodsLikeItem-"+a);Pt.getInstance().disableScroll(e)}},p=async()=>{await Object(lt.a)({page_el_sn:e===J.n.ServiceExplain?4842222:4842223}),i.setServicePopupVisible(a,!1),o&&i.setRecommendPopupId(0),Pt.getInstance().enableScroll()};return Object(s.useEffect)((()=>{o&&Pt.getInstance().enableScroll(),Pt.getInstance().disableScroll(n.current)}),[o]),Object(s.useEffect)((()=>{if(Object(O.a)().isNativePlatform&&c)return Object(ae.k)({callback:u}),()=>{o&&Object(ae.k)({callback:r})}}),[a,i.recommendGoodsDetailsMap]),s.default.createElement(st.a,{trackingInfo:{page_el_sn:e===J.n.ServiceExplain?4842220:4842223}},s.default.createElement(Rg,{handleClose:p,popupHeight:d,isAnimationHorizontal:o},s.default.createElement("div",{className:qg.a.title},o&&s.default.createElement(Lg,{handleBack:u}),s.default.createElement(Ag,{handleClose:p}),e===J.n.ServiceExplain?"服务说明":"商品参数"),s.default.createElement("div",{className:qg.a.scroll,ref:n},e===J.n.ServiceExplain?s.default.createElement("div",{className:qg.a.serviceContent},t.map(((e,t)=>s.default.createElement("div",{key:"Service-"+t,className:qg.a.serviceItem},s.default.createElement("div",{className:qg.a.serviceTitleLine},s.default.createElement("div",{className:qg.a.dot}),s.default.createElement("span",{className:qg.a.serviceTitle},e.serviceLabel)),s.default.createElement("div",{className:qg.a.serviceDesc},e.desc))))):s.default.createElement("div",{className:qg.a.parameterContent},t.map(((e,t)=>{var a;return s.default.createElement("div",{key:"Parameter-"+t,className:qg.a.parameterItem},s.default.createElement("div",{className:qg.a.parameterTitle},e.name),s.default.createElement("div",{className:qg.a.parameterValues},null===(a=e.values)||void 0===a?void 0:a.map(((t,a)=>s.default.createElement(s.default.Fragment,null,s.default.createElement("span",null,t),a!==e.values.length-1&&s.default.createElement("span",null,"，"))))))}))))))}));var Yg=a("t+XH"),Jg=a.n(Yg);var Xg=Object(i.d)((function(e){Object(l.d)(Jg.a);const t=Object(ut.a)(),{$shareInfo:a,recommendGoodsDetailsMap:o}=t,{goods:r={},goToDetail:i,noShowTooltips:c=!1,isFromRecommend:d=!1,handleRecommendPopupClose:u=(()=>null)}=e,{price:p,minOnSaleGroupPrice:m,goodsName:h,firstScreenImg:f,priceUsingCoupon:g,userComments:_=[],commentLabels:y,allCommentCount:b,picNum:v,goodsId:k,serviceLabelDtos:I=[],goodsProperties:w=[],goodsPropertyDtos:S=[],recommendListMessage:E,orderInfos:C=[]}=r||{},{commentsPopupVisible:P,commentsPopupStatus:N,servicePopupVisible:O}=Object(te.h)(o,k),[D,x]=Object(s.useState)(0),T=Object(s.useRef)(),j=nt.a.price(p||m,100)||"",A=g&&nt.a.price(g,100)||"";Object(s.useEffect)((()=>{t.updateShareInfo(n()(n()({},a),{},{message:`${nt.a.price(p||m,100)||""}元, ${h}`,thumbnailURL:f}))}),[a,f,h,m,p,t]),Object(s.useEffect)((()=>{d&&(t.recommendGoodsDetailsMap[k].popupHeight=T.current.getBoundingClientRect().height+"px"),N!==J.i.End&&t.getCommentsPopupData(k)}),[]);const L=async(e,a)=>{await Object(lt.a)({page_el_sn:e?4424894:4424876,type:a}),t.popupOverflowVisible=!0,t.setCommentsPopupVisible(k,!0)},R=async e=>{await Object(lt.a)({page_el_sn:e===J.n.ServiceExplain?4842216:4842215}),x(e),t.setServicePopupVisible(k,!0)},M=Object(s.useCallback)((e=>(null==e?void 0:e.length)?s.default.createElement("div",{className:Jg.a.tags},e.map(((e,t)=>s.default.createElement("div",{key:t,className:dt()(Jg.a.tag,Jg.a[e.tagClass])},`${e.commentLabel} (${e.commentLabelCount})`)))):null),[]),B=Object(s.useCallback)((()=>{const e=2-_.length<0?0:2-_.length;return s.default.createElement(st.a,{trackingInfo:{page_el_sn:4424876,type:e?1:0}},s.default.createElement("div",{className:Jg.a.commentList,onClick:()=>L(!1,e?1:0)},_.slice(0,2).map(((e,t)=>{const a=!!e.picCount&&0!==e.picCount,o=!!e.videoCount&&0!==e.videoCount;return s.default.createElement("div",{className:Jg.a.commentLine,key:"comment-"+t},s.default.createElement(pt.a,{src:e.avatar,processParam:{resizeWidth:72},className:Jg.a.commentAvatar}),s.default.createElement("div",{className:Jg.a.commentName},":"),s.default.createElement("div",{className:Jg.a.commentText},s.default.createElement(it.a,{imageClass:Jg.a.emojiImage,content:e.comment})),(a||o)&&s.default.createElement("div",{className:Jg.a.commentIcon},s.default.createElement(pt.a,{src:o?"https://funimg.pddpic.com/mobile-subjects/2020-12-21/a6ab44a4-f9e4-49d5-ab18-e59e8e1cf351.png.slim.png":"https://funimg.pddpic.com/mobile-subjects/2020-12-13/35ed29c2-f109-4533-ab38-646cabc28db0.png.slim.png",processParam:{resizeWidth:48},className:Jg.a.picIcon}),s.default.createElement("span",null,e.picCount+(e.videoCount||0))))})),C.slice(0,e).map(((e,t)=>{const{avatar:a="",spec:o=[],payTime:r}=e;return s.default.createElement("div",{className:Jg.a.commentLine,key:"orderInfo-"+t},s.default.createElement(pt.a,{src:a,processParam:{resizeWidth:72},className:Jg.a.commentAvatar}),s.default.createElement("div",{className:Jg.a.commentName},":"),s.default.createElement("div",{className:Jg.a.commentText},s.default.createElement("span",null,r,"拼单了 "),o.map(((e,t)=>s.default.createElement("span",{key:"OrderSpec_"+t},e)))))}))))}),[v,_]),F=Object(s.useCallback)((()=>s.default.createElement("svg",{viewBox:"0 0 1024 1024",className:Jg.a.contentArrow},s.default.createElement("path",{d:"M292.7001 1023.997654c-14.55529 0-29.11058-5.555875-40.222331-16.666452-22.222327-22.222327-22.222327-58.241099 0-80.444661l414.646321-414.64632-415.145962-415.128369c-22.222327-22.203561-22.222327-58.222333 0-80.444661s58.222333-22.222327 80.44466 0l428.554188 428.535422c36.944165 36.981696 36.944165 97.111113 0.037532 134.074043L332.92243 1007.331202c-11.11175 11.11175-25.66704 16.666452-40.22233 16.666452z"}))),[]),H=Object(s.useCallback)((()=>s.default.createElement(xg,{goodsId:k,linkUrl:d?"goods.html?goods_id="+k:"",hasCoupon:!!g,price:g?A:j,isFromRecommend:d})),[A,k,d,j,g]);return r?s.default.createElement("div",{className:Jg.a.topGoodsWrap,ref:T},s.default.createElement(vt,{goods:r,goToDetail:i}),s.default.createElement("div",{className:Jg.a.content},0!==I.length&&s.default.createElement(st.a,{trackingInfo:{page_el_sn:4842216}},s.default.createElement("div",{className:Jg.a.contentLine,onClick:()=>R(J.n.ServiceExplain)},s.default.createElement("div",{className:Jg.a.contentName},"服务"),s.default.createElement("div",{className:Jg.a.contentText},I.slice(0,3).map(((e,t)=>s.default.createElement(s.default.Fragment,null,s.default.createElement("span",null,e.serviceLabel),t!==I.slice(0,3).length-1&&s.default.createElement("span",null," · "))))),s.default.createElement(F,null))),0!==w.length&&s.default.createElement(st.a,{trackingInfo:{page_el_sn:4842215}},s.default.createElement("div",{className:Jg.a.contentLine,onClick:()=>R(J.n.ProductParameters)},s.default.createElement("div",{className:Jg.a.contentName},"参数"),s.default.createElement("div",{className:Jg.a.contentText},w.slice(0,3).map(((e,t)=>s.default.createElement(s.default.Fragment,null,s.default.createElement("span",null,e),t!==w.slice(0,3).length-1&&s.default.createElement("span",null," · "))))),s.default.createElement(F,null))),!!E&&s.default.createElement(st.a,{trackingInfo:{page_el_sn:4842217}},s.default.createElement("div",{className:Jg.a.contentLine},s.default.createElement("div",{className:Jg.a.contentName},"榜单"),s.default.createElement("div",{className:Jg.a.contentText},E))),s.default.createElement(z.a,null,(!!b||!!C.length)&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:dt()(Jg.a.contentLine,Jg.a.lastLine),onClick:()=>L(!1)},s.default.createElement("div",{className:Jg.a.contentName},"近期拼单"),M(y),s.default.createElement(F,null)),s.default.createElement(B,null)))),s.default.createElement(z.a,null,d&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:Jg.a.placeHolder}),s.default.createElement("div",{className:"iphonex-extra-height"})),s.default.createElement("div",{className:d?Jg.a.likeContainer:""},d&&s.default.createElement("div",{className:Jg.a.line}),s.default.createElement(St,{goods:r,noShowTooltips:c,renderPinButton:H}),d&&s.default.createElement("div",{className:"iphonex-extra-height"}))),s.default.createElement(z.a,null,P&&s.default.createElement(Wg,{commentCount:b,goodsId:k,orderInfos:C,isFromRecommend:d,handleRecommendPopupClose:u})),s.default.createElement(z.a,null,O&&s.default.createElement(Qg,{servicePopupStyle:D,data:D===J.n.ProductParameters?S:I,goodsId:k,isFromRecommend:d,handleRecommendPopupClose:u}))):null}));var Kg=a("PEIp"),$g=a("MVvR"),Zg=a("aQEu"),e_=a("gQOS"),t_=a.n(e_);function a_({titleText:e,trackingInfo:t,customStyle:a}){return Object(l.d)(t_.a),s.default.createElement("div",{className:dt()(t_.a.titleWrap,a)},s.default.createElement("div",{className:t_.a.title},e))}var o_=a("0JxP"),r_=a("Gxv9"),n_=a.n(r_),s_=Object(i.d)((function(){Object(l.d)(n_.a);const{$listId:e,gotoIndex:t,webpEnable:a,pageListData:o,loadMoreListData:r,isListHasMoreData:n,queries:i,updateRecommendGoods:c,updateLargeGoods:d,setRecommendPopupId:u,getRecommendGoodsDetails:p,recommendGoodsDetailsMap:m,tabId:h}=Object(ut.a)(),{parent_tab_id:f,parent_tab_name:g,tab_id:_,tab_name:y}=i,b=null==f?void 0:f.length,v=Object(s.useCallback)((()=>({prom_name:"bestgoods",tab_id:_,prom_level_one_name:(b?`${f}_${g}`:`${_}_${y}`)||"",prom_level_two_name:(b?`${_}_${y}`:"")||"",prom_level_three_name:"middle_list_exposed_goods"})),[b,f,g,_,y]),k=Object(s.useCallback)((({alreadyLike:e,goodsId:t,likeCount:a})=>{c({alreadyLike:e,goodsId:t,likeCount:a}),m[t]&&d(t,{alreadyLike:e,likeCount:a})}),[d,c]);return s.default.createElement("div",{className:n_.a.recListWrap},s.default.createElement(a_,{titleText:"你可能还喜欢"}),s.default.createElement($g.a,{onLoadMore:r,list:Object(ce.e)(o),className:n_.a.goodsWrap,renderItem:(t,o)=>{const{type:r=0,idx:n}=t;if(null==t?void 0:t.goodsId)return s.default.createElement(z.a,{key:`${r}-${n}`},s.default.createElement(Kg.a,((t,o)=>({isDefault:!0,goods:t,webpEnable:a,listId:e,getTrackingInfo:v,key:o,source:le.b.MiddleFeeds,onLikeButtonClick:k}))(t,o)));switch(r){case le.c.InventoryCard:return s.default.createElement(z.a,null,s.default.createElement(o_.a,{key:`${r}-${n}`,goods:t,tabId:h,commonTrackingInfo:v()}));default:return null}},renderCustomListEnd:()=>!n&&s.default.createElement(Zg.a,{trackingInfo:{page_el_sn:3850899},onClick:t}),isLoading:n,isEnd:!n}))}));var i_=a("VwP5"),l_=a.n(i_);const c_=Object(i.d)((function({currentId:e}){Object(l.d)(l_.a);const t=Object(ut.a)(),{goodsDetails:a,commentsPopupVisible:o,servicePopupVisible:r,popupHeight:n}=Object(te.h)(t.recommendGoodsDetailsMap,e),i=Object(s.useRef)(),[c,d]=Object(s.useState)(!1),[u,p]=Object(s.useState)(!1),m=()=>{p(!0),Pt.getInstance().enableScroll(),setTimeout((()=>{t.setRecommendPopupId(0)}),300)},h=Object(s.useCallback)((()=>{t.gotoDetailPage("goods.html?goods_id="+e)}),[e]);return Object(s.useEffect)((()=>{Pt.getInstance().disableScroll(i.current),setTimeout((()=>{d(!0)}),300)}),[]),Object(s.useEffect)((()=>{Object(O.a)().isNativePlatform&&0!==t.recommendPopupId&&Object(ae.k)({callback:m})}),[t.recommendPopupId]),Object(s.useEffect)((()=>{if(!o&&!r){if(!i)return;let e=-1;const t=t=>{t.target&&(e=t.changedTouches[0].clientX)},a=t=>{t.target&&e<25&&t.changedTouches[0].clientX>140&&m()};return i.current.addEventListener("touchstart",t),i.current.addEventListener("touchend",a),()=>{i.current.removeEventListener("touchstart",t),i.current.removeEventListener("touchend",a)}}}),[o,r]),s.default.createElement(Rg,{handleClose:m,popupHeight:n,bgClassName:l_.a.bg,useOwnContent:!0},s.default.createElement("div",{className:dt()(l_.a.wrap,{[l_.a.wrapOverflowVisible]:t.popupOverflowVisible,[l_.a.backAnimation]:u}),ref:i,id:"LargeGoodsLikeItem-"+a.goodsId},0!==Object.keys(a).length&&s.default.createElement(Xg,{goods:a,goToDetail:h,handleRecommendPopupClose:m,noShowTooltips:!0,isFromRecommend:!0})),c&&!o&&!r&&s.default.createElement(Ag,{handleClose:m}))}));var d_,u_=Object(i.d)((function(){const{pageTopGoods:e,gotoDetailPage:t}=Object(ut.a)();return e?s.default.createElement(Xg,{goods:e,goToDetail:t}):null})),p_=a("hY3a"),m_=a("Splv"),h_=a("Y2p2"),f_=a.n(h_),g_=Object(i.d)((function(){Object(l.d)(f_.a);const{queries:e,showMiddleHomeIcon:t}=Object(ut.a)(),{statusbarHeight:a,navigationHeight:o,isImmersive:r}=Object(s.useContext)(y.a),n={page_el_sn:4568106},i="74842"===e.refer_page_sn,c=Object(s.useCallback)((async()=>{await Object(lt.a)(n),Object(re.b)("sbxeghhl.html?_pdd_fs=1&_pdd_nc=ffffff&_pdd_tc=00ffffff&_pdd_sbs=1")}),[n]);return r&&i&&t?s.default.createElement(st.a,{trackingInfo:n},s.default.createElement("div",{className:f_.a.homeContainer,style:{top:a+"px",height:o-a+"px",width:o-a+"px"},onClick:c},s.default.createElement("div",{className:f_.a.homeWrapper},s.default.createElement(pt.a,{className:f_.a.homeIcon,src:J.d,processParam:{resizeWidth:60}})))):null})),__=a("ChCh"),y_=a.n(__),b_=Object(i.d)((function(){Object(l.d)(y_.a);const{showILikeTooltips:e,setILikeTooltips:t,queries:a}=Object(ut.a)(),o=Object(s.useCallback)((()=>s.default.createElement(st.a,{trackingInfo:{page_el_sn:4150018}},s.default.createElement("div",{className:y_.a.rightBtnWrap,onClick:async()=>{await Object(lt.a)({page_el_sn:4150018}),t(!1),Object(re.b)(Object(m_.c)()||Object(m_.b)()||Object(m_.a)(a)?Object(m.a)({from_share_status:1},"bestgoods_like_list.html"):"bestgoods_like_list.html")}},s.default.createElement("div",{className:y_.a.iLikeIcon},s.default.createElement(pt.a,{className:y_.a.iLikeImg,src:J.g,processParam:{resizeWidth:100}})),e&&s.default.createElement(st.a,{trackingInfo:{page_el_sn:4149276}},s.default.createElement("div",{className:y_.a.tooltipWrap},s.default.createElement("div",{className:y_.a.tooltip},"在这里查看我喜欢的好货")))))),[a,t,e]);return s.default.createElement(s.default.Fragment,null,s.default.createElement(p_.a,{noTitle:!0,hideInitTitle:!0,noGradient:!0,showBlackTextThroshold:1,statusBarStyle:[0,0],className:y_.a.headWrap,backBtnWrapClassName:y_.a.backBtnWrapper,shareBtnWrapClassName:y_.a.shareBtnWrapper,rightBtnTemplate:o}),s.default.createElement(g_,null))}));const v_=Object(h.b)(u_,{placeholder:({preGoodsImage:e=""})=>(Object(l.d)(Jg.a),s.default.createElement("div",{className:Jg.a.phTopGoods},s.default.createElement("div",{className:Jg.a.phImageWrap},e?s.default.createElement(pt.a,{src:e,processParam:ce.a,className:Jg.a.phImage}):null),s.default.createElement("div",{className:Jg.a.phInfo,style:{backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXcAAACWCAMAAAAScThfAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADNQTFRF////7u7u7e3t9/f3+fn58/Pz7+/v8PDw9fX1/Pz8/f399vb2/v7++vr67urq7uzs+Pj4TozvDQAAAp9JREFUeJzt3e1u2zAMRuG6bdr0c7v/q93QzGiHyDZNkXol5zxA/hgZJ50aWpF6290dAAAAAAAAgH8mA/Uaj4juGtN0P2291Gs8Iu73maWEUdDvlr7lLtBdo3V3zvcLSwnjy/S7hXz5DiDmVrcGo/uM7hqtu3O+X3C+a8Tc6tZgdJ/RXaN1d873C873W0B3DboDAAAAAAAAABDF8qk73Ba7h/0kseFLv4L6n6+av3LwoLsG3TXorkF3jcXu8j/xHS/9Cvh+pnN016C7Buc75/stobsG3TUWuwMAAAAAAAA36cHwedr6e/hUzmErqeU9hN/PUqw6O92v0F2D7hp016C7xlym/JzK/939z7uod9kfy51aebPTvYDuGnTXmMtwvrdluVMrb3a6F9Bdg+4ilmJ0BwAAAAAAAA7k8fRU/ZnfT8/nF/WW+hda/IeTemM9e82q/kW9u26lVv/rTb3BPmVnn6y3fOn91mvDeW+Q3fFfDe+7NqDc3vY+pV9gvTagrM5Xdq/Dfm1A8X2XfKSto1GqSLnfQNrzfKZN7lNQUpNz3jLaBQsS0TOgTt7kPkXUtHvNW0bObg7SfXEfQZPrx5Sm0n1rcvi/rJuV/dG3yfWn+7fqZHYPltX9FL5S3z6CJtePKU1NEPtjDv8+gibXjylNTRC+UOc+giYPc74/+zbJ+V7pHL5S3z6CJtePKU1N8BK+Ut8+gibXjylNzRC+Uuc+YgYPc7479+s935cfLfCt41vMlIWxCdp+A7+ykF9ZgzsVVLQ+T9bcTkUltVh/eKyU03ptQPF5F+1cyZ5r43nLqnxlcymlt1uvjSc39rffu9ay/9pw2mTn8dQrZBfJz245ZG7QR3J29f76lfnJJH/pY03Sk2Mc7AAAAAAAAJ36A1n7PBJaRztFAAAAAElFTkSuQmCC)"}})))}),k_=Object(h.b)(s_,{placeholder:()=>(Object(l.d)(n_.a),s.default.createElement("div",{className:n_.a.phWrap},s.default.createElement(a_,{titleText:"你可能还喜欢"}),s.default.createElement("div",{className:n_.a.phList},Array(6).fill(s.default.createElement("div",{className:n_.a.phGoodsWrap,style:{backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAADoBAMAAAC9RHP3AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABVQTFRF9PT0/v7+/////Pz87u7u7e3t+fn5vW+fSwAAALZJREFUeJzt1cEJAkEQBMDxzMAIjtVIRBMx/yB8yiHoKtvCSvX8i6EfM1W7Fsixap9wW1trycCtDik45ILBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDwWAwGPwavgzOA76OnR9sPB+sYx0/bzwdnAgYDAZ3w9vbdP5L+NR3j7cfqwv+5ueN3Hg+WMd5+OOO32fS6wbOwrcUvKTgUBfrHVfZXMT9SykFAAAAAElFTkSuQmCC)"}})))))});let I_=Object(c.b)(X)(d_=Object(l.c)({store:rt},{requireLogin:!1,serverTemplateName:"bestgoods_middle",title:J.o,fallbackCSR:!0,options:{pageProperty:{pageName:J.k,pageSN:J.l},shareInfo:{noDefaultShare:!0},usePDDShare:!1},ChunkProvider:({children:e,store:t})=>s.default.createElement(q.b,null,s.default.createElement(u.a,{store:t},e))})(d_=Object(i.c)("store")(d_=Object(g.b)(d_=Object(i.d)(d_=class extends s.default.Component{render(){const{store:e}=this.props,{preGoodsImage:t}=e;return s.default.createElement(u.a,{store:e},s.default.createElement(F,{backUrl:"/sbxeghhl.html"}),s.default.createElement(d.a,{stores:{store:e}}),s.default.createElement(_.a.Provider,{value:e.$ctx},s.default.createElement(y.b,null,s.default.createElement(z.a,null,s.default.createElement(b_,null)),s.default.createElement(z.a,null,s.default.createElement(v_,{chunkName:"topGoodsChunkStore",ComponentProps:{preGoodsImage:t}})),s.default.createElement(z.a,null,0!==e.recommendPopupId&&s.default.createElement(c_,{currentId:e.recommendPopupId}),s.default.createElement(G,null,s.default.createElement(k_,{chunkName:"recommendListChunkStore"}))),s.default.createElement(C,null),s.default.createElement(p.a,null),s.default.createElement(f.a,null,s.default.createElement(z.a,null,s.default.createElement(Q.a,null),s.default.createElement(Q.b,{pageElSn:4361273})),s.default.createElement(k.a,{store:e,setNativeShareButton:!1}),s.default.createElement(v.a,{style:{marginTop:"0.81rem",zIndex:10002},url:Object(m.a)(n()({},e.queries),J.m),params:{page_sn:J.l,window_id:30373,campaign:"campaign=h5_base",cid:"bestgoods_middle_wx"}}),s.default.createElement(b.a,null)))))}})||d_)||d_)||d_)||d_)||d_;Object(o.a)(I_,I_.appConfig.options)},KidB:function(e,t,a){var o=a("x2pu"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"L/R6":function(e,t,a){e.exports={container:"_3-rSWiHc",icon:"raHIMvRi",title:"eIbWbqkK"}},LR3Q:function(e,t,a){var o=a("AU1v"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},LrBD:function(e,t,a){e.exports={disablePromotionItem:"_6PVJ16lr",disableWrap:"_2eg0HQDk",horizontalScan:"_2imVJkft"}},LuAP:function(e,t,a){},LzYn:function(e,t,a){var o=a("8Pq9"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},MmRk:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes _1G4O7F1q{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _1G4O7F1q{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._2cjGiptR{position:relative;padding:.12rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-justify-content:space-between;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row}._9QXTm9Qz{position:relative}._2GUPYYBh,._9QXTm9Qz{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row}._2GUPYYBh{margin-left:-.01rem;height:.26rem}.Al-pA1E7{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;height:.26rem;max-width:.66rem;margin-right:.05rem}.Al-pA1E7:first-child{margin-left:.06rem}._1ZPKOOzl{position:relative;margin-left:-.06rem;height:.26rem;width:.26rem;border-radius:50%;border:.01rem solid #fff}._1ZPKOOzl:after{content:"";position:absolute;top:0;left:0;background-color:rgba(0,0,0,.03)}._1ZPKOOzl:after,._8qd0Vzfs{height:100%;width:100%;border-radius:50%}._8qd0Vzfs{background-color:#fff}._2BmqLLBk,._3-4tXw67{font-size:.14rem}._3-4tXw67{position:relative;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;height:.36rem;width:1.12rem;border-radius:.2rem;overflow:hidden;background:#fff;border:1px solid #bb9666}._1fBQEzV6{background:#fff6ec;border:none}@-webkit-keyframes _1qcxAz2H{0%{background-position:0 0}to{background-position:100% 0}}@keyframes _1qcxAz2H{0%{background-position:0 0}to{background-position:100% 0}}@-webkit-keyframes _3kDrRoOT{0%{-webkit-transform:scale(0) translate(-50%,-50%);transform:scale(0) translate(-50%,-50%)}to{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}}@keyframes _3kDrRoOT{0%{-webkit-transform:scale(0) translate(-50%,-50%);transform:scale(0) translate(-50%,-50%)}to{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%);opacity:1}}._1KA-shF0{position:absolute;left:50%;top:50%;-webkit-transform-origin:top left;transform-origin:top left;-webkit-transform:scale(0) translate(-50%,-50%);transform:scale(0) translate(-50%,-50%);width:1.12rem;height:1.12rem;opacity:.3;border-radius:50%;background-color:#fff6ec}.JVAqUXMk{-webkit-animation:_3kDrRoOT .2s linear 0s forwards;animation:_3kDrRoOT .2s linear 0s forwards}.kGwsGuiH{z-index:5;position:relative;margin-left:-.12rem;height:.4rem;width:.4rem;color:#b8906c;overflow:hidden}._1EHpwf_k{-webkit-animation:_1qcxAz2H .9s steps(13,start) forwards;animation:_1qcxAz2H .9s steps(13,start) forwards}._2frUliOF{height:.4rem;width:.4rem;background-repeat:no-repeat;background-position:0;background-size:cover;background-image:url("https://funimg.pddpic.com/mobile-subjects/3c1826e9-3e68-43d2-a194-fc0414b6a771.png.slim.png")}.U080KnF5{background-position:0 0}._1xxj31hF{background-position:100% 0}._1QMa4ndW{z-index:5;margin-left:-.06rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;height:.2rem;line-height:normal;color:#a37c4a}@supports not (-webkit-overflow-scrolling:touch){._1QMa4ndW{-webkit-transform:translateY(-.01rem);transform:translateY(-.01rem)}}.XHx7f_MN{color:#b8906c}@-webkit-keyframes _2qMSToxq{0%{color:#b8906c;opacity:0}to{color:#b8906c;opacity:1}}@keyframes _2qMSToxq{0%{color:#b8906c;opacity:0}to{color:#b8906c;opacity:1}}._2HYpZDcv{opacity:1;-webkit-animation:_2qMSToxq .3s linear .2s forwards;animation:_2qMSToxq .3s linear .2s forwards}._1g9vSnih{padding-top:.08rem}._2sZG4Mhu{box-sizing:content-box;position:absolute;top:-.34rem;left:.01rem;padding:.08rem .12rem;height:.14rem;border-radius:.06rem;background-color:rgba(0,0,0,.8);z-index:5}._2sZG4Mhu:after{display:block;content:"";position:absolute;top:.3rem;left:.53rem;border:.06rem solid transparent;border-top:.06rem solid rgba(0,0,0,.8);z-index:5}.qBNwfM7o{max-width:2.5rem;line-height:.14rem;font-size:.14rem;color:#fff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}',""]),t.locals={likeWrap:"_2cjGiptR",likeLeftWrap:"_9QXTm9Qz",avatarsWrap:"_2GUPYYBh",avatars:"Al-pA1E7",avatarWrap:"_1ZPKOOzl",avatarImage:"_8qd0Vzfs",likeTips:"_2BmqLLBk",likeRightWrap:"_3-4tXw67",likedRightWrap:"_1fBQEzV6",circleImg:"_1KA-shF0",circleAnimeImg:"JVAqUXMk",circleAnimation:"_3kDrRoOT",likeIcon:"kGwsGuiH",animeLikeImg:"_1EHpwf_k",likeAnimation:"_1qcxAz2H",likeImg:"_2frUliOF",normalLikeImg:"U080KnF5",activeLikedImg:"_1xxj31hF",likeBtnTips:"_1QMa4ndW",likedBtnTips:"XHx7f_MN",likeBtnTipsAnime:"_2HYpZDcv",fadeIn:"_2qMSToxq",noTag:"_1g9vSnih",tooltipWrap:"_2sZG4Mhu",tooltip:"qBNwfM7o",horizontalScan:"_1G4O7F1q"}},NmGg:function(e,t,a){e.exports={wrap:"RsqRYHkR",addressWrap:"_1x_OeL2r",address:"_1yuWvebP",hasUnpayLabel:"_3uudZP3g",detail:"_3AVfQoWk",info:"azNd96nf",labels:"_2yt7G4ks",hasEditInRepay:"_3OyH2xBq",hideArrow:"-bkjpAFf",modify:"_1NxncK6Q",horizontalScan:"_3bEu093x"}},OIse:function(e,t,a){},OUj1:function(e,t,a){var o=a("79ez"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},P4n2:function(e,t,a){var o=a("zLnL"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"PB+Z":function(e,t,a){var o=a("DOSG"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},QROL:function(e,t,a){},QYOo:function(e,t,a){var o=a("/tZv"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},Qhqg:function(e,t,a){var o=a("MmRk"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"R5+4":function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"._3qDskl97{-webkit-transform:translateZ(0)}._2j-vwTJ7{position:absolute;left:0;right:0;bottom:0;border-radius:.12rem .12rem 0 0;background-image:-webkit-linear-gradient(top,transparent,#fff 1px);background-image:-webkit-linear-gradient(top,transparent 0,#fff 1px);background-image:linear-gradient(180deg,transparent 0,#fff 1px);overflow-x:hidden;overflow-y:scroll;-webkit-animation:_2AviOTWZ .3s ease-in-out 1 forwards;animation:_2AviOTWZ .3s ease-in-out 1 forwards}._1UsmYNfT{-webkit-animation:_1_AIPSDo .3s ease-in-out 1 forwards;animation:_1_AIPSDo .3s ease-in-out 1 forwards}@-webkit-keyframes _2AviOTWZ{0%{top:100%;opacity:0}50%{top:-3%;opacity:1}to{top:0;opacity:1}}@keyframes _2AviOTWZ{0%{top:100%;opacity:0}50%{top:-3%;opacity:1}to{top:0;opacity:1}}@-webkit-keyframes _1_AIPSDo{0%{top:0;opacity:1}50%{top:-3%;opacity:1}to{top:100%;opacity:0}}@keyframes _1_AIPSDo{0%{top:0;opacity:1}50%{top:-3%;opacity:1}to{top:100%;opacity:0}}@supports (-webkit-overflow-scrolling:touch){._3e-Mc8Pq{overflow:visible!important}}",""]),t.locals={bg:"_3qDskl97",wrap:"_2j-vwTJ7",wrapAnimate:"_2AviOTWZ",backAnimation:"_1UsmYNfT",wrapBackAnimate:"_1_AIPSDo",wrapOverflowVisible:"_3e-Mc8Pq"}},SJUw:function(e,t){e.exports=window.pinbridge},SeBp:function(e,t,a){e.exports={selectIcon:"_19uMAlci",disable:"_1kUzOaLf",selected:"tEKvOe46",horizontalScan:"_1MK0DCxd"}},SzcP:function(e,t,a){e.exports={"go-top":"_23sjf2-g","top-button-hide":"_1Gy_mjzz","top-button-show":"_2hYAwwGF",container:"_3R-1_eSn",picker:"_2CHHBQpW",showPicker:"_1b6vzgEQ",mask:"_2HeJzU-8",panel:"_3lv7iolB",close:"_3vCfpVTD",closeIcon:"_pDK5P8S",content:"_2QDfZ3Gd",maskBottom:"_2WdZbFoo",maskTop:"_19vTsRkW",wrapper:"_1Paw4lTJ",scrollWrap:"_2ZGlyve6",bottomBtn:"_1ZftFGyL",horizontalScan:"_1EE8lSw9"}},"V/7h":function(e,t,a){e.exports={disableList:"_3Pya_Q_H",displayList:"_14lOykl1",displayTitle:"_2496hhou",skuList:"_2hWJ3MhR",skuBox:"GlSkMB0Y",horizontalScan:"_3z-7Z5mo"}},V00b:function(e,t,a){e.exports={bgFill:"_3j1eCmw1",bgFillShow:"_2jUnI3MZ",container:"_1jhs4MN9",visibleContainer:"_3h5sA_T5"}},VERM:function(e,t,a){e.exports={modal:"_2i8YYhhK",noShow:"_2WyLr0L_",title:"_1xwgckgQ",horizontalScan:"_1t-8YV6a"}},VwP5:function(e,t,a){var o=a("R5+4"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},"Wgq/":function(e,t,a){e.exports={discountInfo:"_27MZO91g",high:"_9HvfBBpv",discount:"_3wQ6ZDfo",gray:"_2w62lplT",discountIcon:"_3p8fGD4W",percentIcon:"_3RyZUrcl",small:"ccWKI06_",promotionName:"_2oaHBazH",horizontalScan:"_10xV5MTk"}},Wr5u:function(e,t,a){e.exports={skuSelectorDesc:"_2HvLhENT",oneLineStyle:"_2dRWBKFY",skuSelectorDescOC:"_39U91H6w",skuSelectorDescWithIcon:"_3BrHKXok",transparent:"_3O6E7nkD",skuPreSaleIcon:"_2lxyP0wq"}},X989:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,"@-webkit-keyframes _10gcOsuT{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _10gcOsuT{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._3rxU8eYt{position:fixed;left:.5rem;z-index:2001}._1OGvGdAU,._3rxU8eYt{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row}._1OGvGdAU{height:.32rem;width:.32rem;border-radius:.5rem;background-color:rgba(0,0,0,.34)}.p2mdWZU9{height:.2rem;width:.2rem}",""]),t.locals={homeContainer:"_3rxU8eYt",homeWrapper:"_1OGvGdAU",homeIcon:"p2mdWZU9",horizontalScan:"_10gcOsuT"}},XcyU:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var o=a("FdF9"),r=a("MKeS"),n=a("L67k");const s=Object(r.default)({chunkName:()=>"BigImgSlide",isReady(e){return!!a.m[this.resolve(e)]},requireAsync:()=>a.e(5).then(a.bind(null,"wMqv")),requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return"wMqv"}});function i(e){return o.default.createElement(n.a,null,o.default.createElement(s,e))}},XkPr:function(e,t,a){},Y2p2:function(e,t,a){var o=a("X989"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},YU58:function(e,t,a){e.exports={deviceInfo:"_13fhqxBC",deviceImg:"_3oSwltb8",info:"Oe3L5wCG",name:"_1Z6mhfm8",changeText:"_3auFT0Zy",tag:"_3d7o5fl4",bottomTag:"_2bbfX2qF",specsInfo:"TthbJIka",spec:"pOFmSAUi",arrow:"_3yb3MT2G",subTitle:"IkpdgxuC",deduce:"_1TrGdl9T",note:"_304Co_ln",horizontalScan:"RBWlb01T"}},YVoc:function(e,t,a){e.exports={skuSelectorBg:"lSznZClW"}},Z4L4:function(e,t,a){e.exports={selectIcon:"_2empebN8",horizontalScan:"_2--NPSTp"}},Z69V:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes _3dR-eqnr{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _3dR-eqnr{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._277HAfoV{position:absolute;top:0;left:0}._1_ak6E70{margin-left:.05rem;width:.32rem;height:.32rem;background-color:rgba(0,0,0,.34)!important;border-radius:50%}._1_ak6E70 svg{margin-top:0!important;margin-left:.06rem!important;width:.18rem!important;height:.18rem!important}._2_xFrZhK{margin-right:.12rem!important;width:.32rem;height:.32rem;background-color:rgba(0,0,0,.35)!important;border-radius:50%}._2_xFrZhK img{width:.2rem!important;height:.2rem!important}._2kHnJTO_{position:relative}._3mbpZkCY{margin-right:-.02rem;width:.32rem;height:.32rem;border-radius:50%;background-color:rgba(0,0,0,.35)!important}.m_6Hcjdj{width:100%;height:100%}.Ji1RQF8f{box-sizing:content-box;top:.46rem;right:-.44rem;padding:.08rem .12rem;height:.14rem;border-radius:.06rem;background-color:rgba(0,0,0,.8)}.Ji1RQF8f,.Ji1RQF8f:before{position:absolute;z-index:100}.Ji1RQF8f:before{display:block;content:"";top:-.12rem;right:.52rem;border:.06rem solid transparent;border-bottom:.06rem solid rgba(0,0,0,.8)}._3WQGHwSV{max-width:2.5rem;line-height:.14rem;font-size:.14rem;color:#fff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}',""]),t.locals={headWrap:"_277HAfoV",backBtnWrapper:"_1_ak6E70",shareBtnWrapper:"_2_xFrZhK",rightBtnWrap:"_2kHnJTO_",iLikeIcon:"_3mbpZkCY",iLikeImg:"m_6Hcjdj",tooltipWrap:"Ji1RQF8f",tooltip:"_3WQGHwSV",horizontalScan:"_3dR-eqnr"}},ZL4E:function(e,t,a){e.exports={skuPreSaleTip:"_2Jgdp4Dm",skuGroupBuyContainer:"LCYzdatu",startHide:"_3z21bZmw",skuGroupBuyTipHide:"_7RteKTw",skuGroupBuyAvatars:"_3kdNKhVk",skuGroupBuyHint:"y1SmezJx",skuGroupBuyHintBtn:"_3qjr7l3Z"}},a96g:function(e,t,a){e.exports={list:"_1V5O_jZv",arrow:"_1kKAxnq3",item:"_2OEkHxgO",name:"_2I1dD-vI",idCard:"_3gsCZm8_",border:"_28wV6BKW",footer:"_84qUEXe1",horizontalScan:"rCIYUGIe"}},aQEu:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a("FdF9"),r=a("ECpg"),n=a("SXY3"),s=a("S8c2"),i=a("fR85"),l=a.n(i);function c({trackingInfo:e,onClick:t}){return Object(r.d)(l.a),o.default.createElement(n.a,{trackingInfo:e},o.default.createElement("div",{className:l.a.noMore,onClick:t},o.default.createElement("span",null,"发现更多好货"),o.default.createElement(s.a,{src:"https://funimg.pddpic.com/subjects/2020-04-19/cbf36515-afc4-4b1c-90c4-2ce16fc88f4d.png",processParam:{resizeWidth:10},className:l.a.arrowIcon})))}},c3b3:function(e,t,a){e.exports={mainArea:"_2gfjGJi_",icon:"_1w7IKZX7",mobileClear:"_2-ahLH-f",horizontalScan:"_1pWAztc1"}},cBUB:function(e,t,a){e.exports={promotion:"NGUPfMa-",promotion3:"yPVq05d_",prefixPrice:"_3aTaNLaa",horizontalScan:"_28yvHDXV"}},cIxk:function(e,t,a){e.exports={dontUseItem:"_2qt2WU6J",label:"_3eLfDcZQ",horizontalScan:"_3Cgpg6Ao"}},dtTa:function(e,t,a){e.exports={usablePromotionItem:"TMkGqD8f",horizontalScan:"_3mTOA-hH"}},eJ5W:function(e,t,a){e.exports={container:"_30PbIoSp",icon:"_2G595Nyr",title:"_1ZZe67P-"}},fR85:function(e,t,a){var o=a("HzqW"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},g4LU:function(e,t,a){e.exports={popover:"_2sFbuBdZ",bg:"MfG-3mB1",bgShown:"V_7xRf2B",main:"_2aePaY0-",mainShown:"_2FXzOBOm",horizontalScan:"_3ACe8xlq"}},"gI7+":function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var o=a("MVZn"),r=a.n(o),n=a("FdF9"),s=a("g5zU"),i=a.n(s),l=a("TSYQ"),c=a.n(l),d=a("+57a"),u=a("jMCB"),p=a.n(u);const m=({style:e=null})=>n.default.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"1em",height:"1em",style:r()({width:".09rem",height:".09rem",marginLeft:".04rem"},e)},n.default.createElement("path",{d:"M0 350.06106c0-14.555334 5.555892-29.110668 16.666502-40.222451 22.222394-22.222394 58.241275-22.222394 80.444904 0L511.760148 724.487351l415.129619-415.148385c22.203628-22.222394 58.222509-22.222394 80.444903 0 22.222394 22.222394 22.222394 58.222509 0 80.444903l-428.536712 428.555478c-36.981808 36.944276-97.111406 36.944276-134.074448 0.037532L16.667675 390.283512c-11.111784-11.110611-16.667675-25.667118-16.667675-40.222452z",fill:"currentColor"})),h=n.default.memo((function({text:e,onExpand:t=(()=>null),onFold:a=(()=>null),isWhiteStyle:o=!1}){i()(p.a);const r=Object(n.useRef)(),[s,l]=Object(n.useState)(!1),[u,h]=Object(n.useState)(!1);Object(n.useEffect)((()=>{l(!1),setTimeout((()=>{const e=r.current;e.scrollHeight-e.offsetHeight>5?h(!0):h(!1)}),0)}),[e,r]);return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{ref:r,className:c()(p.a.container,{[p.a.expended]:!s},{[p.a.whiteStyle]:o})},n.default.createElement(d.a,{imageClass:p.a.emojiImage,content:e}),!s&&u&&n.default.createElement("div",{className:c()(p.a.moreButton,{[p.a.whiteStyleMoreButton]:o}),onClick:e=>{e.stopPropagation(),e.preventDefault(),l(!0),t()}},n.default.createElement("div",{className:c()(p.a.moreBlank,{[p.a.whiteStyleMoreBlank]:o})}),"展开",n.default.createElement(m,null))),s&&u&&n.default.createElement("div",{className:c()(p.a.foldedButton,{[p.a.whiteStyleFoldedButton]:o}),onClick:e=>{e.stopPropagation(),e.preventDefault(),l(!1),a()}},"收起",n.default.createElement(m,{style:{transform:"rotate(180deg)"}})))}))},gQOS:function(e,t,a){var o=a("IYLM"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},gWL1:function(e,t,a){e.exports={bubbleContainer:"_3_Hv0n-A",recCardTriangle:"_3l7sd2NN",recList:"_3cGAdVdi",recCardItem:"_4rnWftx7",horizontalScan:"Gsxkb4zW"}},gvmc:function(e,t,a){},"gze+":function(e,t,a){e.exports={skuPreSaleTip:"ceMJmCmA",skuPreSaleTipOC:"whL73SdO"}},h3V6:function(e,t,a){},h5Ql:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes _2gcojgmg{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _2gcojgmg{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._1trLT2gR{height:.89rem}._1trLT2gR,.cYaX87HR{padding-left:.44rem;position:relative;background:#fff}.cYaX87HR{height:1.39rem}._3z_wOnyG{height:1.16rem}._3z_wOnyG,._37gvz7E5{padding-left:.44rem;position:relative}._37gvz7E5{height:1.84rem}.px9-vsV6{height:2.52rem;padding-left:.44rem;position:relative}._3hwcg-FO{height:.37rem;line-height:.37rem;color:#151516;font-size:.13rem;position:relative;border:none!important}._3hwcg-FO:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid rgba(0,0,0,.05)}._12T-bV0o{font-size:.13rem;height:.37rem;line-height:.37rem;position:absolute;right:.23rem;top:0;color:#9c9c9c}._12T-bV0o:active{color:#58595b}._12T-bV0o:active:before{color:rgba(0,0,0,.35)}._281ckJtn{position:absolute;height:.12rem;width:.06rem;right:.13rem;top:.12rem}._1WlyLvbS{height:.52rem}._1WlyLvbS,._3FxNqAFV{padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._3FxNqAFV{height:1.02rem}._1e4zHMkd,._1kY24ooh{width:.99rem;height:.4rem;border-radius:.04rem;background-color:#f8f8f8;margin-right:.1rem;margin-bottom:.1rem}._1e4zHMkd{background-color:#fdf3f2}._2l0Vd4nR,._3gVdWtVT,.xAtxWEkF{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.06rem;font-size:.12rem;text-align:center}._3gVdWtVT{color:#e02e24}.xAtxWEkF{color:#9c9c9c}._1rGQmS2F,._2IgIVOHE,.gh4-MQFk{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.04rem;font-size:.12rem;text-align:center}.gh4-MQFk{color:#e02e24}._2IgIVOHE{color:#9c9c9c}._3OZkTf6Z{height:.7rem}._3DiwxQrV,._3OZkTf6Z{padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._3DiwxQrV{height:1.38rem}.R6V7Pv0r{height:2.06rem;padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.BxoqmZys{width:.13rem;height:.13rem;margin-right:.04rem;margin-top:.12rem}.sLK1W7j6{position:absolute;top:0;left:0;bottom:0;width:.32rem;z-index:1}.H-GJ_YnZ{margin-right:.1rem}.pdd_payment_list_elder_mode ._3hwcg-FO{height:.46rem;line-height:.44rem;padding-top:.02rem;font-size:.16rem}.pdd_payment_list_elder_mode ._12T-bV0o{height:.44rem;line-height:.44rem;font-size:.16rem}.pdd_payment_list_elder_mode ._12T-bV0o:before{font-size:.13rem;top:.16rem}.pdd_payment_list_elder_mode ._3FxNqAFV{height:2.06rem}.pdd_payment_list_elder_mode .BxoqmZys{width:.16rem;height:.16rem;margin-right:.04rem;margin-top:.14rem}.pdd_payment_list_elder_mode ._281ckJtn{position:absolute;height:.13rem;width:.07rem;right:.12rem;top:.16rem}',""]),t.locals={installment3Container:"_1trLT2gR",installment6Container:"cYaX87HR",installment2ContainerElder:"_3z_wOnyG",installment4ContainerElder:"_37gvz7E5",installment6ContainerElder:"px9-vsV6",title:"_3hwcg-FO",action:"_12T-bV0o",actionBtn:"_281ckJtn",installments3:"_1WlyLvbS",installments6:"_3FxNqAFV",installment:"_1kY24ooh",selectedInstallment:"_1e4zHMkd",number:"_2l0Vd4nR",selectedNumber:"_3gVdWtVT",disableNumber:"xAtxWEkF",money:"_1rGQmS2F",selectedMoney:"gh4-MQFk",disableMoney:"_2IgIVOHE",installment2Elder:"_3OZkTf6Z",installment4Elder:"_3DiwxQrV",installment6Elder:"R6V7Pv0r",bankIcon:"BxoqmZys",mask:"sLK1W7j6",installmentContainer:"H-GJ_YnZ",horizontalScan:"_2gcojgmg"}},hY3a:function(e,t,a){"use strict";var o=a("FdF9"),r=a("kMSe"),n=a("TSYQ"),s=a.n(n),i=a("weFs"),l=a("SJUw"),c=a.n(l),d=a("fMod"),u=a("h3qu"),p=a("S8c2"),m=a("ECpg"),h=a("LdZ1"),f=a("e6sO"),g=a("Ac+V"),_=a.n(g);const y=[.3,1];t.a=Object(r.c)("store")(Object(r.d)((function(e){const t=e.store||{},a=t.$shareConfig||{},r=t.$title||"拼多多",{onShareClick:n,setNativeShareButton:l=!1}=a,g=!l,b=e.maxOffsetTuple?[0,e.maxOffsetTuple]:[0,160],v=Object(o.useContext)(d.a),[k,I]=Object(o.useState)(0),w=Object(o.useContext)(f.a),{showBlackTextThroshold:S=.4}=e,{statusBarStyle:E=[1,0],stickyClassName:C}=e,{isImmersive:P}=v;Object(m.d)(_.a),Object(o.useEffect)((()=>{if(P)return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)};function e(){const e=Object(i.c)();let t;t=e<=b[0]?0:e>=b[1]?1:y[0]+(y[1]-y[0])*(e-b[0])/(b[1]-b[0]),I(t)}}),[b,P]);const N=k>S&&!e.bgImg;Object(o.useEffect)((()=>{if(w.platform.isNativePlatform&&w.platform.platform===u.a.PddAndroid&&P){let e;const[t,a]=E||[];e=t===a?t:N?"0":"1",c.a.callNative("JSUIControl","setStatusBarTextColor",{color:e})}}),[N,P,w.platform.isNativePlatform,w.platform.platform,E]),Object(o.useEffect)((()=>{w.platform.isNativePlatform&&w.platform.platform===u.a.PddIOS&&P&&c.a.callNative("JSUIControl","setRollingAlpha",{offset:b,status_bar_style:E})}),[b,P,w.platform.isNativePlatform,w.platform.platform,E]);const O=()=>{n&&"function"==typeof n&&n()},D=e.color?{fill:e.color}:null;return P?o.default.createElement("div",{className:s()(e.className,_.a.wrap),style:{height:v.navigationHeight}},o.default.createElement(d.c,null),o.default.createElement("div",{className:s()({[_.a.sticky]:P},C),style:{background:e.noGradient?e.bgColor||"transparent":`rgba(255, 255, 255, ${k})`}},P&&o.default.createElement("div",{className:_.a.titleWrapper,style:{background:e.bgColor||""}},e.bgImg&&o.default.createElement(p.a,{src:e.bgImg,className:_.a.backgroundImg}),!!v.statusbarHeight&&o.default.createElement("div",{style:{height:v.statusbarHeight}}),!!v.navigationHeight&&o.default.createElement("div",{className:s()(_.a.nav,"flex-box","align-center",{[_.a.blackText]:N}),style:{height:v.navigationHeight-v.statusbarHeight}},o.default.createElement(o.default.Fragment,null,P?o.default.createElement("div",{className:s()(_.a.backBtn,e.backBtnWrapClassName)},o.default.createElement("svg",{viewBox:"0 0 1024 1024",className:_.a.back,onClick:e.onNavigationBack||h.a,style:D},o.default.createElement("path",{d:"M525.89 1021.75a24.63 24.63 0 0 1-17.21-7L8.51 529.45a24.72 24.72 0 0 1 0-35.48L508.68 8.64a24.72 24.72 0 0 1 34.42 35.49L61.21 511.71l481.9 467.59a24.72 24.72 0 0 1-17.21 42.46z m0 0"}))):null,(()=>{if(e.noTitle)return null;const t=e.hideInitTitle&&N||!e.hideInitTitle,a=t&&!e.titleImg,n=t&&e.titleImg;if(r){const t=e.longTitle?_.a.longTitle:_.a.title,i={marginTop:e.longTitle||w.platform.platform!==u.a.PddAndroid?"0":".02rem"};return o.default.createElement("div",{className:s()(t,"flex-box","justify-center",{[_.a.left]:!P}),style:i,onClick:e.onTitleClick},a&&r,n&&o.default.createElement(p.a,{className:_.a.titleImg,src:e.titleImg}))}return null})(),o.default.createElement("div",{className:"flex-cell"}),(()=>{if(e.rightBtnTemplate&&P)return o.default.createElement("div",{className:_.a.rightBtn},e.rightBtnTemplate(N))})(),g&&P?o.default.createElement("div",{className:s()(_.a.share,e.shareBtnWrapClassName),onClick:O},o.default.createElement(p.a,{className:s()(_.a.shareImg,{hide:N}),src:"https://funimg.pddpic.com/weather/2019-08-29/c3873506634f0ac156f2de191fb3def0.png"}),o.default.createElement(p.a,{className:s()(_.a.shareImg,{hide:!N}),src:"https://funimg.pddpic.com/weather/2019-08-29/4f74448a6fa6f78d6efa7398fda53413.png"})):null))))):null})))},i4d4:function(e,t,a){e.exports={skuQuantityTip:"_2Icr8_BZ",skuQuantityTipTxt:"_3Y4I8_Gq"}},i7vn:function(e,t,a){e.exports={addressInfo:"_35_YyHlO",location:"_20Aew5Dn",icon:"_337DifRr",info:"_lytPIiU",receiver:"_2XUxNfYs",name:"_2Ca-NXhN",mobile:"_2KH3N__4",city:"_1e1he_ng",detail:"Y7f6W3f-",instruction:"_2ZvGIBQh",arrow:"anVcJFoP",horizontalScan:"OzFssC46"}},iYsC:function(e,t,a){var o=a("h5Ql"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},iuD5:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var o=a("MVZn"),r=a.n(o),n=a("KoDT"),s=a("0P1e"),i=a("3sKm"),l=a("7wPb"),c=a("Dqx9");let d,u,p;async function m(e,t){const a=Object(c.g)(),o=Object(c.f)(),{pageSN:m,pageId:h,pageName:f,referPageId:g,referPageName:_,referPageSN:y}=o;if(d=d||Object(n.a)(),!u)try{u=await Object(s.a)().catch((()=>0))}catch(w){}if(!p)try{p=await Object(i.b)()}catch(w){}const{platform:b,version:v}=d||{},k=r()(r()({},e),{},{page_sn:m,page_id:h,page_name:f,refer_page_id:g,refer_page_name:_,refer_page_sn:y,network:u,platform:b,user_id:p,page_url:window.location.href,app_version:v}),I=Object(l.b)(k,t||a);Object(l.a)(I,t||a)}async function h(e,t){await m(r()(r()({},e),{},{type:c.b.NORMAL_LOG}),t)}},j3Tn:function(e,t,a){e.exports={"go-top":"oqFG3ntj","top-button-hide":"_3E50RqNV","top-button-show":"_3pAwhFiS",container:"OJC7WbJY",repayModifyPanel:"_19itYPyH",content:"UiwvgrJB",slideIn:"_2Fl25pqA",horizontalScan:"qOc8FIeJ"}},jMCB:function(e,t,a){var o=a("5Jhb"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},losq:function(e,t,a){e.exports={payment:"ZuLf7LIZ",paymentlist:"_35gWhmMg",border:"AIEuNy_D",title:"_1nRWcrCG",closeIcon:"_3NT450Jv",pmBg:"_13CS1S_Z",horizontalScan:"_2QymTb-M"}},m3JE:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a("FdF9");function r(e){const[t,a]=Object(o.useState)(e),r=Object(o.useRef)(null);return Object(o.useEffect)((()=>{r.current&&(r.current(t),r.current=null)}),[t]),[t,(e,t)=>{r.current=t,a(e)}]}},mElW:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i}));var o=a("KoDT"),r=a("1Irm");let n;async function s(e){Object(o.b)(window.navigator.userAgent).isTinyNativePlatform&&(n=await Object(r.a)("onBackPressed",(()=>{e&&e()})))}function i(){Object(o.b)(window.navigator.userAgent).isTinyNativePlatform&&n&&n()}},muwb:function(e,t,a){e.exports={name:"_2VFBW8vk",price:"_1i_A_hcB",promotion:"_1XHpKxDC",promotion3:"_1_HbSoTk",horizontalScan:"_1NMYw4Iv"}},n1qw:function(e,t,a){var o=a("xlN4"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},nPn9:function(e,t,a){e.exports={container:"_2HIQZIMf",paymentlistv2:"_3a19jAbU",channelBottomContent:"_6lTJ5Uid",placeholder:"_1bfPZ5mk",group:"_1MCpxnX2",groupUnspreadContainer:"MmPf4oi6",groupUnspread:"dz4LzaYn",groupTitle:"_1-jK3f3k",groupSpreadTitle:"yfkjMSlw",groupSubtitle:"_3s_8s-sx",groupSubtitleIcon:"_1jxRRHzH",groupBorder:"_1ZhUiZTV",groupSelectedSvg:"_8y-98jbs",horizontalScan:"_3oXh1qLY"}},neJy:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'.xKNBK4zG{position:relative;padding:.15rem 0;height:.48rem;border-bottom:1px solid rgba(0,0,0,.05);overflow:hidden}._1RMRji-U{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.NLLBSaXj{position:relative;height:.17rem;line-height:.17rem;font-size:.17rem;color:#151516;margin:0 .08rem}._1_-Q11im,.ClMLyGHd{font-weight:700}.ClMLyGHd{color:#b8906c}.ClMLyGHd:after{content:"";position:absolute;bottom:-.15rem;left:0;width:.68rem;height:.02rem;background-color:#b8906c;border-radius:.015rem}.hyIt5EOB{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;flex-flow:row wrap;width:3.51rem;overflow:hidden;margin:0 0 .12rem .12rem}._1tRV6cGL,.hyIt5EOB{display:-webkit-box;display:-webkit-flex;display:flex;height:.19rem}._1tRV6cGL{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-shrink:0;flex-shrink:0;line-height:normal;padding:0 .04rem;font-size:.13rem;color:#b8906c;border:1px solid #efe2d7;background-color:#fff6ec;border-radius:.02rem;margin-right:.04rem;white-space:nowrap}.qt2deUoH{width:7.5rem;height:calc(100% - .48rem);display:-webkit-box;display:-webkit-flex;display:flex}.qt2deUoH ._1uTFxlm6,.qt2deUoH .osJfPGdU{width:3.75rem;height:100%}.GmQIpbfA{-webkit-transform:translateX(-3.75rem);transform:translateX(-3.75rem)}._2kBD9Lhb{padding:0 .12rem .4rem;height:100%;overflow-y:scroll}.EEVdGyGc{width:3.75rem;height:.11rem}._23P6Sokh{display:-webkit-box;display:-webkit-flex;display:flex}.lLS5SlDl{width:.24rem;height:.24rem;border-radius:50%;background-color:#fcfcfc;overflow:hidden;-webkit-box-flex:0;-webkit-flex:none;flex:none}.lLS5SlDl img{width:100%;height:100%}._1UOisWwm{padding:.02rem 0 .2rem .08rem;font-size:.14rem;line-height:.2rem}._2Gw3S-_v{color:#151516}._3hJVx5Z1{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:.05rem}._2YvjGrk3{position:relative;width:1.02rem;height:1.02rem;border-radius:.02rem;overflow:hidden;background-position:50%;background-size:cover;background-repeat:no-repeat;background-color:#fafafa;margin-right:.06rem}._2YvjGrk3:last-child{margin-right:0}._2iMXZ3pf{position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:.2rem;line-height:.2rem;color:#fff}._1PGO1f-9{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:.36rem;height:.36rem}._2eShXdnJ{padding:0!important;font-size:.13rem!important;color:#9c9c9c!important}._25SI2Th9{height:87%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#9c9c9c;font-size:.13rem}._1D2AL_Gy,._25SI2Th9{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}._1D2AL_Gy{font-size:.14rem;line-height:.2rem;margin-top:.12rem;color:#58595b}._1D2AL_Gy ._1FAndj7K{width:.24rem;height:.24rem;border-radius:50%;margin-right:.08rem}._1D2AL_Gy ._1FAndj7K,._1D2AL_Gy ._2fWaUe7l{-webkit-box-flex:0;-webkit-flex:none;flex:none}._1D2AL_Gy ._2fWaUe7l{width:.38rem;white-space:nowrap;overflow:visible;color:#151516}._1D2AL_Gy .Om6Qy4eM{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:0 .16rem}._1D2AL_Gy ._1QcuHrQS{-webkit-box-flex:0;-webkit-flex:none;flex:none;margin-left:auto}',""]),t.locals={titleContainer:"xKNBK4zG",titleBlockLine:"_1RMRji-U",titleBlock:"NLLBSaXj",aloneTitleBlock:"_1_-Q11im",activeTitleBlock:"ClMLyGHd",tags:"hyIt5EOB",tag:"_1tRV6cGL",bigBlock:"qt2deUoH",left:"osJfPGdU",right:"_1uTFxlm6",move:"GmQIpbfA",list:"_2kBD9Lhb",whiteBlock:"EEVdGyGc",item:"_23P6Sokh",avatar:"lLS5SlDl",desc:"_1UOisWwm",name:"_2Gw3S-_v",imgList:"_3hJVx5Z1",imgItem:"_2YvjGrk3",imgMask:"_2iMXZ3pf",videoIcon:"_1PGO1f-9",listEnd:"_2eShXdnJ",noComments:"_25SI2Th9",orderLine:"_1D2AL_Gy",orderAvatar:"_1FAndj7K",orderName:"_2fWaUe7l",orderText:"Om6Qy4eM",orderPayTime:"_1QcuHrQS"}},nvxi:function(e,t,a){e.exports={"go-top":"_1zQYd1o7","top-button-hide":"y7ee4wbr","top-button-show":"_2rU2IKTe",container:"_21Ez64RH",confirm:"_3WULDPya",tips:"_38DnetGC",button:"_2CGcJfmU",price:"_2hdDlqRA",cancel:"_2lG7DOz-",placeholder:"_1_zo7aEJ",horizontalScan:"_1NivS05g"}},oobu:function(e,t,a){e.exports={bottomTip:"_3OF9G0I3",tip:"U-_e98m4",icon:"_17GE0h5R",horizontalScan:"_3i1jFfe0"}},ooc8:function(e,t,a){e.exports={redPacketItem:"_1KcwvgOe",reward:"_2u2Yw3OP",redPacket:"_2P0Eyai_",couponAmount:"_2HAMUW9q",priceIcon:"_2POxf0tc",num:"_376wIwoy",couponTag:"bBKTlu8-",couponTagTxt:"KzVgr315",redPacketInfo:"_3zHxzdtT",fullBackName:"_3GiDgZ99",processStatusDesc:"_2ASfzxT5",progress:"_3xsuSb75",progressBarOuter:"KqC_PZil",progressBarInner:"-OcuSPZl",horizontalScan:"_3aRyikgP"}},oyVP:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'._1M4lPMyz{position:relative;color:#fff}._3XJkk5ex{white-space:nowrap;padding:.1rem;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:.17rem;-webkit-box-align:center;-webkit-align-items:center;align-items:center}._3XJkk5ex._1y2rFBc_{left:.07rem;-webkit-transform:translateY(-50%);transform:translateY(-50%)}._3QbMUeXR{width:.96rem;height:.25rem;margin-left:.01rem;margin-top:-.015rem;font-size:0}@supports not (-webkit-overflow-scrolling:touch){._3QbMUeXR{margin-top:-.025rem}}._1jbzqJHN{position:absolute;left:calc(50% - 1.02rem);width:2.04rem;height:.24rem;text-align:center;font-size:.17rem;word-break:break-all;overflow:hidden;-webkit-box-align:stretch;-webkit-align-items:stretch;align-items:stretch}.RIsz4rVB{width:.32rem;height:.32rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-left:.12rem}.RIsz4rVB .crINhVgP{height:.2rem;margin-left:.1rem;margin-top:.01rem;fill:#fff}.Lx4pLlHC{margin-right:.06rem;width:.16rem;height:.16rem;background:url("https://funimg.pddpic.com/weather/2019-07-29/6b32bf043f3230eb0d9e0b760f3afee4.png") 50% no-repeat;background-size:contain;-webkit-animation:_2KGXSKi6 1s linear infinite;animation:_2KGXSKi6 1s linear infinite}._1tvMlTpj{color:#000}._1tvMlTpj .RIsz4rVB{background-color:transparent}._1tvMlTpj .RIsz4rVB .crINhVgP{fill:#000}._1tvMlTpj .RIsz4rVB .crINhVgP:active{opacity:.7}._1tvMlTpj ._1tlUw30E{background-color:transparent}._2d30tRMb{margin-right:.14rem}._1tlUw30E,._2d30tRMb{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}._1tlUw30E{margin-right:.11rem;width:.32rem;height:.32rem;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}._6ZMNcfUQ{width:.24rem;height:.24rem}._6ZMNcfUQ:active{opacity:.7}._15dHRqwd{margin-right:.14rem;font-size:.13rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}._2Ly1L4EY{position:fixed;left:0;top:0;right:0;z-index:2000!important}.J0AFwwff{height:.14rem;width:.24rem;margin-left:.04rem}._3FSNro-f{position:relative}._2JyKYoI0{position:absolute;bottom:0}@-webkit-keyframes _2KGXSKi6{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes _2KGXSKi6{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}._3vze1xUn{width:100%}',""]),t.locals={nav:"_1M4lPMyz",title:"_3XJkk5ex",left:"_1y2rFBc_",titleImg:"_3QbMUeXR",longTitle:"_1jbzqJHN",backBtn:"RIsz4rVB",back:"crINhVgP",loadingIcon:"Lx4pLlHC",loading:"_2KGXSKi6",blackText:"_1tvMlTpj",share:"_1tlUw30E",rightBtn:"_2d30tRMb",shareImg:"_6ZMNcfUQ",remind:"_15dHRqwd",sticky:"_2Ly1L4EY",remindImg:"J0AFwwff",titleWrapper:"_3FSNro-f",backgroundImg:"_2JyKYoI0",wrap:"_3vze1xUn"}},"p+lt":function(e,t,a){},p4Jp:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes p2_DWbdr{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes p2_DWbdr{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._2xsQ028A{position:relative;width:3.75rem;background-color:#fff;margin-bottom:.08rem}._1No638-L{top:0;margin-top:0;padding-left:.08rem;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;flex-flow:row wrap;height:.23rem;width:3.51rem;color:#656565;font-size:.12rem;overflow:hidden}._1No638-L,._3bt2xUtJ{position:relative;display:-webkit-box;display:-webkit-flex;display:flex}._3bt2xUtJ{padding:0 .04rem;margin:.02rem .04rem .02rem 0;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-flex-shrink:0;flex-shrink:0;box-sizing:border-box;height:.19rem;line-height:normal;color:#b8906c;background-color:#fff6ec;border:.01rem solid #e9ddd1;border-radius:.02rem;white-space:nowrap}._3bt2xUtJ._2XI-YfaE{color:#788cc5;background-color:#f2f6ff;border-color:#ccd6ed}.cxhc6IoZ{padding:.12rem 0;-webkit-box-pack:justify;justify-content:space-between;-webkit-justify-content:space-between}._2VoesaXQ,.cxhc6IoZ{display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row}._2VoesaXQ{-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;width:1.04rem;height:.36rem;line-height:normal;font-weight:600;font-size:.16rem;border-radius:.18rem;background:-webkit-linear-gradient(top left,#c9a075 1%,#af875d);background:linear-gradient(to bottom right,#c9a075 1%,#af875d);color:#fff;position:relative}._2VoesaXQ:active:after{content:"";position:absolute;border-radius:inherit;top:0;left:0;width:100%;height:100%;pointer-events:none;background:rgba(0,0,0,.08)}.bZiajt5-{padding-top:.08rem}.KJiQoEhs{padding:0 .12rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;height:.38rem;color:#a37c4a;font-size:.14rem;background:#fff;position:relative;border-top:1px solid rgba(0,0,0,.05)}.KJiQoEhs:active:after{content:"";position:absolute;border-radius:inherit;top:0;left:0;width:100%;height:100%;pointer-events:none;background:rgba(0,0,0,.08)}._2t2XwOth{width:.06rem;height:.1rem;margin-left:auto}.j_cuk7c6{width:.13rem;height:.14rem;margin-top:-.02rem;margin-right:.07rem}._3hqDdds-{margin-bottom:.08rem;background-color:#eee}._3Y7EMPtQ{width:3.75rem;height:3.75rem;overflow:hidden}._324H_6us{width:100%;height:auto}._2tSdKOQQ{width:3.75rem;height:1.52rem;background-repeat:no-repeat;background-size:100% 100%;background-position:50%}._1EsPLs8P{padding-top:.05rem;margin:-.13rem .12rem 0 0}._1VrNy_34{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:.14rem;line-height:.24rem;margin-top:.08rem}._1VrNy_34 ._1NiNo9Kq{width:.24rem;height:.24rem;border-radius:50%;margin-right:.06rem}._1VrNy_34 ._1NiNo9Kq,._1VrNy_34 ._1NIv-iek{-webkit-box-flex:0;-webkit-flex:none;flex:none}._1VrNy_34 ._1NIv-iek{color:#151516}._1VrNy_34 ._2PkBx_fG{-webkit-box-flex:initial;-webkit-flex:initial;flex:initial;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#58595b;margin-left:.04rem}._1VrNy_34 ._2bSd2F1i{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:0;-webkit-flex:none;flex:none;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:.36rem;height:.24rem;font-size:.14rem;line-height:.24rem;color:#9c9c9c}._1VrNy_34 ._2bSd2F1i ._1Oql1UwM{width:.16rem;height:.14rem;margin-right:.04rem;margin-left:.08rem}._1VrNy_34 ._2bSd2F1i span{width:.08rem;text-align:center}._1fyegMg0{width:.2rem;height:.2rem}.osAtzKcu{width:3.75rem;height:.61rem}._3eXZhceT,.osAtzKcu{background-color:#fff}._3eXZhceT{position:fixed;bottom:0;z-index:2;-webkit-transform:translateZ(0)}._3H4-3U4c{width:3.75rem;height:1px;background-color:rgba(0,0,0,.05)}.xpThgqVF{padding-left:.12rem;background-color:#fff}.xpThgqVF .fRviZq7J{position:relative;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:.38rem;font-size:.14rem;line-height:.22rem}.xpThgqVF .fRviZq7J:after{content:"";position:absolute;left:0;bottom:0;width:200%;height:1px;background-color:rgba(0,0,0,.05);-webkit-transform:scale(.5) translateZ(0);transform:scale(.5) translateZ(0);-webkit-transform-origin:0 0;transform-origin:0 0}.xpThgqVF .fRviZq7J ._2WBHZXng{color:#58595b;-webkit-box-flex:0;-webkit-flex:none;flex:none}.xpThgqVF .fRviZq7J .Iy7zgdFI{-webkit-align-self:flex-start;align-self:flex-start;max-width:2.94rem;height:.38rem;line-height:.38rem;overflow:hidden;color:#151516;margin-left:.12rem}.xpThgqVF .fRviZq7J ._3bzMsmjI{-webkit-box-flex:0;-webkit-flex:none;flex:none;vertical-align:baseline;fill:#d8d8d8;width:.13rem;height:.13rem;margin-left:auto;margin-right:.09rem}.xpThgqVF ._174edV6k:after{background-color:#fff}',""]),t.locals={topGoodsWrap:"_2xsQ028A",tags:"_1No638-L",tag:"_3bt2xUtJ",social:"_2XI-YfaE",moreWrap:"cxhc6IoZ",moreBtn:"_2VoesaXQ",noTag:"bZiajt5-",awardWrap:"KJiQoEhs",arrowIcon:"_2t2XwOth",cup:"j_cuk7c6",phTopGoods:"_3hqDdds-",phImageWrap:"_3Y7EMPtQ",phImage:"_324H_6us",phInfo:"_2tSdKOQQ",commentList:"_1EsPLs8P",commentLine:"_1VrNy_34",commentAvatar:"_1NiNo9Kq",commentName:"_1NIv-iek",commentText:"_2PkBx_fG",commentIcon:"_2bSd2F1i",picIcon:"_1Oql1UwM",emojiImage:"_1fyegMg0",placeHolder:"osAtzKcu",likeContainer:"_3eXZhceT",line:"_3H4-3U4c",content:"xpThgqVF",contentLine:"fRviZq7J",contentName:"_2WBHZXng",contentText:"Iy7zgdFI",contentArrow:"_3bzMsmjI",lastLine:"_174edV6k",horizontalScan:"p2_DWbdr"}},r5oO:function(e,t,a){e.exports={container:"_2tMDCcio",cell:"_3wowRIPX",indicator:"_3DqJ9iWK",addAddress:"C5MWyQF5",addIcon:"DDKLQpWM",horizontalScan:"_3oIqEVdE"}},"t+XH":function(e,t,a){var o=a("p4Jp"),r=a("Q8e5"),n="string"==typeof o?[[e.i,o,""]]:o;(t=e.exports=o.locals||{})._getContent=function(){return n},t._getCss=function(){return""+o},t._insertCss=function(e){return r(n,e)}},tV1M:function(e,t,a){e.exports={paymentList:"_2Mzvz1Zh",listWrap:"_1b6JbsTD",picc:"_35eqY3fb"}},uorM:function(e,t,a){e.exports={skuSelectorCloseBtn:"_1ifQun1H",skuSelectorBody:"_3NXAWOJU",safeDistance:"_3hcWlBV3",skuSelectorBottom:"_2w4vNs31",startHide:"_3c9_AR-L",toHide:"H5vllzzb",startDisplay:"_3O5dZJUh",toDisplay:"_2MEr7QUP",skuSelectorContainer:"_2Aq-Ugkh",skuSelectorHead:"nxbx3dAD",skuSpecs:"_1XqP0nf5",selectorNumber:"_3Lu0pvej",numberStepper:"N2qkjyDl",skuSelectorReduce:"_35TEciAA",skuSelectorReduceEnable:"_2BM66E_I",skuSelectorReduceDisable:"_6YH6EkH8",skuSelectorInput:"_2Dfevmvi",skuSelectorIncrease:"_3sjUUFAM",skuSelectorIncreaseEnable:"fFnfVnqP",skuSelectorIncreaseDisable:"_1nfoL_XT",sizeDesc:"_1fhWBb8Y",skuSizeChartRed:"aaeM-47L",skuSpecValueList:"_3P3M8kC-",hotSale:"_1aQaErYF",skuSpecValue:"_1WyUf92E",hotSaleIcon:"_1JOBwSlu",skuSpecValueSelected:"_2bBCR7qt",skuSpecValueDisable:"PphFt0vU",horizontalScan:"Ak8nfERB"}},"v/Ss":function(e,t,a){e.exports={normalSkuModal:"_1y1aeNA3",normalSkuModalSkuDirectOrder:"_3zIg1i_3"}},v5F4:function(e,t,a){e.exports={deliveryStripe:"_3vO3WpIa",deliveryContent:"_2X1hV6Jv",deliverySvg:"_1cEkez0v",arrow:"_16aZoG9o",deliveryList:"_3htAJlnB",title:"_3P_nZd5j",closeBtn:"_27fcHtOA",deliveryItem:"_3dwidqQm",selected:"_2kGgPlxg",horizontalScan:"_1oGNDG2U"}},v796:function(e,t,a){e.exports={idModifyHint:"kVjIVSxQ",border:"_1KAw0rZw",line:"_2DdaMJny",icon:"B-Jz_LzB",text:"_27OMwNt3",title:"_23-PbjYD",desc:"_1PsHcgrY",action:"_3tN1jEXk",btn:"_2xnh3bvX",grayBtn:"_1raY2VeX",horizontalScan:"ok0Xemz8"}},v9rC:function(e,t,a){},vVBQ:function(e,t,a){e.exports={logoWrap:"_2fyYanh2",logo:"JwB7pONe",container:"_1ZOUDxNT",titleWrap:"_1Z5-NKbM",title:"_2N3eqqnQ",backBtnWrap:"_1zJsR3Ak",backBtn:"VverBJBN",couponItem:"_1KE5Ff4X",couponTag:"_1HWJRLGb",couponPrice:"_3p55_8W2",couponInfo:"oZGtSc2O",phoneContent:"_3GbNmVDx",clearButton:"_2g_U8jus",verifyCode:"_3aBIMQ0U",verifyCodeActive:"QaofrByL",inputBox:"_3Ij3ZKeN",codeInputBox:"_3X88btx8",joinBtn:"t_hnfMIz",rule:"_1YVeAvo0",ruleText:"_2faMvETa",phoneContainer:"_3DN_lbhf",phoneTitleWrap:"_3PJqQ-xU"}},wekK:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'@-webkit-keyframes _3Mno39XX{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}@keyframes _3Mno39XX{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(200%,0,0);transform:translate3d(200%,0,0)}}._3f1JMFzp{position:relative;padding-left:.12rem;height:.46rem;line-height:.46rem;background-color:#fff}._3f1JMFzp._1frDSkty{pointer-events:none}._3f1JMFzp._14ZLILa-,.pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1rem}._3f1JMFzp:not(._14ZLILa-):active:not(:first-child) ._3t3V2co2:after{content:none}._3f1JMFzp:not(._14ZLILa-):active:not(._14ZLILa-)+._3f1JMFzp ._3t3V2co2{border-top:1px solid #fff}div._3f1JMFzp:first-of-type ._3t3V2co2:after{content:none}._3f1JMFzp[data-active=before-white]:active:before{opacity:.08}._3t3V2co2{width:100%;font-size:0;position:relative;border:none!important}._3t3V2co2:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid #ededed}._3t3V2co2 ._2injgcfL{margin-left:.04rem}._3t3V2co2 ._2injgcfL ._2QBPsFuu{display:inline-block;width:.22rem;height:.45rem;margin-right:.04rem;position:relative;vertical-align:top}._3t3V2co2 ._2injgcfL ._2QBPsFuu img{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:.22rem}._3t3V2co2 ._1Z5TdEwR{position:relative;height:.46rem;text-align:left}._1PFsuIUL{background:url(https://funimg.pddpic.com/pay_icon/alipay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._1CnXvRsx,._1PFsuIUL{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._1CnXvRsx{background:url(https://funimg.pddpic.com/pay_icon/wechat_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3XygMUK5{background:url(https://funimg.pddpic.com/pay_icon/qq_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3vucH7ff,._3XygMUK5{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._3vucH7ff{background:url(https://funimg.pddpic.com/pay_icon/friend_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3McrIaJK{background:url(https://funimg.pddpic.com/pay_icon/duoduo_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._2mAKK6dA,._3McrIaJK{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._2mAKK6dA{background:url(https://funimg.pddpic.com/pay_icon/hb_installment_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3HinBJLb{background:url(https://funimg.pddpic.com/pay_icon/hb_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._1QMjdH6n,._3HinBJLb{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._1QMjdH6n{background:url(https://funimg.pddpic.com/pay_icon/xyhf_v3.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}.bP1-sBd2{background:url(https://funimg.pddpic.com/pay_icon/apple_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._19olO3U_,.bP1-sBd2{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._19olO3U_{background:url(https://funimg.pddpic.com/zhuhai_png/2020-12-06/1aecea68-ed03-41a2-89ef-37b7986a4635.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3EumGWhj{background:url(https://funimg.pddpic.com/zhuhai_png/2020-08-19/e6fb26b4-24bc-43a2-9fd0-a1344e7ea48f.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3EumGWhj,._21GMqN4P{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._21GMqN4P{background-size:.22rem .22rem;background-repeat:no-repeat}._3DLN0C5d{margin-left:.32rem;font-size:.15rem;color:#151516}._30P7ub84{position:absolute;top:.15rem;right:0;width:.16rem;height:.16rem;margin-right:.12rem;line-height:.16rem;fill:#58595b}._1yOWzRTS{height:1rem}._287rdYha[data-active=before-white]:active:before{opacity:.08}._2injgcfL{position:relative;font-size:.13rem;color:#58595b}._2injgcfL ._2qBOBZaq{padding:.01rem}.mtfrtIKR ._3DLN0C5d{color:rgba(21,21,22,.2)}.mtfrtIKR ._3DLN0C5d:before{opacity:.4}.mtfrtIKR ._2injgcfL{color:#9c9c9c}._1cj95KqM{float:right;font-size:.14rem;color:#151516;opacity:.2;margin-right:.12rem}._2HSzi9Mi{position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);vertical-align:top}.pdd_payment_list_v2_mode ._3f1JMFzp{line-height:.5rem;height:.5rem}.pdd_payment_list_elder_mode .pdd_payment_list_v2_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_elder_mode .pdd_payment_list_v2_mode ._3f1JMFzp._27Hsd-bC,.pdd_payment_list_v2_mode ._3f1JMFzp._14ZLILa-,.pdd_payment_list_v2_mode .pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_v2_mode .pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1.02rem}.pdd_payment_list_v2_mode ._3t3V2co2{height:.5rem;line-height:.5rem}.pdd_payment_list_v2_mode ._3t3V2co2 ._1Z5TdEwR{height:.5rem}.pdd_payment_list_v2_mode ._3t3V2co2:after{left:.3rem;right:calc(-100% + .3rem)}.pdd_payment_list_v2_mode ._3t3V2co2._3Pn2PnvI:after{margin-left:0}.pdd_payment_list_v2_mode ._1yOWzRTS{height:1.02rem}.pdd_payment_list_v2_mode ._30P7ub84{top:.17rem}.pdd_payment_list_v2_mode ._1CnXvRsx,.pdd_payment_list_v2_mode ._1PFsuIUL,.pdd_payment_list_v2_mode ._1QMjdH6n,.pdd_payment_list_v2_mode ._2mAKK6dA,.pdd_payment_list_v2_mode ._3EumGWhj,.pdd_payment_list_v2_mode ._3HinBJLb,.pdd_payment_list_v2_mode ._3McrIaJK,.pdd_payment_list_v2_mode ._3vucH7ff,.pdd_payment_list_v2_mode ._3XygMUK5,.pdd_payment_list_v2_mode ._19olO3U_,.pdd_payment_list_v2_mode ._21GMqN4P,.pdd_payment_list_v2_mode .bP1-sBd2{width:.2rem;height:.2rem;background-size:.2rem .2rem;top:.15rem;margin-left:.01rem}.pdd_payment_list_v2_mode ._3DLN0C5d{font-size:.14rem}.pdd_payment_list_elder_mode ._3f1JMFzp{line-height:.56rem;height:.56rem}.pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1.94rem}.pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab{height:1.26rem}.pdd_payment_list_elder_mode ._30P7ub84{top:.2rem}.pdd_payment_list_elder_mode ._1cj95KqM{font-size:.18rem;line-height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2{height:.56rem;line-height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2 ._1Z5TdEwR{height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2 ._2injgcfL ._2QBPsFuu{width:.22rem;height:.56rem}.pdd_payment_list_elder_mode ._1CnXvRsx,.pdd_payment_list_elder_mode ._1PFsuIUL,.pdd_payment_list_elder_mode ._1QMjdH6n,.pdd_payment_list_elder_mode ._2mAKK6dA,.pdd_payment_list_elder_mode ._3EumGWhj,.pdd_payment_list_elder_mode ._3HinBJLb,.pdd_payment_list_elder_mode ._3McrIaJK,.pdd_payment_list_elder_mode ._3vucH7ff,.pdd_payment_list_elder_mode ._3XygMUK5,.pdd_payment_list_elder_mode ._19olO3U_,.pdd_payment_list_elder_mode ._21GMqN4P,.pdd_payment_list_elder_mode .bP1-sBd2{top:.17rem}.pdd_payment_list_elder_mode ._3DLN0C5d{font-size:.18rem}',""]),t.locals={padding:"_3f1JMFzp",disable:"_1frDSkty",paddingInstallment:"_14ZLILa-",paddingInstallment4Elder:"_27Hsd-bC",paddingInstallment2Elder:"_1G7UZoab",item:"_3t3V2co2",hints:"_2injgcfL",icon:"_2QBPsFuu",text:"_1Z5TdEwR",pALIPAY:"_1PFsuIUL",pWEIXIN:"_1CnXvRsx",pQQ:"_3XygMUK5",pWEIXIN_FRIEND:"_3vucH7ff",pDUODUOPAY:"_3McrIaJK",pHBFQ_ALI_PAY:"_2mAKK6dA",pHB_ALI_PAY:"_3HinBJLb",pWEIXIN_CREDIT:"_1QMjdH6n",pLIANLIANPAY:"bP1-sBd2",pUNIONPAY:"_19olO3U_",pDUODUOPAY_ACS:"_3EumGWhj",pfuji:"_21GMqN4P",method:"_3DLN0C5d",selectedSvg:"_30P7ub84",itemInstallment:"_1yOWzRTS",hbMask:"_287rdYha",space:"_2qBOBZaq",itemDisable:"mtfrtIKR",itemDisableText:"_1cj95KqM",richTextImg:"_2HSzi9Mi",installmentFlag:"_3Pn2PnvI",horizontalScan:"_3Mno39XX"}},wgWF:function(e,t,a){},x2pu:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'._1et1XRkd{position:relative;background-color:#fcfcfc;border-radius:50%;box-sizing:content-box}._1et1XRkd._1RVvo_G6{border:1px solid transparent}._2_aTccLU{display:inline-block;vertical-align:top;width:100%;height:100%;border-radius:50%}._2_aTccLU:not([src]),._2_aTccLU:not([src])~._3hsjrlFQ,._2_aTccLU[src=""],._2_aTccLU[src=""]~._3hsjrlFQ{visibility:hidden}._3hsjrlFQ{position:absolute;top:0;left:0;right:-100%;bottom:-100%;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-radius:50%;border:1px solid rgba(0,0,0,.06)}',""]),t.locals={root:"_1et1XRkd",hasBorder:"_1RVvo_G6",image:"_2_aTccLU",border:"_3hsjrlFQ"}},x7Ie:function(e,t,a){e.exports={ocSkuSelectorBg:"_2zIk0pvb",horizontalScan:"t1GXYzk-"}},xFQA:function(e,t,a){e.exports={promotionList:"_34w2SEkY",promotionItem:"f5srGtiA",titleContainer:"_3myZ3nAP",hasBorder:"_3RxMK8c3",title:"_2qm3tn7H",foldItem:"_3vPh1KJr",foled:"_1CML21tK",close:"eN1J2JTG",closeIcon:"_2aIztqT_",text:"_2DdF0uhN",content:"_2W-zM6Fw",hasPromotionDisplay:"_2R27AZYW",bottom:"cpxcg3RL",promotionDisplay:"_32iTRTrP",btn:"_1W9ox0zY",float:"_3HMTET3t",horizontalScan:"_3Q3jnYMK"}},xIpx:function(e,t,a){e.exports={picker:"Dk8H2PTC",container:"_3ZgfStr5",mask:"SlyH6u_T",panel:"_2cFRKvef",cancel:"_1DxmVUUL",title:"BVFeRMMV",content:"_1THGTrSy",maskBottom:"_26d1VyH_",maskTop:"_38AjMIyV",wrapper:"_1HQzK_aj",wheel:"EmJ244Xm",wheelScroll:"_33sHPv9I",wheelItem:"MEJzOuhS",horizontalScan:"_3hLVV2te"}},xlN4:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,".Mh_A9YjE{position:fixed;top:-2px;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.6);z-index:10001}._3uEUOklR{position:relative;width:100%}._23kd4dNQ{position:absolute;left:0;right:0;bottom:0;border-radius:.12rem .12rem 0 0;background-color:#fff}._3IYh7YE6{-webkit-animation:_1hLwDM5f .3s ease-in-out 1 forwards;animation:_1hLwDM5f .3s ease-in-out 1 forwards}@-webkit-keyframes _1hLwDM5f{0%{top:100%;opacity:0}50%{top:-3%;opacity:1}to{top:0;opacity:1}}@keyframes _1hLwDM5f{0%{top:100%;opacity:0}50%{top:-3%;opacity:1}to{top:0;opacity:1}}._1dxbN7D5{top:0;-webkit-animation:_16bEqDx8 .4s backwards .1s ease;animation:_16bEqDx8 .4s backwards .1s ease}@-webkit-keyframes _16bEqDx8{0%{-webkit-transform:translateX(100%);transform:translateX(100%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes _16bEqDx8{0%{-webkit-transform:translateX(100%);transform:translateX(100%)}to{-webkit-transform:translateX(0);transform:translateX(0)}}._1fqyYDVe{position:absolute;left:.05rem;top:.04rem;height:.4rem;padding:.1rem;fill:#58595b}._2c_O9WfQ{position:absolute;right:.09rem;top:.12rem;width:.24rem;height:.24rem;padding:.05rem;color:#d2d2d2}._2c_O9WfQ:active{color:#58595b}",""]),t.locals={bg:"Mh_A9YjE",downBlock:"_3uEUOklR",content:"_23kd4dNQ",verticalAnimate:"_3IYh7YE6",vertical:"_1hLwDM5f",horizontalAnimate:"_1dxbN7D5",horizontal:"_16bEqDx8",back:"_1fqyYDVe",close:"_2c_O9WfQ"}},"xq+1":function(e,t,a){e.exports={virtualAddress:"_25PtC6FA",horizontalScan:"_2dPwACKv"}},zLnL:function(e,t,a){(t=e.exports=a("I1BE")(!1)).push([e.i,'._40tGyCzi{position:relative;width:1.76rem;margin-bottom:.08rem;border-radius:.04rem;background-color:#fff;overflow:hidden}._1zT7mqC0{padding:.1rem .08rem .08rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-image:-webkit-linear-gradient(top,#e4f0fc,#fff .6rem);background-image:-webkit-linear-gradient(top,#e4f0fc 0,#fff .6rem);background-image:linear-gradient(180deg,#e4f0fc 0,#fff .6rem)}._1zT7mqC0 ._2k-ucQtg{-webkit-box-flex:1;-webkit-flex:1;flex:1;position:relative;width:1.6rem;min-height:.18rem;max-height:.38rem;line-height:.2rem;text-indent:.17rem;text-overflow:ellipsis;font-weight:600;font-size:.15rem;color:#6378b4;overflow:hidden}._1zT7mqC0 ._2k-ucQtg:before{content:"";position:absolute;left:0;top:.025rem;height:.15rem;width:.15rem;background:url("https://funimg.pddpic.com/mobile_mall/2020-12-27/f473f86b-4472-4e2c-80ea-e92f64944723.png.slim.png?imageView2/2/w/50/q/80") no-repeat;background-size:contain;overflow:hidden}._1zT7mqC0 ._35MHPaoD{margin-top:.07rem;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:.18rem;width:1.6rem;line-height:.18rem;font-size:.13rem;color:#9c9c9c;overflow:hidden}._1zT7mqC0 ._35MHPaoD,._1zT7mqC0 ._35MHPaoD ._1O7zhgU0{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal}._1zT7mqC0 ._35MHPaoD ._1O7zhgU0{-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse}._1zT7mqC0 ._35MHPaoD ._1O7zhgU0 ._32gTYMke{width:.18rem;height:.18rem;border-radius:50%;margin-left:-.04rem;background-color:#fff}._1zT7mqC0 ._35MHPaoD ._1O7zhgU0 ._32gTYMke:first-child{margin-right:.04rem}._1zT7mqC0 ._35MHPaoD ._1O7zhgU0 ._32gTYMke:last-child{margin-left:0}._1zT7mqC0 ._35MHPaoD ._1O7zhgU0 ._32gTYMke ._32CeaVQx{width:100%;height:100%;border-radius:50%}._1zT7mqC0 ._2MvAplyb{margin-top:.1rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-content:space-between;align-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row;flex-flow:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;width:1.6rem;height:1.6rem}._1zT7mqC0 ._2MvAplyb ._2o4dPbcj{width:.77rem;height:.77rem;border-radius:.04rem;position:relative;overflow:hidden}._1zT7mqC0 ._2MvAplyb ._2o4dPbcj:after{content:"";position:absolute;left:0;right:0;pointer-events:none;top:0;bottom:0;background-color:rgba(0,0,0,.02)}._1zT7mqC0 ._2MvAplyb ._2o4dPbcj .q47V3klk{width:100%;height:100%}',""]),t.locals={wrapper:"_40tGyCzi",content:"_1zT7mqC0",title:"_2k-ucQtg",tip:"_35MHPaoD",avatar:"_1O7zhgU0",imgBg:"_32gTYMke",imgAvatar:"_32CeaVQx",imgList:"_2MvAplyb",imgWrapper:"_2o4dPbcj",img:"q47V3klk"}}},[[3,2,3,1,0]]]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-best-goods/js/react_bestgoods_middle_fd555c5c00d87bf8d3a0.module.js.map