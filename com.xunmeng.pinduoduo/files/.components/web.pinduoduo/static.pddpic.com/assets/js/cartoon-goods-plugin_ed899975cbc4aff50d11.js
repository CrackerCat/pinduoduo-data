"use strict";(self.webpackChunkmobile_fun_cashback=self.webpackChunkmobile_fun_cashback||[]).push([[190],{18735:function(e,t,n){n.d(t,{b:function(){return l}});var i=n(82448),r=n(66556),o=n(37554);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appName="",this.subAppName="",this.sceneId=0,this.subSceneId=0,this.listId="",this.optId=0,this.subId=0,this.page=1,this.size=20,this.pageSn=0,this.pageName="default",this.imprElsn={},this.imprExt={},this.missionLogCfg={},this.multiMissionLogCfg={},this.monitorCfg={},this.inspectCfg={},this.multiInspectCfg={},this.customCfg={},this.landUrls={},this.bizTag="",this.paymentBiz="",this.menuMap={},this.hasAscertainRec=!1,this.orgStr="",this.ruleId="",this.initLandingUrls=function(){return s(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,r.mf)(this.landUrls)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.landUrls();case 4:this.landUrls=e.sent;case 5:case"end":return e.stop()}}),e,this)})))};var a=Object.assign({},t),c=a,u=c.appName,l=void 0===u?"":u,d=c.subAppName,g=void 0===d?"":d,f=c.sceneId,h=void 0===f?0:f,v=c.subSceneId,m=void 0===v?0:v,p=c.listId,y=void 0===p?"":p,_=c.optId,b=void 0===_?0:_,S=c.subId,C=void 0===S?0:S,k=c.page,w=void 0===k?0:k,I=c.size,N=void 0===I?0:I,O=c.ruleId,E=void 0===O?"":O,L={},T=i.Z.getFunctions().coreUtil;(0,r.Lf)()&&(L=T.parseUrlQuery((0,r.w)())||{}),l=l||L.app_name||"cartoon_fruit_goods",h=h||L.scene_id||0,g=g||L.sub_app_name||"",m=m||L.sub_scene_id||0,y=y||L.list_id||(0,r.zO)(6).toString(),b=b||(0,r.ZQ)(L.opt_id)||0,C=C||(0,r.ZQ)(L.sub_opt_id)||0,w=w||Number(L.page)||1,N=N||Number(L.size)||20,E=E||L.rule_id||"",a=Object.assign({},a,{appName:l,subAppName:g,sceneId:h,subSceneId:m,listId:y,optId:b,subId:C,page:w,size:N,ruleId:E}),this.reset(a),(0,o.H8)().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.hasAscertainRec||(n.orgStr=e)}))}var t,n,c;return t=e,n=[{key:"reset",value:function(e){var t=e||{},n=t.appName,i=void 0===n?"":n,r=t.subAppName,o=void 0===r?"":r,a=t.sceneId,s=void 0===a?"":a,c=t.subSceneId,u=void 0===c?"":c,l=t.listId,d=void 0===l?"":l,g=t.optId,f=void 0===g?this.optId:g,h=t.subId,v=void 0===h?this.subId:h,m=t.page,p=void 0===m?this.page:m,y=t.size,_=void 0===y?this.size||20:y,b=t.pageSN,S=void 0===b?this.pageSn:b,C=t.pageName,k=void 0===C?this.pageName:C,w=t.imprElsn,I=void 0===w?this.imprElsn:w,N=t.imprExt,O=void 0===N?this.imprExt:N,E=t.missionLogCfg,L=void 0===E?this.missionLogCfg:E,T=t.multiMissionLogCfg,A=void 0===T?this.multiMissionLogCfg:T,P=t.monitorCfg,F=void 0===P?this.monitorCfg:P,R=t.inspectCfg,U=void 0===R?this.inspectCfg:R,D=t.multiInspectCfg,j=void 0===D?this.multiInspectCfg:D,Z=t.customCfg,M=void 0===Z?this.customCfg:Z,x=t.landUrls,B=void 0===x?this.landUrls:x,G=t.bizTag,q=void 0===G?this.bizTag:G,H=t.paymentBiz,z=void 0===H?this.paymentBiz:H,K=t.ruleId,J=void 0===K?this.ruleId:K;this.appName=i||this.appName,this.subAppName=o||this.subAppName,this.sceneId=s||this.sceneId,this.subSceneId=u||this.subSceneId,this.listId=d||this.listId,this.optId=f,this.subId=v,this.page=p,this.size=_||this.size,this.pageSn=S,this.pageName=k,this.missionLogCfg=L,this.multiMissionLogCfg=A,this.monitorCfg=F,this.inspectCfg=U,this.multiInspectCfg=j,this.customCfg=M,this.imprElsn=I,this.imprExt=O,this.landUrls=B,this.bizTag=q,this.paymentBiz=z,this.ruleId=J,this.initLandingUrls()}},{key:"incrPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=this.page+e}},{key:"changeBaseParams",value:function(e){var t=e||{},n=t.appName,i=void 0===n?this.appName:n,r=t.subAppName,o=void 0===r?this.subAppName:r,a=t.sceneId,s=void 0===a?this.sceneId:a,c=t.subSceneId,u=void 0===c?this.subSceneId:c,l=t.listId,d=void 0===l?this.listId:l;this.appName=i,this.subAppName=o,this.sceneId=s,this.subSceneId=u,this.listId=d}},{key:"addMenuToMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.Z.getFunctions(),a=n.coreUtil,s=a.parseUrlQuery((0,r.w)())||{},c={},u=(0,r.ZQ)(s.subId)||(0,r.ZQ)(s.optId)||0;if(u===e&&(c=(0,o.Ok)(s)),Object.keys(t).length>0){var l=t.fetch_extend_params;l=Object.assign({},l,c),t.fetch_extend_params=l,this.menuMap[e]=t}}},{key:"ascertainOrgRec",value:function(e,t){if(!this.hasAscertainRec)try{var n=((e||{}).p_rec||{}).org||(0,o.s5)(t||{});this.hasAscertainRec=!!n,this.orgStr=n||""}catch(e){console.warn("确定用户所在推荐组操作异常",e)}}},{key:"getBaseParams",value:function(){var e={appName:this.appName,subAppName:this.subAppName,destAppName:this.subAppName||this.appName,sceneId:this.sceneId,subSceneId:this.subSceneId,destSceneId:this.subSceneId||this.sceneId,listId:this.listId,optId:this.optId,subId:this.subId,page:this.page,size:this.size,pageSn:this.pageSn,pageName:this.pageName,monitorCfg:this.monitorCfg,customCfg:this.customCfg,imprElsn:this.imprElsn,imprExt:this.imprExt,landUrls:this.landUrls,bizTag:this.bizTag,paymentBiz:this.paymentBiz,menu:this.menuMap[this.subId||this.optId],ruleId:this.ruleId};return Object.keys(this.multiInspectCfg).length?(e.multiInspectCfg=this.multiInspectCfg,e.inspectCfg={}):(e.inspectCfg=this.inspectCfg,e.multiInspectCfg={}),Object.keys(this.multiMissionLogCfg).length?(e.multiMissionLogCfg=this.multiMissionLogCfg,e.missionLogCfg={}):(e.missionLogCfg=this.missionLogCfg,e.multiMissionLogCfg={}),e}}],n&&a(t.prototype,n),c&&a(t,c),e}(),u={},l=function(e,t){u[e]=d,d=u[t]||null},d=null;t.Z=function(){return d||(d=new c({})),d}},37554:function(e,t,n){n.d(t,{ep:function(){return c},uM:function(){return u},h:function(){return g},Jf:function(){return f},Nf:function(){return h},CL:function(){return v},Fz:function(){return m},te:function(){return p},Ok:function(){return _},wS:function(){return b},Rw:function(){return S},FH:function(){return C},_q:function(){return k},Tw:function(){return w},WI:function(){return I},H8:function(){return N},s5:function(){return O},UL:function(){return E}});var i=n(82448),r=n(63409),o=n(66556),a=function(e){var t=e||{},n=t.ad_product_type,i=void 0===n?0:n,o=t.live_status,a=void 0===o?0:o,s=t.live_url,c=void 0===s?"":s,u=t.h5_live_url,l=void 0===u?"":u,d=(Number(i)===r.Ce.LIVE||Number(i)===r.Ce.FAST_LIVE)&&1===Number(a),g=!!(c||"").toString().trim()&&!!(l||"").toString().trim();return d&&g},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.oLogger,n=void 0===t?{}:t,r=e.pageName,o=void 0===r?"":r,a=i.Z.getFunctions(),s=a.coreUtil,c=s.getCurrentPageName(),u=c.pathname,l=c.link;return{pageName:o=o||u,oLogger:n=Object.assign({},n||{},{link:l})}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=i.Z.getFunctions(),r=n.coreUtil,a=n.pddAuth,c=(0,o.mf)(r.isWeapp)&&r.isWeapp();if((0,o.Lf)()||c){var u=i.Z.getFunctions(),l=u.requestUtil,d=s({oLogger:t,pageName:""}),g=d.pageName,f=d.oLogger,h="[".concat(g,"] :: cartoon-goods-plugins > logger: ").concat(JSON.stringify(f));try{return a.getUid().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n={pdd_uid:t,event_type:e,event_message:h},i=(0,o.Zb)();return l.manortkRequest(i,{method:"POST",params:n})})).catch((function(e){console.error("cartoon-goods-plugins :: logInToCat > reject",e)}))}catch(e){console.error("cartoon-goods-plugins :: logInToCat > auth",e)}}}},u=function(e){var t=e=e||{},n=t.groupId,r=void 0===n?0:n,a=t.tags,s=void 0===a?{}:a;if(r&&Object.keys(s||{}).length){var c=i.Z.getFunctions().coreUtil,u=(0,o.mf)(c.isWeapp)&&c.isWeapp(),l=function(e){var t=e;try{t=Object.assign({},e||{});for(var n=Object.keys(e||{})||[],i=0,r=n.length;i<r;i++){var o=n[i],a=t[o];Object.keys(a||{}).length>0&&(t[o]=JSON.stringify(a))}}catch(e){console.error("serializeLog>>> ",e)}return t}(e.extras||{});if((0,o.Lf)()||u){var d=c.getCurrentPageName();l=Object.assign({},l,d||{})}var g={groupId:r,tags:s,fields:l};Object.keys(e.longFields||{}).length>0&&(g.longFields=e.longFields),i.Z.getFunctions().pddPmm.reportDefined(g)}};function l(e){for(var t=e=e||{},n=t.p_rec,i=t.ad,r=t.sub_items,o=void 0===r?[]:r,a=(t.link_unit||{}).info_to_second_page,s=void 0===a?"":a,c=[],u=0,l=(o||[]).length;u<l;u++){var d=o[u]||{},g=d.thumb_url,f=d.goods_id,h=d.link_unit||{},v=h.ad_id,m=h.lu_query,p=h.trigger_goods_id,y=h.default_price,_=h.coupon_price,b=h.info_to_second_page,S=h.creative_id;c.push({creative:{creative_id:S,image_url:g},goods_id:f,ad_id:v,query:m,trigger_goods_id:p,default_price:y,coupon_price:_,ad_to_second_page:b})}return{info_to_second_page:s,recommend_query_ad_single_list:c,track_log_fields:i,p_rec:n,ad:i}}function d(e){var t=r.av.DEFAULT,n=r.av.LU_SEARCH,i=r.fP.WAIST_RECOMMEND,o=e||{},s=o.lu_general_type,c=void 0===s?t:s,u=o.link_unit,d=void 0===u?{}:u,g=o.sub_items,f=void 0===g?[]:g;c=c||t,f=f||[];var h=(d=d||{}).lu_style_type;if(c!==n||!f.length)return Object.assign({},e,{elem_type:a(e)?r.oy.LvGoods:r.oy.Goods});if(h===i){var v=l(e)||{},m=v.recommend_query_ad_single_list||[];return m.length>4&&(m=m.slice(0,4)),4===m.length?Object.assign({},v,{elem_type:r.oy.Recommend}):(console.error("pdd-cartoon-goods-plugins :: formatDefault > 腰部推荐数据不合法"),null)}return Object.assign({},e,{elem_type:a(e)?r.oy.LvGoods:r.oy.Goods})}var g=function(e,t){t&&(0,o.mf)(t)||(t=function(e){return e});for(var n=[],i=0,a=(e=e||[]).length;i<a;i++){var s=e[i]||{}||{},c=s.product_type,u=void 0===c?1:c,l=s.goods,g=void 0===l?{}:l,f=s.mall,h=void 0===f?{}:f;if(g=g||{},h=h||{},(u=Number(u)||r.v0.Goods)===r.v0.Mall&&Object.keys(h).length>0){var v=h.hole_type,m=void 0===v?2:v;n.push(t(Object.assign({},h,{elem_type:1===m?r.oy.Vmall:r.oy.Hmall})))}else if(Object.keys(g).length>0){var p=d(g)||{};Object.keys(p).length>0&&n.push(t(p))}}return w(n,"goods_id")},f=function(e){var t=(e=e||[]).filter((function(e){var t=(e||{}).in_sliding_window;return void 0!==t&&t})),n=e.filter((function(e){var t=(e||{}).in_sliding_window;return!(void 0!==t&&t)})),i=e.findIndex((function(e){var t=(e||{}).in_sliding_window;return void 0!==t&&t}));return i<0||n.splice(i,0,{elem_type:r.oy.Sliding,sliding_goods:t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},e||{},{elem_type:r.oy.SGoods})}))}),n},h=function(e){var t=r.av.DEFAULT,n=r.av.LU_SEARCH,i=r.fP.WAIST_RECOMMEND,o=e||{},a=o.lu_general_type,s=void 0===a?t:a,c=o.link_unit,u=void 0===c?{}:c,d=o.sub_items,g=void 0===d?[]:d;s=s||t,g=g||[];var f=(u=u||{}).lu_style_type;if(s===n&&g.length&&f===i){var h=l(e)||{},v=h.recommend_query_ad_single_list||[];if(v.length>4&&(v=v.slice(0,4)),4===v.length)return Object.assign({},h,{elem_type:r.oy.Recommend});console.error("pdd-cartoon-goods-plugins :: formatDefault > 腰部推荐数据不合法")}return e},v=function(e){var t=l(((e=(e||[]).filter((function(e){e=e||{};var t=Number(e.product_type)||r.v0.Goods,n=(e.goods||{}).lu_general_type,i=void 0===n?r.av.DEFAULT:n;return t===r.v0.Goods&&Number(i)===r.av.LU_SEARCH})).map((function(e){return e.goods})))||[]).find((function(e){var t=(e||{}).link_unit,n=((void 0===t?{}:t)||{}).lu_style_type;return Number(void 0===n?0:n)===r.fP.SIMILAR}))||{});return Object.assign({},t,{elem_type:r.oy.Similar})},m=function(e){var t=l(((e=(e||[]).filter((function(e){e=e||{};var t=Number(e.product_type)||r.v0.Goods,n=(e.goods||{}).lu_general_type,i=void 0===n?r.av.DEFAULT:n;return t===r.v0.Goods&&Number(i)===r.av.LU_SEARCH})).map((function(e){return e.goods})))||[]).find((function(e){var t=(e||{}).link_unit,n=((void 0===t?{}:t)||{}).lu_style_type;return Number(void 0===n?0:n)===r.fP.ULIKE_RECOMMEND}))||{});return Object.assign({},t,{elem_type:r.oy.Ulike})},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(e=e||{}).item_list||[];if((n||[]).length>0)return n;var i=e||{},o=i.goods_list||[],a=i.resultBundle||[];if(!o.length&&!a.length)return[];for(var s=[],c=0,u=o.length;c<u;c++){var l=o[c]||{};l=d(l),Object.keys(l||{}).length>0&&s.push(l)}for(var g=0,f=a.length;g<f;g++){var h=a[g]||{};if(h.mall_id){var v=Number(h.hole_type)||2,m=Number(h.position)||0;(m=(m-t)%20)>=s.length&&(m=s.length-1),m%2==1&&2===v&&(m-=1),h.elem_type=2===v?r.oy.Hmall:r.oy.VGoods,s.splice(m,0,h)}}return s},y=function(e,t){return e=Object.assign({},e),Object.keys(e).forEach((function(t){0===(t=String(t||"")).indexOf("fetch_")&&delete e[t]})),Object.keys(t).forEach((function(n){0===(n=String(n||"")).indexOf("fetch_")&&t[n]&&(e[n]=t[n])})),e},_=function(e){for(var t=Object.keys(e||{}),n={},i=0,r=t.length;i<r;i++){var o=t[i];0===o.indexOf("fetch_")&&(n[o.substring(6)]=e[o])}return n},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.Z.getFunctions(),n=t.coreUtil,r=t.navigation;if((0,o.Lf)()&&(0,o.mf)(r.replaceURL)){var a=location.pathname,s=location.protocol,c=location.host,u=n.parseUrlQuery((0,o.w)())||{};u=y(u,e);for(var l=0,d=Object.keys(e).length;l<d;l++)isNaN(e.sp)||(u.sp=e.sp),(0,o.o8)(e.opt_id)||(u.opt_id=e.opt_id),(0,o.o8)(e.sub_opt_id)||(u.sub_opt_id=e.sub_opt_id),e.list_id&&(u.list_id=e.list_id),e.sub_app_name?u.sub_app_name=e.sub_app_name:delete u.sub_app_name,e.sub_scene_id?u.sub_scene_id=e.sub_scene_id:delete u.sub_scene_id;Object.keys(u).length>0&&(a=n.appendQuery(u,"".concat(s,"//").concat(c).concat(a)));try{r.replaceURL(a)}catch(e){}}},S=function(){var e=(i.Z.getFunctions().platformUtil||{}).getCurrentPlatform,t=void 0===e?function(){return{}}:e;return!!(0,o.mf)(t)&&t().isNativePlatform},C=function(){var e=(i.Z.getFunctions().platformUtil||{}).getCurrentPlatform,t=void 0===e?function(){return{}}:e;return!!(0,o.mf)(t)&&t().isWeChatMiniProgram},k=function(e,t){if(t=t||e,!S())return!1;var n=i.Z.getFunctions().platformUtil||{},r=n.compareVersion,a=void 0===r?function(){return!1}:r,s=n.getCurrentPlatform,c=void 0===s?function(){return{}}:s,u=n.PLATFORM,l=void 0===u?{}:u;if(!(0,o.mf)(c)||!l)return!1;var d=c()||{},g=!!l.PddAndroid&&d.platform===l.PddAndroid?e:t;return!!(0,o.mf)(a)&&a(d.version,g)>=0},w=function(e,t){var n=[];return t&&(e||[]).length?e.filter((function(e,i){var r=(e||{})[t],o=(e||{}).elem_type,a=(e||{}).ext_info||{};if(0!==o)return!0;var s=!!a.duplicateAd;return!!(n.indexOf(r)<0||s)&&(n.push(r),!0)})):e},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arec";if(Number(e)>0)return e;var n=e;return Object.keys(e||{}).length>0&&(Number(n[t])||Number(n.arec))||0},N=function(){try{var e=i.Z.getFunctions(),t=e.coreUtil,n=e.pddAuth;return(0,o.Lf)()&&(0,o.mf)(t.crc32)&&(0,o.mf)(n.getUid)?n.getUid().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e){var n="rec_gateway"+e,i=t.crc32(n)%1e4+1;return i>=6668&&i<=1e4?"rec":i>=1&&i<=3333?"xrec":i>=3334&&i<=6667?"arec":void 0}})):Promise.resolve("")}catch(e){console.warn("计算用户所在推荐组操作异常",e)}},O=function(e){var t=((e||{})["chiru-org"]||"").toLowerCase();return t?"rec=rec"===t?"rec":"rec=xrec"===t?"xrec":"rec=arec"===t?"arec":"":""},E=function(e,t,n){var r=i.Z.getFunctions().navigation;if((0,o.mf)(r.uniformForward))return r.uniformForward(e,t,n);r.forward(e,t,null,n)}},63409:function(e,t,n){var i,r;n.d(t,{oy:function(){return i},v0:function(){return r},Ce:function(){return v},V5:function(){return a},p4:function(){return s},av:function(){return c},fP:function(){return u},hE:function(){return d},jj:function(){return g},aG:function(){return f},FM:function(){return h},mc:function(){return m}}),function(e){e[e.Goods=0]="Goods",e[e.AdGoods=1]="AdGoods",e[e.LvGoods=2]="LvGoods",e[e.LgGoods=3]="LgGoods",e[e.Hmall=10]="Hmall",e[e.Vmall=20]="Vmall",e[e.Coupon=30]="Coupon",e[e.Favorite=40]="Favorite",e[e.Similar=50]="Similar",e[e.SimilarInRows=51]="SimilarInRows",e[e.HGoods=60]="HGoods",e[e.VGoods=70]="VGoods",e[e.Recommend=80]="Recommend",e[e.Topic=90]="Topic",e[e.Ulike=100]="Ulike",e[e.CPT=110]="CPT",e[e.CPS=120]="CPS",e[e.Game=130]="Game",e[e.Video=140]="Video",e[e.Sliding=150]="Sliding",e[e.SGoods=160]="SGoods",e[e.LvMall=170]="LvMall",e[e.LvMallGoods=180]="LvMallGoods",e[e.RankingList=190]="RankingList",e[e.RankingGoods=200]="RankingGoods",e[e.CustomCell=97e3]="CustomCell",e[e.CustomRow=98e3]="CustomRow"}(i||(i={})),function(e){e[e.Goods=1]="Goods",e[e.Mall=2]="Mall",e[e.Cpt=3]="Cpt",e[e.Topic=7]="Topic",e[e.Live=8]="Live",e[e.Live2=12]="Live2"}(r||(r={}));var o,a,s,c,u,l,d,g,f,h,v={CPM:3,LIVE:8,FAST_LIVE:12};!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.NEW_USER_REC=1]="NEW_USER_REC",e[e.NEW_DEVICE_REC=2]="NEW_DEVICE_REC"}(o||(o={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.GARDEN=1]="GARDEN",e[e.FARM=2]="FARM",e[e.RANCH=3]="RANCH",e[e.FIT=4]="FIT",e[e.DAILY=5]="DAILY",e[e.HOUSE=6]="HOUSE",e[e.POKER=7]="POKER",e[e.CITY=8]="CITY",e[e.READ=9]="READ",e[e.MELON=10]="MELON",e[e.QUIZ=11]="QUIZ",e[e.CASHBACK=12]="CASHBACK",e[e.SNAKE=13]="SNAKE",e[e.IME=14]="IME",e[e.FREE=15]="FREE",e[e.FLOWER=16]="FLOWER"}(a||(a={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.GARDEN=10]="GARDEN",e[e.FARM=40]="FARM",e[e.RANCH=82]="RANCH",e[e.FIT=85]="FIT",e[e.DAILY=19]="DAILY",e[e.HOUSE=110]="HOUSE",e[e.POKER=112]="POKER",e[e.CITY=115]="CITY",e[e.READ=123]="READ",e[e.MELON=134]="MELON",e[e.SNAKE=141]="SNAKE",e[e.IME=144]="IME",e[e.FREE=145]="FREE",e[e.FLOWER=149]="FLOWER"}(s||(s={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LU_SEARCH=1]="LU_SEARCH"}(c||(c={})),function(e){e[e.WAIST_RECOMMEND=0]="WAIST_RECOMMEND",e[e.ULIKE_RECOMMEND=0]="ULIKE_RECOMMEND",e[e.SIMILAR=100]="SIMILAR",e[e.WISHING=2]="WISHING"}(u||(u={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.COUPON=1]="COUPON",e[e.TOPIC=4]="TOPIC",e[e.BEST_SELLER=7]="BEST_SELLER",e[e.CPT=-1]="CPT"}(l||(l={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.TEHUI=2]="TEHUI"}(d||(d={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.UNPUBLISHED=1]="UNPUBLISHED",e[e.COUPONPRICE=2]="COUPONPRICE"}(g||(g={})),function(e){e[e.DEFAULT=41038]="DEFAULT",e[e.GARDEN=41036]="GARDEN",e[e.FIT=41031]="FIT",e[e.DAILY=41037]="DAILY"}(f||(f={})),function(e){e.GARDEN="ddgy"}(h||(h={}));var m={pv:"70263",exceptionCSR:"70271",manualCSR:"70272",renderEx:"70273",pirceLTFloor:"70274",pirceGTCeil:"70286",resEmpty:"70287",resError:"70288",resLessCnt:"70289",resCount:"70290",resLast:"90309",scanDepth:"70291",mktError:"90140",adClick:"90285",adShow:"90311",filterEx:"90365",normalPercent:"90440"}},13773:function(e,t,n){n.r(t),n.d(t,{AdForward:function(){return i.Z},AdLoader:function(){return r.Z},ImprLogger:function(){return o.Z},LocalCache:function(){return a.Z},MissionLogger:function(){return s.Z},ScanXmins:function(){return c.Z},ScanXcell:function(){return u.Z},NewSimilar:function(){return m.Z},AdInspector:function(){return l.Z},MenuSwitch:function(){return d.Z},BaseUtil:function(){return g.Z},MonitorInCat:function(){return f.Z},EnumGoods:function(){return _.oy},EnumProductType:function(){return _.v0},EnumAdProductType:function(){return _.Ce},EnumPriceBizType:function(){return _.p4},EnumMerchantTag:function(){return _.aG},EnumBusinessType:function(){return _.V5},EnumPaymentBiz:function(){return _.FM},SearchLoader:function(){return h.Z},ScanByScroll:function(){return v.Z},NewGuessUlike:function(){return p.Z},initPlugins:function(){return E},pushPlugins:function(){return L},initDefaultPlugins:function(){return N},formatGoods:function(){return k.h},formatSGoods:function(){return k.Jf},formatSimilar:function(){return k.CL},formatWaist:function(){return k.Nf},formatULike:function(){return k.Fz},adaptFetchedAds:function(){return k.te},switchPlugin:function(){return b.b},PriceListener:function(){return y.Z},cleanBeforeRefresh:function(){return A},changeParamsBeforeRefresh:function(){return P},getPlugins:function(){return T}});var i=n(36498),r=n(86681),o=n(23255),a=n(88262),s=n(32839),c=n(96889),u=n(34073),l=n(730),d=n(90607),g=n(82448),f=n(14564),h=n(69136),v=n(97710),m=n(56887),p=n(69312),y=n(86888),_=n(63409),b=n(18735),S=n(46256),C=n(66556),k=n(37554);function w(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var N=function(e){var t=_.V5.DEFAULT,n=_.V5.GARDEN,i=_.V5.DAILY,r=_.V5.FIT,o=e.busType||t,a=_.aG.DEFAULT;o===n&&(a=_.aG.GARDEN),o===i&&(a=_.aG.DAILY),o===r&&(a=_.aG.FIT);var s=[];return o&&s.push(new y.Z({merchantTag:a})),{other:s}},O=null,E=function(e){if((0,C.Lf)()&&!(Object.keys(O||{}).length>0)){var t=N(e.baseCfg),n=(0,S.f)(e),r=new o.Z(n),s=new a.Z,c=new i.Z({},null),u=new l.Z,d=new f.Z;return O=Object.assign({},t,{forward:[c,u],log:[r],switch:[],skim:[],custom:[],load:[],cache:[s],monitor:[d]})}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,C.Lf)()){Object.keys(O).length||(O=E({}));for(var t=Object.keys(e)||[],n=function(n,i){var r=t[n],o=e[r]||[],a=O[r]||[],s=[],c={};[].concat(w(o),w(a)).forEach((function(e){var t=(e||{}).name;t&&c[t]||(s.push(e),c[t]=!0)})),O[r]=s},i=0,r=t.length;i<r;i++)n(i,r);return O}},T=function(){return O},A=function(e){if((0,C.Lf)()){Object.keys(e||{}).length||(e=O||{});var t=(e.cache||[]).find((function(e){return"localCache"===(e||{}).name}))||{};t.cleanCache&&t.cleanCache();var n=(e.switch||[]).find((function(e){return"menuSwitch"===(e||{}).name}))||{};(0,b.Z)().changeBaseParams({listId:(0,C.zO)(6).toString()}),n.manualRefresh&&n.manualRefresh()}},P=function(e,t){if((0,C.Lf)()){var n=(0,b.Z)(),i=e.app_name,r=e.sub_app_name,o=e.scene_id,a=e.sub_scene_id,s=(0,b.Z)().getBaseParams(),c=s.appName,u=void 0===c?"":c,l=s.subAppName,d={appName:i,sceneId:o,subAppName:r,subSceneId:a};if((r||i||"")!==((void 0===l?"":l)||u||"")){A(t);var f=g.Z.getFunctions(),h=f.coreUtil,v=f.navigation;if((0,C.mf)(v.replaceURL)){n.changeBaseParams(d);var m=h.parseUrlQuery((0,C.w)())||{},p=location.pathname,y=location.protocol,_=location.host;p=h.appendQuery(Object.assign({},m,e),"".concat(y,"//").concat(_).concat(p)),v.replaceURL(p)}}}}},32839:function(e,t,n){var i=n(82448),r=n(63409),o=n(18735);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.missionLogCfg={},this.multiMissionLogCfg={},this.extendParams={},this.name="missionLogger";var n=t||{},i=n.missionLogCfg,r=void 0===i?this.missionLogCfg:i,s=n.multiMissionLogCfg,c=void 0===s?this.multiMissionLogCfg:s,u=n.extendParams,l=void 0===u?this.extendParams:u;this.extendParams=l||this.extendParams,this.missionLogCfg=Object.assign({},this.missionLogCfg,r||{}),this.multiMissionLogCfg=Object.assign({},this.multiMissionLogCfg,c||{}),(0,o.Z)().reset(t)}var t,n,c;return t=e,n=[{key:"loadImprConfig",value:function(e){var t=(0,o.Z)().getBaseParams()||{},n=t.destAppName,i=this.missionLogCfg||{},r=this.multiMissionLogCfg||{};return Object.keys(i).length||(i=t.missionLogCfg||{}),Object.keys(r).length||(r=t.multiMissionLogCfg||{}),Object.keys(i).length||(i=r[n]||{}),i}},{key:"sendRequest",value:function(e,t){if(!t)return Promise.resolve({success:!1,url:t});var n=i.Z.getFunctions().requestUtil,r=1;return new Promise((function(i,o){!function a(){return s=function(e){i(e)},c=function(e){r<2?(r++,a()):o(e)},void n.baseRequest(t,{method:"POST",params:e}).then((function(e){var t=!!(e||{}).success;t&&s&&s(e),!t&&c&&c(e)})).catch((function(e){c&&c(e)}));var s,c}()}))}},{key:"doClickImpr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=void 0===t?{}:t,i=(e.idx,e.type),o=void 0===i?0:i,a=n||{},s=this.extendParams,c=this.loadImprConfig()||{},u=c[o||r.oy.Goods]||{},l=a.goods_id||"",d=a.mall_id||"",g=u||{},f=g.missionRecId,h=void 0===f?0:f,v=g.missionRecPath,m=void 0===v?"api/fun-gateway/command/browse/goods":v,p=(m||"").toString();if(p.indexOf("fun-gateway/command/browse/goods")>=0||p.indexOf("manor-gateway/normal/goods/record")>=0)return Promise.resolve(!0);if(!h)return Promise.resolve(!1);var y={record_type:h};return o!==r.oy.Hmall&&o!==r.oy.Vmall||(y=Object.assign({},y,{mall_id:d})),o&&o!==r.oy.Goods||(y=Object.assign({},y,{goods_id:l})),y=Object.assign({},y,s),this.sendRequest(y,m),Promise.resolve(!0)}}],n&&s(t.prototype,n),c&&s(t,c),e}();t.Z=c},69312:function(e,t,n){var i=n(82448),r=n(66556),o=n(63409),a=n(37554),s=n(18735);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l="cartoon_widgets",d="cartoon_widgets_new_guess_u_like",g=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api/tyrion/ad_list";c(this,e),this.pageKey="".concat(l,"_new_guess_u_like"),this.baseUrl="api/tyrion/ad_list",this.currentData={},this.hasShowRetain=!1,this.leftTickets=15,this.interval=null,this.afterTrigger=null,this.changeIcon=null,this.pageSize=4,this.requestNum=8,this.countDownInApp=!0,this.extendParams={extended_params:JSON.stringify({lu_ad_func:!0})},this.name="newGuessUlike",this.afterShowDetain=void 0,this.doClick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=t<n.pageSize?0:1,a=n.currentData||{},c=a.imprArray,u=void 0===c?[]:c,l=(u||[])[r]||{},d=e||{},g=d.query,f=void 0===g?"":g,h=d.ad_id,v=void 0===h?"":h,m={query:f,ad_id:v},p=(0,s.Z)().getBaseParams()||{},y=p.imprElsn,_=y[o.oy.Ulike]||{},b={op:"click",page_el_sn:_=_.impr||_,is_swap:r<=0?0:1,query_idx:t,ad:l.ad,clk_query:JSON.stringify(m)},S=i.Z.getFunctions(),C=S.logger;return C.trackingRecord(b).then((function(){n.go2LandPage(e,t)}))},this.reset(t,r)}var t,n,g;return t=e,n=[{key:"reset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.baseUrl;this.baseUrl=t;var n=i.Z.getFunctions(),o=n.coreUtil,c=o.getCurrentPageName(),u=c.name,g=e||{},f=g.pageName,h=void 0===f?u:f,v=g.timeSpan,m=void 0===v?15:v,p=g.afterTrigger,y=void 0===p?function(){return{}}:p,_=g.changeIcon,b=void 0===_?function(){return{}}:_,S=(g.afterShowDetain,g.options),C=void 0===S?{}:S;this.leftTickets=m,this.pageKey="".concat(l,"_").concat(h||"new_guess_u_like"),this.afterTrigger=y,this.changeIcon=b;var k=C||{},w=k.pageSize,I=void 0===w?4:w,N=k.requestNum,O=void 0===N?8:N,E=k.extendParams,L=void 0===E?this.extendParams:E;I=Number(I)||4,O=Number(O)||8;var T=C||{},A=T.countDownInApp,P=void 0!==A&&A;this.pageSize=I<=0?4:I,this.requestNum=O<=0?8:O,this.countDownInApp=P,this.afterShowDetain=this.afterShowDetain,this.extendParams=Object.assign({},this.extendParams,L),(0,s.Z)().reset(e);var F=o||{},R=F.isWeapp,U=void 0===R?function(){return!1}:R;if((0,r.Lf)()||U()){var D=this.readStorage()||{},j=(0,r.mr)(new Date),Z=D[d]||{},M=Z.lastTime,x=M===j,B=Number(Z.leftTickets)||0,G=this.getCustomCfg(),q=G||{},H=q.land_scene_id,z=void 0===H?"":H,K=q.land_app_name,J=void 0===K?"":K;if(x&&B<=0&&(0,r.mf)(this.changeIcon)&&J&&z&&this.changeIcon({isShow:!0}),(0,a.Rw)()&&!this.countDownInApp)return this.addBackEventListener();this.addTimeEventListener()}}},{key:"addBackEventListener",value:function(){var e=this,t=i.Z.getFunctions(),n=t.nativeUtil,o=t.navigation;(0,r.mf)(n.setBackButton)&&n.setBackButton({callback:function(){if(e.hasShowRetain)return e.afterShowDetain&&(0,r.mf)(e.afterShowDetain)?e.afterShowDetain():o.back();e.hasShowRetain=!0,e.doFetch()}})}},{key:"addTimeEventListener",value:function(){var e=this,t=this.readStorage()||{},n=(0,r.mr)(new Date),i=t[d]||{};n!==i.lastTime?i={lastTime:n,leaveTime:-1,leftTickets:this.leftTickets}:this.leftTickets=Number(i.leftTickets)||0,this.saveStorage(i),this.leftTickets<=0||(this.interval=setInterval((function(){e.leftTickets--,i.leftTickets=e.leftTickets,e.leftTickets<=0&&(e.interval&&(clearInterval(e.interval),e.interval=null),e.doFetch()),e.saveStorage(i)}),1e3))}},{key:"doFetch",value:function(){var e=this;this.leftTickets=0,this.currentData=null;var t={lastTime:(0,r.mr)(new Date),leaveTime:-1,leftTickets:0};this.saveStorage(t);var n=((0,s.Z)().getBaseParams()||{}).imprElsn[o.oy.Ulike]||{};return n=n.impr||n,this.fetch().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.Fz)((t||{}).item_list),o=i.recommend_query_ad_single_list,s=void 0===o?[]:o,c=i.track_log_fields,u=void 0===c?{}:c,l=i.info_to_second_page,d=void 0===l?"":l,g=i.ad,f=i.p_rec,h=(s||[]).slice(0,e.pageSize)||[],v=(s||[]).slice(e.pageSize,e.requestNum)||[],m=[],p=[],y={page_el_sn:n,is_swap:0,ad:JSON.stringify(u)};return g&&Object.keys(g).length>0&&(y.ad=JSON.stringify(g)),f&&Object.keys(f).length>0&&(y.p_rec=JSON.stringify(f)),h.length>=e.pageSize&&(m.push(h),p.push(Object.assign({},y,{impr_query:JSON.stringify(h.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},n=t.query,i=void 0===n?"":n,r=t.ad_id,o=void 0===r?"":r;return{query:i,ad_id:o}})))}))),v.length>=e.pageSize&&(m.push(v),p.push(Object.assign({},y,{is_swap:1,impr_query:JSON.stringify(v.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},n=t.query,i=void 0===n?"":n,r=t.ad_id,o=void 0===r?"":r;return{query:i,ad_id:o}})))}))),(0,r.mf)(e.afterTrigger)&&(e.currentData={pageArray:m,imprArray:p,info_to_second_page:d},e.afterTrigger(e.currentData)),(0,r.mf)(e.changeIcon)&&e.changeIcon({isShow:!0}),e.currentData})).catch((function(){}))}},{key:"go2LandPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e=e||{};var n=t<this.pageSize?0:1,c=this.currentData||{},u=c.pageArray,l=void 0===u?[]:u,d=c.info_to_second_page,g=void 0===d?"":d,f=(l||[])[n]||[],h=(e.query||"").trim();if(h){for(var v=[],m=0,p=f.length;m<p;m++){var y=f[m]||{},_=y.query,b=y.goods_id,S=y.creative,C=y.trigger_goods_id;v.push("".concat(_,"_$_").concat((S||{}).creative_id,"_$_").concat(b,"_$_").concat(C))}var k={query:h||"百货",query_goods_id:e.goods_id,recommend_ad_idx:t,trigger_goods_id:e.trigger_goods_id,scene_id:"",recommend_ad_list:v.join(",")},w=this.getCustomCfg(),I=w||{},N=I.landing_page_url,O=void 0===N?"":N,E=I.land_page_url,L=void 0===E?"":E,T=I.land_scene_id,A=void 0===T?"":T,P=I.land_app_name,F=void 0===P?"":P,R=L||O||"",U=(0,s.Z)().getBaseParams(),D=U.landUrls;R=R||(D||{})[o.oy.Ulike]||"",R=(0,r.nd)(R),F&&(k=Object.assign({},k,{app_name:F})),A&&(k=Object.assign({},k,{scene_id:A})),g&&(k=Object.assign({},k,{info_to_second_page:g}));var j=i.Z.getFunctions(),Z=j.coreUtil;(0,a.UL)(Z.appendQuery(k,R))}}},{key:"beforeLeave",value:function(e){if(!(0,a.Rw)()){var t=(this.readStorage()||{})[d]||{};t.leaveTime=Date.now(),this.saveStorage(t)}}},{key:"getCustomCfg",value:function(){var e=(0,s.Z)().getBaseParams(),t=e.destAppName;return((e.customCfg||{})[t]||{})[o.oy.Ulike]||{}}},{key:"fetch",value:function(){var e=i.Z.getFunctions().requestUtil,t=(0,s.Z)().getBaseParams()||{},n=this.getCustomCfg();if(!Object.keys(n).length)return console.error("[pdd-cartoon-goods-plugins] :: newGuessulike > 猜你喜欢配置为空"),Promise.reject({error:"猜你喜欢配置为空"});var r=(0,a.FH)(),o=(0,s.Z)().getBaseParams(),c=o.destAppName,u=o.page,l=void 0===u?1:u,d=o.listId,g=o.optId,f=void 0===g?0:g,h=o.subId,v=void 0===h?0:h,m={page_sn:t.pageSn,app_name:n.trigger_app_name,opt_id:v||f,page:l,size:this.requestNum,list_id:"".concat(c,"_").concat(d,"_").concat(v||f),mini_program:!!r};return m.opt_id&&isNaN(m.opt_id)&&(m.opt_id=0),m=Object.assign({},m,this.extendParams||{}),e.baseRequest(this.baseUrl,{method:"POST",params:Object.assign({},m)}).catch((function(){return{}}))}},{key:"saveStorage",value:function(e){var t,n,r,o=this.readStorage();o=Object.assign({},o,(r=e,(n=d)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),i.Z.getFunctions().localStorage.setStorageSync(this.pageKey,JSON.stringify(o))}},{key:"readStorage",value:function(){var e={};try{var t=i.Z.getFunctions().localStorage.getStorageSync(this.pageKey)||"";e=t?JSON.parse(t):{}}catch(e){}return e||{}}}],n&&u(t.prototype,n),g&&u(t,g),e}();t.Z=g},56887:function(e,t,n){var i=n(82448),r=n(18735),o=n(66556),a=n(37554),s=n(63409);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d="cartoon_widgets",g="cartoon_widgets_new_similar",f=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageKey="".concat(d,"_new_similar_ads"),this.interval=7,this.recommendNum=4,this.baseUrl="api/tyrion/ad_list",this.backCb=[],this.offset=0,this.timeSpan=0,this.recommendAppName="",this.extendParams={extended_params:JSON.stringify({lu_ad_func:!0})},this.name="newSimilarAds",this.runAfterSeceneReturn=function(){n.runBackCb()};var i=t.baseUrl,r=void 0===i?this.baseUrl:i;this.baseUrl=r,this.reset(t),this.addCbListener()}var t,n,f;return t=e,n=[{key:"reset",value:function(e){var t=i.Z.getFunctions().coreUtil.getCurrentPageName().name,n=e||{},o=n.offset,a=void 0===o?this.offset:o,s=n.pageName,c=void 0===s?t:s,u=n.timeSpan,l=void 0===u?this.timeSpan:u,g=n.interval,f=void 0===g?this.interval:g,h=n.recommendNum,v=void 0===h?this.recommendNum:h,m=n.extendParams,p=void 0===m?this.extendParams:m;this.pageKey="".concat(d,"_").concat(c||"new_similar_ads"),this.interval=f,this.recommendNum=v,this.offset=a,this.timeSpan=l,this.extendParams=Object.assign({},this.extendParams,p),(0,r.Z)().reset(e)}},{key:"addCbListener",value:function(){var e=i.Z.getFunctions().nativeNotification;(0,a.Rw)()&&e.addSceneReturnCallback(this.runBackCb.bind(this))}},{key:"runBackCb",value:function(){if((this.backCb||[]).length){for(var e=0,t=Math.min(this.backCb.length,3);e<t;e++){var n=this.backCb[e];(0,o.mf)(n)&&n()}this.backCb=[]}}},{key:"getCustomCfg",value:function(){var e=(0,r.Z)().getBaseParams(),t=e.destAppName;return((e.customCfg||{})[t]||{})[s.oy.Similar]||{}}},{key:"getMonitorCfg",value:function(){return(0,r.Z)().getBaseParams().monitorCfg||{}}},{key:"pushBackCb",value:function(e,t){var n=this,r=(t||{}).type;if(!(void 0===r?s.oy.Goods:r)){var c=i.Z.getFunctions(),l=c.coreUtil,d=c.nativeNotification,g=(l||{}).isWeapp,f=void 0===g?function(){return!1}:g,h=(d||{}).addSceneReturnCallback,v=void 0===h?null:h,m=(0,a.FH)(),p=void 0!==("undefined"==typeof document?"undefined":u(document))&&(0,o.mf)((document||{}).addEventListener);!(0,a.Rw)()&&m&&p&&document.addEventListener("touchstart",(function i(){document.removeEventListener("touchstart",i),(0,o.mf)(e)&&e(Object.assign({},t,{offset:n.offset}))}));var y=(0,o.mf)(f)&&f();((0,a.Rw)()&&(0,o.mf)(v)||y)&&(this.backCb=this.backCb||[],(0,o.mf)(e)&&this.backCb.push((function(){return e(Object.assign({},t,{offset:n.offset,timeSpan:n.timeSpan}))})))}}},{key:"beforeLeave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},n=t.data,i=void 0===n?{}:n,r=t.idx,o=void 0===r?-1:r,a=t.type,s=void 0===a?0:a,c=t.optId,u=void 0===c?0:c,l=t.subId,d=void 0===l?0:l,g={goods:i,idx:o,type:s,optId:u,subId:d,time:Date.now()};this.saveStorage(g)}},{key:"beforeRequest",value:function(e){var t=(e||{}).fetchParams,n=void 0===t?{}:t,i=(this.getMonitorCfg()[s.oy.Similar]||{}).request||{},o=(0,a.WI)(i.eventId,(0,r.Z)().orgStr);return(0,a.ep)(o,n)}},{key:"afterResponse",value:function(e){var t=(e||{}).result,n=((void 0===t?null:t)||{}).recommend_query_ad_single_list||[],i=Number(n.length)||0,o=(this.getMonitorCfg()[s.oy.Similar]||{}).response||{},c=o.minAmount||4,u=(0,a.WI)(o.eventId,(0,r.Z)().orgStr);i<c&&(0,a.ep)(u,e)}},{key:"afterEnter",value:function(e){var t=this,n=this.ad2FetchSimilar(e)||{},o=n.idx,c=void 0===o?-1:o,u=n.goods,l=(void 0===u?{}:u)||{},d=l.goods_id,g=void 0===d?"":d,f=l.title_show_type,h=void 0===f?0:f;if(!g)return Promise.resolve({});var v=this.getCustomCfg();if(!Object.keys(v).length)return console.error("[pdd-cartoon-goods-plugins] :: newSimilar > 找相似配置为空"),Promise.reject({error:"找相似配置为空"});var m=(0,r.Z)().getBaseParams(),p=this.recommendNum,y=(0,r.Z)().getBaseParams(),_=y.destAppName,b=y.page,S=void 0===b?1:b,C=y.listId,k=y.optId,w=void 0===k?0:k,I=y.subId,N=void 0===I?0:I,O={page_sn:m.pageSn,app_name:v.trigger_app_name,goods_ids:g,opt_id:N||w,page:S,size:p,list_id:"".concat(_,"_").concat(C,"_").concat(N||w),mini_program:(0,a.FH)()};O.opt_id&&isNaN(O.opt_id)&&(O.opt_id=0),O=Object.assign({},O,this.extendParams||{});var E=i.Z.getFunctions().requestUtil;return this.beforeRequest({fetchParams:O}),E.baseRequest(this.baseUrl,{method:"POST",params:O}).then((function(e){var n=(0,a.CL)((e||{}).item_list),i=n.recommend_query_ad_single_list||[];n.recommend_query_ad_single_list=i.slice(0,4);var r=Number(i.length)||0;return t.afterResponse({fetchParams:O,result:n}),r<p?{}:{data:Object.assign({title_show_type:h},n||{}),index:c,type:s.oy.Similar,offset:t.offset,timeSpan:t.timeSpan}})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.afterResponse({fetchParams:O,excetion:e})}))}},{key:"ad2FetchSimilar",value:function(e){var t=(0,r.Z)().getBaseParams(),n=t.optId,i=t.subId,a=(e||{}).list,c=void 0===a?[]:a,u=this.readStorage();this.delStorage();var l=u[g]||{},d=l.optId,f=l.subId,h=l.time,v=void 0===h?Date.now():h,m=l.goods,p=l.idx,y=(m||{}).goods_id,_=void 0===y?"":y,b=c[p]||{};(0,o.mf)(c.find)&&(b=c.find((function(e){return e=e||{},Number(e.impr_index)===p}))||{});var S=this.getCustomCfg().trigger_scene_id||0,C=(t.menu||{}).disable_ad||{};return Date.now()-v<1e3*this.interval||n!==d||i!==f||b.goods_id!==_||!S||C[s.oy.Similar]?null:l}},{key:"delStorage",value:function(){var e=this.readStorage();e=Object.assign({},e,c({},g,null)),i.Z.getFunctions().localStorage.setStorageSync(this.pageKey,JSON.stringify(e))}},{key:"saveStorage",value:function(e){var t=this.readStorage();t=Object.assign({},t,c({},g,e)),i.Z.getFunctions().localStorage.setStorageSync(this.pageKey,JSON.stringify(t))}},{key:"readStorage",value:function(){var e={};try{var t=i.Z.getFunctions().localStorage.getStorageSync(this.pageKey)||"";e=t?JSON.parse(t):{}}catch(e){}return e||{}}}],n&&l(t.prototype,n),f&&l(t,f),e}();t.Z=f},97710:function(e,t,n){var i=n(82448),r=n(66556),o=n(37554);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(e){return{}},d="cartoon_widgets",g="cartoon_widgets_scroll_san",f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageKey="".concat(d,"_scan_by_scroll"),this.goodsTime=-1,this.phases=[{1:20}],this.domCutDown="#cartoon-plugin-cutdown",this.message="当前页面浏览<span>#{second}秒</span>，即可获得1000步",this.scrollFn=null,this.leftTickets=0,this.callBack=l,this.doScrolling=l,this.isNativeBack=!1,this.isForceUpdate=!0,this.initProps={},this.name="scanByScroll";var n=(t||{}).autoStart,i=void 0===n||n;this.initProps=t,this.ticketCb=function(e){return{}},i&&this.start(t)}var t,n,c;return t=e,n=[{key:"restart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initProps;this.delStorage(),this.start(e)}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initProps,t=i.Z.getFunctions(),n=t.coreUtil,r=n.getCurrentPageName(),o=r.name,a=e||{},c=a.pageName,u=void 0===c?o:c,g=a.phases,f=void 0===g?[{1:20}]:g,h=a.goodsTime,v=void 0===h?-1:h,m=a.domCutDown,p=void 0===m?"#cartoon-plugin-cutdown":m,y=a.message,_=void 0===y?"当前页面浏览<span>#{second}秒</span>，即可获得1000步":y,b=a.callBack,S=void 0===b?l:b,C=a.ticketCb,k=void 0===C?l:C;this.pageKey="".concat(d,"_").concat(u||"scan_by_scroll"),this.callBack=S,this.ticketCb=k,this.phases=s(f),this.goodsTime=v,this.domCutDown=p,this.message=_,setTimeout(this.runAfterEnter.bind(this),0)}},{key:"addScrollListener",value:function(){var e=this,t=document.querySelector(this.domCutDown)||{},n=this.message;this.doScrolling=(0,r.P2)((function(i){if(e.leftTickets--,(0,r.mf)(e.ticketCb)&&e.ticketCb(e.leftTickets),e.leftTickets<=0)return t.innerHTML="",void e.endPhaseCutDown();t.innerHTML=n.replace(/\#\{second\}/gi,e.leftTickets.toString())}),1e3)}},{key:"countDown",value:function(){var e=document.querySelector(this.domCutDown)||{},t=this.phases[0]||{},n=Number(Object.values(t)[0])||0,o=(this.readStorage()||{})[g]||{},a=o.leaveTime,s=void 0===a?Date.now():a,c=o.leftTickets,u=void 0===c?n:c,d=i.Z.getFunctions().coreUtil.parseUrlQuery((0,r.w)())||{};1===Number(d.is_back)||this.isNativeBack||(this.isNativeBack=!1,u=n,s=-1);var f=Math.max(Math.floor((Date.now()-s)/1e3),0);if(f=s<0?0:f,this.goodsTime>=0&&f>this.goodsTime&&(f=this.goodsTime),this.leftTickets=Math.max(u-f,0),this.saveStorage({date:(0,r.mr)(new Date),leftTickets:this.leftTickets,leaveTime:-1,phases:this.phases}),this.leftTickets<=0)return e.innerHTML="",this.doScrolling=l,this.endPhaseCutDown();var h=this.message;e.innerHTML=h.replace(/\#\{second\}/gi,this.leftTickets.toString()),(0,r.mf)(this.ticketCb)&&this.ticketCb(this.leftTickets,f)}},{key:"endPhaseCutDown",value:function(){this.doScrolling=l,this.callBack&&this.callBack((function(){}),(function(){}))}},{key:"beforeLeave",value:function(e){var t=this,n=(this.readStorage()||{})[g]||{};n.leaveTime=Date.now(),n.leftTickets=this.leftTickets,this.saveStorage(n);var a=i.Z.getFunctions().nativeNotification;if(!(0,o.FH)()){var s=(0,r.mf)(a.addSceneReturnCallback);(0,o.Rw)()&&s&&a.addSceneReturnCallback(function(){t.isNativeBack=!0,t.doScrolling=l,t.countDown(),setTimeout((function(){t.addScrollListener()}),1e3)}.bind(this))}}},{key:"runAfterEnter",value:function(e){this.countDown(),this.addScrollListener()}},{key:"delStorage",value:function(){var e=this.readStorage();e=Object.assign({},e,a({},g,null)),i.Z.getFunctions().sessionStorage.setStorageSync(this.pageKey,JSON.stringify(e))}},{key:"saveStorage",value:function(e){var t=this.readStorage();t=Object.assign({},t,a({},g,e)),i.Z.getFunctions().sessionStorage.setStorageSync(this.pageKey,JSON.stringify(t))}},{key:"readStorage",value:function(){var e={};try{var t=i.Z.getFunctions().sessionStorage.getStorageSync(this.pageKey)||"";e=t?JSON.parse(t):{}}catch(e){}return e||{}}}],n&&u(t.prototype,n),c&&u(t,c),e}();t.Z=f},34073:function(e,t,n){var i=n(82448),r=n(66556),o=n(37554);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(e){return{}},u="cartoon_widgets",l="cartoon_widgets_scan_x_cell",d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageKey="".concat(u,"_scan_by_scroll"),this.totalCnt=-1,this.leftCnt=-1,this.domCutDown="#cartoon-plugin-cutdown",this.message="当前页面浏览<span>#{count}个</span>商品，即可获得奖励",this.callBack=c,this.ticketCb=c,this.initProps={},this.initProps=t}var t,n,d;return t=e,n=[{key:"restart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initProps;this.delStorage(),this.start(e)}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initProps,t=i.Z.getFunctions(),n=t.coreUtil,r=n.getCurrentPageName(),o=r.name,a=e||{},s=a.pageName,l=void 0===s?o:s,d=a.count,g=void 0===d?this.totalCnt:d,f=a.domCutDown,h=void 0===f?this.domCutDown:f,v=a.message,m=void 0===v?this.message:v,p=a.callBack,y=void 0===p?c:p,_=a.ticketCb,b=void 0===_?c:_;!g||g<0||(this.pageKey="".concat(u,"_").concat(l||"scan_x_cell"),this.callBack=y,this.ticketCb=b,this.leftCnt=g,this.totalCnt=g,this.domCutDown=h,this.message=m,this.runAfterEnter())}},{key:"countDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e=e>0?e:1;var t=document.querySelector(this.domCutDown)||{},n=this.message;if(this.leftCnt=this.leftCnt-e<0?0:this.leftCnt-e,this.leftCnt<=0)return t.innerHTML="",this.callBack(),void this.delStorage();(0,r.mf)(this.ticketCb)&&this.ticketCb(this.leftCnt);var i=this.readStorage()||{},o=i[l]||{};o.leftCnt=this.leftCnt,this.saveStorage(o),t.innerHTML=n.replace(/\#\{count\}/gi,this.leftCnt.toString())}},{key:"beforeLeave",value:function(e){var t=this,n=i.Z.getFunctions().nativeNotification;if(!(0,o.FH)()){var a=(0,r.mf)(n.addSceneReturnCallback);(0,o.Rw)()&&a&&n.addSceneReturnCallback(function(){t.countDown()}.bind(this))}}},{key:"runAfterEnter",value:function(e){var t=i.Z.getFunctions().coreUtil.parseUrlQuery((0,r.w)())||{},n=1===Number(t.is_back),o=this.readStorage()||{};if(n){var a=(o[l]||{}).leftCnt,s=void 0===a?0:a;return this.leftCnt=s,void this.countDown()}if(this.leftCnt=this.totalCnt,!this.leftCnt||this.leftCnt<0)return this.delStorage();var c=o[l]||{};c.leftCnt=this.leftCnt,this.saveStorage(c);var u=document.querySelector(this.domCutDown)||{},d=this.message;this.leftCnt>0&&(u.innerHTML=d.replace(/\#\{count\}/gi,this.leftCnt.toString()))}},{key:"delStorage",value:function(){var e=this.readStorage();e=Object.assign({},e,a({},l,null)),i.Z.getFunctions().sessionStorage.setStorageSync(this.pageKey,JSON.stringify(e))}},{key:"saveStorage",value:function(e){var t=this.readStorage();t=Object.assign({},t,a({},l,e)),i.Z.getFunctions().sessionStorage.setStorageSync(this.pageKey,JSON.stringify(t))}},{key:"readStorage",value:function(){var e={};try{var t=i.Z.getFunctions().sessionStorage.getStorageSync(this.pageKey)||"";e=t?JSON.parse(t):{}}catch(e){}return e||{}}}],n&&s(t.prototype,n),d&&s(t,d),e}();t.Z=d},96889:function(e,t,n){var i=n(82448),r=n(66556),o=n(37554);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l="cartoon_widgets",d="cartoon_widgets_san_x_mins",g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageKey="".concat(l,"_scan_x_mins"),this.goodsTime=-1,this.phases=[{1:20},{2:20},{3:20}],this.domCutDown="#cartoon-plugin-cutdown",this.message="当前页面浏览<span>#{second}秒</span>，即可获得1000步",this.startTime=Date.now()+1e3,this.interval=null,this.isNativeBack=!1,this.isForceUpdate=!0,this.initProps={},this.name="scanXmins",this.callBack=function(e,t,n){};var n=(t||{}).autoStart,i=void 0===n||n;this.initProps=t,this.ticketCb=function(e){return{}},i&&this.start(t)}var t,n,c;return t=e,n=[{key:"restart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initProps;this.delStorage(),this.start(e)}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.initProps,t=i.Z.getFunctions(),n=t.coreUtil,o=n.getCurrentPageName(),a=o.name,c=e||{},u=c.pageName,g=void 0===u?a:u,f=c.phases,h=void 0===f?[{1:20},{2:20},{3:20}]:f,v=c.goodsTime,m=void 0===v?-1:v,p=c.domCutDown,y=void 0===p?"#cartoon-plugin-cutdown":p,_=c.message,b=void 0===_?"当前页面浏览<span>#{second}秒</span>，即可获得1000步":_,S=c.isForceUpdate,C=void 0===S||S,k=c.callBack,w=void 0===k?function(e,t,n){}:k,I=c.ticketCb,N=void 0===I?this.ticketCb:I;this.pageKey="".concat(l,"_").concat(g||"scan_x_mins"),this.callBack=w,this.ticketCb=N,this.phases=s(h),this.goodsTime=m,this.domCutDown=y,this.message=b,this.isForceUpdate=C;var O=this.readStorage(),E=O[d]||{},L=E.date,T=(0,r.mr)(new Date),A=E.phases||[];L===T&&A.length>0&&!C&&(this.phases=A),setTimeout(this.countDown.bind(this),0)}},{key:"countDown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=s(this.phases||[]),o=document.querySelector(this.domCutDown)||{},a=this.phases.shift()||{},c=Number(Object.values(a)[0])||0,u=this.readStorage()||{},l=u[d]||{},g=l.leaveTime,f=void 0===g?Date.now():g,h=l.startTime,v=void 0===h?Date.now():h,m=l.phases,p=void 0===m?[]:m;p=p||[],v=v||Date.now();var y=i.Z.getFunctions(),_=y.coreUtil,b=_.parseUrlQuery((0,r.w)())||{},S=1===Number(b.is_back)||this.isNativeBack;S||(this.isNativeBack=!1,v=Date.now(),f=-1);var C=Math.floor((Date.now()-f)/1e3);C=f<0?0:C>=0?C:0;var k=0;this.goodsTime>=0&&C>this.goodsTime&&(k=C-this.goodsTime);var w=Math.floor((Date.now()-v)/1e3);if(w>=k&&(w-=k),this.saveStorage({date:(0,r.mr)(new Date),startTime:Date.now()-1e3*w,leaveTime:-1,phases:n}),(c-=w)<=0){o.innerHTML="",(o.style||{}).display="none";var I=t?1:0;(p||[]).length>I&&this.endPhaseCutDown(a)}else{var N=this.message;this.interval&&(clearInterval(this.interval),this.interval=null),(0,r.mf)(this.ticketCb)&&this.ticketCb(c),o.innerHTML=c<=0?"":N.replace(/\#\{second\}/gi,c.toString()),(o.style||{}).display=o.innerHTML?"block":"none",this.interval=setInterval((function(){(0,r.mf)(e.ticketCb)&&e.ticketCb(c),o.innerHTML=N.replace(/\#\{second\}/gi,(c--).toString()),(o.style||{}).display=o.innerHTML?"block":"none",c<=0&&e.interval&&(o.innerHTML="",(o.style||{}).display="none",clearInterval(e.interval),e.interval=null,e.endPhaseCutDown(a))}),1e3)}}},{key:"endPhaseCutDown",value:function(e){var t=this;this.callBack&&(0,this.callBack)((function(){t.countDown(!0)}),(function(){var e=(t.readStorage()||{})[d]||{};(e.phases||[]).length>0&&(e.startTime=Date.now(),e.leaveTime=-1,t.saveStorage(e))}),e)}},{key:"beforeLeave",value:function(e){var t=this,n=(this.readStorage()||{})[d]||{};(n.phases||[]).length>0&&(n.leaveTime=Date.now(),this.saveStorage(n));var a=i.Z.getFunctions().nativeNotification;if(!(0,o.FH)()){this.interval&&(0,r.mf)(clearInterval)&&(clearInterval(this.interval),this.interval=null);var s=(0,r.mf)(a.addSceneReturnCallback);(0,o.Rw)()&&s&&a.addSceneReturnCallback(function(){t.isNativeBack=!0,t.runAfterEnter()}.bind(this))}}},{key:"runAfterEnter",value:function(e){this.interval&&(clearInterval(this.interval),this.interval=null);var t=(this.readStorage()||{})[d]||{};(t.phases||[]).length>0&&(this.phases=t.phases),this.countDown()}},{key:"delStorage",value:function(){var e=this.readStorage();e=Object.assign({},e,a({},d,null)),i.Z.getFunctions().sessionStorage.setStorageSync(this.pageKey,JSON.stringify(e))}},{key:"saveStorage",value:function(e){var t=this.readStorage();t=Object.assign({},t,a({},d,e)),i.Z.getFunctions().sessionStorage.setStorageSync(this.pageKey,JSON.stringify(t))}},{key:"readStorage",value:function(){var e={};try{var t=i.Z.getFunctions().sessionStorage.getStorageSync(this.pageKey)||"";e=t?JSON.parse(t):{}}catch(e){}return e||{}}}],n&&u(t.prototype,n),c&&u(t,c),e}();t.Z=g},69136:function(e,t,n){var i=n(82448),r=n(66556),o=n(63409),a=n(37554),s=n(18735);function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g="api/manor-gateway/manor/query/search/ads",f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;l(this,e),this.baseUrl=g,this.beginFirst=!0,this.postClickGoods=!0,this.clickedIds={},this.queries={},this.extendParams={},this.maxPage=-1,this.name="searchLoader";var o={},a=i.Z.getFunctions(),s=a.coreUtil;(0,r.Lf)()&&(o=s.parseUrlQuery((0,r.w)())||{}),this.queries=o;var c=o,u=c.prev_goods,d=void 0===u?"":u;d&&(this.clickedIds[0]=[d]),this.reset(t,n)}var t,n,u;return t=e,n=[{key:"runInContructor",value:function(e){var t=(e||{}).dataList,n=void 0===t?[]:t;(n||[]).length>0&&(this.beginFirst=!1,(0,s.Z)().ascertainOrgRec(n[0]))}},{key:"reset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.baseUrl,n=e||{},i=n.beginFirst,r=void 0===i?this.beginFirst:i,o=n.postClickGoods,a=void 0===o?this.postClickGoods:o,c=n.extendParams,u=void 0===c?this.extendParams:c,l=n.maxPage,d=void 0===l?this.maxPage:l;this.baseUrl=t,this.beginFirst=r,this.postClickGoods=a,this.extendParams=u,this.maxPage=d,(0,s.Z)().reset(e)}},{key:"buildExtParams",value:function(){var e=this.queries||{},t=e.trigger_goods_id,n=void 0===t?"":t,i=e.query_goods_id,r=void 0===i?"":i,o=e.recommend_ad_idx,a=void 0===o?0:o,s=e.recommend_ad_list,c=void 0===s?"":s,u=e.recommend_ad_click_text,l=void 0===u?0:u;n=(n||"").trim(),r=(r||"").trim(),c=(c||"").trim(),a=Number(a),l=Number(l)||0;var d=[];return n&&d.push("triggerGoodsId,".concat(n)),r&&d.push("goodsId,".concat(r)),a>=0&&d.push("idx,".concat(a)),l&&d.push("clickQuery,".concat(!0)),c&&d.push("recommendList,".concat(c)),d.join(";")}},{key:"isFetchEnded",value:function(){var e=(0,s.Z)(),t=this.beginFirst?1:e.page+1;return this.maxPage>0&&t>this.maxPage}},{key:"fetch",value:function(e){var t=this,n=(0,s.Z)(),r=n.getBaseParams(),o=e||{},c=o.page,u=void 0===c?r.page:c,l=o.size,d=void 0===l?r.size:l,g=o.listId,f=void 0===g?r.listId:g,h=this.queries||{},v=h.query,m=void 0===v?"":v,p=h.info_to_second_page,y=void 0===p?"":p,_=i.Z.getFunctions().requestUtil,b=r.destAppName,S=r.destSceneId,C={query:m||"百货",page_sn:r.pageSn,app_name:b,scene_id:S,list_id:"".concat(b,"_").concat(r.listId,"_0"),page:this.beginFirst?1:n.page+1,size:this.beginFirst?n.page*n.size:n.size},k=(this.clickedIds||{})[0]||[],w=this.postClickGoods;k.length>0&&w&&(C.click_goods_ids=k.join(",")),C.ad=this.buildExtParams(),y&&(C=Object.assign({},C,{info_to_second_page:y})),n.reset({page:u,size:d,listId:f});var I=this.extendParams||{};C=Object.assign({},I,C);var N={useRawResponse:!0};return _.baseRequest(this.baseUrl,{method:"POST",params:Object.assign({},C,{anti_content:""})}).then((function(e){var i=e=e||{},r={};N.useRawResponse&&(i=e.data||e,r=e.headers||{});var o=(i||{}).items,s=void 0===o?[]:o,c=(0,a.Jf)(s||[]);return(c||[]).length>0&&!t.beginFirst&&n.incrPage(),(c||[]).length>0&&(t.beginFirst=!1),n.ascertainOrgRec((c||[])[0],r),{page:u,size:d,list:c||[]}}))}},{key:"beforeLeave",value:function(e){var t=(e||{}).data,n=((void 0===t?{}:t)||{}).goods_id,i=void 0===n?"":n;(this.clickedIds[0]||[]).length||(this.clickedIds[0]=[]),i&&this.clickedIds[0].push(i)}},{key:"beforePatch",value:function(e,t){for(var n=[].concat(c(e),c(t)),i=0,r=0,a=n.length;r<a;r++){var s=n[r]||{},u=n[r-1]||{},l=(n[r]||{}).elem_type,d=void 0===l?0:l;d=Number(d)||0,i%2!=1||d!==o.oy.Hmall&&d!==o.oy.Sliding?(n[r]||{}).impr_index=i:(n[r-1]=Object.assign({},s,{impr_index:u.impr_index}),n[r]=Object.assign({},u,{impr_index:i})),i+=1,d!==o.oy.Hmall&&d!==o.oy.Sliding||(i+=1)}return n}}],n&&d(t.prototype,n),u&&d(t,u),e}();t.Z=f},66556:function(e,t,n){n.d(t,{mr:function(){return i},o8:function(){return r},Kn:function(){return o},mf:function(){return s},Lf:function(){return c},nd:function(){return u},jS:function(){return l},P2:function(){return d},zO:function(){return g},w:function(){return f},ZQ:function(){return h},Zb:function(){return v},M2:function(){return m}});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd";t=t||"yyyy-MM-dd";var n={"M+":(e=e||new Date).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t},r=function(e){return"[object Undefined]"===Object.prototype.toString.call(e)},o=function(e){return"[object Object]"===Object.prototype.toString.call(e)},a=function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(e){return"[object Function]"===Object.prototype.toString.call(e)},c=function(){return"undefined"!=typeof window},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.replace(new RegExp("^\\"+t+"+|\\"+t+"+$","igm"),"")},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"eq",i=arguments.length>3?arguments[3]:void 0;return i&&(e=i(e)),"some"===n?(t=(t=a(t)?t:[t]).map((function(e){return i?i(e):e}))).indexOf(e)>=0:(a(t)&&(t=t[0]),i&&(t=i(t)),"ne"===n||"neq"===n?e!==t:"gt"===n?e>t:"ge"===n?e>=t:"lt"===n?e<t:"le"===n?e<=t:e===t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Date.now()-t;return function(){var i=Date.now();i-n>=t&&s(e)&&(n=i,e())}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;e=e||32;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,i="",r=0;r<e;r++)i+=t.charAt(Math.floor(Math.random()*n));return i},f=function(){return c()&&(window||{}).location.href||""},h=function(e){return e&&isNaN(e)?e:Number(e)||0},v=function(){var e="https://manortk.pinduoduo.com/me.gif";return c()&&100*Math.random()<=window.__GRAY_MANORTK_HOST&&(e="https://manortk-a.pinduoduo.com/me.gif"),c()&&"m.hutaojie.com"===(window.location||{}).hostname&&(e="http://manortk.htj.pdd.net/me.gif"),e},m=function(){var e="";try{var t=(e=((("undefined"==typeof window?{}:window||{}).location||{}).pathname||"").substring(1)).indexOf(".html");e=e.substring(0,t)||"default"}catch(t){e=""}return e||"default"}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-fun-cashback/js/cartoon-goods-plugin_ed899975cbc4aff50d11.js.map