(self.webpackChunk_name_mobile_dc=self.webpackChunk_name_mobile_dc||[]).push([["b49b"],{hol3:function(){},z89n:function(e,t,n){"use strict";n.d(t,{V:function(){return A}});var r,i,o=n("iQtE"),a=n.n(o),s=n("4vPy"),c=n("abMU"),u=n("tSVM"),l=n("ugpD"),f=n("URee"),p=n("lrCg"),d=n.n(p),h=n("/4JS"),v=n.n(h),m=n("aDGo"),y=n("xeO4"),g=n.n(y),b=n("U5BY"),w=n.n(b),k=n("hwDT"),_=n.n(k),O=n("T6n4"),S=n.n(O),P=n("swbT"),x=function(){function e(){var t=this;w()(this,e),this.riskControlCrawler=void 0,this.serverTime=void 0,this.retry=function(e){return e.message+="风控初始化失败",(0,P.y7)(e),(r=t.realInit()).catch((function(e){e.message+="风控初始化重试失败",(0,P.y7)(e)})),r}}var t,i;return _()(e,[{key:"loadImportRisk",value:function(){return Promise.all([n.e("7696"),n.e("aaeb2")]).then(n.bind(n,"yG7P"))}},{key:"realInit",value:(i=g()(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadImportRisk();case 2:t=e.sent.default,this.riskControlCrawler=new t({serverTime:this.serverTime}),this.riskControlCrawler.init();case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"init",value:function(e){return this.serverTime=e||this.serverTime||Date.now(),r||(r=this.realInit()).catch(this.retry),r}},{key:"getAntiContent",value:(t=g()(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,this.init(t);case 4:return this.riskControlCrawler.updateServerTime(Date.now()),e.next=7,this.riskControlCrawler.messagePackSync();case 7:n=e.sent,this.riskControlCrawler.clearCache(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),(0,P.y7)(e.t0);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e){return t.apply(this,arguments)})}]),e}();function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}i=new x;var E=function(e){return{request:function(t){var n="get"===t.method?"params":"data";return t[n]=C(C({},t[n]),{},{cart_id:e.id}),t}}},j=function(e){return{request:function(t){var n=t.headers;return e.requestContext.queries.share_token&&(n["Share-Token"]=e.requestContext.queries.share_token),t}}},R=function(e){return{request:function(t){if(!1===t.needAntiContent&&!t.useNativeAntiToken)return t;var n=(0,s.getCurrentPlatform)(),r=n.isNativePlatform,o=n.version;return t.useNativeAntiToken&&r&&(0,s.compareVersion)(o,"4.69.0")>=0?t:i.getAntiContent(e.serverTime).then((function(e){var n="get"===t.method?"params":"data";return t[n]=C(C({},t[n]),{},{anti_content:e}),t}))}}},T=function(e){var t=m.I.getInstance(e.req);if(!(t instanceof m.I))return{};var n=0;return{request:function(e){var r=e.__widgetId__,i=e.__widgetName__;if(!r||!i)return e;var o=e.url.split("?"),a=d()(o,1)[0],s="api~".concat(i,"~").concat(r,"~").concat(a.startsWith("/")?a.slice(1):a,"~").concat(n++);return e.$perfReqId=s,t.mark(s),e},response:function(e){return e.config.$perfReqId&&t.markEnd(e.config.$perfReqId),e},responseError:function(e){throw e.config.$perfReqId&&t.markEnd(e.config.$perfReqId),e}}},D=["",""].includes(location.hostname);function N(){var e=(0,s.getPlatform)(window.navigator.userAgent),t=e.isNativePlatform||e.isTinyNativePlatform||D,n=(0,s.isWebBundle)()?"https:":location.protocol,r=["hutaojie","htj"].some((function(e){return location.hostname.includes(e)}))?n+"//apiv2.hutaojie.com/":"https://api.pinduoduo.com/",i="".concat(location.protocol,"//").concat(location.host,"/proxy/api/");return t?r:i}var A=function(e){var t=e.rootStore,n=e.pageInfo,r=void 0===n?{}:n,i=e.axiosPlugins,o=void 0===i?[]:i,p=(0,s.getPlatform)(window.navigator.userAgent),d=(0,c.create)({baseURL:N(),withCredentials:!0,adapter:p.isNativePlatform||p.isTinyNativePlatform?u.default:l.default}),h=d.http,v=d.usePlugins;return h.defaults.timeout=12e3,v([].concat(a()(o),[T(t),{request:function(e){var t="get"===e.method,n=t?e.params:e.data;return Object.keys(n).forEach((function(e){var r=n[e];r||0===r||!1===r?t&&r instanceof Array&&(n[e]=r.join(",")):delete n[e]})),e.globalExtraParams&&Object.assign(n,e.globalExtraParams),e.name=e.name||e.url,e}},E(t),R(t),j(t),(0,f.bizErrorCheck)(),(0,f.requestLogger)(r),(0,f.domainProxy)(D),(0,f.appendHeader)(),(0,f.extendQuery)(),(0,f.responseErrorHandler)(),(0,f.retrieveData)()])),h.interceptors.response.use(null,(function(e){var t;throw e.message="".concat(e.message,", url: ").concat(e.config.url,", params: ").concat(JSON.stringify(e.config.params)),e.data=(null==e||null===(t=e.response)||void 0===t?void 0:t.data)||{},e})),h.usePlugins=v,h}},ghYS:function(e,t,n){"use strict";n.d(t,{Xf:function(){return g},zv:function(){return b},ZP:function(){return w}});var r=n("/4JS"),i=n.n(r),o=n("4k0V"),a=n("Irca"),s=n("DhF+"),c=n("FFYS");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(){var e=window.location,t=e.protocol,n=e.hostname;return{"m.pinduoduo.net":"m.pinduoduo.net","mobile.yangkeduo.com":"mobile.yangkeduo.com","csr.pddpic.com":"csr.pddpic.com","amcomponent:":"amcomponent://com.xunmeng.pinduoduo"}["amcomponent:"===t?t:n]||"other"}var p={Ios:/iphone|ipad|ipod/i,IosVersion:/os (\d+)_(\d+)_?(\d+)?/i,Android:/Android/i,AndroidNative:/phh_android_version/i,IosNative:/phh_ios_version/i,IosApiRequest:/BundleID\/com.xunmeng.pinduoduo/i},d="android",h="ios",v="out_android",m="out_ios",y="out_other";function g(){var e=window.navigator.userAgent;return p.AndroidNative.test(e)?e.includes("app_type/tiny")?v:d:p.IosNative.test(e)||p.IosApiRequest.test(e)?h:p.Android.test(e)?v:p.Ios.test(e)?m:y}function b(){return c.IP.isTinyNativePlatform?"tiny":c.IP.isLiteNativePlatform?"lite":c.IP.isMecoCore?"meco":c.IP.isNativePlatform&&window.navigator.userAgent.match(/Android/)?window.navigator.userAgent.match(/MQQBrowser/)?"x5":"system":"other"}function w(e){var t,n=e.pn,r=void 0===n?0:n,i=e.groupId,u=window.location,p=u.protocol,d=u.hostname,h=u.href,v=(0,o.parseUrlQuery)(h);return{tags:{isDirty:0,connectZero:0,isPreRender:(0,c.UO)().onPreRenderShow?1:0,hostname:f(),platform:g(),nativePackType:b(),pn:r,firstInit:0},fields:l(l(l({perf:(t=[],window.performance&&window.performance.timing?(t.push(1),t.push(window.performance.getEntriesByName&&window.performance.getEntriesByType?1:0),t.push(window.performance.mark?1:0)):t.push(0),t.join("")),href:h,protocol:p,hostname:d,system:c.IP.system},c.IP.systemVersion?{systemVersion:c.IP.systemVersion}:{}),c.IP.version?{version:c.IP.version}:{}),{},{platform:c.IP.platform,logVersion:a.VU,env:"production",traceId:(0,s.Wj)(i),referPageName:v.refer_page_name||"",referPageSN:v.refer_page_sn||"",userAgent:window.navigator.userAgent}),longFields:l(l({},c.IP.systemVersion?{systemVersionLong:(0,s.eQ)(c.IP.systemVersion)}:{}),c.IP.version?{appLongVersion:(0,s.eQ)(c.IP.version)}:{})}}},zMVx:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n("iQtE"),i=n.n(r),o=n("/4JS"),a=n.n(o),s=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},c=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},u=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},l=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},f=function(e,t,n){var r;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},p=-1,d=function(){u((function(e){var t=e.timeStamp;p=t}),!0)},h=function(){return p<0&&((p=window.webVitals.firstHiddenTime)===1/0&&d(),l((function(){setTimeout((function(){p="hidden"===document.visibilityState?0:1/0,d()}),0)}))),{get firstHiddenTime(){return p}}},v=function(e,t){var n,r=h(),i=s("FCP"),o=function(e){"first-contentful-paint"===e.name&&(u&&u.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),n(!0)))},a=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],u=a?null:c("paint",o);(a||u)&&(n=f(e,i,t),a&&o(a),l((function(r){i=s("FCP"),n=f(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,n(!0)}))}))})))},m=!1,y=-1,g={},b=n("JgE6"),w=n.n(b),k=n("4k0V"),_=n("IY4h"),O=n("ghYS"),S=n("Irca");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={LCP:{scaleRate:1,upLimit:1e4},TTID:{scaleRate:1,upLimit:2e4},FID:{scaleRate:10,upLimit:1e3},CLS:{scaleRate:1e4,upLimit:1}},C=function(e,t){if("number"!=typeof e||Number.isNaN(e))return-1;var n=I[t],r=n.scaleRate,i=n.upLimit;return Math.min(Math.max(Math.round(e*r),0),i*r)};function E(e,t,n){var r=e.map((function(e){var r=e.name,i=e.value;return{groupId:90213,amplifyRate:n,tags:x({logType:r},t),fields:{},longFields:{indexValue:C(i,r)}}}));(0,_.P2)(r,{appId:S.oN,bizSide:S.gM})}var j=function(e,t,n){var r=e.pn,o=e.grayTag;try{if(Math.random()>n)return;var a={pn:r,platform:(0,O.Xf)(),nativePackType:(0,O.zv)(),grayTag:o};w().getFirstConsistentlyInteractive({}).then((function(e){E([{name:"TTID",value:e}],a,t)}));var p=[],d=function(e){p&&p.push(e)};!function(e,t){var n,r=h(),i=s("FID"),o=function(e){e.startTime<r.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},a=c("first-input",o);n=f(e,i,t),a&&u((function(){a.takeRecords().map(o),a.disconnect()}),!0),a||window.webVitals.firstInputPolyfill(o),l((function(){i=s("FID"),n=f(e,i,t),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(o)}))}(d),function(e,t){m||(v((function(e){y=e.value})),m=!0);var n,r=function(t){y>-1&&e(t)},i=s("CLS",0),o=0,a=[],p=function(e){if(!e.hadRecentInput){var t=a[0],r=a[a.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,a.push(e)):(o=e.value,a=[e]),o>i.value&&(i.value=o,i.entries=a,n())}},d=c("layout-shift",p);d&&(n=f(r,i,t),u((function(){d.takeRecords().map(p),n(!0)})),l((function(){o=0,y=-1,i=s("CLS",0),n=f(r,i,t)})))}(d),function(e,t){var n,r=h(),i=s("LCP"),o=function(e){var t=e.startTime;t<r.firstHiddenTime&&(i.value=t,i.entries.push(e),n())},a=c("largest-contentful-paint",o);if(a){n=f(e,i,t);var p=function(){g[i.id]||(a.takeRecords().map(o),a.disconnect(),g[i.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,p,{once:!0,capture:!0})})),u(p,!0),l((function(r){i=s("LCP"),n=f(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,g[i.id]=!0,n(!0)}))}))}))}}(d);window.addEventListener("visibilitychange",(function e(){if("hidden"===document.visibilityState)try{p.length>0&&(E(i()(p),a,t),p=null,window.removeEventListener("visibilitychange",e))}catch(e){(0,k.throwErrorAsync)(e)}}))}catch(e){(0,k.throwErrorAsync)(e)}}},L2EY:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Hi}});var r=n("/4JS"),i=n.n(r),o=n("xeO4"),a=n.n(o),s=n("T6n4"),c=n.n(s),u=n("U5BY"),l=n.n(u),f=n("hwDT"),p=n.n(f),d=n("f6/u"),h=n.n(d),v=n("f17R"),m=n.n(v),y=n("Vl5s"),g=n.n(y),b=n("9bdW"),w=n.n(b),k=n("KdYu"),_=n("H+T8"),O=n("AIhP"),S=n.n(O),P=n("sdwB"),x=n.n(P),I=n("Bc86"),C=["list","rootStore"],E=function(e){var t=e.list,n=e.rootStore,r=x()(e,C);return w().createElement(w().Fragment,null,t.map((function(e,t){return w().createElement(I.Z,S()({key:e.componentId,item:e,index:t,rootStore:n},r))})))},j=n("lrCg"),R=n.n(j),T=n("FGyx"),D=n("ON9b"),N=n("UUH9"),A=function(){var e=a()(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isEnded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,D._)(3e3);case 4:i=null===(n=document.getElementsByClassName("cart-container"))||void 0===n||null===(r=n[0])||void 0===r?void 0:r.clientHeight,o=document.body.offsetHeight||document.body.clientHeight,i<o&&(0,N.V)(t,{type:"PAGE_HEIGHT_NOT_ENOUGH",name:"".concat(t.type,"_").concat(t.id),detail:"containerHeight: ".concat(i,"，viewPortHeight: ").concat(o)},"H5");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=e.rootStore,n=(0,b.useState)(!1),r=R()(n,2),i=r[0],o=r[1];(0,b.useEffect)((function(){o(!0)}),[]);return i?w().createElement(T.Z,{onEnter:function(){A(t),o(!1)}},w().createElement("div",{style:{height:".01rem"}})):null},L=(0,k.observer)((function(e){var t=e.store,n=e.children;return(0,b.useEffect)((function(){t.hooks.pageDidMount.promise(t),window.__CART_STORE__=t,_.default.replaceQuery({list_id:t.listId})}),[]),w().createElement("div",{className:"cart-container"},w().createElement(E,{rootStore:t,list:t.firstLayer}),n,w().createElement(q,{rootStore:t}))})),B=n("/18x"),F=n("4k0V"),M=n("R/J5"),V=["sp","is_back","hash"],H=function(e){var t=e.store;return(0,b.useEffect)((function(){var e=t.query,n=e.sp,r=void 0===n?0:n,i=e.is_back,o=e.hash,a=x()(e,V);if(i){if(!M.Jv.isPureWeChatPlatform){var s=location.href.split("?")[0]+"?"+(0,F.buildQuery)(a);history.replaceState({},null,s)}setTimeout((function(){window.scrollTo(0,parseInt(r,10)||0)}),10)}else o&&function(e){var t=document.getElementById(e);if(t){var n=Math.ceil(t.getBoundingClientRect().top);window.scrollTo(0,n)}}(o)}),[]),null},U=n("ukrc"),G=n.n(U),z=n("Ox/k"),W=n.n(z),Q=n("u2c9"),J=n.n(Q),X=n("UX2+"),K=n("4vPy"),Y=(0,K.getCurrentPlatform)();var Z,$,ee,te=F.enableScroll,ne=n("wFWk"),re=n.n(ne);function ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var oe,ae,se,ce,ue=0,le=G()(re())((ee=$=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(ie()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){return l()(this,r),n.apply(this,arguments)}return p()(r,[{key:"componentDidMount",value:function(){this.props.show&&1==++ue&&this.disableActions()}},{key:"componentDidUpdate",value:function(e){var t=this.props.show;!e.show&&t&&1==++ue&&this.disableActions(),e.show&&!t&&0==--ue&&this.enableActions()}},{key:"componentWillUnmount",value:function(){0==--ue&&this.enableActions()}},{key:"disableActions",value:function(){var e;Y.isNativePlatform&&(0,X.setupPullReload)({enable:!1}),e=document.querySelectorAll(".need-scroll"),(0,F.disableScroll)(e)}},{key:"enableActions",value:function(){Y.isNativePlatform&&(0,X.setupPullReload)({enable:!0}),te()}},{key:"render",value:function(){if(!this.props.show)return null;var e=this.props,t=e.style,n=e.children,r=e.maskClass,i=e.onClick,o=J()("common-mask",re().mask,r),a=w().createElement("div",{style:t,className:o,onClick:i},"function"==typeof n?n():n);return W().createPortal(a,document.body)}}]),r}(b.Component),$.defaultProps={show:!0,maskClass:"",style:{},onClick:function(){}},Z=ee))||Z,fe=n("kVO3"),pe=n.n(fe);function de(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var he={zIndex:9999},ve=G()(pe())((se=ae=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(de()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).timer=null,e.state={second:e.props.countDown,isEnd:!1},e.redirect=function(t){var n=e.props,r=n.jump,i=n.redirectUrl;clearInterval(e.timer),(r||t)&&(i?(0,_.uniformForward)(i):M.Jv.isNativePlatform?(0,_.back)():(0,_.uniformForward)("/index.html"))},e}return p()(r,[{key:"componentDidMount",value:function(){this.startTimer()}},{key:"startTimer",value:function(){var e=this;if(0===this.state.second)return this.redirect();this.props.now>this.props.offlineTime&&(this.setState({isEnd:!0}),this.timer=setInterval((function(){var t=e.state.second;0===t?e.redirect():e.setState({second:t-1})}),1e3))}},{key:"render",value:function(){var e=this.state,t=e.isEnd,n=e.second;return t&&w().createElement(le,{style:he},w().createElement("div",{className:pe().container},w().createElement("img",{className:pe().icon,src:"https://pinduoduoimg.yangkeduo.com/april_new_home/after_event/pop_icon.png"}),w().createElement("div",{className:pe().title},"活动已经结束啦"),w().createElement("div",{className:pe().button,onClick:this.redirect},ce||(ce=w().createElement("span",null,"看看其他"))),this.props.jump&&w().createElement("div",{className:pe().tip},n,"秒后自动跳转")))}}]),r}(b.Component),ae.defaultProps={offlineTime:4763376e6,now:(new Date).getTime(),countDown:5,jump:!0},oe=se))||oe,me=ve,ye=(0,k.observer)((function(e){var t,n=e.store;return w().createElement(w().Fragment,null,w().createElement(H,{store:n}),n.isEnded?w().createElement(me,{offlineTime:0,redirectUrl:n.redirectUrl,jump:!(null!==(t=n.appContext)&&void 0!==t&&t.isInAppTab)}):null)})),ge=n("G6pB");function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke,_e=function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return r?(t[n]=r,t):t}),{})},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _e({page_id:e.page_id,page_sn:e.page_sn,subjects_id:e.subjects_id,tab_id:e.tab_id,scene_group:e.scene_group,opt_id:e.opt_id})},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!Object.keys(e).length)return e;e.vsl_page_sn=t.trackingBase.pageSn;var n=_e({pageSn:e.page_sn,pageId:e.page_id,originPageSn:t.pageSn});return we(we({},e),n)},Pe=function(){var e=a()(c().mark((function e(t){var n,r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,r={},!(0,M.gW)()){e.next=34;break}return e.prev=3,e.next=6,(0,X.getPageShownType)();case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:i=e.t0,e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),i={};case 15:if(o=parseInt(i.shown_type,10),a=t.query.new_tab_container||t.query.sub_new_tab_container,1!==o||a){e.next=32;break}return n=!1,e.prev=19,e.next=22,(0,X.getPageContext)();case 22:if(e.t2=e.sent,e.t2){e.next=25;break}e.t2={};case 25:i=e.t2,r=Oe(i),e.next=32;break;case 29:e.prev=29,e.t3=e.catch(19),r={};case 32:e.next=35;break;case 34:if((0,ge.z)()){n=!1;try{u=(null===(s=window.top)||void 0===s?void 0:s.__PDD_PageContext__)||{},r=Oe(u)}catch(e){r={}}}case 35:return e.abrupt("return",{logBase:Se(r,t),doPv:n});case 36:case"end":return e.stop()}}),e,null,[[3,12],[19,29]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=a()(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ke){e.next=2;break}return e.abrupt("return",ke);case 2:return e.next=4,Pe(t);case 4:return ke=e.sent,e.abrupt("return",ke);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=n("fahf"),Ce=["pageSn","pageName","promName","page_sn","page_name","prom_name"];function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){var t=e.pageSn,n=e.pageName,r=e.promName,o=e.page_sn,a=e.page_name,s=e.prom_name;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({page_sn:t||o,page_name:n||a,prom_name:r||s},x()(e,Ce))}var Re=n("iWIM"),Te=n.n(Re),De=n("Cg2Z"),Ne=n("iQtE"),Ae=n.n(Ne),qe=function(e,t){if(!e)throw new Error("[cart]：".concat(t||"unknownError"))},Le={},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];qe(e,"httpRequire url 不能为空"),qe(!0,"httpRequire只能在客户端调用");var n=Le[e];return n instanceof Promise||(n=new Promise((function(n,r){var i;e.endsWith(".css")?((i=document.createElement("link")).href=e,i.rel="stylesheet"):((i=document.createElement("script")).src=e,i.type="text/javascript"),i.charset="utf-8",i.crossOrigin="anonymous",i.async=t,i.onload=n,i.onerror=r,document.head.appendChild(i)})),Le[e]=n),n},Fe=n("bnaL"),Me=function(){var e=a()(c().mark((function e(t){var n,r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=window.__NEXT_DATA__).clientBundlesMap){e.next=12;break}return r=[],i=window[Fe.uT],o=t.list.map((function(e){return e.key})),a=Ae()(n.clientBundlesMap.deps).reverse(),s=!1,o.forEach((function(e){var t=a.find((function(t){return!i.widgetsMap[e]&&t.componentKeys.includes(e)}));t&&(t.needLoad=!0,s=!0)})),s&&(n.clientBundlesMap.deps.forEach((function(e){e.needLoad&&e.jsPaths.forEach((function(e){r.push(Be(e))}))})),r.push(Be(n.clientBundlesMap.main))),e.next=12,Promise.all(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ve(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var He=function(e){return function(e){h()(i,e);var t,n,r=(t=i,function(){var e,n=g()(t);if(Ve()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function i(){var e;l()(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).hooks.beforeFilterComponent.tap("previewServerTime",(function(e){var t;13===(null===(t=e.query.preview)||void 0===t?void 0:t.length)&&(e.serverTime=parseInt(e.query.preview,10))})),e.hooks.beforeFilterComponent.tap("setTrackingBase",(function(e){Object.assign(e.trackingBase,{url:e.requestContext.href||"",is_share:e.query.refer_share_id?1:0,op_id:e.id,page_id:!e.isEditor&&(0,F.createPageId)(e.trackingBase.pageSn)})})),e}return p()(i,[{key:"dealRisk",value:function(e){e.axios.interceptors.response.use(null,(function(t){var n,r;throw[De.errors.AUTHENTICATION_FAILED,De.errors.RISK_CONTROL].includes(null==t||null===(n=t.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error_code)&&(e.retryWhenCsr=!0),t}))}},{key:"fetchPageInfo",value:(n=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te()(g()(i.prototype),"fetchPageInfo",this).call(this);case 2:return e.next=4,Me(this);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),i}(e)};function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var We=function(e){return function(t){h()(o,t);var n,r,i=(n=o,function(){var e,t=g()(n);if(ze()){var r=g()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m()(this,e)});function o(){return l()(this,o),i.apply(this,arguments)}return p()(o,[{key:"componentDidMount",value:function(){this.sendLog()}},{key:"store",get:function(){return this.props.store}},{key:"sendLog",value:(r=a()(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.trackingBase,e.next=3,xe(this.store);case 3:n=e.sent,r=n.logBase,i=n.doPv,o=Ge(Ge({},je(t)),r),(0,B.setDefaultParams)(o),Object.assign(t,r),!window.__INLINE_LOG_PV&&i&&(0,B.sendPageViewMetrics)();case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.store,t=(0,Ie.p)(e);return w().createElement("div",{className:"main-view",style:t},w().createElement(L,this.props),w().createElement(ye,{store:e}))}}],[{key:"createPageStore",value:function(t){return new(He(e))(t)}}]),o}(b.Component)};function Qe(e){return window.leoConfig[e]}var Je=n("swbT"),Xe=n("0Qln"),Ke=n.n(Xe),Ye=n("i/Q6"),Ze=n.n(Ye),$e=n("jXLS"),et=n.n($e),tt=(n("XC3m"),n("UK90")),nt=n("Wgwc"),rt=n.n(nt),it=n("oDSe"),ot=n("4mj9"),at=n("WudE"),st=n("XGyy"),ct=n("aDGo"),ut=(0,st.r_)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return""};return function(t){var n=t.fn,r=t.name;return function(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=ct.I.getInstance(null),c=function(){return n.apply(t,o)};if(!(s instanceof ct.I))return c();var u=e.apply(void 0,[t].concat(o));if(!1===u)return c();u=u||r;var l=s.mark(u),f=c();return l&&(f instanceof Promise?f.then((function(){return s.markEnd(u)}),(function(){})):s.markEnd(u)),f}}})),lt=n("w+SW"),ft=n("z89n").V,pt=n("Weuy"),dt=n("lZql");function ht(e){return function(){var t,n=g()(e);if(vt()){var r=g()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m()(this,t)}}function vt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var mt=function(){function e(){l()(this,e),this.queue=[],this.args=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.args=n}return p()(e,[{key:"addQueue",value:function(e,t){qe("function"==typeof t,"callback must be a function!"),this.queue.push({name:e,callback:t})}}]),e}(),yt=function(e){h()(n,e);var t=ht(n);function n(){return l()(this,n),t.apply(this,arguments)}return p()(n,[{key:"tap",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=Te()(g()(n.prototype),"addQueue",this)).call.apply(e,[this].concat(r))}},{key:"call",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.queue.forEach((function(t){t.callback.apply(t,[].concat(n,Ae()(e.args)))}))}}]),n}(mt),gt=function(e){h()(r,e);var t,n=ht(r);function r(){return l()(this,r),n.apply(this,arguments)}return p()(r,[{key:"tapPromise",value:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=Te()(g()(r.prototype),"addQueue",this)).call.apply(e,[this].concat(n))}},{key:"promise",value:(t=a()(c().mark((function e(){var t,n,r,i,o,a,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,n=new Array(t),r=0;r<t;r++)n[r]=s[r];i=0,o=this.queue.length;case 2:if(!(i<o)){e.next=8;break}return e.next=5,(a=this.queue[i]).callback.apply(a,[].concat(n,Ae()(this.args)));case 5:i++,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(mt),bt=n("En+X");function wt(e,t,n){return e===function(e,t){return(0,bt.getTestStrategy)(e,t,!1)}(t,n)}function kt(e,t){return!e.store.enableABTest||function(e,t){var n,r=e||{},i=r.saltName,o=void 0===i?"":i,a=r.salt,s=void 0===a?"":a,c=r.unloggedInBucket,u=void 0!==c&&c,l=function(e,t){if(!e)return{};var n={},r=t.reduce((function(t,n){var r;return n.store.enableABTest&&(null===(r=n.store.ABStore)||void 0===r?void 0:r.salt)===e&&t.push(n.store.ABStore),t}),[]).sort((function(e,t){return e.saltValue[0]-t.saltValue[0]})).map((function(e){return{saltName:e.saltName,whiteList:e.whiteList,blackList:e.blackList,saltValue:e.saltValue}}));return r.forEach((function(e){var t=e.saltName,r=e.whiteList,i=void 0===r?[]:r,o=e.blackList,a=void 0===o?[]:o,s=e.saltValue;n[t]={whiteList:i.map((function(e){return+e})),blackList:a.map((function(e){return+e})),buckets:s[1]}})),{salt:e,bucketCount:100,models:n}}(s,t.list);return null!==(n=t.userInfo)&&void 0!==n&&n.uid?wt(o,l,t.userInfo.uid):u}(e.store.ABStore,t)}function _t(e,t){var n=e.store,r=n.timeInterval||[];if(n.usePeriod&&r.length>0){var i=r.some((function(e){var n=t.serverTime;return e.startTime<=n&&e.endTime>=n}));return"close"===n.periodFunc?!i:i}return!0}var Ot,St,Pt,xt,It=function(e){for(var t,n=0,r=e.componentMap,i=e.firstLayer.reduce((function(e,t){var n,i={rootId:t.componentId,components:[t]};return null!==(n=t.store.fssChildrenIds)&&void 0!==n&&n.length&&(i.components=i.components.concat(t.store.fssChildrenIds.map((function(e){return r[e]})).filter(Boolean))),e.push(i),e}),[]),o=function(t){var r=t.store,i=t.key,o=function(e,t){var n=e.height,r=e.childrenIds,i=t.ignoreFssHeight,o=Number(n)||0;return!1===i?o:i||r?0:o}(r,e.widgetsMap[i]);return(n+=o)>(e.firstScreenTop||Fe.jN)},a=i.length,s=0;s<a&&!t;s++)for(var c=i[s],u=(c.rootId,c.components),l=u.length,f=0;f<l;f++)if(o(u[f])){t=u[f].componentId;break}return(void 0===t?Math.min(e.list.length-1,8):e.list.findIndex((function(e){return e.componentId===t})))+1},Ct=function(e,t,n,r){if(t){var i,o=t.STATUS.SUCCESS,a=t.newTransaction(n,r);try{(i=e())instanceof Promise&&i.catch((function(){o=t.STATUS.FAIL})).finally((function(){a.setStatus(o),a.complete()}))}catch(e){throw o=t.STATUS.FAIL,e}finally{i instanceof Promise||(a.setStatus(o),a.complete())}return i}return e()},Et=(0,st.r_)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Function";return function(t){var n=t.name,r=t.fn;return function(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return t.req?Ct(r.bind.apply(r,[t].concat(o)),t.req.cat,e,n):r.apply(t,o)}}})),jt={},Rt={},Tt=function(e){e&&(Object.assign(Rt,e.widgetsMap||{}),Object.assign(jt,e.editorWidgetsMap||{}))},Dt=["pageSn","pageName","promName","page_id"];function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}!function(){var e=window,t=e[Fe.uT]=e[Fe.uT]||[];if(!t.widgetsMap){var n=t.push;t.forEach((function(e){return Tt(e)})),t.push=function(e){n.call(t,e),Tt(e)},Object.defineProperties(t,{widgetsMap:{get:function(){return Rt}},editorWidgetsMap:{get:function(){return jt}}})}}();var Lt=(Ot=ut((function(e,t){return"fetchComponent~".concat(t.key,"~").concat(t.componentId)})),St=ut((function(e,t){return"importComponent~".concat(t.key)})),Pt=ut((function(e,t){return!(0,dt.U)(t.store)&&"instantiateComponent~".concat(t.key,"~").concat(t.componentId)})),xt=function(e){h()(_,e);var t,n,r,i,o,s,u,f,d,v,y,b,w,k=(t=_,function(){var e,n=g()(t);if(qt()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function _(e){var t,n=e.req,r=e.res,i=e.getContext;return l()(this,_),(t=k.call(this)).type=void 0,t.id=void 0,t.davinciCdn=void 0,t.list=[],t.userInfo={},t.requestContext=void 0,t.hooks=void 0,t.axios=void 0,t.serverTime=Date.now(),t.forceRequestInExposure=void 0,t.ssr=void 0,t.trackingBase={},t.targetIndex=8,t.assetsList=[],t.firstScreenTop=void 0,t.isEditor=void 0,t.isBack=void 0,t.webpEnable=void 0,t.listId=void 0,t.exposeRenderRootMargin=void 0,(0,it.r)(Ze()(t),"requestContext",(null==i?void 0:i())||new pt.Z(n,r)),(0,it.r)(Ze()(t),"hooks",{beforeInitialStore:new yt,beforeFilterComponent:new yt,afterFilterComponent:new yt,beforeCalcFirstScreenComponent:new gt,beforeBuildComponentList:new gt,onAxiosInstanceCreated:new yt,afterInitialStore:new yt,pageDidMount:new gt}),t}return p()(_,[{key:"widgetsMap",get:function(){return __CART_GLOBAL_CONFIGS.widgetsMap}},{key:"getInitialStore",value:(w=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialAllStore();case 2:return e.next=4,this.fetchComponentList();case 4:return e.abrupt("return",this);case 5:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"initialAllStore",value:(b=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.prepareEnv(),this.initNetwork(),this.hooks.beforeInitialStore.call(this),e.next=5,this.fetchPageInfo();case 5:return this.hooks.beforeFilterComponent.call(this),this.filterComponentList(),this.hooks.afterFilterComponent.call(this),e.next=10,this.applyComponentHooks();case 10:return e.next=12,this.hooks.beforeCalcFirstScreenComponent.promise(this);case 12:return this.calcFirstScreenComponent(),e.next=15,this.buildComponentList();case 15:this.hooks.afterInitialStore.call(this);case 16:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"reBuildStore",value:(y=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initNetwork(),e.next=3,this.applyComponentHooks();case 3:return e.next=5,this.buildComponentList();case 5:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"prepareEnv",value:function(){this.isBack="1"===this.query.is_back,this.webpEnable="1"===this.requestContext.cookies.webp,this.listId=this.isBack&&this.query.list_id||[this.listName,(0,F.nanoid)(6)].join("_")}},{key:"pageInfoServiceImpl",value:function(){return{}}},{key:"fetchPageInfo",value:(v=a()(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pageInfoServiceImpl();case 2:t=e.sent,Object.assign(this,t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"initNetwork",value:function(){var e;this.axios=ft({req:this.req,res:this.res,pageInfo:{pageId:[this.trackingBase.pageSn||"10260",Date.now(),(0,F.nanoid)(10)].join("_")},accessToken:this.userInfo.accessToken,axiosPlugins:null===(e=this.config)||void 0===e?void 0:e.axiosPlugins,rootStore:this}),this.hooks.onAxiosInstanceCreated.call(this)}},{key:"applyComponentHooks",value:(d=a()(c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set(this.list.filter((function(e){return n.widgetsMap[e.key].isHookComponent})).map((function(e){return e.key}))),e.next=3,Promise.all(Ae()(t).map(function(){var e=a()(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.importWidgetByKey(t);case 2:if(r=e.sent,e.t0=r.Store.applyHook,!e.t0){e.next=7;break}return e.next=7,r.Store.applyHook(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){n.sendError(e)}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"filterComponentList",value:function(){var e=this,t=this.list,n=new Set,r=function(t){return!(!function(e,t){return!!e.store.ignoreJudgeShow||function(e,t){var n;return!t.requestContext.query.share_token||!(null===(n=t.userInfo)||void 0===n||!n.uid)||!t.widgetsMap[e.key].needLogin}(e,t)&&kt(e,t)&&_t(e,t)}(t,e)||n.has(t.store.parentCmptId))||(n.add(t.componentId),!1)};t=(t=(t=(t=t.filter((function(t){if(!e.widgetsMap[t.key]){var n="[cart]：id: ".concat(e.id,", subject_id: ").concat(e.subject_id,", ").concat(t.key,"组件不存在");return e.sendError(new Error(n)),!1}return!0}))).filter(r)).filter(r)).filter(r),this.list=t}},{key:"calcFirstScreenComponent",value:function(){var e=this,t=this.query.component_id,n=this.calcFssIndex(),r=t?this.list.findIndex((function(e){var n=e.store.hotAreaConfigs||[];return e.componentId===t||n.some((function(e){return e.id===t}))})):-1;this.targetIndex=Math.max(n,r),this.list.forEach((function(t,n){var r=e.widgetsMap[t.key].requestIn,i=n<=e.targetIndex&&Fe.QS.FIRSTSCREEN,o=e.forceRequestInExposure&&Fe.QS.EXPOSURE,a=r||o||i||Fe.QS.EXPOSURE,s=a===Fe.QS.FIRSTSCREEN;Object.assign(t,{requestIn:a}),Object.assign(t.store,{isInFS:s})}))}},{key:"calcFssIndex",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.list.findIndex((function(e){return"FirstScreenSeparator"===e.key}));if(-1===t){var n=It(this);e&&this.widgetsMap.FirstScreenSeparator&&this.list.splice(n,0,{componentId:"FirstScreenSeparator",key:"FirstScreenSeparator",name:"首屏分隔符",store:{}}),t=n}return t}},{key:"buildComponentList",value:(f=a()(c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return n.buildComponent(e).catch((function(e){n.sendError(e)}))},e.next=3,this.hooks.beforeBuildComponentList.promise(this);case 3:return e.next=5,Promise.all(this.firstLayerForShow.map(t));case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"fetchComponentList",value:(u=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.firstLayerForShow.map(this.fetchComponent.bind(this)));case 2:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"loadComponent",value:(s=a()(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildComponent(t);case 2:return e.next=4,this.fetchComponent(t);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"buildComponent",value:(o=a()(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.importComponent(t);case 2:if(this.instantiateComponent(t),e.t0=t.store.buildChildren,!e.t0){e.next=7;break}return e.next=7,t.store.buildChildren();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"fetchComponent",value:(i=a()(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.fetched||!(0,dt.U)(t.store)){e.next=9;break}return e.prev=1,e.next=4,t.store.$get();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:t.fetched=!0;case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),function(e){return i.apply(this,arguments)})},{key:"importComponent",value:(r=a()(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.key,r=this.widgetsMap[n].CurrentWidget,this.collectAsset(n),!r||!r.Store){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.importWidgetByKey(n);case 7:return this.widgetsMap[n].CurrentWidget=e.sent,e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"importWidgetByKey",value:(n=a()(c().mark((function e(t){var n,r,i,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"Widget",r=this.widgetsMap[t][n],e.next=4,r();case 4:return(i=e.sent)&&i.__esModule&&(i=i.default),qe(!!i,"import widget ".concat(t," failed")),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"instantiateComponent",value:function(e){var t=this,n=e.store,r=e.key,i=e.componentId,o=this.widgetsMap[r].CurrentWidget;if(!o)return e;var a=o.Store;if(!(0,dt.U)(n)){var s=At(At({},n),{},{key:r,componentId:i,getRoot:function(){return t}});e.store=new a(s),e.store.initStore(s)}return e}},{key:"collectAsset",value:function(e){this.assetsList.includes(e)||this.assetsList.push(e)}},{key:"shouldImport",value:function(e){return e.requestIn===Fe.QS.FIRSTSCREEN||!0===e.fetched}},{key:"firstLayerForShow",get:function(){var e=this;return this.isEditor?this.firstLayer:this.firstLayer.filter((function(t){return e.shouldImport(t)}))}},{key:"firstLayer",get:function(){var e=this.childrenIds;return 0===e.length?this.list:this.list.filter((function(t){var n=t.componentId,r=t.store;return!e.includes(n)&&!r.parentCmptId}))}},{key:"childrenIds",get:function(){return this.list.reduce((function(e,t){return e=[].concat(Ae()(e),Ae()(t.store.childrenIds||[]))}),[])}},{key:"componentMap",get:function(){return this.list.reduce((function(e,t){return e[t.componentId]=t,e}),{})}},{key:"getCmptExtraTrackingParams",value:function(e){var t=this.trackingBase,n=(t.pageSn,t.pageName),r=t.promName,i=(t.page_id,x()(t,Dt));return At({page_name:n,prom_name:r,com_name:e.key},i)}},{key:"listName",get:function(){return this.requestContext.pathname.slice(1).split(".")[0]}},{key:"req",get:function(){return this.requestContext.req}},{key:"res",get:function(){return this.requestContext.res}},{key:"query",get:function(){return this.requestContext.query}},{key:"sendError",get:function(){return this.requestContext.sendError}},{key:"requestParams",get:function(){return{req:this.req,res:this.res,accessToken:this.userInfo&&this.userInfo.accessToken,userId:this.userInfo&&this.userInfo.uid,axios:this.axios,commonData:this.requestContext,listId:this.listId,referListId:this.query.refer_list_id,id:this.id,name:this.name}}}]),_}(at.v),et()(xt.prototype,"getInitialStore",[Et],Object.getOwnPropertyDescriptor(xt.prototype,"getInitialStore"),xt.prototype),et()(xt.prototype,"initialAllStore",[Et,lt.e],Object.getOwnPropertyDescriptor(xt.prototype,"initialAllStore"),xt.prototype),et()(xt.prototype,"reBuildStore",[lt.e],Object.getOwnPropertyDescriptor(xt.prototype,"reBuildStore"),xt.prototype),et()(xt.prototype,"fetchPageInfo",[Et],Object.getOwnPropertyDescriptor(xt.prototype,"fetchPageInfo"),xt.prototype),et()(xt.prototype,"buildComponentList",[Et,lt.e],Object.getOwnPropertyDescriptor(xt.prototype,"buildComponentList"),xt.prototype),et()(xt.prototype,"fetchComponentList",[Et],Object.getOwnPropertyDescriptor(xt.prototype,"fetchComponentList"),xt.prototype),et()(xt.prototype,"fetchComponent",[Ot],Object.getOwnPropertyDescriptor(xt.prototype,"fetchComponent"),xt.prototype),et()(xt.prototype,"importComponent",[St],Object.getOwnPropertyDescriptor(xt.prototype,"importComponent"),xt.prototype),et()(xt.prototype,"instantiateComponent",[Pt],Object.getOwnPropertyDescriptor(xt.prototype,"instantiateComponent"),xt.prototype),xt),Bt=Lt,Ft=n("m8Qe"),Mt=n.n(Ft),Vt={PROMOTION_DETAIL:"api/wright/cart/publish_info",PRE_PROMOTION_DETAIL:"api/george/cart/pre_publish_info",FIXED_PROMOTION_DETAIL:"/api/firefly-api/publish-info",templateInfo:"api/wright/template/list_info"},Ht=new Map;function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(e,t){var n=e.data.cart_info,r=e.server_time,i=JSON.parse(n.data||"{}");delete n.data,n.serverTime=parseInt(r+"000",10),Object.assign(n,i);var o=n.promEndTime&&n.serverTime>=n.promEndTime;if(5===n.status||o||!Object.keys(i).length){n.isEnded=!0,n.list=[];var a=n.type||t.requestContext.queries.type,s=n.id||t.requestContext.queries.id,c=n.subject_id||t.requestContext.queries.subject_id,u=c?"_subject_id_".concat(c):"_id_".concat(s),l=t.requestContext.queries.refer_page_name,f=Object.keys(i).length?"_下线过期":"_尚未创建",p=l?"_refer_page_name: ".concat(l):"",d="type_".concat(a).concat(u).concat(f).concat(p);null===N.V||void 0===N.V||(0,N.V)(t,{type:"PAGE_OFFLINE",name:d},"H5")}return n}var Wt=function(e){var t;try{t=JSON.parse(e)}catch(e){t=null}return t},Qt={defaultErrorHandler:function(){},needAntiContent:!1,params:{pdduid:0}};function Jt(e,t,n){return Xt.apply(this,arguments)}function Xt(){return Xt=a()(c().mark((function e(t,n,r){var o,a,s,u,l,f,p,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],a=Object.keys(t).reduce((function(e,t){return Ht.has(t)?e[t]=Ht.get(t):o.push(t),e}),{}),s=o.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.split("-")||[],r=R()(n,2),i=r[0],o=r[1];return i&&o&&e.push({template_id:parseInt(i,10),version:parseInt(o,10)}),e}),[]),s.length){e.next=5;break}return e.abrupt("return",a);case 5:return u={},l=function(e){return e.reduce((function(e,t){var n=t.template_id,r=t.version,o=t.ui_config,a="".concat(n,"-").concat(r),s=Wt(o);return Ht.set(a,s),Gt(Gt({},e),{},i()({},a,s))}),{})},e.prev=7,e.next=10,r.axios.post(Vt.templateInfo,{template_query_list:s});case 10:f=e.sent,p=f.data,u=l(p),e.next=27;break;case 15:if(e.prev=15,e.t0=e.catch(7),n){e.next=19;break}throw e.t0;case 19:return e.next=21,r.axios.get(n,Qt);case 21:if(d=e.sent,!Array.isArray(null==d?void 0:d.data)){e.next=26;break}u=l(d.data),e.next=27;break;case 26:throw e.t0;case 27:return e.abrupt("return",Gt(Gt({},a),u));case 28:case"end":return e.stop()}}),e,null,[[7,15]])}))),Xt.apply(this,arguments)}function Kt(e,t,n){return Yt.apply(this,arguments)}function Yt(){return(Yt=a()(c().mark((function e(t,n,r){var i,o,a,s,u,l,f,p,d,h,v,m,y,g,b;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(i=t).query,a=i.useTemplateVerison,s=n||(o.is_review?Vt.PRE_PROMOTION_DETAIL:o.fixed_cart_version?Vt.FIXED_PROMOTION_DETAIL:Vt.PROMOTION_DETAIL),u=t.type||o.type,l=t.id||o.id,f=t.subject_id||o.subject_id,p=o.refer_page_sn,l||f){e.next=10;break}throw(d=new Error("id、subjectId参数均为空")).status=400,d;case 10:return h={type:u,id:l,subject_id:f,refer_page_sn:p,version:o.fixed_cart_version},e.prev=11,e.next=14,t.axios.get(s,{params:h,defaultErrorHandler:function(){}});case 14:v=e.sent,e.next=29;break;case 17:if(e.prev=17,e.t0=e.catch(11),!0===(null==r?void 0:r.skipCdnBackup)){e.next=28;break}return m=l?"type/".concat(u,"/id/").concat(l):"type/".concat(u,"/subject_id/").concat(f),e.next=23,t.axios.get("https://apistatic.pddpic.com/api-static/cart-static-cdn/cart_info/".concat(m,".json"),Qt);case 23:(v=e.sent)&&(v.server_time=Math.floor(Date.now()/1e3)),null===N.V||void 0===N.V||(0,N.V)(t,{type:"USE_CDN_BACK_UP",name:m},"H5"),e.next=29;break;case 28:throw e.t0;case 29:if(y=zt(v,t),e.prev=30,g=y.sikeStore,b=y.davinciCdn,!a||"object"!==Mt()(g)||!Object.keys(g).length){e.next=36;break}return e.next=35,Jt(g,b,t);case 35:y.sikeStore=e.sent;case 36:e.next=43;break;case 38:e.prev=38,e.t1=e.catch(30),t.sendError(new Error("[cart]：模版接口请求出错！")),e.next=43;break;case 43:return e.abrupt("return",y);case 44:case"end":return e.stop()}}),e,null,[[11,17],[30,38]])})))).apply(this,arguments)}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en=function(){var e=a()(c().mark((function e(t){var n,r,i,o,a,s,u,l,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.appContext,r=t.requestContext,i=r.platform,o=r.query,a=r.req,s={},"1"!==o._pdd_fs||!i.isNativePlatform||n.initted&&!n.needClientReCalc){e.next=25;break}return e.prev=5,e.next=8,(0,X.invokeBridgeCallNativeFun)("JSUIControl","supportCustomNavigationBar",void 0,"4.36.1","4.34.0");case 8:if(u=e.sent,s.immerse=Boolean(null==u?void 0:u.enable),!s.immerse){e.next=18;break}return e.next=13,(0,X.invokeBridgeCallNativeFun)("JSUIControl","getNavigationHeight",void 0,"4.36.1","4.34.0");case 13:l=e.sent,s.nh=Number(l.navigation_height)||0,s.sh=Number(l.statusbar_height)||0,e.next=20;break;case 18:s.nh=0,s.sh=0;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),t.sendError(e.t0);case 25:if(!i.isNativePlatform){e.next=37;break}return e.prev=26,e.next=29,(0,X.getPageShownType)();case 29:f=e.sent,s.isInAppTab=1===Number(null==f?void 0:f.shown_type),s.appTabHeight=s.isInAppTab&&Number(o.navigationbar_height)||0,e.next=37;break;case 34:e.prev=34,e.t1=e.catch(26),t.sendError(e.t1);case 37:e.next=42;break;case 39:(p=a.headers["p-uno-context"]&&JSON.parse(a.headers["p-uno-context"]))?s={immerse:!!p.immerse,nh:p.nh||0,sh:p.sh||0}:"1"===o._pdd_fs&&i.isNativePlatform&&i.statisfy("4.36.1","4.34.0","greaterThanEqual")&&(s={immerse:!0,nh:88,sh:44,needClientReCalc:!0}),i.isNativePlatform&&o.navigationbar_height&&(s.isInAppTab=!0,s.appTabHeight=Number(o.navigationbar_height)||0);case 42:t.appContext=$t($t($t({},n),s),{},{initted:!0});case 43:case"end":return e.stop()}}),e,null,[[5,22],[26,34]])})));return function(t){return e.apply(this,arguments)}}(),tn=n("Sg16");function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rn=function(e){var t=e.list.reduce((function(e,t){var n=t.store.templateStore;"object"===Mt()(n)&&(Array.isArray(n)?n:[n]).forEach((function(n){var r=n.id,i=n.version;e.some((function(e){return e.templateId===r}))||e.push({componentKey:t.key,componentId:t.componentId,templateId:r,version:i||0})}));return e}),[]);t.length&&(0,tn.o)(t.map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({groupId:11025,pageName:"".concat(window.location.pathname,"?type=").concat(e.type,"&id=").concat(e.id)},t)})),e,{groupConfig:{bizSide:"consumer-platform-fe",appId:"100480"}})},on=function(e){var t=e,n=t.list,r=t.hostProjectName,i=Ae()(new Set(n.map((function(e){return e.key})))).slice(0,30),o=window.__CART_GLOBAL_CONFIGS.reduce((function(e,t){return Object.keys(t.widgetsMap).forEach((function(n){e[n]=t.name})),e}),{}),a=r||window.__CART_GLOBAL_CONFIGS[window.__CART_GLOBAL_CONFIGS.length-1].name;i.length&&(0,tn.o)(i.map((function(t){return{hostName:a,widgetKey:t,stage:"logWidgetKey",groupId:11014,cartType:e.type,projectName:o[t],shareComponent:a===o[t]?0:1}})),e,{groupConfig:{bizSide:"consumer-platform-fe",appId:"100480"}})},an=["req","res","getContext"];function sn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var cn=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(sn()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(e){var t,i=e.req,o=e.res,a=e.getContext,s=x()(e,an);return l()(this,r),(t=n.call(this,{req:i,res:o,getContext:a})).pageTitle="",t.needLogin=!1,t.immersiveConfig={immerse:!1,nh:0,topObligate:0},t.appContext={immerse:!1,nh:0,sh:0,isInAppTab:!1,appTabHeight:0,initted:!1},t.navRankList=[],Object.assign(Ze()(t),s),t.hooks.beforeBuildComponentList.tapPromise("calcAppContext",en),t.hooks.pageDidMount.tapPromise("logTemplate",rn),t.hooks.pageDidMount.tapPromise("logWidgets",on),t}return p()(r,[{key:"pageInfoServiceImpl",value:function(){return Kt(this)}},{key:"getComponentByKeyReg",value:function(e){return this.list.filter((function(t){return t.key.match(e)}))}},{key:"getComponentById",value:function(e){return this.list.filter((function(t){return t.componentId===e}))}},{key:"userHasLogin",value:function(){var e;return!(null===(e=this.userInfo)||void 0===e||!e.uid)}},{key:"collectRankNav",value:function(e){var t=this;return this.navRankList.find((function(t){return t.id===e.id}))||this.navRankList.push(e),function(){t.navRankList=t.navRankList.filter((function(t){return t.id!==e.id}))}}},{key:"navOffset",get:function(){return this.appContext.isInAppTab?this.appContext.appTabHeight:this.appContext.nh}},{key:"$$commonData",get:function(){return this.requestContext}},{key:"context",get:function(){return this.requestContext}},{key:"subjectId",get:function(){return this.query.subject_id}}]),r}(Bt),un=cn,ln=n("CKWb");function fn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pn=(0,ln.LN)(Bt,{observable:["serverTime"],"observable.shallow":["list"],computed:["childrenIds","firstLayer","firstLayerForShow","componentMap"],action:["filterComponentList","fetchPageInfo"]}),dn=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(fn()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){return l()(this,r),n.apply(this,arguments)}return p()(r)}(Bt);(0,ln.pM)(dn,pn);function hn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var vn=(0,ln.LN)(un,{observable:["immersiveConfig"]}),mn=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(hn()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){return l()(this,r),n.apply(this,arguments)}return p()(r)}(un);(0,ln.pM)(mn,(0,ln.R_)(pn,vn));var yn=mn,gn=n("IY4h"),bn=n("ghYS");function wn(){var e=[["script",function(e){return e.src||""}],["link",function(e){return"stylesheet"===e.rel&&e.href||""}]].map((function(e){return Array.from(document.getElementsByTagName(e[0])).map(e[1]).join("")}));return(0,F.crc32)(e.join(""))}var kn=(0,F.memoize)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.skipNewVersionCheck)return!1;if("undefined"==typeof localStorage||!localStorage)return!0;var t=wn(),n="pdd_monitor_build_version";if(t){var r=window.location.pathname,i=localStorage.getItem(n);try{i=JSON.parse(i)||{}}catch(e){i={}}var o=t===i[r];return o||(i[r]=t,localStorage.setItem(n,JSON.stringify(i))),!o}return!1}),100,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!e.skipNewVersionCheck})),_n=n("FFYS"),On=n("DhF+"),Sn=n("Irca"),Pn=["Native","Performance","Custom"],xn=function(){function e(){l()(this,e),this.datasource=null,this.rts=[],this.tags={},this.fields={},this.longFields={},this.ranges={}}return p()(e,[{key:"value",get:function(){return this.datasource}},{key:"request",value:function(){}},{key:"buildData",value:function(){}},{key:"getBoundValue",value:function(){return 1e4}},{key:"addUnHealthyField",value:function(e,t){Pn.includes(this.name)&&(this.fields["is".concat(this.name,"UnHealthy")]=!0,this.fields["".concat(this.name,"_unhealthy_").concat(e)]=t)}},{key:"reviseValue",value:function(e){var t=e.key,n=e.start,r=e.end;if(n&&r){var i=t.split("~"),o=R()(i,1)[0],a=o.startsWith("noLog^"),s=0,c=0;if(-1!==r){var u=this.getBoundValue(t);s=c=parseInt(r-n,10)||0,(c<0||c>u)&&(s=Math.max(0,Math.min(c,u)),a||this.addUnHealthyField(t,c))}a||this.longFields["".concat(this.name,"_").concat(o)]||(this.longFields["".concat(this.name,"_").concat(o)]=s),this.rts.push({key:t,start:n,end:r,originValue:c,value:s})}}},{key:"batchReviseValue",value:function(e){var t=this,n=e.source,r=e.start;Object.keys(n).forEach((function(e){t.reviseValue({key:e,start:r,end:n[e]})}))}},{key:"buildRanges",value:function(e){var t=this;return e=Object.entries(e).reduce((function(e,n){var r=R()(n,2),i=r[0],o=r[1],a=i.split("~"),s=R()(a,2),c=s[0],u=s[1],l=c.split("#"),f=R()(l,2),p=f[0];return f[1]?(i="".concat(p).concat(u?"~"+u:""),t.ranges[i]=[].concat(Ae()(t.ranges[i]||[]),[o])):e[i]=o,e}),{}),Object.entries(this.ranges).forEach((function(e){var n=R()(e,2),r=n[0],i=n[1];t.reviseValue({key:r,start:i[0],end:i[1]})})),e}}]),e}(),In=xn;function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.reduce((function(e,t){var n=new t;if(!(n instanceof In))throw new Error("[monitor]: exist collecter don‘t extends BaseCollecter");if(!n.name)throw new Error("[monitor]: collecter’s name miss");if(e[n.name])throw new Error("[monitor]: repeat collecter name ".concat(n.name));return e[n.name]=n,e}),{}),r=Object.values(n);return Promise.all(r.map((function(e){return e.request(t[e.name])}))).then((function(){return r.forEach((function(e){e.buildData(n)})),n}))}function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Tn=["nativeStartRoute","nativeInit","nativeLoadURL","nativeStartLoad","nativeFetchStart","nativeDnsStart","nativeDnsEnd","nativeConnectStart","nativeSecureConnectStart","nativeSecureConnectEnd","nativeConnectEnd","nativeRequestStart","nativeRequestEnd","nativeResponseStart","nativeResponseEnd","nativeCompeleteLoad"],Dn=["webViewInit","webViewSetUrl","webViewLoadStart"];var Nn=function(e){h()(o,e);var t,n,r,i=(t=o,function(){var e,n=g()(t);if(Rn()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function o(){var e;l()(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).name="Native",e.nativeStart=0,e.unoContext={},e}return p()(o,[{key:"getTiming",value:(r=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,X.invokeBridgeCallNativeFun)("WebScene","getTiming",null,"4.29.0","4.29.0").catch((function(){return null}));case 2:this.datasource=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getUnoContext",value:(n=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,X.invokeBridgeCallNativeFun)("WebScene","getUnoContext",null,"4.78.0","4.78.0").catch((function(){return{}}));case 2:this.unoContext=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"request",value:function(){if(_n.IP.isNativePlatform)return Promise.all([this.getTiming(),this.getUnoContext()])}},{key:"recordUnoContext",value:function(){var e,t,n,r=this;this.tags={isCold:(e=this.unoContext,t=e.webview_count,n=e.process_lifetime,(void 0===n?0:n)<10||t&&t<=1?1:0),isInset:this.unoContext.is_inset?1:0},Object.entries(this.unoContext).forEach((function(e){var t=R()(e,2),n=t[0],i=t[1];if("object"!==Mt()(i)){var o="Native_".concat(n);["process_lifetime","webview_count","webview_load_count"].includes(n)||0===n.indexOf("long_")?r.longFields[o]=parseInt(i,10)||0:r.fields[o]=i}}))}},{key:"getBoundValue",value:function(e){return["nativeCompeleteLoad"].includes(e)?2e4:5e3}},{key:"buildData",value:function(){var e=this;if(_n.IP.isNativePlatform)if(this.value)if(this.unoContext.webview_load_count>1)this.addUnHealthyField("webview_load_count",this.unoContext.webview_load_count);else{var t=this.value,n=t.webViewRefresh,r=t.webViewSetUrl,i=t.webViewLoadStart,o=t.webViewInit,a=void 0===o?0:o,s=t.nativeStartRoute,c=void 0===s?0:s,u=t.nativeContainerResume;if(n)this.addUnHealthyField("webViewRefresh",n);else{if(c&&-1!==c)this.nativeStart=c,u&&-1!==u&&1===Number(this.unoContext.string_is_container_resume)&&(this.nativeStart=u),Tn.forEach((function(t){e.reviseValue({key:t,start:e.nativeStart,end:e.value[t]})}));else{if(this.addUnHealthyField("nativeStartRoute",c),!a||-1===a)return void this.addUnHealthyField("webViewInit",a);this.nativeStart=a}Dn.forEach((function(t){e.reviseValue({key:t,start:e.nativeStart,end:e.value[t]})})),this.reviseValue({key:"webViewSetUrl_low",start:a,end:r}),this.reviseValue({key:"webViewLoadStart_low",start:r,end:i}),this.longFields["".concat(this.name,"_nativeStart")]=this.nativeStart,this.fields=jn(jn({},this.fields),this.value),this.recordUnoContext()}}else this.addUnHealthyField("webviewRts",null)}}]),o}(In),An=Nn,qn=["navigationStart"];function Ln(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Bn=["navigationStart","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","unloadEventStart","unloadEventEnd","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],Fn=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(Ln()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).name="Performance",e.navigationStart=0,e}return p()(r,[{key:"request",value:function(){window.performance&&window.performance.timing&&(this.datasource=window.performance.timing)}},{key:"value",get:function(){var e=this;return this.datasource?Bn.reduce((function(t,n){return t[n]=e.datasource[n],t}),{}):{}}},{key:"getBoundValue",value:function(e){return["loadEventEnd","loadEventStart","domComplete"].includes(e)?2e4:Te()(g()(r.prototype),"getBoundValue",this).call(this,e)}},{key:"buildData",value:function(e){this.tags.connectZero=this.value.connectStart===this.value.connectEnd?1:0;var t=this.value,n=t.navigationStart,r=void 0===n?0:n,i=x()(t,qn),o=e.Native;r||this.addUnHealthyField("navigationStart",0),this.longFields.Performance_base_navigationStart=r,this.navigationStart=r||o.value&&o.value.webViewLoadStart||0,this.navigationStart&&(o.nativeStart&&this.reviseValue({key:"navigationStart",start:o.nativeStart,end:this.navigationStart}),this.batchReviseValue({source:i,start:this.navigationStart}))}}]),r}(In),Mn=Fn,Vn=["fs","fsn","tti"];function Hn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Un=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(Hn()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).name="Custom",e.checkFields=["ps","fp","fs","dr","ld","fsn","fraf","tti"],e}return p()(r,[{key:"checkReady",value:function(){var e=this;return this.datasource={},window._plt.forEach((function(t){var n=R()(t,3),r=n[0],i=n[1],o=n[2];"tm"===r&&(e.datasource[i]=o)})),this.checkFields.every((function(t){return void 0!==e.datasource[t]}))}},{key:"request",value:function(){var e=this;return new Promise((function(t){var n=window._plt||[],r=n.push,i=function(){return e.checkReady()&&t()};n.push=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=r.apply(n,t);return i(),a},window._plt=n,i()}))}},{key:"value",get:function(){var e=window.performance,t=this.datasource,n=0,r=0,i={};if(e&&e.timing&&e.getEntriesByName&&e.getEntriesByType){var o=e.timing.navigationStart,a=e.getEntriesByName("first-paint")[0],s=e.getEntriesByName("first-contentful-paint")[0];a&&(n=a.startTime+o),s&&(r=s.startTime+o);var c=Array.from(document.querySelectorAll("script")).filter((function(e){return e.src&&!e.async})).map((function(e){return e.src})),u=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).map((function(e){return e.href})),l=e.getEntriesByType("resource"),f=l.filter((function(e){return u.includes(e.name)})),p=l.filter((function(e){return c.includes(e.name)})),d=function(e,t,n){return(e.length&&e.reduce((function(e,r){return Math[t](e,r[n])}),e[0][n])||0)+o},h=function(e,t){return d(e,"min",t)},v=function(e,t){return d(e,"max",t)};i={scriptStart:h(p,"fetchStart"),scriptEnd:v(p,"responseEnd"),styleStart:h(f,"fetchStart"),styleEnd:v(f,"responseEnd")}}var m={ps:t.ps,fp:t.fp,fs:t.fs,dr:t.dr,ld:t.ld,fsn:t.fsn,fpc:n,fcp:r,styleStart:i.styleStart,styleEnd:i.styleEnd,scriptStart:i.scriptStart,scriptEnd:i.scriptEnd,fraf:t.fraf,tti:t.tti};return Object.keys(m).reduce((function(e,t){return e[t]=parseInt(m[t],10)||0,e}),{})}},{key:"getBoundValue",value:function(e){return["ld","fs"].includes(e)?2e4:Te()(g()(r.prototype),"getBoundValue",this).call(this,e)}},{key:"buildData",value:function(e){var t=e.Performance.navigationStart;if(t){var n=this.value,r=n.fs,i=n.fsn,o=n.tti,a=x()(n,Vn),s=(0,_n.UO)(),c=s.onPreRenderShow,u=s.requestStart,l=s.requestEnd,f=s.onPreRenderFinish,p=c||t;this.batchReviseValue({source:a,start:t}),this.batchReviseValue({source:{fs:r,fsn:i,tti:o},start:p}),this.batchReviseValue({source:{preRequestStart:u,preRequestEnd:l},start:c}),this.batchReviseValue({source:{onPreRenderFinish:f},start:t})}}}]),r}(In),Gn=Un;function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Jn=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(Qn()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).name="DeviceInfo",e}return p()(r,[{key:"request",value:function(){var e,t=this;return Promise.all([(e={0:"未知",1:"wifi",2:"2G",3:"3G",4:"4G"},new Promise((function(t){if(_n.IP.isNativePlatform)return(0,X.invokeBridgeCallNativeFun)("JSNetwork","info").then((function(n){var r=n.reachable,i=n.network_type,o=n.speed;t({fields:{reachable:r,networkType:e[i]},longFields:{speed:parseInt(o||0,10)}})}),(function(){return t({})}));(0,F.getNetWorkType)().then((function(n){t({fields:{networkType:e[n]}})}),(function(){return t({})}))}))),Xn("memory"),Xn("battery"),Xn("device",(function(e){var t=e.phoneModel,n=void 0===t?"unknown":t,r=e.deviceName;return{phoneModel:n,deviceName:void 0===r?"unknown":r}}))]).then((function(e){e.forEach((function(e){t.fields=Wn(Wn({},t.fields),e.fields),t.longFields=Wn(Wn({},t.longFields),e.longFields)}))}))}}]),r}(In);function Xn(e,t){var n=_n.IP.isNativePlatform&&(0,K.compareVersion)(_n.IP.version,"5.51.0")>=0,r={memory:"getMemoryInfo",device:"deviceInfo",battery:"getBatteryInfo"}[e];return n&&r?(0,X.invokeBridgeCallNativeFun)("AMDevice",r).then((function(n){var r=(t?t(n):n)||{};return{fields:Object.keys(r).reduce((function(t,n){return t["Native_".concat(e,"_").concat(n)]=r[n],t}),{})}}),(function(){return{}})):Promise.resolve({})}var Kn=Jn;function Yn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Zn=function(e){return"number"==typeof e&&!Number.isNaN(e)},$n=function(e){return[e.transferSize,e.decodedBodySize,e.encodedBodySize].every((function(e){return Zn(e)}))},er=function(e){return Math.round(e/1024)},tr=function(e){return Math.max(Math.min(Math.round(e),2e4),0)},nr=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(Yn()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).name="Resource",e}return p()(r,[{key:"recordWithPrefix",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object.keys(e).forEach((function(r){t[n?"longFields":"fields"]["".concat(t.name,"_").concat(r)]=e[r]}))}},{key:"getJSResourceInfo",value:function(){try{for(var e=0,t=0,n=0,r=0,i=0,o=0,a=performance.getEntriesByType("resource"),s=Array.from(document.querySelectorAll("script")).filter((function(e){return e.src})),c=a.filter((function(e){if(["script","link"].includes(e.initiatorType)&&(e.name.endsWith(".js")||e.name.endsWith(".css"))){var t=s.find((function(t){return t.src===e.name}));return t&&!t.async}return!1})),u=0;u<c.length;u++){var l=c[u],f=l.transferSize,p=l.decodedBodySize,d=l.encodedBodySize;if(!$n(c[u]))return{};n+=1,e+=d,t+=p,f>0?o+=1:i+=1,r+=f}this.recordWithPrefix({totalEncodedBodySize:er(e),totalDecodedBodySize:er(t),totalTransferSize:er(r),resourceNum:n,cacheResourceNum:i,transferResourceNum:o})}catch(e){}}},{key:"getHtmlResourceInfo",value:function(){try{var e=performance.getEntriesByType("navigation")[0];$n(e)&&this.recordWithPrefix({htmlEncodedBodySize:er(e.encodedBodySize),htmlDecodedBodySize:er(e.decodedBodySize),htmlTransferSize:er(e.transferSize)})}catch(e){}}},{key:"getFsImgsResourceInfo",value:function(){try{var e=window.__fsImgSrcs||[],t=performance.timing.navigationStart;if(0!==e.length){var n=(0,_n.UO)().onPreRenderShow,r=n?n-t:0,i=performance.getEntriesByType("resource").filter((function(t){var n=t.name;return e.includes(n)})),o=i.map((function(e){return e.fetchStart})).reduce((function(e,t){return Math.min(e,t)}),2e4),a=function(e){return e.reduce((function(e,t){return Math.max(e,t)}),0)}(i.map((function(e){return e.responseEnd})));if([o,a].every((function(e){return Zn(e)})))return this.recordWithPrefix({fsImgsFetchStart:tr(o),fsImgsResponseEnd:tr(a-r)})}else{var s=function(e){return window._plt.find((function(t){return t[1]===e}))[2]-t};this.recordWithPrefix({fsImgsFetchStart:tr(s("fp")),fsImgsResponseEnd:tr(s("fsn"))})}}catch(e){}}},{key:"getServerTimingInfo",value:function(){var e=this;try{performance.getEntriesByType("navigation")[0].serverTiming.forEach((function(t){t.name&&("string"==typeof t.description&&t.description?e.fields["ServerTiming_".concat(t.name)]=t.description:"number"==typeof t.duration&&(e.longFields["ServerTiming_".concat(t.name)]=Math.round(t.duration)))}))}catch(e){}}},{key:"request",value:function(){this.getJSResourceInfo(),this.getHtmlResourceInfo(),this.getFsImgsResourceInfo(),this.getServerTimingInfo()}}]),r}(In),rr=nr,ir=["nodeInit"];function or(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ar=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(or()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).name="Node",e}return p()(r,[{key:"request",value:function(){var e=window.__MONITOR_INFOS__;e&&(this.datasource=e.serverData)}},{key:"record",value:function(e){var t=this;Object.entries(this.value[e]).forEach((function(n){var r=R()(n,2),i=r[0],o=r[1];t[e][i]=o}))}},{key:"buildData",value:function(e){if(this.value){var t=e.Performance.value.requestStart,n=this.value.marks,r=n.nodeInit,i=x()(n,ir);if(t){var o=r-t;r=t,i=Object.entries(i).reduce((function(e,t){var n=R()(t,2),r=n[0],i=n[1];return e[r]=i-o,e}),{})}i=this.buildRanges(i),this.batchReviseValue({source:i,start:r}),this.record("tags"),this.record("fields"),this.record("longFields")}}}]),r}(In),sr=ar;function cr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ur=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(cr()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).name="Client",e}return p()(r,[{key:"request",value:function(){this.datasource=window._plt.reduce((function(e,t){var n=R()(t,3),r=n[0],i=n[1],o=n[2];return"ctm"===r&&(e.ctm[i]=parseInt(o,10)||0),"cf"===r&&(e.cf[i]=o),e}),{ctm:{},cf:{}})}},{key:"recordCustomFields",value:function(){var e=this;Object.keys(this.value.cf).forEach((function(t){e.fields[t]=e.value.cf[t]}))}},{key:"buildData",value:function(e){var t=e.Performance.navigationStart;if(t){var n=this.buildRanges(this.value.ctm);this.batchReviseValue({source:n,start:t}),this.recordCustomFields()}}}]),r}(In),lr=ur;function fr(e){return e.reduce((function(e,t){var n=t.rts.sort((function(e,t){return e.start-t.start})).map((function(e){return{name:e.key,start:Math.round(e.start),end:Math.round(e.start+e.value)}}));return n.length&&e.push({title:t.name,spans:n}),e}),[])}function pr(){return(pr=a()(c().mark((function e(t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("41c9").then(n.bind(n,"PJsA"));case 2:(0,e.sent.default)(t,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dr=n("zMVx").Z;function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mr=[].concat([An,Mn,Gn,Kn,rr,sr,lr]);function yr(e){(0,F.throwErrorAsync)(new Error("@pdd/monitor:"+e))}var gr=function(){function e(t){if(l()(this,e),"undefined"!=typeof window){var n=(0,_n.Up)(),r=n.amplifyRate,i=n.sampleRate;this.amplifyRate=r,this.sampleRate=i,this.firstInit=String(+kn()),this.report(t)}else yr("服务端禁止调用 Pmm.init")}return p()(e,[{key:"reportCustom",value:function(e){var t=this,n=String(e.groupId),r=e.customTraceSpanFormatter||fr,i=mr,o=[(0,On.VN)(),Cn(i,{})];Promise.all(o).then((function(i){var o=R()(i,2),a=o[0],s=o[1],c=Object.values(s),u=c.reduce((function(e,t){return e.tags=vr(vr({},e.tags),t.tags),e.longFields=vr(vr({},e.longFields),t.longFields),e.fields=vr(vr({},e.fields),t.fields),e.fields["is".concat(t.name,"UnHealthy")]&&(e.tags.isDirty=1),e}),(0,bn.ZP)({pn:e.pn,groupId:n}));u.fields.uid=a||"0",u.fields.pddId=(0,F.getCookie)("ETag")||"0",u.tags.firstInit=t.firstInit,u.longFields.amplifyRate=t.amplifyRate,e.grayTag&&(u.tags.gray=e.grayTag);var l=r(c);window.__MONITOR_INFOS__&&window.__MONITOR_INFOS__.usePanel&&function(e,t){pr.apply(this,arguments)}(n,l),Math.random()>t.sampleRate||!n||(window.__FRONTEND_PERF_DATA__={tags:vr({},u.tags),longFields:vr({},u.longFields)},(0,gn.P2)(vr({groupId:n,amplifyRate:t.amplifyRate},u),{appId:Sn.oN,bizSide:Sn.gM}),e.useTrace&&function(e){var t=e.timelines,n=e.pn,r=e.groupId,i=e.userId,o=(0,_n.GP)("/api/cmt/trace"),a=_n.IP.system,s=_n.IP.systemVersion,c=_n.IP.version,u=_n.IP.platform,l={traceId:(0,On.Wj)(r),tags:{system:a,version:c,systemVersion:s,platform:u,href:window.location.href,userID:i||"0",pageName:n||"none"},span:t};(0,_n.wG)(o,l)}({timelines:l,pn:e.pn,groupId:n,userId:a}),function(e,t,n){var r=e.pagePath,i=n.tags,o=n.longFields;(0,gn.P2)([{groupId:"90246",amplifyRate:t,tags:{pagePath:String(r)}},{groupId:"90341",amplifyRate:t,tags:{pn:i.pn,hostname:i.hostname,platform:i.platform},longFields:o,fields:i}],{appId:Sn.oN,bizSide:Sn.gM},!0)}(e,t.amplifyRate,u))}))}},{key:"report",value:function(e){this.reportCustom(e),dr(e,this.amplifyRate,this.sampleRate)}}],[{key:"init",value:function(t){try{var n=["pn","pagePath","groupId"].filter((function(e){return!t[e]}));if(n.length)return void yr("Pmm.init 上报，必须传入: ".concat(n.map((function(e){return"options.".concat(e)})).join(", ")));t.logTTISelf||window._plt.push(["tm","tti",+new Date]),(0,_n.Rj)((function(){return new e(vr({},t))}))}catch(e){(0,F.throwErrorAsync)(e)}}}]),e}(),br=n("V56i"),wr=n("wfOt"),kr=n("FrRG");var _r=n("9vur");function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pr(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xr(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ir=/(Dc)?CrowdHook/,Cr=function(e,t){return!!e.ignoreJudgeShow||t},Er=function(e){var t,n,r,i=null===(t=e.getComponentByKeyReg(Ir))||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.store)||void 0===r?void 0:r.configMap,o=Object.keys(i).reduce((function(t,n){var r;e.componentMap[n]&&t.push.apply(t,Ae()(null===(r=i[n])||void 0===r?void 0:r.idList));return t}),[]);return Array.from(new Set(o))},jr=function(){var e=a()(c().mark((function e(t){var n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userHasLogin()){e.next=2;break}return e.abrupt("return",[]);case 2:if(e.prev=2,(r=Er(t)).length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.next=8,(0,kr.Cl)({user_group_ids:r},Sr(Sr({},t.requestParams),{},{rootStore:t}));case 8:return i=e.sent,e.abrupt("return",null==i||null===(n=i.result)||void 0===n?void 0:n.filter((function(e){return!(null==e)})));case 12:return e.prev=12,e.t0=e.catch(2),null==t||null===(o=t.$$requestContext)||void 0===o||null===(a=o.sendError)||void 0===a||a.call(o,e.t0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),Rr=function(e,t,n){var r,i=(null===(r=t[e.componentId])||void 0===r?void 0:r.idList)||[];return!i.length||!(null==n||!n.length)&&function(e,t){var n,r=Pr(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.includes(Number(i)))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}(i,n)},Tr=function(e){var t,n,r=function(e,t){var n=e.firstScreenTop;e.firstScreenTop=t;var r=It(e);return e.firstScreenTop=n,r}(e,1400),i=null===(t=e.getComponentByKeyReg(Ir))||void 0===t?void 0:t[0],o=(null==i||null===(n=i.store)||void 0===n?void 0:n.configMap)||{},a=e.list.findIndex((function(e){var t,n;return null===(t=o[e.componentId])||void 0===t||null===(n=t.idList)||void 0===n?void 0:n.length}));return{crowdInFirstScreen:-1!==a&&a<r,firstCrowdWidgetIndex:a,firstSeparatorIndex:r,crowdHookWidget:i}},Dr=function(){var e=a()(c().mark((function e(t){var n,r,i,o,s,u,l,f,p,d,h=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>1&&void 0!==h[1]?h[1]:0,s=function(){var e=a()(c().mark((function e(){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",Promise.all([jr(t)]));case 2:return e.prev=2,e.next=5,Promise.race([Promise.all([jr(t)]),(0,_r._)(o).then((function(){return Promise.reject(new Error("filterWithUser超时,".concat(o,"ms")))}))]);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),null==t||null===(r=t.$$requestContext)||void 0===r||null===(i=r.sendError)||void 0===i||i.call(r,e.t0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),e.next=4,s();case 4:u=e.sent,l=R()(u,1),f=l[0],p=null===(n=t.getComponentByKeyReg(Ir))||void 0===n||null===(r=n[0])||void 0===r||null===(i=r.store)||void 0===i?void 0:i.configMap,d=t.list.filter((function(e){return Cr(e.store,Rr(e,p,f||[]))})),(0,tt.runInAction)((function(){t.list=d}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Nr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ar=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(Nr()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){var e;l()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i)))._inFirstScreen=!1,e._firstCrowdWidgetIndex=0,e._firstSeparatorIndex=0,e}return p()(r,null,[{key:"applyHook",value:function(e){!e.isEditor&&e.hooks.beforeCalcFirstScreenComponent.tapPromise("CrowdHookStore",r.beforeBuildComponentStore),!e.isEditor&&e.hooks.pageDidMount.tapPromise("CrowdHookStore",r.pageDidMount)}}]),r}(wr.Z);function qr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}Ar.beforeBuildComponentStore=function(){var e=a()(c().mark((function e(t){var n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preRender,e.next=2;break;case 2:if(n=Tr(t),r=n.crowdHookWidget,i=n.crowdInFirstScreen,o=n.firstCrowdWidgetIndex,a=n.firstSeparatorIndex,Object.assign(r.store,{_inFirstScreen:i,_firstCrowdWidgetIndex:o,_firstSeparatorIndex:a}),!i){e.next=6;break}return e.abrupt("return",Dr(t,3e3));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ar.pageDidMount=function(){var e=a()(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=null===(n=t.getComponentByKeyReg(/(Dc)?CrowdHook/))||void 0===n?void 0:n[0])&&null!==(r=i.store)&&void 0!==r&&r._inFirstScreen){e.next=3;break}return e.abrupt("return",Dr(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Lr=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(qr()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){return l()(this,r),n.apply(this,arguments)}return p()(r,[{key:"render",value:function(){return null}}]),r}(w().PureComponent);Lr.Store=Ar;var Br=n("brkN");function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vr="YYYY-MM-DD HH:mm:ss SSS",Hr=n.n(Br)()((function(e,t){if(null!=t&&t.length&&null!=t&&t.some((function(e){return!e.sent}))){var n=t.filter((function(e){return!e.sent})),r=Ae()(new Set(n.map((function(e){return e.appName})))).map((function(t){var r,i=n.filter((function(e){return e.appName===t})),o=i.slice(0,3),a=e.find((function(e){return e.goodsId===i[0].goodsId}));return{callOrg:i[0].callOrg,appName:i[0].appName,isFirstScreen:null===(r=i[0])||void 0===r?void 0:r.isFs,isExpired:rt()(i[0].startTime).valueOf()-rt()(null==a?void 0:a.endTime).valueOf()>6e5,isParallelReq:rt()(i[0].startTime).isAfter(null==a?void 0:a.endTime)?0:1,groupId:90139,fields:{repeatGoodsId:o.map((function(e){return e.goodsId})).join("_"),repeatReqStartTime:Ae()(new Set(o.map((function(e){return e.startTime})))).join("_"),repeatResEndTime:Ae()(new Set(o.map((function(e){return e.endTime})))).join("_"),repeatListId:Ae()(new Set(o.map((function(e){return e.listId})))).join("_"),firstReqStartTime:null==a?void 0:a.startTime,firstResEndTime:null==a?void 0:a.endTime,firstListId:null==a?void 0:a.listId},longFields:{repeatGoodsNum:i.length}}}));n.forEach((function(e){e.sent=!0}));(0,tn.o)(r,window.__CART_STORE__,{groupConfig:{bizSide:"consumer-platform-fe",appId:"138"}})}}),2e3,{leading:!1,trailing:!0});function Ur(e,t,n){var r,i,o;if(!((null===(r=e.collectGoods)||void 0===r?void 0:r.length)>=300)){var a=t.prec||t.p_rec||{},s=(null==a?void 0:a.org)||"unknown",c=a.list_id;if(null!==(i=e.collectGoods)&&void 0!==i&&i.some((function(e){return e.goodsId===t.goods_id}))){var u=Mr(Mr({appName:null==a?void 0:a.app_name,goodsId:t.goods_id,listId:c},n),{},{callOrg:s,isFs:!1,sent:!1});e.repeatGoods.push(u)}null===(o=e.collectGoods)||void 0===o||o.push(Mr(Mr({goodsId:t.goods_id,listId:c,appName:null==a?void 0:a.app_name},n),{},{callOrg:s}))}}var Gr=function(e){return Hr(e.collectGoods,e.repeatGoods),{request:function(e){return e.logRequestStartTime=Date.now(),e},response:function(t){try{var n;if(null==t||null===(n=t.data)||void 0===n||!n.is_back_up){var r,i,o,a,s,c,u={startTime:rt()(t.config.logRequestStartTime).format(Vr),endTime:rt()().format(Vr),componentMark:null===(r=t.config)||void 0===r||null===(i=r.__params__)||void 0===i?void 0:i.component_mark,compId:null===(o=(0,F.parseUrlQuery)((null===(a=t.config)||void 0===a?void 0:a.name)||""))||void 0===o?void 0:o.comp_id};null!==(s=t.data.goods_list)&&void 0!==s&&s.length?(t.data.goods_list.forEach((function(t){return Ur(e,t,u)})),Hr(e.collectGoods,e.repeatGoods)):null!==(c=t.data.content_list)&&void 0!==c&&c.length&&(t.data.content_list.forEach((function(t){var n;null===(n=t.goods_list)||void 0===n||n.forEach((function(t){return Ur(e,t,u)}))})),Hr(e.collectGoods,e.repeatGoods))}}catch(e){}return t}}},zr=n("CLTR"),Wr=n("VRmg"),Qr=n("VlKT"),Jr=n("BqXm"),Xr=n("4Ox8"),Kr=function e(t,n){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(null===(r=n.getComponentById(t))||void 0===r?void 0:r[0])||{},s=(null==a||null===(i=a.store)||void 0===i?void 0:i.childrenIds)||[];return o.push.apply(o,Ae()(s)),s.length&&s.map((function(t){return e(t,n,o)})),Array.from(new Set(Ae()((0,Xr.xH)(o))))},Yr=n("/Das"),Zr=n("9bMP"),$r=["ImmersiveConfig","DcImmersiveConfig","DcShare","DcGoToApp","DcCrowdHook","DcVisibleConfig","GoTop","DcGoTop"],ei=n("PT3e"),ti=n("hrDj");function ni(e){return new Promise((function(t){var n=0,r=null;requestAnimationFrame((function i(){if(null===r)r=Date.now(),requestAnimationFrame(i);else{n++;var o=Date.now()-r;if(e>o)requestAnimationFrame(i);else{var a=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(1e3/(o/n),0);t(a)}}}))}))}var ri=n("iOT4");function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ai=function(e){if("number"==typeof e)return Math.floor(e/Math.pow(1024,2))},si=function(){var e=a()(c().mark((function e(t,n){var r,i,o,a,s,u,l,f,p,d,h,v,m,y,g,b,w,k,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(null===(r=window)||void 0===r?void 0:r.__PERF_CONFIG__)||{},f=l.fpsWhiteList,p=t.id,null!=f&&f.includes(p)){e.next=5;break}return e.abrupt("return");case 5:if(d=!0,h=null,v=function(){"hidden"===document.visibilityState&&(d=!1)},null===ri.ZP||void 0===ri.ZP||!ri.ZP.isNativePlatform){e.next=12;break}return e.next=11,(0,ti.addSceneLeaveCallback)((function(){d=!1}));case 11:h=e.sent;case 12:return document.addEventListener("visibilitychange",v),e.next=15,ni(n);case 15:m=e.sent,y=null!==(i=null===(o=performance)||void 0===o?void 0:o.memory)&&void 0!==i?i:{},g=y.jsHeapSizeLimit,b=y.totalJSHeapSize,w=y.usedJSHeapSize,k=null!==(a=performance)&&void 0!==a&&a.memory?1:0,_={groupId:70275,cart_id:p,duration:n,fps_tag:Math.floor(Math.min(m,60)/10),is_low_end:null!==(s=null==t||null===(u=t.pUnoContext)||void 0===u?void 0:u["is-low-end"])&&void 0!==s?s:0,memory_tag:k,longFields:oi({fps:m},k?{jsHeapSizeLimit:ai(g),totalJSHeapSize:ai(b),usedJSHeapSize:ai(w)}:{})},d&&(0,Jr.oi)(_,t),"function"==typeof h&&h(),document.removeEventListener("visibilitychange",v);case 22:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ci=n("PdWy"),ui=n("0iAV");function li(e,t,n){e=e||100;var r=function(e,t){var n=(0,ci.default)(e+t).toLowerCase();return(0,ui.default)(n)}(t=t||0,n=parseInt(n,10)||0)%e;return r<0&&(r+=e),r}function fi(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,a=(null==i?void 0:i.spABStore)||{},s=a.salt,c=void 0===s?"cp22126":s,u=a.whiteList,l=void 0===u?[]:u,f=a.blackList,p=void 0===f?[]:f;if(null===(e=o.userInfo)||void 0===e||!e.uid)return!1;if(l.includes(null===(t=o.userInfo)||void 0===t?void 0:t.uid))return!0;if(p.includes(null===(n=o.userInfo)||void 0===n?void 0:n.uid))return!1;var d=li(100,c,null===(r=o.userInfo)||void 0===r?void 0:r.uid),h=[2,3],v=parseInt(o.query.long_gray_num,10);return"number"!=typeof v||Number.isNaN(v)||h.push(v),h.includes(d)||"1"===o.query.long_gray}var pi,di,hi,vi,mi,yi,gi,bi,wi=["black_sp"];function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Si,Pi=function(){var e=window.location.pathname;try{var t=(0,F.parseUrlQuery)(window.location.href),n=["type","id","subject_id"].reduce((function(e,n){return t[n]&&(e[n]=t[n]),e}),{});e=(0,F.appendQuery)(n,e)}catch(e){(0,F.throwErrorAsync)(e)}return e},xi=(pi=function(e){h()(y,e);var t,n,r,o,s,u,f,d,v=(t=y,function(){var e,n=g()(t);if(Oi()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function y(){var e,t,n;l()(this,y);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=v.call.apply(v,[this].concat(i)),Ke()(n,"isCdnRender",di,Ze()(n)),Ke()(n,"isEnded",hi,Ze()(n)),Ke()(n,"subjectIds",vi,Ze()(n)),Ke()(n,"promotion_id",mi,Ze()(n)),Ke()(n,"pageType",yi,Ze()(n)),Ke()(n,"nativeBarShowStatus",gi,Ze()(n)),Ke()(n,"bottomTabHeight",bi,Ze()(n)),n.repeatGoods=[],n.collectGoods=[],n.exposeRenderRootMargin=void 0,n.__memoizedResult=void 0,n.collectGoods=(null==i||null===(e=i[0])||void 0===e?void 0:e.collectGoods)||[],n.repeatGoods=(null==i||null===(t=i[0])||void 0===t?void 0:t.repeatGoods)||[],n.hooks.beforeFilterComponent.tap("handlerSpecialComponent",y.handlerSpecialComponent),n.hooks.onAxiosInstanceCreated.tap("createAxiosInstance",y.createAxiosInstance),n.hooks.beforeBuildComponentList.tapPromise("dcBeforeBuildComponentList",y.dcBeforeBuildComponentList),n.hooks.beforeBuildComponentList.tapPromise("setVisibleObserver",y.setVisibleObserver),n.hooks.pageDidMount.tapPromise("forceShowDirectTrain",y.forceShowDirectTrain),n.hooks.pageDidMount.tapPromise("logDcPageBaseInfo",y.logDcPageBaseInfo),n.hooks.pageDidMount.tapPromise("logPmm",y.logPmm),n.hooks.beforeFilterComponent.tap("calcTestPv",(function(e){!e.testPv&&(e.testPv={}),e.list.reduce((function(e,t){t.store.enableABTest&&t.store.ABStore&&(e[t.store.ABStore.salt]=-1);return e}),e.testPv)})),n.hooks.afterFilterComponent.tap("filterContainerOutSide",(function(e){var t,n=e.list.find((function(e){return"DcSimpleContainer"===e.key}));if(n){if(2!==(null===(t=n.store)||void 0===t?void 0:t.greyType)||fi(n.store,e)){var r=Kr(n.componentId,e);n.store.childrenIds.map((function(t){var n,r,i;null!==(n=e.getComponentById(t))&&void 0!==n&&null!==(r=n[0])&&void 0!==r&&null!==(i=r.store)&&void 0!==i&&i.parentCmptId&&(e.getComponentById(t)[0].store.parentCmptId="")})),e.list=e.list.filter((function(e){return r.includes(e.componentId)||$r.includes(e.key)}))}else e.list=e.list.filter((function(e){return"DcSimpleContainer"!==e.key}))}})),n.hooks.afterInitialStore.tap("calcTestPv",(function(e){!e.testPv&&(e.testPv={}),e.list.reduce((function(e,t){if(t.store.enableABTest&&t.store.ABStore){var n=t.store.ABStore,r=n.salt,i=n.saltName;e[r]=i}return e}),e.testPv);var t=(0,Qr.lP)(e),n=e.requestContext.platform,r=n.isNativePlatform,i=n.isTinyNativePlatform,o=n.isLiteNativePlatform;if(r&&!i&&!o&&(0,Qr.d_)(e)){var a=(0,Qr.O1)(e)&&(0,Qr.wd)(e);e.testPv[t.salt]=a?"A":"B"}e.trackingBase.test_pv=JSON.stringify(e.testPv),e.trackingBase.log_session_id=e.logSessionId})),n.config=n.config||{},n.logSessionId=n.logSessionId||n.query.log_session_id||(0,F.nanoid)(),n.config.axiosPlugins=[Gr(Ze()(n))],n}return p()(y,[{key:"getInitialStore",value:(d=a()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initialAllStore();case 2:if(this.isCdnRender){e.next=5;break}return e.next=5,this.fetchComponentList();case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"applyComponentHooks",value:(f=a()(c().mark((function e(){var t,n,r,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((r=this.list.findIndex((function(e){var t;return null==e||null===(t=e.key)||void 0===t?void 0:t.includes("CrowdHook")})))>-1&&(n=this.list.splice(r,1)[0]),i=u.length,o=new Array(i),a=0;a<i;a++)o[a]=u[a];return e.next=5,(t=Te()(g()(y.prototype),"applyComponentHooks",this)).call.apply(t,[this].concat(o));case 5:if(!n){e.next=18;break}if(this.list.splice(r,0,n),e.prev=7,s=Lr,e.t0=s.Store.applyHook,!e.t0){e.next=13;break}return e.next=13,s.Store.applyHook(this);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(7),this.sendError(e.t1);case 18:case"end":return e.stop()}}),e,this,[[7,15]])}))),function(){return f.apply(this,arguments)})},{key:"pageInfoServiceImpl",value:(u=a()(c().mark((function e(){var t,n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.id||this.query.id,i=this.subject_id||this.query.subject_id,o=(null===(t=this.__leoConfig)||void 0===t||null===(n=t["admin-cart.dc-vip-id"])||void 0===n?void 0:n.vipIdList)||[],a=!this.query.is_review&&o.some((function(e){return[r,i].includes(e)}))?"api/wright/cart/publish_info_carnival":"",e.abrupt("return",Kt(this,a,{skipCdnBackup:!!a}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"filterWhenPeriod",value:function(){var e=this;if(!this.isEditor){var t=this.list,n=new Set,r=function(t){return!(!function(e,t){return!!e.store.ignoreJudgeShow||_t(e,t)}(t,e)||n.has(t.store.parentCmptId))||(n.add(t.componentId),!1)};t=(t=(t=t.filter(r)).filter(r)).filter(r);var i=this.widgetsMap;t=t.filter((function(t){return!!i[t.key]||(e.requestContext.sendError(new Error("id: ".concat(e.query.id,", subject_id: ").concat(e.query.subject_id,", ").concat(t.key,"组件不存在"))),!1)})),this.list=t}}},{key:"getCmtInfo",value:function(){var e=this.type,t=this.id;return 1!==e||[Yr.Z.MIDDLE_RESULT,Yr.Z.FINAL_RESULT].includes(t)?{cmtId:200005}:{cmtId:200006}}},{key:"afterInitClientStore",value:function(){var e=this.requestContext;"1"!==e.queries.force_login||this.userHasLogin()||(0,ot.login)().then((function(){if(e.platform.isNativePlatform){var t="has_reload";if(!e.queries.has_reload){var n=(0,F.appendQuery)(i()({},t,1),e.href);_.default.reload(n)}}})).catch((function(){e.platform.isNativePlatform&&_.default.back()})),this.cmtInfo=this.getCmtInfo(),e.queries.refer_putid&&this.axios.post("/api/brand-vivo/target/report",{refer_putid:e.queries.refer_putid,event:"impr",list_id:this.listId},{needAntiContent:!1,defaultErrorHandler:function(){}}),this.preloadComponent(),"true"===e.queries.manu_account_reminder&&e.queries.from_page&&e.queries.manu_id&&(0,zr.g$)({url:"mfrp_account_reminder_popup.html?from_page=".concat(e.queries.from_page,"&manu_id=").concat(e.queries.manu_id),name:"dc_mfrp_account_reminder_popup"}).catch(this.sendError),function(e){var t,n=(null===(t=e.__leoConfig)||void 0===t?void 0:t["admin-cart.dc-home-tab-config"])||{},r=n.cartIds,i=void 0===r?[]:r,o=n.reloadTime,s=void 0===o?0:o;if(e.requestContext.platform.isNativePlatform&&i.includes(e.id)){var u=!1,l=function(e){u=e},f=Date.now();(0,zr.vX)((function(){return l(!0)})),(0,zr.K5)((function(){return l(!0)})),(0,zr.Q)(a()(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!u){t.next=5;break}return l(!1),(0,X.invokeBridgeCallNativeFun)("WebScene","reload",{url:(0,F.appendQuery)({tab_login_reload:1},location.href)}),t.abrupt("return");case 5:s&&Date.now()-f>s&&(0,X.invokeBridgeCallNativeFun)("WebScene","reload",{url:(0,F.appendQuery)({tab_time_reload:1},location.href)}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.sendError(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))))}}(this)}},{key:"preloadComponent",value:(s=a()(c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.requestContext.platform.isNativePlatform,!e.t0){e.next=5;break}return e.next=4,(0,zr._4)();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,(0,_r._)(2e3);case 9:t=function(){var e=a()(c().mark((function e(r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.list.find((function(e){var t;return!((null==e||null===(t=e.store)||void 0===t?void 0:t.constructor)!==Object)}))){e.next=3;break}return e.abrupt("return","");case 3:if(e.prev=3,!((null==r?void 0:r.timeRemaining())>14)){e.next=9;break}return e.next=9,n.buildComponent(i);case 9:window.requestIdleCallback&&window.requestIdleCallback(t),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),n.sendError(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),window.requestIdleCallback&&window.requestIdleCallback(t);case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"prepareEnv",value:function(){Te()(g()(y.prototype),"prepareEnv",this).call(this),this.query.back_relative_id&&(this.listId=this.query.back_relative_id)}},{key:"prepareClientData",value:(o=a()(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.default.setNextPageQuery({log_session_id:this.logSessionId,refer_page_name:"new_season"}),this.isCdnRender&&(this.userInfo=(0,ot.getUserInfoSync)(),this.filterComponentList(this.list)),"21933"!==this.query.subject_id){e.next=7;break}return t=(0,F.appendQuery)(_i(_i({},this.query),{},{type:47,id:158566}),"/pincard_museum.html"),_.default.reload(t),e.abrupt("return");case 7:this.webpEnable=!!this.webpEnable||"1"===this.requestContext.cookies.webp&&this.requestContext.platform.platform===K.SYSTEM.ios,this.query.back_relative_id&&(0,br.WV)({back_relative_id:""});case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"requestMemoized",value:(r=a()(c().mark((function e(t,n,r){var i,o,a,s,u,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=l.length>3&&void 0!==l[3]?l[3]:500,a=l.length>4&&void 0!==l[4]?l[4]:"post",e.prev=2,s="".concat(t,"_").concat(JSON.stringify(n),"_").concat(JSON.stringify(r),"}"),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",this.axios.post(t,n,r));case 9:return this.__memoizedResult||(0,it.r)(this,"__memoizedResult",{}),(!(u=null===(i=this.__memoizedResult[s])||void 0===i?void 0:i.time)||Date.now()>u+o)&&(this.__memoizedResult[s]={result:this.axios[a](t,n,r),time:Date.now()}),e.abrupt("return",this.__memoizedResult[s].result);case 13:case"end":return e.stop()}}),e,this,[[2,6]])}))),function(e,t,n){return r.apply(this,arguments)})}],[{key:"handlerSpecialComponent",value:function(e){var t=[];e.requestContext.platform.isNativePlatform&&t.push("DcGoToApp"),(!e.requestContext.platform.isNativePlatform||e.getComponentByKeyReg(/((Dc)?SearchBar|(Dc)?SearchResult|(Dc)?ImmersiveConfig)/).length||"1"!==e.requestContext.queries._pdd_fs)&&t.push("DcVirtualNav"),t.push("DcPageStyle"),t.push("DcPromotionIdentify"),t.push("DcCustomerLog"),t.push("DcSearchConfig"),!(0,Wr.AG)(e.requestContext.queries)&&t.push("DcLinkGoodsList"),e.list=e.list.filter((function(e){return!t.includes(e.key)}))}},{key:"createAxiosInstance",value:function(e){var t;e.axios.interceptors.request.use((function(e){return!1!==e.needAntiContent&&(e.useNativeAntiToken=!0),e}));var n=((null===(t=e.__leoConfig)||void 0===t?void 0:t["admin-cart.dc-home-tab-config"])||{}).cartIds,r=void 0===n?[]:n;e.axios.interceptors.response.use(null,(function(t){var n,i,o,a;throw null!=t&&null!==(n=t.config)&&void 0!==n&&null!==(i=n.url)&&void 0!==i&&i.includes("carnival")&&(null==t||null===(o=t.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.error_code)===De.errors.API_SERVICE_BUSY&&!r.includes(e.id)&&(0,tt.runInAction)((function(){e.isEnded=!0})),t}))}},{key:"dcBeforeBuildComponentList",value:function(e){e.list.forEach((function(e,t){e.store&&!e.store.componentIndex&&(e.store.componentIndex=t)}));var t=e.getComponentByKeyReg("DcPageLoader");if(null==t||!t.length){var n=e.getComponentByKeyReg(/(Dc)?RankContainer/);try{var r,i,o;if(n.forEach((function(e){e.fetched||!(0,tt.isObservableProp)(e,"visible")&&(0,tt.extendObservable)(e,{visible:void 0})})),e.exposeRenderRootMargin)return;var a=null===(r=e.__leoConfig)||void 0===r||null===(i=r["admin-cart.expose-render-root-margin-config"])||void 0===i?void 0:i[e.id],s=null==a||null===(o=a.find((function(t){return e.serverTime>rt()(t.startTime).valueOf()&&e.serverTime<rt()(t.endTime).valueOf()})))||void 0===o?void 0:o.rootMagin;s&&(e.exposeRenderRootMargin=s)}catch(t){e.sendError(t)}}}},{key:"logDcPageBaseInfo",value:function(e){(0,Jr.Q$)(e);var t=e.query,n=t.black_sp,r=x()(t,wi);if(n){(0,Zr.QU)(n);var i=location.href.split("?")[0]+"?"+(0,F.buildQuery)(r);(0,ei.replaceURL)(i)}e.requestContext.platform.isNativePlatform&&a()(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,X.addPageContext)({log_session_id:e.logSessionId});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},{key:"logPmm",value:function(e){gr.init({pn:e.getCmtInfo().cmtId,groupId:11022,pagePath:Pi()}),si(e,5e3),si(e,1e4)}},{key:"setVisibleObserver",value:function(e){e.directTrainList=e.list.filter((function(e){var t,n;return"DcInfiniteGoodsList"===e.key&&(null===(t=e.store.editors)||void 0===t||null===(n=t.directTrain)||void 0===n?void 0:n.enable)}));var t=e.componentMap,n=e.directTrainList.reduce((function(e,n){var r=n.store.parentCmptId;return e.includes(r)||r&&"DcCrowdContainer"===t[r].key&&e.push(n.store.parentCmptId),e}),[]);e.directTrainParents=n.map((function(e){return t[e]}));var r=function(e){e.fetched||(0,tt.isObservableProp)(e,"visible")||(0,tt.extendObservable)(e,{visible:void 0})};e.directTrainParents.forEach(r),e.directTrainList.forEach(r)}},{key:"forceShowDirectTrain",value:(n=a()(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){var e=a()(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.fetched){e.next=4;break}return e.next=3,t.loadComponent(n);case 3:(0,tt.runInAction)((function(){n.visible=!0}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!t.directTrainParents.length){e.next=8;break}return e.next=4,Promise.all(t.directTrainParents.map(n));case 4:r=t.directTrainList.map((function(e){return e.componentId})),t.directTrainParents.forEach((function(e){e.store.displayChildren.forEach((function(e){r.includes(e.componentId)&&n(e)}))})),e.next=9;break;case 8:t.directTrainList.forEach(n);case 9:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}]),y}(yn),di=et()(pi.prototype,"isCdnRender",[tt.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hi=et()(pi.prototype,"isEnded",[tt.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vi=et()(pi.prototype,"subjectIds",[tt.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mi=et()(pi.prototype,"promotion_id",[tt.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yi=et()(pi.prototype,"pageType",[tt.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"common"}}),gi=et()(pi.prototype,"nativeBarShowStatus",[tt.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=et()(pi.prototype,"bottomTabHeight",[tt.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),et()(pi.prototype,"getInitialStore",[Et],Object.getOwnPropertyDescriptor(pi.prototype,"getInitialStore"),pi.prototype),et()(pi.prototype,"filterWhenPeriod",[tt.action],Object.getOwnPropertyDescriptor(pi.prototype,"filterWhenPeriod"),pi.prototype),pi),Ii=n("hol3"),Ci=n("eQMG"),Ei=n("iOuz"),ji=n("VdLR"),Ri=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((function(e){var t=e._getContent;if(t){var n=R()(t()[0],1)[0];document.getElementById(n)||e._insertCss()}})),function(){}},Ti=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.store,r=void 0===n?{}:n,i=t.key,o=void 0===i?"":i,a=document.getElementById("app"),s=r.ssr&&!r.isBackCache?"hydrate":"render";W()[s](w().createElement(ji.Z,{store:r,insertCss:Ri,key:o},w().createElement(e,{store:r})),a)};function Di(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ni=(Si=function(e){h()(r,e);var t,n=(t=r,function(){var e,n=g()(t);if(Di()){var r=g()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m()(this,e)});function r(){return l()(this,r),n.apply(this,arguments)}return p()(r,[{key:"renderPage",value:function(){Ti(this.component,{store:this.store})}}]),r}(Ei.Z),et()(Si.prototype,"renderPage",[lt.e],Object.getOwnPropertyDescriptor(Si.prototype,"renderPage"),Si.prototype),Si),Ai=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{var i,o,a,s,c;if(!e||!t||!n)return!1;if(e.requestContext.queries.abtest)return"A"===e.requestContext.queries.abtest.toUpperCase();if("boolean"==typeof(null==e||null===(i=e.abConfigResult)||void 0===i?void 0:i[n]))return null==e||null===(c=e.abConfigResult)||void 0===c?void 0:c[n];var u=r||{salt:t,bucketCount:100,defaultModel:"B",models:{A:{whiteList:(null==e||null===(o=e.__leoConfig)||void 0===o?void 0:o.ab_test_whiteList_a)||[],blackList:[],buckets:(null==e||null===(a=e.__leoConfig)||void 0===a||null===(s=a["admin-cart.dc-page-ab-config"])||void 0===s?void 0:s[n])||0},B:{whiteList:[],blackList:[],buckets:100}}},l=(0,bt.getTestStrategy)(u,Number(e.userInfo.uid)),f="A"===l;return null!=e&&e.abConfigResult||(e.abConfigResult={}),e.abConfigResult[n]=f,f}catch(t){return null==e||e.sendError(t),!1}},qi=function(e){var t;return!!((null==e||null===(t=e.__leoConfig)||void 0===t?void 0:t["admin-cart.dc-page-ab-config"].davinciIds)||[]).includes(e.id)&&Ai(e,"cp23333","abTestDavinciModel")};function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi=["promotion_treasure.html","_cdn_render.html"],Mi=function(e){var t,n;var r=Date.now(),i=null===(t=window.leoConfig)||void 0===t?void 0:t["admin-cart.dc-static-cos-config"];return!(null!=i&&i.url&&r>=(null==i?void 0:i.startTime)&&r<=(null==i?void 0:i.endTime))||null!=i&&null!==(n=i.url)&&void 0!==n&&n.includes(e.query.id)||i.url.includes(e.pathname)?"":i.url},Vi=We(xi);function Hi(e){return Ui.apply(this,arguments)}function Ui(){return Ui=a()(c().mark((function e(t){var n,r,i,o,s,u,l,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=n.type,i=void 0===r?1:r,o=n.id,s=n.subject_id,u=t.pathname.includes(Ii.SUPER_STAR),l=t.pathname.includes("csr"),f=!l&&!Fi.some((function(e){return t.pathname.includes(e)})),e.abrupt("return",{title:"",chunks:["promotion"],component:Vi,staticUrl:Mi(t),cacheKey:"promotion_id_".concat(i,"_").concat(s||o),useBigPipe:f,forceLogin:u,useInlineLogger:(0,Jr.vo)(t.query,t.pathname),useCombo:!0,useCsrSkeleton:!0,usePreloadJs:!0,filterClientBundlesOnServer:!0,filterClientBundlesOnClient:!0,useDevPanel:!0,usePerfLog:!0,pmmAppInfo:{bizSide:"consumer-platform-fe",appId:"100566",testAppId:"100263"},bootstrap:function(){var e=a()(c().mark((function e(t){var n,r,i,o,a,s,u,l,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,F.parseUrlQuery)(location.href),s=a.history_cache_time,u=a.history_build_version,!("1"===a.is_back&&s&&u&&!1===(null===(n=window.__NEXT_DATA__)||void 0===n?void 0:n.ssr)&&null!==(r=window.__NEXT_DATA__)&&void 0!==r&&null!==(i=r.storeParams)&&void 0!==i&&i.useBackCache&&null!==(o=window.history.state)&&void 0!==o&&o.cartStore)){e.next=18;break}if(e.prev=2,f=JSON.parse(window.history.state.cartStore),window.__NEXT_DATA__.store=f,!((null==f||null===(l=f.list)||void 0===l?void 0:l.length)>1)){e.next=13;break}return window.__NEXT_DATA__.store.isBackCache=!0,window.__NEXT_DATA__.store.isBack=!0,window.__NEXT_DATA__.store.navRankList=[],window.__NEXT_DATA__.ssr=!0,e.next=12,Me(window.__NEXT_DATA__.store);case 12:(0,br.WV)({history_build_version:"",history_cache_time:""});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),(0,Je.y7)(e.t0);case 18:return e.abrupt("return",(new Ni).bootstrap(t));case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),getPerfLogParams:function(){var e=window.__CART_STORE__,t={};if(null!=e&&e.requestContext){var n=e.query,r={mainTabContainer:n[Ci.pS]&&!n[Ci.a1]?1:0,subTabContainer:n[Ci.a1]?1:0,isExperimentA:qi(e)?"1":"0",isExperimentB:"0",isExperimentC:"0",isBack:e.isBack?"1":"0",isBackCache:e.isBackCache?"1":"0"};Object.assign(t,{overviewFields:Bi({},r)})}return t},params:{useTemplateVerison:Qe("admin-cart.dc-template-version")}});case 5:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}},kVO3:function(e,t,n){var r=n("Od5c"),i=n("DDs0"),o="string"==typeof r?[[e.id,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return i(o,e)}},wFWk:function(e,t,n){var r=n("Gafl");"string"==typeof r&&(r=[[e.id,r,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n("tqpw")(r,i);r.locals&&(e.exports=r.locals)},Gafl:function(e,t,n){(t=e.exports=n("Cgg2")(!1)).push([e.id,"._3XGwweDl{z-index:999;position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.8);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}",""]),t.locals={mask:"_3XGwweDl"}},Od5c:function(e,t,n){(t=e.exports=n("Cgg2")(!1)).push([e.id,"@-webkit-keyframes _2_g54Q1Y{0%{-webkit-transform:scale(0);transform:scale(0)}70%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes _2_g54Q1Y{0%{-webkit-transform:scale(0);transform:scale(0)}70%{-webkit-transform:scale(1.1);transform:scale(1.1)}to{-webkit-transform:scale(1);transform:scale(1)}}._2rPplssH{-webkit-animation:_2_g54Q1Y .5s ease;animation:_2_g54Q1Y .5s ease}@-webkit-keyframes _10T1aEfv{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes _10T1aEfv{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}._2rPplssH{width:2.9rem;height:3.19rem;border-radius:.08rem;background-color:#fff;padding-top:.45rem;text-align:center}._11VxXwcu{width:1.2rem;height:1.2rem;margin:0 .85rem .34rem}._2iMEw0XO{font-size:.17rem;color:#000;margin-bottom:.19rem}.tCfIucj4{width:2.5rem;height:.43rem;border-radius:.05rem;background-color:#ff2741;margin:0 .2rem .08rem}.tCfIucj4 span{font-size:.17rem;line-height:.43rem;color:#fff}._3qpNTDSq{font-size:.14rem;color:#9c9c9c}",""]),t.locals={container:"_2rPplssH","ani-jelly":"_2_g54Q1Y",icon:"_11VxXwcu",title:"_2iMEw0XO",button:"tCfIucj4",tip:"_3qpNTDSq","ani-loading":"_10T1aEfv"}},JgE6:function(e,t,n){var r;!function(){var i="undefined"!=typeof window&&window===this?this:void 0!==n.g&&null!=n.g?n.g:this,o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function a(){a=function(){},i.Symbol||(i.Symbol=c)}var s=0;function c(e){return"jscomp_symbol_"+(e||"")+s++}function u(){a();var e=i.Symbol.iterator;e||(e=i.Symbol.iterator=i.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&o(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return l(this)}}),u=function(){}}function l(e){var t=0;return function(e){return u(),(e={next:e})[i.Symbol.iterator]=function(){return this},e}((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function f(e){u();var t=e[Symbol.iterator];return t?t.call(e):l(e)}function p(e){if(!(e instanceof Array)){e=f(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var d=0;var h="img script iframe link audio video source".split(" ");function v(e,t){for(var n=(e=f(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||v(n.children,t))return!0;return!1}function m(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=f(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=f(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort((function(e,t){return e.timestamp-t.timestamp})),e=e.length,t=n.length-1;0<=t;t--)switch(r=n[t],r.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function y(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var t=window.__tti&&window.__tti.o;this.a=e?e.map((function(e){return{start:e.startTime,end:e.startTime+e.duration}})):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(e,t){var n=XMLHttpRequest.prototype.send,r=d++;XMLHttpRequest.prototype.send=function(i){for(var o=[],a=0;a<arguments.length;++a)o[a-0]=arguments[a];var s=this;return e(r),this.addEventListener("readystatechange",(function(){4===s.readyState&&t(r)})),n.apply(this,o)}}(this.m.bind(this),this.l.bind(this)),function(e,t){var n=fetch;fetch=function(r){for(var i=[],o=0;o<arguments.length;++o)i[o-0]=arguments[o];return new Promise((function(r,o){var a=d++;e(a),n.apply(null,[].concat(p(i))).then((function(e){t(a),r(e)}),(function(e){t(e),o(e)}))}))}}(this.m.bind(this),this.l.bind(this)),function(e){e.c=new PerformanceObserver((function(t){for(var n=(t=f(t.getEntries())).next();!n.done;n=t.next())if("resource"===(n=n.value).entryType&&(e.b.push({start:n.fetchStart,end:n.responseEnd}),b(e,m(e.g,e.b)+5e3)),"longtask"===n.entryType){var r=n.startTime+n.duration;e.a.push({start:n.startTime,end:r}),b(e,r+5e3)}})),e.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(e){var t=new MutationObserver((function(t){for(var n=(t=f(t)).next();!n.done;n=t.next())("childList"==(n=n.value).type&&v(n.addedNodes,h)||"attributes"==n.type&&h.includes(n.target.tagName.toLowerCase()))&&e(n)}));return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this.B.bind(this)))}function g(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=m(e.g,e.b);b(e,Math.max(n+5e3,t))}function b(e,t){!e.i||e.v>t||(clearTimeout(e.j),e.j=setTimeout((function(){var t=performance.timing.navigationStart,n=m(e.g,e.b);t=(window.a&&window.a.A?1e3*window.a.A().C-t:0)||performance.timing.domContentLoadedEventEnd-t;if(e.u)var r=e.u;else performance.timing.domContentLoadedEventEnd?r=(r=performance.timing).domContentLoadedEventEnd-r.navigationStart:r=null;var i=performance.now();null===r&&b(e,Math.max(n+5e3,i+1e3));var o=e.a;5e3>i-n?n=null:n=5e3>i-(n=o.length?o[o.length-1].end:t)?null:Math.max(n,r),n&&(e.s(n),clearTimeout(e.j),e.i=!1,e.c&&e.c.disconnect(),e.h&&e.h.disconnect()),b(e,performance.now()+1e3)}),t-performance.now()),e.v=t)}y.prototype.getFirstConsistentlyInteractive=function(){var e=this;return new Promise((function(t){e.s=t,"complete"==document.readyState?g(e):window.addEventListener("load",(function(){g(e)}))}))},y.prototype.m=function(e){this.f.set(e,performance.now())},y.prototype.l=function(e){this.f.delete(e)},y.prototype.B=function(){b(this,performance.now()+5e3)},i.Object.defineProperties(y.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(p(this.f.values()))}}});var w={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new y(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};e.exports?e.exports=w:void 0===(r=function(){return w}.apply(t,[]))||(e.exports=r)}()},tSVM:function(e,t,n){e.exports=n("xyHx")("FVAw")},"0iAV":function(e,t,n){e.exports=n("xyHx")("FvY0")},tqpw:function(e,t,n){e.exports=n("xyHx")("aET+")},PT3e:function(e,t,n){e.exports=n("xyHx")("ii9O")},Cg2Z:function(e,t,n){e.exports=n("xyHx")("mG/U")},PdWy:function(e,t,n){e.exports=n("xyHx")("sPjG")},URee:function(e,t,n){e.exports=n("xyHx")("uD71")},ugpD:function(e,t,n){e.exports=n("xyHx")("wO2r")}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/assets/js/mobile-dc/promotion-6a5b54083a3ead6aaadf.js.map