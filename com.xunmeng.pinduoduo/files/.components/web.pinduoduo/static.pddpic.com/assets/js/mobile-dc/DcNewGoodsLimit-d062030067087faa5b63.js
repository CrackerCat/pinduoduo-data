(self.webpackChunk_name_mobile_dc=self.webpackChunk_name_mobile_dc||[]).push([["e12b"],{STKg:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return Lt}});var n,o=r("/4JS"),i=r.n(o),c=r("xeO4"),a=r.n(c),u=r("U5BY"),s=r.n(u),p=r("hwDT"),l=r.n(p),f=r("f6/u"),y=r.n(f),m=r("f17R"),g=r.n(m),d=r("Vl5s"),O=r.n(d),h=r("T6n4"),b=r.n(h),v=r("9bdW"),S=r.n(v),I=r("KdYu"),_=r("iuwq"),w=r("MV8a"),T=r("0Qln"),k=r.n(T),C=r("i/Q6"),E=r.n(C),P=r("jXLS"),D=r.n(P),L=(r("XC3m"),r("UK90")),j=r("D+Sb"),N=r("IZoM"),x=r("V5cf"),A=r("G2FM"),R=r("6//m"),B=r("odYm"),M=r("tOV5");function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Y,Z,G,Q,F,z,V,W,$={goodsId:"",soldOutImg:""},H=(0,j.u)([{text:"新品限量抢组件",name:"AREA",value:0},{text:"顶部Banner",name:"TOP_BANNER",value:1},{text:"商品",name:"GOODS",value:2},{text:"商品售罄图",name:"SOLD_OUT_IMG",value:3}]),K=(0,j.u)([{text:"通用商品",name:"COMMON",value:1},{text:"百亿补贴活动商品",name:"BILLION_SUBSIDY",value:2},{text:"限时限量抢活动商品",name:"LIMIT_SNATCH",value:3},{text:"非日销商品",name:"NON_DAILY_SALE",value:4}]),X=(n={},i()(n,K.COMMON,{group:x.Pq.FIX_ORDER_BASE}),i()(n,K.BILLION_SUBSIDY,{group:x.Pq.LIMIT_QUANTITY_LOCK_PIT}),i()(n,K.LIMIT_SNATCH,{group:x.Pq.LIMIT_QUANTITY_RESERVE}),i()(n,K.NON_DAILY_SALE,{group:x.Pq.NON_DAILY_SALE}),n),J=(0,j.u)([{text:"达芬奇模板",name:"DESIGN_TEMPLATE",value:1}]),tt=U(U(U({},"number"==typeof A.YO.SINGLE_COL?i()({},A.YO.SINGLE_COL,{Item:R.Z,col:1}):{}),"number"==typeof A.YO.DOUBLE_COL?i()({},A.YO.DOUBLE_COL,{Item:B.Z,col:2}):{}),"number"==typeof A.YO.TRIPLE_COL?i()({},A.YO.TRIPLE_COL,{Item:M.Z,col:3}):{}),et=function(t,e){return e-e%t.styleConfig.col},rt=r("Skb2"),nt=r("nC4b"),ot=r("2ZWC"),it=r("hQaO"),ct=r("s0Le"),at=r("4k0V");function ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function st(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var lt,ft,yt,mt=(Y=L.action.bound,Z=function(t){y()(o,t);var e,r,n=(e=o,function(){var t,r=O()(e);if(pt()){var n=O()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return g()(this,t)});function o(){var t;s()(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),k()(t,"styleType",G,E()(t)),k()(t,"goodsType",Q,E()(t)),k()(t,"goodsConfig",F,E()(t)),k()(t,"topBannerStore",z,E()(t)),k()(t,"limitActStartTime",V,E()(t)),k()(t,"$list",W,E()(t)),t.templateStore=(0,ct.$)(E()(t)),t.getRemark=function(){return H.items().map((function(t){return t.text}))},t}return l()(o,[{key:"isActivityType",get:function(){return this.goodsType===K.LIMIT_SNATCH||this.goodsType===K.BILLION_SUBSIDY}},{key:"isLimitSnatchType",get:function(){return[K.LIMIT_SNATCH,K.NON_DAILY_SALE].includes(this.goodsType)}},{key:"styleConfig",get:function(){return function(t){var e;return i()({},J.DESIGN_TEMPLATE,U({img:"https://promotion.pddpic.com/promo/50815166-ca58-4aa3-b968-08538a5799e6.png.slim.png",col:1,Item:N.Z,isTemplate:!0},null!==(e=t.templateStore)&&void 0!==e&&e.layout?tt[t.templateStore.layout]:{}))}(this)[this.styleType]}},{key:"goodsTypeConfig",get:function(){return X[this.goodsType]}},{key:"actNotStart",get:function(){return this.isLimitSnatchType&&Date.now()<Number(this.limitActStartTime)}},{key:"showCmpt",get:function(){return this.$list.length}},{key:"request",value:(r=a()(b().mark((function t(){var e,r,n,o=this;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,rt.OF)({group:this.goodsTypeConfig.group,list_id:this.requestParams.listId,lock_pit_goods_id:this.goodsConfig.map((function(t){return t.goodsId})).join("_"),extra_param:st({},this.isLimitSnatchType&&"number"==typeof this.limitActStartTime?{future_time:Math.ceil(this.limitActStartTime/1e3)}:{})},this.requestParams);case 3:if(e=t.sent,r=this.dataFormat(e.goods_list||[]),n=et(this,r.length),(0,L.runInAction)((function(){o.$list=r.slice(0,n)})),this.showCmpt){t.next=9;break}throw new Error("固定商品列表组件返回数据异常");case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),this.logError(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return r.apply(this,arguments)})},{key:"dataFormat",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var r,n=t.actNotStart?e.future_activity_quantity:e.activity_quantity,o=+(0,at.priceCent)(t.actNotStart?e.future_activity_price:e.group_price);return st(st({},new nt.ZP(e,{imgType:t.imgType})),{},{groupPrice:o,normalPrice:(0,at.priceCent)(e.normal_price),activityType:e.activity_type,activityQuantity:e.activity_quantity,restStockTxt:n?"仅剩".concat(n,"件"):"火爆抢购中",soldOutImg:(null===(r=t.goodsConfig.find((function(t){return t.goodsId===e.goods_id})))||void 0===r?void 0:r.soldOutImg)||"",quantity:e.quantity,isOnSale:e.is_onsale,promTagImg:t.rootStore.promTagImg,actNotStart:t.actNotStart,actInProcess:!t.actNotStart&&n>0,actSoldOut:e.is_non_daily_quantity_sold_out})}))}}]),o}(ot.ZP),G=D()(Z.prototype,"styleType",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.DESIGN_TEMPLATE}}),Q=D()(Z.prototype,"goodsType",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return K.COMMON}}),F=D()(Z.prototype,"goodsConfig",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[$]}}),z=D()(Z.prototype,"topBannerStore",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new it.Z}}),V=D()(Z.prototype,"limitActStartTime",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=D()(Z.prototype,"$list",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D()(Z.prototype,"isActivityType",[L.computed],Object.getOwnPropertyDescriptor(Z.prototype,"isActivityType"),Z.prototype),D()(Z.prototype,"isLimitSnatchType",[L.computed],Object.getOwnPropertyDescriptor(Z.prototype,"isLimitSnatchType"),Z.prototype),D()(Z.prototype,"styleConfig",[L.computed],Object.getOwnPropertyDescriptor(Z.prototype,"styleConfig"),Z.prototype),D()(Z.prototype,"goodsTypeConfig",[L.computed],Object.getOwnPropertyDescriptor(Z.prototype,"goodsTypeConfig"),Z.prototype),D()(Z.prototype,"actNotStart",[L.computed],Object.getOwnPropertyDescriptor(Z.prototype,"actNotStart"),Z.prototype),D()(Z.prototype,"showCmpt",[L.computed],Object.getOwnPropertyDescriptor(Z.prototype,"showCmpt"),Z.prototype),D()(Z.prototype,"request",[Y],Object.getOwnPropertyDescriptor(Z.prototype,"request"),Z.prototype),Z),gt=r("ukrc"),dt=r.n(gt),Ot=r("u8Dtt"),ht=r.n(Ot),bt=r("WFcP"),vt=r("VRmg"),St=r("azrQ"),It=dt()(ht())((0,I.observer)((function(t){var e=t.store,r=et(e,e.goodsConfig.length);return S().createElement("div",{style:e.UIStore.style},S().createElement("div",{className:ht().wrapper},S().createElement(bt.Z,{store:e.rootStore,componentStore:e.topBannerStore}),S().createElement("div",{className:ht().contentWrapper,style:{backgroundColor:e.UIStore.innerBgColor}},S().createElement(St.x,{count:r,skeleton:e.templateStore.skeleton}))))}))),_t=r("iOT4"),wt=r("2tVT"),Tt=r("u2c9"),kt=r.n(Tt),Ct=r("wJ16");function Et(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Lt=dt()(ht())(lt=(0,I.inject)("store")(lt=(0,I.observer)((yt=ft=function(t){y()(o,t);var e,r,n=(e=o,function(){var t,r=O()(e);if(Dt()){var n=O()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return g()(this,t)});function o(){var t;s()(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))).removeReturnCallback=function(){},t}return l()(o,[{key:"componentDidMount",value:(r=a()(b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_t.hE)(this.refreshStatus.bind(this));case 2:this.removeReturnCallback=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var t;null===(t=this.removeReturnCallback)||void 0===t||t.call(this)}},{key:"refreshStatus",value:function(){this.store.request()}},{key:"needShowItem",value:function(t){return this.store.isActivityType?t.goodsId&&t.soldOutImg:t.goodsId}},{key:"needShowSoldOutImg",value:function(t){var e=this.store,r=e.isLimitSnatchType,n=e.actNotStart,o=e.isActivityType,i=t||{},c=i.activityType,a=i.quantity,u=i.isOnSale,s=i.activityQuantity;return!!o&&(r?!((n||[3,12].includes(c)&&s)&&a&&u):!c&&0!==c||!s||!a||!u)}},{key:"renderGoods",value:function(){var t=this,e=this.store,r=e.styleConfig.Item,n=e.$list,o=e.getLog,i=e.templateStore,c=(0,A.VD)(i),a=c.width,u=c.height;return n.map((function(e,n){var i=Pt(Pt({},o(H.SOLD_OUT_IMG)),{},{index:n}),c=(0,vt.sl)({index:n,goodsItem:e,componentStore:t.store,pageElSnIndex:H.GOODS,goodsTrackInfo:{}}),s={index:t.store.goodsConfig.findIndex((function(t){return t.goodsId===e.goodsId})),model:e,componentStore:t.store,trackingInfo:c,onItemClick:function(){return t.trackForward(e.linkUrl,c)}};return t.needShowItem(e)&&(t.needShowSoldOutImg(e)?S().createElement(w.Z,{trackingInfo:i,key:n},S().createElement(wt.ZP,{className:ht().soldOutImg,backgroundImage:e.soldOutImg,style:{width:a,height:u}})):S().createElement(w.Z,{trackingInfo:c,key:n},S().createElement(r,s)))||null}))}},{key:"render",value:function(){var t=this.store,e=t.showCmpt,r=t.topBannerStore,n=t.getLog,o=t.templateStore;return e&&S().createElement("div",{id:this.componentId,style:this.UIStore.style},S().createElement("div",{className:ht().wrapper},S().createElement(bt.Z,{store:this.rootStore,componentStore:r,trackingInfo:n(H.TOP_BANNER)}),S().createElement("div",{className:kt()(ht().contentWrapper,i()({},ht().template,!(0,A.NS)(o))),style:{backgroundColor:this.UIStore.innerBgColor}},S().createElement(Ct.k,null,this.renderGoods()))))||null}}]),o}(_.Z),ft.Store=mt,ft.SkeletonComponent=It,lt=yt))||lt)||lt)||lt},IZoM:function(t,e,r){"use strict";r.d(e,{Z:function(){return v}});var n,o=r("U5BY"),i=r.n(o),c=r("hwDT"),a=r.n(c),u=r("f6/u"),s=r.n(u),p=r("f17R"),l=r.n(p),f=r("Vl5s"),y=r.n(f),m=r("9bdW"),g=r.n(m),d=r("KdYu"),O=r("xnpn"),h=r("902E");function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var v=(0,d.observer)(n=function(t){s()(n,t);var e,r=(e=n,function(){var t,r=y()(e);if(b()){var n=y()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return l()(this,t)});function n(){return i()(this,n),r.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var t,e=this.props,r=e.onItemClick,n=e.index,o=(this.store||{}).templateStore;return g().createElement(O.Z,{eventHandler:{onClick:r},index:n,id:n,data:this.model,json:(null===(t=this.props.templateStore)||void 0===t?void 0:t.template)||o.template})}}]),n}(h.Z))||n},u8Dtt:function(t,e,r){var n=r("Q/4B"),o=r("DDs0"),i="string"==typeof n?[[t.id,n,""]]:n;(e=t.exports=n.locals||{})._getContent=function(){return i},e._getCss=function(){return""+n},e._insertCss=function(t){return o(i,t)}},"Q/4B":function(t,e,r){(e=t.exports=r("Cgg2")(!1)).push([t.id,"._1EFdO5bp{width:3.57rem;margin:0 auto}._3lvoiBAf{width:3.57rem;margin-top:.03rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;justify-content:space-evenly}._30lUAQRm{background-repeat:no-repeat;background-size:100% 100%}._2ez1Cqkk>div,._2OrFlli8{margin-bottom:.03rem!important}",""]),e.locals={wrapper:"_1EFdO5bp",contentWrapper:"_3lvoiBAf",soldOutImg:"_30lUAQRm",template:"_2ez1Cqkk",marginBottom:"_2OrFlli8"}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/assets/js/mobile-dc/DcNewGoodsLimit-d062030067087faa5b63.js.map