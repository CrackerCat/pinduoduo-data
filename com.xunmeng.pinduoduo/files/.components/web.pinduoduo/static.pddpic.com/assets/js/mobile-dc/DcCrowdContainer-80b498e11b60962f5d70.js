(self.webpackChunk_name_mobile_dc=self.webpackChunk_name_mobile_dc||[]).push([["3100"],{"/liQ":function(t,e,r){"use strict";function n(t){return null==t}r.d(e,{Z:function(){return n}})},P7WB:function(t,e,r){"use strict";var n=r("AIhP"),o=r.n(n),i=r("sdwB"),u=r.n(i),s=r("9bdW"),c=r.n(s),a=r("Bc86"),l=["list","rootStore"];e.Z=function(t){var e=t.list,r=t.rootStore,n=u()(t,l);return c().createElement(c().Fragment,null,e.map((function(t,e){return c().createElement(a.Z,o()({key:t.componentId,item:t,index:e,rootStore:r},n))})))}},L2mO:function(t,e,r){"use strict";r.d(e,{s:function(){return n}});r("UK90");var n=function(t,e){}},rSUX:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return et}});var n,o,i,u,s=r("xeO4"),c=r.n(s),a=r("U5BY"),l=r.n(a),p=r("hwDT"),h=r.n(p),f=r("f6/u"),d=r.n(f),y=r("f17R"),m=r.n(y),v=r("Vl5s"),g=r.n(v),k=r("T6n4"),I=r.n(k),b=r("9bdW"),C=r.n(b),w=r("KdYu"),x=r("iuwq"),S=r("iQtE"),R=r.n(S),E=r("0Qln"),P=r.n(E),O=r("i/Q6"),q=r.n(O),M=r("iWIM"),U=r.n(M),B=r("jXLS"),D=r.n(B),L=(r("XC3m"),r("UK90")),j=r("NP/l"),Z=r("FrRG"),_=r("K63m"),A={peopleId:[],childrenIds:[]},z=new _.Z({alias:"BACKUP",text:"人群兜底功能",value:0},{alias:"SORT",text:"人群排序功能",value:1}),K=["DcBottomBar"],Q=r("/liQ"),T=r("4Ox8"),W=r("DQkW"),H=r("9vur"),G=(r("zqxM"),r("L2mO"));function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var $,F,Y,N=(n=function(t){d()(a,t);var e,r,n,s=(e=a,function(){var t,r=g()(e);if(X()){var n=g()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return m()(this,t)});function a(){var t;l()(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=s.call.apply(s,[this].concat(r)),P()(t,"comConfig",o,q()(t)),P()(t,"useMode",i,q()(t)),P()(t,"$showChildIds",u,q()(t)),t}return h()(a,[{key:"isBackupMode",get:function(){return this.useMode===z.BACKUP}},{key:"firstLoadChildren",get:function(){return this.children}},{key:"firstRequestChildren",get:function(){var t=this;return this.rootStore.isEditor?this.children:this.displayChildren.filter((function(e){return t.rootStore.shouldImport(e)}))}},{key:"displayChildrenIds",get:function(){return this.rootStore.isEditor?this.comConfig[0].childrenIds:this.$showChildIds}},{key:"backUpChildrenIds",get:function(){var t=this.rootStore.componentMap;return this.comConfig[0].childrenIds.filter((function(e){return!!t[e]}))}},{key:"needRefresh",get:function(){return this.displayChildren.some((function(t){return K.includes(t.key)}))}},{key:"changeIds",value:function(t){var e=this;(0,L.runInAction)((function(){e.$showChildIds=t,e.needRefresh}))}},{key:"otherUserGroupsId",value:function(){var t=this,e=[];return e=this.rootStore.firstLayer.filter((function(e){return e.key===t.key&&e.requestIn===W.Q.FIRSTSCREEN&&e.componentId!==t.componentId})).map((function(t){var e=t.store.comConfig.filter((function(t){return t.peopleId.length}));return(0,T.xH)(e.map((function(t){return t.peopleId})))})),e=(0,T.xH)(e)}},{key:"handleShowIds",value:(n=c()(I().mark((function t(e,r){var n,o,i,u,s,c,a,l,p,h;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.rootStore.userHasLogin()){t.next=4;break}return this.changeIds(e),t.abrupt("return");case 4:return o=this.comConfig.filter((function(t){return t.peopleId.length})),i=(0,T.xH)(o.map((function(t){return t.peopleId}))),u=this.otherUserGroupsId(),t.next=9,Promise.race([(0,Z.Cl)({user_group_ids:R()(new Set([].concat(R()(i),R()(u))))},this.requestParams,{forceUpdate:r}),(0,H._)(6e3).then((function(){return Promise.reject(new Error("user-group timeout: ".concat(6e3)))}))]);case 9:if(s=t.sent,null!=(c=null==s||null===(n=s.result)||void 0===n?void 0:n.filter((function(t){return!(0,Q.Z)(t)&&i.includes(String(t))})))&&c.length){t.next=14;break}return this.changeIds(e),t.abrupt("return");case 14:a=i.find((function(t){return c.includes(+t)}))+"",l=(0,T.xH)(o.filter((function(t){return t.peopleId.includes(a)})).map((function(t){return t.childrenIds}))),p=this.rootStore.componentMap,h=(null==l?void 0:l.filter((function(t){return!!p[t]})))||[],this.changeIds(null!=h&&h.length?h:e),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(0),this.changeIds(e),this.logError(t.t0);case 25:case"end":return t.stop()}}),t,this,[[0,21]])}))),function(t,e){return n.apply(this,arguments)})},{key:"setChildrenRequestIn",value:function(){}},{key:"request",value:(r=c()(I().mark((function t(e){var r,n,o,i=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]&&i[1],!this.rootStore.isEditor){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,o=this.isBackupMode?this.backUpChildrenIds:[],t.next=7,this.handleShowIds(o,r);case 7:return this.setChildrenRequestIn(),t.next=10,U()(g()(a.prototype),"request",this).call(this,e);case 10:if(!this.isBackupMode||null!==(n=this.displayChildren)&&void 0!==n&&n.length){t.next=12;break}throw new Error("人群容器兜底失败");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),this.logError(t.t0);case 17:case"end":return t.stop()}}),t,this,[[3,14]])}))),function(t){return r.apply(this,arguments)})}]),a}(j.Z),o=D()(n.prototype,"comConfig",[G.s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[A]}}),i=D()(n.prototype,"useMode",[G.s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.BACKUP}}),u=D()(n.prototype,"$showChildIds",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D()(n.prototype,"isBackupMode",[L.computed],Object.getOwnPropertyDescriptor(n.prototype,"isBackupMode"),n.prototype),D()(n.prototype,"firstLoadChildren",[L.computed],Object.getOwnPropertyDescriptor(n.prototype,"firstLoadChildren"),n.prototype),D()(n.prototype,"firstRequestChildren",[L.computed],Object.getOwnPropertyDescriptor(n.prototype,"firstRequestChildren"),n.prototype),D()(n.prototype,"displayChildrenIds",[L.computed],Object.getOwnPropertyDescriptor(n.prototype,"displayChildrenIds"),n.prototype),D()(n.prototype,"backUpChildrenIds",[L.computed],Object.getOwnPropertyDescriptor(n.prototype,"backUpChildrenIds"),n.prototype),D()(n.prototype,"needRefresh",[L.computed],Object.getOwnPropertyDescriptor(n.prototype,"needRefresh"),n.prototype),n),V=r("P7WB"),J=r("iOT4");function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var et=(0,w.inject)("store")($=(0,w.observer)((Y=F=function(t){d()(o,t);var e,r,n=(e=o,function(){var t,r=g()(e);if(tt()){var n=g()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return m()(this,t)});function o(){return l()(this,o),n.apply(this,arguments)}return h()(o,[{key:"componentDidMount",value:(r=c()(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.store.needRefresh){t.next=4;break}return t.next=3,(0,J.hE)(this.refreshStatus.bind(this));case 3:this.removeReturnCallback=t.sent;case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var t;null===(t=this.removeReturnCallback)||void 0===t||t.call(this)}},{key:"refreshStatus",value:function(){this.store.request(this.rootStore.requestParams,!0)}},{key:"render",value:function(){var t=this.store,e=t.displayChildren,r=t.children;return(e.length>0||!!this.rootStore.isEditor)&&C().createElement("div",{id:this.store.componentId},C().createElement(V.Z,{list:this.rootStore.isEditor?r:e,rootStore:this.rootStore}))}}]),o}(x.Z),F.Store=N,$=Y))||$)||$},LqpT:function(t,e,r){var n=r("1hJj"),o=r("jbM+"),i=r("Xt/L"),u=r("eUgh"),s=r("sEf8"),c=r("xYSL");t.exports=function(t,e,r,a){var l=-1,p=o,h=!0,f=t.length,d=[],y=e.length;if(!f)return d;r&&(e=u(e,s(r))),a?(p=i,h=!1):e.length>=200&&(p=c,h=!1,e=new n(e));t:for(;++l<f;){var m=t[l],v=null==r?m:r(m);if(m=a||0!==m?m:0,h&&v==v){for(var g=y;g--;)if(e[g]===v)continue t;d.push(m)}else p(e,v,a)||d.push(m)}return d}},EA7m:function(t,e,r){var n=r("zZ0H"),o=r("Ioao"),i=r("wclG");t.exports=function(t,e){return i(o(t,e,n),t+"")}},zqxM:function(t,e,r){var n=r("LqpT"),o=r("XGnz"),i=r("EA7m"),u=r("3L66"),s=i((function(t,e){return u(t)?n(t,o(e,1,u,!0)):[]}));t.exports=s},"3L66":function(t,e,r){var n=r("MMmD"),o=r("Vslq");t.exports=function(t){return o(t)&&n(t)}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/assets/js/mobile-dc/DcCrowdContainer-80b498e11b60962f5d70.js.map