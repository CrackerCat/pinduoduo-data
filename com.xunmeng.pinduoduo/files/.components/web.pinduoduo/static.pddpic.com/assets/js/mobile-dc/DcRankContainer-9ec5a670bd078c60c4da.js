(self.webpackChunk_name_mobile_dc=self.webpackChunk_name_mobile_dc||[]).push([["2c77"],{P7WB:function(t,e,n){"use strict";var r=n("AIhP"),o=n.n(r),i=n("sdwB"),s=n.n(i),u=n("9bdW"),a=n.n(u),c=n("Bc86"),l=["list","rootStore"];e.Z=function(t){var e=t.list,n=t.rootStore,r=s()(t,l);return a().createElement(a().Fragment,null,e.map((function(t,e){return a().createElement(c.Z,o()({key:t.componentId,item:t,index:e,rootStore:n},r))})))}},"925e":function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var r,o,i,s=n("AIhP"),u=n.n(s),a=n("U5BY"),c=n.n(a),l=n("hwDT"),p=n.n(l),h=n("f6/u"),f=n.n(h),d=n("f17R"),v=n.n(d),g=n("Vl5s"),y=n.n(g),m=n("9bdW"),b=n.n(m),_=n("KdYu"),w=n("iuwq"),C=n("RAN8"),I=n("P7WB"),k=n("zX+9"),R=n.n(k),A=n("ukrc"),S=n.n(A),E=n("VCAa"),O=["DcIcon"],x=S()(R())((function(t){var e=t.store,n=e.showComponentLength,r=e.rootStore,o=e.childrenIds,i=o.slice(0,n),s=o.filter((function(t){return r.componentMap[t]&&!O.includes(r.componentMap[t].key)})).map((function(t){return r.componentMap[t].key}));return Array.from(new Set(s)).length>1?b().createElement("div",{id:e.componentId,style:{height:(0,E.Q1)(e.height)}}):b().createElement("div",{id:e.componentId,style:e.UIStore.style},i.map((function(t,e){var n,o=r.componentMap[t]||{},i=o.store,s=o.key,u=r.widgetsMap[s],a=null==u||null===(n=u.CurrentWidget)||void 0===n?void 0:n.SkeletonComponent;return a?b().createElement(a,{key:e,store:i}):b().createElement("div",{key:e})})))}));function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var D=S()(R())(r=(0,_.inject)("store")(r=(0,_.observer)((i=o=function(t){f()(r,t);var e,n=(e=r,function(){var t,n=y()(e);if(T()){var r=y()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return v()(this,t)});function r(){var t;c()(this,r);for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))).getWidgets=function(){var e=t.store.useRankTag,n=t.rootStore.isEditor?t.store.children:t.store.displayChildren,r={useRankTag:e};return b().createElement(I.Z,u()({list:n,rootStore:t.rootStore},r))},t.refreshTab=function(){var e=t.rootStore.list.find((function(t){return t.key.includes("WholeNav")}));e&&e.store.refreshTab&&e.store.refreshTab()},t}return p()(r,[{key:"componentDidMount",value:function(){this.refreshTab()}},{key:"render",value:function(){var t=this.store.componentId;return b().createElement("div",{id:t},this.getWidgets())}}]),r}(w.Z),o.SkeletonComponent=x,r=i))||r)||r)||r;D.Store=C.Z;var P=D},RAN8:function(t,e,n){"use strict";n.d(e,{Z:function(){return rt}});var r,o,i=n("xeO4"),s=n.n(i),u=n("0Qln"),a=n.n(u),c=n("U5BY"),l=n.n(c),p=n("hwDT"),h=n.n(p),f=n("i/Q6"),d=n.n(f),v=n("iWIM"),g=n.n(v),y=n("f6/u"),m=n.n(y),b=n("f17R"),_=n.n(b),w=n("Vl5s"),C=n.n(w),I=n("jXLS"),k=n.n(I),R=(n("XC3m"),n("T6n4")),A=n.n(R),S=n("UK90"),E=n("NP/l"),O=n("DQkW"),x=n("/4JS"),T=n.n(x),D=n("K63m"),P=n("Skb2"),L=n("V5cf");function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){T()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var q=new D.Z({alias:"RECOMMEND",text:"个性化排序",value:0},{alias:"GMV_RACING",text:"商品池gmv赛马",value:1},{text:"页面赛马",alias:"PAGE_RACING",value:2},{text:"商品池销量赛马",alias:"SALES_RACING",value:3}),j=new D.Z({text:"页面UV价值赛马",alias:"UV",value:0},{text:"gmv+uv价值-规则1",alias:"AVE_1",value:1},{text:"点击转化+支付转化-规则2",alias:"AVE_2",value:2},{text:"gmv+点击转化+uv价值-规则3",alias:"AVE_3",value:3}),G=new D.Z({text:"小时级数据",alias:"HOUR_DATA",value:0},{text:"天级数据",alias:"DAYS_DATA",value:1}),V=(r={},T()(r,j.UV,"uv_val"),T()(r,j.AVE_1,"custom_weight_1"),T()(r,j.AVE_2,"custom_weight_2"),T()(r,j.AVE_3,"custom_weight_3"),r);function z(t){return{group_id:this.group_id,list_id:t.listId,page_no:1,page_size:this.rootStore.isEditor?Math.max(40,this.componentBlockLength||0):this.showComponentLength,show_main_tab:!1}}var Z=(o={},T()(o,q.RECOMMEND,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.requestParams,n=z.call(this,e),r=N(N({group:L.G_.CAT_MAIN_CONTENT},t),n);return(0,P.$Z)(r,e)})),T()(o,q.GMV_RACING,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.requestParams,n=z.call(this,e),r=N(N({group:L.G_.SUB_TAB_RACING,goods_count:0},t),n);return(0,P.$Z)(r,e)})),T()(o,q.PAGE_RACING,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.requestParams,n=z.call(this,e),r=N(N({group:L.G_.CAT_SUB_CONTENT_TAB_RACING,goods_count:0,resort_type:V[this.horse_type]},t),n);return(0,P.$Z)(r,e)})),T()(o,q.SALES_RACING,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.requestParams,n=z.call(this,e),r=N(N(N({group:L.G_.TAB_RACING_INNER,goods_count:0},t),n),{},{extra_param:{sort_rule:this.time_type===G.HOUR_DATA?1:2}});return(0,P.$Z)(r,e)})),o);var U,B,W,$,H,X,Q,F,Y,J=n("zqxM"),K=n.n(J);function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var et="FirstScreenSeparator",nt=(U=function(t){m()(i,t);var e,n,r,o=(e=i,function(){var t,n=C()(e);if(tt()){var r=C()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _()(this,t)});function i(){var t;l()(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=o.call.apply(o,[this].concat(n)),a()(t,"config",B,d()(t)),a()(t,"group_id",W,d()(t)),a()(t,"showComponentLength",$,d()(t)),a()(t,"$showChildIds",H,d()(t)),a()(t,"sortingMethod",X,d()(t)),a()(t,"horse_type",Q,d()(t)),a()(t,"time_type",F,d()(t)),a()(t,"useRankTag",Y,d()(t)),t}return h()(i,[{key:"firstLoadChildren",get:function(){return this.children}},{key:"displayChildrenIds",get:function(){return this.rootStore.isEditor?this.childrenIds.slice(0,this.showComponentLength):this.$showChildIds}},{key:"firstRequestChildren",get:function(){var t=this,e=this.rootStore.requestContext.queries,n=e.component_id,r=e.is_back,o=-1;if(r&&n&&this.displayChildrenIds.includes(n)&&(o=this.displayChildrenIds.findIndex((function(t){return t===n}))),-1!==o)return this.displayChildren.filter((function(t,e){return e<=o}));var i=this.rootStore.list.filter((function(e){return e.key===et||t.childrenIds.includes(e.componentId)})).findIndex((function(t){return t.key===et}));return i>0?this.displayChildren.slice(0,i):[]}},{key:"wrapperRankInList",get:function(){var t=this;return this.rootStore.list.findIndex((function(e){return e.componentId===t.componentId}))}},{key:"request",value:(r=s()(A().mark((function t(){var e=this;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.promotTabHook();case 3:return this.displayChildren.forEach((function(t,n){(0,S.runInAction)((function(){t.store.$useFold=!!(e.showTabLength&&e.showTabLength<n+1),t.store.height=t.store.$useFold&&t.store.foldedHeight||t.store.height,e.rootStore.isEditor||(t.requestIn=e.firstRequestChildren.some((function(e){return e.componentId===t.componentId}))?O.Q.FIRSTSCREEN:O.Q.EXPOSURE,t.store.comRank=e.wrapperRankInList+n+1)}))})),t.abrupt("return",g()(C()(i.prototype),"request",this).call(this));case 7:t.prev=7,t.t0=t.catch(0),this.logError(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return r.apply(this,arguments)})},{key:"getRequestApi",value:function(){return t=this.sortingMethod,Z[t];var t}},{key:"dealTabData",value:function(t){return t}},{key:"getStickyParams",value:function(){var t,e=null===(t=this.config.find((function(t){return t.isSticky})))||void 0===t?void 0:t.id;return e?this.sortingMethod===q.RECOMMEND?{location_lock:"1",list_token:e}:{top_tab_id:e}:{}}},{key:"validateRes",value:function(t){var e,n=function(t){return t.map((function(t){return t.id}))},r=n(this.config),o=n(t);(null===(e=K()(o,r))||void 0===e?void 0:e.length)>0&&this.logError("返回异常，groupId配置发生变化，编辑页配置：".concat(r,"，展示页配置：").concat(o))}},{key:"promotTabHook",value:(n=s()(A().mark((function t(){var e,n,r,o,i,s,u=this;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.getStickyParams(),t.next=4,this.getRequestApi().call(this,r);case 4:o=t.sent,i=(null===(n=o.content_list)||void 0===n?void 0:n.map((function(t){return{id:t.content_id,name:t.content_name}})))||[],this.validateRes(i),s=this.dealTabData(i),e=s.slice(0,this.showComponentLength||20).map((function(t){return((0,S.toJS)(u.config).find((function(e){return+e.id==+t.id}))||{}).childrenIds||[]})).reduce((function(t,e){return t.concat(e)}),[]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e=(0,S.toJS)(this.config).slice(0,this.showComponentLength||20).reduce((function(t,e){return t.concat(e.childrenIds)}),[]);case 14:(0,S.runInAction)((function(){u.$showChildIds=e}));case 15:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return n.apply(this,arguments)})}]),i}(E.Z),B=k()(U.prototype,"config",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=k()(U.prototype,"group_id",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=k()(U.prototype,"showComponentLength",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=k()(U.prototype,"$showChildIds",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=k()(U.prototype,"sortingMethod",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Q=k()(U.prototype,"horse_type",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=k()(U.prototype,"time_type",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.HOUR_DATA}}),Y=k()(U.prototype,"useRankTag",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k()(U.prototype,"firstLoadChildren",[S.computed],Object.getOwnPropertyDescriptor(U.prototype,"firstLoadChildren"),U.prototype),k()(U.prototype,"displayChildrenIds",[S.computed],Object.getOwnPropertyDescriptor(U.prototype,"displayChildrenIds"),U.prototype),k()(U.prototype,"firstRequestChildren",[S.computed],Object.getOwnPropertyDescriptor(U.prototype,"firstRequestChildren"),U.prototype),k()(U.prototype,"wrapperRankInList",[S.computed],Object.getOwnPropertyDescriptor(U.prototype,"wrapperRankInList"),U.prototype),U),rt=nt},"zX+9":function(t,e,n){var r=n("yLdu"),o=n("DDs0"),i="string"==typeof r?[[t.id,r,""]]:r;(e=t.exports=r.locals||{})._getContent=function(){return i},e._getCss=function(){return""+r},e._insertCss=function(t){return o(i,t)}},yLdu:function(t,e,n){(e=t.exports=n("Cgg2")(!1)).push([t.id,"._2n8032ef{position:absolute;width:0;height:0;pointer-events:none}",""]),e.locals={hashPoint:"_2n8032ef"}},LqpT:function(t,e,n){var r=n("1hJj"),o=n("jbM+"),i=n("Xt/L"),s=n("eUgh"),u=n("sEf8"),a=n("xYSL");t.exports=function(t,e,n,c){var l=-1,p=o,h=!0,f=t.length,d=[],v=e.length;if(!f)return d;n&&(e=s(e,u(n))),c?(p=i,h=!1):e.length>=200&&(p=a,h=!1,e=new r(e));t:for(;++l<f;){var g=t[l],y=null==n?g:n(g);if(g=c||0!==g?g:0,h&&y==y){for(var m=v;m--;)if(e[m]===y)continue t;d.push(g)}else p(e,y,c)||d.push(g)}return d}},EA7m:function(t,e,n){var r=n("zZ0H"),o=n("Ioao"),i=n("wclG");t.exports=function(t,e){return i(o(t,e,r),t+"")}},zqxM:function(t,e,n){var r=n("LqpT"),o=n("XGnz"),i=n("EA7m"),s=n("3L66"),u=i((function(t,e){return s(t)?r(t,o(e,1,s,!0)):[]}));t.exports=u},"3L66":function(t,e,n){var r=n("MMmD"),o=n("Vslq");t.exports=function(t){return o(t)&&r(t)}}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/assets/js/mobile-dc/DcRankContainer-9ec5a670bd078c60c4da.js.map