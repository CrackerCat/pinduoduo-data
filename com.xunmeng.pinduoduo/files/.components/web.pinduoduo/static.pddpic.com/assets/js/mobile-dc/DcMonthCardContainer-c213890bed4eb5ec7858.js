(self.webpackChunk_name_mobile_dc=self.webpackChunk_name_mobile_dc||[]).push([["b2ae"],{P7WB:function(t,e,r){"use strict";var n=r("AIhP"),o=r.n(n),i=r("sdwB"),c=r.n(i),u=r("9bdW"),a=r.n(u),s=r("Bc86"),p=["list","rootStore"];e.Z=function(t){var e=t.list,r=t.rootStore,n=c()(t,p);return a().createElement(a().Fragment,null,e.map((function(t,e){return a().createElement(s.Z,o()({key:t.componentId,item:t,index:e,rootStore:r},n))})))}},"9oNc":function(t,e,r){"use strict";r.d(e,{SG:function(){return l},Qq:function(){return f},bj:function(){return d}});var n=r("/4JS"),o=r.n(n),i=r("xeO4"),c=r.n(i),u=r("T6n4"),a=r.n(u);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l=function(){var t=c()(a().mark((function t(e,r){var n,o,i=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},t.next=3,r.axios.get("api/wizard/month/broker/promotion/entry",p({params:e,defaultErrorHandler:function(){}},n));case 3:if(o=t.sent){t.next=6;break}throw new Error("月卡底部信息条返回错误");case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),f=function(){var t=c()(a().mark((function t(e,r){var n,o,i=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},t.next=3,r.axios.get("api/wizard/month/broker/promotion/dec",p({params:e,defaultErrorHandler:function(){}},n));case 3:if(o=t.sent){t.next=6;break}throw new Error("月卡免单进度条返回错误");case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),d=function(){var t=c()(a().mark((function t(e,r){var n,o,i=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},t.next=3,r.axios.get("api/wizard/jaina/promotion/coupon",p({params:e,useNativeAntiToken:!0,defaultErrorHandler:function(){}},n));case 3:if((o=t.sent)&&null!=o&&o.coupon_id){t.next=6;break}throw new Error("月卡底部信息条领取大额券失败");case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},L2mO:function(t,e,r){"use strict";r.d(e,{s:function(){return n}});r("UK90");var n=function(t,e){}},ckLE:function(t,e,r){"use strict";r.d(e,{vb:function(){return u},li:function(){return a},pZ:function(){return s},x1:function(){return p},Qi:function(){return l},cJ:function(){return f}});var n,o=r("/4JS"),i=r.n(o),c=r("D+Sb"),u=(0,c.u)([{name:"BOTTOM_BAR",text:"吸底条组件",value:0},{name:"BOTTON_JUMP",text:"点击跳转",value:1},{name:"BOTTON_COUPON",text:"点击领券",value:2}]),a=(0,c.u)([{name:"JUMP_URL",text:"点击跳转",value:0},{name:"TAKE_TICKET",text:"点击领券",value:1}]),s=(n={},i()(n,a.JUMP_URL,u.BOTTON_JUMP),i()(n,a.TAKE_TICKET,u.BOTTON_COUPON),n),p=(0,c.u)([{text:"吸底",name:"FIXED_BOTTOM",value:1,img:"https://promotion.pddpic.com/promo/promo/a776c210-1bbe-4f40-9193-2eb11f4751d9.png"},{text:"楼层",name:"NO_FIXED",value:2,img:"https://promotion.pddpic.com/promo/promo/94ff41ca-8513-49a9-9c1e-db2e52f6fede.png.slim.png"}]),l="https://promotion.pddpic.com/promo/promo/03a18985-bd63-4219-82e2-a4667bd35aa5.png.slim.png",f=(0,c.u)([{name:"TEXT",text:"文字模式",value:0},{name:"IMAGE",text:"图片模式",value:1}])},"+Y31":function(t,e,r){"use strict";r.d(e,{ti:function(){return i},Fw:function(){return c},M3:function(){return a},RS:function(){return s},g5:function(){return p},SU:function(){return l}});var n=r("ckLE"),o=r("D+Sb"),i={NOT_LOGIN:0,RISK_USER:1,NEED_BUY:2,HAS_BUY:3,HAS_GOT:4,HAS_USED:5,CLOSED:6,ERROR:7},c={NOT_GET:0,HAS_GOT:1,HAS_USED:2},u=(0,o.u)([{name:"NORMAL_COUPON",text:"普通全场优惠券",value:0},{name:"OPT_COUPON",text:"类目优惠券",value:1},{name:"PART_USABLE_COUPON",text:"部分商品可用优惠券",value:2},{name:"UTHER_COUPON",text:"大额券",value:3},{name:"HUGE_PRICE",text:"剔除部分类目全场通用大额满减券",value:4}]),a=[0,1,2,3,4],s=(0,o.u)([{name:"NOT_BUY",text:"未开通月卡露出组件",value:5},{name:"NO_COUPON",text:"已开通（未领券）",value:6},{name:"HAS_COUPON",text:"已开通（已领券）",value:7}]),p=s.items().map((function(t){return{childrenType:t.value,nickName:t.text,clickMode:t.value===s.NO_COUPON?n.li.TAKE_TICKET:n.li.JUMP_URL,childrenIds:[]}})),l=[u.OPT_COUPON]},EAED:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return it}});var n,o,i,c,u,a,s,p,l=r("xeO4"),f=r.n(l),d=r("U5BY"),h=r.n(d),m=r("hwDT"),O=r.n(m),v=r("f6/u"),y=r.n(v),b=r("f17R"),S=r.n(b),g=r("Vl5s"),_=r.n(g),w=r("T6n4"),C=r.n(w),E=r("9bdW"),x=r.n(E),k=r("KdYu"),P=r("iuwq"),T=r("iQtE"),I=r.n(T),R=r("/4JS"),U=r.n(R),A=r("0Qln"),N=r.n(A),j=r("i/Q6"),D=r.n(j),B=r("iWIM"),$=r.n(B),H=r("jXLS"),L=r.n(H),M=(r("XC3m"),r("UK90")),G=r("NP/l"),Y=r("9oNc"),q=r("+Y31"),K=r("L8Fz"),z=r("/18x"),F=r("4k0V"),J=r("L2mO");function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){U()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var X,V,tt,et=(n=M.action.bound,o=M.action.bound,i=function(t){y()(l,t);var e,r,n,o,i=(e=l,function(){var t,r=_()(e);if(Q()){var n=_()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return S()(this,t)});function l(){var t;h()(this,l);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=i.call.apply(i,[this].concat(r)),N()(t,"comConfig",c,D()(t)),N()(t,"$showChildIds",u,D()(t)),N()(t,"$couponInfo",a,D()(t)),N()(t,"$cardStatus",s,D()(t)),N()(t,"showAnimation",p,D()(t)),t.selfBtnTxt=function(t){return t.btnTxt||"立即领取"},t.selfBarTxt=function(e){var r=D()(t),n=r.$couponInfo,o=r.$cardStatus,i=e.barTxt,c=n||{},u=c.min_amount,a=c.discount,s=c.coupon_cat,p=void 0===s?"":s,l=c.coupon_desc,f=l||(u&&a?"满".concat((0,F.priceCent)(u),"减").concat((0,F.priceCent)(a)):""),d=i||"去领取";return o===q.ti.NEED_BUY?d=i:o!==q.ti.HAS_BUY&&o!==q.ti.HAS_GOT||(d="".concat(f," ").concat(e.isFloorLayer?"":i)),t.isCategoryCoupon&&!l&&(d=p+d),d},t}return O()(l,[{key:"firstLoadChildren",get:function(){return this.children}},{key:"firstRequestChildren",get:function(){var t=this;return this.rootStore.isEditor?this.children:this.displayChildren.filter((function(e){return t.rootStore.shouldImport(e)}))}},{key:"displayChildrenIds",get:function(){return this.rootStore.isEditor?this.childrenIds:this.$showChildIds}},{key:"isCategoryCoupon",get:function(){var t,e;return q.SU.includes(null===(t=this.$couponInfo)||void 0===t?void 0:t.promotion_coupon_type)||!(null===(e=this.$couponInfo)||void 0===e||!e.jump_url)}},{key:"request",value:(o=f()(C().mark((function t(){var e=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.rootStore.isEditor){t.next=2;break}return t.abrupt("return");case 2:if(this.rootStore.userHasLogin()){t.next=5;break}return this.$cardStatus=q.ti.NOT_LOGIN,t.abrupt("return");case 5:return t.prev=5,t.next=8,this.configChildrenIds();case 8:return t.next=10,$()(_()(l.prototype),"request",this).call(this);case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),(0,M.runInAction)((function(){e.$cardStatus=q.ti.ERROR})),this.logError(t.t0);case 16:case"end":return t.stop()}}),t,this,[[5,12]])}))),function(){return o.apply(this,arguments)})},{key:"judgeStatus",value:function(t){var e,r=this.rootStore.componentMap,n=this.getCmptIds(t);return null==n||null===(e=n.filter((function(t){return!!r[t]})))||void 0===e?void 0:e.length}},{key:"getCmptIds",value:function(t){var e,r,n;return q.M3.includes(t)?null===(e=this.comConfig[t])||void 0===e?void 0:e.childrenIds:this.comConfig.length>=q.M3.length?null===(r=this.comConfig[t%q.M3.length])||void 0===r?void 0:r.childrenIds:((null===(n=this.comConfig)||void 0===n?void 0:n.find((function(e){return e.childrenType===t})))||{}).childrenIds||[]}},{key:"changeId",value:function(t){var e=this.rootStore.componentMap,r=this.getCmptIds(t);this.$showChildIds=(null==r?void 0:r.filter((function(t){return!!e[t]})))||[]}},{key:"configChildrenIds",value:(n=f()(C().mark((function t(){var e,r=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Y.SG)({carnival_id:this.rootStore.promotion_id},this.requestParams);case 3:e=t.sent,(0,M.runInAction)((function(){var t,n=e.is_card_user,o=e.need_display,i=e.discount,c=e.min_amount,u=e.coupon_status;if(o){if(!n)return r.$cardStatus=q.ti.NEED_BUY,void r.changeId(q.RS.NOT_BUY);if(r.$couponInfo=i&&c?e:null,null!==(t=r.$couponInfo)&&void 0!==t&&t.discount)if(u===q.Fw.NOT_GET)r.$cardStatus=q.ti.HAS_BUY,r.changeId(q.RS.NO_COUPON);else if(u===q.Fw.HAS_GOT)r.$cardStatus=q.ti.HAS_GOT,r.changeId(q.RS.HAS_COUPON);else{if(u!==q.Fw.HAS_USED)throw r.$cardStatus=q.ti.ERROR,new Error("月卡吸底条大额券状态返回错误");r.$cardStatus=q.ti.HAS_USED}else r.$cardStatus=q.ti.ERROR}else r.$cardStatus=q.ti.RISK_USER})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.logError(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"selfBtnClick",value:(r=f()(C().mark((function t(e,r){var n,o,i,c,u=this;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setAnimation(!1),this.$cardStatus===q.ti.HAS_BUY){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,Y.bj)({carnival_id:this.rootStore.promotion_id},this.requestParams);case 6:n=t.sent,o=n.coupon_id,i=n.discount,c=n.min_amount,(0,K.info)("领券成功～"),(0,M.runInAction)((function(){u.$cardStatus=q.ti.HAS_GOT,u.changeId(q.RS.HAS_COUPON)})),(0,z.sendClickMetrics)(Z({coupon_id:o,discount:i,min_amount:c},r)),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(3),this.logError(t.t0),(0,K.info)("网络拥挤，请稍后再试～"),(0,z.sendClickMetrics)(r);case 18:case"end":return t.stop()}}),t,this,[[3,13]])}))),function(t,e){return r.apply(this,arguments)})},{key:"setAnimation",value:function(t){this.showAnimation=t}}]),l}(G.Z),c=L()(i.prototype,"comConfig",[J.s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I()(q.g5)}}),u=L()(i.prototype,"$showChildIds",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=L()(i.prototype,"$couponInfo",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=L()(i.prototype,"$cardStatus",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.ti.NOT_LOGIN}}),p=L()(i.prototype,"showAnimation",[J.s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L()(i.prototype,"firstLoadChildren",[M.computed],Object.getOwnPropertyDescriptor(i.prototype,"firstLoadChildren"),i.prototype),L()(i.prototype,"firstRequestChildren",[M.computed],Object.getOwnPropertyDescriptor(i.prototype,"firstRequestChildren"),i.prototype),L()(i.prototype,"displayChildrenIds",[M.computed],Object.getOwnPropertyDescriptor(i.prototype,"displayChildrenIds"),i.prototype),L()(i.prototype,"request",[M.action],Object.getOwnPropertyDescriptor(i.prototype,"request"),i.prototype),L()(i.prototype,"configChildrenIds",[M.action],Object.getOwnPropertyDescriptor(i.prototype,"configChildrenIds"),i.prototype),L()(i.prototype,"selfBtnClick",[n],Object.getOwnPropertyDescriptor(i.prototype,"selfBtnClick"),i.prototype),L()(i.prototype,"setAnimation",[o],Object.getOwnPropertyDescriptor(i.prototype,"setAnimation"),i.prototype),i),rt=r("P7WB"),nt=r("iOT4");function ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var it=(0,k.inject)("store")(X=(0,k.observer)((tt=V=function(t){y()(o,t);var e,r,n=(e=o,function(){var t,r=_()(e);if(ot()){var n=_()(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return S()(this,t)});function o(){return h()(this,o),n.apply(this,arguments)}return O()(o,[{key:"componentDidMount",value:(r=f()(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,nt.hE)(this.refreshStatus.bind(this));case 2:this.removeReturnCallback=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var t;null===(t=this.removeReturnCallback)||void 0===t||t.call(this)}},{key:"refreshStatus",value:function(){this.store.setAnimation(!1),this.store.request()}},{key:"render",value:function(){var t=this.store,e=t.displayChildren,r=t.children,n=t.showAnimation;return(e.length>0||!!this.rootStore.isEditor)&&x().createElement("div",{id:this.store.componentId,style:this.style},x().createElement(rt.Z,{list:this.rootStore.isEditor?r:e,rootStore:this.rootStore,showAnimation:n}))}}]),o}(P.Z),V.Store=et,X=tt))||X)||X}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/assets/js/mobile-dc/DcMonthCardContainer-c213890bed4eb5ec7858.js.map