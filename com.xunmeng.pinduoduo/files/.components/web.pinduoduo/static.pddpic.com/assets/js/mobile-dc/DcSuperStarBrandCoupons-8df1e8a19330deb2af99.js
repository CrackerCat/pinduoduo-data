(self.webpackChunk_name_mobile_dc=self.webpackChunk_name_mobile_dc||[]).push([["b6b6"],{"5YyN":function(e,t,n){"use strict";n.d(t,{v:function(){return f}});var r=n("4mj9"),i=n("L8Fz"),o=n("X3Or"),a=n("CLTR"),c=n("9vur"),u=n("huFl"),s=/^\/editor.*(\.html)?$/;function l(){return"undefined"!=typeof window&&s.test(location.pathname)}var f=(0,u.n7)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.sl,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(a){return function(){if(!l()){if((0,r.getUserInfoSync)().accessToken||(0,r.getUserInfoSync)().uid)return a.apply(this,arguments);e&&(0,i.info)(e),(0,c._)(n).then((function(){return(0,r.login)()})).then((function(){return(0,o.Z)(t)&&t()}))}}}}))},axbV:function(e,t,n){"use strict";n.d(t,{re:function(){return a},nE:function(){return c},Sk:function(){return u},gL:function(){return s}});var r=n("m8Qe"),i=n.n(r);function o(e){return e.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()}))}function a(e,t,n){for(var r in t=t||{},n=n||[],e)e.hasOwnProperty(r)&&("object"===i()(e[r])&&null!==e[r]&&-1===n.indexOf(r)?t[o(r)]=a(e[r],Array.isArray(e[r])?[]:{},n):t[o(r)]=e[r]);return t}var c=function(e,t){return e.length>t?e.slice(0,t)+"...":e},u=function(e,t){return e.startsWith(t)?e:t+e},s=function(e,t){return e.startsWith(t)?e.slice(t.length):e}},ilWt:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ce}});var r,i,o=n("U5BY"),a=n.n(o),c=n("hwDT"),u=n.n(c),s=n("f6/u"),l=n.n(s),f=n("f17R"),d=n.n(f),p=n("Vl5s"),m=n.n(p),h=n("9bdW"),v=n.n(h),b=n("KdYu"),y=n("iuwq"),g=n("xeO4"),k=n.n(g),w=n("T6n4"),_=n.n(w),x=n("BFRN"),E=n("2tVT"),N=n("/4JS"),C=n.n(N),R=n("D+Sb"),S=(0,R.u)([{text:"立即领取",name:"RECEIVE",value:2},{text:"去使用",name:"TOUSE",value:3}]),T=(0,R.u)([{text:"单排",name:"SINGLE",value:1},{text:"两排",name:"DOUBLE",value:2}]),L=(r={},C()(r,S.RECEIVE,"https://promotion.pddpic.com/cart/2022-02-21/77963772-ca78-44ca-85c2-e57f0329d202_suffix.png"),C()(r,S.TOUSE,"https://promotion.pddpic.com/cart/2022-04-25/135a60c6-5d54-4450-b1b8-ef11e8d0dfb9.png.slim.png"),r),I=n("ukrc"),U=n.n(I),A=n("Jtjh"),O=n.n(A),D=n("GDNQ"),j=n("MV8a"),z=n("BqXm");function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var F,B,H,M,Z,$,q=U()(O())(i=(0,b.observer)(i=function(e){l()(r,e);var t,n=(t=r,function(){var e,n=m()(t);if(V()){var r=m()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d()(this,e)});function r(){var e;a()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).handleClick=k()(_().mark((function t(){var n,r,i,o;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.row,i=n.col,o=n.couponInfo.batchLinkUrl,(0,z.iH)(null,e.trackingInfo),!e.isReceived){t.next=6;break}D.ZP.forward(o),t.next=8;break;case 6:return t.next=8,e.store.takeCoupon(r,i);case 8:case"end":return t.stop()}}),t)}))),e}return u()(r,[{key:"store",get:function(){return this.props.componentStore}},{key:"isReceived",get:function(){return this.props.couponInfo.status===S.TOUSE}},{key:"trackingInfo",get:function(){return this.store.getLog(this.isReceived?2:1)}},{key:"render",value:function(){var e,t=this.props.couponInfo,n=t.brandName,r=t.goodsImageUrl,i=t.discountAmount,o=t.minAmount,a=t.status,c=null===(e=S.getItemByValue(a))||void 0===e?void 0:e.text,u=L[a];return v().createElement(j.Z,{trackingInfo:this.trackingInfo},v().createElement(E.ZP,{className:O().container,backgroundImage:u,onClick:this.handleClick},v().createElement("div",{className:O().content},v().createElement(x.Z,{className:O().goodsImage,src:r}),v().createElement("div",{className:O().couponInfo},v().createElement("div",{className:O().price},"￥",v().createElement("span",{className:O().discountAmount},i)),v().createElement("span",{className:O().minAmount},"满",o,"可用"),v().createElement("span",{className:O().brandName},n)),v().createElement("div",{className:O().status},c,v().createElement("i",{className:O().icon})))))}}]),r}(h.Component))||i)||i,Y=n("0Qln"),Q=n.n(Y),P=n("i/Q6"),W=n.n(P),J=n("jXLS"),G=n.n(J),X=(n("XC3m"),n("Puqe")),K=n.n(X),ee=n("JZM8"),te=n.n(ee),ne=n("kcif"),re=n.n(ne),ie=n("UK90"),oe=n("wfOt"),ae=n("L8Fz"),ce=n("4k0V"),ue=n("5YyN"),se=n("VRmg"),le=n("axbV"),fe=n("pfaS");function de(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pe,me,he,ve=function(e){return e.length?e.map((function(e){return(0,ie.extendObservable)(K()(e,"status"),te()(e,"status"))})):e},be=(F=ie.observable.shallow,B=(0,fe.Z)(2e3),H=ie.action.bound,M=function(e){l()(i,e);var t,n,r=(t=i,function(){var e,n=m()(t);if(de()){var r=m()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d()(this,e)});function i(){var e;a()(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n)))._useMockData=!0,e.editors={lineType:T.SINGLE,lineShowNum:3},Q()(e,"$chunkedList",Z,W()(e)),e.$taking=!1,Q()(e,"takeCoupon",$,W()(e)),e.getRemark=function(){return[e.nickName,"立即领取状态","去使用状态"]},e}return u()(i,[{key:"showNum",get:function(){var e=this.editors;return e.lineType*e.lineShowNum}},{key:"actualNum",get:function(){return this.$chunkedList.reduce((function(e,t){return e+(null==t?void 0:t.length)}),0)}},{key:"shouldHide",get:function(){return!this.rootStore.isEditor&&!this.rootStore.userHasLogin()}},{key:"afterInit",value:function(){this.$chunkedList=this.$chunkedList.map(ve)}},{key:"dataFormat",value:function(e){var t=e.slice(0,this.showNum).map((function(e){var t={batchSn:e.batch_sn,batchName:e.batch_name,discountAmount:(0,ce.priceCent)(e.discount_amount),minAmount:(0,ce.priceCent)(e.min_amount),batchLinkUrl:e.batch_link_url,status:e.status,goodsImageUrl:e.goods_image_url,brandName:(0,le.nE)((0,se.fz)(e.brand_name),5),brandTag:e.brand_tag};return(0,ie.extendObservable)(K()(t,"status"),te()(t,"status"))})),n=this.editors.lineType===T.SINGLE?this.editors.lineShowNum:Math.ceil((null==t?void 0:t.length)/2);return re()(t,n)}},{key:"request",value:(n=k()(_().mark((function e(){var t,n=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldHide){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.axios.post("/api/serbia/query_batch_for_big_promotion",{},{defaultErrorHandler:function(){}});case 5:if(!(t=e.sent).error_code){e.next=8;break}throw t;case 8:(0,ie.runInAction)((function(){var e=t.coupon_batches;n.$chunkedList=n.dataFormat(e)})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),(0,ae.info)((null===e.t0||void 0===e.t0?void 0:e.t0.error_toast)||"网络异常，请稍后再试哦"),this.logError(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(){return n.apply(this,arguments)})}]),i}(oe.Z),Z=G()(M.prototype,"$chunkedList",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[],[]]}}),G()(M.prototype,"showNum",[ie.computed],Object.getOwnPropertyDescriptor(M.prototype,"showNum"),M.prototype),G()(M.prototype,"actualNum",[ie.computed],Object.getOwnPropertyDescriptor(M.prototype,"actualNum"),M.prototype),$=G()(M.prototype,"takeCoupon",[B,H,ue.v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=k()(_().mark((function t(n,r){var i,o,a,c,u,s;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.$taking){t.next=3;break}return t.abrupt("return");case 3:if(e.$taking=!0,a=null===(i=e.$chunkedList)||void 0===i||null===(o=i[n])||void 0===o?void 0:o[r]){t.next=7;break}throw new Error("没有券信息");case 7:return c=a.batchSn,u=a.brandTag,t.next=10,e.axios.post("api/serbia/take_brand_coupon",{batch_sn:c,brand_tag:u},{defaultErrorHandler:function(){}});case 10:if(!(s=t.sent).error_code){t.next=13;break}throw s;case 13:(0,ie.runInAction)((function(){a.status=S.TOUSE,(0,ae.info)("领取成功")})),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),(0,ae.info)((null===t.t0||void 0===t.t0?void 0:t.t0.error_toast)||"领取失败"),e.logError(t.t0);case 20:return t.prev=20,e.$taking=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,16,20,23]])})));return function(e,n){return t.apply(this,arguments)}}()}}),M),ye=n("Gy0a"),ge=n.n(ye),ke=n("u2c9"),we=n.n(ke),_e=U()(O())((0,b.observer)((function(){return v().createElement("div",{className:we()(O().container,O().skeletonContainer)},v().createElement("div",{className:O().content},v().createElement("div",{className:O().goodsImage}),v().createElement("div",{className:O().couponInfo},v().createElement("div",{className:O().price},v().createElement("span",{className:O().discountAmount})),v().createElement("span",{className:O().minAmount}),v().createElement("span",{className:O().brandName})),v().createElement("div",{className:O().status})))}))),xe=U()(ge())((0,b.observer)((function(e){var t=e.store,n=t.editors,r=n.lineType,i=n.lineShowNum,o=t.UIStore.style,a=new Array(r).fill(new Array(i).fill(""));return v().createElement("div",{className:ge().container,style:o},v().createElement("div",{className:ge().wrap},a.map((function(e,t){return v().createElement("div",{key:t,className:ge().row},e.map((function(e,t){return v().createElement(_e,{key:t})})))}))))})));function Ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Ne="visible",Ce=U()(ge())(pe=(0,b.inject)("store")(pe=(0,b.observer)((he=me=function(e){l()(r,e);var t,n=(t=r,function(){var e,n=m()(t);if(Ee()){var r=m()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return d()(this,e)});function r(){var e;a()(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).docVisibilityChange=function(){document.visibilityState===Ne&&e.store.request()},e}return u()(r,[{key:"componentDidMount",value:function(){document.addEventListener("visibilitychange",this.docVisibilityChange)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("visibilitychange",this.docVisibilityChange)}},{key:"renderList",value:function(){var e=this;return this.store.$chunkedList.map((function(t,n){return null!=t&&t.length?v().createElement("div",{key:n,className:ge().row},t.map((function(t,r){return v().createElement(q,{key:r,row:n,col:r,couponInfo:t,componentStore:e.store})}))):null}))}},{key:"render",value:function(){return this.store.shouldHide||!this.store.actualNum?null:v().createElement("div",{className:ge().container,style:this.style},v().createElement("div",{className:ge().wrap},this.renderList()))}}]),r}(y.Z),me.Store=be,me.SkeletonComponent=xe,pe=he))||pe)||pe)||pe},Jtjh:function(e,t,n){var r=n("r/1R"),i=n("DDs0"),o="string"==typeof r?[[e.id,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return i(o,e)}},Gy0a:function(e,t,n){var r=n("RBMH"),i=n("DDs0"),o="string"==typeof r?[[e.id,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return i(o,e)}},"r/1R":function(e,t,n){(t=e.exports=n("Cgg2")(!1)).push([e.id,'.RCyiyL8A{display:inline-block;width:1.55rem;height:.62rem;padding:.03rem;margin-right:.03rem;color:#ed182c;background-size:100% 100%;background-repeat:no-repeat}.RCyiyL8A:last-child{margin-right:0}._3sF6didC{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}._3EY0ld13{width:.56rem;height:.56rem;background:#e8a6a6;border-radius:.04rem}._3D7ykn1l{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;line-height:1}._7Bcxrv2w{font-size:.14rem;font-weight:900}._1ysHkZ_9{font-size:.26rem;line-height:.24rem}._1NOUkwhU,._3-1F4HzB{font-weight:Bold}._1NOUkwhU{width:.64rem;height:.16rem;line-height:.16rem;text-align:center;color:#fff;background-size:100% 100%;background-image:url("https://promotion.pddpic.com/cart/2022-02-21/d9ba8863-f984-4831-b2f6-0d43f11c057c_suffix.png")}._2_MhFOox{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:.1rem;font-weight:500;-webkit-writing-mode:vertical-rl;writing-mode:vertical-rl}._8eT1TUYz{width:.11rem;height:.11rem;margin-top:.025rem;background-size:100% 100%;background-image:url("https://promotion.pddpic.com/cart/2022-02-21/3d5e0590-33d0-46d8-951a-c27a9b2ea8d1_suffix.png")}._3yQ3j6qV.RCyiyL8A{background-color:#fff}._3yQ3j6qV ._1NOUkwhU,._3yQ3j6qV ._2_MhFOox,._3yQ3j6qV ._3EY0ld13{background:#f3f3f3}._3yQ3j6qV ._2_MhFOox{width:.15rem}',""]),t.locals={container:"RCyiyL8A",content:"_3sF6didC",goodsImage:"_3EY0ld13",couponInfo:"_3D7ykn1l",price:"_7Bcxrv2w",discountAmount:"_1ysHkZ_9",minAmount:"_3-1F4HzB",brandName:"_1NOUkwhU",status:"_2_MhFOox",icon:"_8eT1TUYz",skeletonContainer:"_3yQ3j6qV"}},RBMH:function(e,t,n){(t=e.exports=n("Cgg2")(!1)).push([e.id,"._3JzBcdDW{overflow-x:auto;overflow-y:hidden;white-space:nowrap;-webkit-overflow-scrolling:touch}._3JzBcdDW::-webkit-scrollbar{display:none}._1z6TkuTT{display:inline-block}._1z6TkuTT>._3HYvpo6F{margin-bottom:.1rem}._1z6TkuTT>._3HYvpo6F:last-child{margin-bottom:0}",""]),t.locals={container:"_3JzBcdDW",wrap:"_1z6TkuTT",row:"_3HYvpo6F"}},kcif:function(e,t,n){var r=n("KxBF"),i=n("mv/X"),o=n("Sxd8"),a=Math.ceil,c=Math.max;e.exports=function(e,t,n){t=(n?i(e,t,n):void 0===t)?1:c(o(t),0);var u=null==e?0:e.length;if(!u||t<1)return[];for(var s=0,l=0,f=Array(a(u/t));s<u;)f[l++]=r(e,s,s+=t);return f}},ZCgT:function(e,t,n){var r=n("/dva"),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},Sxd8:function(e,t,n){var r=n("ZCgT");e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},"/dva":function(e,t,n){e.exports=n("xyHx")("tLB3")}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/assets/js/mobile-dc/DcSuperStarBrandCoupons-8df1e8a19330deb2af99.js.map