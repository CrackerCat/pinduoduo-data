(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[4],{"+qE3":function(e,t,r){"use strict";var n,a="object"==typeof Reflect?Reflect:null,i=a&&"function"==typeof a.apply?a.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var h=10;function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var a,i,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(a=u(e))>0&&s.length>a&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=s.length,function(e){console&&console.warn&&console.warn(e)}(o)}return e}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}.bind(n);return a.listener=r,n.wrapFn=a,a}function f(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"==typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):_(a,a.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");h=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,a=this._events;if(void 0!==a)n=n&&void 0===a.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var h=a[e];if(void 0===h)return!1;if("function"==typeof h)i(h,this,t);else{var u=h.length,c=_(h,u);for(r=0;r<u;++r)i(c[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,a,i,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"/bZk":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("lwsE"),a=r.n(n),i={DEFAULT:0,SHARE_PARAMS_NOT_VALID:1,SHARE_TYPE_DISABLED:2,SHARE_TYPE_NOT_FOUND:3,SHARE_ACTION_DISABLE:4,SHARE_STATUS_ILLEGAL:5,SHARE_NOT_SUPPORTED:6,SHARE_LIMITER_NOT_INIT:7},s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(this,e),this.errorCode=t.errorCode||i.DEFAULT,this.message=t.message||""};s.create=function(e){return new s({errorCode:e})},s.ShareErrorCode=i,t.b=s},"2Goq":function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("sXyB"),a=r.n(n),i=r("lwsE"),s=r.n(i),o=r("W8MJ"),h=r.n(o),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this._cacheMap={},this._cacheLimit=t.cacheLimit||20}return h()(e,[{key:"getResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._cacheMap[e];return t?t.response:null}},{key:"cacheResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(e&&t&&!((Object.keys(this._cacheMap).length||0)>=this._cacheLimit)){var r=this._cacheMap[e];r?r.response=t:this._cacheMap[e]={response:t,count:1,trigger:!1,complete:!1}}}},{key:"_write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=this._cacheMap[t]||{};n[e]=r,this._cacheMap[t]=n}},{key:"_read",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(this._cacheMap[t]||{})[e]}},{key:"getCountByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("count",e)||0}},{key:"increaseCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._write("count",e,this.getCountByHash()+1)}},{key:"getShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("share_id",e)}},{key:"setShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._write("share_id",e,t)}}]),e}(),c=null;function l(){return c||(c=a()(u,Array.prototype.slice.call(arguments))),c}},"6GAH":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("KoDT");function a(){var e=Object(n.a)();return e.isWeChatMiniProgram?e.WxApp:e.isWeChatPlatform?e.WeChat:e.isQQPlatform?e.QQ:e.isNativePlatform||e.isTinyNativePlatform?"h5":""}},"6wpZ":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={CONSUME:0,CONSUME_TIME_DIVIDE:1,CONSUME_RAW:2,RECYCLE:3,RECYCLE_TIME_DIVIDE:4,RECYCLE_RAW:5,RECYCLE_TIME_DIVIDE_MULTI:6}},"7sJ8":function(e,t,r){"use strict";t.a={CIPHER:"CIPHER_TEXT",LINK:"LINK",DOMAIN:"DOMAIN",NORMAL:"NORMAL",IMAGE:"IMAGE",COPY:"COPY"}},"8l/m":function(e,t,r){"use strict";r.d(t,"d",function(){return a}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return s}),r.d(t,"b",function(){return o});var n={};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(n,e)}function i(){return n.pageId||""}function s(){return n.pageSN||""}function o(){return n.pageName||""}},A4fa:function(e,t,r){"use strict";t.a={DEFAULT:0,OPEN_WECHAT:1,OPEN_QQ:2,OPEN_WEIBO:3,OPEN_WECHAT_IOS_SILENT:101,OPEN_WECHAT_ANDROID_SILENT:201}},ANhw:function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?r.push(t.charAt(a>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(n))>>>6-2*a);return r}};e.exports=r}()},BEtg:function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},EECB:function(e,t,r){"use strict";t.a={COMPLETE:0,SUCCESS:1,FAIL:2,CANCEL:3,ERROR:4}},KxTr:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={DEFAULT:0,SPECIAL:1}},Ne86:function(e,t,r){"use strict";r.d(t,"d",function(){return E}),r.d(t,"a",function(){return g}),r.d(t,"c",function(){return y}),r.d(t,"b",function(){return S});var n=r("QILm"),a=r.n(n),i=r("q8Ib"),s=r("KoDT"),o=r("h3qu"),h=r("Upw4"),u=r("v1av"),c=r("Qm63"),l=r("2Goq"),f=r("dp2P"),p=r("T8QY"),_=r("XfDS"),d=r("oCc4"),v=["mobile.yangkeduo.com","m.hutaojie.com","panduoduo.yangkeduo.com"],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareURL||"",r=e.urlWrapType;if(r===f.a.DEFAULT||r===f.a.RAW)return Promise.resolve({missed:!0,realShareURL:t,targetShareURL:t});if(e.marketActivityID&&Object(f.b)(r)){var n=Object(f.d)(r)?i.b.WEIXIN_TINY_DOMAIN:i.b.SHORT_LINK,s=t.replace(/^(\w+:)?\/\//,""),o=Object(c.a)(e),h=Object(l.a)(),_=function(){var a=new Promise(function(a,o){Object(i.c)(e.requestUsePost?"post":"get",{shareURL:s,marketActivityID:e.marketActivityID,platform:y(),shareDomainType:n,shortURLApi:e.shortURLApi,shortCommandApi:e.shortCommandApi,domainURLApi:e.domainURLApi,payloadMixin:e.payloadMixin}).then(function(e){if(e){var s=e.domain,o=void 0===s?"":s,h=e.shortURL,u=e.shareText,c=e.raw;if(n===i.b.WEIXIN_TINY_DOMAIN)r===f.a.DOMAIN_REPLACE&&a(g(t,o));else if(n===i.b.SHORT_LINK)return void a({useShortURL:!0,realShareURL:h||t,targetShareURL:t,shareText:u,rawResponse:c})}a({realShareURL:t,targetShareURL:t})}).catch(function(e){o(e)})});return n===i.b.SHORT_LINK&&a.then(function(e){e&&e.useShortURL&&(h.cacheResponseByHash(o,e),h.setShareID(o,(new p.a(t).query||{}).refer_share_id))}),a};if(r===f.a.SERVER_SHORT_URL_WITH_CACHE){var v=h.getResponseByHash(o);return v?(h.increaseCount(o),Promise.resolve(v)):_()}return _()}if(r===f.a.MAGIC_TRACE){var E=u.a.getInstance().transform(t);return Promise.resolve({realShareURL:E,targetShareURL:E})}return r===f.a.MAGIC_TRACE_DYNAMIC?u.a.getInstance().transformByShareEntity(e).then(function(e){return{realShareURL:e,targetShareURL:e}},function(){return{realShareURL:t,targetShareURL:t}}):r===f.a.SERVER_QUERY_APPEND?Object(i.d)(e.requestUsePost?"post":"get",{shareURL:t,payloadMixin:e.payloadMixin,shortURLApi:e.shortURLApi}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e&&e.code_method;if(r)return{useCipher:r,realShareURL:t,targetShareURL:t};var n=e.share_title,i=e.share_img,s=e.dev_infos,o=a()(e,["share_title","share_img","dev_infos"]),h=Object(d.a)(o,t);return{appendQuery:o,categoryShareInfo:{title:n,thumbnailURL:i},realShareURL:h,targetShareURL:h,tpInfos:s}}):Promise.resolve({missed:!0,realShareURL:t,targetShareURL:t})},g=function(e,t){var r=Object(d.a)({},e,Object(_.a)(t));return{targetShareURL:r,realShareURL:r}},y=function(){var e=Object(s.a)();return e.platform===o.a.PddAndroid?i.a.ANDROID:e.platform===o.a.PddIOS?i.a.IOS:i.a.WECHAT},S=function(e,t){if(!Object(h.a)(e))return t;var r=new p.a(t).hostname;return v.indexOf(r)<0&&(t=t.replace("//".concat(r),"//".concat("mobile.yangkeduo.com"))),t}},Qm63:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("oCc4"),a=r("aCH8"),i=r.n(a);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareURL,r=Object(n.a)({refer_share_id:null,refer_share_uid:null,refer_share_channel:null,refer_share_uin:null},t),a=e.payloadMixin||{},s=JSON.stringify(a);return i()(r+s)}},T8QY:function(e,t,r){"use strict";var n=r("J4zp"),a=r.n(n),i=r("lwsE"),s=r.n(i),o=r("W8MJ"),h=r.n(o),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s()(this,e),this.hostname="",this.origin="",this.pagename="",this.pathname="",this.port=0,this.protocol="",this.query={},this.search="",this.hashTag="",this.parseURL(t)}return h()(e,[{key:"parseURL",value:function(e){var t=e.split("#"),r=t[0]||"";this.hashTag=t[1]||"";var n=r.split("?"),i=n[0]||"",s=n[1]||"";this.search="?"+s,this.query=(s.split("&")||[]).reduce(function(e){var t,r,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split("=");try{t=decodeURIComponent(n[0]||""),r=decodeURIComponent(n[1]||"")}catch(e){t=""}return t&&(e[t]=r),e},{});var o=i.match(/^([a-zA-Z]+:)\/\//)||[];this.protocol=o[1]||"";o[0]&&(i=i.replace(o[0],""));var h=i.match(/^((:?[a-zA-Z0-9](:?[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6})(:\d+)?\//)||[],u=(h[0]||"").replace(/\//g,"").split(":"),c=a()(u,2),l=c[0],f=c[1];this.hostname=l,this.port=parseInt(f||0,10),h[0]&&(i=i.replace(h[0],"")),this.protocol&&this.hostname&&(this.origin="".concat(this.protocol,"//").concat(this.hostname)),this.pathname="/"+i.replace(/^\//,"");var p=i.match(/\/?(\w+\.html)$/)||[];this.pagename=p[1]||""}}]),e}();t.a=u},Upw4:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("a/1V"),a=[n.a.QQ_CHAT_SESSION,n.a.QQ_ZONE,n.a.QQ_CHAT_SESSION_IMAGE,n.a.QQ_ZONE_IMAGE],i=function(e){return a.indexOf(e)>=0}},W9H9:function(e,t,r){"use strict";t.a={DEFAULT:"",COMMAND:"kouling",IMAGE:"image",TEXT:"text",CARD:"card",WXAPP_CARD:"custom_card",COPY_LINK:"text"}},WiBJ:function(e,t,r){"use strict";r.d(t,"b",function(){return s}),r.d(t,"a",function(){return o});var n=r("dp2P"),a=r("W9H9"),i=r("7sJ8");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title,message:e.message,thumb_url:e.thumbnailURL,share_url:e.shareURL}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(n.c)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===a.a.COMMAND?i.a.CIPHER:Object(n.c)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===a.a.TEXT?i.a.LINK:Object(n.d)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===a.a.CARD?i.a.DOMAIN:e.getShareForm(t)===a.a.IMAGE?i.a.IMAGE:i.a.NORMAL}},XfDS:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("KoDT"),a="undefined"!=typeof window;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(/^http:?/)?e:Object(n.a)().isNativePlatform||!a?"http://".concat(e):location.protocol?"".concat(location.protocol,"//").concat(e):void 0}},YSLc:function(e,t,r){"use strict";t.a={DEFAULT:"",SYSTEM:"system",SDK:"sdk",MANUAL:"manual",EXTENSION:"extension",STAND:"stand"}},"a/1V":function(e,t,r){"use strict";t.a={DEFAULT:0,WECHAT_SESSION:1,WECHAT_TIMELINE:2,WEIBO:3,QQ_CHAT_SESSION:4,QQ_ZONE:5,TENCENT_WEIBO:6,WECHAT_SESSION_APP:7,WECHAT_TIMELINE_IMAGE:8,WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:9,WECHAT_SESSION_IMAGE:10,QQ_CHAT_SESSION_IMAGE:11,QQ_ZONE_IMAGE:12,WEIBO_IMAGE:13,WECHAT_TIMELINE_IMAGES:15,WECHAT_SESSION_TEXT_WITH_NO_SDK:16,WECHAT_SESSION_TEXT:17,IOS_SYSTEM_SHARE_CARD:18,WECHAT_SESSION_IMAGE_WITH_NO_SDK:19,WECHAT_SESSION_IMAGES_WITH_NO_SDK:20,WECHAT_TIMELINE_TEXT:21,SHARE_IMAGE_PASSIVELY:22,COPY_LINK:23,WECHAT_SESSION_MUSIC:24,WECHAT_SESSION_VIDEO:25,COPY_CIPHER:9995,FRIENDS:9998,WECHAT_BIG_IMAGE:9999,PIN_TIMELINE:1e4}},aCH8:function(e,t,r){!function(){var t=r("ANhw"),n=r("mmNF").utf8,a=r("BEtg"),i=r("mmNF").bin,s=function(e,r){e.constructor==String?e=r&&"binary"===r.encoding?i.stringToBytes(e):n.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var o=t.bytesToWords(e),h=8*e.length,u=1732584193,c=-271733879,l=-1732584194,f=271733878,p=0;p<o.length;p++)o[p]=16711935&(o[p]<<8|o[p]>>>24)|4278255360&(o[p]<<24|o[p]>>>8);o[h>>>5]|=128<<h%32,o[14+(h+64>>>9<<4)]=h;var _=s._ff,d=s._gg,v=s._hh,E=s._ii;for(p=0;p<o.length;p+=16){var g=u,y=c,S=l,m=f;c=E(c=E(c=E(c=E(c=v(c=v(c=v(c=v(c=d(c=d(c=d(c=d(c=_(c=_(c=_(c=_(c,l=_(l,f=_(f,u=_(u,c,l,f,o[p+0],7,-680876936),c,l,o[p+1],12,-389564586),u,c,o[p+2],17,606105819),f,u,o[p+3],22,-1044525330),l=_(l,f=_(f,u=_(u,c,l,f,o[p+4],7,-176418897),c,l,o[p+5],12,1200080426),u,c,o[p+6],17,-1473231341),f,u,o[p+7],22,-45705983),l=_(l,f=_(f,u=_(u,c,l,f,o[p+8],7,1770035416),c,l,o[p+9],12,-1958414417),u,c,o[p+10],17,-42063),f,u,o[p+11],22,-1990404162),l=_(l,f=_(f,u=_(u,c,l,f,o[p+12],7,1804603682),c,l,o[p+13],12,-40341101),u,c,o[p+14],17,-1502002290),f,u,o[p+15],22,1236535329),l=d(l,f=d(f,u=d(u,c,l,f,o[p+1],5,-165796510),c,l,o[p+6],9,-1069501632),u,c,o[p+11],14,643717713),f,u,o[p+0],20,-373897302),l=d(l,f=d(f,u=d(u,c,l,f,o[p+5],5,-701558691),c,l,o[p+10],9,38016083),u,c,o[p+15],14,-660478335),f,u,o[p+4],20,-405537848),l=d(l,f=d(f,u=d(u,c,l,f,o[p+9],5,568446438),c,l,o[p+14],9,-1019803690),u,c,o[p+3],14,-187363961),f,u,o[p+8],20,1163531501),l=d(l,f=d(f,u=d(u,c,l,f,o[p+13],5,-1444681467),c,l,o[p+2],9,-51403784),u,c,o[p+7],14,1735328473),f,u,o[p+12],20,-1926607734),l=v(l,f=v(f,u=v(u,c,l,f,o[p+5],4,-378558),c,l,o[p+8],11,-2022574463),u,c,o[p+11],16,1839030562),f,u,o[p+14],23,-35309556),l=v(l,f=v(f,u=v(u,c,l,f,o[p+1],4,-1530992060),c,l,o[p+4],11,1272893353),u,c,o[p+7],16,-155497632),f,u,o[p+10],23,-1094730640),l=v(l,f=v(f,u=v(u,c,l,f,o[p+13],4,681279174),c,l,o[p+0],11,-358537222),u,c,o[p+3],16,-722521979),f,u,o[p+6],23,76029189),l=v(l,f=v(f,u=v(u,c,l,f,o[p+9],4,-640364487),c,l,o[p+12],11,-421815835),u,c,o[p+15],16,530742520),f,u,o[p+2],23,-995338651),l=E(l,f=E(f,u=E(u,c,l,f,o[p+0],6,-198630844),c,l,o[p+7],10,1126891415),u,c,o[p+14],15,-1416354905),f,u,o[p+5],21,-57434055),l=E(l,f=E(f,u=E(u,c,l,f,o[p+12],6,1700485571),c,l,o[p+3],10,-1894986606),u,c,o[p+10],15,-1051523),f,u,o[p+1],21,-2054922799),l=E(l,f=E(f,u=E(u,c,l,f,o[p+8],6,1873313359),c,l,o[p+15],10,-30611744),u,c,o[p+6],15,-1560198380),f,u,o[p+13],21,1309151649),l=E(l,f=E(f,u=E(u,c,l,f,o[p+4],6,-145523070),c,l,o[p+11],10,-1120210379),u,c,o[p+2],15,718787259),f,u,o[p+9],21,-343485551),u=u+g>>>0,c=c+y>>>0,l=l+S>>>0,f=f+m>>>0}return t.endian([u,c,l,f])};s._ff=function(e,t,r,n,a,i,s){var o=e+(t&r|~t&n)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},s._gg=function(e,t,r,n,a,i,s){var o=e+(t&n|r&~n)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},s._hh=function(e,t,r,n,a,i,s){var o=e+(t^r^n)+(a>>>0)+s;return(o<<i|o>>>32-i)+t},s._ii=function(e,t,r,n,a,i,s){var o=e+(r^(t|~n))+(a>>>0)+s;return(o<<i|o>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(s(e,r));return r&&r.asBytes?n:r&&r.asString?i.bytesToString(n):t.bytesToHex(n)}}()},bbLm:function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"c",function(){return l});var n=r("MVZn"),a=r.n(n),i=r("mj+i"),s=r("oCc4"),o=r("T8QY"),h=r("3OdE"),u={};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new o.a(e.shareURL).query||{};return{refer_share_id:t.refer_share_id,refer_share_uid:t.refer_share_uid,refer_share_channel:t.refer_share_channel,refer_share_uin:t.refer_share_uin}}function l(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/^(?:https?:?)?\/\//,"https://")}"undefined"!=typeof window&&(u=h.a.get(location.host)||{}),t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.miniObjectPath,n=new o.a(r),h=new o.a(n.query.target_page||""),f=h.query||{},p=t.appendQuery||{},_=a()({},c(e),{},p),d=e.shareDomain||u.shareDomain;if(f.specialUrl||f.src)return f.src?f.src=Object(s.a)(_,f.src,d):f.src=l(e.shareURL),"".concat(n.pathname,"?").concat(Object(i.b)(Object.assign({},n.query,{target_page:"".concat(h.pathname,"?").concat(Object(i.b)(f))})));if(f.jump_url||f.launch_url){if(f.jump_url){var v=new o.a(f.jump_url);if(!v.hostname){var E=v.query;E.specialUrl&&(E.src?E.src=Object(s.a)(_,E.src,d):E.src=l(e.shareURL),f.jump_url="".concat(v.pathname,"?").concat(Object(i.b)(E)))}}return f.launch_url&&(f.launch_url=Object(s.a)(_,f.launch_url)),"".concat(n.pathname,"?").concat(Object(i.b)(Object.assign({},n.query,{target_page:"".concat(h.pathname,"?").concat(Object(i.b)(f))})))}return n.hostname||h.hostname||!n.query.target_page?"".concat(n.pathname,"?").concat(Object(i.b)(Object.assign({},n.query,_))):"".concat(n.pathname,"?").concat(Object(i.b)(Object.assign({},n.query,{target_page:"".concat(h.pathname,"?").concat(Object(i.b)(Object.assign(f,_)))})))}},chhR:function(e,t,r){"use strict";t.a={DEFAULT:0,ON_SHARE_TRIGGER:1,ON_SHARE_COMPLETED:2,SDK_INIT_FAILED:3,ON_SHARE_BUTTON_CLICKED:4,ON_SHARE_PREPARE:5,ON_SDK_READY:6,ON_SHARE_INTERRUPT:7,SHARE_LIMIT_LOAD_FAIL:8,PERFORM_LOG_FAILED:9,SHARE_REACH_LIMIT:10}},dKgK:function(e,t,r){"use strict";var n=r("lwsE"),a=r.n(n),i=r("W8MJ"),s=r.n(i),o=r("a1gu"),h=r.n(o),u=r("Nsbk"),c=r.n(u),l=r("7W2i"),f=r.n(l),p=r("+qE3"),_=r("/bZk"),d=r("gfNA"),v=r("a/1V"),E=r("chhR"),g=r("EECB"),y=_.b.ShareErrorCode,S=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a()(this,t),(e=h()(this,c()(t).call(this,r))).ShareEntityClass=d.a,e._hasInited=!1,e.shareEntity=r.shareEntity,e.shareEntityMap=r.shareEntityMap||{},e.disableShareTypes=r.disableShareTypes||[],e}return f()(t,e),s()(t,[{key:"initShare",value:function(){this._hasInited||(this._hasInited=!0,this.setMaxListeners(0),this._setupShareTypes(),this._setupPlatformShareSDK())}},{key:"isInited",value:function(){return this._hasInited}},{key:"share",value:function(e){return y.SHARE_ACTION_DISABLE}},{key:"setShareCheck",value:function(e){}},{key:"checkShareTypeEnable",value:function(e){return 0}},{key:"_setupShareTypes",value:function(){return!0}},{key:"_setupPlatformShareSDK",value:function(){return Promise.resolve()}},{key:"getShareEntityByShareType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return e?this.shareEntityMap[e]||(t?null:this.shareEntity):this.shareEntity}},{key:"refreshShare",value:function(e,t){return e?(t?this.shareEntityMap[t]=e:this.shareEntity=e,this._setupPlatformShareSDK()):Promise.resolve()}},{key:"disableShare",value:function(e){var t=this;if(e&&"number"==typeof e)this.disableShareTypes.indexOf(e)<0&&this.disableShareTypes.push(e);else{if("[object Array]"!==Object.prototype.toString.call(e))return;this.disableShareTypes=this.disableShareTypes.concat(e.filter(function(e){return(t.disableShareTypes||[]).indexOf(e)<0}))}!this._setupShareTypes()&&this._adjustMenu()}},{key:"_adjustMenu",value:function(){}},{key:"createShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=this.ShareEntityClass||d.a;if(r)return new n(e);var a={};if(t){var i=this.shareEntityMap[t];a=i?Object.assign({},i,e):Object.assign({},this.shareEntity,e)}else a=Object.assign({},this.shareEntity,e);return new n(a)}},{key:"setupNativeShareButton",value:function(e){return y.SHARE_NOT_SUPPORTED}},{key:"copyCipher",value:function(){var e=this,t=v.a.COPY_CIPHER,r=this.getShareEntityByShareType(t),n=r.cipherScene&&"string"==typeof r.cipher;return!n&&this.emit(E.a.ON_SHARE_TRIGGER,{shareType:t}),r?(r.normalize(t).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n&&(e.emit(E.a.ON_SHARE_TRIGGER,{shareType:t,shareID:r.shareID}),delete r.shareID),e.emit(E.a.ON_SHARE_COMPLETED,{shareType:t,shareResultType:g.a.SUCCESS,content:r.title},e.getNormalizeErrorHandler(t))}),0):y.SHARE_PARAMS_NOT_VALID}},{key:"getNormalizeErrorHandler",value:function(e){var t=this;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t.emit(E.a.ON_SHARE_COMPLETED,{shareType:e,shareResultType:g.a.FAIL,errorPayload:n})}}},{key:"resetLimiter",value:function(){}}]),t}(p.EventEmitter);t.a=S},dp2P:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return s});var n={DEFAULT:0,REDIRECT:1,SERVER_DOMAIN:2,SERVER_CONTROL:3,SERVER_SHORT_URL:4,RAW:5,SERVER_TINY_DOMAIN:6,SERVER_DOMAIN_BASE64:7,DOMAIN_REPLACE:8,MAGIC_TRACE:9,MAGIC_TRACE_DYNAMIC:10,SERVER_SHORT_URL_WITH_CACHE:11,SERVER_TP_APP:12,SERVER_TP_APP_CARD:13,SERVER_QUERY_APPEND:14};function a(e){return[n.SERVER_CONTROL,n.SERVER_SHORT_URL,n.SERVER_TINY_DOMAIN,n.SERVER_DOMAIN_BASE64,n.DOMAIN_REPLACE,n.SERVER_SHORT_URL_WITH_CACHE].indexOf(e)>=0}function i(e){return[n.SERVER_CONTROL,n.SERVER_TINY_DOMAIN,n.SERVER_DOMAIN_BASE64,n.DOMAIN_REPLACE].indexOf(e)>=0}function s(e){return[n.SERVER_SHORT_URL,n.SERVER_SHORT_URL_WITH_CACHE,n.SERVER_TP_APP_CARD].indexOf(e)>=0}t.a=n},gfNA:function(e,t,r){"use strict";r.d(t,"b",function(){return v});var n=r("o0o1"),a=r.n(n),i=r("yXPU"),s=r.n(i),o=r("lwsE"),h=r.n(o),u=r("W8MJ"),c=r.n(u),l=r("oCc4"),f=r("dp2P"),p=r("W9H9"),_=r("YSLc"),d=r("Ne86");function v(e){for(var t=[],r=1;r<arguments.length;++r)t.push(arguments[r]);return e.replace(/{(\d+)}/g,function(e,r){return 0===t[r]?0:t[r]||""})}var E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e),this.title=t.title||"",this.message=t.message||"",this.shareURL=t.shareURL||"",this.targetShareURL="",this.realShareURL="",this.shareDomain=t.shareDomain||"",this.thumbnailURL=t.thumbnailURL||"",this.timelineDomain=t.timelineDomain||"",this.timelineAppId=t.timelineAppId||"",this.marketActivityID=t.marketActivityID||0,this.urlWrapType=t.urlWrapType||f.a.DEFAULT,this.shortURLApi=t.shortURLApi||"",this.domainURLApi=t.domainURLApi||"",this.payloadMixin=t.payloadMixin||null,this.requestUsePost=t.requestUsePost||!1,this.shortCommandApi=t.shortCommandApi||"",this.cipherProcessor=t.cipherProcessor}return c()(e,[{key:"normalize",value:function(){var e=s()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"setShareURLQueries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.urlWrapType!==f.a.RAW&&(this.shareID=e.refer_share_id,this.shareURL=Object(l.a)(e,this.shareURL))}},{key:"getShareForm",value:function(e){return p.a.DEFAULT}},{key:"getShareMethod",value:function(e){return _.a.DEFAULT}},{key:"processCipher",value:function(){var e=this,t=Object.assign({},this),r={title:t.title},n=r.title||"";return Object(d.d)(t).then(function(t){var a=t.targetShareURL,i=t.useShortURL,s=t.shareText,o=t.cipher;o&&(r.cipher=o),e.targetShareURL=a;var h=i||o?s:"";return n=v(n,h||a,a,h),r.title=n,e.pcode=n,r})}}]),e}();t.a=E},mmNF:function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},oCc4:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("mj+i"),a=r("T8QY");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return 0===window.location.href.indexOf("amcomponent://")&&(r=r||new a.a(t).origin),t=Object(n.a)(e,Object(n.h)(t||location.href)),r?(r=r.replace(/\/$/g,""),"".concat(r).concat(Object(n.d)(t))):t}},q8Ib:function(e,t,r){"use strict";r.d(t,"b",function(){return c}),r.d(t,"a",function(){return l}),r.d(t,"d",function(){return p});var n=r("cDf5"),a=r.n(n),i=r("8l/m"),s=r("rIj9"),o=r("bbLm"),h=r("T8QY"),u=r("mj+i"),c={WEIXIN_TINY_DOMAIN:"weixin",SHORT_LINK:"link"},l={WECHAT:"h5",IOS:"ios",ANDROID:"android"},f="api/flow/chron/share/miniprogram";function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(s.a)({pageInfo:{pageId:Object(i.a)()}},{defaultErrorHandler:function(e){}}),n={};n.share_refer=Object(o.b)({shareURL:t.shareURL}),t.payloadMixin&&"object"===a()(t.payloadMixin)&&(n=Object.assign(n,t.payloadMixin));var h=t.shortURLApi||f;return("post"===e.toLowerCase()?r.post(h,n):r.get(h,{params:n})).then(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}t.c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(s.a)({pageInfo:{pageId:Object(i.a)()}},{defaultErrorHandler:function(e){}}),n={};n.url=t.shareURL||"",n.activity=t.marketActivityID||0,n.platform=t.platform||"",n.share_refer=Object(o.b)({shareURL:t.shareURL}),n.page_sn=Object(i.c)(),t.payloadMixin&&"object"===a()(t.payloadMixin)&&(n=Object.assign(n,t.payloadMixin));var l=t.urlAlias||"url_code",f=n[l];if(f&&"string"==typeof f){var p=new h.a(f).query||{};Object.assign(p,n.share_refer),n[l]="".concat(f.split("?")[0]||"","?").concat(Object(u.b)(p))}var _="api/flow/audience/activity/domain/weixin";return t.shareDomainType===c.SHORT_LINK?_=t.shortURLApi?t.shortURLApi:t.shortCommandApi?t.shortCommandApi:"api/flow/audience/activity/domain/short_url":t.domainURLApi&&(_=t.domainURLApi),("post"===e.toLowerCase()?r.post(_,n):r.get(_,{params:n})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{domain:e.domain,openAppID:e.open_app_id||"",shortURL:e.short_url||"",shareText:e.share_text||"",raw:e}})}},rUjM:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={TP_FIRST:0,GENERAL_FIRST:1,GENERAL_ONLY:2}},sXyB:function(e,t,r){var n=r("SksO");function a(t,r,i){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=a=function(e,t,r){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return r&&n(i,r.prototype),i}:e.exports=a=Reflect.construct,a.apply(null,arguments)}e.exports=a},v1av:function(e,t,r){"use strict";var n=r("lwsE"),a=r.n(n),i=r("W8MJ"),s=r.n(i),o=r("lSNA"),h=r.n(o),u=r("T8QY"),c=r("oCc4"),l=r("cDf5"),f=r.n(l),p=r("8l/m"),_=r("rIj9"),d="api/flow/audience/share/trace",v=r("WiBJ"),E=r("6GAH");function g(e,t){if(!(t&&t.key&&t.value&&t.trace))return e;var r=new u.a(e),n=t.key,a=t.value,i=t.trace;return Object(c.a)(Object.assign(h()({},n,a),r.query),i,r.origin)}var y=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a()(this,e),this._isInited=!1,this._magicTrace=null}return s()(e,[{key:"build",value:function(e){var t=e.magicTrace,r=void 0===t?{}:t;return this._isInited?Promise.resolve():(r.key&&r.value&&r.trace&&(this._magicTrace=r,this._isInited=!0),Promise.resolve())}},{key:"isInited",value:function(){return this._isInited}},{key:"transform",value:function(e){return g(e,this._magicTrace)}},{key:"transformByShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(_.a)({pageInfo:{pageId:Object(p.a)()}},{defaultErrorHandler:function(e){}}),n={};return n.origin=t.platform||"",n.share_params=t.shareParams||{},n.page_sn=t.pageSn||Object(p.c)()+"",n.page_info=t.pageInfo||{page_name:Object(p.b)(),page_url:location&&location.href},t.payloadMixin&&"object"===f()(t.payloadMixin)&&(n=Object.assign(n,t.payloadMixin)),("post"===e.toLowerCase()?r.post(d,n):r.get(d,{params:n})).then(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).magic_trace})}("post",{platform:Object(E.a)(),shareParams:Object(v.b)(e),payloadMixin:e.payloadMixin}).then(function(t){return g(e.shareURL,t)})}}]),e}(),S=null;y.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S||(S=new y(e)),S};t.a=y},z4CT:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("qnV/");function a(e){var t=e.errorCode,r=void 0===t?0:t,a=e.message,i=void 0===a?"":a,s=e.options,o=void 0===s?{}:s;Object(n.c)(new Error("share error"),{error_code:r,error_message:i,params:JSON.stringify(o)})}},zRS3:function(e,t,r){"use strict";r.r(t);var n=r("cDf5"),a=r.n(n),i=r("o0o1"),s=r.n(i),o=r("yXPU"),h=r.n(o),u=r("lwsE"),c=r.n(u),l=r("W8MJ"),f=r.n(l),p=r("CSCl"),_=r("SxTj"),d=r("mj+i"),v=r("a/1V"),E=r("chhR"),g=r("KoDT"),y=r("Fcpp"),S=r("h3qu"),m=r("YSLc"),R={SUCCESS:"success",FAIL:"fail",CANCEL:"cancel",COMPLETE:"complete",ERROR:"error"},I=r("EECB"),A=r("/bZk"),C=r("W9H9"),O=r("dKgK"),T="event",b={SHARE:"share",SHARE_RESULT:"share_result"},L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.userID=t.userID||"",this.uin=t.uin||"",this.shareID=t.shareID||"",this.op=t.op||T,this.subOP=t.subOP||"",this.shareChannel=t.shareChannel||"",this.shareResult=t.shareResult||"",this.shareURL=t.shareURL||"",this.shareDomain=t.shareDomain||"",this.shareForm=t.shareForm||"",this.shareMethod=t.shareMethod||"",this.shareAppID=t.shareAppID,this.pcode=t.pcode,this.wxShareCount=t.wxShareCount,this.cipherScene=t.cipherScene}return f()(e,[{key:"normalize",value:function(e){if(this.subOP===b.SHARE)return{op:this.op,sub_op:this.subOP,share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,pcode:this.pcode,pcode_scene:this.cipherScene};if(this.subOP===b.SHARE_RESULT){var t={op:this.op,sub_op:this.subOP,event:"share_result",share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_result:this.shareResult,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,wx_share_count:this.wxShareCount,pcode:this.pcode,pcode_scene:this.cipherScene};return this.walrusID&&(t.walrus_id=this.walrusID,t.walrus_type=this.walrusType),t}return{}}},{key:"getShareURLTrackingQueries",value:function(){return e.getTrackingQueries(this)}}]),e}();L.TRACKING_SUB_OP=b,L.getTrackingQueries=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{refer_share_id:e.shareID,refer_share_uid:e.userID,refer_share_uin:e.uin,refer_share_channel:e.shareChannel}};var P=L,D=r("fkZF");function k(e){return e=e||32,Object(D.a)(e)}var N=r("lSNA"),M=r.n(N),w={UNKNOWN:"unknown",APP_MESSAGE:"message",TIMELINE:"timeline",QQ:"qq",QQ_ZONE:"qzone",QQ_WEIBO:"qq_weibo",SINA_WEIBO:"weibo",CLIPBOARD:"copy_link"},U=M()({1:w.APP_MESSAGE,2:w.TIMELINE,3:w.SINA_WEIBO,4:w.QQ,5:w.QQ_ZONE,8:w.TIMELINE,9:w.TIMELINE,10:w.APP_MESSAGE,11:w.QQ,12:w.QQ_ZONE,13:w.SINA_WEIBO,16:w.APP_MESSAGE,17:w.APP_MESSAGE,19:w.APP_MESSAGE,20:w.APP_MESSAGE,21:w.TIMELINE,23:w.CLIPBOARD,24:w.APP_MESSAGE,25:w.APP_MESSAGE},v.a.COPY_CIPHER,w.CLIPBOARD);function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return U[e]||w.UNKNOWN}var H=r("T8QY"),x=r("3sKm"),W="",B="";function F(){return Promise.all([Object(x.b)().then(function(e){W=e}).catch(function(e){}),Object(x.c)().then(function(e){B=e}).catch(function(e){})])}function Q(){return B}function G(){return W}var K,Y=r("MpJ2"),q={DEFAULT:0,WECHAT:1,QQ:2,WEIBO:3},V=(K={},M()(K,w.UNKNOWN,0),M()(K,w.APP_MESSAGE,1),M()(K,w.TIMELINE,1),M()(K,w.QQ,2),M()(K,w.QQ_ZONE,2),M()(K,w.QQ_WEIBO,2),M()(K,w.SINA_WEIBO,3),K);var Z=function(e){return V[e]||q.DEFAULT},z=function(){function e(){c()(this,e),this._venderAppIDs={},this._isInited=!1}return f()(e,[{key:"build",value:function(e){var t=e.wechatAppID;return this._isInited?Promise.resolve():(this._isInited=!0,Object(g.a)().isNativePlatform?this._buildNativeCache():Object(g.a)().isWeChatPlatform?this._buildWeChatCache(t):Promise.resolve())}},{key:"isInited",value:function(){return this._isInited}},{key:"_buildNativeCache",value:function(){var e=this;return function(e){return Object(g.a)().statisfy("4.49.0","4.49.0","greaterThan")?Array.isArray(e)?Object(Y.h)("JSShare","venderAppIds",{channels:e}):Promise.reject({message:"invalid params"}):Promise.reject({message:"not support"})}([q.WECHAT]).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._venderAppIDs=Object.assign(e._venderAppIDs,t)}).catch(function(){return Promise.resolve()})}},{key:"_buildWeChatCache",value:function(e){return this._venderAppIDs[q.WECHAT]=e,Promise.resolve()}},{key:"getAppIDSync",value:function(e){var t=Z(e);return this._venderAppIDs[t]}}]),e}(),X=null;z.getInstance=function(e){return X||(X=new z(e)),X};var J=z,$=r("2Goq"),ee=r("dp2P"),te=r("Qm63"),re=A.b.ShareErrorCode,ne=P.TRACKING_SUB_OP;var ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.transparentTransmission=t.transparentTransmission||{},this.trackingEntity=null,this.onTriggerListener=null,this.onCompletedListener=null,this.shareController=null,this._cachePrepareInfo={}}return f()(e,[{key:"listen",value:function(e){e&&e instanceof O.a&&(this.disconnect(),this.shareController=e,this._setupDefaultTrackListener(e))}},{key:"disconnect",value:function(){this.shareController&&this._removeDefaultTrackListener(this.shareController)}},{key:"updateTrackerTrans",value:function(e){this.transparentTransmission=Object.assign({},this.transparentTransmission,e)}},{key:"_setupDefaultTrackListener",value:function(e){this._removeDefaultTrackListener(e),this.onPrepareListener=this._onDefaultSharePrepare.bind(this),this.onTriggerListener=this._onDefaultShareTrigger.bind(this),this.onCompletedListener=this._onDefaultShareCompleted.bind(this),e.on(E.a.ON_SHARE_PREPARE,this.onPrepareListener),e.on(E.a.ON_SHARE_TRIGGER,this.onTriggerListener),e.on(E.a.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_removeDefaultTrackListener",value:function(e){this.onPrepareListener&&e.removeListener(E.a.ON_SHARE_PREPARE,this.onPrepareListener),this.onTriggerListener&&e.removeListener(E.a.ON_SHARE_TRIGGER,this.onTriggerListener),this.onCompletedListener&&e.removeListener(E.a.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_sendLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(e,this.transparentTransmission);y.a.trackingRecord(t)}},{key:"_onDefaultSharePrepare",value:function(e){var t=e.shareType;if(this._cachePrepareInfo[t]){var r=this.shareController.getShareEntityByShareType(t)||{},n=this._cachePrepareInfo[t];return n.userID=G(),n.uin=Q(),void r.setShareURLQueries(P.getTrackingQueries(n))}var a=this.shareController.getShareEntityByShareType(t),i={userID:G(),uin:Q(),shareID:this._getCachedShareID(a)||k(),shareChannel:j(t)};a&&a.setShareURLQueries(P.getTrackingQueries(i)),this._cachePrepareInfo[t]=i}},{key:"_onDefaultShareTrigger",value:function(e){var t=e.shareType,r=e.shareID;if(t===v.a.PIN_TIMELINE||Object(g.a)().isWeChatMiniProgram&&t===v.a.WECHAT_SESSION)return 0;var n=this.shareController.getShareEntityByShareType(t)||{},a=this._cachePrepareInfo[t];this._cachePrepareInfo[t]=null;var i=j(t),s=J.getInstance();if(this.trackingEntity=new P(Object.assign({userID:G(),uin:Q(),shareID:this._getCachedShareID(n)||k(),subOP:ne.SHARE,shareChannel:i,timelineDomain:n.timelineDomain,cipherScene:n.cipherScene,shareForm:n.getShareForm&&n.getShareForm(t),shareMethod:n.getShareMethod&&n.getShareMethod(t),shareAppID:s.getAppIDSync(i)},a,r?{shareID:r}:null)),!a&&n.setShareURLQueries(P.getTrackingQueries(this.trackingEntity)),n.getShareForm(t)!==C.a.COMMAND){var o=n.targetShareURL||n.shareURL;this.trackingEntity.shareURL=o,this.trackingEntity.shareDomain=new H.a(o).origin}this._sendLog(this.trackingEntity.normalize(t))}},{key:"_onDefaultShareCompleted",value:function(e){var t=e.shareType,r=e.shareResultType,n=e.useComplete,i=e.responseData,s=void 0===i?{}:i,o=e.tpInfo,h=Object(g.a)();if(t===v.a.PIN_TIMELINE||h.isWeChatMiniProgram&&t===v.a.WECHAT_SESSION)return 0;if(!this.trackingEntity)return re.SHARE_STATUS_ILLEGAL;var u=this.shareController.getShareEntityByShareType(t)||{},c=this.getShareResultByType(r);if(n&&(c=R.COMPLETE),u.getShareForm(t)!==C.a.COMMAND){var l=u.realShareURL||u.shareURL;this.trackingEntity.shareURL=l,this.trackingEntity.shareDomain=new H.a(l).origin}else this.trackingEntity.pcode=u.pcode;var f=function(e){return e&&"object"===a()(e)?"string"!=typeof e.wx_app_id?null:e.wx_app_id:null}(s);f&&(this.trackingEntity.shareAppID=f),s.hasOwnProperty("wx_share_count")&&(this.trackingEntity.wxShareCount=s.wx_share_count,delete s.wx_share_count),this.trackingEntity.subOP=ne.SHARE_RESULT,this.trackingEntity.shareResult=c,o&&(this.trackingEntity.walrusID=o.group_id,this.trackingEntity.walrusType=o.dev_type),u.forceDowngrade||h.platform===S.a.PddIOS&&t===v.a.WECHAT_SESSION_TEXT_WITH_NO_SDK||v.a.COPY_LINK===t&&!h.isNativePlatform&&!h.isTinyNativePlatform||v.a.COPY_CIPHER===t||(this._sendLog(this.trackingEntity.normalize(t)),this.trackingEntity=null)}},{key:"trackProlongation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(!this.trackingEntity)return!1;this.trackingEntity.shareMethod=m.a.MANUAL,this.trackingEntity.shareResult=R.COMPLETE;var n=Object.assign(this.trackingEntity.normalize(e),t);return this.trackingEntity=null,"function"==typeof r?r(n):this._sendLog(n),!0}},{key:"getShareResultByType",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0){case I.a.COMPLETE:return R.COMPLETE;case I.a.SUCCESS:return R.SUCCESS;case I.a.FAIL:return R.FAIL;case I.a.CANCEL:return R.CANCEL;default:return R.ERROR}}},{key:"_getCachedShareID",value:function(e){if(e.urlWrapType===ee.a.SERVER_SHORT_URL_WITH_CACHE){var t=Object($.a)(),r=Object(te.a)(e);return t.getShareID(r)}}}]),e}(),ie=r("8l/m"),se=r("rIj9"),oe="api/flow/audience/share/content",he={REACH_HOUR_LIMIT:43367,REACH_DAY_LIMIT:43368},ue=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];c()(this,e),this._shareController=null,this._onPerformShareErrorHandler=null}return f()(e,[{key:"listen",value:function(e){e&&e instanceof O.a&&(this.disconnect(),this._shareController=e,this._setupListener(e))}},{key:"disconnect",value:function(){this.removeListener()}},{key:"_setupListener",value:function(e){this.removeListener(),this._onPerformShareErrorHandler=this._onPerformShareError.bind(this),e.on(E.a.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"removeListener",value:function(){this._shareController&&this._onPerformShareErrorHandler&&this._shareController.removeListener(E.a.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"_onPerformShareError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error||{},r=e.shareType,n=parseInt(t.errorCode,10)||0;[he.REACH_DAY_LIMIT,he.REACH_HOUR_LIMIT].indexOf(n)>=0&&(this._shareController.emit(E.a.SHARE_REACH_LIMIT,{shareType:r,errorCode:n}),this.hideShareMenuOption(r))}},{key:"hideShareMenuOption",value:function(e){var t=this._shareController;e&&t&&t.disableShare(e)}}]),e}(),ce=r("z4CT"),le=r("WiBJ"),fe=r("6GAH"),pe="undefined"!=typeof window;function _e(){return(_e=h()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(10).then(r.bind(null,"3Wbp"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(){return(de=h()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Object(g.a)()).isWeChatMiniProgram){e.next=7;break}return e.next=4,r.e(13).then(r.bind(null,"YYoc"));case 4:return e.abrupt("return",e.sent.default);case 7:if(!t.isWeChatPlatform){e.next=13;break}return e.next=10,r.e(14).then(r.bind(null,"EP3j"));case 10:return e.abrupt("return",e.sent.default);case 13:if(!t.isQQPlatform){e.next=19;break}return e.next=16,r.e(11).then(r.bind(null,"gouW"));case 16:return e.abrupt("return",e.sent.default);case 19:if(!t.isNativePlatform&&!t.isTinyNativePlatform){e.next=25;break}return e.next=22,r.e(10).then(r.bind(null,"3Wbp"));case 22:return e.abrupt("return",e.sent.default);case 25:return e.next=27,r.e(12).then(r.bind(null,"joqa"));case 27:return e.abrupt("return",e.sent.default);case 28:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ve=Object({BROWSER:!0,ISAVALON:!1,BUNDLE_PLATFORM:"production"}).HYBRID?function(){return _e.apply(this,arguments)}:function(){return de.apply(this,arguments)},Ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.shareController=null,this.shareTracker=null,this.menuWatcher=null,this.platform=Object(fe.a)(),this._disableContentCheck=!0,this._disablePerformShareLog=!1,this.controllerOptions=t.controllerOptions||{},this.noDefaultShare=t.noDefaultShare||!1,this.disableShare=t.disableShare||!1,this._initControllerPromise=null,this.loadErrorRetry=t.loadErrorRetry||0,this.enableInfiniteRetry=t.enableInfiniteRetry||!1,this._loadControllerFailed=!1}return f()(e,[{key:"setup",value:function(){var e=h()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(pe&&!this.shareController){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(!this._loadControllerFailed||this.enableInfiniteRetry){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("load controller failed")));case 4:return this._setupShareTracker(),this._setupMenuWatcher(),this._initControllerPromise=this._initControllerPromise||this._setupController(),t=!1,e.prev=8,e.next=11,this._initControllerPromise;case 11:e.next=25;break;case 13:if(e.prev=13,e.t0=e.catch(8),this._initControllerPromise=null,!(this.loadErrorRetry>0)){e.next=22;break}Object(ce.a)({errorCode:0,message:"加载分享控制器失败, 剩余重试次数".concat(this.loadErrorRetry),options:{message:e.t0&&e.t0.message}}),this.loadErrorRetry--,t=!0,e.next=25;break;case 22:throw this._loadControllerFailed=!0,Object(ce.a)({errorCode:0,message:"加载分享控制器失败",options:{message:e.t0&&e.t0.message}}),e.t0;case 25:if(!t){e.next=27;break}return e.abrupt("return",this.setup());case 27:case"end":return e.stop()}},e,this,[[8,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"_setupController",value:function(){var e=h()(s.a.mark(function e(){var t,r,n,a=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareController){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return t=this.controllerOptions,r=Object(g.a)(),e.next=6,ve();case 6:n=e.sent,this.shareController=new n(t),r.isWeChatPlatform||r.isQQPlatform?this.noDefaultShare||this._prepareShareController():(r.isNativePlatform||r.isTinyNativePlatform)&&this.shareController.on(E.a.ON_SHARE_COMPLETED,function(e){var t=e.shareType,r=e.shareResultType,n=e.nativeShareErrorCode;r===I.a.FAIL&&[he.REACH_HOUR_LIMIT,he.REACH_DAY_LIMIT].indexOf(n)>=0&&(a.shareController.emit(E.a.SHARE_REACH_LIMIT,{shareType:t,errorCode:n}),Object(ce.a)({errorCode:n,message:"分享达到上限"}))}),this.shareTracker.listen(this.shareController),this.menuWatcher.listen(this.shareController),this._setupPerformShareLog();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_prepareShareController",value:function(){this.shareController&&!this.shareController.isInited()&&this.shareController.initShare()}},{key:"_setupMenuWatcher",value:function(){this.menuWatcher||(this.menuWatcher=new ue)}},{key:"_setupShareTracker",value:function(){this.disableTracker||this.shareTracker||(this.shareTracker=new ae({transparentTransmission:this.trackerTrans}))}},{key:"_setupPerformShareLog",value:function(){var e=this;this.shareController&&!Object(g.a)().isNativePlatform&&this.shareController.on(E.a.ON_SHARE_COMPLETED,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e._disablePerformShareLog&&t.shareResultType===I.a.SUCCESS&&t.shareType!==v.a.COPY_CIPHER){var r=t.shareType,n=e.getShareEntity(r);(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(se.a)({pageInfo:{pageId:Object(ie.a)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=t.shareParams||{},n.share_type=t.shareType||0,n.share_method=t.shareMethod||"",n.origin=t.platform||"",n.page_sn=t.pageSn||Object(ie.c)(),n.page_info=t.pageInfo||{page_name:Object(ie.b)(),page_url:location&&location.href},n.extra=t.extra||{},"post"===e.toLowerCase()?r.post("api/flow/audience/share/perform",n):r.get("api/flow/audience/share/perform",{params:n})})("post",{platform:e.platform,shareType:r,shareParams:Object(le.b)(n),shareMethod:Object(le.a)(n,r),extra:n.payloadMixin&&n.payloadMixin.extra}).catch(function(t){e.shareController.emit(E.a.PERFORM_LOG_FAILED,{shareType:r,error:t})})}})}},{key:"share",value:function(){var e=h()(s.a.mark(function e(t){var r,n,a=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shareController&&!this.disableShare){e.next=4;break}return(r=new Error("no controller exists")).shareType=t,e.abrupt("return",Promise.reject(r));case 4:return e.next=6,F();case 6:if(this._prepareShareController(),n=function(){return new Promise(function(e,r){var n=a,i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shareResultType;if(s(),I.a.SUCCESS===n)e(t);else{var a=new Error("分享失败");Object.assign(a,t),r(a)}};function s(){n.shareController.removeListener(E.a.ON_SHARE_COMPLETED,i)}a.shareController.on(E.a.ON_SHARE_COMPLETED,i);var o=a.shareController.share(t);if(o){s(),a.shareController.emit(E.a.ON_SHARE_INTERRUPT,{shareType:t,shareErrorType:o}),Object(ce.a)({errorCode:o,message:"分享前置流程异常",options:{shareType:t}});var h=new Error("分享前置流程异常");Object.assign(h,{shareType:t,shareErrorType:o}),r(h)}})},!Object(g.a)().isNativePlatform){e.next=12;break}return e.abrupt("return",this.shareController.waitShareLimiter().then(function(e){return n()},function(e){return n()}));case 12:return e.abrupt("return",n());case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"checkShareContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(se.a)({pageInfo:{pageId:Object(ie.a)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=t.shareParams||{},n.origin=t.platform||"",n.page_sn=t.pageSn||Object(ie.c)()+"",n.page_info=t.pageInfo||{page_name:Object(ie.b)(),page_url:location&&location.href},"post"===e.toLowerCase()?r.post(oe,n):r.get(oe,{params:n})}("post",{platform:this.platform,shareParams:Object(le.b)(e)})}},{key:"setContentCheck",value:function(e){this._disableContentCheck=!e}},{key:"setPerformShareLog",value:function(e){this._disablePerformShareLog=!e}},{key:"prepareShare",value:function(){var e=h()(s.a.mark(function e(){var t,r,n,a,i,o,h=this,u=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},this.shareController){e.next=5;break}return e.abrupt("return",Promise.reject(new Error("no controller exists")));case 5:return e.next=7,F();case 7:if(this._prepareShareController(),a=t.entityConfig,i=void 0===a?{}:a,o=this.shareController.createShareEntity(i,r),!(n.skipShareContentCheck||this._disableContentCheck||Object(g.a)().isNativePlatform)){e.next=12;break}return e.abrupt("return",this.shareController.refreshShare(o,r));case 12:return e.abrupt("return",this.checkShareContent(o).then(function(){return h.shareController.refreshShare(o,r)}));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getShareController",value:function(){return this.shareController}},{key:"getShareControllerAsync",value:function(){var e=h()(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareController){e.next=2;break}return e.abrupt("return",this.shareController);case 2:if(!this._initControllerPromise){e.next=4;break}return e.abrupt("return",this._initControllerPromise.then(function(e){return t.shareController}).catch(function(e){return null}));case 4:return e.abrupt("return",this.setup().then(function(e){return t.shareController}).catch(function(e){return null}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getShareTracker",value:function(){return this.shareTracker}},{key:"getShareEntity",value:function(e,t){return this.shareController?this.shareController.getShareEntityByShareType(e,t):null}},{key:"setupNativeShareButton",value:function(e,t){this.shareController&&(this.shareController.removeAllListeners(E.a.ON_SHARE_BUTTON_CLICKED),"function"==typeof t&&this.shareController.on(E.a.ON_SHARE_BUTTON_CLICKED,t),this.shareController.setupNativeShareButton(e))}}]),e}(),ge={title:0,message:0,thumbnailURL:0,shareURL:0,shareDomain:0,waterMark:0,urlWrapType:0,drawImageOptions:0,drawImageClass:0,marketActivityID:0,miniObjectPath:0,miniObjectID:0,useWxAppShare:0,shortURLApi:0,shortCommandApi:0,domainURLApi:0,forceDowngrade:0,payloadMixin:0,requestUsePost:0,excludeShareChoices:0,thirdPartyOpenType:0,needSharedAmount:0,cipherScene:0,consumeMode:0,activitySceneSn:0,tpSelectCategory:0,pinTimelineParams:0,wxAppRequestPayload:0,cipherProcessor:0,wxAppNavigatePayload:0},ye={noDefaultShare:0,isSDKPrepare:0,disableShare:0},Se={wechatAppID:0,magicTrace:0,shareTypeEnable:0},me={USELESS:-1,DEFAULT:0,OUT_OF_DATE:1,FORBIDDEN:2,ABANDONED:3},Re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.cacheRaw=t.cacheRaw||!1,this.deleteAfterCollect=t.deleteAfterCollect||!1}return f()(e,[{key:"filter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._filterShareEntity(e),r=this._filterShareConfigFlag(e),n=this._filterShareOther(e);return{_rawShareInfo:this.cacheRaw?e:null,entityConfig:t,flowControllConfig:r,otherConfig:n,compatibleShareConfig:{}}}},{key:"_filterByItems",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return(Object.keys(r)||[]).forEach(function(a,i){var s=r[a];s===me.FORBIDDEN?delete t[a]:s===me.ABANDONED?delete t[a]:void 0!==t[a]&&(n[a]=t[a],e.deleteAfterCollect&&delete t[a])}),n}},{key:"_filterShareEntity",value:function(e){return this._filterByItems(e,ge)}},{key:"_filterShareConfigFlag",value:function(e){return this._filterByItems(e,ye)}},{key:"_filterShareOther",value:function(e){return this._filterByItems(e,Se)}}]),e}(),Ie={DEFAULT:"!share_v2",WE_CHAT_MSG:"!share_v3",SHARE:"!share",TRANSPARENT:"!transparent",NONE:"",NO_LOGO:"!share_v4"},Ae=r("3OdE"),Ce=r("oCc4"),Oe=r("v1av"),Te={};"undefined"!=typeof window&&(Te=Ae.a.get(location.host)||{});var be={code:null,from:null,isappinstalled:null,at:null,share_id:null,is_back:null,page_id:null,list_id:null},Le=["refer_page_name","refer_page_section","refer_page_element","refer_page_id","refer_page_sn","refer_page_el_sn","refer_mid","refer_adg","refer_cam","refer_ced"];function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(e=e||"").indexOf("!")>=0&&!r?e:(e=e.split("!")[0],e+=t)}var De=null,ke=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this._hasInited=!1,this.opts=t||{},this.shopConfig=t.shopConfig,this.defaultShareEntityConfig={},this.shareManager=null,this.shareInfoFilter=null,this._sdkPrepared=!1}return f()(e,[{key:"setup",value:function(){this._hasInited||(this._hasInited=!0,this._setupShareInfoFilter(),this._setupShareManager(),!(this.opts.shareManagerConfig||{}).noDefaultShare&&this._prepareDefaultShare(),this.waitAppIDCacheBuild())}},{key:"_setupShareInfoFilter",value:function(){this.shareInfoFilter||(this.shareInfoFilter=new Re(this.opts.shareInfoFilterConfig))}},{key:"_setupShareManager",value:function(){var e=this;if(!this.shareManager){var t=Object.assign({},{noDefaultShare:!1,disableShare:!1,useNativeShareButton:!1,loadErrorRetry:1,enableInfiniteRetry:!1},this.opts.shareManagerConfig);this.shareManager=new Ee(t)}return this._managerReadyPromise=this._managerReadyPromise||this.shareManager.setup(),this._managerReadyPromise.then(function(t){e._managerReady=!0}).catch(function(t){e._managerReadyPromise=null}),this._managerReadyPromise}},{key:"_prepareDefaultShare",value:function(){if(!Object(g.a)().isWeChatMiniProgram){var e=(this.shopConfig||Te.shop||{}).name||"拼多多";Object.assign(this.defaultShareEntityConfig,{title:"".concat(e,"商城"),message:"风靡全国的拼单商城，优质商品新鲜直供，快一起来".concat(e,"吧"),thumbnailURL:Object(p.a)("/base/logo.jpg"),shareURL:"/"}),this.prepareShare(this.defaultShareEntityConfig,void 0,{skipShareContentCheck:!0})}}},{key:"_prepareShareByShareType",value:function(){var e=h()(s.a.mark(function e(){var t,r,n,a,i,o=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},r=o.length>1?o[1]:void 0,n=o.length>2?o[2]:void 0,this.setup(),this._managerReady){e.next=7;break}return e.next=7,this.waitManagerReady();case 7:return a=t.entityConfig,i=void 0===a?{}:a,this._buildThumbnailURL(i,r),this._buildShareURL(i,r),e.abrupt("return",this.shareManager.prepareShare(t,r,n));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"prepareShare",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.setup();var a=this.shareInfoFilter.filter(e),i=this._prepareShareByShareType(a,t,n);return!this._sdkPrepared&&i.then(function(e){r._checkSDKPrepared(a)},function(e){r._checkSDKPrepared(a)}),i}},{key:"prepareShareSafe",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.setup();var n=this.shareInfoFilter.filter(t),a=n.flowControllConfig,i=void 0===a?{}:a;if(!this._sdkPrepared&&!i.isSDKPrepare)return this.waitSDKReady().then(function(){return e._prepareShareByShareType(n,r)});var s=this._prepareShareByShareType(n,r);return!this._sdkPrepared&&s.then(function(t){e._checkSDKPrepared(n)},function(t){e._checkSDKPrepared(n)}),s}},{key:"waitSDKReady",value:function(){var e=this;return this.waitWeChatSDKReady().then(function(){return e.waitAppIDCacheBuild()})}},{key:"waitWeChatSDKReady",value:function(){var e=h()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sdkPrepared){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:if(!this.sdkReadyPromise){e.next=8;break}return e.abrupt("return",this.sdkReadyPromise);case 8:return e.next=10,this.shareManager.getShareControllerAsync();case 10:if(t=e.sent){e.next=13;break}return e.abrupt("return",Promise.resolve());case 13:return this.sdkReadyPromise=new Promise(function(e,r){t.once(E.a.ON_SDK_READY,function(){e()})}),e.abrupt("return",this.sdkReadyPromise);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"waitAppIDCacheBuild",value:function(){var e=h()(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=J.getInstance()).isInited()){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:if(!this._actualWeChatAppID){e.next=9;break}return e.abrupt("return",t.build({wechatAppID:this._actualWeChatAppID}));case 9:if(this.appIDReadyPromise){e.next=16;break}return e.next=12,this.shareManager.getShareControllerAsync();case 12:if(r=e.sent){e.next=15;break}return e.abrupt("return",Promise.resolve());case 15:this.appIDReadyPromise=new Promise(function(e,n){r.once(E.a.ON_SDK_READY,function(r){var n=r.wechatAppID,a=r.magicTrace;Promise.all([t.build({wechatAppID:n}),Oe.a.getInstance().build({magicTrace:a})]).then(function(){e()})})});case 16:return e.abrupt("return",this.appIDReadyPromise);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"waitManagerReady",value:function(){return this._managerReady?Promise.resolve():this._managerReadyPromise?this._managerReadyPromise:this._setupShareManager()}},{key:"share",value:function(){var e=h()(s.a.mark(function e(t,r){var n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),!r){e.next=5;break}return e.abrupt("return",this.prepareShareSafe(r,t).then(function(){return n.shareManager.share(t)}));case 5:if(this._managerReady){e.next=8;break}return e.next=8,this.waitManagerReady();case 8:return e.abrupt("return",this.shareManager.share(t));case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"_buildThumbnailURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.thumbnailURL;if(void 0!==r){var n=e.waterMark,a=r||"";void 0!==n&&null!==n||(n=Ie.DEFAULT),a=Pe(a,n),t===v.a.WECHAT_SESSION&&n===Ie.DEFAULT&&(a=Pe(a,Ie.WE_CHAT_MSG,!0)),a=(a||"").replace(/^\/\//,"http://"),e.thumbnailURL=a}}},{key:"_buildShareURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e.shareURL);if(r){if(e.urlWrapType!==ee.a.RAW){var n=new H.a(r),a=n.query||{},i=Object.keys(a).reduce(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Le.indexOf(t)>=0&&(e[t]=null),e},{}),s=Object(_.a)(!0),o={_wv:41729,_wvx:10};!Object(g.a)().isWeChatPlatform||t!==v.a.QQ_CHAT_SESSION&&t!==v.a.QQ_ZONE||(o.sf_tag="wechat"),t!==v.a.WECHAT_TIMELINE_IMAGE&&t!==v.a.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK||(o.from="qrImg");var h=n.pathname||"",u=Object.assign({},o,s,a,be,i),c=e.shareDomain||Te.shareDomain;e.shareURL=Object(Ce.a)(u,Object(d.h)(h),c)}}else delete e.shareURL}},{key:"_checkSDKPrepared",value:function(){var e=h()(s.a.mark(function e(t){var r,n,i,o,h,u,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.flowControllConfig,n=void 0===r?{}:r,i=t.otherConfig,o=void 0===i?{}:i,!n.isSDKPrepare||this._sdkPrepared){e.next=10;break}return this._sdkPrepared=!0,e.next=5,this.shareManager.getShareControllerAsync();case 5:h=e.sent,o.wechatAppID&&(this._actualWeChatAppID=o.wechatAppID),(u=o.shareTypeEnable)&&"object"===a()(u)&&(c=Object.keys(u).filter(function(e){return!u[e]}).map(function(e){return parseInt(e,10)}),h&&h.disableShare(c)),h&&h.emit(E.a.ON_SDK_READY,{wechatAppID:o.wechatAppID,magicTrace:o.magicTrace});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getShareManager",value:function(){return this.setup(),this.shareManager}},{key:"setupNativeShareButton",value:function(){var e=h()(s.a.mark(function e(t,r){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),this.shareManager){e.next=3;break}return e.abrupt("return");case 3:if(this._managerReady){e.next=6;break}return e.next=6,this.waitManagerReady();case 6:return e.abrupt("return",this.shareManager.setupNativeShareButton(t,r));case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}]),e}();ke.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return De||(De=new ke(e)),De};var Ne=ke,Me=r("A4fa"),we=r("6wpZ"),Ue=r("rUjM"),je=r("KxTr");r.d(t,"ShareErrorCode",function(){return He}),r.d(t,"ShareChannel",function(){return w}),r.d(t,"ShareEventType",function(){return E.a}),r.d(t,"ShareResult",function(){return R}),r.d(t,"ShareResultType",function(){return I.a}),r.d(t,"ShareType",function(){return v.a}),r.d(t,"ShareWaterMark",function(){return Ie}),r.d(t,"URLWrapType",function(){return ee.a}),r.d(t,"ShareForm",function(){return C.a}),r.d(t,"ShareMethod",function(){return m.a}),r.d(t,"ThirdPartyOpenType",function(){return Me.a}),r.d(t,"CipherConsumeMode",function(){return we.a}),r.d(t,"TPSelectCategory",function(){return Ue.a}),r.d(t,"CipherPasteType",function(){return je.a}),r.d(t,"setPageContext",function(){return ie.d});var He=A.b.ShareErrorCode,xe={};xe=Ne;t.default=xe}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-packet/js/pdd-mod/market-share_7f822dd4218e78cf161f.js.map