(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[4],{"/bZk":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a={DEFAULT:0,SHARE_PARAMS_NOT_VALID:1,SHARE_TYPE_DISABLED:2,SHARE_TYPE_NOT_FOUND:3,SHARE_ACTION_DISABLE:4,SHARE_STATUS_ILLEGAL:5,SHARE_NOT_SUPPORTED:6,SHARE_LIMITER_NOT_INIT:7};class s{constructor(e={}){this.errorCode=e.errorCode||a.DEFAULT,this.message=e.message||""}}s.create=e=>new s({errorCode:e}),s.ShareErrorCode=a,t.b=s},"1dcj":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a={DEFAULT:0,ANDROID_SP:1}},"2Goq":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class a{constructor(e={}){this._cacheMap={},this._cacheLimit=e.cacheLimit||20}getResponseByHash(e=""){const t=this._cacheMap[e];return t?t.response:null}cacheResponseByHash(e="",t){if(!e||!t)return;if((Object.keys(this._cacheMap).length||0)>=this._cacheLimit)return;const r=this._cacheMap[e];r?r.response=t:this._cacheMap[e]={response:t,count:1,trigger:!1,complete:!1}}_write(e="",t="",r){const a=this._cacheMap[t]||{};a[e]=r,this._cacheMap[t]=a}_read(e="",t=""){return(this._cacheMap[t]||{})[e]}getCountByHash(e=""){return this._read("count",e)||0}increaseCount(e=""){return this._write("count",e,this.getCountByHash()+1)}getShareID(e=""){return this._read("share_id",e)}setShareID(e="",t=null){return this._write("share_id",e,t)}}let s=null;function n(){return s||(s=new a(...arguments)),s}},"6GAH":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("KoDT");function s(){const e=Object(a.a)();return e.isWeChatMiniProgram?e.WxApp:e.isWeChatPlatform?e.WeChat:e.isQQPlatform?e.QQ:e.isNativePlatform||e.isTinyNativePlatform?"h5":""}},"6wpZ":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a={CONSUME:0,CONSUME_TIME_DIVIDE:1,CONSUME_RAW:2,RECYCLE:3,RECYCLE_TIME_DIVIDE:4,RECYCLE_RAW:5,RECYCLE_TIME_DIVIDE_MULTI:6}},"7sJ8":function(e,t,r){"use strict";t.a={CIPHER:"CIPHER_TEXT",LINK:"LINK",DOMAIN:"DOMAIN",NORMAL:"NORMAL",IMAGE:"IMAGE",COPY:"COPY"}},"8l/m":function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return o}));const a={};function s(e={}){Object.assign(a,e)}function n(){return a.pageId||""}function i(){return a.pageSN||""}function o(){return a.pageName||""}},A4fa:function(e,t,r){"use strict";t.a={DEFAULT:0,OPEN_WECHAT:1,OPEN_QQ:2,OPEN_WEIBO:3,OPEN_WECHAT_IOS_SILENT:101,OPEN_WECHAT_ANDROID_SILENT:201}},ANhw:function(e,t){var r,a;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&a.rotl(e,8)|4278255360&a.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=a.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,a=0;r<e.length;r++,a+=8)t[a>>>5]|=e[r]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],a=0;a<e.length;a+=3)for(var s=e[a]<<16|e[a+1]<<8|e[a+2],n=0;n<4;n++)8*a+6*n<=8*e.length?t.push(r.charAt(s>>>6*(3-n)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],a=0,s=0;a<e.length;s=++a%4)0!=s&&t.push((r.indexOf(e.charAt(a-1))&Math.pow(2,-2*s+8)-1)<<2*s|r.indexOf(e.charAt(a))>>>6-2*s);return t}},e.exports=a},BEtg:function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},EECB:function(e,t,r){"use strict";t.a={COMPLETE:0,SUCCESS:1,FAIL:2,CANCEL:3,ERROR:4}},KxTr:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a={DEFAULT:0,SPECIAL:1}},Ne86:function(e,t,r){"use strict";r.d(t,"d",(function(){return f})),r.d(t,"a",(function(){return m})),r.d(t,"c",(function(){return I})),r.d(t,"b",(function(){return R}));var a=r("QILm"),s=r.n(a),n=r("q8Ib"),i=r("KoDT"),o=r("h3qu"),h=r("Upw4"),c=r("v1av"),l=r("Qm63"),u=r("2Goq"),_=r("dp2P"),p=r("T8QY"),E=r("XfDS"),S=r("oCc4");const d=["mobile.yangkeduo.com","m.hutaojie.com","panduoduo.yangkeduo.com"],f=(e={})=>{const t=e.shareURL||"",r=e.urlWrapType;if(r===_.a.DEFAULT||r===_.a.RAW)return Promise.resolve({missed:!0,realShareURL:t,targetShareURL:t});if(e.marketActivityID&&Object(_.b)(r)){const a=Object(_.d)(r)?n.b.WEIXIN_TINY_DOMAIN:n.b.SHORT_LINK,s=t.replace(/^(\w+:)?\/\//,""),i=Object(l.a)(e),o=Object(u.a)(),h=()=>{const h=new Promise(((i,o)=>{Object(n.c)(e.requestUsePost?"post":"get",{shareURL:s,marketActivityID:e.marketActivityID,platform:I(),shareDomainType:a,shortURLApi:e.shortURLApi,shortCommandApi:e.shortCommandApi,domainURLApi:e.domainURLApi,payloadMixin:e.payloadMixin}).then((e=>{if(e){const{domain:s="",shortURL:o,shareText:h,raw:c}=e;if(a===n.b.WEIXIN_TINY_DOMAIN)r===_.a.DOMAIN_REPLACE&&i(m(t,s));else if(a===n.b.SHORT_LINK)return void i({useShortURL:!0,realShareURL:o||t,targetShareURL:t,shareText:h,rawResponse:c})}i({realShareURL:t,targetShareURL:t})})).catch((e=>{o(e)}))}));return a===n.b.SHORT_LINK&&h.then((e=>{e&&e.useShortURL&&(o.cacheResponseByHash(i,e),o.setShareID(i,(new p.a(t).query||{}).refer_share_id))})),h};if(r===_.a.SERVER_SHORT_URL_WITH_CACHE){let e=o.getResponseByHash(i);return e?(o.increaseCount(i),Promise.resolve(e)):h()}return h()}if(r===_.a.MAGIC_TRACE){const e=c.a.getInstance().transform(t);return Promise.resolve({realShareURL:e,targetShareURL:e})}return r===_.a.MAGIC_TRACE_DYNAMIC?c.a.getInstance().transformByShareEntity(e).then((e=>({realShareURL:e,targetShareURL:e})),(()=>({realShareURL:t,targetShareURL:t}))):r===_.a.SERVER_QUERY_APPEND?Object(n.d)(e.requestUsePost?"post":"get",{shareURL:t,payloadMixin:e.payloadMixin,shortURLApi:e.shortURLApi}).then(((e={})=>{const r=e&&e.code_method;if(r)return{useCipher:r,realShareURL:t,targetShareURL:t};{const{share_title:r,share_img:a,dev_infos:n}=e,i=s()(e,["share_title","share_img","dev_infos"]),o=Object(S.a)(i,t);return{appendQuery:i,categoryShareInfo:{title:r,thumbnailURL:a},realShareURL:o,targetShareURL:o,tpInfos:n}}})):Promise.resolve({missed:!0,realShareURL:t,targetShareURL:t})},m=(e,t)=>{const r=Object(S.a)({},e,Object(E.a)(t));return{targetShareURL:r,realShareURL:r}},I=()=>{const e=Object(i.a)();return e.platform===o.a.PddAndroid?n.a.ANDROID:e.platform===o.a.PddIOS?n.a.IOS:n.a.WECHAT},R=(e,t)=>{if(!Object(h.a)(e))return t;const r=new p.a(t).hostname;return d.indexOf(r)<0&&(t=t.replace("//"+r,"//mobile.yangkeduo.com")),t}},Qm63:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("oCc4"),s=r("aCH8"),n=r.n(s);function i(e={}){const t=e.shareURL,r=Object(a.a)({refer_share_id:null,refer_share_uid:null,refer_share_channel:null,refer_share_uin:null},t),s=e.payloadMixin||{},i=JSON.stringify(s);return n()(r+i)}},T8QY:function(e,t,r){"use strict";t.a=class{constructor(e=""){this.hostname="",this.origin="",this.pagename="",this.pathname="",this.port=0,this.protocol="",this.query={},this.search="",this.hashTag="",this.parseURL(e)}parseURL(e){const t=e.split("#"),r=t[0]||"";this.hashTag=t[1]||"";const a=r.split("?");let s=a[0]||"";const n=a[1]||"";this.search="?"+n,this.query=(n.split("&")||[]).reduce(((e,t="")=>{const r=t.split("=");let a,s;try{a=decodeURIComponent(r[0]||""),s=decodeURIComponent(r[1]||"")}catch(n){a=""}return a&&(e[a]=s),e}),{});const i=s.match(/^([a-zA-Z]+:)\/\//)||[];this.protocol=i[1]||"";i[0]&&(s=s.replace(i[0],""));const o=s.match(/^((:?[a-zA-Z0-9](:?[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6})(:\d+)?\//)||[],[h,c]=(o[0]||"").replace(/\//g,"").split(":");this.hostname=h,this.port=parseInt(c||0,10),o[0]&&(s=s.replace(o[0],"")),this.protocol&&this.hostname&&(this.origin=`${this.protocol}//${this.hostname}`),this.pathname="/"+s.replace(/^\//,"");const l=s.match(/\/?(\w+\.html)$/)||[];this.pagename=l[1]||""}}},Upw4:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("a/1V");const s=[a.a.QQ_CHAT_SESSION,a.a.QQ_ZONE,a.a.QQ_CHAT_SESSION_IMAGE,a.a.QQ_ZONE_IMAGE],n=e=>s.indexOf(e)>=0},W9H9:function(e,t,r){"use strict";t.a={DEFAULT:"",COMMAND:"kouling",IMAGE:"image",TEXT:"text",CARD:"card",WXAPP_CARD:"custom_card",COPY_LINK:"text"}},WiBJ:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var a=r("dp2P"),s=r("W9H9"),n=r("7sJ8");function i(e={}){return{title:e.title,message:e.message,thumb_url:e.thumbnailURL,share_url:e.shareURL}}function o(e={},t){return Object(a.c)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===s.a.COMMAND?n.a.CIPHER:Object(a.c)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===s.a.TEXT?n.a.LINK:Object(a.d)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(t)===s.a.CARD?n.a.DOMAIN:e.getShareForm(t)===s.a.IMAGE?n.a.IMAGE:n.a.NORMAL}},XfDS:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("KoDT");const s="undefined"!=typeof window;function n(e=""){return e.match(/^http:?/)?e:Object(a.a)().isNativePlatform||!s?"http://"+e:location.protocol?`${location.protocol}//${e}`:void 0}},YSLc:function(e,t,r){"use strict";t.a={DEFAULT:"",SYSTEM:"system",SDK:"sdk",MANUAL:"manual",EXTENSION:"extension",STAND:"stand"}},"a/1V":function(e,t,r){"use strict";t.a={DEFAULT:0,WECHAT_SESSION:1,WECHAT_TIMELINE:2,WEIBO:3,QQ_CHAT_SESSION:4,QQ_ZONE:5,TENCENT_WEIBO:6,WECHAT_SESSION_APP:7,WECHAT_TIMELINE_IMAGE:8,WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:9,WECHAT_SESSION_IMAGE:10,QQ_CHAT_SESSION_IMAGE:11,QQ_ZONE_IMAGE:12,WEIBO_IMAGE:13,WECHAT_TIMELINE_IMAGES:15,WECHAT_SESSION_TEXT_WITH_NO_SDK:16,WECHAT_SESSION_TEXT:17,IOS_SYSTEM_SHARE_CARD:18,WECHAT_SESSION_IMAGE_WITH_NO_SDK:19,WECHAT_SESSION_IMAGES_WITH_NO_SDK:20,WECHAT_TIMELINE_TEXT:21,SHARE_IMAGE_PASSIVELY:22,COPY_LINK:23,WECHAT_SESSION_MUSIC:24,WECHAT_SESSION_VIDEO:25,COPY_CIPHER:9995,WECHAT_SESSION_CARD_WITH_NO_SDK:9996,WECHAT_TIMELINE_CARD_WITH_NO_SDK:9997,FRIENDS:9998,WECHAT_BIG_IMAGE:9999,PIN_TIMELINE:1e4}},aCH8:function(e,t,r){var a,s,n,i,o;a=r("ANhw"),s=r("mmNF").utf8,n=r("BEtg"),i=r("mmNF").bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):s.stringToBytes(e):n(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var r=a.bytesToWords(e),h=8*e.length,c=1732584193,l=-271733879,u=-1732584194,_=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[h>>>5]|=128<<h%32,r[14+(h+64>>>9<<4)]=h;var E=o._ff,S=o._gg,d=o._hh,f=o._ii;for(p=0;p<r.length;p+=16){var m=c,I=l,R=u,A=_;c=E(c,l,u,_,r[p+0],7,-680876936),_=E(_,c,l,u,r[p+1],12,-389564586),u=E(u,_,c,l,r[p+2],17,606105819),l=E(l,u,_,c,r[p+3],22,-1044525330),c=E(c,l,u,_,r[p+4],7,-176418897),_=E(_,c,l,u,r[p+5],12,1200080426),u=E(u,_,c,l,r[p+6],17,-1473231341),l=E(l,u,_,c,r[p+7],22,-45705983),c=E(c,l,u,_,r[p+8],7,1770035416),_=E(_,c,l,u,r[p+9],12,-1958414417),u=E(u,_,c,l,r[p+10],17,-42063),l=E(l,u,_,c,r[p+11],22,-1990404162),c=E(c,l,u,_,r[p+12],7,1804603682),_=E(_,c,l,u,r[p+13],12,-40341101),u=E(u,_,c,l,r[p+14],17,-1502002290),c=S(c,l=E(l,u,_,c,r[p+15],22,1236535329),u,_,r[p+1],5,-165796510),_=S(_,c,l,u,r[p+6],9,-1069501632),u=S(u,_,c,l,r[p+11],14,643717713),l=S(l,u,_,c,r[p+0],20,-373897302),c=S(c,l,u,_,r[p+5],5,-701558691),_=S(_,c,l,u,r[p+10],9,38016083),u=S(u,_,c,l,r[p+15],14,-660478335),l=S(l,u,_,c,r[p+4],20,-405537848),c=S(c,l,u,_,r[p+9],5,568446438),_=S(_,c,l,u,r[p+14],9,-1019803690),u=S(u,_,c,l,r[p+3],14,-187363961),l=S(l,u,_,c,r[p+8],20,1163531501),c=S(c,l,u,_,r[p+13],5,-1444681467),_=S(_,c,l,u,r[p+2],9,-51403784),u=S(u,_,c,l,r[p+7],14,1735328473),c=d(c,l=S(l,u,_,c,r[p+12],20,-1926607734),u,_,r[p+5],4,-378558),_=d(_,c,l,u,r[p+8],11,-2022574463),u=d(u,_,c,l,r[p+11],16,1839030562),l=d(l,u,_,c,r[p+14],23,-35309556),c=d(c,l,u,_,r[p+1],4,-1530992060),_=d(_,c,l,u,r[p+4],11,1272893353),u=d(u,_,c,l,r[p+7],16,-155497632),l=d(l,u,_,c,r[p+10],23,-1094730640),c=d(c,l,u,_,r[p+13],4,681279174),_=d(_,c,l,u,r[p+0],11,-358537222),u=d(u,_,c,l,r[p+3],16,-722521979),l=d(l,u,_,c,r[p+6],23,76029189),c=d(c,l,u,_,r[p+9],4,-640364487),_=d(_,c,l,u,r[p+12],11,-421815835),u=d(u,_,c,l,r[p+15],16,530742520),c=f(c,l=d(l,u,_,c,r[p+2],23,-995338651),u,_,r[p+0],6,-198630844),_=f(_,c,l,u,r[p+7],10,1126891415),u=f(u,_,c,l,r[p+14],15,-1416354905),l=f(l,u,_,c,r[p+5],21,-57434055),c=f(c,l,u,_,r[p+12],6,1700485571),_=f(_,c,l,u,r[p+3],10,-1894986606),u=f(u,_,c,l,r[p+10],15,-1051523),l=f(l,u,_,c,r[p+1],21,-2054922799),c=f(c,l,u,_,r[p+8],6,1873313359),_=f(_,c,l,u,r[p+15],10,-30611744),u=f(u,_,c,l,r[p+6],15,-1560198380),l=f(l,u,_,c,r[p+13],21,1309151649),c=f(c,l,u,_,r[p+4],6,-145523070),_=f(_,c,l,u,r[p+11],10,-1120210379),u=f(u,_,c,l,r[p+2],15,718787259),l=f(l,u,_,c,r[p+9],21,-343485551),c=c+m>>>0,l=l+I>>>0,u=u+R>>>0,_=_+A>>>0}return a.endian([c,l,u,_])})._ff=function(e,t,r,a,s,n,i){var o=e+(t&r|~t&a)+(s>>>0)+i;return(o<<n|o>>>32-n)+t},o._gg=function(e,t,r,a,s,n,i){var o=e+(t&a|r&~a)+(s>>>0)+i;return(o<<n|o>>>32-n)+t},o._hh=function(e,t,r,a,s,n,i){var o=e+(t^r^a)+(s>>>0)+i;return(o<<n|o>>>32-n)+t},o._ii=function(e,t,r,a,s,n,i){var o=e+(r^(t|~a))+(s>>>0)+i;return(o<<n|o>>>32-n)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=a.wordsToBytes(o(e,t));return t&&t.asBytes?r:t&&t.asString?i.bytesToString(r):a.bytesToHex(r)}},bbLm:function(e,t,r){"use strict";r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return p}));var a=r("MVZn"),s=r.n(a),n=r("QILm"),i=r.n(n),o=r("mj+i"),h=r("oCc4"),c=r("T8QY"),l=r("3OdE");let u={};function _(e={}){const t=new c.a(e.shareURL).query||{};return{refer_share_id:t.refer_share_id,refer_share_uid:t.refer_share_uid,refer_share_channel:t.refer_share_channel,refer_share_uin:t.refer_share_uin}}function p(e=""){return e.replace(/^(?:https?:?)?\/\//,"https://")}"undefined"!=typeof window&&(u=l.a.get(location.host)||{}),t.a=function(e={},t={}){const r=e.miniObjectPath,a=new c.a(r),n=new c.a(a.query.target_page||""),l=n.query||{},E=t.appendQuery||{},S=s()(s()({},_(e)),E),{refer_share_uid:d}=S,f=i()(S,["refer_share_uid"]),m=e.shareDomain||u.shareDomain;if(l.specialUrl||l.src)return l.src?l.src=Object(h.a)(f,l.src,m):l.src=p(e.shareURL),`${a.pathname}?${Object(o.b)(Object.assign({},a.query,{target_page:`${n.pathname}?${Object(o.b)(l)}`}))}`;if(l.jump_url||l.launch_url){if(l.jump_url){const t=new c.a(l.jump_url);if(!t.hostname){const r=t.query;r.specialUrl&&(r.src?r.src=Object(h.a)(f,r.src,m):r.src=p(e.shareURL),l.jump_url=`${t.pathname}?${Object(o.b)(r)}`)}}return l.launch_url&&(l.launch_url=Object(h.a)(f,l.launch_url)),`${a.pathname}?${Object(o.b)(Object.assign({},a.query,{target_page:`${n.pathname}?${Object(o.b)(l)}`}))}`}return a.hostname||n.hostname||!a.query.target_page?`${a.pathname}?${Object(o.b)(Object.assign({},a.query,f))}`:`${a.pathname}?${Object(o.b)(Object.assign({},a.query,{target_page:`${n.pathname}?${Object(o.b)(Object.assign(l,f))}`}))}`}},chhR:function(e,t,r){"use strict";t.a={DEFAULT:0,ON_SHARE_TRIGGER:1,ON_SHARE_COMPLETED:2,SDK_INIT_FAILED:3,ON_SHARE_BUTTON_CLICKED:4,ON_SHARE_PREPARE:5,ON_SDK_READY:6,ON_SHARE_INTERRUPT:7,SHARE_LIMIT_LOAD_FAIL:8,PERFORM_LOG_FAILED:9,SHARE_REACH_LIMIT:10}},dKgK:function(e,t,r){"use strict";var a=r("+qE3"),s=r("/bZk"),n=r("gfNA"),i=r("a/1V"),o=r("chhR"),h=r("EECB");const{ShareErrorCode:c}=s.b;class l extends a.EventEmitter{constructor(e={}){super(e),this.ShareEntityClass=n.a,this._hasInited=!1,this.shareEntity=e.shareEntity,this.shareEntityMap=e.shareEntityMap||{},this.disableShareTypes=e.disableShareTypes||[]}initShare(){this._hasInited||(this._hasInited=!0,this.setMaxListeners(0),this._setupShareTypes(),this._setupPlatformShareSDK())}isInited(){return this._hasInited}share(e){return c.SHARE_ACTION_DISABLE}setShareCheck(e){}checkShareTypeEnable(e){return 0}_setupShareTypes(){return!0}_setupPlatformShareSDK(){return Promise.resolve()}getShareEntityByShareType(e=0,t){return e?this.shareEntityMap[e]||(t?null:this.shareEntity):this.shareEntity}refreshShare(e,t){return e?(t?this.shareEntityMap[t]=e:this.shareEntity=e,this._setupPlatformShareSDK()):Promise.resolve()}disableShare(e){if(e&&"number"==typeof e)this.disableShareTypes.indexOf(e)<0&&this.disableShareTypes.push(e);else{if("[object Array]"!==Object.prototype.toString.call(e))return;this.disableShareTypes=this.disableShareTypes.concat(e.filter((e=>(this.disableShareTypes||[]).indexOf(e)<0)))}!this._setupShareTypes()&&this._adjustMenu()}_adjustMenu(){}createShareEntity(e={},t,r){const a=this.ShareEntityClass||n.a;if(r)return new a(e);let s={};if(t){const r=this.shareEntityMap[t];s=r?Object.assign({},r,e):Object.assign({},this.shareEntity,e)}else s=Object.assign({},this.shareEntity,e);return new a(s)}setupNativeShareButton(e){return c.SHARE_NOT_SUPPORTED}copyCipher(){const e=i.a.COPY_CIPHER,t=this.getShareEntityByShareType(e),r=t.cipherScene&&"string"==typeof t.cipher;return!r&&this.emit(o.a.ON_SHARE_TRIGGER,{shareType:e}),t?(t.normalize(e).then(((t={})=>{r&&(this.emit(o.a.ON_SHARE_TRIGGER,{shareType:e,shareID:t.shareID}),delete t.shareID),this.emit(o.a.ON_SHARE_COMPLETED,{shareType:e,shareResultType:h.a.SUCCESS,content:t.title,rawResponse:t.rawResponse},this.getNormalizeErrorHandler(e))})),0):c.SHARE_PARAMS_NOT_VALID}getNormalizeErrorHandler(e){return(...t)=>{this.emit(o.a.ON_SHARE_COMPLETED,{shareType:e,shareResultType:h.a.FAIL,errorPayload:t})}}resetLimiter(){}}t.a=l},dp2P:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return i}));const a={DEFAULT:0,REDIRECT:1,SERVER_DOMAIN:2,SERVER_CONTROL:3,SERVER_SHORT_URL:4,RAW:5,SERVER_TINY_DOMAIN:6,SERVER_DOMAIN_BASE64:7,DOMAIN_REPLACE:8,MAGIC_TRACE:9,MAGIC_TRACE_DYNAMIC:10,SERVER_SHORT_URL_WITH_CACHE:11,SERVER_TP_APP:12,SERVER_TP_APP_CARD:13,SERVER_QUERY_APPEND:14,CATEGORY_PROCEDURE:15,CATEGORY_PROCEDURE_CUSTOM:16};function s(e){return[a.SERVER_CONTROL,a.SERVER_SHORT_URL,a.SERVER_TINY_DOMAIN,a.SERVER_DOMAIN_BASE64,a.DOMAIN_REPLACE,a.SERVER_SHORT_URL_WITH_CACHE].indexOf(e)>=0}function n(e){return[a.SERVER_CONTROL,a.SERVER_TINY_DOMAIN,a.SERVER_DOMAIN_BASE64,a.DOMAIN_REPLACE].indexOf(e)>=0}function i(e){return[a.SERVER_SHORT_URL,a.SERVER_SHORT_URL_WITH_CACHE,a.SERVER_TP_APP_CARD,a.CATEGORY_PROCEDURE,a.CATEGORY_PROCEDURE_CUSTOM].indexOf(e)>=0}t.a=a},gfNA:function(e,t,r){"use strict";r.d(t,"b",(function(){return h}));var a=r("oCc4"),s=r("dp2P"),n=r("W9H9"),i=r("YSLc"),o=r("Ne86");function h(e){const t=[];for(let r=1;r<arguments.length;++r)t.push(arguments[r]);return e.replace(/{(\d+)}/g,(function(e,r){return 0===t[r]?0:t[r]||""}))}t.a=class{constructor(e={}){this.title=e.title||"",this.message=e.message||"",this.shareURL=e.shareURL||"",this.targetShareURL="",this.realShareURL="",this.shareDomain=e.shareDomain||"",this.thumbnailURL=e.thumbnailURL||"",this.timelineDomain=e.timelineDomain||"",this.timelineAppId=e.timelineAppId||"",this.marketActivityID=e.marketActivityID||0,this.urlWrapType=e.urlWrapType||s.a.DEFAULT,this.shortURLApi=e.shortURLApi||"",this.domainURLApi=e.domainURLApi||"",this.payloadMixin=e.payloadMixin||null,this.requestUsePost=e.requestUsePost||!1,this.shortCommandApi=e.shortCommandApi||"",this.cipherProcessor=e.cipherProcessor}async normalize(e){return Promise.resolve({})}setShareURLQueries(e={}){this.urlWrapType!==s.a.RAW&&(this.shareID=e.refer_share_id,this.shareURL=Object(a.a)(e,this.shareURL))}getShareForm(e){return n.a.DEFAULT}getShareMethod(e){return i.a.DEFAULT}processCipher(){const e=Object.assign({},this),t={title:e.title};let r=t.title||"";return Object(o.d)(e).then((({targetShareURL:e,useShortURL:a,shareText:s,cipher:n})=>{n&&(t.cipher=n),this.targetShareURL=e;const i=a||n?s:"";return r=h(r,i||e,e,i),t.title=r,this.pcode=r,t}))}}},mmNF:function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},oCc4:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("mj+i"),s=r("T8QY");function n(e={},t="",r=""){return 0===window.location.href.indexOf("amcomponent://")&&(r=r||new s.a(t).origin),t=Object(a.a)(e,Object(a.h)(t||location.href)),r?`${r=r.replace(/\/$/g,"")}${Object(a.d)(t)}`:t}},q8Ib:function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return l}));var a=r("8l/m"),s=r("rIj9"),n=r("bbLm"),i=r("T8QY"),o=r("mj+i");const h={WEIXIN_TINY_DOMAIN:"weixin",SHORT_LINK:"link"},c={WECHAT:"h5",IOS:"ios",ANDROID:"android"};function l(e="",t={}){const r=Object(s.a)({pageInfo:{pageId:Object(a.a)()}},{defaultErrorHandler:e=>{}});let i=null,o={};o.share_refer=Object(n.b)({shareURL:t.shareURL}),t.payloadMixin&&"object"==typeof t.payloadMixin&&(o=Object.assign(o,t.payloadMixin));const h=t.shortURLApi||"api/flow/chron/share/miniprogram";return i="post"===e.toLowerCase()?r.post(h,o):r.get(h,{params:o}),i.then(((e={})=>e))}t.c=function(e="",t={}){const r=Object(s.a)({pageInfo:{pageId:Object(a.a)()}},{defaultErrorHandler:e=>{}});let c=null,l={};l.url=t.shareURL||"",l.activity=t.marketActivityID||0,l.platform=t.platform||"",l.share_refer=Object(n.b)({shareURL:t.shareURL}),l.page_sn=Object(a.c)(),t.payloadMixin&&"object"==typeof t.payloadMixin&&(l=Object.assign(l,t.payloadMixin));const u=t.urlAlias||"url_code",_=l[u];if(_&&"string"==typeof _){const e=new i.a(_).query||{};Object.assign(e,l.share_refer),l[u]=`${_.split("?")[0]||""}?${Object(o.b)(e)}`}let p="api/flow/audience/activity/domain/weixin";return t.shareDomainType===h.SHORT_LINK?p=t.shortURLApi?t.shortURLApi:t.shortCommandApi?t.shortCommandApi:"api/flow/audience/activity/domain/short_url":t.domainURLApi&&(p=t.domainURLApi),c="post"===e.toLowerCase()?r.post(p,l):r.get(p,{params:l}),c.then(((e={})=>({domain:e.domain,openAppID:e.open_app_id||"",shortURL:e.short_url||"",shareText:e.share_text||"",raw:e})))}},rUjM:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a={TP_FIRST:0,GENERAL_FIRST:1,GENERAL_ONLY:2}},v1av:function(e,t,r){"use strict";var a=r("T8QY"),s=r("oCc4"),n=r("8l/m"),i=r("rIj9");const o="api/flow/audience/share/trace";var h=r("WiBJ"),c=r("6GAH");function l(e,t){if(!(t&&t.key&&t.value&&t.trace))return e;const r=new a.a(e),{key:n,value:i}=t,o=t.trace;return Object(s.a)(Object.assign({[n]:i},r.query),o,r.origin)}class u{constructor(e={}){this._isInited=!1,this._magicTrace=null}build({magicTrace:e={}}){return this._isInited||e.key&&e.value&&e.trace&&(this._magicTrace=e,this._isInited=!0),Promise.resolve()}isInited(){return this._isInited}transform(e){return l(e,this._magicTrace)}transformByShareEntity(e={}){return function(e="",t={}){const r=Object(i.a)({pageInfo:{pageId:Object(n.a)()}},{defaultErrorHandler:e=>{}});let a=null,s={};return s.origin=t.platform||"",s.share_params=t.shareParams||{},s.page_sn=t.pageSn||Object(n.c)()+"",s.page_info=t.pageInfo||{page_name:Object(n.b)(),page_url:location&&location.href},t.payloadMixin&&"object"==typeof t.payloadMixin&&(s=Object.assign(s,t.payloadMixin)),a="post"===e.toLowerCase()?r.post(o,s):r.get(o,{params:s}),a.then(((e={})=>e.magic_trace))}("post",{platform:Object(c.a)(),shareParams:Object(h.b)(e),payloadMixin:e.payloadMixin}).then((t=>l(e.shareURL,t)))}}let _=null;u.getInstance=function(e={}){return _||(_=new u(e)),_};t.a=u},z4CT:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("qnV/");function s({errorCode:e=0,message:t="",options:r={}}){Object(a.c)(new Error("share error"),{share_error_code:e,share_error_message:t,params:JSON.stringify(r)})}},zRS3:function(e,t,r){"use strict";r.r(t);var a=r("CSCl"),s=r("SxTj"),n=r("mj+i"),i=r("a/1V"),o=r("chhR"),h=r("KoDT"),c=r("MVZn"),l=r.n(c),u=r("eHaf"),_=r("h3qu"),p=r("YSLc");var E={SUCCESS:"success",FAIL:"fail",CANCEL:"cancel",COMPLETE:"complete",ERROR:"error"},S=r("EECB"),d=r("/bZk"),f=r("W9H9"),m=r("dKgK");const I={SHARE:"share",SHARE_RESULT:"share_result"};class R{constructor(e={}){this.userID=e.userID||"",this.uin=e.uin||"",this.shareID=e.shareID||"",this.op=e.op||"event",this.subOP=e.subOP||"",this.shareChannel=e.shareChannel||"",this.shareResult=e.shareResult||"",this.shareURL=e.shareURL||"",this.shareDomain=e.shareDomain||"",this.shareForm=e.shareForm||"",this.shareMethod=e.shareMethod||"",this.shareAppID=e.shareAppID,this.pcode=e.pcode,this.wxShareCount=e.wxShareCount,this.cipherScene=e.cipherScene}normalize(e){if(this.subOP===I.SHARE)return{op:this.op,sub_op:this.subOP,share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,pcode:this.pcode,pcode_scene:this.cipherScene};if(this.subOP===I.SHARE_RESULT){const e={op:this.op,sub_op:this.subOP,event:"share_result",share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_result:this.shareResult,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,wx_share_count:this.wxShareCount,pcode:this.pcode,pcode_scene:this.cipherScene};return this.walrusID&&(e.walrus_id=this.walrusID,e.walrus_type=this.walrusType),e}return{}}getShareURLTrackingQueries(){return R.getTrackingQueries(this)}}R.TRACKING_SUB_OP=I,R.getTrackingQueries=(e={})=>({refer_share_id:e.shareID,refer_share_uin:e.uin,refer_share_channel:e.shareChannel});var A=R,C=r("fkZF");function g(e){return e=e||32,Object(C.a)(e)}var T={UNKNOWN:"unknown",APP_MESSAGE:"message",TIMELINE:"timeline",QQ:"qq",QQ_ZONE:"qzone",QQ_WEIBO:"qq_weibo",SINA_WEIBO:"weibo",CLIPBOARD:"copy_link"};const O={1:T.APP_MESSAGE,2:T.TIMELINE,3:T.SINA_WEIBO,4:T.QQ,5:T.QQ_ZONE,8:T.TIMELINE,9:T.TIMELINE,10:T.APP_MESSAGE,11:T.QQ,12:T.QQ_ZONE,13:T.SINA_WEIBO,16:T.APP_MESSAGE,17:T.APP_MESSAGE,18:T.APP_MESSAGE,19:T.APP_MESSAGE,20:T.APP_MESSAGE,21:T.TIMELINE,23:T.CLIPBOARD,24:T.APP_MESSAGE,25:T.APP_MESSAGE,[i.a.COPY_CIPHER]:T.CLIPBOARD,[i.a.WECHAT_SESSION_CARD_WITH_NO_SDK]:T.APP_MESSAGE,[i.a.WECHAT_TIMELINE_CARD_WITH_NO_SDK]:T.TIMELINE};function y(e=0){return O[e]||T.UNKNOWN}var L=r("T8QY"),P=r("3sKm");let D="",b="";function N(){return Promise.all([Object(P.b)().then((e=>{D=e})).catch((e=>{})),Object(P.c)().then((e=>{b=e})).catch((e=>{}))])}function M(){return b}function U(){return D}var H=r("MpJ2");const w=0,j=1,v={[T.UNKNOWN]:0,[T.APP_MESSAGE]:1,[T.TIMELINE]:1,[T.QQ]:2,[T.QQ_ZONE]:2,[T.QQ_WEIBO]:2,[T.SINA_WEIBO]:3};var W=function(e){return v[e]||w};class k{constructor(){this._venderAppIDs={},this._isInited=!1}build({wechatAppID:e}){return this._isInited?Promise.resolve():(this._isInited=!0,Object(h.a)().isNativePlatform?this._buildNativeCache():Object(h.a)().isWeChatPlatform?this._buildWeChatCache(e):Promise.resolve())}isInited(){return this._isInited}_buildNativeCache(){return(e=[j],Object(h.a)().statisfy("4.49.0","4.49.0","greaterThan")?Array.isArray(e)?Object(H.g)("JSShare","venderAppIds",{channels:e}):Promise.reject({message:"invalid params"}):Promise.reject({message:"not support"})).then(((e={})=>{this._venderAppIDs=Object.assign(this._venderAppIDs,e)})).catch((()=>Promise.resolve()));var e}_buildWeChatCache(e){return this._venderAppIDs[j]=e,Promise.resolve()}getAppIDSync(e){const t=W(e);return this._venderAppIDs[t]}}let B=null;k.getInstance=function(e){return B||(B=new k(e)),B};var x=k,Q=r("2Goq"),F=r("dp2P"),G=r("Qm63"),K=r("8l/m");const{ShareErrorCode:Y}=d.b,{TRACKING_SUB_OP:V}=A;var q=class{constructor(e={}){this.transparentTransmission=e.transparentTransmission||{},this.trackingEntity=null,this.onTriggerListener=null,this.onCompletedListener=null,this.shareController=null,this._cachePrepareInfo={}}listen(e){e&&e instanceof m.a&&(this.disconnect(),this.shareController=e,this._setupDefaultTrackListener(e))}disconnect(){this.shareController&&this._removeDefaultTrackListener(this.shareController)}updateTrackerTrans(e){this.transparentTransmission=Object.assign({},this.transparentTransmission,e)}_setupDefaultTrackListener(e){this._removeDefaultTrackListener(e),this.onPrepareListener=this._onDefaultSharePrepare.bind(this),this.onTriggerListener=this._onDefaultShareTrigger.bind(this),this.onCompletedListener=this._onDefaultShareCompleted.bind(this),e.on(o.a.ON_SHARE_PREPARE,this.onPrepareListener),e.on(o.a.ON_SHARE_TRIGGER,this.onTriggerListener),e.on(o.a.ON_SHARE_COMPLETED,this.onCompletedListener)}_removeDefaultTrackListener(e){this.onPrepareListener&&e.removeListener(o.a.ON_SHARE_PREPARE,this.onPrepareListener),this.onTriggerListener&&e.removeListener(o.a.ON_SHARE_TRIGGER,this.onTriggerListener),this.onCompletedListener&&e.removeListener(o.a.ON_SHARE_COMPLETED,this.onCompletedListener)}_sendLog(e={}){const t=Object.assign(e,this.transparentTransmission);Object(u.d)(l()({page_id:Object(K.a)(),page_name:Object(K.b)(),page_sn:Object(K.c)()},t))}_onDefaultSharePrepare({shareType:e}){if(this._cachePrepareInfo[e]){const t=this.shareController.getShareEntityByShareType(e)||{},r=this._cachePrepareInfo[e];return r.userID=U(),r.uin=M(),void t.setShareURLQueries(A.getTrackingQueries(r))}const t=this.shareController.getShareEntityByShareType(e),r={userID:U(),uin:M(),shareID:this._getCachedShareID(t)||g(),shareChannel:y(e)};t&&t.setShareURLQueries(A.getTrackingQueries(r)),this._cachePrepareInfo[e]=r}_onDefaultShareTrigger({shareType:e,shareID:t}){if(e===i.a.PIN_TIMELINE||Object(h.a)().isWeChatMiniProgram&&e===i.a.WECHAT_SESSION)return 0;const r=this.shareController.getShareEntityByShareType(e)||{},a=this._cachePrepareInfo[e];this._cachePrepareInfo[e]=null;const s=y(e),n=x.getInstance();if(this.trackingEntity=new A(Object.assign({userID:U(),uin:M(),shareID:this._getCachedShareID(r)||g(),subOP:V.SHARE,shareChannel:s,timelineDomain:r.timelineDomain,cipherScene:r.cipherScene,shareForm:r.getShareForm&&r.getShareForm(e),shareMethod:r.getShareMethod&&r.getShareMethod(e),shareAppID:n.getAppIDSync(s)},a,t?{shareID:t}:null)),!a&&r.setShareURLQueries(A.getTrackingQueries(this.trackingEntity)),r.getShareForm(e)!==f.a.COMMAND){const e=r.targetShareURL||r.shareURL;this.trackingEntity.shareURL=e,this.trackingEntity.shareDomain=new L.a(e).origin}this._sendLog(this.trackingEntity.normalize(e))}_onDefaultShareCompleted({shareType:e,shareResultType:t,useComplete:r,responseData:a={},tpInfo:s}){const n=Object(h.a)();if(e===i.a.PIN_TIMELINE||n.isWeChatMiniProgram&&e===i.a.WECHAT_SESSION)return 0;if(!this.trackingEntity)return Y.SHARE_STATUS_ILLEGAL;const o=this.shareController.getShareEntityByShareType(e)||{};let c=this.getShareResultByType(t);if(r&&(c=E.COMPLETE),o.getShareForm(e)!==f.a.COMMAND){const e=o.realShareURL||o.shareURL;this.trackingEntity.shareURL=e,this.trackingEntity.shareDomain=new L.a(e).origin}else this.trackingEntity.pcode=o.pcode;const l=(u=a)&&"object"==typeof u?"string"!=typeof u.wx_app_id?null:u.wx_app_id:null;var u;l&&(this.trackingEntity.shareAppID=l),a.hasOwnProperty("wx_share_count")&&(this.trackingEntity.wxShareCount=a.wx_share_count,delete a.wx_share_count),this.trackingEntity.subOP=V.SHARE_RESULT,this.trackingEntity.shareResult=c,s&&(this.trackingEntity.walrusID=s.group_id,this.trackingEntity.walrusType=s.dev_type),o.forceDowngrade||n.platform===_.a.PddIOS&&e===i.a.WECHAT_SESSION_TEXT_WITH_NO_SDK||i.a.COPY_LINK===e&&!n.isNativePlatform&&!n.isTinyNativePlatform||i.a.COPY_CIPHER===e||(this._sendLog(this.trackingEntity.normalize(e)),this.trackingEntity=null)}trackProlongation(e,t={},r){if(!this.trackingEntity)return!1;this.trackingEntity.shareMethod=p.a.MANUAL,this.trackingEntity.shareResult=E.COMPLETE;const a=Object.assign(this.trackingEntity.normalize(e),t);return this.trackingEntity=null,"function"==typeof r?r(a):this._sendLog(a),!0}getShareResultByType(e=0){switch(e){case S.a.COMPLETE:return E.COMPLETE;case S.a.SUCCESS:return E.SUCCESS;case S.a.FAIL:return E.FAIL;case S.a.CANCEL:return E.CANCEL;default:return E.ERROR}}_getCachedShareID(e){if(e.urlWrapType===F.a.SERVER_SHORT_URL_WITH_CACHE){const t=Object(Q.a)(),r=Object(G.a)(e);return t.getShareID(r)}}},$=r("rIj9");const Z="api/flow/audience/share/content";const z="api/flow/audience/share/perform";var X={REACH_HOUR_LIMIT:43367,REACH_DAY_LIMIT:43368};var J=class{constructor(e={}){this._shareController=null,this._onPerformShareErrorHandler=null}listen(e){e&&e instanceof m.a&&(this.disconnect(),this._shareController=e,this._setupListener(e))}disconnect(){this.removeListener()}_setupListener(e){this.removeListener(),this._onPerformShareErrorHandler=this._onPerformShareError.bind(this),e.on(o.a.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}removeListener(){this._shareController&&this._onPerformShareErrorHandler&&this._shareController.removeListener(o.a.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}_onPerformShareError(e={}){const t=e.error||{},r=e.shareType,a=parseInt(t.errorCode,10)||0;[X.REACH_DAY_LIMIT,X.REACH_HOUR_LIMIT].indexOf(a)>=0&&(this._shareController.emit(o.a.SHARE_REACH_LIMIT,{shareType:r,errorCode:a}),this.hideShareMenuOption(r))}hideShareMenuOption(e){const t=this._shareController;e&&t&&t.disableShare(e)}},ee=r("z4CT"),te=r("WiBJ"),re=r("6GAH");const ae="undefined"!=typeof window;const se=Object({BROWSER:!0,ISAVALON:!1,BUNDLE_PLATFORM:"production",BUILD_VERSION:"1655714937"}).HYBRID?async function(){return(await r.e(8).then(r.bind(null,"3Wbp"))).default}:async function(){const e=Object(h.a)();return e.isWeChatMiniProgram?(await r.e(11).then(r.bind(null,"YYoc"))).default:e.isWeChatPlatform?(await r.e(12).then(r.bind(null,"EP3j"))).default:e.isQQPlatform?(await r.e(9).then(r.bind(null,"gouW"))).default:e.isNativePlatform||e.isTinyNativePlatform?(await r.e(8).then(r.bind(null,"3Wbp"))).default:(await r.e(10).then(r.bind(null,"joqa"))).default};var ne=class{constructor(e={}){this.shareController=null,this.shareTracker=null,this.menuWatcher=null,this.platform=Object(re.a)(),this._disableContentCheck=!0,this._disablePerformShareLog=!1,this.controllerOptions=e.controllerOptions||{},this.noDefaultShare=e.noDefaultShare||!1,this.disableShare=e.disableShare||!1,this._initControllerPromise=null,this.loadErrorRetry=e.loadErrorRetry||0,this.enableInfiniteRetry=e.enableInfiniteRetry||!1,this._loadControllerFailed=!1}async setup(){if(!ae||this.shareController)return Promise.resolve();if(this._loadControllerFailed&&!this.enableInfiniteRetry)return Promise.reject(new Error("load controller failed"));this._setupShareTracker(),this._setupMenuWatcher(),this._initControllerPromise=this._initControllerPromise||this._setupController();let e=!1;try{await this._initControllerPromise}catch(t){if(this._initControllerPromise=null,!(this.loadErrorRetry>0))throw this._loadControllerFailed=!0,Object(ee.a)({errorCode:0,message:"加载分享控制器失败",options:{message:t&&t.message}}),t;Object(ee.a)({errorCode:0,message:"加载分享控制器失败, 剩余重试次数"+this.loadErrorRetry,options:{message:t&&t.message}}),this.loadErrorRetry--,e=!0}return e?this.setup():void 0}async _setupController(){if(this.shareController)return Promise.resolve();const e=this.controllerOptions,t=Object(h.a)(),r=await se();this.shareController=new r(e),t.isWeChatPlatform||t.isQQPlatform?this.noDefaultShare||this._prepareShareController():(t.isNativePlatform||t.isTinyNativePlatform)&&this.shareController.on(o.a.ON_SHARE_COMPLETED,(({shareType:e,shareResultType:t,nativeShareErrorCode:r})=>{t===S.a.FAIL&&[X.REACH_HOUR_LIMIT,X.REACH_DAY_LIMIT].indexOf(r)>=0&&(this.shareController.emit(o.a.SHARE_REACH_LIMIT,{shareType:e,errorCode:r}),Object(ee.a)({errorCode:r,message:"分享达到上限"}))})),this.shareTracker.listen(this.shareController),this.menuWatcher.listen(this.shareController),this._setupPerformShareLog()}_prepareShareController(){this.shareController&&!this.shareController.isInited()&&this.shareController.initShare()}_setupMenuWatcher(){this.menuWatcher||(this.menuWatcher=new J)}_setupShareTracker(){this.disableTracker||this.shareTracker||(this.shareTracker=new q({transparentTransmission:this.trackerTrans}))}_setupPerformShareLog(){this.shareController&&!Object(h.a)().isNativePlatform&&this.shareController.on(o.a.ON_SHARE_COMPLETED,((e={})=>{if(this._disablePerformShareLog||e.shareResultType!==S.a.SUCCESS||e.shareType===i.a.COPY_CIPHER)return;const t=e.shareType,r=this.getShareEntity(t);(function(e="",t={}){const r=Object($.a)({pageInfo:{pageId:Object(K.a)()}},{defaultErrorHandler:e=>{}});let a=null;const s={};return s.share_params=t.shareParams||{},s.share_type=t.shareType||0,s.share_method=t.shareMethod||"",s.origin=t.platform||"",s.page_sn=t.pageSn||Object(K.c)(),s.page_info=t.pageInfo||{page_name:Object(K.b)(),page_url:location&&location.href},s.extra=t.extra||{},a="post"===e.toLowerCase()?r.post(z,s):r.get(z,{params:s}),a})("post",{platform:this.platform,shareType:t,shareParams:Object(te.b)(r),shareMethod:Object(te.a)(r,t),extra:r.payloadMixin&&r.payloadMixin.extra}).catch((e=>{this.shareController.emit(o.a.PERFORM_LOG_FAILED,{shareType:t,error:e})}))}))}async share(e){if(!this.shareController||this.disableShare){const t=new Error("no controller exists");return t.shareType=e,Promise.reject(t)}await N(),this._prepareShareController();const t=()=>new Promise(((t,r)=>{const a=this,s=(e={})=>{const a=e.shareResultType;if(n(),S.a.SUCCESS===a)t(e);else{const t=new Error("分享失败");Object.assign(t,e),r(t)}};function n(){a.shareController.removeListener(o.a.ON_SHARE_COMPLETED,s)}this.shareController.on(o.a.ON_SHARE_COMPLETED,s);const i=this.shareController.share(e);if(i){n(),this.shareController.emit(o.a.ON_SHARE_INTERRUPT,{shareType:e,shareErrorType:i}),Object(ee.a)({errorCode:i,message:"分享前置流程异常",options:{shareType:e}});const t=new Error("分享前置流程异常");Object.assign(t,{shareType:e,shareErrorType:i}),r(t)}}));return Object(h.a)().isNativePlatform?this.shareController.waitShareLimiter().then((e=>t()),(e=>t())):t()}checkShareContent(e={}){return function(e="",t={}){const r=Object($.a)({pageInfo:{pageId:Object(K.a)()}},{defaultErrorHandler:e=>{}});let a=null;const s={};return s.share_params=t.shareParams||{},s.origin=t.platform||"",s.page_sn=t.pageSn||Object(K.c)()+"",s.page_info=t.pageInfo||{page_name:Object(K.b)(),page_url:location&&location.href},a="post"===e.toLowerCase()?r.post(Z,s):r.get(Z,{params:s}),a}("post",{platform:this.platform,shareParams:Object(te.b)(e)})}setContentCheck(e){this._disableContentCheck=!e}setPerformShareLog(e){this._disablePerformShareLog=!e}async prepareShare(e={},t,r={}){if(!this.shareController)return Promise.reject(new Error("no controller exists"));await N(),this._prepareShareController();const{entityConfig:a={}}=e,s=this.shareController.createShareEntity(a,t);return r.skipShareContentCheck||this._disableContentCheck||Object(h.a)().isNativePlatform?this.shareController.refreshShare(s,t):this.checkShareContent(s).then((()=>this.shareController.refreshShare(s,t)))}getShareController(){return this.shareController}async getShareControllerAsync(){return this.shareController?this.shareController:this._initControllerPromise?this._initControllerPromise.then((e=>this.shareController)).catch((e=>null)):this.setup().then((e=>this.shareController)).catch((e=>null))}getShareTracker(){return this.shareTracker}getShareEntity(e,t){return this.shareController?this.shareController.getShareEntityByShareType(e,t):null}setupNativeShareButton(e,t){this.shareController&&(this.shareController.removeAllListeners(o.a.ON_SHARE_BUTTON_CLICKED),"function"==typeof t&&this.shareController.on(o.a.ON_SHARE_BUTTON_CLICKED,t),this.shareController.setupNativeShareButton(e))}};const ie={title:0,message:0,thumbnailURL:0,shareURL:0,shareDomain:0,waterMark:0,urlWrapType:0,drawImageOptions:0,drawImageClass:0,marketActivityID:0,miniObjectPath:0,miniObjectID:0,useWxAppShare:0,shortURLApi:0,shortCommandApi:0,domainURLApi:0,forceDowngrade:0,payloadMixin:0,requestUsePost:0,excludeShareChoices:0,thirdPartyOpenType:0,needSharedAmount:0,cipherScene:0,consumeMode:0,activitySceneSn:0,tpSelectCategory:0,pinTimelineParams:0,wxAppRequestPayload:0,cipherProcessor:0,wxAppNavigatePayload:0,withShareTicket:0,systemShareMode:0,wechatMaskConfig:0},oe={noDefaultShare:0,isSDKPrepare:0,disableShare:0},he={wechatAppID:0,magicTrace:0,shareTypeEnable:0},ce={USELESS:-1,DEFAULT:0,OUT_OF_DATE:1,FORBIDDEN:2,ABANDONED:3};var le=class{constructor(e={}){this.cacheRaw=e.cacheRaw||!1,this.deleteAfterCollect=e.deleteAfterCollect||!1}filter(e={}){const t=this._filterShareEntity(e),r=this._filterShareConfigFlag(e),a=this._filterShareOther(e);return{_rawShareInfo:this.cacheRaw?e:null,entityConfig:t,flowControllConfig:r,otherConfig:a,compatibleShareConfig:{}}}_filterByItems(e={},t={}){const r=Object.keys(t)||[],a={};return r.forEach(((r,s)=>{const n=t[r];n===ce.FORBIDDEN||n===ce.ABANDONED?delete e[r]:void 0!==e[r]&&(a[r]=e[r],this.deleteAfterCollect&&delete e[r])})),a}_filterShareEntity(e){return this._filterByItems(e,ie)}_filterShareConfigFlag(e){return this._filterByItems(e,oe)}_filterShareOther(e){return this._filterByItems(e,he)}};var ue={DEFAULT:"!share_v2",WE_CHAT_MSG:"!share_v3",SHARE:"!share",TRANSPARENT:"!transparent",NONE:"",NO_LOGO:"!share_v4"},_e=r("3OdE"),pe=r("oCc4"),Ee=r("v1av");let Se={};"undefined"!=typeof window&&(Se=_e.a.get(location.host)||{});const de={code:null,from:null,isappinstalled:null,at:null,share_id:null,is_back:null,page_id:null,list_id:null},fe=["refer_page_name","refer_page_section","refer_page_element","refer_page_id","refer_page_sn","refer_page_el_sn","refer_mid","refer_adg","refer_cam","refer_ced"];function me(e="",t="",r=!1){return(e=e||"").indexOf("!")>=0&&!r?e:(e=e.split("!")[0],e+=t)}let Ie=null;class Re{constructor(e={}){this._hasInited=!1,this.opts=e||{},this.shopConfig=e.shopConfig,this.defaultShareEntityConfig={},this.shareManager=null,this.shareInfoFilter=null,this._sdkPrepared=!1}setup(){this._hasInited||(this._hasInited=!0,this._setupShareInfoFilter(),this._setupShareManager(),!(this.opts.shareManagerConfig||{}).noDefaultShare&&this._prepareDefaultShare(),this.waitAppIDCacheBuild())}_setupShareInfoFilter(){this.shareInfoFilter||(this.shareInfoFilter=new le(this.opts.shareInfoFilterConfig))}_setupShareManager(){if(!this.shareManager){const e=Object.assign({},{noDefaultShare:!1,disableShare:!1,useNativeShareButton:!1,loadErrorRetry:1,enableInfiniteRetry:!1},this.opts.shareManagerConfig);this.shareManager=new ne(e)}return this._managerReadyPromise=this._managerReadyPromise||this.shareManager.setup(),this._managerReadyPromise.then((e=>{this._managerReady=!0})).catch((e=>{this._managerReadyPromise=null})),this._managerReadyPromise}_prepareDefaultShare(){Object(h.a)().isWeChatMiniProgram||(Object.assign(this.defaultShareEntityConfig,{title:"拼多多商城",message:"风靡全国的拼单商城，优质商品新鲜直供，快一起来拼多多吧",thumbnailURL:Object(a.a)("/base/logo.jpg"),shareURL:"/"}),this.prepareShare(this.defaultShareEntityConfig,void 0,{skipShareContentCheck:!0}))}async _prepareShareByShareType(e={},t,r){this.setup(),this._managerReady||await this.waitManagerReady();const{entityConfig:a={}}=e;return this._buildThumbnailURL(a,t),this._buildShareURL(a,t),this.shareManager.prepareShare(e,t,r)}prepareShare(e,t,r={}){this.setup();const a=this.shareInfoFilter.filter(e),s=this._prepareShareByShareType(a,t,r);return!this._sdkPrepared&&s.then((e=>{this._checkSDKPrepared(a)}),(e=>{this._checkSDKPrepared(a)})),s}prepareShareSafe(e={},t){this.setup();const r=this.shareInfoFilter.filter(e),{flowControllConfig:a={}}=r;if(!this._sdkPrepared&&!a.isSDKPrepare)return this.waitSDKReady().then((()=>this._prepareShareByShareType(r,t)));const s=this._prepareShareByShareType(r,t);return!this._sdkPrepared&&s.then((e=>{this._checkSDKPrepared(r)}),(e=>{this._checkSDKPrepared(r)})),s}waitSDKReady(){return this.waitWeChatSDKReady().then((()=>this.waitAppIDCacheBuild()))}async waitWeChatSDKReady(){if(this._sdkPrepared)return Promise.resolve();if(this.sdkReadyPromise)return this.sdkReadyPromise;{const e=await this.shareManager.getShareControllerAsync();return e?(this.sdkReadyPromise=new Promise(((t,r)=>{e.once(o.a.ON_SDK_READY,(()=>{t()}))})),this.sdkReadyPromise):Promise.resolve()}}async waitAppIDCacheBuild(){const e=x.getInstance();if(e.isInited())return Promise.resolve();if(this._actualWeChatAppID)return e.build({wechatAppID:this._actualWeChatAppID});if(!this.appIDReadyPromise){const t=await this.shareManager.getShareControllerAsync();if(!t)return Promise.resolve();this.appIDReadyPromise=new Promise(((r,a)=>{t.once(o.a.ON_SDK_READY,(({wechatAppID:t,magicTrace:a})=>{Promise.all([e.build({wechatAppID:t}),Ee.a.getInstance().build({magicTrace:a})]).then((()=>{r()}))}))}))}return this.appIDReadyPromise}waitManagerReady(){return this._managerReady?Promise.resolve():this._managerReadyPromise?this._managerReadyPromise:this._setupShareManager()}async share(e,t){return this.setup(),t?this.prepareShareSafe(t,e).then((()=>this.shareManager.share(e))):(this._managerReady||await this.waitManagerReady(),this.shareManager.share(e))}_buildThumbnailURL(e={},t){const r=e.thumbnailURL;if(void 0===r)return;let a=e.waterMark,s=r||"";null==a&&(a=ue.DEFAULT),s=me(s,a),t===i.a.WECHAT_SESSION&&a===ue.DEFAULT&&(s=me(s,ue.WE_CHAT_MSG,!0)),s=(s||"").replace(/^\/\//,"http://"),e.thumbnailURL=s}_buildShareURL(e={},t,r={}){const a=e.shareURL;if(!a)return void delete e.shareURL;if(e.urlWrapType===F.a.RAW)return;const o=new L.a(a),c=o.query||{},l=Object.keys(c).reduce(((e,t="")=>(fe.indexOf(t)>=0&&(e[t]=null),e)),{}),u=Object(s.b)(!0),_={_wv:41729,_wvx:10};!Object(h.a)().isWeChatPlatform||t!==i.a.QQ_CHAT_SESSION&&t!==i.a.QQ_ZONE||(_.sf_tag="wechat"),t!==i.a.WECHAT_TIMELINE_IMAGE&&t!==i.a.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK||(_.from="qrImg");const p=o.pathname||"",E=Object.assign({},_,u,c,de,l),S=e.shareDomain||Se.shareDomain;e.shareURL=Object(pe.a)(E,Object(n.h)(p),S)}async _checkSDKPrepared({flowControllConfig:e={},otherConfig:t={}}){if(e.isSDKPrepare&&!this._sdkPrepared){this._sdkPrepared=!0;const e=await this.shareManager.getShareControllerAsync();t.wechatAppID&&(this._actualWeChatAppID=t.wechatAppID);const r=t.shareTypeEnable;if(r&&"object"==typeof r){const t=Object.keys(r).filter((e=>!r[e])).map((e=>parseInt(e,10)));e&&e.disableShare(t)}e&&e.emit(o.a.ON_SDK_READY,{wechatAppID:t.wechatAppID,magicTrace:t.magicTrace})}}getShareManager(){return this.setup(),this.shareManager}async setupNativeShareButton(e,t){if(this.setup(),this.shareManager)return this._managerReady||await this.waitManagerReady(),this.shareManager.setupNativeShareButton(e,t)}}Re.getInstance=(e={})=>(Ie||(Ie=new Re(e)),Ie);var Ae=Re,Ce=r("A4fa"),ge=r("6wpZ"),Te=r("rUjM"),Oe=r("KxTr"),ye=r("1dcj");r.d(t,"ShareErrorCode",(function(){return Le})),r.d(t,"ShareChannel",(function(){return T})),r.d(t,"ShareEventType",(function(){return o.a})),r.d(t,"ShareResult",(function(){return E})),r.d(t,"ShareResultType",(function(){return S.a})),r.d(t,"ShareType",(function(){return i.a})),r.d(t,"ShareWaterMark",(function(){return ue})),r.d(t,"URLWrapType",(function(){return F.a})),r.d(t,"ShareForm",(function(){return f.a})),r.d(t,"ShareMethod",(function(){return p.a})),r.d(t,"ThirdPartyOpenType",(function(){return Ce.a})),r.d(t,"CipherConsumeMode",(function(){return ge.a})),r.d(t,"TPSelectCategory",(function(){return Te.a})),r.d(t,"CipherPasteType",(function(){return Oe.a})),r.d(t,"SystemShareMode",(function(){return ye.a})),r.d(t,"setPageContext",(function(){return K.d}));const Le=d.b.ShareErrorCode;let Pe={};Pe=Ae;t.default=Pe}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-best-goods/js/pdd-mod/market-share_e5167e391ee325191b8d.module.js.map