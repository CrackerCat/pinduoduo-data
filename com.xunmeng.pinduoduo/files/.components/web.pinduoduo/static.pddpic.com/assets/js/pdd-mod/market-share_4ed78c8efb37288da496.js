(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[6],{"/bZk":function(e,r,t){"use strict";t.d(r,"a",function(){return i});var n=t("lwsE"),a=t.n(n),i={DEFAULT:0,SHARE_PARAMS_NOT_VALID:1,SHARE_TYPE_DISABLED:2,SHARE_TYPE_NOT_FOUND:3,SHARE_ACTION_DISABLE:4,SHARE_STATUS_ILLEGAL:5,SHARE_NOT_SUPPORTED:6,SHARE_LIMITER_NOT_INIT:7},s=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(this,e),this.errorCode=r.errorCode||i.DEFAULT,this.message=r.message||""};s.create=function(e){return new s({errorCode:e})},s.ShareErrorCode=i,r.b=s},"1dcj":function(e,r,t){"use strict";t.d(r,"a",function(){return n});var n={DEFAULT:0,ANDROID_SP:1}},"2Goq":function(e,r,t){"use strict";t.d(r,"a",function(){return l});var n=t("sXyB"),a=t.n(n),i=t("lwsE"),s=t.n(i),o=t("W8MJ"),h=t.n(o),u=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this._cacheMap={},this._cacheLimit=r.cacheLimit||20}return h()(e,[{key:"getResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=this._cacheMap[e];return r?r.response:null}},{key:"cacheResponseByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(e&&r&&!((Object.keys(this._cacheMap).length||0)>=this._cacheLimit)){var t=this._cacheMap[e];t?t.response=r:this._cacheMap[e]={response:r,count:1,trigger:!1,complete:!1}}}},{key:"_write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,n=this._cacheMap[r]||{};n[e]=t,this._cacheMap[r]=n}},{key:"_read",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(this._cacheMap[r]||{})[e]}},{key:"getCountByHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("count",e)||0}},{key:"increaseCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._write("count",e,this.getCountByHash()+1)}},{key:"getShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._read("share_id",e)}},{key:"setShareID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._write("share_id",e,r)}}]),e}(),c=null;function l(){return c||(c=a()(u,Array.prototype.slice.call(arguments))),c}},"6GAH":function(e,r,t){"use strict";t.d(r,"a",function(){return a});var n=t("KoDT");function a(){var e=Object(n.a)();return e.isWeChatMiniProgram?e.WxApp:e.isWeChatPlatform?e.WeChat:e.isQQPlatform?e.QQ:e.isNativePlatform||e.isTinyNativePlatform?"h5":""}},"6wpZ":function(e,r,t){"use strict";t.d(r,"a",function(){return n});var n={CONSUME:0,CONSUME_TIME_DIVIDE:1,CONSUME_RAW:2,RECYCLE:3,RECYCLE_TIME_DIVIDE:4,RECYCLE_RAW:5,RECYCLE_TIME_DIVIDE_MULTI:6}},"7sJ8":function(e,r,t){"use strict";r.a={CIPHER:"CIPHER_TEXT",LINK:"LINK",DOMAIN:"DOMAIN",NORMAL:"NORMAL",IMAGE:"IMAGE",COPY:"COPY"}},"8l/m":function(e,r,t){"use strict";t.d(r,"d",function(){return a}),t.d(r,"a",function(){return i}),t.d(r,"c",function(){return s}),t.d(r,"b",function(){return o});var n={};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(n,e)}function i(){return n.pageId||""}function s(){return n.pageSN||""}function o(){return n.pageName||""}},A4fa:function(e,r,t){"use strict";r.a={DEFAULT:0,OPEN_WECHAT:1,OPEN_QQ:2,OPEN_WEIBO:3,OPEN_WECHAT_IOS_SILENT:101,OPEN_WECHAT_ANDROID_SILENT:201}},ANhw:function(e,r){!function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,r){return e<<r|e>>>32-r},rotr:function(e,r){return e<<32-r|e>>>r},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var r=0;r<e.length;r++)e[r]=t.endian(e[r]);return e},randomBytes:function(e){for(var r=[];e>0;e--)r.push(Math.floor(256*Math.random()));return r},bytesToWords:function(e){for(var r=[],t=0,n=0;t<e.length;t++,n+=8)r[n>>>5]|=e[t]<<24-n%32;return r},wordsToBytes:function(e){for(var r=[],t=0;t<32*e.length;t+=8)r.push(e[t>>>5]>>>24-t%32&255);return r},bytesToHex:function(e){for(var r=[],t=0;t<e.length;t++)r.push((e[t]>>>4).toString(16)),r.push((15&e[t]).toString(16));return r.join("")},hexToBytes:function(e){for(var r=[],t=0;t<e.length;t+=2)r.push(parseInt(e.substr(t,2),16));return r},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(r.charAt(a>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|r.indexOf(e.charAt(n))>>>6-2*a);return t}};e.exports=t}()},BEtg:function(e,r){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},EECB:function(e,r,t){"use strict";r.a={COMPLETE:0,SUCCESS:1,FAIL:2,CANCEL:3,ERROR:4}},KxTr:function(e,r,t){"use strict";t.d(r,"a",function(){return n});var n={DEFAULT:0,SPECIAL:1}},Ne86:function(e,r,t){"use strict";t.d(r,"d",function(){return S}),t.d(r,"a",function(){return v}),t.d(r,"c",function(){return g}),t.d(r,"b",function(){return y});var n=t("QILm"),a=t.n(n),i=t("q8Ib"),s=t("KoDT"),o=t("h3qu"),h=t("Upw4"),u=t("v1av"),c=t("Qm63"),l=t("2Goq"),f=t("dp2P"),p=t("T8QY"),_=t("XfDS"),d=t("oCc4"),E=["mobile.yangkeduo.com","m.hutaojie.com","panduoduo.yangkeduo.com"],S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.shareURL||"",t=e.urlWrapType;if(t===f.a.DEFAULT||t===f.a.RAW)return Promise.resolve({missed:!0,realShareURL:r,targetShareURL:r});if(e.marketActivityID&&Object(f.b)(t)){var n=Object(f.d)(t)?i.b.WEIXIN_TINY_DOMAIN:i.b.SHORT_LINK,s=r.replace(/^(\w+:)?\/\//,""),o=Object(c.a)(e),h=Object(l.a)(),_=function(){var a=new Promise(function(a,o){Object(i.c)(e.requestUsePost?"post":"get",{shareURL:s,marketActivityID:e.marketActivityID,platform:g(),shareDomainType:n,shortURLApi:e.shortURLApi,shortCommandApi:e.shortCommandApi,domainURLApi:e.domainURLApi,payloadMixin:e.payloadMixin}).then(function(e){if(e){var s=e.domain,o=void 0===s?"":s,h=e.shortURL,u=e.shareText,c=e.raw;if(n===i.b.WEIXIN_TINY_DOMAIN)t===f.a.DOMAIN_REPLACE&&a(v(r,o));else if(n===i.b.SHORT_LINK)return void a({useShortURL:!0,realShareURL:h||r,targetShareURL:r,shareText:u,rawResponse:c})}a({realShareURL:r,targetShareURL:r})}).catch(function(e){o(e)})});return n===i.b.SHORT_LINK&&a.then(function(e){e&&e.useShortURL&&(h.cacheResponseByHash(o,e),h.setShareID(o,(new p.a(r).query||{}).refer_share_id))}),a};if(t===f.a.SERVER_SHORT_URL_WITH_CACHE){var E=h.getResponseByHash(o);return E?(h.increaseCount(o),Promise.resolve(E)):_()}return _()}if(t===f.a.MAGIC_TRACE){var S=u.a.getInstance().transform(r);return Promise.resolve({realShareURL:S,targetShareURL:S})}return t===f.a.MAGIC_TRACE_DYNAMIC?u.a.getInstance().transformByShareEntity(e).then(function(e){return{realShareURL:e,targetShareURL:e}},function(){return{realShareURL:r,targetShareURL:r}}):t===f.a.SERVER_QUERY_APPEND?Object(i.d)(e.requestUsePost?"post":"get",{shareURL:r,payloadMixin:e.payloadMixin,shortURLApi:e.shortURLApi}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e&&e.code_method;if(t)return{useCipher:t,realShareURL:r,targetShareURL:r};var n=e.share_title,i=e.share_img,s=e.dev_infos,o=a()(e,["share_title","share_img","dev_infos"]),h=Object(d.a)(o,r);return{appendQuery:o,categoryShareInfo:{title:n,thumbnailURL:i},realShareURL:h,targetShareURL:h,tpInfos:s}}):Promise.resolve({missed:!0,realShareURL:r,targetShareURL:r})},v=function(e,r){var t=Object(d.a)({},e,Object(_.a)(r));return{targetShareURL:t,realShareURL:t}},g=function(){var e=Object(s.a)();return e.platform===o.a.PddAndroid?i.a.ANDROID:e.platform===o.a.PddIOS?i.a.IOS:i.a.WECHAT},y=function(e,r){if(!Object(h.a)(e))return r;var t=new p.a(r).hostname;return E.indexOf(t)<0&&(r=r.replace("//".concat(t),"//".concat("mobile.yangkeduo.com"))),r}},Qm63:function(e,r,t){"use strict";t.d(r,"a",function(){return s});var n=t("oCc4"),a=t("aCH8"),i=t.n(a);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.shareURL,t=Object(n.a)({refer_share_id:null,refer_share_uid:null,refer_share_channel:null,refer_share_uin:null},r),a=e.payloadMixin||{},s=JSON.stringify(a);return i()(t+s)}},T8QY:function(e,r,t){"use strict";var n=t("J4zp"),a=t.n(n),i=t("lwsE"),s=t.n(i),o=t("W8MJ"),h=t.n(o),u=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s()(this,e),this.hostname="",this.origin="",this.pagename="",this.pathname="",this.port=0,this.protocol="",this.query={},this.search="",this.hashTag="",this.parseURL(r)}return h()(e,[{key:"parseURL",value:function(e){var r=e.split("#"),t=r[0]||"";this.hashTag=r[1]||"";var n=t.split("?"),i=n[0]||"",s=n[1]||"";this.search="?"+s,this.query=(s.split("&")||[]).reduce(function(e){var r,t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split("=");try{r=decodeURIComponent(n[0]||""),t=decodeURIComponent(n[1]||"")}catch(e){r=""}return r&&(e[r]=t),e},{});var o=i.match(/^([a-zA-Z]+:)\/\//)||[];this.protocol=o[1]||"";o[0]&&(i=i.replace(o[0],""));var h=i.match(/^((:?[a-zA-Z0-9](:?[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6})(:\d+)?\//)||[],u=(h[0]||"").replace(/\//g,"").split(":"),c=a()(u,2),l=c[0],f=c[1];this.hostname=l,this.port=parseInt(f||0,10),h[0]&&(i=i.replace(h[0],"")),this.protocol&&this.hostname&&(this.origin="".concat(this.protocol,"//").concat(this.hostname)),this.pathname="/"+i.replace(/^\//,"");var p=i.match(/\/?(\w+\.html)$/)||[];this.pagename=p[1]||""}}]),e}();r.a=u},Upw4:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var n=t("a/1V"),a=[n.a.QQ_CHAT_SESSION,n.a.QQ_ZONE,n.a.QQ_CHAT_SESSION_IMAGE,n.a.QQ_ZONE_IMAGE],i=function(e){return a.indexOf(e)>=0}},W9H9:function(e,r,t){"use strict";r.a={DEFAULT:"",COMMAND:"kouling",IMAGE:"image",TEXT:"text",CARD:"card",WXAPP_CARD:"custom_card",COPY_LINK:"text"}},WiBJ:function(e,r,t){"use strict";t.d(r,"b",function(){return s}),t.d(r,"a",function(){return o});var n=t("dp2P"),a=t("W9H9"),i=t("7sJ8");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title,message:e.message,thumb_url:e.thumbnailURL,share_url:e.shareURL}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return Object(n.c)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(r)===a.a.COMMAND?i.a.CIPHER:Object(n.c)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(r)===a.a.TEXT?i.a.LINK:Object(n.d)(e.urlWrapType)&&e.marketActivityID&&e.getShareForm(r)===a.a.CARD?i.a.DOMAIN:e.getShareForm(r)===a.a.IMAGE?i.a.IMAGE:i.a.NORMAL}},XfDS:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var n=t("KoDT"),a="undefined"!=typeof window;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.match(/^http:?/)?e:Object(n.a)().isNativePlatform||!a?"http://".concat(e):location.protocol?"".concat(location.protocol,"//").concat(e):void 0}},YSLc:function(e,r,t){"use strict";r.a={DEFAULT:"",SYSTEM:"system",SDK:"sdk",MANUAL:"manual",EXTENSION:"extension",STAND:"stand"}},"a/1V":function(e,r,t){"use strict";r.a={DEFAULT:0,WECHAT_SESSION:1,WECHAT_TIMELINE:2,WEIBO:3,QQ_CHAT_SESSION:4,QQ_ZONE:5,TENCENT_WEIBO:6,WECHAT_SESSION_APP:7,WECHAT_TIMELINE_IMAGE:8,WECHAT_TIMELINE_IMAGE_WITH_NO_SDK:9,WECHAT_SESSION_IMAGE:10,QQ_CHAT_SESSION_IMAGE:11,QQ_ZONE_IMAGE:12,WEIBO_IMAGE:13,WECHAT_TIMELINE_IMAGES:15,WECHAT_SESSION_TEXT_WITH_NO_SDK:16,WECHAT_SESSION_TEXT:17,IOS_SYSTEM_SHARE_CARD:18,WECHAT_SESSION_IMAGE_WITH_NO_SDK:19,WECHAT_SESSION_IMAGES_WITH_NO_SDK:20,WECHAT_TIMELINE_TEXT:21,SHARE_IMAGE_PASSIVELY:22,COPY_LINK:23,WECHAT_SESSION_MUSIC:24,WECHAT_SESSION_VIDEO:25,COPY_CIPHER:9995,WECHAT_SESSION_CARD_WITH_NO_SDK:9996,WECHAT_TIMELINE_CARD_WITH_NO_SDK:9997,FRIENDS:9998,WECHAT_BIG_IMAGE:9999,PIN_TIMELINE:1e4}},aCH8:function(e,r,t){!function(){var r=t("ANhw"),n=t("mmNF").utf8,a=t("BEtg"),i=t("mmNF").bin,s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):n.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var o=r.bytesToWords(e),h=8*e.length,u=1732584193,c=-271733879,l=-1732584194,f=271733878,p=0;p<o.length;p++)o[p]=16711935&(o[p]<<8|o[p]>>>24)|4278255360&(o[p]<<24|o[p]>>>8);o[h>>>5]|=128<<h%32,o[14+(h+64>>>9<<4)]=h;var _=s._ff,d=s._gg,E=s._hh,S=s._ii;for(p=0;p<o.length;p+=16){var v=u,g=c,y=l,m=f;c=S(c=S(c=S(c=S(c=E(c=E(c=E(c=E(c=d(c=d(c=d(c=d(c=_(c=_(c=_(c=_(c,l=_(l,f=_(f,u=_(u,c,l,f,o[p+0],7,-680876936),c,l,o[p+1],12,-389564586),u,c,o[p+2],17,606105819),f,u,o[p+3],22,-1044525330),l=_(l,f=_(f,u=_(u,c,l,f,o[p+4],7,-176418897),c,l,o[p+5],12,1200080426),u,c,o[p+6],17,-1473231341),f,u,o[p+7],22,-45705983),l=_(l,f=_(f,u=_(u,c,l,f,o[p+8],7,1770035416),c,l,o[p+9],12,-1958414417),u,c,o[p+10],17,-42063),f,u,o[p+11],22,-1990404162),l=_(l,f=_(f,u=_(u,c,l,f,o[p+12],7,1804603682),c,l,o[p+13],12,-40341101),u,c,o[p+14],17,-1502002290),f,u,o[p+15],22,1236535329),l=d(l,f=d(f,u=d(u,c,l,f,o[p+1],5,-165796510),c,l,o[p+6],9,-1069501632),u,c,o[p+11],14,643717713),f,u,o[p+0],20,-373897302),l=d(l,f=d(f,u=d(u,c,l,f,o[p+5],5,-701558691),c,l,o[p+10],9,38016083),u,c,o[p+15],14,-660478335),f,u,o[p+4],20,-405537848),l=d(l,f=d(f,u=d(u,c,l,f,o[p+9],5,568446438),c,l,o[p+14],9,-1019803690),u,c,o[p+3],14,-187363961),f,u,o[p+8],20,1163531501),l=d(l,f=d(f,u=d(u,c,l,f,o[p+13],5,-1444681467),c,l,o[p+2],9,-51403784),u,c,o[p+7],14,1735328473),f,u,o[p+12],20,-1926607734),l=E(l,f=E(f,u=E(u,c,l,f,o[p+5],4,-378558),c,l,o[p+8],11,-2022574463),u,c,o[p+11],16,1839030562),f,u,o[p+14],23,-35309556),l=E(l,f=E(f,u=E(u,c,l,f,o[p+1],4,-1530992060),c,l,o[p+4],11,1272893353),u,c,o[p+7],16,-155497632),f,u,o[p+10],23,-1094730640),l=E(l,f=E(f,u=E(u,c,l,f,o[p+13],4,681279174),c,l,o[p+0],11,-358537222),u,c,o[p+3],16,-722521979),f,u,o[p+6],23,76029189),l=E(l,f=E(f,u=E(u,c,l,f,o[p+9],4,-640364487),c,l,o[p+12],11,-421815835),u,c,o[p+15],16,530742520),f,u,o[p+2],23,-995338651),l=S(l,f=S(f,u=S(u,c,l,f,o[p+0],6,-198630844),c,l,o[p+7],10,1126891415),u,c,o[p+14],15,-1416354905),f,u,o[p+5],21,-57434055),l=S(l,f=S(f,u=S(u,c,l,f,o[p+12],6,1700485571),c,l,o[p+3],10,-1894986606),u,c,o[p+10],15,-1051523),f,u,o[p+1],21,-2054922799),l=S(l,f=S(f,u=S(u,c,l,f,o[p+8],6,1873313359),c,l,o[p+15],10,-30611744),u,c,o[p+6],15,-1560198380),f,u,o[p+13],21,1309151649),l=S(l,f=S(f,u=S(u,c,l,f,o[p+4],6,-145523070),c,l,o[p+11],10,-1120210379),u,c,o[p+2],15,718787259),f,u,o[p+9],21,-343485551),u=u+v>>>0,c=c+g>>>0,l=l+y>>>0,f=f+m>>>0}return r.endian([u,c,l,f])};s._ff=function(e,r,t,n,a,i,s){var o=e+(r&t|~r&n)+(a>>>0)+s;return(o<<i|o>>>32-i)+r},s._gg=function(e,r,t,n,a,i,s){var o=e+(r&n|t&~n)+(a>>>0)+s;return(o<<i|o>>>32-i)+r},s._hh=function(e,r,t,n,a,i,s){var o=e+(r^t^n)+(a>>>0)+s;return(o<<i|o>>>32-i)+r},s._ii=function(e,r,t,n,a,i,s){var o=e+(t^(r|~n))+(a>>>0)+s;return(o<<i|o>>>32-i)+r},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?i.bytesToString(n):r.bytesToHex(n)}}()},bbLm:function(e,r,t){"use strict";t.d(r,"b",function(){return p}),t.d(r,"c",function(){return _});var n=t("MVZn"),a=t.n(n),i=t("QILm"),s=t.n(i),o=t("mj+i"),h=t("oCc4"),u=t("T8QY"),c=t("tfAG"),l=t("3OdE"),f={};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new u.a(e.shareURL).query||{};return{refer_share_id:r.refer_share_id,refer_share_uid:r.refer_share_uid||Object(c.a)(),refer_share_channel:r.refer_share_channel,refer_share_uin:r.refer_share_uin}}function _(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/^(?:https?:?)?\/\//,"https://")}"undefined"!=typeof window&&(f=l.a.get(location.host)||{}),r.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.miniObjectPath,n=new u.a(t),i=new u.a(n.query.target_page||""),c=i.query||{},l=r.appendQuery||{},d=a()({},p(e),{},l),E=(d.refer_share_uid,s()(d,["refer_share_uid"])),S=e.shareDomain||f.shareDomain;if(c.specialUrl||c.src)return c.src?c.src=Object(h.a)(E,c.src,S):c.src=_(e.shareURL),"".concat(n.pathname,"?").concat(Object(o.b)(Object.assign({},n.query,{target_page:"".concat(i.pathname,"?").concat(Object(o.b)(c))})));if(c.jump_url||c.launch_url){if(c.jump_url){var v=new u.a(c.jump_url);if(!v.hostname){var g=v.query;g.specialUrl&&(g.src?g.src=Object(h.a)(E,g.src,S):g.src=_(e.shareURL),c.jump_url="".concat(v.pathname,"?").concat(Object(o.b)(g)))}}return c.launch_url&&(c.launch_url=Object(h.a)(E,c.launch_url)),"".concat(n.pathname,"?").concat(Object(o.b)(Object.assign({},n.query,{target_page:"".concat(i.pathname,"?").concat(Object(o.b)(c))})))}return n.hostname||i.hostname||!n.query.target_page?"".concat(n.pathname,"?").concat(Object(o.b)(Object.assign({},n.query,E))):"".concat(n.pathname,"?").concat(Object(o.b)(Object.assign({},n.query,{target_page:"".concat(i.pathname,"?").concat(Object(o.b)(Object.assign(c,E)))})))}},chhR:function(e,r,t){"use strict";r.a={DEFAULT:0,ON_SHARE_TRIGGER:1,ON_SHARE_COMPLETED:2,SDK_INIT_FAILED:3,ON_SHARE_BUTTON_CLICKED:4,ON_SHARE_PREPARE:5,ON_SDK_READY:6,ON_SHARE_INTERRUPT:7,SHARE_LIMIT_LOAD_FAIL:8,PERFORM_LOG_FAILED:9,SHARE_REACH_LIMIT:10}},dKgK:function(e,r,t){"use strict";var n=t("lwsE"),a=t.n(n),i=t("W8MJ"),s=t.n(i),o=t("a1gu"),h=t.n(o),u=t("Nsbk"),c=t.n(u),l=t("7W2i"),f=t.n(l),p=t("+qE3"),_=t("/bZk"),d=t("gfNA"),E=t("a/1V"),S=t("chhR"),v=t("EECB"),g=_.b.ShareErrorCode,y=function(e){function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a()(this,r),(e=h()(this,c()(r).call(this,t))).ShareEntityClass=d.a,e._hasInited=!1,e.shareEntity=t.shareEntity,e.shareEntityMap=t.shareEntityMap||{},e.disableShareTypes=t.disableShareTypes||[],e}return f()(r,e),s()(r,[{key:"initShare",value:function(){this._hasInited||(this._hasInited=!0,this.setMaxListeners(0),this._setupShareTypes(),this._setupPlatformShareSDK())}},{key:"isInited",value:function(){return this._hasInited}},{key:"share",value:function(e){return g.SHARE_ACTION_DISABLE}},{key:"setShareCheck",value:function(e){}},{key:"checkShareTypeEnable",value:function(e){return 0}},{key:"_setupShareTypes",value:function(){return!0}},{key:"_setupPlatformShareSDK",value:function(){return Promise.resolve()}},{key:"getShareEntityByShareType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;return e?this.shareEntityMap[e]||(r?null:this.shareEntity):this.shareEntity}},{key:"refreshShare",value:function(e,r){return e?(r?this.shareEntityMap[r]=e:this.shareEntity=e,this._setupPlatformShareSDK()):Promise.resolve()}},{key:"disableShare",value:function(e){var r=this;if(e&&"number"==typeof e)this.disableShareTypes.indexOf(e)<0&&this.disableShareTypes.push(e);else{if("[object Array]"!==Object.prototype.toString.call(e))return;this.disableShareTypes=this.disableShareTypes.concat(e.filter(function(e){return(r.disableShareTypes||[]).indexOf(e)<0}))}!this._setupShareTypes()&&this._adjustMenu()}},{key:"_adjustMenu",value:function(){}},{key:"createShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=this.ShareEntityClass||d.a;if(t)return new n(e);var a={};if(r){var i=this.shareEntityMap[r];a=i?Object.assign({},i,e):Object.assign({},this.shareEntity,e)}else a=Object.assign({},this.shareEntity,e);return new n(a)}},{key:"setupNativeShareButton",value:function(e){return g.SHARE_NOT_SUPPORTED}},{key:"copyCipher",value:function(){var e=this,r=E.a.COPY_CIPHER,t=this.getShareEntityByShareType(r),n=t.cipherScene&&"string"==typeof t.cipher;return!n&&this.emit(S.a.ON_SHARE_TRIGGER,{shareType:r}),t?(t.normalize(r).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n&&(e.emit(S.a.ON_SHARE_TRIGGER,{shareType:r,shareID:t.shareID}),delete t.shareID),e.emit(S.a.ON_SHARE_COMPLETED,{shareType:r,shareResultType:v.a.SUCCESS,content:t.title,rawResponse:t.rawResponse},e.getNormalizeErrorHandler(r))}),0):g.SHARE_PARAMS_NOT_VALID}},{key:"getNormalizeErrorHandler",value:function(e){var r=this;return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];r.emit(S.a.ON_SHARE_COMPLETED,{shareType:e,shareResultType:v.a.FAIL,errorPayload:n})}}},{key:"resetLimiter",value:function(){}}]),r}(p.EventEmitter);r.a=y},dp2P:function(e,r,t){"use strict";t.d(r,"b",function(){return a}),t.d(r,"d",function(){return i}),t.d(r,"c",function(){return s});var n={DEFAULT:0,REDIRECT:1,SERVER_DOMAIN:2,SERVER_CONTROL:3,SERVER_SHORT_URL:4,RAW:5,SERVER_TINY_DOMAIN:6,SERVER_DOMAIN_BASE64:7,DOMAIN_REPLACE:8,MAGIC_TRACE:9,MAGIC_TRACE_DYNAMIC:10,SERVER_SHORT_URL_WITH_CACHE:11,SERVER_TP_APP:12,SERVER_TP_APP_CARD:13,SERVER_QUERY_APPEND:14,CATEGORY_PROCEDURE:15,CATEGORY_PROCEDURE_CUSTOM:16};function a(e){return[n.SERVER_CONTROL,n.SERVER_SHORT_URL,n.SERVER_TINY_DOMAIN,n.SERVER_DOMAIN_BASE64,n.DOMAIN_REPLACE,n.SERVER_SHORT_URL_WITH_CACHE].indexOf(e)>=0}function i(e){return[n.SERVER_CONTROL,n.SERVER_TINY_DOMAIN,n.SERVER_DOMAIN_BASE64,n.DOMAIN_REPLACE].indexOf(e)>=0}function s(e){return[n.SERVER_SHORT_URL,n.SERVER_SHORT_URL_WITH_CACHE,n.SERVER_TP_APP_CARD,n.CATEGORY_PROCEDURE,n.CATEGORY_PROCEDURE_CUSTOM].indexOf(e)>=0}r.a=n},gfNA:function(e,r,t){"use strict";t.d(r,"b",function(){return E});var n=t("o0o1"),a=t.n(n),i=t("yXPU"),s=t.n(i),o=t("lwsE"),h=t.n(o),u=t("W8MJ"),c=t.n(u),l=t("oCc4"),f=t("dp2P"),p=t("W9H9"),_=t("YSLc"),d=t("Ne86");function E(e){for(var r=[],t=1;t<arguments.length;++t)r.push(arguments[t]);return e.replace(/{(\d+)}/g,function(e,t){return 0===r[t]?0:r[t]||""})}var S=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(this,e),this.title=r.title||"",this.message=r.message||"",this.shareURL=r.shareURL||"",this.targetShareURL="",this.realShareURL="",this.shareDomain=r.shareDomain||"",this.thumbnailURL=r.thumbnailURL||"",this.timelineDomain=r.timelineDomain||"",this.timelineAppId=r.timelineAppId||"",this.marketActivityID=r.marketActivityID||0,this.urlWrapType=r.urlWrapType||f.a.DEFAULT,this.shortURLApi=r.shortURLApi||"",this.domainURLApi=r.domainURLApi||"",this.payloadMixin=r.payloadMixin||null,this.requestUsePost=r.requestUsePost||!1,this.shortCommandApi=r.shortCommandApi||"",this.cipherProcessor=r.cipherProcessor}return c()(e,[{key:"normalize",value:function(){var e=s()(a.a.mark(function e(r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({}));case 1:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}()},{key:"setShareURLQueries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.urlWrapType!==f.a.RAW&&(this.shareID=e.refer_share_id,this.shareURL=Object(l.a)(e,this.shareURL))}},{key:"getShareForm",value:function(e){return p.a.DEFAULT}},{key:"getShareMethod",value:function(e){return _.a.DEFAULT}},{key:"processCipher",value:function(){var e=this,r=Object.assign({},this),t={title:r.title},n=t.title||"";return Object(d.d)(r).then(function(r){var a=r.targetShareURL,i=r.useShortURL,s=r.shareText,o=r.cipher;o&&(t.cipher=o),e.targetShareURL=a;var h=i||o?s:"";return n=E(n,h||a,a,h),t.title=n,e.pcode=n,t})}}]),e}();r.a=S},mmNF:function(e,r){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var r=[],t=0;t<e.length;t++)r.push(255&e.charCodeAt(t));return r},bytesToString:function(e){for(var r=[],t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return r.join("")}}};e.exports=t},oCc4:function(e,r,t){"use strict";t.d(r,"a",function(){return i});var n=t("mj+i"),a=t("T8QY");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return 0===window.location.href.indexOf("amcomponent://")&&(t=t||new a.a(r).origin),r=Object(n.a)(e,Object(n.h)(r||location.href)),t?(t=t.replace(/\/$/g,""),"".concat(t).concat(Object(n.d)(r))):r}},q8Ib:function(e,r,t){"use strict";t.d(r,"b",function(){return c}),t.d(r,"a",function(){return l}),t.d(r,"d",function(){return p});var n=t("cDf5"),a=t.n(n),i=t("8l/m"),s=t("rIj9"),o=t("bbLm"),h=t("T8QY"),u=t("mj+i"),c={WEIXIN_TINY_DOMAIN:"weixin",SHORT_LINK:"link"},l={WECHAT:"h5",IOS:"ios",ANDROID:"android"},f="api/flow/chron/share/miniprogram";function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(s.a)({pageInfo:{pageId:Object(i.a)()}},{defaultErrorHandler:function(e){}}),n={};n.share_refer=Object(o.b)({shareURL:r.shareURL}),r.payloadMixin&&"object"===a()(r.payloadMixin)&&(n=Object.assign(n,r.payloadMixin));var h=r.shortURLApi||f;return("post"===e.toLowerCase()?t.post(h,n):t.get(h,{params:n})).then(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})}r.c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(s.a)({pageInfo:{pageId:Object(i.a)()}},{defaultErrorHandler:function(e){}}),n={};n.url=r.shareURL||"",n.activity=r.marketActivityID||0,n.platform=r.platform||"",n.share_refer=Object(o.b)({shareURL:r.shareURL}),n.page_sn=Object(i.c)(),r.payloadMixin&&"object"===a()(r.payloadMixin)&&(n=Object.assign(n,r.payloadMixin));var l=r.urlAlias||"url_code",f=n[l];if(f&&"string"==typeof f){var p=new h.a(f).query||{};Object.assign(p,n.share_refer),n[l]="".concat(f.split("?")[0]||"","?").concat(Object(u.b)(p))}var _="api/flow/audience/activity/domain/weixin";return r.shareDomainType===c.SHORT_LINK?_=r.shortURLApi?r.shortURLApi:r.shortCommandApi?r.shortCommandApi:"api/flow/audience/activity/domain/short_url":r.domainURLApi&&(_=r.domainURLApi),("post"===e.toLowerCase()?t.post(_,n):t.get(_,{params:n})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{domain:e.domain,openAppID:e.open_app_id||"",shortURL:e.short_url||"",shareText:e.share_text||"",raw:e}})}},rUjM:function(e,r,t){"use strict";t.d(r,"a",function(){return n});var n={TP_FIRST:0,GENERAL_FIRST:1,GENERAL_ONLY:2}},tfAG:function(e,r,t){"use strict";t.d(r,"c",function(){return s}),t.d(r,"b",function(){return o}),t.d(r,"a",function(){return h});var n=t("3sKm"),a="",i="";function s(){return Promise.all([Object(n.b)().then(function(e){a=e}).catch(function(e){}),Object(n.c)().then(function(e){i=e}).catch(function(e){})])}function o(){return i}function h(){return a}},v1av:function(e,r,t){"use strict";var n=t("lwsE"),a=t.n(n),i=t("W8MJ"),s=t.n(i),o=t("lSNA"),h=t.n(o),u=t("T8QY"),c=t("oCc4"),l=t("cDf5"),f=t.n(l),p=t("8l/m"),_=t("rIj9"),d="api/flow/audience/share/trace",E=t("WiBJ"),S=t("6GAH");function v(e,r){if(!(r&&r.key&&r.value&&r.trace))return e;var t=new u.a(e),n=r.key,a=r.value,i=r.trace;return Object(c.a)(Object.assign(h()({},n,a),t.query),i,t.origin)}var g=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a()(this,e),this._isInited=!1,this._magicTrace=null}return s()(e,[{key:"build",value:function(e){var r=e.magicTrace,t=void 0===r?{}:r;return this._isInited?Promise.resolve():(t.key&&t.value&&t.trace&&(this._magicTrace=t,this._isInited=!0),Promise.resolve())}},{key:"isInited",value:function(){return this._isInited}},{key:"transform",value:function(e){return v(e,this._magicTrace)}},{key:"transformByShareEntity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(_.a)({pageInfo:{pageId:Object(p.a)()}},{defaultErrorHandler:function(e){}}),n={};return n.origin=r.platform||"",n.share_params=r.shareParams||{},n.page_sn=r.pageSn||Object(p.c)()+"",n.page_info=r.pageInfo||{page_name:Object(p.b)(),page_url:location&&location.href},r.payloadMixin&&"object"===f()(r.payloadMixin)&&(n=Object.assign(n,r.payloadMixin)),("post"===e.toLowerCase()?t.post(d,n):t.get(d,{params:n})).then(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).magic_trace})}("post",{platform:Object(S.a)(),shareParams:Object(E.b)(e),payloadMixin:e.payloadMixin}).then(function(r){return v(e.shareURL,r)})}}]),e}(),y=null;g.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y||(y=new g(e)),y};r.a=g},z4CT:function(e,r,t){"use strict";t.d(r,"a",function(){return a});var n=t("qnV/");function a(e){var r=e.errorCode,t=void 0===r?0:r,a=e.message,i=void 0===a?"":a,s=e.options,o=void 0===s?{}:s;Object(n.c)(new Error("share error"),{error_type:"share error: ".concat(t),error_message:i,payload:o})}},zRS3:function(e,r,t){"use strict";t.r(r);var n=t("cDf5"),a=t.n(n),i=t("o0o1"),s=t.n(i),o=t("yXPU"),h=t.n(o),u=t("lwsE"),c=t.n(u),l=t("W8MJ"),f=t.n(l),p=t("CSCl"),_=t("SxTj"),d=t("mj+i"),E=t("a/1V"),S=t("chhR"),v=t("KoDT"),g=t("MVZn"),y=t.n(g),m=t("eHaf"),A=t("h3qu"),I=t("YSLc"),R={SUCCESS:"success",FAIL:"fail",CANCEL:"cancel",COMPLETE:"complete",ERROR:"error"},C=t("EECB"),O=t("/bZk"),T=t("W9H9"),b=t("dKgK"),L="event",P={SHARE:"share",SHARE_RESULT:"share_result"},D=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.userID=r.userID||"",this.uin=r.uin||"",this.shareID=r.shareID||"",this.op=r.op||L,this.subOP=r.subOP||"",this.shareChannel=r.shareChannel||"",this.shareResult=r.shareResult||"",this.shareURL=r.shareURL||"",this.shareDomain=r.shareDomain||"",this.shareForm=r.shareForm||"",this.shareMethod=r.shareMethod||"",this.shareAppID=r.shareAppID,this.pcode=r.pcode,this.wxShareCount=r.wxShareCount,this.cipherScene=r.cipherScene}return f()(e,[{key:"normalize",value:function(e){if(this.subOP===P.SHARE)return{op:this.op,sub_op:this.subOP,share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,pcode:this.pcode,pcode_scene:this.cipherScene};if(this.subOP===P.SHARE_RESULT){var r={op:this.op,sub_op:this.subOP,event:"share_result",share_id:this.shareID,share_channel:this.shareChannel,share_url:this.shareURL,share_domain:this.shareDomain,share_result:this.shareResult,share_form:this.shareForm,share_method:this.shareMethod,share_app_id:this.shareAppID,wx_share_count:this.wxShareCount,pcode:this.pcode,pcode_scene:this.cipherScene};return this.walrusID&&(r.walrus_id=this.walrusID,r.walrus_type=this.walrusType),r}return{}}},{key:"getShareURLTrackingQueries",value:function(){return e.getTrackingQueries(this)}}]),e}();D.TRACKING_SUB_OP=P,D.getTrackingQueries=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{refer_share_id:e.shareID,refer_share_uin:e.uin,refer_share_channel:e.shareChannel}};var N=D,k=t("fkZF");function M(e){return e=e||32,Object(k.a)(e)}var U,w=t("lSNA"),H=t.n(w),j={UNKNOWN:"unknown",APP_MESSAGE:"message",TIMELINE:"timeline",QQ:"qq",QQ_ZONE:"qzone",QQ_WEIBO:"qq_weibo",SINA_WEIBO:"weibo",CLIPBOARD:"copy_link"},x=(U={1:j.APP_MESSAGE,2:j.TIMELINE,3:j.SINA_WEIBO,4:j.QQ,5:j.QQ_ZONE,8:j.TIMELINE,9:j.TIMELINE,10:j.APP_MESSAGE,11:j.QQ,12:j.QQ_ZONE,13:j.SINA_WEIBO,16:j.APP_MESSAGE,17:j.APP_MESSAGE,18:j.APP_MESSAGE,19:j.APP_MESSAGE,20:j.APP_MESSAGE,21:j.TIMELINE,23:j.CLIPBOARD,24:j.APP_MESSAGE,25:j.APP_MESSAGE},H()(U,E.a.COPY_CIPHER,j.CLIPBOARD),H()(U,E.a.WECHAT_SESSION_CARD_WITH_NO_SDK,j.APP_MESSAGE),H()(U,E.a.WECHAT_TIMELINE_CARD_WITH_NO_SDK,j.TIMELINE),U);function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return x[e]||j.UNKNOWN}var B,Q=t("T8QY"),F=t("tfAG"),G=t("MpJ2"),K={DEFAULT:0,WECHAT:1,QQ:2,WEIBO:3},Y=(B={},H()(B,j.UNKNOWN,0),H()(B,j.APP_MESSAGE,1),H()(B,j.TIMELINE,1),H()(B,j.QQ,2),H()(B,j.QQ_ZONE,2),H()(B,j.QQ_WEIBO,2),H()(B,j.SINA_WEIBO,3),B);var V=function(e){return Y[e]||K.DEFAULT},q=function(){function e(){c()(this,e),this._venderAppIDs={},this._isInited=!1}return f()(e,[{key:"build",value:function(e){var r=e.wechatAppID;return this._isInited?Promise.resolve():(this._isInited=!0,Object(v.a)().isNativePlatform?this._buildNativeCache():Object(v.a)().isWeChatPlatform?this._buildWeChatCache(r):Promise.resolve())}},{key:"isInited",value:function(){return this._isInited}},{key:"_buildNativeCache",value:function(){var e=this;return function(e){return Object(v.a)().statisfy("4.49.0","4.49.0","greaterThan")?Array.isArray(e)?Object(G.g)("JSShare","venderAppIds",{channels:e}):Promise.reject({message:"invalid params"}):Promise.reject({message:"not support"})}([K.WECHAT]).then(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._venderAppIDs=Object.assign(e._venderAppIDs,r)}).catch(function(){return Promise.resolve()})}},{key:"_buildWeChatCache",value:function(e){return this._venderAppIDs[K.WECHAT]=e,Promise.resolve()}},{key:"getAppIDSync",value:function(e){var r=V(e);return this._venderAppIDs[r]}}]),e}(),Z=null;q.getInstance=function(e){return Z||(Z=new q(e)),Z};var z=q,X=t("2Goq"),J=t("dp2P"),$=t("Qm63"),ee=t("8l/m"),re=O.b.ShareErrorCode,te=N.TRACKING_SUB_OP;var ne=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.transparentTransmission=r.transparentTransmission||{},this.trackingEntity=null,this.onTriggerListener=null,this.onCompletedListener=null,this.shareController=null,this._cachePrepareInfo={}}return f()(e,[{key:"listen",value:function(e){e&&e instanceof b.a&&(this.disconnect(),this.shareController=e,this._setupDefaultTrackListener(e))}},{key:"disconnect",value:function(){this.shareController&&this._removeDefaultTrackListener(this.shareController)}},{key:"updateTrackerTrans",value:function(e){this.transparentTransmission=Object.assign({},this.transparentTransmission,e)}},{key:"_setupDefaultTrackListener",value:function(e){this._removeDefaultTrackListener(e),this.onPrepareListener=this._onDefaultSharePrepare.bind(this),this.onTriggerListener=this._onDefaultShareTrigger.bind(this),this.onCompletedListener=this._onDefaultShareCompleted.bind(this),e.on(S.a.ON_SHARE_PREPARE,this.onPrepareListener),e.on(S.a.ON_SHARE_TRIGGER,this.onTriggerListener),e.on(S.a.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_removeDefaultTrackListener",value:function(e){this.onPrepareListener&&e.removeListener(S.a.ON_SHARE_PREPARE,this.onPrepareListener),this.onTriggerListener&&e.removeListener(S.a.ON_SHARE_TRIGGER,this.onTriggerListener),this.onCompletedListener&&e.removeListener(S.a.ON_SHARE_COMPLETED,this.onCompletedListener)}},{key:"_sendLog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.assign(e,this.transparentTransmission);Object(m.d)(y()({page_id:Object(ee.a)(),page_name:Object(ee.b)(),page_sn:Object(ee.c)()},r))}},{key:"_onDefaultSharePrepare",value:function(e){var r=e.shareType;if(this._cachePrepareInfo[r]){var t=this.shareController.getShareEntityByShareType(r)||{},n=this._cachePrepareInfo[r];return n.userID=Object(F.a)(),n.uin=Object(F.b)(),void t.setShareURLQueries(N.getTrackingQueries(n))}var a=this.shareController.getShareEntityByShareType(r),i={userID:Object(F.a)(),uin:Object(F.b)(),shareID:this._getCachedShareID(a)||M(),shareChannel:W(r)};a&&a.setShareURLQueries(N.getTrackingQueries(i)),this._cachePrepareInfo[r]=i}},{key:"_onDefaultShareTrigger",value:function(e){var r=e.shareType,t=e.shareID;if(r===E.a.PIN_TIMELINE||Object(v.a)().isWeChatMiniProgram&&r===E.a.WECHAT_SESSION)return 0;var n=this.shareController.getShareEntityByShareType(r)||{},a=this._cachePrepareInfo[r];this._cachePrepareInfo[r]=null;var i=W(r),s=z.getInstance();if(this.trackingEntity=new N(Object.assign({userID:Object(F.a)(),uin:Object(F.b)(),shareID:this._getCachedShareID(n)||M(),subOP:te.SHARE,shareChannel:i,timelineDomain:n.timelineDomain,cipherScene:n.cipherScene,shareForm:n.getShareForm&&n.getShareForm(r),shareMethod:n.getShareMethod&&n.getShareMethod(r),shareAppID:s.getAppIDSync(i)},a,t?{shareID:t}:null)),!a&&n.setShareURLQueries(N.getTrackingQueries(this.trackingEntity)),n.getShareForm(r)!==T.a.COMMAND){var o=n.targetShareURL||n.shareURL;this.trackingEntity.shareURL=o,this.trackingEntity.shareDomain=new Q.a(o).origin}this._sendLog(this.trackingEntity.normalize(r))}},{key:"_onDefaultShareCompleted",value:function(e){var r=e.shareType,t=e.shareResultType,n=e.useComplete,i=e.responseData,s=void 0===i?{}:i,o=e.tpInfo,h=Object(v.a)();if(r===E.a.PIN_TIMELINE||h.isWeChatMiniProgram&&r===E.a.WECHAT_SESSION)return 0;if(!this.trackingEntity)return re.SHARE_STATUS_ILLEGAL;var u=this.shareController.getShareEntityByShareType(r)||{},c=this.getShareResultByType(t);if(n&&(c=R.COMPLETE),u.getShareForm(r)!==T.a.COMMAND){var l=u.realShareURL||u.shareURL;this.trackingEntity.shareURL=l,this.trackingEntity.shareDomain=new Q.a(l).origin}else this.trackingEntity.pcode=u.pcode;var f=function(e){return e&&"object"===a()(e)?"string"!=typeof e.wx_app_id?null:e.wx_app_id:null}(s);f&&(this.trackingEntity.shareAppID=f),s.hasOwnProperty("wx_share_count")&&(this.trackingEntity.wxShareCount=s.wx_share_count,delete s.wx_share_count),this.trackingEntity.subOP=te.SHARE_RESULT,this.trackingEntity.shareResult=c,o&&(this.trackingEntity.walrusID=o.group_id,this.trackingEntity.walrusType=o.dev_type),u.forceDowngrade||h.platform===A.a.PddIOS&&r===E.a.WECHAT_SESSION_TEXT_WITH_NO_SDK||E.a.COPY_LINK===r&&!h.isNativePlatform&&!h.isTinyNativePlatform||E.a.COPY_CIPHER===r||(this._sendLog(this.trackingEntity.normalize(r)),this.trackingEntity=null)}},{key:"trackProlongation",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;if(!this.trackingEntity)return!1;this.trackingEntity.shareMethod=I.a.MANUAL,this.trackingEntity.shareResult=R.COMPLETE;var n=Object.assign(this.trackingEntity.normalize(e),r);return this.trackingEntity=null,"function"==typeof t?t(n):this._sendLog(n),!0}},{key:"getShareResultByType",value:function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0){case C.a.COMPLETE:return R.COMPLETE;case C.a.SUCCESS:return R.SUCCESS;case C.a.FAIL:return R.FAIL;case C.a.CANCEL:return R.CANCEL;default:return R.ERROR}}},{key:"_getCachedShareID",value:function(e){if(e.urlWrapType===J.a.SERVER_SHORT_URL_WITH_CACHE){var r=Object(X.a)(),t=Object($.a)(e);return r.getShareID(t)}}}]),e}(),ae=t("rIj9"),ie="api/flow/audience/share/content",se={REACH_HOUR_LIMIT:43367,REACH_DAY_LIMIT:43368},oe=function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];c()(this,e),this._shareController=null,this._onPerformShareErrorHandler=null}return f()(e,[{key:"listen",value:function(e){e&&e instanceof b.a&&(this.disconnect(),this._shareController=e,this._setupListener(e))}},{key:"disconnect",value:function(){this.removeListener()}},{key:"_setupListener",value:function(e){this.removeListener(),this._onPerformShareErrorHandler=this._onPerformShareError.bind(this),e.on(S.a.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"removeListener",value:function(){this._shareController&&this._onPerformShareErrorHandler&&this._shareController.removeListener(S.a.PERFORM_LOG_FAILED,this._onPerformShareErrorHandler)}},{key:"_onPerformShareError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.error||{},t=e.shareType,n=parseInt(r.errorCode,10)||0;[se.REACH_DAY_LIMIT,se.REACH_HOUR_LIMIT].indexOf(n)>=0&&(this._shareController.emit(S.a.SHARE_REACH_LIMIT,{shareType:t,errorCode:n}),this.hideShareMenuOption(t))}},{key:"hideShareMenuOption",value:function(e){var r=this._shareController;e&&r&&r.disableShare(e)}}]),e}(),he=t("z4CT"),ue=t("WiBJ"),ce=t("6GAH"),le="undefined"!=typeof window;function fe(){return(fe=h()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(22).then(t.bind(null,"3Wbp"));case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(){return(pe=h()(s.a.mark(function e(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Object(v.a)()).isWeChatMiniProgram){e.next=7;break}return e.next=4,t.e(25).then(t.bind(null,"YYoc"));case 4:return e.abrupt("return",e.sent.default);case 7:if(!r.isWeChatPlatform){e.next=13;break}return e.next=10,t.e(26).then(t.bind(null,"EP3j"));case 10:return e.abrupt("return",e.sent.default);case 13:if(!r.isQQPlatform){e.next=19;break}return e.next=16,t.e(23).then(t.bind(null,"gouW"));case 16:return e.abrupt("return",e.sent.default);case 19:if(!r.isNativePlatform&&!r.isTinyNativePlatform){e.next=25;break}return e.next=22,t.e(22).then(t.bind(null,"3Wbp"));case 22:return e.abrupt("return",e.sent.default);case 25:return e.next=27,t.e(24).then(t.bind(null,"joqa"));case 27:return e.abrupt("return",e.sent.default);case 28:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _e=Object({BROWSER:!0,ISAVALON:!1,BUNDLE_PLATFORM:"production"}).HYBRID?function(){return fe.apply(this,arguments)}:function(){return pe.apply(this,arguments)},de=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.shareController=null,this.shareTracker=null,this.menuWatcher=null,this.platform=Object(ce.a)(),this._disableContentCheck=!0,this._disablePerformShareLog=!1,this.controllerOptions=r.controllerOptions||{},this.noDefaultShare=r.noDefaultShare||!1,this.disableShare=r.disableShare||!1,this._initControllerPromise=null,this.loadErrorRetry=r.loadErrorRetry||0,this.enableInfiniteRetry=r.enableInfiniteRetry||!1,this._loadControllerFailed=!1}return f()(e,[{key:"setup",value:function(){var e=h()(s.a.mark(function e(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(le&&!this.shareController){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(!this._loadControllerFailed||this.enableInfiniteRetry){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("load controller failed")));case 4:return this._setupShareTracker(),this._setupMenuWatcher(),this._initControllerPromise=this._initControllerPromise||this._setupController(),r=!1,e.prev=8,e.next=11,this._initControllerPromise;case 11:e.next=25;break;case 13:if(e.prev=13,e.t0=e.catch(8),this._initControllerPromise=null,!(this.loadErrorRetry>0)){e.next=22;break}Object(he.a)({errorCode:0,message:"加载分享控制器失败, 剩余重试次数".concat(this.loadErrorRetry),options:{message:e.t0&&e.t0.message}}),this.loadErrorRetry--,r=!0,e.next=25;break;case 22:throw this._loadControllerFailed=!0,Object(he.a)({errorCode:0,message:"加载分享控制器失败",options:{message:e.t0&&e.t0.message}}),e.t0;case 25:if(!r){e.next=27;break}return e.abrupt("return",this.setup());case 27:case"end":return e.stop()}},e,this,[[8,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"_setupController",value:function(){var e=h()(s.a.mark(function e(){var r,t,n,a=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareController){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return r=this.controllerOptions,t=Object(v.a)(),e.next=6,_e();case 6:n=e.sent,this.shareController=new n(r),t.isWeChatPlatform||t.isQQPlatform?this.noDefaultShare||this._prepareShareController():(t.isNativePlatform||t.isTinyNativePlatform)&&this.shareController.on(S.a.ON_SHARE_COMPLETED,function(e){var r=e.shareType,t=e.shareResultType,n=e.nativeShareErrorCode;t===C.a.FAIL&&[se.REACH_HOUR_LIMIT,se.REACH_DAY_LIMIT].indexOf(n)>=0&&(a.shareController.emit(S.a.SHARE_REACH_LIMIT,{shareType:r,errorCode:n}),Object(he.a)({errorCode:n,message:"分享达到上限"}))}),this.shareTracker.listen(this.shareController),this.menuWatcher.listen(this.shareController),this._setupPerformShareLog();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_prepareShareController",value:function(){this.shareController&&!this.shareController.isInited()&&this.shareController.initShare()}},{key:"_setupMenuWatcher",value:function(){this.menuWatcher||(this.menuWatcher=new oe)}},{key:"_setupShareTracker",value:function(){this.disableTracker||this.shareTracker||(this.shareTracker=new ne({transparentTransmission:this.trackerTrans}))}},{key:"_setupPerformShareLog",value:function(){var e=this;this.shareController&&!Object(v.a)().isNativePlatform&&this.shareController.on(S.a.ON_SHARE_COMPLETED,function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e._disablePerformShareLog&&r.shareResultType===C.a.SUCCESS&&r.shareType!==E.a.COPY_CIPHER){var t=r.shareType,n=e.getShareEntity(t);(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(ae.a)({pageInfo:{pageId:Object(ee.a)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=r.shareParams||{},n.share_type=r.shareType||0,n.share_method=r.shareMethod||"",n.origin=r.platform||"",n.page_sn=r.pageSn||Object(ee.c)(),n.page_info=r.pageInfo||{page_name:Object(ee.b)(),page_url:location&&location.href},n.extra=r.extra||{},"post"===e.toLowerCase()?t.post("api/flow/audience/share/perform",n):t.get("api/flow/audience/share/perform",{params:n})})("post",{platform:e.platform,shareType:t,shareParams:Object(ue.b)(n),shareMethod:Object(ue.a)(n,t),extra:n.payloadMixin&&n.payloadMixin.extra}).catch(function(r){e.shareController.emit(S.a.PERFORM_LOG_FAILED,{shareType:t,error:r})})}})}},{key:"share",value:function(){var e=h()(s.a.mark(function e(r){var t,n,a=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shareController&&!this.disableShare){e.next=4;break}return(t=new Error("no controller exists")).shareType=r,e.abrupt("return",Promise.reject(t));case 4:return e.next=6,Object(F.c)();case 6:if(this._prepareShareController(),n=function(){return new Promise(function(e,t){var n=a,i=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.shareResultType;if(s(),C.a.SUCCESS===n)e(r);else{var a=new Error("分享失败");Object.assign(a,r),t(a)}};function s(){n.shareController.removeListener(S.a.ON_SHARE_COMPLETED,i)}a.shareController.on(S.a.ON_SHARE_COMPLETED,i);var o=a.shareController.share(r);if(o){s(),a.shareController.emit(S.a.ON_SHARE_INTERRUPT,{shareType:r,shareErrorType:o}),Object(he.a)({errorCode:o,message:"分享前置流程异常",options:{shareType:r}});var h=new Error("分享前置流程异常");Object.assign(h,{shareType:r,shareErrorType:o}),t(h)}})},!Object(v.a)().isNativePlatform){e.next=12;break}return e.abrupt("return",this.shareController.waitShareLimiter().then(function(e){return n()},function(e){return n()}));case 12:return e.abrupt("return",n());case 13:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"checkShareContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(ae.a)({pageInfo:{pageId:Object(ee.a)()}},{defaultErrorHandler:function(e){}}),n={};return n.share_params=r.shareParams||{},n.origin=r.platform||"",n.page_sn=r.pageSn||Object(ee.c)()+"",n.page_info=r.pageInfo||{page_name:Object(ee.b)(),page_url:location&&location.href},"post"===e.toLowerCase()?t.post(ie,n):t.get(ie,{params:n})}("post",{platform:this.platform,shareParams:Object(ue.b)(e)})}},{key:"setContentCheck",value:function(e){this._disableContentCheck=!e}},{key:"setPerformShareLog",value:function(e){this._disablePerformShareLog=!e}},{key:"prepareShare",value:function(){var e=h()(s.a.mark(function e(){var r,t,n,a,i,o,h=this,u=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>0&&void 0!==u[0]?u[0]:{},t=u.length>1?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},this.shareController){e.next=5;break}return e.abrupt("return",Promise.reject(new Error("no controller exists")));case 5:return e.next=7,Object(F.c)();case 7:if(this._prepareShareController(),a=r.entityConfig,i=void 0===a?{}:a,o=this.shareController.createShareEntity(i,t),!(n.skipShareContentCheck||this._disableContentCheck||Object(v.a)().isNativePlatform)){e.next=12;break}return e.abrupt("return",this.shareController.refreshShare(o,t));case 12:return e.abrupt("return",this.checkShareContent(o).then(function(){return h.shareController.refreshShare(o,t)}));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getShareController",value:function(){return this.shareController}},{key:"getShareControllerAsync",value:function(){var e=h()(s.a.mark(function e(){var r=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareController){e.next=2;break}return e.abrupt("return",this.shareController);case 2:if(!this._initControllerPromise){e.next=4;break}return e.abrupt("return",this._initControllerPromise.then(function(e){return r.shareController}).catch(function(e){return null}));case 4:return e.abrupt("return",this.setup().then(function(e){return r.shareController}).catch(function(e){return null}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getShareTracker",value:function(){return this.shareTracker}},{key:"getShareEntity",value:function(e,r){return this.shareController?this.shareController.getShareEntityByShareType(e,r):null}},{key:"setupNativeShareButton",value:function(e,r){this.shareController&&(this.shareController.removeAllListeners(S.a.ON_SHARE_BUTTON_CLICKED),"function"==typeof r&&this.shareController.on(S.a.ON_SHARE_BUTTON_CLICKED,r),this.shareController.setupNativeShareButton(e))}}]),e}(),Ee={title:0,message:0,thumbnailURL:0,shareURL:0,shareDomain:0,waterMark:0,urlWrapType:0,drawImageOptions:0,drawImageClass:0,marketActivityID:0,miniObjectPath:0,miniObjectID:0,useWxAppShare:0,shortURLApi:0,shortCommandApi:0,domainURLApi:0,forceDowngrade:0,payloadMixin:0,requestUsePost:0,excludeShareChoices:0,thirdPartyOpenType:0,needSharedAmount:0,cipherScene:0,consumeMode:0,activitySceneSn:0,tpSelectCategory:0,pinTimelineParams:0,wxAppRequestPayload:0,cipherProcessor:0,wxAppNavigatePayload:0,withShareTicket:0,systemShareMode:0,wechatMaskConfig:0},Se={noDefaultShare:0,isSDKPrepare:0,disableShare:0},ve={wechatAppID:0,magicTrace:0,shareTypeEnable:0},ge={USELESS:-1,DEFAULT:0,OUT_OF_DATE:1,FORBIDDEN:2,ABANDONED:3},ye=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this.cacheRaw=r.cacheRaw||!1,this.deleteAfterCollect=r.deleteAfterCollect||!1}return f()(e,[{key:"filter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this._filterShareEntity(e),t=this._filterShareConfigFlag(e),n=this._filterShareOther(e);return{_rawShareInfo:this.cacheRaw?e:null,entityConfig:r,flowControllConfig:t,otherConfig:n,compatibleShareConfig:{}}}},{key:"_filterByItems",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return(Object.keys(t)||[]).forEach(function(a,i){var s=t[a];s===ge.FORBIDDEN?delete r[a]:s===ge.ABANDONED?delete r[a]:void 0!==r[a]&&(n[a]=r[a],e.deleteAfterCollect&&delete r[a])}),n}},{key:"_filterShareEntity",value:function(e){return this._filterByItems(e,Ee)}},{key:"_filterShareConfigFlag",value:function(e){return this._filterByItems(e,Se)}},{key:"_filterShareOther",value:function(e){return this._filterByItems(e,ve)}}]),e}(),me={DEFAULT:"!share_v2",WE_CHAT_MSG:"!share_v3",SHARE:"!share",TRANSPARENT:"!transparent",NONE:"",NO_LOGO:"!share_v4"},Ae=t("3OdE"),Ie=t("oCc4"),Re=t("v1av"),Ce={};"undefined"!=typeof window&&(Ce=Ae.a.get(location.host)||{});var Oe={code:null,from:null,isappinstalled:null,at:null,share_id:null,is_back:null,page_id:null,list_id:null},Te=["refer_page_name","refer_page_section","refer_page_element","refer_page_id","refer_page_sn","refer_page_el_sn","refer_mid","refer_adg","refer_cam","refer_ced"];function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(e=e||"").indexOf("!")>=0&&!t?e:(e=e.split("!")[0],e+=r)}var Le=null,Pe=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c()(this,e),this._hasInited=!1,this.opts=r||{},this.shopConfig=r.shopConfig,this.defaultShareEntityConfig={},this.shareManager=null,this.shareInfoFilter=null,this._sdkPrepared=!1}return f()(e,[{key:"setup",value:function(){this._hasInited||(this._hasInited=!0,this._setupShareInfoFilter(),this._setupShareManager(),!(this.opts.shareManagerConfig||{}).noDefaultShare&&this._prepareDefaultShare(),this.waitAppIDCacheBuild())}},{key:"_setupShareInfoFilter",value:function(){this.shareInfoFilter||(this.shareInfoFilter=new ye(this.opts.shareInfoFilterConfig))}},{key:"_setupShareManager",value:function(){var e=this;if(!this.shareManager){var r=Object.assign({},{noDefaultShare:!1,disableShare:!1,useNativeShareButton:!1,loadErrorRetry:1,enableInfiniteRetry:!1},this.opts.shareManagerConfig);this.shareManager=new de(r)}return this._managerReadyPromise=this._managerReadyPromise||this.shareManager.setup(),this._managerReadyPromise.then(function(r){e._managerReady=!0}).catch(function(r){e._managerReadyPromise=null}),this._managerReadyPromise}},{key:"_prepareDefaultShare",value:function(){Object(v.a)().isWeChatMiniProgram||(Object.assign(this.defaultShareEntityConfig,{title:"拼多多商城",message:"风靡全国的拼单商城，优质商品新鲜直供，快一起来拼多多吧",thumbnailURL:Object(p.a)("/base/logo.jpg"),shareURL:"/"}),this.prepareShare(this.defaultShareEntityConfig,void 0,{skipShareContentCheck:!0}))}},{key:"_prepareShareByShareType",value:function(){var e=h()(s.a.mark(function e(){var r,t,n,a,i,o=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>0&&void 0!==o[0]?o[0]:{},t=o.length>1?o[1]:void 0,n=o.length>2?o[2]:void 0,this.setup(),this._managerReady){e.next=7;break}return e.next=7,this.waitManagerReady();case 7:return a=r.entityConfig,i=void 0===a?{}:a,this._buildThumbnailURL(i,t),this._buildShareURL(i,t),e.abrupt("return",this.shareManager.prepareShare(r,t,n));case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"prepareShare",value:function(e,r){var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.setup();var a=this.shareInfoFilter.filter(e),i=this._prepareShareByShareType(a,r,n);return!this._sdkPrepared&&i.then(function(e){t._checkSDKPrepared(a)},function(e){t._checkSDKPrepared(a)}),i}},{key:"prepareShareSafe",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.setup();var n=this.shareInfoFilter.filter(r),a=n.flowControllConfig,i=void 0===a?{}:a;if(!this._sdkPrepared&&!i.isSDKPrepare)return this.waitSDKReady().then(function(){return e._prepareShareByShareType(n,t)});var s=this._prepareShareByShareType(n,t);return!this._sdkPrepared&&s.then(function(r){e._checkSDKPrepared(n)},function(r){e._checkSDKPrepared(n)}),s}},{key:"waitSDKReady",value:function(){var e=this;return this.waitWeChatSDKReady().then(function(){return e.waitAppIDCacheBuild()})}},{key:"waitWeChatSDKReady",value:function(){var e=h()(s.a.mark(function e(){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sdkPrepared){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:if(!this.sdkReadyPromise){e.next=8;break}return e.abrupt("return",this.sdkReadyPromise);case 8:return e.next=10,this.shareManager.getShareControllerAsync();case 10:if(r=e.sent){e.next=13;break}return e.abrupt("return",Promise.resolve());case 13:return this.sdkReadyPromise=new Promise(function(e,t){r.once(S.a.ON_SDK_READY,function(){e()})}),e.abrupt("return",this.sdkReadyPromise);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"waitAppIDCacheBuild",value:function(){var e=h()(s.a.mark(function e(){var r,t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=z.getInstance()).isInited()){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:if(!this._actualWeChatAppID){e.next=9;break}return e.abrupt("return",r.build({wechatAppID:this._actualWeChatAppID}));case 9:if(this.appIDReadyPromise){e.next=16;break}return e.next=12,this.shareManager.getShareControllerAsync();case 12:if(t=e.sent){e.next=15;break}return e.abrupt("return",Promise.resolve());case 15:this.appIDReadyPromise=new Promise(function(e,n){t.once(S.a.ON_SDK_READY,function(t){var n=t.wechatAppID,a=t.magicTrace;Promise.all([r.build({wechatAppID:n}),Re.a.getInstance().build({magicTrace:a})]).then(function(){e()})})});case 16:return e.abrupt("return",this.appIDReadyPromise);case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"waitManagerReady",value:function(){return this._managerReady?Promise.resolve():this._managerReadyPromise?this._managerReadyPromise:this._setupShareManager()}},{key:"share",value:function(){var e=h()(s.a.mark(function e(r,t){var n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),!t){e.next=5;break}return e.abrupt("return",this.prepareShareSafe(t,r).then(function(){return n.shareManager.share(r)}));case 5:if(this._managerReady){e.next=8;break}return e.next=8,this.waitManagerReady();case 8:return e.abrupt("return",this.shareManager.share(r));case 9:case"end":return e.stop()}},e,this)}));return function(r,t){return e.apply(this,arguments)}}()},{key:"_buildThumbnailURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=e.thumbnailURL;if(void 0!==t){var n=e.waterMark,a=t||"";void 0!==n&&null!==n||(n=me.DEFAULT),a=be(a,n),r===E.a.WECHAT_SESSION&&n===me.DEFAULT&&(a=be(a,me.WE_CHAT_MSG,!0)),a=(a||"").replace(/^\/\//,"http://"),e.thumbnailURL=a}}},{key:"_buildShareURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e.shareURL);if(t){if(e.urlWrapType!==J.a.RAW){var n=new Q.a(t),a=n.query||{},i=Object.keys(a).reduce(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Te.indexOf(r)>=0&&(e[r]=null),e},{}),s=Object(_.b)(!0),o={_wv:41729,_wvx:10};!Object(v.a)().isWeChatPlatform||r!==E.a.QQ_CHAT_SESSION&&r!==E.a.QQ_ZONE||(o.sf_tag="wechat"),r!==E.a.WECHAT_TIMELINE_IMAGE&&r!==E.a.WECHAT_TIMELINE_IMAGE_WITH_NO_SDK||(o.from="qrImg");var h=n.pathname||"",u=Object.assign({},o,s,a,Oe,i),c=e.shareDomain||Ce.shareDomain;e.shareURL=Object(Ie.a)(u,Object(d.h)(h),c)}}else delete e.shareURL}},{key:"_checkSDKPrepared",value:function(){var e=h()(s.a.mark(function e(r){var t,n,i,o,h,u,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.flowControllConfig,n=void 0===t?{}:t,i=r.otherConfig,o=void 0===i?{}:i,!n.isSDKPrepare||this._sdkPrepared){e.next=10;break}return this._sdkPrepared=!0,e.next=5,this.shareManager.getShareControllerAsync();case 5:h=e.sent,o.wechatAppID&&(this._actualWeChatAppID=o.wechatAppID),(u=o.shareTypeEnable)&&"object"===a()(u)&&(c=Object.keys(u).filter(function(e){return!u[e]}).map(function(e){return parseInt(e,10)}),h&&h.disableShare(c)),h&&h.emit(S.a.ON_SDK_READY,{wechatAppID:o.wechatAppID,magicTrace:o.magicTrace});case 10:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"getShareManager",value:function(){return this.setup(),this.shareManager}},{key:"setupNativeShareButton",value:function(){var e=h()(s.a.mark(function e(r,t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),this.shareManager){e.next=3;break}return e.abrupt("return");case 3:if(this._managerReady){e.next=6;break}return e.next=6,this.waitManagerReady();case 6:return e.abrupt("return",this.shareManager.setupNativeShareButton(r,t));case 7:case"end":return e.stop()}},e,this)}));return function(r,t){return e.apply(this,arguments)}}()}]),e}();Pe.getInstance=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Le||(Le=new Pe(e)),Le};var De=Pe,Ne=t("A4fa"),ke=t("6wpZ"),Me=t("rUjM"),Ue=t("KxTr"),we=t("1dcj");t.d(r,"ShareErrorCode",function(){return He}),t.d(r,"ShareChannel",function(){return j}),t.d(r,"ShareEventType",function(){return S.a}),t.d(r,"ShareResult",function(){return R}),t.d(r,"ShareResultType",function(){return C.a}),t.d(r,"ShareType",function(){return E.a}),t.d(r,"ShareWaterMark",function(){return me}),t.d(r,"URLWrapType",function(){return J.a}),t.d(r,"ShareForm",function(){return T.a}),t.d(r,"ShareMethod",function(){return I.a}),t.d(r,"ThirdPartyOpenType",function(){return Ne.a}),t.d(r,"CipherConsumeMode",function(){return ke.a}),t.d(r,"TPSelectCategory",function(){return Me.a}),t.d(r,"CipherPasteType",function(){return Ue.a}),t.d(r,"SystemShareMode",function(){return we.a}),t.d(r,"setPageContext",function(){return ee.d});var He=O.b.ShareErrorCode,je={};je=De;r.default=je}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-eve-spike/js/pdd-mod/market-share_4ed78c8efb37288da496.js.map