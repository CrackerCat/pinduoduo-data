(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{"JpoG":function(e,t,o){e.exports={"main":"_2rs_6yY","content":"_2zK7_XY","walletBg":"FIAGyrT","walletBackBg":"_2IR1lOD","desc":"_21wEz_F","noDesc":"_2eLxhVV","ingotsDesc":"rO9NAqW","nums":"_1-Cu4Ij","number":"_2tNy064","unit":"_26lmZcP","redpacket":"_27u1XQM","redpacketLeft":"_3u4Ch8w","redpacketMid":"_138E-w0","redpacketRight":"_8yAeHe0","redpacketLeftMove":"bvHrzGs","redpacketMidMove":"_308BjYm","redpacketRightMove":"_1rqjger","bgBreath":"_105e1RJ","bgScale":"_3VM0f0T","ingotsLeft":"_1y_ueOQ","ingotsRight":"ozElsTQ"}},"V7Mh":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return R}));var s,a,n,r=o("p5LO"),i=o("wzp5"),c=o("kRu4"),l=o.n(c),u=o("RgDV"),m=o("w9YI"),g=o("QjaO"),h=o("cJQI"),b=o("ZsPb"),d=o("JsaZ"),p=o("MQ17"),f=o("q1tI"),w=o.n(f),v=o("2oo6"),T=o("TyAF"),O=o("gpDe"),j=o("JpoG"),k=o.n(j),I=o("3uR/"),_=o("7Qib"),N=o("lC+4"),C=o("ktSw"),E=o("TSYQ"),S=o.n(E),x=o("hn0O"),L=o("gT8B"),A=o("4r5b"),y=o("M3Mi"),D=o("SgPz"),M=o("TRXh"),U=o("tpcr"),G=o("vfXv"),R=(s=Object(T.inject)(O.b.POPUP_QUEUE,O.b.GLOBAL,O.b.WALLET),a=Object(U.b)(Object(G.a)(),"showWalletProcess"),s(n=Object(T.observer)(n=a(n=function(e){Object(b.a)(WalletProcess,e);var t=Object(d.a)(WalletProcess);function WalletProcess(e){var o;return Object(m.a)(this,WalletProcess),o=t.call(this,e),Object(p.a)(Object(h.a)(o),"ingotsGainRes",void 0),Object(p.a)(Object(h.a)(o),"showLastCurrentAmount",void 0),Object(p.a)(Object(h.a)(o),"shoudleShowNotice",(function(){var e=o.missionInfo||{},t=e.nextCompleteTime,s=e.finishCount;return t-o.globalStore.serverTime/1e3>=o.store.checkNoticeThreshold()&&s>10})),Object(p.a)(Object(h.a)(o),"showNotice",(function(){o.store.number=o.store.computeCurNum(o.canDraw,o.globalStore.serverTime),o.store.scrollTime=0,setTimeout((function(){o.store.number=(Number(o.store.number)+.001).toFixed(3)+"",o.store.scrollTime=2e3,clearTimeout(o.store.timer),o.store.timer=setTimeout((function(){o.store.animationStep()}),2e3)}))})),Object(p.a)(Object(h.a)(o),"onClose",Object(u.a)(l.a.mark((function _callee(){return l.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:o.store.fromTrigger&&o.isIngotsUser&&o.getfirstGain(),o.ingotsGainRes&&o.isIngotsUser&&o.showExchangeReward(),o.popupQueueStore.close("showWalletProcess");case 3:case"end":return e.stop()}}),_callee)})))),Object(p.a)(Object(h.a)(o),"getfirstGain",(function(){o.popupQueueStore.instantShow("showWalletTosat")})),Object(p.a)(Object(h.a)(o),"onWalletClick",Object(C.a)(Object(u.a)(l.a.mark((function _callee2(){var e,t,s;return l.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(Object(y.a)(5799378),!o.canDraw){a.next=13;break}return e=o.missionInfo||{},t=e.missionType,a.next=5,Object(A.b)(x.c.WALLET,t,{"globalStore":o.globalStore,"popupQueueStore":o.popupQueueStore});case 5:s=a.sent,o.store.init(s),o.store.initClient(),o.store.number="0.000",o.store.scrollTime=0,clearTimeout(o.store.timer),o.store.timer=setTimeout((function(){o.store.animationStep()}),100),o.onClose();case 13:o.onClose();case 14:case"end":return a.stop()}}),_callee2)}))))),Object(p.a)(Object(h.a)(o),"onIngotsClick",Object(C.a)(Object(u.a)(l.a.mark((function _callee3(){return l.a.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if(Object(y.a)(5799378),!o.store.fromTrigger){e.next=5;break}o.onClose(),e.next=15;break;case 5:if(!o.ingotsGainRes){e.next=9;break}o.showExchangeReward(),e.next=14;break;case 9:if(!o.store.isShowDraw){e.next=13;break}o.getfirstGain(),e.next=14;break;case 13:return e.abrupt("return",M.a.showToast("满".concat(o.store.gainGoldIngotLimit,"个可领")));case 14:o.popupQueueStore.close("showWalletProcess");case 15:case"end":return e.stop()}}),_callee3)}))))),Object(p.a)(Object(h.a)(o),"getIngotsGain",Object(u.a)(l.a.mark((function _callee4(){var e,t,s,a,n,r,i,c;return l.a.wrap((function _callee4$(l){for(;;)switch(l.prev=l.next){case 0:return s=o.goldIngotMission||{},a=s.missionType,l.next=3,Object(A.b)(x.c.WALLET,a,{"globalStore":o.globalStore,"popupQueueStore":o.popupQueueStore});case 3:n=l.sent,o.showLastCurrentAmount=o.store.nowCurrentAmount,o.ingotsGainRes=n,o.store.init(n),r=null==n||null===(e=n.featureMap)||void 0===e||null===(t=e[x.c.WALLET])||void 0===t?void 0:t.featureDataVo,i=r.remainGoldIngotAmount,c=void 0===i?0:i,o.store.set({"ingotsNumber":c,"scrollIngotsTime":0}),clearTimeout(o.store.ingotsTimer),o.store.ingotsTimer=setTimeout((function(){o.store.animationIngotsStep()}));case 11:case"end":return l.stop()}}),_callee4)})))),Object(p.a)(Object(h.a)(o),"showExchangeReward",(function(){var e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.ingotsGainRes,a=s.healthAccountVo,n=void 0===a?{}:a,r=s.rewards,i=void 0===r?[]:r;o.popupQueueStore.instantShow("showExchangeReward"),o.globalStore.set({"healthAccountVoTmp":n,"featureReward":null!==(e=null==i||null===(t=i[0])||void 0===t?void 0:t.rewardAmount)&&void 0!==e?e:0,"currentFeatureId":x.c.WALLET})})),Object(p.a)(Object(h.a)(o),"renderWallet",(function(){var e=o.missionInfo||{},t=e.finishCount>=e.maxCount;return w.a.createElement(r.a,{"className":S()(k.a.main,Object(p.a)({},k.a.bgBreath,!o.canDraw&&!t))},w.a.createElement(i.a,{"src":Object(_.a)("v2_wallet_back_bg"),"className":k.a.walletBackBg}),w.a.createElement(r.a,{"className":k.a.redpackets},w.a.createElement(i.a,{"src":Object(_.a)("wallet_redpacket_process_left"),"className":S()(k.a.redpacket,k.a.redpacketLeft,Object(p.a)({},k.a.redpacketLeftMove,!o.canDraw&&!t))}),w.a.createElement(i.a,{"src":Object(_.a)("wallet_redpacket_process_right"),"className":S()(k.a.redpacket,k.a.redpacketRight,Object(p.a)({},k.a.redpacketRightMove,!o.canDraw&&!t))}),w.a.createElement(i.a,{"src":Object(_.a)("wallet_redpacket_process_mid"),"className":S()(k.a.redpacket,k.a.redpacketMid,Object(p.a)({},k.a.redpacketMidMove,!o.canDraw&&!t))})),w.a.createElement(i.a,{"src":Object(_.a)("v2_wallet_bg"),"className":k.a.walletBg}))})),Object(p.a)(Object(h.a)(o),"renderIngots",(function(){return w.a.createElement(r.a,{"className":k.a.main},w.a.createElement(i.a,{"src":Object(_.a)("v2_wallet_back_bg"),"className":k.a.walletBackBg}),w.a.createElement(r.a,{"className":k.a.redpackets},w.a.createElement(i.a,{"src":Object(_.a)("ingots_left"),"className":S()(k.a.redpacket,k.a.ingotsLeft)}),w.a.createElement(i.a,{"src":Object(_.a)("Ingots_right"),"className":S()(k.a.redpacket,k.a.ingotsRight)})),w.a.createElement(i.a,{"src":Object(_.a)("v2_wallet_bg"),"className":k.a.walletBg}))})),Object(p.a)(Object(h.a)(o),"renderNumber",(function(){return w.a.createElement(r.a,{"className":k.a.nums},w.a.createElement(L.a,{"num":o.store.number,"width":37,"minCacheItemNum":5,"height":52,"duration":o.store.scrollTime,"className":k.a.number}),w.a.createElement(r.a,{"className":k.a.unit},"元"))})),Object(p.a)(Object(h.a)(o),"renderIngotsNumber",(function(){var e=o.store.showIngotsNumber;return w.a.createElement(r.a,{"className":k.a.nums},w.a.createElement(L.a,{"num":e(),"duration":o.store.scrollIngotsTime,"width":37,"height":60,"className":k.a.number}),w.a.createElement(r.a,{"className":k.a.unit},"个"))})),o.isIngotsUser?o.store.ingotsNumber=o.store.computeCurIngotsNum(o.globalStore.serverTime):o.store.number=o.store.computeCurNum(o.canDraw,o.globalStore.serverTime),o}return Object(g.a)(WalletProcess,[{"key":"componentDidMount","value":function componentDidMount(){if(Object(y.b)(5799378),this.isIngotsUser)this.isIngotsUsercomponentDidMount();else if(!this.canDraw){if(this.shoudleShowNotice())return this.showNotice();clearTimeout(this.store.timer),this.store.timer=setTimeout(this.store.animationStep)}}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.store.fromTrigger=!1}},{"key":"isIngotsUsercomponentDidMount","value":function isIngotsUsercomponentDidMount(){var e=this;if(this.store.fromTrigger&&this.store.lastAccumulateTs){var t=this.store.firstGain;this.store.set({"ingotsNumber":t})}else if(Object(D.a)(this.globalStore,"fakeTodayTimeLeft",(function(){e.store.computeCurIngotsNum(e.globalStore.serverTime)>=e.store.gainGoldIngotLimit&&e.store.set({"isShowDraw":!0})})),this.store.nowCurrentAmount>=this.store.targetAmount)this.getIngotsGain();else{var o=this.store.computeCurIngotsNum(this.globalStore.serverTime);o<this.store.targetAmount&&(clearTimeout(this.store.ingotsTimer),this.store.ingotsTimer=setTimeout((function(){e.store.animationIngotsStep(o)})))}}},{"key":"render","value":function render(){return w.a.createElement(v.a,{"showClose":!0,"onClose":this.onClose,"mainTitle":this.mainTitle,"subTitle":this.subTitle,"btn1Text":this.btnText,"popupZoomIn":!this.store.fromTrigger,"onBtn1Confirm":this.isIngotsUser?this.onIngotsClick:this.onWalletClick,"btn1Props":{"breath":this.canDraw}},w.a.createElement(r.a,{"className":this.descText?k.a.content:S()(k.a.content,k.a.noDesc)},this.isIngotsUser?this.renderIngots():this.renderWallet(),this.isIngotsUser?this.renderIngotsNumber():this.renderNumber()),this.descText?w.a.createElement(r.a,{"className":this.isIngotsUser?k.a.ingotsDesc:k.a.desc},w.a.createElement(N.a,{"text":this.descText})):null)}},{"key":"popupQueueStore","get":function get(){return this.props[O.b.POPUP_QUEUE]}},{"key":"globalStore","get":function get(){return this.props[O.b.GLOBAL]}},{"key":"store","get":function get(){return this.props[O.b.WALLET]}},{"key":"missionInfo","get":function get(){var e,t;return(null===(e=this.store.featureItem)||void 0===e||null===(t=e.featureDataVo)||void 0===t?void 0:t.missionInfoVo)||{}}},{"key":"goldIngotMission","get":function get(){var e,t;return(null===(e=this.store.featureItem)||void 0===e||null===(t=e.featureDataVo)||void 0===t?void 0:t.goldIngotMission)||{}}},{"key":"canDraw","get":function get(){var e,t=this.missionInfo||{},o=t.finishCount,s=t.maxCount;return(0===this.store.walletTimeLeft||this.globalStore.serverTime>=1e3*(null===(e=this.missionInfo)||void 0===e?void 0:e.nextCompleteTime))&&o<s}},{"key":"isTodayFinish","get":function get(){var e=this.missionInfo||{};return e.finishCount>=e.maxCount}},{"key":"isIngotsUser","get":function get(){var e;return null===(e=this.store)||void 0===e?void 0:e.isIngotsUser}},{"key":"showAmount","get":function get(){return 1/this.store.targetAmount}},{"key":"mainTitle","get":function get(){var e,t,o;if(this.isTodayFinish&&!this.isIngotsUser)return"明日可继续领现金";var s=["钱袋正在产生现金","每满<#red#".concat(Object(I.o)(((null===(e=this.missionInfo)||void 0===e||null===(t=e.rewards)||void 0===t||null===(o=t.find((function(e){return e.rewardType===x.i.CASH})))||void 0===o?void 0:o.rewardAmount)||0)/100),"元>可直接领取")],a=[this.ingotsGainRes?"恭喜你，可以兑换现金".concat(this.showAmount,"元"):"钱袋自动产生元宝，满<#FF740D#".concat(this.store.gainGoldIngotLimit,"个>即可领")];return this.isIngotsUser?a:s}},{"key":"subTitle","get":function get(){var e=this.store.targetAmount;return this.isIngotsUser?"每".concat(e,"个元宝可换").concat(1/e,"元现金{redpacket%15%}"):""}},{"key":"btnText","get":function get(){return this.isIngotsUser?this.store.fromTrigger?"立即领元宝":this.ingotsGainRes?"立即换成".concat(this.showAmount,"元"):this.store.isShowDraw?"立即领元宝":"满".concat(this.store.gainGoldIngotLimit,"个可领"):this.isTodayFinish?"明日再来":this.canDraw?"立即领现金":this.store.walletTimeLeft<=3e4?"".concat(Math.ceil(this.store.walletTimeLeft/1e3),"秒后领现金"):"稍后来领"}},{"key":"descText","get":function get(){var e,t=this.missionInfo||{},o=t.finishCount,s=t.maxCount,a=this.store.nowCurrentAmount,n="".concat(o>=s?"明日预计":"每日","可领<#F74814#").concat((Number(this.store.rewardAmount)*(null===(e=this.missionInfo)||void 0===e?void 0:e.maxCount)).toFixed(2),"元>"),r=this.showLastCurrentAmount||a?"已领".concat(this.showLastCurrentAmount||a,"个"):"";return this.isIngotsUser?r:n}}]),WalletProcess}(f.Component))||n)||n)||n)}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-fit/js/FitV2Popups-WalletProcess_3014a11a9cf353c97297.js.map