!function(){var e,t,n,r,i,o,a,s={37920:function(e,t,n){"use strict";n(96253),n(40851);var r=n(85821),i=(n(27476),n(95767),n(98837),n(94882),n(98351),n(18482)),o=n(25118),a=n(37883),s=n.n(a),c=(n(88644),n(25386)),u=n(30109),l=n(24837),f=n(22691);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreApi,n=e.simpleRate;(0,f.Nt)({ignoreApi:["AMDevice:deviceInfo","AMDevice:getMemoryInfo","AMDevice:getBatteryInfo","WebScene:getPageVisibility","JSNavigation:referPageContext","JSUIControl:setTitle","WebScene:onWebMounted","JSNotification:send","JSUIControl:getNavigationHeight","AMUser:info","WebScene:getUnoContext","WebScene:getTiming"].concat((0,l.Z)(t||[])),simpleRate:n||.1})},h={universalPaths:[],universalQueryKeys:[],appId:"100487",testAppId:"100303",bizSide:"consumer-platform-fe"};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){return(0,o.Z)(s().mark((function t(){var n,i,o,a,l,f,d,m,v,y;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.appConfig,o=i.options,a=void 0===o?{}:o,l=i.title,f=void 0===l?"":l,d=i.beforeBoot,m=a&&a.pageProperty&&(a.pageProperty.cmtSN||a.pageProperty.pageSN),v=!!(a&&a.pageProperty&&a.pageProperty.usePmmReport),y=null==a||null===(n=a.pageProperty)||void 0===n?void 0:n.useMonitor,m&&!y&&c.ZP.init({id:m,usePmmReport:v}),p(),"function"==typeof d&&d(),t.abrupt("return",(0,r.I)(e,g(g({},a),{},{pmmAppInfo:h})).then((function(){var e,t;(0,u.r1)((null===(e=window.__INITIAL_PROPS__.stores)||void 0===e||null===(t=e.store)||void 0===t?void 0:t.$title)||f)})));case 8:case"end":return t.stop()}}),t)})))},y=n(87401),b=n(70798),w=n(28477),S=n(64425),x=n(36102),I=n.n(x)(),A=(location.hostname,n(76181));function P(e){(0,y.useEffect)((function(){return e()}),[])}n(62773);var E=n(65577),k=["104220","104497","104980"];function O(e){var t=e.pn,n=void 0===t?"":t;P((function(){!function(e){var t=e.pn,n=void 0===t?"":t;E.q.init({pn:n,groupId:k.includes(n)?11022:90184,pagePath:window.location.pathname})}({pn:n})}))}var C=n(28070);n(19371),n(82139);var D=n(68309),_=n(69348),L=n(45558),N=n(91074),T=n(11269),M=n(49385),R=(n(79622),n(59357),n(83946),n(76142),n(91758)),j=n.n(R),U=n(24649);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){var n=e instanceof Error;if(!(e&&["api_biz_error","api_http_error"].includes(e.errorType)&&["object","number"].includes((0,M.Z)(e.errorCode)))){var r=n?e:new Error(JSON.stringify(e)),i=j().computeStackTrace(r),o=i.name+":"+i.message;o+=(i.stack||[]).map((function(e){return"@ ".concat(e.func,"(").concat(e.url,":").concat(e.line,":").concat(e.column,")")})).join("");var a=location.search?location.href+"&"+(0,U.XP)({JS_ERROR:o}):location.href+"?"+(0,U.XP)({JS_ERROR:o});(0,u.K2)(new Error(i.message),F({op:"real_error",error_message:i.message,page:i?i.name+" "+i.message+" "+JSON.stringify(i.stack):"no info",page_url:location.href,debug_url:a},t))}}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}var H=y.createContext((function(){return null})),Q=function(e){(0,L.Z)(n,e);var t=X(n);function n(){var e;(0,D.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e.onCaptureError=function(t,n,r){var i,o;return null===(i=(o=e.props).onError)||void 0===i||i.call(o,t,n),B(t,{event:"vlayer_component_error",errorInfo:n,payload:W(W({},r),{},{captureName:e.props.name||"ErrorBoundary"})}),!0},e}return(0,_.Z)(n,[{key:"componentDidCatch",value:function(e,t){var n,r,i;this.setState({hasError:!0}),null===(n=(r=this.props).onError)||void 0===n||n.call(r,e,t);var o={name:this.props.name||"ErrorBoundary"};(null===(i=this.context)||void 0===i?void 0:i.call(this,e,t,o))||B(e,{event:"vlayer_component_error",errorInfo:t,payload:o})}},{key:"render",value:function(){return this.state.hasError?null:this.props.capture?y.createElement(H.Provider,{value:this.onCaptureError},this.props.children):this.props.children}}]),n}(y.Component);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Q.contextType=H;(0,C.cp)({key:"CustomPortalIdAtom",defaultValue:0});var q=(0,C.cp)({key:"CustomPortalAtom",defaultValue:{portals:{}},createActions:function(e){var t=e.setValue,n=e.getValue;return{renderPortal:function(e,r){t({portals:V(V({},n().portals),{},(0,i.Z)({},e,r))})},removePortal:function(e){if(e in n().portals){var r=V({},n().portals);delete r[e],t({portals:r})}}}}}),Y=(0,y.memo)((function(){var e=q.useAtom(),t=(0,A.Z)(e,1)[0].portals;return y.createElement("div",null,Object.keys(t).map((function(e){return y.createElement(Q,{key:e},t[e])})))}));function J(e){var t,n=e.value,r=e.children,i=(0,y.useContext)(b.yX).store;return y.createElement(C.s_,{ctx:null==i||null===(t=i.$ctx)||void 0===t?void 0:t.requestContext,value:n,onAtomAction:function(e,t,n){try{if("setValue"!==t||"RemoteDrawCoinStateAtom"===e)return}catch(e){console.error(e)}}},r,y.createElement(Y,null))}var K,$,ee=n(38796),te=n(99057),ne=n(61122),re=n(43736),ie=n(22188),oe=n(13287),ae=n(41385),se=n(74711),ce=n(31403);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}var le,fe,de=function(e){var t=e.req,n=e.res,r=e.requestContext,i=e.ssrData,o=void 0===i?{}:i,a=r.query,s=void 0===a?{}:a,c=o.listId||s.listId||(0,ce.x)(10),u=o.unoData||null;try{}catch(e){}return{requestContext:r,platform:(0,se.zT)(),query:s,listId:c,webpEnable:null==r?void 0:r.isSupportWebp,req:t,res:n,unoData:u,toJSON:function(){return{unoData:u,listId:c}}}},pe=(K=function(e){(0,L.Z)(r,e);var t,n=ue(r);function r(){var e;(0,D.Z)(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).$ctx=void 0,(0,ee.Z)(e,"$title",$,(0,te.Z)(e)),e}return(0,_.Z)(r,[{key:"initDataCallback",value:(t=(0,o.Z)(s().mark((function e(t){var n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.__req,i=t.__res,this.$ctx=de({req:n,res:i,requestContext:t}),e.abrupt("return",(0,ne.Z)((0,T.Z)(r.prototype),"initDataCallback",this).call(this,t));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"fromJS",value:function(e,t){(0,ne.Z)((0,T.Z)(r.prototype),"fromJS",this).call(this,e,t),this.$ctx=de({ssrData:null==e?void 0:e.$ctx,requestContext:(0,ae.Y)()})}}]),r}(oe.j),$=(0,re.Z)(K.prototype,"$title",[ie.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,re.Z)(K.prototype,"initDataCallback",[ie.aD],Object.getOwnPropertyDescriptor(K.prototype,"initDataCallback"),K.prototype),(0,re.Z)(K.prototype,"fromJS",[ie.aD],Object.getOwnPropertyDescriptor(K.prototype,"fromJS"),K.prototype),K),he=n(41609),me=n.n(he),ge=n(1581),ve=n.n(ge),ye=n(23493),be=n.n(ye),we=n(43597),Se=be()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.querySelector(".pin-toast-container");n&&(n.style.top=t?"80%":""),(0,we.Z)(e)}),3e3),xe=Se;!function(e){e[e.unknown=0]="unknown",e[e.Male=1]="Male",e[e.Female=2]="Female"}(le||(le={})),function(e){e.Select="select",e.Modify="modify",e.Switch="switch",e.ActivitySwitch="activity_switch"}(fe||(fe={}));var Ie=(0,C.cp)({key:"StarInfoUploadAtom",defaultValue:{originGender:le.unknown,starName:"",starAvatarUrl:"",starGender:le.Male,originInfo:{starName:"",starAvatarUrl:"",starGender:le.Male},starListPanel:{topRecommendText:"",starList:[]}}}),Ae=(n(17732),n(44518).Z),Pe=n(9148),Ee=n(53967),ke=(0,C.P1)({key:"RequestContextSelector",get:function(e){return(0,e.getCtx)()}});function Oe(){return(0,C.v9)(ke)}var Ce=(0,C.P1)({key:"AxiosSelector",get:function(e){var t=e.get,n=t(ke),r=(n.__req,n.__res,{pageInfo:{pageId:(0,Pe.e6)()}});return(0,Ee.e)(r)}});function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}function Ne(e){var t=(e||{}).message;(function(e){var t=e||{},n=t.message;return!("api_error_app"!==t.errorType&&!String(n||"").startsWith("Request failed with status code 424"))})(e)||(String(t||"").startsWith("native request error:")?xe("网络异常，请稍后重试"):xe(t||"网络异常，请稍后重试"))}var Te=function(e){(0,L.Z)(n,e);var t=Le(n);function n(){var e,r,i;(0,D.Z)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(i=t.call.apply(t,[this].concat(a))).commonParams={},i.get=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,ce.x)(36);return(0,ne.Z)((e=(0,te.Z)(i),(0,T.Z)(n.prototype)),"get",e).call(e,t,_e(_e({requestId:a,requestSn:a},i.commonParams),r),_e({enableAntiContent:!0},o))},i.post=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,ce.x)(36);return(0,ne.Z)((r=(0,te.Z)(i),(0,T.Z)(n.prototype)),"post",r).call(r,e,_e(_e({requestId:a,requestSn:a},i.commonParams),t),_e({enableAntiContent:!0},o))},i}return(0,_.Z)(n,[{key:"getStarUploadPanelData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.post("/api/william/star/upload_panel",e,{enableTransfer:!0})}},{key:"uploadStarInfo",value:function(e){return this.post("/api/william/star/upload",e,{enableTransfer:!0,defaultErrorHandler:Ne})}}]),n}(Ae),Me=(0,C.P1)({key:"StarInfoUploadServiceSelector",get:function(e){var t=e.get,n=t(Ce),r=new Te(n),i=t(ke).query,o=i.page_from,a=i.scene,s=i.source,c=i.star_interaction_guide;return r.commonParams={page_from:o,pet_id:"pet"===s?1:2,scene:a,star_interaction_guide:c},r}}),Re=(0,C.cp)({key:"StarInfoUploadActions",createActions:function(e){var t=e.getActions,n=e.getAtomValue,r=e.getCtx,i=t(Ie).setValue,a=function(e){i({starName:e})},c=function(){var e=n(Ie).starName.trim();return a(e),e?!(ve()(e).length>10)||(xe("昵称不得超过".concat(10,"个字符")),!1):(xe("请先输入昵称"),!1)},u=function(){var e=n(Ie).starAvatarUrl;if(r().query.scene===fe.Modify){var t=n(Ie),i=t.starName,o=t.starAvatarUrl,a=t.starGender,s=t.originInfo;if(s.starName===i&&s.starAvatarUrl===o&&s.starGender===a)return xe("未发现改动项"),!1}return!!e||(xe("请先上传头像"),!1)},l=function(e){i({starAvatarUrl:e})},f=function(e){i({starGender:e})};return{checkInputName:c,setStarName:a,setStarAvatarUrl:l,setStarGender:f,selectStar:function(e){var t=e.avatarUrl,n=e.name,r=e.gender;i({starAvatarUrl:t,starGender:r,starName:n})},requestSubmit:function(){return(0,o.Z)(s().mark((function e(){var t,r,i,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u()&&c()){e.next=2;break}return e.abrupt("return");case 2:return t=n(Ie),r=t.starName,i=t.starAvatarUrl,o=t.starGender,e.next=5,n(Me).uploadStarInfo({nickname:r,gender:o,avatar:i});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))()},init:function(){return(0,o.Z)(s().mark((function e(){var t,r,o,c,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(Me).getStarUploadPanelData({});case 2:null!=(t=e.sent)&&t.success&&t.result&&(r=t.result,o=r.avatar,c=r.gender,u=r.nickname,d=r.starListPanel,u&&a(u),o&&l(o),void 0!==c&&(f(c),i({originGender:c})),!me()(d)&&i({starListPanel:d}),i({originInfo:{starName:u,starAvatarUrl:o,starGender:c}}));case 4:case"end":return e.stop()}}),e)})))()}}}});function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}var Ue=function(e){(0,L.Z)(n,e);var t=je(n);function n(){var e;(0,D.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).value=void 0,e.isError=!1,e.getInitialData=(0,o.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,C.Ez)([Re],e.$ctx.requestContext);case 2:e.value=t.sent;case 3:case"end":return t.stop()}}),t)}))),e}return(0,_.Z)(n,[{key:"getDatasource",value:function(){return[this.getInitialData]}}]),n}(pe),Ze=n(94184),Fe=n.n(Ze),Be=n(46278),Ge=n(49704),We={buildCtx:function(e,t){e=e||{},t=t||{};var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]={value:t[r],enumerable:!0,writable:!1});return Object.create(e,n)},pickCtx:function(e){e=e||{};var t={};for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}},Xe=n(35607);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}var Qe=function(e){(0,L.Z)(n,e);var t=He(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).ctxUtil=We,r.mountViewID=e.mountViewID,r.viewID=e.viewID,r.setupViewContext(e),r.isServerEnv="undefined"==typeof window,r.isClientEnv=!r.isServerEnv,r.platform=r.isClientEnv&&(0,se.Xf)(navigator.userAgent),r.buildViewContext(),r}return(0,_.Z)(n,[{key:"setupViewContext",value:function(e){var t=e.viewCtx||{};"object"!==(0,M.Z)(t)||0===Object.keys(t).length&&!t.isRoot?((t={}).isRoot=!0,this.viewCtx=t):(Object.keys(t).length&&!t.isRoot&&(t.isRoot=!0),this.viewCtx=this.ctxUtil.buildCtx(t))}},{key:"buildViewContext",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"track",value:function(e,t){if(this.isClientEnv&&e){var n=We.pickCtx(We.buildCtx(this.viewCtx,e));n.ad&&"object"===(0,M.Z)(n.ad)&&(n.ad=JSON.stringify(n.ad)),n.hasOwnProperty("isRoot")&&delete n.isRoot,(0,Xe.oP)(n).catch((function(){})).then(t)}}}]),n}(y.Component);Qe.defaultProps={show:!1};var ze=Qe,Ve=n(42202);function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}n(23549);var Ye="data:image/jpeg;base64,",Je=1,Ke=2,$e=function(e){(0,L.Z)(n,e);var t=qe(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).state={show:!1,isUp:!1},r.animating=!1,r}return(0,_.Z)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.isClientEnv&&!this.animating&&(e.show&&!this.props.show?(this.animating=!0,this.setState({show:!0},(function(){window.setTimeout((function(){t.setState({isUp:!0}),t.animating=!1}),100)}))):!e.show&&this.props.show&&(this.animating=!0,this.setState({isUp:!1}),window.setTimeout((function(){t.setState({show:!1}),t.animating=!1}),100)))}},{key:"render",value:function(){var e=this;return y.createElement("div",{id:this.viewID,style:{display:this.state.show?"":"none"},className:"base-image-selector"},y.createElement("div",{className:this.state.isUp?"bis-select-image-slide-up bis-select-image":"bis-select-image"},y.createElement("div",{className:"bis-select-image-type"},y.createElement("p",{id:"".concat(this.viewID,"-camera"),className:"bis-from-camera",onClick:function(){e.selectImageFromCamera()}},"拍照"),y.createElement("p",{id:"".concat(this.viewID,"-album"),className:"bis-from-album",onClick:function(){e.selectImageFromAlbum()}},"从相册选择")),y.createElement("div",{id:"".concat(this.viewID,"-cancel"),className:"bis-select-cancel",onClick:function(){e.hide()}},"取消")),y.createElement("div",{className:"bis-select-image-mask",onClick:function(){e.hide()}}))}},{key:"hide",value:function(){this.props.onClose&&this.props.onClose()}},{key:"selectImageFromCamera",value:function(){this.selectImage(Je),this.hide()}},{key:"selectImageFromAlbum",value:function(){this.selectImage(Ke),this.hide()}},{key:"selectImage",value:function(e){var t=this,n={source:e},r=this.platform.platform===Ve.iw.PddIOS,i=r?"4.79.0":"4.85.0",o=(0,Ve.yC)(this.platform.version,i)>=0;r&&this.props.option&&(n.option=this.props.option),o&&(n.max_images_count=this.props.maxImageCount);var a=o?"getV2":"get";(0,f.Q6)("JSPhoto",a,n).then((function(e){if((e=e||{}).image_data){var n=e.image_data,r="".concat(Ye).concat(n);return t.props.onSelectStart&&t.props.onSelectStart(),void(t.props.onSelected&&t.props.onSelected(r))}if(e.image_list){if(!e.image_list.length)return t.props.onSelectFail&&t.props.onSelectFail();e.image_list.reduce((function(e,n){return e.then((function(){return t.props.onSelectStart&&t.props.onSelectStart(),t.props.onSelected&&t.props.onSelected("".concat(Ye).concat(n))}))}),Promise.resolve())}})).catch((function(){t.props.onSelectCancel&&t.props.onSelectCancel()}))}}]),n}(ze);$e.defaultProps={onSelected:null,onSelectStart:null,onSelectCancel:null,onSelectFail:function(){return(0,we.Z)("图片上传失败")},onClose:null,option:null};var et=$e,tt=n(31767),nt=n(93246),rt=n(12674),it=function(e){var t,n=e.index,r=e.height,o=e.width,a=e.imageList,s=e.onClose,c=(0,y.useState)(+n||0),u=(0,A.Z)(c,2),l=u[0],f=u[1];(0,y.useEffect)((function(){return(0,nt.XY)(),function(){(0,nt.K9)()}}),[a,n]);var d=a.map((function(e,t){return y.createElement("div",{key:t,style:{background:'center no-repeat url("'.concat((0,U.Hm)(e),'")'),backgroundSize:"contain",height:r,width:o}})}));return y.createElement("div",{style:(t={position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:9999999,background:"#000",display:"flex"},(0,i.Z)(t,"display","-webkit-flex"),(0,i.Z)(t,"justifyContent","center"),(0,i.Z)(t,"WebkitJustifyContent","center"),(0,i.Z)(t,"WebkitAlignItems","center"),(0,i.Z)(t,"alignItems","center"),t),onClick:s},y.createElement(tt.ZP,{enableMouseEvents:!0,index:l,onChangeIndex:function(e){f(e)}},d))};function ot(e,t,n){if(n=n||{},e=(0,U.Hm)(e),t&&(t=t.map((function(e){return(0,U.Hm)(e)}))),(0,se.zT)().isNativePlatform){var r=n,i=r.viewAttri,o=r.showIndexBar,a=void 0===o||o,s=r.comeInAnim,c=r.exitOutAnim,u=r.hybridPhotoBrowser,l=r.longImageOptimizeInIphonex;null==t&&(t=[e]);var d=t.indexOf(e);d<0&&(d=0);var p=t.map((function(e){return{url:e}}));(0,f.Q6)("JSNavigation","modal",{type:"photo_browse",props:{browse_items:p,view_attri:i,show_index_bar:a,current_index:d,come_in_anim:s,exit_out_anim:c,hybrid_photo_browser:u,long_image_optimize_in_iphonex:l},navigation_bar:{hidden:!0}})}else{var h,m=n.ViewNotWechatInteraface||!1;if(t=t||[e],h=!(!window.wx||!window.wx.previewImage),(0,se.zT)().isWechatPlatform&&h&&!m)window.wx.previewImage({urls:t,current:e});else!function(e,t){var n=document.createElement("div");document.body.appendChild(n),rt.render(y.createElement(it,{height:window.innerHeight+"px",width:window.innerWidth+"px",imageList:t,index:t.indexOf(e),onClose:function(){setTimeout((function(){rt.unmountComponentAtNode(n),document.body.removeChild(n),n=null}),0)}}),n)}(e,t)}}n(62850),n(39115),n(56997),n(91181);var at,st=(at=Pe.ZP.getInstance().getPageID(),(0,Ee.e)({pageInfo:{pageId:at}})),ct=function(){function e(){(0,D.Z)(this,e),this.bucketTag=null,this.loaded=!1,this.api="image/signature"}return(0,_.Z)(e,[{key:"load",value:function(e){e=e||{},this.bucketTag=e.bucketTag||this.bucketTag}},{key:"getSign",value:function(){var e=this;return new Promise((function(t,n){st.post(e.api,{bucket_tag:e.bucketTag}).then((function(e){t({signature:(e=e||{}).signature||""})}),(function(){n()}))}))}}]),e}(),ut={DEFAULT:0,LOADING:1,ENCODING:2,ENCODED:3,UPLOADING:4,UPLOADED:5},lt={VERTICAL:0,HORIZONTAL:1},ft=(0,_.Z)((function e(t){(0,D.Z)(this,e),t=t||{},this.key=t.key||null,this.url=t.url||"",this.status=t.status||ut.DEFAULT,this.orientation=t.orientation||lt.VERTICAL,this.base64=null,this.width=0,this.height=0,this.webURL=null}));ft.ImageStatus=ut,ft.ImageOrientation=lt;var dt=ft,pt=function(){function e(){(0,D.Z)(this,e),this.img=null,this.coreContext=null}var t;return(0,_.Z)(e,[{key:"load",value:function(e){e=e||{},this.coreContext=e.context||null}},{key:"onSelected",value:(t=(0,o.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&this.coreContext&&this.img)){e.next=5;break}return this.coreContext.updateImage(this.img,t),e.next=4,this.coreContext.loadImage(this.img);case 4:this.coreContext.process(this.img);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onSelectStart",value:function(){this.img&&(this.img=null),this.img=this.coreContext.createImage()}},{key:"onSelectCancel",value:function(){this.coreContext&&(this.coreContext.remove(this.img),this.img=null)}}]),e}(),ht=pt;n(46964);var mt={};"undefined"!=typeof window&&(mt=new function(e){Math.round;var t,n,r,i,o,a=Math.floor,s=new Array(64),c=new Array(64),u=new Array(64),l=new Array(64),f=new Array(65535),d=new Array(65535),p=new Array(64),h=new Array(64),m=[],g=0,v=7,y=new Array(64),b=new Array(64),w=new Array(64),S=new Array(256),x=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(e,t){for(var n=0,r=0,i=[],o=1;o<=16;o++){for(var a=1;a<=e[o];a++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=o,r++,n++;n*=2}return i}function N(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(T(255),T(0)):T(g),v=7,g=0)}function T(e){m.push(S[e])}function M(e){T(e>>8&255),T(255&e)}function R(e,t,n,r,i){for(var o,a=i[0],s=i[240],c=function(e,t){var n,r,i,o,a,s,c,u,l,f,d=0;for(l=0;l<8;++l){n=e[d],r=e[d+1],i=e[d+2],o=e[d+3],a=e[d+4],s=e[d+5],c=e[d+6];var h=n+(u=e[d+7]),m=n-u,g=r+c,v=r-c,y=i+s,b=i-s,w=o+a,S=o-a,x=h+w,I=h-w,A=g+y,P=g-y;e[d]=x+A,e[d+4]=x-A;var E=.707106781*(P+I);e[d+2]=I+E,e[d+6]=I-E;var k=.382683433*((x=S+b)-(P=v+m)),O=.5411961*x+k,C=1.306562965*P+k,D=.707106781*(A=b+v),_=m+D,L=m-D;e[d+5]=L+O,e[d+3]=L-O,e[d+1]=_+C,e[d+7]=_-C,d+=8}for(d=0,l=0;l<8;++l){n=e[d],r=e[d+8],i=e[d+16],o=e[d+24],a=e[d+32],s=e[d+40],c=e[d+48];var N=n+(u=e[d+56]),T=n-u,M=r+c,R=r-c,j=i+s,U=i-s,Z=o+a,F=o-a,B=N+Z,G=N-Z,W=M+j,X=M-j;e[d]=B+W,e[d+32]=B-W;var H=.707106781*(X+G);e[d+16]=G+H,e[d+48]=G-H;var Q=.382683433*((B=F+U)-(X=R+T)),z=.5411961*B+Q,V=1.306562965*X+Q,q=.707106781*(W=U+R),Y=T+q,J=T-q;e[d+40]=J+z,e[d+24]=J-z,e[d+8]=Y+V,e[d+56]=Y-V,d++}for(l=0;l<64;++l)f=e[l]*t[l],p[l]=f>0?f+.5|0:f-.5|0;return p}(e,t),u=0;u<64;++u)h[I[u]]=c[u];var l=h[0]-n;n=h[0],0==l?N(r[0]):(N(r[d[o=32767+l]]),N(f[o]));for(var m=63;m>0&&0==h[m];)m--;if(0==m)return N(a),n;for(var g,v=1;v<=m;){for(var y=v;0==h[v]&&v<=m;)++v;var b=v-y;if(b>=16){g=b>>4;for(var w=1;w<=g;++w)N(s);b&=15}o=32767+h[v],N(i[(b<<4)+d[o]]),N(f[o]),v++}return 63!=m&&N(a),n}function j(e){e<=0&&(e=1),e>100&&(e=100),o!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r<1?r=1:r>255&&(r=255),s[I[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var f=a((i[o]*e+50)/100);f<1?f=1:f>255&&(f=255),c[I[o]]=f}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,h=0;h<8;h++)for(var m=0;m<8;m++)u[p]=1/(s[I[p]]*d[h]*d[m]*8),l[p]=1/(c[I[p]]*d[h]*d[m]*8),p++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o,a){(new Date).getTime(),o&&j(o),m=[],g=0,v=7,M(65496),M(65504),M(16),T(74),T(70),T(73),T(70),T(0),T(1),T(1),T(0),M(1),M(1),T(0),T(0),function(){M(65499),M(132),T(0);for(var e=0;e<64;e++)T(s[e]);T(1);for(var t=0;t<64;t++)T(c[t])}(),function(e,t){M(65472),M(17),T(8),M(t),M(e),T(3),T(1),T(17),T(0),T(2),T(17),T(1),T(3),T(17),T(1)}(e.width,e.height),function(){M(65476),M(418),T(0);for(var e=0;e<16;e++)T(A[e+1]);for(var t=0;t<=11;t++)T(P[t]);T(16);for(var n=0;n<16;n++)T(E[n+1]);for(var r=0;r<=161;r++)T(k[r]);T(1);for(var i=0;i<16;i++)T(O[i+1]);for(var o=0;o<=11;o++)T(C[o]);T(17);for(var a=0;a<16;a++)T(D[a+1]);for(var s=0;s<=161;s++)T(_[s])}(),M(65498),M(12),T(3),T(1),T(0),T(2),T(17),T(3),T(17),T(0),T(63),T(0);var f=0,d=0,p=0;g=0,v=7,this.encode.displayName="_encode_";for(var h,S,I,L,U,Z,F,B,G,W=e.data,X=e.width,H=e.height,Q=4*X,z=0;z<H;){for(h=0;h<Q;){for(Z=U=Q*z+h,F=-1,B=0,G=0;G<64;G++)Z=U+(B=G>>3)*Q+(F=4*(7&G)),z+B>=H&&(Z-=Q*(z+1+B-H)),h+F>=Q&&(Z-=h+F-Q+4),S=W[Z++],I=W[Z++],L=W[Z++],y[G]=(x[S]+x[I+256>>0]+x[L+512>>0]>>16)-128,b[G]=(x[S+768>>0]+x[I+1024>>0]+x[L+1280>>0]>>16)-128,w[G]=(x[S+1280>>0]+x[I+1536>>0]+x[L+1792>>0]>>16)-128;f=R(y,u,f,t,r),d=R(b,l,d,n,i),p=R(w,l,p,n,i),h+=32}z+=8}if(v>=0){var V=[];V[1]=v+1,V[0]=(1<<v+1)-1,N(V)}if(M(65497),a){for(var q=m.length,Y=new Uint8Array(q),J=0;J<q;J++)Y[J]=m[J].charCodeAt();return m=[],Y}var K="data:image/jpeg;base64,"+btoa(m.join(""));return m=[],K},e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)S[t]=e(t)}(),t=L(A,P),n=L(O,C),r=L(E,k),i=L(D,_),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)d[32767+r]=n,f[32767+r]=[],f[32767+r][1]=n,f[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)d[32767+i]=n,f[32767+i]=[],f[32767+i][1]=n,f[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}(),j(e)}(100));var gt=mt,vt=(n(21466),n(11246),{EXIF:null});(function(){var e=function e(t){return t instanceof e?t:this instanceof e?void 0:new e(t)},t=e.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},n=e.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},r=e.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},i=e.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function o(e){return!!e.exifdata}function a(e,t){function n(n){var r=s(n),i=function(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var n=2,r=e.byteLength,i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n+5<r;){if(i(t,n)){var o=t.getUint8(n+7);return o%2!=0&&(o+=1),0===o&&(o=4),u(e,n+8+o,t.getUint16(n+6+o))}n++}}(n);e.exifdata=r||{},e.iptcdata=i||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"").replace(/%0A/gi,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),o=new Uint8Array(i),a=0;a<r;a++)o[a]=n.charCodeAt(a);return i}(e.src));else if(/^blob\:/i.test(e.src)){var r=new FileReader;r.onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(function(e){r.readAsArrayBuffer(e)}))}else{var i=new XMLHttpRequest;i.onload=function(){if(200!=this.status&&0!==this.status)throw new Error("Could not load image");n(i.response),i=null},i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var o=new FileReader;o.onload=function(e){n(e.target.result)},o.readAsArrayBuffer(e)}}function s(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength;n<r;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return p(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var c={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function u(e,t,n){for(var r,i,o,a,s=new DataView(e),u={},l=t;l<t+n;)28===s.getUint8(l)&&2===s.getUint8(l+1)&&(a=s.getUint8(l+2))in c&&((o=s.getInt16(l+3))+5,i=c[a],r=d(s,l+5,o),u.hasOwnProperty(i)?u[i]instanceof Array?u[i].push(r):u[i]=[u[i],r]:u[i]=r),l++;return u}function l(e,t,n,r,i){var o,a,s=e.getUint16(n,!i),c={};for(a=0;a<s;a++)o=n+12*a+2,c[r[e.getUint16(o,!i)]]=f(e,o,t,n,i);return c}function f(e,t,n,r,i){var o,a,s,c,u,l,f=e.getUint16(t+2,!i),p=e.getUint32(t+4,!i),h=e.getUint32(t+8,!i)+n;switch(f){case 1:case 7:if(1==p)return e.getUint8(t+8,!i);for(o=p>4?h:t+8,a=[],c=0;c<p;c++)a[c]=e.getUint8(o+c);return a;case 2:return d(e,o=p>4?h:t+8,p-1);case 3:if(1==p)return e.getUint16(t+8,!i);for(o=p>2?h:t+8,a=[],c=0;c<p;c++)a[c]=e.getUint16(o+2*c,!i);return a;case 4:if(1==p)return e.getUint32(t+8,!i);for(a=[],c=0;c<p;c++)a[c]=e.getUint32(h+4*c,!i);return a;case 5:if(1==p)return u=e.getUint32(h,!i),l=e.getUint32(h+4,!i),(s=new Number(u/l)).numerator=u,s.denominator=l,s;for(a=[],c=0;c<p;c++)u=e.getUint32(h+8*c,!i),l=e.getUint32(h+4+8*c,!i),a[c]=new Number(u/l),a[c].numerator=u,a[c].denominator=l;return a;case 9:if(1==p)return e.getInt32(t+8,!i);for(a=[],c=0;c<p;c++)a[c]=e.getInt32(h+4*c,!i);return a;case 10:if(1==p)return e.getInt32(h,!i)/e.getInt32(h+4,!i);for(a=[],c=0;c<p;c++)a[c]=e.getInt32(h+8*c,!i)/e.getInt32(h+4+8*c,!i);return a}}function d(e,t,n){for(var r="",i=t;i<t+n;i++)r+=String.fromCharCode(e.getUint8(i));return r}function p(e,o){if("Exif"!=d(e,o,4))return!1;var a,s,c,u,f=o+6;if(18761==e.getUint16(f))a=!1;else{if(19789!=e.getUint16(f))return!1;a=!0}if(42!=e.getUint16(f+2,!a))return!1;var p=e.getUint32(f+4,!a);if(p<8)return!1;var h=l(e,f,f+p,n,a);if(h.ExifIFDPointer)for(s in c=l(e,f,f+h.ExifIFDPointer,t,a)){switch(s){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":c[s]=i[s][c[s]];break;case"ExifVersion":case"FlashpixVersion":c[s]=String.fromCharCode(c[s][0],c[s][1],c[s][2],c[s][3]);break;case"ComponentsConfiguration":c[s]=i.Components[c[s][0]]+i.Components[c[s][1]]+i.Components[c[s][2]]+i.Components[c[s][3]]}h[s]=c[s]}if(h.GPSInfoIFDPointer)for(s in u=l(e,f,f+h.GPSInfoIFDPointer,r,a)){if("GPSVersionID"===s)u[s]=u[s][0]+"."+u[s][1]+"."+u[s][2]+"."+u[s][3];h[s]=u[s]}return h}e.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(o(e)?t&&t.call(e):a(e,t),!0)},e.getTag=function(e,t){if(o(e))return e.exifdata[t]},e.getAllTags=function(e){if(!o(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},e.pretty=function(e){if(!o(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"===(0,M.Z)(n[t])?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},e.readFromBinaryFile=function(e){return s(e)},vt.EXIF=e}).call(window);var yt=vt,bt=null,wt=function(){function e(t){(0,D.Z)(this,e),this.returnNullIfNotFitLimit=t.returnNullIfNotFitLimit||!1,this.limitBase64Length=t.limitBase64Length||0}return(0,_.Z)(e,[{key:"compressImage",value:function(e,t){var n=this;e&&t&&this.getImgData(e,(function(e,r){var i=r.width,o=r.height,a=i/o;(i>1200||o>1200)&&(i=1200,(o=parseInt(i/a,10))>1200&&(o=1200,i=parseInt(o*a,10)));var s=document.createElement("canvas"),c=s.getContext("2d");if(s.width=i,s.height=o,c.drawImage(r,0,0,i,o),e&&1!==e)switch(e){case 6:n.rotateImg(r,"left",s,i,o);break;case 8:n.rotateImg(r,"right",s,i,o);break;case 3:n.rotateImg(r,"right",s,i,o),n.rotateImg(r,"right",s,i,o)}if(6!==e&&8!==e||(i+=o,i-=o=i-o),n.notSupportCompressJpeg||n.tryLoopCompress(i,o,75,(function(e){return s.toDataURL("image/jpeg",e/100)}),!1,t),n.notSupportCompressJpeg){var u=c.getImageData(0,0,i,o);n.tryLoopCompress(i,o,75,(function(e){return gt.encode(u,e,!1)}),!0,t)}}))}},{key:"getImgData",value:function(e,t){var n=new Image;n.src=e.url,n.onload=function(){try{void 0!==e.exifOrientation?t(e.exifOrientation,n):yt.EXIF.getData(n,(function(){yt.EXIF.getAllTags(n);var e=yt.EXIF.getTag(n,"Orientation");t(e,n)}))}catch(e){t(null,n)}}}},{key:"tryLoopCompress",value:function(e,t,n,r,i,o){var a;do{if(a=r(n),n-=10,!i&&(!a||a.length<10||0===a.indexOf("data:image/png;")))return void(this.notSupportCompressJpeg=!0)}while(a.length>this.limitBase64Length&&n>=10);a.length>this.limitBase64Length&&this.returnNullIfNotFitLimit?o&&o(null,e,t):o&&o(a,e,t)}},{key:"rotateImg",value:function(e,t,n,r,i){if(e){var o=2;o||(o=0),"right"===t?++o>3&&(o=0):--o<0&&(o=3);var a=90*o*Math.PI/180,s=n.getContext("2d");switch(o){case 0:n.width=r,n.height=i,s.drawImage(e,0,0,r,i);break;case 1:n.width=i,n.height=r,s.rotate(a),s.drawImage(e,0,-i,r,i);break;case 2:n.width=r,n.height=i,s.rotate(a),s.drawImage(e,-r,-i,r,i);break;case 3:n.width=i,n.height=r,s.rotate(a),s.drawImage(e,-r,0,r,i)}}}}]),e}();wt.getInstance=function(){return bt||(bt=new wt),bt};var St=wt;var xt=dt.ImageStatus,It=dt.ImageOrientation,At=300,Pt=300;function Et(e,t){if(t&&e){for(var n=[],r=2;r<arguments.length;++r)n.push(arguments[r]);t.apply(e,n)}}var kt=function(){function e(t){(0,D.Z)(this,e),this.loaded=!1,this.imageMap=t.imageMap||{},this.keyList=t.keyList||[],this.nativeReceiver=null,this.seed=t.seed||1,this.uploadAPI="v2/store_image",this.signatureModule=null,this.taskMap={},this.callbackMap={},this.context=null,this.imageTargetSize=Pt,this.imageLimitSize=At,this.imageUtil=null,this.fileDomain="",this.useXHR=!!t.useXHR}var t,n,r;return(0,_.Z)(e,[{key:"load",value:function(e){this.loaded||(e=e||{},this.uploadAPI=e.uploadAPI||this.uploadAPI,this.callbackMap=e.callbackMap||this.callbackMap,this.context=e.context||this.context,this.imageTargetSize=e.imageTargetSize||this.imageTargetSize,this.imageLimitSize=e.imageLimitSize||this.imageLimitSize,this.fileDomain=e.fileDomain||(location.href.includes("hutaojie")?"https://file.hutaojie.com/":"https://file.pinduoduo.com/"),this.imageUtil=e.imageUtil||new St({limitBase64Length:1024*this.imageLimitSize,returnNullIfNotFitLimit:!1}),this.nativeReceiver=new ht,this.signatureModule=new ct,this.nativeReceiver.load({context:this}),this.signatureModule.load({bucketTag:e.bucketTag}))}},{key:"createImage",value:function(){return new dt({key:"img-"+this.seed++})}},{key:"updateImage",value:function(e,t,n){e&&(n=n||{},e.url=t,e.orientation=n.orientation||e.orientation)}},{key:"loadImage",value:(r=(0,o.Z)(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.status!==xt.DEFAULT){e.next=11;break}return this.imageMap[t.key]=t,this.keyList.push(t.key),t.status=xt.LOADING,e.next=6,this.getImageOrientation(t);case 6:n=e.sent,t.exifOrientation=n,r=this.context,i=this.callbackMap.onLoad,Et(r,i,t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getImageOrientation",value:(n=(0,o.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new Image;n.onload=function(){if(2===n.width&&3===n.height)return e(0);var r=new Image;r.onload=function(){try{yt.EXIF.getData(r,(function(){e(yt.EXIF.getTag(r,"Orientation")||0)}))}catch(t){e(yt.EXIF.getTag(r,"Orientation")||0)}},r.src=t.url},n.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="})));case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"createImageAndLoad",value:(t=(0,o.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createImage(t,n),this.updateImage(r,t,n),e.next=4,this.loadImage(r);case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"loadImageByFile",value:function(e){if((e=e||{}).type){if(!/^(image\/jpeg|image\/png)$/i.test(e.type))return}else if(e.name){var t=e.name||"";if(-1===(t=t.toUpperCase()).indexOf("IMAGE%3A")&&-1===t.indexOf("IMAGE:"))return}var n=(URL||window.webkitURL).createObjectURL(e);return this.createImageAndLoad(n)}},{key:"remove",value:function(e){if(e){var t=e.key,n=this.keyList.indexOf(t);n>=0&&this.keyList.splice(n,1)}}},{key:"getImage",value:function(e){return this.imageMap[e]||null}},{key:"getImages",value:function(){var e=this.imageMap||{},t=this.keyList||[],n=[];return t.forEach((function(t){var r=e[t]||null;r&&n.push(r)})),n}},{key:"getImageCount",value:function(){return this.keyList.length}},{key:"getImageProperties",value:function(e,t){var n=this.imageMap||{},r=this.keyList||[],i=[];return r.forEach((function(r){var o=n[r];if(e&&o)if("string"==typeof e)o&&o[e]&&i.push(o[e]||t);else if("object"===(0,M.Z)(e)){var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=o[e[s]]||t);a&&i.push(a)}})),i}},{key:"encodeImage",value:function(e){e=e||{};var t=this;return new Promise((function(n,r){if(e.status===xt.LOADING&&e.url){e.status=xt.ENCODING,Et(t.context,t.callbackMap.onEncode,e);var i=new Image,o=e.url,a=function(t,r,i){e.base64=t.replace(/%0A/gi,""),e.width=r,e.height=i,e.orientation=r>i?It.HORIZONTAL:It.VERTICAL,e.status=xt.ENCODED,n(e)};i.onload=function(n){0!==o.indexOf("data:image/")||o.length>1024*t.imageLimitSize?t.imageUtil.compressImage(e,a):a(o,i.width,i.height)},i.src=o}else r()}))}},{key:"uploadImage",value:function(e,t){var n=this,r=this;return e=e||{},new Promise((function(i,o){if(t&&e&&e.status===xt.ENCODED&&e.base64){e.status=xt.UPLOADING,Et(r.context,r.callbackMap.onUpload,e);var a=function(t){e.status=xt.UPLOADED,t=t||{},e.webURL=t.url,e.width=t.width,e.height=t.height,i(e)},s=function(e){o(e)},c=n.fileDomain+n.uploadAPI,u={upload_sign:t,image:e.base64};n.useXHR?function(e,t,n,r){var i={method:e,body:null==n?null:JSON.stringify(n),headers:{"Content-Type":null==n?"application/x-www-form-urlencoded;charset=UTF-8":"application/json;charset=UTF-8"},credentials:"include"};i.headers.AccessToken=localStorage.getItem("AccessToken")||"";var o=new XMLHttpRequest;o.open(i.method,t,!0),o.withCredentials=!0;var a=i.headers||{};for(var s in a)o.setRequestHeader(s,a[s]);return o.onerror=r.onUploadError,o.upload.addEventListener("progress",r.onUploadProgress),o.ontimeout=r.onUploadTimeout,o.send(i.body),new Promise((function(e,t){o.onload=function(){var n=null;try{n=JSON.parse(o.responseText)}catch(e){n={}}if(n&&n.error_code)return t({errorCode:n.error_code,errorMessage:n.error_message});e(n)},o.onerror=function(e){t(e)}}))}("POST",c,u,{onUploadProgress:function(t){r.callbackMap.onUploadProgress&&r.callbackMap.onUploadProgress(e.url,t)}}).then(a,s):st.post(c,u).then(a,s)}else o()}))}},{key:"process",value:function(e){var t=this,n=t.encodeImage(e),r=t.signatureModule.getSign(),i=Promise.all([r,n]).then((function(n){var r=((n=n||[])[0]||{}).signature;return t.uploadImage(n[1]||e,r).then((function(e){Et(t.context,t.callbackMap.onSuccess,e)}),(function(n){Et(t.context,t.callbackMap.onFail,e,n)}))}),(function(){Et(t.context,t.callbackMap.onFail,e)}));return t.taskMap[e.key]=i,i}},{key:"isAllImageReady",value:function(){for(var e=this.keyList||[],t=0,n=e.length;t<n;t++){var r=this.imageMap[e[t]];if(r&&(r.status!==xt.UPLOADED||!r.webURL))return!1}return!0}},{key:"waitForAll",value:function(e){var t=[],n=this;this.keyList.forEach((function(e){n.taskMap[e]&&t.push(n.taskMap[e])})),Promise.all(t).then((function(){"function"==typeof e&&e(!0)}),(function(){"function"==typeof e&&e(!1)})).catch((function(t){"function"==typeof e&&e(!1)}))}}]),e}(),Ot=kt;function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}n(66741);var Dt="请选择jpeg、png格式的图片",_t="请检查网络，稍候重试",Lt="图片上传失败",Nt={},Tt=function(e){(0,L.Z)(n,e);var t=Ct(n);function n(e){var r;return(0,D.Z)(this,n),(r=t.call(this,e)).state=r.state||{},r.state.imageInfoList=Array.isArray(e.imageInfoList)?e.imageInfoList:[],r.state.uploadProgressMap={},r.state.showSelector=!1,r.core=null,r.maximum=parseInt(e.maximum||5,10),r.imageSelectorOption=r.props.imageSelectorOption||"",r.imageTargetSize=e.imageTargetSize||300,r.imageLimitSize=e.imageLimitSize||null,r.bucketTag=e.bucketTag||null,r.fileDomain=e.fileDomain||null,r.disabled=!1,r.onInputChange=null,r}return(0,_.Z)(n,[{key:"initImageInfoList",value:function(){var e=[],t={},n=this.state.imageInfoList;return n.forEach((function(n,r){var i="img-".concat(r+1);e.push(i),n.key=i,t[i]=n})),{keyList:e,imageMap:t,seed:n.length+1,useXHR:!!this.props.enableUploadProgress}}},{key:"componentWillMount",value:function(){if((0,ne.Z)((0,T.Z)(n.prototype),"componentWillMount",this).call(this),this.isClientEnv){var e=this.platform,t=e.isNativePlatform,r=e.isWeChatMiniProgram,i=e.version;this.isNativePlatform=t,this.isWeChatMiniProgram=r&&window.wx,this.isPhotoDisabled=this.isNativePlatform&&this.platform.statisfy(["1.2.6","1.2.7","1.2.8"],"","contains");var o=i;this.isNativePlatform&&o.length>0&&(0,Ve.yC)(o,"1.1.2")>0&&(this.canSelectInNative=!0);var a=this.initImageInfoList();this.core=new Ot(a)}}},{key:"componentDidMount",value:function(){(0,ne.Z)((0,T.Z)(n.prototype),"componentDidMount",this).call(this),this.core.load({bucketTag:this.bucketTag,fileDomain:this.fileDomain,context:this,callbackMap:{onLoad:this.onImageLoad,onEncode:this.onImageEncode,onUpload:this.onImageUpload,onUploadProgress:this.onUploadProgress.bind(this),onSuccess:this.onUploadSuccess,onFail:this.onUploadFail},fileHttpsTester:this.props.fileHttps,useXHR:this.props.enableUploadProgress}),this.resetInput()}},{key:"render",value:function(){var e=this,t=this.state.imageInfoList,n=void 0===t?[]:t,r=this.maximum,i=n.length>=r?{display:"none"}:{};return y.createElement("div",{id:this.viewID,className:"image-uploader-module"},this.renderCubes(n),y.createElement("div",{id:"".concat(this.viewID,"-selector"),onClick:function(t){e.onSelectImage()},className:"ium-selector ium-cube ium-cube-last-in-line",style:i},y.createElement("div",{id:"".concat(this.viewID,"-indicator"),className:"ium-indicator"},y.createElement("div",{className:"ium-indicator-icon icon icon-evaluation-camera"}),0===n.length&&y.createElement("div",{className:"ium-indicator-text"},this.props.indicatorText?this.props.indicatorText:"上传图片"),n.length>0&&y.createElement("div",{className:"ium-indicator-text"},n.length,y.createElement("i",null,"/"),r)),!this.isNativePlatform&&!this.isWeChatMiniProgram&&y.createElement("input",{id:"".concat(this.viewID,"-input"),accept:"image/*",type:"file"})),this.renderImageSelector(r-n.length))}},{key:"renderCubes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.state.uploadProgressMap,r=this.props.enableUploadProgress;return t.map((function(t,i){return t=t||{},y.createElement("div",{key:i,className:"ium-image-block ium-cube",onClick:function(){e.viewImageList(t)}},!!t.url&&e.renderImgCube(t),!!(r&&t.status<5)&&y.createElement("div",{className:"ium-progress-block"},y.createElement("div",{style:{width:"".concat(n[t.url],"%")}})),!r&&5!==t.status&&y.createElement("div",{className:"ium-tip-block"},"上传中"),y.createElement("div",{className:"ium-delete icon icon-close",onClick:function(n){e.deleteInfo(t,n)}}))}))}},{key:"renderImgCube",value:function(e){var t=this.getRotationDegree(e.exifOrientation);return this.platform.platform===Ve.iw.PddAndroid||this.isWeChatMiniProgram?y.createElement("img",{src:e.url,style:{"-webkit-transform":"rotate(".concat(t,"deg)"),transform:"rotate(".concat(t,"deg)")}}):y.createElement("div",{className:"image-box",style:{backgroundImage:"url(".concat(e.url,")"),backgroundSize:"cover",backgroundPosition:"center","-webkit-transform":"rotate(".concat(t,"deg)"),transform:"rotate(".concat(t,"deg)")}})}},{key:"onSelectImage",value:function(){this.isWeChatMiniProgram?this.selectImageInWxMiniProgram():this.onSelectNativeImage()}},{key:"onSelectNativeImage",value:function(){this.disabled||(this.isPhotoDisabled?alert("请升级软件"):this.selectImageInNative())}},{key:"deleteInfo",value:function(e,t){(t=t||event)&&t.preventDefault(),t&&t.stopPropagation(),this.disabled||this.removeImage(e)}},{key:"viewImageList",value:function(e,t){if((t=t||event)&&t.preventDefault(),t&&t.stopPropagation(),!this.disabled){var n=this.getImageWebURLs()||[];if(n.length>0){var r=(e=e||{}).webURL;r&&ot(r||n[0],n,{ViewNotWechatInteraface:this.isNativePlatform})}}}},{key:"getImages",value:function(){return this.core.getImages()}},{key:"getImageCount",value:function(){return this.core.keyList.length}},{key:"getImageWebURLs",value:function(){return this.core.getImageProperties("webURL","")}},{key:"getImageWebInfo",value:function(){return this.core.getImageProperties({url:"webURL",height:"height",width:"width"})}},{key:"isAllImageReady",value:function(){return this.core.isAllImageReady()}},{key:"waitForAll",value:function(e){this.core.waitForAll(e)}},{key:"resetInput",value:function(){var e=this,t=document.getElementById("".concat(this.viewID,"-input"));t&&(t.outerHTML=t.outerHTML.replace(/(value=\").+\"/i,'$1"'),t=document.getElementById("".concat(this.viewID,"-input")),this.isNativePlatform||(this.onInputChange&&(t.removeEventListener("change",this.onInputChange),this.onInputChange=null),this.onInputChange=function(){var n=(0,o.Z)(s().mark((function n(r){var i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.disabled){n.next=2;break}return n.abrupt("return");case 2:if(t.files&&t.files[0]){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,e.core.loadImageByFile(t.files[0]);case 6:(i=n.sent)?(e.core.process(i),e.resetInput()):(0,we.Z)(Dt);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),t.addEventListener("change",this.onInputChange)))}},{key:"onImageLoad",value:function(e){Nt[e.url]?Nt[e.url]=void 0:this.setState({imageInfoList:this.state.imageInfoList.concat([e])})}},{key:"onImageEncode",value:function(e){}},{key:"onImageUpload",value:function(e){}},{key:"onUploadSuccess",value:function(e){this.updateImage(e),"function"==typeof this.props.onSuccess&&this.props.onSuccess(e)}},{key:"onUploadFail",value:function(e,t){var n=this,r="";r=!(t=t||{}).errorCode||t instanceof ProgressEvent?_t:(0,Ge.f)(t.errorCode)||Lt,(0,we.Z)(r),Nt[e.url]=!0,setTimeout((function(){n.removeImage(e)}),200)}},{key:"removeImage",value:function(e){for(var t=this,n=this.state.imageInfoList||[],r=0,i=n.length;r<i;r++)if(n[r].key===e.key)return n.splice(r,1),void this.setState({imageInfoList:n},(function(){t.core.remove(e)}))}},{key:"updateImage",value:function(e){for(var t=this.state.imageInfoList||[],n=0,r=t.length;n<r;n++)if(t[n].key===e.key)return t[n].status=e.status,t[n].webURL=e.webURL,t[n].exifOrientation=e.exifOrientation,void this.setState({imageInfoList:t})}},{key:"disable",value:function(){this.disable=!0}},{key:"enable",value:function(){this.disabled=!1}},{key:"renderImageSelector",value:function(e){var t=this;if(this.canSelectInNative){var n=this.core.nativeReceiver;return y.createElement(et,{viewID:"".concat(this.viewID,"-native-selector"),viewCtx:this.viewCtx,option:this.imageSelectorOption,show:this.state.showSelector,maxImageCount:e,onSelected:function(e){return n.onSelected(e)},onSelectStart:function(){n.onSelectStart()},onSelectCancel:function(){n.onSelectCancel()},onClose:function(){t.setState({showSelector:!1})}})}return!1}},{key:"selectImageInNative",value:function(){this.setState({showSelector:!0})}},{key:"onWxAppUploadFail",value:function(e){}},{key:"selectImageInWxMiniProgram",value:function(){var e=this,t=this.state.imageInfoList,n=void 0===t?[]:t,r=this.core.nativeReceiver;window.wx&&window.wx.chooseImage({count:this.maximum-n.length,success:function(t){(t.localIds||[]).reduce((function(t,n){return t.then((function(){return r.onSelectStart(),e.getWxMiniProgramImageData(n).then((function(e){return r.onSelected(e)})).catch((function(t){r.onSelectCancel(),e.onWxAppUploadFail(t)}))}))}),Promise.resolve())},fail:function(t){e.onWxAppUploadFail(t)}})}},{key:"getWxMiniProgramImageData",value:function(e){return new Promise((function(t,n){window.wx&&window.wx.getLocalImgData({localId:e,success:function(e){var n=e.localData;/^\s*data:image/.test(n)||(n="data:image/jpeg;base64,".concat(n)),n=n.replace("image/jpg","image/jpeg"),t(n)},fail:function(e){n(e)}})}))}},{key:"getRotationDegree",value:function(e){var t=0;switch(e){case 6:t=90;break;case 8:t=-90;break;case 3:t=180}return t}},{key:"onUploadProgress",value:function(e,t){var n=this.state.uploadProgressMap;n[e]=100*t.loaded/t.total,this.setState({uploadProgressMap:n})}}]),n}(ze),Mt=Tt,Rt=n(344),jt=n(95813),Ut=n(88382),Zt=(0,C.P1)({key:"WebpEnableSelector",get:function(e){var t,n=e.get;return null===(t=n(ke))||void 0===t?void 0:t.isSupportWebp}}),Ft=["processParam","resizeWidth","quality","lazy"];function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wt(e){var t,n=e.processParam,r=e.resizeWidth,i=e.quality,o=e.lazy,a=void 0!==o&&o,s=(0,jt.Z)(e,Ft),c=(0,C.v9)(Zt),u=(0,C.v9)(ke),l=null==u||null===(t=u.platform)||void 0===t?void 0:t.system,f=!!l&&l!==Ve.we.IOS;return y.createElement(Ut.Z,(0,Rt.Z)({processParam:Gt({webpEnable:c,enableGifToWebp:f,resizeWidth:r,quality:i},n),lazy:a},s))}var Xt=n(99481),Ht=n.n(Xt);function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,T.Z)(e);if(t){var i=(0,T.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,N.Z)(this,n)}}var zt="请检查网络，稍候重试",Vt="图片上传失败",qt=function(e){(0,L.Z)(n,e);var t=Qt(n);function n(){var e,r;(0,D.Z)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=t.call.apply(t,[this].concat(o))).selectTid=void 0,r.onSelectImage=function(){clearTimeout(r.selectTid),r.selectTid=setTimeout((function(){(0,ne.Z)((e=(0,te.Z)(r),(0,T.Z)(n.prototype)),"onSelectImage",e).call(e),clearTimeout(r.selectTid)}),100)},r.spinnerTid=void 0,r}return(0,_.Z)(n,[{key:"onImageLoad",value:function(e){clearTimeout(this.spinnerTid),(0,Be.u)("上传中...")}},{key:"onUploadSuccess",value:function(e){var t=this;null!=e&&e.webURL?(this.props.updateSelectedImgUrl(e.webURL),this.spinnerTid=setTimeout((function(){(0,Be.D)(),clearTimeout(t.spinnerTid)}),500)):this.onUploadFail(e,{})}},{key:"onUploadFail",value:function(e,t){var n="";n=!(t=t||{}).errorCode||t instanceof ProgressEvent?zt:(0,Ge.f)(t.errorCode)||Vt,xe(n),(0,Be.D)()}},{key:"render",value:function(){var e=this;return y.createElement("div",null,y.createElement("div",{className:Fe()(Ht().imageCub,(0,i.Z)({},Ht().selected,this.props.selectedImgUrl)),onClick:function(t){e.onSelectImage()}},y.createElement("i",{className:Ht().cross}),this.props.selectedImgUrl&&y.createElement(Wt,{src:this.props.selectedImgUrl,resizeWidth:288}),y.createElement("p",{className:Ht().desc},this.props.selectedImgUrl?"修改":"上传头像")),this.renderImageSelector(this.props.maximum))}}]),n}(Mt),Yt=(0,y.memo)((function(){var e=Ie.useValue().starAvatarUrl,t=Re.useActions().setStarAvatarUrl;return y.createElement(qt,{viewID:"video-star-native-image-selector",bucketTag:"mobile-live-common-fe",maximum:1,fileHttps:!0,selectedImgUrl:e,updateSelectedImgUrl:t})})),Jt=n(44316),Kt=n.n(Jt),$t=(0,y.memo)((function(){var e=Ie.useValue().starName,t=Re.useActions(),n=t.checkInputName,r=t.setStarName;return y.createElement("div",{className:Kt().nameInput},y.createElement("span",{className:Kt().title},"昵称："),y.createElement("div",{className:Kt().inputContainer},y.createElement("input",{placeholder:"点击输入昵称",type:"text",value:e,onChange:function(e){r(e.target.value)},onBlur:function(){n()}})))})),en=n(64282),tn=n.n(en),nn=[{gender:le.Male,text:"男"},{gender:le.Female,text:"女"},{gender:le.unknown,text:"未知"}],rn=(0,y.memo)((function(){var e=Ie.useValue().starGender,t=Re.useActions().setStarGender;return y.createElement("div",{className:tn().genderSelect},y.createElement("span",{className:tn().title},"性别："),y.createElement("ul",{className:tn().options},nn.map((function(n,r){return y.createElement("li",{key:"gender-options-".concat(r),className:Fe()(tn().option,(0,i.Z)({},tn().selected,n.gender===e)),onClick:function(){t(n.gender)}},n.text)}))))})),on=n(10885),an=n(63320);function sn(e){var t=(0,y.useRef)(!1);return function(e){var t=(0,y.useRef)(e);t.current=e;var n=(0,y.useCallback)((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}((0,o.Z)(s().mark((function n(){var r,i=arguments;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.current){n.next=2;break}return n.abrupt("return");case 2:return t.current=!0,n.prev=3,n.next=6,e.apply(void 0,i);case 6:return r=n.sent,t.current=!1,n.abrupt("return",r);case 11:throw n.prev=11,n.t0=n.catch(3),t.current=!1,n.t0;case 15:case"end":return n.stop()}}),n,null,[[3,11]])}))))}n(66108);function cn(e,t){"undefined"!=typeof localStorage&&un(e,t,localStorage)}function un(e,t,n){if(e)return null==t?n.removeItem(e):void n.setItem(e,JSON.stringify(t))}var ln;(new Date).toDateString();function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.Impr="impr",e.Click="click",e.Event="event",e.DbClick="dbclick"}(ln||(ln={}));var pn=function(e){return(0,Xe.oP)(e)},hn=n(33481),mn=n.n(hn),gn=(0,y.memo)((function(){var e=Oe().query,t=Ie.useValue(),n=t.starAvatarUrl,r=t.starName,i=Re.useActions().requestSubmit;P((function(){pn(dn(dn({},{page_el_sn:6163986}),{},{op:ln.Impr}))}));var a=sn((0,o.Z)(s().mark((function t(){var o,a,c,u,l,f,p,h,m,g;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return pn(dn(dn({},{page_el_sn:6163986}),{},{op:ln.Click})),t.next=3,i();case 3:if(null!=(a=t.sent)&&a.success){t.next=6;break}return t.abrupt("return");case 6:return xe("保存成功"),t.next=9,d(1e3);case 9:u=(c=e||{}).scene,l=c.page_from,f=c.source,p=c.right_after_adopt,h=c.right_after_switch,null!=a&&null!==(o=a.result)&&void 0!==o&&o.needUpdateStarPendant&&(0,an.lW)("video.star.hasAdopted",{success:!0,starImg:n,source:"alive_star_info_upload"}),[fe.Select,fe.Switch].includes(u)&&((0,an.lW)("video.star.closePopup",{}),on.ZP.reload((0,U.ru)({_pdd_fs:1,page_from:l,right_after_adopt:p,right_after_switch:h},"pet"===f?"alive_star_activity.html":"alive_star.html"))),u===fe.Modify&&(m=a.result||{},null!=(g=m.messages)&&g.length&&cn("videoStarNewMessages",{messages:g}),on.ZP.back()),u===fe.ActivitySwitch&&(cn("videoStarActivitySwitched",{starName:r}),on.ZP.back());case 14:case"end":return t.stop()}}),t)}))));return y.createElement("button",{className:mn().saveBtn,onClick:a},"保存")})),vn=n(24917),yn=n.n(vn),bn=(0,y.memo)((function(){return y.createElement("section",{className:yn().starInfoRoot},y.createElement(Yt,null),y.createElement($t,null),y.createElement(rn,null),y.createElement(gn,null))})),wn=n(24311),Sn=n.n(wn),xn=(0,y.memo)((function(){var e=Ie.useValue().starListPanel,t=Re.useActions().selectStar,n=e||{},r=n.topRecommendText,i=n.starList;return y.createElement("section",{className:Sn().starListRoot},y.createElement("div",{className:Sn().starListContainer},y.createElement("p",{className:Sn().title},r||"附近的人都选了他们"),y.createElement("ul",{className:Sn().starList},(i||[]).map((function(e,n){return y.createElement("li",{className:Sn().starItem,key:n,onClick:function(){t(e)}},y.createElement("div",{className:Sn().starImg},!(null==e||!e.avatarUrl)&&y.createElement(Wt,{src:e.avatarUrl,lazy:n>9,resizeWidth:300}),!(null==e||!e.name)&&y.createElement("p",{className:Sn().starName},e.name)),y.createElement("button",{className:Sn().selectBtn},(null==e?void 0:e.buttonText)||"我也选他"))})))))}));n(24604);function In(){var e=Oe().query,t=Ie.useValue().originGender;return P((function(){var n=(null==e?void 0:e.scene)===fe.Modify?"编辑".concat(t===le.Female?"她":"他","的资料"):"添加喜欢的人";(0,u.r1)(n)})),y.createElement(y.Fragment,null,y.createElement(bn,null),y.createElement(xn,null))}var An={serverTemplateName:"alive_star_info_upload",title:"",fallbackCSR:true,requireLogin:!0,options:{disablePullReload:!0,pageProperty:{pageName:"alive_star_info_upload",pageSN:109234},shareInfo:{noDefaultShare:!0,disableShare:!0},noDefaultShare:!0}},Pn=I((0,w.I)({store:Ue},An),(0,b.f3)("store"))((function(e){var t=e.store;return O({pn:"109234"}),y.createElement(J,{value:t.value},y.createElement(In,null),y.createElement(S.eA,null))})),En=(0,r.D)(Pn),kn=v(Pn),On=n(63025);Promise.resolve("function"==typeof kn&&kn()).then((function(){return(0,On.x)(En)}))},44400:function(e,t,n){"use strict";var r=n(12621);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(87401)),o=(r(n(42473)),function(e){e.index;var t=e.children;i.default.Children.count(t)});t.default=o},2891:function(e,t,n){"use strict";var r=n(12621);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.children,r=e.startIndex,a=e.startX,s=e.pageX,c=e.viewLength,u=e.resistance,l=i.default.Children.count(n)-1,f=r+(a-s)/c;u?f<0?f=Math.exp(f*o.default.RESISTANCE_COEF)-1:f>l&&(f=l+1-Math.exp((l-f)*o.default.RESISTANCE_COEF)):f<0?t=((f=0)-r)*c+s:f>l&&(t=((f=l)-r)*c+s);return{index:f,startX:t}};var i=r(n(87401)),o=r(n(24999))},24999:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},85117:function(e,t,n){"use strict";n(19371);var r=n(12621);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(87401)),o=function(e,t){var n=!1,r=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var o=i.default.Children.map(e.children,r)[e.index];if(null!=o)o===i.default.Children.map(t.children,r)[t.index]&&(n=!0)}return n};t.default=o},20181:function(e,t,n){"use strict";var r=n(12621);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return c.default}});var i=r(n(44400)),o=r(n(2891)),a=r(n(24999)),s=r(n(85117)),c=r(n(9839))},9839:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){var n=e%t;return n<0?n+t:n};t.default=n},12621:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},56802:function(e,t,n){"use strict";n(51876),n(19371);var r=n(38839),i=n(67893);Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=S,t.findNativeHandler=I,t.default=t.SwipeableViewsContext=void 0;var o=i(n(68767)),a=i(n(41276)),s=i(n(77679)),c=i(n(2956)),u=i(n(40609)),l=i(n(77307)),f=i(n(72779)),d=r(n(87401)),p=(i(n(42473)),n(20181));function h(e,t,n,r){return e.addEventListener(t,n,r),{remove:function(){e.removeEventListener(t,n,r)}}}var m={direction:"ltr",display:"flex",willChange:"transform"},g={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},v={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function y(e,t){var n=t.duration,r=t.easeFunction,i=t.delay;return"".concat(e," ").concat(n," ").concat(r," ").concat(i)}function b(e,t){var n=v.rotationMatrix[t];return{pageX:n.x[0]*e.pageX+n.x[1]*e.pageY,pageY:n.y[0]*e.pageX+n.y[1]*e.pageY}}function w(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function S(e,t){for(var n=[];e&&e!==t&&e!==document.body&&!e.hasAttribute("data-swipeable");){var r=window.getComputedStyle(e);"absolute"===r.getPropertyValue("position")||"hidden"===r.getPropertyValue("overflow-x")?n=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return n}var x=null;function I(e){var t=e.domTreeShapes,n=e.pageX,r=e.startX,i=e.axis;return t.some((function(e){var t=n>=r;"x"!==i&&"y"!==i||(t=!t);var o=Math.round(e[v.scrollPosition[i]]),a=o>0,s=o+e[v.clientLength[i]]<e[v.scrollLength[i]];return!!(t&&s||!t&&a)&&(x=e.element,!0)}))}var A=d.createContext();t.SwipeableViewsContext=A;var P=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,u.default)(this,(0,l.default)(t).call(this,e))).rootNode=null,n.containerNode=null,n.ignoreNextScrollEvents=!1,n.viewLength=0,n.startX=0,n.lastX=0,n.vx=0,n.startY=0,n.isSwiping=void 0,n.started=!1,n.startIndex=0,n.transitionListener=null,n.touchMoveListener=null,n.activeSlide=null,n.indexCurrent=null,n.firstRenderTimeout=null,n.setRootNode=function(e){n.rootNode=e},n.setContainerNode=function(e){n.containerNode=e},n.setActiveSlide=function(e){n.activeSlide=e,n.updateHeight()},n.handleSwipeStart=function(e){var t=n.props.axis,r=b(e.touches[0],t);n.viewLength=n.rootNode.getBoundingClientRect()[v.length[t]],n.startX=r.pageX,n.lastX=r.pageX,n.vx=0,n.startY=r.pageY,n.isSwiping=void 0,n.started=!0;var i=window.getComputedStyle(n.containerNode),o=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform");if(o&&"none"!==o){var a=o.split("(")[1].split(")")[0].split(","),s=window.getComputedStyle(n.rootNode),c=b({pageX:parseInt(a[4],10),pageY:parseInt(a[5],10)},t);n.startIndex=-c.pageX/(n.viewLength-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10))||0}},n.handleSwipeMove=function(e){if(n.started){if(null===x||x===n.rootNode){var t=n.props,r=t.axis,i=t.children,o=t.ignoreNativeScroll,a=t.onSwitching,s=t.resistance,c=b(e.touches[0],r);if(void 0===n.isSwiping){var u=Math.abs(c.pageX-n.startX),l=Math.abs(c.pageY-n.startY),f=u>l&&u>p.constant.UNCERTAINTY_THRESHOLD;if(!s&&("y"===r||"y-reverse"===r)&&(0===n.indexCurrent&&n.startX<c.pageX||n.indexCurrent===d.Children.count(n.props.children)-1&&n.startX>c.pageX))return void(n.isSwiping=!1);if(u>l&&e.preventDefault(),!0===f||l>p.constant.UNCERTAINTY_THRESHOLD)return n.isSwiping=f,void(n.startX=c.pageX)}if(!0===n.isSwiping){e.preventDefault(),n.vx=.5*n.vx+.5*(c.pageX-n.lastX),n.lastX=c.pageX;var h=(0,p.computeIndex)({children:i,resistance:s,pageX:c.pageX,startIndex:n.startIndex,startX:n.startX,viewLength:n.viewLength}),m=h.index,g=h.startX;if(null===x&&!o)if(I({domTreeShapes:S(e.target,n.rootNode),startX:n.startX,pageX:c.pageX,axis:r}))return;g?n.startX=g:null===x&&(x=n.rootNode),n.setIndexCurrent(m);var v=function(){a&&a(m,"move")};!n.state.displaySameSlide&&n.state.isDragging||n.setState({displaySameSlide:!1,isDragging:!0},v),v()}}}else n.handleTouchStart(e)},n.handleSwipeEnd=function(){if(x=null,n.started&&(n.started=!1,!0===n.isSwiping)){var e,t=n.state.indexLatest,r=n.indexCurrent,i=t-r;e=Math.abs(n.vx)>n.props.threshold?n.vx>0?Math.floor(r):Math.ceil(r):Math.abs(i)>n.props.hysteresis?i>0?Math.floor(r):Math.ceil(r):t;var o=d.Children.count(n.props.children)-1;e<0?e=0:e>o&&(e=o),n.setIndexCurrent(e),n.setState({indexLatest:e,isDragging:!1},(function(){n.props.onSwitching&&n.props.onSwitching(e,"end"),n.props.onChangeIndex&&e!==t&&n.props.onChangeIndex(e,t,{reason:"swipe"}),r===t&&n.handleTransitionEnd()}))}},n.handleTouchStart=function(e){n.props.onTouchStart&&n.props.onTouchStart(e),n.handleSwipeStart(e)},n.handleTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),n.handleSwipeEnd(e)},n.handleMouseDown=function(e){n.props.onMouseDown&&n.props.onMouseDown(e),e.persist(),n.handleSwipeStart(w(e))},n.handleMouseUp=function(e){n.props.onMouseUp&&n.props.onMouseUp(e),n.handleSwipeEnd(w(e))},n.handleMouseLeave=function(e){n.props.onMouseLeave&&n.props.onMouseLeave(e),n.started&&n.handleSwipeEnd(w(e))},n.handleMouseMove=function(e){n.props.onMouseMove&&n.props.onMouseMove(e),n.started&&n.handleSwipeMove(w(e))},n.handleScroll=function(e){if(n.props.onScroll&&n.props.onScroll(e),e.target===n.rootNode)if(n.ignoreNextScrollEvents)n.ignoreNextScrollEvents=!1;else{var t=n.state.indexLatest,r=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;n.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,n.props.onChangeIndex&&r!==t&&n.props.onChangeIndex(r,t,{reason:"focus"})}},n.updateHeight=function(){if(null!==n.activeSlide){var e=n.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&n.state.heightLatest!==e.offsetHeight&&n.setState({heightLatest:e.offsetHeight})}},n.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},n.setIndexCurrent(e.index),n}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.transitionListener=h(this.containerNode,"transitionend",(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=h(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,p.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var e=this;return{slideUpdateHeight:function(){e.updateHeight()}}}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,n=v.transform[t](100*e);this.containerNode.style.WebkitTransform=n,this.containerNode.style.transform=n}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=(r.action,r.animateHeight),s=r.animateTransitions,c=r.axis,u=r.children,l=r.containerStyle,f=r.disabled,p=(r.disableLazyLoading,r.enableMouseEvents),h=(r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance,r.slideStyle),b=r.slideClassName,w=r.springConfig,S=r.style,x=(r.threshold,(0,a.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),I=this.state,P=I.displaySameSlide,E=I.heightLatest,k=I.indexLatest,O=I.isDragging,C=I.renderOnlyActive,D=f?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},_=!f&&p?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},L=(0,o.default)({},g,h);if(O||!s||P)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=y("transform",w),t=y("-webkit-transform",w),0!==E){var N=", ".concat(y("height",w));e+=N,t+=N}var T={height:null,WebkitFlexDirection:v.flexDirection[c],flexDirection:v.flexDirection[c],WebkitTransition:t,transition:e};if(!C){var M=v.transform[c](100*this.indexCurrent);T.WebkitTransform=M,T.transform=M}return i&&(T.height=E),d.createElement(A.Provider,{value:this.getSwipeableViewsContext()},d.createElement("div",(0,o.default)({ref:this.setRootNode,style:(0,o.default)({},v.root[c],S)},x,D,_,{onScroll:this.handleScroll}),d.createElement("div",{ref:this.setContainerNode,style:(0,o.default)({},T,m,l),className:"react-swipeable-view-container"},d.Children.map(u,(function(e,t){if(C&&t!==k)return null;var r,o=!0;return t===k&&(o=!1,i&&(r=n.setActiveSlide,L.overflowY="hidden")),d.createElement("div",{ref:r,style:L,className:b,"aria-hidden":o,"data-swipeable":"true"},e)})))))}}]),t}(d.Component);P.displayName="ReactSwipableView",P.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var E=P;t.default=E},31767:function(e,t,n){"use strict";var r=n(38839);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return i.default}});var i=r(n(56802))},11622:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},77679:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},2956:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},68767:function(e,t,n){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n(75115),e.exports=r},77307:function(e,t,n){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}n(68838),n(41520),e.exports=r},72779:function(e,t,n){var r=n(24806);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},67893:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},38839:function(e,t,n){n(94882),e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},41276:function(e,t,n){n(95767);var r=n(41669);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},41669:function(e,t,n){n(27476),e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},40609:function(e,t,n){var r=n(47003),i=n(11622);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},24806:function(e,t,n){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}n(68838),e.exports=r},47003:function(e,t,n){var r=n(47003);function i(e){return i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},i(e)}function o(t){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?e.exports=o=function(e){return i(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)},o(t)}n(95767),n(39115),n(96253),n(56997),n(91181),e.exports=o},23549:function(){},66741:function(){},24316:function(){},88644:function(){},81120:function(e){e.exports={root:"QkGS9nId",bigger:"_2h3oObbv"}},76484:function(e){e.exports={root:"_3vblRuQJ",cuiSpinner:"_2VSYZIBr",bigger:"_3z8HdYNn"}},54447:function(e){e.exports={root:"_2c09EThh",fadeIn:"_2gSfzSZh"}},32402:function(e){e.exports={root:"_3tX2o67p"}},64282:function(e){e.exports={"fixed-cover":"_3AQmXB35",genderSelect:"aqvE133m",title:"_2qQDAznn",options:"_9-w0M2am",option:"_3g8jAGSW",selected:"_2whL8Czi",zoomIn:"_3lTevsrA"}},99481:function(e){e.exports={"fixed-cover":"_2X2KAZSw",imageCub:"Bf4W8hlF",selected:"_3710JUKF",cross:"_1aK_m8R-",desc:"_1tKHJehB",zoomIn:"_3gEl7uad"}},44316:function(e){e.exports={"fixed-cover":"_3VG8G9Sa",nameInput:"_1qJIn5IR",title:"dCqcDkVN",inputContainer:"zKUz6pxZ",zoomIn:"_1jSFCCF2"}},33481:function(e){e.exports={"fixed-cover":"_1HDwZ1rH",saveBtn:"_3lMfbTxh",disabled:"_25xGraET",zoomIn:"_1Z-gdlHF"}},24917:function(e){e.exports={"fixed-cover":"Efo7TRaw",starInfoRoot:"_2xHAuOaz",zoomIn:"FKFcVm3S"}},24311:function(e){e.exports={"fixed-cover":"_137NjlON",starListRoot:"_3grsqbKI",title:"_2uhulgey",starListContainer:"_3mChIPea",starList:"_2nnDjqX9",starItem:"_392bhC1Q",starImg:"_347voYEX",starName:"_1y3lV9tA",selectBtn:"_2Z1lon01",zoomIn:"_3RJMAXig"}},24604:function(e){e.exports={"fixed-cover":"_1oP7K_dF",zoomIn:"_38gcYENU"}},42473:function(e){"use strict";var t=function(){};e.exports=t},29807:function(e){"use strict";e.exports=pinbridge}},c={};function u(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return s[e].call(n.exports,n,n.exports,u),n.loaded=!0,n.exports}u.m=s,e=[],u.O=function(t,n,r,i){if(!n){var o=1/0;for(l=0;l<e.length;l++){n=e[l][0],r=e[l][1],i=e[l][2];for(var a=!0,s=0;s<n.length;s++)(!1&i||o>=i)&&Object.keys(u.O).every((function(e){return u.O[e](n[s])}))?n.splice(s--,1):(a=!1,i<o&&(o=i));if(a){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},u.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},u.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);u.r(i);var o={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((function(t){o[t]=function(){return e[t]}}));return o.default=function(){return e},u.d(i,o),i},u.d=function(e,t){for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.f={},u.e=function(e){return Promise.all(Object.keys(u.f).reduce((function(t,n){return u.f[n](e,t),t}),[]))},u.u=function(e){return"js/"+({699:"ms_web_c",1437:"pdd-mod/qq-service",1795:"react_anti",2840:"ms_wx_c",3400:"ms_wx_app_c",3910:"monitor-dev-panel",5911:"ms_native_c",6795:"ms_qq_c",8920:"pdd-mod/wechat-service"}[e]||e)+"_"+{326:"b9178ea0d5bd3d8acfa3",699:"72cee34b4cd288d7ceb8",1437:"25bb8dd2ac74015251db",1795:"53581a22b9ef16f6b1fd",2840:"120c8b9560ee3b9f54d8",3400:"e19a0ea516e6878eaa83",3910:"e90429a9eabc92887d55",4369:"6cc36b6562a3753e1762",5911:"da41331fb8513c39e2e2",6795:"64b9cacb3fdcd454d133",8920:"c31ebc90974693bdc3ee"}[e]+".js"},u.miniCssF=function(e){return"css/"+{1446:"alive_star_info_upload",3910:"monitor-dev-panel"}[e]+"_"+{1446:"2b7cbfa8dad2df6260a4",3910:"d314c614b241f08063cc"}[e]+".css"},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r={},i="mobile-video-activity:",u.l=function(e,t,n,o){if(r[e])r[e].push(t);else{var a,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==e||f.getAttribute("data-webpack")==i+n){a=f;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,u.nc&&a.setAttribute("nonce",u.nc),a.setAttribute("data-webpack",i+n),a.src=e),r[e]=[t];var d=function(t,n){a.onerror=a.onload=null,clearTimeout(p);var i=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),s&&document.head.appendChild(a)}},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},u.j=1446,u.p="https://static.pddpic.com/assets/",o=function(e){return new Promise((function(t,n){var r=u.miniCssF(e),i=u.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var i=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var o=document.getElementsByTagName("style");for(r=0;r<o.length;r++){var a;if((i=(a=o[r]).getAttribute("data-href"))===e||i===t)return a}}(r,i))return t();!function(e,t,n,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(o){if(i.onerror=i.onload=null,"load"===o.type)n();else{var a=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=s,i.parentNode.removeChild(i),r(c)}},i.href=t,document.head.appendChild(i)}(e,i,t,n)}))},a={1446:0},u.f.miniCss=function(e,t){a[e]?t.push(a[e]):0!==a[e]&&{3910:1}[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))},function(){var e={1446:0};u.f.j=function(t,n){var r=u.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var o=u.p+u.u(t),a=new Error;u.l(o,(function(n){if(u.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+t,t)}},u.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,o=n[0],a=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)u.o(a,r)&&(u.m[r]=a[r]);if(s)var l=s(u)}for(t&&t(n);c<o.length;c++)i=o[c],u.o(e,i)&&e[i]&&e[i][0](),e[o[c]]=0;return u.O(l)},n=self.webpackChunkmobile_video_activity=self.webpackChunkmobile_video_activity||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var l=u.O(void 0,[1216,6457],(function(){return u(37920)}));l=u.O(l)}();
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/js/alive_star_info_upload_b87519da2403582a5703.js.map