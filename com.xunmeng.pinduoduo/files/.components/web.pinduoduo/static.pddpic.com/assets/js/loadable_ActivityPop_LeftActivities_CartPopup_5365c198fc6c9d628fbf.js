(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"1KKG":function(e,t,r){e.exports=r("EQ+b")("1KKG")},QuL1:function(e,t,r){},VirW:function(e,t,r){e.exports={root:"_2ARurRDZ",show:"_2gpcCV4v",mask:"_1YBt4q-7",popupContent:"_366iqbff"}},YY9z:function(e,t,r){e.exports={wrap:"_18rLPUX-",ios:"upTajxOG",errorText:"_2gabQgfd"}},ryp3:function(e,t,r){"use strict";r.r(t);var n=r("lSNA"),o=r.n(n),c=r("yXPU"),a=r.n(c),i=r("J4zp"),u=r.n(i),l=r("o0o1"),s=r.n(l),f=r("q1tI"),d=r.n(f),p=r("TyAF"),m=r("TSYQ"),v=r.n(m),b=r("ct/d"),O=r("pVnL"),y=r.n(O),h=r("QILm"),E=r.n(h),g=r("SXY3"),j=r("lwsE"),w=r.n(j),S=r("W8MJ"),P=r.n(S),C=r("7W2i"),k=r.n(C),_=r("a1gu"),H=r.n(_),D=r("Nsbk"),N=r.n(D);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=N()(e);if(t){var o=N()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return H()(this,r)}}var A,T,I=function(e){k()(r,e);var t=x(r);function r(){var e;w()(this,r);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={hasError:!1},e}return P()(r,[{key:"componentDidCatch",value:function(e){var t,r;this.setState({hasError:!0}),null===(t=(r=this.props).sendError)||void 0===t||t.call(r,e)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}]),r}(f.Component),R=r("i8i4"),L=r("KoDT"),M=Object(L.getCurrentPlatform)().system===L.SYSTEM.IOS&&function(){try{return window.self!==window.top}catch(e){return!0}}();function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}M&&(A=document.getElementById("app"),T=document.createElement("div"),A.parentNode.insertBefore(T,A.nextSibling)),r("Wr5T");var W=function(e){var t=e.root,r=void 0===t?M?A:null:t,n=e.rootMargin,o=void 0===n?"0px":n,c=e.threshold,a=void 0===c?1:c,i=e.onEnter,u=void 0===i?function(){}:i,l=e.onLeave,s=void 0===l?function(){}:l,p=e.children,m=E()(e,["root","rootMargin","threshold","onEnter","onLeave","children"]),v=Object(f.useRef)(null);return Object(f.useEffect)((function(){var e,t=Object(R.findDOMNode)(v.current);if(t){var n=Math.min(.9,a);(e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&e.intersectionRatio>=n?u():s()}))}),{threshold:n,rootMargin:o,root:r})).observe(t)}else console.error("[cart]：intersection-observer未生效，请检查child是否唯一！！！");return function(){e&&(e.unobserve(t),e.disconnect(),e=null)}}),[o]),p?d.a.cloneElement(p,Q(Q({},m),{},{ref:v})):null},U=function(e){var t=e.show,r=void 0!==t&&t,n=e.useMountExposure,o=void 0!==n&&n,c=e.placeHolder,a=e.rootMargin,i=void 0===a?"800px":a,l=e.children,s=Object(f.useState)(r),p=u()(s,2),m=p[0],v=p[1],b=function(){return v(!0)};return Object(f.useEffect)((function(){(o||r)&&b()}),[o,r]),m?l:d.a.createElement(W,{onEnter:b,rootMargin:i,threshold:.001},c)},Y=r("Tf7a"),B=function(e){var t=e.show,r=e.placeHolder,n=e.loader,o=e.render,c=e.children,a=E()(e,["show","placeHolder","loader","render","children"]),i=Object(f.useState)(!1),l=u()(i,2),s=l[0],d=l[1],p=Object(f.useState)(t),m=u()(p,2),v=m[0],b=m[1],O=Object(f.useRef)(c);return Object(f.useEffect)((function(){var e=!1;return t||n().then((function(t){e||(O.current=o(t,a),b(!0))})).catch((function(t){Object(Y.a)(t),e||d(!0)})),function(){e=!0}}),[]),s?null:v?O.current:r},G=r("whhc"),z=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=G.a.getInstance();r&&(t&&r.mark(e),Object(f.useEffect)((function(){t&&r.markEnd(e)}),[]))};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var F={height:"",backgroundColor:""},V=Object(f.forwardRef)((function(e,t){var r=e.store,n=e.componentKey,c=e.placeHolderStyle,a=void 0===c?{}:c,i=E()(e,["store","componentKey","placeHolderStyle"]),u=r,l=u.height,s=void 0===l?0:l,f=u.UIStore,p=void 0===f?F:f,m=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({height:"".concat(s/100||parseFloat(p.height)||0,"rem"),backgroundColor:p.backgroundColor},a);return z("renderPlaceholder~".concat(n,"~").concat(i.id)),d.a.createElement("div",y()({className:"lazy-component-wrapper",ref:t,style:m},i),d.a.createElement("div",{className:"img-placeholder"}))})),J=r("LsLQ"),X=Object(f.forwardRef)((function(e,t){var r=e.widgetConfig,n=e.store,o=e.id,c=e.componentKey,a=e.placeHolderStyle,i=void 0===a?{}:a;z("renderSkeleton~".concat(c,"~").concat(o));var u=Object(J.a)(n)&&r.CurrentWidget.SkeletonComponent;return d.a.createElement(u,{ref:t,id:o,store:n,placeHolderStyle:i})})),Z=r("oZZI");function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ee=Object(p.observer)((function(e){var t=e.item,r=e.rootStore,n=E()(e,["item","rootStore"]),c=t.componentId,i=t.store,l=t.requestIn,m=t.key,v=t.visible,b=t.fetched,O=void 0!==b&&b,h=r.widgetsMap[m];if(!h)return null;var j,w,S,P,C=Object(J.a)(i)&&O,k=C?d.a.createElement("div",null):(j=i,w=h.placeHolderStyle||{},Object(J.a)(j)&&h.CurrentWidget.SkeletonComponent?d.a.createElement(X,{widgetConfig:h,id:c,componentKey:m,store:j,placeHolderStyle:w}):d.a.createElement(V,{id:c,componentKey:m,store:j,placeHolderStyle:w})),_=!1===v?{display:"none"}:{},H=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({item:t,componentId:c,store:r,componentStore:i},n),D=(S=Object(f.useState)(!1),P=u()(S,2)[1],function(){return P((function(e){return!e}))}),N=function(){var e=a()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.buildComponent(t);case 2:return h.CurrentWidget.SkeletonComponent&&D(),e.next=5,r.fetchComponent(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){var r=e.supProps,n=e.componentStore,o=h.CurrentWidget;return z("renderWidget~".concat(t.key,"~").concat(t.componentId)),d.a.createElement(o,y()({},r,{componentStore:n}))},A=function(e,t){var r=e.store,n=e.fetched;return Object(J.a)(r)&&n?d.a.createElement(p.Provider,{componentStore:r},d.a.createElement(g.a,{trackingInfo:r.getLog(0,!0)},d.a.createElement(x,{supProps:t,componentStore:r}))):null};return d.a.createElement("div",{id:"w-".concat(c),k:"w-".concat(m),style:_},d.a.createElement(I,{sendError:r.sendError},d.a.createElement(U,{show:C,placeHolder:k,useMountExposure:l===Z.c.MOUNT,rootMargin:r.exposeRenderRootMargin},d.a.createElement(B,y()({show:C,placeHolder:k,loader:N,render:A},H),A(t,H)))))})),te=function(e){var t=e.list,r=e.rootStore,n=E()(e,["list","rootStore"]);return d.a.createElement(d.a.Fragment,null,t.map((function(e,t){return d.a.createElement(ee,y()({key:e.componentId,item:e,index:t,rootStore:r},n))})))},re=function(e){return new Promise((function(t){return setTimeout(t,e)}))},ne=r("iAkF"),oe=function(){var e=a()(s.a.mark((function e(t){var r,n,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isEnded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,re(3e3);case 4:o=null===(r=document.getElementsByClassName("cart-container"))||void 0===r||null===(n=r[0])||void 0===n?void 0:n.clientHeight,c=document.body.offsetHeight||document.body.clientHeight,o<c&&Object(ne.a)(t,{type:"PAGE_HEIGHT_NOT_ENOUGH",name:"".concat(t.type,"_").concat(t.id),detail:"containerHeight: ".concat(o,"，viewPortHeight: ").concat(c)},"H5");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){var t=e.rootStore,r=Object(f.useState)(!1),n=u()(r,2),o=n[0],c=n[1];Object(f.useEffect)((function(){c(!0)}),[]);return o?d.a.createElement(W,{onEnter:function(){oe(t),c(!1)}},d.a.createElement("div",{style:{height:".01rem"}})):null},ae=Object(p.observer)((function(e){var t=e.store,r=e.children;return Object(f.useEffect)((function(){t.hooks.pageDidMount.promise(t),window.__CART_STORE__=t,b.default.replaceQuery({list_id:t.listId})}),[]),d.a.createElement("div",{className:"cart-container"},d.a.createElement(te,{rootStore:t,list:t.firstLayer}),r,d.a.createElement(ce,{rootStore:t}))})),ie=(r("QuL1"),function(e){var t,r=e.store,n={backgroundColor:(null===(t=r.UIInfo)||void 0===t?void 0:t.backgroundColor)||""};return d.a.createElement("div",{style:n,className:"main-view"},d.a.createElement(ae,{store:r}))}),ue=r("h7Yj"),le=r("1KKG"),se=r("O2NP"),fe=r("zRTd"),de=r("Nvl3"),pe=r("yiM9"),me=r("kLkQ"),ve=r("HWmn"),be=r("YY9z"),Oe=r.n(be);t.default=Object(p.observer)((function(e){var t=e.pendantData,r=e.onClose,n=Object(se.k)().store,c=n.initCartStore,i=n.duominoConfig,l=Object(f.useState)(null),m=u()(l,2),b=m[0],O=m[1],y=(t||{}).linkUrl,h=void 0===y?"":y,E=Object(ue.parseUrlQuery)(h)||{},g=E.type,j=E.id;Object(se.f)((function(){var e=ve.d?0:300;(function(){var t=a()(s.a.mark((function t(){var r,n,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([c({type:g,id:j}),Object(me.t)(e)]);case 2:r=t.sent,n=u()(r,1),null!=(o=n[0])&&o.isApiError||Object(fe.e)({subType:"CartPopup"}),O(o);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}));var w=function(e,t,r){if(!e||!Array.isArray(e))return"#fff";var n=e.find((function(e){return+(null==e?void 0:e.type)==+t&&+(null==e?void 0:e.id)==+r}));return(null==n?void 0:n.backgroundColor)||"#fff"}(i,g,j);return d.a.createElement(pe.a,{scrollKey:"CartPopup",isAnchor:!1,onClose:r},d.a.createElement("div",{className:v()(Oe.a.wrap,o()({},Oe.a.ios,ve.d)),style:{backgroundColor:w}},d.a.createElement(de.a,null,b?null!=b&&b.isApiError?d.a.createElement("div",{className:Oe.a.errorText},"活动太火爆了，请稍后再试"):d.a.createElement(p.Provider,{store:b},d.a.createElement(ie,{store:b})):d.a.createElement(le.default,{hideBg:!0}))))}))},yiM9:function(e,t,r){"use strict";var n=r("lSNA"),o=r.n(n),c=r("J4zp"),a=r.n(c),i=r("lSCD"),u=r.n(i),l=r("q1tI"),s=r.n(l),f=r("TSYQ"),d=r.n(f),p=r("91HH"),m=r("O2NP"),v=r("VirW"),b=r.n(v),O=function(e){var t=e.scrollKey,r=e.isAnchor,n=void 0!==r&&r,c=e.children,i=e.onClose,f=e.mainContentStyle,v=e.mainContentClassName,O=Object(l.useState)(!1),y=a()(O,2),h=y[0],E=y[1],g=Object(l.useRef)(!1),j=Object(l.useRef)();Object(m.f)((function(){E(!0)})),Object(m.b)({key:t,isAnchor:n}),Object(m.m)((function(){clearTimeout(j.current)}));var w=function(){E(!1),j.current=setTimeout((function(){g.current||(g.current=!0,null==i||i())}),300)};return s.a.createElement(p.Portal,null,s.a.createElement("div",{className:d()(b.a.root,o()({},b.a.show,h))},s.a.createElement("div",{className:b.a.mask,onClick:w,onTransitionEnd:function(){h||(g.current=!0,null==i||i())}}),s.a.createElement("div",{className:d()(b.a.popupContent,v),style:f},u()(c)?null==c?void 0:c({onClose:w}):c)))};t.a=Object(l.memo)(O)}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-live-layer/js/loadable_ActivityPop_LeftActivities_CartPopup_5365c198fc6c9d628fbf.js.map