(window.ReadWeJsonp=window.ReadWeJsonp||[]).push([[15],{"+wjZ":function(e,t,a){},"/4Jp":function(e,t,a){},"/f7M":function(e,t,a){},"1R20":function(e,t,a){},"7K8V":function(e,t,a){},"91HH":function(e,t,a){e.exports=a("MaWr")(115)},"M2CY":function(e,t,a){"use strict";(function(e){var r=a("U8pU"),n=a("VTBJ"),o=a("KoDT"),i={},c=Object(o.getCurrentPlatform)(),s="undefined"!=typeof location&&location.hostname.includes("yangkeduo.com"),l=!c.isNativePlatform&&s;var u={"loggingURL":function getLoggingUrl(e){return"undefined"!=typeof window&&window.__LogingUrl__?window.__LogingUrl__:e?"https://th.yangkeduo.com/t.gif":"https://th.pinduoduo.com/t.gif"}(l),"logRoutes":{"perf":"https://tp.pinduoduo.com/p.gif","error":"https://te.pinduoduo.com/e.gif","chat_error":"https://te.pinduoduo.com/e.gif","real_error":"https://tne.pinduoduo.com/tne.gif","ad":function getAdLoggingUrl(e){return"undefined"!=typeof window&&window.__AdLogingUrl__?window.__AdLogingUrl__:e?"https://ta.yangkeduo.com/t.gif":"https://ta.pinduoduo.com/t.gif"}(l),"tracking":"https://tldas.pinduoduo.com/e.gif"}},d="production"!==e.env.BUNDLE_PLATFORM?{"loggingURL":"http://sandbox-tk.pdd.net/t.gif","httpsLoggingURL":"https://sandbox-tk.pdd.net/t.gif","logRoutes":{"ad":"https://sandbox-tk.pdd.net/t.gif","real_error":"https://tne.hutaojie.com/tne.gif","tracking":"https://tldas.htj.pdd.net/e.gif"},"pushDomain":"ws://chat-ws.htj.pdd.net","chatDomain":"ws://chat-ws.htj.pdd.net","wssDomain":"wss://chat-ws.htj.pdd.net","fileDomain":"http://file.hutaojie.com/","httpsFileDomain":"https://file.hutaojie.com/"}:{},p={"shop":{"shopID":2,"name":"拼多多","logo":"https://pinduoduoimg.yangkeduo.com/base/logo.jpg","weChatTimelineShareDisabled":!1,"qqTimelineShareDisabled":!0},"loggingURL":u.loggingURL,"httpsLoggingURL":u.loggingURL,"wxAppLoggingURL":"https://xcxapp.pinduoduo.com/t.gif","qqAppLoggingURL":"https://xcxapp.pinduoduo.com/qqt.gif","logRoutes":Object(n.default)({"download":"https://at.pinduoduo.com/p"},u.logRoutes),"httpsLogRoutes":Object(n.default)({},u.logRoutes),"cmtURL":"http://cmtw.pinduoduo.com/api/ajax","httpsCmtURL":"https://cmtw.pinduoduo.com/api/ajax","pushDomain":"ws://ws.pinduoduo.com/","chatDomain":"ws://ws.pinduoduo.com/","wssDomain":"wss://ws.pinduoduo.com/","fileDomain":"http://file.pinduoduo.com/","httpsFileDomain":"https://file.pinduoduo.com/","qqFollowTip":"感谢关注拼多多","AppID":{"FriendPay":-1,"WeChat":2,"WeChatWAPPay":20,"SMS":5,"AliPay":6,"QQ":12,"Weibo":11,"AliPayWeb":9,"QQConnect":13,"QQPublicOld":27,"QQPublic":30,"ApplePay":31,"AliPayDirectDebit":35,"WeChatH5Pay":38,"HBInstallmentPay":52,"UnionPay":78,"UnionPayWeb":79},"ApiKey":{"WeChat":"wx839691cce7c102bb","Weibo":"3907421985","QQConnect":"101273489","QQPublicOld":"200633114","QQPublic":"200675334","QQUIN":"1419183687","QQPublicTrack":"10000096","QQPublicMid":"1316857601","BaiduStatistics":"865a6952adbb55a10d86810cdcc6864a"},"RedirectURI":{"AliPayDirectDebit":"pinduoduoalipays://","Weibo":"http://mobile.yangkeduo.com/wboauth_callback.html","QQConnect":"http://mobile.yangkeduo.com/qqoauth_callback.html"},"imgShareDomain":"http://m.pin3pin.com/","ContactUrl":"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170962&idx=1&sn=8763710a673d7b76f418a7ae76cff86c#rd","ForceContactUrl":"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170998&idx=1&sn=684606e474788e7f191f6f6c68d0dfe4#rd","QQContactUrl":"http://post.mp.qq.com/material/show/31343139313833363837-1472733830-1464276288782813-0.html?_wv=2281701505&v=3&sig=73182fcdc7ed1c0b6aeb3ce78501d00b&_bid=2321","thirdLevelLoginPath":"jkr_report.html"},y={"AppID":{"WeChat":24},"ApiKey":{"WeChat":"wx20392b0342c8af91"}},f={"hutaojie":1,"mobile":2,"weipin":3,"app":4,"huabei":17,"xibei":18,"dongbei":19,"huazhong":21,"huadong":22,"dongnan":23,"xinan":24,"panduoduo":25,"sc":26,"hybrid":"hybrid","hybridTest":"hybridTest","huanan":40,"hzsc":41,"dnsc":42,"dbsc":43,"xbsc":44,"xnsc":45,"hnsc":46,"hbsc":47,"pddpt":48,"m":49,"mm":66,"myqxgs":68,"mobpinduoduo":72,"mmpinduoduo":73,"mobilepinduoduo":74,"mobileddlequ":75,"nvude3":82,"mobnvude3":83,"mpinduoduo":63,"mddlequ":85,"hhngpinduoduo":129};i[f.hutaojie]="production"!==e.env.BUNDLE_PLATFORM?{"domain":"http://m.hutaojie.com/","shop":{"shopID":1,"name":"胡桃街"},"apiDomain":"http://apiv2.hutaojie.com/","apiHttpsDomain":"https://apiv2.hutaojie.com/","loggingURL":d.loggingURL,"httpsLoggingURL":d.httpsLoggingURL,"logRoutes":Object(n.default)({},d.logRoutes),"httpsLogRoutes":Object(n.default)({},d.logRoutes),"cmtURL":"http://cmtw.hutaojie.com/api/ajax","httpsCmtURL":"https://cmtw.hutaojie.com/api/ajax","pushDomain":d.pushDomain,"chatDomain":d.chatDomain,"wssDomain":d.wssDomain,"fileDomain":d.fileDomain,"httpsFileDomain":d.httpsFileDomain,"AppID":{"WeChat":f.hutaojie,"AliPayDirectDebit":34,"HBInstallmentPay":1008,"QQPublic":10002,"QQPublicPayment":1010,"UnionPay":1016,"UnionPayWeb":1017},"ApiKey":{"WeChat":"wx88f6836551e2b34e","QQPublic":201112168},"RedirectURI":{"QQConnect":"http://m.hutaojie.com/qqoauth_callback.html"}}:{},i[f.mobile]={"domain":"https://mobile.yangkeduo.com/","BeiTaiShareDomains":["http://mobile.pinduoduo.net/"]},i[f.weipin]={"domain":"https://weipin.yangkeduo.com/","AppID":{"WeChat":f.weipin},"ApiKey":{"WeChat":"wx51e5fe8c95f71b20"}},i[f.huabei]={"domain":"https://huabei.yangkeduo.com/","AppID":{"WeChat":f.huabei},"ApiKey":{"WeChat":"wx4044e9709b7188ea"}},i[f.xibei]={"domain":"https://xibei.yangkeduo.com/","AppID":{"WeChat":f.xibei},"ApiKey":{"WeChat":"wxbc80866520cc300d"}},i[f.dongbei]={"domain":"https://dongbei.yangkeduo.com/","AppID":{"WeChat":f.dongbei},"ApiKey":{"WeChat":"wx27901e8ab752ed35"}},i[f.huazhong]={"domain":"https://huazhong.yangkeduo.com/","AppID":{"WeChat":f.huazhong},"ApiKey":{"WeChat":"wx95c952f67a727090"}},i[f.huadong]={"domain":"https://huadong.yangkeduo.com/","AppID":{"WeChat":f.huadong},"ApiKey":{"WeChat":"wx03908118b84f285a"}},i[f.dongnan]={"domain":"https://dongnan.yangkeduo.com/","AppID":{"WeChat":f.dongnan},"ApiKey":{"WeChat":"wxff2e8dc2762c5b92"}},i[f.xinan]=Object(n.default)({"domain":"https://xinan.yangkeduo.com/"},y),i[f.panduoduo]="production"!==e.env.BUNDLE_PLATFORM?{"domain":"https://panduoduo.yangkeduo.com/","AppID":{"WeChat":f.panduoduo},"ApiKey":{"WeChat":"wxd7dd35cfa5f90f37"},"logRoutes":Object(n.default)({},d.logRoutes),"httpsLogRoutes":Object(n.default)({},d.logRoutes),"loggingURL":d.loggingURL,"httpsLoggingURL":d.httpsLoggingURL}:{},i[f.sc]={"domain":"https://sc.yangkeduo.com/","AppID":{"WeChat":f.sc},"ApiKey":{"WeChat":"wx32b0d9cdd390ebf0"}},i[f.app]={"domain":"https://app.yangkeduo.com/","AppID":{"WeChat":4},"ApiKey":{"WeChat":"wx77d53b84434b9d9a"}},i[f.hybrid]={"shareDomain":"https://mobile.yangkeduo.com/","AppID":{"WeChat":4},"ApiKey":{"WeChat":"wx77d53b84434b9d9a"}},i[f.hybridTest]="production"!==e.env.BUNDLE_PLATFORM?{"shop":{"shopID":1},"shareDomain":"http://m.hutaojie.com/","apiDomain":"http://apiv2.hutaojie.com/","apiHttpsDomain":"https://apiv2.hutaojie.com/","loggingURL":d.loggingURL,"httpsLoggingURL":d.httpsLoggingURL,"logRoutes":Object(n.default)({},d.logRoutes),"httpsLogRoutes":Object(n.default)({},d.logRoutes),"pushDomain":d.pushDomain,"chatDomain":d.chatDomain,"wssDomain":d.wssDomain,"fileDomain":d.fileDomain,"httpsFileDomain":d.httpsFileDomain,"AppID":{"AliPayDirectDebit":34,"WeChat":32,"AliPay":36,"HBInstallmentPay":1008,"UnionPay":1016,"UnionPayWeb":1017},"ApiKey":{"WeChat":"wx773a286ea37f0216"}}:{};var h,m="http://mp.weixin.qq.com/s?__biz=MzAxMjcyMTkwOA==&mid=401487202&idx=1&sn=37de9db39432edc32e1eb90d885d7a23#rd";function init(e,t,a){a&&(t.apiDomain=t.apiDomain?t.apiDomain:a,t.apiDomainNew=t.apiDomain,t.apiDomainV3=t.apiDomain);var n=t.domain||t.shareDomain||"https://mobile.yangkeduo.com/";for(var o in t.shareDomain||(t.shareDomain=n),t.shareDomains={},e)if(e.hasOwnProperty(o)){var i=e[o];[e.QQChatSession,e.QQZone].indexOf(i)>=0?t.domain&&t.domain.indexOf("m.hutaojie.com")>=0?t.shareDomains[i]=t.shareDomain:t.shareDomains[i]="https://mobile.yangkeduo.com/":t.shareDomains[i]=t.shareDomain}return function extend(){for(var e={},t=0;t<arguments.length;t++)"object"===Object(r.default)(arguments[t])&&deepExtend(e,arguments[t]);return e}(p,t)}function deepExtend(e,t){for(var a in t)if(t.hasOwnProperty(a)){var n=t[a],o=Object(r.default)(n);"number"===o||"string"===o||"boolean"===o?e[a]=n:"object"===o?(e[a]=e[a]||{},deepExtend(e[a],n)):(i=n,"[object Array]"===Object.prototype.toString.call(i)&&(e[a]=e[a]||[],deepExtend(e[a],n)))}var i}i[f.huanan]={"shareDomain":"https://huanan.yangkeduo.com/","AppID":{"WeChat":40},"ApiKey":{"WeChat":"wxaffd94b821032481"},"ContactUrl":m},i[f.hzsc]={"shareDomain":"https://hzsc.yangkeduo.com/","AppID":{"WeChat":41},"ApiKey":{"WeChat":"wx7bca1a27af0a31ed"},"ContactUrl":m},i[f.dnsc]={"shareDomain":"https://dnsc.yangkeduo.com/","AppID":{"WeChat":42},"ApiKey":{"WeChat":"wxb79645ae502205d9"},"ContactUrl":m},i[f.dbsc]={"shareDomain":"https://dbsc.yangkeduo.com/","AppID":{"WeChat":43},"ApiKey":{"WeChat":"wx01e7a1f91b8c43d3"},"ContactUrl":m},i[f.xbsc]={"shareDomain":"https://xbsc.yangkeduo.com","AppID":{"WeChat":44},"ApiKey":{"WeChat":"wxc50a66d9b6d566ed"},"ContactUrl":m},i[f.xnsc]={"shareDomain":"https://xnsc.yangkeduo.com","AppID":{"WeChat":45},"ApiKey":{"WeChat":"wx52457b6561fcd804"},"ContactUrl":m},i[f.hnsc]={"shareDomain":"https://hnsc.yangkeduo.com","AppID":{"WeChat":46},"ApiKey":{"WeChat":"wx8e75952076e03567"},"ContactUrl":m},i[f.hbsc]={"shareDomain":"https://hbsc.yangkeduo.com","AppID":{"WeChat":47},"ApiKey":{"WeChat":"wx7388833e69aafd89"},"ContactUrl":m},i[f.pddpt]={"shareDomain":"https://pddpt.yangkeduo.com","AppID":{"WeChat":48},"ApiKey":{"WeChat":"wxe1b0f22089fadce1"},"ContactUrl":m},i[f.m]={"domain":"https://m.ishangtong.com","shareDomain":"https://m.ishangtong.com","AppID":{"WeChat":48},"ApiKey":{"WeChat":"wxe1b0f22089fadce1"},"ContactUrl":m},i[f.mm]={"shareDomain":"https://mm.ishangtong.com","AppID":{"WeChat":66},"ApiKey":{"WeChat":"wxf05b577296a1b6ec"},"ContactUrl":m},i[f.myqxgs]={"domain":"https://m.yiqixiegushi.com","shareDomain":"https://m.yiqixiegushi.com","AppID":{"WeChat":66},"ApiKey":{"WeChat":"wxf05b577296a1b6ec"},"ContactUrl":m},i[f.mobpinduoduo]={"shareDomain":"https://mob.pinduoduo.com","AppID":{"WeChat":56},"ApiKey":{"WeChat":"wx1e2715638762a51b"},"ContactUrl":m},i[f.mmpinduoduo]={"shareDomain":"https://mm.pinduoduo.com","AppID":{"WeChat":57},"ApiKey":{"WeChat":"wxa19650a24138625a"},"ContactUrl":m},i[f.mobileddlequ]=Object(n.default)({"shareDomain":"https://mobile.ddlequ.com/"},y),i[f.mddlequ]=Object(n.default)({"shareDomain":"https://m.ddlequ.com/"},y),i[f.mobilepinduoduo]={"domain":"https://mobile.pinduoduo.com","shareDomain":"https://mobile.pinduoduo.com"},i[f.nvude3]={"useProxyDomain":1,"domain":h="https://m.nvude3.com","shareDomain":h,"AppID":{"WeChat":67},"ApiKey":{"WeChat":"wx15ee6b92001c5295"},"ContactUrl":m,"loggingURL":h+"/proxy/th/t.gif","httpsLoggingURL":h+"/proxy/th/t.gif","logRoutes":{"error":h+"/proxy/te/e.gif","chat_error":h+"/proxy/te/e.gif","real_error":h+"/proxy/tne/tne.gif"},"httpsLogRoutes":{"error":h+"/proxy/te/e.gif","chat_error":h+"/proxy/te/e.gif","real_error":h+"/proxy/tne/tne.gif"}},i[f.mobnvude3]={"shareDomain":"https://mob.nvude3.com","AppID":{"WeChat":65},"ApiKey":{"WeChat":"wx86161385b94a2ed7"},"ContactUrl":m},i[f.mpinduoduo]={"shareDomain":"https://mobile.yangkeduo.com/","AppID":{"WeChat":f.mpinduoduo},"ApiKey":{"WeChat":"wx2993126642818cea"}},i[f.hhngpinduoduo]={"shareDomain":"https://hhng.pinduoduo.com/","AppID":{"WeChat":f.hhngpinduoduo},"ApiKey":{"WeChat":"wx8aeafb2c4c5252fa"}};var b={"hutaojie":{"m":"hutaojie","app":"apptest"},"yangkeduo":{"mobile":"mobile","app":"app","huabei":"huabei","xibei":"xibei","dongbei":"dongbei","xinan":"xinan","huazhong":"huazhong","dongnan":"dongnan","huadong":"huadong","panduoduo":"panduoduo","sc":"sc","huanan":"huanan","hzsc":"hzsc","dnsc":"dnsc","dbsc":"dbsc","xbsc":"xbsc","xnsc":"xnsc","hnsc":"hnsc","hbsc":"hbsc","pddpt":"pddpt","weipin":"weipin"},"ishangtong":{"m":"m","mm":"mm"},"yiqixiegushi":{"m":"myqxgs"},"pinduoduo":{"mob":"mobpinduoduo","mm":"mmpinduoduo","mobile":"mobilepinduoduo","m":"mpinduoduo","hhng":"hhngpinduoduo"},"nvude3":{"m":"nvude3","mob":"mobnvude3"},"ddlequ":{"mobile":"mobileddlequ","m":"mddlequ"}};t.a={"get":function get(e){var t,a=function transferHostName(e){var t={"hostName":e||"","hasThirdLevelDomain":!1};if(!e)return t.hostName=".",t;var a=["m.ishangtong.com","m.yiqixiegushi.com","m.hutaojie.com"],r=e.split("."),n=r.length;if(n<=3)return t;for(var o=r[n-2],i=0;i<a.length;i++){var c=a[i];if(c.indexOf(o)>0)return t.hostName=c,t.hasThirdLevelDomain=!0,t}return t}((e=e||{}).hostName),r=a.hostName||".",n=r.split(".");if(e.isModuleVersion){var o="undefined"!=typeof window?location.href.indexOf("hutaojie")>=0:r.indexOf("hutaojie")>=0;t=i[o?f.hybridTest:f.hybrid]}else n.length>=2&&b[n[1]]&&(t=i[f[b[n[1]][n[0]]]]);return t||(t=i[f.mobile]),t.hasThirdLevelDomain=a.hasThirdLevelDomain||!1,init(e.shareType,t,e.defaultApiDomain)}}}).call(this,a("8oxB"))},"MyPv":function(e,t,a){e.exports=a("MaWr")(231)},"Qg+3":function(e,t,a){},"QmQc":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return f}));var r=a("1OyB"),n=a("vuIU"),o=a("IFnD"),i=a("h3qu"),c=1,s=4,l=5,u=6,d=7,p=10,y=function getFrontEnv(e){var t=Object(i.getPlatformByUa)(e);return t===i.PLATFORM.WeChat||t===i.PLATFORM.WxApp?u:t===i.PLATFORM.PddIOS||t===i.PLATFORM.PddAndroid?t===i.PLATFORM.PddIOS?s:l:t===i.PLATFORM.QQ||t===i.PLATFORM.QQApp?d:t===i.PLATFORM.Weibo?p:c},f=function(){function PaymentListService(e){Object(r.default)(this,PaymentListService),this.params={"front_env":e.frontEnv?e.frontEnv:y(e.userAgent),"refer":e.hostname,"forbid_pap_pay":e.forbidPapPay}}return Object(n.default)(PaymentListService,[{"key":"fetchList","value":function fetchList(){var t=this;return new Promise((function(a,r){o.default.apiRequest("POST","api/qogir/payment/channel_list_query",t.params,(function(e){if(!(e=e||{}).success)throw e;var r=e.result&&e.result.status_list||[],n=t.formatData(r);a({"list":n,"pay_ticket":e.result.pay_ticket})}),(function(t){e.env.BRWOSER?r(t):a(null)}))}))}},{"key":"formatData","value":function formatData(e){return(e=Array.isArray(e)?e:[]).map((function(e){var t=e.paySubContent||{},a=t.cssVo||{},r=e.payContent||{},n=r.cssVo||{},o=e.payContent&&e.payContent.content||r.content;return{"channel":e.channel,"rank":e.rank,"name":o,"nameStyle":{"fontColor":n.fontColor,"fontSize":n.fontSize},"hint":t.content,"hintIcon":t.icon,"hintStyle":{"fontColor":a.fontColor,"fontSize":a.fontSize},"appId":e.appId,"display":e.display,"disabled":!e.enable,"signed":e.signed,"selected":!1}}))}}]),PaymentListService}()}).call(this,a("8oxB"))},"Ruoi":function(e,t,a){},"TWHF":function(e,t,a){},"dXXU":function(e,t,a){},"eeCy":function(e,t,a){"use strict";a.r(t);var r=a("p5LO"),n=a("1OyB"),o=a("vuIU"),i=a("Ji7U"),c=a("LK+K"),s=a("q1tI"),l=a.n(s),u=a("TSYQ"),d=a.n(u),p=(a("7K8V"),a("o0o1")),y=a.n(p),f=a("HaE+"),h=a("KoDT"),m=a("IFnD"),b=a("jWx1"),P="0",g="2";function isNativeOrdersPageVersion(){var e=Object(h.getCurrentPlatform)(),t=!1;return e.platform===h.PLATFORM.PddAndroid?t=Object(h.compareVersion)(e.version,"2.6.0")>=0:e.platform===h.PLATFORM.PddIOS&&(t=Object(h.compareVersion)(e.version,"2.14.0")>=0),t}function createOrderStatusChecker2(e){function afterOrderStatusCheck(e){return _afterOrderStatusCheck.apply(this,arguments)}function _afterOrderStatusCheck(){return(_afterOrderStatusCheck=Object(f.default)(y.a.mark((function _callee2(t){var a,r;return y.a.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,r=null,null!=t&&(a=t.group_order_id,r=t.pay_status),r!=g||null==a){n.next=9;break}if(t.orderStatus=1,t.groupOrderID=a,!isNativeOrdersPageVersion()){n.next=9;break}return"OrderStatusChangedNotification",n.abrupt("return",Object(b.send)("OrderStatusChangedNotification",{"order_sn":e,"order_status":t.order_status,"pay_status":t.pay_status,"shipping_status":t.shipping_status,"rate_status":t.rate_status,"has_extended":0}).then((function(){return t})).catch((function(){return t})));case 9:return n.abrupt("return",t);case 10:case"end":return n.stop()}}),_callee2)})))).apply(this,arguments)}return function(){var t=Object(f.default)(y.a.mark((function _callee(t){var a,r,n,o,i,c,s;return y.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:a=t.maySuccess,r=function tryCheckFunc(t){var r=t.count,n="api/aristotle/pay_check?order_sn=".concat(e,"&times=").concat(r,"&success=").concat(a?1:0);return new Promise((function(e,t){m.default.apiRequest("GET",n,null,e,(function(e,a){t({"errorCode":e,"data":a})}))}))},n=function sleep(e){return new Promise((function(t){setTimeout(t,1e3*e)}))},o=1;case 4:if(!(o<=5)){l.next=30;break}return l.prev=5,location.href.includes("hutaojie.com")&&console.log("[hutaojie]: 第"+o+"次查单"),l.next=9,r({"count":o});case 9:if(l.t0=l.sent,l.t0){l.next=12;break}l.t0={};case 12:if((i=l.t0).order_goods=[{"event_type":i.event_type}],!(+i.pay_status==+P&&i.wait_time>0)){l.next=19;break}return l.next=17,n(i.wait_time);case 17:l.next=20;break;case 19:return l.abrupt("return",afterOrderStatusCheck(i));case 20:l.next=27;break;case 22:throw l.prev=22,l.t1=l.catch(5),c=l.t1.errorCode,s=l.t1.data,new Error({"errorCode":c,"data":s});case 27:o++,l.next=4;break;case 30:case"end":return l.stop()}}),_callee,null,[[5,22]])})));return function(e){return t.apply(this,arguments)}}()}var v=a("a+Ds"),C=a("ODXe"),O={"AliPay":1,"WeChat":2,"QQPay":3,"ApplePay":4,"AliPayDirectDebit":5,"FriendPay":6,"HBInstallmentPay":7,"AliPayV2":8,"UnionPay":9};function getAliPayPaymentType(){var e=Object(h.getCurrentPlatform)();return new Promise((function(t){e.isAliPayAvailable?t(O.AliPay):t(null)}))}var _=a("Q/z/"),S=function getFontColor(e,t){return(e||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?e:t},j=function(e){Object(i.default)(PaymentItem2,e);var t=Object(c.default)(PaymentItem2);function PaymentItem2(){var e;return Object(n.default)(this,PaymentItem2),(e=t.apply(this,arguments)).onSelect=function(){var t=e.props.index;e.props.selected||e.props.onSelect(t)},e}return Object(o.default)(PaymentItem2,[{"key":"render","value":function render(){var e=this.props,t=d()("unify-prepay-item-padding",{"disable":e.disabled}),a=d()("unify-prepay-item",{"unify-prepay-selected":e.selected,"unify-prepay-item-disable":e.disabled}),n=e.hintStyle?{"fontSize":"13px","color":S(e.hintStyle.fontColor,"#58595b")}:{},o=e.hintIcon;return l.a.createElement(r.a,{"className":t,"data-active":"before-white"},l.a.createElement(r.a,{"className":a,"onClick":this.onSelect},l.a.createElement(r.a,{"className":"unify-prepay-item-text"},l.a.createElement(v.a,{"className":"unify-prepay-method oc-p-".concat(Number(e.paymentType))},e.name),!e.disabled&&e.hint&&l.a.createElement(v.a,{"className":"unify-prepay-hints"},o?l.a.createElement(v.a,{"className":"unify-prepay-hints-icon"},l.a.createElement(_.a,{"src":o})):null,l.a.createElement(v.a,{"style":n},e.hint),l.a.createElement(v.a,{"className":"add-space"})))))}}]),PaymentItem2}(s.PureComponent),w={"WEIXIN":O.WeChat,"ALIPAY":O.AliPayDirectDebit,"QQ":O.QQPay,"WEIXIN_FRIEND":O.FriendPay,"LIANLIANPAY":O.ApplePay,"UNIONPAY":O.UnionPay,"HBFQ_ALI_PAY":O.HBInstallmentPay,"DUODUOPAY":O.DuoDuoPay},k=(a("/4Jp"),a("QmQc")),A=a("h7Yj"),D=(a("Ruoi"),Object(A.getCDNImgUrl)("/order_checkout/picc_v2.png")),I=function(e){Object(i.default)(GreenShield,e);var t=Object(c.default)(GreenShield);function GreenShield(){return Object(n.default)(this,GreenShield),t.apply(this,arguments)}return Object(o.default)(GreenShield,[{"key":"render","value":function render(){return l.a.createElement(r.a,{"className":"green-shield"},l.a.createElement(v.a,{"className":"green-shield-icon"}),l.a.createElement(v.a,null,"平台用户信息泄露风险由"),l.a.createElement(_.a,{"className":"picc-img","src":D}),l.a.createElement(v.a,null,"承保"))}}]),GreenShield}(s.PureComponent),T=function(e){Object(i.default)(CompositePaymentList,e);var t,a,s=Object(c.default)(CompositePaymentList);function CompositePaymentList(){var e;return Object(n.default)(this,CompositePaymentList),(e=s.apply(this,arguments)).aliPayPaymentType=null,e.isApplePayAvailable=!1,e.lastPaymentType=null,e.isHBInstallmentPayAvailable=!1,e.state={"nativeReady":!1,"payMethods":[],"selectedPayment":null,"aliFolded":!0,"payTicket":""},e.getAliPayPaymentType=function(){return new Promise((function(t){var a=(e.props||{}).isAliPayDirectDebitAvailable;a?a((function(e){t(e)}),(function(){t(getAliPayPaymentType())})):t(getAliPayPaymentType())}))},e.selectPayMethod=function(t){e.props.onSelectMethod&&e.props.onSelectMethod(t)},e.doSelect=function(t){e.setState({"selectedPayment":t}),e.selectPayMethod(t)},e.seeMorePayment=function(){e.setState({"foldedSwitch":!1})},e.onPressPay=function(){e.state.selectedPayment?e.props.onPressPay&&e.props.onPressPay(e.state.selectedPayment,e.state.payTicket):console.log("操作太快，请重试")},e}return Object(o.default)(CompositePaymentList,[{"key":"componentDidMount","value":(a=Object(f.default)(y.a.mark((function _callee(){var e,t,a,r,n,o,i;return y.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(this.state.nativeReady){c.next=3;break}return c.next=3,this.initNativeEnv();case 3:return c.prev=3,c.next=6,new k.a({"frontEnv":this.props.frontEnv,"userAgent":navigator.userAgent,"hostname":location.hostname,"forbidPapPay":this.props.forbidPapPay}).fetchList();case 6:e=c.sent,t=e.list,a=e.pay_ticket,r=this.processMethods(t),n=r.payMethods,o=r.aliFolded,i=this.calcDefaultPayMethods(n,this.lastPaymentType),this.selectPayMethod(i),this.setState({"payMethods":n,"aliFolded":o,"selectedPayment":i,"payTicket":a}),this.props.onPaymentListLoaded&&this.props.onPaymentListLoaded(),c.next=21;break;case 16:throw c.prev=16,c.t0=c.catch(3),this.props.onPayError&&this.props.onPayError("解析支付列表时出错"),console.log("解析支付列表时出错"),c.t0;case 21:case"end":return c.stop()}}),_callee,this,[[3,16]])}))),function componentDidMount(){return a.apply(this,arguments)})},{"key":"initNativeEnv","value":(t=Object(f.default)(y.a.mark((function _callee2(){var e,t,a,r,n;return y.a.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Promise.all([this.getAliPayPaymentType(),!1,!1]);case 2:e=o.sent,t=Object(C.default)(e,3),a=t[0],r=t[1],n=t[2],Object.assign(this,{"aliPayPaymentType":a,"isApplePayAvailable":r,"isHBInstallmentPayAvailable":n}),this.setState({"nativeReady":!0});case 9:case"end":return o.stop()}}),_callee2,this)}))),function initNativeEnv(){return t.apply(this,arguments)})},{"key":"processMethods","value":function processMethods(e){var t=this,a=[],r=[],n=this.props.ignoredChannels||[],o=!1;return(e=e||[]).filter((function(e){return e&&!!w[e.channel]&&!n.includes(e.channel)})).forEach((function(e){switch(e.paymentType="ALIPAY"===e.channel?t.aliPayPaymentType:w[e.channel],e.channel){case"ALIPAY":o=!e.display;break;case"LIANLIANPAY":if(!t.isApplePayAvailable)return;break;case"HBFQ_ALI_PAY":return}r.includes(e.channel)||(r.push(e.channel),a.push(e))})),{"payMethods":a,"aliFolded":o}}},{"key":"calcDefaultPayMethods","value":function calcDefaultPayMethods(e){var t=-1,a=-1;return e.some((function(e,r){return a<0&&!e.disabled&&(a=r),!(!e.defaultSelected||e.disabled)&&(t=r,!0)})),e[t>=0?t:a]}},{"key":"render","value":function render(){var e=this,t=this.state,a=t.payMethods,n=t.aliFolded,o=(t.selectedPayment||{}).paymentType,i=[O.AliPay,O.AliPayDirectDebit].includes(o),c=n&&!i,s=this.state.foldedSwitch&&!this.props.disallowFold,u=this.props.hideHint,p=a.filter((function(e,t){return!s||e.display||e.paymentType===o})).map((function(t,a){return l.a.createElement(j,Object.assign({},t,{"selected":o===t.paymentType,"key":"payment-".concat(a),"index":a,"hideHint":u,"onSelect":function onSelect(){e.doSelect(t)}}))})),y=d()("unify-prepay",{"unify-prepay-short-mode":p&&p.length<3}),f=a.length>p.filter((function(e){return!!e})).length,h=1*((Number(this.props.orderAmount)||0)/100).toFixed(2);return l.a.createElement(r.a,{"className":"unify-prepay-container"},l.a.createElement(r.a,{"className":"unify-prepay-head"},"请选择支付方式",l.a.createElement(r.a,{"className":"unify-prepay-head-close-btn","onClick":this.props.onPressClose},l.a.createElement(r.a,{"className":"unify-prepay-head-close-icon"}))),l.a.createElement(r.a,{"className":y},p,f&&l.a.createElement(r.a,{"className":"unify-prepay-item unify-prepay-more","onClick":this.seeMorePayment},l.a.createElement(r.a,{"className":"unify-prepay-more-hint"},"更多支付方式",c&&l.a.createElement(r.a,{"className":"unify-prepay-more-payment"},l.a.createElement(v.a,{"className":"add-space"},"("),l.a.createElement(v.a,null,"如 "),l.a.createElement(v.a,{"className":"unify-prepay-more-wrapper"},l.a.createElement(v.a,{"className":"unify-prepay-more-item"},l.a.createElement(v.a,{"className":"unify-prepay-more-icon unify-prepay-more-icon-1"}),l.a.createElement(v.a,null,"支付宝"))),l.a.createElement(v.a,{"className":"add-space"},")"))),l.a.createElement(r.a,{"className":"icon-arrows-down icon"}))),l.a.createElement(r.a,{"className":"unify-prepay-foot"},l.a.createElement(I,null),l.a.createElement(r.a,{"className":"unify-prepay-pay-btn","data-active":"red","onClick":this.onPressPay},"继续支付 ¥",h)))}}]),CompositePaymentList}(s.PureComponent);T.defaultProps={"nativeReady":!1,"onPressPay":null,"onSelectMethod":null,"onPaymentListLoaded":null,"orderAmount":0,"payMethods":[],"ignoredChannels":[],"onPressClose":null,"isAliPayDirectDebitAvailable":null};var x=function(e){Object(i.default)(PaymentCheckoutCounter,e);var t=Object(c.default)(PaymentCheckoutCounter);function PaymentCheckoutCounter(){var e;return Object(n.default)(this,PaymentCheckoutCounter),(e=t.apply(this,arguments)).inPaying=!1,e.doPay=function(){var t=Object(f.default)(y.a.mark((function _callee(t,a){var r,n,o,i,c,s,l,u,d,p,f;return y.a.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:if(r=e.props,n=r.ui,o=r.Pay,!e.inPaying){y.next=3;break}return y.abrupt("return");case 3:if(t&&t.paymentType){y.next=6;break}return n.showToast("未选择有效的支付方式"),y.abrupt("return");case 6:return e.inPaying=!0,i=e.props,c=i.attrMap,s=i.orderSn,l=i.prepayUrl,u=i.supportDirectPay,d=i.prepayType,p=i.orderParams,y.prev=8,y.next=11,o.pay({"url":l,"paymentType":t.paymentType,"orderSn":s,"attrMap":c,"checkOrderStatus":createOrderStatusChecker2(s,p),"isSupportDirectPay":u,"params":{"order_sn":s},"prepayType":d,"checkOrderTimeout":1e4,"attributeFields":{"pay_ticket":a}});case 11:(f=y.sent)&&1===f.orderStatus?e.props.onAfterPayHandler&&e.props.onAfterPayHandler({"success":!0}):e.props.onAfterPayHandler&&e.props.onAfterPayHandler({"success":!1}),e.inPaying=!1,y.next=23;break;case 16:throw y.prev=16,y.t0=y.catch(8),"支付失败",n.showToast("支付失败"),e.props.onPayError&&e.props.onPayError(JSON.stringify(y.t0)),e.inPaying=!1,y.t0;case 23:case"end":return y.stop()}}),_callee,null,[[8,16]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(o.default)(PaymentCheckoutCounter,[{"key":"render","value":function render(){return l.a.createElement(T,{"frontEnv":this.props.frontEnv,"ignoredChannels":this.props.ignoredChannels,"onPressPay":this.doPay,"onPressClose":this.props.onPressClose,"orderAmount":this.props.orderAmount,"onPaymentListLoaded":this.props.onPaymentListLoaded,"onPayError":this.props.onPayError,"isAliPayDirectDebitAvailable":this.props.isAliPayDirectDebitAvailable})}}]),PaymentCheckoutCounter}(s.PureComponent);x.defaultProps={"ignoredChannels":["WEIXIN_FRIEND","UNIONPAY","HBFQ_ALI_PAY"],"prepayUrl":"order/prepay","attrMap":{},"orderParams":{},"supportDirectPay":!1,"onPressClose":null,"prepayType":null,"ui":{},"Pay":null,"isAliPayDirectDebitAvailable":null};var E=function(e){Object(i.default)(PayUi,e);var t=Object(c.default)(PayUi);function PayUi(){var e;return Object(n.default)(this,PayUi),(e=t.apply(this,arguments)).timer=null,e.state={"shown":e.props.visible,"slidein":!1},e.hide=function(){e.timer&&clearTimeout(e.timer),e.setState({"slidein":!1})},e.hideBg=function(){e.props.visible||e.setState({"shown":!1})},e}return Object(o.default)(PayUi,[{"key":"componentDidMount","value":function componentDidMount(){var e=this.props.ui;this.props.visible&&this.show(),this.ui=Object.assign({"showToast":function showToast(){}},e)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){e.visible!==this.props.visible&&(this.props.payPackage&&this.props.payPackage.pay?e.visible?this.show():this.hide():console.error("必须传入pay组件 @pdd/pay"))}},{"key":"show","value":function show(){var e=this;this.timer&&clearTimeout(this.timer),this.setState({"shown":!0,"slidein":!1}),this.timer=setTimeout((function(){e.setState({"slidein":!0})}),50)}},{"key":"render","value":function render(){var e=d()("payment-checkout-dialog",{"payment-checkout-dialog-shown":this.state.shown}),t=d()("payment-checkout-dialog-container",{"payment-checkout-dialog-container-slidein":this.state.slidein}),a=this.props,n=a.prepayUrl,o=a.ignoredChannels,i=a.orderSn,c=a.attrMap,s=a.orderParams,u=a.onCancel,p=a.orderAmount,y=a.onPaymentListLoaded,f=a.supportDirectPay,h=a.afterPayHandler,m=a.onPayError,b=a.payPackage,P=a.isAliPayDirectDebitAvailable,g=a.children;return l.a.createElement(r.a,{"className":e,"style":{"zIndex":this.props.zIndex},"onClick":u},l.a.createElement(r.a,{"className":t,"onClick":this.stopPropagation,"onTransitionEnd":this.hideBg},g,l.a.createElement(x,{"frontEnv":this.props.frontEnv,"prepayUrl":n,"ignoredChannels":o,"onAfterPayHandler":h,"onPayError":m,"supportDirectPay":f,"orderSn":i,"attrMap":c,"onPressClose":u,"orderParams":s,"onPaymentListLoaded":y,"orderAmount":p,"ui":this.ui,"Pay":b,"isAliPayDirectDebitAvailable":P})))}},{"key":"stopPropagation","value":function stopPropagation(e){e&&e.preventDefault&&e.preventDefault(e),e&&e.stopPropagation&&e.stopPropagation(e)}}]),PayUi}(s.PureComponent);E.defaultProps={"visible":!0,"zIndex":1e4,"onCancel":null,"ignoredChannels":["WEIXIN_FRIEND","UNIONPAY","HBFQ_ALI_PAY"],"orderSn":null,"onPaymentListLoaded":null,"orderAmount":null,"afterPayHandler":null,"prepayUrl":"order/prepay","attrMap":{},"orderParams":{},"supportDirectPay":!1,"ui":{},"onPayError":null,"payPackage":null,"isAliPayDirectDebitAvailable":null};var N=a("JX7q"),W=a("rePB"),M=a("TyAF"),F=a("+/1r"),L="_fFHp71M",U="_166wxpl",B="_3IVFQLR",R=(a("Qg+3"),a("VTBJ")),Q=a("6OU5"),H=a("3VHQ"),q=a("i8i4"),V=a.n(q),Y=a("2xwX");a("1R20");var X="_2Ny6Bvg",z="_2uzDwPP",J="_caBUfFX",K="_R9za4yg",G="_vWabkAU",$="_2M_gZte",Z=l.a.createElement("svg",{"t":"1631178532091","viewBox":"0 0 1024 1024"},l.a.createElement("path",{"d":"M943.3 147.7C811.4 142 685 97.8 567.9 16.3L545.7 0.8l-22.1 15.4C406.4 97.8 280.1 142.1 149 147.7h-41.4v345.8c0 253.4 176.4 470.3 428.7 527.5l11 1.8 7.9-1.8c252.4-57.2 428.6-274.1 428.6-527.5V147.7h-40.5zM516.2 686.8L323.9 494.4l51.6-51.6 140.6 140.7 246.6-246.7 51.6 51.6-298.1 298.4z"}));var ee=function MianMiV2(e){var t=e.title,a=e.callbacks,r=void 0===a?{}:a,n=Object(s.useState)(!0),o=Object(C.default)(n,2),i=o[0],c=o[1];r.hideLoading=function(){return c(!1)},r.showLoading=function(){return c(!0)};var u={"display":i?"block":"none","opacity":i?1:0};return l.a.createElement("div",{"className":X,"style":u},l.a.createElement("div",{"className":z},Z),l.a.createElement("div",{"className":J},t),l.a.createElement("div",{"className":K}),l.a.createElement("div",{"className":G}),l.a.createElement("div",{"className":$}))},te="_3-rSWiH",ae="_raHIMvR",re="_eIbWbqk",ne=l.a.createElement("svg",{"viewBox":"0 0 1024 1024"},l.a.createElement("path",{"d":"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var oe=function Success(e){var t=e.title,a=e.callbacks,r=void 0===a?{}:a,n=Object(s.useState)(!0),o=Object(C.default)(n,2),i=o[0],c=o[1];r.hideLoading=function(){return c(!1)};var u={"display":i?"block":"none","opacity":i?1:0};return l.a.createElement("div",{"className":te,"style":u},l.a.createElement("div",{"className":ae},ne),l.a.createElement("div",{"className":re},t))},ie="_30PbIoS",ce="_2G595Ny",se="_1ZZe67P",le=l.a.createElement("svg",{"viewBox":"0 0 1024 1024"},l.a.createElement("path",{"d":"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var ue=function SuccessAfterSwitch(e){var t=e.title,a=e.payInfoTitle,r=e.callbacks,n=void 0===r?{}:r,o=Object(s.useState)(!0),i=Object(C.default)(o,2),c=i[0],u=i[1];n.hideLoading=function(){return u(!1)};var d={"display":c?"block":"none","opacity":c?1:0};return l.a.createElement("div",{"className":ie,"style":d},l.a.createElement("div",{"className":ce},le),l.a.createElement("div",{"className":se},a),l.a.createElement("div",{"className":se},t))},de=(a("p+lt"),{"fadeIn":function fadeIn(e,t){t=t||{};var a=0;this.animate_({"duration":t.duration,"step":function step(t){a+=t,e.style.opacity=a},"complete":t.complete})},"fadeOut":function fadeOut(e,t){void 0!==t&&null!=t||(t={});var a=1;this.animate_({"duration":t.duration,"step":function step(t){a-=t,e.style.opacity=a},"complete":t.complete})},"animate_":function animate_(e){var t=this;(e=e||{}).duration=e.duration||300,null==e.easing&&(e.easing=function(e){return t.easing_.linear(e)}),e.lastProgress=e.easing(0);var a=Date.now(),r=setInterval((function(){var t=Date.now()-a,n=e.easing(Math.min(1,t/e.duration)),o=n-e.lastProgress;null!=e.step&&e.step(o),n>=1&&(clearInterval(r),null!=e.complete&&e.complete()),e.lastProgress=n}),1e3/24)},"easing_":{"linear":function linear(e){return e}}}),pe=document.createElement("div");pe.innerHTML='<div class="icon-toast-container">\n    <div class="icon-toast">\n        <div class="icon-toast-background"></div>\n        <div class="icon-toast-box">\n            <i id="icon-toast-icon" class="icon icon-toast-icon"></i>\n        </div>\n        <div id="icon-toast-msg" class="icon-toast-msg"></div>\n    </div>\n</div>';var ye=pe.firstChild;document.body.appendChild(ye);var fe={"show":function show(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.showDuration||2e3,n=a.complete,o=a.forceH5,i=void 0!==o&&o,c=Object(h.getCurrentPlatform)(),s=c.isNativePlatform,l=Object(h.compareVersion)(c.version,"3.51.0")>=0;if(s&&!i)l?Object(H.invokeBridgeCallNativeFun)("PDDUIController","showHUD",{"type":1,"duration":r,"theme":1,"message":t,"complete":n}):(r=Math.max(r,1e3),Object(H.invokeBridgeCallNativeFun)(c.system===h.SYSTEM.Android?"JSAlert":"AMUIControl","toast",{"message":t}),setTimeout(n,r));else{var u=this,d=document.querySelector(".icon-toast"),p=document.getElementById("icon-toast-msg"),y=document.getElementById("icon-toast-icon");a.extraClass&&y.classList.add(a.extraClass),y.innerHTML=e||"",p.innerHTML=t.replace(/\n/g,"<br/>"),d.style.display="block",d.style.opacity=0,de.fadeIn(d,{"duration":300,"complete":function complete(){r>=0&&setTimeout((function(){u.hide((function(){null!=a.complete&&a.complete()}))}),r)}})}},"hide":function hide(e){var t=document.querySelector(".icon-toast");null!=t&&de.fadeOut(t,{"duration":300,"complete":function complete(){t.style.display="none",null!=e&&e()}})}},he='<svg t="1606749646670" class="success-svg" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="101652" width="200" height="200"><path d="M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z" p-id="101653"></path></svg>',me=function(){function DefaultLoadingRenderer(e){Object(n.default)(this,DefaultLoadingRenderer),this.dom=e}return Object(o.default)(DefaultLoadingRenderer,[{"key":"showSpinner","value":function showSpinner(){Object(Y.b)()}},{"key":"hideSpinner","value":function hideSpinner(){Object(Y.a)()}},{"key":"show","value":function show(){}},{"key":"hide","value":function hide(){}},{"key":"markSwitched","value":function markSwitched(){}},{"key":"showSuccess","value":function showSuccess(){}}]),DefaultLoadingRenderer}(),be=function(e){Object(i.default)(MianMiV2ProcessRenderer,e);var t=Object(c.default)(MianMiV2ProcessRenderer);function MianMiV2ProcessRenderer(){var e;Object(n.default)(this,MianMiV2ProcessRenderer);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object(W.default)(Object(N.default)(e),"callbacks",{}),Object(W.default)(Object(N.default)(e),"switched",!1),e}return Object(o.default)(MianMiV2ProcessRenderer,[{"key":"markSwitched","value":function markSwitched(){this.switched=!0}},{"key":"show","value":function show(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,a=void 0===t?"免密支付中":t;Object(Y.a)(),V.a.render(l.a.createElement(ee,{"title":a,"callbacks":this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}},{"key":"showSuccess","value":function showSuccess(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.title,r=void 0===a?"支付成功":a,n=t.payInfoTitle,o=arguments.length>1?arguments[1]:void 0;this.switched?V.a.render(l.a.createElement(ue,{"payInfoTitle":n,"title":r,"callbacks":this.callbacks}),this.dom):V.a.render(l.a.createElement(oe,{"title":r,"callbacks":this.callbacks}),this.dom),setTimeout((function(){e.hide(),o()}),1500)}},{"key":"hide","value":function hide(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}]),MianMiV2ProcessRenderer}(me),Pe=function(e){Object(i.default)(NativeDDPayLoadingRenderer,e);var t,a,r=Object(c.default)(NativeDDPayLoadingRenderer);function NativeDDPayLoadingRenderer(){return Object(n.default)(this,NativeDDPayLoadingRenderer),r.apply(this,arguments)}return Object(o.default)(NativeDDPayLoadingRenderer,[{"key":"showSpinner","value":(a=Object(f.default)(y.a.mark((function _callee(e){return y.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(H.invokeBridgeCallNativeFun)("JSDuoduoWallet","showLoading",{"is_transaction":!0,"display_title":e});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(Y.b)();case 8:case"end":return t.stop()}}),_callee,null,[[0,5]])}))),function showSpinner(e){return a.apply(this,arguments)})},{"key":"hideSpinner","value":(t=Object(f.default)(y.a.mark((function _callee2(){var e,t,a,r,n,o,i=arguments;return y.a.wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=e.isTransaction,a=void 0===t||t,Object(Y.a)(),r=Object(h.getCurrentPlatform)(),n=r.system,o=n===h.SYSTEM.IOS,c.prev=5,c.next=8,Object(H.invokeBridgeCallNativeFun)("JSDuoduoWallet","hideLoading",{"is_transaction":!!o||a});case 8:c.next=12;break;case 10:c.prev=10,c.t0=c.catch(5);case 12:case"end":return c.stop()}}),_callee2,null,[[5,10]])}))),function hideSpinner(){return t.apply(this,arguments)})},{"key":"show","value":function show(){this.showSpinner("免密支付中")}},{"key":"hide","value":function hide(){this.hideSpinner({"isTransaction":!1})}},{"key":"showSuccess","value":function showSuccess(e,t){this.hide(),fe.show(he,"支付成功",{"showDuration":1500,"forceH5":!0,"extraClass":"ddpay","complete":t})}}]),NativeDDPayLoadingRenderer}(me),ge=function isSupportVersion(e){var t=Object(h.getCurrentPlatform)();return!!t.isNativePlatform&&Object(h.compareVersion)(t.version,e)>=0},ve={"AliPay":1,"WeChat":2,"QQPay":3,"ApplePay":4,"AliPayDirectDebit":5,"FriendPay":6,"HBInstallmentPay":7,"AliPayV2":8,"UnionPay":9,"DuoDuoPay":10,"HBPay":11,"XianYongHouFu":12,"DuoDuoPayACS":13,"CreditCardInstallmentPay":14},Ce=function isSupportDDPLoading(){var e=Object(h.getCurrentPlatform)(),t=window.navigator.userAgent;return ge("5.56.0")&&!e.isTinyNativePlatform&&!e.isLiteNativePlatform&&!t.toLowerCase().includes("app_type/plugin")},Oe=new(function(){function LoadingManager(){Object(n.default)(this,LoadingManager),Object(W.default)(this,"el",null),Object(W.default)(this,"renderer",null),Object(W.default)(this,"currentPaymentType",null),Object(W.default)(this,"startChannel",null),Object(W.default)(this,"mianmiChannels",[])}return Object(o.default)(LoadingManager,[{"key":"getDom","value":function getDom(){return this.el||(this.el=document.createElement("div"),this.el.setAttribute("id","pdd-pay-loading-manager"),document.body.appendChild(this.el)),this.el}},{"key":"dispose","value":function dispose(){this.el&&document.body.removeChild(this.el),this.el=null}},{"key":"init","value":function init(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.paymentType,a=e.ddpayMianmiV2;if(this.currentPaymentType=t,!Ce()||t!==ve.DuoDuoPay&&t!==ve.CreditCardInstallmentPay||a){var r=this.getDom();this.renderer=new be(r)}else this.renderer=new Pe}},{"key":"showSpinner","value":function showSpinner(){this.renderer.showSpinner()}},{"key":"hideSpinner","value":function hideSpinner(){this.renderer.hideSpinner()}},{"key":"show","value":function show(e){this.renderer.show(e)}},{"key":"hide","value":function hide(){this.renderer.hide()}},{"key":"isMianmiChannelUsed","value":function isMianmiChannelUsed(e){return this.startChannel===e||this.mianmiChannels.includes(e)}},{"key":"recordMianmiChannel","value":function recordMianmiChannel(e){this.mianmiChannels.push(e),this.renderer.markSwitched()}},{"key":"showSuccess","value":function showSuccess(e,t){this.renderer.showSuccess(e,t)}},{"key":"isSwitched","get":function get(){return this.mianmiChannels.length>0}}]),LoadingManager}()),_e={"Success":10001,"Paying":10002,"Failed":10003,"NotFound":10004},Se={"AliPayDirectDebit":{"Rollback":1e4,"Unsign":10001,"Paying":10002,"Success":10003,"Failed":10004,"Unknown":16666},"WechatDirectPayQuery":_e,"Universal":_e,"UniversalException":{"CHANCE_EXCEEEDED":-999999,"QOGIR_EXCEPTION":-999998,"QOGIR_PREMATURE_END":-999997},"PayStatus":{"Unpayed":0,"Payed":2,"RefundApplied":3,"Refunded":4},"ParentOrderStatus":{"Unpayed":0,"Payed":1,"Canceled":2}},je={"Normal":"","Tail":"tail","Combine":"combine"},we=function getErrorInfos(e){var t={};return Object.keys(e).forEach((function(a){t[a]={"code":a,"message":e[a]}})),t}({"1101":"手机网络繁忙，请稍后再试","30400":"没有安装QQ客户端","40000":"错误的请求地址或方法","40001":"登录已过期，请重新登录","40002":"手机网络繁忙，请稍后再试","40003":"错误的请求参数","40004":"微信登录失败","40005":"请求还在处理中","40006":"手机登录验证码错误","40100":"暂未开通该开放平台","40015":"验证码重复请求","40016":"验证码超出当天限制","40017":"今日可发送次数已达上限","40018":"验证码填写错误","40019":"验证码填写超时","40020":"登录失败","40031":"微信登录失败!","40032":"QQ登录失败!","40033":"登录重试失败，请稍后再试","43058":"","41001":"商品不存在","41002":"商品已下架","41003":"商品已售罄","41004":"商品不在同一商店","41005":"该商品当前不在抽奖活动时间","41006":"商品不在可售区域","41101":"抽奖活动暂不支持单独购买","41102":"卡券可使用的时间已过期，请选购其他商品","42001":"拼单已满","42002":"该拼单不存在","42003":"拼单已过期","42004":"您购买此商品次数达到上限，去看看其他商品吧~","42005":"该商品开团数已达上限","42006":"拼单已满","42007":"此拼单已满，正在发起新拼单...","42501":"订单已成团，暂不支持修改收货地址，请与商家客服联系","42502":"该订单已拼单成功，请刷新页面","43001":"用户不存在","43002":"地址错误","43004":"身份证号不存在","43005":"姓名和身份证号不一致","43006":"对不起，您无法获取或更新身份证号","43007":"对不起，您已用完当前最大验证次数，请24小时后再试","43008":"姓名和身份证不匹配，请重新认证","43009":"您今日认证过于频繁，请明天再试","43010":"该地址已存在","43011":"该地址无法导入","43013":"一小时内不能重复提交","43015":"只允许微信用户够买","43016":"创建地址失败","43017":"最多只能添加100个收货地址哦~","43098":"您在店铺没有拼单成功记录，请勿发红包！拼多多不支持通过发红包购买商品！","43099":"该商品仅限新用户购买一件哦~","44001":"优惠券不存在","44002":"优惠券已使用","44003":"优惠券没有达到最小使用金额","44004":"优惠券已过期","44005":"优惠券不属于用户","44006":"优惠券已废弃","44007":"优惠券暂未到使用时间","44008":"优惠券不能在该分类使用","44010":"优惠券已经抢完了，下次早点来哦","44011":"您已经领过该优惠券","44012":"优惠券领取失败","44015":"不是团长不能使用团长免单优惠券","44016":"优惠券批次不存在","44020":"正在处理中，请稍后再试！","44026":"该券太火爆，全部已被领完","44027":"活动已结束！","44033":"优惠券使用失败","44035":"批次类型错误","44036":"团免券已被领完","44037":"用户已达团免券日领取上限","44038":"您已领取该券","44039":"未找到符合条件的团免券批次","44041":"领取失败","44042":"领取链接已失效，下次早点哦","44043":"不符合领取条件哦","44044":"该优惠券活动不存在","44045":"不在活动时间","44046":"只有无订单的新用户可领取哦","44047":"红包券数量不够","44061":"多件优惠活动结束","44063":"多件优惠已经享受过了","44064":"多件优惠活动暂未开始","44065":"多件优惠活动暂未开始","44066":"多件优惠活动结束","44067":"商家券和多件优惠活动不能同时使用","44072":"分享码已过期","44073":"免拼卡不足","44076":"不符合免拼卡的使用条件","44090":"商品活动未开始","44091":"商品活动已结束","44092":"商品活动不存在","44093":"活动商品已售罄","44095":"商品活动已结束","44096":"商品活动不存在","44097":"您购买的该活动商品数量已达上限","44098":"商品订单已创建","44099":"商品活动有误","44100":"您未获取抢购资格，不可购买该商品","44200":"已达红包使用数量上限","44201":"每满{0}元可用{1}个红包","45001":"订单不存在","45002":"订单不属于该用户","45003":"订单不能取消","45004":"订单商品不一致","45005":"订单已经收货","45006":"订单还未发货","45007":"海淘订单没有提交身份证","45008":"订单已支付","45009":"支付繁忙，请重试","45010":"订单正在支付中","45012":"手机充值号码为空","45013":"手机充值号码不支持","45014":"手机充值商品不存在","45015":"确认收货失败","45023":"正在处理您的退款/售后申诉，无法主动确认收货","45026":"超过购买商品限制","45030":"订单正在处理中，请刷新页面","45031":"单次购买金额不得高于9.5万元","45033":"超过每个手机号码购买次数限制","45034":"抱歉，秒杀尚未开始，请稍候","45035":"该商品为App新人专享秒杀，非首次下载App24小时内的用户无法发起拼单","45036":"每名用户只能购买一次哦","45037":"你的当前登录帐号有些风险哦，建议先直接去充值吧","45038":"包月套餐订单购买免密校验失败","45039":"包月套餐功能升级中，当前只支持微信帐号登录的用户哦","45040":"限购商品暂时无法购买哦～","45041":"本次活动期间已抢到过一张神券，不能再抢了~","45042":"手机网络繁忙，请稍后再试","45043":"该类型商品本次活动期间您已抢过，不能再抢了~","45044":"您好，该商品仅可购买一次哦~","45045":"该商品仅能在拼多多App中购买！","45046":"该商品仅允许微信登录用户购买！","45047":"超过该商品每次购买件数限制","45050":"您已经在本场下过单了，去看看其他商品吧~","45051":"已购买过此类优惠商品，看看其他商品吧","45052":"您最近购买此商品次数达到上限，去看看其他商品吧~","45053":"手机网络繁忙，请稍后再试","45054":"需验证码校验！","45055":"手机网络繁忙，请稍后再试","45104":"不是定金类型订单","45105":"订单已取消","45106":"订单已确认","45107":"定金未成团","45206":"创建订单存在风险","45207":"创建订单验证码非法","45208":"价格有变动，请返回上一页查看","45209":"请更换支付方式，花呗分期暂不可用","45210":"手机网络繁忙，请稍后再试","45301":"店铺补差价金额达到上限！","45320":"未获取活动资格！","45321":"该活动必须是微信APP用户参加！","45322":"该活动同一用户不可重复参加！","45323":"该活动同一设备不可重复参加！","45324":"该活动用户微信置信度较低！","45325":"非APP新用户","45326":"手机网络繁忙，请稍后再试","45327":"账户存在风险，无法下单","45402":"该商品秒杀活动已结束","45403":"该商品免单活动已结束","45404":"该商品买二送一活动已结束","45405":"该商品秒杀活动已结束","45406":"该活动已结束","45407":"该活动已结束","45110":"未到尾款支付时间","45111":"超过尾款支付时间","45112":"未到定金支付时间","45113":"超过定金支付时间","45412":"该商品多件优惠活动已结束","45413":"该商品限时免单活动已结","45416":"该商品优惠活动已结束","45417":"该活动已结束","45418":"该优惠商品已被抢空","45420":"该活动已结束","45422":"该活动已结束","45423":"该活动已结束","45424":"该包月活动已结束","45425":"您向商家补的差价已经超过上限","45428":"该商品属于活动商品，无法正常购买","45429":"该地区暂时无货","45450":"此海淘商品仅支持微信支付","45500":"商品信息和充值号码不匹配","45501":"新地址暂不支持，请重新选择","45511":"您不是专属用户，不能以特惠价开团哦~","45514":"库存不足","45515":"低于最低起售件数","45516":"该商品有更低价的优惠活动，请刷新购买","46001":"团订单不存在","46002":"无法重复参团","46012":"商品售罄，免拼失败，拼单到期后将退款","46013":"秒杀活动结束，免拼失败，拼单到期后将退款","46014":"插队拼单已满","47003":"限量件数已被抢光，请重新选购","47101":"支付失败，限时折扣活动已结束","47102":"支付失败，限量折扣活动已结束，请重新购买","47010":"折扣活动检查失败","47011":"限时折扣活动已经使用","47012":"限时折扣活动未开启","47013":"限时折扣活动未到开始时间","47014":"限时折扣活动已经结束","47015":"商家券和限时折扣活动不能同时使用","47030":"已经催过了，正在尽快发货","47031":"催发货请求异常，请稍后重试","48001":"图片格式错误","48002":"图片大小超过限制","49001":"商品不存在","50000":"当前访问人数较多，请稍后再试","50001":"今天票数已用完，明天再来吧","50002":"当前有未完成的团","80001":"投票活动已结束","60000":"","60001":"该团已经结束","60002":"确认收货失败","60003":"参数错误","60004":"您已退款成功，无须确认收货","60005":"用户拒绝","60006":"用户取消","60007":"确认收货失败，请稍后重试","60100":"未安装微信客户端","60110":"未安装微博客户端","60120":"未安装手机QQ","60200":"录制失败","60201":"录音没有权限","60205":"录音时间过短","60210":"上传失败","60220":"播放失败","71001":"获取售后列表失败","71002":"申请售后失败","71003":"获取售后单详情失败","71004":"售后单添加售后信息失败","71005":"售后单修改失败","71006":"撤销售后失败","71007":"售后单用户确认发货失败","71008":"售后单重新申请失败","71009":"售后单申请平台介入失败","71010":"钱款去向查询失败","71011":"留言标记失败","71012":"售后用户待处理未读数量获取失败","71013":"售后未读留言数目获取失败","71014":"获取付款类型失败","71015":"获取售后原因失败","71016":"获取我要发货列表失败","71017":"获取是否使用平台优惠券失败","71018":"售后单用户确认完成失败","71019":"获取小额打款详情失败","71020":"填写账户信息失败","450130":"商品信息和充值号码不匹配","450131":"该商品每个号码每月限充一次","530001":"团不存在","530002":"团已失效","530003":"团已满","530004":"助力单不存在","530005":"不支持该支付方式","530006":"助力单已支付","530007":"助力单已退款","530008":"不在活动时间","530009":"您已经拿过该商品了，不要贪心哦","530010":"已达到今日帮忙付款次数上限，明日再来吧","530011":"已达到今日帮助该好友次数上限，明日再来吧~","530012":"已经达到帮助该好友支付次数上限，赶紧去帮助其他人吧~","530013":"不符合免费帮忙条件","530014":"您不是拼多多App新人，不能开团哦","144073":"您没有免拼卡，请返回重新下单","144076":"不符合免拼卡的使用条件","144078":"请求失败，请重新发起支付","152001":"限量折扣活动已经使用","152002":"限量折扣活动未开启","152003":"限量折扣活动未到开始时间","152004":"限量折扣活动已经结束","152005":"商家券和限量折扣活动不能同时使用","152006":"限量件数已被抢光，请重新选购","152010":"已达到该商品活动期内的最多购买件数，不能再抢了～","3000001":"充值失败，请稍后重试","3000002":"话费充值失败，请稍后重试","3000003":"话费充值下单失败，请稍后重试","400001":"微信零钱不足，且未绑定银行卡，请绑定银行卡再试，或邀请好友代付","400002":"银行卡余额不足，请绑定其他银行卡再试，或邀请好友代付","400003":"银行卡预留手机号不符，请核对后再试，或邀请好友代付","400004":"银行卡已失效，请核对后再试，或邀请好友代付","400005":"银行拒绝交易，请核对后再试，或邀请好友代付","400099":"支付未完成，请更换支付方式","4000004":"手机网络繁忙，请稍后再试","4000005":"手机网络繁忙，请稍后再试","4000006":"","20504101":"团订单不存在","20504005":"手机网络繁忙，请稍后再试","12960005":"商品不存在","12960006":"活动未开始","12960007":"商品已售罄","12960008":"拼单人数已满","12960009":"只有App新人才能参团哦","12960010":"帐号信息异常","12960012":"该商品一次只能购买1件哦","12960014":"请使用微信登录再下单","12960016":"你已经开过团了，请勿重复开团","12960017":"今日开团次数已用完，明天再来吧","12960018":"今日参团次数已用完，明天再来吧","12960019":"该商品你今日已经参过团了"}),ke={"AuthenticationFailed":we[40001],"APIServiceBusy":we[40002],"GraphicalCodeForPhoneCode":we[40017],"LoginFailed":we[40020],"NeedAuthenticationLogin":we[43058],"ItemRemoved":we[41002],"OutOfStock":we[41003],"NotInLuckyTime":we[41005],"AddressUnreachable":we[41006],"NoCouponLeft":we[44010],"CouponTaken":we[44011],"CouponTakeFailed":we[44012],"CouponTakenOut":we[44026],"PersonalInfoNoID":we[45007],"OrderPayed":we[45008],"NeedVerfication":we[45054],"GroupInvalid":we[46001],"GroupFailed":we[42003],"OverBuyLimit":we[42004],"GroupOverflow":we[42005],"GroupAutoOpenFailed":we[42006],"GroupAutoOpenSuccess":we[42007],"IDCardEmpty":we[43004],"NoNameIDBefore":we[43006],"IDCardFake":we[43008],"IDCardFailTooMuch":we[43009],"InsufficientCoupon":we[44047],"AvailableCouponsPerUnit":we[44201],"NoSuchOrder":we[45001],"PrepayBusy":we[45009],"OrderPaying":we[45010],"PaymentDisabled":we[45210],"SpikeComing":we[45034],"OrderPayRisk":we[45206],"OrderPayVerificationInvalid":we[45207],"OrderAlreadyUrged":we[47030],"OrderUrgeError":we[47031],"NativeNormalError":we[6e4],"NativeParamsError":we[60003],"NativeUserRefuse":we[60005],"NativeUserCancel":we[60006],"NativeAudioRecordFailed":we[60200],"NativeAudioRecordUndetermined":we[60201],"NativeAudioTooShort":we[60205],"NativeAudioUploadFailed":we[60210],"NativeAudioPlayFailed":we[60220],"SuccessiveMobileFeeOnlyOnce":we[45036],"SuccessiveMobileFeeRisk":we[45037],"SuccessiveMobileFeeUnsigned":we[45038],"SuccessiveMobileFeeOnlyWechat":we[45039],"OverBuyVirtualGoodsLimit":we[45033],"AvailableActivityChanged":we[45516],"GroupCompleted":we[42001],"InvalidAddress":we[43002],"CouponDailyLimit":we[44037],"CouponBatchLimit":we[44038],"CouponTokenInvalid":we[44041],"CouponTokenExpired":we[44042],"CouponPushNotIn":we[44043],"CouponActivityAbsent":we[44044],"MultiplyDiscountPause":we[44064],"MultiplyDiscountEnd":we[44066],"CouponMaxNumReached":we[44200],"HistoryGroupOpenFailed":we[46014],"GoodsNotExist":we[49001],"NativePaymentCancel":we[60006],"WithoutWeChatClient":we[60100],"QQPayFailed":we[60120],"OrderLimitedSalesEnd":we[152004],"OrderLimitedSalesOut":we[152006],"PayLimitedSalesEnd":we[47102],"PayLimitedSalesOut":we[47003],"ServerBusy":we[4000004],"OrderSpikeMsgError":we[4000006],"WxDirectPayWxBalanceError":we[400001],"WxDirectPayCardBalanceError":we[400002],"WxDirectPayTelephoneError":we[400003],"WxDirectPayCardInvalidError":we[400004],"WxDirectPayRefusedError":we[400005],"WxDirectPayUnknownError":we[400099],"ACT_GROUP_NOT_EXISTS":we[530001],"ACT_GROUP_FAILED":we[530002],"ACT_GROUP_SUCCESS":we[530003],"ACT_RECORD_NOT_EXISTS":we[530004],"PAY_CHANNEL_NOT_SUPPORT":we[530005],"ACT_RECORD_PAID":we[530006],"ACT_RECORD_REFUND":we[530007],"ASSIST_FOR_ONE_DAILY_LIMIT":we[530011],"ASSIST_FOR_ONE_LIMIT":we[530012],"getMsgFromCode":function getMsgFromCode(e){var t=we[e];return t?t.message:""}},Ae=a("iuD5"),De=function sendError(e){var t=e.payload,a=e.error_msg,r=e.error_code,n=e.page;Object(Ae.a)({"page":n,"error_message":a,"payload":t,"error_code":r},{"bizSide":"consumer-platform-fe","appId":"100603","testAppId":"100211"})},Ie=function(){function InvalidPay(){Object(n.default)(this,InvalidPay)}return Object(o.default)(InvalidPay,[{"key":"pay","value":function pay(){return Promise.reject({"errorCode":0})}}]),InvalidPay}(),Te=a("U8pU"),xe=a("wx14"),Ee=a("Ff2n"),Ne=a("91HH"),We=a("17x9"),Me=a.n(We),Fe=a("eskz"),Le=a.n(Fe);var Ue=Object(Ne.withStyles)(Le.a)((function Backdrop(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement("div",Object(xe.a)({},a,{"className":d()(t,Le.a.root)}))})),Be=a("+wjZ"),Re=a.n(Be);var Qe=Object(Ne.withStyles)(Re.a)((function BaseDialog(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement("div",Object(xe.a)({},a,{"className":d()(Re.a.root,t)}))})),He=a("xZuf"),qe=a.n(He);var Ve=Object(Ne.withStyles)(qe.a)((function Container(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement("div",Object(xe.a)({},a,{"className":d()(qe.a.root,t)}))})),Ye=a("fI1f"),Xe=a.n(Ye);function CloseButton(e){var t=e.className,a=e.type,r=Object(Ee.default)(e,["className","type"]);return l.a.createElement("div",Object(xe.a)({},r,{"className":d()(t,Xe.a.root,Object(W.default)({},Xe.a.hollow,"hollow"===a),"icon")}))}CloseButton.propTypes={"className":Me.a.string,"type":Me.a.oneOf(["solid","hollow"])},CloseButton.defaultProps={"type":"solid"};var ze=Object(Ne.withStyles)(Xe.a)(CloseButton);function Controller(e){Object(s.useEffect)((function(){return e.shouldDisableBodyScroll&&Object(A.disableScroll)(),function cleanup(){e.shouldDisableBodyScroll&&Object(A.enableScroll)()}}),[e.shouldDisableBodyScroll]);var t=e.children,a=e.PortalComponent,r=e.PortalComponentProps;return a?l.a.createElement(a,r,t):t}function Dialog(e){var t=e.ControllerProps,a=e.ContainerProps,r=e.BackdropProps,n=e.BaseDialogProps,o=e.style,i=e.className;return l.a.createElement(Controller,t,l.a.createElement(Ve,a,l.a.createElement(Ue,r),l.a.createElement(Qe,Object(xe.a)({"style":o,"className":i},n),e.children)))}Controller.defaultProps={"PortalComponent":Ne.Portal,"shouldDisableBodyScroll":!0},Controller.propTypes={"PortalComponent":Me.a.elementType,"PortalComponentProps":Me.a.object,"shouldDisableBodyScroll":Me.a.bool},Dialog.propTypes={"style":Me.a.object,"className":Me.a.string,"ControllerProps":Me.a.object,"ContainerProps":Me.a.object,"BackdropProps":Me.a.object,"BaseDialogProps":Me.a.object},Dialog.Controller=Controller,Dialog.Container=Ve,Dialog.Backdrop=Ue,Dialog.BaseDialog=Qe,Dialog.CloseButton=ze;var Je=a("fUNr"),Ke=a.n(Je);var Ge=Object(Ne.withStyles)(Ke.a)((function Content(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement("div",Object(xe.a)({},a,{"className":d()(t,Ke.a.root)}))})),$e=a("/f7M"),Ze=a.n($e);var et=Object(Ne.withStyles)(Ze.a)((function Title(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement("div",Object(xe.a)({},a,{"className":d()(t,Ze.a.root)}))})),tt=a("dXXU"),at=a.n(tt);var rt=Object(Ne.withStyles)(at.a)((function Text(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement("div",Object(xe.a)({},a,{"className":d()(t,at.a.root)}))})),nt=a("TWHF"),ot=a.n(nt);function ActionSection(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement(Ne.HalfPixelBorderBox,Object(xe.a)({},a,{"className":d()(t,ot.a.root)}))}ActionSection.defaultProps={"type":"top","borderColor":"#D2D2D2"};var it=Object(Ne.withStyles)(ot.a)(ActionSection),ct=a("kcBU"),st=a.n(ct);function ConfirmButton(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement("div",Object(xe.a)({"data-active":"cell-white"},a,{"className":d()(t,st.a.root)}))}ConfirmButton.defaultProps={"children":"确定"};var lt=Object(Ne.withStyles)(st.a)(ConfirmButton),ut=a("jGYx"),dt=a.n(ut);function CancelButton(e){var t=e.className,a=Object(Ee.default)(e,["className"]);return l.a.createElement(Ne.HalfPixelBorderBox,Object(xe.a)({"data-active":"cell-white"},a,{"className":d()(t,dt.a.root)}))}CancelButton.defaultProps={"type":"right","borderColor":"#D2D2D2","children":"取消"};var pt,yt=Object(Ne.withStyles)(dt.a)(CancelButton);function getTitleStyle(e){var t=e.text,a=e.TitleProps,r=void 0===a?{}:a,n=t?{"fontWeight":700}:{};return Object(R.default)(Object(R.default)({},n),r.style)}function ConfirmDialog(e){var t=e.title,a=e.text,r=e.cancelButtonLabel,n=e.confirmButtonLabel,o=e.onCancel,i=e.onConfirm,c=e.onClose,s=e.slots,u=void 0===s?{}:s,d=e.DialogProps,p=e.ContentProps,y=e.TitleProps,f=e.TextProps,h=e.ActionSectionProps,m=e.CancelButtonProps,b=e.ConfirmButtonProps,P=e.CloseButtonProps;return l.a.createElement(Dialog,d,l.a.createElement(Dialog.CloseButton,Object(xe.a)({"onClick":c},P)),u.beforeContent,l.a.createElement(Ge,p,t&&l.a.createElement(et,Object(xe.a)({},y,{"style":getTitleStyle(e)}),t),a&&l.a.createElement(rt,f,a)),u.afterContent,l.a.createElement(it,h,o&&l.a.createElement(yt,Object(xe.a)({"onClick":o},m),r),l.a.createElement(lt,Object(xe.a)({"onClick":i},b),n)))}function handleClose(e){e&&e(),pt&&pt(),pt=null}function renderConfirmDialog(e){var t=e.onConfirm,a=e.onCancel,r=e.onClose,n=Object(Ee.default)(e,["onConfirm","onCancel","onClose"]);return pt&&pt(),pt=Object(Ne.renderPopup)(l.a.createElement(ConfirmDialog,Object(xe.a)({"DialogProps":{"ControllerProps":{"PortalComponent":null}},"onConfirm":handleClose.bind(this,t),"onCancel":a&&handleClose.bind(this,a),"onClose":handleClose.bind(this,r)},n)))}ConfirmDialog.Dialog=Dialog,ConfirmDialog.Content=Ge,ConfirmDialog.Title=et,ConfirmDialog.Text=rt,ConfirmDialog.ActionSection=it,ConfirmDialog.ConfirmButton=lt,ConfirmDialog.CancelButton=yt,ConfirmDialog.propTypes={"title":Me.a.node,"text":Me.a.node,"cancelButtonLabel":Me.a.node,"confirmButtonLabel":Me.a.node,"onCancel":Me.a.func,"onConfirm":Me.a.func.isRequired,"onClose":Me.a.func.isRequired,"slots":Me.a.object,"DialogProps":Me.a.object,"ContentProps":Me.a.object,"TitleProps":Me.a.object,"TextProps":Me.a.object,"ActionSectionProps":Me.a.object,"CancelButtonProps":Me.a.object,"ConfirmButtonProps":Me.a.object,"CloseButtonProps":Me.a.object};var ft=Object(h.getPlatform)(window.navigator.userAgent);function shouldUseNative(){return ft.isNativePlatform}function nativeShowAlert(e){var t=e.title,a=void 0===t?"":t,r=e.text,n=void 0===r?"":r,o=e.onConfirm,i=e.onCancel,c=e.onClose,s=e.confirmButtonLabel,l=e.cancelButtonLabel,u={"title":a,"text":n,"ok_label":s||"确定","canceled_on_touch_outside":!1,"show_close_button":!0};i&&(u.cancel_label=l||"取消");var d=ft.system===h.SYSTEM.IOS?"AMAlert":"JSAlert";Object(H.invokeBridgeCallNativeFun)(d,"showAlert",u).then((function(e){2!==e.click_type?0===e.index?o&&o(e):i&&i(e):c&&c(e)}))}function showAlert(e){shouldUseNative()?function showAlertNative(e){nativeShowAlert(Object(R.default)(Object(R.default)({},e),{},{"onCancel":void 0}))}(e):function showAlert5Base(e){return renderConfirmDialog(Object(R.default)(Object(R.default)({},e),{},{"onCancel":void 0}))}(e)}var ht=a("M2CY"),mt={"BASIC":0,"GROUP_FULL_AUTO_OPEN":1,"ALIPAY_PASS_PARAMS":2,"OVERSEAS_ID_CARD_VERTIFICATION":3};mt.currentMaxVersion=mt.OVERSEAS_ID_CARD_VERTIFICATION;var bt=!1;mt.getSupportVersion=function(){var e=Object(h.getCurrentPlatform)();return e.isNativePlatform?Object(h.compareVersion)(e.version,"3.51.0")>=0?mt.OVERSEAS_ID_CARD_VERTIFICATION:(bt||(De({"error_msg":"app版本".concat(e.version,"使用paymentVersion1"),"payload":{"event":"预支付paymentVersion为1","app_version":e.version}}),bt=!0),mt.GROUP_FULL_AUTO_OPEN):mt.OVERSEAS_ID_CARD_VERTIFICATION};var Pt=mt,gt=a("rIj9"),vt=a("uf4C"),Ct=null,Ot={"post":function post(e,t){if(!Ct){var a=vt.default.getInstance().getPageID();Ct=Object(gt.createDefaultAxios)({"pageInfo":{"pageId":a}})}return Ct({"method":"POST","url":e,"data":t,"defaultErrorHandler":function defaultErrorHandler(){}}).catch((function(e){var t=e.errorCode,a=(e.response||{}).data;return Promise.reject({"errorCode":t,"errorObject":a})}))}},_t=null,St={"getInstance":function getInstance(){return _t||(_t=Ot),_t},"setInstance":function setInstance(e){_t=e}},jt=function(){function BasePay(e){var t=e.attributeFields,a=e.params,r=e.orderSn,o=e.url,i=e.prepayType;Object(n.default)(this,BasePay),this.attributeFields=t,this.paymentVersion=Pt.getSupportVersion(),this.params=a,this.url=o,this.orderSn=r,this.prepayType=i;var c=window.navigator.userAgent,s=!!c&&!(!c.match(/phh_ios_version/i)&&!c.match(/phh_android_version/i));this.config=ht.a.get({"isModuleVersion":s,"hostName":location.hostname})}return Object(o.default)(BasePay,[{"key":"realPay","value":function realPay(e){}},{"key":"prepayParams","value":function prepayParams(){return Object(R.default)({"pay_app_id":this.appId,"version":this.paymentVersion,"attribute_fields":this.attributeFields},this.params)}},{"key":"prepay","value":function prepay(e){var t=this.prepayParams(),a=e&&"object"===Object(Te.default)(e)?Object(R.default)(Object(R.default)({},e),t):t;return St.getInstance().post(this.prepayUrl,a).catch((function(e){var t=e.errorCode,a=e.errorObject;return Promise.reject({"errorCode":t,"errorObject":a})}))}},{"key":"pay","value":function pay(){var e=this;return this.prepay().then((function(t){return e.realPay(t)}))}},{"key":"appId","get":function get(){return null}},{"key":"prepayUrl","get":function get(){if(this.url)return this.url;switch(this.prepayType){case je.Combine:return"api/vancouver/cart/prepay";case je.Tail:return"api/vancouver/final_pay_prepay";default:return"order/prepay"}}}]),BasePay}(),wt=function(e){Object(i.default)(WechatMiniEmbedPay,e);var t=Object(c.default)(WechatMiniEmbedPay);function WechatMiniEmbedPay(e){var a;return Object(n.default)(this,WechatMiniEmbedPay),(a=t.call(this,e)).prepayType=e.prepayType,a.additionalParams=e.additionalParams,a}return Object(o.default)(WechatMiniEmbedPay,[{"key":"realPay","value":function realPay(e){}},{"key":"pay","value":function pay(){var e=this;return new Promise((function(t,a){try{var r="/package_c/pay/pay?order_sn="+encodeURIComponent(e.orderSn);e.prepayType&&(r+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===Object(Te.default)(e.additionalParams)&&Object.keys(e.additionalParams).forEach((function(t){r+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.additionalParams[t]))})),window.wx.miniProgram.navigateTo({"url":r,"success":function success(e){a({"cancelled":!0,"err_msg":-200})},"fail":function fail(e){showAlert({"title":"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(A.throwErrorAsync)(new Error("调起小程序支付失败_无法唤起")),a({"cancelled":!0,"err_msg":-400})}})}catch(e){showAlert({"title":"系统繁忙, 请稍后再试(".concat(-500,")")});var n=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(A.throwErrorAsync)(new Error("调起小程序支付失败_内部错误"),{"error_msg":n}),a({"cancelled":!0,"err_msg":-500})}}))}}]),WechatMiniEmbedPay}(jt),kt=a("ReuC"),At=a("foSv"),Dt=a("ct/d");function recordAfterPayTracking(e){De({"error_msg":e.errorMsg||"","payload":{"event":"pay_code","payment_type":e.paymentType||0,"code":e.errorCode||"","url":e.url||"","order_sn":e.orderSn||"","wait_time":e.waitTime||0,"pay_source":e.paySource||0,"error_msg":e.errorMsg||""}})}function logStackErrorInPromise(e){!e.errorCode&&e.stack&&De({"error_msg":"@pdd/pay stack error","page":e.message+" "+JSON.stringify(e.stack)})}var It,Tt=function(e){Object(i.default)(WechatAppPay,e);var t=Object(c.default)(WechatAppPay);function WechatAppPay(){return Object(n.default)(this,WechatAppPay),t.apply(this,arguments)}return Object(o.default)(WechatAppPay,[{"key":"prepayParams","value":function prepayParams(){return Object(R.default)(Object(R.default)({},Object(kt.default)(Object(At.default)(WechatAppPay.prototype),"prepayParams",this).call(this)),{},{"pap_pay":1,"attribute_fields":Object(R.default)({"forbid_contractcode":"1","forbid_pappay":"1"},this.attributeFields)})}},{"key":"realPay","value":function realPay(e){var t=this;return e.timestamp=e.timestamp.toString(),Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.WeChat,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":ve.WeChat,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode;return De({"payload":{"event":"app_wechat_pay","order_sn":t.orderSn,"error_code":a+""}}),Promise.reject({"errorCode":a})}))}},{"key":"appId","get":function get(){return this.config.AppID.WeChat}}]),WechatAppPay}(jt),xt=function(e){Object(i.default)(WechatHostPay,e);var t=Object(c.default)(WechatHostPay);function WechatHostPay(){return Object(n.default)(this,WechatHostPay),t.apply(this,arguments)}return Object(o.default)(WechatHostPay,[{"key":"prepayParams","value":function prepayParams(){return Object(R.default)(Object(R.default)({},Object(kt.default)(Object(At.default)(WechatHostPay.prototype),"prepayParams",this).call(this)),{},{"pap_pay":1,"attribute_fields":Object(R.default)({"forbid_contractcode":"1","forbid_pappay":"1"},this.attributeFields)})}},{"key":"realPay","value":function realPay(e){var t=this;return new Promise((function(a,r){var n=function doPay(){WeixinJSBridge.invoke("getBrandWCPayRequest",{"appId":e.appId,"timeStamp":e.timeStamp.toString(),"nonceStr":e.nonceStr,"package":e.package,"signType":e.signType,"paySign":e.paySign},(function(e){if(e&&"object"===Object(Te.default)(e)){if(recordAfterPayTracking({"paymentType":ve.WeChat,"errorCode":e.err_msg+"","orderSn":t.orderSn}),"get_brand_wcpay_request:cancel"===e.err_msg)return e.cancelled=!0,void r(e);if("get_brand_wcpay_request:ok"===e.err_msg)return void a(e)}Object(A.throwErrorAsync)(new Error("WeixinJSBridge支付失败")),r(e)}))};"undefined"==typeof WeixinJSBridge?Promise.race([new Promise((function(e){document.addEventListener("WeixinJSBridgeReady",e)})),new Promise((function(e,t){setTimeout((function(){"undefined"==typeof WeixinJSBridge?t():e()}),2e3)}))]).then(n).catch((function(){Object(A.throwErrorAsync)(new Error("WeixinJSBridge未定义")),r({"errorCode":0})})):n()}))}},{"key":"appId","get":function get(){return+Object(A.parseUrlQuery)(location.href).pay_app_id||this.config.AppID.WeChat}}]),WechatHostPay}(jt),Et=function(e){Object(i.default)(WechatWebPay,e);var t=Object(c.default)(WechatWebPay);function WechatWebPay(e){var a;return Object(n.default)(this,WechatWebPay),(a=t.call(this,e)).additionalParams=e.additionalParams,a}return Object(o.default)(WechatWebPay,[{"key":"realPay","value":function realPay(e){var t=this;return new Promise((function(a,r){var n=e.mweb_url;recordAfterPayTracking({"paymentType":ve.WeChat,"url":n,"orderSn":t.orderSn}),function jumpToWapWechat(e){if((window.navigator.userAgent||"").toLowerCase().indexOf("oppo")>=0){var t=document.createElement("a")||{};t.href=e,t.click&&t.click()}else Dt.default.reload(e)}(n)}))}},{"key":"pay","value":function pay(){if(localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={"time":Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var t=Object(A.resolveFullUrl)("transac_wechat_wapcallback.html",Object(R.default)({"option_json":JSON.stringify({"url":this.prepayUrl,"orderSn":this.orderSn,"params":this.params}),"prepay_type":this.prepayType,"order_sn":this.orderSn},this.additionalParams));return new Promise((function(e,a){Dt.default.reload(t)}))}return Object(kt.default)(Object(At.default)(WechatWebPay.prototype),"pay",this).call(this)}},{"key":"appId","get":function get(){return this.config.AppID.WeChatH5Pay}}]),WechatWebPay}(jt),Nt=function(){function WechatPay(e){Object(n.default)(this,WechatPay);var t=Object(h.getCurrentPlatform)(),a=t.isWeChatPlatform,r=t.isNativePlatform,o=t.isTinyNativePlatform;this.innerPay=null,this.innerPay=a?new xt(e):r||o?new Tt(e):new Et(e)}return Object(o.default)(WechatPay,[{"key":"pay","value":function pay(){return this.innerPay.pay()}}]),WechatPay}(),Wt={"WechatDirect":3,"UniversalPay":10050},Mt=a("MyPv"),Ft=a("1KKG"),Lt=function payScoreQueryService(){return St.getInstance().post("api/qogir/payment/agreement/pay_score_query")},Ut=function defaultPollingFun(e){var t,a=0;return Object(Y.b)(),De({"payload":{"event":"before_polling"}}),new Promise((function(r,n){var o=function payScoreQuery(){return a+=1,Lt().then((function(e){e.success&&e.wx_signed&&(clearInterval(t),Object(Y.a)(),r())})).catch((function(a){clearInterval(t),Object(Y.a)(),a.scoreSignSdkSuccess=e,n(a)}))};o(),t=setInterval((function(){if(De({"payload":{"event":"default_polling","time":a}}),a<=4)o();else{clearInterval(t);var r=new Error("pay_score_query_timeout");r.errorCode=1005,r.scoreSignSdkSuccess=e,Object(Y.a)(),n(r)}}),800)}))},Bt=function(){var e=Object(f.default)(y.a.mark((function _callee(){var e,t,a,r,n,o,i,c,s=arguments;return y.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(e=s.length>0&&void 0!==s[0]?s[0]:{},t=e.signScene,a=e.orderSn,r=e.antiContent,n=e.payTicket,!(o=Object(h.getCurrentPlatform)()).isNativePlatform){l.next=6;break}i="m.hutaojie.com"===location.hostname?"115":"122",l.next=12;break;case 6:if(!o.isPureWeChatPlatform){l.next=10;break}i="m.hutaojie.com"===location.hostname?"118":"130",l.next=12;break;case 10:throw Object(A.launchPDDApp)("sub_pay_later.html?".concat(Object(A.buildQuery)(Object(A.parseUrlQuery)(location.href)))).then((function(){}),(function(){Dt.default.uniformForward("download.html")})),new Error("not_support_platform");case 12:return c={"sign_app_id":i,"sign_scene":t||1,"anti_content":r,"order_sn":a,"ext_data":{"pay_ticket":n}},l.abrupt("return",St.getInstance().post("api/qogir/payment/agreement/pay_score_sign",c));case 14:case"end":return l.stop()}}),_callee)})));return function payScoreSign(){return e.apply(this,arguments)}}(),Rt=function goToWXScore(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryString;return new Promise((function(e,a){De({"payload":{"event":"before_wx_score"}}),wx.checkJsApi({"jsApiList":["openBusinessView"],"success":function success(r){r&&r.checkResult&&r.checkResult.openBusinessView&&wx.invoke("openBusinessView",{"businessType":"wxpayScoreEnable","queryString":t},(function(t){0===parseInt(t.err_code)?(De({"payload":{"event":"wx_score_success"}}),e()):(De({"payload":{"event":"wx_score_fail","payload":{"event":t&&JSON.stringify(t)}}}),a(t))}))}})}))},Qt=function signScoreInWechat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryString,a=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i),r=a[1];return Object(h.compareVersion)(r,"7.0.5")>=0?Rt({"queryString":t}):(Object(Mt.info)("请将微信更新至最新版后再次尝试"),Promise.reject({"errorHandling":{"isErrorAlerted":!0}}))},Ht=function signScoreInApp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.response;return De({"payload":{"event":"before_app_sign_score"}}),Object(H.invokeBridgeCallNativeFun)("AMAgreement","sign",{"type":3,"params":t})},qt=function(){var e=Object(f.default)(y.a.mark((function _callee2(){var e,t,a,r=arguments;return y.a.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},t=e.response,!(a=Object(h.getCurrentPlatform)()).isNativePlatform){n.next=6;break}return n.abrupt("return",Ht({"response":t}));case 6:if(!a.isPureWeChatPlatform){n.next=8;break}return n.abrupt("return",Qt({"queryString":t.query}));case 8:return n.abrupt("return",Promise.reject("Error_Platform"));case 9:case"end":return n.stop()}}),_callee2)})));return function scoreSign(){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(f.default)(y.a.mark((function _callee4(){var e,t,a,r,n,o,i,c,s,l,u,d=arguments;return y.a.wrap((function _callee4$(p){for(;;)switch(p.prev=p.next){case 0:if(e=d.length>0&&void 0!==d[0]?d[0]:{},t=e.signScene,a=e.antiContent,r=e.orderSn,n=e.pollingFun,o=e.payTicket,(i=Object(h.getCurrentPlatform)()).isNativePlatform||i.isPureWeChatPlatform){p.next=4;break}return p.abrupt("return",Promise.reject("Error_Platform"));case 4:return p.prev=4,p.next=7,Bt({"signScene":t,"antiContent":a,"orderSn":r,"payTicket":o});case 7:c=p.sent,p.next=19;break;case 10:if(p.prev=10,p.t0=p.catch(4),s=p.t0||{},410011!=+(l=s.errorCode)){p.next=18;break}return showAlert({"title":"先用后付功能逐步开放中\n敬请期待"}),p.abrupt("return",Promise.reject({"errorCode":l,"errorHandling":{"isErrorAlerted":!0}}));case 18:return p.abrupt("return",Promise.reject(p.t0));case 19:if(c&&c.success){p.next=21;break}throw new Error("pay_score_sign_error");case 21:return u=n||Ut,p.abrupt("return",qt({"response":c}).then(Object(f.default)(y.a.mark((function _callee3(){return y.a.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.isPollingError=!0,e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),_callee3,null,[[0,5]])})))).catch((function(e){if((e||{}).isPollingError)throw e;return u(!1)})));case 23:case"end":return p.stop()}}),_callee4,null,[[4,10]])})));return function wechatPayScoreSign(){return e.apply(this,arguments)}}(),Yt=function payScoreQuery(e){return Lt().then((function(t){return De({"payload":{"event":"pay_score_query"+(t&&t.wx_signed),"order_sn":e}}),t&&t.wx_signed})).catch((function(t){var a=t.errorCode;return De({"payload":{"event":"@pdd/pay/pay_score_query_err","order_sn":e,"error_code":a+""}}),!1}))},Xt=function pollSignStatus(e){var t=e.signScene,a=e.orderAmount,r=e.orderSn,n=e.scoreSignSdkSuccess,o=e.payTicket,i=e.switchToWechatIfSignXyhfFailed,c=function _spinnerHide(){i?It&&It():Object(Y.a)()};return function _spinnerShow(){i?(Object(Y.a)(),function showOrderCreatedSpinner(){It&&It(),It=Object(Ne.renderPopup)(l.a.createElement(Ft.a,{"style":{"height":"1.2rem","width":"1.2rem"}},l.a.createElement("span",null,"订单已生成"),l.a.createElement("br",null),l.a.createElement("span",null,"正前往支付")))}()):Object(Y.b)()}(),new Promise((function(e,i){var s,l=!1,u=0;s=setInterval((function(){if(u<=4)!function querySignResult(){var d={"pay_ticket":o,"sign_scene":t,"order_sn":r,"order_amount":a,"pull_scene":"after_sign","pull_times":u+=1};St.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",d).then((function(t){var a=t.signed,o=t.allow_create,d=t.forbid_create_code,p=t.forbid_create_reason;De({"payload":{"event":"query_allow_sign_or_create_time_"+u,"result":t&&JSON.stringify(t),"order_sn":r}}),!l&&a&&(l=!0,clearInterval(s),c(),o?e():i({"scoreSignSdkSuccess":n,"errorCode":d,"data":{"errorCode":d,"errorMsg":p}}))})).catch((function(e){var t=e.errorCode;De({"payload":{"event":"@pdd/pay/query_allow_sign_or_create_err","order_sn":r,"error_code":t+""}}),clearInterval(s),l||(l=!0,c(),e.scoreSignSdkSuccess=n,i(e))}))}();else{clearInterval(s);var d=new Error("query_allow_sign_or_create_timeout");d.errorCode=1005,d.scoreSignSdkSuccess=n,De({"payload":{"event":"@pdd/pay/query_allow_sign_or_create_timeout","order_sn":r}}),c(),i(d)}}),800)}))},zt=function(){var e=Object(f.default)(y.a.mark((function _callee(e){var t,a,r,n,o,i,c;return y.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return t=e.signScene,a=e.orderAmount,r=e.orderSn,n=e.antiContent,o=e.payTicket,i=e.switchToWechatIfSignXyhfFailed,c=function pollingFun(e){return Xt({"signScene":t,"orderAmount":a,"orderSn":r,"scoreSignSdkSuccess":e,"payTicket":o,"switchToWechatIfSignXyhfFailed":i})},s.abrupt("return",Vt({"signScene":t,"antiContent":n,"orderSn":r,"pollingFun":c,"payTicket":o}));case 3:case"end":return s.stop()}}),_callee)})));return function WechatPayScoreSignPaying(t){return e.apply(this,arguments)}}(),Jt=function(){function WechatMiniXyhf(e){Object(n.default)(this,WechatMiniXyhf),this.orderSn=e.orderSn,this.prepayType=e.prepayType,this.additionalParams=e.additionalParams,this.optionalParams=e.optionalParams,this.orderAmount=Object(Q.c)(this.optionalParams,"orderAmount")}return Object(o.default)(WechatMiniXyhf,[{"key":"pay","value":function pay(){var e=this;return new Promise((function(t,a){try{var r="/package_c/pay_score_sign/pay_score_sign?order_sn=".concat(encodeURIComponent(e.orderSn),"&order_amount=").concat(encodeURIComponent(e.orderAmount));e.prepayType&&(r+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===Object(Te.default)(e.additionalParams)&&Object.keys(e.additionalParams).forEach((function(t){r+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.additionalParams[t]))})),window.wx.miniProgram.navigateTo({"url":r,"success":function success(e){a({"cancelled":!0,"err_msg":-200})},"fail":function fail(e){showAlert({"title":"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(A.throwErrorAsync)(new Error("调起小程序支付失败_无法唤起")),a({"cancelled":!0,"err_msg":-400})}})}catch(e){showAlert({"title":"系统繁忙, 请稍后再试(".concat(-500,")")});var n=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(A.throwErrorAsync)(new Error("调起小程序支付失败_内部错误"),{"error_msg":n}),a({"cancelled":!0,"err_msg":-500})}}))}}]),WechatMiniXyhf}(),Kt=function(e){Object(i.default)(XianYongHouFu,e);var t,a,r=Object(c.default)(XianYongHouFu);function XianYongHouFu(e){var t;Object(n.default)(this,XianYongHouFu),t=r.call(this,e);var a=Object(h.getCurrentPlatform)(),o=Object(A.parseUrlQuery)(window.location.href);return t.isNative=a.isNativePlatform,t.isPureWeChatPlatform=a.isPureWeChatPlatform,t.isDdjbWeChatMiniProgram=a.isWeChatMiniProgram&&o._x_cmp_v&&o._x_cmp_v>=1640057746e3,t.isSupportSignXYHFVersion=Object(h.compareVersion)(a.version,"5.12.0")>=0,t.optionalParams=e.optionalParams,t.payTicket=Object(Q.c)(e,"attributeFields.pay_ticket"),t.options=e,t}return Object(o.default)(XianYongHouFu,[{"key":"realPay","value":(a=Object(f.default)(y.a.mark((function _callee(e){var t,a;return y.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.wait_time,a=+(a=void 0===t?2:t),Number.isInteger(a)||(a=1),Object(Y.a)(),Oe.show({"title":"0元下单中","icon":"xyhf"}),r.next=7,new Promise((function(e){return setTimeout(e,1e3*a)}));case 7:case"end":return r.stop()}}),_callee)}))),function realPay(e){return a.apply(this,arguments)})},{"key":"signXianYongHouFu","value":function signXianYongHouFu(){var e=Object(Q.c)(this.optionalParams,"signScene"),t=Object(Q.c)(this.optionalParams,"orderAmount"),a=Object(Q.c)(this.optionalParams,"antiContent"),r=Object(Q.c)(this.optionalParams,"switchToWechatIfSignXyhfFailed"),n=this.orderSn,o=this.payTicket;return zt({"signScene":e,"orderAmount":t,"orderSn":n,"antiContent":a,"payTicket":o,"switchToWechatIfSignXyhfFailed":r})}},{"key":"pay","value":(t=Object(f.default)(y.a.mark((function _callee3(){var e,t,a=this;return y.a.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(e=Object(Q.c)(this.optionalParams,"isSignXianYongHouFu"),t=Object(Q.c)(this.optionalParams,"switchToWechatIfSignXyhfFailed"),!e||!(this.isNative&&this.isSupportSignXYHFVersion||this.isPureWeChatPlatform||this.isDdjbWeChatMiniProgram)){r.next=13;break}return r.next=5,Yt(this.orderSn);case 5:if(!r.sent){r.next=8;break}return r.abrupt("return",this.prepay().then((function(e){return a.realPay(e)})));case 8:if(!this.isDdjbWeChatMiniProgram){r.next=10;break}return r.abrupt("return",new Jt(this.options).pay());case 10:return r.abrupt("return",this.signXianYongHouFu().then((function(){return Object(Y.b)(),a.prepay.bind(a,{"prepay_front_supports":["credit_repay_idempotence"]})().then((function(e){return a.realPay(e)}))})).catch(function(){var e=Object(f.default)(y.a.mark((function _callee2(e){var r,n;return y.a.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(r=Object(h.getCurrentPlatform)(),n=r.isWeChatPlatform,!t||!n){o.next=9;break}return o.next=5,new Promise((function(e){Object(Mt.html)("先用后付不成功，正在切换微信支付...",{"style":{"maxWidth":"3rem"},"onClose":e})}));case 5:return Object(Y.b)(),o.abrupt("return",new fa(a.options).pay().then((function(e){return Object(R.default)(Object(R.default)({},e),{},{"xyhfSwitchedToWechat":!0})})));case 9:throw e;case 10:case"end":return o.stop()}}),_callee2)})));return function(t){return e.apply(this,arguments)}}()));case 13:return r.abrupt("return",this.prepay().then((function(e){return a.realPay(e)})));case 14:case"end":return r.stop()}}),_callee3,this)}))),function pay(){return t.apply(this,arguments)})},{"key":"appId","get":function get(){var e=Object(h.getCurrentPlatform)(),t=e.isWeChatPlatform,a=e.isWeChatMiniProgram;return"m.hutaojie.com"===location.hostname?a?119:t?118:115:a?131:t?130:122}}]),XianYongHouFu}(jt),Gt="CHANCE_EXCEEDED";function createQogirPoller(e){var t=e.orderSn,a=e.attrMap,r=e.payChannel,n=e.transactionId,o=e.waitTimeBeforeQuery,i=void 0===o?null:o,c={"allowNextPoll":!0,"forceStop":function forceStop(){c.allowNextPoll=!1},"run":function run(){return Object(f.default)(y.a.mark((function _callee2(){var e,o,s,l,u;return y.a.wrap((function _callee2$(d){for(;;)switch(d.prev=d.next){case 0:if(!(i&&+i>0)){d.next=3;break}return d.next=3,new Promise((function(e){return setTimeout(e,1e3*+i)}));case 3:e=1;case 4:if(!(e<=4)){d.next=21;break}if(c.allowNextPoll){d.next=7;break}return d.abrupt("return",{"status":Se.UniversalException.QOGIR_PREMATURE_END});case 7:return d.prev=7,d.delegateYield(y.a.mark((function _callee(){var o,i,c,s,l,u,d,p,f;return y.a.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,St.getInstance().post("api/qogir/payment/query/pappay",{"order_sn":t,"times":e,"attr_map":a,"channel":r,"transaction_id":n});case 2:if(y.t0=y.sent,y.t0){y.next=5;break}y.t0={};case 5:if(o=y.t0,i=o.status,c=o.wait_time,s=o.error_info,u=(l=s||{}).error_code,d=l.error_msg,p=l.change_card_pay,f=l.pap_pay_fail_map,De({"error_msg":"qogir-pulling-"+i,"payload":{"order_sn":t,"times":e,"qogir_err":s?"".concat(u," | ").concat(d):void 0}}),+i===Se.Universal.Paying){y.next=15;break}return y.abrupt("return",{"v":{"status":+i||0,"errorInfo":{"errorCode":u,"errorMsg":d,"changeCardPay":p,"papPayFailMap":f,"papPayFailCode":u},"paySource":0}});case 15:return y.next=17,new Promise((function(e){return setTimeout(e,1e3*+c)}));case 17:case"end":return y.stop()}}),_callee)}))(),"t0",9);case 9:if(o=d.t0,"object"!==Object(Te.default)(o)){d.next=12;break}return d.abrupt("return",o.v);case 12:d.next=18;break;case 14:return d.prev=14,d.t1=d.catch(7),s=d.t1||{},l=s.errorCode,u=s.message,d.abrupt("return",{"status":Se.UniversalException.QOGIR_EXCEPTION,"errorInfo":{"errorCode":l,"errorMsg":u},"paySource":0});case 18:e++,d.next=4;break;case 21:return d.abrupt("return",{"status":Gt,"errorInfo":null,"paySource":0});case 22:case"end":return d.stop()}}),_callee2,null,[[7,14]])})))()}};return c}function createPushListener(e){var t=e.orderSn,a=e.listenType,r=e.payChannel,n=Object(h.getCurrentPlatform)(),o=!1,i={},c=null,s=null;a===Wt.WechatDirect?(i.type=a,c="PDDInbox",o=n.isNativePlatform&&Object(h.compareVersion)(n.version,"4.14.0")>=0,s="receiver"):(i.biz_type=a,c="PDDTitanPush",o=n.isNativePlatform&&Object(h.compareVersion)(n.version,"4.76.0")>=0,s="push_receiver");var l={"receiverId":null,"forceStop":function forceStop(){var e=Object(R.default)({},i);o&&a!==Wt.WechatDirect&&Object.assign(e,{"receiver_id":l.receiverId}),Object(H.invokeBridgeCallNativeFun)(c,"unregister",e)},"run":function run(){return Object(f.default)(y.a.mark((function _callee3(){return y.a.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return",new Promise((function(e){Object(H.invokeBridgeCallNativeFun)(c,"register",Object(R.default)(Object(R.default)({},i),{},Object(W.default)({},s,(function(a,n){var o=null,i=!1;try{o=JSON.parse(n.result[0].payload)}catch(e){i=!0}var c=o||{},s=c.status,u=c.error_info,d=c.order_sn,p=c.channel;if(a||!o)De({"error_msg":"push时查qogir失败","payload":{"pinbridge_err":a?"Inbox监听异常":void 0,"result_err":o?"Inbox回调数据异常":void 0,"data_format_err":i?"Inbox回调数据格式不是JSON":void 0}});else{if(d!==t||p!==r)return void De({"error_msg":"错误的push数据","payload":{"pushedOrderSn":d,"pushedChannel":p}});var y=u||{},f=y.error_code,h=y.error_msg,m=y.change_card_pay,b=y.pap_pay_fail_map;De({"error_msg":"qogir-push-"+s,"payload":{"order_sn":t,"qogir_err":u?"".concat(f," | ").concat(h):void 0}}),e({"status":+s||0,"errorInfo":{"errorCode":f,"errorMsg":h,"changeCardPay":m,"papPayFailMap":b,"papPayFailCode":f},"paySource":1})}l.forceStop()})))).then((function(e){l.receiverId=(e||{}).receiver_id}))})));case 2:return e.abrupt("return",new Promise((function(e,t){})));case 3:case"end":return e.stop()}}),_callee3)})))()}};return l}var $t=function DEFAULT_ON_CANCEL(){};var Zt,ea=function DEFAULT_ON_CANCEL(){};function showConfirm(e){e.onClose=e.onClose||e.onCancel,shouldUseNative()?function showConfirmNative(e){nativeShowAlert(Object(R.default)(Object(R.default)({},e),{},{"onCancel":e.onCancel||ea}))}(e):function showConfirmH5Base(e){return renderConfirmDialog(Object(R.default)(Object(R.default)({},e),{},{"onCancel":e.onCancel||$t}))}(e)}var ta,aa,ra=function createErrHandler(e){var t=e.errorMsg,a=e.cancelled,r=e.errorCode;return function(e){var n=e.originTime,o=e.paySource,i=e.orderSn;return recordAfterPayTracking({"paymentType":ve.DuoDuoPay,"errorCode":r,"orderSn":i,"waitTime":Date.now()-n,"errorMsg":t,"paySource":o}),Oe.hide(),Promise.reject({"cancelled":a,"errorCode":r})}},na=ra({"errorMsg":"其它异常","errorCode":-1,"cancelled":!1}),oa=(Zt={},Object(W.default)(Zt,Se.Universal.Success,(function(e){var t=e.originTime,a=e.paySource,r=e.orderSn;return new Promise((function(e){recordAfterPayTracking({"paymentType":ve.DuoDuoPay,"errorCode":0,"orderSn":r,"waitTime":Date.now()-t,"paySource":a}),Oe.showSuccess({"payInfoTitle":"多多支付","title":"支付成功"},e)}))})),Object(W.default)(Zt,Se.UniversalException.CHANCE_EXCEEEDED,ra({"errorMsg":"qogir轮询持续Paying，超过最大次数","errorCode":-1,"cancelled":!1})),Object(W.default)(Zt,Se.UniversalException.QOGIR_EXCEPTION,ra({"errorMsg":"qogir轮询出现异常","errorCode":-1,"cancelled":!1})),Object(W.default)(Zt,Se.Universal.NotFound,ra({"errorMsg":"订单号错误，无法找到","errorCode":-1,"cancelled":!1})),Object(W.default)(Zt,Se.Universal.Failed,(ta=Object(f.default)(y.a.mark((function _callee3(e){var t,a,r,n,o,i,c,s;return y.a.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.originTime,a=e.paySource,r=e.orderSn,n=e.errorMsg,o=e.changeCardPay,i=e.changeCardCallback,c=e.getAutoSwitchPay,!(s=c()).isAutoSwitchEnabled){l.next=4;break}return l.abrupt("return",s.performAutoSwitchPay());case 4:return l.abrupt("return",new Promise(function(){var e=Object(f.default)(y.a.mark((function _callee2(e,c){return y.a.wrap((function _callee2$(s){for(;;)switch(s.prev=s.next){case 0:recordAfterPayTracking({"paymentType":ve.DuoDuoPay,"errorCode":0,"orderSn":r,"waitTime":Date.now()-t,"paySource":a}),Oe.hide(),1==+o&&ge("5.45.0")?showConfirm({"title":n||"免密支付失败，请重试","onCancel":function onCancel(){c({"cancelled":!0})},"onClose":function onClose(){c({"cancelled":!0})},"onConfirm":function(){var t=Object(f.default)(y.a.mark((function _callee(){var t;return y.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i();case 3:t=a.sent,e(t),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),c(a.t0);case 10:case"end":return a.stop()}}),_callee,null,[[0,7]])})));return function onConfirm(){return t.apply(this,arguments)}}(),"cancelButtonLabel":"取消","confirmButtonLabel":"换卡支付"}):showAlert({"title":n||"免密支付失败，请重试","onConfirm":function onConfirm(){c({"cancelled":!1,"errorCode":-1})},"onClose":function onClose(){c({"cancelled":!1,"errorCode":-1})}});case 3:case"end":return s.stop()}}),_callee2)})));return function(t,a){return e.apply(this,arguments)}}()));case 5:case"end":return l.stop()}}),_callee3)}))),function(e){return ta.apply(this,arguments)})),Zt),ia=function(e){Object(i.default)(DuoDuoPay,e);var t,a=Object(c.default)(DuoDuoPay);function DuoDuoPay(e){var t;return Object(n.default)(this,DuoDuoPay),t=a.call(this,e),e=e||{},t.attrMap=e.attrMap,t.isSupportDirectPay=e.isSupportDirectPay,t.isSupportChangeCard=ge("5.45.0"),t.autoSwitchPay=new pa(e,t.appId),t}return Object(o.default)(DuoDuoPay,[{"key":"prepayParams","value":function prepayParams(){return Object(R.default)(Object(R.default)({},Object(kt.default)(Object(At.default)(DuoDuoPay.prototype),"prepayParams",this).call(this)),{},{"pap_pay":1,"attribute_fields":Object(R.default)({"forbid_contractcode":this.isSupportDirectPay?void 0:"1","forbid_pappay":this.isSupportDirectPay?void 0:"1"},this.attributeFields)})}},{"key":"realPay","value":function realPay(e,t){return 1==+e.is_pap_pay?this.handleDirectPay():this.handleNormalPay(e,t)}},{"key":"handleNormalPay","value":function handleNormalPay(e,t){var a=this,r=Object(R.default)({},e);if(t){var n=t.changeCardPay,o=t.papPayFailMap,i=t.papPayFailCode;n&&(r.change_card_pay=n),o&&Object.assign(r,o),i&&(r.pap_pay_fail_code=i)}return Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.DuoDuoPay,"params":r}).then((function(e){return recordAfterPayTracking({"paymentType":ve.DuoDuoPay,"errorCode":"0","orderSn":a.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var t=e.data,r=e.errorCode;return recordAfterPayTracking({"paymentType":ve.DuoDuoPay,"errorCode":r+"","orderSn":a.orderSn,"errorMsg":e.toJSON&&JSON.stringify(e.toJSON())}),Promise.reject({"errorCode":r,"data":t})}))}},{"key":"handleDirectPay","value":(t=Object(f.default)(y.a.mark((function _callee(){var e,t,a,r,n,o,i,c,s,l,u,d,p,f,h,m,b=this;return y.a.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:return e=Date.now(),t=createQogirPoller({"orderSn":this.orderSn,"payChannel":"DUODUOPAY","attrMap":this.attrMap}),a=createPushListener({"orderSn":this.orderSn,"listenType":Wt.UniversalPay,"payChannel":"DUODUOPAY"}),y.prev=3,Oe.hideSpinner(),Oe.show({"title":"免密支付中","icon":"ddpay"}),y.next=8,Promise.race([t.run(),a.run()]);case 8:if(y.t0=y.sent,y.t0){y.next=11;break}y.t0={};case 11:return r=y.t0,n=r.status,o=r.errorInfo,i=r.paySource,s=(c=o||{}).errorMsg,l=c.changeCardPay,u=c.papPayFailMap,d=c.papPayFailCode,y.abrupt("return",(oa[n]||na)({"originTime":e,"paySource":i,"orderSn":this.orderSn,"errorMsg":s,"changeCardPay":l,"changeCardCallback":this.pay.bind(this,{"changeCardPay":l,"papPayFailMap":u,"papPayFailCode":d}),"getAutoSwitchPay":function getAutoSwitchPay(){return b.autoSwitchPay}}));case 19:y.prev=19,y.t1=y.catch(3),p=y.t1||{},f=p.message,h=p.stack,m=p.errorCode,De({"error_msg":"poller与listener内部错误","payload":{"message":m||h||f}});case 23:return y.prev=23,t.forceStop(),a.forceStop(),y.finish(23);case 27:case"end":return y.stop()}}),_callee,this,[[3,19,23,27]])}))),function handleDirectPay(){return t.apply(this,arguments)})},{"key":"pay","value":function pay(e){var t=this;return this.prepay().then((function(a){return Object(Y.a)(),t.realPay(a,e)}))}},{"key":"appId","get":function get(){return 97}}]),DuoDuoPay}(jt),ca=function createErrHandler(e){var t=e.errorMsg,a=e.cancelled,r=e.errorCode;return function(e){var n=e.originTime,o=e.paySource,i=e.orderSn;return recordAfterPayTracking({"paymentType":ve.AliPayDirectDebit,"errorCode":r,"orderSn":i,"waitTime":Date.now()-n,"errorMsg":t,"paySource":o}),Oe.hide(),Promise.reject({"cancelled":a,"errorCode":r})}},sa=ca({"errorMsg":"其它异常","errorCode":-1,"cancelled":!1}),la=(aa={},Object(W.default)(aa,Se.Universal.Success,(function(e){var t=e.originTime,a=e.paySource,r=e.orderSn;return new Promise((function(e){recordAfterPayTracking({"paymentType":ve.AliPayDirectDebit,"errorCode":0,"orderSn":r,"waitTime":Date.now()-t,"paySource":a}),Oe.showSuccess({"payInfoTitle":"支付宝","title":"支付成功"},e)}))})),Object(W.default)(aa,Se.UniversalException.CHANCE_EXCEEEDED,ca({"errorMsg":"qogir轮询持续Paying，超过最大次数","errorCode":-1,"cancelled":!1})),Object(W.default)(aa,Se.UniversalException.QOGIR_EXCEPTION,ca({"errorMsg":"qogir轮询出现异常","errorCode":-1,"cancelled":!1})),Object(W.default)(aa,Se.Universal.NotFound,ca({"errorMsg":"订单号错误，无法找到","errorCode":-1,"cancelled":!1})),Object(W.default)(aa,Se.Universal.Failed,function(){var e=Object(f.default)(y.a.mark((function _callee2(e){var t,a,r,n,o,i;return y.a.wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.originTime,a=e.paySource,r=e.orderSn,n=e.errorMsg,o=e.getAutoSwitchPay,!(i=o()).isAutoSwitchEnabled){c.next=4;break}return c.abrupt("return",i.performAutoSwitchPay());case 4:return c.abrupt("return",new Promise(function(){var e=Object(f.default)(y.a.mark((function _callee(e,o){return y.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:recordAfterPayTracking({"paymentType":ve.AliPayDirectDebit,"errorCode":0,"orderSn":r,"waitTime":Date.now()-t,"paySource":a}),Oe.hide(),showAlert({"title":n||"免密支付失败，请重试","onConfirm":function onConfirm(){o({"cancelled":!1,"errorCode":-1})},"onClose":function onClose(){o({"cancelled":!1,"errorCode":-1})}});case 3:case"end":return e.stop()}}),_callee)})));return function(t,a){return e.apply(this,arguments)}}()));case 5:case"end":return c.stop()}}),_callee2)})));return function(t){return e.apply(this,arguments)}}()),aa),ua=Se.AliPayDirectDebit,da=function(e){Object(i.default)(AliDirectDebitPay,e);var t,a=Object(c.default)(AliDirectDebitPay);function AliDirectDebitPay(e){var t;return Object(n.default)(this,AliDirectDebitPay),t=a.call(this,e),e=e||{},t.attrMap=e.attrMap,t.isSupportDirectPay=e.isSupportDirectPay,t.autoSwitchPay=new pa(e,t.appId),t}return Object(o.default)(AliDirectDebitPay,[{"key":"prepayParams","value":function prepayParams(){var e=this.config.RedirectURI.AliPayDirectDebit;return Object(R.default)(Object(R.default)({},Object(kt.default)(Object(At.default)(AliDirectDebitPay.prototype),"prepayParams",this).call(this)),{},{"pap_pay":1,"attribute_fields":Object(R.default)({"forbid_contractcode":this.isSupportDirectPay?void 0:"1","forbid_pappay":this.isSupportDirectPay?void 0:"1"},this.attributeFields),"return_url":e,"request_from_url":e})}},{"key":"handleAsyncDirectPay","value":(t=Object(f.default)(y.a.mark((function _callee(e){var t,a,r,n,o,i,c,s,l,u,d,p,f,h,m=this;return y.a.wrap((function _callee$(y){for(;;)switch(y.prev=y.next){case 0:return t=e.transactionId,a=e.waitTime,r=Date.now(),n=createQogirPoller({"orderSn":this.orderSn,"payChannel":"ALIPAY","attrMap":this.attrMap,"transactionId":t,"waitTimeBeforeQuery":a}),o=createPushListener({"orderSn":this.orderSn,"listenType":Wt.UniversalPay,"payChannel":"ALIPAY"}),y.prev=4,Oe.hideSpinner(),Oe.show({"title":"免密支付中"}),y.next=9,Promise.race([n.run(),o.run()]);case 9:if(y.t0=y.sent,y.t0){y.next=12;break}y.t0={};case 12:return i=y.t0,c=i.status,s=i.errorInfo,l=i.paySource,u=(s||{}).errorMsg,y.abrupt("return",(la[c]||sa)({"originTime":r,"paySource":l,"orderSn":this.orderSn,"errorMsg":u,"getAutoSwitchPay":function getAutoSwitchPay(){return m.autoSwitchPay}}));case 20:y.prev=20,y.t1=y.catch(4),d=y.t1||{},p=d.message,f=d.stack,h=d.errorCode,De({"error_msg":"poller与listener内部错误","payload":{"message":h||f||p}});case 24:return y.prev=24,n.forceStop(),o.forceStop(),y.finish(24);case 28:case"end":return y.stop()}}),_callee,this,[[4,20,24,28]])}))),function handleAsyncDirectPay(e){return t.apply(this,arguments)})},{"key":"realPay","value":function realPay(e){var t=this;return 1==+e.is_pap_pay?this.handleAsyncDirectPay({"transactionId":e.transaction_id,"waitTime":e.wait_time}):new Promise((function(a,r){var n,o=ve.AliPayV2,i=!1,c=!1,s=parseInt(e.status,10);if(s===ua.Unsign?n=e.data:s!==ua.Rollback&&s?s!==ua.Failed&&s!==ua.Unknown||(c=!0):(delete(n=e).status,i=!0),n){var l=i?o:ve.AliPayDirectDebit;Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":l,"params":n}).then((function(e){recordAfterPayTracking({"paymentType":l,"errorCode":"0","orderSn":t.orderSn}),a()})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode;function errCallback(){r({"errorCode":a})}recordAfterPayTracking({"paymentType":l,"errorCode":a+"","orderSn":t.orderSn}),a!==parseInt(ke.NativePaymentCancel.code,10)||l!==ve.AliPayDirectDebit?errCallback():St.getInstance().post("payment/agreement/reset",{"app_id":t.appId}).then(errCallback,errCallback)}))}else c?(recordAfterPayTracking({"paymentType":o,"errorCode":s,"orderSn":t.orderSn}),s===ua.Success?(Oe.isSwitched||Oe.hide(),a()):(Oe.hide(),r({"errorCode":s}))):(Object(Y.a)(),Oe.show(),setTimeout((function(){recordAfterPayTracking({"paymentType":o,"errorCode":s,"orderSn":t.orderSn}),[ua.Success,ua.Paying].includes(s)?(Oe.isSwitched||Oe.hide(),a()):(Oe.hide(),r({"errorCode":s}))}),s===ua.Paying?4e3:2e3))}))}},{"key":"appId","get":function get(){return this.config.AppID.AliPayDirectDebit}}]),AliDirectDebitPay}(jt);function paymentTypeToChannel(e){switch(e){case ve.WeChat:return"WEIXIN";case ve.AliDirectDebitPay:return"ALIPAY";case ve.DuoDuoPay:return"DUODUOPAY";default:return""}}var pa=function(){function AutoSwitchPay(e,t){Object(n.default)(this,AutoSwitchPay),this.options=Object(R.default)(Object(R.default)({},e),{},{"attributeFields":Object(R.default)(Object(R.default)({},e.attributeFields),{},{"pappay_poll_mode":"T"})}),this.lastPayAppId=t}var e,t;return Object(o.default)(AutoSwitchPay,[{"key":"getAutoSwitchChannel","value":(t=Object(f.default)(y.a.mark((function _callee(){var e,t,a,r,n,o,i,c,s;return y.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:if(this.isAutoSwitchEnabled){l.next=2;break}return l.abrupt("return",{});case 2:return e=Object(Q.a)(this.options,"attributeFields.pay_ticket"),t=Object(Q.a)(this.options,"optionalParams.signScene"),a=Object(Q.a)(this.options,"optionalParams.orderAmount"),r=this.options.orderSn,l.prev=6,l.next=9,St.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",{"pay_ticket":e,"last_pay_app_id":this.lastPayAppId,"sign_scene":t,"order_amount":a,"order_sn":r});case 9:if(n=l.sent,i=(o=n||{}).allow_all_pay,c=o.next_channel,s=o.all_pay_type,De({"error_msg":"查询下个免密支付方式结果","payload":{"allow_all_pay":i,"next_channel":c}}),i){l.next=14;break}return l.abrupt("return",{});case 14:if(!Oe.isMianmiChannelUsed(c)){l.next=16;break}return l.abrupt("return",{});case 16:return l.abrupt("return",{"nextChannel":c,"allPayType":s});case 19:return l.prev=19,l.t0=l.catch(6),De({"error_msg":"查询下个免密支付方式异常"}),l.abrupt("return",{});case 23:case"end":return l.stop()}}),_callee,this,[[6,19]])}))),function getAutoSwitchChannel(){return t.apply(this,arguments)})},{"key":"performAutoSwitchPay","value":(e=Object(f.default)(y.a.mark((function _callee2(){var e,t,a,r,n;return y.a.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return Oe.isSwitched||(e=this.options.paymentType,Oe.startChannel=paymentTypeToChannel(e)),o.next=3,this.getAutoSwitchChannel();case 3:if(o.t0=o.sent,o.t0){o.next=6;break}o.t0={};case 6:if(t=o.t0,a=t.nextChannel,r=t.allPayType,a){o.next=14;break}return Oe.hide(),o.next=13,new Promise((function(e){Object(Mt.info)("免密支付失败，请更换支付方式",{"onClose":e})}));case 13:return o.abrupt("return",Promise.reject({"errorCode":-1}));case 14:Oe.recordMianmiChannel(a),o.t1=a,o.next="WEIXIN_CREDIT"===o.t1?18:"WEIXIN"===o.t1?28:"DUODUOPAY"===o.t1?30:"ALIPAY"===o.t1?32:34;break;case 18:if(Oe.currentPaymentType=ve.XianYongHouFu,1!=+r){o.next=27;break}return Oe.hide(),o.next=23,new Promise((function(e){Object(Mt.html)("免密支付失败，可使用先用后付<br>0元下单",{"style":{"maxWidth":"2.6rem"},"onClose":e})}));case 23:return(n=Object(R.default)({"optionalParams":{}},this.options)).optionalParams.isSignXianYongHouFu=!0,n.optionalParams.signScene=27,o.abrupt("return",new Kt(n).pay().catch((function(){return Promise.reject({"errorCode":-1})})));case 27:return o.abrupt("return",new Kt(this.options).pay());case 28:return Oe.currentPaymentType=ve.WeChat,o.abrupt("return",new fa(this.options).pay());case 30:return Oe.currentPaymentType=ve.DuoDuoPay,o.abrupt("return",new ia(this.options).pay());case 32:return Oe.currentPaymentType=ve.AliPayDirectDebit,o.abrupt("return",new da(this.options).pay());case 34:return o.abrupt("return",Promise.reject({"errorCode":-1}));case 35:case"end":return o.stop()}}),_callee2,this)}))),function performAutoSwitchPay(){return e.apply(this,arguments)})},{"key":"isAutoSwitchEnabled","get":function get(){return Object(Q.a)(this.options,"optionalParams.mianmiAutoSwitch")}}]),AutoSwitchPay}(),ya=Se.WechatDirectPayQuery,fa=function(e){Object(i.default)(WechatDirectPay,e);var t=Object(c.default)(WechatDirectPay);function WechatDirectPay(e){var a;Object(n.default)(this,WechatDirectPay),(a=t.call(this,e)).attrMap=e.attrMap;var r=Object(h.getCurrentPlatform)();return a.isNative=r.isNativePlatform,a.isPayWechatDirectStatusVersion=Object(h.compareVersion)(r.version,"4.14.0")>=0,a.additionalParams=e.additionalParams,a.innerPay=new Nt(e).innerPay,a.autoSwitchPay=new pa(e,a.appId),a}return Object(o.default)(WechatDirectPay,[{"key":"prepayParams","value":function prepayParams(){return Object(R.default)(Object(R.default)({},Object(kt.default)(Object(At.default)(WechatDirectPay.prototype),"prepayParams",this).call(this)),{},{"pap_pay":1})}},{"key":"isWechatDirectPayError","value":function isWechatDirectPayError(e){return[parseInt(ke.WxDirectPayWxBalanceError.code,10),parseInt(ke.WxDirectPayCardBalanceError.code,10),parseInt(ke.WxDirectPayTelephoneError.code,10),parseInt(ke.WxDirectPayCardInvalidError.code,10),parseInt(ke.WxDirectPayRefusedError.code,10),parseInt(ke.WxDirectPayUnknownError.code,10)].includes(e)}},{"key":"unregisterStatusMailBox","value":function unregisterStatusMailBox(){!this.unregistered&&this.isNative&&this.isPayWechatDirectStatusVersion&&(this.unregistered=!0,Object(H.invokeBridgeCallNativeFun)("PDDInbox","unregister",{"type":Wt.WechatDirect}))}},{"key":"realPay","value":function realPay(e){var t=this;return 1===e.is_pap_pay?new Promise((function(a,r){var n=Date.now(),o=1,i=null,c=function wechatDirectPaySuccessFn(e){recordAfterPayTracking({"paymentType":ve.WeChat,"errorCode":0,"orderSn":t.orderSn,"waitTime":Date.now()-n,"paySource":e||0}),a()},s=function wechatDirectPayFailFn(e){var a=e.errorCode,o=e.paySource,i=e.cancelled,c=e.errorMsg;recordAfterPayTracking({"paymentType":ve.WeChat,"errorCode":a||-1,"orderSn":t.orderSn,"waitTime":Date.now()-n,"errorMsg":c,"paySource":o||0}),r({"errorCode":a,"cancelled":i})},l=null,u=function handler(e){var a=-1;switch(e.status){case ya.Success:t.unregisterStatusMailBox(),Oe.hide(),Oe.showSuccess({"payInfoTitle":"微信支付","title":"支付成功"},(function(){return c(0)}));break;case ya.Paying:e.wait_time>=0?i=setTimeout((function(){l(++o)}),1e3*Math.min(e.wait_time||0,15)):s({"errorCode":-1,"paySource":0,"errorMsg":'前端免密支付状态轮询为"Paying"但并未返回等待时间'});break;case ya.Failed:t.unregisterStatusMailBox(),a=e.error_info&&e.error_info.error_code?parseInt(e.error_info.error_code,10):parseInt(ke.WxDirectPayUnknownError.code,10),t.isWechatDirectPayError(a)||(a=parseInt(ke.WxDirectPayUnknownError.code,10)),recordAfterPayTracking({"paymentType":ve.WeChat,"orderSn":t.orderSn,"errorCode":a||-1,"waitTime":Date.now()-n,"paySource":0,"errorMsg":'前端免密支付状态轮询为"Failed"'}),r({"errorCode":a,"cancelled":!0,"extraErrorInfo":{"isWechatDirectPayFail":!0}});break;case ya.NotFound:s({"errorCode":-1,"paySource":0,"cancelled":!0,"errorMsg":'前端免密支付状态轮询为"NotFound"'});break;default:s({"errorCode":a,"paySource":0,"errorMsg":"未知的前端免密轮询状态：".concat(e.status)})}};l=function requestOrderStatus(e){e>4?s({"errorCode":-1,"paySource":0,"errorMsg":"前端免密状态轮询超过4次"}):St.getInstance().post("api/qogir/payment/query/wechat/pappay",{"order_sn":t.orderSn,"times":e,"attr_map":t.attrMap}).then(u).catch((function(e){var t=e.errorCode,a=e.errorObject;s({"errorCode":-1,"errorObject":a,"errorMsg":"调用前端免密状态轮询接口失败errorCode：".concat(t)})}))};Object(Y.a)(),Oe.show(),function registerStatusMailBox(){t.isNative&&t.isPayWechatDirectStatusVersion&&Object(H.invokeBridgeCallNativeFun)("PDDInbox","register",{"type":Wt.WechatDirect,"receiver":function receiver(e,a){var o,s=(a.result||[])[0]||{};if(s=s.content,!e&&s&&s.order_sn===t.orderSn){switch(parseInt(s.status||0,10)){case ya.Success:i&&clearTimeout(i),Oe.hide(),Oe.showSuccess({"payInfoTitle":"微信支付","title":"支付成功"},(function(){return c(1)}));break;case ya.Failed:i&&clearTimeout(i),o=s.error_info&&s.error_info.error_code?parseInt(s.error_info.error_code,10):ke.WxDirectPayUnknownError.code,t.isWechatDirectPayError(o)||(o=ke.WxDirectPayUnknownError.code),recordAfterPayTracking({"paymentType":ve.WeChat,"orderSn":t.orderSn,"errorCode":o||-1,"waitTime":(new Date).getTime()-n,"paySource":0}),r({"errorCode":o,"cancelled":!0,"extraErrorInfo":{"isWechatDirectPayFail":!0}})}t.unregisterStatusMailBox()}else t.unregisterStatusMailBox()}})}(),i=setTimeout((function(){l(o)}),1e3*Math.min(e.wait_time||0,15))})).catch(function(){var e=Object(f.default)(y.a.mark((function _callee(e){return y.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!Object(Q.c)(e,"extraErrorInfo.isWechatDirectPayFail")||!t.autoSwitchPay.isAutoSwitchEnabled){a.next=3;break}return a.abrupt("return",t.autoSwitchPay.performAutoSwitchPay());case 3:throw Oe.hide(),e;case 5:case"end":return a.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}()):this.innerPay.realPay(e)}},{"key":"pay","value":function pay(){if(this.appId===this.config.AppID.WeChatH5Pay&&localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={"time":Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var t="transac_wechat_wapcallback.html?"+Object(A.buildQuery)(Object(R.default)({"option_json":JSON.stringify({"url":this.prepayUrl,"orderSn":this.orderSn,"params":this.params}),"prepay_type":this.prepayType,"order_sn":this.orderSn},this.additionalParams));return new Promise((function(e,a){Dt.default.reload(t)}))}return Object(kt.default)(Object(At.default)(WechatDirectPay.prototype),"pay",this).call(this)}},{"key":"appId","get":function get(){return this.innerPay.appId}}]),WechatDirectPay}(jt),ha=function(e){Object(i.default)(AliAppPay,e);var t=Object(c.default)(AliAppPay);function AliAppPay(){return Object(n.default)(this,AliAppPay),t.apply(this,arguments)}return Object(o.default)(AliAppPay,[{"key":"prepayParams","value":function prepayParams(){return Object(R.default)({"pap_pay":1,"pay_app_id":this.appId,"version":this.paymentVersion,"attribute_fields":Object(R.default)(Object(R.default)({},this.attributeFields),{},{"forbid_contractcode":"1","forbid_pappay":"1"}),"return_url":""},this.params)}},{"key":"realPay","value":function realPay(e){var t=this,a=ve.AliPayV2;return Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":a,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":a,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var r=e.errorCode;return recordAfterPayTracking({"paymentType":a,"errorCode":r+"","orderSn":t.orderSn}),Promise.reject({"errorCode":r})}))}},{"key":"appId","get":function get(){return this.config.AppID.AliPay}}]),AliAppPay}(jt),ma=function(e){Object(i.default)(AliWebPay,e);var t=Object(c.default)(AliWebPay);function AliWebPay(e){var a;return Object(n.default)(this,AliWebPay),(a=t.call(this,e)).prepayType=e.prepayType,a.additionalParams=e.additionalParams,a}return Object(o.default)(AliWebPay,[{"key":"prepayParams","value":function prepayParams(){var e=Object(A.resolveFullUrl)("transac_wappay_callback.html",Object(R.default)({"order_sn":this.orderSn,"prepay_type":this.prepayType},this.additionalParams));return Object(R.default)({"pay_app_id":this.appId,"pap_pay":1,"version":this.paymentVersion,"attribute_fields":Object(R.default)(Object(R.default)({},this.attributeFields),{},{"forbid_contractcode":"1","forbid_pappay":"1"}),"return_url":e},this.params)}},{"key":"realPay","value":function realPay(e){return new Promise((function(t,a){location.href=e.gateway_url+"?"+Object(A.buildQuery)(e.query)}))}},{"key":"appId","get":function get(){return this.config.AppID.AliPayWeb}}]),AliWebPay}(jt),ba=function(){function AliPay(e){Object(n.default)(this,AliPay),this.innerPay=null,Object(h.getCurrentPlatform)().isNativePlatform?this.innerPay=new ha(e):this.innerPay=new ma(e)}return Object(o.default)(AliPay,[{"key":"pay","value":function pay(){return this.innerPay.pay()}}]),AliPay}(),Pa=function(e){Object(i.default)(QQAppPay,e);var t=Object(c.default)(QQAppPay);function QQAppPay(){return Object(n.default)(this,QQAppPay),t.apply(this,arguments)}return Object(o.default)(QQAppPay,[{"key":"realPay","value":function realPay(e){var t=this;return Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.QQPay,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":ve.QQPay,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode;return recordAfterPayTracking({"paymentType":ve.QQPay,"errorCode":a+"","orderSn":t.orderSn}),Promise.reject({"errorCode":a})}))}},{"key":"appId","get":function get(){return this.config.AppID.QQ}}]),QQAppPay}(jt),ga=function(e){Object(i.default)(QQHostPay,e);var t=Object(c.default)(QQHostPay);function QQHostPay(){return Object(n.default)(this,QQHostPay),t.apply(this,arguments)}return Object(o.default)(QQHostPay,[{"key":"realPay","value":function realPay(e){var t=this;return new Promise((function(a,r){var n=function payInQQHost(){void 0===window.mqq.tenpay?(Object(A.throwErrorAsync)(new Error("window.mqq.tenpay未定义")),r({"errorCode":0})):"function"!=typeof window.mqq.tenpay.pay&&(Object(A.throwErrorAsync)(new Error("window.mqq.tenpay.pay不是一个函数")),r({"errorCode":0}));var n="appid#"+t.config.ApiKey.QQPublicTrack+"|bargainor_id#"+t.config.ApiKey.QQPublicMid+"|channel#wallet";window.mqq.tenpay.pay({"tokenId":e.token_id,"pubAcc":t.config.ApiKey.QQUIN,"pubAccHint":t.config.qqFollowTip,"appInfo":n},(function(e){recordAfterPayTracking({"paymentType":ve.QQPay,"errorCode":e.resultCode+""||"","orderSn":t.orderSn});var n="object"===Object(Te.default)(e)&&0===parseInt(e.resultCode,10),o=e&&-11001==+e.resultCode,i=e&&-1==+e.resultCode&&"用户主动放弃支付"===e.retmsg,c=o||i,s=i?-11001:e.resultCode;n?a(e):c?r({"errorCode":s,"cancelled":!0}):(Object(A.throwErrorAsync)(new Error("window.mqq支付失败"),{"data":JSON.stringify(e)}),r({"errorCode":s}))}))};"undefined"==typeof mqq?setTimeout((function(){"undefined"==typeof mqq?(Object(A.throwErrorAsync)(new Error("window.mqq未定义")),r({"errorCode":0})):n()}),2e3):n()}))}},{"key":"appId","get":function get(){return this.config.AppID.QQPublicPayment||this.config.AppID.QQPublic}}]),QQHostPay}(jt),va=function(){function QQPay(e){Object(n.default)(this,QQPay);var t=Object(h.getCurrentPlatform)().isQQPlatform;this.innerPay=t?new ga(e):new Pa(e)}return Object(o.default)(QQPay,[{"key":"pay","value":function pay(){return this.innerPay.pay()}}]),QQPay}(),Ca=function(e){Object(i.default)(ApplePay,e);var t=Object(c.default)(ApplePay);function ApplePay(e){var a;return Object(n.default)(this,ApplePay),(a=t.call(this,e)).orderSn=e.orderSn,a}return Object(o.default)(ApplePay,[{"key":"realPay","value":function realPay(e){var t=this;return e.money_order=e.money_order+"",e.server_time=e.server_time+"",Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.ApplePay,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":ve.ApplePay,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode,r=e.data;return recordAfterPayTracking({"paymentType":ve.ApplePay,"errorCode":a+"","orderSn":t.orderSn}),Promise.reject({"errorCode":a,"errorObject":r})}))}},{"key":"appId","get":function get(){return this.config.AppID.ApplePay}}]),ApplePay}(jt),Oa=function(e){Object(i.default)(HBInstallmentPay,e);var t=Object(c.default)(HBInstallmentPay);function HBInstallmentPay(){return Object(n.default)(this,HBInstallmentPay),t.apply(this,arguments)}return Object(o.default)(HBInstallmentPay,[{"key":"realPay","value":function realPay(e){var t=this;return Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.HBInstallmentPay,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":ve.HBInstallmentPay,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode;return recordAfterPayTracking({"paymentType":ve.HBInstallmentPay,"errorCode":a+"","orderSn":t.orderSn}),Promise.reject({"errorCode":a})}))}},{"key":"appId","get":function get(){return this.config.AppID.HBInstallmentPay}}]),HBInstallmentPay}(jt),_a=function isHBPayAvailable(){var e=Object(h.getCurrentPlatform)();return!!e.isNativePlatform&&Object(h.compareVersion)(e.version,"3.51.0")>=0},Sa=function(e){Object(i.default)(HBPay,e);var t=Object(c.default)(HBPay);function HBPay(){return Object(n.default)(this,HBPay),t.apply(this,arguments)}return Object(o.default)(HBPay,[{"key":"realPay","value":function realPay(e){var t=this;return _a()?Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.AliPayV2,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":ve.HBPay,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode;return recordAfterPayTracking({"paymentType":ve.HBPay,"errorCode":a+"","orderSn":t.orderSn}),Promise.reject({"errorCode":a})})):(Object(A.throwErrorAsync)(new Error("当前APP版本不支持花呗支付")),Promise.reject({"errorCode":0}))}},{"key":"appId","get":function get(){return 322}}]),HBPay}(jt),ja=function(e){Object(i.default)(DuoDuoPayACS,e);var t=Object(c.default)(DuoDuoPayACS);function DuoDuoPayACS(){return Object(n.default)(this,DuoDuoPayACS),t.apply(this,arguments)}return Object(o.default)(DuoDuoPayACS,[{"key":"realPay","value":function realPay(e){var t=this,a=e.prepay_id;return new Promise((function(){Object(Y.a)(),Oe.show({"title":"转账支付中"}),setTimeout((function(){Oe.hide(),Dt.default.reload("transac_return_compensation.html?_t_timestamp=sub_bank_transfer_guide&prepay_id=".concat(a,"&order_sn=").concat(t.orderSn))}),1e3)}))}},{"key":"appId","get":function get(){return 135}}]),DuoDuoPayACS}(jt),wa=function(e){Object(i.default)(UnionPay,e);var t=Object(c.default)(UnionPay);function UnionPay(){return Object(n.default)(this,UnionPay),t.apply(this,arguments)}return Object(o.default)(UnionPay,[{"key":"realPay","value":function realPay(e){var t=this;return Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.UnionPay,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":ve.UnionPay,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode;return De({"payload":{"event":"app_unionpay_pay","order_sn":t.orderSn,"error_code":a+""}}),Promise.reject({"errorCode":a})}))}},{"key":"appId","get":function get(){return 42001}}]),UnionPay}(jt),ka=function(e){Object(i.default)(CreditCardInstallmentPay,e);var t=Object(c.default)(CreditCardInstallmentPay);function CreditCardInstallmentPay(){return Object(n.default)(this,CreditCardInstallmentPay),t.apply(this,arguments)}return Object(o.default)(CreditCardInstallmentPay,[{"key":"realPay","value":function realPay(e){var t=this;return Object(H.invokeBridgeCallNativeFun)("JSPay","pay",{"type":ve.DuoDuoPay,"params":e}).then((function(e){return recordAfterPayTracking({"paymentType":ve.CreditCardInstallmentPay,"errorCode":"0","orderSn":t.orderSn}),e})).catch((function(e){logStackErrorInPromise(e);var a=e.errorCode;return recordAfterPayTracking({"paymentType":ve.CreditCardInstallmentPay,"errorCode":a+"","orderSn":t.orderSn}),Promise.reject({"errorCode":a})}))}},{"key":"appId","get":function get(){return 45001}}]),CreditCardInstallmentPay}(jt),Aa={"pay":function pay(e){var t=e.paymentType;void 0===e.isSupportDirectPay&&(e.isSupportDirectPay=!0);var a=Object(h.getCurrentPlatform)(),r=a.isWeChatPlatform,n=a.isWeChatMiniProgram,o=a.isNativePlatform,i=Ie;switch(t){case ve.WeChat:i=n?wt:e.isSupportDirectPay?fa:Nt;break;case ve.AliPay:r||(i=ba);break;case ve.AliPayDirectDebit:r||(i=da);break;case ve.QQPay:r||(i=va);break;case ve.ApplePay:o&&a.system===h.SYSTEM.IOS&&(i=Ca);break;case ve.HBInstallmentPay:r||(i=Oa);break;case ve.HBPay:i=Sa;break;case ve.DuoDuoPay:i=ia;break;case ve.XianYongHouFu:i=Kt;break;case ve.DuoDuoPayACS:i=ja;break;case ve.UnionPay:i=wa;break;case ve.CreditCardInstallmentPay:i=ka}var c=Object(Q.c)(e,"optionalParams.ddpayMianmiV2"),s=Object(Q.c)(e,"optionalParams.mianmiAutoSwitch");return Oe.init({"paymentType":t,"ddpayMianmiV2":c||s}),new i(e).pay()}},Da=function(){var e=Object(f.default)(y.a.mark((function _callee2(){return y.a.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:Oe.hideSpinner();case 1:case"end":return e.stop()}}),_callee2)})));return function paySpinnerHide(){return e.apply(this,arguments)}}();function home(){var e=Object(h.getCurrentPlatform)();if(e.statisfy&&e.statisfy("1.2.2","2.0.8","greaterThan")||e.isTinyNativePlatform)Object(H.invokeBridgeCallNativeFun)("JSNavigation","selectTab",{"tab_index":0});else{var t="index.html";e.isNativePlatform||e.isTinyNativePlatform?Object(H.invokeBridgeCallNativeFun)("JSNavigation","reset",{"url":Object(A.resolveFullUrl)(t)}).then((function(){return Dt.default.reload(t)}),(function(){return Dt.default.reload(t)})):Dt.default.uniformForward(t)}}var Ia=1,Ta=2,xa=3,Ea=4,Na=7;function createSimpleAction(e){var t=Object(Q.c)(e,"type",0),a=Object(Q.c)(e,"param.url");switch(t){case Ia:return function(){return Dt.default.uniformForward(a)};case Ta:return function(){return Dt.default.back(a)};case xa:return home;case Ea:return function(){return Dt.default.reload(a)};case Na:return function(){return location.reload()}}}var Wa="toast",Ma="nothing",Fa="alert",La="confirm";function errorPayloadHandler(e){var t=e.errorCode,a=e.errorObject,r=Object(Q.c)(a,"error_payload");if(!r)return null;var n=Object(Q.c)(r,"view_style",Wa);if(n===Ma)return Promise.reject({"errorCode":t,"errorHandling":{"isErrorAlerted":!0}});var o=Object(Q.c)(r,"view_object.message")||"",i=Object(Q.c)(r,"view_object.title")||"";o||(i=i||"系统繁忙，请稍后再试 (".concat(t,")"));var c=function createActions(e){var t=e||{},a=t.on_show,r=t.on_ok,n=t.on_cancel;return{"onShow":createSimpleAction(a),"onCancel":createSimpleAction(n),"onOk":createSimpleAction(r)}}(Object(Q.c)(r,"view_object"))||{},s=c.onOk,l=c.onCancel,u=c.onShow,d=Object(Q.c)(r,"view_object.ok_label")||"确定",p=Object(Q.c)(r,"view_object.cancel_label")||"取消",y=+Object(Q.c)(r,"view_object.on_close.type");return new Promise((function(e,a){var r=function withFinalCallback(e){return function(){e?e():a({"errorCode":t,"errorHandling":{"isErrorAlerted":!0}})}};switch(n){case Fa:showAlert({"title":i,"text":o,"onConfirm":r(s),"onClose":r(s),"confirmButtonLabel":d});break;case La:showConfirm({"title":i,"text":o,"onConfirm":r(s),"onCancel":r(l),"onClose":r(2===y?s:l),"cancelButtonLabel":p,"confirmButtonLabel":d});break;default:Object(Mt.info)(i,{"onClose":r(u)})}}))}var Ua,Ba={"0010":"交易金额超限，建议更换其他支付方式或稍后重试","0014":"银行阻止了该银行卡交易，建议更换支付方式付款或咨询银行如何解决","0116":"银行卡密码错误次数超限，建议更换其他支付方式或稍后重试","0119":"您的银行卡暂不支持在线支付业务，建议更换其他支付方式或联系银行客服","0124":"您的银行卡余额不足，建议更换其他支付方式"};var Ra=(Ua={},Object(W.default)(Ua,ke.WithoutWeChatClient.code,"您未安装微信或微信版本过低，建议安装新版微信后重试或使用其他支付方式"),Object(W.default)(Ua,60137,"您未安装微信，请安装后再支付或选择其他支付方式重新支付"),Object(W.default)(Ua,60138,"您使用的微信非官方版本，建议到官方渠道下载再重新支付"),Object(W.default)(Ua,60139,"当前支付方式不可用，请选择其他支付方式再重新支付"),Object(W.default)(Ua,60170,"您未安装云闪付或云闪付版本过低，建议安装新版云闪付后重试或使用其他支付方式"),Object(W.default)(Ua,60145,"当前支付方式不稳定，请更换其他支付方式"),Object(W.default)(Ua,60146,"当前支付方式不稳定，请更换其他支付方式"),Object(W.default)(Ua,60105,"当前支付方式不稳定，请更换其他支付方式"),Ua);function defaultErrorHandler(e){var t=e.errorCode,a=errorPayloadHandler(e);if(a)return Da(),a;var r=function applePayErrorHandler(e){var t=e.errorCode,a=e.errorObject;if(60136!=+t)return null;var r=(void 0===a?{}:a).sdk_return_code,n=Ba[r]||"交易失败，建议更换其他支付方式或稍后重试";return new Promise((function(e,a){var r=function onConfirm(){a({"errorCode":t,"errorHandling":{"isErrorAlerted":!0}})};showAlert({"title":n,"onConfirm":r,"onClose":r})}))}(e);return r?(Da(),r):t===parseInt(ke.NativePaymentCancel.code,10)?Promise.reject({"errorCode":t,"cancelled":!0}):t===parseInt(ke.QQPayFailed.code,10)?(Da(),new Promise((function(e,a){var r=function onConfirm(){a({"errorCode":t,"errorHandling":{"isErrorAlerted":!0}})};showAlert({"title":"由于QQ版本问题或未安装QQ\n暂时无法使用QQ钱包\n\n请安装新版QQ或选择其他支付方式","onConfirm":r,"onClose":r})}))):Ra[t]?(Da(),new Promise((function(e,a){var r=function onConfirm(){a({"errorCode":t,"errorHandling":{"isErrorAlerted":!0}})};showAlert({"title":Ra[t],"onConfirm":r,"onClose":r})}))):function isErrorRequireAlert(e){return[parseInt(ke.ItemRemoved.code,10),parseInt(ke.OutOfStock.code,10),parseInt(ke.GroupInvalid.code,10),parseInt(ke.OverBuyLimit.code,10),parseInt(ke.OrderPayed.code,10),parseInt(ke.PrepayBusy.code,10),parseInt(ke.PaymentDisabled.code,10),parseInt(ke.OverBuyVirtualGoodsLimit.code,10)].includes(e)}(t)?(Da(),new Promise((function(e,a){var r=function onConfirm(){a({"errorCode":t,"errorHandling":{"isErrorAlerted":!0}})};showAlert({"title":ke.getMsgFromCode(t),"onConfirm":r,"onClose":r})}))):Promise.reject(e)}var Qa,Ha=Se.PayStatus,qa=Se.ParentOrderStatus;Qa=Object(h.getCurrentPlatform)().isNativePlatform;var Va,Ya,Xa,za,Ja,Ka=new(function(){function Pay(){var e=this;Object(n.default)(this,Pay),this.orderPaidTimes=0,this.attributeFields=null,Qa?Object(H.invokeBridgeCallNativeFun)("AMStorage","get",{"key":"order_paid_times"}).then((function(t){e.orderPaidTimes=parseInt(t.value||0,10),e.attributeFields={"paid_times":e.orderPaidTimes}})):(this.orderPaidTimes=+localStorage.getItem("order_paid_times"),isNaN(this.orderPaidTimes)&&(this.orderPaidTimes=0),this.attributeFields={"paid_times":this.orderPaidTimes})}var e;return Object(o.default)(Pay,[{"key":"defaultCheckOrderStatus","value":(e=Object(f.default)(y.a.mark((function _callee(e){var t,a,r,n,o,i,c,s,l,u;return y.a.wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:t=e.maySuccess,a=e.orderSn,r=e.prepayType,n=function sleep(e){return new Promise((function(t){setTimeout(t,e)}))},o=function singlePayCheck(e){var n,o,i=e.retryTime;return r===je.Combine?(n="api/aristotle/pay_check_parent_order",o={"times":i,"success":t?1:0,"parent_order_sn":a}):(n="api/aristotle/pay_check",o={"times":i,"success":t?1:0,"order_sn":a}),St.getInstance().post(n,o)},i=1;case 4:if(!(i<6)){d.next=41;break}return De({"error_msg":"paycheck_".concat(t?"maysuccess":"mayfail","_").concat(i),"payload":{"event":"paycheck","order_sn":a}}),d.prev=6,d.next=9,o({"retryTime":i});case 9:if(c=d.sent,s=c.wait_time,l=c.parent_order_status,u=c.pay_status,+l!=+qa.Unpayed&&+u!=+Ha.Unpayed||!(s>0)){d.next=18;break}return d.next=16,n(1e3*s);case 16:d.next=31;break;case 18:if(r!==je.Combine){d.next=26;break}if(+l!=+qa.Payed){d.next=23;break}return d.abrupt("return",{"parentOrderStatus":l});case 23:return d.abrupt("return",Promise.reject({"errorCode":"defaultCheckOrderStatusFail"}));case 24:d.next=31;break;case 26:if(+u!=+Ha.Payed){d.next=30;break}return d.abrupt("return",{"orderStatus":1});case 30:return d.abrupt("return",Promise.reject({"errorCode":"defaultCheckOrderStatusFail"}));case 31:d.next=38;break;case 33:throw d.prev=33,d.t0=d.catch(6),d.t0=d.t0||{},d.t0.errorCode||(d.t0.errorCode="unknown"),d.t0;case 38:i++,d.next=4;break;case 41:return d.abrupt("return",Promise.reject({"errorCode":"defaultCheckOrderStatusFail"}));case 42:case"end":return d.stop()}}),_callee,null,[[6,33]])}))),function defaultCheckOrderStatus(t){return e.apply(this,arguments)})},{"key":"checkOrderStatus","value":function checkOrderStatus(e){var t=this,a=e.service,r=e.timeout,n=e.success,o=e.orderSn,i=e.prepayType,c=!0;return Promise.race([new Promise((function(e,t){setTimeout((function(){c?t():e()}),r||1e4)})),a({"maySuccess":n,"orderSn":o,"prepayType":i}).then((function(e){return c=!1,e}))]).then((function(e){return e&&1===e.orderStatus&&(Qa?Object(H.invokeBridgeCallNativeFun)("AMStorage","set",{"key":"order_paid_times","value":t.orderPaidTimes+1+""}):localStorage.setItem("order_paid_times",t.orderPaidTimes+1)),e})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={"errorCode":e.errorCode||-1,"extraErrorInfo":{"isCheckOrderFail":!0}};throw t}))}},{"key":"pay","value":function pay(e){var t=this,a=e.paymentType,r=e.orderSn;if(a&&a!==ve.FriendPay&&(Qa&&Object(H.invokeBridgeCallNativeFun)("AMStorage","set",{"key":"last_payment_type2","value":a.toString()}),localStorage.setItem("LastPaymentType",a.toString())),De({"payload":{"event":"before_prepay","payment_type":a,"order_sn":r}}),a===ve.FriendPay)return Promise.resolve({"redirectToFriendPay":!0});var n=e.checkOrderStatus&&"function"==typeof e.checkOrderStatus?e.checkOrderStatus:this.defaultCheckOrderStatus,o=null;return e.attributeFields=Object(R.default)(Object(R.default)({},e.attributeFields),this.attributeFields),Aa.pay(e).then((function(a){return o=a,null!==e.checkOrderStatus?t.checkOrderStatus({"service":n,"timeout":e.checkOrderTimeout,"success":!0,"orderSn":r,"prepayType":e.prepayType}):a})).then((function(e){var t,r=null===(t=o)||void 0===t?void 0:t.xyhfSwitchedToWechat;return[a,Oe.currentPaymentType].includes(ve.XianYongHouFu)&&!r?new Promise((function(t){Oe.showSuccess({"title":"下单成功","payInfoTitle":"先用后付"},(function(){return t(e)}))})):e})).then((function(e){return e!==o?Object(R.default)(Object(R.default)({},e),o):o})).catch((function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};([a,Oe.currentPaymentType].includes(ve.XianYongHouFu)||Oe.isSwitched&&Oe.currentPaymentType===ve.AliPayDirectDebit)&&Oe.hide();var i=o.errorCode;if((0==+i||-1==+i||+i==+ke.NativeNormalError.code||60160==+i)&&null!==e.checkOrderStatus)return t.checkOrderStatus({"service":n,"timeout":e.checkOrderTimeout,"success":!1,"orderSn":r});throw o})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(Q.c)(e,"optionalParams.errorCodeBlackList")||[],r=t.errorCode;if(Array.isArray(a)&&a.map((function(e){return+e})).includes(+r)||"defaultCheckOrderStatusFail"===r)throw t;if(Object(Q.c)(e,"optionalParams.skipDefaultErrorHandler"))throw t;return defaultErrorHandler(t)}))}},{"key":"setHttpService","value":function setHttpService(e){if(!e||!("post"in e)||"function"!=typeof e.post)throw new window.Error("pay.setHttpService的参数必须包含post方法");St.setInstance(e)}}]),Pay}()),Ga=function NULL_FUNC(){},$a=function isAliPayDirectDebitAvailable(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ga,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ga;var a=Object(h.getCurrentPlatform)(),r=a.isNativePlatform;if(r&&Object(h.compareVersion)(a.version,"3.2.0")>=0){var n="",o=a.system;o===h.SYSTEM.IOS?n="alipays":o===h.SYSTEM.Android&&(n="com.eg.android.AlipayGphone"),Object(H.invokeBridgeCallNativeFun)("AMApplication","check",{"app":n}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=parseInt(t.has_installed,10)||0;e(a?ve.AliPayDirectDebit:ve.AliPay)})).catch((function(){return e(ve.AliPay)}))}else t()},Za=a("k/Ow"),er=a("W1Es"),tr=a("bdvc"),ar=a("AKEH"),rr=a("HIM3"),nr=a("gzTa"),or=a("nigR"),ir=a("TRXh"),cr=a("X4lv"),sr=a("jY+O"),lr=a("9ap9"),ur=a("c7uK"),dr=a("opb1"),pr=a("B21c"),yr=a("a3ss"),fr=a("Y65e"),hr=(a("+JCI"),"_1lHFkPG"),mr="_h2upy49",br="_1FeLsZq",Pr="_2dNuu6p",gr="_WA5iRyT",vr="_1vW2Cqs",Cr="_2K0Mx5f",Or="_5FgWtWo",_r=a("4bvG"),Sr=(Va=Object(_r.b)(1e3),Object(M.observer)((Xa=function(e){Object(i.default)(VipPaymentItem,e);var t=Object(c.default)(VipPaymentItem);function VipPaymentItem(){var e;Object(n.default)(this,VipPaymentItem);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object(yr.a)(Object(N.default)(e),"handleClick",za,Object(N.default)(e)),e}return Object(o.default)(VipPaymentItem,[{"key":"render","value":function render(){var e=this.props.data||{},t=e.price,a=void 0===t?0:t,n=e.vipTime,o=void 0===n?0:n,i=e.fakePrice,c=void 0===i?0:i,s=this.props.selected;return l.a.createElement(r.a,{"className":d()(hr,Object(W.default)({},mr,s)),"onClick":this.handleClick},s&&l.a.createElement(r.a,{"className":Cr},l.a.createElement(r.a,{"className":Or})),l.a.createElement(r.a,{"className":br},Object(ar.e)(o),"特惠"),l.a.createElement(r.a,{"className":Pr},Object(tr.d)(a,2)),l.a.createElement(r.a,{"className":d()(gr,Object(W.default)({},vr,s))},"￥",Object(tr.d)(c,2)))}}]),VipPaymentItem}(s.Component),za=Object(fr.a)(Xa.prototype,"handleClick",[Va],{"configurable":!0,"enumerable":!0,"writable":!0,"initializer":function initializer(){var e=this;return function(){var t=e.props.onClick,a=(e.props.data||{}).id;null==t||t(a)}}}),Ya=Xa))||Ya),jr=vt.default.getInstance(),wr=Za.i.PAY_FIXED_VIP,kr=Object(W.default)({},wr,"得#{reward}会员时长"),Ar=["https://avatar2.pddpic.com/a/Q1BxekoxcG9GQXFFekphVFd3TTlzN1Bjb01RM0hyVWxiQT09djA0-1603773030?imageMogr2/thumbnail/100x","https://avatar2.pddpic.com/a/Q0tpd1ZWalFFSktGbjY2eENCV1FFQXltNzRrQVpQckQ3QT09djA0-1595515245?imageMogr2/thumbnail/100x"],Dr=Object(M.observer)(Ja=function(e){Object(i.default)(HomeMissionPay,e);var t=Object(c.default)(HomeMissionPay);function HomeMissionPay(){var e;Object(n.default)(this,HomeMissionPay);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object(W.default)(Object(N.default)(e),"onCancel",(function(){F.a.hide()})),Object(W.default)(Object(N.default)(e),"afterPayHandler",function(){var e=Object(f.default)(y.a.mark((function _callee(e){var t,a;return y.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(F.a.hide(),null==e||!e.success){r.next=10;break}return t=lr.a.infiniteCardEndTimeCountDown,r.next=5,sr.b.afterVipOrderBack();case 5:if(a=lr.a.infiniteCardEndTimeCountDown,t!==a){r.next=10;break}return r.next=9,Object(Q.q)(5e3);case 9:sr.b.afterVipOrderBack();case 10:case"end":return r.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}()),Object(W.default)(Object(N.default)(e),"onPayError",(function(e){var t={"op":"real_error","page":"read pay error "+JSON.stringify(e||{}),"error_message":JSON.stringify(e||{})};Object(pr.a)(t)})),Object(W.default)(Object(N.default)(e),"onPaymentListLoaded",(function(){Object(ur.a)(dr.a.HOME_PAYMENT_LOADED),F.a.setShowTips(!0)})),Object(W.default)(Object(N.default)(e),"renderImg",(function(){var e=Object(er.a)("vip_payment_icon");return l.a.createElement(_.a,{"className":"read-payment-img","src":e})})),Object(W.default)(Object(N.default)(e),"handleCreateOrder",(function(e){F.a.createOrder({"missionType":wr,"pageId":jr.getPageID(),"vipPriceId":e})})),e}return Object(o.default)(HomeMissionPay,[{"key":"componentDidMount","value":function componentDidMount(){F.a.setDidMount()}},{"key":"render","value":function render(){var e=this,t=F.a.showPay,a=F.a.orderSn,n=F.a.orderAmount,o=F.a.didMount,i=F.a.isIphoneX,c=F.a.showTips,s=F.a.vipPriceSelectedId,u=rr.b.getMissionInfo(wr),p=u||{},y=p.extMap,f=p.finishCount,h=Object(nr.c)(u,or.A.CARD),m=y||{},b=m.price,P=m.frontMaxFinishCount,g=m.vipInfo,v=void 0===g?[]:g;if(!b||!o||P&&P<=f)return null;var C=kr[wr].replace("#{reward}",Object(ar.e)(h)),O=((null==v?void 0:v[0])||{}).vipTime,S=void 0===O?0:O;return l.a.createElement(r.a,{"className":d()("read-payment-contain",{"payment-phone-x":i})},t?l.a.createElement(E,{"payPackage":Ka,"isAliPayDirectDebitAvailable":$a,"ui":ir.a,"frontEnv":54,"visible":t,"onCancel":this.onCancel,"ignoredChannels":["WEIXIN_FRIEND","UNIONPAY","HBFQ_ALI_PAY","LIANLIANPAY"],"afterPayHandler":this.afterPayHandler,"onPayError":this.onPayError,"orderSn":a,"onPaymentListLoaded":this.onPaymentListLoaded,"orderAmount":n},c?(null==v?void 0:v.length)>0?l.a.createElement(r.a,{"className":L},l.a.createElement(r.a,{"className":U},Ar.map((function(e){return l.a.createElement("img",{"className":B,"src":e,"key":e})})),this.totalNum,"书友已购买",Object(ar.e)(S),"特惠会员"),v.map((function(t){var a=t.price,r=void 0===a?0:a,n=t.vipTime,o=void 0===n?0:n,i=t.id===s;return l.a.createElement(Sr,{"key":"".concat(r,"-").concat(o),"data":t,"selected":i,"onClick":e.handleCreateOrder})}))):l.a.createElement(r.a,{"className":"read-payment-fixed"},l.a.createElement(r.a,{"className":"read-payment-fixed-tips"},l.a.createElement(_.a,{"className":"read-payment-fixed-img","src":"https://avatar2.pddpic.com/a/Q1BxekoxcG9GQXFFekphVFd3TTlzN1Bjb01RM0hyVWxiQT09djA0-1603773030?imageMogr2/thumbnail/100x"}),l.a.createElement(_.a,{"className":"read-payment-fixed-img","src":"https://avatar2.pddpic.com/a/Q0tpd1ZWalFFSktGbjY2eENCV1FFQXltNzRrQVpQckQ3QT09djA0-1595515245?imageMogr2/thumbnail/100x"}),this.totalNum,"书友购买后都说好"),l.a.createElement(r.a,{"className":d()("read-payment-fixed-detail")},this.renderImg(),l.a.createElement(r.a,{"className":"read-payment-center"},l.a.createElement(r.a,{"className":"read-payment-title"},Object(tr.c)(b),"元",l.a.createElement("span",{"className":"read-payment-origin-price"},"5元"),C),l.a.createElement(r.a,{"className":"read-payment-desc"},"限时特惠",l.a.createElement(cr.a,{"counterKey":"payFixedVipCountDown"}),"后结束")))):null):null)}},{"key":"totalNum","get":function get(){return Object(tr.z)((Date.now()-(new Date).setHours(0,0,0,0))/60/1e3*123+10688)}}]),HomeMissionPay}(s.Component))||Ja;t.default=Dr},"eskz":function(e,t,a){},"fI1f":function(e,t,a){},"fUNr":function(e,t,a){},"jGYx":function(e,t,a){},"kcBU":function(e,t,a){},"p+lt":function(e,t,a){},"xZuf":function(e,t,a){}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-fun-read/js/dynamic_home_bottom_payment~002699c4_f487cf30556207d5378a.js.map