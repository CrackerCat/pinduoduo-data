(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5476],{87677:function(e,t,r){"use strict";var n=r(59713),i=r.n(n),a=r(63038),o=r.n(a),c=r(6479),s=r.n(c),u=r(67294),l=r.n(u),f=(r(45697),r(94184)),p=r.n(f),d=r(24684),m=r(44799),h=r(27084),v=r(90154),y=r.n(v),g=["visible","pageElSn"];t.Z=(0,m.Z)(y())((function(e){var t,r,n=e.visible,a=e.pageElSn,c=s()(e,g),f=(0,u.useState)(n),m=o()(f,2),v=m[0],b=m[1];if((0,u.useEffect)((function(){var e=function(){b(!1)};return n&&!v&&setTimeout((function(){b(!0)}),0),!n&&v&&e(),e}),[n]),!n)return null;var O=p()(y().content,c.className,(r={},i()(r,y().iphonex,null==c||null===(t=c.safeAreaOpts)||void 0===t?void 0:t.show),i()(r,y().show,v),r)),S=p()(y().containerBg,c.bgClassName,i()({},y().show,v)),T=c.onBackdropClick,E=c.children,k=c.ignoreEnableScroll,w=c.scrollSelector,_={};return a&&(_.page_el_sn=a),l().createElement("div",{className:y().container},l().createElement(d.Z,{trackingInfo:_,doImpr:!!a},l().createElement("div",{className:S,onClick:T})),l().createElement("div",{className:O},E),l().createElement(h.Z,{ignoreEnableScroll:k,scrollSelector:w}))}))},47117:function(e,t,r){"use strict";r.d(t,{cx:function(){return u},Vf:function(){return s},Lo:function(){return l},F5:function(){return f},QU:function(){return o}});var n=r(1607);var i=r(30064);function a(e,t){return t?(t.scrollTop=e,0!==t.scrollTop?t:null):null}function o(e,t){return t&&t!==document.body?(t.scrollTop=e,null):0===e?(r=0,document.body.scrollTop=r,document.documentElement&&(document.documentElement.scrollTop=r),null):a(e,document.body)||a(e,document.documentElement);var r}function c(e){return((0,i.mB)(window.location.search)||{})[e]}function s(){var e={sp:+c("sp")||0,itemIndex:parseInt(c("item_index"),10)||0}.sp;return setTimeout((function(){e&&o(e)}),0)}function u(e){var t;return e&&e!==document.body?e.scrollTop:document.body.scrollTop+((null===(t=document.documentElement)||void 0===t?void 0:t.scrollTop)||0)}function l(e,t){var r=e.queries,i=e.node;(r=r||{}).sp||(r.sp=u(i)),n.ZP.replaceQuery(r,t)}function f(e,t){l({queries:{item_index:e}},t)}},97719:function(e,t,r){"use strict";r.d(t,{Z:function(){return T}});var n=r(59713),i=r.n(n),a=r(6479),o=r.n(a),c=r(48926),s=r.n(c),u=r(87757),l=r.n(u);r(66337);var f=r(51308),p=r(38533),d=r(36792),m=r(6341),h=r(12045),v=r(62424),y=["extraPageOptions"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(){return S.apply(this,arguments)}function S(){return(S=s()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.X6)().then((function(e){return 1==+e.shown_type})).catch((function(){return!1}));case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,d.Rl)();case 7:(0,h.Ku)();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,v.BY)();var r=t.extraPageOptions,n=void 0===r?{}:r,i=o()(t,y),a=(0,m.rL)(i),c={appId:"100428",bizSide:"consumer-platform-fe",testAppId:"100265"};(0,f.g)(e,b(b({title:e.appConfig.title},a),{},{pmmAppInfo:c}));var s=(0,p.zT)();n.isManualPV&&s.isNativePlatform&&O()}},98622:function(e,t,r){"use strict";r(32e3),r(48977),r(98837),r(52310),r(94899),r(1268),r(30522),r(62773),r(56997),r(19371),r(58295),r(50110),r(20075),r(31842),r(19977),r(41560),r(48377),r(88416),r(11246),r(53403),r(75115),r(48646),r(22658),r(83276),r(89375),r(94882),r(98351),r(79622),r(41520),r(16917),r(30372),r(84672),r(96253),r(99176),r(64157),r(35095),r(49892),r(27476),r(43533),r(68838),r(96409),r(40851),r(9865),r(83946),r(66108),r(98184),r(95767),r(79665),r(29539),r(96620),r(50191),r(62850),r(39115),r(41784),r(92770),r(98306),r(10823),r(17732),r(65869),r(94325),r(32564),r(84633),r(91181),r(35666);var n,i=r(97719),a=r(59713),o=r.n(a),c=r(34575),s=r.n(c),u=r(93913),l=r.n(u),f=r(2205),p=r.n(f),d=r(78585),m=r.n(d),h=r(29754),v=r.n(h),y=r(67294),g=r.n(y),b=r(49408),O=r(94184),S=r.n(O),T=r(693),E=r(57068),k=r(63038),w=r.n(k),_=r(48926),D=r.n(_),P=r(33124),N=r.n(P),C=r(27361),I=r.n(C),R=r(87757),j=r.n(R),A=r(22188),L=r(66197),x=r(47117),F=r(96701),B=r(80837),M=r(79072),Z=r(9714),q=r(92272),H=r(3060),U=r(60308),V=r(77964),z=r(70051),G="TIME",X="PRICE",$="STOCK",W={"etd-1":"最早出发","etd-0":"最晚出发","trainPeriod-1":"用时最短"},Q=0,J=1,K=2,Y={TRAIN:"if_train_type",START:"if_start_station",END:"if_end_station",DURATION:"if_duration"},ee=(n={},o()(n,Y.TRAIN,"trainTypeFilterStatus"),o()(n,Y.DURATION,"durationFilterStatus"),o()(n,Y.START,"startStationFilterStatus"),o()(n,Y.END,"endStationFilterStatus"),n),te={backward:{page_el_sn:802709},forward:{page_el_sn:802710},calendar:{page_el_sn:802711}},re="网络繁忙，请稍后查询～",ne="return_ticket_again",ie="return_ticket",ae="list_inquiry_fail",oe="return_no_date",ce=1,se=2,ue=3,le=4,fe=5,pe="_tp_order_travel_sns",de=r(83829);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve=[2,3],ye={0:"无票",1e4:"有票"},ge={0:"抢票",1e4:"有票"},be=function(e){var t=e.seatTypeName,r=e.trueStock,n=e.enableBook,i=e.bookMinTicketNum,a=e.ifCandidate,o=e.isImmediate,c=(t||"").slice(0,4);if(!n)return{seatName:c,isItemGray:0===r,isRed:r>0&&r<=10,showStock:ye[r]||r,hideUnit:!!ye[r]};var s=function(e,t,r,n){return 1e4===e?ge[e]:r?"可候补":e>0&&e<t?"".concat(e,"张(抢)"):n?ye[e]:ge[e]}(r,i,a,o);return{seatName:c,isItemGray:!1,isRed:!a&&r>=0&&(r<=10||r<i),showStock:s||r,hideUnit:!!s}},Oe=function(e,t){if(!e||!t)return 0;var r=B.$.dateStartTime(e);if(t>r){var n=Math.floor((t-r)/F.xR);return isNaN(n)&&(n=0),n}return 0},Se=function(e){return B.$.hColonM(e).split(":")};function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t){var r=e.trainInfoList||[],n=!t&&e.enableBook;return r.map((function(t){var r=!!t.immediateTag,i=(r?e.immediateMinTicketNum:e.bookMinTicketNum)||0,a=function(e){var t=e.priceList,r=void 0===t?[]:t,n=e.enableBook,i=e.bookMinTicketNum,a=e.isImmediate,o=0,c=0,s=!1,u=!1;return{seatOverLimited:(r=r.map((function(e){var t=parseInt(e.discountPrice||e.price,10)||0;o=0===o?t:Math.min(o,t),c=o===t?parseInt(e.couponValue||0,10):c;var r=(0,de.d)(e.stock),l=be({seatTypeName:e.seatTypeName,trueStock:r,enableBook:n,bookMinTicketNum:i,ifCandidate:e.ifCandidate,isImmediate:a});return!u&&r>=i&&(u=!0),!s&&r<i&&ve.includes(e.seatType)&&(s=!0),he(he({},e),{},{trueStock:r,showProperty:l})}))).length>=3,normalSeatIsGrab:s,hasTicket:u,minPrice:o,couponValue:c,priceList:r.slice(0,4)}}({priceList:t.priceList,enableBook:n,bookMinTicketNum:i,isImmediate:r}),o=a.seatOverLimited,c=a.hasTicket,s=a.minPrice,u=a.priceList,l=a.normalSeatIsGrab,f=a.couponValue,p=parseInt(t.preSellFlag,10),d=Oe(t.etd,t.eta),m=(0,H.bd)(s),h=Se(t.etd),v=Se(t.eta),y=n&&p===V.In.EXTERNAL,g=n&&p===V.In.NORMAL&&o&&!c,b=n&&t.ifSupportCandidate,O=f>0?(0,H.bd)(f):"",S=l?"":(t.tagInfo||"").substring(0,10);return Ee(Ee({},t),{},{priceList:u,minPrice:s,hasTicket:c,periodDay:d,minPriceStd:m,etdSplit:h,etaSplit:v,showEtdDate:t.etd?B.$.chineseMD(t.etd):"",showEtaDate:t.eta?B.$.chineseMD(t.eta):"",trainPeriod:t.eta-t.etd,isTrainImproper:(0,V.CX)(p),isTrainForbid:(0,V.n7)(p),canReadyBuy:y,canSnatching:g,ifSupportCandidate:b,normalSeatIsGrab:l,recommendTag:S,showRecommendTag:!!S,showType:ce,bookMinTicketNum:i,isImmediate:r,couponValueStd:O})}))}function we(e){var t,r={};["startDepartDate","endDepartDate","endBookDate","saleBeginTime","saleEndTime","immediateGray","immediateRangeLeft","immediateRangeRight","nightIssueTicketGray"].forEach((function(t){r[t]=e[t]}));var n=(0,U._)(e),i=e.seatTypeList||z.a6,a=i.map((function(e){return e.name})),o=i.map((function(e){return e.id})),c=a.join("、"),s=null==e||null===(t=e.accountDisableGray)||void 0===t?void 0:t.noAccountDisable;return Ee(Ee(Ee({},r),n),{},{stuSeatTypeList:o,stuSeatsName:c,forceLogin:s,isSpring:1===(null==e?void 0:e.springSwitch)})}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e){var t=e.canReserve,r=e.canGrap,n=e.isReschedule;return e.stopSell?"停售":t?"预约抢票":r?"抢票":n?"改签":"购票"}function Ne(e,t,r){var n=0===(null==e?void 0:e.length),i=t.ifSupportCandidate,a=t.isImmediate,o=t.canReadyBuy,c=t.etd,s=t.trainRemindActive,u=r.isReschedule,l=r.disableNightOrderTime,f=r.isDurationNight,p=u||a||f&&c<l,d=null==e?void 0:e.find((function(e){return(0,de.d)(e.stock)>0})),m=!p&&(o||!d),h=n?[]:function(e,t,r){var n=t.isImmediate,i=t.preSellFlag,a=t.ifDisableNightOrder,o=t.isSupportRemind,c=r.isReschedule,s=r.enableNightOrder,u=r.isDurationNight,l=r.supportNightIssue,f=r.disableNightOrderTime,p=!n&&!c&&!!r.enableBook,d=p&&i===V.In.EXTERNAL,m=u&&(!s||a),h=l&&t.etd<f,v=n||h?1:t.bookMinTicketNum,y=e.find((function(e){return(0,de.d)(e.stock)>=v}));return e.map((function(e){var t=e.stock,r=e.seatType,n=(0,de.d)(t),a=0===n,s=p&&i===V.In.NORMAL&&n<v,u=0===r&&(d||a&&y),l=u||!d&&!s&&a||m||h&&s,f=(t||"").indexOf("张")>=0,g="".concat(f?"仅剩":"").concat(d?"待开售":t);return De(De({},e),{},{showRemind:o&&!u&&a,trueStock:n,isDisabled:l,stockText:g,buttonText:Pe({canReserve:d,canGrap:s,isReschedule:c,stopSell:u}),priceStd:(0,H.bd)(e.discountPrice||e.price)||"",canReserve:d,canGrap:s,stockWarning:f,showTransferTip:s&&n>0})}))}(e||[],De(De({},t),{},{isSupportRemind:!m&&!p}),r),v=!a&&h.some((function(e){return e.showTransferTip}));return{trainRemindActive:s,isApiError:n,seatList:h,showRemindBar:m,showTransferTip:v,showCandidateTip:!a&&!r.isReschedule&&i>0&&!v}}var Ce=r(6479),Ie=r.n(Ce),Re=["priceList","trainNo","segmentNo"];function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e){return(e.connectTrains||[]).map((function(e){var t=e.startStation,r=e.endStation,n=e.trainInfoList,i=void 0===n?[]:n,a=e.duration,o=e.price,c=e.discountPrice,s=e.discount,u=e.changeStation,l=e.layover,f=e.tag,p=e.requestId,d=e.id,m=e.tagId,h=i[0]||{},v=i[i.length-1]||{},y=h.etd,g=v.eta,b=Se(y),O=Se(g),S=g-y,T=c||o;return{startStation:t,endStation:r,etd:y,changeStation:u,duration:a,layover:l,periodDay:Oe(y,g),minPrice:T,minPriceStd:(0,H.bd)(T),etdSplit:b,etaSplit:O,trainPeriod:S,tag:f,couponValueStd:s>0?(0,H.bd)(s):"",segmentList:i.map((function(e){var t=e.priceList,r=e.trainNo,n=e.segmentNo,i=Ie()(e,Re),a=t.map((function(e){return Ae(Ae({},e),{},{trueStock:(0,de.d)(e.stock),stockWarning:(e.stock||"").indexOf("张")>=0})})).slice(0,3);return Ae(Ae({},i),{},{trainNo:r,segmentNo:"第".concat(n,"程"),seatList:a})})),hasTicket:!0,showType:fe,requestId:p,routeId:d,tagId:m}}))}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Me="api/mayflower/train/query/ticket/query_ticket_info",Ze="api/mayflower/train/query/dict/query_dict_config_info",qe="api/mayflower/train/query/ticket/query_train_price",He="api/mayflower/train/query/ticket/query_connect_trains",Ue="api/mayflower/covid/query_covid_info",Ve=function(e){p()(i,e);var t,r,n=Be(i);function i(){return s()(this,i),n.apply(this,arguments)}return l()(i,[{key:"queryTicketInfo",value:function(e){return e=Fe(Fe({},e),{},{departDate:e.departDate+"",isStartCity:e.isStartCity+"",isEndCity:e.isEndCity+"",isChange:e.isChange+""}),this.post({url:Me,params:e,risk:!0,customConfig:{needTimeoutRetry:!0,retry:3,fallbackCSR:!0},extrats:{encodeNativeResponse:!1},defaultValue:{}})}},{key:"queryConfigInfo",value:function(){return this.post({url:Ze,customDataHandler:we,defaultValue:{}})}},{key:"querySeatList",value:function(e){var t=e.params,r=e.trainInfo,n=e.commonInfo;return B.$.now()-n.listRequestTime<3e4&&!n.forceSeatRefresh?Ne(r.priceList,r,n):this.post({url:qe,params:t,risk:!0,customDataHandler:function(e){return r.trainRemindActive=!!e.trainRemindActive,Ne(e.priceList||[],r,n)},defaultValue:{}})}},{key:"queryTransitList",value:(r=D()(j().mark((function e(t){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.asyncQuerypost({params:t,url:He,defaultValue:{}});case 2:return r=e.sent,e.abrupt("return",Le(r));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"queryCovidInfo",value:(t=D()(j().mark((function e(t){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post({params:t,url:Ue,defaultValue:{}});case 2:return r=e.sent,e.abrupt("return",(n=void 0,i=void 0,a=void 0,o=void 0,c=void 0,a=(i=r||{}).policyList,o=i.outPolicyDate,c=i.fromToCity,{policyList:(n=a,(n||[]).map((function(e){var t=e||{};return{tag:t.tag||"",contentList:t.content||[]}}))),outPolicyDate:"更新时间：".concat(o||""),covidTip:c?"防疫提醒：点击查看".concat(c,"的防疫政策"):"",popTitle:"".concat(c||"","防疫政策")}));case 4:case"end":return e.stop()}var n,i,a,o,c}),e,this)}))),function(e){return t.apply(this,arguments)})}]),i}(q.b),ze=r(36792),Ge=r(54268),Xe=r(48144),$e=r(57686),We=function(){function e(){s()(this,e)}return l()(e,null,[{key:"allParams",get:function(){return(0,$e.ZS)()||{}}},{key:"referPageName",get:function(){return(0,$e.XX)("refer_page_name")||""}},{key:"referPageElement",get:function(){return(0,$e.XX)("refer_page_element")||""}},{key:"referTimelineUid",get:function(){return(0,$e.XX)("refer_timeline_uid")||0}},{key:"referTimelineUin",get:function(){return(0,$e.XX)("refer_timeline_uin")||0}},{key:"referShareChannel",get:function(){return(0,$e.XX)("refer_share_channel")||""}},{key:"from",get:function(){return(0,$e.XX)("from")||""}},{key:"isBack",get:function(){return(0,$e.XX)("is_back")||""}},{key:"code",get:function(){return(0,$e.XX)("code")||""}},{key:"startStation",get:function(){return(0,$e.XX)("start_station")||""}},{key:"endStation",get:function(){return(0,$e.XX)("end_station")||""}},{key:"departDate",get:function(){return(0,$e.XX)("depart_date")||""}},{key:"ifTime",get:function(){return(0,$e.XX)("if_time")||null}},{key:"ifPrice",get:function(){return(0,$e.XX)("if_price")||null}},{key:"ifStock",get:function(){return(0,$e.XX)("if_stock")||null}},{key:"ifTrainType",get:function(){return(0,$e.XX)("if_train_type")||null}},{key:"ifStartStation",get:function(){return(0,$e.XX)("if_start_station")||null}},{key:"ifEndStation",get:function(){return(0,$e.XX)("if_end_station")||null}},{key:"ifDuration",get:function(){return(0,$e.XX)("if_duration")||null}},{key:"tpOriginDepartDate",get:function(){return(0,$e.XX)("_tp_origin_depart_time")||null}}]),e}(),Qe={img:(0,Ge.H)("/trip/train/right_pointer.png"),width:22,height:14,y_offset:-2,font:18,margin:[4,0,6,0]};function Je(e){var t=e.showStartStation,r=e.showEndStation,n=e.color,i=e.middleIcon,a=We.startStation,o=We.endStation;if(t&&r&&t!==r||(t=a,r=o),t&&r){var c="".concat(t,"-").concat(r),s=n||"#151516",u=i||Qe;if(M.ZP.isNativePlatform&&M.ZP.isVersionGreaterThanEqual("4.29.0")){var l=window.screen.width<=320?15:18;(0,ze.E3)({desc:[{txt:t,color:s,font:l,y_offset:-2,text_style:"bold"},u,{txt:r,color:s,font:l,y_offset:-2,text_style:"bold"}],hide_line:!0})}else(0,Xe.r)(c)}}var Ke=r(319),Ye=r.n(Ke),et=r(1607),tt=r(96237);function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var it=function(){function e(){s()(this,e)}return l()(e,null,[{key:"replaceUrl",value:function(e){this.replaceParams=nt(nt({depart_date:We.departDate,if_time:We.ifTime,if_price:We.ifPrice,if_stock:We.ifStock,if_train_type:We.ifTrainType,if_start_station:We.ifStartStation,if_end_station:We.ifEndStation,if_duration:We.ifDuration},this.replaceParams),e),et.ZP.replaceQuery(this.replaceParams),(0,$e.FD)(this.replaceParams),this.replaceParams.depart_date&&!We.departDate&&(0,tt.e)({errorMsg:"train_list replaceUrl no departDate",stores:{page_url:location.href}})}}]),e}();it.replaceParams={};function at(e,t){return["startStation","index","trainNo","endStation","etd","eta"].every((function(r){return(null==e?void 0:e[r])===(null==t?void 0:t[r])}))}var ot=r(21165),ct=r.n(ot),st=r(81506),ut=r.n(st),lt=(r(67268),r(14102)),ft=r(77181),pt=r(80644),dt=r(26372),mt=[{value:"23",name:"高铁/动车"},{value:"1",name:"普通"}],ht=[{value:"1",name:"00:00-06:00"},{value:"2",name:"06:00-12:00"},{value:"3",name:"12:00-18:00"},{value:"4",name:"18:00-24:00"}],vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{value:e,name:"".concat(e,"站")}}))};function yt(e,t){var r={};return Object.values(Y).forEach((function(n){switch(n){case Y.TRAIN:r[n]={title:"车型选择",type:"checkbox",data:mt};break;case Y.DURATION:r[n]={title:"出发时间",type:"checkbox",data:ht};break;case Y.START:r[n]={title:"出发车站",type:"checkbox",data:vt(e)};break;case Y.END:r[n]={title:"到达车站",type:"checkbox",data:vt(t)}}})),r}var gt=r(93054);function bt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ot(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw a}}}}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var St,Tt,Et,kt,wt,_t,Dt,Pt,Nt,Ct,It,Rt,jt,At,Lt,xt,Ft,Bt,Mt,Zt,qt,Ht,Ut,Vt,zt=216e5;function Gt(e){return function(t,r){var n=t[e.key],i=r[e.key];return isNaN(Number(n))||isNaN(Number(i))||(n=Number(n),i=Number(i)),e.isUp?n-i:i-n}}function Xt(e,t,r,n){var i=n-r;if(!(i<=1)){var a=n+r>>1;if(Xt(e,t,r,a),Xt(e,t,a,n),!(t(e[a-1],e[a])<=0)){for(var o=[],c=r,s=a;o.length<i;)c===a||s!==n&&t(e[c],e[s])>0?(o.push(e[s]),s++):(o.push(e[c]),c++);e.splice.apply(e,[r,i].concat(o))}}}function $t(e,t){if(!Array.isArray(e))throw new Error("mergeSort的参数必须为数组");return Xt(e,t,0,e.length),e}function Wt(e,t){if(0===e.length)return!0;return e.some((function(e){return function(e){var r=B.$.dateStartTime(t);return t>=r+(e-1)*zt&&t<r+e*zt}(e)}))}function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Yt,er,tr,rr,nr,ir,ar,or,cr,sr,ur,lr,fr,pr,dr,mr,hr,vr,yr,gr,br,Or,Sr,Tr,Er,kr,wr,_r,Dr,Pr,Nr,Cr,Ir,Rr,jr="23",Ar="1",Lr=(St=A.aD.bound,Tt=A.aD.bound,Et=A.aD.bound,kt=A.aD.bound,wt=A.aD.bound,_t=A.aD.bound,Dt=A.aD.bound,Pt=A.aD.bound,Nt=A.aD.bound,Ct=A.aD.bound,It=function(e){p()(r,e);var t=Kt(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),ct()(e,"trainTypeFilterStatus",Rt,ut()(e)),ct()(e,"durationFilterStatus",jt,ut()(e)),ct()(e,"startStationFilterStatus",At,ut()(e)),ct()(e,"endStationFilterStatus",Lt,ut()(e)),ct()(e,"filterShowAll",xt,ut()(e)),ct()(e,"initativeSortFilter",Ft,ut()(e)),ct()(e,"isTimeTabActive",Bt,ut()(e)),ct()(e,"isPriceTabActive",Mt,ut()(e)),ct()(e,"isStockTabActive",Zt,ut()(e)),ct()(e,"selectedTimeSortMenu",qt,ut()(e)),ct()(e,"stockTabSortOpt",Ht,ut()(e)),ct()(e,"timeAndPriceTabSortOpt",Ut,ut()(e)),ct()(e,"showFilterPopup",Vt,ut()(e)),e.checkFilterStatusIsEmpty=function(){return Object.values(Y).every((function(t){return 0===e[ee[t]].length}))},e.getEmptyFilterStatus=function(){return Object.values(Y).reduce((function(e,t){return e[t]={},e}),{})},e.updateStoreTabSortOpt=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){if(t){var r=t.split("-"),n=r[0],i=1===parseInt(r[1],10);e.updateTimeAndPriceTabSortOpt(t,n,i),e.updateStockTabSortOpt(t,n,i)}}))},e.filterFunc=function(t,r){return r.every((function(r){var n,i,a=2===t.trainType||3===t.trainType?jr:Ar;switch(r){case"trainTypeFilterStatus":i=(null===(n=e[r])||void 0===n?void 0:n.indexOf(a))>-1;break;case"durationFilterStatus":i=Wt(e[r],t.etd);break;default:i=!0}return i}))},e.filterTrainTicketList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[];return Object.values(Y).forEach((function(t){var n=ee[t];(e[n]||[]).length>0&&r.push(n)})),0===r.length?t:t.filter((function(t){return e.filterFunc(t,r)}))},e.sortTrainTicketList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=["etd","trainPeriod","minPrice","hasTicket"],i=JSON.parse(JSON.stringify(t)).slice();return i=e.mergeRecommendList(i||[],r),n.includes(e.timeAndPriceTabSortOpt.key)&&(i=$t(i,Gt(e.timeAndPriceTabSortOpt))),n.includes(e.stockTabSortOpt.key)&&(i=$t(i,Gt(e.stockTabSortOpt))),i},e}return l()(r,[{key:"isFilterTabActive",get:function(){var e=this;return Object.values(ee).some((function(t){return(e[t]||[]).length>0}))}},{key:"startStationEmpty",get:function(){return 0===this.startStationFilterStatus.length}},{key:"endStationEmpty",get:function(){return 0===this.endStationFilterStatus.length}},{key:"setInitativeStatus",value:function(){this.initativeSortFilter=1}},{key:"getFilterStatus",value:function(){var e=this,t={};return Object.values(Y).forEach((function(r){var n=ee[r];t[r]={},(e[n]||[]).forEach((function(e){t[r][e]=!0}))})),t}},{key:"getHasFilterStation",value:function(e,t){return null==t?void 0:t.some((function(t){return null==e?void 0:e.includes(t)}))}},{key:"getFilteStatusActive",value:function(e){var t,r,n=e||{},i=n.startStationList,a=n.endStationList;return!!(null!==(t=this.durationFilterStatus)&&void 0!==t&&t.length||null!==(r=this.trainTypeFilterStatus)&&void 0!==r&&r.length)||this.isFilterTabActive&&(this.getHasFilterStation(i,this.startStationFilterStatus)||this.getHasFilterStation(a,this.endStationFilterStatus))}},{key:"syncFilterStatus2Store",value:function(e,t){var r=this,n=!1,i=!1;return this.filterShowAll=t,this.setInitativeStatus(),Object.values(Y).forEach((function(t){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return Object.keys(e).forEach((function(r){e[r]&&t.push(r)})),t}(e[t]),o=ee[t];o&&!function(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var r,n=JSON.parse(JSON.stringify(t)),i=bt(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=null==n?void 0:n.indexOf(a);if(!(o>-1))return!1;n.splice(o,1)}}catch(e){i.e(e)}finally{i.f()}return!0}return!1}(a,r[o].slice())&&(r[o]=Ye()(a),n=!0,t!==Y.START&&t!==Y.END||(i=!0))})),{isChange:n,isStationChange:i}}},{key:"updateTimeAndPriceTabSortOpt",value:function(e,t,r){["etd","trainPeriod","minPrice"].includes(t)&&(["etd","trainPeriod"].includes(t)&&(this.isTimeTabActive=!0,this.isPriceTabActive=Q,this.selectedTimeSortMenu=W[e]),["minPrice"].includes(t)&&(this.isTimeTabActive=!1,this.isPriceTabActive=r?K:J),this.timeAndPriceTabSortOpt={key:t,isUp:r})}},{key:"updateStockTabSortOpt",value:function(e,t,r){if("hasTicket"===t){if(r)return this.stockTabSortOpt={key:t,isUp:!1},void(this.isStockTabActive=!0);this.isStockTabActive=!1,this.stockTabSortOpt={key:null,isUp:!1}}}},{key:"stationSync2Filter",value:function(e){var t=parseInt(I()(e,"is_start_city"),10)||0,r=parseInt(I()(e,"is_end_city"),10)||0;t||this.startStationFilterStatus.slice()[0]||(this.startStationFilterStatus[0]=I()(e,"start_station")||""),r||this.endStationFilterStatus.slice()[0]||(this.endStationFilterStatus[0]=I()(e,"end_station")||"")}},{key:"initSortAndFilterFactorByUrl",value:function(e){var t=this;Object.values(Y).forEach((function(r){var n=I()(e,r,"");t[ee[r]]=function(e,t){if(!e)return[];try{var r=JSON.parse(e);return Ye()(r)}catch(r){(0,tt.e)({error:r,subOp:"trip_list_error",errorMsg:"筛选参数初始化错误",stores:{params:"".concat(t,"=").concat(e,"]")}})}return[]}(n,r)})),this.filterShowAll=parseInt(I()(e,"if_filter_all"),10)||0,this.initativeSortFilter=parseInt(I()(e,"initative_sort_filter"))||0,!this.filterShowAll&&this.stationSync2Filter(e);var r=I()(e,"if_time")||"",n=I()(e,"if_price")||"",i=I()(e,"if_stock")||"";this.updateStoreTabSortOpt(r,n,i)}},{key:"mergeRecommendList",value:function(e,t){if(this.initativeSortFilter)return e;if(e.findIndex((function(e){return!!e.recommendTag}))>-1){var r,n=[];e.forEach((function(e,t){e.recommendTag&&(n.push(Jt(Jt({},e),{},{useRecommendBg:!0})),r=0===t,e.recommendTag="",e.showRecommendTag=!1)}));var i=e.length>0&&t;(e.length<=4||r||i)&&(e=e.filter((function(e){return!e.recommendTag}))),e=n.concat(e)}return e}},{key:"toggleFilterPopup",value:function(){this.showFilterPopup=!this.showFilterPopup}}]),r}(gt.z),Rt=N()(It.prototype,"trainTypeFilterStatus",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jt=N()(It.prototype,"durationFilterStatus",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),At=N()(It.prototype,"startStationFilterStatus",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Lt=N()(It.prototype,"endStationFilterStatus",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xt=N()(It.prototype,"filterShowAll",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ft=N()(It.prototype,"initativeSortFilter",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bt=N()(It.prototype,"isTimeTabActive",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Mt=N()(It.prototype,"isPriceTabActive",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Q}}),Zt=N()(It.prototype,"isStockTabActive",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt=N()(It.prototype,"selectedTimeSortMenu",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"最早出发"}}),Ht=N()(It.prototype,"stockTabSortOpt",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{key:null,isUp:!1}}}),Ut=N()(It.prototype,"timeAndPriceTabSortOpt",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{key:null,isUp:!1}}}),Vt=N()(It.prototype,"showFilterPopup",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N()(It.prototype,"isFilterTabActive",[A.Fl],Object.getOwnPropertyDescriptor(It.prototype,"isFilterTabActive"),It.prototype),N()(It.prototype,"startStationEmpty",[A.Fl],Object.getOwnPropertyDescriptor(It.prototype,"startStationEmpty"),It.prototype),N()(It.prototype,"endStationEmpty",[A.Fl],Object.getOwnPropertyDescriptor(It.prototype,"endStationEmpty"),It.prototype),N()(It.prototype,"setInitativeStatus",[St],Object.getOwnPropertyDescriptor(It.prototype,"setInitativeStatus"),It.prototype),N()(It.prototype,"getFilterStatus",[Tt],Object.getOwnPropertyDescriptor(It.prototype,"getFilterStatus"),It.prototype),N()(It.prototype,"getFilteStatusActive",[Et],Object.getOwnPropertyDescriptor(It.prototype,"getFilteStatusActive"),It.prototype),N()(It.prototype,"syncFilterStatus2Store",[kt],Object.getOwnPropertyDescriptor(It.prototype,"syncFilterStatus2Store"),It.prototype),N()(It.prototype,"updateTimeAndPriceTabSortOpt",[wt],Object.getOwnPropertyDescriptor(It.prototype,"updateTimeAndPriceTabSortOpt"),It.prototype),N()(It.prototype,"updateStockTabSortOpt",[_t],Object.getOwnPropertyDescriptor(It.prototype,"updateStockTabSortOpt"),It.prototype),N()(It.prototype,"stationSync2Filter",[Dt],Object.getOwnPropertyDescriptor(It.prototype,"stationSync2Filter"),It.prototype),N()(It.prototype,"initSortAndFilterFactorByUrl",[Pt],Object.getOwnPropertyDescriptor(It.prototype,"initSortAndFilterFactorByUrl"),It.prototype),N()(It.prototype,"mergeRecommendList",[Nt],Object.getOwnPropertyDescriptor(It.prototype,"mergeRecommendList"),It.prototype),N()(It.prototype,"toggleFilterPopup",[Ct],Object.getOwnPropertyDescriptor(It.prototype,"toggleFilterPopup"),It.prototype),It),xr=["trainInfoList","seatTypeList","trainTypeList"];function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Zr,qr,Hr,Ur,Vr,zr,Gr,Xr,$r,Wr,Qr,Jr,Kr,Yr,en,tn,rn,nn,an,on,cn=(Yt=A.LO.shallow,er=A.LO.shallow,tr=A.LO.shallow,rr=(0,ft.$)(Lr),nr=A.aD.bound,ir=A.aD.bound,ar=A.aD.bound,or=A.aD.bound,cr=function(e){p()(r,e);var t=Mr(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).configInfo={},ct()(e,"isDataLoading",sr,ut()(e)),ct()(e,"firstRenderEnding",ur,ut()(e)),ct()(e,"selectedDate",lr,ut()(e)),ct()(e,"originDepartTime",fr,ut()(e)),ct()(e,"ticketInfo",pr,ut()(e)),ct()(e,"trainInfoList",dr,ut()(e)),ct()(e,"transitTranList",mr,ut()(e)),ct()(e,"aimStartStation",hr,ut()(e)),ct()(e,"aimEndStation",vr,ut()(e)),ct()(e,"showTrainList",yr,ut()(e)),ct()(e,"isFinishLoading",gr,ut()(e)),ct()(e,"showCityDuration",br,ut()(e)),ct()(e,"isReturnTicket",Or,ut()(e)),ct()(e,"isReturnCloseCalendar",Sr,ut()(e)),ct()(e,"isApiError",Tr,ut()(e)),ct()(e,"errorMsg",Er,ut()(e)),ct()(e,"aimTipBottom",kr,ut()(e)),ct()(e,"diffTipBottom",wr,ut()(e)),ct()(e,"selectedTrain",_r,ut()(e)),ct()(e,"seatInfo",Dr,ut()(e)),ct()(e,"forceSeatRefresh",Pr,ut()(e)),ct()(e,"covidInfo",Nr,ut()(e)),ct()(e,"showCovidPop",Cr,ut()(e)),ct()(e,"grayMap",Ir,ut()(e)),ct()(e,"sortAndFilterStore",Rr,ut()(e)),e.isValidTrain=function(e){return e.preSellFlag<V.In.STOP},e.isAimTrain=function(t){var r=e.sortAndFilterStore,n=r.startStationFilterStatus,i=r.endStationFilterStatus;return(0===n.length||(null==n?void 0:n.includes(t.startStation)))&&(0===i.length||(null==i?void 0:i.includes(t.endStation)))},e.closeReturnCalendarDlg=function(){e.isReturnCalendarDlg=!1},e.getSearchParams=function(){return{startStation:e.searchStartStation,endStation:e.searchEndStation,departDate:e.selectedDate,ifTrainType:e.ifTrainType||"",isStartCity:e.isStartCity,isEndCity:e.isEndCity,isChange:e.isReschedule}},e.getSectionMap=function(){var t=e.ticketInfo;return yt(t.startStationList,t.endStationList)},e}return l()(r,[{key:"hasNoFilterResult",get:function(){return this.trainInfoList&&0===this.showTrainList.length&&!this.isDataLoading}},{key:"isTrainInfoListEmpty",get:function(){var e,t;return!(null!==(e=this.trainInfoList)&&void 0!==e&&e.length||null!==(t=this.transitTranList)&&void 0!==t&&t.length)}},{key:"showFrame",get:function(){return!this.firstRenderEnding||this.isDataLoading}},{key:"showFloating",get:function(){var e,t;if(this.isReschedule)return!1;var r=null===(e=this.transitTranList)||void 0===e?void 0:e.length,n=(null===(t=this.showTrainList)||void 0===t?void 0:t.length)-r>=5;return r>0&&n}},{key:"hasFilterStation",get:function(){var e=this.sortAndFilterStore,t=e.startStationFilterStatus,r=e.endStationFilterStatus,n=this.ticketInfo,i=n.startStationList,a=n.endStationList;return((null==i?void 0:i.length)!==(null==t?void 0:t.length)||(null==a?void 0:a.length)!==(null==r?void 0:r.length))&&((null==t?void 0:t.length)>0||(null==r?void 0:r.length)>0)}},{key:"aimTrainList",get:function(){var e=this;return this.hasFilterStation?(this.trainInfoList||[]).filter((function(t){return e.isValidTrain(t)&&e.isAimTrain(t)})):[]}},{key:"otherTrainList",get:function(){var e=this;return(this.trainInfoList||[]).filter((function(t){return e.hasFilterStation?e.isValidTrain(t)&&!e.isAimTrain(t):e.isValidTrain(t)}))}},{key:"unvalidTrainList",get:function(){var e=this;return(this.trainInfoList||[]).filter((function(t){return!e.isValidTrain(t)}))}},{key:"sortAndFilter",value:function(e,t){var r=this.sortAndFilterStore.filterTrainTicketList(e);return this.sortAndFilterStore.sortTrainTicketList(r,t)}},{key:"showAimTip",get:function(){return this.sortAndFilter(this.aimTrainList).length>0}},{key:"transitTip",get:function(){var e,t;return null!==(e=this.trainInfoList)&&void 0!==e&&e.length?(null===(t=this.trainInfoList)||void 0===t?void 0:t.length)<2?"当前线路车次较少，为您推荐中转方案":"为您推荐中转方案":"当前线路无直达车次，为您推荐中转方案"}},{key:"finalTrainList",get:function(){return function(e,t,r,n){t=t||[];var i=(e=e||[]).length>0,a=t.length>0,o=(null==r?void 0:r.length)>0;i&&e.unshift({showType:se,isAimTip:!0});var c=!i&&!a&&n;(t.length>0||c)&&t.unshift({showType:se,isMiddle:i,onlyFlight:c}),n&&(i?e:t).splice(c?1:0,0,{showType:ue,onlyFlight:c});var s=e.concat(t);return o&&r.unshift({showType:le}),s.concat(r)}(this.sortAndFilter(this.aimTrainList),this.sortAndFilter(this.otherTrainList,(this.aimTrainList||[]).length>0).concat(this.unvalidTrainList),this.sortAndFilterStore.sortTrainTicketList(this.transitTranList,!0),!!this.ticketInfo.flightDiversionVo)}},{key:"isAimTipFixed",get:function(){return!this.showNightTip&&!this.ticketInfo.flightDiversionVo}},{key:"isOtherTipFixed",get:function(){return this.isAimTipFixed&&!this.showAimTip}},{key:"seatParams",get:function(){var e=this.selectedTrain||{},t=e.startStation,r=e.endStation,n=e.etd,i=e.trainNo;return{startStationQualifier:t,endStationQualifier:r,startStation:this.searchStartStation,endStation:this.searchEndStation,departDate:n,trainNo:i,isChange:this.isReschedule}}},{key:"isDurationNight",get:function(){var e=this.configInfo,t=e.saleBeginTime,r=e.saleEndTime;return!(0,lt.L)(t||F.oP[0],r||F.oP[1])}},{key:"commonInfo",get:function(){return Br(Br({},this.ticketInfo),{},{isReschedule:this.isReschedule,isDurationNight:this.isDurationNight,listRequestTime:this.beforeRequestTime,supportNightIssue:this.showNightTip,forceSeatRefresh:this.forceSeatRefresh})}},{key:"toggleCovidPop",value:function(){this.showCovidPop=!this.showCovidPop}},{key:"setTicketInfo",value:function(e){e.trainInfoList,e.seatTypeList,e.trainTypeList;var t=Ie()(e,xr);this.ticketInfo=t}},{key:"tcashierParams",get:function(){var e=this.selectedTrain||{},t=e.startStation,r=e.endStation,n=e.etd,i=e.trainNo,a=e.useIdCardIn,o={searchStartStation:this.searchStartStation,searchEndStation:this.searchEndStation,filterStartStation:this.searchStartStation,filterEndStation:this.searchEndStation,startStation:t,endStation:r,departDate:n,trainNo:i,useIdCardIn:a};return Br(Br({},(0,dt.xZ)(o)),this.tpParams)}},{key:"shareInfo",get:function(){var e=this.selectedDate;return{title:"【多多火车票】买火车票就上拼多多",shareURL:"train_list.html?start_station=".concat(this.searchStartStation,"&end_station=").concat(this.searchEndStation,"&depart_date=").concat(e),message:"".concat(B.$.chineseMD(e),"出发 ").concat(this.searchStartStation,"—").concat(this.searchEndStation,"选择你的出行车次"),enabled_channels:[0,7]}}},{key:"showNoticePopup",get:function(){return!this.hasShowNotice&&!this.isDataLoading&&!this.isReturnTicket}},{key:"showNightTip",get:function(){var e;return this.isDurationNight&&(null===(e=this.configInfo)||void 0===e?void 0:e.nightIssueTicketGray)}},{key:"setTipBottom",value:function(e,t){this[e]=t}}]),r}(pt._),sr=N()(cr.prototype,"isDataLoading",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ur=N()(cr.prototype,"firstRenderEnding",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lr=N()(cr.prototype,"selectedDate",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fr=N()(cr.prototype,"originDepartTime",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pr=N()(cr.prototype,"ticketInfo",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),dr=N()(cr.prototype,"trainInfoList",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mr=N()(cr.prototype,"transitTranList",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),hr=N()(cr.prototype,"aimStartStation",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vr=N()(cr.prototype,"aimEndStation",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yr=N()(cr.prototype,"showTrainList",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gr=N()(cr.prototype,"isFinishLoading",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),br=N()(cr.prototype,"showCityDuration",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Or=N()(cr.prototype,"isReturnTicket",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sr=N()(cr.prototype,"isReturnCloseCalendar",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tr=N()(cr.prototype,"isApiError",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Er=N()(cr.prototype,"errorMsg",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),kr=N()(cr.prototype,"aimTipBottom",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wr=N()(cr.prototype,"diffTipBottom",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_r=N()(cr.prototype,"selectedTrain",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Dr=N()(cr.prototype,"seatInfo",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pr=N()(cr.prototype,"forceSeatRefresh",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nr=N()(cr.prototype,"covidInfo",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Cr=N()(cr.prototype,"showCovidPop",[A.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ir=N()(cr.prototype,"grayMap",[tr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Rr=N()(cr.prototype,"sortAndFilterStore",[rr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N()(cr.prototype,"hasNoFilterResult",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"hasNoFilterResult"),cr.prototype),N()(cr.prototype,"isTrainInfoListEmpty",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"isTrainInfoListEmpty"),cr.prototype),N()(cr.prototype,"showFrame",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"showFrame"),cr.prototype),N()(cr.prototype,"showFloating",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"showFloating"),cr.prototype),N()(cr.prototype,"hasFilterStation",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"hasFilterStation"),cr.prototype),N()(cr.prototype,"aimTrainList",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"aimTrainList"),cr.prototype),N()(cr.prototype,"otherTrainList",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"otherTrainList"),cr.prototype),N()(cr.prototype,"unvalidTrainList",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"unvalidTrainList"),cr.prototype),N()(cr.prototype,"sortAndFilter",[nr],Object.getOwnPropertyDescriptor(cr.prototype,"sortAndFilter"),cr.prototype),N()(cr.prototype,"transitTip",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"transitTip"),cr.prototype),N()(cr.prototype,"finalTrainList",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"finalTrainList"),cr.prototype),N()(cr.prototype,"isAimTipFixed",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"isAimTipFixed"),cr.prototype),N()(cr.prototype,"toggleCovidPop",[ir],Object.getOwnPropertyDescriptor(cr.prototype,"toggleCovidPop"),cr.prototype),N()(cr.prototype,"setTicketInfo",[ar],Object.getOwnPropertyDescriptor(cr.prototype,"setTicketInfo"),cr.prototype),N()(cr.prototype,"shareInfo",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"shareInfo"),cr.prototype),N()(cr.prototype,"showNoticePopup",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"showNoticePopup"),cr.prototype),N()(cr.prototype,"showNightTip",[A.Fl],Object.getOwnPropertyDescriptor(cr.prototype,"showNightTip"),cr.prototype),N()(cr.prototype,"setTipBottom",[or],Object.getOwnPropertyDescriptor(cr.prototype,"setTipBottom"),cr.prototype),cr);function sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var fn=(Zr=A.aD.bound,qr=A.aD.bound,Hr=A.aD.bound,Ur=A.aD.bound,Vr=A.aD.bound,zr=A.aD.bound,Gr=A.aD.bound,Xr=A.aD.bound,$r=A.aD.bound,Wr=A.aD.bound,Qr=A.aD.bound,Jr=A.aD.bound,Kr=A.aD.bound,Yr=A.aD.bound,en=A.aD.bound,tn=A.aD.bound,rn=A.aD.bound,nn=A.aD.bound,an=A.aD.bound,on=function(e){p()(u,e);var t,r,n,i,a,o,c=ln(u);function u(){var e;s()(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=c.call.apply(c,[this].concat(r))).initQueries=function(t){var r=t.query;e.sortAndFilterStore.initSortAndFilterFactorByUrl(r);var n={};Object.keys(r).forEach((function(e){/^_tp_/.test(e)&&(n[e]=r[e])}));var i=B.$.now()+F.xR,a=I()(r,"source",null),o=a===ie,c=o||a===ne;return{tpParams:n,originTrainNo:I()(r,"origin_train_no",null),isReschedule:!!n._tp_order_travel_sns,originDepartTime:parseInt(I()(r,"_tp_origin_depart_time"),10)||null,searchStartStation:I()(r,"start_station")||"",searchEndStation:I()(r,"end_station")||"",isStartCity:parseInt(I()(r,"is_start_city"),10)||0,isEndCity:parseInt(I()(r,"is_end_city"),10)||0,selectedDate:o?0:parseInt(I()(r,"depart_date",""),10)||i,itemIndex:parseInt(I()(r,"item_index"),10)||0,ifTrainType:I()(r,"if_train_type",null),ifStudentTicket:parseInt(I()(r,"_tp_order_if_student_ticket"),10)||0,source:a,isReturnTicket:o,isReturnCloseCalendar:c,isReturnCalendarDlg:o,anchor:I()(r,"anchor")||"",hasShowNotice:1===parseInt(I()(r,"has_show_notice",0))}},e.initGrayMap=function(e){var t=(0,Z.KQ)("trainListSsr",e)||{};return{grayMap:{forceSsr:!!t.listForceSsr,skipForceLogin:(0,Z.KQ)("skipForceLogin",e),checkoutPreQueryTickets:!(null==t||!t.checkoutPreQueryTickets)}}},e.initTrainList=D()(j().mark((function t(){var r,n,i,a,o,c,s,u;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isReturnTicket){t.next=3;break}return e.firstRenderEnding=!0,t.abrupt("return",{});case 3:return r=e.getSearchParams(),!e.isReschedule&&e.queryTransitList(),n=[e.$service.queryTicketInfo(r),e.queryCovidInfo()],t.next=8,Promise.all(n);case 8:return i=t.sent,a=w()(i,1),o=a[0],e.isApiError=o.isApiError,e.errorMsg=e.isApiError?o.errorMsg||re:"",e.synchroConfiginfo(o.enableBook),e.trainInfoList=ke(o,e.isReschedule),e.setTicketInfo(o),e.classifyTrainList(),c=e.ticketInfo,s=c.startCityName,u=c.endCityName,e.showCityDuration=s&&u&&s!==u?"".concat(s,"-").concat(u):"",e.firstRenderEnding=!0,t.abrupt("return",{});case 21:case"end":return t.stop()}}),t)}))),e.getDictAndCoupon=D()(j().mark((function t(){var r,n,i,a,o,c,s,u,l;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[e.$service.queryConfigInfo()],e.grayMap.forceSsr&&r.push(e.initTrainList()),t.next=4,Promise.all(r);case 4:return n=t.sent,i=w()(n,1),a=i[0],o=B.$.buyDate(),c=o.start,s=o.end,u=o.book,l=un(un({},a),{},{startDepartDate:a.startDepartDate||c,endDepartDate:a.endDepartDate||s,endBookDate:a.endBookDate||u}),e.isReschedule&&(l.endBookDate=l.endDepartDate),t.abrupt("return",{configInfo:l});case 11:case"end":return t.stop()}}),t)}))),e.customSetPageTitle=function(){var t=e.sortAndFilterStore,r=t.startStationFilterStatus,n=t.endStationFilterStatus,i=1===r.length,a=1===n.length,o=r.slice()[0],c=n.slice()[0],s=e.ticketInfo,u=s.startCityName,l=s.endCityName;Je({showStartStation:i?o+"站":u,showEndStation:a?c+"站":l})},e.updateTabSortOpt=function(t,r){if(!e.isTrainInfoListEmpty){var n="",i={};e.sortAndFilterStore.setInitativeStatus();var a=e.sortAndFilterStore,o=a.isPriceTabActive,c=a.isStockTabActive,s=a.updateStoreTabSortOpt;if(t===G&&r&&(i={if_time:n=r,if_price:null}),t===X)i={if_time:null,if_price:n="minPrice-".concat(o===K?0:1)};t===$&&(i={if_stock:n=c?"hasTicket-0":"hasTicket-1"}),s(n),it.replaceUrl(un(un({},i),{},{initative_sort_filter:1})),e.sortTrainInfoList()}},e.formatUrlParams=function(){var t={};Object.values(Y).forEach((function(r){var n=ee[r],i=e.sortAndFilterStore[n].slice();t[r]=i.length>0?JSON.stringify(i):null})),t.if_filter_all=e.sortAndFilterStore.filterShowAll,t.initative_sort_filter=e.sortAndFilterStore.initativeSortFilter;var r=e.sortAndFilterStore,n=r.startStationEmpty,i=r.endStationEmpty;return n&&(t.is_start_city=1),i&&(t.is_end_city=1),t},e.updateFilterOpt=function(t){var r=e.formatUrlParams();it.replaceUrl(r),t?e.classifyTrainList():e.sortTrainInfoList()},e}return l()(u,[{key:"initServices",value:function(e){this.$service=new Ve(e)}},{key:"queryTransitList",value:(o=D()(j().mark((function e(){var t,r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.transitTranList=[],t={startStation:this.searchStartStation,endStation:this.searchEndStation,departDate:this.selectedDate},e.next=4,this.$service.queryTransitList(t);case 4:r=e.sent,t.departDate===this.selectedDate&&(this.transitTranList=r,this.onLoadDown());case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"queryCovidInfo",value:(a=D()(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$service.queryCovidInfo({startStation:this.searchStartStation,endStation:this.searchEndStation});case 2:this.covidInfo=e.sent;case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getDatasource",value:function(){return[this.initQueries,this.initGrayMap,this.getDictAndCoupon]}},{key:"clearAnchor",value:function(){this.anchor=""}},{key:"clearCacheTrainList",value:function(){this.trainInfoList=null,this.classifyTrainList()}},{key:"clearTrainListAndSource",value:function(){this.clearCacheTrainList(),it.replaceUrl({source:ne})}},{key:"resetPageSp",value:function(e){if(this.firstRenderEnding){if(e)return clearTimeout(this.spTimer),void(this.spTimer=(0,x.Vf)());clearTimeout(this.topTimer),this.topTimer=setTimeout((function(){window.scrollTo(0,0)}),0)}}},{key:"sortTrainInfoList",value:function(){var e=this,t=(this.finalTrainList||[]).findIndex((function(t){return t.trainNo===e.anchor}));this.itemIndex=t>-1?t+1:this.itemIndex;var r=!this.firstRenderEnding&&!M.ZP.isNativePlatform||this.anchor;this.onLoadDown(!0,r),this.resetPageSp(r),this.resetSelectedTrain()}},{key:"onLoadDown",value:function(e,t){if(e){this.isFinishLoading=!1;var r=t?this.itemIndex:0;this.showTrainList=this.finalTrainList.slice(0,r)}var n=this.showTrainList.length,i=e?8:20,a=this.finalTrainList.slice(n,n+i);this.showTrainList=this.showTrainList.concat(a),(this.isFinishLoading||a.length<i)&&(this.isFinishLoading=!0)}},{key:"loadAllList",value:function(){this.showTrainList=this.finalTrainList,this.isFinishLoading=!0}},{key:"setLoadingStart",value:function(){this.isDataLoading=!0}},{key:"setLoadingFinished",value:function(){this.isDataLoading=!1}},{key:"synchroConfiginfo",value:function(e){e||(this.configInfo=un(un({},this.configInfo),{},{endBookDate:null}))}},{key:"classifyTrainList",value:function(){this.customSetPageTitle(),this.sortTrainInfoList()}},{key:"queryTrainTickets",value:function(){var e=this.getSearchParams();this.$service.queryTicketInfo(e)}},{key:"changeTicketInfo",value:(i=D()(j().mark((function e(t){var r,n,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoadingStart(),this.forceSeatRefresh=!1,this.selectedDate=t,r=this.getSearchParams(),!this.isReschedule&&this.queryTransitList(),e.next=7,this.$service.queryTicketInfo(r);case 7:if(n=e.sent,this.isApiError=n.isApiError,!n.isApiError){e.next=15;break}return i=n.errorMsg||re,(0,L.Z)(i),this.clearCacheTrainList(),this.setLoadingFinished(),e.abrupt("return");case 15:this.synchroConfiginfo(n.enableBook),this.trainInfoList=ke(n,this.isReschedule),this.setTicketInfo(n),this.classifyTrainList(),this.setLoadingFinished();case 20:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"prepareClientData",value:(n=D()(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.grayMap.forceSsr){e.next=5;break}this.customSetPageTitle(),this.resetPageSp(!M.ZP.isNativePlatform||this.anchor),e.next=7;break;case 5:return e.next=7,this.initTrainList();case 7:if(!this.isReturnTicket){e.next=10;break}return this.clearTrainListAndSource(),e.abrupt("return");case 10:this.isApiError&&(0,L.Z)(this.errorMsg||re);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onCloseNotice",value:function(){this.hasShowNotice=!0,it.replaceUrl({has_show_notice:1})}},{key:"setSelectedTrain",value:(r=D()(j().mark((function e(t){var r,n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.seatLoading||at(t,this.selectedTrain)&&!this.seatInfo.isApiError&&!this.forceSeatRefresh){e.next=10;break}return this.selectedTrain=t,this.seatInfo={},this.seatLoading=!0,r={params:this.seatParams,trainInfo:t,commonInfo:this.commonInfo},e.next=7,this.$service.querySeatList(r);case 7:null!=(n=e.sent)&&n.isApiError?((0,L.Z)("车次信息异常，请重新查询"),this.selectedTrain={},this.seatInfo={}):this.seatInfo=n,this.seatLoading=!1;case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"resetSelectedTrain",value:function(){this.selectedTrain=null,this.seatInfo=null}},{key:"remindCallback",value:function(){this.forceSeatRefresh=!0}},{key:"onWebviewBack",value:(t=D()(j().mark((function e(){var t,r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$service.queryConfigInfo();case 2:t=e.sent,r=t.forceLogin,this.configInfo.forceLogin=r;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),u}(cn),N()(on.prototype,"queryTransitList",[Zr],Object.getOwnPropertyDescriptor(on.prototype,"queryTransitList"),on.prototype),N()(on.prototype,"queryCovidInfo",[qr],Object.getOwnPropertyDescriptor(on.prototype,"queryCovidInfo"),on.prototype),N()(on.prototype,"clearAnchor",[Hr],Object.getOwnPropertyDescriptor(on.prototype,"clearAnchor"),on.prototype),N()(on.prototype,"clearCacheTrainList",[A.aD],Object.getOwnPropertyDescriptor(on.prototype,"clearCacheTrainList"),on.prototype),N()(on.prototype,"clearTrainListAndSource",[A.aD],Object.getOwnPropertyDescriptor(on.prototype,"clearTrainListAndSource"),on.prototype),N()(on.prototype,"resetPageSp",[Ur],Object.getOwnPropertyDescriptor(on.prototype,"resetPageSp"),on.prototype),N()(on.prototype,"sortTrainInfoList",[Vr],Object.getOwnPropertyDescriptor(on.prototype,"sortTrainInfoList"),on.prototype),N()(on.prototype,"onLoadDown",[zr],Object.getOwnPropertyDescriptor(on.prototype,"onLoadDown"),on.prototype),N()(on.prototype,"loadAllList",[Gr],Object.getOwnPropertyDescriptor(on.prototype,"loadAllList"),on.prototype),N()(on.prototype,"setLoadingStart",[Xr],Object.getOwnPropertyDescriptor(on.prototype,"setLoadingStart"),on.prototype),N()(on.prototype,"setLoadingFinished",[$r],Object.getOwnPropertyDescriptor(on.prototype,"setLoadingFinished"),on.prototype),N()(on.prototype,"synchroConfiginfo",[Wr],Object.getOwnPropertyDescriptor(on.prototype,"synchroConfiginfo"),on.prototype),N()(on.prototype,"classifyTrainList",[Qr],Object.getOwnPropertyDescriptor(on.prototype,"classifyTrainList"),on.prototype),N()(on.prototype,"queryTrainTickets",[Jr],Object.getOwnPropertyDescriptor(on.prototype,"queryTrainTickets"),on.prototype),N()(on.prototype,"changeTicketInfo",[Kr],Object.getOwnPropertyDescriptor(on.prototype,"changeTicketInfo"),on.prototype),N()(on.prototype,"prepareClientData",[Yr],Object.getOwnPropertyDescriptor(on.prototype,"prepareClientData"),on.prototype),N()(on.prototype,"onCloseNotice",[en],Object.getOwnPropertyDescriptor(on.prototype,"onCloseNotice"),on.prototype),N()(on.prototype,"setSelectedTrain",[tn],Object.getOwnPropertyDescriptor(on.prototype,"setSelectedTrain"),on.prototype),N()(on.prototype,"resetSelectedTrain",[rn],Object.getOwnPropertyDescriptor(on.prototype,"resetSelectedTrain"),on.prototype),N()(on.prototype,"remindCallback",[nn],Object.getOwnPropertyDescriptor(on.prototype,"remindCallback"),on.prototype),N()(on.prototype,"onWebviewBack",[an],Object.getOwnPropertyDescriptor(on.prototype,"onWebviewBack"),on.prototype),on),pn=r(67154),dn=r.n(pn),mn=r(29404),hn=r(96521);r(45697);function vn(e){var t=parseInt(e,10),r=B.$.diffNow(t);return t&&r<1728e5}function yn(e,t,r){return e<=B.$.dateEndTime(t)||r}function gn(e,t,r){return e>=B.$.dateStartTime(t)||r}function bn(e){var t=B.$.now(),r=B.$.weekDayTag(e);return B.$.isSameDay(e,t)?"今天":r}var On,Sn,Tn=r(96967),En=r(53613),kn="hxh-4fSe",wn="N3xypcWL",_n="iYKJXFeR",Dn="yHhqVE1q",Pn="UcmemfKp",Nn="JRV8S-Me",Cn="_94gwqwPb",In=["isLimited","selectedDate","logData","firstDay","lastDay"];function Rn(e){var t=e.isLimited,r=e.selectedDate,n=e.logData,i=e.firstDay,a=e.lastDay,c=Ie()(e,In),s=function(){return r?{formatSelectedDate:(0,B.e)(r).format("MM-DD"),dateTag:bn(r)}:{formatSelectedDate:"",dateTag:""}},u=(0,y.useState)(yn(r,i,t)),l=w()(u,2),f=l[0],p=l[1],d=(0,y.useState)(gn(r,a,t)),m=w()(d,2),h=m[0],v=m[1],b=(0,y.useState)(s()),O=w()(b,2),T=O[0],E=O[1],k=function(){p(yn(r,i,t)),v(gn(r,a,t))};return(0,y.useEffect)((function(){k()}),[t,a]),(0,y.useEffect)((function(){k(),E(s())}),[r]),g().createElement("div",{id:"dateHeader",className:S()(kn,c.needSticky?Pn:"")},g().createElement("div",{className:f?Dn:wn,"data-test":"date-header-back",onClick:function(){var e;if(!f){(0,En.V)(null==n||null===(e=n.backward)||void 0===e?void 0:e.page_el_sn,null==n?void 0:n.backward);var t=B.$.dayIncrease(r,!1);c.onDateChanged&&c.onDateChanged(t)}}},"前一天"),g().createElement("div",{className:S()(Nn,o()({},Cn,!t)),"data-test":"date-header-calendar",onClick:function(){var e;t||((0,En.V)(null==n||null===(e=n.calendar)||void 0===e?void 0:e.page_el_sn,null==n?void 0:n.calendar),c.onDateClicked&&c.onDateClicked())}},g().createElement("span",{id:"date_header_showdate"},T.formatSelectedDate),g().createElement("span",{className:_n},T.dateTag)),g().createElement("div",{className:h?Dn:wn,"data-test":"date-header-forward",onClick:function(){var e;if(!h){(0,En.V)(null==n||null===(e=n.forward)||void 0===e?void 0:e.page_el_sn,null==n?void 0:n.forward);var t=B.$.dayIncrease(r,!0);c.onDateChanged&&c.onDateChanged(t)}}},"后一天"))}function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var xn=(0,b.Pi)((Sn=function(e){p()(r,e);var t=Ln(r);function r(e){var n;s()(this,r),(n=t.call(this,e)).calculateFirstDayLastDay=function(){var e=n.props,t=e.ifStudentTicket,r=e.originDepartTime,i=e.selectedDate,a=e.startDepartDate,o=e.endDepartDate,c=e.endBookDate,s=e.stuIsValid,u=e.stuDateInfo,l=a,f=c||o;if(1===t&&r&&s){var p=(0,lt.W)(An(An({},u),{},{checkTime:i}))||{},d=(0,lt.W)(An(An({},u),{},{checkTime:a}))||{},m=(0,lt.W)(An(An({},u),{},{checkTime:o}))||{},h=p.isInSummer?u.summerStart:u.winterStart,v=p.isInSummer?u.summerEnd:u.winterEnd;l=d.isInHoliday?a:h,f=m.isInHoliday?o:v}return{firstDay:l,lastDay:f}};var i=e.originDepartTime;return n.state={showCalendar:!1,originDepartTime:i,isLimited:vn(i),lock:!1},n}return l()(r,[{key:"addDateLock",value:function(e){this.setState({lock:e})}},{key:"onDateClicked",value:function(){this.state.lock||this.setState({showCalendar:!0})}},{key:"headerChangeDate",value:function(e){this.state.lock||(this.addDateLock(!0),this.props.onDateChanged&&this.props.onDateChanged(e,this.addDateLock))}},{key:"calendarChangeDate",value:function(e,t){this.setState({showCalendar:!1}),t&&!this.props.noShowSelectDate||this.headerChangeDate(e)}},{key:"render",value:function(){var e=this.props,t=e.needSticky,r=e.logData,n=e.selectedDate,i=e.startDepartDate,a=e.endDepartDate,o=e.endBookDate,c=e.noShowSelectDate,s=e.ifStudentTicket,u=e.stuIsValid,l=e.stuDurationShow,f=e.originDepartTime,p=e.stuDateInfo,d=this.state,m=d.showCalendar,h=d.isLimited,v=this.calculateFirstDayLastDay(),b=v.firstDay,O=v.lastDay,S=1===s&&u?"学生票优惠时间为：".concat(l,"。"):"";return g().createElement(y.Fragment,null,g().createElement(Rn,{needSticky:t,logData:r,isLimited:h,selectedDate:n,firstDay:b,lastDay:O,onDateChanged:this.headerChangeDate,onDateClicked:this.onDateClicked}),(m||c)&&g().createElement(Tn.Z,{selectedDate:n,onDateChanged:this.calendarChangeDate,preSaleStartDate:i,preSaleEndDate:a,reserveEndDate:o,ifStudentTicket:s,stuIsValid:u,stuDateInfo:p,isReschedule:!!f,headerTipContent:S}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.originDepartTime!==t.originDepartTime?{originDepartTime:e.originDepartTime,isLimited:vn(e.originDepartTime)}:null}}]),r}(g().Component),N()(Sn.prototype,"addDateLock",[hn.Z],Object.getOwnPropertyDescriptor(Sn.prototype,"addDateLock"),Sn.prototype),N()(Sn.prototype,"onDateClicked",[hn.Z],Object.getOwnPropertyDescriptor(Sn.prototype,"onDateClicked"),Sn.prototype),N()(Sn.prototype,"headerChangeDate",[hn.Z],Object.getOwnPropertyDescriptor(Sn.prototype,"headerChangeDate"),Sn.prototype),N()(Sn.prototype,"calendarChangeDate",[hn.Z],Object.getOwnPropertyDescriptor(Sn.prototype,"calendarChangeDate"),Sn.prototype),On=Sn))||On,Fn=r(45273),Bn=r(24684),Mn=r(12045),Zn=r(93073),qn=r(45289),Hn="dkHkLXPF",Un="XQDXcecw",Vn="XbgsjFoN",zn={page_el_sn:6667814};var Gn=(0,b.Pi)((function(){var e=(0,Zn.m)().store,t=e.covidInfo,r=e.toggleCovidPop,n=e.showCovidPop,i=(t||{}).covidTip;return i?g().createElement(Bn.Z,{trackingInfo:zn},g().createElement(g().Fragment,null,g().createElement("div",{className:Hn,onClick:function(){(0,Mn.ax)(zn),r()},id:"covidTip"},g().createElement("p",{className:Vn},i),g().createElement("span",{className:Un})),n&&g().createElement(qn.Z,null))):null})),Xn="_4-jwZhWM",$n="Iyzj3V04";var Wn=(0,b.Pi)((function(){var e=(0,Zn.m)().store.configInfo;return g().createElement("div",{className:Xn},g().createElement("div",{className:$n},"夜间（".concat(e.saleEndTime,"-").concat(e.saleBeginTime,"）铁路系统维护，该时段订单将在").concat(e.saleBeginTime,"后出票。您可使用【夜间出票服务】立即出票。")))})),Qn="gTwRMxiA",Jn="aezD-n9D",Kn="whmHw7fT",Yn="VSL942VE",ei="mHiibeGt",ti="tr6cDhZO",ri="jB2ADFZ8";function ni(){return g().createElement("div",{className:S()(Kn,Yn)},g().createElement("div",{className:ei},"暂无符合条件的车次信息"),g().createElement("div",{className:ti},"修改查询条件试试"))}var ii=(0,y.memo)(ni);function ai(){return g().createElement("div",{className:Kn},g().createElement("div",{className:ei},"抱歉，当前筛选无结果"))}var oi=(0,y.memo)(ai);function ci(e){var t=e.isTrainInfoListEmpty,r=e.isReturnNoTicket;return g().createElement("div",{className:Qn},g().createElement("i",{className:Jn}),t?g().createElement(ii,null):g().createElement(oi,null),r&&g().createElement("div",{className:ri,onClick:function(){(0,mn.pr)({page_el_sn:1618400},mn._B.TRAIN_HOMEPAGE,{source:ae})}},"返回火车票首页"))}var si=(0,y.memo)(ci),ui=r(23493),li=r.n(ui),fi=r(34427),pi=r(66910),di="xNQnhaud";function mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var yi=function(e){p()(r,e);var t=vi(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isFinishLoading:!1,sentinelKey:(0,fi.x)()},e.getSentinels=function(){var t=e.props.rootMargin,r=e.props.threshold;return t="string"==typeof t?t:"".concat(t,"px"),g().createElement(pi.Z,{key:e.state.sentinelKey,once:!1,onEnter:e.onLoadDown,rootMargin:t,threshold:r,root:e.props.container},g().createElement("div",{style:{width:"100%",height:1}}))},e.resetObserver=li()((function(){e.setState({sentinelKey:(0,fi.x)()})}),500),e.resetSentinels=function(){e.setState({isFinishLoading:!1})},e.onLoadDown=D()(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onLoadDown();case 2:"end"===t.sent?e.setState({isFinishLoading:!0}):e.resetObserver();case 4:case"end":return t.stop()}}),t)}))),e}return l()(r,[{key:"render",value:function(){var e=this.state.isFinishLoading;return g().createElement("div",{className:di},this.props.children,!e&&this.getSentinels())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isFinishLoading!==t.isFinishLoading?hi(hi({},t),{},{isFinishLoading:e.isFinishLoading}):null}}]),r}(y.Component);yi.defaultProps={onLoadDown:function(){},rootMargin:0,container:null};var gi=yi,bi=r(54168),Oi=r(57186),Si=r(88666),Ti=r(6341),Ei=r(78357),ki=r(26974),wi=r(37576),_i="Hb46sqJa",Di="qcbd7gWs",Pi="FiGnQuIJ",Ni="dRv1GY8X",Ci="_5wcZu7vf",Ii=5443337,Ri=(0,b.Pi)((function(e){var t=e.trainInfo,r=e.status,n=e.remindType,i=e.seatType,a=e.callback,c=(0,y.useState)(r),s=w()(c,2),u=s[0],l=s[1],f=(0,y.useState)(!1),p=w()(f,2),d=p[0],m=p[1],h=t.startStation,v=t.endStation,b=t.trainNo,O=t.etd,T=ki.p.TRAIN,E=function(){var e=D()(j().mark((function e(t){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),(0,Ti.Vr)(Ii),!u){e.next=15;break}return r={trainNo:b,startStation:h,endStation:v,departTime:O,remindType:n,remindLevel:T},e.next=6,wi.Z.closeRemind(r);case 6:if(!e.sent.isApiError){e.next=11;break}return(0,L.Z)("网络繁忙，请稍后重试！"),(0,tt.e)({errorMsg:"close remind api err"}),e.abrupt("return");case 11:null==a||a(),l(!u),e.next=16;break;case 15:m(!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return g().createElement(g().Fragment,null,g().createElement(Bn.Z,{trackingInfo:{page_el_sn:Ii}},g().createElement("div",{className:_i},g().createElement("div",{className:Di},"开启提醒，".concat(n===ki.l.SALE?"车次开售":"有票","时通知您购票")),g().createElement("div",{className:S()(Pi,o()({},Ci,!u)),onClick:E},g().createElement("div",{className:Ni})))),d&&g().createElement(Ei.Z,{seatType:i,trainInfo:t,remindLevel:T,remindType:n,onConfirm:function(){m(!1),null==a||a(),l(!u)},onClose:function(){m(!1),l(!1)}}))})),ji=Ri,Ai="Ckk9jntE",Li="foyr3Oj1";var xi=(0,b.f3)("store")((0,b.Pi)((function(e){var t=e.showTransferTip,r=e.showCandidateTip;return t||r?g().createElement("div",{className:Ai},t&&g().createElement("div",{className:Li},"余票少的座席，可直接抢票，比购票成功率更高"),r&&g().createElement("div",{className:Li},"官方候补+抢票双通道，抢票成功率更高")):null}))),Fi=r(30023),Bi=r(37548),Mi=r(4026),Zi=r(33162),qi=r(1010),Hi=r(74593),Ui="_3EYQf3xk",Vi="_5S4cmesD",zi="_6Z3bC5y6",Gi="NkKnR3Zw",Xi="xmmakPaQ",$i="F8dWVaJ-",Wi="BfsuV7nV",Qi=4842249,Ji=4842251,Ki=4842250;function Yi(e){var t=e.data,r=e.onOk,n=e.onCancel,i=e.cleanupPopup,a=function(){(0,En.V)(Ki),null==r||r(),null==i||i()};return g().createElement(Zi.Z,{visible:!0,onBackdropClick:a},g().createElement(Bn.Z,{trackingInfo:{page_el_sn:Qi}},g().createElement("div",{className:Ui},g().createElement(qi.Z,{onClick:a}),g().createElement("div",{className:Vi},"改签行程与原行程重复"),g().createElement("div",{className:zi},"为避免您操作失误而耽误出行，请在此确认您的改签信息："),g().createElement(Hi.Z,dn()({},t,{className:Gi})),g().createElement("div",{className:Xi},g().createElement("div",{className:$i,onClick:function(){(0,En.V)(Ji),null==n||n(),null==i||i()}},"继续改签"),g().createElement("div",{className:S()($i,Wi),onClick:a},"重新选择")))))}var ea=function(e){return new Promise((function(t,r){var n=(0,Mi.Z)(g().createElement(Yi,{data:e,onOk:t,onCancel:r,cleanupPopup:function(){return n()}}))}))},ta=r(41859),ra="vl-zgHnN",na="_5QLSRbEy",ia="hGR1eK8Q",aa=5443337,oa=(0,b.Pi)((function(e){var t,r=e.status,n=e.callback,i=e.className,a=e.trainInfo,c=e.seatType,s=(0,y.useState)(r),u=w()(s,2),l=u[0],f=u[1],p=(0,y.useState)(!1),d=w()(p,2),m=d[0],h=d[1];return g().createElement(g().Fragment,null,g().createElement(Bn.Z,{trackingInfo:{page_el_sn:aa}},g().createElement("div",{className:S()(ra,(t={},o()(t,na,l),o()(t,ia,!l),t),i),onClick:function(e){e.stopPropagation(),l||((0,Ti.Vr)(aa),h(!0))}},l?"已提醒":"有票提醒")),m&&g().createElement(Ei.Z,{trainInfo:a,seatType:c,remindLevel:ki.p.SEAT,remindType:ki.l.TICKET,onConfirm:function(){h(!1),f(!0),null==n||n()},onClose:function(){h(!1)}}))})),ca=oa,sa="HvneHzmC",ua="CspVx2P1",la="zV2695a7",fa="rELa-MFr";function pa(e){var t=e.isDisabled,r=e.canGrap,n=e.buttonText,i=t?fa:r?la:ua;return g().createElement("div",{className:S()(sa,i)},n)}var da=(0,y.memo)(pa),ma="lUcJjs40",ha="ZNYB7s7I",va="Gh5th7Ff",ya="qqW4vrOJ",ga="_9gM1hfr+",ba="vkE5ScDK",Oa="i3RvKhHF",Sa="U4kZIGwZ",Ta="xpEpfxLL",Ea="hw-XrOrI";function ka(e){var t=e.data,r=void 0===t?{}:t,n=e.onBtnClicked,i=e.trainInfo,a=e.remindCallback,c=r.stockWarning,s=r.canReserve,u=r.stockText,l=r.isDisabled,f=r.buttonText,p=r.canGrap,d=r.seatType,m=r.seatRemindActive;return g().createElement("div",{className:S()(ma,ha),"data-test":"808884",onClick:function(e){e.stopPropagation(),(0,ta.k)({stores:{data:r},subOp:"detail select buy tickets"}),n(r,l)}},g().createElement("div",{className:va},g().createElement("div",{className:ya},r.seatTypeName),g().createElement("div",{className:Ea},g().createElement("div",{className:S()(ga,o()({},Sa,c),o()({},Ta,s))},u),r.showRemind&&g().createElement(ca,{trainInfo:i,status:!!m,seatType:d,callback:a}))),g().createElement("div",{className:va},g().createElement("div",{className:ba},g().createElement("span",{className:Oa},"￥"),r.priceStd),g().createElement(da,{isDisabled:l,canGrap:p||s,buttonText:f})))}var wa=(0,y.memo)(ka);function _a(e,t){return e?mn._B.TCASHIER_CHANGE:t?mn._B.TCASHIER_GRAB:mn._B.TCASHIER}var Da,Pa="OawFS1xY";function Na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Ra=5389457,ja=(0,y.memo)((function(e){var t=e.list,r=e.onClick,n=e.trainInfo,i=e.remindCallback;return t.map((function(e){return g().createElement(wa,{key:"seat-list-".concat(e.seatType),data:e,trainInfo:n,onBtnClicked:r,remindCallback:i})}))})),Aa=(0,b.f3)("store")(Da=(0,b.Pi)(Da=function(e){p()(r,e);var t=Ia(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,e.state={isShowApproching:!1},e.seat={},e.getTcashierQueryData=function(t){return Ca(Ca({},e.store.tcashierParams),{},{seat_type:t})},e.isDisableHandler=function(t){if(!t)return!1;var r=e.store,n=r.configInfo,i=r.isDurationNight,a=r.ticketInfo,o=r.selectedTrain,c=a.disableNightOrderTime,s=!(null==o||!o.ifDisableNightOrder),u=c?(0,B.e)(c).format("YYYY-MM-DD HH:mm"):"07:00",l=s?"发车时间在".concat(u,"前的车次，已停止网络预订，您可持有效证件到车站购票"):"".concat(n.saleEndTime,"-").concat(n.saleBeginTime,"停止售票，请在正常售票期间购买"),f=i?l:"该坐席已无余票，换个车次试试";return(0,L.Z)(f,{duration:s?3:2}),!0},e.checkIsTimeUnvalid=function(){var t=e.store,r=t.selectedTrain,n=void 0===r?{}:r,i=t.isReschedule,a=t.configInfo,o=t.originDepartTime,c=n.etd,s=n.startStation,u=n.isImmediate,l=a.immediateRangeLeft,f=a.immediateRangeRight,p=a.immediateGray,d={isReschedule:i,startStation:s,originDepartTime:o,startStationTime:c},m=(0,bi.ve)(Ca(Ca({},d),{},{bookTimeLimit:u||p?l:f}));return m.isTimeEarly||m.isTimeLater?((0,L.Z)(m.toast),!0):!!(u||p&&(0,bi.ve)(Ca(Ca({},d),{},{bookTimeLimit:f})).isTimeEarly)&&(e.setShowApproching(!0),!0)},e.checkIsStuLimited=function(){var t=e.store,r=t.configInfo,n=t.isReschedule;if(1===t.ifStudentTicket&&n){var i=r.stuSeatTypeList,a=void 0===i?[]:i,o=r.stuSeatsName;if(!a.includes(e.seat.seatType)){var c="学生票仅支持购买".concat(o);return(0,L.Z)(c),!0}}return!1},e.checkChangeLimited=function(){var t=e.store,r=t.isReschedule,n=t.tpParams;if(r){var i,a=(null==n||null===(i=n[pe])||void 0===i?void 0:i.split(","))||[];if(e.seat.trueStock<a.length)return(0,L.Z)("该坐席余票不足，换个班次试试"),!0}return!1},e.checkRescheduleTrain=D()(j().mark((function t(){var r,n,i,a,o,c,s;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.store,n=r.isReschedule,i=r.originTrainNo,a=r.originDepartTime,o=r.selectedTrain,c=o.etd,s=o.trainNo,!n||i!==s||a!==c){t.next=11;break}return t.prev=3,t.next=6,ea(o);case 6:return t.abrupt("return",!0);case 9:t.prev=9,t.t0=t.catch(3);case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.getTcashierUrl=function(){var t=e.seat,r=e.getTcashierQueryData(t.seatType),n=_a(e.store.isReschedule,t.canReserve||t.canGrap);return(0,$e.Q2)(n,r)},e.gotoTcashier=function(){(0,mn.v_)(e.getTcashierUrl())},e.getExtraUrlParams=function(){var t=e.store.tcashierParams,r=e.seat||{},n=r.canReserve,i=r.canGrap;return n||i?{}:{login_less:1,depart_date:null==t?void 0:t.depart_date}},e.onBtnClicked=function(){var t=D()(j().mark((function t(r){var n,i,a,c,s,u;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.isDisabled,(0,Ti.Vr)(Ra),e.seat=r,t.t0=e.isDisableHandler(n)||e.checkIsTimeUnvalid()||e.checkIsStuLimited()||e.checkChangeLimited(),t.t0){t.next=8;break}return t.next=7,e.checkRescheduleTrain();case 7:t.t0=t.sent;case 8:if(!t.t0){t.next=10;break}return t.abrupt("return");case 10:if(i=e.store,a=i.configInfo.forceLogin,c=i.isReschedule,s=i.grayMap,u=i.queryTrainTickets,c||!a||null!=s&&s.skipForceLogin){t.next=14;break}return(0,mn.v_)(mn._B.LOGIN_MANAGEMENT,Ca(o()({},Fi.sz,e.getTcashierUrl()),e.getExtraUrlParams())),t.abrupt("return");case 14:(null==s?void 0:s.checkoutPreQueryTickets)&&u(),e.gotoTcashier();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.closeAndGotoTcashier=function(){e.setShowApproching(!1),e.gotoTcashier()},e.setShowApproching=function(t){e.setState({isShowApproching:t})},e}return l()(r,[{key:"render",value:function(){var e=this,t=(this.store.seatInfo||{}).seatList,r=void 0===t?[]:t;return null!=r&&r.length?g().createElement(g().Fragment,null,g().createElement("div",{className:Pa},g().createElement(ja,{list:r,onClick:this.onBtnClicked,trainInfo:this.store.selectedTrain,remindCallback:this.store.remindCallback})),this.state.isShowApproching&&g().createElement(Bi.Z,{onConfirm:this.closeAndGotoTcashier,onCancel:function(){return e.setShowApproching(!1)}})):null}}]),r}(g().Component))||Da)||Da,La="BP2LR9Ng",xa="YxF+V0cb",Fa="MJCXgHSq",Ba="wP6ILYft";function Ma(){return g().createElement("div",{className:Fa},g().createElement("div",{className:Ba}))}var Za=(0,b.Pi)((function(){var e,t=(0,Zn.m)().store,r=t.seatInfo,n=t.selectedTrain,i=t.remindCallback,a=r||{},c=a.seatList,s=a.showTransferTip,u=a.showCandidateTip,l=a.showRemindBar,f=a.trainRemindActive,p=(0,y.useState)(!1),d=w()(p,2),m=d[0],h=d[1];(0,y.useEffect)((function(){setTimeout((function(){h(!0)}),0)}),[]);var v=S()(La,o()({},xa,m));return null!=c&&c.length?g().createElement("div",{className:v},g().createElement(xi,{showTransferTip:s,showCandidateTip:u}),l&&g().createElement(ji,{trainInfo:n,status:f,remindType:n.canReadyBuy?ki.l.SALE:ki.l.TICKET,seatType:null===(e=c[0])||void 0===e?void 0:e.seatType,callback:i}),g().createElement(Aa,null)):g().createElement("div",{className:v},Array.from({length:3}).map((function(e,t){return g().createElement(Ma,{key:t})})))})),qa="FMY28c3h",Ha="OiXaRgKh",Ua="iE7hHgPz",Va="mc-Vim-H",za="oRb77Va7",Ga="OZVFAiH4",Xa="XAX5pmDg",$a="faAKdANK",Wa="CRQqlDZI",Qa="i1IRLY2P",Ja="_8klvNeiL",Ka="qdt0lX9e",Ya="griVnkP6",eo="YKDnDtjW",to="M-rMjZIv",ro="_8g-929fY",no="aNBfsrdu",io="HiNTe01U";function ao(e){var t=e.startStation,r=e.endStation,n=e.trainNo;return g().createElement("div",{className:S()(qa,eo)},g().createElement("div",{className:Ha},g().createElement("div",{className:Ua},g().createElement("span",{className:S()(Ga,to)},t)),g().createElement("div",null,n),g().createElement("div",{className:Ua},g().createElement("span",{className:S()(Ga,to)},r))))}var oo=(0,y.memo)((function(e){var t=e.timeSplit,r=e.station,n=e.children;return g().createElement("div",{className:Ua},g().createElement("div",{className:Va},t[0],g().createElement("span",{className:za},":"),t[1]),g().createElement("div",{className:Ga},r,"站"),n)}));function co(e){var t=e.data,r=void 0===t?{}:t,n=e.originTrainNo,i=e.showSnatchTag,a=r.isTrainForbid,c=r.periodDay,s=r.minPrice,u=r.minPriceStd,l=r.etdSplit,f=r.etaSplit,p=r.startStation,d=r.endStation,m=r.trainTime,h=r.trainNo,v=r.couponValueStd;return a?g().createElement(ao,{startStation:p,endStation:d,trainNo:h}):g().createElement("div",{className:S()(qa,o()({},ro,i))},g().createElement("div",{className:Ha},g().createElement(oo,{timeSplit:l,station:p}),g().createElement("div",{className:Ua},g().createElement("div",{className:Xa},m),g().createElement("div",{className:$a}),g().createElement("div",null,h)),g().createElement(oo,{timeSplit:f,station:d},c>0&&c<10&&g().createElement("span",{className:Wa},"+",c))),g().createElement("div",{className:Qa},0!==s&&g().createElement("div",{className:Ja},g().createElement("span",{className:Ka},"¥"),g().createElement("span",{className:Ya},u)),h===n&&g().createElement("div",{className:no},"原车次"),v&&g().createElement("div",{className:io},"已减",v,"元")))}var so=(0,y.memo)(co),uo="gD+yhHNp",lo="Mdu4Acyr",fo="PoSPk3SK",po="dvCsDNeb",mo="MXGcwykQ",ho="b3KM6oXq",vo="G9j4Csm5",yo=(0,y.memo)((function(e){var t=e.text;if(!t)return null;var r=t.replace(/{(\S+)}/,'<span class="'.concat(mo,'">$1</span>'));return g().createElement("div",{className:fo,dangerouslySetInnerHTML:{__html:r}})}));function go(e){var t=e.data||{},r=t.hasTicket,n=t.isTrainImproper,i=t.canSnatching,a=t.priceList,c=t.note,s=t.ifSupportCandidate,u=t.canReadyBuy;return i?g().createElement("div",{className:S()(uo,vo)},g().createElement("span",{className:fo},s?"暂无余票，可双通道抢票，成功率更高":"暂无余票，建议抢票"),g().createElement("div",{className:S()("icomoon-tcashier",ho)},"抢票")):n?g().createElement("div",{className:S()(uo,vo)},g().createElement(yo,{text:c}),u&&g().createElement("div",{className:S()("icomoon-tcashier",ho)},"预约")):g().createElement("div",{className:uo},(a||[]).map((function(e,t){var n=e.seatType,i=e.trueStock,a=e.showProperty||{},c=a.isItemGray,s=a.seatName,u=a.isRed,l=a.showStock,f=a.hideUnit?"":"张",p=r&&0===n&&0===i;return g().createElement("span",{key:"".concat(e.stock,"-").concat(t),className:S()(lo,o()({},po,c||p))},g().createElement("span",null,s,":"),g().createElement("span",{className:S()(o()({},mo,u&&!p))},p?"0张":"".concat(l).concat(f)))})))}var bo=(0,y.memo)(go),Oo="Xho8Qr9V",So="ZXq6m4uU",To="候补+余票捡漏";function Eo(e){var t=e.data||{},r=t.ifSupportCandidate,n=t.ratio,i=t.recommendTag,a=t.immediateTag,c=function(e,t,r,n){if(n)return n;if(r)return r;var i=parseInt(t,10)>0;return e?i?"".concat(To," 成功率").concat(t,"%"):To:i?"抢票成功率".concat(t,"%"):""}(r,n,i,a);return c?g().createElement("div",{className:S()(Oo,o()({},So,!!i||!!a))},c):null}var ko=(0,y.memo)(Eo),wo=r(38533),_o=r(99433);function Do(e){var t,r=document.getElementById(e);return null==r||null===(t=r.getBoundingClientRect())||void 0===t?void 0:t.height}function Po(e,t){return e*t/99}function No(e){var t=e.dom,r=e.seatLen,n=e.hasTip,i=e.cardHeight;return(0,y.useEffect)((function(){t&&r>0&&setTimeout((function(){var e=t.getBoundingClientRect().top,a=window.innerHeight||document.body.clientHeight,o=Po(i,12),c=e+i+r*Po(i,58)+Po(i,n?38:0)-a+((0,wo.zT)().system===_o.we.IOS&&window.screen.height>=812?34:0)+24,s=Do("aimTip")||Do("diffTip"),u=Do("dateHeader")-e+(s||o),l=c>0;if(l||u>0){var f=Math.abs(l?c:u),p=window.requestAnimationFrame||window.webkitRequestAnimationFrame,d=Math.ceil(f/18),m=l?-d:d,h=(0,x.cx)()+(l?f:-f);p((function e(){if(f>=d&&f>0){var t=(0,x.cx)()-m;(0,x.QU)(t>=0?t:0),f-=d,p(e)}else(0,x.QU)(h>=0?h:0)}))}}),10)}),[i,t,n,r]),null}var Co=(0,y.memo)(No),Io=[2,3],Ro=function(){var e=document.getElementById("covidTip")||document.getElementById("dateHeader");return e?(null==e?void 0:e.offsetTop)+(null==e?void 0:e.offsetHeight):0},jo="UxWYN6+Y",Ao="f2NwAQIM",Lo="PMGoz8HS";function xo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bo=(0,b.Pi)((function(e){var t=e.index,r=e.idx,n=e.data,i=e.clickCallback,a=(0,Zn.m)().store,c=a.ticketInfo,s=a.anchor,u=a.clearAnchor,l=a.originTrainNo,f=a.selectedTrain,p=a.isReschedule,d=a.seatInfo||{},m=d.seatList,h=d.showTransferTip,v=d.showCandidateTip,b=d.showRemindBar,O=n.priceList,T=n.canReadyBuy,E=n.isTrainForbid,k=n.useRecommendBg,_=n.showRecommendTag,D=n.immediateTag,P=n.bookMinTicketNum,N=c.requestId,C=function(e,t){var r=0,n=(e=e||[]).length>=3;return e.forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.trueStock;Io.includes(e.seatType)?(i<t&&(r+=1),1e4===i&&(n=!1)):i<t?r+=1:n=!1})),{grabTicketCount:r,showTag:n}}(O,P),I=C.grabTicketCount,R=C.showTag,j=!p&&(R||T),A=function(e){var t=e.data,r=e.requestId,n=e.grabTicketCount,i=e.showRatio,a=e.idx,o=t.trainNo,c=t.ifSupportCandidate,s=t.recommendTag;return{page_el_sn:802713,train_no:o,if_support_candidate:c,ticket_query_request_id:r,grab_ticket_count:n,normal_seat_is_grab:t.normalSeatIsGrab?1:0,ratio:i?1:0,recommend_tag_info:s,idx:a}}({data:n,requestId:N,grabTicketCount:I,showRatio:j,idx:r}),L=(0,y.useRef)(null),x=(0,y.useState)(0),F=w()(x,2),B=F[0],M=F[1],Z=(0,y.useState)(!1),q=w()(Z,2),H=q[0],U=q[1],V=at(f,Fo(Fo({},n),{},{index:t})),z=(j||_||D)&&!E,G=li()((function(){var e,r;V&&U((function(e){return!e})),i(n,A,t),M(null===(e=L.current)||void 0===e||null===(r=e.getBoundingClientRect())||void 0===r?void 0:r.height)}),500,{trailing:!1});(0,y.useEffect)((function(){U(V)}),[V]),(0,y.useEffect)((function(){setTimeout((function(){var e=document.getElementById(s);s&&e&&(it.replaceUrl({anchor:""}),window.scrollTo(0,(0,Si.y)(e)-54),u())}),0)}),[]);var X=V&&H;return g().createElement(Bn.Z,{trackingInfo:A},g().createElement("div",{className:jo,"data-test":"802713",ref:L,onClick:G},g().createElement("div",{className:S()(Ao,o()({},Lo,k))},z&&g().createElement(ko,{data:n}),g().createElement(so,{data:n,originTrainNo:l,showSnatchTag:z}),!X&&g().createElement(bo,{data:n})),X&&g().createElement(g().Fragment,null,g().createElement(Za,null),g().createElement(Co,{dom:L.current,seatLen:null==m?void 0:m.length,hasTip:h||v||b,cardHeight:B}))))})),Mo=r(73935),Zo=(0,y.memo)((function(e){var t=e.rootMargin,n=e.threshold,i=e.observerCallBack,a=e.onShow,o=(0,y.useRef)(null);(0,y.useEffect)((function(){var e=(0,Mo.findDOMNode)(o.current);if(a&&a(e),t&&i&&e){r(66337);var c=new IntersectionObserver(i,{rootMargin:t,threshold:n||[0,1]});return c.observe(e),function(){return c.unobserve(e)}}}),[t,i]);var c=g().Children.only(e.children);return g().cloneElement(c,{className:c.props.className,ref:o})})),qo={root:"naZ7cAvI",tip:"FFf1IM0B",aim:"rwYvX0Dt",city:"cQtae9Bf",tipFixed:"fQRTOsWo",covid:"ZsHMH2D8",arrow:"I3HZCwV5",placeholder:"Ovny5qBN",backup:"pW+AMU8K",loading:"_31tTcx2Q",gradual:"GGBmPIPk"},Ho=(0,b.Pi)(g().forwardRef((function(e,t){var r=e.tipClassName,n=e.rootClassName,i=e.fixed,a=(0,Zn.m)().store,c=a.sortAndFilterStore,s=a.covidInfo,u=c.toggleFilterPopup;return g().createElement(g().Fragment,null,g().createElement("div",{ref:t,className:S()(qo.root,n),id:i?"aimTip":""},g().createElement("div",{className:S()(qo.tip,qo.aim,r,o()({},qo.covid,i&&!(null==s||!s.covidTip)))},g().createElement("span",null,"以下是您筛选的车次"),g().createElement("span",{className:qo.arrow,onClick:u,"data-active":"link-gray"},"同城市更多站点"))))}))),Uo=(0,b.Pi)((function(){var e=(0,Zn.m)().store,t=e.setTipBottom,r=e.isAimTipFixed,n=(0,y.useState)(null),i=w()(n,2),a=i[0],o=i[1],c=(0,y.useState)(r),s=w()(c,2),u=s[0],l=s[1],f=(0,y.useCallback)((function(e){var t=e[0].intersectionRatio;l(t<1)}),[]),p=(0,y.useCallback)((function(e){e&&t("aimTipBottom",e.offsetHeight)}),[t]);return(0,y.useEffect)((function(){u||o("-".concat(Ro(),"px 0px 1000000px 0px"))}),[]),g().createElement(Zo,{rootMargin:a,observerCallBack:f,onShow:p},g().createElement(Ho,{tipClassName:u?[qo.tipFixed]:null,fixed:u}))})),Vo=(0,b.Pi)(g().forwardRef((function(e,t){var r=e.tipClassName,n=e.showBackup,i=e.fixed,a=e.rootClassName,c=(0,Zn.m)().store,s=c.showCityDuration,u=c.covidInfo;return g().createElement("div",{ref:t,className:S()(qo.root,a),id:i?"diffTip":""},g().createElement("div",{className:S()(qo.tip,r,o()({},qo.covid,i&&!(null==u||!u.covidTip)))},g().createElement("span",null,"以下是",g().createElement("span",{className:qo.city},s),s?"的":"","其他车次")),n&&g().createElement(Ho,{rootClassName:qo.backup}))}))),zo=(0,b.Pi)((function(){var e=(0,Zn.m)().store,t=e.aimTipBottom,r=e.showAimTip,n=e.setTipBottom,i=(0,y.useState)(!1),a=w()(i,2),o=a[0],c=a[1],s=(0,y.useState)(!1),u=w()(s,2),l=u[0],f=u[1],p=(0,y.useState)(null),d=w()(p,2),m=d[0],h=d[1],v=(0,y.useCallback)((function(e){e&&n("diffTipBottom",e.offsetHeight)}),[n]);return(0,y.useEffect)((function(){h("-".concat(t+Ro(),"px 0px 1000000px 0px"))}),[t]),g().createElement(Zo,{rootMargin:m,observerCallBack:function(e){var t=e[0].intersectionRatio,n=r?0===t:t<1;n&&(0,x.cx)()<=0||(c(n),r&&f(t<1))},onShow:v},g().createElement(Vo,{tipClassName:o?[qo.tipFixed]:null,showBackup:l,fixed:o}))})),Go=(0,b.Pi)((function(){var e=(0,Zn.m)().store.isOtherTipFixed;return e?g().createElement(Vo,{tipClassName:qo.tipFixed,fixed:e}):g().createElement(zo,null)}));var Xo=(0,b.Pi)((function(e){var t=e.isAimTip,r=(e.isMiddle,e.onlyFlight),n=e.rootClassName,i=e.showCommonDiffTip,a=void 0!==i&&i,o=(0,Zn.m)().store.hasFilterStation;return r?g().createElement("div",{className:S()(qo.tip,qo.top,n)},"暂无指定车次，已为您推荐其他出行方式"):o?t?g().createElement(Uo,{rootClassName:n}):a?g().createElement(Vo,{rootClassName:n}):g().createElement(Go,null):null})),$o="RnwQ+UxC",Wo="wdCxSJXI",Qo="Twe71tLB",Jo="_5dV-8X0j",Ko="plNNTyXe",Yo="PQ0SQ4UF",ec="qGRPs1o5",tc="H40Zq3vT",rc="bfzUTALi",nc="etWftwsf",ic="WvsbHhux",ac="w3bFnm7o",oc="dsp7CBfC",cc=3759974;var sc=(0,b.Pi)((function(e){var t=e.onlyFlight,r=(0,Zn.m)().store.ticketInfo.flightDiversionVo,n=r.departureCity,i=r.arrivalCity,a=r.desc,c=r.flightTime,s=r.price;return(0,y.useEffect)((function(){r&&(0,Mn.wI)({page_el_sn:cc})}),[]),r?g().createElement("div",{className:S()($o,o()({},Wo,t)),onClick:function(){var e=r.departureCityCode,t=r.arrivalCityCode,a=r.departureDate,o=r.channel;(0,mn.pr)({page_el_sn:cc},"tandy_recliner.html?wx_flight_redirect_name=flight_list",{dep_city_name:n,dep_city_code:e,arr_city_name:i,arr_city_code:t,dep_date:a,source:"train_list_diversion",_tp_order_source:"train_list_diversion",channel:o})}},g().createElement("div",{className:Qo},g().createElement("div",{className:Ko},"特价机票",a&&g().createElement("div",{className:Yo},a)),g().createElement("div",{className:ec},g().createElement("span",null,n),g().createElement("span",{className:tc},g().createElement("span",{className:rc},c)),g().createElement("span",null,i))),g().createElement("div",{className:Jo},g().createElement("div",{className:nc},g().createElement("span",{className:ic},"￥"),g().createElement("span",{className:ac},(0,H.bd)(s)),g().createElement("span",{className:oc},"起")))):null})),uc={container:"uYY0yP8U",top:"EBwU9+zG",recommend:"_7KZ+iQ6B",content:"KTIoH60A",rowOne:"QCor8qJ+",middle:"tS-8VJrg",cityName:"kE9JGWVf",transferCity:"MNe-wAIz",arrow:"_5lWhZKTw",time:"VA8lTUky",mark:"jT3uI3w0",station:"ZazmG2Zk",duration:"xyqn4BCV",pointer:"WNLa4rgB",tag:"wnfuJrVa",attach:"fuJiRf2Q",price:"BsmEYkgW",prefix:"nji-Z47e",discount:"LjxRVSno",text:"zZ321Zc-",bottom:"bJ4EifoZ",ticketInfo:"x3U-ZmrA",index:"Sab9j3ab",trainNo:"gGIiAz3X",seatList:"aju4MMwG",seat:"VK1YrwgT",count:"-rZpno4f",recommendTag:"JfJXGZ6g",loading:"_0EFAlj8p",gradual:"_1psufMw4"};function lc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pc={page_el_sn:5489499},dc=(0,y.memo)((function(e){var t=e.data,r=e.loggerData,n=t.periodDay,i=t.minPrice,a=t.minPriceStd,c=t.etdSplit,s=t.etaSplit,u=t.startStation,l=t.endStation,f=t.duration,p=t.changeStation,d=t.layover,m=t.couponValueStd,h=t.tag;return g().createElement(Bn.Z,{trackingInfo:r},g().createElement("div",{className:S()(uc.top,o()({},uc.recommend,!!h))},h&&g().createElement("span",{className:uc.recommendTag},h),g().createElement("div",{className:uc.content},g().createElement("div",{className:uc.rowOne},g().createElement("div",{className:uc.time},c[0],g().createElement("span",{className:uc.mark},":"),c[1]),g().createElement("div",{className:uc.station},u,"站")),g().createElement("div",{className:uc.middle},g().createElement("div",{className:uc.layover},d),g().createElement("div",{className:uc.transferCity},g().createElement("span",{className:uc.cityName},p),g().createElement("i",{className:uc.arrow})),g().createElement("div",{className:uc.duration},f)),g().createElement("div",{className:uc.rowOne},g().createElement("div",{className:uc.time},s[0],g().createElement("span",{className:uc.mark},":"),s[1]),g().createElement("div",{className:uc.station},l,"站"),n>0&&n<10&&g().createElement("span",{className:uc.tag},"+",n))),g().createElement("div",{className:uc.attach},0!==i&&g().createElement("div",{className:uc.price},g().createElement("span",{className:uc.prefix},"¥"),g().createElement("span",{className:uc.text},a)),m&&g().createElement("div",{className:uc.discount},"已减",m,"元"))))})),mc=(0,y.memo)((function(e){var t=e.list,r=void 0===t?[]:t;return null!=r&&r.length?g().createElement("div",{className:uc.bottom},r.map((function(e){var t=e.segmentNo,r=e.trainNo,n=e.seatList;return g().createElement("div",{key:r,className:uc.ticketInfo},g().createElement("span",{className:uc.index},t),g().createElement("span",{className:uc.trainNo},r),g().createElement("div",{className:uc.seatList},n.map((function(e){var t=e.seatTypeName,r=e.stock,n=e.stockWarning;return g().createElement("div",{key:t,className:uc.seat},t,": ",g().createElement("span",{className:n?uc.count:null},r))}))))}))):null}));function hc(e){var t=e.data,r=void 0===t?{}:t,n=e.clickCallback,i=r||{},a=i.requestId,o=i.routeId,c=i.tagId,s=fc(fc({},pc),{},{ticket_query_request_id:a,routeId:o,tag:c});return g().createElement("div",{className:uc.container,onClick:function(){n(r,s)}},g().createElement(dc,{data:r,loggerData:s}),g().createElement(mc,{list:r.segmentList}))}var vc=(0,y.memo)(hc),yc="_4AfbA2Ud",gc="lA-fn5Rf",bc="J-v4WfQm",Oc="+rSfzyOG",Sc="SrrRo68r",Tc=(0,b.Pi)(g().forwardRef((function(e,t){var r=e.tipClassName,n=e.fixed,i=e.showBackup,a=(0,Zn.m)().store,c=a.transitTip,s=a.covidInfo;return g().createElement("div",{ref:t,className:yc,id:"transitTip"},g().createElement("div",{className:S()(gc,r,o()({},Oc,n&&!(null==s||!s.covidTip)))},c),i&&g().createElement(Xo,{rootClassName:Sc,showCommonDiffTip:!0}))}))),Ec=(0,b.Pi)((function(){var e=(0,Zn.m)().store,t=e.aimTipBottom,r=e.diffTipBottom,n=e.hasFilterStation,i=e.onlyFlight,a=(0,y.useState)(!1),o=w()(a,2),c=o[0],s=o[1],u=(0,y.useState)(!1),l=w()(u,2),f=l[0],p=l[1],d=(0,y.useState)(null),m=w()(d,2),h=m[0],v=m[1];return(0,y.useEffect)((function(){v("-".concat(Ro()+(r||t),"px 0px 1000000px 0px"))}),[r,t]),g().createElement(Zo,{rootMargin:h,observerCallBack:function(e){var t=e[0].intersectionRatio,r=i||n,a=r?0===t:t<1;a&&(0,x.cx)()<=0||(s(a),r&&p(t<1))}},g().createElement(Tc,{tipClassName:c?bc:null,fixed:c,showBackup:f}))}));function kc(e){var t=e.index,r=e.idx,n=e.data,i=e.clickCallback;return n.showType===ce?g().createElement(Bo,{index:t,idx:r,data:n,clickCallback:i}):n.showType===se?g().createElement(Xo,n):n.showType===ue?g().createElement(sc,{onlyFlight:n.onlyFlight}):n.showType===le?g().createElement(Ec,null):n.showType===fe?g().createElement(vc,{data:n,clickCallback:i}):null}var wc=(0,y.memo)(kc),_c="-wh6XfbT",Dc="q00nOA+p";function Pc(e){var t=e.isApiError,r=e.showFrame;return t?g().createElement("div",{className:_c},re):r?g().createElement(y.Fragment,null,Array.from({length:6}).map((function(e,t){return g().createElement("div",{key:t,className:Dc})}))):null}var Nc=(0,y.memo)(Pc),Cc=r(55622);function Ic(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Rc,jc,Ac,Lc=(0,Cc.cM)((function(e,t,r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ic(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({op:"click"},r)}),!0);function xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Mc,Zc=(0,b.f3)("store")(Rc=(0,b.Pi)((jc=function(e){p()(r,e);var t=Bc(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,e.checkTrainLimited=function(t){var r=t.etd,n=t.startStation,i=e.store,a=i.originDepartTime,o=i.isReschedule,c=i.configInfo,s=(0,bi.ve)({isReschedule:o,startStation:n,originDepartTime:a,startStationTime:r,bookTimeLimit:t.immediateTag||null!=c&&c.immediateGray?c.immediateRangeLeft:c.immediateRangeRight});return!(!s.isTimeEarly&&!s.isTimeLater)&&((0,Oi.AC)(s.toast),!0)},e.getDetailParams=function(t){var r=t.segmentList[0]||{},n=t.segmentList[1]||{};return{f_depart_date:r.etd,f_train_no:r.trainNo,f_start_station:r.startStation,f_end_station:r.endStation,s_depart_date:n.etd,s_start_station:n.startStation,s_end_station:n.endStation,s_train_no:n.trainNo,search_start_station:e.store.searchStartStation,search_end_station:e.store.searchEndStation}},ct()(e,"onItemClicked",Ac,ut()(e)),e}return l()(r,[{key:"componentDidMount",value:function(){window.scrollBy&&window.scrollBy(0,1)}},{key:"render",value:function(){var e=this.store,t=e.isApiError,r=e.showTrainList,n=e.onLoadDown,i=e.isFinishLoading,a=e.showFrame;return 0===r.length||a?g().createElement(Nc,{isApiError:t,showFrame:a}):g().createElement(y.Fragment,null,g().createElement(gi,{onLoadDown:n,isFinishLoading:i,rootMargin:300},g().createElement(qc,{list:r,onItemClicked:this.onItemClicked})),i&&g().createElement("div",{className:_c},"已展示所有车次"))}}]),r}(g().Component),Ac=N()(jc.prototype,"onItemClicked",[Lc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=D()(j().mark((function t(r,n,i){var a,o,c,s,u,l,f;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.store,o=a.isDataLoading,c=a.setSelectedTrain,s=r.isTrainImproper,u=r.canReadyBuy,l=s&&!u,!(o||l||e.checkTrainLimited(r))){t.next=6;break}return l&&(0,L.Z)("暂不可预订，请选择其他车次"),t.abrupt("return");case 6:f=r.showType===fe,c(f?null:Fc({index:i},r)),f&&(0,mn.v_)(mn._B.TRANSFER_DETAIL,Fc({},e.getDetailParams(r)));case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()}}),Rc=jc))||Rc)||Rc,qc=(0,y.memo)((function(e){var t=e.list,r=e.onItemClicked,n=0;return g().createElement(g().Fragment,null,t.map((function(e,t){return e.showType!==ce&&(n+=1),g().createElement("div",{id:t>0?e.trainNo:"",key:"".concat(e.showType,"-").concat(e.trainNo,"-").concat(t,"-").concat(e.etd)},g().createElement(wc,{index:t,idx:t-n,data:e,clickCallback:r}))})))})),Hc=r(87677),Uc=(Mc={},o()(Mc,Y.TRAIN,803033),o()(Mc,Y.START,803034),o()(Mc,Y.END,803035),o()(Mc,Y.DURATION,2771593),Mc),Vc="BfjWkgx6",zc="XXkoXPPN",Gc="oEmQSrN1",Xc="ocwxsmSl",$c="_0UmJkX6J",Wc="tZaGPUdA",Qc="Iw8avG7F";function Jc(e){var t=e.className,r=e.index,n=e.id,i=e.name,a=e.status,c=e.type,s=e.sectionType,u=e.onItemChange;return g().createElement("div",{className:S()(Xc,t,o()({},Qc,!!a)),"data-test":"".concat(Uc[s],"-").concat(r),onClick:function(e){e&&e.stopPropagation(),function(e){(0,Mn.ax)({page_el_sn:Uc[e]})}(s)}},g().createElement("input",{id:n,className:$c,name:i,type:c,checked:!!a,onChange:u}),g().createElement("label",{className:Wc,htmlFor:n},i))}var Kc=(0,y.memo)(Jc);function Yc(e){var t=e.title,r=e.data,n=e.type,i=e.filterTypeStatus,a=e.sectionType,o=e.onItemChange;return 0===(r||[]).length?null:g().createElement("section",{className:Vc},g().createElement("span",{className:zc},t),g().createElement("ul",{className:Gc},r.map((function(e,t){return g().createElement(Kc,{key:"".concat(a,"-").concat(e.value),index:t,id:e.value,name:e.name,status:i[e.value],type:n,sectionType:a,onItemChange:function(t){return o(t,e.value,a)}})}))))}var es,ts,rs,ns,is,as,os,cs,ss,us="SxoYqQGJ",ls="olfQc+ja",fs="ZyTQ6ErL",ps="VyJlLzZB",ds="H3Pk4O1T",ms="EDJyk-GS",hs="_7W1PVwSq",vs="jLgRYWaJ",ys="ISSqtyIo",gs="IE33cJ5f",bs="pmKUclAk",Os="pw1gdpll",Ss="nguxtZhN";function Ts(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Es,ks,ws,_s=2929837,Ds=2929836,Ps=2929838,Ns=(es=(0,b.f3)("store"),ts=(0,Cc.gH)(_s),rs=(0,Cc.gH)(Ps),ns=(0,Cc.gH)(Ds),es(is=(0,b.Pi)((as=function(e){p()(r,e);var t=Ts(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,e.initFilterStatus=e.store.sortAndFilterStore.getFilterStatus(),e.state={visible:!1,filterStatus:e.initFilterStatus,filterShowAll:e.store.sortAndFilterStore.filterShowAll},e.hide=function(){var t=e.props.hideCallBack;e.setState({visible:!1},(function(){setTimeout((function(){t&&t()}),250)}))},ct()(e,"hideWrapper",os,ut()(e)),ct()(e,"onConfirm",cs,ut()(e)),e.onFilterItemChange=function(t,r,n){var i=e.state.filterStatus,a=t.target,o="checkbox"===a.type?a.checked:a.value;i[n][r]=o,e.setState({filterStatus:i})},ct()(e,"resetFilter",ss,ut()(e)),e}return l()(r,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){var e=this,t=this.state,r=t.filterStatus,n=t.visible,i=(0,this.store.getSectionMap)();return g().createElement(Hc.Z,{visible:n,onBackdropClick:this.hide,scrollSelector:"#listFliterPopup",className:us},g().createElement("div",{className:ls},g().createElement("div",{className:fs},g().createElement("span",{className:hs,"data-test":"filter-popup-cancel",onClick:this.hideWrapper},"取消"),g().createElement("div",{className:ps},g().createElement("span",{className:ds},"筛选"),g().createElement("span",{className:ms},"可多选")),g().createElement("span",{className:vs,"data-test":"filter-popup-certain",onClick:this.onConfirm},"确定")),g().createElement("div",{className:ys,id:"listFliterPopup"},Object.values(Y).map((function(t){var n=i[t]||{},a=r[t];return g().createElement(Yc,{key:"filter-section-".concat(t),title:n.title,data:n.data,type:n.type,filterTypeStatus:a,sectionType:t,onItemChange:e.onFilterItemChange})})))),g().createElement("div",{className:gs},g().createElement("div",{className:S()(bs,Os),"data-test":"list-filter-popup-reset",onClick:this.resetFilter},"重置"),g().createElement("div",{className:S()(bs,Ss),"data-test":"list-filter-popup-confirm",onClick:this.onConfirm},"完成")),g().createElement("div",{className:"iphonex-extra-height"}))}}]),r}(g().Component),os=N()(as.prototype,"hideWrapper",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.hide()}}}),cs=N()(as.prototype,"onConfirm",[rs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hide();var r=e.state,n=r.filterStatus,i=r.filterShowAll,a=e.store.sortAndFilterStore.syncFilterStatus2Store(n,i),o=a.isChange,c=a.isStationChange;o&&e.store.updateFilterOpt(c)}}}),ss=N()(as.prototype,"resetFilter",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.store.sortAndFilterStore.getEmptyFilterStatus();e.setState({filterShowAll:1,filterStatus:t})}}}),is=as))||is)||is),Cs={"etd-1":803036,"etd-0":803047,"trainPeriod-1":803048},Is=(0,Cc.Aw)({makeParams:function(e,t){return{op:"click",page_el_sn:Cs[t]||""}}}),Rs="on73fcam",js="Qv0gUSNk",As="TZe9t7fy",Ls="TEloYo1Q",xs="Yr-VtCla",Fs="RyZvynSV",Bs="v1SThRt1",Ms="-Ke6jcC+";function Zs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var qs,Hs,Us,Vs=[{testId:"803036",text:"最早出发",type:"etd-1"},{testId:"803047",text:"最晚出发",type:"etd-0"},{testId:"803048",text:"用时最短",type:"trainPeriod-1"}],zs=function(e){var t=e.data,r=e.onMenuClick,n=t||{},i=n.testId,a=n.text,o=n.type;return g().createElement("div",{className:Ls,"data-test":i,onClick:function(){return r(o)}},a)},Gs=function(e){var t=e.onTabClick,r=e.onMenuClick;return g().createElement("div",{className:Rs},g().createElement("div",{className:js,onClick:t}),g().createElement("section",{className:As},Vs.map((function(e,t){return g().createElement(zs,{data:e,onMenuClick:r,key:"time-sort-".concat(t)})}))))},Xs=(0,b.f3)("store")(Es=(0,b.Pi)((ks=function(e){p()(r,e);var t=Zs(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,e.state={isShowTooltip:!1},e.onTabClick=function(){e.store.isTrainInfoListEmpty||e.setState((function(e){return{isShowTooltip:!e.isShowTooltip}}))},ct()(e,"onMenuClick",ws,ut()(e)),e}return l()(r,[{key:"render",value:function(){var e,t=this.props.className,r=this.state.isShowTooltip,n=this.store.sortAndFilterStore,i=n.isTimeTabActive,a=n.selectedTimeSortMenu;return g().createElement("div",{className:t},g().createElement("span",{onClick:this.onTabClick,"data-test":"803036-803047-803048",className:S()(Fs,o()({},Bs,i))},a,g().createElement("i",{className:S()(xs,(e={},o()(e,Ms,r),o()(e,Bs,i),e))})),r&&g().createElement(Gs,{onTabClick:this.onTabClick,onMenuClick:this.onMenuClick}))}}]),r}(g().Component),ws=N()(ks.prototype,"onMenuClick",[Is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setState({isShowTooltip:!1}),e.store.updateTabSortOpt(G,t)}}}),Es=ks))||Es)||Es,$s=(0,Cc.Aw)({makeParams:function(){return{op:"click",page_el_sn:802718}}}),Ws="-1p3+g4Y",Qs="ljCj3eJU",Js="hWnlwKk9",Ks="IDMCsUyl",Ys="XvkjJHlz";function eu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var tu,ru,nu,iu=(0,b.f3)("store")(qs=(0,b.Pi)((Hs=function(e){p()(r,e);var t=eu(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,ct()(e,"onPriceTabClick",Us,ut()(e)),e}return l()(r,[{key:"render",value:function(){var e=this.props.className,t=this.store.sortAndFilterStore.isPriceTabActive;return g().createElement("div",{className:e,"data-test":"802718",onClick:this.onPriceTabClick},g().createElement("span",{className:S()(Ws,o()({},Ys,t!==Q))},"价格"),g().createElement("span",{className:Qs},g().createElement("i",{className:S()(Js,o()({},Ys,t===K))}),g().createElement("i",{className:S()(Ks,o()({},Ys,t===J))})))}}]),r}(g().Component),Us=N()(Hs.prototype,"onPriceTabClick",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.store.updateTabSortOpt(X)}}}),qs=Hs))||qs)||qs,au=(0,Cc.Aw)({makeParams:function(){return{op:"click",page_el_sn:802720}}}),ou="oFcJYOml";function cu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var su=(0,b.f3)("store")(tu=(0,b.Pi)((ru=function(e){p()(r,e);var t=cu(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,ct()(e,"onStockTabClick",nu,ut()(e)),e}return l()(r,[{key:"render",value:function(){var e=this.props.className,t=this.store.sortAndFilterStore.isStockTabActive;return g().createElement("div",{className:S()(e,o()({},ou,t)),"data-test":"802720",onClick:this.onStockTabClick},"有票优先")}}]),r}(g().Component),nu=N()(ru.prototype,"onStockTabClick",[au],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.store.updateTabSortOpt($)}}}),tu=ru))||tu)||tu,uu=r(16932),lu=r(81086),fu="5_train_list_filter_empty_tip",pu="5_train_list_filter_empty_tip_count";function du(){return mu.apply(this,arguments)}function mu(){return(mu=D()(j().mark((function e(){var t,r,n,i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,lu.W)(fu);case 2:return t=e.sent,e.t1=parseInt,e.next=6,uu.Z.getItem(pu);case 6:if(e.t2=e.sent,e.t0=(0,e.t1)(e.t2,10),e.t0){e.next=10;break}e.t0=0;case 10:return r=e.t0,(n=t||r<3)&&(uu.Z.setItem(fu,Date.now()),i=t?1:r+1,uu.Z.setItem(pu,i)),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hu="vrkbqUTb",vu="_7TAbe1m3",yu="_6VAquztb",gu="_9Rf5Jrxe",bu="Dtub1EUA",Ou="WZ+eA2RP",Su="QrhjRqIv",Tu="-VyYJkaP",Eu="DSb9c-jq",ku=0,wu=1,_u=o()({},wu,3019082);var Du,Pu,Nu,Cu=(0,b.Pi)((function(){var e=(0,Zn.m)().store,t=(e.showCityDuration,e.isTrainInfoListEmpty),r=e.hasNoFilterResult,n=e.$ctx,i=(0,y.useState)(ku),a=w()(i,2),c=a[0],s=a[1],u=(0,y.useState)(!1),l=w()(u,2),f=l[0],p=l[1],d=function(e){f||(s(e),p(!0),setTimeout((function(){return p(!1)}),2e3))};(0,y.useEffect)((function(){function e(){return(e=D()(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,du();case 2:e.sent&&d(wu);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.isLoadScene||!t&&r&&function(){e.apply(this,arguments)}()}),[]);var m=function(e,t){return o()({},wu,"无车次？点此减少条件试试")[e]||""}(c);return f&&m?g().createElement(Bn.Z,{trackingInfo:{page_el_sn:_u[c]}},g().createElement("div",{className:Tu},m,g().createElement("div",{className:Eu}))):null})),Iu=(0,Cc.Aw)({makeParams:function(){return{op:"click",page_el_sn:802721}}});function Ru(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var ju,Au=(0,b.f3)("store")(Du=(0,b.Pi)((Pu=function(e){p()(r,e);var t=Ru(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,ct()(e,"onFilterTabClick",Nu,ut()(e)),e}return l()(r,[{key:"render",value:function(){var e=this.store,t=e.firstRenderEnding,r=e.sortAndFilterStore,n=e.ticketInfo,i=r.toggleFilterPopup,a=r.showFilterPopup,o=(0,r.getFilteStatusActive)(n);return g().createElement("div",{className:hu},g().createElement("div",{className:vu},g().createElement(Xs,{className:yu}),g().createElement(iu,{className:yu}),g().createElement(su,{className:yu}),g().createElement(Lu,{isActive:o,onClick:this.onFilterTabClick})),t&&g().createElement(Cu,null),a&&g().createElement(Ns,{hideCallBack:i}),g().createElement("div",{className:"iphonex-extra-height"}))}}]),r}(g().Component),Nu=N()(Pu.prototype,"onFilterTabClick",[Iu],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.store.sortAndFilterStore.toggleFilterPopup()}}}),Du=Pu))||Du)||Du,Lu=(0,y.memo)((function(e){var t=e.isActive,r=e.onClick;return g().createElement("div",{className:S()(yu,o()({},Su,t)),"data-test":"802721",onClick:r},g().createElement("span",{className:gu},"筛选"),g().createElement("i",{className:S()(bu,o()({},Ou,!t))}))})),xu=r(77319);function Fu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Bu,Mu=(0,b.f3)("store")(ju=(0,b.Pi)(ju=function(e){p()(r,e);var t=Fu(r);function r(){var e;s()(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=e.props.store,e.onDateChanged=function(){var t=D()(j().mark((function t(r,n){var i,a,o;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.store,a=i.isReturnCloseCalendar,o=i.closeReturnCalendarDlg,r||!a){t.next=4;break}return(0,mn.sl)(mn._B.TRAIN_HOMEPAGE,{source:oe}),t.abrupt("return");case 4:if(o(),r||(0,tt.e)({errorMsg:"train_list onDateChanged date not exist"}),it.replaceUrl({depart_date:r}),!r){t.next=10;break}return t.next=10,e.store.changeTicketInfo(r);case 10:n&&n(!1);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e}return l()(r,[{key:"showBottomBar",get:function(){return!this.store.isTrainInfoListEmpty}},{key:"componentDidMount",value:function(){(0,Fn.Z)(this.store.onWebviewBack)}},{key:"render",value:function(){var e=this.store,t=e.selectedDate,r=e.configInfo,n=e.originDepartTime,i=e.isTrainInfoListEmpty,a=e.hasNoFilterResult,o=e.isReturnCloseCalendar,c=e.isReturnCalendarDlg,s=e.ifStudentTicket,u=e.showNightTip,l=e.showFloating;return g().createElement(y.Fragment,null,g().createElement(xn,dn()({needSticky:!0,logData:te,originDepartTime:n,selectedDate:t,onDateChanged:this.onDateChanged,noShowSelectDate:c,ifStudentTicket:s},r)),g().createElement(Gn,null),u&&g().createElement(Wn,null),a?g().createElement(si,{isTrainInfoListEmpty:i,isReturnNoTicket:o}):g().createElement(Zc,null),this.showBottomBar&&g().createElement(Au,null),l&&g().createElement(xu.Z,null))}}]),r}(g().Component))||ju)||ju,Zu="jAssbM99",qu="-Los557V",Hu="VdkQberS";function Uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v()(e);if(t){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m()(this,r)}}var Vu=(0,T.I)({store:fn},{serverTemplateName:"train_list",fallbackCSR:!0,requireLogin:!0,title:"",bootstrapOptions:{shareInfo:{disableShare:!1},usePDDShare:!0,noDefaultTitle:!0,pageProperty:{title:"",pageName:"train_list",pageSN:24993,pv:{keys:["depart_date","start_station","end_station"]}}}})(Bu=(0,b.f3)("store")(Bu=(0,b.Pi)(Bu=function(e){p()(r,e);var t=Uu(r);function r(){return s()(this,r),t.apply(this,arguments)}return l()(r,[{key:"shareInfo",get:function(){return this.props.store.shareInfo}},{key:"render",value:function(){var e,t=this.props.store,r=t.showFrame,n=t.covidInfo;return g().createElement(E.Z,{shareInfo:this.shareInfo,perfLog:!0},g().createElement("div",{className:S()(Zu,(e={},o()(e,Hu,r),o()(e,qu,null==n?void 0:n.covidTip),e))},g().createElement(Mu,null)))}}]),r}(g().Component))||Bu)||Bu)||Bu;(0,i.Z)(Vu,Vu.appConfig.bootstrapOptions)},45289:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"covid_info_pop"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(7620).then(r.bind(r,18131))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 18131}})},77319:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_3FloatingWindow"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(4984).then(r.bind(r,35735))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 35735}})},83829:function(e,t,r){"use strict";function n(e){var t;return"无票"===e?0:e&&e.includes("张")&&null!==(t=e.match(/[1-9][0-9]*/g))&&void 0!==t&&t[0]?parseInt(e.match(/[1-9][0-9]*/g)[0],10)||null:1e4}r.d(t,{d:function(){return n}})},60308:function(e,t,r){"use strict";r.d(t,{_:function(){return a}});var n=r(80837),i=function(e){return n.$.chineseMD(e)};function a(e){var t=e||{},r=t.startStudentSummerDepartDate,n=t.endStudentSummerDepartDate,a=t.startStudentWinterDepartDate,o=t.endStudentWinterDepartDate,c=t.ignoreStudentTicketTime,s=r&&n&&a&&o;return{stuDurationShow:s?"暑假(".concat(i(r),"—").concat(i(n),")，寒假(").concat(i(a),"—次年").concat(i(o),")"):"",stuIsValid:s&&!c,stuDateInfo:{summerStart:r,summerEnd:n,winterStart:a,winterEnd:o}}}},26372:function(e,t,r){"use strict";r.d(t,{$9:function(){return l},$_:function(){return f},xZ:function(){return p},ZV:function(){return d}});var n=r(50008),i=r.n(n),a=r(11865),o=r.n(a),c=r(68929),s=r.n(c);function u(e){return(e||"").startsWith("_")?"_"+o()(e):o()(e)}function l(e,t){if(!e)return e;for(var r in t=t||{},e)e.hasOwnProperty(r)&&("object"===i()(e[r])&&null!==e[r]?t[u(r)]=l(e[r],Array.isArray(e[r])?[]:{}):t[u(r)]=e[r]);return t}function f(e,t){if(!e)return e;for(var r in t=t||{},e)e.hasOwnProperty(r)&&("object"===i()(e[r])&&null!==e[r]?t[o()(r)]=f(e[r],Array.isArray(e[r])?[]:{}):t[o()(r)]=e[r]);return t}function p(e){if(!e)return e;var t={};return Object.keys(e).forEach((function(r){if(e.hasOwnProperty(r)){var n=o()(r);t[n]=e[r]}})),t}function d(e,t){for(var r in t=t||{},e)e.hasOwnProperty(r)&&("object"===i()(e[r])&&null!==e[r]?t[s()(r)]=d(e[r],Array.isArray(e[r])?[]:{}):t[s()(r)]=e[r]);return t}},29404:function(e,t,r){"use strict";r.d(t,{_B:function(){return b},v_:function(){return T},pr:function(){return E},sl:function(){return k},P5:function(){return w},dT:function(){return D},RG:function(){return P},Um:function(){return N},$b:function(){return C},Hr:function(){return I},B7:function(){return R}});var n=r(59713),i=r.n(n),a=r(1607),o=r(41859),c=r(96237),s=r(36792),u=r(53613),l=r(57686),f=r(79072);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m="tcashier_train_checkout.html?_t_timestamp=",h="order.html",v="transac_combine_order.html",y="transac_orders_search_results.html?keyWord=火车票",g="orders.html",b={TRAIN_HOMEPAGE:"train.html",TRAIN_COMPOSE:"train.html?is_compose_page=1",FLIGHT_COMPOSE:"tandy_recliner.html?is_compose_page=1",TRAIN_TICKETS:"trip_tickets.html?scene_group=12",TRAIN_LIST:"train_list.html",TRAIN_RULE:"train_booking_rules.html",TCASHIER:"tcashier_train_checkout.html",INVITE_USER:"invite_user.html",TCASHIER_CHANGE:"".concat(m,"tcashier_train_change"),TCASHIER_GRAB:"".concat(m,"tcashier_train_grab"),TCASHIER_PAID:"".concat(m,"tcashier_train_paid"),RETRIEVE_PASSWORD:"".concat(m,"tcashier_retrieve_password"),TCASHIER_REGISTER:"".concat(m,"tcashier_12306_register"),TCASHIER_REGISTER_CODE:"".concat(m,"tcashier_12306_register_code"),TCASHIER_MEMBER:"".concat(m,"tcashier_12306_member"),PASSENGER_MANAGEMENT:"".concat(m,"tcashier_passenger_management"),PASSENGER_CENTER:"".concat(m,"tcashier_passenger_center"),LOGIN_MANAGEMENT:"".concat(m,"tcashier_login_management"),LOGIN_CENTER:"".concat(m,"tcashier_login_center"),STATION_SCREEN:"".concat(m,"train_station_screen"),TRAIN_SCREEN_DETAIL:"".concat(m,"train_screen_detail"),MOBILE_CODE:"".concat(m,"tcashier_mobile_code"),RESERVE_DETAIL:"".concat(m,"tcashier_reserve_detail"),FACE_VERIFY_RESULT:"".concat(m,"tcashier_face_verify_result"),TCASHIER_PROTOCOLS:"".concat(m,"tcashier_protocols"),TRANSFER_DETAIL:"".concat(m,"train_transfer_detail"),IDENTITY_VERIFY:"".concat(m,"tcashier_identity_verify")};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.lastIndexOf("/"),r=e.indexOf("?");return e.substring(t>=0?t:0,r>=0?r:void 0)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=O(e);t="".concat(t,"-").concat(r),f.ZP.isNativePlatform&&(0,o.k)({stores:{destUrl:e},subOp:t,isRetry:!1})}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=(0,l.Q2)(e,t,r);S(n,"forward"),n?a.ZP.uniformForward(n):(0,c.e)({errorMsg:"navigation_uniformForward_no_url",stores:{url:e,destUrl:n,params:t,keepCamelParams:r}})}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;(0,u.V)(null==e?void 0:e.page_el_sn,e,(function(){return T(t,r,n)}))}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=(0,l.Q2)(e,t,r);S(n,"reload"),n?a.ZP.reload(n):(0,c.e)({errorMsg:"navigation_reload_no_url",stores:{url:e,destUrl:n,params:t,keepCamelParams:r}})}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;(0,u.V)(null==e?void 0:e.page_el_sn,e,(function(){return k(t,r,n)}))}function _(e){var t={url:y,type:e,props:{search_key:"火车票"}};(0,s.Q6)("JSNavigation","forward",t)}function D(e){f.ZP.isNativePlatform?(0,f.BB)()&&f.ZP.isVersionGreaterThanEqual("4.82.0")?_("pdd_order_search"):(0,f.bM)()&&f.ZP.isVersionGreaterThanEqual("4.60.0")?_():E(e,y):E(e,y)}function P(e,t){var r=e||{},n=r.orderSn,i=r.isBatchPay;return t=t||{},n?{url:i?v:h,query:d(d({},t),{},{parentOrderSn:i?n:void 0,orderSn:i?void 0:n})}:{url:g,query:t}}function N(e,t,r){if(null!=e&&e.orderSn){var n=P(e,r);E(t,n.url,n.query)}else D(t)}function C(e,t,r){var n=P(e,r);w(t,n.url,n.query)}function I(e,t,r){var n=t?b.FLIGHT_COMPOSE:b.TRAIN_COMPOSE;T(f.ZP.isNativePlatform?b.TRAIN_TICKETS:n,e,r)}function R(e){a.ZP.back(window.location.href,null,!0,{props:e})}},96701:function(e,t,r){"use strict";r.d(t,{xR:function(){return n},oP:function(){return i},$V:function(){return a}});var n=864e5,i=["05:00","23:30","23:55"],a="8"},30023:function(e,t,r){"use strict";r.d(t,{p1:function(){return n},Hx:function(){return i},rC:function(){return a},sz:function(){return o},k2:function(){return c}});var n="网络不稳定，请稍后再试",i={GUOYUAN:"guoyuan",DDJB_PUSH:"1212duoduojinbao"},a={NORMAL:1,PASSWORD_INPUT:2,CARD_SELECT:4,GENDER_SELECT:5,DATE_SELECT:6,REGION_SELECT:7},o="redirect_tcashier_url",c={IF_OPEN_SKIP_VERIFY:"0_if_open_skip_verify",TCASHIER_ORIGIN_URL:"0_origin_checkout_grab_url",BUY_CHANNEL_STORAGE_KEY:"0_trip_ifDuoduoReserve",ENTRANCE_TEACH_POPUP:"4_train_teach_popup",SHOW_PRIVILEGE:"6_train_snap_show_privilege",SHOW_LOGIN_TIP:"4_loginbar_show_guide_tip",CHECKOUT_MOBILE_INPUT:"7_train_checkout_mobile_input"}},70051:function(e,t,r){"use strict";r.d(t,{Xe:function(){return n},a6:function(){return i}});var n=[7,9,14,15,16,19,29,30],i=[{id:3,name:"硬座"},{id:7,name:"硬卧"},{id:2,name:"二等座"},{id:0,name:"无座"}]},77964:function(e,t,r){"use strict";r.d(t,{In:function(){return o},CX:function(){return c},n7:function(){return s},E4:function(){return u},pC:function(){return l},Qi:function(){return f}});var n,i=r(59713),a=r.n(i),o={NORMAL:0,EXTERNAL:1,STOP:2,ADJUST:3},c=function(e){return parseInt(e,10)>=o.EXTERNAL},s=function(e){return parseInt(e,10)>=o.STOP},u={ALL:"0",NORMAL:"1",HIGH:"23"},l={WAITING_FOR_TRAIN:1,CHECKING_TICKETS:2,STOP_CHECKING_TICKETS:3,PUNCTUALITY:4,ARRIVE_LATE:5,ARRIVE_LATE_NOTIME:6,ARRIVE_ADVANCE:7,STOP_RUNNING:8},f=(n={},a()(n,l.WAITING_FOR_TRAIN,"候车中"),a()(n,l.CHECKING_TICKETS,"检票中"),a()(n,l.STOP_CHECKING_TICKETS,"停止检票"),a()(n,l.PUNCTUALITY,"正点"),a()(n,l.ARRIVE_LATE,"晚点"),a()(n,l.ARRIVE_LATE_NOTIME,"晚点未定"),a()(n,l.ARRIVE_ADVANCE,"早点"),a()(n,l.STOP_RUNNING,"停运"),n)},53613:function(e,t,r){"use strict";r.d(t,{V:function(){return s},f:function(){return u}});var n=r(59713),i=r.n(n),a=r(55622),o=r(6341);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){try{if(t=t||{},!e)throw new Error("empty pageElSn");e&&(0,o.QN)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({op:"click",page_el_sn:e},t)),null==r||r()}catch(e){r&&r()}}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,a.cM)((function(){return{op:"click",page_el_sn:e}}),t)}},80837:function(e,t,r){"use strict";r.d(t,{e:function(){return p},$:function(){return d}});var n=r(34575),i=r.n(n),a=r(93913),o=r.n(a),c=r(30381),s=r.n(c),u=r(2428),l=["今天","明天","后天"],f=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],p=function(e){return s()(e).utc().utcOffset(480)},d=function(){function e(){i()(this,e)}return o()(e,null,[{key:"now",value:function(){var e=u.Z.serverTimeNow();return p(e).valueOf()}},{key:"diffNow",value:function(t){return t-e.now()}},{key:"chineseMD",value:function(e){return p(e).format("M月D日")}},{key:"hColonM",value:function(e){return p(e).format("HH:mm")}},{key:"dateStartTime",value:function(e){return p(e).startOf("day").valueOf()}},{key:"dateEndTime",value:function(e){return p(e).endOf("day").valueOf()}},{key:"isSameDay",value:function(e,t){return p(e).isSame(t,"day")}},{key:"twxDay",value:function(e,t,r){var n=p(e).startOf("day"),i=p(t).endOf("day"),a=p(r);return(a.isAfter(n,"day")||a.isSame(n,"day"))&&(a.isBefore(i,"day")||a.isSame(i,"day"))}},{key:"buyDate",value:function(){return{start:p(e.now()).startOf("day").valueOf(),end:p(e.now()).add(29,"day").endOf("day").valueOf(),book:p(e.now()).add(69,"day").endOf("day").valueOf()}}},{key:"diffNowTag",value:function(t){var r=p(e.now()),n=Math.ceil((p(t).startOf("day")-r.startOf("day"))/864e5);return l[n]||""}},{key:"weekDayTag",value:function(e){var t=p(e).day();return f[t]||""}},{key:"tag",value:function(t){return e.diffNowTag(t)||e.weekDayTag(t)}},{key:"dayIncrease",value:function(e,t){return p(e).add(t?1:-1,"day").valueOf()}},{key:"formatYMD",value:function(e){return p(e).format("YYYY.MM.DD")}},{key:"dayDifference",value:function(e,t){return e&&t?s()(e).startOf("day").diff(s()(t).startOf("day"),"days"):0}},{key:"monthDifference",value:function(e,t){return e&&t?s()(e).startOf("month").diff(s()(t).startOf("month"),"month"):0}}]),e}()},54168:function(e,t,r){"use strict";r.d(t,{ve:function(){return s}});var n=r(80837),i="距离发车时间太近无法购票，换个车次试试";function a(e,t){return n.$.diffNow(e)<t}var o={timeEarly:a,validataTime:function(e,t){var r=a(e,t||18e5);return{isTimeEarly:r,toast:r?i:"",isTimeLater:!1}}},c=r(85615);function s(e){var t=e.isReschedule,r=e.startStationTime,n=e.startStation,i=e.originDepartTime,a=e.bookTimeLimit;return t?c.Z.validataTime({startStationTime:r,startStation:n,originStartStationTime:i}):o.validataTime(r,a)}},85615:function(e,t,r){"use strict";var n=r(80837),i={"香港西九龙":{limitedTime:36e5},default:{limitedTime:15e5}},a="已过发车时间，无法申请改签",o="临近发车，请前往车站窗口办理改签",c="无法改签至晚于原出发日期的车次";function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=i[t]||i.default;return n.$.diffNow(e)<=r.limitedTime}function u(e,t){return n.$.diffNow(e)<=1728e5&&t>n.$.dateEndTime(e)}t.Z={timeEarly:s,timeLater:u,validataTime:function(e){var t=e.startStationTime,r=e.startStation,i=e.originStartStationTime,l={isTimeEarly:!1,toast:"",isTimeLater:!1},f=n.$.dateEndTime(i);return n.$.diffNow(f)<0?(l.isTimeEarly=!0,l.toast=a,l):"香港西九龙"===r&&(l.isTimeEarly=s(i,r),l.isTimeEarly)?(l.toast=o,l):(l.isTimeLater=u(i,t),l.isTimeLater&&(l.toast=c),l)}}},14102:function(e,t,r){"use strict";r.d(t,{L:function(){return a},W:function(){return o}});var n=r(80837),i=function(e,t,r){for(var n=e.split(":"),i=t.split(":"),a=Math.max(n.length,i.length),o=0;o<a;++o){var c=parseInt(n[o]||"0"),s=parseInt(i[o]||"0");if(c!==s)return s>c}return!!r};function a(e,t){var r=n.$.hColonM(n.$.now());return i(t,e)?i(e,r,!0)||i(r,t):i(e,r,!0)&&i(r,t)}function o(e){var t=e.summerStart,r=e.summerEnd,i=e.winterStart,a=e.winterEnd,o=e.checkTime,c=n.$.twxDay(t,r,o),s=!c&&n.$.twxDay(i,a,o);return{isInSummer:c,isInWinter:s,isInHoliday:c||s}}},45273:function(e,t,r){"use strict";r.d(t,{Z:function(){return a},k:function(){return o}});var n=r(82094),i=r(79072);function a(e){i.ZP.isNativePlatform?function(e){(0,n.Fz)(e),(0,n.rB)("onApplicationResume",e)}(e):window.addEventListener("pageshow",(function(e){e.persisted&&location.reload()}))}function o(e){try{return"string"==typeof e&&(e=JSON.parse(e)),e}catch(e){return{}}}},79072:function(e,t,r){"use strict";r.d(t,{bM:function(){return a},JD:function(){return o},BB:function(){return c},bl:function(){return s}});var n=r(38533),i=r(99433);function a(){return(0,n.zT)().platform===i.iw.PddAndroid}function o(){return(0,n.zT)().system===i.we.Android}function c(){return(0,n.zT)().platform===i.iw.PddIOS}function s(){var e=(0,n.zT)();return(0,i.yC)(e.systemVersion,"12.0")<0&&e.system===i.we.IOS}t.ZP=(0,n.zT)()},88666:function(e,t,r){"use strict";function n(e){return function(e,t){for(var r=0;e&&e!==t;)r+=e.offsetTop,e=e.offsetParent;return r}(e,document.body)}r.d(t,{y:function(){return n}})},16932:function(e,t,r){"use strict";r.d(t,{Z:function(){return R}});var n={};r.r(n),r.d(n,{getItem:function(){return b},isNativeSupport:function(){return g},setItem:function(){return S}});var i={};r.r(i),r.d(i,{getItem:function(){return N},setConfig:function(){return C},setItem:function(){return D}});var a=r(48926),o=r.n(a),c=r(34575),s=r.n(c),u=r(93913),l=r.n(u),f=r(87757),p=r.n(f),d=r(69483),m=r.n(d),h=r(96237),v=r(36792),y=r(79072);function g(){return!!y.ZP.isNativePlatform&&y.ZP.isVersionGreaterThanEqual("4.0.0")}function b(e){return O.apply(this,arguments)}function O(){return(O=o()(p().mark((function e(t){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.Q6)("AMStorage","get",{key:t});case 3:return r=e.sent,e.abrupt("return",r&&r.value);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function S(e,t){return(0,v.Q6)("AMStorage","set",{key:e,value:t})}var T=r(81086);function E(e){return k.apply(this,arguments)}function k(){return(k=o()(p().mark((function e(t){var r,n,i,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().keys();case 2:return r=e.sent,n=r.filter((function(e){var t=parseInt(e.split("_")[0]);return t>=0&&t<=6})).sort().reverse(),e.next=6,Promise.all(n.map((function(e){return m().getItem(e)})));case 6:i=e.sent,a=0,i.forEach((function(e,r){a<2*t&&(a+=JSON.stringify(e).length,m().removeItem(n[r]))}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t,r,n){return _.apply(this,arguments)}function _(){return(_=o()(p().mark((function e(t,r,n,i){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"].includes(t&&t.name)||i<3)){e.next=5;break}return e.next=3,E(JSON.stringify(r).length);case 3:D(n,r,i),i++;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return P.apply(this,arguments)}function P(){return P=o()(p().mark((function e(t,r){var n,i=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:0,e.prev=1,e.next=4,m().setItem(t,r);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),(0,T.c)(e.t0),e.next=11,w(e.t0,r,t,n);case 11:case"end":return e.stop()}}),e,null,[[1,6]])}))),P.apply(this,arguments)}function N(e){return m().getItem(e)}function C(e){m().config({driver:[m().WEBSQL,m().INDEXEDDB,m().LOCALSTORAGE],name:e})}var I=function(){function e(){s()(this,e),this.utilforage=void 0,g()?this.utilforage=n:(this.utilforage=i,C("TRIP"))}return l()(e,[{key:"getItem",value:function(){var e=o()(p().mark((function e(t){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.utilforage.getItem(t);case 3:return r=e.sent,n=JSON.parse(r),e.abrupt("return",n.value);case 8:return e.prev=8,e.t0=e.catch(0),(0,T.c)("StorageHelper getItem key ".concat(t," ").concat(e.t0)),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setItem",value:function(e,t){try{var r=JSON.stringify({value:t});this.utilforage.setItem(e,r)}catch(t){(0,h.e)({errorMsg:"StorageHelper error ".concat(e),error:t})}}}]),e}(),R=new I},81086:function(e,t,r){"use strict";r.d(t,{c:function(){return s},W:function(){return l}});var n=r(48926),i=r.n(n),a=r(87757),o=r.n(a),c=r(16932);function s(e){}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new Date,n=new Date(Number(e));return!(r<=n)&&(r.setHours(0,0,0,0),n.setHours(0,0,0,0),(r-n)/864e5>=t)}function l(e){return f.apply(this,arguments)}function f(){return(f=i()(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getItem(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:return r=e.t0,e.abrupt("return",!r||u(r,1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},57686:function(e,t,r){"use strict";r.d(t,{ZS:function(){return b},XX:function(){return O},Q2:function(){return S},FD:function(){return k},h8:function(){return w}});var n=r(48926),i=r.n(n),a=r(59713),o=r.n(a),c=r(27361),s=r.n(c),u=r(87757),l=r.n(u),f=r(30064),p=r(38533),d=r(36792),m=r(1607),h=r(96237),v=r(26372);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(){return(0,f.mB)(window.location.search)}function O(e){var t=b();return t?t[e]:null}function S(e,t,r){t=t||{},r=r||{};var n=(0,f.XP)(g(g({},(0,v.$9)(t,{})),r));return(e=e||location.pathname)+(e.includes("?")?"&":"?")+n}function T(e){var t=window.location.href;t!==e&&s()(window,"Navigation.CurrentWebUrl")!==e&&(0,h.e)({error:{},errorMsg:"".concat(window.location.pathname,"-check replaceURL failed"),stores:{targetURL:e,currentURL:t}})}function E(){return(E=i()(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=(0,p.zT)()).statisfy||!r.statisfy("1.2.5","2.1.0","greaterThan")){e.next=13;break}return e.prev=2,e.next=5,(0,d.Q6)("WebScene","replaceURL",{url:t});case 5:return window.Navigation.CurrentWebUrl=t,T(t),e.abrupt("return");case 10:e.prev=10,e.t0=e.catch(2),(0,h.e)({error:e.t0,errorMsg:"".concat(window.location.pathname,"-replaceURL failed"),stores:{url:t,currentURL:window.location.href}});case 13:m.ZP.replaceURL(t,(function(){T(t)}));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function k(e){!function(e){E.apply(this,arguments)}(function(e,t){return(0,f.De)(t||location.pathname,g(g({},b()),(0,v.$9)(e,{})))}(e,""))}function w(e){m.ZP.replaceQuery(e),k(e)}},57186:function(e,t,r){"use strict";r.d(t,{TS:function(){return u},AC:function(){return l},JE:function(){return f},XX:function(){return p}});var n=r(23493),i=r.n(n),a=r(1607),o=r(66197),c=r(30023),s=r(16932);function u(e,t){var r={};return Object.keys(e).forEach((function(n){r[n]=e[n]||t[n]})),r}var l=i()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;(0,o.Z)(e,{duration:t/1e3,onClose:function(){return a.ZP.back()}})}),2e3);function f(){var e=location.pathname+location.search;s.Z.setItem(c.k2.TCASHIER_ORIGIN_URL,e)}function p(){return s.Z.getItem(c.k2.TCASHIER_ORIGIN_URL)}},80644:function(e,t,r){"use strict";r.d(t,{_:function(){return j}});var n,i,a=r(48926),o=r.n(a),c=r(21165),s=r.n(c),u=r(34575),l=r.n(u),f=r(93913),p=r.n(f),d=r(81506),m=r.n(d),h=r(16525),v=r.n(h),y=r(2205),g=r.n(y),b=r(78585),O=r.n(b),S=r(29754),T=r.n(S),E=r(33124),k=r.n(E),w=(r(67268),r(87757)),_=r.n(w),D=r(22188),P=r(62424),N=r(96060),C=r(36406),I=r(53955);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T()(e);if(t){var i=T()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O()(this,r)}}var j=(n=function(e){g()(n,e);var t,r=R(n);function n(){var e;l()(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).$ctx=void 0,e.$axiosHttp=void 0,s()(e,"renderError",i,m()(e)),e}return p()(n,[{key:"initAxiosHttp",value:function(e){e.req,e.res,e.accessToken;var t={pageInfo:e.pageInfo};this.$axiosHttp=(0,C.W)(t)}},{key:"initClientData",value:(t=o()(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()(T()(n.prototype),"initClientData",this).call(this,t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"initCommonPageData",value:function(e){}},{key:"initDataCallback",value:function(e){return this.$ctx=(0,I.d)(e),this.initCommonPageData(e),v()(T()(n.prototype),"initDataCallback",this).call(this,e)}},{key:"fromJS",value:function(e,t){var r;e&&e.isServerRendered&&(Object.assign(this,e),this.initAxiosHttp({pageInfo:t}),this.initServices(this.$axiosHttp),(r=this).$substores&&Object.values(r.$substores.values||{}).forEach((function(e){e.isfinishedInitData&&e.initClientData()})),this.dispatchEvent()),(0,P.zv)()}},{key:"dispatchEvent",value:function(){var e=document.createEvent("HTMLEvents");e.initEvent("PRE_RENDER_TARGET",!0,!0),document.dispatchEvent(e)}}]),n}(N.j),i=k()(n.prototype,"renderError",[D.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k()(n.prototype,"initClientData",[D.aD],Object.getOwnPropertyDescriptor(n.prototype,"initClientData"),n.prototype),k()(n.prototype,"initDataCallback",[D.aD],Object.getOwnPropertyDescriptor(n.prototype,"initDataCallback"),n.prototype),k()(n.prototype,"fromJS",[D.aD],Object.getOwnPropertyDescriptor(n.prototype,"fromJS"),n.prototype),n)},93054:function(e,t,r){"use strict";r.d(t,{z:function(){return p}});var n=r(48926),i=r.n(n),a=r(34575),o=r.n(a),c=r(93913),s=r.n(c),u=r(87757),l=r.n(u),f=r(62331),p=function(){function e(t){var r=this;o()(this,e),this.$parent=void 0,this.isfinishedInitData=!1,this.initData=function(){var e=i()(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.initServices(r.$parent.$axiosHttp),e.next=3,r.initDataCallback(t);case 3:r.prepareClientData();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,f.Y)(this,"$parent",t)}var t;return s()(e,[{key:"prepareClientData",value:function(){}},{key:"initServices",value:function(e){}},{key:"getDataSource",value:function(e){}},{key:"finishInitData",value:function(){this.isfinishedInitData=!0}},{key:"initDataCallback",value:(t=i()(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDataSource(t);case 2:this.finishInitData();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"initClientData",value:function(){this.initServices(this.$parent.$axiosHttp),this.prepareClientData()}}]),e}()},77181:function(e,t,r){"use strict";r.d(t,{$:function(){return m}});var n=r(34575),i=r.n(n),a=r(93913),o=r.n(a),c=r(93054),s=r(62331),u=0;function l(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}var f=function(){function e(t){i()(this,e),this.values=void 0,this.name=void 0,this.name="".concat(t.constructor.name,"@").concat(++u),this.values={}}return o()(e,[{key:"read",value:function(e,t){return this.values[t]}},{key:"write",value:function(e,t,r){Object.assign(this.values[t],r)}}]),e}();function p(e){return{configurable:!0,enumerable:!0,get:function(){return this.$substores.read(this,e)},set:function(t){this.$substores.write(this,e,t)}}}function d(e){if(!0!==e.__substoreDidRunLazyInitializers){var t=e.__substoreDecorators;if(t)for(var r in l(e,"__substoreDidRunLazyInitializers",!0),function(e){if(e.$substores)return e.$substores;var t=new f(e);(0,s.Y)(e,"$substores",t)}(e),t){var n=t[r],i=n.name,a=n.SubStoreClass;e.$substores.values[i]=new a(e),Object.defineProperty(e,i,p(i))}}}var m=function(e){return function(t,r){return Object.getPrototypeOf(e)!==c.z&&console.warn("SubStoreClass need extends SubViewStore"),Object.prototype.hasOwnProperty.call(t,"__substoreDecorators")||l(t,"__substoreDecorators",Object.assign({},t.__substoreDecorators)),t.__substoreDecorators[r]={name:r,SubStoreClass:e},{configurable:!0,enumerable:!0,get:function(){return d(this),this[r]},set:function(e){d(this),this[r]=e}}}}},62331:function(e,t,r){"use strict";function n(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}r.d(t,{Y:function(){return n}})},93073:function(e,t,r){"use strict";r.d(t,{m:function(){return o}});var n=r(67294),i=r.n(n),a=r(49408);function o(){return i().useContext(a.yX)}},53955:function(e,t,r){"use strict";r.d(t,{Z:function(){return l},d:function(){return f}});var n=r(27361),i=r.n(n),a=r(67294),o=r.n(a),c=r(38533),s=r(99433);function u(e){try{return 1===JSON.parse(i()(e,'headers["p-uno-context"]')||"{}").ls}catch(e){return!1}}var l=o().createContext(null);function f(e){return{webpEnable:i()(e,"isSupportWebp"),platform:(i()(e,"userAgent"),t=(0,c.Xf)(window.navigator.userAgent),{current:t.platform,isNativePlatform:t.isNativePlatform,isWeChat:t.isWeChatPlatform,isTinyNativePlatform:t.isTinyNativePlatform,isIOS:t.system===s.we.IOS}),pageName:i()(e,"__res.locals.pageName"),isLoadScene:u(i()(e,"__req"))};var t}},27325:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(67154),i=r.n(n),a=r(67294),o=r.n(a),c=r(53955);function s(e){return function(t){return o().createElement(c.Z.Consumer,null,(function(r){return o().createElement(e,i()({},t,{ctx:r}))}))}}},92272:function(e,t,r){"use strict";r.d(t,{b:function(){return Z}});var n=r(48926),i=r.n(n),a=r(59713),o=r.n(a),c=r(6479),s=r.n(c),u=r(34575),l=r.n(u),f=r(93913),p=r.n(f),d=r(87757),m=r.n(d),h=r(2428),v=r(36406),y=r(50008),g=r.n(y),b=r(97792),O=[5e6,1e7];function S(e,t){return(e=parseInt(e,10))>=O[0]&&e<=O[1]?t:""}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){return parseInt(e.errorCode,10)===b.Bq.AUTHENTICATION_FAILED||"needLogin"===e.errorMsg||"needLogin"===e.errorCode}var k=function(e,t){!function(e){if(E(e=e||{}))throw e}(e)};var w=function(e,t,r,n){var i=(n||{}).useApiErrorMsg||!r.includes("api/mayflower"),a=t||{};if("object"===g()(a)&&!Array.isArray(a)){var c=e.code,s=e.errorCode,u=e.errorMsg;a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isApiError:!0,code:c,errorCode:s,errorMsg:i?u:S(s,u)},a)}return a},_=r(12714);var D=r(46002);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=0,I=1,R={url:"api/mayflower/train/async/result",risk:!0,defaultValue:{}};function j(e,t,r,n){return new Promise((function(a){var o=1,c=null,s=function(){var s=i()(m().mark((function i(){var s,u,l;return m().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e(N(N({params:t},n),R));case 2:u=i.sent,l=null===(s=u.asyncApiData)||void 0===s?void 0:s.status,o>=30&&l===C&&(u.isApiError=!0),(u.isApiError||l===I)&&(clearInterval(c),(0,D.Q)({count:o,params:t,originParams:r,response:u}),a(u));case 6:case"end":return i.stop()}}),i)})));return function(){return s.apply(this,arguments)}}();c=setInterval((function(){o+=1,s()}),1e3),s()}))}var A=["customDataHandler","url"],L=["url","params","extrats","customConfig"],x=["url","params","risk","extrats","customConfig"],F=["url","params"];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z=function(){function e(t){var r=this;if(l()(this,e),this._handleResError=function(e,t){var r=t.customErrorHandler,n=t.defaultValue,i=t.url,a=t.customConfig;return k(e),r?r(e):w(e,n,i,a)},this._handleResData=function(e,t){var r=t.customDataHandler,n=t.url,i=s()(t,A),a=e;return function(e,t){var r=e||{},n=r.result;r.success&&!n&&(0,_.K2)(new Error("api response no result"),{error_msg:"api_response_no_result",params:JSON.stringify({data:e,api_url:t}),sub_op:"api_response_no_result"})}(a,n),r&&(a=r(e,M({},i))),a},this.get=function(){var e=i()(m().mark((function e(t){var n,i,a,o,c,u,l,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.params,a=t.extrats,o=void 0===a?{}:a,c=t.customConfig,u=void 0===c?{}:c,l=s()(t,L),e.prev=1,e.next=4,r.$http.get(n,M(M({},o),{},{params:i,customConfig:u}));case 4:return f=e.sent,e.abrupt("return",r._handleResData(f,M({url:n,params:i},l)));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r._handleResError(e.t0,M({url:n,customConfig:u},l)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.post=function(){var e=i()(m().mark((function e(t){var n,i,a,o,c,u,l,f,p,d;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.params,a=void 0===i?{}:i,o=t.risk,c=t.extrats,u=void 0===c?{}:c,l=t.customConfig,f=void 0===l?{}:l,p=s()(t,x),e.prev=1,e.next=4,r.$http.post(n,a,M(M({},u),{},{customConfig:f,risk:o}));case 4:return d=e.sent,e.abrupt("return",r._handleResData(d,M({url:n,params:a},p)));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r._handleResError(e.t0,M({url:n,params:a,customConfig:f},p)));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.asyncQuerypost=i()(m().mark((function e(){var t,n,i,a,o,c,u,l,f,p,d=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=d.length>0&&void 0!==d[0]?d[0]:{}).customConfig=M(M({},t.customConfig||{}),{},{asyncApi:!0}),t.params=M(M({},t.params||{}),{},{async:!0}),e.next=5,r.post(t);case 5:if(n=e.sent,a=(i=n||{}).isApiError,o=i.asyncApiData,!a&&null!=o&&o.requestId){e.next=9;break}return e.abrupt("return",n);case 9:return u=(c=t||{}).url,l=c.params,f=s()(c,F),p={url:u,params:l},e.abrupt("return",j(r.post,{requestId:null==o?void 0:o.requestId},p,f));case 12:case"end":return e.stop()}}),e)}))),this.isClient=!0,this.$http=t||this._initClientHttp(),!this.$http)throw Error("$http is lost");this.isClient&&h.Z.serverTime(this.get)}return p()(e,[{key:"_initClientHttp",value:function(){return this.isClient?(0,v.W)():null}}]),e}()},2428:function(e,t,r){"use strict";var n=r(48926),i=r.n(n),a=r(87757),o=r.n(a);t.Z={__serverTimeDiff:0,serverTime:function(e){var t=this;return i()(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.__serverTime){r.next=2;break}return r.abrupt("return",t.__serverTime);case 2:return t.__queryPromise=t.__queryPromise||t.queryServerTime(e),r.abrupt("return",t.__queryPromise);case 4:case"end":return r.stop()}}),r)})))()},queryServerTime:function(e){var t=this;return i()(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getServerTime(e);case 2:return t.__serverTime=r.sent,t.setServerTimeDiff(t.__serverTime),t.__queryPromise=null,r.abrupt("return",t.__serverTime);case 6:case"end":return r.stop()}}),r)})))()},setServerTimeDiff:function(e){this.__serverTimeDiff=e-Date.now()},serverTimeNow:function(){return this.__serverTimeDiff+Date.now()},getServerTime:function(e){return e({url:"api/server/_stm",customConfig:{skipBizErrorCheck:!0}}).then((function(e){return e&&e.serverTime||Date.now()})).catch((function(){return Date.now()}))}}},36406:function(e,t,r){"use strict";r.d(t,{W:function(){return T}});var n=r(25370),i=r(53527),a=r(98717),o=r(59713),c=r.n(o),s=r(97792),u=r(12714),l=r(26372),f=r(46002);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(){return{request:function(e){return e.data&&(e.data=(0,l.$_)(e.data)),e.params&&(e.params=(0,l.$_)(e.params)),e}}},h=function(){return{response:function(e){var t=e.config.customConfig;return t&&t.skipCamelCaseResponse||(e.data=(0,l.ZV)(e.data)),e}}},v=function(){return{response:function(e){var t=e.config.customConfig;if(null==t||!t.asyncApi)return e;var r=e.data,n=r.result,i=r.status,a=r.requestId;return e.data.result=d(d({},n||{}),{},{asyncApiData:{status:i,requestId:a}}),e}}},y=function(){return{response:function(e){var t=e.config.customConfig;if(t&&t.skipBizErrorCheck)return e;var r=e.data,n=e.config;if(!r.success||!r.result){var i=r.errorMsg||"project unknown biz error",a=new Error(i);throw a.errorType="project_api_biz_error",a.errorCode=r.errorCode||"unknow",a.data=r,a.config=n,a.isDefaultCustomErrorChecker=!0,a.errorMsg=r.errorMsg,a}return e}}},g=function(e){return{responseError:function(t){var r=t.config,n=r.customConfig||{},i=n.needTimeoutRetry,a=n.retryDelay,o=void 0===a?1:a,c=n.retry,s=void 0===c?3:c;if(!i||![6e4,620011,-40057].includes(t.errorCode))return Promise.reject(t);if(r.__retryCount=r.__retryCount||0,r.__retryCount>=s)return Promise.reject(t);r.__retryCount+=1;var l={sub_op:"project_api_biz_error",url:r.method+":"+r.url,page_url:location.href,error_code:t.errorCode,error_msg:"axiosRetryInterceptor start ".concat(r.__retryCount," times"),error_type:t.errorType,params:JSON.stringify({params:r.params,data:r.data})};(0,u.K2)(t,d(d({},l),{},{sub_op:"api_error"}));var f=new Promise((function(e){setTimeout((function(){e()}),o)}));return r.data=JSON.parse(r.data||{}),f.then((function(){return e(r)}))}}},b=function(){return{responseError:function(e){if("project_api_biz_error"!==e.errorType)throw e;var t=e.errorCode,r=e.errorMsg,n=e.data,i=e.config,a=(i.url.split("?")[0]||"").replace(i.baseURL,""),o="".concat(t,"-").concat(a,"-").concat((0,f.b)(t,r||(0,s.fY)(t))),c={sub_op:"project_api_biz_error",url:i.method+":"+i.url,page_url:location.href,error_code:e.errorCode,error_msg:o,error_type:e.errorType,params:JSON.stringify({params:i.params,data:i.data,apiResponseTimeout:752===e.errorCode}),resData:n};throw(0,u.K2)(e,d(d({},c),{},{sub_op:"api_error"})),e}}},O=r(38356),S=function(e,t){return t.forEach((function(t){e.interceptors.request.use(t.request),e.interceptors.response.use(t.response,t.responseError)}))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,r=(0,i.e6)(),o={pageId:r};t=(0,n.e)({pageInfo:o},{useRawResponse:!0});var c=[(0,O.WE)(),m(),h(),v(),y(),b(e),{response:function(e){var t=e.config.customConfig;return null!=t&&t.skipBizErrorCheck?e.data:e.data.result}},g(t)];return c.unshift(a.Z),S(t,c),t}},46002:function(e,t,r){"use strict";r.d(t,{b:function(){return u},Q:function(){return l}});var n=r(59713),i=r.n(n),a=r(12714);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={9200314:{regx:/(「).+(」)/,replaceText:"$1xxx$2"},5000002:{regx:/(乘车人).+(手机号重复)/,replaceText:"$1xxx,xxx$2"},9200309:{msg:"人脸核验+短信错误提示信息"},9200318:{msg:"核对您发送验证短信的手机号码"}};function u(e,t){var r,n;if(null!==(r=s[e])&&void 0!==r&&r.msg)return null===(n=s[e])||void 0===n?void 0:n.msg;var i=s[e];return i&&t?t.replace(i.regx,i.replaceText):t}function l(e){var t=e.count,r=e.params,n=e.originParams,i=e.response,o=new Error("asyncApi resolve result"),s=u(i.errorCode,i.errorMsg),l={error_msg:"asyncApi resolve result",sub_op:"api_error",count:t,params:JSON.stringify({params:r,originParams:n,response:c(c({},i),{},{errorMsg:s})})};(0,a.K2)(o,l)}},38356:function(e,t,r){"use strict";r.d(t,{v0:function(){return m},WE:function(){return g}});var n=r(48926),i=r.n(n),a=r(87757),o=r.n(a),c=r(38533),s=r(99433),u=r(2428),l=null,f=function(){var e=(0,c.zT)(),t=e.version;return e.isNativePlatform&&(0,s.yC)(t,"4.69.0")>=0};function p(){return d.apply(this,arguments)}function d(){return(d=i()(o().mark((function e(){var t,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(5928).then(r.bind(r,96636));case 2:return t=e.sent,n=t.default,e.next=6,u.Z.serverTime();case 6:i=e.sent,l=new n({serverTime:i});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return(h=i()(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=3;break}return e.next=3,p();case 3:return e.abrupt("return",l.messagePackSync());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return y.apply(this,arguments)}function y(){return(y=i()(o().mark((function e(t,r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||{},!r||!f()){e.next=4;break}return t.useNativeAntiToken=!0,e.abrupt("return",t);case 4:return e.next=6,m();case 6:if(n=e.sent,!t.risk_request){e.next=10;break}return t.risk_request={anti_content:n},e.abrupt("return",t);case 10:return t.anti_content=n,e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){return{request:(e=i()(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.risk){e.next=2;break}return e.abrupt("return",t);case 2:return t.method,r=t.customConfig||{},n=r.useNativeRisk,e.next=6,v(t.data,n);case 6:return t.data=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e}},9714:function(e,t,r){"use strict";r.d(t,{KQ:function(){return i}});var n=r(27527);function i(e,t){return(0,n.ZP)(e,t)}},78357:function(e,t,r){"use strict";r.d(t,{Z:function(){return V}});var n=r(59713),i=r.n(n),a=r(48926),o=r.n(a),c=r(87757),s=r.n(c),u=r(67294),l=r.n(u),f=r(49408),p=r(94184),d=r.n(p),m=r(24684),h=r(66197),v=r(1010),y=r(54268),g=r(33162),b=r(6341),O=r(96237),S=r(57028),T=r(37576),E=r(26974),k="jXbp-4PT",w="JF6a93Ph",_="Su5B-Gzl",D="Dd8YHmFl",P="atXi-neZ",N="_1Gou5XgO",C="MNOJP2kJ",I="UAZHCXkI",R="DjUCoSN+",j="bnGI3Fo0",A="e5Ub-y1N",L="sOJbxH3+",x="Io7jfNDk",F="_2ZegpywC",B=(0,y.H)("/order_checkout/a8e6ba71-9620-445c-b59b-499413fb5d60.png.slim.png"),M={IMPR:5443338,OPEN:5443339,CANCEL:5443340},Z={IMPR:5443346,OPEN:5443347,CANCEL:5443348},q=(0,u.memo)((function(e){var t=e.station,r=e.timeSplit,n=e.date;return l().createElement("div",{className:D},l().createElement("span",{className:N},t),l().createElement("span",{className:C},null==r?void 0:r[0],l().createElement("span",{className:I},":"),null==r?void 0:r[1]),l().createElement("span",{className:P},n))})),H=(0,u.memo)((function(e){var t=e.trainInfo||{},r=t.startStation,n=t.showEtdDate,i=t.etdSplit,a=t.trainNo,o=t.endStation,c=t.etaSplit,s=t.showEtaDate;return t.eta?l().createElement(S.Z,{background:!0,src:B,className:_,resizeWidth:504},l().createElement(q,{station:r,timeSplit:i,date:n}),l().createElement("div",{className:R},l().createElement("div",{className:j},a),l().createElement("div",{className:A})),l().createElement(q,{station:o,timeSplit:c,date:s})):null})),U=(0,f.Pi)((function(e){var t=e.onConfirm,r=e.onClose,n=e.trainInfo,a=e.seatType,c=e.remindType,u=e.remindLevel,f=e.isRetain,p=e.title,y=e.jumpUrl,S=n.startStation,_=n.endStation,D=n.trainNo,P=n.etd,N=n.eta,C=f?Z:M,I=function(){var e=o()(s().mark((function e(){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,b.Vr)(C.OPEN),r={trainNo:D,startStation:S,endStation:_,departTime:P,arriveTime:N,seatType:a,remindType:c,remindLevel:u,jumpUrl:y},e.next=4,T.Z.addRemind(r);case 4:if(!(n=e.sent).isApiError){e.next=9;break}return(0,h.Z)("当前预订人数过多，请稍候重试"),(0,O.e)({errorMsg:"add remind error",stores:{data:n}}),e.abrupt("return");case 9:t();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){e.stopPropagation()},j=function(){(0,b.Vr)(C.CANCEL),r()};return l().createElement(m.Z,{trackingInfo:{page_el_sn:C.IMPR}},l().createElement(g.Z,{visible:!0,onBackdropClick:R},l().createElement("div",{className:k,onClick:R},l().createElement("span",{className:w},p||"开启提醒，车次".concat(c===E.l.SALE?"开售":"有票","时通知您购票")),l().createElement(H,{trainInfo:n}),l().createElement("div",{className:d()(L,i()({},F,!(null!=n&&n.eta))),onClick:I},"开启提醒"),l().createElement("div",{className:x,onClick:j},"稍后再说"),l().createElement(v.Z,{onClick:j}))))})),V=U},37576:function(e,t,r){"use strict";var n=r(34575),i=r.n(n),a=r(93913),o=r.n(a),c=r(2205),s=r.n(c),u=r(78585),l=r.n(u),f=r(29754),p=r.n(f),d=r(92272);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var h="api/mayflower/remind/add",v="api/mayflower/remind/close",y=function(e){s()(r,e);var t=m(r);function r(){return i()(this,r),t.apply(this,arguments)}return o()(r,[{key:"addRemind",value:function(e){return this.post({url:h,params:e,risk:!0,defaultValue:{}})}},{key:"closeRemind",value:function(e){return this.post({url:v,params:e,risk:!0,defaultValue:{}})}}]),r}(d.b);t.Z=new y},26974:function(e,t,r){"use strict";r.d(t,{l:function(){return n},p:function(){return i}});var n={TICKET:1,SALE:2,ARRIVE:3,CHECKOUT:4},i={TRAIN:1,SEAT:2}},66910:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(34575),i=r.n(n),a=r(93913),o=r.n(a),c=r(81506),s=r.n(c),u=r(2205),l=r.n(u),f=r(78585),p=r.n(f),d=r(29754),m=r.n(d),h=r(67294),v=r.n(h),y=r(73935);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p()(this,r)}}var b=function(e){l()(n,e);var t=g(n);function n(e){var r;return i()(this,n),(r=t.call(this,e)).provideOptions=function(){r.domNode=(0,y.findDOMNode)(s()(r)),r.domNode&&r.registerObserverToComponent()},r.registerObserverToComponent=function(){var e=r.props,t={threshold:[.75],rootMargin:e.rootMargin,root:e.root};r.observer=new IntersectionObserver(r.observerCallBack,t),r.observer.observe(r.domNode)},r.unRegisterOnserver=function(){r.observer&&r.domNode&&r.observer.unobserve(r.domNode)},r.observerCallBack=function(e,t){var n=r.props,i=n.onEnter,a=n.once;e.forEach((function(e){r.isItemIn(e)&&(i&&i(),a&&r.unRegisterOnserver())}))},r.isItemIn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props.threshold;return e.isIntersecting&&e.intersectionRatio>=t},r.observer=null,r.domNode=null,r}return o()(n,[{key:"componentDidMount",value:function(){r(66337),this.provideOptions()}},{key:"componentWillUnmount",value:function(){this.unRegisterOnserver()}},{key:"render",value:function(){return v().Children.only(this.props.children)}}]),n}(h.Component);b.defaultProps={root:null,threshold:1,rootMargin:"0px",once:!0,onEnter:function(){}}},37548:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1approchingReminder"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(3816).then(r.bind(r,17731))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 17731}},{ssr:!1,style:{}})},96967:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1calendar"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(6268).then(r.bind(r,24648))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 24648}},{ssr:!0,style:{}})},57028:function(e,t,r){"use strict";var n=r(67154),i=r.n(n),a=r(6479),o=r.n(a),c=r(67294),s=r.n(c),u=r(22882),l=r(9164),f=r(44968),p=r(27325),d=["src","background","lazy","children"],m=["src","innerRef","resizeWidth","ctx","quality","preloadResourceName","forceSkipCDN"];function h(e){var t=e.src,r=e.background,n=e.lazy,a=e.children,c=o()(e,d);return r?s().createElement("div",i()({style:{backgroundImage:"url(".concat(t,")")}},c),a):n?s().createElement(u.Z,i()({src:t},c)):s().createElement(l.Z,i()({src:t},c))}t.Z=(0,c.memo)((0,p.Z)((function(e){var t=e.src,r=e.innerRef,n=e.resizeWidth,a=e.ctx,u=e.quality,l=void 0===u?80:u,p=(e.preloadResourceName,e.forceSkipCDN),d=o()(e,m);if(!t)return s().createElement(c.Fragment,null);var v=p?t:(0,f.FT)(t,{resizeWidth:n,quality:l,webpEnable:a.webpEnable});return s().createElement(h,i()({},d,{ref:r,src:v}))})))},38005:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"dynamic_GotoApp"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(4343).then(r.bind(r,16720))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 16720}},{isCloseSpinner:!0})},99349:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1app_share"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(8320).then(r.bind(r,82337))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 82337}},{timeout:300,isCloseSpinner:!0})},37668:function(e,t,r){"use strict";var n=r(38871);t.Z=(0,n.n)({resolved:{},chunkName:function(){return"loadable_1share_native"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e(1312).then(r.bind(r,37578))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,this.importAsync(e).then((function(e){return t.resolved[r]=!0,e}))},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 37578}},{isCloseSpinner:!0,timeout:300})},57068:function(e,t,r){"use strict";r.d(t,{Z:function(){return ie}});var n=r(34575),i=r.n(n),a=r(93913),o=r.n(a),c=r(2205),s=r.n(c),u=r(78585),l=r.n(u),f=r(29754),p=r.n(f),d=r(67294),m=r.n(d),h=(r(45697),r(49408)),v=r(38533),y=r(59738),g=r(30209),b=r(66197),O=r(53955);function S(e){var t=e.ctx||(0,O.d)();return m().createElement(O.Z.Provider,{value:t},e.children)}var T,E=r(59713),k=r.n(E),w=r(33124),_=r.n(w),D=r(94184),P=r.n(D),N=r(24788),C=r(96521),I=r(65077),R="jvVVFQTB",j="_1jEsgCwd",A="+cd5MS7v",L="o66Fn2Ec",x="_8yvLPUQJ",F="jOOoTBTT",B="_5lWtf8BM";function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var Z="_oc_h5_isfirsterror",q=(T=function(e){s()(r,e);var t=M(r);function r(){var e;i()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={refreshing:!1,enableRefresh:!1,showType:2,leftSecond:9,isFirsrtError:!1},e}return o()(r,[{key:"componentDidMount",value:function(){var e=this;if(N.Cp(),(0,I.XY)(),sessionStorage.getItem(Z))var t=setInterval((function(){var r=e.state.leftSecond-1;e.setState({leftSecond:r}),r<=0&&(e.setState({enableRefresh:!0}),clearInterval(t))}),1e3);else sessionStorage.setItem(Z,"1"),this.setState({leftSecond:0,enableRefresh:!0,isFirsrtError:!0})}},{key:"onClick",value:function(){!this.state.refreshing&&this.state.enableRefresh&&(this.setState({refreshing:!0}),location.reload())}},{key:"render",value:function(){var e,t=this.state,r=t.refreshing,n=t.enableRefresh,i=t.leftSecond,a=P()(x,(e={},k()(e,F,!n),k()(e,B,r),e)),o="重新加载";return i>0&&(o="重新加载("+i+"s)"),m().createElement("div",{className:P()(R,j)},m().createElement("div",{className:A}),m().createElement("p",{className:L},"页面正在加载中，请稍后"),m().createElement("div",{className:a,onClick:this.onClick},o))}}]),r}(m().Component),_()(T.prototype,"onClick",[C.Z],Object.getOwnPropertyDescriptor(T.prototype,"onClick"),T.prototype),T),H=r(48926),U=r.n(H),V=r(87757),z=r.n(V),G=r(99433),X=r(79072),$=r(37668),W=r(99349);function Q(e){var t=e.shareInfo;return(0,d.useEffect)((function(){var e=function(){var e=U()(z().mark((function e(){var n,i,a;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(902).then(r.bind(r,10902));case 2:if(n=e.sent,i=n.default,a=n.ShareType,i){e.next=7;break}return e.abrupt("return");case 7:i.getInstance().prepareShareSafe(t,a.WECHAT_SESSION).catch((function(){}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),null}function J(e){var t=e.shareInfo;return X.ZP.isNativePlatform?(0,G.yC)(X.ZP.version,"5.0.0")>=0?m().createElement(W.Z,{shareInfo:t}):m().createElement($.Z,{shareInfo:t}):m().createElement(Q,{shareInfo:t})}var K=(0,d.memo)(J);function Y(e){var t=e.isAddInvisibleChar,r=e.invisibleCharCount,n=void 0===r?200:r;return t?m().createElement("div",{style:{height:0}},"​".repeat(n)):null}var ee,te=r(38005);function re(){return m().createElement("script",{dangerouslySetInnerHTML:{__html:"(function () {\n    var ua = navigator.userAgent || navigator.vendor || window.opera;\n    if (!window.pinbridge || !ua.match(/phh_(android|ios)_version/i)) {\n        return;\n    }\n    window.pinbridge.callNative('JSUIControl', 'hideLoading');\n})();"}})}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p()(e);if(t){var i=p()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var ie=(0,h.f3)("store")(ee=(0,h.Pi)(ee=function(e){s()(r,e);var t=ne(r);function r(){return i()(this,r),t.apply(this,arguments)}return o()(r,[{key:"componentDidMount",value:function(){(0,y.g)();var e=this.props.store.renderError;e&&(0,b.Z)(e.errorMsg||"系统繁忙，请稍后再试")}},{key:"clientRender",value:function(){var e=this.props,t=e.shareInfo,r=e.shareNativeMap,n=this.props,i=n.isShowGotoApp,a=n.gotoAppStyle,o=(0,v.zT)().isNativePlatform;return m().createElement(m().Fragment,null,!o&&i&&m().createElement(te.Z,{style:a}),t&&m().createElement(K,{shareInfo:t,shareNativeMap:r}))}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.store;if(r&&r.serviceRenderError)return m().createElement(q,null);var n=r.isFinishInitLoading;return m().createElement(S,{ctx:r.$ctx},m().createElement(Y,{isAddInvisibleChar:r.$ctx.platform.isIOS}),t,n&&m().createElement(g.eA,null),m().createElement(re,null),this.clientRender())}}]),r}(m().Component))||ee)||ee},74593:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(67294),i=r.n(n),a=r(94184),o=r.n(a),c=r(80837),s="fe2DNKYV",u="U--e-hP6",l="PBE2t46j",f="H+C7Aga-",p="Xp9d8qge",d="G+fIcaFo",m="W5en3Rz9",h="mfPHYcGe",v="dBUCKz12";function y(e){var t=e.className,r=e.startStation,n=e.endStation,a=e.trainNo,y=e.etd,g=e.eta,b=e.segmentNo,O=e.departTimeShow||(0,c.e)(y).format("HH:mm"),S=e.arrivalTimeShow||(0,c.e)(g).format("HH:mm"),T=e.departDateShow||(0,c.e)(y).format("MM月DD日");return i().createElement("div",{className:o()(s,t)},b>0&&i().createElement("div",{className:u},"第",b,"程"),i().createElement("div",{className:l},i().createElement("div",{className:f},i().createElement("div",{className:m},O),i().createElement("div",{className:h},r)),i().createElement("div",{className:d},i().createElement("div",null,T),i().createElement("div",{className:v}),i().createElement("div",null,a)),i().createElement("div",{className:p},i().createElement("div",{className:m},S),i().createElement("div",{className:h},n))))}var g=(0,n.memo)(y)},49674:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=49674,e.exports=t},34968:function(e){"use strict";e.exports=window.pinbridge}},function(e){e.O(0,[4736,4181],(function(){return t=98622,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/m100428/js/react_train_list_da6decf3aa6248c6a837.js.map