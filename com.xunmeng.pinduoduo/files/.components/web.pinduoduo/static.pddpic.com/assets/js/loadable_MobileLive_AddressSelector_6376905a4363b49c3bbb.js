(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[64],{"+qE3":function(e,t,n){e.exports=n("EQ+b")("+qE3")},"/Dp6":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2tlQjtVP{position:relative;color:#9c9c9c;height:.48rem;font-weight:400;line-height:normal;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}",""]),t.locals={root:"_2tlQjtVP"}},"/f7M":function(e,t,n){var r=n("77Gi"),i=n("Q8e5"),a="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return a},t._getCss=function(){return""+r},t._insertCss=function(e){return i(a,e)}},"0+0r":function(e,t,n){},"2/+j":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._1o0Z4KRu{position:relative;color:#e02e24;height:.48rem;font-weight:500;line-height:normal;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-weight:700}",""]),t.locals={root:"_1o0Z4KRu"}},"3EMY":function(e,t,n){},"6slb":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="#D2D2D2"},"77Gi":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2vFepLDg{line-height:.25rem;font-size:.17rem;color:#151516;text-align:center}",""]),t.locals={root:"_2vFepLDg"}},"7obA":function(e,t,n){e.exports={wrapper:"X52oS_ZB",mask:"_18IYchGj",show:"_3VA4_ecN",content:"bGe-HS1P",header:"_1IfnzWJ8",back:"_3QDCzcOv",body:"_31r9kDpU",tip:"_3arP1g8s",listWrapper:"_3egphFSs",addressItem:"mZxYbAq9",selected:"_1yTh38aQ",address:"_1tmE2Arb",use:"_3-sL8xQj",add:"_2g8fnIYe",showAll:"_3Hnceo-J",name:"_3DdmaWud",footer:"bCB-pahz",confirm:"_3KoIk2Xg",red:"_3dckIlh3"}},"7sOA":function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),a=n("QILm"),o=n.n(a),s=n("q1tI"),c=n.n(s),l=n("TSYQ"),d=n.n(l),u=n("91HH"),m=n("6slb"),p=n("TWHF"),f=n.n(p);function v(e){var t=e.className,n=o()(e,["className"]);return c.a.createElement(u.HalfPixelBorderBox,i()({},n,{className:d()(t,f.a.root)}))}v.defaultProps={type:"top",borderColor:m.a},t.a=Object(u.withStyles)(f.a)(v)},"9qmp":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("pVnL"),i=n.n(r),a=n("lSNA"),o=n.n(a),s=n("q1tI"),c=n.n(s),l=(n("17x9"),n("PlGL")),d=n("tyBV"),u=n("CGEu"),m=n("EuUb"),p=n("7sOA"),f=n("cmd4"),v=n("Yic3");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=e.text,n=e.TitleProps,r=void 0===n?{}:n;return h(h({},t?{fontWeight:700}:{}),r.style)}function b(e){var t=e.title,n=e.text,r=e.cancelButtonLabel,a=e.confirmButtonLabel,o=e.onCancel,s=e.onConfirm,g=e.onClose,h=e.slots,b=void 0===h?{}:h,C=e.DialogProps,k=e.ContentProps,E=e.TitleProps,S=e.TextProps,I=e.ActionSectionProps,w=e.CancelButtonProps,N=e.ConfirmButtonProps,_=e.CloseButtonProps;return c.a.createElement(l.a,C,c.a.createElement(l.a.CloseButton,i()({onClick:g},_)),b.beforeContent,c.a.createElement(d.a,k,t&&c.a.createElement(u.a,i()({},E,{style:y(e)}),t),n&&c.a.createElement(m.a,S,n)),b.afterContent,c.a.createElement(p.a,I,o&&c.a.createElement(v.a,i()({onClick:o},w),r),c.a.createElement(f.a,i()({onClick:s},N),a)))}b.Dialog=l.a,b.Content=d.a,b.Title=u.a,b.Text=m.a,b.ActionSection=p.a,b.ConfirmButton=f.a,b.CancelButton=v.a},A8tI:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,".A9DIVMHH{line-height:.21rem;font-size:.14rem;color:#58595b;text-align:center;margin-top:.04rem}",""]),t.locals={root:"A9DIVMHH"}},CGEu:function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),a=n("QILm"),o=n.n(a),s=n("q1tI"),c=n.n(s),l=n("TSYQ"),d=n.n(l),u=n("91HH"),m=n("/f7M"),p=n.n(m);t.a=Object(u.withStyles)(p.a)((function(e){var t=e.className,n=o()(e,["className"]);return c.a.createElement("div",i()({},n,{className:d()(t,p.a.root)}))}))},EuUb:function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),a=n("QILm"),o=n.n(a),s=n("q1tI"),c=n.n(s),l=n("TSYQ"),d=n.n(l),u=n("91HH"),m=n("dXXU"),p=n.n(m);t.a=Object(u.withStyles)(p.a)((function(e){var t=e.className,n=o()(e,["className"]);return c.a.createElement("div",i()({},n,{className:d()(t,p.a.root)}))}))},PRjs:function(e,t,n){"use strict";n.r(t);var r,i=n("lSNA"),a=n.n(i),o=n("RIqP"),s=n.n(o),c=n("yXPU"),l=n.n(c),d=n("lwsE"),u=n.n(d),m=n("W8MJ"),p=n.n(m),f=n("7W2i"),v=n.n(f),g=n("a1gu"),h=n.n(g),y=n("Nsbk"),b=n.n(y),C=n("DzJC"),k=n.n(C),E=n("o0o1"),S=n.n(E),I=n("q1tI"),w=n.n(I),N=n("TSYQ"),_=n.n(N),A=(n("i8i4"),n("91HH")),D=n("pVnL"),P=n.n(D),x=n("PJYZ"),R=n.n(x),O=(n("17x9"),n("+qE3")),T=n("PlGL"),L=n("9qmp"),j=n("MyPv");r=window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}:function(){};var B={};B.Funcs={Linear:function(e,t,n,r){return n*e/r+t},Cubic:{easeIn:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOut:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}},Sine:{easeIn:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOut:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOut:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t}},Quart:{easeIn:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOut:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t}}},B.scrollLeftTo=function(e,t,n,r){(n=n||{}).attr="scrollLeft",B.gradualChange(e,t,n,r)},B.gradualChange=function(e,t,n,i){if(e&&void 0!==t){var a=(n=n||{}).fn||B.Funcs.Linear,o=n.wrapValueFn||null,s=n.getValueFn||null,c=n.during||60,l=n.callbackTimeout||0,d=n.inStyle||!1,u=n.stopAdvance||0,m=n.attr;if(m){var p=0,f=0,v=function(){l?i&&setTimeout(i,l):i&&i()};!function n(){p++;var i=0;i="function"==typeof s?s(f):e[m];var l=f=a(p,i,t-i,c);"function"==typeof o&&(l=o(f,p)),d?e.style[m]=l:e[m]=l,p>c-u?v():p<c?r(n):v()}()}else i&&i()}};var M=function(e){for(var t=0,n=0;n<e.length;n++)e.charCodeAt(n)<0||e.charCodeAt(n)>255?t+=2:t+=1;return t},H=n("2xwX"),F=n("3VHQ"),U=n("h7Yj"),z=n("rIj9"),V=n("uf4C"),q=n("KoDT"),Q=n("mG/U"),Y=null;function W(e){return G.apply(this,arguments)}function G(){return(G=l()(S.a.mark((function e(t){var r,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,n.e(1).then(n.bind(null,"rx36"));case 4:if(r=e.sent,i=r.default,Y||!t){e.next=10;break}return e.next=9,t.get("api/server/_stm",{defaultErrorHandler:function(){}}).then((function(e){return e.server_time})).catch((function(){return 0})).then((function(e){return new i({serverTime:e})}));case 9:Y=e.sent;case 10:return e.abrupt("return",Y);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var $=1,X=2,K=3,Z=["2","27","25"];function ee(e){return e=e||"",Z.includes(e.toString())}var te=function(e){v()(r,e);var t=J(r);function r(e){var n;return u()(this,r),(n=t.call(this,e)).state={currentRegionTab:$,panelStyle:{transform:"translateY(3.86rem)"},provinceID:"0",provinceName:"",provinces:null,cityID:"0",cityName:"",cities:null,districtID:"0",districtName:"",districts:null},n.provincesLoaded=!1,n.citiesLoaded=!1,n.districtsLoaded=!1,n.regions={},n.$axiosHttp=n.createAxios(),n.selectCity=n.selectCity.bind(R()(n)),n.loadRegions=n.loadRegions.bind(R()(n)),n.onCityEdited=n.onCityEdited.bind(R()(n)),n.selectDistrict=n.selectDistrict.bind(R()(n)),n.generateHeader=n.generateHeader.bind(R()(n)),n.onCitiesLoaded=n.onCitiesLoaded.bind(R()(n)),n.selectProvince=n.selectProvince.bind(R()(n)),n.selectRegionTab=n.selectRegionTab.bind(R()(n)),n.onDistrictEdited=n.onDistrictEdited.bind(R()(n)),n.onProvinceEdited=n.onProvinceEdited.bind(R()(n)),n.onDistrictsLoaded=n.onDistrictsLoaded.bind(R()(n)),n.onProvincesLoaded=n.onProvincesLoaded.bind(R()(n)),n.setRegionUnionName=n.setRegionUnionName.bind(R()(n)),n.onAddressInfoLoaded=n.onAddressInfoLoaded.bind(R()(n)),n.hideRegionSelectorPanel=n.hideRegionSelectorPanel.bind(R()(n)),n.showRegionSelectorPanel=n.showRegionSelectorPanel.bind(R()(n)),n}return p()(r,[{key:"createAxios",value:function(){var e=V.default.getInstance().getPageID();return Object(z.createDefaultAxios)({pageInfo:{pageId:e}})}},{key:"componentWillMount",value:function(){n("QROL")}},{key:"render",value:function(){var e=this,t=e.state.panelStyle,n=e.props.isShow;return w.a.createElement("div",{id:"region-selector",className:"edit-addr-region-selector",style:{display:n?"":"none"}},w.a.createElement("div",{className:"mars-panel-mask",onClick:function(t){return e.hideRegionSelectorPanel(t)}}),w.a.createElement("div",{id:"region-selector-panel",ref:"regionSelectorPanel",className:"mars-panel",style:t},e.generateHeader(),e.generateRegions()))}},{key:"componentDidMount",value:function(){Object(U.disableScroll)();var e=this;e.props.addressId+""==""?(e.props.eventEmitter.emit("fillEditAddress"),e.onAddressInfoLoaded({})):this.$axiosHttp.get("api/origenes/address/"+e.props.addressId,{timeout:1200}).then((function(t){e.props.eventEmitter.emit("fillEditAddress",t),e.onAddressInfoLoaded(t)})).catch((function(t){Object(j.info)(Object(Q.getMsgFromCode)(t.errorCode)||"网络异常，请刷新页面后重试"),e.props.eventEmitter.emit("fillEditAddress",t)}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.addressInfo||{},n=this.props.addressInfo||{};t.province_id+""==n.province_id+""&&t.city_id+""==n.city_id+""&&t.district_id+""==n.district_id+""||this.onAddressInfoLoaded(t)}},{key:"componentDidUpdate",value:function(e,t){var n=e.isShow;if(!n&&this.props.isShow!==n){var r=this.state.currentRegionTab;Object(U.disableScroll)(document.getElementById("region-selector-list-".concat(r))),this.showRegionSelectorPanel()}}},{key:"generateHeader",value:function(){var e=this,t=e.state,n=t.currentRegionTab,r=t.provinceID,i=t.provinceName,a=t.cityID,o=t.cityName,s=t.districtID,c=t.districtName;return w.a.createElement("div",{className:"mars-panel-header"},w.a.createElement("div",{className:"mars-ph-province ".concat(1===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab($,t)}},r+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,i)),r+""!="0"&&!ee(r)&&w.a.createElement("div",{className:"mars-ph-city ".concat(2===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(X,t)}},a+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,o)),a+""!="0"&&w.a.createElement("div",{className:"mars-ph-district ".concat(3===n?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(K,t)}},s+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,c)),w.a.createElement("div",{className:"mars-ph-cancel",onClick:function(t){return e.hideRegionSelectorPanel(t)}},"取消"))}},{key:"generateRegions",value:function(){var e=this,t=e.state,n=t.currentRegionTab,r=t.provinces,i=t.provinceID,a=t.cities,o=t.cityID,s=t.districts,c=t.districtID,l=1===n&&r&&r.map((function(t,n){var r=t.region_id+""==i+""?"region-active":"";return w.a.createElement("li",{key:"province-".concat(n),onClick:function(t){return e.selectProvince(t,n)}},w.a.createElement("span",{className:r},t.region_name))})),d=2===n&&a&&a.map((function(t,n){var r=t.region_id+""==o+""?"region-active":"";return w.a.createElement("li",{key:"city-".concat(n),onClick:function(t){return e.selectCity(t,n)}},w.a.createElement("span",{className:r},t.region_name))})),u=3===n&&s&&s.map((function(t,n){var r=t.region_id+""==c+""?"region-active":"";return w.a.createElement("li",{key:"city-".concat(n),onClick:function(t){return e.selectDistrict(t,n)}},w.a.createElement("span",{className:r},t.region_name))}));return w.a.createElement("div",{className:"mars-regions"},1===n&&w.a.createElement("ul",{id:"region-selector-list-1",className:"mars-regions-p"},l),!ee(i)&&2===n&&w.a.createElement("ul",{id:"region-selector-list-2",className:"mars-regions-c"},d),3===n&&w.a.createElement("ul",{id:"region-selector-list-3",className:"mars-regions-d"},u))}},{key:"selectDistrict",value:function(e,t){e&&e.stopPropagation();var n=this.state.districts[t];n&&this.onDistrictEdited(n)}},{key:"onDistrictEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.region_id,r=t.region_name,i={districtID:n,districtName:r};this.setState((function(e){return i}),(function(t){e.hideRegionSelectorPanel(),e.setRegionUnionName()}))}},{key:"selectCity",value:function(e,t){e&&e.stopPropagation();var n=this.state.cities[t];n&&this.onCityEdited(n)}},{key:"onCityEdited",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!t.citiesLoaded)return!1;var n=e.region_id,r=e.region_name;if(n+""!="0"){var i={cityID:n,cityName:r};t.districtsLoaded=!1,t.onDistrictsLoaded("0",[]).then((function(){t.setState((function(e){return i}),(function(e){t.loadRegions(K,n).then((function(e){var n=t.state.districtID;t.onDistrictsLoaded(n,e),t.selectRegionTab(K)}))}))}))}}},{key:"onDistrictsLoaded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;t=t.regions||[];var r=this.isRegionIDContainInRegions(e,t),i={districts:t||[],districtID:r&&e||"0",districtName:r&&r.region_name||""};return new Promise((function(e,t){n.setState((function(e){return i}),(function(t){n.districtsLoaded=!0,e()}))}))}},{key:"setRegionUnionName",value:function(){var e=this.state,t=e.provinceID,n=e.cityID,r=e.districtID,i=e.provinceName,a=e.cityName,o=e.districtName,s={};t+""!="0"&&n+""!="0"&&r+""!="0"&&(s=Object.assign({},s,{currentProvinceID:t,currentCityID:n,currentDistrictID:r,currentProvinceName:i,currentCityName:a,currentDistrictName:o})),s=Object.assign({},s,{regionUnionName:i===a?"".concat(a," ").concat(o):"".concat(i,"  ").concat(a,"  ").concat(o)}),this.props.eventEmitter.emit("setRegionUnionName",s)}},{key:"selectProvince",value:function(e,t){e&&e.stopPropagation();var n=this.state.provinces[t];n&&this.onProvinceEdited(n)}},{key:"onProvinceEdited",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(t.provincesLoaded){var n=e.region_id,r=e.region_name;n+""!="0"&&(t.citiesLoaded=!1,t.districtsLoaded=!1,t.onCitiesLoaded("0",[]).then((function(){t.onDistrictsLoaded("0",[]).then((function(){var e={provinceID:n,provinceName:r};t.setState((function(t){return e}),(function(e){t.loadRegions(X,n).then((function(e){var r=t.state.cityID;t.onCitiesLoaded(r,e),t.selectRegionTab(X),ee(n)&&t.selectCity(null,0)}))}))}))})))}}},{key:"onCitiesLoaded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=t.self_city_id,i=n.state,a=i.provinceID,o=i.cityID;t=t.regions||[],n.removeToFirst(t,r);var s=n.isRegionIDContainInRegions(e,t),c={cities:t,cityID:s&&e||(ee(a)?o:0),cityName:s&&s.region_name||""};return new Promise((function(e,t){n.setState((function(e){return c}),(function(t){n.citiesLoaded=!0,e()}))}))}},{key:"loadRegions",value:function(e,t){var n=this;return new Promise((function(e,r){if(n.regions[t])return e(n.regions[t]);n.$axiosHttp.get("api/galen/v2/regions/"+t).then((function(r){n.regions[t]=r,e(r)}))}))}},{key:"onAddressInfoLoaded",value:function(e){if(e){var t=this,n=e.region_id||1,r=e.province_id,i=e.city_id,a=e.district_id;t.loadRegions($,n).then((function(e){t.onProvincesLoaded(r,e).then((function(){r+""==t.state.provinceID+""&&t.loadRegions(X,r).then((function(e){t.onCitiesLoaded(i,e).then((function(){i+""==t.state.cityID+""?t.loadRegions(K,i).then((function(e){t.onDistrictsLoaded(a,e),t.isRegionIDContainInRegions(a,e.regions)||Object(j.info)("请重新选择地区")})):Object(j.info)("请重新选择地区")}))}))}))}))}}},{key:"isRegionIDContainInRegions",value:function(e,t){if(!t)return null;for(var n=0;n<t.length;++n){var r=t[n];if(r.region_id+""==e+"")return r}return null}},{key:"removeToFirst",value:function(e,t){var n=this.isRegionIDContainInRegions(t,e),r=e.indexOf(n);r<0||(e.splice(r,1),e.unshift(n))}},{key:"onProvincesLoaded",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.self_province_id;n=n.regions||[],this.removeToFirst(n,r);var i=this.isRegionIDContainInRegions(e,n),a={provinces:n,provinceID:e||"0",provinceName:i&&i.region_name||""};return new Promise((function(e,n){t.setState((function(e){return a}),(function(n){t.provincesLoaded=!0,e()}))}))}},{key:"selectRegionTab",value:function(e,t){t&&t.stopPropagation();this.setState((function(t){return{currentRegionTab:e}}),(function(t){Object(U.disableScroll)(document.getElementById("region-selector-list-".concat(e)))}))}},{key:"hideRegionSelectorPanel",value:function(e){e&&e.stopPropagation();var t=this,n=t.refs.regionSelectorPanel;B.gradualChange(n,386,{wrapValueFn:function(e){return"translateY(".concat(e/100,"rem)")},getValueFn:function(e){return e||0},inStyle:!0,attr:"transform",during:25,stopAdvance:6},(function(){t.props.onClose&&t.props.onClose()}))}},{key:"showRegionSelectorPanel",value:function(e){e&&e.stopPropagation()&&e.preventDefault();var t=this.refs.regionSelectorPanel;B.gradualChange(t,0,{wrapValueFn:function(e,t){return"translateY(".concat(e/100,"rem)")},getValueFn:function(e){return e||386},inStyle:!0,attr:"transform",during:25})}}]),r}(I.Component);te.defaultProps={addressId:"",isShow:!1};var ne,re,ie=te;function ae(e){"function"==typeof window.scrollTo&&(clearTimeout(re),re=setTimeout((function(){(!document.activeElement||!["INPUT","TEXTAREA"].includes(document.activeElement.tagName))&&window.scrollTo(0,0)}),10))}function oe(e){return ne||(ne=Object(q.getCurrentPlatform)()),ne.system===q.SYSTEM.IOS&&Object(q.compareVersion)(ne.systemVersion,"12.0")>=0?(e.addEventListener("focusout",ae),function(){e.removeEventListener("focusout",ae)}):function(){}}var se,ce=!0,le={43014:"请填写正确的手机号码",43016:"地址保存不成功，建议稍后重试",43017:"已达到地址上限，请先删除不常用地址",43871:"内容中含有不合适的字，无法保存",5e4:"地址保存不成功，建议稍后重试"},de=1,ue=2,me=n("X0J6"),pe=function(e){var t=e.tackingParams,n=e.triangleTop,r=e.triangleTopShadow,i=e.recStyle,a=e.renderedElems;return w.a.createElement(me.a,{trackingInfo:t},w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"m-addr-rec-triangle",style:n}),w.a.createElement("div",{className:"m-addr-rec-circle-cover"}),w.a.createElement("div",{className:"m-addr-rec-triangle m-addr-rec-triangle-shadow",style:r}),w.a.createElement("div",{className:"m-addr-rec",style:i},w.a.createElement("div",{className:"m-addr-rec-wrap"},a))))},fe=w.a.memo((function(e){var t,n=e.type,r=e.recMobiles,i=void 0===r?[]:r,a=e.recCombined,o=void 0===a?[]:a,s=e.onClickHandler,c={op:"impr",page_el_sn:2584388};if(n===de&&o&&o.length>0){t=3,c.tips_id=t;var l=o.map((function(e,n){for(var r=e.name,i=0,a=0;a<r.length;a++)/^%u/.test(escape(r[a]))?i+=.14:i+=.07;i+=1.04;var o="".concat(e.name,"，").concat(e.mobile);return i>1.99&&(o="".concat(r.slice(0,4),"...").concat(r.slice(-2),"，").concat(e.mobile)),w.a.createElement("div",{className:"m-addr-rec-text",key:n,onClick:s(n,de,t)},o)}));return w.a.createElement(pe,{tackingParams:c,triangleTop:{top:".84rem"},triangleTopShadow:{top:".82rem",zIndex:13e3},recStyle:{height:"".concat(.46*o.length+.01*(o.length-1),"rem"),top:".89rem"},renderedElems:l})}if(n===ue&&i&&i.length>0){o&&o.length>0&&(t=4,c.tips_id=t);var d=i.map((function(e,n){return w.a.createElement("div",{className:"m-addr-rec-text",key:n,onClick:s(n,ue,t)},e)}));return w.a.createElement(pe,{tackingParams:c,triangleTop:{top:"1.32rem"},triangleTopShadow:{top:"1.3rem",zIndex:13e3},recStyle:{height:"".concat(.46*i.length+.01*(i.length-1),"rem"),top:"1.37rem"},renderedElems:d})}return null})),ve=n("QILm"),ge=n.n(ve),he=(n("0+0r"),Object(q.getCurrentPlatform)());function ye(e){var t=e.suggestAddress,n=e.onConfirm,r=e.onCancel,i=[t.provinceName,t.cityName,t.districtName].join(" ");return w.a.createElement(T.a.Container,null,w.a.createElement(T.a.Backdrop,null),w.a.createElement(T.a.BaseDialog,{className:_()("fix-addr-dialog",se&&"fix-addr-dialog-ios")},w.a.createElement("div",{className:"fix-addr-dialog-desc"},"自动识别到您所在地区为",w.a.createElement("span",{className:"fix-addr-dialog-red-text"},i),"，是否修改?"),w.a.createElement("div",{className:"fix-addr-dialog-confirm",onClick:n},"修改并保存"),w.a.createElement("div",{className:"fix-addr-dialog-cancel",onClick:r},"不修改，直接保存")))}se=he.system===q.SYSTEM.IOS;var be=n("eHaf");function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Se,Ie,we,Ne,_e,Ae,De={ContainerProps:{style:{zIndex:12e3}}};function Pe(e){var t;Object(j.infoH5)(e,De),t=e,Object(be.sendImprMetrics)({page_el_sn:1449048,address_alert_errorinfo:t})}Se=Object(q.getCurrentPlatform)(),Ie=Se.system===q.SYSTEM.IOS&&Object(q.compareVersion)(Se.systemVersion,"11.0.0")>=0,_e=Se.system===q.SYSTEM.IOS,we=Se.version&&Object(q.compareVersion)(Se.version,"4.70.0")>=0,Ne=Se.version&&Object(q.compareVersion)(Se.version,"5.96.0")>=0,Ae=Se.version&&Object(q.compareVersion)(Se.version,"4.69.0")>=0;var xe=function(e){v()(o,e);var t,r,i,a=Ee(o);function o(e){var t;return u()(this,o),(t=a.call(this,e)).cancelAnalyzeAddressDialog=function(){t.setState({showAnalyzeAddressDialog:!1})},t.confirmAnalyzeAddressDialog=function(){var e=t.state.clipBoardResult||{};t.setState({showAnalyzeAddressDialog:!1,name:e.name,mobile:e.mobile,address:e.address,currentProvinceID:e.province_id,currentCityID:e.city_id,currentDistrictID:e.district_id,currentProvinceName:e.province,currentCityName:e.city,currentDistrictName:e.district,regionUnionName:"".concat(e.province,"  ").concat(e.city,"  ").concat(e.district)}),t.regionSelectorRef.current&&t.regionSelectorRef.current.onAddressInfoLoaded&&t.regionSelectorRef.current.onAddressInfoLoaded(e)},t.onRecItemSelected=function(e,n,r){return function(i){var a=t.state,o=a.recMobiles,s=void 0===o?[]:o,c=a.recCombined,l=void 0===c?[]:c;!function(e){Object(be.sendClickMetrics)({page_el_sn:2584388,tips_id:e})}(r);var d=null;switch(n){case de:d=l[e],t.setState({name:d.name,mobile:d.mobile,isShowNameRec:!1});break;case ue:d=s[e],t.setState({mobile:d,isShowMobileRec:!1})}}},t.checkToStopClear=function(){t.shouldIgnoreClearBtnClick=!t.state.addressInputFocused},t.clearAddress=function(e){e&&e.stopPropagation(),t.shouldIgnoreClearBtnClick||(t.shouldIgnoreClearBtnClick=!t.state.addressInputFocused,t.setState({address:""}))},t.dealRecheck=function(e){var n=e.name,r=e.address;Pe(e.recheck_msg),n&&n.length&&n.some((function(e){return e.sensitive&&t.setState({isNameError:!0}),e.sensitive})),r&&r.length&&r.some((function(e){return e.sensitive&&t.setState({isAddressError:!0}),e.sensitive}))},t.dealCheckRegionError=function(e){var n,r,i=e.params,a=e.response;Object(be.sendImprMetrics)({page_el_sn:3812488}),function(e){var t=e.onConfirm,n=e.onCancel,r=ge()(e,["onConfirm","onCancel"]),i=Object(A.renderPopup)(w.a.createElement(ye,P()({},r,{onConfirm:function(){t&&t(),i()},onCancel:function(){n&&n(),i()}})))}({suggestAddress:{provinceName:a.suggest_province_name,cityName:a.suggest_city_name,districtName:a.suggest_district_name},onConfirm:(r=l()(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(H.show)(),n=a.transaction_id,Object(be.sendClickMetrics)({page_el_sn:3813443,request_id:n}),e.next=4,t._saveAddress(ke(ke({},i),{},{province_id:a.suggest_province_id,city_id:a.suggest_city_id,district_id:a.suggest_district_id,check_region:!1}));case 4:Object(H.hide)();case 5:case"end":return e.stop()}var n}),e)}))),function(){return r.apply(this,arguments)}),onCancel:(n=l()(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(H.show)(),n=a.transaction_id,Object(be.sendClickMetrics)({page_el_sn:3813444,request_id:n}),e.next=4,t._saveAddress(ke(ke({},i),{},{check_region:!1}));case 4:Object(H.hide)();case 5:case"end":return e.stop()}var n}),e)}))),function(){return n.apply(this,arguments)})})},t.saveAddress=l()(S.a.mark((function e(){var n,r,i,a,o,s,c,l,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isSaveBtnClicked){e.next=2;break}return e.abrupt("return");case 2:if(u=Date.now()-t.startTime,Object(be.sendClickMetrics)({page_el_sn:99897,save_time:u}),t.isSaveBtnClicked=!0,t.validAddressInfo()){e.next=7;break}return setTimeout((function(e){t.isSaveBtnClicked=!1}),2600),e.abrupt("return",!1);case 7:if(n=t.state,r=n.name,i=n.mobile,a=n.currentProvinceID,o=n.currentCityID,s=n.currentDistrictID,c=n.address,l=n.isDefault,d={name:r,mobile:t.reduceMobile(i),province_id:a,city_id:o,district_id:s,address:c,is_default:l,order_sn:t.props.orderSn,check_region:t.props.checkRegion},Object(H.show)(),!t.antiCrawler){e.next=14;break}return e.next=13,t.antiCrawler.messagePackSync();case 13:d.anti_content=e.sent;case 14:return e.next=16,t._saveAddress(d);case 16:t.isSaveBtnClicked=!1,Object(H.hide)();case 18:case"end":return e.stop()}var u}),e)}))),t._saveAddress=function(){var e=l()(S.a.mark((function e(n){var r,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){},i=function(e){var r,i=e.response&&e.response.data&&e.response.data.result;if(i&&i.need_recheck===ce)t.dealRecheck(i);else if(43080===e.errorCode){if(!i)return r={error:e},void Object(U.throwErrorAsync)(new Error("edit-address: 返回的地址校验数据为空"),{payload:r});t.dealCheckRegionError({params:n,response:i})}else le[e.errorCode]?Pe(le[e.errorCode]):Pe(Object(Q.getMsgFromCode)(e.errorCode)||"网络异常，请刷新页面后重试")},!t.props.addressId){e.next=6;break}return e.abrupt("return",t.$axiosHttp.post("api/origenes/address_info/"+t.props.addressId,n,{defaultErrorHandler:r,useNativeAntiToken:!0}).then((function(e){t.dealSaveResult(t.props.addressId)}),i));case 6:return e.abrupt("return",t.$axiosHttp.post("api/origenes/address",n,{defaultErrorHandler:r,useNativeAntiToken:!0}).then((function(e){e.address_id&&t.dealSaveResult(e.address_id)}),i));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.addrClose=function(e){var n;e&&e.stopPropagation(),n=Date.now()-t.startTime,Object(be.sendClickMetrics)({page_el_sn:2586340,close_time:n}),t.props.onClose&&t.props.onClose()},t.addrBack=function(e){e&&e.stopPropagation(),t.state.isShowPositionList&&t.setState({isShowPositionList:!1,title:"编辑地址"},(function(){Object(U.disableScroll)(document.getElementById("address"))}))},t.nameOnChange=function(e){e&&e.stopPropagation();var n=R()(t),r=e.target.value;n.setState((function(e){return{name:r}}),(function(){!!r&&t.validName()}))},t.mobileOnChange=function(e){var n=e.target.value;t.setState((function(e){return{mobile:n}}))},t.addressOnChange=function(e){e&&e.stopPropagation();var n=R()(t),r=e.target.value;n.setState((function(e){return{address:r}}))},t.showDialogRegionSelector=function(e){e&&e.stopPropagation()&&e.preventDefault(),R()(t).setState((function(e){return{showRegionSelector:!0}}))},t.hideDialogRegionSelector=function(e){e&&e.stopPropagation()&&e.preventDefault(),R()(t).setState((function(e){return{showRegionSelector:!1}}))},t.validItem=function(e){return function(){switch(e){case"name":t.validName();break;case"mobile":t.validMobile();break;case"address":t.validAddress()}}},t.state={loaded:!t.props.addressId,title:t.props.title,saveAndUse:t.props.saveAndUse,isDefault:"0",name:"",nameInputFocused:!1,mobile:"",mobileInputFocused:!1,address:"",showRegionSelector:!1,currentProvinceID:"0",currentCityID:"0",currentDistrictID:"0",currentProvinceName:"",currentCityName:"",currentDistrictName:"",isNameError:!1,isMobileError:!1,isAddressError:!1,focused:!1,addressInputFocused:!1,addressInfo:null,addressSuggestionList:[],isPositionBtnActived:!1,isShowPositionList:!1,isShowNameRec:!1,isShowMobileRec:!1,showAnalyzeAddressDialog:!1,clipBoardResult:{},clipBoardFullAddress:"",analyzeRequestId:""},t.regionSelectorRef=w.a.createRef(),t.dialogContainerRef=w.a.createRef(),t.eventEmitter=new O.EventEmitter,t.locateOvertimeCount=0,t.$axiosHttp=t.createAxios(),t.reduceMobile=t.reduceMobile.bind(R()(t)),t.getUserCoords=t.getUserCoords.bind(R()(t)),t.getGeolocation=t.getGeolocation.bind(R()(t)),t.dealSaveResult=t.dealSaveResult.bind(R()(t)),t.generateAddrTitle=t.generateAddrTitle.bind(R()(t)),t.generateAddrBottom=t.generateAddrBottom.bind(R()(t)),t.generateRegionSelector=t.generateRegionSelector.bind(R()(t)),t.setAddressInputFocused=t.setAddressInputFocused.bind(R()(t)),t.antiCrawler=t.props.antiCrawler,t.getEncryptClipBoardData=t.getEncryptClipBoardData.bind(R()(t)),t.analyzeClipBoard=t.analyzeClipBoard.bind(R()(t)),t.genetateAnalyzeAddressDialog=t.genetateAnalyzeAddressDialog.bind(R()(t)),t.addressNameBlurTimeout=null,t.addressMobileBlurTimeout=null,t}return p()(o,[{key:"createAxios",value:function(){var e=V.default.getInstance().getPageID();return Object(z.createDefaultAxios)({pageInfo:{pageId:e}})}},{key:"componentWillMount",value:function(){var e=this;n("3EMY"),e.eventEmitter.on("setRegionUnionName",(function(t){e.setState((function(e){return t}))})),e.eventEmitter.on("fillEditAddress",(function(t){if(t instanceof Error)e.props.onClose&&e.props.onClose();else if(t){var n=t.is_default,r=t.name,i=t.mobile,a=t.address,o=t.province_id,s=t.city_id,c=t.district_id,l=t.province,d=t.city,u=t.district,m={isDefault:n,name:r,mobile:i,address:a,currentProvinceID:o,currentCityID:s,currentDistrictID:c,currentProvinceName:l,currentCityName:d,currentDistrictName:u,regionUnionName:l===d?"".concat(d," ").concat(u):"".concat(l,"  ").concat(d,"  ").concat(u),loaded:!0};Object(H.hide)(),e.setState((function(e){return m}))}}))}},{key:"getRecommendType",value:function(e,t){return e?de:t?ue:null}},{key:"render",value:function(){var e=this.state,t=e.loaded,n=e.isShowPositionList,r=e.isShowNameRec,i=e.isShowMobileRec,a=e.recMobiles,o=e.recCombined,s=this.getRecommendType(r,i),c=n?w.a.createElement("div",{className:"m-addr-mask",onClick:this.addrBack},w.a.createElement("div",{className:"m-addr-main m-addr-main-list"},this.generateAddrTitle(),this.generatePositionList())):w.a.createElement(T.a,{ControllerProps:{PortalComponent:null},className:"m-addr-main m-addr-main-new ".concat(_e?"ios":"")},w.a.createElement(T.a.CloseButton,{onClick:this.addrClose}),this.generateAddrTitle(),this.generateAddrName(),this.generateAddrMobile(),this.generateAddrRegionNew(),this.generateAddrAddressNew(),this.generateAddrBottom(),s&&w.a.createElement(fe,{type:s,recMobiles:a,recCombined:o,onClickHandler:this.onRecItemSelected}));return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{ref:this.dialogContainerRef,style:{display:t?"":"none"}},c,this.generateRegionSelector()),this.genetateAnalyzeAddressDialog())}},{key:"componentDidMount",value:(i=l()(S.a.mark((function e(){var t=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$axiosHttp.get("api/origenes/rec/mobile_name/list/create_addr").then((function(e){t.setState({recMobiles:e.mobiles,recCombined:e.mobile_names})})),Se.isNativePlatform&&this.props.componentDisablePullReload&&Object(F.setupPullReload)({enable:!1}).catch((function(e){if(e&&e.errorCode)throw e})),this.props.onShowTrackingBase&&Object(be.sendMetrics)(Object.assign({},this.props.onShowTrackingBase,this.props.trackingContext)),Ie&&(this.bodyPositionStyle=document.body.style.position,this.bodyScrollTop=(n=void 0)&&n!==document.body?n.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0),document.body.style.position="fixed"),!this.props.addressId&&this.props.analyzeClipBoard&&this.analyzeClipBoard(),Object(U.disableScroll)(document.getElementById("address")),this.antiCrawler||Ae){e.next=10;break}return e.next=9,W(this.$axiosHttp);case 9:this.antiCrawler=e.sent;case 10:this.cleanupFixer=oe(document.body);case 11:case"end":return e.stop()}var n}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e,t;Se.isNativePlatform&&this.props.componentDisablePullReload&&Object(F.setupPullReload)({enable:!0}).catch((function(e){if(e&&e.errorCode)throw e})),Object(U.enableScroll)(),this.geoHandler&&clearTimeout(this.geoHandler),this.addressNameBlurTimeout&&clearTimeout(this.addressNameBlurTimeout),this.addressMobileBlurTimeout&&clearTimeout(this.addressMobileBlurTimeout),Ie&&(document.body.style.position=this.bodyPositionStyle,e=this.bodyScrollTop,t&&t!==document.body?t.scrollTop=e:0===e?(document.body.scrollTop=0,(document.documentElement||{}).scrollTop=0):(document.body.scrollTop=e,0!==document.body.scrollTop?document.body:((document.documentElement||{}).scrollTop=e,document.documentElement&&0!==document.documentElement.scrollTop&&document.documentElement))),this.cleanupFixer&&this.cleanupFixer()}},{key:"getEncryptClipBoardData",value:(r=l()(S.a.mark((function e(){var t,n,r,i,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Se.isNativePlatform){e.next=20;break}if(!Ne){e.next=8;break}return e.next=4,Object(F.invokeBridgeCallNativeFun)("AMStorage","getEncryptedPasteboard");case 4:return t=e.sent,e.abrupt("return",t.result);case 8:return e.next=10,Object(F.getPasteBoard)();case 10:if(n=e.sent,!((r=n.text)&&r.length>5&&r.length<200)){e.next=20;break}if(!we){e.next=19;break}return e.next=16,Object(F.invokeBridgeCallNativeFun)("JSSecure","aesEncrypt",{text:r});case 16:return i=e.sent,a=i.value,e.abrupt("return",a);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"analyzeClipBoard",value:(t=l()(S.a.mark((function e(){var t,n,r,i,a=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new Promise((function(e){setTimeout((function(){return e(null)}),100)})),e.next=4,Promise.race([t,this.getEncryptClipBoardData()]);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:r=Object(U.nanoid)(),this.setState({analyzeRequestId:r}),i={address_info:n,request_id:r},we&&(i={eai:n,request_id:r}),Ne&&(i={encrypt_data:n,request_id:r}),this.$axiosHttp.post("api/origenes/analyze_address",i).then((function(e){e&&a.setState({showAnalyzeAddressDialog:!0,clipBoardResult:e,clipBoardFullAddress:"".concat(e.name||""," ").concat(e.mobile||""," ").concat(e.province||""," ").concat(e.city||""," ").concat(e.district||""," ").concat(e.address||"")})})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.message="剪贴板内容解析失败"+e.t0.message,Object(U.throwErrorAsync)(e.t0);case 19:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(){return t.apply(this,arguments)})},{key:"genetateAnalyzeAddressDialog",value:function(){var e=this.state,t=e.isShowPositionList,n=e.showAnalyzeAddressDialog;return!this.props.addressId&&!t&&n&&w.a.createElement(L.a,{title:"识别到收货信息，是否填入？",text:this.state.clipBoardFullAddress,TextProps:{className:"analyze-address-text"},onConfirm:this.confirmAnalyzeAddressDialog,onCancel:this.cancelAnalyzeAddressDialog,onClose:this.cancelAnalyzeAddressDialog})}},{key:"generateRegionSelector",value:function(){var e=this.state,t=e.showRegionSelector,n=e.addressInfo,r={onClose:this.hideDialogRegionSelector,eventEmitter:this.eventEmitter,isShow:t,addressId:this.props.addressId,addressInfo:n};return w.a.createElement(ie,P()({},r,{ref:this.regionSelectorRef}))}},{key:"generateAddrTitle",value:function(){var e=this.state,t=e.title,n=e.isShowPositionList;return w.a.createElement("div",{className:"title-wrap-new"},w.a.createElement("div",{className:n?"m-addr-title  m-addr-back":"m-addr-title",onClick:this.addrBack},t),!n&&this.props.contentUnderTitle)}},{key:"clearName",value:function(e){e&&e.stopPropagation(),this.setState({name:""})}},{key:"generateAddrName",value:function(){var e=this,t=this.state,n=t.name,r=t.isNameError,i=t.nameInputFocused,a={className:"m-addr-input ".concat(r?"input-error":""),id:"name",placeholder:"收货人姓名",value:n,type:"text",onChange:this.nameOnChange,onFocus:function(t){e.setState({nameInputFocused:!0,isShowNameRec:!n}),e.removeNameError(t)},onBlur:function(){e.addressNameBlurTimeout=setTimeout((function(){e.setState({nameInputFocused:!1,isShowNameRec:!1})}),0)}};return w.a.createElement("div",{className:"m-addr-bar"},w.a.createElement("input",a),n&&w.a.createElement("div",{className:"m-addr-input-clear-wrapper",style:{display:i?"":"none"},onMouseDown:function(t){return e.clearName(t)},onTouchStart:function(t){return e.clearName(t)}},w.a.createElement("div",{className:"m-addr-input-clear"})),w.a.createElement("div",{className:"m-addr-text"},"收货人"))}},{key:"clearMobile",value:function(e){e&&e.stopPropagation(),this.setState({mobile:""})}},{key:"generateAddrMobile",value:function(){var e=this,t=this.state,n=t.mobile,r=t.isMobileError,i=t.mobileInputFocused,a={className:"m-addr-input ".concat(r?"input-error":""),id:"mobile",placeholder:"收货人手机号",value:n,type:"tel",onChange:this.mobileOnChange,onFocus:function(t){e.setState({mobileInputFocused:!0,isShowMobileRec:!n}),e.removeMobileError(t)},onBlur:function(){e.addressMobileBlurTimeout=setTimeout((function(){e.setState({mobileInputFocused:!1,isShowMobileRec:!1})}),0)}};return w.a.createElement("div",{className:"m-addr-bar"},w.a.createElement("input",a),n&&w.a.createElement("div",{className:"m-addr-input-clear-wrapper",onMouseDown:function(t){return e.clearMobile(t)},onTouchStart:function(t){return e.clearMobile(t)},style:{display:i?"":"none"}},w.a.createElement("div",{className:"m-addr-input-clear"})),w.a.createElement("div",{className:"m-addr-text"},"手机号"))}},{key:"generateAddrRegionNew",value:function(){var e=this.state,t=e.currentProvinceName,n=e.currentCityName,r=e.currentDistrictName,i=e.regionUnionName,a=t&&n&&r;return w.a.createElement("div",{className:"m-addr-region-new","data-active":"cell-white",onClick:this.showDialogRegionSelector},a?w.a.createElement("span",{className:"m-addr-region-text"},i):w.a.createElement("span",{className:"m-addr-region-text m-addr-region-placeholder"},"点击选择"),w.a.createElement("div",{className:"m-addr-text"},"地区"))}},{key:"generateAddrAddressNew",value:function(){var e=this,t=this.state,n=t.address,r=t.isAddressError,i=t.isPositionBtnActived,a=t.addressSuggestionList,o=t.addressInputFocused,s=(!!a.length&&n.length,Se&&!Se.isNativePlatform),c={id:"address",value:n,placeholder:"如街道、门牌号、小区、乡镇、村等",onChange:this.addressOnChange,onFocus:function(t){e.setState({addressInputFocused:!0}),e.removeAddressError(t)},onBlur:function(){e.setState({addressInputFocused:!1})},className:"m-addr-textarea  ".concat(r?"input-error":""," ").concat(s?"":"without-pos-icon")},l={className:"position-icon ".concat(i?"active":"inactive"),onClick:function(t){return e.requestPosition(t)}};return w.a.createElement("div",{className:n?"m-addr-address-new":"m-addr-address-none m-addr-address-new"},w.a.createElement("div",{className:"m-addr-address-text"},"详细地址"),w.a.createElement("textarea",c),n&&w.a.createElement("div",{className:"m-addr-address-clear-wrapper ".concat(s?"":"wrapper-without-pos-icon"),onMouseDown:this.checkToStopClear,onTouchStart:this.checkToStopClear,onClick:this.clearAddress,style:{opacity:o?1:0}},w.a.createElement("div",{className:"m-addr-address-clear"})),s&&w.a.createElement("div",l))}},{key:"generateAddrBottom",value:function(){var e,t=this.state,n=t.saveAndUse,r=t.addressSuggestionList;return t.isShowPositionList&&r.length||(e=w.a.createElement("div",{className:"m-addr-save-new active",onClick:this.saveAddress},w.a.createElement("span",null,n?"保存并使用":"保存"))),this.startTime=Date.now(),e}},{key:"generatePositionList",value:function(){var e,t=this,n=t.state,r=n.addressSuggestionList;return n.isShowPositionList&&r.length&&(e=w.a.createElement("div",{className:"m-addr-address-suggestion"},w.a.createElement("ul",{id:"m-addr-address-suggestion-ul",onClick:t.addrBack},r&&r.map((function(e,n){return w.a.createElement("li",{key:"suggestion-".concat(n),onClick:function(n){return t.selectSuggestionAddress.bind(t,n,e)()}},w.a.createElement("div",{className:"m-addr-suggestion-title"},e.title),w.a.createElement("div",{className:"m-addr-suggestion-address"},e.address))}))))),e}},{key:"selectSuggestionAddress",value:function(e,t){var n=this;e&&e.stopPropagation(),this.props.locationAddrClickTracking&&Object(be.sendMetrics)(Object.assign({},this.props.locationAddrClickTracking,this.props.trackingContext));var r=this.state,i=r.currentProvinceID,a=r.currentCityID,o=r.currentDistrictID;i+""==t.province_id+""&&a+""==t.city_id+""&&o+""==t.district_id+""||Object(j.infoH5)("省市区的信息已修改",De);var s=t.province_id,c=t.city_id,l=t.district_id,d=t.title,u=t.thumb_address,m=t.province,p=t.city,f=t.district,v=(t.address,{currentProvinceID:s,currentCityID:c,currentDistrictID:l,currentProvinceName:m,currentCityName:p,currentDistrictName:f,regionUnionName:m===p?"".concat(p," ").concat(f):"".concat(m,"  ").concat(p,"  ").concat(f),address:u+" "+d,addressSuggestionList:[],addressInfo:t,isShowPositionList:!1,title:"编辑地址"});this.setState((function(e){return v}),(function(){Object(U.disableScroll)(document.getElementById("address")),n.setAddressInputFocused()}))}},{key:"setAddressInputFocused",value:function(){var e=document.getElementById("address"),t=e.value.length,n=t,r=t;if(e.setSelectionRange)e.focus&&e.focus(),e.setSelectionRange(n,r);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",r),i.moveStart("character",n),i.select()}else e.focus&&e.focus()}},{key:"requestPosition",value:function(e){e&&e.stopPropagation();var t=this;t.state.isPositionBtnActived||(t.props.locationBtnClickTracking&&Object(be.sendMetrics)(Object.assign({},t.props.locationBtnClickTracking,t.props.trackingContext)),t.setState((function(e){return{isPositionBtnActived:!0}}),(function(e){t.getUserCoords((function(e,n){t.setState((function(e){return{isPositionBtnActived:!1}})),n===t.locateOvertimeCount&&(0!==(e=t.addressListFilter(e)).length?t.setState((function(t){return{addressSuggestionList:e||[],isShowPositionList:!0,title:"根据定位获取附近地址"}}),(function(e){Object(U.disableScroll)(document.getElementById("m-addr-address-suggestion-ul"))})):Pe("无法获取你的位置，请手动选择"))}),t.locateOvertimeCount),t.geoHandler&&clearTimeout(t.geoHandler),t.geoHandler=setTimeout((function(){t.state.isPositionBtnActived&&(Pe("无法获取你的位置"),t.locateOvertimeCount+=1,t.setState((function(e){return{isPositionBtnActived:!1}})))}),15e3)})))}},{key:"getUserCoords",value:function(e,t){var n=this;Se.isWeChatPlatform?window.wx&&window.wx.getLocation({type:"wgs84",success:function(r){var i=r.latitude,a=r.longitude;n.geolocationDecoder(e,{lat:i,lng:a},t)},cancel:function(){e(null,t)}}):Se.isQQPlatform?window.mqq&&window.mqq.sensor&&window.mqq.sensor.getLocation({allowCacheTime:60},(function(r,i,a,o){0!==r?e(null,t):n.geolocationDecoder(e,{lat:i,lng:a,coord_type:5},t)})):n.getGeolocation((function(r){var i=r.coords,a=i.latitude,o=i.longitude;n.geolocationDecoder(e,{lat:a,lng:o},t)}),(function(){e(null,t)}),null)}},{key:"geolocationDecoder",value:function(e,t,n){var r=this;t&&t.lat&&t.lng?(t.coord_type||(t.coord_type=1),(this.antiCrawler?this.antiCrawler.messagePackSync():Promise.resolve("")).then((function(e){var n={payload:{},anti_content:e,location:{lng:t.lng,lat:t.lat,coordinate_type:t.coord_type}};return r.props.scene&&(n.payload.scene=r.props.scene),r.$axiosHttp.post("api/ptolemeaus/poi/nearby/poi_list",n)})).then((function(t){var r;null!=t&&null!==(r=t.result)&&void 0!==r&&r.data?e(t.result.data,n):e(null,n)})).catch((function(){e(null,n)}))):e(null)}},{key:"getGeolocation",value:function(e,t,n){t||(t=function(e){switch(e.code){case e.TIMEOUT:Pe("定位失败，请稍后重试");break;case e.PERMISSION_DENIED:Pe("定位失败，请先同意定位请求");break;case e.POSITION_UNAVAILABLE:case e.UNKNOWN_ERROR:Pe("无法获取你的位置")}}),n||(n={enableHighAccuracy:!1,timeout:6e4,maximumAge:6e4}),navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,n):Pe("定位失败，请手动输入地址")}},{key:"addressListFilter",value:function(e){return e&&e.length>0?e.filter((function(e){return-1!==parseInt(e.city_id,10)&&-1!==parseInt(e.district_id,10)&&-1!==parseInt(e.province_id,10)})):[]}},{key:"reduceMobile",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)e.charCodeAt(r)<255&&(t+=e.substr(r,1));return t.replace(/\s|\-/g,"").replace(/^\+86/,"")}},{key:"dealSaveResult",value:function(e){var t=this;t.props.onSaveClickTrackingBase&&Object(be.sendMetrics)(Object.assign({},t.props.onSaveClickTrackingBase,t.props.trackingContext)),this.$axiosHttp.get("api/origenes/address/"+e).then((function(e){t.props.onConfirm&&t.props.onConfirm(e)}))}},{key:"validName",value:function(){var e=this.state.name;return""===e.trim()?(Pe("请填写收货姓名"),!1):M(e)>16?(Pe("姓名不能超过8个字"),this.setState((function(e){return{isNameError:!0}})),!1):(this.setState((function(e){return{isNameError:!1}})),!0)}},{key:"validMobile",value:function(){return""!==this.state.mobile||(Pe("请填写手机号码"),!1)}},{key:"validAddress",value:function(){var e=this.state.address;if(!1!==this.shouldIgnoreClearBtnClick){if(""===e.trim())return Pe("请填写详细地址"),!1;if(M(e)>100)return Pe("地址不能超过100个字，请删除部分内容"),this.setState((function(e){return{isAddressError:!0}})),!1;return/^[0-9]*$/.test(e)?(Pe("请填写正确的地址"),this.setState((function(e){return{isAddressError:!0}})),!1):(this.setState((function(e){return{isAddressError:!1}})),!0)}}},{key:"validAddressInfo",value:function(){if(!this.validName())return!1;var e=this.state,t=e.currentProvinceID,n=e.currentCityID,r=e.currentDistrictID;return t+""=="0"||n+""=="0"||r+""=="0"?(Pe("请选择地区"),this.setState((function(){return{showRegionSelector:!0}})),!1):!!this.validAddress()&&!!this.validMobile()}},{key:"removeNameError",value:function(e){e&&e.stopPropagation(),this.setState((function(e){return{isNameError:!1,focused:!0}}))}},{key:"removeMobileError",value:function(e){e&&e.stopPropagation(),this.setState((function(e){return{isMobileError:!1,focused:!0}}))}},{key:"removeAddressError",value:function(e){e&&e.stopPropagation(),this.setState((function(e){return{isAddressError:!1,focused:!0}}))}}]),o}(I.Component);xe.defaultProps={title:"编辑地址",addressId:"",trackingContext:{}};var Re=xe,Oe=n("kFzF"),Te=n("7obA"),Le=n.n(Te);function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}n.d(t,"default",(function(){return Me}));var Be=function(){},Me=function(e){v()(r,e);var t,n=je(r);function r(){var e;u()(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).state={addressList:[],selectIndex:0,isShowAll:!1,isShowEditAddress:!1},e.handleSelect=function(){var t=l()(S.a.mark((function t(n,r){var i,a,o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.props.onValidate)){t.next=8;break}return t.next=4,i(r);case 4:!0===t.sent?e.setState({selectIndex:n}):((a=s()(e.state.addressList))[n].validate=!1,e.setState({selectIndex:n,addressList:a})),t.next=12;break;case 8:if(!1!==(null===(o=e.state.addressList[n])||void 0===o?void 0:o.deliverable)){t.next=11;break}return Object(j.info)("您当前的地址暂不支持派送，请选择其他地址"),t.abrupt("return");case 11:e.setState({selectIndex:n});case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleShowAll=function(){e.setState({isShowAll:!0})},e.handleAddAddress=function(){e.setState({isShowEditAddress:!0})},e.handleCloseEditAddress=function(){e.setState({isShowEditAddress:!1})},e.handleConfirmAddAddress=function(){var t=l()(S.a.mark((function t(n){var r,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAddressList();case 2:return r=t.sent,i=r.findIndex((function(e){return e.address_id===n.address_id})),t.next=6,e.handleSelect(i,r[i]);case 6:e.setState({addressList:r,selectIndex:i,isShowEditAddress:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleConfirmAddress=k()((function(){var t,n=e.state,r=n.addressList,i=n.selectIndex;!1!==(null===(t=r[i])||void 0===t?void 0:t.validate)&&e.props.onConfirm(r[i])}),2500,{trailing:!1}),e}return p()(r,[{key:"componentDidMount",value:function(){this.httpClient=new Oe.a,this.getAddressList(!0)}},{key:"getAddressList",value:(t=l()(S.a.mark((function e(t){var n,r,i,a,o,s,c,l,d,u,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.auctionId,i=n.addressListAPI,a=n.selectedAddressID,o=n.method,s=void 0===o?"get":o,e.next=3,this.httpClient[s](i||"/api/origenes/addresses",{auction_id:r});case 3:if(c=e.sent,!Array.isArray(c)){e.next=8;break}return t&&(a?(l=c.findIndex((function(e){return String(e.address_id)===String(a)})))>=0&&(d=c.splice(l,1))&&d[0]&&c.unshift(d[0]):(u=c.findIndex((function(e){return 1==+e.is_default})))>=0&&(m=c.splice(u,1))&&m[0]&&c.unshift(m[0])),this.setState({addressList:c}),e.abrupt("return",c);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"renderLastLine",value:function(){var e=this.state,t=e.addressList,n=e.isShowAll;return t.length<2||n?w.a.createElement("li",{className:_()(Le.a.addressItem,Le.a.add),onClick:this.handleAddAddress},w.a.createElement("p",null,"添加新收货地址")):w.a.createElement("li",{className:_()(Le.a.addressItem,Le.a.showAll),onClick:this.handleShowAll},w.a.createElement("p",null,"选择其他收货地址"))}},{key:"renderValidate",value:function(e,t,n){return!1===e.validate&&t===n||!1===e.deliverable?w.a.createElement("span",{className:Le.a.red},"您当前的地址暂不支持派送，请选择其他地址"):null}},{key:"renderList",value:function(){var e=this,t=this.state,n=t.addressList,r=t.isShowAll,i=t.selectIndex;return w.a.createElement("ul",{className:Le.a.listWrapper},n.slice(0,r?n.length:1).map((function(t,n){return w.a.createElement("li",{key:n,className:_()(Le.a.addressItem,a()({},Le.a.selected,n===i)),onClick:function(){e.handleSelect(n,t)}},w.a.createElement("p",{className:Le.a.name},t.name+", "+t.mobile),w.a.createElement("p",{className:Le.a.address},t.province+t.city+t.district+t.address),e.renderValidate(t,n,i),n!==i&&w.a.createElement("div",{className:Le.a.use},"使用"))})),this.renderLastLine())}},{key:"renderContent",value:function(e,t){return e?w.a.createElement(I.Fragment,null,w.a.createElement("div",{className:Le.a.header},w.a.createElement("span",{className:Le.a.back,onClick:this.props.onClose}),"选择收货地址"),w.a.createElement("div",{className:Le.a.body},w.a.createElement("div",{className:Le.a.tip},t||"中奖后，将自动生成订单包邮到家"),this.renderList()),w.a.createElement("div",{className:Le.a.footer},w.a.createElement("div",{className:Le.a.confirm,onClick:this.handleConfirmAddress},"确认收货地址"))):null}},{key:"render",value:function(){var e=this.props,t=e.isShow,n=e.onClose,r=e.maskStyle,i=e.titleTip,o=e.contentClassName,s=e.wrapperClassName,c=this.state.isShowEditAddress;return w.a.createElement(A.Portal,null,w.a.createElement("div",{className:_()(Le.a.wrapper,a()({},Le.a.show,t),s)},w.a.createElement("div",{className:Le.a.mask,style:r,onClick:n}),w.a.createElement("div",{className:_()(Le.a.content,o)},this.renderContent(t,i)),c&&t&&w.a.createElement(Re,{onConfirm:this.handleConfirmAddAddress,onClose:this.handleCloseEditAddress})))}}]),r}(w.a.Component);Me.defaultProps={onClose:Be,onConfirm:Be,selectedAddressID:"",isValidate:!0,contentClassName:""}},QROL:function(e,t,n){},TWHF:function(e,t,n){var r=n("lmWj"),i=n("Q8e5"),a="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return a},t._getCss=function(){return""+r},t._insertCss=function(e){return i(a,e)}},X0J6:function(e,t,n){"use strict";var r=n("lwsE"),i=n.n(r),a=n("W8MJ"),o=n.n(a),s=n("PJYZ"),c=n.n(s),l=n("7W2i"),d=n.n(l),u=n("a1gu"),m=n.n(u),p=n("Nsbk"),f=n.n(p),v=n("q1tI"),g=n.n(v),h=n("i8i4"),y=n("eHaf");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m()(this,n)}}var C=function(e){d()(r,e);var t=b(r);function r(e){var n;return i()(this,r),(n=t.call(this,e)).provideOptions=function(){n.DomNode=Object(h.findDOMNode)(c()(n)),n.DomNode&&n.registerImprToComponent()},n.registerImprToComponent=function(){var e=n.props,t={threshold:e.threshold,rootMargin:e.rootMargin,root:e.root};n.observer=new IntersectionObserver(n.observerCallBack,t),n.observer.observe(n.DomNode)},n.observerCallBack=function(e,t){e.forEach((function(e){n.singleTracking(e)}))},n.singleTracking=function(e){var t=n.props,r=t.onEnter,i=t.onLeave,a=t.doImpr;n.isItemIn(e)?(a&&n.trackingAction(),r(e)):i(e)},n.trackingAction=function(){n.timer&&clearTimeout(n.timer),n.timer=setTimeout((function(){var e=n.DomNode.getBoundingClientRect().top;if(!(e<-200||e>800)){var t=n.props,r=t.once,i=t.trackingInfo,a=void 0===i?{}:i;Object(y.sendImprMetrics)(a),n.observer&&n.DomNode&&r&&n.observer.unobserve(n.DomNode)}}),300)},n.isItemIn=function(e){var t=n.props.threshold;return e.isIntersecting&&e.intersectionRatio>=t},n.observer=null,n.DomNode=null,n.timer=null,n}return o()(r,[{key:"componentDidMount",value:function(){n("Wr5T"),this.provideOptions()}},{key:"componentWillUnmount",value:function(){this.observer&&this.DomNode&&this.observer.unobserve(this.DomNode)}},{key:"render",value:function(){return g.a.Children.only(this.props.children)}}]),r}(v.Component);C.defaultProps={root:null,doImpr:!0,isCombined:!1,threshold:1,rootMargin:"0px",gap:300,imprItem:{},once:!0,onEnter:function(){},onLeave:function(){}},t.a=C},Yic3:function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),a=n("QILm"),o=n.n(a),s=n("q1tI"),c=n.n(s),l=n("TSYQ"),d=n.n(l),u=n("91HH"),m=n("6slb"),p=n("jGYx"),f=n.n(p);function v(e){var t=e.className,n=o()(e,["className"]);return c.a.createElement(u.HalfPixelBorderBox,i()({"data-active":"cell-white"},n,{className:d()(t,f.a.root)}))}v.defaultProps={type:"right",borderColor:m.a,children:"取消"},t.a=Object(u.withStyles)(f.a)(v)},cmd4:function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),a=n("QILm"),o=n.n(a),s=n("q1tI"),c=n.n(s),l=n("TSYQ"),d=n.n(l),u=n("91HH"),m=n("kcBU"),p=n.n(m);function f(e){var t=e.className,n=o()(e,["className"]);return c.a.createElement("div",i()({"data-active":"cell-white"},n,{className:d()(t,p.a.root)}))}f.defaultProps={children:"确定"},t.a=Object(u.withStyles)(p.a)(f)},dXXU:function(e,t,n){var r=n("A8tI"),i=n("Q8e5"),a="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return a},t._getCss=function(){return""+r},t._insertCss=function(e){return i(a,e)}},fUNr:function(e,t,n){var r=n("m/8u"),i=n("Q8e5"),a="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return a},t._getCss=function(){return""+r},t._insertCss=function(e){return i(a,e)}},jGYx:function(e,t,n){var r=n("/Dp6"),i=n("Q8e5"),a="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return a},t._getCss=function(){return""+r},t._insertCss=function(e){return i(a,e)}},kcBU:function(e,t,n){var r=n("2/+j"),i=n("Q8e5"),a="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return a},t._getCss=function(){return""+r},t._insertCss=function(e){return i(a,e)}},lmWj:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._3kJOHato{font-size:.17rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}._3kJOHato>*{-webkit-box-flex:1;-webkit-flex:1;flex:1}",""]),t.locals={root:"_3kJOHato"}},"m/8u":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2_R9cyxl{padding:.24rem .2rem}",""]),t.locals={root:"_2_R9cyxl"}},tyBV:function(e,t,n){"use strict";var r=n("pVnL"),i=n.n(r),a=n("QILm"),o=n.n(a),s=n("q1tI"),c=n.n(s),l=n("TSYQ"),d=n.n(l),u=n("91HH"),m=n("fUNr"),p=n.n(m);t.a=Object(u.withStyles)(p.a)((function(e){var t=e.className,n=o()(e,["className"]);return c.a.createElement("div",i()({},n,{className:d()(t,p.a.root)}))}))}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-live-layer/js/loadable_MobileLive_AddressSelector_6376905a4363b49c3bbb.js.map