(window.webpackJsonpForReact=window.webpackJsonpForReact||[]).push([[38],{"+bfp":function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n("lSNA"),a=n.n(r),o=(n("q1tI"),n("T+J9"),n("ii9O")),i=n("KoDT"),c=n("hQH6"),s=n("2xwX"),u=n("MpJ2"),l=n("mj+i");n("Wr5T");!function(){var e=Object(i.a)();o.b.forward=function(e,t,n,r){return o.b.uniformForward(e,t,r)},o.b.reset=function(t,n){if(e.isNativePlatform||e.isTinyNativePlatform)Object(u.d)("JSNavigation","reset",{url:Object(l.h)(t)}).then(function(){o.b.reload(t,n)},function(){o.b.reload(t,n)});else{var r=t||"";r.indexOf("/index.html")>=0&&(r=t.replace("/index.html","/")),o.b.uniformForward(r,n)}},o.b.home=function(t){e.statisfy&&e.statisfy("1.2.2","2.0.8","greaterThan")||e.isTinyNativePlatform?Object(u.d)("JSNavigation","selectTab",{tab_index:0}):o.b.reset("index.html",t)}}(),c.a.enabled("options");var p=Object(i.a)().isNativePlatform,d=window.__ERROR_REDIRECT__;if(d){var f=d.alertText,m=d.isBack,h=d.redirectUrl;f&&alert(f),m?o.b.back():["/index.html","index.html","/"].includes(h)?o.b.home():o.b.uniformForward(decodeURIComponent(h))}if(p)try{Object(s.a)()}catch(e){}var v=n("GVES"),b=n("EhXv"),g=n("UZEp"),y=n("AhR4"),O=n.n(y);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e,t){Object(g.logBootTime)(),window.pdd_page_id&&window.rawData&&(window.rawData.pageID=window.pdd_page_id),t=t||e.appConfig.options||{},e.appConfig.beforeBoot&&e.appConfig.beforeBoot();var n=t.pageProperty&&t.pageProperty.pageSN;n&&b.b.init({id:n}),Object(v.a)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({title:(e.appConfig||{}).title,pmmAppInfo:O.a},t))}},"/dok":function(e,t,n){e.exports={barrageItem:"t37SaiT4",comment:"_13umz0Lb",commentBody:"_1wpN19bU",up:"_2YL3nj8k",middle:"_2gBsgoSR",down:"Vpt4MBYG",avatar:"_3XxqgoUN",firstAvatar:"_2hKQcQLh"}},11:function(e,t,n){e.exports=n("y7QR")},"16CW":function(e,t,n){"use strict";n.d(t,"a",function(){return j});var r,a=n("lwsE"),o=n.n(a),i=n("W8MJ"),c=n.n(i),s=n("iWIM"),u=n.n(s),l=n("a1gu"),p=n.n(l),d=n("Nsbk"),f=n.n(d),m=n("7W2i"),h=n.n(m),v=n("U+yc"),b=n.n(v),g=n("2vnA"),y=n("vHpM"),O=n("Rc36"),_=function(e,t){var n=e.pathname,r=e.query,a=void 0===r?{}:r,o=e.userAgent,i=e.hostname,c=e.cookies,s=e.platform,u=e.isSupportWebp,l=e.__req,p=e.__res,d=null;return l?d=l.get("p-uno-context")||l.get("p-immerse"):t&&t.unoData&&(d=t.unoData),{pathname:n,query:a,userAgent:o,hostname:i,cookies:c,platform:s,req:l,res:p,unoData:d,isSupportWebp:u,toJSON:function(){return{unoData:d}}}};function w(e){return function(){var t,n=f()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=f()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p()(this,t)}}var j=(r=function(e){h()(n,e);var t=w(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).$ctx=null,e}return c()(n,[{key:"initDataCallback",value:function(e){this.$ctx=_(e);this.$ctx.res;return u()(f()(n.prototype),"initDataCallback",this).call(this,e)}},{key:"fromJS",value:function(e,t){u()(f()(n.prototype),"fromJS",this).call(this,e,t),this.$ctx=_(Object(O.a)(),e&&e.$ctx)}}]),n}(y.a),b()(r.prototype,"initDataCallback",[g.d],Object.getOwnPropertyDescriptor(r.prototype,"initDataCallback"),r.prototype),r)},"1kYP":function(e,t,n){e.exports={title:"_1KaDQxw8",scrollBody:"_1a6cTZBF",ruleItem:"_17OVSrpp"}},"5C4i":function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return h});var r=n("o0o1"),a=n.n(r),o=n("yXPU"),i=n.n(o),c=n("ii9O"),s=n("MpJ2");function u(e,t,n){return c.b.uniformForward(e,t,n)}function l(){return c.b.back()}function p(e){return Object(s.d)("PDDNavigator","backToGoodsList",e)}function d(e){return Object(s.d)("PDDNavigator","pageSourceStack",null,"3.61.0","3.61.0").then(function(t){if(t&&t.pageSourceStack)return e(t.pageSourceStack)}).catch(function(){})}var f={nothing:0,backToIndex:1,backToPreviousPage:2};function m(){return(m=i()(a.a.mark(function e(t){var n,r,o=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:f.backToPreviousPage,e.next=3,d("number"==typeof t?function(e){return e.reverse()[-t]}:function(e){return t(e.reverse())});case 3:if(r=e.sent){e.next=9;break}if(n!==f.nothing){e.next=7;break}return e.abrupt("return");case 7:if(n!==f.backToPreviousPage){e.next=9;break}return e.abrupt("return",l());case 9:return e.abrupt("return",p(r));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return-1===e?l():function(e){return m.apply(this,arguments)}(e)}},AhR4:function(e,t){e.exports={universalPaths:["/timeline_medal_wall.html"],universalQueryKeys:["__rp_name"],appId:"100586",testAppId:"100193",bizSide:"consumer-platform-fe"}},BQTS:function(e,t,n){"use strict";n.d(t,"l",function(){return u}),n.d(t,"j",function(){return l}),n.d(t,"i",function(){return p}),n.d(t,"k",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"h",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return g}),n.d(t,"a",function(){return y}),n.d(t,"e",function(){return O});var r=n("RIqP"),a=n.n(r),o=n("mj+i"),i=n("LvDl"),c=n("LhzX"),s=["red_packet_up_v2.png","red_packet_open.png","red_packet_risk.png","red_packet_down.png"],u=function(e){var t=e||{},n=t.templateName,r=t.pageSN,u=t.preloadImgArr,l=void 0===u?[]:u,p=Object(o.f)(location.search);return{serverTemplateName:n||"timeline_red_packet",title:"拼小圈红包",options:{shareInfo:{disableShare:!0,noDefaultShare:!0,forceShareToWeChatTimeline:!1,shareToWeChatTimelineInAppDisabled:!0},pageProperty:{pageSN:r||52141,pageName:"pxq_hongbao",extraPvParams:Object(i.pick)(p,["red_envelope_owner_scid","broadcast_sn","tl_timestamp","red_envelope_type"])},preloadImgArr:[].concat(s,a()(l)).map(function(e){return Object(c.a)(e)})}}},l={READY:1,SUCCESS:2,HAS_REVEIVED:3,EXPIRED:4,EMPTY:5,RISK:6,NOT_FRIEND:7,NOT_BIND_WECHAT:8,OUT_LIMIT:9},p="timeline_red_packet_eduModal",d={follow:1,album:2},f={UP:"up",MIDDLE:"middle",DOWN:"down"},m="https://funimg.pddpic.com/chat_msg/default_head.png",h=500,v=2,b={content:1,goods:2,mall:3,brand:4},g={pure:100,share:101,goods:102,mention:103},y="AVATAR_WRAP_ID",O={handle:0,quick:1}},DcQi:function(e,t,n){},HR6E:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("PlGL"),i=n("miVt"),c=n("kUaC"),s=n("SC6O"),u=n.n(s);t.a=Object(r.memo)(function(e){var t=e.fromRoomUI,n=e.educationModalInfo||{},s=n.title,l=n.subTitle,p=n.picUrl,d=n.btnText;return Object(r.useEffect)(function(){return Object(c.d)(!1),function(){Object(c.d)(!t)}},[]),a.a.createElement(o.a,null,a.a.createElement("div",{className:u.a.modal},a.a.createElement(i.a,{src:p,className:u.a.eduImg}),a.a.createElement("div",{className:u.a.title},s),a.a.createElement("div",{className:u.a.content},l),a.a.createElement("div",{className:u.a.btn,onClick:e.onClose},a.a.createElement("span",null,d))))})},IelJ:function(e,t,n){e.exports={wrap:"_2YN8Ejy_",title:"_3Kifk6vK",avatar:"_2ID5AMkj"}},Jfsp:function(e,t,n){e.exports={wrapper:"_3cEt2Qzk",radiusBorder:"_13Ye6QGk",circle:"sLXeQH0D"}},KB3X:function(e,t,n){e.exports={"go-top":"_2PUap2Bm","top-button-hide":"_2UZtT8-Y","top-button-show":"DZC92hWb",container:"_3a9gKA3f",self:"_3QdAKujT",ixBottomAdapter:"_3RxSuFNd"}},L0sF:function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),o=n("q1tI"),i=n.n(o),c=n("TSYQ"),s=n.n(c),u=n("KB3X"),l=n.n(u);t.a=Object(o.memo)(function(e){return i.a.createElement("div",a()({className:s()(l.a.ixBottomAdapter,l.a.self)},e))})},L5JJ:function(e,t,n){e.exports={none:"_1Sy8JiNV",wrap:"_39gOsO5w",wrapAnimate:"_1GPWLMU-",redPacket:"_3i-mhtXd",avatar:"lTvUJt3K",nickname:"hyG83ODY",tips:"GgVsXa4m",up:"FrHh_0I1",upAnimate:"_2GUjcWLO",down:"_2awNmK3M",downAnimate:"Bb1RLjQx",openIconWrap:"_1q1knq83",tag:"_15BXyEOn",openIconWrapRotate:"_13PmWKXc",redPacketRotate:"_2Y7PTVF-",openIcon:"_18Ft7agj"}},LhzX:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s});var r=n("cDf5"),a=n.n(r);function o(e){return e.replace(/_(\w)/g,function(e,t){return t.toUpperCase()})}function i(e,t){if(Array.isArray(e))t=t||[],e.forEach(function(e,n){"object"===a()(e)&&null!==e?t.push(i(e)):t.push(e)});else for(var n in t=t||{},e)e.hasOwnProperty(n)&&("object"===a()(e[n])&&null!==e[n]?t[o(n)]=i(e[n],Array.isArray(e[n])?[]:{}):t[o(n)]=e[n]);return t}function c(e){if("string"!=typeof(e=e||""))throw Error('splitFileName() "fileName" shoule be a String');var t=/\.[a-z0-9]+$/.exec(e);return t?[e.substr(0,t.index),t[0]]:[e]}function s(e){return e&&"string"==typeof e?/https?:\/\//.test(e)?e:(e=/^\//.test(e)?e.substr(1,e.length):e,/^timeline\//.test(e)?"https://funimg.pddpic.com/".concat(e):"https://funimg.pddpic.com/timeline/".concat(e)):e}},Ll5m:function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=n("yXPU"),i=n.n(o),c=n("J4zp"),s=n.n(c),u=n("q1tI"),l=n.n(u),p=n("TSYQ"),d=n.n(p),f=n("kMSe"),m=n("SXY3"),h=n("kUaC"),v=n("LhzX"),b=n("QRr4"),g=n("nWVn"),y=n("NeoJ"),O=n("i4v+"),_=n("Wv02"),w=n("uxhC"),j=n("L5JJ"),k=n.n(j),E=["red_packet_down.png","rotate-coin.gif","redpacket_head_bg_v3.png","open_money_bg.png"],P=300,C=1200;t.a=Object(f.d)(function(e){var t=Object(u.useRef)(null),n=Object(u.useRef)(null),r=Object(u.useRef)(null),o=Object(u.useRef)(!1),c=Object(u.useState)(!1),p=s()(c,2),f=p[0],j=p[1],S=(Object(b.a)()||{}).store,I=S.isNativePlatform,N=S.avatar,R=S.nickname,T=S.openRedPacket,D=S.setReadPacketStatus,x=S.broadcast_sn,A=(S.packetType,S.status),L=S.maskTitle,B=S.tagTemplate||{},M=B.tagText,U=B.tagBgColor,q=B.tagColor,W=B.maskTagFontSize,z={color:q,background:U,fontSize:"".concat(W/100,"rem")},F=function(){var e=i()(a.a.mark(function e(){var i,c,u,l,p,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(O.b)(),i=n&&n.current,c=t&&t.current,u=r&&r.current,!i||!c||o.current){e.next=19;break}return o.current=!0,i.src=Object(v.a)("rotate-coin.gif"),e.next=9,Promise.all([T(),Object(g.a)(C)]);case 9:l=e.sent,p=s()(l,2),d=p[0],p[1],setTimeout(function(){D(d)},P),c.style.display="none",u.style.background="url(https://funimg.pddpic.com/timeline/red_packet_down.png)",u.style.backgroundSize="100% 100%",j(!0),I&&Object(_.d)(x);case 19:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)(function(){setTimeout(function(){E.forEach(function(e){document.createElement("img").src="https://funimg.pddpic.com/timeline/".concat(e)})},500)},[]),Object(u.useEffect)(function(){return A===w.j.READY&&Object(h.d)(!1),function(){Object(h.d)(!0)}},[]),A!==w.j.READY?null:l.a.createElement(m.a,{trackingInfo:O.e},l.a.createElement("div",{className:d()(k.a.wrap,f&&k.a.wrapAnimate)},l.a.createElement("div",{className:k.a.redPacket},l.a.createElement("img",{src:Object(v.a)("red_packet_up_v2.png"),className:k.a.none}),l.a.createElement("div",{className:d()(k.a.up,f&&k.a.upAnimate)},l.a.createElement(y.a,{wrapperClass:k.a.avatar,src:N}),l.a.createElement("div",{className:k.a.nickname},R),!!M&&l.a.createElement("div",{className:k.a.tag,style:z},M),l.a.createElement("div",{className:k.a.tips},L||"拼小圈出钱发红包啦")),l.a.createElement("div",{ref:r,className:d()(k.a.down,f&&k.a.downAnimate)},l.a.createElement("div",{ref:t,className:k.a.openIconWrap,onClick:F},l.a.createElement("img",{ref:n,className:k.a.openIcon,src:Object(v.a)("red_packet_open.png")}))))))})},NCCs:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("q1tI"),a=n.n(r),o=(n("TSYQ"),n("SJUw")),i=n.n(o),c=n("LhzX"),s=n("kUaC"),u=n("i4v+"),l=n("rTPm"),p=n.n(l),d=Object(c.a)("red_packet_risk.png");function f(e){var t=e.isFetchError,n=e.immersiveSupported;Object(r.useEffect)(function(){Object(u.f)(t),Object(s.d)(!1),setTimeout(function(){n&&i.a.callNative("JSUIControl","setRollingAlpha",{alpha:[0,1],offset:[0,100],btn_style:["#000000","#000000"],status_bar_style:[0,1],continuous:1,height:window.innerHeight})},50);var e=document.getElementsByClassName("comment_input_wrap");return e&&e[0]&&(e[0].style.display="none"),function(){Object(s.d)(!0)}},[]);var o=t?"网络情况不佳，请返回后重试":"手滑了，没抢到红包哦";return a.a.createElement("div",{className:p.a.riskWrap},a.a.createElement("div",{className:p.a.risk},a.a.createElement("img",{className:p.a.riskBg,src:d,alt:o}),a.a.createElement("div",{className:p.a.tips},o)))}},NeoJ:function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),o=n("lSNA"),i=n.n(o),c=n("QILm"),s=n.n(c),u=n("q1tI"),l=n.n(u),p=n("kMSe"),d=n("TSYQ"),f=n.n(d),m=n("ez7s"),h=n("akzz"),v=n("Jfsp"),b=n.n(v);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.a=Object(h.a)(u.memo,Object(p.c)("store"))(function(e){var t=e.wrapperClass,n=e.bgSize,r=void 0===n?"cover":n,o=e.src,c=e.width,p=e.isSquare,d=e.placeholder,h=e.progress,v=e.store.webpEnable,y=e.resizeWidth,O=e.quality,_=e.style,w=e.needBorder,j=e.backgroundColor,k=e.forwardRef,E=s()(e,["wrapperClass","bgSize","src","width","isSquare","placeholder","progress","store","resizeWidth","quality","style","needBorder","backgroundColor","forwardRef"]),P=function(e,t,n,r,a,o){if(!e||!n)return null;var i="",c=[],s=Object(m.a)(e,t);if(c.push({image:s}),r){var u=Object(m.a)(e,{resizeWidth:150,quality:50,webpEnable:t.webpEnable});c.push({image:u})}return a&&c.push({image:a}),c.length&&(i=function(e,t){return e.map(function(e){var n=e.position,r=void 0===n?"center":n,a=e.size,o=void 0===a?t:a,i=e.image,c=void 0===i?"":i,s=e.repeat,u=void 0===s?"no-repeat":s,l="";return l=c.includes("//")||c.includes("data")?"url('".concat(c,"')"):c,"".concat(r," / ").concat(o," ").concat(u," ").concat(l)}).join(",")}(c,n)),o&&(i+=" ".concat(o)),i}(o,Object(u.useMemo)(function(){return{webpEnable:v,resizeWidth:y||function(e){return 200*parseFloat(e,10)}(c),quality:O}},[v,y,c,O]),r,h,d,j);return l.a.createElement("div",a()({className:f()(b.a.wrapper,w&&b.a.radiusBorder,i()({},b.a.circle,!p),t),style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({width:c,height:c,background:P},_||{})},E,{ref:k}))})},QRr4:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("q1tI"),a=n.n(r),o=n("kMSe");function i(){return a.a.useContext(o.a)}},QzGf:function(e,t,n){"use strict";n.d(t,"a",function(){return W});var r=n("pVnL"),a=n.n(r),o=n("lSNA"),i=n.n(o),c=n("lwsE"),s=n.n(c),u=n("W8MJ"),l=n.n(u),p=n("PJYZ"),d=n.n(p),f=n("a1gu"),m=n.n(f),h=n("Nsbk"),v=n.n(h),b=n("7W2i"),g=n.n(b),y=n("q1tI"),O=n.n(y),_=n("TSYQ"),w=n.n(_),j=n("kMSe"),k=n("KoDT"),E=n("h3qu"),P=n("b6XL"),C=n("2xwX"),S=n("TQAU"),I=200,N=!!window.navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);function R(){var e=Object(k.a)().systemVersion;if(N&&Object(E.c)(e,"12.0")>=0&&Object(E.c)(e,"13.4")<0&&"function"==typeof window.scrollTo)return setTimeout(function(){return window.scrollTo(0,0)},80)}n("DcQi");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){return function(){var t,n=v()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=v()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m()(this,t)}}var x=!1,A=null,L=Object(k.a)();x=L.system===E.b.IOS,A=L.systemVersion;var B="请输入评论...",M="没有输入内容，无法发送哦",U="input-content-wrap",q=!window.navigator.userAgent.match(/MQQBrowser/)&&window.navigator.userAgent.match(/Android/);function W(e){var t,n=e.appConfig||{},r=n.sendMsgAPI,o=(n.hideInputAfterSended,n.maxSize),c=n.maxSizeTips;n.inputSticky;return r||console.warn("APP should set static appConfig, which contains [sendMsgAPI]."),Object(j.d)(t=function(t){g()(u,t);var n=D(u);function u(e){var t;return s()(this,u),(t=n.call(this,e)).onCommentInputShow=function(e,n){t.inputRef.current&&(t.inputRef.current.value=t.state.inputVal||""),e&&e.currentTarget&&(e={}),t.sendParams=e||{},t.pageScrollTop=Object(S.a)(),t.setState({showInput:!0,showMask:!0,placeholder:B},function(){var e=t.appRef.current.showKeyboard;"function"==typeof e&&e();var n=t.inputRef.current;n&&n.focus();var r=t.appRef.current.afterCommentInputShow;"function"==typeof r&&r()})},t.dispatchToWholeComments=function(){if(!t._clickSendBtn){var e={inputVal:(t.inputRef.current.value||"").trim(),sendParams:t.sendParams},n=new CustomEvent("UNSEND_MSG_HIDE",{detail:e});window.dispatchEvent(n)}},t.onCommentInputHide=function(){t.lastSendParams=t.sendParams,setTimeout(R,50),t.state.showInput&&(t.dispatchToWholeComments(),t.setState({showInput:!1},function(){Object(S.d)(t.pageScrollTop);var e=t.appRef.current.hideKeyboard;"function"==typeof e&&e();var n=t.inputRef.current;n&&(n.value="",n.blur());var r=t.appRef.current.afterCommentInputHide;"function"==typeof r&&r()}),t.delayCloseMask())},t.delayCloseMask=function(){setTimeout(function(){t.setState({showMask:!1})},300)},t.onInputWrapTouchStart=function(e){e&&e.stopPropagation()},t.onInputAboveTouchStart=function(e){t.__inputAboveTouched=!0},t.onInputAboveTouchEnd=function(e){var n=Object(E.c)(A,"9.0")<0?1200:300;setTimeout(function(){t.__inputAboveTouched=!1},n)},t.onInputFocus=function(e){!function(){var e=Object(k.a)().systemVersion;N&&Object(E.c)(e,"11")>=0&&Object(E.c)(e,"12")<0||N&&Object(E.c)(e,"13.0.1")<0&&"function"==typeof window.scrollTo&&setTimeout(function(){var e=window.scrollY;window.scrollTo(0,e+I)},560)}(t.pageScrollTop),t.onCommentInputShow(t.sendParams)},t.onBlur=function(e){},t.onInput=function(e){var n=(e&&e.target.value||"").trim();n.length>o&&(n=n.slice(0,o),e&&(e.target.value=n),Object(P.a)("最多输入".concat(o,"个字"))),t.setState({inputVal:n})},t.readyToHideKeyboard=function(){if(t._clickSendBtn&&(t._clickSendBtn=!1,""===(t.inputRef.current.value||"").trim()))return;t._clickSendBtn=!1,t.onCommentInputHide()},t.onBeforeSend=function(){t._clickSendBtn=!0},t.onSend=function(){if(!t._submiting){var e=(t.inputRef.current.value||"").trim();if(e){if(t._submiting=!0,o&&e.length>+o)return Object(P.a)(c||"评论字数不得超过".concat(o,"字")),void(t._submiting=!1);setTimeout(function(){if(""===e)return!x&&Object(P.a)(M),void(t._submiting=!1);Object(C.c)(),t.inputRef.current.blur();var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){i()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.sendParams,{content:e}),r=t.appRef.current.onMsgSubmit;"function"==typeof r&&r(n,t.onMsgSended)},50)}else Object(P.a)(M)}},t.onMsgSended=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.saveInputVal,r=e.success;Object(C.a)(),t._clickSendBtn=!1,t._submiting=!1,r&&(t.sendParams={}),t.onCommentInputHide(),!n&&t.resetInputVal()},t.resetInputVal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.inputRef.current.value=e,t.setState({inputVal:e})},t.subscribListener=function(){if(t.inputRef.current.addEventListener("blur",t.onBlur,!1),/Android/gi.test(navigator.userAgent)){var e=window.innerHeight;window.addEventListener("resize",t.onResize.bind(d()(t),e),!1)}else window.addEventListener("focusin",t.onFocusIn,!1),window.addEventListener("focusout",t.onFocusOut,!1)},t.onMaskTouchStart=function(e){e.preventDefault(),e.stopPropagation(),t.onCommentInputHide(),t.delayCloseMask()},t.state={showInput:!1,showMask:!1,inputVal:"",placeholder:B,isIOS11:!1},t.sendMsgAPI=r,t.sendParams={},t.lastSendParams={},t.pageScrollTop=0,t.inputRef=O.a.createRef(),t.appRef=O.a.createRef(),t.onResize=t.onResize.bind(d()(t)),t.onFocusIn=t.onFocusIn.bind(d()(t)),t.onFocusOut=t.onFocusOut.bind(d()(t)),t}return l()(u,[{key:"onResize",value:function(e){if(this.inputRef.current)if(window.innerHeight<e);else{if(this._clickSendBtn)(this.inputRef.current.value||"").trim();else this.inputRef.current.blur();this.onCommentInputHide()}}},{key:"onFocusIn",value:function(e){}},{key:"onFocusOut",value:function(e){this.__inputAboveTouched||(this.onCommentInputHide(),R())}},{key:"componentDidMount",value:function(){this.setState({isIOS11:x&&Object(E.c)(A,"11")>=0&&Object(E.c)(A,"12")<0}),this.subscribListener();var e=document.getElementById(U);e&&e.addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation()},!1)}},{key:"componentWillUnmount",value:function(){this.inputRef.current.removeEventListener("blur",this.onBlur),window.removeEventListener("resize",this.onResize),window.removeEventListener("focusin",this.onFocusIn),window.removeEventListener("focusout",this.onFocusOut)}},{key:"render",value:function(){var t=this.state,n=t.showInput,r=t.inputVal,o=t.placeholder,i=t.showMask,c=t.isIOS11,s=["comment_input_wrap",q?"fixed-input":""];return!this.props.store.inputSticky&&!n&&s.push("hidden"),O.a.createElement("div",{className:w()("comment-input-provider",c&&"ios11"),onTouchStart:this.onCommentInputHide},O.a.createElement("div",{className:"app-wrap"},O.a.createElement(e,a()({ref:this.appRef,onCommentInputShow:this.onCommentInputShow,onCommentInputHide:this.onCommentInputHide},this.props))),O.a.createElement("div",{className:"input-mask ".concat(i?"mask-show":"mask-hide"),onTouchStart:this.onMaskTouchStart}),O.a.createElement("div",{className:s.join(" "),onTouchStart:this.onInputWrapTouchStart},O.a.createElement("div",{id:"beyondInputWrap",className:"beyondInputWrap",onTouchStart:this.onInputAboveTouchStart,onTouchEnd:this.onInputAboveTouchEnd}),O.a.createElement("div",{className:"pureCommentWrap"},O.a.createElement("div",{className:"input-content-wrap",id:U},O.a.createElement("textarea",{className:"input-content",id:"input-content",type:"text",placeholder:o,ref:this.inputRef,onFocus:this.onInputFocus,onInput:this.onInput})),O.a.createElement("div",{"data-active":"before-red",className:"send-button ".concat(r.length?"active":"disabled"),onTouchStart:this.onBeforeSend,onTouchEnd:this.onSend},"发送"))))}}]),u}(y.Component))||t}},S1fE:function(e,t,n){"use strict";n.d(t,"b",function(){return o});var r="";r=function(){var e=document.createElement("div");e.style.cssText="-webkit-transition:all .1s; -moz-transition:all .1s; -o-transition:all .1s; -ms-transition:all .1s; transition:all .1s;";var t=e.style;return t.webkitTransition?"-webkit-":t.MozTransition?"-moz-":t.oTransition?"-o-":t.msTransition?"-ms-":""}();var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.charAt(0).toUpperCase()+e.substr(1)};function o(e){var t=r.replace(/-/g,"");return""===t?e:a(t)+a(e)}t.a=r},S5mo:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("lSNA"),a=n.n(r),o=n("KoDT"),i=n("h3qu"),c=n("3OdE");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var u=c.a.constant.CookieKey.WebpEnable;function l(e,t){var n=e.cookies,r=e.query,l=e.hostname,p=e.userAgent,d=Object(o.b)(p),f=d.isNativePlatform,m=d.version,h=c.a.constant.CookieKey,v=Number(n[h.UID])||0,b={};return"function"==typeof t&&(b=t(d,{SYSTEM:i.b,PLATFORM:i.a,requestContext:e})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({userID:v,version:m,hostname:l,queries:r||{},webpEnable:"1"===n[u],currentPlatform:d.platform,isNativePlatform:f,isAndroidPlatform:d.system===i.b.Android,isNativeAndroidPlatform:d.platform===i.a.PddAndroid,isIOSPlatform:d.system===i.b.IOS,isNativeIOSSystem:d.platform===i.a.PddIOS,isNativeIOSPlatform:d.platform===i.a.PddIOS,isTinyNativePlatform:d.platform===i.a.PDDTinyAndorid},b)}},SC6O:function(e,t,n){e.exports={modal:"_1co55Yfe",title:"f1hS3BPa",eduImg:"_3gpd-v90",content:"_2ZhZPXDs",btn:"_1sfLDBsD"}},SJUw:function(e,t){e.exports=pinbridge},"T+J9":function(e,t,n){},TQAU:function(e,t,n){"use strict";function r(e){Array.isArray(e)&&e.forEach(function(e){document.createElement("img").src=e})}function a(e){return e&&e!==document.body?e.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0)}function o(e,t){return t&&t!==document.body?(t.scrollTop=e,t):0===e?(document.body.scrollTop=0,document.documentElement&&(document.documentElement.scrollTop=0),null):(document.body.scrollTop=e,0!==document.body.scrollTop?document.body:!(!document.documentElement||(document.documentElement.scrollTop=e,0===document.documentElement.scrollTop))&&document.documentElement)}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return c});var i=0;function c(){return i||(i=window.innerWidth||document.body.offsetWidth||768)}},"U/Oh":function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=n("yG8O"),i=n.n(o),c=n("lwsE"),s=n.n(c),u=n("W8MJ"),l=n.n(u),p=n("PJYZ"),d=n.n(p),f=n("iWIM"),m=n.n(f),h=n("a1gu"),v=n.n(h),b=n("Nsbk"),g=n.n(b),y=n("7W2i"),O=n.n(y),_=n("U+yc"),w=n.n(_),j=(n("1ABj"),n("yXPU")),k=n.n(j),E=n("2vnA"),P=n("mj+i"),C=n("KoDT"),S=n("kUaC");function I(e){return function(){var t,n=g()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=g()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return v()(this,t)}}var N=Object.prototype.hasOwnProperty,R=function(e){if(e)try{return JSON.parse(e)}catch(e){}return{}};function T(e){var t=null;try{if("__immersive"in e.query)t={immerse:1,nh:64,sh:20};else{var n=e.get("p-uno-context")||e.get("p-immerse");t=R(n)}}catch(e){}var r=t||{},a=r.immerse,o=void 0===a?0:a,i=r.nh,c=void 0===i?0:i,s=r.sh;return{immersiveSupported:o,nh:c,sh:void 0===s?0:s}}function D(){return x.apply(this,arguments)}function x(){return(x=k()(a.a.mark(function e(){var t,n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(t=Object(C.a)(),n=Object(P.g)(window.location.href),!("__immersive"in n)){e.next=7;break}return e.abrupt("return",!0);case 7:if(t.isNativePlatform&&n._pdd_fs){e.next=9;break}return e.abrupt("return",!1);case 9:return e.prev=9,e.next=12,Object(S.b)("JSUIControl","supportCustomNavigationBar");case 12:return r=e.sent,o=r.enable,e.abrupt("return",1==+o);case 17:return e.prev=17,e.t0=e.catch(9),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,null,[[9,17]])}))).apply(this,arguments)}var A=n("16CW");t.a=function(e){var t,n,r,o;return t=function(e){O()(c,e);var t=I(c);function c(){var e;s()(this,c);for(var a=arguments.length,u=new Array(a),l=0;l<a;l++)u[l]=arguments[l];return e=t.call.apply(t,[this].concat(u)),i()(e,"navHeight",n,d()(e)),i()(e,"statusBarHeight",r,d()(e)),i()(e,"immersiveSupported",o,d()(e)),e}return l()(c,[{key:"initDataCallback",value:function(){var e=k()(a.a.mark(function e(t){var n,r,o,i,s,u,l,p,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()(g()(c.prototype),"initDataCallback",this).call(this,t);case 2:if(n=t.query,!N.call(n,"__immersive")){e.next=8;break}return this.navHeight=64,this.statusBarHeight=20,this.immersiveSupported=!0,e.abrupt("return");case 8:if(!("__immersive"in n)){e.next=15;break}return this.navHeight=64,this.statusBarHeight=20,this.immersiveSupported=!0,e.abrupt("return");case 15:return e.next=17,D();case 17:if(this.immersiveSupported=e.sent,!this.immersiveSupported){e.next=35;break}return e.prev=19,e.next=22,Object(S.b)("JSUIControl","getNavigationHeight");case 22:r=e.sent,o=r.navigation_height,i=r.statusbar_height,this.navHeight=o,this.statusBarHeight=i,e.next=33;break;case 29:e.prev=29,e.t0=e.catch(19),this.navHeight=0,this.statusBarHeight=0;case 33:e.next=37;break;case 35:this.navHeight=0,this.statusBarHeight=0;case 37:return e.abrupt("return");case 38:s=t.__req,u=T(s),l=u.immersiveSupported,p=u.nh,d=u.sh,this.navHeight=p,this.statusBarHeight=d,this.immersiveSupported=l;case 43:case"end":return e.stop()}},e,this,[[19,29]])}));return function(t){return e.apply(this,arguments)}}()}]),c}(e),n=w()(t.prototype,"navHeight",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=w()(t.prototype,"statusBarHeight",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=w()(t.prototype,"immersiveSupported",[E.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t}(A.a)},UZEx:function(e,t,n){e.exports={"native-scroll":"_1BAy3ZJF","ms-controller":"_2J9If3cF","ms-important":"_1yxV4nfW",navbar:"_2asFuLej",container:"myParv63",content:"_34pw1dKw",tab:"_22Qj3KZR",elipse:"_3G4zoD0g",ellipsis:"_2TX3Rb-N","break-all":"_3_GNA2fK","default-head":"_2lEi6f1h","social-iconfont":"_1MV6eodd",main:"_39Snnr0m",wrap:"IJRVKoei"}},VM9Y:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("pVnL"),a=n.n(r),o=n("QILm"),i=n.n(o),c=n("q1tI"),s=n.n(c),u=n("TSYQ"),l=n.n(u),p=n("17x9"),d=n.n(p),f=n("miVt");n("pBiK");function m(){}function h(e){var t=e.src,n=e.extraClass,r=void 0===n?"":n,o=e.quality,c=void 0===o?50:o,u=e.resizeWidth,p=void 0===u?300:u,d=e.wrapStyle,h=void 0===d?{}:d,v=e.onLoad,b=void 0===v?m:v,g=e.onError,y=void 0===g?m:g,O=e.needCrapCenter,_=void 0!==O&&O,w=i()(e,["src","extraClass","quality","resizeWidth","wrapStyle","onLoad","onError","needCrapCenter"]);return s.a.createElement("div",{className:"shaded-image-wrap ".concat(r),style:h},s.a.createElement(f.a,a()({quality:c,resizeWidth:p,className:l()("shaded-image",_&&"crapCenter"),src:t,onLoad:b,onError:y},w)))}h.proptypes={extraClass:d.a.string,src:d.a.string.isRequired,quality:d.a.number,resizeWidth:d.a.number}},"Wh/7":function(e,t,n){"use strict";var r=n("q1tI"),a=Object(r.createContext)(null);a.displayName="Ctx",t.a=a},Wv02:function(e,t,n){"use strict";n.d(t,"d",function(){return p}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return v});var r=n("q1tI"),a=n.n(r),o=n("i8i4"),i=n.n(o),c=n("1Irm"),s=n("b6XL"),u=n("uxhC"),l=n("u5xF");function p(e){Object(c.d)("PDDTimelineRedPacketOpenedFromH5",{broadcast_sn:e,status:1})}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(c.d)("PDDMomentsCommentUpdateFromH5",{broadcast_sn:e,comment:t})}function f(){var e=~~(10*Math.random())%u.b;return 0===e?u.c.UP:1===e?u.c.MIDDLE:u.c.DOWN}var m={69903:"评论中有不合适的词，无法发送哦",80003:"红包动态已不存在，无法评论",80004:"网络情况不佳，请稍后重试",40003:"网络情况不佳，请稍后重试"};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.errorCode,a=void 0===r?"40003":r,o=n.message,i=e?"评论成功":m[a]||o||"网络情况不佳，请稍后重试";Object(s.a)(i,{duration:t/1e3})}function v(e,t,n){var r=document.getElementById("beyondInputWrap");r&&i.a.unmountComponentAtNode(r),setTimeout(function(){e&&e.length>0&&i.a.render(a.a.createElement(l.a,{commentList:e,onClick:t}),r);var o=document.getElementById("input-content");o&&(o.placeholder=n)},0)}},Zsmj:function(e,t,n){},aC0H:function(e,t,n){e.exports={wrap:"_1QnSa9zx",headPureBg:"gWqbYBmJ",qIcon:"_2R9bMfuX",qIconNoImmerse:"_27MCy2uJ",title:"I4ea11kl",avatarWrap:"_1C9CI5RZ",avatar:"_5CTQgrti",headTitle:"_4nkhXOVv",goodsWrap:"_1f7jdAf1",goodsImg:"_13aRaME6",goodsBtn:"_3R0fkQCs",nameTips:"XMMIAbZx",nickname:"d-k7TPPi",priceWrap:"_3vKtXxU7",dynamicBg:"_25ZItF0I",moneyStar:"_3WvUvjHg",priceBody:"_4yJ7-lYP",yuan:"_2f55vw8e",followerAvatar:"SW4slvZ_",followerName:"eNQnLqNa",priceTips:"_2hefMiZV",statusTips:"fW0H9j89",headBody:"_2R4IdMb_",withTips:"_1u2VwxNl",barrageWrap:"_2f-HzWgP",openSuccessAnimation:"_3yAMK2OZ",moneyDebounce:"OiZDIhj9",albumWrap:"_3zuVu4fL",albumBody:"_2f_WRDrY",albumActive:"_3tbRWqPc",albumImg:"_9q5QD4du",albumBtn:"_16ooGYMh"}},aEb2:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("lSNA"),a=n.n(r),o=n("Fcpp");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?new Promise(function(n){o.a.trackingRecord(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{},e),function(){n()})}):Promise.resolve()}},akzz:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}n.d(t,"a",function(){return r})},b7tS:function(e,t,n){e.exports={wrap:"_1l7kR3x7",tips:"_2eY31_Zj",tipItem:"_3HYRiMVQ",firstItem:"_3b_VATFJ",title:"_1Uttf80P",listItem:"_2CzovB05",avatar:"_2TELnCGc",body:"_2M_XddKU",lastBody:"_1Nwh8yD6",nickname:"_3FKQ_4aR",nicknameBody:"_20V-gnxd",commentItem:"MozwsOXL",time:"_2qpmWQIY",priceWrap:"kYVDT8r0",best:"_31GXku8l",empty:"_3_HU_qFK",emptyTips:"L0EQOEHG"}},diEw:function(e,t,n){},fGnv:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var r=/((http[s]?):\/\/)?([a-zA-Z0-9]+)(.hutaojie.com|.pinduoduo.com|.pinduoduo.net|.yangkeduo.com)(:\\d+)?([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?/g;function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof e)return e;var r=Array.from(e);if(t=null==t?r.length:t,r.length<=t)return e;var a=n.tail,o=void 0===a?"...":a;return r.length=t,r.push(o),r.join("")}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)return[];var t=[];return Array.from(e.matchAll(r)).reduce(function(e,t){var n=t&&t[0];return n&&e.push(n),e},[]).forEach(function(n){var r=e.indexOf(n);r>0&&t.push({isPDDUrl:!1,value:e.substring(0,r)}),e=e.substring(r+n.length),t.push({isPDDUrl:!0,value:n})}),e&&t.push({isPDDUrl:!1,value:e}),t}},fq8U:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n("lSNA"),a=n.n(r),o=n("lwsE"),i=n.n(o),c=n("W8MJ"),s=n.n(c),u=n("a1gu"),l=n.n(u),p=n("Nsbk"),d=n.n(p),f=n("7W2i"),m=n.n(f),h=n("yet2"),v=n("2xwX"),b=n("nCWU"),g=n("uxhC");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e){return function(){var t,n=d()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=d()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l()(this,t)}}var w=function(e){m()(n,e);var t=_(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"receiveRedPacket",value:function(e){return this.postRisk("api/social/red/envelope/receive/red/envelope",e).then(function(e){return e?O({},e,{opened_list:Object(b.b)(e.opened_list)}):{}}).catch(function(){return{receive_result:g.j.RISK,fetchError:!0}})}},{key:"openRedPacket",value:function(e){return this.postRisk("api/social/red/envelope/open/red/envelope",e).then(function(e){return e?O({},e,{opened_list:Object(b.b)(e.opened_list)}):{}}).catch(function(){return{open_result:g.j.RISK,fetchError:!0}})}},{key:"queryOpenedList",value:function(e){return this.postRisk("api/social/red/envelope/query/red/envelope/opened/list",e).then(function(e){return e?O({},e,{opened_list:Object(b.b)(e.opened_list)}):{}}).catch(function(){return{}})}},{key:"userComment",value:function(e){Object(v.c)();return this.postRisk("api/social/timeline/v3/trigger/comment",e).then(function(e){return Object(v.a)(),e||{}}).catch(function(e){Object(v.a)();var t=e||{};return{executed:!1,errorCode:t.errorCode,message:t.message}})}},{key:"queryCommentList",value:function(e){return this.postRisk("api/social/timeline/v3/list/comment",e).then(function(e){return e&&e.list||[]}).catch(function(){return[]})}},{key:"getMeSimplifyInfo",value:function(){return this.get("api/apollo/user/me/simplify").then(function(e){return e||{}}).catch(function(){return{}})}},{key:"queryNotReceivedUsers",value:function(e){return this.postRisk("api/social/red/envelope/query/red/envelope/received/list",e).then(function(e){return e||{}}).catch(function(){return{}})}},{key:"queryEduModalInfo",value:function(){return this.post("api/social/window/follow/buy/red/envelop/educate/show").then(function(e){return e||{}}).catch(function(){return{}})}},{key:"exposeEduModal",value:function(e){return this.post("api/social/window/follow/buy/red/envelop/educate/expose",e).then(function(e){return e&&e.success}).catch(function(){return!1})}}]),n}(h.a)},"i4v+":function(e,t,n){"use strict";n.d(t,"f",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return p}),n.d(t,"a",function(){return d});var r=n("Fcpp"),a=n("aEb2"),o=n("uxhC"),i=function(e){return e===o.j.NOT_FRIEND?1:e===o.j.NOT_BIND_WECHAT?2:e===o.j.OUT_LIMIT?3:e===o.j.SUCCESS?4:e===o.j.EMPTY?5:e===o.j.EXPIRED?6:null};function c(e){r.a.trackingRecord({op:"impr",page_el_sn:e?2579827:2573821})}function s(e){var t=i(e);e&&r.a.trackingRecord({op:"impr",page_el_sn:2556385,result_status:t})}var u={page_el_sn:2556381};function l(){r.a.trackingRecord({op:"click",page_el_sn:2556384})}var p=function(e){return{page_el_sn:2626439,goods_id:e}};function d(e){return Object(a.a)({op:"click",page_el_sn:2626806,goods_id:e})}},ik64:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("q1tI"),a=n.n(r),o=n("miVt"),i=n("LhzX"),c=new Map;function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)return e;var n=t.lazyImg,r=[];return e.split("[").filter(function(e){return e}).forEach(function(e){var t=e.indexOf("]");if(-1!==t){var s=e.substring(0,t),u=c.get(s);if(u){var l=e.substring(t+1);return r.push(a.a.createElement(o.a,{src:Object(i.a)("/emoji/".concat(u)),resizeWidth:50,lazy:"boolean"!=typeof n||n,className:"emojiIcon"})),void r.push(l)}r.push("[".concat(e))}else r.push("".concat(e))}),r}[{id:"01",desc:"微笑",res:"01.png"},{id:"02",desc:"撇嘴",res:"02.png"},{id:"03",desc:"大爱",res:"03.png"},{id:"04",desc:"呆住",res:"04.png"},{id:"05",desc:"酷",res:"05.png"},{id:"06",desc:"流泪",res:"06.png"},{id:"07",desc:"害羞",res:"07.png"},{id:"08",desc:"闭嘴",res:"08.png"},{id:"09",desc:"困",res:"09.png"},{id:"10",desc:"大哭",res:"10.png"},{id:"11",desc:"上火了",res:"11.png"},{id:"12",desc:"发怒",res:"12.png"},{id:"13",desc:"耶",res:"13.png"},{id:"14",desc:"嘻嘻",res:"14.png"},{id:"15",desc:"惊讶",res:"15.png"},{id:"16",desc:"难过",res:"16.png"},{id:"17",desc:"囧",res:"17.png"},{id:"18",desc:"抓狂",res:"18.png"},{id:"19",desc:"吐",res:"19.png"},{id:"20",desc:"偷笑",res:"20.png"},{id:"21",desc:"愉快",res:"21.png"},{id:"22",desc:"白眼",res:"22.png"},{id:"23",desc:"偷看",res:"23.png"},{id:"24",desc:"馋",res:"24.png"},{id:"25",desc:"羡慕",res:"25.png"},{id:"26",desc:"汗",res:"26.png"},{id:"27",desc:"大笑",res:"27.png"},{id:"28",desc:"skr",res:"28.png"},{id:"29",desc:"奋斗",res:"29.png"},{id:"30",desc:"咒骂",res:"30.png"},{id:"31",desc:"疑问",res:"31.png"},{id:"32",desc:"嘘",res:"32.png"},{id:"33",desc:"晕",res:"33.png"},{id:"34",desc:"衰",res:"34.png"},{id:"35",desc:"生病",res:"35.png"},{id:"36",desc:"敲打",res:"36.png"},{id:"37",desc:"再见",res:"37.png"},{id:"38",desc:"擦汗",res:"38.png"},{id:"39",desc:"抠鼻",res:"39.png"},{id:"40",desc:"鼓掌",res:"40.png"},{id:"41",desc:"坏笑",res:"41.png"},{id:"42",desc:"左哼哼",res:"42.png"},{id:"43",desc:"右哼哼",res:"43.png"},{id:"44",desc:"皱眉",res:"44.png"},{id:"45",desc:"鄙视",res:"45.png"},{id:"46",desc:"委屈",res:"46.png"},{id:"47",desc:"哭了",res:"47.png"},{id:"48",desc:"阴险",res:"48.png"},{id:"49",desc:"亲亲",res:"49.png"},{id:"50",desc:"可怜",res:"50.png"},{id:"51",desc:"笑哭",res:"51.png"},{id:"52",desc:"捂脸",res:"52.png"},{id:"53",desc:"吐舌头",res:"53.png"},{id:"54",desc:"头疼",res:"54.png"},{id:"55",desc:"吃手",res:"55.png"},{id:"56",desc:"吃手手",res:"56.png"},{id:"57",desc:"太难了",res:"57.png"},{id:"58",desc:"小心心",res:"58.png"},{id:"59",desc:"吃西瓜",res:"59.png"},{id:"60",desc:"吐瓜籽",res:"60.png"},{id:"61",desc:"柠檬",res:"61.png"},{id:"62",desc:"剁手手",res:"62.png"},{id:"63",desc:"好的",res:"63.png"},{id:"64",desc:"点赞",res:"64.png"},{id:"65",desc:"弱",res:"65.png"},{id:"66",desc:"握手",res:"66.png"},{id:"67",desc:"强壮",res:"67.png"},{id:"68",desc:"拥抱",res:"68.png"},{id:"69",desc:"玫瑰",res:"69.png"},{id:"70",desc:"凋谢",res:"70.png"},{id:"71",desc:"爱心",res:"71.png"},{id:"72",desc:"心碎",res:"72.png"},{id:"73",desc:"买买买",res:"73.png"},{id:"74",desc:"流鼻血",res:"11.png",forbidden_input:1},{id:"75",desc:"吐血",res:"57.png",forbidden_input:1}].forEach(function(e){c.set(e.desc,e.res)})},ipBF:function(e,t,n){e.exports={wrap:"_2gyBiU7u",fetched:"Ysb7Cqur",title:"_2CsMk9hE",item:"_28oom-5Q",commentItem:"jmYn0rq7"}},kUaC:function(e,t,n){"use strict";n.d(t,"d",function(){return g}),n.d(t,"a",function(){return y}),n.d(t,"e",function(){return O}),n.d(t,"c",function(){return _}),n.d(t,"b",function(){return w}),n.d(t,"f",function(){return j});var r=n("SJUw"),a=n.n(r),o=n("gi5g"),i=n("vBQ9"),c=n("KoDT"),s=n("h3qu"),u=n("b6XL"),l="localStorage";function p(e){return window[e]?window[e]:{}}var d=function(e){var t=p(arguments.length>1&&void 0!==arguments[1]?arguments[1]:l)[e];if(t)try{return JSON.parse(t)}catch(e){return void 0}},f=function(e,t){var n=p(arguments.length>2&&void 0!==arguments[2]?arguments[2]:l),r=null;try{r=JSON.stringify(t)}catch(e){r=""}n[e]=r},m=null,h=!1,v=!1,b=null;m=Object(c.a)(),h=m.isNativePlatform,v=m.platform===s.a.PddAndroid,b=m.version;var g=function(e){if(h){var t=function(e,t){return m.platform===e&&Object(s.c)(b,t)<0};setTimeout(function(){if(t(s.a.PddAndroid,"4.64.0")||t(s.a.PddIOS,"4.56.0"))a.a.callNative("JSUIControl","disablePullReload",null,null,null);else{var n=!1===e?0:2;a.a.callNative("JSUIControl","setHeaderRefresh",{type:n},null,null)}},50)}},y=function(e,t,n,r,o){!function(e,t,n,r){if(!h)return!1;a.a.check(e,t,function(e){e?n&&n():r&&r()},r)}(e,t,function(){a.a.callNative(e,t,n,r,o)},o)},O=function(e){if(h){var t=d("TIMELNE_UPGRADE_HEIGHT_VERSION"),n=d("TIMELNE_UPGRADE_HEIGHT_INFO");b===t&&n?e(n):a.a.callNative("JSUIControl","getNavigationHeight",{},function(t){t=t||{},f("TIMELNE_UPGRADE_HEIGHT_VERSION",b),f("TIMELNE_UPGRADE_HEIGHT_INFO",t),e(t)})}};function _(){return new Promise(function(e){a.a.callNative("PDDContacts","check",null,function(t){if(1!==(t&&t.status)){if(v)return Object(o.a)(),Object(i.a)({title:"请前往系统设置，打开通讯录，来为您查找通讯录好友",confirmButtonLabel:"设置",cancelButtonLabel:"取消",onConfirm:function(){Object(o.b)(),a.a.callNative("PDDSystemSetting","openSystemSettingPage",null,null,function(){Object(u.a)("请先去授权访问通讯录的权限")})},onCancel:o.b}),void e(!1);a.a.callNative("PDDContacts","searchContacts",{mobiles:["11111111111"]},function(){},function(){Object(u.a)("请先去授权访问通讯录的权限")}),e(!1)}else e(!0)},function(){return e(!1)})})}function w(e,t,n){return new Promise(function(r,o){a.a.callNative(e,t,n||{},r,o)})}function j(e){e&&a.a.callNative("JSUIControl","setBackground",{background_color:e})}},miVt:function(e,t,n){"use strict";var r=n("pVnL"),a=n.n(r),o=n("QILm"),i=n.n(o),c=n("q1tI"),s=n.n(c),u=n("CSCl"),l=n("ez7s"),p=n("/jjR"),d=n("Wh/7");t.a=Object(c.memo)(function(e){var t=e.src,n=e.resizeWidth,r=void 0===n?1300:n,o=e.quality,f=void 0===o?80:o,m=e.lazy,h=void 0!==m&&m,v=e.background,b=void 0!==v&&v,g=e.children,y=void 0===g?null:g,O=e.path,_=void 0===O?"":O,w=i()(e,["src","resizeWidth","quality","lazy","background","children","path"]),j=(Object(c.useContext)(d.a)||{}).isSupportWebp,k=void 0!==j&&j,E=t;if(!E&&!_)return s.a.createElement(s.a.Fragment,null);!t&&_&&(E=Object(u.a)(_));var P={resizeWidth:r,quality:f,webpEnable:k};if(b){var C=Object(l.a)(E,P);return s.a.createElement("div",a()({style:{backgroundImage:"url(".concat(C,")")}},w),y)}return s.a.createElement(p.a,a()({src:E,lazy:h,processParam:P},w))})},n5C8:function(e,t,n){e.exports={wrap:"_3_1stzew"}},nCWU:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l});var r=n("lSNA"),a=n.n(r),o=n("Vkgz");function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e.toString(),r=t-n.length,a=0;a<r;a+=1)n="0"+n;return n}var c=86400;function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){return(parseInt(e,10)/100).toFixed(2)}function l(e){return(e||[]).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{time:e.opened_time,opened_time:function(e){var t=e||Date.now();13===t.toString().length&&(t=Math.floor(t/1e3));var n=o.a.timeParams(Math.floor(Date.now()/1e3)),r=n.year,a=n.month,s=n.date,u=parseInt(new Date([r,a,s].join("/")).getTime()/1e3,10),l=o.a.timeParams(t),p=l.year,d=l.month,f=l.date,m=l.hours,h=l.minutes;return t>=u?[i(m),i(h)].join(":"):t+c>=u?"昨天"+[i(m),i(h)].join(":"):p===r||+p+1>=+r&&+d>=+a&&+f>=+s?Math.ceil((u-t)/c)+"天前":+r-+p+"年前"}(e.opened_time),opened_amount:u(e.opened_amount)})})}},nLsa:function(e,t,n){e.exports={commentIcon:"_2ObgCLmS"}},nWVn:function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}n.d(t,"a",function(){return r})},pBiK:function(e,t,n){},rTPm:function(e,t,n){e.exports={riskWrap:"_3U_DKxsz",risk:"_3ExtE-gp",riskBg:"_3UzXTwvo",tips:"_2R8ajS4g"}},sCaY:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("q1tI"),a=n.n(r);n("17x9");function o(e){var t=e.isAddInvisibleChar,n=e.invisibleCharCount,r=void 0===n?200:n;return t&&"number"==typeof r&&r?a.a.createElement("div",{style:{height:0}},"​".repeat(r)):null}},u5xF:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("TSYQ"),i=n.n(o),c=n("ipBF"),s=n.n(c),u=n("ik64");n("diEw");t.a=Object(r.memo)(function(e){var t=e.commentList,n=void 0===t?[]:t,r=e.onClick,o=function(e){r(e)};return a.a.createElement("div",{className:"outerWrap"},a.a.createElement("div",{className:"innerWrap",id:"beyondPanelInnerWrap"},n.map(function(e,t){return a.a.createElement("div",{className:"quickItem"},a.a.createElement("div",{key:t,className:i()(s.a.item,"g_quickItem"),onClick:function(){return o(e)}},Object(u.a)(e)))})))})},uxhC:function(e,t,n){"use strict";var r=n("BQTS");n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return r.b}),n.d(t,"c",function(){return r.c}),n.d(t,"d",function(){return r.d}),n.d(t,"e",function(){return r.e}),n.d(t,"f",function(){return r.f}),n.d(t,"g",function(){return r.g}),n.d(t,"h",function(){return r.h}),n.d(t,"i",function(){return r.i}),n.d(t,"j",function(){return r.j}),n.d(t,"k",function(){return r.k}),n.d(t,"l",function(){return r.l})},xiHF:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("gi5g"),i=n("PlGL"),c=n("kUaC"),s=n("1kYP"),u=n.n(s);t.a=Object(r.memo)(function(e){var t=e.detailRulesArr,n=e.detailRulesTitle,s=e.onCloseModal,l=e.fromRoomUI,p=Object(r.useRef)(null);return Object(r.useEffect)(function(){return p&&p.current&&(p.current.style.maxHeight=.63*document.body.clientHeight-48+"px",Object(o.a)(p.current)),o.b},[]),Object(r.useEffect)(function(){return Object(c.d)(!1),function(){Object(c.d)(!l)}},[]),a.a.createElement(i.a,{ControllerProps:{shouldDisableBodyScroll:!1}},a.a.createElement("div",{className:"modal"},a.a.createElement("div",{className:u.a.title},n),a.a.createElement("div",{className:u.a.scrollBody,ref:p},t.map(function(e,t){return a.a.createElement("div",{className:u.a.ruleItem,key:t},t+1,". ",e)}))),a.a.createElement(i.a.CloseButton,{onClick:s}))})},y7QR:function(e,t,n){"use strict";n.r(t);n("dE+T"),n("bHtr"),n("dRSK"),n("INYr"),n("6VaU"),n("HEwt"),n("Z2Ku"),n("yt8O"),n("6AQ9"),n("Vd3H"),n("0E+W"),n("AphP"),n("yM4b"),n("IXt9"),n("9AAn"),n("xfY5"),n("/KAi"),n("91GP"),n("RQRG"),n("/uf1"),n("/8Fb"),n("DW2E"),n("mYba"),n("jm62"),n("JduL"),n("5Pf0"),n("uaHG"),n("ZNX/"),n("mura"),n("Btvt"),n("25dN"),n("Zshi"),n("V/DX"),n("FlsD"),n("RW0V"),n("z2o2"),n("/SS/"),n("hhXQ"),n("VRzm"),n("CX2u"),n("Oyvg"),n("a1Th"),n("T39b"),n("ioFf"),n("rE2o"),n("oDIu"),n("rvZc"),n("VpUO"),n("L9s1"),n("XfO3"),n("9XZr"),n("7VC1"),n("eI33"),n("FLlr"),n("9VmF"),n("I74W"),n("fA63"),n("R5XZ"),n("Ew+T"),n("rGqo"),n("ls82");var r=n("+bfp"),a=n("o0o1"),o=n.n(a),i=n("lSNA"),c=n.n(i),s=n("yXPU"),u=n.n(s),l=n("lwsE"),p=n.n(l),d=n("W8MJ"),f=n.n(d),m=n("a1gu"),h=n.n(m),v=n("Nsbk"),b=n.n(v),g=n("7W2i"),y=n.n(g),O=n("q1tI"),_=n.n(O),w=n("kMSe"),j=(n("17x9"),n("TSYQ")),k=n.n(j),E=n("nGR4"),P=n("EhXv"),C=n("sCaY"),S=n("L0sF"),I=n("QzGf"),N=n("kUaC"),R=n("UZEp"),T=n("yo/L"),D=n("akzz"),x=n("Ll5m"),A=n("HR6E"),L=n("pVnL"),B=n.n(L),M=n("J4zp"),U=n.n(M),q=n("SJUw"),W=n.n(q),z=n("SXY3"),F=n("LhzX"),H=n("QRr4"),V=n("fGnv"),J=n("miVt"),Q=n("NeoJ"),X=n("VM9Y"),Y=n("5C4i"),K=n("xiHF"),G=n("ik64"),Z=n("S1fE"),$=n("uxhC"),ee=$.c,te=n("/dok"),ne=n.n(te),re=document.body.clientWidth,ae=20;var oe=Object(O.memo)(function(e){var t=e.id,n=e.position,r=void 0===n?ee.UP:n,a=(e.isRightMost,e.fromAvatar),o=e.toAvatar,i=e.comment,c=e.isMention,s=e.mentionAvatar,u=e.removeBarrage,l=e.pushNextBarrage,p=Object(O.useRef)(null),d=Object(O.useRef)(30+~~(110*Math.random())),f=Object(O.useMemo)(function(){return e.position===ee.MIDDLE?5:4},[r]);return Object(O.useEffect)(function(){var e=p&&p.current;if(e){var n=e.getBoundingClientRect().width,a=re+n+ae,o=(f/re*a).toFixed(3);e.style.right="-".concat(n,"px"),e.style[Object(Z.b)("transform")]="translate3d(-".concat(a,"px, 0, 0)"),e.style[Object(Z.b)("transition")]="".concat(Z.a,"transform ").concat(o,"s linear");var i=(1e3*f/re*(n+d.current)).toFixed(3);setTimeout(function(){l(r,t)},i),setTimeout(function(){u(t)},1e3*o)}},[]),_.a.createElement("div",{ref:p,className:k()(ne.a.barrageItem,r===ee.UP?ne.a.up:r===ee.MIDDLE?ne.a.middle:ne.a.down)},_.a.createElement(Q.a,{wrapperClass:k()(ne.a.avatar,ne.a.firstAvatar),src:a||$.h,needBorder:!0}),!!o&&_.a.createElement(O.Fragment,null,_.a.createElement("span",{style:{marginLeft:".01rem"}},"回复"),_.a.createElement(Q.a,{wrapperClass:ne.a.avatar,src:o,needBorder:!0})),_.a.createElement("span",{style:{width:".07rem",marginLeft:".01rem"}},"："),_.a.createElement("span",{className:ne.a.comment},!!c&&_.a.createElement(O.Fragment,null,_.a.createElement("span",{className:"metionIcon"},"@"),_.a.createElement(Q.a,{style:{marginRight:".02rem"},wrapperClass:ne.a.avatar,src:s,needBorder:!0})),_.a.createElement("div",{className:ne.a.commentBody},Object(G.a)(i||"[吃西瓜]默认点赞",{lazyImg:!1}))))},function(e,t){return e.id===t.id}),ie=n("n5C8"),ce=n.n(ie);var se=Object(w.d)(function(){var e=Object(H.a)().store,t=e.barrageList,n=void 0===t?[]:t,r=e.initBarrageList,a=e.removeBarrage,o=e.pushNextBarrage,i=e.status,c=e.showEducationModal,s=e.useSetTimeout,u=void 0!==s&&s,l=function(){i===$.j.READY||i===$.j.RISK||c||setTimeout(function(){r()},$.d)};return Object(O.useEffect)(function(){l()},[i,c]),Object(O.useEffect)(function(){l()},[]),0===n.length?null:_.a.createElement("div",{className:ce.a.wrap},n.map(function(e,t){return _.a.createElement(oe,B()({},e,{key:e.id||t,removeBarrage:a,pushNextBarrage:o,useSetTimeout:u}))}))}),ue=n("DzJC"),le=n.n(ue),pe=n("Wv02"),de=n("QILm"),fe=n.n(de),me=n("nLsa"),he=n.n(me);var ve=Object(O.memo)(function(e){var t=e.wrapClass,n=e.onClick,r=fe()(e,["wrapClass","onClick"]);return _.a.createElement("div",B()({className:k()(he.a.commentIcon,t),onClick:n},r))}),be=n("ipBF"),ge=n.n(be),ye=1500;var Oe=Object(O.memo)(function(e){var t=e.list,n=e.onCommentItemClick,r=e.afterQuickCommentFetch,a=e.enableClick,i=void 0===a||a,c=e.wrapClass,s=e.needCommentIcon,l=void 0!==s&&s,p=e.onCommentInputShow,d=e.onCommentInputHide,f=Object(H.a)().store,m=(f.onUserCommentClick,f.broadcast_sn,f.isNativePlatform,f.nickname),h=f.isCurrentUser,v=le()(function(){var e=u()(o.a.mark(function e(t){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(),e.next=3,n(t,null,$.e.quick);case 3:a=e.sent,i=a.executed,Object(pe.e)(i,ye),r&&r(i);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ye);return t&&t.length?_.a.createElement("div",{className:k()(ge.a.wrap,i&&ge.a.fetched,c)},_.a.createElement("div",{className:ge.a.title},"一键评论："),t.map(function(e,t){return _.a.createElement("div",{key:t,className:ge.a.item,onClick:function(){return v(e)}},Object(G.a)(e))}),!!l&&_.a.createElement(ve,{wrapClass:ge.a.commentItem,onClick:function(){Object(N.f)("#ffffff"),p();var e=h?"输入评论内容...":"评论".concat(Object(V.a)(m,9));Object(pe.a)(t,v,e)}})):null}),_e=n("i4v+"),we=n("aC0H"),je=n.n(we),ke=4;var Ee=Object(w.d)(function(e){var t=Object(O.useState)(!1),n=U()(t,2),r=n[0],a=n[1],o=Object(O.useState)(!1),i=U()(o,2),c=i[0],s=i[1],u=Object(O.useRef)(null),l=Object(H.a)().store,p=l.status,d=l.statusTips,f=l.avatar,m=(l.nickname,l.ownerLink),h=l.openedAmount,v=l.immersiveSupported,b=l.navHeight,g=l.statusBarHeight,y=l.followerInfo,w=l.goodsInfo,j=l.isNativePlatform,E=l.quickCommentList,P=l.onUserCommentClick,C=l.isCommentListFetched,S=l.packetType,I=l.albumInfo,N=l.detailRulesArr,R=l.detailRulesTitle,T=I||{},D=T.broadcast_url,x=T.thumb_url;Object(O.useEffect)(function(){p===$.j.SUCCESS&&setTimeout(function(){s(!0)},20)},[p]);var A=b-g,L=p===$.j.SUCCESS||p===$.j.HAS_REVEIVED,M=w.hd_thumb_url,q=w.link_url,G=w.goods_id,Z=y.avatar,ee=y.user_info_url,te=y.nickname,ne=function(e){j&&e&&Object(Y.b)(e)};return Object(O.useEffect)(function(){v&&W.a.callNative("JSUIControl","setRollingAlpha",{alpha:[0,0],offset:[0,100],btn_style:["#ffffff","#000000"],status_bar_style:[1,0],continuous:1,height:window.innerHeight})},[]),_.a.createElement("div",{className:k()(je.a.wrap)},_.a.createElement("img",{src:Object(F.a)("redpacket_head_bg_v3.png"),style:{display:"none"}}),_.a.createElement("div",{className:je.a.headPureBg,style:v?{height:(b+40)/100+"rem"}:{}},_.a.createElement("div",{className:k()(je.a.headBody,!L&&je.a.withTips)},_.a.createElement(J.a,{className:k()(je.a.qIcon,!v&&je.a.qIconNoImmerse),style:v?{top:"-".concat((20+(A-22)/2)/100,"rem")}:{},src:Object(F.a)("question_icon_v2.png"),onClick:function(){a(!0)}}))),_.a.createElement("div",{className:je.a.barrageWrap},_.a.createElement(se,null)),_.a.createElement("div",{className:je.a.avatarWrap,id:$.a},_.a.createElement(Q.a,{wrapperClass:je.a.avatar,src:f,needBorder:!0,onClick:function(){return ne(m)}})),_.a.createElement("div",{className:k()(je.a.headTitle,c&&je.a.openSuccessAnimation)},S===$.k.album?"我分享影集获得了红包，大家来抢吧":_.a.createElement(O.Fragment,null,ee&&te&&Z?[_.a.createElement(Q.a,{key:1,wrapperClass:je.a.followerAvatar,src:Z,needBorder:!0,onClick:function(){return ne(ee)}}),_.a.createElement("span",{key:2,className:je.a.followerName,onClick:function(){return ne(ee)}},Object(V.a)(te,ke))]:"好友","跟买了我的商品，快来抢红包")),S===$.k.album&&x&&_.a.createElement("div",{className:je.a.albumWrap},_.a.createElement("div",{className:je.a.albumBody,ref:u,onTouchStart:function(){var e=u&&u.current;e&&e.classList.add(je.a.albumActive)},onTouchEnd:function(){var e=u&&u.current;e&&e.classList.remove(je.a.albumActive),D&&Object(Y.b)(D)}},_.a.createElement(X.a,{extraClass:je.a.albumImg,src:x,needCrapCenter:!0}),_.a.createElement("div",{className:je.a.albumBtn},_.a.createElement("span",null,"查看影集")))),!!M&&!!q&&_.a.createElement(z.a,{trackingInfo:Object(_e.c)(G)},_.a.createElement("div",{className:je.a.goodsWrap,onClick:function(){q&&j&&(Object(Y.b)(q),Object(_e.a)(G))}},_.a.createElement(X.a,{extraClass:je.a.goodsImg,src:M}),_.a.createElement("div",{className:je.a.goodsBtn},"查看跟买商品"))),L?_.a.createElement(O.Fragment,null,_.a.createElement("div",{className:je.a.priceWrap},_.a.createElement("div",{className:k()(c&&je.a.dynamicBg)}),_.a.createElement("div",{className:k()(je.a.priceBody,c&&je.a.openSuccessAnimation)},h,_.a.createElement("span",{className:je.a.yuan},"元"))),_.a.createElement("div",{className:je.a.priceTips},"1天内打款到微信零钱")):_.a.createElement("div",{className:je.a.statusTips},p!==$.j.READY?d:""),E.length>0&&_.a.createElement(Oe,B()({list:E,onCommentItemClick:P,enableClick:C,needCommentIcon:!0},e)),r&&_.a.createElement(K.a,{onCloseModal:function(){a(!1)},detailRulesArr:N,detailRulesTitle:R}))}),Pe=n("OCos"),Ce=n("b7tS"),Se=n.n(Ce),Ie=Object(F.a)("redpacket_icon.png"),Ne=1500;var Re=Object(w.d)(function(e){var t=e.onCommentInputShow,n=e.onCommentInputHide,r=Object(H.a)().store,a=r.openedList,i=r.totalCount,c=r.openedCount,s=r.queryOpenedList,l=r.isNativePlatform,p=r.detailTipsArr,d=r.onUserCommentClick,f=Object(O.useRef)({}),m=Object(O.useRef)([]),h=a.length;if(h<1)return _.a.createElement("div",{className:Se.a.empty},_.a.createElement("div",{className:Se.a.emptyTips},"还没有人领到红包哦"));var v=function(e){l&&e?Object(Y.b)(e):console.warn("Only in APP is active",e)},b=function(){var e=u()(o.a.mark(function e(t,r){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(),e.next=3,d(t,r,$.e.quick);case 3:a=e.sent,i=a.executed,Object(pe.e)(i,Ne);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return _.a.createElement("div",{className:Se.a.wrap},_.a.createElement("div",{className:Se.a.tips},p.map(function(e,t){return _.a.createElement("div",{className:k()(Se.a.tipItem,0===t&&Se.a.firstItem)},e)})),_.a.createElement("div",{className:Se.a.title},"已抢",c,"/",i,"个，以下好友已抢到红包"),_.a.createElement(Pe.a,{onLoadDown:s,rootMargin:300,isUseGoTop:!1},a.map(function(e,n){var r=e.avatar,a=e.nickname,o=e.opened_amount,i=e.opened_time,c=e.scid,s=e.self,u=e.is_lucky,l=e.user_info_url,p=e.quick_comment_list,d=void 0===p?[]:p;return _.a.createElement("div",{className:Se.a.listItem,key:c||n},_.a.createElement(Q.a,{src:r||Ie,wrapperClass:Se.a.avatar,needBorder:!0,onClick:function(){return v(l)},backgroundColor:"#f4f4f4"}),_.a.createElement("div",{className:k()(Se.a.body,n===h-1&&Se.a.lastBody)},_.a.createElement("div",{className:Se.a.nickname},_.a.createElement("span",{className:Se.a.nicknameBody,onClick:function(){return v(l)}},a||"已被他的好友抢到"),!s&&!!c&&_.a.createElement(ve,{wrapClass:Se.a.commentItem,onClick:function(){return function(e,n){f.current=e||{},m.current=n||[],Object(N.f)("#ffffff"),t({toUserInfo:e}),Object(pe.a)(n,function(t){return b(t,e)},"@".concat(Object(V.a)(e.nickname,9)))}(e,d)}})),_.a.createElement("div",{className:Se.a.time},i||""),_.a.createElement("div",{className:Se.a.priceWrap},_.a.createElement("div",{className:"price"},o||0,"元"),!!u&&_.a.createElement("div",{className:Se.a.best},"最佳手气"))))})))}),Te=n("NCCs"),De=n("IelJ"),xe=n.n(De);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Le={page_el_sn:2667501},Be={page_el_sn:2667502};var Me,Ue,qe,We,ze,Fe,He,Ve,Je,Qe,Xe,Ye,Ke,Ge,Ze,$e,et,tt,nt,rt,at,ot,it,ct,st,ut,lt,pt,dt,ft,mt,ht,vt,bt,gt,yt,Ot,_t,wt,jt,kt,Et,Pt,Ct=Object(w.d)(function(){var e=Object(H.a)().store,t=e.notReceivedAvatarList,n=e.queryNotReceivedUsers;return 0===t.length?null:_.a.createElement(z.a,{trackingInfo:Le},_.a.createElement("div",{className:k()(xe.a.wrap)},_.a.createElement("div",{className:xe.a.title},"这些好友来晚了，没有抢到红包"),_.a.createElement(Pe.a,{onLoadDown:n,rootMargin:150,isUseGoTop:!1},t.map(function(e,t){var n=e.scid,r=e.avatar,a=e.user_info_url;return _.a.createElement(z.a,{trackingInfo:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach(function(t){c()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Be,{scid:n})},_.a.createElement(Q.a,{key:n||t,onClick:function(){return function(e){e&&Object(Y.b)(e)}(a)},src:r,lazy:!0,resizeWidth:120,quality:90,wrapperClass:k()(xe.a.avatar)}))}))))}),St=n("RIqP"),It=n.n(St),Nt=n("yG8O"),Rt=n.n(Nt),Tt=n("PJYZ"),Dt=n.n(Tt),xt=n("U+yc"),At=n.n(xt),Lt=(n("1ABj"),n("2vnA")),Bt=n("7McF"),Mt=n("U/Oh"),Ut=n("S5mo"),qt=n("fq8U"),Wt=n("nCWU");function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach(function(t){c()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ht(e){return function(){var t,n=b()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=b()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h()(this,t)}}var Vt=(Me=Lt.d.bound,Ue=Lt.d.bound,qe=Lt.d.bound,We=Lt.d.bound,ze=Lt.d.bound,Fe=Lt.d.bound,He=Lt.d.bound,Ve=Lt.d.bound,Je=Lt.d.bound,Qe=Lt.d.bound,Xe=Lt.d.bound,Ye=Lt.d.bound,Ke=Lt.d.bound,Ge=Lt.d.bound,Ze=Lt.d.bound,$e=Lt.d.bound,et=function(e){y()(n,e);var t=Ht(n);function n(){var e;p()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).__bid=1,e.service=null,e.red_envelope_owner_scid="",e.broadcast_sn="",e.tl_timestamp="",e.hasReceived=!1,e.maxSeqNo=0,e.cursor=0,e.hasMore=!0,Rt()(e,"loginUserAvatar",tt,Dt()(e)),Rt()(e,"avatar",nt,Dt()(e)),Rt()(e,"nickname",rt,Dt()(e)),e.isCurrentUser=!1,Rt()(e,"ownerLink",at,Dt()(e)),Rt()(e,"status",ot,Dt()(e)),Rt()(e,"isFetchError",it,Dt()(e)),Rt()(e,"statusTips",ct,Dt()(e)),Rt()(e,"openedAmount",st,Dt()(e)),Rt()(e,"redPackTimestamp",ut,Dt()(e)),Rt()(e,"albumInfo",lt,Dt()(e)),Rt()(e,"totalCount",pt,Dt()(e)),Rt()(e,"openedCount",dt,Dt()(e)),Rt()(e,"openedList",ft,Dt()(e)),Rt()(e,"offset",mt,Dt()(e)),Rt()(e,"packetType",ht,Dt()(e)),Rt()(e,"followerInfo",vt,Dt()(e)),Rt()(e,"goodsInfo",bt,Dt()(e)),Rt()(e,"immersiveSupported",gt,Dt()(e)),Rt()(e,"isAddInvisibleChar",yt,Dt()(e)),Rt()(e,"quickCommentList",Ot,Dt()(e)),Rt()(e,"barrageCachePool",_t,Dt()(e)),Rt()(e,"barrageList",wt,Dt()(e)),e.cachedInitPool=[],e.outBarrageCount=0,e.needCycleBarrage=!0,Rt()(e,"showBarragePopup",jt,Dt()(e)),Rt()(e,"showEducationModal",kt,Dt()(e)),Rt()(e,"isCommentListFetched",Et,Dt()(e)),e.detailRulesArr=[],e.detailRulesTitle="",e.detailTipsArr=[],Rt()(e,"notReceivedAvatarList",Pt,Dt()(e)),e.notReceivedCursor=0,e.hasMoreAvatarList=!0,e}return f()(n,[{key:"initServices",value:function(e){this.service=new qt.a(e)}},{key:"getDatasource",value:function(){var e=this,t={__rawData:function(){var t=u()(o.a.mark(function t(n){var r,a,i,c,s,u,l,p,d,f,m,h,v,b,g,y,O,_,w,j,k,E,P,C,S,I;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.query,a=n.__res,i=r.red_envelope_owner_scid,c=r.broadcast_sn,s=r.tl_timestamp,u=r.status,e.red_envelope_owner_scid=i,e.broadcast_sn=c,e.tl_timestamp=s,e.hasReceived="1"===u,e.isAddInvisibleChar=e.isNativeIOSPlatform||e.isIOSPlatform,l={red_envelope_owner_scid:e.red_envelope_owner_scid,broadcast_sn:e.broadcast_sn},t.next=10,e.service.receiveRedPacket(l);case 10:p=t.sent,d=p.receive_result,f=p.receive_result_text,m=p.opened_list,h=p.total_count,v=p.opened_count,b=p.opened_amount,g=p.owner_info,y=p.has_more,O=p.cursor,_=p.max_seq_no,w=p.fetchError,j=p.red_envelope_type,k=p.follow_buy_user,E=p.follow_buy_goods,P=p.quick_comment_list,C=p.album_info,S=p.timestamp,I=p.self,e.status=d,e.statusTips=f,e.openedList=m||[],e.totalCount=~~h,e.openedCount=~~v,e.openedAmount=Object(Wt.a)(b),e.hasMore=y,e.cursor=O,e.maxSeqNo=_,e.isFetchError=w,e.dealOwnerInfo(g),e.packetType=j,e.followerInfo=k||{},e.goodsInfo=E||{},e.quickCommentList=P||[],e.redPackTimestamp=S,e.albumInfo=C||{},e.isCurrentUser=!!I,e.setShowBarragePopup(),e.dealLeoData(e.packetType,a);case 49:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};return[Ut.a,t]}},{key:"dealLeoData",value:function(e,t){var n=(Object(Bt.a)("redPacketTextInfo",t)||{})[e===$.k.album?"album":"follow"]||{},r=n.rules,a=n.tips,o=n.rulesTitle;this.detailRulesArr=r||[],this.detailTipsArr=a||[],this.detailRulesTitle=o||""}},{key:"openRedPacket",value:function(){var e=u()(o.a.mark(function e(t){var n,r,a,i,c,s,u,l,p,d,f,m,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={red_envelope_owner_scid:this.red_envelope_owner_scid,broadcast_sn:this.broadcast_sn},e.next=3,this.service.openRedPacket(t);case 3:return n=e.sent,r=n.open_result,a=n.open_result_text,i=n.opened_list,c=n.total_count,s=n.opened_count,u=n.opened_amount,l=n.has_more,p=n.cursor,d=n.max_seq_no,f=n.fetchError,m=n.quick_comment_list,h=n.timestamp,this.statusTips=a,this.openedList=i||[],this.totalCount=~~c,this.openedCount=~~s,this.openedAmount=Object(Wt.a)(u),this.hasMore=l,this.cursor=p,this.maxSeqNo=d,this.isFetchError=f,this.quickCommentList=m||[],this.redPackTimestamp=h,e.abrupt("return",r);case 28:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setReadPacketStatus",value:function(e){this.status=e,this.setShowBarragePopup()}},{key:"dealOwnerInfo",value:function(e){var t=e||{},n=(t.scid,t.nickname),r=t.avatar,a=t.user_info_url;this.avatar=r||$.h,this.nickname=n||" ",this.ownerLink=a}},{key:"queryOpenedList",value:function(){var e=u()(o.a.mark(function e(){var t,n,r,a,i,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasMore){e.next=2;break}return e.abrupt("return");case 2:return t={red_envelope_owner_scid:this.red_envelope_owner_scid,broadcast_sn:this.broadcast_sn,cursor:this.cursor||this.openedList.length,max_seq_no:this.maxSeqNo},e.next=5,this.service.queryOpenedList(t);case 5:if(n=e.sent,r=n.opened_list,a=n.has_more,i=n.cursor,c=n.max_seq_no,this.openedList=[].concat(It()(this.openedList),It()(r||[])),this.hasMore=!!a,this.cursor=i,this.maxSeqNo=c,this.hasMore){e.next=17;break}return this.queryNotReceivedUsers(),e.abrupt("return","end");case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onUserCommentClick",value:function(){var e=u()(o.a.mark(function e(t,n,r){var a,i,c,s,u,l,p,d,f,m;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!=r?r:$.e.quick,(a=n||{}).nickname,i=a.scid,c=a.avatar,s=i?{type:$.f.content,mention_scid:i,sub_type:$.g.mention}:null,u=[{type:$.f.content,content:t,sub_type:$.g.pure}],s&&u.splice(0,0,s),l=i?{isMention:!0,mentionAvatar:c}:{},p={scid:this.red_envelope_owner_scid,timestamp:this.redPackTimestamp,conversation_info:u,commend_id:Date.now(),source:r},e.next=9,this.service.userComment(p);case 9:return(d=e.sent).executed&&(this.barrageCachePool.length>0?(f=Ft({id:this.__bid++,fromAvatar:this.loginUserAvatar,comment:t},l),this.barrageCachePool=[f].concat(It()(this.barrageCachePool)),this.cachedInitPool=[f].concat(It()(this.cachedInitPool))):this.barrageList.length>0?this.dealQuickCommentWithNoPoolHasList(t,l):(m=Ft({id:this.__bid++,fromAvatar:this.loginUserAvatar,comment:t},l),this.barrageList=[Ft({},m,{position:Object(pe.b)(),isRightMost:!0,hasEvokedNext:!1})],this.cachedInitPool=[m].concat(It()(this.cachedInitPool)))),e.abrupt("return",d);case 12:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"dealQuickCommentWithNoPoolHasList",value:function(e,t){var n=this.barrageList.slice(),r=n.find(function(e){return e.isRightMost&&e.hasEvokedNext});if(r){var a=Ft({id:this.__bid++,fromAvatar:this.loginUserAvatar,comment:e},t);return this.barrageList=[Ft({},a,{position:r.position,isRightMost:!0,hasEvokedNext:!1})].concat(It()(this.barrageList)),void(this.cachedInitPool=[a].concat(It()(this.cachedInitPool)))}if(n.find(function(e){return e.isRightMost&&!e.hasEvokedNext})){var o=Ft({id:this.__bid++,fromAvatar:this.loginUserAvatar,comment:e},t);return this.barrageCachePool=[Ft({},o,{isRightMost:!0,hasEvokedNext:!1})].concat(It()(this.barrageCachePool)),void(this.cachedInitPool=[o].concat(It()(this.cachedInitPool)))}var i=Ft({id:this.__bid++,fromAvatar:this.loginUserAvatar,comment:e},t);this.barrageList=[Ft({},i,{position:Object(pe.b)(),isRightMost:!0,hasEvokedNext:!1})].concat(It()(this.barrageList)),this.cachedInitPool=[i].concat(It()(this.cachedInitPool))}},{key:"initBarrageList",value:function(){var e=this;if(this.__initBarrageFlag)console.warn("initBarrageList() should be called for only one time.");else{this.__initBarrageFlag=!0;var t=this.barrageCachePool.length;if(0!==t)this.barrageCachePool.slice(0,$.b).forEach(function(t,n){e.barrageList.push(Ft({},t,{isRightMost:!0,hasEvokedNext:!1,position:0===n?$.c.UP:1===n?$.c.MIDDLE:$.c.DOWN}))}),this.barrageCachePool=this.barrageCachePool.slice($.b,t),this.checkBarrageCachePool();else this.needEvokeInitBarrageListFunc=!0}}},{key:"checkBarrageCachePool",value:function(){}},{key:"removeBarrage",value:function(e){var t=this;this.barrageList=this.barrageList.filter(function(t){return t.id!==e}),this.outBarrageCount=this.outBarrageCount+1,this.outBarrageCount===this.cachedInitPool.length&&setTimeout(function(){t.barrageCachePool=It()(t.cachedInitPool),t.__initBarrageFlag=!1,t.initBarrageList(),t.outBarrageCount=0},50)}},{key:"pushNextBarrage",value:function(e,t){this.barrageList=this.barrageList.map(function(n){return Ft({},n,{isRightMost:n.position!==e&&n.isRightMost,hasEvokedNext:n.id===t||n.hasEvokedNext})});var n=this.barrageCachePool.length;0!==n&&(this.barrageList=[].concat(It()(this.barrageList),[Ft({},this.barrageCachePool[0],{id:this.__bid++,isRightMost:!0,hasEvokedNext:!1,position:e})]),this.barrageCachePool=this.barrageCachePool.slice(1,n),this.checkBarrageCachePool())}},{key:"prepareClientData",value:function(){var e=u()(o.a.mark(function e(){var t,n,r,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.initShowEducationModal(),t={scid:this.red_envelope_owner_scid,timestamp:this.redPackTimestamp,last_nano_time:0,limit:100},e.next=4,Promise.all([this.service.queryCommentList(t),this.service.getMeSimplifyInfo()]);case 4:n=e.sent,r=U()(n,2),a=r[0],i=r[1],this.barrageCachePool=this.formatBarrageList(a),this.cachedInitPool=It()(this.barrageCachePool),this.needEvokeInitBarrageListFunc&&(this.__initBarrageFlag=!1,this.initBarrageList()),this.isCommentListFetched=!0,this.loginUserAvatar=i.avatar||$.h,this.hasMore||this.queryNotReceivedUsers();case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initShowEducationModal",value:function(){var e="".concat($.i,"_").concat(this.userID);"1"===Object(T.a)(e)?this.setShowEducationModal(!1):[$.j.SUCCESS,$.j.HAS_REVEIVED,$.j.EMPTY,$.j.EXPIRED,$.j.OUT_LIMIT].indexOf(this.status)>-1&&this.setShowEducationModal(!0)}},{key:"setShowEducationModal",value:function(e){this.showEducationModal=!!e}},{key:"formatBarrageList",value:function(e){var t=this;return Array.isArray(e)?e.map(function(e,n){var r=e||{},a=r.from_user,o=r.to_user,i=r.conversation,c=r.conversation_info,s={id:t.__bid++,fromAvatar:a&&a.avatar,comment:i||"[分享链接]."},u=o&&o.avatar;u&&(s.toAvatar=u);var l=[];return(c||[]).forEach(function(e,t){var n=e||{},r=n.type,a=n.sub_type,o=n.avatar,i=n.content;r===$.f.content?0===t&&a===$.g.mention?(s.isMention=!0,s.mentionAvatar=o||$.h):a===$.g.share?l.push("[商品卡片]"):a===$.g.goods?l.push("[分享链接]"):l.push(i||"[分享链接]."):r===$.f.goods?l.push("[商品卡片]"):r===$.f.mall?l.push("[店铺卡片]"):r===$.f.brand&&l.push("[品牌卡片]"),l.length&&(s.comment=l.join(""))}),s}):[]}},{key:"setShowBarragePopup",value:function(){var e=this.status;this.showBarragePopup=-1===[$.j.RISK,$.j.READY].indexOf(e)}},{key:"queryNotReceivedUsers",value:function(){var e=u()(o.a.mark(function e(){var t,n,r,a,i,c=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasMoreAvatarList){e.next=2;break}return e.abrupt("return");case 2:return t={red_envelope_owner_scid:this.red_envelope_owner_scid,broadcast_sn:this.broadcast_sn,cursor:this.notReceivedCursor+"",filter_opened:!0},e.next=5,this.service.queryNotReceivedUsers(t);case 5:if(n=e.sent,r=n.received_list,a=n.has_more,i=n.cursor,this.hasMoreAvatarList=!!a,(r||[]).forEach(function(e){var t=e||{},n=t.scid,r=t.avatar;n&&r&&!c.notReceivedAvatarList.find(function(e){return e.scid===n})&&(c.notReceivedAvatarList=[].concat(It()(c.notReceivedAvatarList),[e]))}),this.notReceivedCursor=i||this.notReceivedAvatarList.length+"",this.hasMoreAvatarList){e.next=14;break}return e.abrupt("return","end");case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}(Mt.a),tt=At()(et.prototype,"loginUserAvatar",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),nt=At()(et.prototype,"avatar",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),rt=At()(et.prototype,"nickname",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),at=At()(et.prototype,"ownerLink",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ot=At()(et.prototype,"status",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.j.RISK}}),it=At()(et.prototype,"isFetchError",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ct=At()(et.prototype,"statusTips",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),st=At()(et.prototype,"openedAmount",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ut=At()(et.prototype,"redPackTimestamp",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lt=At()(et.prototype,"albumInfo",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),pt=At()(et.prototype,"totalCount",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dt=At()(et.prototype,"openedCount",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ft=At()(et.prototype,"openedList",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mt=At()(et.prototype,"offset",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ht=At()(et.prototype,"packetType",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=At()(et.prototype,"followerInfo",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),bt=At()(et.prototype,"goodsInfo",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),gt=At()(et.prototype,"immersiveSupported",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yt=At()(et.prototype,"isAddInvisibleChar",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ot=At()(et.prototype,"quickCommentList",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_t=At()(et.prototype,"barrageCachePool",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wt=At()(et.prototype,"barrageList",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jt=At()(et.prototype,"showBarragePopup",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kt=At()(et.prototype,"showEducationModal",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Et=At()(et.prototype,"isCommentListFetched",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt=At()(et.prototype,"notReceivedAvatarList",[Lt.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),At()(et.prototype,"dealLeoData",[Me],Object.getOwnPropertyDescriptor(et.prototype,"dealLeoData"),et.prototype),At()(et.prototype,"openRedPacket",[Ue],Object.getOwnPropertyDescriptor(et.prototype,"openRedPacket"),et.prototype),At()(et.prototype,"setReadPacketStatus",[qe],Object.getOwnPropertyDescriptor(et.prototype,"setReadPacketStatus"),et.prototype),At()(et.prototype,"dealOwnerInfo",[We],Object.getOwnPropertyDescriptor(et.prototype,"dealOwnerInfo"),et.prototype),At()(et.prototype,"queryOpenedList",[ze],Object.getOwnPropertyDescriptor(et.prototype,"queryOpenedList"),et.prototype),At()(et.prototype,"onUserCommentClick",[Fe],Object.getOwnPropertyDescriptor(et.prototype,"onUserCommentClick"),et.prototype),At()(et.prototype,"dealQuickCommentWithNoPoolHasList",[He],Object.getOwnPropertyDescriptor(et.prototype,"dealQuickCommentWithNoPoolHasList"),et.prototype),At()(et.prototype,"initBarrageList",[Ve],Object.getOwnPropertyDescriptor(et.prototype,"initBarrageList"),et.prototype),At()(et.prototype,"checkBarrageCachePool",[Je],Object.getOwnPropertyDescriptor(et.prototype,"checkBarrageCachePool"),et.prototype),At()(et.prototype,"removeBarrage",[Qe],Object.getOwnPropertyDescriptor(et.prototype,"removeBarrage"),et.prototype),At()(et.prototype,"pushNextBarrage",[Xe],Object.getOwnPropertyDescriptor(et.prototype,"pushNextBarrage"),et.prototype),At()(et.prototype,"initShowEducationModal",[Ye],Object.getOwnPropertyDescriptor(et.prototype,"initShowEducationModal"),et.prototype),At()(et.prototype,"setShowEducationModal",[Ke],Object.getOwnPropertyDescriptor(et.prototype,"setShowEducationModal"),et.prototype),At()(et.prototype,"formatBarrageList",[Ge],Object.getOwnPropertyDescriptor(et.prototype,"formatBarrageList"),et.prototype),At()(et.prototype,"setShowBarragePopup",[Ze],Object.getOwnPropertyDescriptor(et.prototype,"setShowBarragePopup"),et.prototype),At()(et.prototype,"queryNotReceivedUsers",[$e],Object.getOwnPropertyDescriptor(et.prototype,"queryNotReceivedUsers"),et.prototype),et),Jt=n("UZEx"),Qt=n.n(Jt);n("Zsmj");function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach(function(t){c()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kt(e){return function(){var t,n=b()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=b()(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h()(this,t)}}var Gt=60,Zt=function(e){y()(n,e);var t=Kt(n);function n(){var e;p()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={showEducationModal:!1},e.wrapRef=Object(O.createRef)(null),e.onMsgSubmit=u()(o.a.mark(function t(){var n,r,a,i,c,s,u,l,p,d,f,m,h,v,b,g,y=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=y.length>0&&void 0!==y[0]?y[0]:{},r=y.length>1?y[1]:void 0,a=e.props.store,i=a.onUserCommentClick,c=a.broadcast_sn,s=a.isNativePlatform,u=n.toUserInfo||{},l=u.nickname,u.scid,p=u.avatar,d=n.content,t.next=8,i(d,u,$.e.handle);case 8:f=t.sent,m=f.executed,h=f.errorCode,v=f.message,b=f.conversation_info,s&&m&&(g=Yt({},f,{conversation_info:(b||[]).map(function(e){return e.type===$.f.content&&e.sub_type===$.g.mention?Yt({},e,{avatar:p,content:"@".concat(l)}):e})}),Object(pe.c)(c,g)),r&&r({}),Object(pe.e)(m,1500,{errorCode:h,message:v});case 14:case"end":return t.stop()}},t)})),e.dealNativeBg=function(){var t=e.wrapRef&&e.wrapRef.current;t&&(t.style.minHeight=document.body.clientHeight+Gt+"px");var n=document.getElementById($.a);n&&new IntersectionObserver(function(e){var t=e[0].isIntersecting;"input-content"!==(document.activeElement&&document.activeElement.id)&&Object(N.f)(t?"#FF5943":"#ffffff")},{threshold:[1]}).observe(n)},e.onCloseEducationModal=function(){e.setState({showEducationModal:!1}),e.props.store.setShowEducationModal(!1)},e.dealEducationModal=function(t){if(t){var n=e.props.store.userID,r="".concat($.i,"_").concat(n);document.createElement("img").src="https://funimg.pddpic.com/timeline/edu_redpacket_bg.png",setTimeout(function(){e.setState({showEducationModal:!0}),Object(T.c)(r,"1")},1500)}},e}return f()(n,[{key:"componentDidMount",value:function(){var e=this.props.store,t=e.isNativePlatform,n=e.broadcast_sn,r=e.status,a=e.showEducationModal;Object(_e.d)(r),Object(N.d)(!0);var o=[$.j.EXPIRED,$.j.EMPTY,$.j.RISK,$.j.NOT_FRIEND,$.j.NOT_BIND_WECHAT,$.j.OUT_LIMIT].includes(r);t&&o&&Object(pe.d)(n),this.dealEducationModal(a),t&&this.dealNativeBg(),Object(R.perfLog)()}},{key:"render",value:function(){var e=this.props.store,t=e.status,n=e.isFetchError,r=e.immersiveSupported,a=e.isAddInvisibleChar,o=this.props,i=o.onCommentInputShow,c={onCommentInputHide:o.onCommentInputHide,onCommentInputShow:i};return t===$.j.RISK?_.a.createElement(O.Fragment,null,_.a.createElement(C.a,{isAddInvisibleChar:a}),_.a.createElement(Te.a,{isFetchError:n,immersiveSupported:r})):_.a.createElement(O.Fragment,null,_.a.createElement(C.a,{isAddInvisibleChar:a}),_.a.createElement(x.a,null),this.state.showEducationModal&&_.a.createElement(A.a,{onClose:this.onCloseEducationModal}),_.a.createElement("div",{className:k()(Qt.a.wrap),ref:this.wrapRef},_.a.createElement(Ee,c),_.a.createElement(Re,c),_.a.createElement(Ct,null)),_.a.createElement(P.a,null),_.a.createElement(S.a,{style:{background:"#fff"}}))}}]),n}(_.a.Component),$t=Object(D.a)(Object(E.a)({store:Vt},Object($.l)({preloadImgArr:["redpacket_head_bg_v3.png"]})),Object(w.c)("store"),w.d)(Object(I.a)(Zt));Object(r.a)($t,$t.appConfig.options)},yet2:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var r,a=n("o0o1"),o=n.n(a),i=n("yXPU"),c=n.n(i),s=n("lSNA"),u=n.n(s),l=n("QILm"),p=n.n(l),d=n("lwsE"),f=n.n(d),m=n("W8MJ"),h=n.n(m),v=n("U+yc"),b=n.n(v),g=n("gKdT"),y=n.n(g),O=n("rx36"),_={serverTime:function(e){return this.__serverTime?this.__serverTime:(this.__serverTime=this.getServerTime(e),this.__serverTime)},getServerTime:function(e){return e("api/server/_stm").then(function(e){return e.server_time}).catch(function(e){return Date.now()})}},w=n("KoDT");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){u()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t){return Promise.race([e,new Promise(function(e,n){return setTimeout(function(){return n(new Error("timeout of ".concat(t)))},t)})])}var P=(r=function(){function e(t,n){f()(this,e),this.$axiosHttp=t,this.initReportMap(n)}return h()(e,[{key:"initRiskControl",value:function(){var e=this;return _.serverTime(this.get).then(function(t){e.$riskControlCrawler=new O.a({serverTime:t})})}},{key:"get",value:function(e,t,n){var r=n||{},a=r.timeout,o=p()(r,["timeout"]),i=this.$axiosHttp.get(e,k({params:t,timeout:a},o));var c=Object(w.a)().isNativePlatform;return a&&c?E(i,a):i}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2?arguments[2]:void 0)||{},r=n.timeout,a=p()(n,["timeout"]),o=this.$axiosHttp.post(e,t,k({timeout:r},a));var i=Object(w.a)().isNativePlatform;return r&&i?E(o,r):o}},{key:"initReportMap",value:function(e){this.reportMap=e&&e.reportMap||{}}},{key:"getRiskInfo",value:function(){var e=c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(this.$riskControlCrawler){e.next=5;break}return e.next=5,this.initRiskControl();case 5:return e.abrupt("return",this.$riskControlCrawler.messagePackSync());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"postRisk",value:function(){var e=c()(o.a.mark(function e(t){var n,r,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,e.next=5;break;case 5:return e.prev=5,e.next=8,this.getRiskInfo();case 8:return n.anti_content=e.sent,e.abrupt("return",this.post(t,n,r));case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",Promise.reject(e.t0));case 15:case"end":return e.stop()}},e,this,[[5,12]])}));return function(t){return e.apply(this,arguments)}}()}]),e}(),b()(r.prototype,"get",[y.a],Object.getOwnPropertyDescriptor(r.prototype,"get"),r.prototype),b()(r.prototype,"post",[y.a],Object.getOwnPropertyDescriptor(r.prototype,"post"),r.prototype),b()(r.prototype,"postRisk",[y.a],Object.getOwnPropertyDescriptor(r.prototype,"postRisk"),r.prototype),r)},"yo/L":function(e,t,n){"use strict";function r(e,t){"undefined"!=typeof localStorage&&o(e,t,localStorage)}function a(e,t){"undefined"!=typeof sessionStorage&&o(e,t,sessionStorage)}function o(e,t,n){if(e)return null==t?n.removeItem(e):void n.setItem(e,JSON.stringify(t))}function i(e){if("undefined"!=typeof localStorage)return s(e,localStorage)}function c(e){if("undefined"!=typeof sessionStorage)return s(e,sessionStorage)}function s(e,t){if(null==e)return null;var n=null;try{n=JSON.parse(t.getItem(e))}catch(e){console.error("_getVal() Error while parsing value",e)}return n}n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return c})}},[[11,1,0,2]]]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-social/js/react_timeline_red_packet_9c198b614564a1072032.js.map