(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"+sG+":function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,'._7faOxJrN{position:relative;background-color:#fcfcfc;border-radius:50%;box-sizing:content-box}._7faOxJrN._3NYdEshG{border:1px solid transparent}._2YAzM7vz{display:inline-block;vertical-align:top;width:100%;height:100%;border-radius:50%}._2YAzM7vz:not([src]),._2YAzM7vz:not([src])~._2xWZ2Lbb,._2YAzM7vz[src=""],._2YAzM7vz[src=""]~._2xWZ2Lbb{visibility:hidden}._2xWZ2Lbb{position:absolute;top:0;left:0;right:-100%;bottom:-100%;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-radius:50%;border:1px solid rgba(0,0,0,.06)}',""]),t.locals={root:"_7faOxJrN",hasBorder:"_3NYdEshG",image:"_2YAzM7vz",border:"_2xWZ2Lbb"}},"+vUh":function(e,t,r){e.exports={icon:"_1PJkHLAg",back:"_16nNUClS"}},"+wjZ":function(e,t,r){var n=r("Yd5u"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"/++w":function(e,t,r){e.exports={yellowLabelListWrap:"_9kqdzMX6",yellowLabelWrap:"_124NkzTI",listItem:"QAFjCy2I",yellowLabel:"_19oXnsrZ",yellowLabelOC:"WbesAh-B",countDown:"_40JBw-jd",skuSelectorHeadContent:"_1fYHEBIC",skuSelectorHeadContentOC:"_3P4E5ia9",skuSelectorPrice:"_2mtFnR8B",skuSelectorPriceOC:"IvhjY_HV",skuQuantityPriceDesc:"_27FaiT3N",isNewPriceArea:"Cccuw03n",startHide:"C68J1BqP",toHide:"_2NCyKoqd",startDisplay:"_1cpcC5_k",toDisplay:"_1k8KGuTw"}},"/JQB":function(e,t,r){var n=r("+sG+"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"/f7M":function(e,t,r){var n=r("uNWy"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"/iyY":function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._3kJOHato{font-size:.17rem;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}._3kJOHato>*{-webkit-box-flex:1;-webkit-flex:1;flex:1}",""]),t.locals={root:"_3kJOHato"}},"0JQy":function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+n+"|"+o+")"+"?",u="[\\ufe0e\\ufe0f]?",l=u+c+("(?:\\u200d(?:"+[a,i,s].join("|")+")"+u+c+")*"),d="(?:"+[a+n+"?",n,i,s,r].join("|")+")",p=RegExp(o+"(?="+o+")|"+d+l,"g");e.exports=function(e){return e.match(p)||[]}},"0ZTe":function(e,t,r){var n=r("wy8a"),o=r("quyA"),a=r("Em2t"),i=r("dt0z");e.exports=function(e){return function(t){t=i(t);var r=o(t)?a(t):void 0,s=r?r[0]:t.charAt(0),c=r?n(r,1).join(""):t.slice(1);return s[e]()+c}}},"0y1f":function(e,t,r){e.exports={disablePromotionItem:"_2k_vx0Gs",disableWrap:"_4nwFZZmx",promotionButtonDesc:"jrd5e26U",buttonWrap:"_2YSiZbER",btn:"xwJAz4fr",isTakenOut:"_11gcuE83",hasNum:"_1uVJvzmT"}},"0yKJ":function(e,t,r){e.exports={address:"_3dnUJxSF",bottomline:"NvihmHhr",addressLine:"_1UK6XxYu"}},"0ycA":function(e,t){e.exports=function(){return[]}},"1+5i":function(e,t,r){var n=r("w/wX"),o=r("sEf8"),a=r("mdPL"),i=a&&a.isSet,s=i?o(i):n;e.exports=s},"1KKG":function(e,t,r){e.exports=r("EQ+b")("1KKG")},"1R20":function(e,t,r){},"2Pqc":function(e,t,r){e.exports={nameArea:"_207UXmFS",name:"_2FyV2ToV",text:"_25aQu4ow",price:"_18cPPiye",questionIcon:"_nXTc1Jt",questionDialog:"iK0vh05u",question:"_1d2-PSxj"}},"2W6z":function(e,t,r){"use strict";var n=function(){};e.exports=n},"32Nq":function(e,t,r){e.exports={modalCartList:"FzeTXdKd",titleCartSku:"_2eUg3fCf",cartContent:"_2nTVFCTP",skuList:"_2I6B4yA1",cartSkuItem:"WbAzXl55",skuSelectedRightDesc:"_2ScUV4rT",skuSelectedName:"_1zg1w7m9",skuSelectedPricePrefix:"_1AsyBzsJ",skuSelectedPrice:"_1qiSe_9J",skuSelectedSinglePrice:"_1MCU61ji",yen:"_2Q_nMSu7",skuSelectedDelete:"SRwWohQa",skuSelectedNum:"zcOmj4vh",empty:"_3Pt0HhJv",buyMoreBtn:"_26D3yYMZ",cartTotal:"_18iO4-v2",cartBottomBtn:"_2CVKtFrJ",cartDiscount:"_2hRtMz5I",payPrice:"gNCgaRSJ",couponPrice:"_3E-5BsHY"}},"3EMY":function(e,t,r){},"3INx":function(e,t,r){e.exports=r("EQ+b")("3INx")},"3cYt":function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},"3oyJ":function(e,t,r){e.exports={container:"_1KXxDdpj",paymentlistv2:"_3SPixsNP",channelBottomContent:"dUZr_cqC",placeholder:"_1yNGB6ns",group:"DEV9y_oe",groupUnspreadContainer:"_28ZaMpmL",groupUnspread:"_2QsxsnqX",groupTitle:"_1ISgtFxl",groupSpreadTitle:"_3n6U5qsG",groupExtensionContent:"_1MxX-d9W",groupSubtitle:"_1ZIqZ-g9",groupSubtitleIcon:"_2zDfFEwJ",combineItems:"_2Ho_SGcd",groupBorder:"_2o34Mu3W",groupSelectedSvg:"_28h4CsHl",groupSelected:"_2Z-dRROu",unableText:"s_SbzFCI"}},"4sDh":function(e,t,r){var n=r("4uTw"),o=r("03A+"),a=r("Z0cm"),i=r("wJg7"),s=r("shjB"),c=r("9Nap");e.exports=function(e,t,r){for(var u=-1,l=(t=n(t,e)).length,d=!1;++u<l;){var p=c(t[u]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}return d||++u!=l?d:!!(l=null==e?0:e.length)&&s(l)&&i(p,l)&&(a(e)||o(e))}},"5HhQ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){var r=e%t;return r<0?r+t:r};t.default=n},"5Pt6":function(e,t,r){var n=r("7hqk"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"6acW":function(e,t,r){var n=r("dt0z"),o=r("gQMU");e.exports=function(e){return o(n(e).toLowerCase())}},"6iuw":function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._1o0Z4KRu{position:relative;color:#e02e24;height:.48rem;font-weight:500;line-height:normal;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-weight:700}",""]),t.locals={root:"_1o0Z4KRu"}},"6nK8":function(e,t,r){var n=r("dVn5"),o=r("fo6e"),a=r("dt0z"),i=r("9NmV");e.exports=function(e,t,r){return e=a(e),void 0===(t=r?void 0:t)?o(e)?i(e):n(e):e.match(t)||[]}},"79/T":function(e,t,r){var n=r("sgoq")((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));e.exports=n},"79DA":function(e,t,r){var n=r("YNjT"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"7Aih":function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var n=r("J4zp"),o=r.n(n),a=r("h7Yj"),i=r("gNBk"),s=r("LJxE");function c(e){if(!e)return 0;var t=e.split("."),r=o()(t,3),n=r[0],a=r[1],i=r[2],s=[a,i].map((function(e){return"string"!=typeof e?"00":e.padStart(2,"0")})),c=o()(s,2);return+[n,a=c[0],i=c[1]].join("")}var u=Object(a.memoize)((function(e){var t=window.__MONITOR_INFOS__;return t&&t.reqId?"monitor_".concat(e,"_").concat(t.reqId):"monitor_".concat(e,"_").concat(Object(a.nanoid)())})),l=0;function d(){return new Promise((function(e){if(l)return e(l);if(i.a.isNativePlatform&&window.pinbridge){return window.pinbridge.callNative("AMUser","info",null,(function(t){l=t.user_id||0,e(l)}),(function(){l=Object(a.getCookie)(s.d),e(l)}))}l=Object(a.getCookie)(s.d),e(l)}))}},"7HEc":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=e.children,n=e.startIndex,i=e.startX,s=e.pageX,c=e.viewLength,u=e.resistance,l=o.default.Children.count(r)-1,d=n+(i-s)/c;u?d<0?d=Math.exp(d*a.default.RESISTANCE_COEF)-1:d>l&&(d=l+1-Math.exp((l-d)*a.default.RESISTANCE_COEF)):d<0?t=((d=0)-n)*c+s:d>l&&(t=((d=l)-n)*c+s);return{index:d,startX:t}};var o=n(r("q1tI")),a=n(r("UlPe"))},"7MjH":function(e,t,r){e.exports={contact:"h6mab8Em"}},"7VIw":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("xZgz")).default;t.default=o},"7hqk":function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,'._3f1JMFzp{position:relative;padding-left:.12rem;height:.46rem;line-height:.46rem;background-color:#fff}._3f1JMFzp._1frDSkty{pointer-events:none}._3f1JMFzp._14ZLILa-,.pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1rem}._3f1JMFzp:not(._14ZLILa-):active:not(:first-child) ._3t3V2co2:after{content:none}._3f1JMFzp:not(._14ZLILa-):active:not(._14ZLILa-)+._3f1JMFzp ._3t3V2co2{border-top:1px solid #fff}div._3f1JMFzp:first-of-type ._3t3V2co2:after{content:none}._3f1JMFzp[data-active=before-white]:active:before{opacity:.08}._3t3V2co2{width:100%;font-size:0;position:relative;border:none!important}._3t3V2co2:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid #ededed}._3t3V2co2 ._2injgcfL{margin-left:.04rem}._3t3V2co2 ._2injgcfL ._2QBPsFuu{display:inline-block;width:.22rem;height:.45rem;margin-right:.04rem;position:relative;vertical-align:top}._3t3V2co2 ._2injgcfL ._2QBPsFuu img{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:.22rem}._3t3V2co2 ._1Z5TdEwR{position:relative;height:.46rem;text-align:left}._1PFsuIUL{background:url(https://funimg.pddpic.com/pay_icon/alipay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._1CnXvRsx,._1PFsuIUL{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._1CnXvRsx{background:url(https://funimg.pddpic.com/pay_icon/wechat_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3XygMUK5{background:url(https://funimg.pddpic.com/pay_icon/qq_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3vucH7ff,._3XygMUK5{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._3vucH7ff{background:url(https://funimg.pddpic.com/pay_icon/friend_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3McrIaJK{background:url(https://funimg.pddpic.com/pay_icon/duoduo_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._2mAKK6dA,._3McrIaJK{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._2mAKK6dA{background:url(https://funimg.pddpic.com/pay_icon/hb_installment_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3HinBJLb{background:url(https://funimg.pddpic.com/pay_icon/hb_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._1QMjdH6n,._3HinBJLb{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._1QMjdH6n{background:url(https://funimg.pddpic.com/pay_icon/xyhf_v3.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}.bP1-sBd2{background:url(https://funimg.pddpic.com/pay_icon/apple_pay_v1.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._19olO3U_,.bP1-sBd2{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._19olO3U_{background:url(https://funimg.pddpic.com/zhuhai_png/2020-12-06/1aecea68-ed03-41a2-89ef-37b7986a4635.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3EumGWhj{background:url(https://funimg.pddpic.com/zhuhai_png/2020-08-19/e6fb26b4-24bc-43a2-9fd0-a1344e7ea48f.png) no-repeat;background-size:.22rem .22rem;background-repeat:no-repeat}._3EumGWhj,._21GMqN4P{content:"";position:absolute;display:inline-block;width:.22rem;height:.22rem;left:-.01rem;top:.12rem}._21GMqN4P{background-size:.22rem .22rem;background-repeat:no-repeat}._3DLN0C5d{margin-left:.32rem;font-size:.15rem;color:#151516}._30P7ub84{position:absolute;top:.15rem;right:0;width:.16rem;height:.16rem;margin-right:.12rem;line-height:.16rem;fill:#58595b}._1yOWzRTS{height:1rem}._287rdYha[data-active=before-white]:active:before{opacity:.08}._2injgcfL{position:relative;font-size:.13rem;color:#58595b}._2injgcfL ._2qBOBZaq{padding:.01rem}.mtfrtIKR ._3DLN0C5d{color:rgba(21,21,22,.2)}.mtfrtIKR ._3DLN0C5d:before{opacity:.4}.mtfrtIKR ._2injgcfL{color:#9c9c9c}._1cj95KqM{float:right;font-size:.14rem;color:#151516;opacity:.2;margin-right:.12rem}._2HSzi9Mi{position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);vertical-align:top}.pdd_payment_list_v2_mode ._3f1JMFzp{line-height:.5rem;height:.5rem}.pdd_payment_list_elder_mode .pdd_payment_list_v2_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_elder_mode .pdd_payment_list_v2_mode ._3f1JMFzp._27Hsd-bC,.pdd_payment_list_v2_mode ._3f1JMFzp._14ZLILa-,.pdd_payment_list_v2_mode .pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab,.pdd_payment_list_v2_mode .pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1.02rem}.pdd_payment_list_v2_mode ._3t3V2co2{height:.5rem;line-height:.5rem}.pdd_payment_list_v2_mode ._3t3V2co2 ._1Z5TdEwR{height:.5rem}.pdd_payment_list_v2_mode ._3t3V2co2:after{left:.3rem;right:calc(-100% + .3rem)}.pdd_payment_list_v2_mode ._3t3V2co2._3Pn2PnvI:after{margin-left:0}.pdd_payment_list_v2_mode ._1yOWzRTS{height:1.02rem}.pdd_payment_list_v2_mode ._30P7ub84{top:.17rem}.pdd_payment_list_v2_mode ._1CnXvRsx,.pdd_payment_list_v2_mode ._1PFsuIUL,.pdd_payment_list_v2_mode ._1QMjdH6n,.pdd_payment_list_v2_mode ._2mAKK6dA,.pdd_payment_list_v2_mode ._3EumGWhj,.pdd_payment_list_v2_mode ._3HinBJLb,.pdd_payment_list_v2_mode ._3McrIaJK,.pdd_payment_list_v2_mode ._3vucH7ff,.pdd_payment_list_v2_mode ._3XygMUK5,.pdd_payment_list_v2_mode ._19olO3U_,.pdd_payment_list_v2_mode ._21GMqN4P,.pdd_payment_list_v2_mode .bP1-sBd2{width:.2rem;height:.2rem;background-size:.2rem .2rem;top:.15rem;margin-left:.01rem}.pdd_payment_list_v2_mode ._3DLN0C5d{font-size:.14rem}.pdd_payment_list_elder_mode ._3f1JMFzp{line-height:.56rem;height:.56rem}.pdd_payment_list_elder_mode ._3f1JMFzp._27Hsd-bC{height:1.94rem}.pdd_payment_list_elder_mode ._3f1JMFzp._1G7UZoab{height:1.26rem}.pdd_payment_list_elder_mode ._30P7ub84{top:.2rem}.pdd_payment_list_elder_mode ._1cj95KqM{font-size:.18rem;line-height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2{height:.56rem;line-height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2 ._1Z5TdEwR{height:.56rem}.pdd_payment_list_elder_mode ._3t3V2co2 ._2injgcfL ._2QBPsFuu{width:.22rem;height:.56rem}.pdd_payment_list_elder_mode ._1CnXvRsx,.pdd_payment_list_elder_mode ._1PFsuIUL,.pdd_payment_list_elder_mode ._1QMjdH6n,.pdd_payment_list_elder_mode ._2mAKK6dA,.pdd_payment_list_elder_mode ._3EumGWhj,.pdd_payment_list_elder_mode ._3HinBJLb,.pdd_payment_list_elder_mode ._3McrIaJK,.pdd_payment_list_elder_mode ._3vucH7ff,.pdd_payment_list_elder_mode ._3XygMUK5,.pdd_payment_list_elder_mode ._19olO3U_,.pdd_payment_list_elder_mode ._21GMqN4P,.pdd_payment_list_elder_mode .bP1-sBd2{top:.17rem}.pdd_payment_list_elder_mode ._3DLN0C5d{font-size:.18rem}',""]),t.locals={padding:"_3f1JMFzp",disable:"_1frDSkty",paddingInstallment:"_14ZLILa-",paddingInstallment4Elder:"_27Hsd-bC",paddingInstallment2Elder:"_1G7UZoab",item:"_3t3V2co2",hints:"_2injgcfL",icon:"_2QBPsFuu",text:"_1Z5TdEwR",pALIPAY:"_1PFsuIUL",pWEIXIN:"_1CnXvRsx",pQQ:"_3XygMUK5",pWEIXIN_FRIEND:"_3vucH7ff",pDUODUOPAY:"_3McrIaJK",pHBFQ_ALI_PAY:"_2mAKK6dA",pHB_ALI_PAY:"_3HinBJLb",pWEIXIN_CREDIT:"_1QMjdH6n",pLIANLIANPAY:"bP1-sBd2",pUNIONPAY:"_19olO3U_",pDUODUOPAY_ACS:"_3EumGWhj",pfuji:"_21GMqN4P",method:"_3DLN0C5d",selectedSvg:"_30P7ub84",itemInstallment:"_1yOWzRTS",hbMask:"_287rdYha",space:"_2qBOBZaq",itemDisable:"mtfrtIKR",itemDisableText:"_1cj95KqM",richTextImg:"_2HSzi9Mi",installmentFlag:"_3Pn2PnvI"}},"7wT/":function(e,t,r){e.exports={listTitle:"_2YyJcg_B",noBorder:"SJt1nAY0"}},"8SQk":function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("q1tI")),a=function(e,t){var r=!1,n=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var a=o.default.Children.map(e.children,n)[e.index];if(null!=a)a===o.default.Children.map(t.children,n)[t.index]&&(r=!0)}return r};t.default=a},"8vY7":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("lSNA"),o=r.n(n),a=r("MVQ+");function i(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(){};function u(e){return Object(a.a)(s(s({},e),{},{onCancel:e.onCancel||c}))}},"91HH":function(e,t,r){e.exports=r("EQ+b")("91HH")},"9K/W":function(e,t,r){e.exports={bgFill:"aXuJ-1SC",bgFillShow:"_3FlpEG1j",container:"_2u4RC_Sy",visibleContainer:"_1GcQ_LEN"}},"9NmV":function(e,t){var r="\\u2700-\\u27bf",n="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+a+"]",s="\\d+",c="[\\u2700-\\u27bf]",u="["+n+"]",l="[^\\ud800-\\udfff"+a+s+r+n+o+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="["+o+"]",f="(?:"+u+"|"+l+")",h="(?:"+m+"|"+l+")",v="(?:['’](?:d|ll|m|re|s|t|ve))?",y="(?:['’](?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",_=b+g+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",d,p].join("|")+")"+b+g+")*"),k="(?:"+[c,d,p].join("|")+")"+_,S=RegExp([m+"?"+u+"+"+v+"(?="+[i,m,"$"].join("|")+")",h+"+"+y+"(?="+[i,m+f,"$"].join("|")+")",m+"?"+f+"+"+v,m+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",s,k].join("|"),"g");e.exports=function(e){return e.match(S)||[]}},"9ZFI":function(e,t,r){},"9qmp":function(e,t,r){"use strict";var n=r("pVnL"),o=r.n(n),a=r("lSNA"),i=r.n(a),s=r("q1tI"),c=r.n(s),u=(r("17x9"),r("PlGL")),l=r("QILm"),d=r.n(l),p=r("TSYQ"),m=r.n(p),f=r("91HH"),h=r("fUNr"),v=r.n(h);var y=Object(f.withStyles)(v.a)((function(e){var t=e.className,r=d()(e,["className"]);return c.a.createElement("div",o()({},r,{className:m()(t,v.a.root)}))})),g=r("/f7M"),b=r.n(g);var _=Object(f.withStyles)(b.a)((function(e){var t=e.className,r=d()(e,["className"]);return c.a.createElement("div",o()({},r,{className:m()(t,b.a.root)}))})),k=r("dXXU"),S=r.n(k);var I=Object(f.withStyles)(S.a)((function(e){var t=e.className,r=d()(e,["className"]);return c.a.createElement("div",o()({},r,{className:m()(t,S.a.root)}))})),w="#D2D2D2",P=r("TWHF"),O=r.n(P);function C(e){var t=e.className,r=d()(e,["className"]);return c.a.createElement(f.HalfPixelBorderBox,o()({},r,{className:m()(t,O.a.root)}))}C.defaultProps={type:"top",borderColor:w};var x=Object(f.withStyles)(O.a)(C),E=r("kcBU"),D=r.n(E);function N(e){var t=e.className,r=d()(e,["className"]);return c.a.createElement("div",o()({"data-active":"cell-white"},r,{className:m()(t,D.a.root)}))}N.defaultProps={children:"确定"};var T=Object(f.withStyles)(D.a)(N),j=r("jGYx"),A=r.n(j);function R(e){var t=e.className,r=d()(e,["className"]);return c.a.createElement(f.HalfPixelBorderBox,o()({"data-active":"cell-white"},r,{className:m()(t,A.a.root)}))}R.defaultProps={type:"right",borderColor:w,children:"取消"};var M=Object(f.withStyles)(A.a)(R);function L(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(r,!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){var t=e.text,r=e.TitleProps,n=void 0===r?{}:r;return B(B({},t?{fontWeight:700}:{}),n.style)}function U(e){var t=e.title,r=e.text,n=e.cancelButtonLabel,a=e.confirmButtonLabel,i=e.onCancel,s=e.onConfirm,l=e.onClose,d=e.slots,p=void 0===d?{}:d,m=e.DialogProps,f=e.ContentProps,h=e.TitleProps,v=e.TextProps,g=e.ActionSectionProps,b=e.CancelButtonProps,k=e.ConfirmButtonProps,S=e.CloseButtonProps;return c.a.createElement(u.a,m,c.a.createElement(u.a.CloseButton,o()({onClick:l},S)),p.beforeContent,c.a.createElement(y,f,t&&c.a.createElement(_,o()({},h,{style:F(e)}),t),r&&c.a.createElement(I,v,r)),p.afterContent,c.a.createElement(x,g,i&&c.a.createElement(M,o()({onClick:i},b),n),c.a.createElement(T,o()({onClick:s},k),a)))}r.d(t,"a",(function(){return U})),U.Dialog=u.a,U.Content=y,U.Title=_,U.Text=I,U.ActionSection=x,U.ConfirmButton=T,U.CancelButton=M},"Ai8/":function(e,t,r){e.exports={receivePromotionItem:"_3vJ9FSjm",buttonWrap:"_2Ku3jCrL",btn:"_3NnDip3N",isTakenOut:"_2av15sjf",hasNum:"_18Jh51Ik"}},BXy8:function(e,t,r){e.exports={"go-top":"_9wRQEN3q","top-button-hide":"_29NPvHYU","top-button-show":"_1mzWEyiw",container:"i3tFT5xs",mainContainer:"_1Pgx6eWp",title:"_1IwZeZUn",catalogTitle:"_ac67ckl",close:"_1G98piv9",highlight:"_3IJSwl5-",shield:"_2sz-EN1t",blockContainer:"_2PtXU0i7",block:"_1d56Yt92",blockMargin:"_2sqDMntk",slot:"PJa-xW5P",slotActive:"_15sflkmk",symptomSlot:"_1bsFLgbX",key:"_3ihTE7be",input:"bH4OaA1G",clearBtn:"_3k50PVrt",temperaturePlaceholder:"_3QGyvOxv",arrow:"adepBZB-",symptomOption:"_2i4pj9-I",selected:"VjZUTqhW",boolSlot:"_3cAT4pab",options:"_21R9m8_k",bottomBtn:"_1tCjXyKe",bottomBtnPadding:"_4Ismrpqv",bottomBtnContainer:"_3TvAbGYu",mask:"_18-xIezQ",selectIcon:"_2uzs2quH",confirm:"_2W0ddzSH",confirmUnselectedBtn:"_3tMYb5DW",confirmSelectedBtn:"_3jdRipwt",occupationTextContainer:"_3567K4BF",occupationText:"xFTeMrwe",catalog:"_1OvPTSAe",catalogText:"_1ZFOi09h",catalogContent:"M0G_eVMZ",catalogPaddingBottom:"_1F89q9Ly",catalogTable:"_12I0IW7C",catalogHeader:"_2_W1hy6Z",catalogRow:"_3UE8EyGQ",catalogItem:"hzB9k6wB",headerItem1:"_28HBqSS7",headerItem2:"wv2CtA2_",headerItem3:"_25GTTWhN",catalogItem1:"_4na2uvH4",catalogItem2:"_2PbDz-Iv",catalogItem3:"_3fYTxS9f"}},BiGR:function(e,t,r){var n=r("nmnc"),o=r("03A+"),a=r("Z0cm"),i=n?n.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},BkRI:function(e,t,r){var n=r("OBhP");e.exports=function(e){return n(e,5)}},Bogp:function(e,t,r){e.exports={promotionInfo:"_3pIv2nch",high:"_2MZwnMp0",titleDisplayName:"_2aH3Qrcl",hasDetail:"_1SiP3oki",detailShown:"_3jGbIh4K",timeDisplayName:"_37wENJkl",detail:"_19-MYscz",ruleDisplayName:"HoXaR_VH",gray:"Ml-9CzBA"}},Bp9Y:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default},CH3K:function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},CzHs:function(e,t,r){e.exports={ocRefresh:"_2Kk6J62f",netIcon:"_3WnRquCq",note:"XwtomzCr",refreshBtn:"_25FLs9De"}},DdEg:function(e,t,r){e.exports={payHint:"_1sASCkar",payText:"_3K83fiA_",bottom:"_3cXEe2-_",startHide:"XkonakPy",toHide:"_2dzzl3nE",startDisplay:"_2i6LRdfq",toDisplay:"G9AHJOfM"}},"Dw+G":function(e,t,r){var n=r("juv8"),o=r("mTTR");e.exports=function(e,t){return e&&n(t,o(t),e)}},DzJC:function(e,t,r){e.exports=r("EQ+b")("DzJC")},"E+oP":function(e,t,r){var n=r("A90E"),o=r("QqLw"),a=r("03A+"),i=r("Z0cm"),s=r("MMmD"),c=r("DSRE"),u=r("6sVZ"),l=r("c6wG"),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||l(e)||a(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!n(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},EEGq:function(e,t,r){var n=r("juv8"),o=r("oCl/");e.exports=function(e,t){return n(e,o(e),t)}},Em2t:function(e,t,r){var n=r("bahg"),o=r("quyA"),a=r("0JQy");e.exports=function(e){return o(e)?a(e):n(e)}},EwQA:function(e,t,r){var n=r("zZ0H");e.exports=function(e){return"function"==typeof e?e:n}},FIFS:function(e,t,r){},FZoo:function(e,t,r){var n=r("MrPd"),o=r("4uTw"),a=r("wJg7"),i=r("GoyQ"),s=r("9Nap");e.exports=function(e,t,r,c){if(!i(e))return e;for(var u=-1,l=(t=o(t,e)).length,d=l-1,p=e;null!=p&&++u<l;){var m=s(t[u]),f=r;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(u!=d){var h=p[m];void 0===(f=c?c(h,m,p):void 0)&&(f=i(h)?h:a(t[u+1])?[]:{})}n(p,m,f),p=p[m]}return e}},FfPP:function(e,t,r){var n=r("idmN"),o=r("hgQt");e.exports=function(e,t){return n(e,t,(function(t,r){return o(e,r)}))}},G6z8:function(e,t,r){var n=r("fR/l"),o=r("oCl/"),a=r("mTTR");e.exports=function(e){return n(e,a,o)}},G7xb:function(e,t,r){e.exports={skuSelectorCloseBtn:"ca4h-IAJ",skuSelectorBody:"_283aPR7a",safeDistance:"Fd9_BrZ5",skuSelectorContainer:"_3nm09z2v",skuSelectorTitleBar:"PY1t6RpZ",skuSelectorHeadContainer:"_2XiHO-fb",skuSelectorHead:"_3oYb1eF3",skuSelectorHeadRight:"_1KJfUbC-",skuSpecs:"_2VFFf5do",selectorNumber:"_3hptWyO7",sizeDesc:"_3jcgzD1i",skuSizeChartRed:"_3QmlGVyu",skuSpecsKey:"_2XbTuPaT",skuSpecValueList:"FkBrLB0v",hotSale:"_4tBXN2sQ",skuSpecValue:"_3dLL_oHX",hotSaleIcon:"_6XG3isQq",skuSpecValueSelected:"_1MhWfqip",skuSpecValueDisable:"_2BgYfOy2",skuSelectorInput:"_1nDpcwrJ",numberStepper:"_2bZCOrbb",skuSelectorReduce:"xxfw656X",skuSelectorReduceEnable:"_3zDXEDTd",skuSelectorReduceDisable:"_114gds5J",skuSelectorIncrease:"_3t4NDMyO",skuSelectorIncreaseEnable:"NYYDeLbf",skuSelectorIncreaseDisable:"_1BrJIVXX"}},GANf:function(e,t,r){e.exports={agreement:"G2lU7b_3"}},GftL:function(e,t,r){e.exports=r("EQ+b")("GftL")},Gi0A:function(e,t,r){var n=r("QqLw"),o=r("ExA7");e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},HCUW:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._2T3MNPwg,._14Av0e22{width:.99rem;height:.4rem;border-radius:.04rem;background-color:#f8f8f8;position:relative;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:center;justify-content:center;-webkit-justify-content:center;-webkit-box-align:center;align-items:center;-webkit-align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-flex-direction:column}._1ZwXP2oj._14Av0e22,._2T3MNPwg._1ZwXP2oj{height:.58rem}._14Av0e22{background-color:#fdf3f2}._14Av0e22._1ZwXP2oj{height:.58rem}._14Av0e22 ._298vxvdk{color:#fff;background-color:#e02e24}._298vxvdk{position:absolute;top:0;left:0;padding-left:.03rem;padding-right:.03rem;font-size:.1rem;background-color:#ebebeb;border-top-left-radius:.04rem;border-bottom-right-radius:.04rem}._3I5ESJjt,._298vxvdk,.mn2qKN_8,.Njggb0W3{color:#58595b;height:.12rem;line-height:.12rem}._3I5ESJjt,.mn2qKN_8,.Njggb0W3{font-size:.12rem;text-align:center;overflow:visible}.Njggb0W3{color:#e02e24}.mn2qKN_8{color:#9c9c9c}._2fIkar-1,._2imH6L-E,._3JvB3rx_{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.04rem;font-size:.12rem;text-align:center}._2fIkar-1{color:#e02e24}._3JvB3rx_{color:#9c9c9c}.pdd_payment_list_elder_mode ._2T3MNPwg,.pdd_payment_list_elder_mode ._14Av0e22{width:1.54rem;height:.58rem}.pdd_payment_list_elder_mode ._3I5ESJjt,.pdd_payment_list_elder_mode .mn2qKN_8,.pdd_payment_list_elder_mode .Njggb0W3{height:.16rem;font-size:.16rem;line-height:.16rem}.pdd_payment_list_elder_mode ._2fIkar-1,.pdd_payment_list_elder_mode ._2imH6L-E,.pdd_payment_list_elder_mode ._3JvB3rx_{height:.16rem;margin-top:.06rem;line-height:.16rem;font-size:.16rem}",""]),t.locals={installment:"_2T3MNPwg",selectedInstallment:"_14Av0e22",hasPromotionContent:"_1ZwXP2oj",promotionContent:"_298vxvdk",number:"_3I5ESJjt",selectedNumber:"Njggb0W3",disableNumber:"mn2qKN_8",money:"_2imH6L-E",selectedMoney:"_2fIkar-1",disableMoney:"_3JvB3rx_"}},HFEV:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,'.m5ozkA7a{position:absolute;width:.29rem;height:.29rem;right:-.145rem;background-size:100%;top:-.14rem;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAABXCAMAAABGFileAAAAZlBMVEVHcEzn5+fg4ODk5OTh4eHj4+Ph4eHh4eHg4ODp6enk5OTg4OD////w8PDi4uLh4eHh4eHg4ODg4ODg4ODg4ODg4ODg4ODg4OBmZmbV1dXa2tqDg4N5eXmwsLB/f39xcXHFxcVra2sMBscFAAAAF3RSTlMAH/wXzUuJ6vYPHJUDCGCRvcLc2aewO1l+nbIAAAH/SURBVHjatZnrboMwDEZDmquglK6XD9jo1vd/yVVoWrS1gEvzHfVfpSMrcoxjq2XiuXYnc/BBB38wJ1efo3qVrXVGY0SPvxFtnN2ul1b2GDBFONpqlXXjPObxbvO0tSgDlgll8ZQ1lhoydBnl2tpDjq+lR7DHc+xFh2E9nsXb5YTdYQ27hXSODdbRxNmcNViLmcnl4g3reSsmo03aVeKJiKPBa5j4MBMavErzKCt2eJ3dvdYiB/YuFTxy4P8nxR552P+rYMhF/SfFPHLho0qUyEeZtIVGPnRBCRcp4E1ATsLmx+uQF6dGKo+8+GrpBnfD0OMR/TB0S7f5OK39bNtL9+iPS9t+TouPY30MmGJob3x099qP9saAKcI2HcOkN4mRtPNe2Pls6C9JfKe99PMZYSAUy7UwSkUNoViuhY7qDAjFci1wXqy8/fuvOGnf+8Uq7ABhxPJoAadOgDRicbTASRmIxV9iLYw6QCxuxVoclIdYLNdqrwKkYrkWCEpDRHcdtdcOIjQrXtb5svKBlb+s+8aqD6x6xqq/rO8F6fvG+h6z+gdWv0Pqz1j9JKv/JfXrrPcF6T3Eer+R3pus9zHpPc+cP/DnJRVhvkOYRxHmZ4x5H2k+SZqnkua/tHk1f77O3wckKsL+grBvIeyHCPsswv6Nti+U7zcT4v0max/7DaMoFZeb5NVRAAAAAElFTkSuQmCC")}.m5ozkA7a:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAABXCAMAAABGFileAAAAZlBMVEVHcEzAwMDAwMDBwcHAwMDBwcHGxsbJycnBwcHAwMDAwMDDw8Pj4+PBwcHAwMDAwMDBwcHAwMDAwMDAwMDCwsLAwMAzMzO6urpVVVVQUFBISEiysrJLS0uIiIi0tLS2trY9PT2hoaGwqx6HAAAAFXRSTlMA9vzAzYkfDpTo2xcESPBRX6ewYjvU6eoOAAACHklEQVR42rWZ646CMBBGe4NSFLzxgaig+/4vucYlMauUDtA5/zlpmo92OiPC2OqUHE3uSlW63ByTU2XFWmyRGIVPlEmKFe5tcZDwIQ/FdpF1kzhM45LNbGuaSYSRWTpvWzMFGiqzdO3egY7bU7dAYx6atBm7EnMpd+FsZVhCFsic1ViGtpOZNViKmchymmM5eepdbY415J4VW4N1GDuaBI2VKD2WigzryUZ+B8Rg9xWFEjEoP0OhEQf9cYIhFvt/EXOIhbOeLETMRKoQD5V6lhttwRuJmMjN4E0Ql2Q4GBzi4rYvbwEvfdc1GKPpuh5eipf3AB/3R123Y9/3bV0//OKDeGIlfHT1k1v/rb3VTzr4kHbYBq93EH9pp70optPQnAfxmLZtphNh4Ofe/omveHMdtHf4MUJYhbD4cn1rL2EtlBUVQBTTtUAlTiCL6Vqcwj9xcx7Eb+25Cf/KR5DFdC2OwoAs/iFrYUQOsrgma5ELB7KYroUTEmQxXQspFEj0j5f20YOEEiXLekuu/eXKA1d+uf43rvOB7TyrAqsdP3/PAXFFuy9us+8L2v3W401Pud8C93G79D7mqh+46p3p+qxfWp9x1ZNc9S9Tvc71vmB6D3G935jem1zvY6b3PFP/gatfwtTfYepHsfTPoLdM/T6m/iRTP5Wp/8vUr2bqr/PMA5jmFzzzFqb5EM88i3P+xj8v5J9v0uexUkn6PPYXTJHpYOFmuFUAAAAASUVORK5CYII=")}.L5kWDKZ-{top:-.425rem;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAABXCAMAAABGFileAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABjUExURUdwTP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////zQsxRwAAAAgdFJOUwBM54kLzpQBnfwYIb8QYAT3299I8TVUe68+pmmGxyuNnJ7zzAAAArNJREFUeNq1mdmO4jAQRW8SOx5nJWwBejv//5WjVoTUQzd0AVPnCRHn6rrixK4q/U5/HKpDnMpt3pZTPFTDsdezhE0VM5fkWG2CHmbcnFZcY3XajHqEpirP7k7zftc2YQxNu9vPp/MMyqrRvbT1YjV+FEFSUkpJSp9IofiIi+m61T30dV4Mvesa78t0ct3LShpKgLci3R5WvAGUQzKGoAPojgYDx2WoKRj7LbAuZHGRVKyB7f7XgWMN5NcgK+E1A/X4y6gOWO90D7s10N100kTg0Os++gMQG12lnYBZ9zMDU3vV7QR50CMMGaYrjkOEVaHHKFYQw48roYNc6FGKDN2o79TAoMcZgFrf2AOznmEG9rqg3cJBz3GAbXsR3Q7WvZ6jX0OXLoOTd3qWXb54RH0Jr3qeVyj7f9fCOuh5wvqfNdFmKPQfSAXk9qvdTv+H7ovhZgVHXZCa+iXdNvdSN993EFid/63g7cf370+6Jfvnx/frDarl11j+GN0XFuEbsrzoGwWUoz7ZQJmu3HgWtl9NJWz0yQkqw63WaxWcJCms4N1ws1FW77AKSxiiYbLmEKUIm8X3hwzC1sjrY4lrhEIGYausCohSn8lBBmGrrEIm9zpClAzCVlkpwlEDnGQQtsvqBIMqmGURNstqhkoH2MskbJXVHg6KsJNN2CirHURN0MombJRVC5NKaGQTnmyyqYFSWwiyCdtkpQBbZRhlIE3AlGRghOzl1yG+aqD0Wg8O6zftIHq9bw7fhzRD5fU98/r+eu0XTvub137sdX7wOu84nc+8zpNe51+n87pXfnEzH0oP50Ne+ZtTvumVHzvl8171B6d6iW99x78eJYf6mUO9z6E+6VRP9a//+terJYf6+kU/wMS5H+DUv3Dst/j3h+z9rAsM/SyH/ptHv9C/v+nVj/0LAPh9AiWQeMwAAAAASUVORK5CYII=")}.L5kWDKZ-:active{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAABXCAMAAABGFileAAAAV1BMVEX///////////////////////////9HcEz///////////////////////////////////////////////////////////////////////////////////8pF4XJAAAAHXRSTlN/RRJ8TwcnAIABSjFuDGBocxxlAnhUIj1XU7+nhdFnlMwAAALNSURBVHjatdnnjtswEIXRj+KSV1Qvblve/zkDREkWGxeOC+8vwbIOZNoWyRmUTZhbd1q6acdu6paTa+egbMiYB7dwnsUdwuPuGveea/H7uD7k9m5iy/h+jHPVhzX01RyP7yNbJtff7VaN30wXg6SUtpe3oxDdZvumussNDdsNVbqSVLlpk4PZTe0EsMSklK7CSnEBmNpkc6sBYDgon8P21srixh3QRdkSO2AXs+7aAN4FWROcB5r1thsGoJt1T+YOGMIttx+BU9B9CSdg7K+7VQccdX+OQFddc/sOaPVIWqDrL7thBB/1WKKHMVxy1wGIejQRGNYLbpMZBMtQNOduzHxlti8v/u9WOzjpuZxgV/100wBdeNINHQzph9uCn/VsZg+tvt0UJnB6Pg6m8O2qyY6CfSSab7cCol6RCL765zYw6DUZoPnr9h7OZofUN226Saxt05/PIOD7P66DRWdp6vrtFpze6rrRWRZwm7tOEC9MnvUG32Dr9uIIT6vEdnTh+vXtFpyunU3bXSLtwWUvtZ9zsJdQ8FDlLrazqsAHoQOM2Q9rZ1Ma4SDkwCkD21lpA9ECUVnYzirCIgIQlIXtrH6LzDBKWdjOSiPMtPAuA2xn9Q4tDo6ywGZWR3CcIMoEW1lFOLHALBtsZNMMCx1UssE2VqqgY4JeNvjLxqqHCQ9BJvjz49PEKoAHWGWBvz4+Pr4srFaAXZH73ZUa31K/hwK/X82wFPu/OeoXPx/WI7gSz7M9tKWev6Xmi0LzW6n5+PXrB2mEQ6n1zuvXZ8nB/tZ6Mj2xniy1/i20Xi+1v8jsh7ITemY/VGD/Vna/qb7A/rjAfr5I/aFQvaRQfadQPapU/axQva9QfbJQPbVQ/bdQvbpQfb1MP6Bs/8Leb7mRu/stUrL3h2jCI/2seutn/czPflYq0X97sl9Y18D3YaZfWLS/ae/Hery9H/sLYLTL7nTCK5EAAAAASUVORK5CYII=")}',""]),t.locals={root:"m5ozkA7a",hollow:"L5kWDKZ-"}},HNyE:function(e,t,r){e.exports={container:"_2Ny6Bvgd",icon:"_2uzDwPP4",title:"caBUfFXg",dot:"_2NOQtQGO",dot1:"R9za4ygw",dot2:"vWabkAUi",dot3:"_2M_gZteX","loading-template-v2-dot1":"_1Vn2jmNY","loading-template-v2-dot3":"_rYxdl4y","loading-template-v2-dot2":"_75vPQyHx"}},HOxn:function(e,t,r){var n=r("Cwc5")(r("Kz5y"),"Promise");e.exports=n},JZM8:function(e,t,r){var n=r("FfPP"),o=r("xs/l")((function(e,t){return null==e?{}:n(e,t)}));e.exports=o},JiL4:function(e,t,r){e.exports={promotionCell:"_ts7NNxg",promotionCellActive:"_3CQUG7Zj",stripe:"t5y6S3ui",desc:"qSsXm1rW",hasArrow:"_3X6xzQPn",red:"_1S0Qqpcc",displayItem:"tUFs3O2Q",bubble:"g07iV4XU",promotion3:"_37lfnv2E"}},Juji:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},KJF0:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return c.default}});var o=n(r("rRnn")),a=n(r("7HEc")),i=n(r("UlPe")),s=n(r("8SQk")),c=n(r("5HhQ"))},KZJt:function(e,t,r){e.exports={displayItem:"_11VJ2k3s",bubble:"YodO_ZM0",promotion3:"_2mxSl1aQ"}},KxBF:function(e,t){e.exports=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}},"L/R6":function(e,t,r){e.exports={container:"_3-rSWiHc",icon:"raHIMvRi",title:"eIbWbqkK"}},LJxE:function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return d}));var n,o=r("lSNA"),a=r.n(o),i=r("KoDT"),s=(n={},a()(n,i.PLATFORM.PddAndroid,"3"),a()(n,i.PLATFORM.PddIOS,"5"),a()(n,i.PLATFORM.PDDTinyAndorid,"59"),a()(n,"LITE","33"),n),c="138",u="pinduoduo",l="pdd_user_id",d="0.1.2-rc.1"},LUTn:function(e,t,r){"use strict";var n=r("QILm"),o=r.n(n),a=r("NYpQ");t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.groupConfig,n=function(){var t=[];e.mutipleKvList.forEach((function(e){var r=e.tags,n=r.groupId,a=o()(r,["groupId"]);t.push({groupId:n,tags:a,fields:e.fields,longFields:e.longFields})})),Object(a.a)(t,r)};n()}},LXxW:function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[o++]=i)}return a}},LkFk:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._3iD6Ocgx{position:relative;z-index:0}._2BOB1BlW{display:inline-block;vertical-align:top;position:relative;left:-2px}._2BOB1BlW:last-child{margin-right:-2px}._2BOB1BlW:first-child{left:0;margin-right:0}",""]),t.locals={root:"_3iD6Ocgx",avatar:"_2BOB1BlW"}},LrBD:function(e,t,r){e.exports={disablePromotionItem:"_6PVJ16lr",disableWrap:"_2eg0HQDk"}},LuAP:function(e,t,r){},LzYn:function(e,t,r){var n=r("Njgl"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"MVQ+":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n,o=r("pVnL"),a=r.n(o),i=r("QILm"),s=r.n(i),c=r("q1tI"),u=r.n(c),l=r("91HH"),d=r("9qmp");function p(e){e&&e(),n&&n(),n=null}function m(e){var t=e.onConfirm,r=e.onCancel,o=e.onClose,i=s()(e,["onConfirm","onCancel","onClose"]);return n&&n(),n=Object(l.renderPopup)(u.a.createElement(d.a,a()({DialogProps:{ControllerProps:{PortalComponent:null}},onConfirm:p.bind(this,t),onCancel:r&&p.bind(this,r),onClose:p.bind(this,o)},i)))}},MvSz:function(e,t,r){var n=r("LXxW"),o=r("0ycA"),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(e){return null==e?[]:(e=Object(e),n(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=s},NYpQ:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("h7Yj"),o=r("LJxE"),a=r("7Aih"),i=r("gNBk");function s(){return i.a.isNativePlatform?i.a.isLiteNativePlatform?o.e.LITE:o.e[i.a.platform]||"-1":"-1"}var c={appId:"",bizSide:""};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,u=Math.pow(10,5)+Math.floor(Math.random()*(Math.pow(10,6)-Math.pow(10,5))),l=Date.now();return{version:r?0:Object(a.c)(i.a.version),report_time_ms:l,rand_num:u,crc32:Object(n.crc32)(l+"-"+u),biz_side:t.bizSide||c.bizSide||o.b,app:String(t.appId||c.appId||o.a),common_tags:{uid:Object(n.getCookie)(o.d)||"0",runningAppId:s()},datas:e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(e.length){var o=u(e,r,n);0,Object(i.f)(t,o)}}var d=Object(n.memoize)((function(e){var t=window.location.protocol,r="amcomponent:"===t?"https:":t,n=window.__PMM_HOST__||"pmmtk.pinduoduo.com";return"".concat(r,"//").concat(n,"/").concat(e)}));function p(e,t){return Object.keys(e).reduce((function(r,n){return t(r,n,e[n]),r}),{})}function m(e){return void 0===e?e:String(e)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Array.isArray(e)||(e=[e]);var n=[];e.forEach((function(e){var t=e.groupId,r=e.amplifyRate,o=void 0===r?1:r,a=e.tags,i=void 0===a?{}:a,s=e.fields,c=void 0===s?{}:s,u=e.longFields,l=void 0===u?{}:u;if(t){var d=p(i,(function(e,t,r){return e["custom_".concat(t)]=m(r)})),f=p(l,(function(e,t,r){return e[t]={values:[parseInt(r,10)||0]}})),h=p(c,(function(e,t,r){return e[t]=m(r)})),v={category:4,type:400,id_raw_value:String(t),timestamp:Date.now(),tags:d,lvalues:f,extras:h,api_ratio:o};n.push(v)}})),l(n,d("api/pmm/defined"),t,r)}},Njgl:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,".wAJ12ZbP{position:relative;width:100%;background-color:#fff}",""]),t.locals={payment:"wAJ12ZbP"}},OBhP:function(e,t,r){var n=r("fmRc"),o=r("gFfm"),a=r("MrPd"),i=r("WwFo"),s=r("Dw+G"),c=r("5Tg0"),u=r("Q1l4"),l=r("VOtZ"),d=r("EEGq"),p=r("qZTm"),m=r("G6z8"),f=r("QqLw"),h=r("yHx3"),v=r("wrZu"),y=r("+iFO"),g=r("Z0cm"),b=r("DSRE"),_=r("zEVN"),k=r("GoyQ"),S=r("1+5i"),I=r("7GkX"),w=r("mTTR"),P="[object Arguments]",O="[object Function]",C="[object Object]",x={};x[P]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object DataView]"]=x["[object Boolean]"]=x["[object Date]"]=x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Map]"]=x["[object Number]"]=x[C]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object Symbol]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x["[object Error]"]=x[O]=x["[object WeakMap]"]=!1,e.exports=function e(t,r,E,D,N,T){var j,A=1&r,R=2&r,M=4&r;if(E&&(j=N?E(t,D,N,T):E(t)),void 0!==j)return j;if(!k(t))return t;var L=g(t);if(L){if(j=h(t),!A)return u(t,j)}else{var B=f(t),F=B==O||"[object GeneratorFunction]"==B;if(b(t))return c(t,A);if(B==C||B==P||F&&!N){if(j=R||F?{}:y(t),!A)return R?d(t,s(j,t)):l(t,i(j,t))}else{if(!x[B])return N?t:{};j=v(t,B,A)}}T||(T=new n);var U=T.get(t);if(U)return U;T.set(t,j),S(t)?t.forEach((function(n){j.add(e(n,r,E,n,t,T))})):_(t)&&t.forEach((function(n,o){j.set(o,e(n,r,E,o,t,T))}));var H=L?void 0:(M?R?m:p:R?w:I)(t);return o(H||t,(function(n,o){H&&(n=t[o=n]),a(j,o,e(n,r,E,o,t,T))})),j}},OIse:function(e,t,r){},OUj1:function(e,t,r){var n=r("HCUW"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"Of+w":function(e,t,r){var n=r("Cwc5")(r("Kz5y"),"WeakMap");e.exports=n},"PB+Z":function(e,t,r){var n=r("kQkh"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},PlGL:function(e,t,r){"use strict";var n=r("pVnL"),o=r.n(n),a=r("q1tI"),i=r.n(a),s=(r("17x9"),r("QILm")),c=r.n(s),u=r("TSYQ"),l=r.n(u),d=r("91HH"),p=r("eskz"),m=r.n(p);var f=Object(d.withStyles)(m.a)((function(e){var t=e.className,r=c()(e,["className"]);return i.a.createElement("div",o()({},r,{className:l()(t,m.a.root)}))})),h=r("+wjZ"),v=r.n(h);var y=Object(d.withStyles)(v.a)((function(e){var t=e.className,r=c()(e,["className"]);return i.a.createElement("div",o()({},r,{className:l()(v.a.root,t)}))})),g=r("xZuf"),b=r.n(g);var _=Object(d.withStyles)(b.a)((function(e){var t=e.className,r=c()(e,["className"]);return i.a.createElement("div",o()({},r,{className:l()(b.a.root,t)}))})),k=r("lSNA"),S=r.n(k),I=r("fI1f"),w=r.n(I);function P(e){var t=e.className,r=e.type,n=c()(e,["className","type"]);return i.a.createElement("div",o()({},n,{className:l()(t,w.a.root,S()({},w.a.hollow,"hollow"===r),"icon"),role:"button","aria-label":"关闭按钮"}))}P.defaultProps={type:"solid"};var O=Object(d.withStyles)(w.a)(P),C=r("h7Yj");function x(e){Object(a.useEffect)((function(){return e.shouldDisableBodyScroll&&Object(C.disableScroll)(),function(){e.shouldDisableBodyScroll&&Object(C.enableScroll)()}}),[e.shouldDisableBodyScroll]);var t=e.children,r=e.PortalComponent,n=e.PortalComponentProps;return r?i.a.createElement(r,n,t):t}function E(e){var t=e.ControllerProps,r=e.ContainerProps,n=e.BackdropProps,a=e.BaseDialogProps,s=e.style,c=e.className;return i.a.createElement(x,t,i.a.createElement(_,r,i.a.createElement(f,n),i.a.createElement(y,o()({style:s,className:c},a),e.children)))}x.defaultProps={PortalComponent:d.Portal,shouldDisableBodyScroll:!0},r.d(t,"a",(function(){return E})),E.Controller=x,E.Container=_,E.Backdrop=f,E.BaseDialog=y,E.CloseButton=O},PtqM:function(e,t,r){var n=r("NykK"),o=r("ExA7"),a=r("YO3V");e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!a(e)}},"Q/gu":function(e,t,r){var n=r("LkFk"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},QROL:function(e,t,r){},QqLw:function(e,t,r){var n=r("tadb"),o=r("ebwN"),a=r("HOxn"),i=r("yGk4"),s=r("Of+w"),c=r("NykK"),u=r("3Fdi"),l="[object Map]",d="[object Promise]",p="[object Set]",m="[object WeakMap]",f="[object DataView]",h=u(n),v=u(o),y=u(a),g=u(i),b=u(s),_=c;(n&&_(new n(new ArrayBuffer(1)))!=f||o&&_(new o)!=l||a&&_(a.resolve())!=d||i&&_(new i)!=p||s&&_(new s)!=m)&&(_=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case h:return f;case v:return l;case y:return d;case g:return p;case b:return m}return t}),e.exports=_},RUUx:function(e,t,r){e.exports={cartBg:"j8DQFC9U",cartManagerModal:"u7LZBXUv"}},Rc36:function(e,t,r){e.exports=r("EQ+b")("Rc36")},SOyx:function(e,t,r){e.exports={modalCartSku:"_3OiG9sSU",titleCartSku:"_2uBzkCV1"}},SSwK:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,".jPB1u7d8{z-index:11000;position:fixed;top:0;bottom:0;left:0;right:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}",""]),t.locals={root:"jPB1u7d8"}},SeBp:function(e,t,r){e.exports={selectIcon:"_19uMAlci",disable:"_1kUzOaLf",selected:"tEKvOe46"}},SzcP:function(e,t,r){e.exports={"go-top":"_23sjf2-g","top-button-hide":"_1Gy_mjzz","top-button-show":"_2hYAwwGF",container:"_3R-1_eSn",picker:"_2CHHBQpW",showPicker:"_1b6vzgEQ",mask:"_2HeJzU-8",panel:"_3lv7iolB",close:"_3vCfpVTD",closeIcon:"_pDK5P8S",content:"_2QDfZ3Gd",maskBottom:"_2WdZbFoo",maskTop:"_19vTsRkW",wrapper:"_1Paw4lTJ",scrollWrap:"_2ZGlyve6",bottomBtn:"_1ZftFGyL"}},TKrE:function(e,t,r){var n=r("qRkn"),o=r("dt0z"),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=o(e))&&e.replace(a,n).replace(i,"")}},TWHF:function(e,t,r){var n=r("/iyY"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},TYy9:function(e,t,r){var n=r("XGnz");e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},TqRt:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},UH3G:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,".A9DIVMHH{line-height:.21rem;font-size:.14rem;color:#58595b;text-align:center;margin-top:.04rem}",""]),t.locals={root:"A9DIVMHH"}},UlPe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},"V/7h":function(e,t,r){e.exports={disableList:"_3Pya_Q_H",displayList:"_14lOykl1",displayTitle:"_2496hhou",skuList:"_2hWJ3MhR",skuBox:"GlSkMB0Y"}},V00b:function(e,t,r){e.exports={bgFill:"_3j1eCmw1",bgFillShow:"_2jUnI3MZ",container:"_1jhs4MN9",visibleContainer:"_3h5sA_T5"}},VERM:function(e,t,r){e.exports={modal:"_2i8YYhhK",noShow:"_2WyLr0L_",title:"_1xwgckgQ"}},VOtZ:function(e,t,r){var n=r("juv8"),o=r("MvSz");e.exports=function(e,t){return n(e,o(e),t)}},W1oA:function(e,t,r){"use strict";var n=r("KoDT"),o=r("3VHQ"),a=r("h7Yj"),i=r("lSNA"),s=r.n(i),c=r("J4zp"),u=r.n(c),l=r("q1tI"),d=r.n(l),p=r("7VIw"),m=r.n(p),f=r("i8i4"),h=r.n(f),v=function(e){var t,r=e.index,n=e.height,o=e.width,i=e.imageList,c=e.onClose,p=Object(l.useState)(+r||0),f=u()(p,2),h=f[0],v=f[1];Object(l.useEffect)((function(){return Object(a.disableScroll)(),function(){Object(a.enableScroll)()}}),[i,r]);var y=i.map((function(e,t){return d.a.createElement("div",{key:t,style:{background:'center no-repeat url("'.concat(Object(a.forceHttps)(e),'")'),backgroundSize:"contain",height:n,width:o}})}));return d.a.createElement("div",{style:(t={position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:9999999,background:"#000",display:"flex"},s()(t,"display","-webkit-flex"),s()(t,"justifyContent","center"),s()(t,"WebkitJustifyContent","center"),s()(t,"WebkitAlignItems","center"),s()(t,"alignItems","center"),t),onClick:c},d.a.createElement(m.a,{enableMouseEvents:!0,index:h,onChangeIndex:function(e){v(e)}},y))};function y(e,t,r){if(r=r||{},e=Object(a.forceHttps)(e),t&&(t=t.map((function(e){return Object(a.forceHttps)(e)}))),Object(n.getCurrentPlatform)().isNativePlatform){var i=r,s=i.viewAttri,c=i.showIndexBar,u=void 0===c||c,l=i.comeInAnim,p=i.exitOutAnim,m=i.hybridPhotoBrowser,f=i.longImageOptimizeInIphonex;null==t&&(t=[e]);var y=t.indexOf(e);y<0&&(y=0);var g=t.map((function(e){return{url:e}}));Object(o.invokeBridgeCallNativeFun)("JSNavigation","modal",{type:"photo_browse",props:{browse_items:g,view_attri:s,show_index_bar:u,current_index:y,come_in_anim:l,exit_out_anim:p,hybrid_photo_browser:m,long_image_optimize_in_iphonex:f},navigation_bar:{hidden:!0}})}else{var b,_=r.ViewNotWechatInteraface||!1;if(t=t||[e],b=!(!window.wx||!window.wx.previewImage),Object(n.getCurrentPlatform)().isWechatPlatform&&b&&!_)window.wx.previewImage({urls:t,current:e});else!function(e,t){var r=document.createElement("div");document.body.appendChild(r),h.a.render(d.a.createElement(v,{height:window.innerHeight+"px",width:window.innerWidth+"px",imageList:t,index:t.indexOf(e),onClose:function(){setTimeout((function(){h.a.unmountComponentAtNode(r),document.body.removeChild(r),r=null}),0)}}),r)}(e,t)}}r.d(t,"a",(function(){return y}))},"Wgq/":function(e,t,r){e.exports={discountInfo:"_27MZO91g",high:"_9HvfBBpv",discount:"_3wQ6ZDfo",gray:"_2w62lplT",discountIcon:"_3p8fGD4W",percentIcon:"_3RyZUrcl",small:"ccWKI06_",promotionName:"_2oaHBazH"}},Wr5u:function(e,t,r){e.exports={skuSelectorDesc:"_2HvLhENT",oneLineStyle:"_2dRWBKFY",skuSelectorDescOC:"_39U91H6w",skuSelectorDescWithIcon:"_3BrHKXok",transparent:"_3O6E7nkD",skuPreSaleIcon:"_2lxyP0wq"}},WwFo:function(e,t,r){var n=r("juv8"),o=r("7GkX");e.exports=function(e,t){return e&&n(t,o(t),e)}},XEGP:function(e,t,r){e.exports={deliveryStripe:"_3Lu5zWI4",shippingContent:"_1e3OviBJ",mainTitle:"_3G1LZKm9",subTitle:"_3kee_7lX",deliverySvg:"_3x5EVMK4",arrow:"_3DDAx0Ee",AdditionalShippingStrip:"_39T3oEvF",title:"_3bhF_DMD",closeBtn:"_3mXZPB3T",deliveryItem:"_3XsDhB5u",mainTitleFloat:"_1f74n2A5",subTitleFloat:"_3v6hXyKn",selectedSvg:"_339ExKII",notSelectedSvg:"ZKKf3N_O"}},XGnz:function(e,t,r){var n=r("CH3K"),o=r("BiGR");e.exports=function e(t,r,a,i,s){var c=-1,u=t.length;for(a||(a=o),s||(s=[]);++c<u;){var l=t[c];r>0&&a(l)?r>1?e(l,r-1,a,i,s):n(s,l):i||(s[s.length]=l)}return s}},XYm9:function(e,t,r){var n=r("+K+b");e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},XkPr:function(e,t,r){},YNjT:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._1gleTZu3,.YzrsYunx,.Z_PzP4Uo{position:absolute;height:.4rem;top:.48rem;left:.44rem;right:0;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.pdd_payment_list_v2_mode ._1gleTZu3,.pdd_payment_list_v2_mode .YzrsYunx,.pdd_payment_list_v2_mode .Z_PzP4Uo{top:.5rem}.Z_PzP4Uo{height:1.38rem}._1gleTZu3,.Z_PzP4Uo{top:.56rem;padding-bottom:.02rem}._1gleTZu3{height:.7rem}.urc_w4Av{margin-right:.1rem}",""]),t.locals={hbInstallmentList:"YzrsYunx",hbInstallmentList4Elder:"Z_PzP4Uo",hbInstallmentList2Elder:"_1gleTZu3",installmentContainer:"urc_w4Av"}},YU58:function(e,t,r){e.exports={deviceInfo:"_13fhqxBC",deviceImg:"_3oSwltb8",info:"Oe3L5wCG",name:"_1Z6mhfm8",changeText:"_3auFT0Zy",tag:"_3d7o5fl4",bottomTag:"_2bbfX2qF",specsInfo:"TthbJIka",spec:"pOFmSAUi",arrow:"_3yb3MT2G",subTitle:"IkpdgxuC",deduce:"_1TrGdl9T",note:"_304Co_ln"}},YVoc:function(e,t,r){e.exports={skuSelectorBg:"lSznZClW",cartManagerBg:"_5jJkKh69"}},Yd5u:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._3W0iZ9uG{position:relative;-webkit-animation:_2-3BqKpw .2s;animation:_2-3BqKpw .2s;-webkit-animation-fill-mode:both;animation-fill-mode:both;border-radius:.08rem;width:2.9rem;background-color:#fff;z-index:11000}@-webkit-keyframes _2-3BqKpw{0%{-webkit-transform:scale(.6);transform:scale(.6);opacity:.5}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes _2-3BqKpw{0%{-webkit-transform:scale(.6);transform:scale(.6);opacity:.5}to{-webkit-transform:scale(1);transform:scale(1);opacity:1}}",""]),t.locals={root:"_3W0iZ9uG",zoomIn:"_2-3BqKpw"}},Z4L4:function(e,t,r){e.exports={selectIcon:"_2empebN8"}},Z5Jv:function(e,t,r){e.exports={container:"_33WUFKX4",content:"_2Fc7-FXx",spec:"_35HYDrTV",specItem:"_1zK3AMSr",button:"_12_7YmXo"}},ZK0Z:function(e,t,r){e.exports={container:"U8gvTD0e",content:"_1PmgDBdY"}},ZL4E:function(e,t,r){e.exports={skuPreSaleTip:"_2Jgdp4Dm",skuGroupBuyContainer:"LCYzdatu",startHide:"_3z21bZmw",skuGroupBuyTipHide:"_7RteKTw",skuGroupBuyAvatars:"_3kdNKhVk",skuGroupBuyHint:"y1SmezJx",skuGroupBuyHintBtn:"_3qjr7l3Z"}},ZU3N:function(e,t,r){"use strict";r.r(t);var n=r("lSNA"),o=r.n(n),a=r("o0o1"),i=r.n(a),s=r("yXPU"),c=r.n(s),u=r("lwsE"),l=r.n(u),d=r("W8MJ"),p=r.n(d),m=r("7W2i"),f=r.n(m),h=r("a1gu"),v=r.n(h),y=r("Nsbk"),g=r.n(y),b=r("BkRI"),_=r.n(b),k=r("mwIZ"),S=r.n(k),I=r("q1tI"),w=r.n(I),P=r("h7Yj"),O=(r("17x9"),r("eHaf")),C=r("QILm"),x=r.n(C),E=r("J4zp"),D=r.n(E),N=r("VERM"),T=r.n(N),j=r("TSYQ"),A=r.n(j),R=r("+vUh"),M=r.n(R),L=function(){return w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5430",width:"200",height:"200"},w.a.createElement("path",{d:"M292.7001 1023.997654c-14.55529 0-29.11058-5.555875-40.222331-16.666452-22.222327-22.222327-22.222327-58.241099 0-80.444661l414.646321-414.64632-415.145962-415.128369c-22.222327-22.203561-22.222327-58.222333 0-80.444661s58.222333-22.222327 80.44466 0l428.554188 428.535422c36.944165 36.981696 36.944165 97.111113 0.037532 134.074043L332.92243 1007.331202c-11.11175 11.11175-25.66704 16.666452-40.22233 16.666452z","p-id":"5431"}))},B=function(){return w.a.createElement("svg",{width:"10",height:"16",viewBox:"0 0 10 16",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M8.265 15.5a.833.833 0 0 0 .59-1.423L2.78 8.004l6.081-6.081A.833.833 0 1 0 7.684.744L1.406 7.022a1.391 1.391 0 0 0 0 1.964l6.27 6.27a.83.83 0 0 0 .59.244z",fill:"#000",fillRule:"nonzero",stroke:"#000",strokeWidth:".5",opacity:".15"}))},F=function(){return w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4346",width:"200",height:"200"},w.a.createElement("path",{d:"M349.184 279.04v-46.592H230.912c-28.16 0-54.784 12.8-72.704 34.816L67.072 393.216c-13.312 16.384-20.48 36.864-20.48 58.368v269.824c0 42.496 28.672 78.848 68.096 89.6l12.8-45.056c-19.968-5.632-33.792-24.064-33.792-45.056V451.584c0-10.752 3.584-20.992 10.24-29.184l92.672-127.488c7.68-9.216 20.992-15.872 34.816-15.872h117.76z","p-id":"4347"}),w.a.createElement("path",{d:"M93.184 512h186.368c51.2 0 93.184-41.472 93.184-93.184V186.368c0-25.6 20.992-46.592 46.592-46.592h465.408c25.6 0 46.592 20.992 46.592 46.592v535.04c0 20.48-13.312 38.4-32.256 44.544l14.336 44.544c37.376-11.776 65.024-47.104 65.024-88.576V186.368c0-51.2-41.472-93.184-93.184-93.184H418.816c-51.2 0-93.184 41.472-93.184 93.184v232.96c0 25.6-20.992 46.592-46.592 46.592H93.184v46.08zM442.368 768h139.776v46.592H442.368zM279.04 884.224c38.4 0 69.632-31.232 69.632-69.632s-31.232-69.632-69.632-69.632-69.632 31.232-69.632 69.632 31.232 69.632 69.632 69.632z m0 46.592c-64.512 0-116.224-52.224-116.224-116.224 0-64.512 52.224-116.224 116.224-116.224s116.224 52.224 116.224 116.224c0.512 64-51.712 116.224-116.224 116.224z","p-id":"4348"}),w.a.createElement("path",{d:"M744.96 884.224c38.4 0 69.632-31.232 69.632-69.632s-31.232-69.632-69.632-69.632-69.632 31.232-69.632 69.632c-0.512 38.4 30.72 69.632 69.632 69.632z m0 46.592c-64.512 0-116.224-52.224-116.224-116.224 0-64.512 52.224-116.224 116.224-116.224s116.224 52.224 116.224 116.224-52.224 116.224-116.224 116.224z","p-id":"4349"}))},U=function(e){var t=e.className,r=e.onClick;return w.a.createElement("div",{role:"button","aria-label":"关闭谈窗",className:A()(M.a.icon,t),onClick:r},w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5299",width:"200",height:"200"},w.a.createElement("path",{d:"M624.10827 511.996481l375.931278-373.359185c31.939451-31.720125 31.939451-83.127957 0-114.848082-31.940624-31.720125-83.705006-31.720125-115.64563 0l-372.396264 369.828863L139.600218 23.789214c-31.939451-31.720125-83.705006-31.720125-115.644457 0s-31.939451 83.127957 0 114.848082l375.931277 373.359185L23.955761 885.355667c-31.939451 31.720125-31.939451 83.127957 0 114.848082 15.969725 15.859476 36.895977 23.790387 57.822229 23.790387s41.852503-7.929738 57.822228-23.790387l372.397436-369.828863 372.397436 369.828863c15.969725 15.859476 36.895977 23.790387 57.822229 23.790387s41.852503-7.929738 57.822229-23.790387c31.939451-31.720125 31.939451-83.127957 0-114.848082L624.10827 511.996481z","p-id":"5300"})))},H=function(e){var t=e.className,r=e.onClick;return w.a.createElement("div",{className:A()(M.a.icon,M.a.back,t),onClick:r},w.a.createElement(B,null))},V=function(){return w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},w.a.createElement("path",{d:"M512 950c241.9 0 438-196.1 438-438S753.9 74 512 74 74 270.1 74 512s196.1 438 438 438zm0 73C229.8 1023 1 794.2 1 512S229.8 1 512 1s511 228.8 511 511-228.8 511-511 511zm-54.8-277.9c0 30.2 24.5 54.8 54.8 54.8 30.2 0 54.8-24.5 54.8-54.8 0-30.2-24.5-54.8-54.8-54.8-30.2.1-54.8 24.6-54.8 54.8z"}),w.a.createElement("path",{d:"M512.2 634.9c-14.6 0-26.4-12.6-26.4-28.1v-47.5c0-46 32.9-81.1 62-112.1 21.3-22.7 43.4-46.3 43.4-65 0-46.8-35.5-84.9-79.1-84.9-44.3 0-79.1 36.5-79.1 83.1 0 15.5-11.8 28.1-26.4 28.1-14.6 0-26.4-12.6-26.4-28.1 0-76.8 59.1-139.2 131.8-139.2s131.8 63.4 131.8 141.2c0 42.1-30 73.9-58.8 104.8-23 24.4-46.6 49.6-46.6 72.3V607c.2 15.3-11.6 27.9-26.2 27.9z"}),w.a.createElement("path",{d:"M512.2 642.9c-19 0-34.4-16.2-34.4-36.1v-47.5c0-49.2 34-85.5 64.1-117.5l.1-.1c19.3-20.6 41.2-43.9 41.2-59.5 0-42.4-31.9-76.9-71.1-76.9-39.9 0-71.1 33-71.1 75.1 0 19.9-15.4 36.1-34.4 36.1s-34.4-16.2-34.4-36.1c0-81.2 62.7-147.2 139.8-147.2 77.1 0 139.8 66.9 139.8 149.2 0 45-30.6 77.8-60.3 109.6l-.8.8c-21.8 23.2-44.3 47.2-44.3 66.7V607c.1 9.7-3.6 19.2-10.3 25.9-6.4 6.4-14.9 10-23.9 10zm-.1-353.7c48 0 87.1 41.7 87.1 92.9 0 21.9-23.2 46.6-45.6 70.4-28.1 30-59.8 63.8-59.8 106.7v47.5c0 11.1 8.3 20.1 18.4 20.1 4.6 0 9.1-1.9 12.4-5.3 3.7-3.8 5.8-9.1 5.7-14.5v-47.6c0-25.9 24.7-52.2 48.6-77.6l.7-.8c27.5-29.5 56-60 56-98.7 0-73.4-55.5-133.2-123.8-133.2-68.2 0-123.8 58.9-123.8 131.2 0 11.1 8.3 20.1 18.4 20.1 10.1 0 18.4-9 18.4-20.1.2-51.1 38.5-91.1 87.3-91.1z"}))},z=function(){return w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"72737",width:"200",height:"200"},w.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m219.648 307.2l-287.118222 320.398222-122.936889-123.050666L256 570.026667l192.284444 192.398222 352.483556-393.386667L731.648 307.2z","p-id":"72738"}))},W=function(){return w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"72872",width:"200",height:"200"},w.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2z m0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z","p-id":"72873"}))};function Q(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={enter:"translateX(0)",exit:"translateX(-100%)",exitToInit:"translateX(100%)"},Y={enter:"translateY(0)",exit:"translateY(100%)",exitToInit:"translateY(100%)"},X=w.a.forwardRef((function(e,t){var r=e.modalStyle,n=e.modalClassName,o=e.titleClassName,a=e.renderTitle,i=e.renderBack,s=e.renderContent,c=e.onClose,u=e.onBack,l=e.direction,d=void 0===l?"x":l,p=e.afterShow,m=e.initShow,f=e.onClick,h=Object(I.useRef)(),v=Object(I.useState)(m),y=D()(v,2),g=y[0],b=y[1],_="x"===d?G:Y;Object(I.useEffect)((function(){p&&p(g)}),[g]);var k=function(){h.current.classList.add(T.a.noShow)},S=function(){h.current.classList.remove(T.a.noShow)},P=function(e){var t=h.current.style;t.transform&&(t.transform=e),t.webkitTransform&&(t.webkitTransform=e)};Object(I.useImperativeHandle)(t,(function(){return{show:function(){k(),P(_.enter),b(!1),setTimeout((function(){S(),b(!0)}),0)},enter:function(){S(),b(!1),setTimeout((function(){b(!0),P(_.enter)}),16)},enterFromRight:function(){k(),P(_.exitToInit),b(!1),setTimeout((function(){S(),setTimeout((function(){b(!0),P(_.enter)}),16)}),0)},exit:function(){P(_.exit),b(!1)},exitToRight:function(){P(_.exitToInit),b(!1)},hide:function(){k(),b(!1)},isShow:function(){return g}}}));var O=w.a.createElement(H,{onClick:u}),C=m?_.enter:_.exitToInit,x={transform:C,WebkitTransform:C};return w.a.createElement("div",{ref:h,onTransitionEnd:function(){g||k()},style:q(q({},x),r),className:A()(T.a.modal,n,{}),onClick:function(e){e.stopPropagation(),f&&f()}},a&&w.a.createElement("div",{className:A()(T.a.title,o)},!!u&&(i?i(O):O),a(),w.a.createElement(U,{onClick:c})),s())})),J=r("v/Ss"),K=r.n(J),Z={op:"impr",page_el_sn:398684},$={op:"click",page_el_sn:398684},ee=2,te=3,re=4,ne=["front_promo_price","sku_selector_toast"];function oe(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie=function(e,t){var r=Object(I.useRef)(),n=Object(I.useRef)();Object(I.useImperativeHandle)(t,(function(){return{modalRef:n,skuRef:r,exit:function(){n.current.exit()},enter:function(){n.current.enter()},prepare:function(t){var n=e.goods,o=S()(n,"ui.sku_section.view_style_v2")===ee,a=S()(n,"ui.sku_section.view_style_v2")===te,i=S()(n,"ui.sku_section.view_style_v2")===re,s=o||a||i||S()(t,"preventAutoConfirm"),c=1===n.skus.length&&!S()(n,"skus[0].specs.length")&&!s;return r.current.show(ae(ae({},t),{},{needNotShow:c,preventAutoConfirm:s})),{needShow:!c}}}}));var o=e.children,a=e.showOCSkuSelector,i=x()(e,["children","showOCSkuSelector"]);return w.a.createElement(X,{modalStyle:{height:a?"85%":"5.1rem"},modalClassName:a?K.a.normalSkuModalSkuDirectOrder:K.a.normalSkuModal,direction:"y",ref:n,afterShow:function(e){e&&r.current.setScroll()},renderContent:function(){return o?Object(I.cloneElement)(o,ae({ref:r},i)):null}})},se=w.a.forwardRef(ie),ce=r("MyPv"),ue=r("rIj9"),le=r("uf4C"),de=r("5Otn"),pe=r("cDf5"),me=r.n(pe),fe=r("u6S6"),he=r.n(fe),ve=r("mUg4"),ye=r.n(ve),ge=r("i8i4"),be=r.n(ge),_e=r("KoDT"),ke=r("3VHQ"),Se=r("2xwX");function Ie(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=!0;function Oe(e){if(!1===window.p_bodyPositionStyle){var t=Object(_e.getCurrentPlatform)();Pe&&t.isNativePlatform&&Object(ke.setupPullReload)({enable:!1}),window.p_bodyPositionStyle=document.body.style.position,window.p_topStyle=document.body.style.top,window.p_bodyScrollTop=Ce(),document.body.style.position="fixed",document.body.style.top="-".concat(window.p_bodyScrollTop,"px"),window.p_leftStyle=document.body.style.left,document.body.style.left="calc(50vw - 1.875rem)",Object(P.disableScroll)(e)}}function Ce(e){return e&&e!==document.body?e.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0)}function xe(){if(!1!==window.p_bodyPositionStyle){var e,t=Object(_e.getCurrentPlatform)();Pe&&t.isNativePlatform&&Object(ke.setupPullReload)({enable:!0}),document.body.style.position=window.p_bodyPositionStyle,window.p_bodyPositionStyle=!1,document.body.style.top=window.p_topStyle,e=window.p_bodyScrollTop,document.body.scrollTop=e,0!==document.body.scrollTop?document.body:((document.documentElement||{}).scrollTop=e,document.documentElement&&0!==document.documentElement.scrollTop&&document.documentElement),document.body.left=window.p_leftStyle,Object(P.enableScroll)()}}function Ee(e){var t=e,r=(t.type,t.props);var n=document.createElement("div"),o=null;return document.body.appendChild(n),e=w.a.cloneElement(e,{onClose:function(){r.onClose&&r.onClose(),o||(o=setTimeout((function(){be.a.unmountComponentAtNode(n),document.body.removeChild(n),n=null}),0))}}),{componentReference:be.a.render(e,n)}}function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;return"object"===me()(e)&&null!==e&&(e instanceof Array?(r=[],e.forEach((function(e,n){r[n]=De(e,t)}))):(r={},ye()(e,(function(e,n){var o=he()(n);t.includes(n)?r[o]=e:r[o]=De(e,t)})))),r}"undefined"!=typeof window&&(window.p_bodyPositionStyle=!1);var Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5.1rem";Object(ce.infoH5)(e,we(we({},t),{},{ContainerProps:{style:{pointerEvents:"none",height:r,top:"auto"}},className:"sku-toast-center"}))},Te=function(e,t){Ne(e,t,"85%")},je=!1;Object(P.isSupportWebp)().then((function(e){je=e}));var Ae,Re,Me=function(){return je},Le={isSpinnerShown:!1,timer:null,showWithoutBg:function(){Le.timer=setTimeout((function(){Object(Se.showWithoutBg)(),Le.isSpinnerShown=!0}),500)},show:function(){Le.timer=setTimeout((function(){Object(Se.show)(),Le.isSpinnerShown=!0}),500)},hide:function(){Le.isSpinnerShown?Object(Se.hide)():Le.timer&&clearTimeout(Le.timer),Le.isSpinnerShown=!1,Le.timer=null}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(Object(O.sendClickMetrics)(e),t){var r=Object(_e.getCurrentPlatform)();r.isNativePlatform||r.isTinyNativePlatform?Promise.resolve().then((function(){t()})):setTimeout((function(){t()}),100)}};!function(e){e.POST="POST",e.GET="GET"}(Re||(Re={}));var Fe=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{isAuth:!1,isFormat:!1},Ae||(n=Object(le.getPageID)(),Ae=Object(ue.createDefaultAxios)({pageInfo:{pageId:n}})),!(null==r?void 0:r.isAuth)){e.next=9;break}return e.next=5,Object(de.getAccessToken)();case 5:if(e.sent){e.next=9;break}return e.next=9,Object(de.login)();case 9:return t&&!t.defaultErrorHandler&&(t.defaultErrorHandler=function(){}),t.encodeNativeResponse=!1,e.next=13,Ae(t);case 13:if(o=e.sent,!r||!r.isFormat){e.next=16;break}return e.abrupt("return",De(o));case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ue(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ve=function(e){var t,r,n,o=(e=e||{}).server_time||Date.now()/1e3,a=function(e){e=e||[];for(var t=[],r={},n=0;n<e.length;n++){var o=e[n];0===(parseInt(o.is_open,10)||0)||r[o.customer_num]||(t.push({requireNum:o.customer_num.toString(),price:Object(P.priceCent)(o.price),groupID:o.group_id,startTime:parseInt(o.start_time,10),endTime:parseInt(o.end_time,10),orderLimit:parseInt(o.order_limit,10)||1}),r[o.customer_num]=!0)}return t.sort((function(e,t){return e.requireNum-t.requireNum})),{list:t}}(e.group).list,i=Object(P.priceCent)(e.max_on_sale_group_price||0),s=Object(P.priceCent)(e.min_on_sale_group_price||0),c=Object(P.priceCent)(e.max_on_sale_normal_price||0),u=Object(P.priceCent)(e.min_on_sale_normal_price||0);return{serverTime:o,nowTime:o,goodsID:e.goods_id,mallID:e.mall_id,groupTypes:a,skus:(r=e.sku,n=e.hd_thumb_url||e.thumb_url,(r=r||[]).map((function(e){return He(He({},De(e)),{},{skuID:e.sku_id,specs:e.specs,thumbUrl:Object(P.forceHttps)(e.thumb_url||n||""),limitQuantity:parseInt(e.limit_quantity,10)||0,normalPrice:Object(P.priceCent)(e.normal_price),groupPrice:Object(P.priceCent)(e.group_price),skuExpansionPrice:Object(P.priceCent)(e.sku_expansion_price)})}))),thumbUrl:Object(P.forceHttps)(e.thumb_url||""),hdThumbUrl:Object(P.forceHttps)(e.hd_thumb_url||""),eventType:parseInt(e.event_type,10)||0,activity:(t=e.activity,t&&{activityID:t.activity_id,activityType:t.activity_type,startTime:t.activity_start_time,endTime:t.activity_end_time,activityExplain:t.activity_explain,activitySkuExplain:t.activity_sku_explain,expansion:t.expansion,detailID:t.detail_id,subActivityType:t.sub_activity_type,costType:t.cost_type,activityOptions:t.activity_options,playType:t.play_type}),maxOnSaleGroupPrice:i,minOnSaleGroupPrice:s,maxOnSaleNormalPrice:c,minOnSaleNormalPrice:u,priceStyle:e.price_style||0,pricePrefix:e.price_prefix,goodsExpansionPrice:Object(P.priceCent)(e.goods_expansion_price),checkQuantity:e.check_quantity,destinationUrl:e.destination_url,vasTemplateId:e.vas_template_id,skuDirectOrder:e.sku_direct_order,skuNewPricePrefix:e.new_price_prefix,goodsType:+e.goods_type||1,catID:e.cat_id,catID1:e.cat_id_1,catID2:e.cat_id_2,catID3:e.cat_id_3,catID4:e.cat_id_4,options:e.options,overseaType:e.oversea_type||0,minOnSaleGroupPriceInCent:e.min_on_sale_group_price,maxOnSaleGroupPriceInCent:e.max_on_sale_group_price}};function ze(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qe(e,t,r){return Fe({method:"POST",url:r||"api/oak/integration/render/sku",data:We({page_version:7,_component_version:1,hostname:location.hostname,front_supports:ne},e)}).then((function(e){var r,n;if(null===(r=e)||void 0===r?void 0:r.toast)return Object(ce.info)(null===(n=e)||void 0===n?void 0:n.toast),!1;if(t&&!(e=t(e)))return!1;var o=function(e){return We(We(We({},e.goods),e.price),{},{server_time:e.server_time,sku:e.sku,activity:(e.activity_collection||{}).activity,destination_url:e.destination_url})}(e),a=Ve(o);return a.ui=e.ui||{},{goodsInfo:a}}))}var qe=r("YVoc"),Ge=r.n(qe),Ye=r("U+yc"),Xe=r.n(Ye);function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ke(e,t,r){var n=r.value;if("function"!=typeof n)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Je(n)));var o=!1;return{configurable:!0,get:function(){if(o||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof n)return n;var r=n.bind(this);return o=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return r},set:function(e){n=e,delete this[t]}}),o=!1,r},set:function(e){n=e}}}function Ze(e){var t;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach((function(t){if("constructor"!==t){var r=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof r.value&&Object.defineProperty(e.prototype,t,Ke(e,t,r))}})),e}function $e(){return 1===arguments.length?Ze.apply(void 0,arguments):Ke.apply(void 0,arguments)}var et=r("W1oA"),tt=r("SXY3"),rt=r("pVnL"),nt=r.n(rt),ot=(r("wgWF"),function(e){var t=e.goods,r=e.activity,n=e.skuInfos,o=e.selectedSkuID,a=e.specDesc,i=t.minOnSaleGroupPrice,s=t.goodsExpansionPrice,c=r.activitySkuExplain,u=null;if(o){var l=n[o];i=l.groupPrice,s=l.skuExpansionPrice,c=l.skuExplain,u=w.a.createElement("span",{className:"sku-quantity-tip"},l.quantityTip)}var d=S()(t,"ui.sku_section.price_prefix")||"定金";return w.a.createElement("div",{className:"dj-sku-desc"},w.a.createElement("div",{className:"djs-line-1"},w.a.createElement("span",{className:"djsp-1"},d),w.a.createElement("span",{className:"djsp-2"},"￥"),w.a.createElement("span",{className:"djsp-3"},i),i!==s&&w.a.createElement("span",null,w.a.createElement("span",{className:"djsp-4"},"抵"),w.a.createElement("span",{className:"djsp-5"},s)),u),w.a.createElement("div",{className:"djs-line-2"},c),w.a.createElement("div",{className:"djs-line-3 sku-selector-desc"},a))}),at=r("/++w"),it=r.n(at),st=r("MVQ+");function ct(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lt(e){return Object(st.a)(ut(ut({},e),{},{onCancel:void 0}))}var dt=r("hVdf");function pt(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ft(e){Object(dt.b)()?function(e){Object(dt.a)(mt(mt({},e),{},{onCancel:void 0}))}(e):lt(e)}var ht=r("GftL"),vt=r("Wr5u"),yt=r.n(vt);var gt=function(e){var t,r,n=e.specDesc,a=e.skuDirectOrder,i=e.skuPreSaleIcon,s=e.selectedSkuID,c=e.group,u=Object(I.useRef)(),l=Object(I.useState)(!1),d=D()(l,2),p=d[0],m=d[1],f=Object(I.useState)(n),h=D()(f,2),v=h[0],y=h[1],g=Object(I.useState)(!1),b=D()(g,2),_=b[0],k=b[1],P=i||{},O=P.pictureUrl,C=P.clickUrl,x=P.width,E=P.height,N=P.clickNotice;return Object(I.useEffect)((function(){m((S()(u,"current.offsetTop",0)||0)>function(e){var t=375;return window?t=window.innerWidth:document&&document.body&&(t=document.body.offsetWidth),Math.min(t,768)/375*e*100}(.35)),O&&y(function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...",n=0,o="",a=0;a<e.length;a++)if(o+=e.charAt(a),e.charCodeAt(a)>=128||e.charCodeAt(a)<=90&&e.charCodeAt(a)>=64||e.charCodeAt(a)<=38&&e.charCodeAt(a)>=35){if((n+=2)>=t)return o.substring(0,o.length-1)+r}else if((n+=1.17)>=t)return o.substring(0,o.length-2)+r;return o}(n,28)),k(!1)}),[s,c.requireNum]),O?w.a.createElement("div",{ref:u,className:A()(yt.a.skuSelectorDescWithIcon,(r={},o()(r,yt.a.oneLineStyle,p),o()(r,yt.a.skuSelectorDescOC,a),r))},v,w.a.createElement(ht.default,{className:yt.a.skuPreSaleIcon,src:_&&C?C:O,style:{width:"".concat(x/100,"rem"),height:"".concat(E/100,"rem")},onTouchStart:function(){return k(!0)},onTouchEnd:function(){return k(!1)},onClick:function(){N&&ft({title:N,confirmButtonLabel:"知道了"})}})):w.a.createElement("div",{ref:u,className:A()(yt.a.skuSelectorDesc,(t={},o()(t,yt.a.oneLineStyle,p||a),o()(t,yt.a.skuSelectorDescOC,a),t))},n)},bt=r("pbmx"),_t=r.n(bt),kt=function(e){var t=e.onClick,r=e.tip;return w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6663725,op:"impr"}},w.a.createElement("div",{className:_t.a.multiChoose,onClick:function(){Object(O.sendClickMetrics)({page_el_sn:6663725,op:"click"}),t()}},r,w.a.createElement(L,null)))};var St=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){var e;l()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={retryTimes:e.props.retryTimes||0,error:null,errorInfo:null},e}return p()(r,[{key:"componentDidCatch",value:function(e,t){this.props.catchCallback&&this.props.catchCallback(),Object(P.throwErrorAsync)(e),+this.state.retryTimes>0&&this.setState({retryTimes:this.state.retryTimes-1,error:null,errorInfo:null})}},{key:"render",value:function(){return this.state.error?this.props.fallback||w.a.createElement("div",{className:"error-boundary2"}):this.props.children||null}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),r}(w.a.Component);St.defaultProps={retryTimes:0,fallback:w.a.createElement("div",{className:"error-boundary"})};var It=r("gze+"),wt=r.n(It),Pt=function(e){var t,r=e.selectedSkuID,n=e.skuInfos,a=e.skuDirectOrder,i=r&&(S()(n,[[r],"skuPreSaleTip"],"")||"");return i?w.a.createElement("div",{className:A()((t={},o()(t,wt.a.skuPreSaleTip,!a),o()(t,wt.a.skuPreSaleTipOC,a),t))},i):null},Ot=r("RIqP"),Ct=r.n(Ot);function xt(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dt,Nt,Tt={},jt=0,At=function(){var e=c()(i.a.mark((function e(t,r,n,o,a){var s,c,u,l,d,p,m,f,h,v=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=v.length>5&&void 0!==v[5]?v[5]:{},u="".concat(r,"-").concat(n),!(null===(s=Tt[u])||void 0===s?void 0:s.promotionPriceDesc)){e.next=4;break}return e.abrupt("return",Tt);case 4:return l=Object(P.parseUrlQuery)(window.location.href),d=t.activity,p=void 0===d?[]:d,m=Et({goods_id:t.goodsID,mall_id:t.mallID,cat_id:t.catID,cat_id1:t.catID1,cat_id2:t.catID2,cat_id3:t.catID3,cat_id4:t.catID4,goods_type:t.goodsType,event_type:t.eventType,options:t.options,oversea_type:t.overseaType,min_on_sale_group_price:t.minOnSaleGroupPriceInCent,max_on_sale_group_price:t.maxOnSaleGroupPriceInCent,activity_type:p.activityType,sub_activity_type:p.subActivityType,activity_id:p.activityID,cost_type:p.costType,activity_options:p.activityOptions,activity_play_type:p.playType,from_page:l.page_from,from_merchant_tag:l._oak_merchant_tag,mkt_domain:l._oc_mkt_domain,sku_id:n,sku_group_price:Math.round(100*+o),goods_number:r,_oc_award_type:l._oc_award_type,normal_price:Math.round(100*+a),vas_template_id:t.vasTemplateId,front_supports:ne},c),Object.keys(l).forEach((function(e){var t=l[e];/(^_oc_*)/.test(e)&&t&&(m[e]=t)})),e.prev=8,jt++,f=jt,e.t0=De,e.next=14,Fe({method:"POST",data:m,url:"api/lisbon/consult_promotion_price"});case 14:if(e.t1=e.sent,h=(0,e.t0)(e.t1),f!==jt){e.next=19;break}return Tt[u]=h,e.abrupt("return",Tt);case 19:if(f===jt){e.next=21;break}return e.abrupt("return",null);case 21:e.next=26;break;case 23:return e.prev=23,e.t2=e.catch(8),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[8,23]])})));return function(t,r,n,o,a){return e.apply(this,arguments)}}();var Rt,Mt=function(e){return e<10?"0"+e:e},Lt=function(e,t,r){var n=Math.max(t-e,0),o=Math.floor(n/60),a=Math.floor(o/60),i=Math.floor(a/24);i%=365,a=Mt("hour"!==r?a%24:a);var s="";0!==i&&(s=i+"天"+a+"小时");var c=!1;return e>=t&&(c=!0),{over:c,days:i,hours:a,minutes:o=Mt(o%60),seconds:n=Mt(Math.floor(n%60)),formattedStr:s}},Bt=(Nt=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){var e;l()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={nowTime:e.props.goods.nowTime},e}return p()(r,[{key:"componentDidMount",value:function(){var e=this,t=S()(this.props.goods,"ui.sku_section.yellow_label")||S()(this.props.goods,"ui.price_section.data.yellow_label");if(S()(t,"end_time"))var r=setInterval((function(){e.setState({nowTime:e.state.nowTime+1}),t.end_time<e.state.nowTime&&clearInterval(r)}),1e3)}},{key:"genPrice",value:function(){var e,t,r,n=+S()(this.props.goods,"ui.sku_section.car_shop.action_type"),a=this.props,i=a.selectedSkuID,s=a.skuInfos,c=a.goods,u=a.group,l=a.selectedHomeIns,d=a.selectedSendWays,p=a.skuDirectOrder,m=a.styleStatus,f=a.ocData,h=a.useNormalSkuData,v=a.renderPromotionDescContent,y=a.isMutliSku,g=S()(f,"promotionInfo");if(i){var b=s[i];if(r=u.requireNum>1?b.groupPrice:b.normalPrice,S()(c,"ui.sku_section.view_style_v2")===re)if(S()(l,"srv_type")>0){var _=+Object(P.priceCent)(S()(l,"fee")||0);+_>0&&(r=Object(P.price)(+r+_))}var k=+S()(d,"fee")||0;S()(c,"ui.sku_section.view_style_v2")===te&&1===n&&k>0&&(r=Object(P.price)(+r+k))}else{var I=c.minOnSaleGroupPrice,O=c.maxOnSaleGroupPrice,C=[c.minOnSaleNormalPrice,c.maxOnSaleNormalPrice];if(+u.requireNum>1&&(C=[I,O]),S()(c,"ui.sku_section.view_style_v2")===re){var x=+Object(P.priceCent)(S()(l,"fee")||0);x>0&&(C=C.map((function(e){return Object(P.price)(+e+x)})))}var E=+S()(d,"fee")||0;S()(c,"ui.sku_section.view_style_v2")===te&&1===n&&E>0&&(C=C.map((function(e){return Object(P.price)(+e+E)}))),r=C[0],C[0]!==C[1]&&(r=C.join("-"))}var D="";+u.requireNum>1&&3===c.priceStyle&&c.pricePrefix&&(D=c.pricePrefix);var N="".concat(D,"¥").concat(r),T=(null===(e=N)||void 0===e||e.length,this.props.priceInfo.newPriceDisplay);if(+u.requireNum>1&&(null==T?void 0:T.price)&&!y){var j=T.prefix,R=void 0===j?"":j,M=T.price,L=T.rmb,B=void 0===L?"":L,F=T.suffix,U=void 0===F?"":F,H="".concat(R).concat(B).concat(M).concat(U).length>16?.02:0;N=w.a.createElement("span",{role:"img","aria-label":"".concat(R).concat(B).concat(M).concat(U)},w.a.createElement("span",{"aria-hidden":!0,style:{fontSize:"".concat(.17-H,"rem")}},R),w.a.createElement("span",{"aria-hidden":!0,style:{fontSize:"".concat(.19-H,"rem")}},B,M),w.a.createElement("span",{"aria-hidden":!0,style:{fontSize:"0.13rem"}},U))}var V=S()(this.props.ocData,"goodsInfo.unitPrice"),z=(null==f?void 0:f.goodsInfo)||{},W=z.unitPriceDisplay,Q=z.totalPriceDisplay,q=g||{},G=q.isNewPriceArea,Y=q.totalDiscountDisplay,X=q.afterCouponUnitPriceDisplay,J=!(!X&&!W),K="¥".concat(V);if(G&&Y||Q){var Z=(Y||Q).reduce((function(e,t){return e+t.text}),"");K=w.a.createElement("span",{"aria-label":Z,role:"img",tabIndex:-1},(Y||Q).map((function(e,t){var r={color:e.font_color,fontSize:e.font_size&&e.font_size/100+"rem"};return w.a.createElement("span",{key:t,style:r,"aria-hidden":!0},e.text)})))}var $=J&&w.a.createElement(w.a.Fragment,null,(X||W).map((function(e,t){var r={color:e.font_color,fontSize:e.font_size&&e.font_size/100+"rem"};return w.a.createElement("span",{key:t,style:r},e.text)})));return w.a.createElement("div",{className:A()((t={},o()(t,it.a.skuSelectorPrice,!p||p&&h),o()(t,it.a.skuSelectorPriceOC,p&&!h),o()(t,it.a.startHide,1===m),o()(t,it.a.startDisplay,2===m),t))},w.a.createElement("div",{className:A()(it.a.skuQuantityPriceDesc,o()({},it.a.isNewPriceArea,G))},p&&i&&V&&!h?K:N),$,w.a.createElement(St,null,!J&&v&&v(this.props.priceInfo)))}},{key:"getSpecDesc",value:function(){var e=[],t=[],r=this.props,n=r.currentSelect,o=r.selectedSkuID,a=r.skuInfos,i=r.selectedHomeIns,s=r.selectedSendWays;for(var c in n){var u=n[c];u?t.push(u):e.push(c)}if(S()(this.props.goods,"ui.sku_section.view_style_v2")===re){var l=S()(i,"desc"),d=S()(i,"srv_type");if(!l){var p=S()(this.props.goods,"ui.sku_section.home_install.title")||"服务";e.push(p)}if(l&&o){var m=a[o],f=S()(m,"srvItem",[]).find((function(e){return e&&e.srv_type===d})),h=S()(f,"desc")||"";t.push(h)}}if(S()(this.props.goods,"ui.sku_section.view_style_v2")===te){var v=+S()(this.props.goods,"ui.sku_section.car_shop.action_type"),y=S()(s,"type")||"",g=S()(s,"fee"),b=1===v&&g>=0?"".concat(y," ¥").concat(g):y;if(!y){var _=S()(this.props.goods,"ui.sku_section.car_shop.title")||"送货方式";e.push(_)}y&&t.push(b)}return e.length>0?"请选择 "+e.join(" "):t.length>0?"已选："+t.join(" "):""}},{key:"renderDiscountItem",value:function(e,t){var r=this.props.skuDirectOrder,n=e.labelText,a=e.endTime;if(!n)return null;var i,s=n,c=w.a.createElement(w.a.Fragment,null,s);if(a&&s.search(/#time#/g)>=0){var u=Lt(this.state.nowTime,a),l=u.formattedStr,d=u.over,p=u.days,m=u.hours,f=u.minutes,h=u.seconds;d||(c=0===p?s.split(/(#time#)/g).map((function(e,t){return"#time#"===e?w.a.createElement("div",{className:it.a.countDown,key:t},m,":",f,":",h):w.a.createElement(I.Fragment,{key:t},e)})):w.a.createElement(I.Fragment,null,s.replace(/#time#/g,l))),d&&(s="",c=null)}return s&&c?w.a.createElement("div",{className:A()(it.a.yellowLabelWrap,it.a.listItem),key:t},w.a.createElement("span",{className:A()((i={},o()(i,it.a.yellowLabel,!r),o()(i,it.a.yellowLabelOC,r),i))},c)):void 0}},{key:"renderDiscountElement",value:function(){var e=this,t=this.props,r=t.goods,n=t.skuInfos,a=t.group,i=t.selectedSkuID,s=t.skuDirectOrder,c=t.priceInfo;if(t.isMutliSku)return null;if(+a.requireNum>1){var u=c.newYellowLabelList;if(null==u?void 0:u.length)return w.a.createElement("div",{className:it.a.yellowLabelListWrap},u.map((function(t,r){return e.renderDiscountItem(t,r)})));var l=S()(r,"ui.sku_section.yellow_label")||S()(r,"ui.price_section.data.yellow_label"),d=S()(l,"sku_unselect_label")||"";i&&(d=n[i].yellowLabel||"");var p,m=w.a.createElement(w.a.Fragment,null,d);if(S()(l,"end_time")&&d&&d.search(/#time#/g)>=0){var f=Lt(this.state.nowTime,l.end_time),h=f.formattedStr,v=f.over,y=f.days,g=f.hours,b=f.minutes,_=f.seconds;v||(m=0===y?d.split(/(#time#)/g).map((function(e,t){return"#time#"===e?w.a.createElement("div",{className:it.a.countDown,key:t},g,":",b,":",_):w.a.createElement(I.Fragment,{key:t},e)})):w.a.createElement(I.Fragment,null,d.replace(/#time#/g,h))),v&&(d="",m=null)}if(d&&m)return w.a.createElement("div",{className:it.a.yellowLabelWrap},w.a.createElement("span",{className:A()((p={},o()(p,it.a.yellowLabel,!s),o()(p,it.a.yellowLabelOC,s),p))},m))}return null}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.goods,a=r.skuInfos,i=r.group,s=r.selectedSkuID,c=r.skuDirectOrder,u=r.style,l=n.activity;if(l&&25===l.activityType)return w.a.createElement(ot,{specDesc:this.getSpecDesc(),selectedSkuID:s,skuInfos:a,goods:n,activity:l});var d=c&&2==+i.requireNum&&S()(n,"ui.sku_section.new_multi_choose.tip"),p=null;return s&&(p=a[s].skuPreSaleIcon),w.a.createElement("div",{className:A()((e={},o()(e,it.a.skuSelectorHeadContent,!c),o()(e,it.a.skuSelectorHeadContentOC,c),e)),style:u},this.genPrice(),this.renderDiscountElement(),w.a.createElement(St,null,w.a.createElement(gt,{specDesc:this.getSpecDesc(),skuDirectOrder:c,skuPreSaleIcon:p,selectedSkuID:s,group:i})),!!d&&w.a.createElement(kt,{tip:d,onClick:function(){t.props.handleShowCart&&t.props.handleShowCart(!0)}}),c&&w.a.createElement(St,null,w.a.createElement(Pt,{selectedSkuID:s,skuInfos:a,skuDirectOrder:c})))}}]),r}(w.a.Component),Dt=Nt,Xe()(Dt.prototype,"getSpecDesc",[$e],Object.getOwnPropertyDescriptor(Dt.prototype,"getSpecDesc"),Dt.prototype),Xe()(Dt.prototype,"renderDiscountItem",[$e],Object.getOwnPropertyDescriptor(Dt.prototype,"renderDiscountItem"),Dt.prototype),Xe()(Dt.prototype,"renderDiscountElement",[$e],Object.getOwnPropertyDescriptor(Dt.prototype,"renderDiscountElement"),Dt.prototype),Dt),Ft=w.a.forwardRef((function(e,t){var r=Object(I.useRef)();Object(I.useImperativeHandle)(t,(function(){return r.current}));var n=function(e){var t=Object(I.useState)({}),r=D()(t,2),n=r[0],o=r[1],a=e.goodsNumber,s=e.selectedSkuID,u=e.goods,l=e.group,d=e.skuInfos,p=e.consultPromotionPriceParams,m=e.ocData,f=e.isMutliSku,h=S()(m,"promotionInfo"),v=S()(m,"promotionExtendMap"),y=S()(v,"replace_goods_detail_promotion_label_list"),g=y&&JSON.parse(y),b=h||{},_=b.isNewPriceArea,k=b.discountTagDisplayVos,w=function(e){if(!s)return e;var t=e&&e.length?Ct()(e):[];return _&&g&&g.length>0&&g.map((function(e,r){var n=k&&!!k.length&&k.reduce((function(t,r){if(r.labelType===e&&r.tagDisplayVo){var n=r.tagDisplayVo;if(n.length)return n[0].text+t}}),""),o=t.findIndex((function(t){return t.labelType===e}));if(!n&&o>=0&&t.splice(o,1),n){var a={labelText:n,labelType:e,morganLable:!0};o>=0&&(t[o]=a),o<0&&t.unshift(a)}})),t};return Object(I.useEffect)((function(){var e=function(){var e=c()(i.a.mark((function e(){var t,r,n,c,m,h,v,y,g,b,_,k,S,I,P,O,C,x,E,D;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=De(null===(t=u.ui)||void 0===t?void 0:t.sku_section)||{},m=s&&d[s],h=(s?null==m?void 0:m.yellowLabelList:null==c?void 0:c.yellowLabelList)||[],v=s?null==m?void 0:m.priceDisplay:null==c?void 0:c.priceDisplay,y=s?f?null==m?void 0:m.newMultiChooseTip:null==m?void 0:m.groupTip:f?"":null==c?void 0:c.skuUnselectTip,g=s?null==m?void 0:m.groupTipColor:null==c?void 0:c.skuUnselectTipColor,b=s?null==m?void 0:m.groupTipFont:null==c?void 0:c.skuUnselectTipFont,1==+l.requireNum&&(y=s?null==m?void 0:m.quantityTip:"",g="",b=""),1===c.consultPromotionPrice&&l.requireNum>1&&s&&a>1&&!f){e.next=12;break}return o({newPriceDisplay:v,newYellowLabelList:w(h),promotionPriceDesc:y,tipColor:g,tipFontSize:b}),e.abrupt("return");case 12:if(_=(null===(r=d[s])||void 0===r?void 0:r.groupPrice)||null,k=(null===(n=d[s])||void 0===n?void 0:n.normalPrice)||null,_){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,At(u,a,s,_,k,p);case 18:(S=e.sent)&&(I=S["".concat(a,"-").concat(s)]||{},P=I.promotionPriceDesc,O=I.priceDisplay,C=I.yellowLabelList,x=h.slice(),E=(C||[]).find((function(e){return"usable_full_back"===e.labelType}))||{},(D=(x||[]).findIndex((function(e){return"usable_full_back"===e.labelType})))>=0&&!x[D].morganLable&&(x[D]=E),D<0&&(null==E?void 0:E.labelText)&&(x||[]).unshift(E),(null==O?void 0:O.price)&&(y="".concat(u.skuNewPricePrefix||"拼单价").concat(_),g="#58595B",b=14),o({newPriceDisplay:O,newYellowLabelList:w(x),promotionPriceDesc:(null==O?void 0:O.price)?y:P,tipColor:g,tipFontSize:b}));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a,s,u,d,l,m]),n}(e);return w.a.createElement(Bt,nt()({},e,{ref:r,priceInfo:n}))})),Ut=r("jWx1");function Ht(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zt,Wt,Qt=(Rt=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).state={thumb:n.processImage(e.src)},n.imgUrl=e.src,n}return p()(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectSkuId,r=e.resetSkuId,n=e.usePddNativePhoto,o=Object(_e.getCurrentPlatform)();if(n&&Object(_e.compareVersion)(o.version,"5.49.0")>=0)try{Object(Ut.addNotificationCallback)("video_container_goods_sku_index_change_notification",(function(e){var n=(null==e?void 0:e.sku_id)||"";n?t&&t({skuId:n}):r&&r()}))}catch(e){}}},{key:"getNativeViewImgList",value:function(){var e=this.props,t=e.skuInfos,r=e.group,n=Object.values(t);n.sort((function(e,t){return S()(e,"previewPriority")-S()(t,"previewPriority")}));var o=[];return n.forEach((function(e){if(!(e.quantity<=0)){var t="",n=!0,a=!1,i=void 0;try{for(var s,c=e.specs[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var u=s.value;u.spec_value&&(t+=u.spec_value+" ")}}catch(e){a=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw i}}var l=r.requireNum>1?e.groupPrice:e.normalPrice;o.push({image_url:e.thumbUrl,sku_name:t,price:l,sku_id:e.skuId})}})),o}},{key:"viewImg",value:function(){var e=this,t=this.props,r=t.selectedSkuID,n=t.goods,o=t.usePddNativePhoto,a=Object(_e.getCurrentPlatform)();if(o&&Object(_e.compareVersion)(a.version,"5.50.0")>=0){var i=Object(P.parseUrlQuery)(window.location.href),s=this.getNativeViewImgList(),c=s.findIndex((function(e){return e.sku_id===r}));if(!r&&c<0){var u=n.hdThumbUrl||n.thumbUrl;s.unshift({image_url:u,sku_mode:1}),c=0}var l={props:{url:"pdd_photo_goods_sku.html?pr_animated=0",index:c,scene_id:"goods_detail_sku",data_list:s,loop:!0,is_h5:!0,activity_style_:1},transient_refer_page_context:{page_id:i.page_id,page_name:i.page_name,page_sn:i.page_sn}};Object(ke.invokeBridgeCallNativeFun)("JSNavigation","modal",l).catch((function(t){Object(et.a)(e.imgUrl,e.props.imgList)}))}else Object(et.a)(this.imgUrl,this.props.imgList),Object(O.sendClickMetrics)(Vt(Vt({},$),{},{goods_id:n.goodsID,event_type:n.eventType}))}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=e.src,n=this.processImage(r);if(r!==this.imgUrl){var o=new Image;o.onload=function(){t.setState({thumb:n}),t.imgUrl=r},o.src=n}}},{key:"processImage",value:function(e){return Object(P.generateCDNImageUrl)(e,{resizeWidth:300,quality:70,webpEnable:Me(),sharpen:1})}},{key:"render",value:function(){var e=this.props.goods,t=Vt(Vt({},Z),{},{goods_id:e.goodsID,event_type:e.eventType}),r=this.state.thumb;return w.a.createElement(tt.a,{trackingInfo:t},w.a.createElement("img",{src:r,onClick:this.viewImg,role:"img","aria-label":"点击查看大图"}))}}]),r}(w.a.PureComponent),Xe()(Rt.prototype,"getNativeViewImgList",[$e],Object.getOwnPropertyDescriptor(Rt.prototype,"getNativeViewImgList"),Rt.prototype),Xe()(Rt.prototype,"viewImg",[$e],Object.getOwnPropertyDescriptor(Rt.prototype,"viewImg"),Rt.prototype),Rt),qt=(r("h3V6"),r("sEfC")),Gt=r.n(qt),Yt=r("DzJC"),Xt=r.n(Yt);r("XkPr");var Jt=[],Kt=(Wt=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).state={data:Jt,currentIndex:0,isSearchBoxFocus:!1,keywords:""},n.containerRef=w.a.createRef(),n.searchBoxRef=w.a.createRef(),n._handleScroll=function(){var e=Math.round(Ce(n.containerRef.current)),t=Array.from(document.getElementsByClassName("sku-item-address"));t.forEach((function(r,o){(o+1<t.length&&r.offsetTop<e&&t[o+1].offsetTop>e||o+1===t.length&&r.offsetTop<e)&&n.setState({currentIndex:o})}))},n.forwardContent=function(e,t,r){n.setState({currentIndex:r}),document.getElementById(t).scrollIntoView()},n.handleScroll=Xt()(n._handleScroll,300),n.handleSearchBoxChange=Gt()(n._handleSearchBoxChange,300),n}return p()(r,[{key:"componentDidMount",value:function(){var e=this;Object(P.disableScroll)(this.containerRef.current),S()(this.state,"data.length")||(Object(Se.showWithoutBg)(),Fe({method:"POST",url:"api/virginia/sim_mobile/query_dictionary",data:{goods_id:this.props.goodsID}}).then((function(t){Object(Se.hide)(),t&&t.result&&t.result.areas&&(Jt=t.result.areas,e.setState({data:t.result.areas}))})).catch((function(){Object(Se.hide)()})))}},{key:"handleSearchBoxFocus",value:function(){this.setState({isSearchBoxFocus:!0})}},{key:"handleSearchBoxBlur",value:function(){this.setState({isSearchBoxFocus:!1})}},{key:"_handleSearchBoxChange",value:function(){this.setState({keywords:this.searchBoxRef.current.value,currentIndex:0})}},{key:"render",value:function(){var e=this,t=this.state,r=t.data,n=t.keywords,o=t.currentIndex,a=t.isSearchBoxFocus,i=n?r.reduce((function(e,t){var r,o=null==t||null===(r=t.citys)||void 0===r?void 0:r.filter((function(e){var t;return null==e||null===(t=e.name)||void 0===t?void 0:t.includes(n)}));return o&&o.length>0&&e.push({citys:o,first_word:t.first_word}),e}),[]):r;return w.a.createElement("div",{className:"comm-address-selector-container",onClick:function(t){t.stopPropagation(),e.props.onClose()}},w.a.createElement("div",{className:"comm-add",onClick:function(e){e.stopPropagation()}},w.a.createElement("div",{className:"comm-add-header"},w.a.createElement("div",{className:"comm-add-header-back",onClick:function(t){t.stopPropagation(),e.props.onClose()}}),w.a.createElement("div",{className:"comm-add-header-title"},"号码归属地")),w.a.createElement("div",{className:A()("address-searchbox",{"address-searchbox-focus":a||!!n})},w.a.createElement("div",{className:"search-icon"}),w.a.createElement("input",{ref:this.searchBoxRef,className:"search-input",type:"text",placeholder:"请输入城市名",onFocus:this.handleSearchBoxFocus,onBlur:this.handleSearchBoxBlur,onChange:this.handleSearchBoxChange})),w.a.createElement("div",{className:"address-list",onScroll:this.handleScroll,ref:this.containerRef},i.map((function(t,r){var n=A()("item-title",{"item-title-current":o===r});return w.a.createElement("div",{className:"sku-item-address",key:r},w.a.createElement("div",{className:n,id:t.first_word},t.first_word),w.a.createElement("ul",{className:"item-name"},t.citys.map((function(t,r){return w.a.createElement("li",{onClick:function(){e.props.onClose(),e.props.onClickAddress(t)},key:r},t.name)}))))}))),w.a.createElement("ul",{className:"address-short-name"},i.map((function(t,r){return w.a.createElement("li",{id:t.first_word,key:r,className:o===r?"current":"",onClick:function(n){return e.forwardContent(n,t.first_word,r)}},t.first_word)})))))}}]),r}(I.Component),zt=Wt,Xe()(zt.prototype,"handleSearchBoxFocus",[$e],Object.getOwnPropertyDescriptor(zt.prototype,"handleSearchBoxFocus"),zt.prototype),Xe()(zt.prototype,"handleSearchBoxBlur",[$e],Object.getOwnPropertyDescriptor(zt.prototype,"handleSearchBoxBlur"),zt.prototype),Xe()(zt.prototype,"_handleSearchBoxChange",[$e],Object.getOwnPropertyDescriptor(zt.prototype,"_handleSearchBoxChange"),zt.prototype),zt);r("OIse");var Zt=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){var e;l()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={data:null,serachKeyValue:"",loading:!0},e.getServiceData=function(){e.setState({loading:!0}),Object(Se.showWithoutBg)();var t={goods_id:e.props.goodsID,num:10,mobile:e.state.serachKeyValue||"",city_id:e.props.cityID,province_id:e.props.provinceID};Fe({method:"POST",url:"api/virginia/sim_mobile/query_mobiles",data:t}).then((function(t){Object(Se.hide)(),e.setState({loading:!1,data:t.result})})).then((function(){Object(Se.hide)()}))},e.forwardGoods=function(t){Fe({method:"POST",url:"api/virginia/sim_mobile/edit_status",data:{goods_id:e.props.goodsID,mobile_id:t.mobile_id}}).then((function(r){S()(r,"result")?(e.props.onClose(),e.props.onClickNumber(t)):Ne("下手晚了，靓号被别人抢走了")}))},e}return p()(r,[{key:"componentDidMount",value:function(){this.getServiceData()}},{key:"loadMoreData",value:function(e){e.preventDefault(),this.getServiceData()}},{key:"fixInputBug",value:function(){var e=Object(_e.getCurrentPlatform)();e.system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}},{key:"renderNumList",value:function(){var e=this,t=this.state.data;return S()(t,"length")?w.a.createElement(I.Fragment,null,w.a.createElement("ul",{className:"item-mobile-container"},t.map((function(t,r){return w.a.createElement("li",{className:"item-mobile",key:r,onClick:function(){return e.forwardGoods(t)}},t.mobile)}))),w.a.createElement("div",{className:"load-more-data",onClick:function(t){return e.loadMoreData(t)}},"换一批")):w.a.createElement("div",{className:"no-num-container"},w.a.createElement("div",{className:"no-num-image"}),w.a.createElement("div",{className:"no-num-text"},"没有找到匹配的号码"))}},{key:"render",value:function(){var e=this;return w.a.createElement("div",{className:"comm-num-selector-container",onClick:function(t){t.stopPropagation(),e.props.onClose()}},w.a.createElement("div",{className:"sku-mobile-num",onClick:function(e){e.stopPropagation()}},w.a.createElement("div",{className:"sku-mobile-num-header"},w.a.createElement("div",{className:"sku-mobile-num-header-back",onClick:function(t){t.stopPropagation(),e.props.onClose()}}),w.a.createElement("div",{className:"sku-mobile-num-header-title"},"手机号码")),w.a.createElement("form",{action:"",onSubmit:function(t){return e.loadMoreData(t)}},w.a.createElement("div",{id:"search-content",className:"search-content"},w.a.createElement("div",{className:"search-icon"}),w.a.createElement("input",{type:"search",placeholder:"输入喜欢的数字",className:"search-input",value:this.state.serachKeyValue,onBlur:function(){e.fixInputBug()},onChange:function(t){e.setState({serachKeyValue:t.target.value})}}))),!this.state.loading&&this.renderNumList()))}}]),r}(I.Component);var $t=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){var e;l()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={cityName:null,cityID:null,provinceID:null,provinceNname:null,mobileID:null,mobile:null},e.getState=function(){return e.state},e.cityClick=function(){e.props.selectedSkuID?Ee(w.a.createElement(Kt,{goodsID:e.props.goodsID,onClickAddress:function(t){t.id!==e.state.cityID&&e.setState({cityID:t.id,cityName:t.name,provinceName:t.province_name,provinceID:t.province_id,mobileID:null,mobile:null})},getSkuRef:e.props.getSkuRef})):e.props.toastSpec()},e.mobileClick=function(){var t=e.props,r=t.selectedSkuID,n=t.goodsID;if(r){var o=e.state,a=o.cityID,i=o.provinceID;a&&i?Ee(w.a.createElement(Zt,{goodsID:n,cityID:a,provinceID:i,onClickNumber:function(t){e.setState({mobileID:t.mobile_id,mobile:t.mobile})}})):Ne("请先选择号码归属地")}else e.props.toastSpec()},e}return p()(r,[{key:"render",value:function(){var e=this.state,t=e.cityName,r=e.mobile;return w.a.createElement("div",{className:"sku-specs"},w.a.createElement("span",{className:"sku-specs-key"},"入网信息"),w.a.createElement("div",{className:"sku-spec-value-list"},w.a.createElement("div",{className:"iphone-mark"},w.a.createElement("div",{className:"areas",onClick:this.cityClick},w.a.createElement("span",{className:"are-key"},"号码归属地"),w.a.createElement("span",{className:A()("are-value",{enable:t})},t||"请选择",w.a.createElement("span",{className:"enter-icon"}))),w.a.createElement("div",{className:"iphone-num",onClick:this.mobileClick},w.a.createElement("span",{className:"are-key"},"手机号码"),w.a.createElement("span",{className:A()("are-value",{enable:r})},r||"请选择",w.a.createElement("span",{className:"enter-icon"}))))))}}]),r}(w.a.Component);function er(){return new Promise((function(e,t){setTimeout(e,1e3)})).then((function(e){throw Error("wx query location timeout")}))}function tr(){return new Promise((function(e,t){navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var r=t.coords||{},n=r.latitude,o=void 0===n?0:n,a=r.longitude;e({latitude:o,longitude:void 0===a?0:a})}),(function(t){e({latitude:0,longitude:0})}),{enableHighAccuracy:!1,timeout:6e4,maximumAge:6e4}):e({latitude:0,longitude:0})}))}var rr=null;function nr(){return new Promise((function(e,t){window.wx.ready((function(){!function(e){rr&&e(rr),window.wx.getLocation({success:function(t){var r=t.latitude,n=t.longitude;e(rr={latitude:r,longitude:n})},cancel:function(){e(rr={latitude:0,longitude:0})}})}(e)}))}))}function or(){return ar.apply(this,arguments)}function ar(){return(ar=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={latitude:0,longitude:0},e.prev=1,e.next=4,Promise.race([nr(),er()]);case 4:return t=e.sent,e.abrupt("return",t);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t,r){window.mqq.ready((function(){window.mqq&&window.mqq.sensor||t({latitude:0,longitude:0}),window.mqq.sensor.getLocation({allowCacheTime:60},(function(r,n,o,a){t(0!==r?null:{latitude:n,longitude:o,coord_type:5},e)}))}))}))}var sr=r("3INx"),cr=r("vBQ9");function ur(){var e=Object(_e.getCurrentPlatform)();return!!e.isNativePlatform&&e.statisfy("5.21.0","5.12.0",sr.VersionCompareMethod.greaterThanEqual)}var lr="AMLOCATION_HAS_SET_KEY";function dr(){return pr.apply(this,arguments)}function pr(){return(pr=c()(i.a.mark((function e(){var t,r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ke.invokeBridgeCallNativeFun)("AMLocation","check");case 3:return t=e.sent,n=(r=t||{}).is_determined,o=r.is_enabled,a=r.need_reconfirm,Object(_e.getCurrentPlatform)().platform===_e.PLATFORM.PddAndroid&&localStorage.getItem(lr)&&(n=1),e.abrupt("return",{isDetermined:n,isEnabled:o,needReconfirm:a});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function mr(){return fr.apply(this,arguments)}function fr(){return(fr=c()(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(_e.getCurrentPlatform)().isNativePlatform){e.next=8;break}return e.next=4,dr();case 4:return t=e.sent,r=t.isEnabled,n=t.isDetermined,e.abrupt("return",!(!r||!n));case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(){return vr.apply(this,arguments)}function vr(){return(vr=c()(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={scene:"install_store"},e.next=4,Object(ke.invokeBridgeCallNativeFun)("AMLocation","getLocationId",t);case 4:return r=e.sent,n=(r||{}).location_id,e.abrupt("return",{locationId:n});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{latitude:0,longitude:0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function yr(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yr(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yr(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var br=null;function _r(){return kr.apply(this,arguments)}function kr(){return(kr=c()(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!br){e.next=2;break}return e.abrupt("return",br);case 2:if(t={latitude:0,longitude:0},r=Object(_e.getCurrentPlatform)(),!r.isNativePlatform||!ur()){e.next=11;break}return e.next=8,hr();case 8:t=e.sent,e.next=26;break;case 11:if(!r.isWeChatMiniProgram&&!r.isWeChatPlatform||!window.wx||!window.wx.getLocation){e.next=17;break}return e.next=14,or();case 14:t=e.sent,e.next=26;break;case 17:if(!r.isQQPlatform){e.next=23;break}return e.next=20,ir();case 20:t=e.sent,e.next=26;break;case 23:return e.next=25,tr();case 25:t=e.sent;case 26:return e.next=28,mr();case 28:return n=e.sent,(t=gr(gr({},t),{},{hasLocAuth:n}))&&t.latitude&&(br=t),e.abrupt("return",t);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e){return new Promise((function(t,r){setTimeout(t,e)})).then((function(e){throw Error("query location timeout")}))}var Ir=c()(i.a.mark((function e(){var t,r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(_e.getCurrentPlatform)(),r=t.isNativePlatform,n={latitude:0,longitude:0},o=t.platform===_e.PLATFORM.PddAndroid&&Object(_e.compareVersion)(t.version,"5.10.0")>=0||t.platform===_e.PLATFORM.PddIOS&&Object(_e.compareVersion)(t.version,"5.6.0")>=0,e.prev=4,!o){e.next=11;break}return e.next=8,Promise.race([_r(),Sr(1e4)]);case 8:n=e.sent,e.next=14;break;case 11:return e.next=13,Promise.race([_r(),Sr(3e3)]);case 13:n=e.sent;case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(4),a=!o,n=gr(gr({},n),{},{hasLocAuth:a});case 21:return e.abrupt("return",gr(gr({enabled:!0},n),{},{isNativePlatform:r}));case 22:case"end":return e.stop()}}),e,null,[[4,16]])})));var wr=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){var e;l()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).listWrapperRef=w.a.createRef(),e.listRef=w.a.createRef(),e.state={isLoading:!1},e._handleScroll=function(){e.checkNeedLoadDown()&&!e.state.isLoading&&(e.setState({isLoading:!0}),e.props.loadMoreShops((function(){e.setState({isLoading:!1})})))},e.checkNeedLoadDown=function(){if(e.listRef.current){var t=e.props.hasMore;if(e.listRef.current.getBoundingClientRect().bottom<window.innerHeight+20&&t)return!0}return!1},e}return p()(r,[{key:"componentDidMount",value:function(){this.handleScroll=Xt()(this._handleScroll,300),this.listWrapperRef&&this.listWrapperRef.current&&(Object(P.disableScroll)(this.listWrapperRef.current),this.listWrapperRef.current.addEventListener("scroll",this.handleScroll))}},{key:"renderList",value:function(){var e=this,t=this.props.list;return t&&t.length?w.a.createElement("div",{className:"list-wrapper",ref:this.listRef},t.map((function(t,r){return w.a.createElement("div",{className:"shop-item",key:r,onClick:function(t){e.props.onSelectShop(t,r)}},w.a.createElement("div",{className:"shop-name"},w.a.createElement("div",{className:A()("select-icon",{active:t.selected})}),t.nearestTag?w.a.createElement("div",{className:"shop-name-container"},w.a.createElement("div",{className:"shop-name-text-tag"},t.name),w.a.createElement("span",{className:"shop-nearst-tag"},t.nearestTag)):w.a.createElement("div",{className:"shop-name-text"},t.name)),w.a.createElement("div",{className:"location"},w.a.createElement("div",{className:"address"},t.address),w.a.createElement("div",{className:t.distance?"distance":""},t.distance)))})),this.state.isLoading&&w.a.createElement("div",{className:"downloader-container"},w.a.createElement("div",{className:"loader-spinner "}))):w.a.createElement("div",{className:"no-shop-hint"},"抱歉，该区域暂无可用门店")}},{key:"render",value:function(){return w.a.createElement("div",{className:"shop-list-container",ref:this.listWrapperRef},this.renderList())}}]),r}(I.Component);function Pr(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Cr="undefined"!=typeof window,xr="请重新选择地区",Er=1,Dr=2,Nr=3,Tr=4,jr=1e6,Ar=function(e){f()(a,e);var t,n,o=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(a);function a(e){var t;return l()(this,a),(t=o.call(this,e)).loadShops=function(){var e=c()(i.a.mark((function e(r){var n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_,k,I;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=(n=r||{}).provinceID,a=n.cityID,s=n.districtID,e.next=4,Ir();case 4:return c=e.sent,u=c.longitude,l=c.latitude,d=c.hasLocAuth,p=c.locationId,m={longitude:u,latitude:l,province_id:o,city_id:a,page:t.page,size:10,goods_id:t.props.goods.goodsID,has_loc_auth:d,location_id:p},s&&s!==jr&&(m.district_id=s),f="api/turing/mall/query_neighbor_mall_list_v2",1===t.props.actionType&&(f="api/osaka/additional/store_install/query_store_list",v=Object(_e.getCurrentPlatform)(),y="WGS84",v.platform===_e.PLATFORM.PddIOS&&(y="BD09"),g=t.props,b=g.selectedSkuID,_=g.skuInfos,m=Or(Or({},m),{},{coord_type:y,cat_id_3:t.props.goods.catID3,cat_id_4:t.props.goods.catID4,template_sn_list:S()(t.props.goods,"ui.sku_section.car_shop.vas_template_id"),mall_id:t.props.goods.mallID,sku_id:Number(b),sku_attribute:b&&(null===(h=_[b])||void 0===h?void 0:h.attribute)||""})),e.next=16,Fe({method:"POST",url:f,data:m});case 16:if(!(k=e.sent)){e.next=20;break}return I=(k.mall_store_info_list||[]).map((function(e){var t=S()(e,"fee")>=0?Object(P.priceCent)(e.fee):-1;return{mallID:e.mall_id,shopID:e.store_id,distance:e.distance,name:e.store_name,address:e.store_address,nearestTag:e.nearest_tag,fee:t,srvType:e.srv_type}})),e.abrupt("return",I);case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(0);case 24:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),t.loadMoreShops=function(){var e=c()(i.a.mark((function e(r){var n,o,a,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.state,o=n.provinceID,a=n.cityID,s=n.districtID,c=n.shopList,e.next=4,t.loadShops({provinceID:o,cityID:a,districtID:s});case 4:u=e.sent,t.page++,l=!!u.length,t.setState({shopList:c.concat(u),hasMore:l}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:return e.prev=12,r(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,10,12,15]])})));return function(t){return e.apply(this,arguments)}}(),t.onShopLoaded=function(e,r){t.page++;var n=e.length,o=e.find((function(e){return e.shopID===r}));o&&(o.selected=!0),t.setState({shopList:e,shopID:o?o.shopID:"0",shopName:o?o.name:"",shopAddress:o?o.address:"",hasMore:n,nearestTag:o?o.nearestTag:"",fee:o?o.fee:-1,srvType:o?o.srvType:""},(function(){t.selectRegionTab(Tr)}))},t.onSelectShop=function(e,r){e&&e.stopPropagation&&e.stopPropagation();var n=t.state.shopList.map((function(e,t){return e.selected=r===t,e})),o=n[r];t.setState({shopList:n,shopID:o.shopID,shopName:o.name,shopAddress:o.address,nearestTag:o.nearestTag,fee:o.fee,srvType:o.srvType},(function(){t.selectRegionTab(Tr)}))},t.confirmShop=function(e){e&&e.stopPropagation&&e.stopPropagation();var r=t.state,n=r.provinceID,o=r.cityID,a=r.districtID,i=r.shopID,s=r.shopName,c=r.shopAddress,u=r.nearestTag,l=r.fee,d=r.srvType;if("0"!==i){var p={provinceID:n,cityID:o,districtID:a,shopID:i,shopName:s,shopAddress:c,nearestTag:u,fee:l,srvType:d};t.hideRegionSelectorPanel(e,p)}else Ne("请选择门店")},t.state={currentRegionTab:Er,panelStyle:{transform:"translateY(100%)"},provinceID:"0",provinceName:"",provinces:null,cityID:"0",cityName:"",cities:null,districtID:"0",districtName:"",districts:null,shopID:"0",shopList:[],hasMore:!0,nearestTag:""},t.page=1,t.provincesLoaded=!1,t.citiesLoaded=!1,t.districtsLoaded=!1,t.regionSelectorHeader=w.a.createRef(),t}return p()(a,[{key:"componentWillMount",value:function(){Cr&&r("FIFS")}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("region-selector-list-".concat(this.state.currentRegionTab));Object(P.disableScroll)(t);var r=this.props.addressInfo;r&&r.shopID?this.onAddressInfoLoaded(this.props.addressInfo):this.loadRegions(Er,1).then((function(t){e.onProvincesLoaded(e.state.provinceID,t),e.showRegionSelectorPanel()})).catch((function(){Ne(xr)}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.addressInfo||{},r=this.props.addressInfo||{};t.province_id+""==r.province_id+""&&t.city_id+""==r.city_id+""&&t.district_id+""==r.district_id+""||this.onAddressInfoLoaded(t)}},{key:"onAddressInfoLoaded",value:(n=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:r=t.regionId||1,n=t.provinceID,o=t.cityID,a=t.districtID,s=t.shopID,c=setTimeout((function(){Object(Se.showWithoutBg)()}),500),Promise.all([this.loadRegions(Er,r),this.loadRegions(Dr,n),this.loadRegions(Nr,o),this.loadShops({provinceID:n,cityID:o,districtID:a})]).then((function(e){u.onProvincesLoaded(n,e[0]),u.onCitiesLoaded(o,e[1]),u.onDistrictsLoaded(a,e[2]),u.onShopLoaded(e[3],s),u.showRegionSelectorPanel(),clearTimeout(c),Object(Se.hide)()})).catch((function(){Ne(xr),clearTimeout(c),Object(Se.hide)()}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"generateHeader",value:function(){var e=this,t=this.state,r=t.currentRegionTab,n=t.provinceID,o=t.provinceName,a=t.cityID,i=t.cityName,s=t.districtID,c=t.districtName,u=t.shopID,l=t.shopName;return w.a.createElement("div",{className:"mars-panel-header",ref:this.regionSelectorHeader},w.a.createElement("div",{className:"panel-header-tag-wrapper"},w.a.createElement("div",{className:"mars-ph-province ".concat(1===r?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(Er,t)}},n+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,o)),n+""!="0"&&w.a.createElement("div",{className:"mars-ph-city ".concat(2===r?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(Dr,t)}},a+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,i)),a+""!="0"&&w.a.createElement("div",{className:"mars-ph-district ".concat(3===r?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(Nr,t)}},s+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,c)),s+""!="0"&&w.a.createElement("div",{className:"mars-ph-shop ".concat(4===r?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(Tr,t)}},u+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,l))))}},{key:"generateRegions",value:function(){var e=this,t=this.state,r=t.currentRegionTab,n=t.provinces,o=t.provinceID,a=t.cities,i=t.cityID,s=t.districts,c=t.districtID,u=1===r&&n&&n.map((function(t,r){var n=t.region_id+""==o+""?"region-active":"";return w.a.createElement("li",{key:"province-".concat(r),onClick:function(t){return e.selectProvince(t,r)},className:n},w.a.createElement("span",null,t.region_name))})),l=2===r&&a&&a.map((function(t,r){var n=t.region_id+""==i+""?"region-active":"";return w.a.createElement("li",{key:"city-".concat(r),onClick:function(t){return e.selectCity(t,r)},className:n},w.a.createElement("span",null,t.region_name))})),d=3===r&&s&&s.map((function(t,r){var n=t.region_id+""==c+""?"region-active":"";return w.a.createElement("li",{key:"city-".concat(r),onClick:function(t){return e.selectDistrict(t,r)},className:n},w.a.createElement("span",null,t.region_name))}));return w.a.createElement("div",{className:"mars-regions"},1===r&&w.a.createElement("ul",{id:"region-selector-list-1",className:"mars-regions-p"},u),2===r&&w.a.createElement("ul",{id:"region-selector-list-2",className:"mars-regions-c"},l),3===r&&w.a.createElement("ul",{id:"region-selector-list-3",className:"mars-regions-d"},d),4===r&&w.a.createElement("ul",{id:"region-selector-list-4",className:"shop-list-wrapper"},w.a.createElement(wr,{list:this.state.shopList,loadMoreShops:this.loadMoreShops,hasMore:this.state.hasMore,onSelectShop:this.onSelectShop,confirmShop:this.confirmShop})))}},{key:"selectDistrict",value:function(e,t){e&&e.stopPropagation();var r=this.state.districts[t];r&&this.onDistrictEdited(r)}},{key:"onDistrictEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.region_id,n=t.region_name,o={districtID:r,districtName:n,shopID:"0"};this.page=1,this.setState((function(e){return o}),c()(i.a.mark((function t(){var r,n,o,a,s,c,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.provinceID,o=r.cityID,a=r.districtID,s=setTimeout((function(){Object(Se.showWithoutBg)()}),500),t.prev=2,t.next=5,e.loadShops({provinceID:n,cityID:o,districtID:a});case 5:c=t.sent,clearTimeout(s),Object(Se.hide)(),e.page++,u=!!c.length,e.setState({shopList:c,hasMore:u}),e.selectRegionTab(Tr),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),Ne(xr);case 17:case"end":return t.stop()}}),t,null,[[2,14]])}))))}},{key:"selectCity",value:function(e,t){e&&e.stopPropagation();var r=this.state.cities[t];r&&this.onCityEdited(r)}},{key:"onCityEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.citiesLoaded)return!1;var r=t.region_id,n=t.region_name;if(r+""!="0"){var o={cityID:r,cityName:n};this.districtsLoaded=!1,this.onDistrictsLoaded("0",[]).then((function(){e.setState((function(e){return o}),(function(t){e.loadRegions(Nr,r).then((function(t){var r=e.state.districtID;e.onDistrictsLoaded(r,t),e.selectRegionTab(Nr)}))}))}))}}},{key:"onDistrictsLoaded",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(r=r.regions||[]).length&&r.unshift({region_id:jr,region_name:"全部区域"});var n=this.isRegionIDContainInRegions(e,r),o={districts:r||[],districtID:n&&e||"0",districtName:n&&n.region_name||""};return new Promise((function(e,r){t.setState((function(e){return o}),(function(r){t.districtsLoaded=!0,e()}))}))}},{key:"selectProvince",value:function(e,t){e&&e.stopPropagation();var r=this.state.provinces[t];r&&this.onProvinceEdited(r)}},{key:"onProvinceEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.provincesLoaded){var r=t.region_id,n=t.region_name;r+""!="0"&&(this.citiesLoaded=!1,this.districtsLoaded=!1,this.onCitiesLoaded("0",[]).then((function(){e.onDistrictsLoaded("0",[]).then((function(){var t={provinceID:r,provinceName:n};e.setState((function(e){return t}),(function(t){e.loadRegions(Dr,r).then((function(t){var r=e.state.cityID;e.onCitiesLoaded(r,t),e.selectRegionTab(Dr)}))}))}))})))}}},{key:"onCitiesLoaded",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.self_city_id;r=r.regions||[],this.removeToFirst(r,n);var o=this.isRegionIDContainInRegions(e,r),a={cities:r,cityID:o&&e||0,cityName:o&&o.region_name||""};return new Promise((function(e,r){t.setState((function(e){return a}),(function(r){t.citiesLoaded=!0,e()}))}))}},{key:"loadRegions",value:(t=c()(i.a.mark((function e(t,r){var n,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.actionType,o=1===n?"api/osaka/additional/store_install/query_store_regions":"api/turing/mall/query_store_region",a=1===n?{cat_id_3:this.props.goods.catID3,cat_id_4:this.props.goods.catID4,mall_id:this.props.goods.mallID,template_sn_list:S()(this.props.goods,"ui.sku_section.car_shop.vas_template_id")||""}:{},e.prev=3,e.next=6,Fe({method:"POST",url:o,data:Or({region_type:t,goods_id:this.props.goods.goodsID,region_id:r},a)});case 6:return s=e.sent,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(3);case 12:return e.prev=12,e.finish(12);case 14:case"end":return e.stop()}}),e,this,[[3,10,12,14]])}))),function(e,r){return t.apply(this,arguments)})},{key:"isRegionIDContainInRegions",value:function(e,t){if(!t)return null;for(var r=0;r<t.length;++r){var n=t[r];if(n.region_id+""==e+"")return n}return null}},{key:"removeToFirst",value:function(e,t){var r=this.isRegionIDContainInRegions(t,e),n=e.indexOf(r);n<0||(e.splice(n,1),e.unshift(r))}},{key:"onProvincesLoaded",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.self_province_id;r=r.regions||[],this.removeToFirst(r,n);var o=this.isRegionIDContainInRegions(e,r),a={provinces:r,provinceID:e||"0",provinceName:o&&o.region_name||""};return new Promise((function(e,r){t.setState((function(e){return a}),(function(r){t.provincesLoaded=!0,e()}))}))}},{key:"hideRegionSelectorPanel",value:function(e,t){e&&e.stopPropagation(),this.setState({panelStyle:{transform:"translateY(100%)"}}),this.props.hideAddressSelector&&this.props.hideAddressSelector(t),this.props.onClose&&this.props.onClose()}},{key:"selectRegionTab",value:function(e,t){var r=this;t&&t.stopPropagation(),this.setState((function(t){return{currentRegionTab:e}}),(function(t){if(Object(P.disableScroll)(document.getElementById("region-selector-list-".concat(e))),r.regionSelectorHeader&&r.regionSelectorHeader.current){var n=r.regionSelectorHeader.current;if(n.scrollWidth>n.offsetWidth){var o=n.scrollWidth-n.offsetWidth;n.scrollLeft=e>2?o:0,n.style.transition="all .1s"}}}))}},{key:"showRegionSelectorPanel",value:function(e){e&&e.stopPropagation()&&e.preventDefault(),this.setState({panelStyle:{transform:"translateY(0)"}})}},{key:"render",value:function(){var e=this,t=this.state,r=t.panelStyle,n=t.currentRegionTab;return w.a.createElement("div",{id:"region-selector",className:"m-addr-region-selector"},w.a.createElement("div",{className:"bg",onClick:function(t){return e.hideRegionSelectorPanel(t)}}),w.a.createElement("div",{id:"region-selector-panel",className:"mars-panel",style:r},w.a.createElement("div",{className:"region-selector-title"},w.a.createElement("div",{className:"back-warp",onClick:function(t){return e.hideRegionSelectorPanel(t)}},w.a.createElement("div",{className:"back-icon"})),w.a.createElement("div",{className:"region-selector-title-txt"},"根据区域选择门店")),this.generateHeader(),this.generateRegions(),4===n&&w.a.createElement("div",{className:"confirm-shop-btn",onClick:this.confirmShop},"确认门店")))}}]),a}(I.Component);Ar.defaultProps={};var Rr,Mr,Lr=Ar;function Br(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ur="根据区域选择门店",Hr=(Mr=function(e){f()(a,e);var t,r,n,o=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(a);function a(){var e;l()(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={addressSelected:!1,storeName:Ur,storeAddress:"",showShop:!1,showRegionSelector:!1,nearestTag:"",fee:-1,hasLocAuth:!1,longitude:-1,latitude:-1,locationId:0},e.onClickDeliver=function(t){return c()(i.a.mark((function r(){var n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_,k,I,w;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.props,o=n.actionType,a=n.goods,s=n.updateSelectedSendWays,c=e.state.fee,u=S()(a,"ui.sku_section.car_shop.send_type")||[],l=u[t]||{},d=l.show_shop,p=l.type,m=l.store_delivery_id,f=1===d&&c>=0?c:0,h=1===o&&c>=0?{fee:f,type:p,storeDeliveryId:m}:{type:p,storeDeliveryId:m},r.next=9,s(h);case 9:if(1!==d&&e.setState({showShop:!1}),!e.state.showShop&&1===d){r.next=12;break}return r.abrupt("return");case 12:if(r.prev=12,y=null,e.state.addressInfo){r.next=28;break}return v=setTimeout((function(){Object(Se.showWithoutBg)()}),500),r.next=18,Ir();case 18:return g=r.sent,b=g.longitude,_=g.latitude,k=g.hasLocAuth,I=g.locationId,e.setState({longitude:b,latitude:_,hasLocAuth:k,locationId:I}),r.next=26,e.requestMall(b,_,k,I);case 26:(y=r.sent)&&e.setMallInfo(y);case 28:if(w=S()(y,"fee")||e.state.fee,!(1===o&&w>=0)){r.next=32;break}return r.next=32,s({type:p,storeDeliveryId:m,fee:w});case 32:r.next=36;break;case 34:r.prev=34,r.t0=r.catch(12);case 36:return r.prev=36,e.setState({showShop:!0}),clearTimeout(v),Object(Se.hide)(),r.finish(36);case 41:case"end":return r.stop()}}),r,null,[[12,34,36,41]])})))},e.getDeliveryData=function(){var t=e.state,r=t.addressInfo,n=t.addressSelected,o=(S()(e.props.goods,"ui.sku_section.car_shop.send_type")||[]).find((function(t){return t.type===S()(e.props.selectedSendWays,"type")}));if(o)return 1===o.show_shop?n&&r?{shopID:r.shopID,deliveryId:o.store_delivery_id,srvType:r.srvType}:(Ne("请选择门店"),!1):o.electronic_voucher?{electronicVoucher:o.electronic_voucher}:{deliveryId:o.store_delivery_id};var a=S()(e.props.goods,"ui.sku_section.car_shop.title")||"送货方式";return Ne("请选择"+a),!1},e}return p()(a,[{key:"requestMall",value:(n=c()(i.a.mark((function e(t,r,n,o){var a,s,c,u,l,d,p,m,f,h,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="api/turing/mall/query_neighbor_mall_info_v2",s={},1===this.props.actionType&&(l=Object(_e.getCurrentPlatform)(),d="WGS84",l.platform===_e.PLATFORM.PddIOS&&(d="BD09"),a="api/osaka/additional/store_install/query_neighbor_store",p=S()(this.props.goods,"ui.sku_section.car_shop.vas_template_id"),m=this.props,f=m.selectedSkuID,h=m.skuInfos,s={coord_type:d,cat_id_3:this.props.goods.catID3,cat_id_4:this.props.goods.catID4,template_sn_list:p,mall_id:this.props.goods.mallID,sku_id:Number(f),store_id:null===(c=this.state.addressInfo)||void 0===c?void 0:c.shopID,sku_attribute:f&&(null===(u=h[f])||void 0===u?void 0:u.attribute)||""}),e.next=6,Fe({method:"POST",url:a,data:Fr({goods_id:this.props.goods.goodsID,longitude:t||0,latitude:r||0,has_loc_auth:n||!1,location_id:o},s)});case 6:return v=e.sent,S()(v,"fee")>=0&&(v.fee=+Object(P.priceCent)(v.fee)),e.abrupt("return",v);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,r,o){return n.apply(this,arguments)})},{key:"setMallInfo",value:function(e){if(e.store_id){var t={provinceID:e.province_id,cityID:e.city_id,districtID:e.district_id,shopID:e.store_id,srvType:e.srv_type};this.setState({storeName:e.store_name,storeAddress:e.store_address,addressInfo:t,addressSelected:!0,nearestTag:S()(e,"nearest_tag"),fee:S()(e,"fee")})}}},{key:"componentDidMount",value:(r=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(_e.getCurrentPlatform)(),r=t.isNativePlatform,e.next=4,mr();case 4:if(n=e.sent,!r||!n){e.next=16;break}return e.next=8,Ir();case 8:return o=e.sent,a=o.longitude,s=o.latitude,c=o.locationId,e.next=14,this.requestMall(a,s,n,c);case 14:(u=e.sent)&&this.setMallInfo(u);case 16:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(t=c()(i.a.mark((function e(t,r){var n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_,k,I,w;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,o=n.actionType,a=n.goods,s=n.updateSelectedSendWays,c=n.selectedSkuID,!this.state.showShop||1!==o||c===(null==t?void 0:t.selectedSkuID)&&(null==r?void 0:r.showShop)===this.state.showShop){e.next=29;break}if(u=this.state,l=u.hasLocAuth,d=u.longitude,p=u.latitude,m=u.locationId,f=Object(_e.getCurrentPlatform)(),h=f.isNativePlatform,e.prev=5,!(d<0||p<0||!(null===(v=this.state.addressInfo)||void 0===v?void 0:v.shopID)||l&&0===d&&0===p||h&&!m)){e.next=14;break}return e.next=9,Ir();case 9:y=e.sent,d=y.longitude,p=y.latitude,l=y.hasLocAuth,m=y.locationId;case 14:return e.next=16,this.requestMall(d,p,l,m);case 16:if((g=e.sent)&&this.setMallInfo(g),b=S()(g,"fee")||this.state.fee,_=S()(a,"ui.sku_section.car_shop.send_type")||[],k=_.find((function(e){return 1===e.show_shop}))||{},I=k.type,w=k.store_delivery_id,!(1===o&&b>=0)){e.next=25;break}return e.next=25,s({type:I,storeDeliveryId:w,fee:b});case 25:e.next=29;break;case 27:e.prev=27,e.t0=e.catch(5);case 29:case"end":return e.stop()}}),e,this,[[5,27]])}))),function(e,r){return t.apply(this,arguments)})},{key:"showRegionSelector",value:function(){Ee(w.a.createElement(Lr,{hideAddressSelector:this.hideAddressSelector,addressInfo:this.state.addressInfo,goods:this.props.goods,actionType:this.props.actionType,selectedSkuID:this.props.selectedSkuID,skuInfos:this.props.skuInfos}))}},{key:"hideAddressSelector",value:function(e){var t=this.props,r=t.actionType,n=t.updateSelectedSendWays,o=t.selectedSendWays;if(e){var a=e||{},i=a.shopID,s=a.shopName,c=a.shopAddress,u=a.nearestTag,l=a.fee,d=this.state.addressSelected||i;this.setState({storeName:s||this.state.storeName,storeAddress:c||this.state.storeAddress,addressInfo:e||this.state.addressInfo,nearestTag:u,fee:l,addressSelected:d},(function(){1===r&&l>=0&&n(Fr(Fr({},o),{},{fee:l}))}))}}},{key:"render",value:function(){var e=this,t=this.state,r=t.storeName,n=t.nearestTag,o=t.fee,a=S()(this.props.goods,"ui.sku_section.car_shop.send_type")||[],i=S()(this.props.goods,"ui.sku_section.car_shop.title")||"送货方式",s=this.props.actionType;return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"sku-deliver-area"},w.a.createElement("div",{className:"sku-deliver-title"},i),w.a.createElement("div",{className:"sku-deliver-content"},(a||[]).map((function(t,r){var n=S()(e.props.selectedSendWays,"type")===t.type,a=1===S()(t,"show_shop")&&o>=0?o:0;return w.a.createElement("div",{key:r,className:A()("sku-deliver-way",{selected:n}),onClick:e.onClickDeliver(r),index:r},1===s&&o>=0?"".concat(t.type," ¥").concat(a):t.type)})))),this.state.showShop&&w.a.createElement("div",{className:"sku-shop-area"},w.a.createElement("div",{className:"title"},S()(this.props.goods,"ui.sku_section.car_shop.store_title")),w.a.createElement("div",{className:"content",onClick:this.showRegionSelector},w.a.createElement("div",{className:"sku-shop-info"},w.a.createElement("div",{className:"sku-store"},w.a.createElement("div",{className:"sku-store-name"},r),!!n&&w.a.createElement("span",{className:"sku-nearst-tag"},n)),w.a.createElement("div",{className:"sku-address"},this.state.storeAddress)),w.a.createElement("div",{className:"sku-address-select"},this.state.storeName!==Ur?"修改":"去选择",w.a.createElement("span",{className:"enter"})))))}}]),a}(I.Component),Rr=Mr,Xe()(Rr.prototype,"requestMall",[$e],Object.getOwnPropertyDescriptor(Rr.prototype,"requestMall"),Rr.prototype),Xe()(Rr.prototype,"setMallInfo",[$e],Object.getOwnPropertyDescriptor(Rr.prototype,"setMallInfo"),Rr.prototype),Xe()(Rr.prototype,"showRegionSelector",[$e],Object.getOwnPropertyDescriptor(Rr.prototype,"showRegionSelector"),Rr.prototype),Xe()(Rr.prototype,"hideAddressSelector",[$e],Object.getOwnPropertyDescriptor(Rr.prototype,"hideAddressSelector"),Rr.prototype),Rr);var Vr=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"render",value:function(){var e=this,t=this.srvItem;if(t.length<1)return null;var r=S()(this.props.goods,"ui.sku_section.home_install.title")||"服务",n=S()(this.props.goods,"ui.sku_section.home_install.tip")||"服务费用根据实际收货地址浮动";return w.a.createElement("div",{className:"sku-on-site-area"},w.a.createElement("div",{className:"sku-on-site-title"},r),w.a.createElement("div",{className:"sku-on-site-content"},(t||[]).map((function(t,r){var n=S()(e.props.selectedHomeIns,"srv_type")===t.srv_type;return w.a.createElement("div",{key:r,className:A()("sku-on-site-way",{selected:n}),onClick:function(){e.props.handleHomeInsClick&&e.props.handleHomeInsClick(n?{}:t)}},t.desc)}))),w.a.createElement("div",{className:"sku-on-site-desc"},n))}},{key:"srvItem",get:function(){var e=this.props,t=e.selectedSkuID,r=e.skuInfos,n=e.goods;return t?(r[t]||{}).srvItem||[]:S()(n,"ui.sku_section.home_install.srv_item")||[]}}]),r}(w.a.Component),zr=r("oobu"),Wr=r.n(zr),Qr=function(e){var t=e.goods,r=e.selectedSkuID,n=e.skuInfos,o=r?S()(n,[[r],"bottomTip"])||"":S()(t,"ui.sku_section.unselect_bottom_tip")||"";return o?w.a.createElement("div",{className:Wr.a.bottomTip},w.a.createElement("img",{className:Wr.a.icon,src:"https://promotion.pddpic.com/upload/commodity/2020-10-16/a67c3cb8-5452-4269-bc6b-65c6e94a1002.png.slim.png"}),w.a.createElement("span",{className:Wr.a.tip},o)):null},qr=r("ZL4E"),Gr=r.n(qr),Yr=r("O7Vp"),Xr=r("91HH"),Jr=r("/JQB"),Kr=r.n(Jr);function Zr(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function $r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var en={border:void 0,borderColor:void 0,borderWidth:void 0,borderStyle:void 0,borderRadius:void 0},tn=Object(I.memo)((function(e){var t=e.style,r=e.size,n=e.borderColor,o=e.lazy,a=e.src,i=e.processParam,s=e.SimpleEmageProps,c=void 0===s?{}:s,u=x()(e,["style","size","borderColor","lazy","src","processParam","SimpleEmageProps"]);Object(Xr.useStyles)(Kr.a);var l=Object(I.useMemo)((function(){return $r($r($r({},t),en),{},{width:r,height:r})}),[t,r]),d=Object(I.useMemo)((function(){return n?{boxShadow:"0 0 0 2px ".concat(n)}:{}}),[n]),p=$r($r({},c),{},{src:a,lazy:o,processParam:i});return w.a.createElement("div",nt()({},u,{className:A()(u.className,Kr.a.root,n&&Kr.a.hasBorder),style:l}),w.a.createElement(Yr.SimpleEmage,nt()({},p,{className:A()(Kr.a.image,p.className)})),w.a.createElement("div",{className:Kr.a.border,style:d}))})),rn=r("Q/gu"),nn=r.n(rn);function on(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function an(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?on(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):on(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sn=Object(I.memo)((function(e){var t=e.srcList,r=e.size,n=e.offset,o=e.AvatarProps,a=void 0===o?{}:o,i=x()(e,["srcList","size","offset","AvatarProps"]);Object(Xr.useStyles)(nn.a);var s=function(e,t){var r=e.replace(/[\d-.]/g,""),n=Number(e.replace(/[^\d-.]/g,""));return"-".concat(n*t).concat(r)}(r,n),c=(t||[]).map((function(e,t){var n=0===t?void 0:s,o=-t,i=an(an({},a.style),{},{zIndex:o,marginLeft:n}),c=a.borderColor||"#FFFFFF";return w.a.createElement(tn,nt()({key:e||t},a,{src:e,size:r,style:i,className:A()(nn.a.avatar,a.className),borderColor:c}))}));return w.a.createElement("div",nt()({},i,{className:A()(i.className,nn.a.root)}),c)}));sn.Offset={DEFAULT:.15,CLOSER:.5},sn.defaultProps={offset:sn.Offset.DEFAULT};var cn,un,ln=sn,dn=function(e){var t=e.setSkuStyleStatus,r=e.styleStatus,n=e.changeToGroupBuy,a=e.group,i=e.goods,s=e.selectedSkuID,c=e.skuInfos,u=e.goodsNumber,l=void 0===u?1:u,d=e.skuDirectOrder,p=void 0!==d&&d;if(s&&(S()(c,[[s],"skuPreSaleTip"],"")||""))return null;var m=s?S()(c,[[s],"normalSavePrice"]):i.unselectNormalSavePrice||"";if(1==+a.requireNum&&+m>0){var f=S()(i,"combineGroups.recommendGroup.memberInfoList")||[],h=f.length>0?"拼单购买无需等待":"拼单购买更优惠",v=S()(i,"combineGroups.recommendGroup.buttonDesc")||"去拼单",y=(f||[]).map((function(e){return e.avatar}));return w.a.createElement(tt.a,{trackingInfo:{op:"impr",page_el_sn:4842358,goods_id:i.goodsID}},w.a.createElement("div",{className:A()(Gr.a.skuGroupBuyContainer,o()({},Gr.a.startHide,1===r)),onClick:function(){Object(O.sendClickMetrics)({op:"click",page_el_sn:4842358,goods_id:i.goodsID}),t(1),setTimeout((function(){n(),t(2)}),200),setTimeout((function(){p?Te("已切换为拼单"):Ne("已切换为拼单")}),500)}},w.a.createElement("div",{className:Gr.a.skuGroupBuyAvatars},1===y.length&&w.a.createElement(tn,{src:y[0],size:".24rem"}),y.length>1&&w.a.createElement(ln,{srcList:y.slice(0,3),size:".24rem",offset:.5})),w.a.createElement("div",{className:Gr.a.skuGroupBuyHint},h,"，立省",w.a.createElement("span",null,Object(P.price)(m*l)),"元"),w.a.createElement("div",{className:Gr.a.skuGroupBuyHintBtn,"data-active":"red"},v)))}return null},pn=r("i4d4"),mn=r.n(pn),fn=function(e){var t=e.priceInfo,r=t.promotionPriceDesc,n=t.tipColor,o=t.tipFontSize;return r?w.a.createElement("div",{className:mn.a.skuQuantityTip},w.a.createElement("div",{className:mn.a.skuQuantityTipTxt,style:{color:n,fontSize:"".concat(o/100,"rem")}},r)):null},hn=(r("LuAP"),r("uorM")),vn=r.n(hn);function yn(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bn,_n={free:vn.a.skuSpecValue,selected:A()(vn.a.skuSpecValue,vn.a.skuSpecValueSelected),disable:A()(vn.a.skuSpecValue,vn.a.skuSpecValueDisable)},kn=1e5,Sn=(un=function(e){f()(u,e);var t,r,n,a,s=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(u);function u(e){var t;l()(this,u),(t=s.call(this,e)).deliverRef=w.a.createRef(),t.skuIphoneRef=w.a.createRef(),t.getSkuRef=function(){return t.skuSelectorBodyRef};var r=t.buildSkuData(e.goods.skus),n=r.skuTypeValues,o=r.typeHashToSkuID,a=r.currentSelect,i=r.skuInfos;return t.state={selectedSkuID:null,goodsNumber:1,skuInfos:i,currentSelect:a,skuTypeValues:n,typeHashToSkuID:o,selectedHomeIns:{},selectedSendWays:{},styleStatus:0},t}return p()(u,[{key:"componentDidMount",value:(a=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.keys(this.state.skuInfos).filter((function(e){return d.state.skuInfos[e].quantity>0})),!(r=1===t.length?t[0]:this.props.goods&&this.props.goods.selectSkuId)){e.next=6;break}this.selectSkuId({skuId:r}),e.next=34;break;case 6:n=!0,o=!1,a=void 0,e.prev=9,s=this.state.skuTypeValues[Symbol.iterator]();case 11:if(n=(c=s.next()).done){e.next=20;break}if(1!==(u=c.value).values.length){e.next=17;break}return l=u.type,e.next=17,this.selectOneValue(l,u.values[0]);case 17:n=!0,e.next=11;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),o=!0,a=e.t0;case 26:e.prev=26,e.prev=27,n||null==s.return||s.return();case 29:if(e.prev=29,!o){e.next=32;break}throw a;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}}),e,this,[[9,22,26,34],[27,,29,33]])}))),function(){return a.apply(this,arguments)})},{key:"buildSkuData",value:function(e){var t=[],r={},n={},o={};return e.forEach((function(e){var a=e.specs,i=e.skuID;o[i]=e;var s={};a.forEach((function(e){var r=e.spec_key,o=e.spec_value;s[r]=o;var a=t.filter((function(e){return e.type===r}));if(a&&a[0]){var i=a[0].values;!i.includes(o)&&i.push(o)}else n[r]=null,t.push({type:r,values:[o]})})),r[JSON.stringify(s)]=i})),{skuTypeValues:t,typeHashToSkuID:r,currentSelect:n,skuInfos:o}}},{key:"checkHas",value:function(e){var t=this.props.goods.skus,r=!0,n=!1,o=void 0;try{for(var a,i=function(){var t=a.value;if(t.quantity<=0)return"continue";var r={};t.specs.forEach((function(e){var t=e.spec_key,n=e.spec_value;r[t]=n}));var n=!0;for(var o in e)e[o]&&r[o]!==e[o]&&(n=!1);return n?{v:t.skuID}:void 0},s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=i();if("continue"!==c&&"object"===me()(c))return c.v}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return!1}},{key:"getButtonStatus",value:function(e){var t=this,r=e||this.state.currentSelect,n=this.props.goods.skus,a={};return n.forEach((function(e){e.specs.forEach((function(e){var n=e.spec_key,i=e.spec_value,s=gn(gn({},r),{},o()({},n,i)),c=t.checkHas(s);a[n]=gn(gn({},a[n]),{},o()({},i,c))}))})),a}},{key:"selectSkuId",value:(n=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.skuId,n=t.goodsNumber,o=void 0===n?1:n,a=this.state.typeHashToSkuID,e.t0=i.a.keys(a);case 3:if((e.t1=e.t0()).done){e.next=17;break}if(s=e.t1.value,a[s]!==+r){e.next=15;break}c=JSON.parse(s),e.t2=i.a.keys(c);case 8:if((e.t3=e.t2()).done){e.next=14;break}return u=e.t3.value,e.next=12,this.selectOneValue(u,c[u],!0);case 12:e.next=8;break;case 14:+o>0&&this.setState({goodsNumber:o});case 15:e.next=3;break;case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"resetSkuId",value:function(){var e={};(this.props.goods.skus||[]).forEach((function(t){t.specs.forEach((function(t){var r=t.spec_key;e[r]=null}))})),this.setState({currentSelect:e,selectedSkuID:null})}},{key:"checkQuantityAsync",value:function(e){var t=this;this.isCheckQuantityAsync||(this.isCheckQuantityAsync=!0,Fe({method:"POST",url:"api/oak/quantity/check",data:{goods_id:this.props.goods.goodsID,sku_id:e,mall_id:this.props.goods.mallID,detail_id:S()(this.props.goods,"activity.detailID"),select_quantity:+this.state.goodsNumber,hostname:location.hostname,community_id:this.props.communityId}}).then((function(r){if(r){var n=r.next_quantity,o=t.state.skuInfos[e];o.isQualityCheckEnd=0===r.has_quantity,o.defaultQuantity=n,t.setState({skuInfos:t.state.skuInfos,isQualityCheckEnd:"".concat(e,"+").concat(o.isQualityCheckEnd)},t.amendLimitQuantity)}t.isCheckQuantityAsync=!1})).catch((function(){t.isCheckQuantityAsync=!1})))}},{key:"getLimitGoodsNumber",value:function(){var e=this.state.selectedSkuID,t=kn;if(e){var r=this.state.skuInfos[e],n=r.quantity,o=r.staticLimitQuantity,a=r.defaultQuantity;if(this.props.goods.checkQuantity&&a){var i=+o||1;if(r.isQualityCheckEnd)t=Math.min(i,a);else{var s=this.state.goodsNumber;i>a&&s>=a&&this.checkQuantityAsync(e),t=Math.min(i,a)}}else t=Math.min(+o,+n)||1}else t=kn;return+t<1&&(t=1),t}},{key:"amendLimitQuantity",value:function(){var e=this.getLimitGoodsNumber(),t=this.state,r=t.goodsNumber,n=t.selectedSkuID;if(r>e)if(n&&this.props.goods.checkQuantity){var o=this.state.skuInfos[n],a=o.staticLimitQuantity,i=o.defaultQuantity;(o.isQualityCheckEnd||a<i)&&this.setState({goodsNumber:e},(function(){Ne("当前款式最多可拼".concat(e,"件"))})),+r>1e3&&1e3==+e&&this.setState({goodsNumber:e})}else this.setState({goodsNumber:e},(function(){Ne("当前".concat(n?"款式":"商品","最多可拼").concat(e,"件"))}));else r<1&&this.setState({goodsNumber:1})}},{key:"handleHomeInsClick",value:function(e){this.setState({selectedHomeIns:e})}},{key:"selectOneValue",value:(r=c()(i.a.mark((function e(t,r,n){var o,a,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=_()(this.state.currentSelect))[t]!==r||n?o[t]=r:o[t]=null,a=this.state.typeHashToSkuID[JSON.stringify(o)],!this.props.selectOneValueCb){e.next=9;break}return e.next=6,this.props.selectOneValueCb({selectedSkuID:a,type:t,value:r,force:n});case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return this.setState({currentSelect:o,selectedSkuID:a,selectedHomeIns:{}},(function(){s.amendLimitQuantity()})),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"fixInputBug",value:function(){var e=Object(_e.getCurrentPlatform)();e.system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}},{key:"setCustomState",value:function(e){this.setState(e)}},{key:"show",value:function(e){var t=this,r=this.props.goods,n=e.preventAutoConfirm;if(1===r.skus.length&&!S()(r,"skus[0].specs.length")){var o=r.skus[0].skuID;if(this.setState({selectedSkuID:o,selectedHomeIns:{}},(function(){n||(Le.hide(),t.confirmSku())})),!n)return}if(S()(e,"skuID")){var a=e.goodsNumber;this.setState({goodsNumber:Number(a)||1},(function(){t.selectSkuId({skuId:e.skuID,goodsNumber:Number(a)||1})}))}}},{key:"setScroll",value:function(){Object(P.disableScroll)(this.skuSelectorBodyRef)}},{key:"goodsNumberBlur",value:function(){this.fixInputBug(),this.setState({goodsNumber:Number(this.state.goodsNumber)||1},this.amendLimitQuantity)}},{key:"goodsNumberChange",value:function(e){var t=parseInt(e.target.value,10)||0;this.setState({goodsNumber:t},this.amendLimitQuantity)}},{key:"updateGoodsNumber",value:function(e){var t=parseInt(this.state.goodsNumber,10)||0;this.setState({goodsNumber:t+e})}},{key:"reduceGoodsNumber",value:function(e){e&&e.stopPropagation(),this.isEnableReduce()&&this.updateGoodsNumber(-1)}},{key:"increaseGoodsNumber",value:function(e){if(e&&e.stopPropagation(),this.isEnableIncrease())this.updateGoodsNumber(1);else{var t=this.getLimitGoodsNumber(),r=this.state.selectedSkuID;Ne("当前".concat(r?"款式":"商品","最多可拼").concat(t,"件"))}}},{key:"confirmSku",value:(t=c()(i.a.mark((function e(t){var r,n,o,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.stopPropagation(),r=this.state.selectedSkuID){e.next=5;break}return Ne(this.priceAreaRef.getSpecDesc()),e.abrupt("return");case 5:if(S()(this.props.goods,"ui.sku_section.view_style_v2")!==re){e.next=10;break}if(+S()(this.state.selectedHomeIns,"srv_type")>=0){e.next=10;break}return Ne("请选择服务"),e.abrupt("return");case 10:if(S()(this.props.goods,"ui.sku_section.view_style_v2")!==te){e.next=15;break}if(!this.deliverRef.current){e.next=15;break}if(n=this.deliverRef.current.getDeliveryData()){e.next=15;break}return e.abrupt("return");case 15:if(S()(this.props.goods,"ui.sku_section.view_style_v2")!==ee){e.next=22;break}if(!this.skuIphoneRef.current){e.next=22;break}if(o=this.skuIphoneRef.current.getState()||{},s=(a=o).mobileID,a.cityID&&s){e.next=22;break}return Ne("请先选择入网信息"),e.abrupt("return");case 22:(c=this.props.confirmSkuCallBack)&&c({selectedSkuID:r,goodsNumber:this.state.goodsNumber,skuInfo:this.state.skuInfos[r],skuInfos:this.state.skuInfos,iphoneInfo:o,deliveryData:n,homeInsData:this.state.selectedHomeIns,state:this.state,props:this.props});case 24:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"isEnableIncrease",value:function(){var e=+this.getLimitGoodsNumber(),t=this.state,r=t.selectedSkuID,n=t.goodsNumber;if(r&&this.props.goods.checkQuantity){var o=this.state.skuInfos[r],a=o.staticLimitQuantity,i=o.defaultQuantity;if(+n>1e3)return!o.isQualityCheckEnd;if(o.isQualityCheckEnd)return n<e;var s=Math.min(a,i);return!(s<=n&&s===a)}return n<e}},{key:"isEnableReduce",value:function(){return!(this.state.goodsNumber<=1)}},{key:"renderSkusElement",value:function(){var e=this,t=this.getButtonStatus(),r={};(Object.keys(this.state.currentSelect)||[]).forEach((function(e){r[e]=null}));var n=this.getButtonStatus(r),a=this.props.goods.skus.find((function(e){return e.hotSale}))||{},i=((null==a?void 0:a.specs)||[]).map((function(e){return e.spec_value})),s=-1,c=this.state.skuTypeValues.map((function(r,a){var c=r.type,u=r.values,l=(Object.values(n[c])||[]).reduce((function(e,t){return e+(t?1:0)}),0),d=u.map((function(r,n){var u=_n.disable,d=function(){};t[c]&&t[c][r]&&(u=_n.free,d=function(){return e.selectOneValue(c,r)}),e.state.currentSelect[c]===r&&(u=_n.selected);var p=r;if(1===e.state.skuTypeValues.length){var m=JSON.stringify(o()({},c,r)),f=e.state.typeHashToSkuID[m],h=e.state.skuInfos[f],v=h.groupSkuUnitPrice,y=h.normalSkuUnitPrice,g=+e.props.group.requireNum>1?v:y;g&&(p="".concat(r,"｜").concat(g))}return s<0&&l>1&&r===i[a]&&(s=a),w.a.createElement("div",{role:"button","aria-label":p,key:n,className:u,onClick:d},s===a&&r===i[a]&&w.a.createElement("div",{"aria-hidden":!0,className:A()(vn.a.hotSale,vn.a.hotSaleIcon)}),p)})),p=null,m=S()(e.props.goods,"ui.sku_section.size_chart"),f=+S()(e.props.goods,"ui.sku_section.size_chart_entry_type");if(1===a&&m){var h={page_el_sn:"648235",op:"impr",goods_id:e.props.goods.goodsID};p=w.a.createElement(tt.a,{trackingInfo:h},w.a.createElement("span",{className:2===f?vn.a.skuSizeChartRed:"sku-size-chart",onClick:function(){Object(et.a)(m),Object(O.sendClickMetrics)({page_el_sn:"648235",op:"click",goods_id:e.props.goods.goodsID})}},2===f?"尺码详情":"详情"))}var v=S()(e.props.goods,"ui.sku_section.size_refer_fit_desc"),y=null;return 1===a&&v&&(y=w.a.createElement("span",{className:vn.a.sizeDesc},v)),w.a.createElement("div",{className:vn.a.skuSpecs,key:a},w.a.createElement("span",{className:"sku-specs-key"},c,y,p),w.a.createElement("div",{className:vn.a.skuSpecValueList},d))}));if(S()(this.props.goods,"ui.sku_section.view_style_v2")===ee){var u=this.state.selectedSkuID;return w.a.createElement(w.a.Fragment,null,c,w.a.createElement($t,{ref:this.skuIphoneRef,selectedSkuID:u,goodsID:this.props.goods.goodsID,toastSpec:function(){Ne(e.priceAreaRef.getSpecDesc())},getSkuRef:this.getSkuRef}))}if(S()(this.props.goods,"ui.sku_section.view_style_v2")===te){var l=+S()(this.props.goods,"ui.sku_section.car_shop.action_type");return w.a.createElement(w.a.Fragment,null,c,w.a.createElement(Hr,{ref:this.deliverRef,goods:this.props.goods,updateSelectedSendWays:function(t){e.setState({selectedSendWays:t})},selectedSendWays:this.state.selectedSendWays,actionType:l,selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos}))}var d=this.props.goods.activity;if(S()(this.props.goods,"ui.sku_section.view_style_v2")===re&&(!d||25!==d.activityType)){var p=this.state,m=p.selectedSkuID,f=p.skuInfos;return w.a.createElement(w.a.Fragment,null,c,w.a.createElement(Vr,{selectedSkuID:m,skuInfos:f,selectedHomeIns:this.state.selectedHomeIns,ref:this.homeRef,goods:this.props.goods,handleHomeInsClick:this.handleHomeInsClick}))}return c}},{key:"renderGoodsNumberElement",value:function(){var e,t,r=this.isEnableIncrease(),n=this.isEnableReduce(),a=(this.state.goodsNumber||0).toString().length,i=a>3?36+9*(a-3):36;return w.a.createElement("div",{className:vn.a.selectorNumber},w.a.createElement("span",null,"数量"),w.a.createElement("div",{className:vn.a.numberStepper},w.a.createElement("div",{role:"button","aria-label":"减少数量",className:A()(vn.a.skuSelectorReduce,(e={},o()(e,vn.a.skuSelectorReduceEnable,n),o()(e,vn.a.skuSelectorReduceDisable,!n),e)),onClick:this.reduceGoodsNumber}),w.a.createElement("input",{"aria-label":"当前数量为".concat(this.state.goodsNumber,"件"),className:vn.a.skuSelectorInput,type:"number",maxLength:"5",value:this.state.goodsNumber+"",onBlur:this.goodsNumberBlur,onChange:this.goodsNumberChange,style:{width:"".concat(i/100,"rem")}}),w.a.createElement("div",{role:"button","aria-label":"增加数量",className:A()(vn.a.skuSelectorIncrease,(t={},o()(t,vn.a.skuSelectorIncreaseEnable,r),o()(t,vn.a.skuSelectorIncreaseDisable,!r),t)),onClick:this.increaseGoodsNumber})))}},{key:"getViewImgList",value:function(e){var t=(Object.values(this.state.skuInfos)||[]).filter((function(e){return e.quantity>0}));t.sort((function(e,t){return S()(e,"previewPriority")-S()(t,"previewPriority")}));var r=t.map((function(e){return e.thumbUrl}));return r.unshift(e),r}},{key:"setSkuStyleStatus",value:function(e){this.setState({styleStatus:e})}},{key:"getSkuButtonText",value:function(){var e=this.props,t=e.goods,r=e.group,n=e.buttonText,o=this.state,a=o.skuInfos,i=o.selectedSkuID;return+((i?a[i].normalSavePrice:t.unselectNormalSavePrice)||"")>0&&1==+r.requireNum?"单独购买":n||"确定"}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.goods,a=r.group,s=r.usePddNativePhoto,u=r.changeToGroupBuy,l=r.hideSkuBottomTip,d=r.consultPromotionPriceParams,p=this.state,m=p.skuInfos,f=p.selectedSkuID,h=p.currentSelect,v=p.styleStatus,y=p.goodsNumber,g=n.hdThumbUrl||n.thumbUrl,b=this.getViewImgList(g);if(f)g=this.state.skuInfos[f].thumbUrl;else if(Object.keys(h).some((function(e){return h[e]}))){var _=this.checkHas(h);_&&(g=this.state.skuInfos[_].thumbUrl)}return w.a.createElement("div",{role:"dialog","aria-modal":"true",tabIndex:-1,className:A()(vn.a.skuSelectorContainer,this.props.isMutliSku&&vn.a.cartSkuUi)},w.a.createElement("div",{className:vn.a.skuSelectorHead},w.a.createElement(Ft,{ref:function(e){t.priceAreaRef=e},goods:n,group:a,selectedSkuID:f,currentSelect:h,skuInfos:this.state.skuInfos,selectedHomeIns:this.state.selectedHomeIns,selectedSendWays:this.state.selectedSendWays,goodsNumber:this.state.goodsNumber,styleStatus:v,consultPromotionPriceParams:d,renderPromotionDescContent:function(e){return w.a.createElement(fn,{priceInfo:e})},style:{paddingLeft:this.props.isMutliSku?"1.1rem":"1.21rem"},isMutliSku:this.props.isMutliSku}),w.a.createElement(Qt,{usePddNativePhoto:s,group:a,src:g,goods:n,imgList:b,skuInfos:m,selectedSkuID:f,selectSkuId:this.selectSkuId,resetSkuId:this.resetSkuId,goodsNumber:this.state.goodsNumber}),w.a.createElement(U,{className:vn.a.skuSelectorCloseBtn,onClick:c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.onClose&&t.props.onClose();case 1:case"end":return e.stop()}}),e)})))})),this.props.renderSkuBlackCard&&this.props.renderSkuBlackCard({skuSelector:this.state}),w.a.createElement("div",{ref:function(e){t.skuSelectorBodyRef=e},className:vn.a.skuSelectorBody},this.renderSkusElement(),this.renderGoodsNumberElement(),w.a.createElement("div",{className:vn.a.safeDistance})),this.props.renderFooter&&this.props.renderFooter({selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos,goodsNumber:this.state.goodsNumber}),w.a.createElement(St,null,w.a.createElement(Qr,{goods:this.props.goods,selectedSkuID:f,skuInfos:m})),w.a.createElement(St,null,w.a.createElement(Pt,{selectedSkuID:f,skuInfos:m})),!l&&w.a.createElement(St,null,w.a.createElement(dn,{changeToGroupBuy:u,setSkuStyleStatus:this.setSkuStyleStatus,styleStatus:v,group:a,goods:n,selectedSkuID:f,skuInfos:m,goodsNumber:y})),this.props.renderSkuBottomTip&&this.props.renderSkuBottomTip(),w.a.createElement("div",{"aria-label":this.getSkuButtonText(),role:"button","data-active":"red",className:A()(vn.a.skuSelectorBottom,(e={},o()(e,vn.a.startHide,1===v),o()(e,vn.a.startDisplay,2===v),e)),onClick:this.confirmSku},this.getSkuButtonText()))}}]),u}(w.a.PureComponent),cn=un,Xe()(cn.prototype,"buildSkuData",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"buildSkuData"),cn.prototype),Xe()(cn.prototype,"checkHas",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"checkHas"),cn.prototype),Xe()(cn.prototype,"getButtonStatus",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"getButtonStatus"),cn.prototype),Xe()(cn.prototype,"selectSkuId",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"selectSkuId"),cn.prototype),Xe()(cn.prototype,"resetSkuId",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"resetSkuId"),cn.prototype),Xe()(cn.prototype,"checkQuantityAsync",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"checkQuantityAsync"),cn.prototype),Xe()(cn.prototype,"getLimitGoodsNumber",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"getLimitGoodsNumber"),cn.prototype),Xe()(cn.prototype,"amendLimitQuantity",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"amendLimitQuantity"),cn.prototype),Xe()(cn.prototype,"handleHomeInsClick",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"handleHomeInsClick"),cn.prototype),Xe()(cn.prototype,"selectOneValue",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"selectOneValue"),cn.prototype),Xe()(cn.prototype,"setCustomState",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"setCustomState"),cn.prototype),Xe()(cn.prototype,"show",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"show"),cn.prototype),Xe()(cn.prototype,"setScroll",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"setScroll"),cn.prototype),Xe()(cn.prototype,"goodsNumberBlur",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"goodsNumberBlur"),cn.prototype),Xe()(cn.prototype,"goodsNumberChange",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"goodsNumberChange"),cn.prototype),Xe()(cn.prototype,"updateGoodsNumber",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"updateGoodsNumber"),cn.prototype),Xe()(cn.prototype,"reduceGoodsNumber",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"reduceGoodsNumber"),cn.prototype),Xe()(cn.prototype,"increaseGoodsNumber",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"increaseGoodsNumber"),cn.prototype),Xe()(cn.prototype,"confirmSku",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"confirmSku"),cn.prototype),Xe()(cn.prototype,"isEnableIncrease",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"isEnableIncrease"),cn.prototype),Xe()(cn.prototype,"isEnableReduce",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"isEnableReduce"),cn.prototype),Xe()(cn.prototype,"getViewImgList",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"getViewImgList"),cn.prototype),Xe()(cn.prototype,"setSkuStyleStatus",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"setSkuStyleStatus"),cn.prototype),Xe()(cn.prototype,"getSkuButtonText",[$e],Object.getOwnPropertyDescriptor(cn.prototype,"getSkuButtonText"),cn.prototype),cn),In=r("rx36"),wn=!1,Pn=[],On=function(){var e=c()(i.a.mark((function e(){var t,r,n,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,!wn){e.next=3;break}return e.abrupt("return",new Promise((function(e){Pn.push(e)})));case 3:if(wn=!0,t){e.next=17;break}return e.prev=5,e.t0=De,e.next=9,Fe({method:Re.GET,url:"api/server/_stm"});case 9:e.t1=e.sent,r=(0,e.t0)(e.t1),t=r.serverTime||+Date.now(),e.next=17;break;case 14:e.prev=14,e.t2=e.catch(5),t=+Date.now();case 17:n={serverTime:t},bn=new In.default(n),Pn.forEach((function(e){return e()})),wn=!1;case 21:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}(),Cn=function(){var e=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bn){e.next=3;break}return e.next=3,On();case 3:return t=bn.messagePack(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function xn(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function En(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xn(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xn(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dn=function(e){return new Promise(function(){var t=c()(i.a.mark((function t(r){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(P.parseUrlQuery)(window.location.href),setTimeout(r,300),t.t0=Fe,t.t1=Re.POST,t.t2=En,t.next=7,Cn();case 7:t.t3=t.sent,t.t4=+n.page_from||0,t.t5={anti_content:t.t3,merchant_tag:4003,page_from:t.t4},t.t6=e,t.t7=(0,t.t2)(t.t5,t.t6),t.t8=function(){},t.t9={method:t.t1,url:"api/promotion/auto_take_merchant_coupon",data:t.t7,defaultErrorHandler:t.t8},t.t10={isAuth:!0},(0,t.t0)(t.t9,t.t10).then(r).catch((function(){}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Nn=function(e){return new Promise(function(){var t=c()(i.a.mark((function t(r){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(P.parseUrlQuery)(window.location.href),setTimeout(r,300),t.t0=Fe,t.t1=Re.POST,t.t2=En,t.next=7,Cn();case 7:t.t3=t.sent,t.t4=+n.page_from||0,t.t5={anti_content:t.t3,merchant_tag:4003,page_from:t.t4},t.t6=e,t.t7=(0,t.t2)(t.t5,t.t6),t.t8=function(){},t.t9={method:t.t1,url:"api/promotion/batch_auto_take_merchant_coupon",data:t.t7,defaultErrorHandler:t.t8},t.t10={isAuth:!0},(0,t.t0)(t.t9,t.t10).then(r).catch((function(){}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},Tn=function(){var e=c()(i.a.mark((function e(t,r){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter((function(e){return!!e})),!((o=n.length)>0)){e.next=10;break}if(1!==o){e.next=7;break}return e.next=6,Dn(En({batch_sn:n[0]},r));case 6:return e.abrupt("return");case 7:if(!(o>1)){e.next=10;break}return e.next=10,Nn(En({batch_sn_list:n},r));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var jn=function(e){f()(n,e);var t,r=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(n);function n(e){var t;return l()(this,n),(t=r.call(this,e)).normalSkuRef=w.a.createRef(),t.skuBgRef=w.a.createRef(),t.isShow=!1,t.initRecoverSkuInfo=0,t.checkDefaultSkuInfo=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=1;if(t.initRecoverSkuInfo>=n||!e)return!1;t.initRecoverSkuInfo+=1;var o=t.props.goods||t.state.goods,a=S()(o,"skus"),i=a.find((function(t){return t.skuId===e&&t.quantity>=r&&t.isOnsale}));return!!i},t.recoverSkuInfo=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.selectSkuId({skuId:e,goodsNumber:r})},t.show=function(){var e=c()(i.a.mark((function e(r){var n,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.isRemote||t.state.isFetch){e.next=6;break}return e.next=3,t.loadGoods();case 3:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:if(r&&"function"==typeof r.setStateCallback&&t.normalSkuRef.current.skuRef.current.setCustomState(r.setStateCallback),n=t.normalSkuRef.current.prepare(r),!n.needShow){e.next=15;break}if(!t.isShow){e.next=11;break}return e.abrupt("return");case 11:o=t.props,a=o.defaultSkuId,s=o.defaultGoodsNumber,t.checkDefaultSkuInfo(a,s)&&t.recoverSkuInfo(a,s),t.skuBgRef.current.style.display="block",setTimeout((function(){t.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",t.normalSkuRef.current.enter(),Oe(),setTimeout((function(){t.isShow=!0}),200)}),1);case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.hide=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isShow){e.next=2;break}return e.abrupt("return");case 2:if(xe(),!t.props.onHide){e.next=6;break}return e.next=6,t.props.onHide();case 6:t.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",t.normalSkuRef.current.exit(),setTimeout((function(){t.isShow=!1,t.skuBgRef.current.style.display="none"}),+t.props.delay||200);case 9:case"end":return e.stop()}}),e)}))),t.getSelectedSkuID=function(){return t.getSelectedSkuId()},t.getSelectedSkuId=function(){return t.normalSkuRef.current.skuRef.current.state.selectedSkuID},t.getGoodsNumber=function(){return t.normalSkuRef.current.skuRef.current.state.goodsNumber||1},t.selectSkuID=function(e){return t.selectSkuId({skuId:e})},t.selectSkuId=function(e){var r=e.skuId,n=e.goodsNumber,o=void 0===n?1:n;return t.normalSkuRef.current.skuRef.current.selectSkuId({skuId:r,goodsNumber:o})},t.setGoodsNumber=function(e){return t.normalSkuRef.current.skuRef.current.setGoodsNumber(e)},t.onCloseNormalSku=c()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hide(),r=S()(t.props,"goods.goodsID")||S()(t.state,"goods.goodsID")||0,Object(O.sendClickMetrics)({page_element:"close_btn",goods_id:r,page_el_sn:98835,op:"click"});case 3:case"end":return e.stop()}}),e)}))),t.takeCouponBeforeForward=function(){var e=c()(i.a.mark((function e(r){var n,o,a,s,c,u,l,d,p,m,f,h,v,y,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.props,o=n.isSingleBuy,a=n.autoTakeCouponParams,!o){e.next=4;break}return e.abrupt("return");case 4:if(s=t.props.goods||t.state.goods,c=r.selectedSkuID,u=r.goodsNumber,l=void 0===u?1:u,d=r.skuInfo,p=S()(Tt,["".concat(l,"-").concat(c),"batchSn"])||"",m=S()(Tt,["".concat(l,"-").concat(c),"platformBatchSn"])||"",f=(null==d?void 0:d.batchSn)||"",h=(null==d?void 0:d.platformBatchSn)||"",v=S()(s,"ui.sku_section.sku_take_coupon"),!p&&!m){e.next=18;break}return y=[],p&&y.push(p),m&&y.push(m),e.next=17,Tn(y,a);case 17:return e.abrupt("return");case 18:if(1!==v||!f&&!h){e.next=24;break}return g=[],f&&g.push(f),h&&g.push(h),e.next=24,Tn(g,a);case 24:e.next=28;break;case 26:e.prev=26,e.t0=e.catch(0);case 28:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}(),t.confirmSkuCallBack=function(e){var r=S()(t.props,"goods.goodsID")||S()(t.state,"goods.goodsID")||0;Be({page_element:"confirm_btn",goods_id:r,page_el_sn:98834,op:"click"},c()(i.a.mark((function r(){var n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.props.autoTakeCouponParams,r.t0=!e.skuDirectOrder&&n,!r.t0){r.next=5;break}return r.next=5,t.takeCouponBeforeForward(e);case 5:t.props.confirmOrder&&t.props.confirmOrder(e);case 6:case"end":return r.stop()}}),r)}))))},t.state={isFetch:!1,goods:null},t}return p()(n,[{key:"loadGoods",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props,r=t.params,n=t.responseProcessor,e.next=4,Qe(r,n,this.props.apiUrl);case 4:return o=e.sent,e.abrupt("return",new Promise((function(e){o?a.setState({goods:S()(o,"goodsInfo"),isFetch:!0},(function(){e(!0)})):a.setState({isFetch:!1},(function(){e(!1)}))})));case 8:e.prev=8,e.t0=e.catch(0),this.props.loadGoodsFail&&this.props.loadGoodsFail(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(this.props.isRemote&&!this.state.goods)return null;var t=this.props.goods;this.props.isRemote&&(t=this.state.goods);var r=this.props,n=r.isSingleBuy,o=r.renderSkuBlackCard,a=r.usePddNativePhoto,s=t.groupTypes[1];return n&&(s=t.groupTypes[0]),w.a.createElement("div",{ref:this.skuBgRef,className:A()(Ge.a.skuSelectorBg,"sku-plus1"),onClick:c()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.hide();case 1:case"end":return t.stop()}}),t)})))},w.a.createElement(se,{changeToGroupBuy:this.props.changeToGroupBuy,ref:this.normalSkuRef,goods:t,group:s,onClose:this.onCloseNormalSku,renderSkuBlackCard:o,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,usePddNativePhoto:a},w.a.createElement(Sn,null)))}}]),n}(w.a.Component),An=r("g5zU"),Rn=r.n(An),Mn=r("LzYn"),Ln=r.n(Mn),Bn={WEIXIN:"WEIXIN",ALIPAY:"ALIPAY",QQ:"QQ",WEIXIN_FRIEND:"WEIXIN_FRIEND",LIANLIANPAY:"LIANLIANPAY",UNIONPAY:"UNIONPAY",DUODUOPAY_ACS:"DUODUOPAY_ACS",HBFQ_ALI_PAY:"HBFQ_ALI_PAY",HB_ALI_PAY:"HB_ALI_PAY",DUODUOPAY:"DUODUOPAY",WEIXIN_CREDIT:"WEIXIN_CREDIT",CREDIT_CARD:"DUODUOPAY_INSTAL"},Fn=new Set([Bn.WEIXIN,Bn.WEIXIN_FRIEND,Bn.ALIPAY,Bn.QQ,Bn.DUODUOPAY,Bn.HBFQ_ALI_PAY,Bn.HB_ALI_PAY,Bn.LIANLIANPAY,Bn.DUODUOPAY_ACS,Bn.WEIXIN_CREDIT,Bn.UNIONPAY,Bn.CREDIT_CARD]),Un=0,Hn=r("E+oP"),Vn=r.n(Hn),zn={AliPay:1,WeChat:2,QQPay:3,ApplePay:4,AliPayDirectDebit:5,FriendPay:6,HBInstallmentPay:7,AliPayV2:8,UnionPay:9,DuoDuoPay:10,HBPay:11,XianYongHouFu:12,DuoDuoPayACS:13,CreditCardInstallmentPay:14},Wn=r("OUj1"),Qn=r.n(Wn);function qn(e){var t=e.promotionContent,r=e.hasPromotionContent,n=e.installmentNum,a=e.serviceAmountContent,i=e.payAmountPerInstallment,s=e.onClick,c=A()(Qn.a.installment,o()({},Qn.a.hasPromotionContent,r));return w.a.createElement("div",{className:c,onClick:s},t&&w.a.createElement("span",{className:Qn.a.promotionContent},t),w.a.createElement("div",{className:Qn.a.number},"".concat(n,"期 ").concat(a)),w.a.createElement("div",{className:Qn.a.money},"¥ ".concat(i,"/期")))}function Gn(e){var t=e.promotionContent,r=e.hasPromotionContent,n=e.installmentNum,a=e.serviceAmountContent,i=e.payAmountPerInstallment,s=e.onClick,c=A()(Qn.a.selectedInstallment,o()({},Qn.a.hasPromotionContent,r));return w.a.createElement("div",{className:c,onClick:s},t&&w.a.createElement("span",{className:Qn.a.promotionContent},t),w.a.createElement("div",{className:Qn.a.selectedNumber},"".concat(n,"期 ").concat(a)),w.a.createElement("div",{className:Qn.a.selectedMoney},"¥ ".concat(i,"/期")))}function Yn(e){var t=e.promotionContent,r=e.hasPromotionContent,n=e.installmentNum,o=e.serviceAmountContent,a=e.payAmountPerInstallment,i=e.onClick;return w.a.createElement(qn,{promotionContent:t,hasPromotionContent:r,installmentNum:n,serviceAmountContent:o,payAmountPerInstallment:a,onClick:i})}function Xn(e){var t=e.promotionContent,r=e.hasPromotionContent,n=e.installmentNum,a=e.serviceAmountContent,i=e.payAmountPerInstallment,s=e.onClick,c=A()(Qn.a.installment,o()({},Qn.a.hasPromotionContent,r));return w.a.createElement("div",{className:c,onClick:s},t&&w.a.createElement("span",{className:Qn.a.promotionContent},t),w.a.createElement("div",{className:Qn.a.disableNumber},"".concat(n,"期 ").concat(a)),w.a.createElement("div",{className:Qn.a.disableMoney},"¥ ".concat(i,"/期")))}function Jn(e){Rn()(Qn.a);var t=e.termIndex,r=e.promotionContent,n=e.hasPromotionContent,o=e.selectInstallmentTerm,a=e.installmentNum,i=e.serviceAmountContent,s=e.payAmountPerInstallment,c=e.selected,u=e.isChannelSelected,l=e.isDisable,d=function(e){e.stopPropagation(),l?Object(ce.info)("分期信息已选择，如需修改可重新下单"):o&&o(t)};return l?w.a.createElement(Xn,{promotionContent:r,hasPromotionContent:n,installmentNum:a,serviceAmountContent:i,payAmountPerInstallment:s,onClick:d}):c?u?w.a.createElement(Gn,{promotionContent:r,hasPromotionContent:n,installmentNum:a,serviceAmountContent:i,payAmountPerInstallment:s,onClick:d}):w.a.createElement(Yn,{promotionContent:r,hasPromotionContent:n,installmentNum:a,serviceAmountContent:i,payAmountPerInstallment:s,onClick:d}):w.a.createElement(qn,{promotionContent:r,hasPromotionContent:n,installmentNum:a,serviceAmountContent:i,payAmountPerInstallment:s,onClick:d})}var Kn=r("79DA"),Zn=r.n(Kn);function $n(e){var t=e.installmentList,r=e.selectedTermIndex,n=e.lockInstallmentTerm,o=e.selectInstallmentTerm,a=e.selected,i=e.isElderMode;Rn()(Zn.a);var s=n?r:-1,c=null;return c=i?(null==t?void 0:t.length)>2?Zn.a.hbInstallmentList4Elder:Zn.a.hbInstallmentList2Elder:Zn.a.hbInstallmentList,w.a.createElement("div",{className:c},t.map((function(e,t){return w.a.createElement("div",{className:Zn.a.installmentContainer,key:e.term},w.a.createElement(Jn,{termIndex:t,isDisable:s!==t&&n,installmentNum:e.term,serviceAmountContent:e.commissionType===Un?"含手续费":"0手续费",payAmountPerInstallment:Object(P.priceCent)(e.termPrice),selectInstallmentTerm:o,paymentType:zn.HBInstallmentPay,selected:r===t,isChannelSelected:a}))})))}var eo=r("iYsC"),to=r.n(eo),ro=function(){Object(ce.info)("分期信息已选择，如需修改可重新下单")};function no(e){var t=e.creditCardVo,r=e.orderAmount,n=e.changeBindId,a=e.selectInstallmentTerm,s=e.selectedTermIndex,u=e.isChannelSelected,l=e.lockTerm,d=e.isElderMode;Rn()(to.a);var p=t.recommendCardVo,m=void 0===p?{}:p,f=t.extra,h=void 0===f?{}:f,v=m.creditInstallments,y=void 0===v?[]:v,g=m.virtualCard,b=m.virtualCardTitle,_=m.bankShort,k=m.icon,S=m.cardEnc,P=m.bindId;function C(){return x.apply(this,arguments)}function x(){return(x=c()(i.a.mark((function e(){var t,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(void 0,{expandAfterSelection:!0}),!l){e.next=4;break}return ro(),e.abrupt("return");case 4:return g?Object(O.sendClickMetrics)({page_el_sn:5882150}):Object(O.sendClickMetrics)({page_el_sn:5882151}),e.prev=5,e.next=8,Object(ke.invokeBridgeCallNativeFun)("JSDuoduoWallet","selectCreditCard",{amount:r,selected_bind_id:P,extra:h});case 8:o=e.sent,s=null==o||null===(t=o.selected_card)||void 0===t?void 0:t.bind_id,c=1==+o.result_type,s&&s!==P&&n&&n({selectedBindId:P,newBindId:s,isNewlyAdded:c}),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}Object(I.useEffect)((function(){g?Object(O.sendImprMetrics)({page_el_sn:5882150}):Object(O.sendImprMetrics)({page_el_sn:5882151})}),[g]);var E=!d&&y&&y.length>0&&y.some((function(e,t){return!!e.promotionContent})),D=null;D=d?y.length>4?to.a.installment6ContainerElder:y.length>2?to.a.installment4ContainerElder:to.a.installment2ContainerElder:y.length>3?to.a.installment6Container:to.a.installment3Container,D=A()(D,o()({},to.a.hasPromotionContent,E));var N=null;return N=d?y.length>4?to.a.installment6Elder:y.length>2?to.a.installment4Elder:to.a.installment2Elder:y.length>3?to.a.installments6:to.a.installments3,N=A()(N,o()({},to.a.hasPromotionContent,E)),w.a.createElement("div",{className:D},!!g&&w.a.createElement("div",{className:to.a.mask,onClick:C}),!!g&&w.a.createElement("div",{className:to.a.title,onClick:C},b,w.a.createElement("div",{className:to.a.action},"添加"),w.a.createElement(ht.default,{className:to.a.actionBtn,src:"https://funimg.pddpic.com/transaction/a04ef1f3-565b-4b8e-9caf-be6e606972b0.png.slim.png"})),!g&&w.a.createElement("div",{className:to.a.title,onClick:C},w.a.createElement(ht.default,{className:to.a.bankIcon,src:k}),"".concat(_," (").concat(S,")"),w.a.createElement("div",{className:to.a.action},"更换"),w.a.createElement(ht.default,{className:to.a.actionBtn,src:"https://funimg.pddpic.com/transaction/a04ef1f3-565b-4b8e-9caf-be6e606972b0.png.slim.png"})),w.a.createElement("div",{className:N},y.map((function(e,t){var r=s!==t&&l;return w.a.createElement("div",{className:to.a.installmentContainer,key:e.installmentNum},w.a.createElement(Jn,{promotionContent:r||d?null:e.promotionContent,hasPromotionContent:E,termIndex:t,isDisable:r,installmentNum:e.installmentNum,serviceAmountContent:e.serviceAmountContent,payAmountPerInstallment:e.payAmountPerInstallment,selectInstallmentTerm:g?C:a,selected:!g&&s===t,isChannelSelected:u}))}))))}var oo=r("5Pt6"),ao=r.n(oo),io=w.a.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064"},w.a.createElement("path",{d:"M361.396862 939.865243L0 578.298315l123.274648-123.274648 231.140111 231.31135 539.668623-602.20026 129.915445 116.379336-662.601965 739.35115z","p-id":"4065"})),so=function(e,t){return parseInt(e,10)||t},co=function(e,t){return(e||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?e:t},uo="#58595b";function lo(e){var t,r,n=e.installmentList,a=void 0===n?[]:n,i=e.lockInstallmentTerm,s=e.lockCreditCardTerm,c=e.selectPayMethod,u=e.channel,l=e.customStyle,d=void 0===l?{}:l,p=e.orderAmount,m=e.changeBindId,f=e.isElderMode;Rn()(ao.a);var h=u.disabled,v=u.disableContent,y=u.selected,g=u.neverBeenSelected,b=u.hint,_=u.hintIcon,k=u.hintStyle,I=u.preHint,P=u.preHintIcon,O=u.preHintStyle,C=u.channelName,x=u.name,E=u.icon,D=u.termIndex,N=u.creditCardTermIndex,T=u.expanding,j=u.creditCardVo,R=u.payIconContent,M=C===Bn.HBFQ_ALI_PAY&&(!h&&y||!!T),L=C===Bn.CREDIT_CARD&&(j&&!h&&y||T),B=a.findIndex((function(e){return e.defaultSelected})),F=B>=0?B:0,U=((null==j||null===(t=j.recommendCardVo)||void 0===t?void 0:t.creditInstallments)||[]).findIndex((function(e){return!!e.selected}));U<0&&(U=0);var H=A()(ao.a.padding,o()({},ao.a.disable,h)),V=A()(ao.a.item,(r={},o()(r,ao.a.itemDisable,h),o()(r,ao.a.installmentFlag,[Bn.HBFQ_ALI_PAY,Bn.CREDIT_CARD].includes(C)),o()(r,ao.a.itemInstallment,!!M),r)),z=d.selectedIconPadding,W=w.a.createElement(w.a.Fragment,null,!E&&w.a.createElement("span",{className:"".concat(ao.a["p"+C])}),E&&w.a.createElement("span",{style:{backgroundImage:"url(".concat(E,")")},className:ao.a.pfuji})),Q=w.a.createElement("span",{className:ao.a.method},x),q=k?{fontSize:f?"".concat(.16,"rem"):so(k.fontSize,13)/100+"rem",color:co(k.fontColor,uo)}:{},G=O?{fontSize:f?"".concat(.16,"rem"):so(O.fontSize,13)/100+"rem",color:co(O.fontColor,uo)}:{},Y=function(){return h?null:I&&g?w.a.createElement("span",{className:ao.a.hints},P?w.a.createElement("span",{className:ao.a.icon},w.a.createElement("img",{src:P})):null,w.a.createElement("span",{style:G},I),w.a.createElement("span",{className:ao.a.space})):Vn()(R)?b?w.a.createElement("span",{className:ao.a.hints},_?w.a.createElement("span",{className:ao.a.icon},w.a.createElement("img",{src:_})):null,w.a.createElement("span",{style:q},b),w.a.createElement("span",{className:ao.a.space})):null:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e||[]).map((function(e,r){var n=t?.16:so(e.css_vo.font_size,13)/100;return"text"===e.type?w.a.createElement("span",{key:"item_".concat(r),style:{fontSize:"".concat(n,"rem"),color:co(e.css_vo.font_color,uo)}},e.content):"icon"===e.type?w.a.createElement(ht.default,{src:e.icon_url,className:ao.a.richTextImg,key:"item_".concat(r),style:{height:"".concat(+S()(e,"css_vo",{icon_height:17}).icon_height/100,"rem"),width:"".concat(+S()(e,"css_vo",{icon_width:17}).icon_width/100,"rem")}}):null}))}(R,f)},X=w.a.createElement("div",{className:ao.a.itemDisableText,style:{marginRight:z}},v||"该支付方式当前服务不可用");if(u.channelName===Bn.CREDIT_CARD){var J=N;return(null==J||J<0)&&(J=U),w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:H,"data-active":"before-white",style:d},w.a.createElement("div",{className:V,onClick:function(){y||(u.creditCardTermIndex=null==N?U:N>=0?N:U,c&&c(u,{expandAfterSelection:!T}))}},y&&!h&&w.a.createElement("div",{className:ao.a.selectedSvg,style:{marginRight:z}},io),h&&X,w.a.createElement("div",{className:ao.a.text},W,Q,Y()))),j&&L&&w.a.createElement(no,{creditCardVo:j,selectInstallmentTerm:function(e,t){e>=0&&(u.creditCardTermIndex=e),c&&c(u,t)},selectedTermIndex:J,isChannelSelected:y,changeBindId:m,orderAmount:p,lockTerm:s,isElderMode:f}))}if(u.channelName===Bn.HBFQ_ALI_PAY){var K,Z=A()(ao.a.padding,(K={},o()(K,ao.a.disable,h),o()(K,ao.a.paddingInstallment,!f&&M),o()(K,ao.a.paddingInstallment4Elder,f&&M&&(null==a?void 0:a.length)>2),o()(K,ao.a.paddingInstallment2Elder,f&&M&&(null==a?void 0:a.length)<=2),K));return w.a.createElement("div",{className:Z,style:d},w.a.createElement("div",{className:ao.a.hbMask,"data-active":"before-white"},w.a.createElement("div",{className:V,onClick:function(){if(!y){var e={};u.channelName===Bn.HBFQ_ALI_PAY&&(u.termIndex=0===D?D:D||F,e.expandAfterSelection=!T),c&&c(u,e)}}},y&&!h&&w.a.createElement("div",{className:ao.a.selectedSvg,style:{marginRight:z}},io),h&&X,w.a.createElement("div",{className:ao.a.text},W,Q,Y()))),C===Bn.HBFQ_ALI_PAY&&M&&w.a.createElement($n,{lockInstallmentTerm:i,selectedTermIndex:0===D?D:D||F,installmentList:a,selected:y,selectInstallmentTerm:function(e){u.termIndex=e,c&&c(u)},isElderMode:f}))}return w.a.createElement("div",{className:H,"data-active":"before-white",style:d},w.a.createElement("div",{className:V,onClick:function(){c&&c(u)}},y&&!h&&w.a.createElement("div",{className:ao.a.selectedSvg,style:{marginRight:z}},io),h&&X,w.a.createElement("div",{className:ao.a.text},W,Q,Y())))}var po=r("PB+Z"),mo=r.n(po),fo=w.a.createElement("svg",{t:"1629364484227",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2148"},w.a.createElement("path",{d:"M0 350.06106c0-14.555334 5.555892-29.110668 16.666502-40.222451 22.222394-22.222394 58.241275-22.222394 80.444904 0L511.760148 724.487351l415.129619-415.148385c22.203628-22.222394 58.222509-22.222394 80.444903 0 22.222394 22.222394 22.222394 58.222509 0 80.444903l-428.536712 428.555478c-36.981808 36.944276-97.111406 36.944276-134.074448 0.037532L16.667675 390.283512c-11.111784-11.110611-16.667675-25.667118-16.667675-40.222452z","p-id":"2149"}));function ho(e){var t=e.showFoldAlipayHint,r=e.onClickExpandAll;return Rn()(mo.a),w.a.createElement("div",{className:mo.a.more,"data-active":"cell-white",onClick:r},w.a.createElement("div",{className:mo.a.hint},"更多支付方式",t&&w.a.createElement("div",{className:mo.a.payment},w.a.createElement("span",{className:mo.a.space},"("),w.a.createElement("span",null,"如 "),w.a.createElement("span",{className:mo.a.wrapper},w.a.createElement("span",{className:mo.a.item},w.a.createElement("span",{className:"".concat(mo.a.moreIcon," ").concat(mo.a.icon1)}),w.a.createElement("span",null,"支付宝"))),w.a.createElement("span",{className:mo.a.space},")"))),w.a.createElement("div",{className:mo.a.arrowsDownSvg},fo))}function vo(e){var t=e.payChannels,r=e.installmentList,n=e.lockInstallmentTerm,o=e.lockCreditCardTerm,a=e.onChannelSelected,i=e.onClickExpandAll,s=e.disableFolding,c=e.customStyle,u=e.orderAmount,l=e.changeBindId,d=e.isElderMode;function p(e,t){a&&a(e,t)}Rn()(Ln.a);var m=!1;t.forEach((function(e){e.channelName===Bn.ALIPAY&&(m=!e.display)}));var f=t.filter((function(e){return e.display||s})).map((function(e){return w.a.createElement(lo,{installmentList:r,lockInstallmentTerm:n,lockCreditCardTerm:o,customStyle:c,key:e.channelName,channel:e,selectPayMethod:p,orderAmount:u,changeBindId:l,isElderMode:d})})),h=t.length>f.length&&!s,v=A()(Ln.a.payment,{pdd_payment_list_elder_mode:d});return w.a.createElement("div",{className:v},f,h&&w.a.createElement(ho,{onClickExpandAll:i,showFoldAlipayHint:m}))}var yo=function(){},go=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yo;var r=Object(_e.getCurrentPlatform)();r.system===_e.SYSTEM.IOS&&r.isNativePlatform?window.__isMagic__?e():Object(_e.compareVersion)(r.version,"3.43.0")>=0?Object(ke.invokeBridgeCallNativeFun)("PDDPayment","getAvailableTypes",{}).then((function(r){(r&&r.types||[]).indexOf(zn.ApplePay)>=0?e():t()})).catch(t):Object(ke.invokeBridgeCallNativeFun)("AMPay","canSupportApplePay",{}).then((function(r){0===r.status?e():t()})).catch(t):t()};function bo(){return _o.apply(this,arguments)}function _o(){return(_o=c()(i.a.mark((function e(){var t,r,n,o,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(!(t=Object(_e.getCurrentPlatform)()).isTinyNativePlatform){e.next=17;break}if(!(Object(_e.compareVersion)(t.version,"6.5.0")<0)){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,Object(ke.invokeBridgeCallNativeFun)("JSPackageManager","checkIfAlipayInstalled");case 9:return r=e.sent,n=(r||{}).isAlipayInstalled,e.abrupt("return",!!n);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",!1);case 17:if(!t.isNativePlatform){e.next=36;break}if(t.statisfy&&t.statisfy("3.2.0","3.2.0","greaterThanEqual")){e.next=21;break}return e.abrupt("return",!1);case 21:return o="",(a=t.system)===_e.SYSTEM.IOS?o="alipays":a===_e.SYSTEM.Android&&(o="com.eg.android.AlipayGphone"),e.prev=24,e.next=27,Object(ke.invokeBridgeCallNativeFun)("AMApplication","check",{app:o});case 27:if(!(s=e.sent)||!s.has_installed){e.next=31;break}return c=parseInt(s.has_installed,10)||0,e.abrupt("return",c);case 31:e.next=36;break;case 33:return e.prev=33,e.t1=e.catch(24),e.abrupt("return",!1);case 36:return e.abrupt("return",t.isAliPayAvailable);case 37:case"end":return e.stop()}}),e,null,[[6,14],[24,33]])})))).apply(this,arguments)}function ko(){var e=Object(_e.getPlatform)(navigator.userAgent);if(!e.isNativePlatform||Object(_e.compareVersion)(e.version,"4.85.0")<0)return!1;var t=e.system===_e.SYSTEM.Android?"com.tencent.mobileqq":"mqqwallet";return Object(ke.invokeBridgeCallNativeFun)("AMApplication","check",{app:t}).then((function(e){var t=e.has_installed;return Object(ke.invokeBridgeCallNativeFun)("AMStorage","set",{key:"qqUninstall",value:t+""}),0===t})).catch((function(){return!1}))}function So(){var e=Object(_e.getCurrentPlatform)();if(!e.isNativePlatform||Object(_e.compareVersion)(e.version,"4.85.0")<0)return!1;var t=e.system===_e.SYSTEM.Android?"com.unionpay":"uppaywallet";return Object(ke.invokeBridgeCallNativeFun)("AMApplication","check",{app:t}).then((function(e){var t=e.has_installed;return Object(ke.invokeBridgeCallNativeFun)("AMStorage","set",{key:"unionpayUninstall",value:t+""}),0===t})).catch((function(){return!1}))}function Io(e){var t,r=e.alipayInstalled,n=e.isQQUninstall,a=e.isUnionpayUninstall,i=e.isEmbeddedBrowser,s=e.appVersion,c=e.applePayInstalled,u=s&&Object(_e.compareVersion)(s,"3.65.0")>=0;return{disableFolding:i,installMap:(t={},o()(t,Bn.LIANLIANPAY,!!c),o()(t,Bn.QQ,!n),o()(t,Bn.HBFQ_ALI_PAY,u),o()(t,Bn.ALIPAY,!!r),o()(t,Bn.UNIONPAY,!a),t)}}function wo(){return Promise.all([bo(),(e=new Promise((function(e){go((function(){e({result:!0})}),(function(){e({result:!1})}))})),t=new Promise((function(e){setTimeout((function(){e({result:!1,timeout:!0})}),2e3)})),Promise.race([e,t]).then((function(e){var t=e.result;return e.timeout,t}))),ko(),So()]).then((function(e){var t=D()(e,4),r=t[0],n=t[1],o=t[2],a=t[3],i=Object(_e.getCurrentPlatform)();return Io({alipayInstalled:r,applePayInstalled:n,isQQUninstall:o,isUnionpayUninstall:a,appVersion:i.version,isEmbeddedBrowser:i.isEmbeddedBrowser})}));var e,t}var Po=0;var Oo=[Bn.LIANLIANPAY,Bn.QQ,Bn.HBFQ_ALI_PAY,Bn.UNIONPAY];function Co(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=t||{},o=n.installMap,a=void 0===o?{}:o,i={},s=Oo;return r&&(s=[].concat(Oo,[Bn.ALIPAY])),s.forEach((function(e){i[e]=a&&!a[e]})),e.filter((function(e){return e&&!i[e.channelName]}))}function xo(e){var t=null,r=null;return e.forEach((function(e){!t&&!e.disabled&&(t=e),e.defaultSelected&&!e.disabled&&(r=e)})),r||t}function Eo(e){var t=e.channelName,r=e.existedChannels,n=e.installmentList,o=e.expandAll,a=e.channel,i=r.slice(),s=null,c=[],u=[];return i.forEach((function(e){if(e.channelName!==t||e.disabled)e.selected=!1;else{if(e.channelName===Bn.HBFQ_ALI_PAY){var r=n.findIndex((function(e){return e.defaultSelected})),i=r>=0?r:0;e.termIndex>=0||(e.termIndex=(null==a?void 0:a.termIndex)||i)}if(e.channelName===Bn.CREDIT_CARD){var l,d,p=((null==a||null===(l=a.creditCardVo)||void 0===l||null===(d=l.recommendCardVo)||void 0===d?void 0:d.creditInstallments)||[]).findIndex((function(e){return!!e.selected}));p<0&&(p=0),e.creditCardTermIndex>=0||(e.creditCardTermIndex=(null==a?void 0:a.creditCardTermIndex)||p)}e.display=!0,e.selected=!0,e.neverBeenSelected=!1,s=e}o&&(e.display=!0),e.display?c.push(e):u.push(e)})),{newChannels:c.concat(u),selectedChannel:s}}function Do(e){var t=e.payChannels,r=e.installmentList,n=void 0===r?[]:r,o=e.lockInstallmentTerm,a=e.lockCreditCardTerm,i=e.isRefreshPayChannels,s=e.ignoreChannels,c=void 0===s?[]:s,u=e.ssrOptimizationParams,l=e.onChannelSelected,d=e.onPayChannelsChanged,p=e.selectedChannelName,m=e.termIndex,f=e.creditCardTermIndex,h=e.disableFolding,v=void 0!==h&&h,y=e.orderAmount,g=e.changeBindId,b=e.customStyle,_=e.isElderMode,k=void 0!==_&&_,S=e.isTinyNativePlatform,O=void 0!==S&&S;function C(e){var r=function(e){var t=e||{},r=t.pdd_native_preload2,n=t.appVersion,o=t.isEmbeddedBrowser;if(r)try{var a=JSON.parse(r)||{},i=a.am_app_che_alipays,s=a.am_app_che_applepay,c=a.qqUninstall,u=a.unionpayUninstall,l=!0,d=!1;return i&&(l=1===parseInt(JSON.parse(i).has_installed)),s&&(d=1===parseInt(JSON.parse(s).has_installed)),Io({alipayInstalled:l,applePayInstalled:d,isQQUninstall:"0"===c,isUnionpayUninstall:"0"===u,appVersion:n,isEmbeddedBrowser:o})}catch(e){Object(P.throwErrorAsync)(new Error("nativeExtra parsing error"),{installInfo:r})}return null}(e),o=Co(t.filter((function(e){return!c.includes(e.channelName)})),r,O);return Eo({channelName:(xo(o)||{}).channelName,existedChannels:o,installmentList:n,expandAll:!!r&&r.disableFolding}).newChannels}var x=Object(I.useState)((function(){return C(u)})),E=D()(x,2),N=E[0],T=E[1],j=function(e){d&&d(e),T(e)};function A(e){var t=e.channelName,r=e.channel,o=e.existedChannels,a=e.opts,i=(a||{}).expandAll,s=Eo({channel:r,channelName:t,existedChannels:o,installmentList:n,expandAll:v||i}),c=s.newChannels,u=s.selectedChannel;j(c),l&&l({selectedChannel:u,channelName:t,opts:a})}return Object(I.useEffect)((function(){wo().then((function(e){var r=Co(t.filter((function(e){return!c.includes(e.channelName)})),e,O);A({channelName:xo(r).channelName,existedChannels:r,opts:{expandAll:!!e&&e.disableFolding}}),r.length<1&&!Po&&(Po=!0,Object(P.throwErrorAsync)(new Error("empty_paymentlist")))}))}),[]),Object(I.useEffect)((function(){if(i)wo().then((function(e){var r=Co(t.filter((function(e){return!c.includes(e.channelName)})),e,O);j(r)}));else{var e=N.slice(),r=e.find((function(e){return e.channelName===Bn.CREDIT_CARD})),n=t.find((function(e){return e.channelName===Bn.CREDIT_CARD}));r&&!n&&(r.creditCardVo=null);var o=t.map((function(e){return e.channelName}));e.forEach((function(e){o.includes(e.channelName)||Object.assign(e,{hint:null,hintStyle:null,hintIcon:null,preHint:null,preHintStyle:null,preHintIcon:null,payIconContent:null})}));var a={};e.forEach((function(e){a[e.channelName]=e})),t.forEach((function(e){var t=a[e.channelName];t&&Object.assign(t,{name:e.name,nameStyle:e.nameStyle,hint:e.hint,hintStyle:e.hintStyle,hintIcon:e.hintIcon,preHint:e.preHint,preHintStyle:e.preHintStyle,preHintIcon:e.preHintIcon,payIconContent:e.payIconContent,creditCardVo:e.creditCardVo})})),j(e)}}),[t]),Object(I.useEffect)((function(){if(p&&N.filter((function(e){return e.selected}))[0]){var e=N.filter((function(e){return e.channelName===Bn.HBFQ_ALI_PAY}))[0];e&&m>=0&&(e.termIndex=m);var t=N.filter((function(e){return e.channelName===Bn.CREDIT_CARD}))[0];t&&f>=0&&(t.creditCardTermIndex=f);var r=N.slice(),o=Eo({channelName:p,existedChannels:r,installmentList:n}).newChannels;j(o)}}),[p,m,f]),w.a.createElement(vo,{payChannels:N,installmentList:n,lockInstallmentTerm:o,lockCreditCardTerm:a,onChannelSelected:function(e,t){A({channel:e,channelName:e.channelName,existedChannels:N,opts:t})},onClickExpandAll:function(){var e=(N||[]).slice();e.forEach((function(e){e.display=!0})),j(e)},disableFolding:v,customStyle:b,orderAmount:y,changeBindId:g,isElderMode:k})}var No;function To(){return jo.apply(this,arguments)}function jo(){return(jo=c()(i.a.mark((function e(){var t,r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(_e.getCurrentPlatform)(),t.statisfy&&t.statisfy("3.2.0","3.2.0","greaterThanEqual")){e.next=4;break}return e.abrupt("return",!1);case 4:return r="",(n=t.system)===_e.SYSTEM.IOS?r="alipays":n===_e.SYSTEM.Android&&(r="com.eg.android.AlipayGphone"),e.prev=7,e.next=10,Object(ke.invokeBridgeCallNativeFun)("AMApplication","check",{app:r});case 10:if(!(o=e.sent)||!o.has_installed){e.next=14;break}return a=parseInt(o.has_installed,10)||0,e.abrupt("return",a);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})))).apply(this,arguments)}var Ao=(No={},o()(No,Bn.WEIXIN,zn.WeChat),o()(No,Bn.WEIXIN_FRIEND,zn.FriendPay),o()(No,Bn.ALIPAY,zn.AliPay),o()(No,Bn.QQ,zn.QQPay),o()(No,Bn.DUODUOPAY,zn.DuoDuoPay),o()(No,Bn.HB_ALI_PAY,zn.HBPay),o()(No,Bn.HBFQ_ALI_PAY,zn.HBInstallmentPay),o()(No,Bn.WEIXIN_CREDIT,zn.XianYongHouFu),o()(No,Bn.LIANLIANPAY,zn.ApplePay),o()(No,Bn.DUODUOPAY_ACS,zn.DuoDuoPayACS),o()(No,Bn.UNIONPAY,zn.UnionPay),o()(No,Bn.CREDIT_CARD,zn.CreditCardInstallmentPay),No);function Ro(e){return Mo.apply(this,arguments)}function Mo(){return(Mo=c()(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==Bn.ALIPAY){e.next=5;break}return e.next=3,To();case 3:return r=e.sent,e.abrupt("return",r?zn.AliPayDirectDebit:zn.AliPay);case 5:if(!(n=Ao[t])){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lo=r("3oyJ"),Bo=r.n(Lo),Fo=1,Uo=2,Ho=3;function Vo(e){var t=e.items,r=e.isCombine;return w.a.createElement(w.a.Fragment,null,t&&t.map((function(e,t){if(-1===e.displayType)return w.a.createElement("div",{style:{width:"100%"},key:t});if(0===e.displayType){if(!e.text)return null;var n=e.fontColor,o=e.fontSize;return w.a.createElement("span",{key:t,style:{fontSize:o?"".concat(o/100,"rem"):r?"0.13rem":"0.14rem",color:n},"aria-hidden":!0},e.text)}if(1===e.displayType){var a=e.height,i=e.width,s=e.url,c=e.marginLeft,u=e.marginRight;return s?w.a.createElement(ht.default,{key:t,style:{height:a,width:i,marginLeft:c,marginRight:u,marginTop:r?"0.02rem":0},className:Bo.a.groupSubtitleIcon,src:s,"aria-hidden":!0}):null}if(2===e.displayType){var l=e.combineItems;return w.a.createElement("span",{className:Bo.a.combineItems,key:t},w.a.createElement(Vo,{items:l,isCombine:!0}))}return null})))}var zo=w.a.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064",fill:"#E02E24"},w.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m219.648 307.2l-287.118222 320.398222-122.936889-123.050666L256 570.026667l192.284444 192.398222 352.483556-393.386667L731.648 307.2z","p-id":"35481"})),Wo=w.a.createElement("svg",{t:"1629126595213",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4064",fill:"#9C9C9C"},w.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2z m0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z","p-id":"35612"})),Qo=null;function qo(){return(qo=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wo();case 2:Qo=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(e){var t=Object(I.useRef)(),r=Object(I.useState)(e.subcontent),n=D()(r,2),o=n[0],a=n[1];Object(I.useEffect)((function(){a(e.subcontent)}),[e.subcontent]),Object(I.useEffect)((function(){if(t.current&&t.current.getBoundingClientRect().height>30){var e=o.findIndex((function(e){return 0===e.displayType&&"更换"===e.text}));e>-1&&!o.find((function(e){return-1===e.displayType}))&&(o.splice(e,0,{displayType:-1}),a(o))}}));return w.a.createElement("div",{className:Bo.a.groupSubtitle,onClick:e.onSpread,ref:t,"aria-label":function e(t){return t.reduce((function(t,r){return 0===(null==r?void 0:r.displayType)?t+((null==r?void 0:r.text)||""):2===(null==r?void 0:r.displayType)?t+e((null==r?void 0:r.combineItems)||[]):t}),"")}(e.subcontent),role:"button"},w.a.createElement(Vo,{items:e.subcontent}))}var Yo=Object(I.forwardRef)((function(e,t){var r,n,o=e.payChannelGroup,a=e.payChannels,i=e.isSelected,s=e.onChannelSelected,c=e.onGroupSelected,u=e.installmentList,l=e.lockInstallmentTerm,d=e.lockCreditCardTerm,p=e.isNormalOnlyGroup,m=Object(I.useState)(!1),f=D()(m,2),h=f[0],v=f[1];if(Object(I.useImperativeHandle)(t,(function(){return{unspread:function(){o&&(o.channelGroupType===Ho&&i||v(!1))}}})),!o)return null;var y=null===(r=o.groupContent)||void 0===r?void 0:r.content,g=null==o?void 0:o.groupExtensionContent,b=o.enable,_=null===(n=o.channels.find((function(e){return e.defaultSelected})))||void 0===n?void 0:n.channel,k=o.channels.find((function(e){return e.channel===_})),S=a.find((function(e){return e.channelName===_})),P=(null==k?void 0:k.groupSubContent)||[],O=o.channels.map((function(e){return e.channel})),C=function(){if(o.channelGroupType===Ho){if(S.channelName===Bn.CREDIT_CARD&&!(S.creditCardTermIndex>=0)){var e,t,r=((null==S||null===(e=S.creditCardVo)||void 0===e||null===(t=e.recommendCardVo)||void 0===t?void 0:t.creditInstallments)||[]).findIndex((function(e){return!!e.selected}));r<0&&(r=0),S.creditCardTermIndex=r}v(!0),E(S,{expandAfterSelection:!0})}else c(o)},x=function(){Object(ce.info)("由于服务方繁忙，该支付方式暂不可用")},E=function(e,t){o.channelGroupType===Ho&&(t?t.supressUnspread=!0:t={supressUnspread:!0}),e.selected=!0,s({channelName:e.channelName,selectedChannel:e,opts:t})},N=g||{},T=N.content,j=N.fontSize,A=void 0===j?14:j,R=N.fontColor,M=void 0===R?"#9c9c9c":R,L=T?w.a.createElement("span",{className:Bo.a.groupExtensionContent,style:{fontSize:"".concat(A/100,"rem"),color:M}},T):null;return h||p?w.a.createElement("div",{className:Bo.a.group},w.a.createElement("div",{className:Bo.a.groupSpreadTitle},y,L),b?w.a.createElement("div",{className:Bo.a.groupSelected},i?zo:Wo):w.a.createElement("span",{className:Bo.a.unableText},"暂不可用"),w.a.createElement("div",{className:"pdd_payment_list_v2_mode"},function(e){var t=[Bn.LIANLIANPAY,Bn.QQ,Bn.HBFQ_ALI_PAY,Bn.UNIONPAY],r=(Qo||{}).installMap,n=void 0===r?{}:r,o={};return t.forEach((function(e){o[e]=n&&!n[e]})),e.filter((function(e){return e&&!o[e.channelName]}))}(a).filter((function(e){return O.includes(e.channelName)})).map((function(t,r){return w.a.createElement(lo,nt()({key:r},e,{channel:t,selectPayMethod:E,installmentList:u,lockInstallmentTerm:l,lockCreditCardTerm:d}))}))),w.a.createElement("div",{className:Bo.a.groupBorder})):w.a.createElement("div",{className:Bo.a.groupUnspreadContainer},w.a.createElement("div",{className:Bo.a.groupUnspread,onClick:b?C:x},w.a.createElement("div",{className:Bo.a.groupTitle},y,L),b?w.a.createElement("div",{className:Bo.a.groupSelected},i?zo:Wo):w.a.createElement("span",{className:Bo.a.unableText},"暂不可用"),w.a.createElement(Go,{subcontent:P,onSpread:b?function(e){var t;return o.channelGroupType===Fo||o.channelGroupType===Ho&&1===(null===(t=o.channels)||void 0===t?void 0:t.length)?C():(e.stopPropagation(),void v(!0))}:x})),w.a.createElement("div",{className:Bo.a.groupBorder}))})),Xo=Object(I.forwardRef)((function(e,t){var r=e.onChannelSelected,n=e.payChannels,o=e.payChannelGroups,a=e.selectedChannel,i=e.installmentList,s=e.lockInstallmentTerm,c=e.lockCreditCardTerm;Object(I.useEffect)((function(){Object(P.disableScroll)(document.querySelector("#commodity_paymentlist_v2"))}),[]),Object(I.useEffect)((function(){!function(){qo.apply(this,arguments)}()}),[]),Object(I.useEffect)((function(){var e=o.find((function(e){return e.defaultSelected}));if(e){var t=e.channels.find((function(e){return e.defaultSelected}));if(t){var a=n.find((function(e){return e.channelName===t.channel}));a.selected=!0,r({channelName:a.channelName,selectedChannel:a})}}}),[]);var u=Object(I.useRef)(),l=Object(I.useRef)(),d=function(){var e,t,r,n;null===(e=u.current)||void 0===e||null===(t=e.unspread)||void 0===t||t.call(e),null===(r=l.current)||void 0===r||null===(n=r.unspread)||void 0===n||n.call(r)};Object(I.useImperativeHandle)(t,(function(){return{unspread:d}}));var p=function(e){e.channelName;var t=e.selectedChannel,n=e.opts;r({channelName:t.channelName,selectedChannel:t,opts:n}),(null==n?void 0:n.expandAfterSelection)||(null==n?void 0:n.supressUnspread)||d()},m=function(e){return e&&e.channels.map((function(e){return e.channel})).includes(null==a?void 0:a.channelName)},f=function(e){var t;if(!m(e)){var o=null===(t=e.channels.find((function(e){return e.defaultSelected})))||void 0===t?void 0:t.channel,a=n.find((function(e){return e.channelName===o}));a.selected=!0,r({channelName:a.channelName,selectedChannel:a}),d()}},h=null;o.forEach((function(e){if(m(e)){var t,r,n=e.channels.find((function(e){return e.defaultSelected}));h=null==n||null===(t=n.groupBottomContent)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.text}}));var v=1===(null==o?void 0:o.length)&&o[0].channelGroupType===Uo;return w.a.createElement("div",{className:Bo.a.container},w.a.createElement("div",{className:Bo.a.paymentlistv2,id:"commodity_paymentlist_v2"},(o||[]).map((function(t){return t.channelGroupType===Fo?w.a.createElement(Yo,nt()({},e,{key:"xyhfGroup",payChannelGroup:t,onChannelSelected:p,isSelected:m(t),onGroupSelected:f})):t.channelGroupType===Uo?w.a.createElement(Yo,nt()({},e,{key:"normalGroup",ref:u,payChannelGroup:t,onChannelSelected:p,isSelected:m(t),onGroupSelected:f,isNormalOnlyGroup:v})):t.channelGroupType===Ho?w.a.createElement(Yo,nt()({},e,{key:"installmentGroup",installmentList:i,lockInstallmentTerm:s,lockCreditCardTerm:c,ref:l,payChannelGroup:t,onChannelSelected:p,isSelected:m(t),onGroupSelected:f})):void 0})),w.a.createElement("div",{className:Bo.a.placeholder})),h&&w.a.createElement("div",{className:Bo.a.channelBottomContent},h))})),Jo=Xo,Ko=r("losq"),Zo=r.n(Ko),$o=r("9K/W"),ea=r.n($o),ta=w.a.createContext({glide:function(){}}),ra=ta.Provider;function na(e){var t=e.visible,r=e.onHide,n=void 0===r?function(){}:r,a=e.children,i=e.bgFillClassName,s=void 0===i?"":i,c=e.containerClassName,u=void 0===c?"":c,l=Object(I.useState)(!1),d=D()(l,2),p=d[0],m=d[1];function f(e){e&&e.stopPropagation(),m(!1)}return Object(I.useEffect)((function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,17)};t&&e((function(){e((function(){m(!0)}))}))}),[t]),w.a.createElement("div",{style:{display:t?"":"none"}},w.a.createElement("div",{className:A()(ea.a.bgFill,s,o()({},ea.a.bgFillShow,p)),onClick:f}),w.a.createElement("div",{className:A()(ea.a.container,u,o()({},ea.a.visibleContainer,p)),onClick:function(e){return e.stopPropagation()},onTransitionEnd:function(e){p||n(e)}},w.a.createElement(ra,{value:{glide:f}},a)))}var oa=1,aa=3,ia=31,sa=33,ca=34,ua="1",la="支付未完成，请重新支付",da={DEFAULT:0,LUCKY_DRAW:1,SPIKE:2,TZMD:3,GET_EXTRA_FOR_FREE:4,SUPER_SPIKE:5,NEW_USER_GROUP:6,FREE_TRIAL:7,CAPITAL_GIFT:8,CAPITAL_GIFT_LOTTERY:9,TZYY:10,DEPOSITE_GROUP:11,MULTIPLY_GOODS_DISCOUNT:12,LIMITED_TIME_FREE:13,THOUSAND_PEOPLE_GROUP:14,DUODUO_JINBAO:15,LIMITED_TIME_DISCOUNT:16,APP_NEWER_JOIN_GROUP:17,LIMITED_QUANTITY_DISCOUNT:18,WELFARE:19,LUCKY_DRAW_MUST_WIN:20,ACT_FREE_GROUP:21,SIGN_IN:23,MONTHLY_MOBILE_FARE:24},pa={DEFAULT:1,IMPORTS:2,OVERSEAS_TRANSSHIP:3,OVERSEAS_DM:4,MOBILE_DATA:5,MOBILE_FARE:6,TRADE_COUPON:7,QQ:8,GAS_CARD:9,COMPENSATION:10,WECHAT_RED_ENVELOPE:11,SIGN_IN_BONUS:12,AUDIO_VISUAL_MEMBER:16,PRESCRIPTION_MEDICION:20},ma="0",fa="2",ha=r("Rc36");r("1R20");var va=r("HNyE"),ya=r.n(va),ga=w.a.createElement("svg",{t:"1631178532091",viewBox:"0 0 1024 1024"},w.a.createElement("path",{d:"M943.3 147.7C811.4 142 685 97.8 567.9 16.3L545.7 0.8l-22.1 15.4C406.4 97.8 280.1 142.1 149 147.7h-41.4v345.8c0 253.4 176.4 470.3 428.7 527.5l11 1.8 7.9-1.8c252.4-57.2 428.6-274.1 428.6-527.5V147.7h-40.5zM516.2 686.8L323.9 494.4l51.6-51.6 140.6 140.7 246.6-246.7 51.6 51.6-298.1 298.4z"}));var ba=function(e){var t=e.title,r=e.callbacks,n=void 0===r?{}:r,o=Object(I.useState)(!0),a=D()(o,2),i=a[0],s=a[1];n.hideLoading=function(){return s(!1)},n.showLoading=function(){return s(!0)};var c={display:i?"block":"none",opacity:i?1:0};return w.a.createElement("div",{className:ya.a.container,style:c},w.a.createElement("div",{className:ya.a.icon},ga),w.a.createElement("div",{className:ya.a.title},t),w.a.createElement("div",{className:ya.a.dot1}),w.a.createElement("div",{className:ya.a.dot2}),w.a.createElement("div",{className:ya.a.dot3}))},_a=r("L/R6"),ka=r.n(_a),Sa=w.a.createElement("svg",{viewBox:"0 0 1024 1024"},w.a.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var Ia=function(e){var t=e.title,r=e.callbacks,n=void 0===r?{}:r,o=Object(I.useState)(!0),a=D()(o,2),i=a[0],s=a[1];n.hideLoading=function(){return s(!1)};var c={display:i?"block":"none",opacity:i?1:0};return w.a.createElement("div",{className:ka.a.container,style:c},w.a.createElement("div",{className:ka.a.icon},Sa),w.a.createElement("div",{className:ka.a.title},t))},wa=r("eJ5W"),Pa=r.n(wa),Oa=w.a.createElement("svg",{viewBox:"0 0 1024 1024"},w.a.createElement("path",{d:"M512.000586 0c-282.768737 0-511.999414 229.229504-511.999413 511.999414s229.231849 511.999414 511.999413 511.999413c282.76991 0 511.999414-229.229504 511.999414-511.999413S794.770496 0 512.000586 0z m277.41458 419.425847L486.618477 722.222536a46.106747 46.106747 0 0 1-15.420913 10.194598c-16.82484 6.812037-36.904398 3.430649-50.49446-10.158239L265.355115 566.910906c-18.100924-18.102097-18.100924-47.722964 0-65.825061h0.001173c18.100924-18.102097 47.722964-18.102097 65.823889 0L453.642025 623.547693l269.946906-269.946907c18.100924-18.100924 47.722964-18.100924 65.825062 0 18.102097 18.102097 18.102097 47.724137 0.001173 65.825061z","p-id":"101653"}));var Ca=function(e){var t=e.title,r=e.payInfoTitle,n=e.callbacks,o=void 0===n?{}:n,a=Object(I.useState)(!0),i=D()(a,2),s=i[0],c=i[1];o.hideLoading=function(){return c(!1)};var u={display:s?"block":"none",opacity:s?1:0};return w.a.createElement("div",{className:Pa.a.container,style:u},w.a.createElement("div",{className:Pa.a.icon},Oa),w.a.createElement("div",{className:Pa.a.title},r),w.a.createElement("div",{className:Pa.a.title},t))},xa=(r("p+lt"),{fadeIn:function(e,t){t=t||{};var r=0;this.animate_({duration:t.duration,step:function(t){r+=t,e.style.opacity=r},complete:t.complete})},fadeOut:function(e,t){void 0!==t&&null!=t||(t={});var r=1;this.animate_({duration:t.duration,step:function(t){r-=t,e.style.opacity=r},complete:t.complete})},animate_:function(e){var t=this;(e=e||{}).duration=e.duration||300,null==e.easing&&(e.easing=function(e){return t.easing_.linear(e)}),e.lastProgress=e.easing(0);var r=Date.now(),n=setInterval((function(){var t=Date.now()-r,o=e.easing(Math.min(1,t/e.duration)),a=o-e.lastProgress;null!=e.step&&e.step(a),o>=1&&(clearInterval(n),null!=e.complete&&e.complete()),e.lastProgress=o}),1e3/24)},easing_:{linear:function(e){return e}}}),Ea=document.createElement("div");Ea.innerHTML='<div class="icon-toast-container">\n    <div class="icon-toast">\n        <div class="icon-toast-background"></div>\n        <div class="icon-toast-box">\n            <i id="icon-toast-icon" class="icon icon-toast-icon"></i>\n        </div>\n        <div id="icon-toast-msg" class="icon-toast-msg"></div>\n    </div>\n</div>';var Da=Ea.firstChild;document.body.appendChild(Da);function Na(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}var Ta=function(){function e(t){l()(this,e),this.dom=t}return p()(e,[{key:"showSpinner",value:function(){Object(Se.show)()}},{key:"hideSpinner",value:function(){Object(Se.hide)()}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"markSwitched",value:function(){}},{key:"markDuringMianmi",value:function(){}},{key:"markSignXianYongHouFu",value:function(){}},{key:"showSuccess",value:function(){}}]),e}(),ja=function(e){f()(r,e);var t=Na(r);function r(){var e;l()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).callbacks={},e.switched=!1,e}return p()(r,[{key:"markSwitched",value:function(){this.switched=!0}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"免密支付中":t;Object(Se.hide)(),be.a.render(w.a.createElement(ba,{title:r,callbacks:this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}},{key:"showSuccess",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.title,n=void 0===r?"支付成功":r,o=t.payInfoTitle;return this.switched?be.a.render(w.a.createElement(Ca,{payInfoTitle:o,title:n,callbacks:this.callbacks}),this.dom):be.a.render(w.a.createElement(Ia,{title:n,callbacks:this.callbacks}),this.dom),new Promise((function(t){setTimeout((function(){e.hide(),t()}),1500)}))}},{key:"hide",value:function(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}]),r}(Ta),Aa=function(e){f()(a,e);var t,r,n,o=Na(a);function a(e,t){var r;return l()(this,a),(r=o.call(this,e)).callbacks={},r.switched=!1,r.duringMianmi=!1,r.signXyhf=!1,r.renderProcess=Promise.resolve(),r.showSafeHint=t,r}return p()(a,[{key:"markSwitched",value:function(){this.switched=!0}},{key:"markDuringMianmi",value:function(){this.duringMianmi=!0}},{key:"markSignXianYongHouFu",value:function(){this.signXyhf=!0}},{key:"getMianmiText",value:function(e){return e===zn.WeChat?"微信支付":e===zn.DuoDuoPay?"多多支付":e===zn.AliPayDirectDebit?"支付宝":void 0}},{key:"show",value:(n=c()(i.a.mark((function e(){var t,r,n,o,a=this,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.title,n=void 0===r?"免密支付中":r,o=t.paymentType,Object(Se.hide)(),this.duringMianmi){e.next=6;break}this.realShow(n),e.next=10;break;case 6:if(!this.switched||this.signXyhf&&o===zn.XianYongHouFu){e.next=8;break}return e.abrupt("return");case 8:this.showSafeHint&&(this.showSafeHint=!1,this.renderProcess=this.renderProcess.then((function(){return a.realShow("安全检测通过"),new Promise((function(e){return setTimeout(e,600)}))}))),this.renderProcess=this.renderProcess.then((function(){return a.realShow(a.signXyhf&&o===zn.XianYongHouFu?n:a.getMianmiText(o)),new Promise((function(e){return setTimeout(e,600)}))}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"realShow",value:function(e){be.a.render(w.a.createElement(ba,{title:e,callbacks:this.callbacks}),this.dom),this.callbacks.showLoading&&this.callbacks.showLoading()}},{key:"showSuccess",value:(r=c()(i.a.mark((function e(){var t,r,n,o,a=this,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.title,n=void 0===r?"支付成功":r,o=t.payInfoTitle,e.next=3,this.renderProcess;case 3:return this.switched?be.a.render(w.a.createElement(Ca,{payInfoTitle:o,title:n,callbacks:this.callbacks}),this.dom):be.a.render(w.a.createElement(Ia,{title:n,callbacks:this.callbacks}),this.dom),e.abrupt("return",new Promise((function(e){setTimeout((function(){a.realHide(),e()}),1500)})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"hide",value:(t=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.renderProcess;case 2:this.realHide();case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"realHide",value:function(){this.callbacks.hideLoading&&this.callbacks.hideLoading()}}]),a}(Ta);function Ra(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Ma(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ra(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var La=function(){function e(){l()(this,e),this.el=null,this.renderer=null,this.currentPaymentType=null,this.startChannel=null,this.mianmiChannels=[]}return p()(e,[{key:"getDom",value:function(){return this.el||(this.el=document.createElement("div"),this.el.setAttribute("id","pdd-pay-loading-manager"),document.body.appendChild(this.el)),this.el}},{key:"dispose",value:function(){this.el&&document.body.removeChild(this.el),this.el=null}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.paymentType,r=e.mianmiV3,n=e.mianmiV3SafeHint;this.currentPaymentType=t;var o=this.getDom();this.renderer=r?new Aa(o,n):new ja(o)}},{key:"showSpinner",value:function(){this.renderer.showSpinner()}},{key:"hideSpinner",value:function(){this.renderer.hideSpinner()}},{key:"markDuringMianmi",value:function(){this.renderer.markDuringMianmi()}},{key:"markSignXianYongHouFu",value:function(){this.renderer.markSignXianYongHouFu()}},{key:"show",value:function(e){this.renderer.show(Ma(Ma({},e),{},{paymentType:this.currentPaymentType}))}},{key:"hide",value:function(){return this.renderer.hide()}},{key:"isMianmiChannelUsed",value:function(e){return this.startChannel===e||this.mianmiChannels.includes(e)}},{key:"recordMianmiChannel",value:function(e){this.mianmiChannels.push(e),this.renderer.markSwitched()}},{key:"showSuccess",value:function(e){return this.renderer.showSuccess(e)}},{key:"isSwitched",get:function(){return this.mianmiChannels.length>0}}]),e}(),Ba=new La,Fa={Success:10001,Paying:10002,Failed:10003,NotFound:10004},Ua={AliPayDirectDebit:{Rollback:1e4,Unsign:10001,Paying:10002,Success:10003,Failed:10004,Unknown:16666},WechatDirectPayQuery:Fa,Universal:Fa,UniversalException:{CHANCE_EXCEEEDED:-999999,QOGIR_EXCEPTION:-999998,QOGIR_PREMATURE_END:-999997},PayStatus:{Unpayed:0,Payed:2,RefundApplied:3,Refunded:4},ParentOrderStatus:{Unpayed:0,Payed:1,Canceled:2}},Ha={Normal:"",Tail:"tail",Combine:"combine"},Va=function(e){var t={};return Object.keys(e).forEach((function(r){t[r]={code:r,message:e[r]}})),t}({1101:"手机网络繁忙，请稍后再试",30400:"没有安装QQ客户端",4e4:"错误的请求地址或方法",40001:"登录已过期，请重新登录",40002:"手机网络繁忙，请稍后再试",40003:"错误的请求参数",40004:"微信登录失败",40005:"请求还在处理中",40006:"手机登录验证码错误",40100:"暂未开通该开放平台",40015:"验证码重复请求",40016:"验证码超出当天限制",40017:"今日可发送次数已达上限",40018:"验证码填写错误",40019:"验证码填写超时",40020:"登录失败",40031:"微信登录失败!",40032:"QQ登录失败!",40033:"登录重试失败，请稍后再试",43058:"",41001:"商品不存在",41002:"商品已下架",41003:"商品已售罄",41004:"商品不在同一商店",41005:"该商品当前不在抽奖活动时间",41006:"商品不在可售区域",41101:"抽奖活动暂不支持单独购买",41102:"卡券可使用的时间已过期，请选购其他商品",42001:"拼单已满",42002:"该拼单不存在",42003:"拼单已过期",42004:"您购买此商品次数达到上限，去看看其他商品吧~",42005:"该商品开团数已达上限",42006:"拼单已满",42007:"此拼单已满，正在发起新拼单...",42501:"订单已成团，暂不支持修改收货地址，请与商家客服联系",42502:"该订单已拼单成功，请刷新页面",43001:"用户不存在",43002:"地址错误",43004:"身份证号不存在",43005:"姓名和身份证号不一致",43006:"对不起，您无法获取或更新身份证号",43007:"对不起，您已用完当前最大验证次数，请24小时后再试",43008:"姓名和身份证不匹配，请重新认证",43009:"您今日认证过于频繁，请明天再试",43010:"该地址已存在",43011:"该地址无法导入",43013:"一小时内不能重复提交",43015:"只允许微信用户够买",43016:"创建地址失败",43017:"最多只能添加100个收货地址哦~",43098:"您在店铺没有拼单成功记录，请勿发红包！拼多多不支持通过发红包购买商品！",43099:"该商品仅限新用户购买一件哦~",44001:"优惠券不存在",44002:"优惠券已使用",44003:"优惠券没有达到最小使用金额",44004:"优惠券已过期",44005:"优惠券不属于用户",44006:"优惠券已废弃",44007:"优惠券暂未到使用时间",44008:"优惠券不能在该分类使用",44010:"优惠券已经抢完了，下次早点来哦",44011:"您已经领过该优惠券",44012:"优惠券领取失败",44015:"不是团长不能使用团长免单优惠券",44016:"优惠券批次不存在",44020:"正在处理中，请稍后再试！",44026:"该券太火爆，全部已被领完",44027:"活动已结束！",44033:"优惠券使用失败",44035:"批次类型错误",44036:"团免券已被领完",44037:"用户已达团免券日领取上限",44038:"您已领取该券",44039:"未找到符合条件的团免券批次",44041:"领取失败",44042:"领取链接已失效，下次早点哦",44043:"不符合领取条件哦",44044:"该优惠券活动不存在",44045:"不在活动时间",44046:"只有无订单的新用户可领取哦",44047:"红包券数量不够",44061:"多件优惠活动结束",44063:"多件优惠已经享受过了",44064:"多件优惠活动暂未开始",44065:"多件优惠活动暂未开始",44066:"多件优惠活动结束",44067:"商家券和多件优惠活动不能同时使用",44072:"分享码已过期",44073:"免拼卡不足",44076:"不符合免拼卡的使用条件",44090:"商品活动未开始",44091:"商品活动已结束",44092:"商品活动不存在",44093:"活动商品已售罄",44095:"商品活动已结束",44096:"商品活动不存在",44097:"您购买的该活动商品数量已达上限",44098:"商品订单已创建",44099:"商品活动有误",44100:"您未获取抢购资格，不可购买该商品",44200:"已达红包使用数量上限",44201:"每满{0}元可用{1}个红包",45001:"订单不存在",45002:"订单不属于该用户",45003:"订单不能取消",45004:"订单商品不一致",45005:"订单已经收货",45006:"订单还未发货",45007:"海淘订单没有提交身份证",45008:"订单已支付",45009:"支付繁忙，请重试",45010:"订单正在支付中",45012:"手机充值号码为空",45013:"手机充值号码不支持",45014:"手机充值商品不存在",45015:"确认收货失败",45023:"正在处理您的退款/售后申诉，无法主动确认收货",45026:"超过购买商品限制",45030:"订单正在处理中，请刷新页面",45031:"单次购买金额不得高于9.5万元",45033:"超过每个手机号码购买次数限制",45034:"抱歉，秒杀尚未开始，请稍候",45035:"该商品为App新人专享秒杀，非首次下载App24小时内的用户无法发起拼单",45036:"每名用户只能购买一次哦",45037:"你的当前登录帐号有些风险哦，建议先直接去充值吧",45038:"包月套餐订单购买免密校验失败",45039:"包月套餐功能升级中，当前只支持微信帐号登录的用户哦",45040:"限购商品暂时无法购买哦～",45041:"本次活动期间已抢到过一张神券，不能再抢了~",45042:"手机网络繁忙，请稍后再试",45043:"该类型商品本次活动期间您已抢过，不能再抢了~",45044:"您好，该商品仅可购买一次哦~",45045:"该商品仅能在拼多多App中购买！",45046:"该商品仅允许微信登录用户购买！",45047:"超过该商品每次购买件数限制",45050:"您已经在本场下过单了，去看看其他商品吧~",45051:"已购买过此类优惠商品，看看其他商品吧",45052:"您最近购买此商品次数达到上限，去看看其他商品吧~",45053:"手机网络繁忙，请稍后再试",45054:"需验证码校验！",45055:"手机网络繁忙，请稍后再试",45104:"不是定金类型订单",45105:"订单已取消",45106:"订单已确认",45107:"定金未成团",45206:"创建订单存在风险",45207:"创建订单验证码非法",45208:"价格有变动，请返回上一页查看",45209:"请更换支付方式，花呗分期暂不可用",45210:"手机网络繁忙，请稍后再试",45301:"店铺补差价金额达到上限！",45320:"未获取活动资格！",45321:"该活动必须是微信APP用户参加！",45322:"该活动同一用户不可重复参加！",45323:"该活动同一设备不可重复参加！",45324:"该活动用户微信置信度较低！",45325:"非APP新用户",45326:"手机网络繁忙，请稍后再试",45327:"账户存在风险，无法下单",45402:"该商品秒杀活动已结束",45403:"该商品免单活动已结束",45404:"该商品买二送一活动已结束",45405:"该商品秒杀活动已结束",45406:"该活动已结束",45407:"该活动已结束",45110:"未到尾款支付时间",45111:"超过尾款支付时间",45112:"未到定金支付时间",45113:"超过定金支付时间",45412:"该商品多件优惠活动已结束",45413:"该商品限时免单活动已结",45416:"该商品优惠活动已结束",45417:"该活动已结束",45418:"该优惠商品已被抢空",45420:"该活动已结束",45422:"该活动已结束",45423:"该活动已结束",45424:"该包月活动已结束",45425:"您向商家补的差价已经超过上限",45428:"该商品属于活动商品，无法正常购买",45429:"该地区暂时无货",45450:"此海淘商品仅支持微信支付",45500:"商品信息和充值号码不匹配",45501:"新地址暂不支持，请重新选择",45511:"您不是专属用户，不能以特惠价开团哦~",45514:"库存不足",45515:"低于最低起售件数",45516:"该商品有更低价的优惠活动，请刷新购买",46001:"团订单不存在",46002:"无法重复参团",46012:"商品售罄，免拼失败，拼单到期后将退款",46013:"秒杀活动结束，免拼失败，拼单到期后将退款",46014:"插队拼单已满",47003:"限量件数已被抢光，请重新选购",47101:"支付失败，限时折扣活动已结束",47102:"支付失败，限量折扣活动已结束，请重新购买",47010:"折扣活动检查失败",47011:"限时折扣活动已经使用",47012:"限时折扣活动未开启",47013:"限时折扣活动未到开始时间",47014:"限时折扣活动已经结束",47015:"商家券和限时折扣活动不能同时使用",47030:"已经催过了，正在尽快发货",47031:"催发货请求异常，请稍后重试",48001:"图片格式错误",48002:"图片大小超过限制",49001:"商品不存在",5e4:"当前访问人数较多，请稍后再试",50001:"今天票数已用完，明天再来吧",50002:"当前有未完成的团",80001:"投票活动已结束",6e4:"",60001:"该团已经结束",60002:"确认收货失败",60003:"参数错误",60004:"您已退款成功，无须确认收货",60005:"用户拒绝",60006:"用户取消",60007:"确认收货失败，请稍后重试",60100:"未安装微信客户端",60110:"未安装微博客户端",60120:"未安装手机QQ",60200:"录制失败",60201:"录音没有权限",60205:"录音时间过短",60210:"上传失败",60220:"播放失败",71001:"获取售后列表失败",71002:"申请售后失败",71003:"获取售后单详情失败",71004:"售后单添加售后信息失败",71005:"售后单修改失败",71006:"撤销售后失败",71007:"售后单用户确认发货失败",71008:"售后单重新申请失败",71009:"售后单申请平台介入失败",71010:"钱款去向查询失败",71011:"留言标记失败",71012:"售后用户待处理未读数量获取失败",71013:"售后未读留言数目获取失败",71014:"获取付款类型失败",71015:"获取售后原因失败",71016:"获取我要发货列表失败",71017:"获取是否使用平台优惠券失败",71018:"售后单用户确认完成失败",71019:"获取小额打款详情失败",71020:"填写账户信息失败",450130:"商品信息和充值号码不匹配",450131:"该商品每个号码每月限充一次",530001:"团不存在",530002:"团已失效",530003:"团已满",530004:"助力单不存在",530005:"不支持该支付方式",530006:"助力单已支付",530007:"助力单已退款",530008:"不在活动时间",530009:"您已经拿过该商品了，不要贪心哦",530010:"已达到今日帮忙付款次数上限，明日再来吧",530011:"已达到今日帮助该好友次数上限，明日再来吧~",530012:"已经达到帮助该好友支付次数上限，赶紧去帮助其他人吧~",530013:"不符合免费帮忙条件",530014:"您不是拼多多App新人，不能开团哦",144073:"您没有免拼卡，请返回重新下单",144076:"不符合免拼卡的使用条件",144078:"请求失败，请重新发起支付",152001:"限量折扣活动已经使用",152002:"限量折扣活动未开启",152003:"限量折扣活动未到开始时间",152004:"限量折扣活动已经结束",152005:"商家券和限量折扣活动不能同时使用",152006:"限量件数已被抢光，请重新选购",152010:"已达到该商品活动期内的最多购买件数，不能再抢了～",3000001:"充值失败，请稍后重试",3000002:"话费充值失败，请稍后重试",3000003:"话费充值下单失败，请稍后重试",400001:"微信零钱不足，且未绑定银行卡，请绑定银行卡再试，或邀请好友代付",400002:"银行卡余额不足，请绑定其他银行卡再试，或邀请好友代付",400003:"银行卡预留手机号不符，请核对后再试，或邀请好友代付",400004:"银行卡已失效，请核对后再试，或邀请好友代付",400005:"银行拒绝交易，请核对后再试，或邀请好友代付",400099:"支付未完成，请更换支付方式",4000004:"手机网络繁忙，请稍后再试",4000005:"手机网络繁忙，请稍后再试",4000006:"",20504101:"团订单不存在",20504005:"手机网络繁忙，请稍后再试",12960005:"商品不存在",12960006:"活动未开始",12960007:"商品已售罄",12960008:"拼单人数已满",12960009:"只有App新人才能参团哦",12960010:"帐号信息异常",12960012:"该商品一次只能购买1件哦",12960014:"请使用微信登录再下单",12960016:"你已经开过团了，请勿重复开团",12960017:"今日开团次数已用完，明天再来吧",12960018:"今日参团次数已用完，明天再来吧",12960019:"该商品你今日已经参过团了"}),za={AuthenticationFailed:Va[40001],APIServiceBusy:Va[40002],GraphicalCodeForPhoneCode:Va[40017],LoginFailed:Va[40020],NeedAuthenticationLogin:Va[43058],ItemRemoved:Va[41002],OutOfStock:Va[41003],NotInLuckyTime:Va[41005],AddressUnreachable:Va[41006],NoCouponLeft:Va[44010],CouponTaken:Va[44011],CouponTakeFailed:Va[44012],CouponTakenOut:Va[44026],PersonalInfoNoID:Va[45007],OrderPayed:Va[45008],NeedVerfication:Va[45054],GroupInvalid:Va[46001],GroupFailed:Va[42003],OverBuyLimit:Va[42004],GroupOverflow:Va[42005],GroupAutoOpenFailed:Va[42006],GroupAutoOpenSuccess:Va[42007],IDCardEmpty:Va[43004],NoNameIDBefore:Va[43006],IDCardFake:Va[43008],IDCardFailTooMuch:Va[43009],InsufficientCoupon:Va[44047],AvailableCouponsPerUnit:Va[44201],NoSuchOrder:Va[45001],PrepayBusy:Va[45009],OrderPaying:Va[45010],PaymentDisabled:Va[45210],SpikeComing:Va[45034],OrderPayRisk:Va[45206],OrderPayVerificationInvalid:Va[45207],OrderAlreadyUrged:Va[47030],OrderUrgeError:Va[47031],NativeNormalError:Va[6e4],NativeParamsError:Va[60003],NativeUserRefuse:Va[60005],NativeUserCancel:Va[60006],NativeAudioRecordFailed:Va[60200],NativeAudioRecordUndetermined:Va[60201],NativeAudioTooShort:Va[60205],NativeAudioUploadFailed:Va[60210],NativeAudioPlayFailed:Va[60220],SuccessiveMobileFeeOnlyOnce:Va[45036],SuccessiveMobileFeeRisk:Va[45037],SuccessiveMobileFeeUnsigned:Va[45038],SuccessiveMobileFeeOnlyWechat:Va[45039],OverBuyVirtualGoodsLimit:Va[45033],AvailableActivityChanged:Va[45516],GroupCompleted:Va[42001],InvalidAddress:Va[43002],CouponDailyLimit:Va[44037],CouponBatchLimit:Va[44038],CouponTokenInvalid:Va[44041],CouponTokenExpired:Va[44042],CouponPushNotIn:Va[44043],CouponActivityAbsent:Va[44044],MultiplyDiscountPause:Va[44064],MultiplyDiscountEnd:Va[44066],CouponMaxNumReached:Va[44200],HistoryGroupOpenFailed:Va[46014],GoodsNotExist:Va[49001],NativePaymentCancel:Va[60006],WithoutWeChatClient:Va[60100],QQPayFailed:Va[60120],OrderLimitedSalesEnd:Va[152004],OrderLimitedSalesOut:Va[152006],PayLimitedSalesEnd:Va[47102],PayLimitedSalesOut:Va[47003],ServerBusy:Va[4000004],OrderSpikeMsgError:Va[4000006],WxDirectPayWxBalanceError:Va[400001],WxDirectPayCardBalanceError:Va[400002],WxDirectPayTelephoneError:Va[400003],WxDirectPayCardInvalidError:Va[400004],WxDirectPayRefusedError:Va[400005],WxDirectPayUnknownError:Va[400099],ACT_GROUP_NOT_EXISTS:Va[530001],ACT_GROUP_FAILED:Va[530002],ACT_GROUP_SUCCESS:Va[530003],ACT_RECORD_NOT_EXISTS:Va[530004],PAY_CHANNEL_NOT_SUPPORT:Va[530005],ACT_RECORD_PAID:Va[530006],ACT_RECORD_REFUND:Va[530007],ASSIST_FOR_ONE_DAILY_LIMIT:Va[530011],ASSIST_FOR_ONE_LIMIT:Va[530012],getMsgFromCode:function(e){var t=Va[e];return t?t.message:""}},Wa=r("f3rD"),Qa=function(e){var t=e.payload,r=e.error_msg,n=e.error_code,o=e.page;Object(Wa.sendNormalLog)({page:o,error_message:r,payload:t,error_code:n},{bizSide:"consumer-platform-fe",appId:"100603",testAppId:"100211"})},qa=function(){function e(){l()(this,e)}return p()(e,[{key:"pay",value:function(){return Promise.reject({errorCode:0})}}]),e}();function Ga(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ga(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ga(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xa={},Ja=Object(_e.getCurrentPlatform)(),Ka="undefined"!=typeof location&&location.hostname.includes("yangkeduo.com"),Za=!Ja.isNativePlatform&&Ka;var $a={loggingURL:function(e){return"undefined"!=typeof window&&window.__LogingUrl__?window.__LogingUrl__:e?"https://th.yangkeduo.com/t.gif":"https://th.pinduoduo.com/t.gif"}(Za),logRoutes:{perf:"https://tp.pinduoduo.com/p.gif",error:"https://te.pinduoduo.com/e.gif",chat_error:"https://te.pinduoduo.com/e.gif",real_error:"https://tne.pinduoduo.com/tne.gif",ad:function(e){return"undefined"!=typeof window&&window.__AdLogingUrl__?window.__AdLogingUrl__:e?"https://ta.yangkeduo.com/t.gif":"https://ta.pinduoduo.com/t.gif"}(Za),tracking:"https://tldas.pinduoduo.com/e.gif"}},ei={shop:{shopID:2,name:"拼多多",logo:"https://pinduoduoimg.yangkeduo.com/base/logo.jpg",weChatTimelineShareDisabled:!1,qqTimelineShareDisabled:!0},loggingURL:$a.loggingURL,httpsLoggingURL:$a.loggingURL,wxAppLoggingURL:"https://xcxapp.pinduoduo.com/t.gif",qqAppLoggingURL:"https://xcxapp.pinduoduo.com/qqt.gif",logRoutes:Ya({download:"https://at.pinduoduo.com/p"},$a.logRoutes),httpsLogRoutes:Ya({},$a.logRoutes),cmtURL:"http://cmtw.pinduoduo.com/api/ajax",httpsCmtURL:"https://cmtw.pinduoduo.com/api/ajax",pushDomain:"ws://ws.pinduoduo.com/",chatDomain:"ws://ws.pinduoduo.com/",wssDomain:"wss://ws.pinduoduo.com/",fileDomain:"http://file.pinduoduo.com/",httpsFileDomain:"https://file.pinduoduo.com/",qqFollowTip:"感谢关注拼多多",AppID:{FriendPay:-1,WeChat:2,WeChatWAPPay:20,SMS:5,AliPay:6,QQ:12,Weibo:11,AliPayWeb:9,QQConnect:13,QQPublicOld:27,QQPublic:30,ApplePay:31,AliPayDirectDebit:35,WeChatH5Pay:38,HBInstallmentPay:52,UnionPay:78,UnionPayWeb:79},ApiKey:{WeChat:"wx839691cce7c102bb",Weibo:"3907421985",QQConnect:"101273489",QQPublicOld:"200633114",QQPublic:"200675334",QQUIN:"1419183687",QQPublicTrack:"10000096",QQPublicMid:"1316857601",BaiduStatistics:"865a6952adbb55a10d86810cdcc6864a"},RedirectURI:{AliPayDirectDebit:"pinduoduoalipays://",Weibo:"http://mobile.yangkeduo.com/wboauth_callback.html",QQConnect:"http://mobile.yangkeduo.com/qqoauth_callback.html"},imgShareDomain:"http://m.pin3pin.com/",ContactUrl:"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170962&idx=1&sn=8763710a673d7b76f418a7ae76cff86c#rd",ForceContactUrl:"http://mp.weixin.qq.com/s?__biz=MzIxNzA1NDEyNQ==&mid=649170998&idx=1&sn=684606e474788e7f191f6f6c68d0dfe4#rd",QQContactUrl:"http://post.mp.qq.com/material/show/31343139313833363837-1472733830-1464276288782813-0.html?_wv=2281701505&v=3&sig=73182fcdc7ed1c0b6aeb3ce78501d00b&_bid=2321",thirdLevelLoginPath:"jkr_report.html"},ti={AppID:{WeChat:24},ApiKey:{WeChat:"wx20392b0342c8af91"}},ri={hutaojie:1,mobile:2,weipin:3,app:4,huabei:17,xibei:18,dongbei:19,huazhong:21,huadong:22,dongnan:23,xinan:24,panduoduo:25,sc:26,hybrid:"hybrid",hybridTest:"hybridTest",huanan:40,hzsc:41,dnsc:42,dbsc:43,xbsc:44,xnsc:45,hnsc:46,hbsc:47,pddpt:48,m:49,mm:66,myqxgs:68,mobpinduoduo:72,mmpinduoduo:73,mobilepinduoduo:74,mobileddlequ:75,nvude3:82,mobnvude3:83,mpinduoduo:63,mddlequ:85,hhngpinduoduo:129};Xa[ri.hutaojie]={},Xa[ri.mobile]={domain:"https://mobile.yangkeduo.com/",BeiTaiShareDomains:["http://mobile.pinduoduo.net/"]},Xa[ri.weipin]={domain:"https://weipin.yangkeduo.com/",AppID:{WeChat:ri.weipin},ApiKey:{WeChat:"wx51e5fe8c95f71b20"}},Xa[ri.huabei]={domain:"https://huabei.yangkeduo.com/",AppID:{WeChat:ri.huabei},ApiKey:{WeChat:"wx4044e9709b7188ea"}},Xa[ri.xibei]={domain:"https://xibei.yangkeduo.com/",AppID:{WeChat:ri.xibei},ApiKey:{WeChat:"wxbc80866520cc300d"}},Xa[ri.dongbei]={domain:"https://dongbei.yangkeduo.com/",AppID:{WeChat:ri.dongbei},ApiKey:{WeChat:"wx27901e8ab752ed35"}},Xa[ri.huazhong]={domain:"https://huazhong.yangkeduo.com/",AppID:{WeChat:ri.huazhong},ApiKey:{WeChat:"wx95c952f67a727090"}},Xa[ri.huadong]={domain:"https://huadong.yangkeduo.com/",AppID:{WeChat:ri.huadong},ApiKey:{WeChat:"wx03908118b84f285a"}},Xa[ri.dongnan]={domain:"https://dongnan.yangkeduo.com/",AppID:{WeChat:ri.dongnan},ApiKey:{WeChat:"wxff2e8dc2762c5b92"}},Xa[ri.xinan]=Ya({domain:"https://xinan.yangkeduo.com/"},ti),Xa[ri.panduoduo]={},Xa[ri.sc]={domain:"https://sc.yangkeduo.com/",AppID:{WeChat:ri.sc},ApiKey:{WeChat:"wx32b0d9cdd390ebf0"}},Xa[ri.app]={domain:"https://app.yangkeduo.com/",AppID:{WeChat:4},ApiKey:{WeChat:"wx77d53b84434b9d9a"}},Xa[ri.hybrid]={shareDomain:"https://mobile.yangkeduo.com/",AppID:{WeChat:4},ApiKey:{WeChat:"wx77d53b84434b9d9a"}},Xa[ri.hybridTest]={};var ni,oi="http://mp.weixin.qq.com/s?__biz=MzAxMjcyMTkwOA==&mid=401487202&idx=1&sn=37de9db39432edc32e1eb90d885d7a23#rd";function ai(e,t,r){r&&(t.apiDomain=t.apiDomain?t.apiDomain:r,t.apiDomainNew=t.apiDomain,t.apiDomainV3=t.apiDomain);var n=t.domain||t.shareDomain||"https://mobile.yangkeduo.com/";for(var o in t.shareDomain||(t.shareDomain=n),t.shareDomains={},e)if(e.hasOwnProperty(o)){var a=e[o];[e.QQChatSession,e.QQZone].indexOf(a)>=0?t.domain&&t.domain.indexOf("m.hutaojie.com")>=0?t.shareDomains[a]=t.shareDomain:t.shareDomains[a]="https://mobile.yangkeduo.com/":t.shareDomains[a]=t.shareDomain}return function(){for(var e={},t=0;t<arguments.length;t++)"object"===me()(arguments[t])&&ii(e,arguments[t]);return e}(ei,t)}function ii(e,t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r],o=me()(n);"number"===o||"string"===o||"boolean"===o?e[r]=n:"object"===o?(e[r]=e[r]||{},ii(e[r],n)):(a=n,"[object Array]"===Object.prototype.toString.call(a)&&(e[r]=e[r]||[],ii(e[r],n)))}var a}Xa[ri.huanan]={shareDomain:"https://huanan.yangkeduo.com/",AppID:{WeChat:40},ApiKey:{WeChat:"wxaffd94b821032481"},ContactUrl:oi},Xa[ri.hzsc]={shareDomain:"https://hzsc.yangkeduo.com/",AppID:{WeChat:41},ApiKey:{WeChat:"wx7bca1a27af0a31ed"},ContactUrl:oi},Xa[ri.dnsc]={shareDomain:"https://dnsc.yangkeduo.com/",AppID:{WeChat:42},ApiKey:{WeChat:"wxb79645ae502205d9"},ContactUrl:oi},Xa[ri.dbsc]={shareDomain:"https://dbsc.yangkeduo.com/",AppID:{WeChat:43},ApiKey:{WeChat:"wx01e7a1f91b8c43d3"},ContactUrl:oi},Xa[ri.xbsc]={shareDomain:"https://xbsc.yangkeduo.com",AppID:{WeChat:44},ApiKey:{WeChat:"wxc50a66d9b6d566ed"},ContactUrl:oi},Xa[ri.xnsc]={shareDomain:"https://xnsc.yangkeduo.com",AppID:{WeChat:45},ApiKey:{WeChat:"wx52457b6561fcd804"},ContactUrl:oi},Xa[ri.hnsc]={shareDomain:"https://hnsc.yangkeduo.com",AppID:{WeChat:46},ApiKey:{WeChat:"wx8e75952076e03567"},ContactUrl:oi},Xa[ri.hbsc]={shareDomain:"https://hbsc.yangkeduo.com",AppID:{WeChat:47},ApiKey:{WeChat:"wx7388833e69aafd89"},ContactUrl:oi},Xa[ri.pddpt]={shareDomain:"https://pddpt.yangkeduo.com",AppID:{WeChat:48},ApiKey:{WeChat:"wxe1b0f22089fadce1"},ContactUrl:oi},Xa[ri.m]={domain:"https://m.ishangtong.com",shareDomain:"https://m.ishangtong.com",AppID:{WeChat:48},ApiKey:{WeChat:"wxe1b0f22089fadce1"},ContactUrl:oi},Xa[ri.mm]={shareDomain:"https://mm.ishangtong.com",AppID:{WeChat:66},ApiKey:{WeChat:"wxf05b577296a1b6ec"},ContactUrl:oi},Xa[ri.myqxgs]={domain:"https://m.yiqixiegushi.com",shareDomain:"https://m.yiqixiegushi.com",AppID:{WeChat:66},ApiKey:{WeChat:"wxf05b577296a1b6ec"},ContactUrl:oi},Xa[ri.mobpinduoduo]={shareDomain:"https://mob.pinduoduo.com",AppID:{WeChat:56},ApiKey:{WeChat:"wx1e2715638762a51b"},ContactUrl:oi},Xa[ri.mmpinduoduo]={shareDomain:"https://mm.pinduoduo.com",AppID:{WeChat:57},ApiKey:{WeChat:"wxa19650a24138625a"},ContactUrl:oi},Xa[ri.mobileddlequ]=Ya({shareDomain:"https://mobile.ddlequ.com/"},ti),Xa[ri.mddlequ]=Ya({shareDomain:"https://m.ddlequ.com/"},ti),Xa[ri.mobilepinduoduo]={domain:"https://mobile.pinduoduo.com",shareDomain:"https://mobile.pinduoduo.com"},Xa[ri.nvude3]={useProxyDomain:1,domain:ni="https://m.nvude3.com",shareDomain:ni,AppID:{WeChat:67},ApiKey:{WeChat:"wx15ee6b92001c5295"},ContactUrl:oi,loggingURL:ni+"/proxy/th/t.gif",httpsLoggingURL:ni+"/proxy/th/t.gif",logRoutes:{error:ni+"/proxy/te/e.gif",chat_error:ni+"/proxy/te/e.gif",real_error:ni+"/proxy/tne/tne.gif"},httpsLogRoutes:{error:ni+"/proxy/te/e.gif",chat_error:ni+"/proxy/te/e.gif",real_error:ni+"/proxy/tne/tne.gif"}},Xa[ri.mobnvude3]={shareDomain:"https://mob.nvude3.com",AppID:{WeChat:65},ApiKey:{WeChat:"wx86161385b94a2ed7"},ContactUrl:oi},Xa[ri.mpinduoduo]={shareDomain:"https://mobile.yangkeduo.com/",AppID:{WeChat:ri.mpinduoduo},ApiKey:{WeChat:"wx2993126642818cea"}},Xa[ri.hhngpinduoduo]={shareDomain:"https://hhng.pinduoduo.com/",AppID:{WeChat:ri.hhngpinduoduo},ApiKey:{WeChat:"wx8aeafb2c4c5252fa"}};var si={hutaojie:{m:"hutaojie",app:"apptest"},yangkeduo:{mobile:"mobile",app:"app",huabei:"huabei",xibei:"xibei",dongbei:"dongbei",xinan:"xinan",huazhong:"huazhong",dongnan:"dongnan",huadong:"huadong",panduoduo:"panduoduo",sc:"sc",huanan:"huanan",hzsc:"hzsc",dnsc:"dnsc",dbsc:"dbsc",xbsc:"xbsc",xnsc:"xnsc",hnsc:"hnsc",hbsc:"hbsc",pddpt:"pddpt",weipin:"weipin"},ishangtong:{m:"m",mm:"mm"},yiqixiegushi:{m:"myqxgs"},pinduoduo:{mob:"mobpinduoduo",mm:"mmpinduoduo",mobile:"mobilepinduoduo",m:"mpinduoduo",hhng:"hhngpinduoduo"},nvude3:{m:"nvude3",mob:"mobnvude3"},ddlequ:{mobile:"mobileddlequ",m:"mddlequ"}};var ci=function(e){var t,r=function(e){var t={hostName:e||"",hasThirdLevelDomain:!1};if(!e)return t.hostName=".",t;var r=["m.ishangtong.com","m.yiqixiegushi.com","m.hutaojie.com"],n=e.split("."),o=n.length;if(o<=3)return t;for(var a=n[o-2],i=0;i<r.length;i++){var s=r[i];if(s.indexOf(a)>0)return t.hostName=s,t.hasThirdLevelDomain=!0,t}return t}((e=e||{}).hostName),n=r.hostName||".",o=n.split(".");if(e.isModuleVersion){var a="undefined"!=typeof window?location.href.indexOf("hutaojie")>=0:n.indexOf("hutaojie")>=0;t=Xa[a?ri.hybridTest:ri.hybrid]}else o.length>=2&&si[o[1]]&&(t=Xa[ri[si[o[1]][o[0]]]]);return t||(t=Xa[ri.mobile]),t.hasThirdLevelDomain=r.hasThirdLevelDomain||!1,ai(e.shareType,t,e.defaultApiDomain)},ui={BASIC:0,GROUP_FULL_AUTO_OPEN:1,ALIPAY_PASS_PARAMS:2,OVERSEAS_ID_CARD_VERTIFICATION:3};ui.currentMaxVersion=ui.OVERSEAS_ID_CARD_VERTIFICATION;var li=!1;ui.getSupportVersion=function(){var e=Object(_e.getCurrentPlatform)();return e.isNativePlatform?Object(_e.compareVersion)(e.version,"3.51.0")>=0?ui.OVERSEAS_ID_CARD_VERTIFICATION:(li||(Qa({error_msg:"app版本".concat(e.version,"使用paymentVersion1"),payload:{event:"预支付paymentVersion为1",app_version:e.version}}),li=!0),ui.GROUP_FULL_AUTO_OPEN):ui.OVERSEAS_ID_CARD_VERTIFICATION};var di=ui,pi=null,mi={post:function(e,t){if(!pi){var r=le.default.getInstance().getPageID();pi=Object(ue.createDefaultAxios)({pageInfo:{pageId:r}})}return pi({method:"POST",url:e,data:t,defaultErrorHandler:function(){}}).catch((function(e){var t=e.errorCode,r=(e.response||{}).data;return Promise.reject({errorCode:t,errorObject:r})}))}},fi=null,hi={getInstance:function(){return fi||(fi=mi),fi},setInstance:function(e){fi=e}};function vi(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function yi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vi(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vi(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gi=function(){function e(t){var r=t.attributeFields,n=t.params,o=t.orderSn,a=t.url,i=t.prepayType;l()(this,e),this.attributeFields=r,this.paymentVersion=di.getSupportVersion(),this.params=n,this.url=a,this.orderSn=o,this.prepayType=i;var s=window.navigator.userAgent,c=!!s&&!(!s.match(/phh_ios_version/i)&&!s.match(/phh_android_version/i));this.config=ci({isModuleVersion:c,hostName:location.hostname})}return p()(e,[{key:"realPay",value:function(e){}},{key:"prepayParams",value:function(){return yi({pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:this.attributeFields},this.params)}},{key:"prepay",value:function(e){var t=this.prepayParams(),r=e&&"object"===me()(e)?yi(yi({},e),t):t;return hi.getInstance().post(this.prepayUrl,r).catch((function(e){var t=e.errorCode,r=e.errorObject;return Promise.reject({errorCode:t,errorObject:r})}))}},{key:"pay",value:function(){var e=this;return this.prepay().then((function(t){return e.realPay(t)}))}},{key:"appId",get:function(){return null}},{key:"prepayUrl",get:function(){if(this.url)return this.url;switch(this.prepayType){case Ha.Combine:return"api/vancouver/cart/prepay";case Ha.Tail:return"api/vancouver/final_pay_prepay";default:return"order/prepay"}}}]),e}();var bi=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).prepayType=e.prepayType,n.additionalParams=e.additionalParams,n}return p()(r,[{key:"realPay",value:function(e){}},{key:"pay",value:function(){var e=this;return new Promise((function(t,r){try{var n="/package_c/pay/pay?order_sn="+encodeURIComponent(e.orderSn);e.prepayType&&(n+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===me()(e.additionalParams)&&Object.keys(e.additionalParams).forEach((function(t){n+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.additionalParams[t]))})),window.wx.miniProgram.navigateTo({url:n,success:function(e){r({cancelled:!0,err_msg:-200})},fail:function(e){ft({title:"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(P.throwErrorAsync)(new Error("调起小程序支付失败_无法唤起")),r({cancelled:!0,err_msg:-400})}})}catch(e){ft({title:"系统繁忙, 请稍后再试(".concat(-500,")")});var o=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(P.throwErrorAsync)(new Error("调起小程序支付失败_内部错误"),{error_msg:o}),r({cancelled:!0,err_msg:-500})}}))}}]),r}(gi),_i=r("iWIM"),ki=r.n(_i),Si=r("ct/d");function Ii(e){Qa({error_msg:e.errorMsg||"",payload:{event:"pay_code",payment_type:e.paymentType||0,code:e.errorCode||"",url:e.url||"",order_sn:e.orderSn||"",wait_time:e.waitTime||0,pay_source:e.paySource||0,error_msg:e.errorMsg||""}})}function wi(e){!e.errorCode&&e.stack&&Qa({error_msg:"@pdd/pay stack error",page:e.message+" "+JSON.stringify(e.stack)})}function Pi(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pi(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pi(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ci=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"prepayParams",value:function(){return Oi(Oi({},ki()(g()(r.prototype),"prepayParams",this).call(this)),{},{pap_pay:1,attribute_fields:Oi({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}},{key:"realPay",value:function(e){var t=this;return e.timestamp=e.timestamp.toString(),Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.WeChat,params:e}).then((function(e){return Ii({paymentType:zn.WeChat,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var r=e.errorCode;return Qa({payload:{event:"app_wechat_pay",order_sn:t.orderSn,error_code:r+""}}),Promise.reject({errorCode:r})}))}},{key:"appId",get:function(){return this.config.AppID.WeChat}}]),r}(gi),xi=Ci;function Ei(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Di(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ei(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ei(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ni=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"prepayParams",value:function(){return Di(Di({},ki()(g()(r.prototype),"prepayParams",this).call(this)),{},{pap_pay:1,attribute_fields:Di({forbid_contractcode:"1",forbid_pappay:"1"},this.attributeFields)})}},{key:"realPay",value:function(e){var t=this;return new Promise((function(r,n){var o=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp.toString(),nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(function(e){if(e&&"object"===me()(e)){if(Ii({paymentType:zn.WeChat,errorCode:e.err_msg+"",orderSn:t.orderSn}),"get_brand_wcpay_request:cancel"===e.err_msg)return e.cancelled=!0,void n(e);if("get_brand_wcpay_request:ok"===e.err_msg)return void r(e)}Object(P.throwErrorAsync)(new Error("WeixinJSBridge支付失败")),n(e)}))};"undefined"==typeof WeixinJSBridge?Promise.race([new Promise((function(e){document.addEventListener("WeixinJSBridgeReady",e)})),new Promise((function(e,t){setTimeout((function(){"undefined"==typeof WeixinJSBridge?t():e()}),2e3)}))]).then(o).catch((function(){Object(P.throwErrorAsync)(new Error("WeixinJSBridge未定义")),n({errorCode:0})})):o()}))}},{key:"appId",get:function(){return+Object(P.parseUrlQuery)(location.href).pay_app_id||this.config.AppID.WeChat}}]),r}(gi),Ti=Ni;function ji(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}var Ai,Ri=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).additionalParams=e.additionalParams,n}return p()(r,[{key:"realPay",value:function(e){var t=this;return new Promise((function(r,n){var o=e.mweb_url;Ii({paymentType:zn.WeChat,url:o,orderSn:t.orderSn}),function(e){if((window.navigator.userAgent||"").toLowerCase().indexOf("oppo")>=0){var t=document.createElement("a")||{};t.href=e,t.click&&t.click()}else Si.default.reload(e)}(o)}))}},{key:"pay",value:function(){if(localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={time:Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var t=Object(P.resolveFullUrl)("transac_wechat_wapcallback.html",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ji(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ji(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise((function(e,r){Si.default.reload(t)}))}return ki()(g()(r.prototype),"pay",this).call(this)}},{key:"appId",get:function(){return this.config.AppID.WeChatH5Pay}}]),r}(gi),Mi=Ri,Li=function(){function e(t){l()(this,e);var r=Object(_e.getCurrentPlatform)(),n=r.isWeChatPlatform,o=r.isNativePlatform,a=r.isTinyNativePlatform;this.innerPay=null,this.innerPay=n?new Ti(t):o||a?new xi(t):new Mi(t)}return p()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}(),Bi={WechatDirect:3,UniversalPay:10050},Fi=r("1KKG"),Ui=function(){return hi.getInstance().post("api/qogir/payment/agreement/pay_score_query")},Hi=function(e){var t,r=0;return Object(Se.show)(),Qa({payload:{event:"before_polling"}}),new Promise((function(n,o){var a=function(){return r+=1,Ui().then((function(e){e.success&&e.wx_signed&&(clearInterval(t),Object(Se.hide)(),n())})).catch((function(r){clearInterval(t),Object(Se.hide)(),r.scoreSignSdkSuccess=e,o(r)}))};a(),t=setInterval((function(){if(Qa({payload:{event:"default_polling",time:r}}),r<=4)a();else{clearInterval(t);var n=new Error("pay_score_query_timeout");n.errorCode=1005,n.scoreSignSdkSuccess=e,Object(Se.hide)(),o(n)}}),800)}))},Vi=function(){var e=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:{},r=t.signScene,n=t.orderSn,o=t.antiContent,a=t.payTicket,!(s=Object(_e.getCurrentPlatform)()).isNativePlatform){e.next=6;break}c="m.hutaojie.com"===location.hostname?"115":"122",e.next=12;break;case 6:if(!s.isPureWeChatPlatform){e.next=10;break}c="m.hutaojie.com"===location.hostname?"118":"130",e.next=12;break;case 10:throw Object(P.launchPDDApp)("sub_pay_later.html?".concat(Object(P.buildQuery)(Object(P.parseUrlQuery)(location.href)))).then((function(){}),(function(){Si.default.uniformForward("download.html")})),new Error("not_support_platform");case 12:return u={sign_app_id:c,sign_scene:r||1,anti_content:o,order_sn:n,ext_data:{pay_ticket:a}},e.abrupt("return",hi.getInstance().post("api/qogir/payment/agreement/pay_score_sign",u));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryString;return new Promise((function(e,r){Qa({payload:{event:"before_wx_score"}}),wx.checkJsApi({jsApiList:["openBusinessView"],success:function(n){n&&n.checkResult&&n.checkResult.openBusinessView&&wx.invoke("openBusinessView",{businessType:"wxpayScoreEnable",queryString:t},(function(t){0===parseInt(t.err_code)?(Qa({payload:{event:"wx_score_success"}}),e()):(Qa({payload:{event:"wx_score_fail",payload:{event:t&&JSON.stringify(t)}}}),r(t))}))}})}))},Wi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queryString,r=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i),n=r[1];return Object(_e.compareVersion)(n,"7.0.5")>=0?zi({queryString:t}):(Object(ce.info)("请将微信更新至最新版后再次尝试"),Promise.reject({errorHandling:{isErrorAlerted:!0}}))},Qi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.response;return Qa({payload:{event:"before_app_sign_score"}}),Object(ke.invokeBridgeCallNativeFun)("AMAgreement","sign",{type:3,params:t})},qi=function(){var e=c()(i.a.mark((function e(){var t,r,n,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},r=t.response,!(n=Object(_e.getCurrentPlatform)()).isNativePlatform){e.next=6;break}return e.abrupt("return",Qi({response:r}));case 6:if(!n.isPureWeChatPlatform){e.next=8;break}return e.abrupt("return",Wi({queryString:r.query}));case 8:return e.abrupt("return",Promise.reject("Error_Platform"));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gi=function(){var e=c()(i.a.mark((function e(){var t,r,n,o,a,s,u,l,d,p,m,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:{},r=t.signScene,n=t.antiContent,o=t.orderSn,a=t.pollingFun,s=t.payTicket,(u=Object(_e.getCurrentPlatform)()).isNativePlatform||u.isPureWeChatPlatform){e.next=4;break}return e.abrupt("return",Promise.reject("Error_Platform"));case 4:return e.prev=4,e.next=7,Vi({signScene:r,antiContent:n,orderSn:o,payTicket:s});case 7:l=e.sent,e.next=19;break;case 10:if(e.prev=10,e.t0=e.catch(4),d=e.t0||{},410011!=+(p=d.errorCode)){e.next=18;break}return ft({title:"先用后付功能逐步开放中\n敬请期待"}),e.abrupt("return",Promise.reject({errorCode:p,errorHandling:{isErrorAlerted:!0}}));case 18:return e.abrupt("return",Promise.reject(e.t0));case 19:if(l&&l.success){e.next=21;break}throw new Error("pay_score_sign_error");case 21:return m=a||Hi,e.abrupt("return",qi({response:l}).then(c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.isPollingError=!0,e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).catch((function(e){if((e||{}).isPollingError)throw e;return m(!1)})));case 23:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),Yi=Gi,Xi=function(e){return Ui().then((function(t){return Qa({payload:{event:"pay_score_query"+(t&&t.wx_signed),order_sn:e}}),t&&t.wx_signed})).catch((function(t){var r=t.errorCode;return Qa({payload:{event:"@pdd/pay/pay_score_query_err",order_sn:e,error_code:r+""}}),!1}))},Ji=function(e){var t=e.signScene,r=e.orderAmount,n=e.orderSn,o=e.scoreSignSdkSuccess,a=e.payTicket,i=e.switchToWechatIfSignXyhfFailed,s=function(){i?Ai&&Ai():Object(Se.hide)()};return i?(Object(Se.hide)(),Ai&&Ai(),Ai=Object(Xr.renderPopup)(w.a.createElement(Fi.default,{style:{height:"1.2rem",width:"1.2rem"}},w.a.createElement("span",null,"订单已生成"),w.a.createElement("br",null),w.a.createElement("span",null,"正前往支付")))):Object(Se.show)(),new Promise((function(e,i){var c,u=!1,l=0;c=setInterval((function(){if(l<=4)p={pay_ticket:a,sign_scene:t,order_sn:n,order_amount:r,pull_scene:"after_sign",pull_times:l+=1},hi.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",p).then((function(t){var r=t.signed,a=t.allow_create,d=t.forbid_create_code,p=t.forbid_create_reason;Qa({payload:{event:"query_allow_sign_or_create_time_"+l,result:t&&JSON.stringify(t),order_sn:n}}),!u&&r&&(u=!0,clearInterval(c),s(),a?e():i({scoreSignSdkSuccess:o,errorCode:d,data:{errorCode:d,errorMsg:p}}))})).catch((function(e){var t=e.errorCode;Qa({payload:{event:"@pdd/pay/query_allow_sign_or_create_err",order_sn:n,error_code:t+""}}),clearInterval(c),u||(u=!0,s(),e.scoreSignSdkSuccess=o,i(e))}));else{clearInterval(c);var d=new Error("query_allow_sign_or_create_timeout");d.errorCode=1005,d.scoreSignSdkSuccess=o,Qa({payload:{event:"@pdd/pay/query_allow_sign_or_create_timeout",order_sn:n}}),s(),i(d)}var p}),800)}))},Ki=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.signScene,n=t.orderAmount,o=t.orderSn,a=t.antiContent,s=t.payTicket,c=t.switchToWechatIfSignXyhfFailed,u=function(e){return Ji({signScene:r,orderAmount:n,orderSn:o,scoreSignSdkSuccess:e,payTicket:s,switchToWechatIfSignXyhfFailed:c})},e.abrupt("return",Yi({signScene:r,antiContent:a,orderSn:o,pollingFun:u,payTicket:s}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zi=Ki,$i=function(){function e(t){l()(this,e),this.orderSn=t.orderSn,this.prepayType=t.prepayType,this.additionalParams=t.additionalParams,this.optionalParams=t.optionalParams,this.orderAmount=S()(this.optionalParams,"orderAmount")}return p()(e,[{key:"pay",value:function(){var e=this;return new Promise((function(t,r){try{var n="/package_c/pay_score_sign/pay_score_sign?order_sn=".concat(encodeURIComponent(e.orderSn),"&order_amount=").concat(encodeURIComponent(e.orderAmount));e.prepayType&&(n+="&prepay_type=".concat(e.prepayType)),e.additionalParams&&"object"===me()(e.additionalParams)&&Object.keys(e.additionalParams).forEach((function(t){n+="&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.additionalParams[t]))})),window.wx.miniProgram.navigateTo({url:n,success:function(e){r({cancelled:!0,err_msg:-200})},fail:function(e){ft({title:"系统繁忙, 请稍后再试(".concat(-400,")")}),Object(P.throwErrorAsync)(new Error("调起小程序支付失败_无法唤起")),r({cancelled:!0,err_msg:-400})}})}catch(e){ft({title:"系统繁忙, 请稍后再试(".concat(-500,")")});var o=e&&e.errMsg||(e instanceof Error?e.message:JSON.stringify(e));Object(P.throwErrorAsync)(new Error("调起小程序支付失败_内部错误"),{error_msg:o}),r({cancelled:!0,err_msg:-500})}}))}}]),e}();function es(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rs=function(e){f()(o,e);var t,r,n=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(o);function o(e){var t;l()(this,o),t=n.call(this,e);var r=Object(_e.getCurrentPlatform)(),a=Object(P.parseUrlQuery)(window.location.href);return t.isNative=r.isNativePlatform,t.isPureWeChatPlatform=r.isPureWeChatPlatform,t.isDdjbWeChatMiniProgram=r.isWeChatMiniProgram&&a._x_cmp_v&&a._x_cmp_v>=1640057746e3,t.isSupportSignXYHFVersion=Object(_e.compareVersion)(r.version,"5.12.0")>=0,t.optionalParams=e.optionalParams,t.payTicket=S()(e,"attributeFields.pay_ticket"),t.options=e,t}return p()(o,[{key:"realPay",value:(r=c()(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.wait_time,n=+(n=void 0===r?2:r),Number.isInteger(n)||(n=1),Object(Se.hide)(),Ba.show({title:"0元下单中",icon:"xyhf"}),e.next=7,new Promise((function(e){return setTimeout(e,1e3*n)}));case 7:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"signXianYongHouFu",value:function(){var e=S()(this.optionalParams,"signScene"),t=S()(this.optionalParams,"orderAmount"),r=S()(this.optionalParams,"antiContent"),n=S()(this.optionalParams,"switchToWechatIfSignXyhfFailed"),o=this.orderSn,a=this.payTicket;return Zi({signScene:e,orderAmount:t,orderSn:o,antiContent:r,payTicket:a,switchToWechatIfSignXyhfFailed:n})}},{key:"pay",value:(t=c()(i.a.mark((function e(){var t,r,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S()(this.optionalParams,"isSignXianYongHouFu"),r=S()(this.optionalParams,"switchToWechatIfSignXyhfFailed"),!t||!(this.isNative&&this.isSupportSignXYHFVersion||this.isPureWeChatPlatform||this.isDdjbWeChatMiniProgram)){e.next=14;break}return e.next=5,Xi(this.orderSn);case 5:if(!e.sent){e.next=8;break}return e.abrupt("return",this.prepay().then((function(e){return n.realPay(e)})));case 8:if(!this.isDdjbWeChatMiniProgram){e.next=10;break}return e.abrupt("return",new $i(this.options).pay());case 10:return Ba.markSignXianYongHouFu(),e.abrupt("return",this.signXianYongHouFu().then((function(){return Object(Se.show)(),n.prepay.bind(n,{prepay_front_supports:["credit_repay_idempotence"]})().then((function(e){return n.realPay(e)}))})).catch(function(){var e=c()(i.a.mark((function e(t){var o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Object(_e.getCurrentPlatform)(),a=o.isWeChatPlatform,!r||!a){e.next=9;break}return e.next=5,new Promise((function(e){Object(ce.html)("先用后付不成功，正在切换微信支付...",{style:{maxWidth:"3rem"},onClose:e})}));case 5:return Object(Se.show)(),e.abrupt("return",new Ls(n.options).pay().then((function(e){return ts(ts({},e),{},{xyhfSwitchedToWechat:!0})})));case 9:throw t;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",this.prepay().then((function(e){return n.realPay(e)})));case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"appId",get:function(){var e=Object(_e.getCurrentPlatform)(),t=e.isWeChatPlatform,r=e.isWeChatMiniProgram;return"m.hutaojie.com"===location.hostname?r?119:t?118:115:r?131:t?130:122}}]),o}(gi),ns=rs;function os(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function as(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?os(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):os(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var is="CHANCE_EXCEEDED";function ss(e){var t=e.orderSn,r=e.attrMap,n=e.payChannel,o=e.transactionId,a=e.waitTimeBeforeQuery,s=void 0===a?null:a,u={allowNextPoll:!0,forceStop:function(){u.allowNextPoll=!1},run:function(){return c()(i.a.mark((function e(){var a,c,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&+s>0)){e.next=3;break}return e.next=3,new Promise((function(e){return setTimeout(e,1e3*+s)}));case 3:a=1;case 4:if(!(a<=4)){e.next=21;break}if(u.allowNextPoll){e.next=7;break}return e.abrupt("return",{status:Ua.UniversalException.QOGIR_PREMATURE_END});case 7:return e.prev=7,e.delegateYield(i.a.mark((function e(){var s,c,u,l,d,p,m,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hi.getInstance().post("api/qogir/payment/query/pappay",{order_sn:t,times:a,attr_map:r,channel:n,transaction_id:o});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(s=e.t0,c=s.status,u=s.wait_time,l=s.error_info,p=(d=l||{}).error_code,m=d.error_msg,f=d.change_card_pay,h=d.pap_pay_fail_map,Qa({error_msg:"qogir-pulling-"+c,payload:{order_sn:t,times:a,qogir_err:l?"".concat(p," | ").concat(m):void 0}}),+c===Ua.Universal.Paying){e.next=15;break}return e.abrupt("return",{v:{status:+c||0,errorInfo:{errorCode:p,errorMsg:m,changeCardPay:f,papPayFailMap:h,papPayFailCode:p},paySource:0}});case 15:return e.next=17,new Promise((function(e){return setTimeout(e,1e3*+u)}));case 17:case"end":return e.stop()}}),e)}))(),"t0",9);case 9:if(c=e.t0,"object"!==me()(c)){e.next=12;break}return e.abrupt("return",c.v);case 12:e.next=18;break;case 14:return e.prev=14,e.t1=e.catch(7),l=e.t1||{},d=l.errorCode,p=l.message,e.abrupt("return",{status:Ua.UniversalException.QOGIR_EXCEPTION,errorInfo:{errorCode:d,errorMsg:p},paySource:0});case 18:a++,e.next=4;break;case 21:return e.abrupt("return",{status:is,errorInfo:null,paySource:0});case 22:case"end":return e.stop()}}),e,null,[[7,14]])})))()}};return u}function cs(e){var t=e.orderSn,r=e.listenType,n=e.payChannel,a=Object(_e.getCurrentPlatform)(),s=!1,u={},l=null,d=null;r===Bi.WechatDirect?(u.type=r,l="PDDInbox",s=a.isNativePlatform&&Object(_e.compareVersion)(a.version,"4.14.0")>=0,d="receiver"):(u.biz_type=r,l="PDDTitanPush",s=a.isNativePlatform&&Object(_e.compareVersion)(a.version,"4.76.0")>=0,d="push_receiver");var p={receiverId:null,forceStop:function(){var e=as({},u);s&&r!==Bi.WechatDirect&&Object.assign(e,{receiver_id:p.receiverId}),Object(ke.invokeBridgeCallNativeFun)(l,"unregister",e)},run:function(){return c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return",new Promise((function(e){Object(ke.invokeBridgeCallNativeFun)(l,"register",as(as({},u),{},o()({},d,(function(r,o){var a=null,i=!1;try{a=JSON.parse(o.result[0].payload)}catch(e){i=!0}var s=a||{},c=s.status,u=s.error_info,l=s.order_sn,d=s.channel;if(r||!a)Qa({error_msg:"push时查qogir失败",payload:{pinbridge_err:r?"Inbox监听异常":void 0,result_err:a?"Inbox回调数据异常":void 0,data_format_err:i?"Inbox回调数据格式不是JSON":void 0}});else{if(l!==t||d!==n)return void Qa({error_msg:"错误的push数据",payload:{pushedOrderSn:l,pushedChannel:d}});var m=u||{},f=m.error_code,h=m.error_msg,v=m.change_card_pay,y=m.pap_pay_fail_map;Qa({error_msg:"qogir-push-"+c,payload:{order_sn:t,qogir_err:u?"".concat(f," | ").concat(h):void 0}}),e({status:+c||0,errorInfo:{errorCode:f,errorMsg:h,changeCardPay:v,papPayFailMap:y,papPayFailCode:f},paySource:1})}p.forceStop()})))).then((function(e){p.receiverId=(e||{}).receiver_id}))})));case 2:return e.abrupt("return",new Promise((function(e,t){})));case 3:case"end":return e.stop()}}),e)})))()}};return p}var us,ls,ds=function(e){var t=Object(_e.getCurrentPlatform)();return!!t.isNativePlatform&&Object(_e.compareVersion)(t.version,e)>=0},ps=function(e){var t=e.errorMsg,r=e.cancelled,n=e.errorCode;return function(){var e=c()(i.a.mark((function e(o){var a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.originTime,s=o.paySource,c=o.orderSn,Ii({paymentType:zn.DuoDuoPay,errorCode:n,orderSn:c,waitTime:Date.now()-a,errorMsg:t,paySource:s}),e.next=4,Ba.hide();case 4:return e.abrupt("return",Promise.reject({cancelled:r,errorCode:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ms=ps({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),fs=(us={},o()(us,Ua.Universal.Success,(function(e){var t=e.originTime,r=e.paySource,n=e.orderSn;return new Promise(function(){var e=c()(i.a.mark((function e(o){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ii({paymentType:zn.DuoDuoPay,errorCode:0,orderSn:n,waitTime:Date.now()-t,paySource:r}),e.next=3,Ba.showSuccess({payInfoTitle:"多多支付",title:"支付成功"});case 3:o();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),o()(us,Ua.UniversalException.CHANCE_EXCEEEDED,ps({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1})),o()(us,Ua.UniversalException.QOGIR_EXCEPTION,ps({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1})),o()(us,Ua.Universal.NotFound,ps({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1})),o()(us,Ua.Universal.Failed,(ls=c()(i.a.mark((function e(t){var r,n,o,a,s,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.originTime,n=t.paySource,o=t.orderSn,a=t.errorMsg,s=t.changeCardPay,u=t.changeCardCallback,l=t.getAutoSwitchPay,!(d=l()).isAutoSwitchEnabled){e.next=4;break}return e.abrupt("return",d.performAutoSwitchPay());case 4:return e.abrupt("return",new Promise(function(){var e=c()(i.a.mark((function e(t,l){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ii({paymentType:zn.DuoDuoPay,errorCode:0,orderSn:o,waitTime:Date.now()-r,paySource:n}),e.next=3,Ba.hide();case 3:1==+s&&ds("5.45.0")?Object(cr.a)({title:a||"免密支付失败，请重试",onCancel:function(){l({cancelled:!0})},onClose:function(){l({cancelled:!0})},onConfirm:function(){var e=c()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u();case 3:r=e.sent,t(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),cancelButtonLabel:"取消",confirmButtonLabel:"换卡支付"}):ft({title:a||"免密支付失败，请重试",onConfirm:function(){l({cancelled:!1,errorCode:-1})},onClose:function(){l({cancelled:!1,errorCode:-1})}});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)}))),function(e){return ls.apply(this,arguments)})),us);function hs(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function vs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hs(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hs(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ys,gs=function(e){f()(n,e);var t,r=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(n);function n(e){var t;return l()(this,n),t=r.call(this,e),e=e||{},t.attrMap=e.attrMap,t.isSupportDirectPay=e.isSupportDirectPay,t.isSupportChangeCard=ds("5.45.0"),t.autoSwitchPay=new Ts(e,t.appId),t}return p()(n,[{key:"prepayParams",value:function(){return vs(vs({},ki()(g()(n.prototype),"prepayParams",this).call(this)),{},{pap_pay:1,attribute_fields:vs({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields)})}},{key:"realPay",value:function(e,t){return 1==+e.is_pap_pay?this.handleDirectPay():this.handleNormalPay(e,t)}},{key:"handleNormalPay",value:function(e,t){var r=this,n=vs({},e);if(t){var o=t.changeCardPay,a=t.papPayFailMap,i=t.papPayFailCode;o&&(n.change_card_pay=o),a&&Object.assign(n,a),i&&(n.pap_pay_fail_code=i)}return Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.DuoDuoPay,params:n}).then((function(e){return Ii({paymentType:zn.DuoDuoPay,errorCode:"0",orderSn:r.orderSn}),e})).catch((function(e){wi(e);var t=e.data,n=e.errorCode;return Ii({paymentType:zn.DuoDuoPay,errorCode:n+"",orderSn:r.orderSn,errorMsg:e.toJSON&&JSON.stringify(e.toJSON())}),Promise.reject({errorCode:n,data:t})}))}},{key:"handleDirectPay",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),r=ss({orderSn:this.orderSn,payChannel:"DUODUOPAY",attrMap:this.attrMap}),n=cs({orderSn:this.orderSn,listenType:Bi.UniversalPay,payChannel:"DUODUOPAY"}),e.prev=3,Ba.hideSpinner(),Ba.markDuringMianmi(),Ba.show({title:"免密支付中",icon:"ddpay"}),e.next=9,Promise.race([r.run(),n.run()]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:return o=e.t0,a=o.status,s=o.errorInfo,c=o.paySource,l=(u=s||{}).errorMsg,d=u.changeCardPay,p=u.papPayFailMap,m=u.papPayFailCode,e.abrupt("return",(fs[a]||ms)({originTime:t,paySource:c,orderSn:this.orderSn,errorMsg:l,changeCardPay:d,changeCardCallback:this.pay.bind(this,{changeCardPay:d,papPayFailMap:p,papPayFailCode:m}),getAutoSwitchPay:function(){return g.autoSwitchPay}}));case 20:e.prev=20,e.t1=e.catch(3),f=e.t1||{},h=f.message,v=f.stack,y=f.errorCode,Qa({error_msg:"poller与listener内部错误",payload:{message:y||v||h}});case 24:return e.prev=24,r.forceStop(),n.forceStop(),e.finish(24);case 28:case"end":return e.stop()}}),e,this,[[3,20,24,28]])}))),function(){return t.apply(this,arguments)})},{key:"pay",value:function(e){var t=this;return this.prepay().then((function(r){return Object(Se.hide)(),t.realPay(r,e)}))}},{key:"appId",get:function(){return 97}}]),n}(gi),bs=gs,_s=function(e){var t=e.errorMsg,r=e.cancelled,n=e.errorCode;return function(){var e=c()(i.a.mark((function e(o){var a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.originTime,s=o.paySource,c=o.orderSn,Ii({paymentType:zn.AliPayDirectDebit,errorCode:n,orderSn:c,waitTime:Date.now()-a,errorMsg:t,paySource:s}),e.next=4,Ba.hide();case 4:return e.abrupt("return",Promise.reject({cancelled:r,errorCode:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ks=_s({errorMsg:"其它异常",errorCode:-1,cancelled:!1}),Ss=(ys={},o()(ys,Ua.Universal.Success,(function(e){var t=e.originTime,r=e.paySource,n=e.orderSn;return new Promise(function(){var e=c()(i.a.mark((function e(o){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ii({paymentType:zn.AliPayDirectDebit,errorCode:0,orderSn:n,waitTime:Date.now()-t,paySource:r}),e.next=3,Ba.showSuccess({payInfoTitle:"支付宝",title:"支付成功"});case 3:o();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),o()(ys,Ua.UniversalException.CHANCE_EXCEEEDED,_s({errorMsg:"qogir轮询持续Paying，超过最大次数",errorCode:-1,cancelled:!1})),o()(ys,Ua.UniversalException.QOGIR_EXCEPTION,_s({errorMsg:"qogir轮询出现异常",errorCode:-1,cancelled:!1})),o()(ys,Ua.Universal.NotFound,_s({errorMsg:"订单号错误，无法找到",errorCode:-1,cancelled:!1})),o()(ys,Ua.Universal.Failed,function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.originTime,n=t.paySource,o=t.orderSn,a=t.errorMsg,s=t.getAutoSwitchPay,!(u=s()).isAutoSwitchEnabled){e.next=4;break}return e.abrupt("return",u.performAutoSwitchPay());case 4:return e.abrupt("return",new Promise(function(){var e=c()(i.a.mark((function e(t,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ii({paymentType:zn.AliPayDirectDebit,errorCode:0,orderSn:o,waitTime:Date.now()-r,paySource:n}),e.next=3,Ba.hide();case 3:ft({title:a||"免密支付失败，请重试",onConfirm:function(){s({cancelled:!1,errorCode:-1})},onClose:function(){s({cancelled:!1,errorCode:-1})}});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ys);function Is(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ws(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Is(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Is(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ps=Ua.AliPayDirectDebit,Os=function(e){f()(n,e);var t,r=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(n);function n(e){var t;return l()(this,n),t=r.call(this,e),e=e||{},t.attrMap=e.attrMap,t.isSupportDirectPay=e.isSupportDirectPay,t.autoSwitchPay=new Ts(e,t.appId),t}return p()(n,[{key:"prepayParams",value:function(){var e=this.config.RedirectURI.AliPayDirectDebit;return ws(ws({},ki()(g()(n.prototype),"prepayParams",this).call(this)),{},{pap_pay:1,attribute_fields:ws({forbid_contractcode:this.isSupportDirectPay?void 0:"1",forbid_pappay:this.isSupportDirectPay?void 0:"1"},this.attributeFields),return_url:e,request_from_url:e})}},{key:"handleAsyncDirectPay",value:(t=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p,m,f,h,v,y=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.transactionId,n=t.waitTime,o=Date.now(),a=ss({orderSn:this.orderSn,payChannel:"ALIPAY",attrMap:this.attrMap,transactionId:r,waitTimeBeforeQuery:n}),s=cs({orderSn:this.orderSn,listenType:Bi.UniversalPay,payChannel:"ALIPAY"}),e.prev=4,Ba.hideSpinner(),Ba.markDuringMianmi(),Ba.show({title:"免密支付中"}),e.next=10,Promise.race([a.run(),s.run()]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:return c=e.t0,u=c.status,l=c.errorInfo,d=c.paySource,p=(l||{}).errorMsg,e.abrupt("return",(Ss[u]||ks)({originTime:o,paySource:d,orderSn:this.orderSn,errorMsg:p,getAutoSwitchPay:function(){return y.autoSwitchPay}}));case 21:e.prev=21,e.t1=e.catch(4),m=e.t1||{},f=m.message,h=m.stack,v=m.errorCode,Qa({error_msg:"poller与listener内部错误",payload:{message:v||h||f}});case 25:return e.prev=25,a.forceStop(),s.forceStop(),e.finish(25);case 29:case"end":return e.stop()}}),e,this,[[4,21,25,29]])}))),function(e){return t.apply(this,arguments)})},{key:"realPay",value:function(e){var t=this;return 1==+e.is_pap_pay?this.handleAsyncDirectPay({transactionId:e.transaction_id,waitTime:e.wait_time}):new Promise(function(){var r=c()(i.a.mark((function r(n,o){var a,s,u,l,d,p;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=zn.AliPayV2,s=!1,u=!1,(l=parseInt(e.status,10))===Ps.Unsign?d=e.data:l!==Ps.Rollback&&l?l!==Ps.Failed&&l!==Ps.Unknown||(u=!0):(delete(d=e).status,s=!0),d){r.next=25;break}if(!u){r.next=20;break}if(Ii({paymentType:a,errorCode:l,orderSn:t.orderSn}),l!==Ps.Success){r.next=15;break}if(Ba.isSwitched){r.next=12;break}return r.next=12,Ba.hide();case 12:n(),r.next=18;break;case 15:return r.next=17,Ba.hide();case 17:o({errorCode:l});case 18:r.next=24;break;case 20:Object(Se.hide)(),Ba.markDuringMianmi(),Ba.show(),setTimeout(c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ii({paymentType:a,errorCode:l,orderSn:t.orderSn}),![Ps.Success,Ps.Paying].includes(l)){e.next=8;break}if(Ba.isSwitched){e.next=5;break}return e.next=5,Ba.hide();case 5:n(),e.next=11;break;case 8:return e.next=10,Ba.hide();case 10:o({errorCode:l});case 11:case"end":return e.stop()}}),e)}))),l===Ps.Paying?4e3:2e3);case 24:return r.abrupt("return");case 25:p=s?a:zn.AliPayDirectDebit,Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:p,params:d}).then((function(e){Ii({paymentType:p,errorCode:"0",orderSn:t.orderSn}),n()})).catch((function(e){wi(e);var r=e.errorCode;function n(){o({errorCode:r})}Ii({paymentType:p,errorCode:r+"",orderSn:t.orderSn}),r!==parseInt(za.NativePaymentCancel.code,10)||p!==zn.AliPayDirectDebit?n():hi.getInstance().post("payment/agreement/reset",{app_id:t.appId}).then(n,n)}));case 27:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"appId",get:function(){return this.config.AppID.AliPayDirectDebit}}]),n}(gi),Cs=Os;function xs(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xs(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xs(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ds(e){switch(e){case zn.WeChat:return"WEIXIN";case zn.AliDirectDebitPay:return"ALIPAY";case zn.DuoDuoPay:return"DUODUOPAY";default:return""}}var Ns=function(){function e(t,r){l()(this,e),this.options=Es(Es({},t),{},{attributeFields:Es(Es({},t.attributeFields),{},{pappay_poll_mode:"T"})}),this.lastPayAppId=r}var t,r;return p()(e,[{key:"getAutoSwitchChannel",value:(r=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAutoSwitchEnabled){e.next=2;break}return e.abrupt("return",{});case 2:return t=S()(this.options,"attributeFields.pay_ticket"),r=S()(this.options,"optionalParams.signScene"),n=S()(this.options,"optionalParams.orderAmount"),o=this.options.orderSn,e.prev=6,e.next=9,hi.getInstance().post("api/qogir/payment/agreement/query_allow_sign_or_create",{pay_ticket:t,last_pay_app_id:this.lastPayAppId,sign_scene:r,order_amount:n,order_sn:o});case 9:if(a=e.sent,c=(s=a||{}).allow_all_pay,u=s.next_channel,l=s.all_pay_type,Qa({error_msg:"查询下个免密支付方式结果",payload:{allow_all_pay:c,next_channel:u}}),c){e.next=14;break}return e.abrupt("return",{});case 14:if(!Ba.isMianmiChannelUsed(u)){e.next=16;break}return e.abrupt("return",{});case 16:return e.abrupt("return",{nextChannel:u,allPayType:l});case 19:return e.prev=19,e.t0=e.catch(6),Qa({error_msg:"查询下个免密支付方式异常"}),e.abrupt("return",{});case 23:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(){return r.apply(this,arguments)})},{key:"performAutoSwitchPay",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ba.isSwitched||(t=this.options.paymentType,Ba.startChannel=Ds(t)),e.next=3,this.getAutoSwitchChannel();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={};case 6:if(r=e.t0,n=r.nextChannel,o=r.allPayType,n){e.next=15;break}return e.next=12,Ba.hide();case 12:return e.next=14,new Promise((function(e){Object(ce.info)("免密支付失败，请更换支付方式",{onClose:e})}));case 14:return e.abrupt("return",Promise.reject({errorCode:-1}));case 15:Ba.recordMianmiChannel(n),e.t1=n,e.next="WEIXIN_CREDIT"===e.t1?19:"WEIXIN"===e.t1?30:"DUODUOPAY"===e.t1?32:"ALIPAY"===e.t1?34:36;break;case 19:if(Ba.currentPaymentType=zn.XianYongHouFu,1!=+o){e.next=29;break}return e.next=23,Ba.hide();case 23:return e.next=25,new Promise((function(e){Object(ce.html)("免密支付失败，可使用先用后付<br>0元下单",{style:{maxWidth:"2.6rem"},onClose:e})}));case 25:return(a=Es({optionalParams:{}},this.options)).optionalParams.isSignXianYongHouFu=!0,a.optionalParams.signScene=27,e.abrupt("return",new ns(a).pay().catch((function(){return Promise.reject({errorCode:-1})})));case 29:return e.abrupt("return",new ns(this.options).pay());case 30:return Ba.currentPaymentType=zn.WeChat,e.abrupt("return",new Ls(this.options).pay());case 32:return Ba.currentPaymentType=zn.DuoDuoPay,e.abrupt("return",new bs(this.options).pay());case 34:return Ba.currentPaymentType=zn.AliPayDirectDebit,e.abrupt("return",new Cs(this.options).pay());case 36:return e.abrupt("return",Promise.reject({errorCode:-1}));case 37:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isAutoSwitchEnabled",get:function(){return S()(this.options,"optionalParams.mianmiAutoSwitch")}}]),e}(),Ts=Ns;function js(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function As(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?js(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):js(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rs=Ua.WechatDirectPayQuery,Ms=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;l()(this,r),(n=t.call(this,e)).attrMap=e.attrMap;var o=Object(_e.getCurrentPlatform)();return n.isNative=o.isNativePlatform,n.isPayWechatDirectStatusVersion=Object(_e.compareVersion)(o.version,"4.14.0")>=0,n.additionalParams=e.additionalParams,n.innerPay=new Li(e).innerPay,n.autoSwitchPay=new Ts(e,n.appId),n}return p()(r,[{key:"prepayParams",value:function(){return As(As({},ki()(g()(r.prototype),"prepayParams",this).call(this)),{},{pap_pay:1})}},{key:"isWechatDirectPayError",value:function(e){return[parseInt(za.WxDirectPayWxBalanceError.code,10),parseInt(za.WxDirectPayCardBalanceError.code,10),parseInt(za.WxDirectPayTelephoneError.code,10),parseInt(za.WxDirectPayCardInvalidError.code,10),parseInt(za.WxDirectPayRefusedError.code,10),parseInt(za.WxDirectPayUnknownError.code,10)].includes(e)}},{key:"unregisterStatusMailBox",value:function(){!this.unregistered&&this.isNative&&this.isPayWechatDirectStatusVersion&&(this.unregistered=!0,Object(ke.invokeBridgeCallNativeFun)("PDDInbox","unregister",{type:Bi.WechatDirect}))}},{key:"realPay",value:function(e){var t=this;return 1===e.is_pap_pay?new Promise((function(r,n){var o=Date.now(),a=1,s=null,u=function(e){Ii({paymentType:zn.WeChat,errorCode:0,orderSn:t.orderSn,waitTime:Date.now()-o,paySource:e||0}),r()},l=function(e){var r=e.errorCode,a=e.paySource,i=e.cancelled,s=e.errorMsg;Ii({paymentType:zn.WeChat,errorCode:r||-1,orderSn:t.orderSn,waitTime:Date.now()-o,errorMsg:s,paySource:a||0}),n({errorCode:r,cancelled:i})},d=null,p=function(){var e=c()(i.a.mark((function e(r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=-1,e.t0=r.status,e.next=e.t0===Rs.Success?4:e.t0===Rs.Paying?11:e.t0===Rs.Failed?13:e.t0===Rs.NotFound?19:21;break;case 4:return t.unregisterStatusMailBox(),e.next=7,Ba.hide();case 7:return e.next=9,Ba.showSuccess({payInfoTitle:"微信支付",title:"支付成功"});case 9:return u(0),e.abrupt("break",23);case 11:return r.wait_time>=0?s=setTimeout((function(){d(++a)}),1e3*Math.min(r.wait_time||0,15)):l({errorCode:-1,paySource:0,errorMsg:'前端免密支付状态轮询为"Paying"但并未返回等待时间'}),e.abrupt("break",23);case 13:return t.unregisterStatusMailBox(),c=r.error_info&&r.error_info.error_code?parseInt(r.error_info.error_code,10):parseInt(za.WxDirectPayUnknownError.code,10),t.isWechatDirectPayError(c)||(c=parseInt(za.WxDirectPayUnknownError.code,10)),Ii({paymentType:zn.WeChat,orderSn:t.orderSn,errorCode:c||-1,waitTime:Date.now()-o,paySource:0,errorMsg:'前端免密支付状态轮询为"Failed"'}),n({errorCode:c,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}}),e.abrupt("break",23);case 19:return l({errorCode:-1,paySource:0,cancelled:!0,errorMsg:'前端免密支付状态轮询为"NotFound"'}),e.abrupt("break",23);case 21:return l({errorCode:c,paySource:0,errorMsg:"未知的前端免密轮询状态：".concat(r.status)}),e.abrupt("break",23);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();d=function(e){e>4?l({errorCode:-1,paySource:0,errorMsg:"前端免密状态轮询超过4次"}):hi.getInstance().post("api/qogir/payment/query/wechat/pappay",{order_sn:t.orderSn,times:e,attr_map:t.attrMap}).then(p).catch((function(e){var t=e.errorCode,r=e.errorObject;l({errorCode:-1,errorObject:r,errorMsg:"调用前端免密状态轮询接口失败errorCode：".concat(t)})}))};var m;Object(Se.hide)(),Ba.markDuringMianmi(),Ba.show(),t.isNative&&t.isPayWechatDirectStatusVersion&&Object(ke.invokeBridgeCallNativeFun)("PDDInbox","register",{type:Bi.WechatDirect,receiver:(m=c()(i.a.mark((function e(r,a){var c,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=a.result||[],d=(d=l[0]||{}).content,!r&&d&&d.order_sn===t.orderSn){e.next=6;break}return t.unregisterStatusMailBox(),e.abrupt("return");case 6:p=parseInt(d.status||0,10),e.t0=p,e.next=e.t0===Rs.Success?10:e.t0===Rs.Failed?17:23;break;case 10:return s&&clearTimeout(s),e.next=13,Ba.hide();case 13:return e.next=15,Ba.showSuccess({payInfoTitle:"微信支付",title:"支付成功"});case 15:return u(1),e.abrupt("break",24);case 17:return s&&clearTimeout(s),c=d.error_info&&d.error_info.error_code?parseInt(d.error_info.error_code,10):za.WxDirectPayUnknownError.code,t.isWechatDirectPayError(c)||(c=za.WxDirectPayUnknownError.code),Ii({paymentType:zn.WeChat,orderSn:t.orderSn,errorCode:c||-1,waitTime:(new Date).getTime()-o,paySource:0}),n({errorCode:c,cancelled:!0,extraErrorInfo:{isWechatDirectPayFail:!0}}),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:t.unregisterStatusMailBox();case 25:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)})}),s=setTimeout((function(){d(a)}),1e3*Math.min(e.wait_time||0,15))})).catch(function(){var e=c()(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S()(r,"extraErrorInfo.isWechatDirectPayFail")||!t.autoSwitchPay.isAutoSwitchEnabled){e.next=3;break}return e.abrupt("return",t.autoSwitchPay.performAutoSwitchPay());case 3:return e.next=5,Ba.hide();case 5:throw r;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):this.innerPay.realPay(e)}},{key:"pay",value:function(){if(this.appId===this.config.AppID.WeChatH5Pay&&localStorage&&-1===location.pathname.indexOf("transac_wechat_wapcallback")){var e={time:Date.now()};localStorage.setItem("WeChatH5Pay",JSON.stringify(e));var t="transac_wechat_wapcallback.html?"+Object(P.buildQuery)(As({option_json:JSON.stringify({url:this.prepayUrl,orderSn:this.orderSn,params:this.params}),prepay_type:this.prepayType,order_sn:this.orderSn},this.additionalParams));return new Promise((function(e,r){Si.default.reload(t)}))}return ki()(g()(r.prototype),"pay",this).call(this)}},{key:"appId",get:function(){return this.innerPay.appId}}]),r}(gi),Ls=Ms;function Bs(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bs(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bs(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Us=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"prepayParams",value:function(){return Fs({pap_pay:1,pay_app_id:this.appId,version:this.paymentVersion,attribute_fields:Fs(Fs({},this.attributeFields),{},{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:""},this.params)}},{key:"realPay",value:function(e){var t=this,r=zn.AliPayV2;return Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:r,params:e}).then((function(e){return Ii({paymentType:r,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var n=e.errorCode;return Ii({paymentType:r,errorCode:n+"",orderSn:t.orderSn}),Promise.reject({errorCode:n})}))}},{key:"appId",get:function(){return this.config.AppID.AliPay}}]),r}(gi),Hs=Us;function Vs(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function zs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vs(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vs(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ws=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).prepayType=e.prepayType,n.additionalParams=e.additionalParams,n}return p()(r,[{key:"prepayParams",value:function(){var e=Object(P.resolveFullUrl)("transac_wappay_callback.html",zs({order_sn:this.orderSn,prepay_type:this.prepayType},this.additionalParams));return zs({pay_app_id:this.appId,pap_pay:1,version:this.paymentVersion,attribute_fields:zs(zs({},this.attributeFields),{},{forbid_contractcode:"1",forbid_pappay:"1"}),return_url:e},this.params)}},{key:"realPay",value:function(e){return new Promise((function(t,r){location.href=e.gateway_url+"?"+Object(P.buildQuery)(e.query)}))}},{key:"appId",get:function(){return this.config.AppID.AliPayWeb}}]),r}(gi),Qs=Ws,qs=function(){function e(t){l()(this,e),this.innerPay=null,Object(_e.getCurrentPlatform)().isNativePlatform?this.innerPay=new Hs(t):this.innerPay=new Qs(t)}return p()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}();var Gs=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"realPay",value:function(e){var t=this;return Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.QQPay,params:e}).then((function(e){return Ii({paymentType:zn.QQPay,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var r=e.errorCode;return Ii({paymentType:zn.QQPay,errorCode:r+"",orderSn:t.orderSn}),Promise.reject({errorCode:r})}))}},{key:"appId",get:function(){return this.config.AppID.QQ}}]),r}(gi),Ys=Gs;var Xs=-11001,Js=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"realPay",value:function(e){var t=this;return new Promise((function(r,n){var o=function(){void 0===window.mqq.tenpay?(Object(P.throwErrorAsync)(new Error("window.mqq.tenpay未定义")),n({errorCode:0})):"function"!=typeof window.mqq.tenpay.pay&&(Object(P.throwErrorAsync)(new Error("window.mqq.tenpay.pay不是一个函数")),n({errorCode:0}));var o="appid#"+t.config.ApiKey.QQPublicTrack+"|bargainor_id#"+t.config.ApiKey.QQPublicMid+"|channel#wallet";window.mqq.tenpay.pay({tokenId:e.token_id,pubAcc:t.config.ApiKey.QQUIN,pubAccHint:t.config.qqFollowTip,appInfo:o},(function(e){Ii({paymentType:zn.QQPay,errorCode:e.resultCode+""||"",orderSn:t.orderSn});var o="object"===me()(e)&&0===parseInt(e.resultCode,10),a=e&&+e.resultCode===Xs,i=e&&-1==+e.resultCode&&"用户主动放弃支付"===e.retmsg,s=a||i,c=i?Xs:e.resultCode;o?r(e):s?n({errorCode:c,cancelled:!0}):(Object(P.throwErrorAsync)(new Error("window.mqq支付失败"),{data:JSON.stringify(e)}),n({errorCode:c}))}))};"undefined"==typeof mqq?setTimeout((function(){"undefined"==typeof mqq?(Object(P.throwErrorAsync)(new Error("window.mqq未定义")),n({errorCode:0})):o()}),2e3):o()}))}},{key:"appId",get:function(){return this.config.AppID.QQPublicPayment||this.config.AppID.QQPublic}}]),r}(gi),Ks=Js,Zs=function(){function e(t){l()(this,e);var r=Object(_e.getCurrentPlatform)().isQQPlatform;this.innerPay=r?new Ks(t):new Ys(t)}return p()(e,[{key:"pay",value:function(){return this.innerPay.pay()}}]),e}();var $s=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).orderSn=e.orderSn,n}return p()(r,[{key:"realPay",value:function(e){var t=this;return e.money_order=e.money_order+"",e.server_time=e.server_time+"",Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.ApplePay,params:e}).then((function(e){return Ii({paymentType:zn.ApplePay,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var r=e.errorCode,n=e.data;return Ii({paymentType:zn.ApplePay,errorCode:r+"",orderSn:t.orderSn}),Promise.reject({errorCode:r,errorObject:n})}))}},{key:"appId",get:function(){return this.config.AppID.ApplePay}}]),r}(gi),ec=$s;var tc=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"realPay",value:function(e){var t=this;return Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.HBInstallmentPay,params:e}).then((function(e){return Ii({paymentType:zn.HBInstallmentPay,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var r=e.errorCode;return Ii({paymentType:zn.HBInstallmentPay,errorCode:r+"",orderSn:t.orderSn}),Promise.reject({errorCode:r})}))}},{key:"appId",get:function(){return this.config.AppID.HBInstallmentPay}}]),r}(gi),rc=tc,nc=function(){var e=Object(_e.getCurrentPlatform)();return!!e.isNativePlatform&&Object(_e.compareVersion)(e.version,"3.51.0")>=0};var oc=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"realPay",value:function(e){var t=this;return nc()?Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.AliPayV2,params:e}).then((function(e){return Ii({paymentType:zn.HBPay,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var r=e.errorCode;return Ii({paymentType:zn.HBPay,errorCode:r+"",orderSn:t.orderSn}),Promise.reject({errorCode:r})})):(Object(P.throwErrorAsync)(new Error("当前APP版本不支持花呗支付")),Promise.reject({errorCode:0}))}},{key:"appId",get:function(){return 322}}]),r}(gi),ac=oc;var ic=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"realPay",value:function(e){var t=this,r=e.prepay_id;return new Promise((function(){Object(Se.hide)(),Ba.show({title:"转账支付中"}),setTimeout(c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba.hide();case 2:Si.default.reload("transac_return_compensation.html?_t_timestamp=sub_bank_transfer_guide&prepay_id=".concat(r,"&order_sn=").concat(t.orderSn));case 3:case"end":return e.stop()}}),e)}))),1e3)}))}},{key:"appId",get:function(){return 135}}]),r}(gi),sc=ic;var cc=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"realPay",value:function(e){var t=this;return Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.UnionPay,params:e}).then((function(e){return Ii({paymentType:zn.UnionPay,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var r=e.errorCode;return Qa({payload:{event:"app_unionpay_pay",order_sn:t.orderSn,error_code:r+""}}),Promise.reject({errorCode:r})}))}},{key:"appId",get:function(){return 42001}}]),r}(gi),uc=cc;var lc=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){return l()(this,r),t.apply(this,arguments)}return p()(r,[{key:"realPay",value:function(e){var t=this;return Object(ke.invokeBridgeCallNativeFun)("JSPay","pay",{type:zn.DuoDuoPay,params:e}).then((function(e){return Ii({paymentType:zn.CreditCardInstallmentPay,errorCode:"0",orderSn:t.orderSn}),e})).catch((function(e){wi(e);var r=e.errorCode;return Ii({paymentType:zn.CreditCardInstallmentPay,errorCode:r+"",orderSn:t.orderSn}),Promise.reject({errorCode:r})}))}},{key:"appId",get:function(){return 45001}}]),r}(gi),dc=lc,pc={pay:function(e){var t=e.paymentType;void 0===e.isSupportDirectPay&&(e.isSupportDirectPay=!0);var r=Object(_e.getCurrentPlatform)(),n=r.isWeChatPlatform,o=r.isWeChatMiniProgram,a=r.isNativePlatform,i=qa;switch(t){case zn.WeChat:i=o?bi:e.isSupportDirectPay?Ls:Li;break;case zn.AliPay:n||(i=qs);break;case zn.AliPayDirectDebit:n||(i=Cs);break;case zn.QQPay:n||(i=Zs);break;case zn.ApplePay:a&&r.system===_e.SYSTEM.IOS&&(i=ec);break;case zn.HBInstallmentPay:n||(i=rc);break;case zn.HBPay:i=ac;break;case zn.DuoDuoPay:i=bs;break;case zn.XianYongHouFu:i=ns;break;case zn.DuoDuoPayACS:i=sc;break;case zn.UnionPay:i=uc;break;case zn.CreditCardInstallmentPay:i=dc}var s=S()(e,"optionalParams.mianmiV3"),c=S()(e,"optionalParams.mianmiV3SafeHint");return Ba.init({paymentType:t,mianmiV3:s,mianmiV3SafeHint:c}),new i(e).pay()}};function mc(){var e=Object(_e.getCurrentPlatform)();if(e.statisfy&&e.statisfy("1.2.2","2.0.8","greaterThan")||e.isTinyNativePlatform)Object(ke.invokeBridgeCallNativeFun)("JSNavigation","selectTab",{tab_index:0});else{var t="index.html";e.isNativePlatform||e.isTinyNativePlatform?Object(ke.invokeBridgeCallNativeFun)("JSNavigation","reset",{url:Object(P.resolveFullUrl)(t)}).then((function(){return Si.default.reload(t)}),(function(){return Si.default.reload(t)})):Si.default.uniformForward(t)}}var fc=1,hc=2,vc=3,yc=4,gc=7;function bc(e){var t=S()(e,"type",0),r=S()(e,"param.url");switch(t){case fc:return function(){return Si.default.uniformForward(r)};case hc:return function(){return Si.default.back(r)};case vc:return mc;case yc:return function(){return Si.default.reload(r)};case gc:return function(){return location.reload()}}}var _c="toast",kc="nothing",Sc="alert",Ic="confirm";function wc(e){var t=e.errorCode,r=e.errorObject,n=S()(r,"error_payload");if(!n)return null;var o=S()(n,"view_style",_c);if(o===kc)return Promise.reject({errorCode:t,errorHandling:{isErrorAlerted:!0}});var a=S()(n,"view_object.message")||"",i=S()(n,"view_object.title")||"";a||(i=i||"系统繁忙，请稍后再试 (".concat(t,")"));var s,c,u,l,d,p=(s=S()(n,"view_object"),u=(c=s||{}).on_show,l=c.on_ok,d=c.on_cancel,{onShow:bc(u),onCancel:bc(d),onOk:bc(l)}||{}),m=p.onOk,f=p.onCancel,h=p.onShow,v=S()(n,"view_object.ok_label")||"确定",y=S()(n,"view_object.cancel_label")||"取消",g=+S()(n,"view_object.on_close.type");return new Promise((function(e,r){var n=function(e){return function(){e?e():r({errorCode:t,errorHandling:{isErrorAlerted:!0}})}};switch(o){case Sc:ft({title:i,text:a,onConfirm:n(m),onClose:n(m),confirmButtonLabel:v});break;case Ic:Object(cr.a)({title:i,text:a,onConfirm:n(m),onCancel:n(f),onClose:n(2===g?m:f),cancelButtonLabel:y,confirmButtonLabel:v});break;default:Object(ce.info)(i,{onClose:n(h)})}}))}var Pc,Oc={"0010":"交易金额超限，建议更换其他支付方式或稍后重试","0014":"银行阻止了该银行卡交易，建议更换支付方式付款或咨询银行如何解决","0116":"银行卡密码错误次数超限，建议更换其他支付方式或稍后重试","0119":"您的银行卡暂不支持在线支付业务，建议更换其他支付方式或联系银行客服","0124":"您的银行卡余额不足，建议更换其他支付方式"};var Cc="当前支付方式不稳定，请更换其他支付方式",xc=(Pc={},o()(Pc,za.WithoutWeChatClient.code,"您未安装微信或微信版本过低，建议安装新版微信后重试或使用其他支付方式"),o()(Pc,60137,"您未安装微信，请安装后再支付或选择其他支付方式重新支付"),o()(Pc,60138,"您使用的微信非官方版本，建议到官方渠道下载再重新支付"),o()(Pc,60139,"当前支付方式不可用，请选择其他支付方式再重新支付"),o()(Pc,60170,"您未安装云闪付或云闪付版本过低，建议安装新版云闪付后重试或使用其他支付方式"),o()(Pc,60145,Cc),o()(Pc,60146,Cc),o()(Pc,60105,Cc),Pc);function Ec(e){var t=e.errorCode,r=wc(e);if(r)return Object(Se.hide)(),r;var n=function(e){var t=e.errorCode,r=e.errorObject;if(60136!=+t)return null;var n=(void 0===r?{}:r).sdk_return_code,o=Oc[n]||"交易失败，建议更换其他支付方式或稍后重试";return new Promise((function(e,r){var n=function(){r({errorCode:t,errorHandling:{isErrorAlerted:!0}})};ft({title:o,onConfirm:n,onClose:n})}))}(e);return n?(Object(Se.hide)(),n):t===parseInt(za.NativePaymentCancel.code,10)?Promise.reject({errorCode:t,cancelled:!0}):t===parseInt(za.QQPayFailed.code,10)?(Object(Se.hide)(),new Promise((function(e,r){var n=function(){r({errorCode:t,errorHandling:{isErrorAlerted:!0}})};ft({title:"由于QQ版本问题或未安装QQ\n暂时无法使用QQ钱包\n\n请安装新版QQ或选择其他支付方式",onConfirm:n,onClose:n})}))):xc[t]?(Object(Se.hide)(),new Promise((function(e,r){var n=function(){r({errorCode:t,errorHandling:{isErrorAlerted:!0}})};ft({title:xc[t],onConfirm:n,onClose:n})}))):function(e){return[parseInt(za.ItemRemoved.code,10),parseInt(za.OutOfStock.code,10),parseInt(za.GroupInvalid.code,10),parseInt(za.OverBuyLimit.code,10),parseInt(za.OrderPayed.code,10),parseInt(za.PrepayBusy.code,10),parseInt(za.PaymentDisabled.code,10),parseInt(za.OverBuyVirtualGoodsLimit.code,10)].includes(e)}(t)?(Object(Se.hide)(),new Promise((function(e,r){var n=function(){r({errorCode:t,errorHandling:{isErrorAlerted:!0}})};ft({title:za.getMsgFromCode(t),onConfirm:n,onClose:n})}))):Promise.reject(e)}function Dc(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Nc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dc(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dc(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tc,jc="order_paid_times",Ac=Ua.PayStatus,Rc=Ua.ParentOrderStatus;Tc=Object(_e.getCurrentPlatform)().isNativePlatform;var Mc=function(){function e(){var t=this;l()(this,e),this.orderPaidTimes=0,this.attributeFields=null,Tc?Object(ke.invokeBridgeCallNativeFun)("AMStorage","get",{key:jc}).then((function(e){t.orderPaidTimes=parseInt(e.value||0,10),t.attributeFields={paid_times:t.orderPaidTimes}})):(this.orderPaidTimes=+localStorage.getItem(jc),isNaN(this.orderPaidTimes)&&(this.orderPaidTimes=0),this.attributeFields={paid_times:this.orderPaidTimes})}var t;return p()(e,[{key:"defaultCheckOrderStatus",value:(t=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.maySuccess,n=t.orderSn,o=t.prepayType,a=function(e){return new Promise((function(t){setTimeout(t,e)}))},s=function(e){var t,a,i=e.retryTime;return o===Ha.Combine?(t="api/aristotle/pay_check_parent_order",a={times:i,success:r?1:0,parent_order_sn:n}):(t="api/aristotle/pay_check",a={times:i,success:r?1:0,order_sn:n}),hi.getInstance().post(t,a)},c=1;case 4:if(!(c<6)){e.next=41;break}return Qa({error_msg:"paycheck_".concat(r?"maysuccess":"mayfail","_").concat(c),payload:{event:"paycheck",order_sn:n}}),e.prev=6,e.next=9,s({retryTime:c});case 9:if(u=e.sent,l=u.wait_time,d=u.parent_order_status,p=u.pay_status,+d!=+Rc.Unpayed&&+p!=+Ac.Unpayed||!(l>0)){e.next=18;break}return e.next=16,a(1e3*l);case 16:e.next=31;break;case 18:if(o!==Ha.Combine){e.next=26;break}if(+d!=+Rc.Payed){e.next=23;break}return e.abrupt("return",{parentOrderStatus:d});case 23:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 24:e.next=31;break;case 26:if(+p!=+Ac.Payed){e.next=30;break}return e.abrupt("return",{orderStatus:1});case 30:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 31:e.next=38;break;case 33:throw e.prev=33,e.t0=e.catch(6),e.t0=e.t0||{},e.t0.errorCode||(e.t0.errorCode="unknown"),e.t0;case 38:c++,e.next=4;break;case 41:return e.abrupt("return",Promise.reject({errorCode:"defaultCheckOrderStatusFail"}));case 42:case"end":return e.stop()}}),e,null,[[6,33]])}))),function(e){return t.apply(this,arguments)})},{key:"checkOrderStatus",value:function(e){var t=this,r=e.service,n=e.timeout,o=e.success,a=e.orderSn,i=e.prepayType,s=!0;return Promise.race([new Promise((function(e,t){setTimeout((function(){s?t():e()}),n||1e4)})),r({maySuccess:o,orderSn:a,prepayType:i}).then((function(e){return s=!1,e}))]).then((function(e){return e&&1===e.orderStatus&&(Tc?Object(ke.invokeBridgeCallNativeFun)("AMStorage","set",{key:jc,value:t.orderPaidTimes+1+""}):localStorage.setItem(jc,t.orderPaidTimes+1)),e})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={errorCode:e.errorCode||-1,extraErrorInfo:{isCheckOrderFail:!0}};throw t}))}},{key:"pay",value:function(e){var t=this,r=e.paymentType,n=e.orderSn;if(r&&r!==zn.FriendPay&&(Tc&&Object(ke.invokeBridgeCallNativeFun)("AMStorage","set",{key:"last_payment_type2",value:r.toString()}),localStorage.setItem("LastPaymentType",r.toString())),Qa({payload:{event:"before_prepay",payment_type:r,order_sn:n}}),r===zn.FriendPay)return Promise.resolve({redirectToFriendPay:!0});var o=e.checkOrderStatus&&"function"==typeof e.checkOrderStatus?e.checkOrderStatus:this.defaultCheckOrderStatus,a=null;return e.attributeFields=Nc(Nc({},e.attributeFields),this.attributeFields),pc.pay(e).then((function(r){return a=r,null!==e.checkOrderStatus?t.checkOrderStatus({service:o,timeout:e.checkOrderTimeout,success:!0,orderSn:n,prepayType:e.prepayType}):r})).then(function(){var e=c()(i.a.mark((function e(t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=null===(n=a)||void 0===n?void 0:n.xyhfSwitchedToWechat,![r,Ba.currentPaymentType].includes(zn.XianYongHouFu)||o){e.next=4;break}return e.next=4,Ba.showSuccess({title:"下单成功",payInfoTitle:"先用后付"});case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e!==a?Nc(Nc({},e),a):a})).catch(c()(i.a.mark((function a(){var s,c,u=arguments;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=u.length>0&&void 0!==u[0]?u[0]:{},![r,Ba.currentPaymentType].includes(zn.XianYongHouFu)){a.next=6;break}return a.next=4,Ba.hide();case 4:a.next=9;break;case 6:if(!Ba.isSwitched||Ba.currentPaymentType!==zn.AliPayDirectDebit){a.next=9;break}return a.next=9,Ba.hide();case 9:if(0!=+(c=s.errorCode)&&-1!=+c&&+c!=+za.NativeNormalError.code&&60160!=+c){a.next=13;break}if(null===e.checkOrderStatus){a.next=13;break}return a.abrupt("return",t.checkOrderStatus({service:o,timeout:e.checkOrderTimeout,success:!1,orderSn:n}));case 13:throw s;case 14:case"end":return a.stop()}}),a)})))).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=S()(e,"optionalParams.errorCodeBlackList")||[],n=t.errorCode;if(Array.isArray(r)&&r.map((function(e){return+e})).includes(+n)||"defaultCheckOrderStatusFail"===n)throw t;if(S()(e,"optionalParams.skipDefaultErrorHandler"))throw t;return Ec(t)}))}},{key:"setHttpService",value:function(e){if(!e||!("post"in e)||"function"!=typeof e.post)throw new window.Error("pay.setHttpService的参数必须包含post方法");hi.setInstance(e)}}]),e}(),Lc=new Mc,Bc="当前访问人数较多，请稍后重试",Fc="当前商品已抢完，建议购买其他商品",Uc={1101:Bc,4000004:Bc,45059:"系统繁忙，请您稍后再试！",50000001:"不支持的手机号",46022:"未满16周岁用户暂时不可购买此商品",45037:"系统繁忙，即将跳转到充值中心充值",46023:"购买该商品需要更新至最新客户端版本",45009:"当前支付方式服务不稳定，建议使用其他支付方式",512:Bc,409:Bc,511:Bc,41003:Fc,44093:Fc,40000061:"您已购买过同类补贴商品，建议购买其他相似商品",40000062:"该商品同一用户仅能以补贴价格购买一件，你已购买过该商品，可邀请好友购买"},Hc=function(e){var t={};return Object.keys(e).forEach((function(r){t[r]={code:r,message:e[r]}})),t}({1101:"手机网络繁忙，请稍后再试",30400:"没有安装QQ客户端",4e4:"错误的请求地址或方法",40001:"登录已过期，请重新登录",40002:"手机网络繁忙，请稍后再试",40003:"错误的请求参数",40004:"微信登录失败",40005:"请求还在处理中",40006:"手机登录验证码错误",40100:"暂未开通该开放平台",40015:"验证码重复请求",40016:"验证码超出当天限制",40017:"今日可发送次数已达上限",40018:"验证码填写错误",40019:"验证码填写超时",40020:"登录失败",40031:"微信登录失败!",40032:"QQ登录失败!",40033:"登录重试失败，请稍后再试",43058:"",41001:"商品不存在",41002:"商品已下架",41003:"商品已售罄",41004:"商品不在同一商店",41005:"该商品当前不在抽奖活动时间",41006:"商品不在可售区域",41101:"抽奖活动暂不支持单独购买",41102:"卡券可使用的时间已过期，请选购其他商品",42001:"拼单已满",42002:"该拼单不存在",42003:"拼单已过期",42004:"您购买此商品次数达到上限，去看看其他商品吧~",42005:"该商品开团数已达上限",42006:"拼单已满",42007:"此拼单已满，正在发起新拼单...",42501:"订单已成团，暂不支持修改收货地址，请与商家客服联系",42502:"该订单已拼单成功，请刷新页面",43001:"用户不存在",43002:"地址错误",43004:"身份证号不存在",43005:"姓名和身份证号不一致",43006:"对不起，您无法获取或更新身份证号",43007:"对不起，您已用完当前最大验证次数，请24小时后再试",43008:"姓名和身份证不匹配，请重新认证",43009:"您今日认证过于频繁，请明天再试",43010:"该地址已存在",43011:"该地址无法导入",43013:"一小时内不能重复提交",43015:"只允许微信用户够买",43016:"创建地址失败",43017:"最多只能添加100个收货地址哦~",43098:"您在店铺没有拼单成功记录，请勿发红包！拼多多不支持通过发红包购买商品！",43099:"该商品仅限新用户购买一件哦~",44001:"优惠券不存在",44002:"优惠券已使用",44003:"优惠券没有达到最小使用金额",44004:"优惠券已过期",44005:"优惠券不属于用户",44006:"优惠券已废弃",44007:"优惠券暂未到使用时间",44008:"优惠券不能在该分类使用",44010:"优惠券已经抢完了，下次早点来哦",44011:"您已经领过该优惠券",44012:"优惠券领取失败",44015:"不是团长不能使用团长免单优惠券",44016:"优惠券批次不存在",44020:"正在处理中，请稍后再试！",44026:"该券太火爆，全部已被领完",44027:"活动已结束！",44033:"优惠券使用失败",44035:"批次类型错误",44036:"团免券已被领完",44037:"用户已达团免券日领取上限",44038:"您已领取该券",44039:"未找到符合条件的团免券批次",44041:"领取失败",44042:"领取链接已失效，下次早点哦",44043:"不符合领取条件哦",44044:"该优惠券活动不存在",44045:"不在活动时间",44046:"只有无订单的新用户可领取哦",44047:"红包券数量不够",44061:"多件优惠活动结束",44063:"多件优惠已经享受过了",44064:"多件优惠活动暂未开始",44065:"多件优惠活动暂未开始",44066:"多件优惠活动结束",44067:"商家券和多件优惠活动不能同时使用",44072:"分享码已过期",44073:"免拼卡不足",44076:"不符合免拼卡的使用条件",44090:"商品活动未开始",44091:"商品活动已结束",44092:"商品活动不存在",44093:"活动商品已售罄",44095:"商品活动已结束",44096:"商品活动不存在",44097:"您购买的该活动商品数量已达上限",44098:"商品订单已创建",44099:"商品活动有误",44100:"您未获取抢购资格，不可购买该商品",44200:"已达红包使用数量上限",44201:"每满{0}元可用{1}个红包",45001:"订单不存在",45002:"订单不属于该用户",45003:"订单不能取消",45004:"订单商品不一致",45005:"订单已经收货",45006:"订单还未发货",45007:"海淘订单没有提交身份证",45008:"订单已支付",45009:"支付繁忙，请重试",45010:"订单正在支付中",45012:"手机充值号码为空",45013:"手机充值号码不支持",45014:"手机充值商品不存在",45015:"确认收货失败",45023:"正在处理您的退款/售后申诉，无法主动确认收货",45026:"超过购买商品限制",45030:"订单正在处理中，请刷新页面",45031:"单次购买金额不得高于9.5万元",45033:"超过每个手机号码购买次数限制",45034:"抱歉，秒杀尚未开始，请稍候",45035:"该商品为App新人专享秒杀，非首次下载App24小时内的用户无法发起拼单",45036:"每名用户只能购买一次哦",45037:"你的当前登录帐号有些风险哦，建议先直接去充值吧",45038:"包月套餐订单购买免密校验失败",45039:"包月套餐功能升级中，当前只支持微信帐号登录的用户哦",45040:"限购商品暂时无法购买哦～",45041:"本次活动期间已抢到过一张神券，不能再抢了~",45042:"手机网络繁忙，请稍后再试",45043:"该类型商品本次活动期间您已抢过，不能再抢了~",45044:"您好，该商品仅可购买一次哦~",45045:"该商品仅能在拼多多App中购买！",45046:"该商品仅允许微信登录用户购买！",45047:"超过该商品每次购买件数限制",45050:"您已经在本场下过单了，去看看其他商品吧~",45051:"已购买过此类优惠商品，看看其他商品吧",45052:"您最近购买此商品次数达到上限，去看看其他商品吧~",45053:"手机网络繁忙，请稍后再试",45054:"需验证码校验！",45055:"手机网络繁忙，请稍后再试",45104:"不是定金类型订单",45105:"订单已取消",45106:"订单已确认",45107:"定金未成团",45206:"创建订单存在风险",45207:"创建订单验证码非法",45208:"价格有变动，请返回上一页查看",45209:"请更换支付方式，花呗分期暂不可用",45210:"手机网络繁忙，请稍后再试",45301:"店铺补差价金额达到上限！",45320:"未获取活动资格！",45321:"该活动必须是微信APP用户参加！",45322:"该活动同一用户不可重复参加！",45323:"该活动同一设备不可重复参加！",45324:"该活动用户微信置信度较低！",45325:"非APP新用户",45326:"手机网络繁忙，请稍后再试",45327:"账户存在风险，无法下单",45402:"该商品秒杀活动已结束",45403:"该商品免单活动已结束",45404:"该商品买二送一活动已结束",45405:"该商品秒杀活动已结束",45406:"该活动已结束",45407:"该活动已结束",45110:"未到尾款支付时间",45111:"超过尾款支付时间",45112:"未到定金支付时间",45113:"超过定金支付时间",45412:"该商品多件优惠活动已结束",45413:"该商品限时免单活动已结",45416:"该商品优惠活动已结束",45417:"该活动已结束",45418:"该优惠商品已被抢空",45420:"该活动已结束",45422:"该活动已结束",45423:"该活动已结束",45424:"该包月活动已结束",45425:"您向商家补的差价已经超过上限",45428:"该商品属于活动商品，无法正常购买",45429:"该地区暂时无货",45450:"此海淘商品仅支持微信支付",45500:"商品信息和充值号码不匹配",45501:"新地址暂不支持，请重新选择",45511:"您不是专属用户，不能以特惠价开团哦~",45514:"库存不足",45515:"低于最低起售件数",45516:"该商品有更低价的优惠活动，请刷新购买",46001:"团订单不存在",46002:"无法重复参团",46012:"商品售罄，免拼失败，拼单到期后将退款",46013:"秒杀活动结束，免拼失败，拼单到期后将退款",46014:"插队拼单已满",47003:"限量件数已被抢光，请重新选购",47101:"支付失败，限时折扣活动已结束",47102:"支付失败，限量折扣活动已结束，请重新购买",47010:"折扣活动检查失败",47011:"限时折扣活动已经使用",47012:"限时折扣活动未开启",47013:"限时折扣活动未到开始时间",47014:"限时折扣活动已经结束",47015:"商家券和限时折扣活动不能同时使用",47030:"已经催过了，正在尽快发货",47031:"催发货请求异常，请稍后重试",48001:"图片格式错误",48002:"图片大小超过限制",49001:"商品不存在",5e4:"当前访问人数较多，请稍后再试",50001:"今天票数已用完，明天再来吧",50002:"当前有未完成的团",80001:"投票活动已结束",6e4:"",60001:"该团已经结束",60002:"确认收货失败",60003:"参数错误",60004:"您已退款成功，无须确认收货",60005:"用户拒绝",60006:"用户取消",60007:"确认收货失败，请稍后重试",60100:"未安装微信客户端",60110:"未安装微博客户端",60120:"未安装手机QQ",60200:"录制失败",60201:"录音没有权限",60205:"录音时间过短",60210:"上传失败",60220:"播放失败",71001:"获取售后列表失败",71002:"申请售后失败",71003:"获取售后单详情失败",71004:"售后单添加售后信息失败",71005:"售后单修改失败",71006:"撤销售后失败",71007:"售后单用户确认发货失败",71008:"售后单重新申请失败",71009:"售后单申请平台介入失败",71010:"钱款去向查询失败",71011:"留言标记失败",71012:"售后用户待处理未读数量获取失败",71013:"售后未读留言数目获取失败",71014:"获取付款类型失败",71015:"获取售后原因失败",71016:"获取我要发货列表失败",71017:"获取是否使用平台优惠券失败",71018:"售后单用户确认完成失败",71019:"获取小额打款详情失败",71020:"填写账户信息失败",450130:"商品信息和充值号码不匹配",450131:"该商品每个号码每月限充一次",530001:"团不存在",530002:"团已失效",530003:"团已满",530004:"助力单不存在",530005:"不支持该支付方式",530006:"助力单已支付",530007:"助力单已退款",530008:"不在活动时间",530009:"您已经拿过该商品了，不要贪心哦",530010:"已达到今日帮忙付款次数上限，明日再来吧",530011:"已达到今日帮助该好友次数上限，明日再来吧~",530012:"已经达到帮助该好友支付次数上限，赶紧去帮助其他人吧~",530013:"不符合免费帮忙条件",530014:"您不是拼多多App新人，不能开团哦",144073:"您没有免拼卡，请返回重新下单",144076:"不符合免拼卡的使用条件",144078:"请求失败，请重新发起支付",152001:"限量折扣活动已经使用",152002:"限量折扣活动未开启",152003:"限量折扣活动未到开始时间",152004:"限量折扣活动已经结束",152005:"商家券和限量折扣活动不能同时使用",152006:"限量件数已被抢光，请重新选购",152010:"已达到该商品活动期内的最多购买件数，不能再抢了～",3000001:"充值失败，请稍后重试",3000002:"话费充值失败，请稍后重试",3000003:"话费充值下单失败，请稍后重试",400001:"微信零钱不足，且未绑定银行卡，请绑定银行卡再试，或邀请好友代付",400002:"银行卡余额不足，请绑定其他银行卡再试，或邀请好友代付",400003:"银行卡预留手机号不符，请核对后再试，或邀请好友代付",400004:"银行卡已失效，请核对后再试，或邀请好友代付",400005:"银行拒绝交易，请核对后再试，或邀请好友代付",400099:"支付未完成，请更换支付方式",4000004:"手机网络繁忙，请稍后再试",4000005:"手机网络繁忙，请稍后再试",4000006:"",20504101:"团订单不存在",20504005:"手机网络繁忙，请稍后再试",12960005:"商品不存在",12960006:"活动未开始",12960007:"商品已售罄",12960008:"拼单人数已满",12960009:"只有App新人才能参团哦",12960010:"帐号信息异常",12960012:"该商品一次只能购买1件哦",12960014:"请使用微信登录再下单",12960016:"你已经开过团了，请勿重复开团",12960017:"今日开团次数已用完，明天再来吧",12960018:"今日参团次数已用完，明天再来吧",12960019:"该商品你今日已经参过团了"}),Vc={AuthenticationFailed:Hc[40001],APIServiceBusy:Hc[40002],GraphicalCodeForPhoneCode:Hc[40017],LoginFailed:Hc[40020],NeedAuthenticationLogin:Hc[43058],ItemRemoved:Hc[41002],OutOfStock:Hc[41003],NotInLuckyTime:Hc[41005],AddressUnreachable:Hc[41006],NoCouponLeft:Hc[44010],CouponTaken:Hc[44011],CouponTakeFailed:Hc[44012],CouponTakenOut:Hc[44026],PersonalInfoNoID:Hc[45007],OrderPayed:Hc[45008],NeedVerfication:Hc[45054],GroupInvalid:Hc[46001],GroupFailed:Hc[42003],OverBuyLimit:Hc[42004],GroupOverflow:Hc[42005],GroupAutoOpenFailed:Hc[42006],GroupAutoOpenSuccess:Hc[42007],IDCardEmpty:Hc[43004],NoNameIDBefore:Hc[43006],IDCardFake:Hc[43008],IDCardFailTooMuch:Hc[43009],InsufficientCoupon:Hc[44047],AvailableCouponsPerUnit:Hc[44201],NoSuchOrder:Hc[45001],PrepayBusy:Hc[45009],OrderPaying:Hc[45010],PaymentDisabled:Hc[45210],SpikeComing:Hc[45034],OrderPayRisk:Hc[45206],OrderPayVerificationInvalid:Hc[45207],OrderAlreadyUrged:Hc[47030],OrderUrgeError:Hc[47031],NativeNormalError:Hc[6e4],NativeParamsError:Hc[60003],NativeUserRefuse:Hc[60005],NativeUserCancel:Hc[60006],NativeAudioRecordFailed:Hc[60200],NativeAudioRecordUndetermined:Hc[60201],NativeAudioTooShort:Hc[60205],NativeAudioUploadFailed:Hc[60210],NativeAudioPlayFailed:Hc[60220],SuccessiveMobileFeeOnlyOnce:Hc[45036],SuccessiveMobileFeeRisk:Hc[45037],SuccessiveMobileFeeUnsigned:Hc[45038],SuccessiveMobileFeeOnlyWechat:Hc[45039],OverBuyVirtualGoodsLimit:Hc[45033],AvailableActivityChanged:Hc[45516],GroupCompleted:Hc[42001],InvalidAddress:Hc[43002],CouponDailyLimit:Hc[44037],CouponBatchLimit:Hc[44038],CouponTokenInvalid:Hc[44041],CouponTokenExpired:Hc[44042],CouponPushNotIn:Hc[44043],CouponActivityAbsent:Hc[44044],MultiplyDiscountPause:Hc[44064],MultiplyDiscountEnd:Hc[44066],CouponMaxNumReached:Hc[44200],HistoryGroupOpenFailed:Hc[46014],GoodsNotExist:Hc[49001],NativePaymentCancel:Hc[60006],WithoutWeChatClient:Hc[60100],QQPayFailed:Hc[60120],OrderLimitedSalesEnd:Hc[152004],OrderLimitedSalesOut:Hc[152006],PayLimitedSalesEnd:Hc[47102],PayLimitedSalesOut:Hc[47003],ServerBusy:Hc[4000004],OrderSpikeMsgError:Hc[4000006],WxDirectPayWxBalanceError:Hc[400001],WxDirectPayCardBalanceError:Hc[400002],WxDirectPayTelephoneError:Hc[400003],WxDirectPayCardInvalidError:Hc[400004],WxDirectPayRefusedError:Hc[400005],WxDirectPayUnknownError:Hc[400099],ACT_GROUP_NOT_EXISTS:Hc[530001],ACT_GROUP_FAILED:Hc[530002],ACT_GROUP_SUCCESS:Hc[530003],ACT_RECORD_NOT_EXISTS:Hc[530004],PAY_CHANNEL_NOT_SUPPORT:Hc[530005],ACT_RECORD_PAID:Hc[530006],ACT_RECORD_REFUND:Hc[530007],ASSIST_FOR_ONE_DAILY_LIMIT:Hc[530011],ASSIST_FOR_ONE_LIMIT:Hc[530012],getMsgFromCode:function(e){var t=Hc[e];return Uc[e+""]?Uc[e+""]:t?t.message:""}},zc=r("h3qu");function Wc(e){var t=null;return function(){if(!t){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];t=e.apply(null,n)}return t}}var Qc=Wc((function(){var e=Object(zc.getPlatformByUa)(navigator.userAgent),t=e===zc.PLATFORM.PddAndroid||e===zc.PLATFORM.PddIOS;return{isNativePlatform:t,isTinyNativePlatform:e===zc.PLATFORM.PDDTinyAndorid,platform:e,version:t&&Object(zc.getNativeVersion)(navigator.userAgent,e)}})),qc="https://pmmtk.hutaojie.com",Gc="https://pmmtk-a.pinduoduo.com",Yc="/api/pmm/front_log",Xc="/api/pmm/front_err",Jc=5,Kc=6,Zc=501,$c=502,eu=600,tu="undefined"==typeof window||(window.location.href.includes("hutaojie")||window.location.hostname.includes("panduoduo.yangkeduo.com")),ru=Wc((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;if(r)return r;var n=window.location.pathname;if(e.indexOf(n)<0||t.length<=0)return n;var o,a=window.location.search,i=t.find((function(e){return a.indexOf(e)>-1}));if(i){var s=Object(P.parseQuery)(a);o=s[i]}return o?"/"===o[0]?"".concat(o,".html"):"/".concat(o,".html"):n}));var nu,ou,au,iu,su,cu={},uu={},lu={};function du(){return cu}function pu(){return uu}function mu(){return lu}function fu(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function hu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fu(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fu(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vu(e,t){var r,n=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pmmHost||Gc;return e===eu?tu?"".concat(qc).concat(Yc):"".concat(t).concat(Yc):tu?"".concat(qc).concat(Xc):"".concat(t).concat(Xc)}(null==e||null===(r=e.datas[0])||void 0===r?void 0:r.type,t);if(Qc().isNativePlatform&&window.pinbridge)window.pinbridge.callNative("JSNetwork","request",{method:"POST",url:n,headers:{"Content-Type":"text/plain;charset=UTF-8"},data:JSON.stringify(e)});else{var o=new XMLHttpRequest;o.open("POST",n,!0),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.withCredentials=!0,o.send(JSON.stringify(e))}}function yu(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.bizSide,a=n.appId,i=n.testAppId,s=r.app_version,c=r.log_version,u=r.network,l=r.page,d=r.page_id,p=r.page_name,m=r.page_sn,f=r.page_url,h=r.payload,v=r.platform,y=r.refer_page_id,g=r.refer_page_name,b=r.refer_page_sn,_=r.user_agent,k=r.user_id,S=r.error_msg,I=r.error_message,w=r.serverIp,P=void 0===w?"":w,O=r.httpCode,C=void 0===O?"":O,E=r.http_code,D=r.httpMethod,N=void 0===D?"":D,T=r.errorCode,j=void 0===T?"555555":T,A=r.error_code,R=r.module,M=void 0===R?"":R,L=r.pageId,B=void 0===L?"":L,F=r.referPageId,U=void 0===F?"":F,H=r.type,V=r.url,z=r.lvalues,W=r.fvalues,Q=x()(r,["app_version","log_version","network","page","page_id","page_name","page_sn","page_url","payload","platform","refer_page_id","refer_page_name","refer_page_sn","user_agent","user_id","error_msg","error_message","serverIp","httpCode","http_code","httpMethod","errorCode","error_code","module","pageId","referPageId","type","url","lvalues","fvalues"]),q=mu();((null==S?void 0:S.indexOf("lazy_image_error"))>-1||(null==S?void 0:S.indexOf("cui_image_error"))>-1)&&(e=!0,t=null==h?void 0:h.src);var G=H===eu,Y=_u(hu(hu({},q),h)),X=Y||{},J=X.sub_op,K="api_error"===J,Z=H||e&&Zc||G&&eu||$c,$=gu({bizSide:o,appId:a,testAppId:i,app_version:s}),ee=bu(v,k),te=ku({app_version:s,log_version:c,network:u,page:l,page_id:d,page_name:p,page_sn:m,page_url:f,refer_page_id:y,refer_page_name:g,refer_page_sn:b,user_agent:_,error_msg:S,error_message:I||Y.error_message,serverIp:P,httpCode:C||E,httpMethod:N,errorCode:j,error_code:A,module:M,pageId:B,referPageId:U,url:V||t},n,K);if(G){var re=_u(Q);te=hu(hu({},te),re)}return $.common_tags=ee,$.datas=[hu({category:H===eu?Kc:Jc,type:Z,timestamp:Date.now(),tags:te,extras:Y},H===eu?{lvalues:z,fvalues:W}:{})],$}function gu(e){var t,r=e||{},n=r.bizSide,o=r.appId,a=r.testAppId,i=r.app_version,s=function(e){var t=e.bizSide,r=e.appId,n=e.testAppId;if("undefined"!=typeof window){var o={bizSide:"consumer-platform-fe"};return t&&(o.bizSide=t),tu&&!n?o:r?(o.appId=tu?n:r,o):o}return{}}({bizSide:n,appId:o,testAppId:a}),c=Date.now(),u=Math.pow(10,5)+Math.floor(Math.random()*(Math.pow(10,6)-Math.pow(10,5)));return nu=void 0!==nu?nu:Number(null===(t=i||"")||void 0===t?void 0:t.split(".").reduce((function(e,t,r){return 0===r?e+t:"".concat(e).concat(t.length<2?"0".concat(t):t)}),"")),{biz_side:s.bizSide,app:s.appId,level:2,version:nu,report_time_ms:c,rand_num:u,crc32:Object(P.crc32)("".concat(c,"-").concat(u))}}function bu(e,t){var r=function(e){var t,r;return(tu?(t={},o()(t,_e.PLATFORM.PddAndroid,"1"),o()(t,_e.PLATFORM.PddIOS,"3"),o()(t,_e.PLATFORM.PDDTinyAndorid,"0"),t):(r={},o()(r,_e.PLATFORM.PddAndroid,"3"),o()(r,_e.PLATFORM.PddIOS,"5"),o()(r,_e.PLATFORM.PDDTinyAndorid,"59"),r))[e]||"-1"}(e);ou=void 0!==ou?ou:Object(P.getCookie)("ETag");var n=Object(zc.getSystemVersion)(navigator.userAgent),a=Object(zc.getSystem)(navigator.userAgent);return{p:e,runningPlatform:e,runningAppId:r,b:"",did:"",mid:"",osV:"".concat(a,"_").concat(n),pid:ou,uid:t?t+"":""}}function _u(e){if(t=e,"[object Object]"!==Object.prototype.toString.call(t))return{};var t,r=Object.keys(e),n={};return r.forEach((function(t){var r=e[t];n[t]=String(r)})),n}function ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.universalPaths,o=t.universalQueryKeys,a=t.reportPath,i=e.app_version,s=e.log_version,c=void 0===s?"0.0.1":s,u=e.network,l=e.page,d=void 0===l?"":l,p=e.page_id,m=e.page_name,f=e.page_sn,h=e.page_url,v=e.refer_page_id,y=e.refer_page_name,g=e.refer_page_sn,b=e.user_agent,_=e.error_msg,k=e.error_message,S=e.serverIp,I=void 0===S?"":S,w=e.httpCode,P=void 0===w?"":w,O=e.httpMethod,C=void 0===O?"":O,x=e.errorCode,E=void 0===x?"555555":x,D=e.error_code,N=e.module,T=void 0===N?"":N,j=e.pageId,A=void 0===j?"":j,R=e.referPageId,M=void 0===R?"":R,L=e.url,B=ru(n,o,a);return hu({network:(u||"0")+"",serverIp:I,url:L,errorCode:String(D||E),errorMsg:(_||k||"").substr(0,150),module:T,pageId:A,pagePath:B,pageSn:f?f+"":"",pageUrl:h||window.location.href,referPageId:M,page_id:p?p+"":"",refer_page_id:v?v+"":"",referPageName:y||"",referPageSn:g?g+"":"",pageName:m||"",page:d,log_version:c,user_agent:b||window.navigator.userAgent,app_version:i||""},r?{httpCode:String(P),httpMethod:C}:{})}function Su(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Iu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Su(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Su(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wu(e,t){return Pu.apply(this,arguments)}function Pu(){return(Pu=c()(i.a.mark((function e(t,r){var n,o,a,s,c,u,l,d,p,m,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=du(),o=pu(),a=o.pageSN,s=o.pageId,c=o.pageName,u=o.referPageId,l=o.referPageName,d=o.referPageSN,au=au||Object(_e.getCurrentPlatform)(),iu){e.next=13;break}return e.prev=5,e.next=8,Object(P.getNetWorkType)().catch((function(){return 0}));case 8:iu=e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:if(su){e.next=22;break}return e.prev=14,e.next=17,Object(de.getUid)();case 17:su=e.sent,e.next=22;break;case 20:e.prev=20,e.t1=e.catch(14);case 22:m=(p=au||{}).platform,f=p.version,h=Iu(Iu({},t),{},{page_sn:a,page_id:s,page_name:c,refer_page_id:u,refer_page_name:l,refer_page_sn:d,network:iu,platform:m,user_id:su,page_url:window.location.href,app_version:f}),vu(yu(h,r||n),r||n);case 26:case"end":return e.stop()}}),e,null,[[5,11],[14,20]])})))).apply(this,arguments)}function Ou(e,t){return Cu.apply(this,arguments)}function Cu(){return(Cu=c()(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wu(Iu(Iu({},t),{},{type:eu}),r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xu=Object(_e.getPlatform)(window.navigator.userAgent);Si.default.home=function(){xu.statisfy&&xu.statisfy("1.2.2","2.0.8","greaterThan")||xu.isTinyNativePlatform?Object(ke.invokeBridgeCallNativeFun)("JSNavigation","selectTab",{tab_index:0}):Si.default.uniformForward("index.html")},Si.default.GroupUrl=xu.isNativePlatform||["app.yangkeduo.com","panduoduo.yangkeduo.com"].indexOf(location.hostname)>=0?"group7.html":"group8.html";var Eu={SpecGroupDomain:"m.ishangtong.com",GoodsEventTypeWhiteList:[1,7]};Si.default.genGroupPageUrl=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=xu.isNativePlatform,n=xu.isWeChatPlatform,o=Eu,a=o.SpecGroupDomain,i=o.GoodsEventTypeWhiteList,s=parseInt(t.goodsEventType,10),c=i.indexOf(s)>=0,u=t.urlParams,l=t.useSpecDomain,d=void 0===l||l,p=t.addRandomSuffix;p&&654===(e=Math.floor(9e3*Math.random())+1)&&(e=Math.floor(653*Math.random())+1);var m=r?"group7.html":"group".concat(e||8,".html");if(c&&(m=r?"vns_group.html":"vns_group".concat(e||"",".html")),u&&u.biz_type){var f=parseInt(u.biz_type,10);2012===f&&(m="mhf_free_group.html")}if(u&&(m="".concat(m,"?").concat(Object(P.buildQuery)(u))),n){var h=["m.hutaojie.com","panduoduo.yangkeduo.com"].indexOf(location.hostname)>=0;!h&&d&&a&&(m="//".concat(a,"/").concat(m))}return m};var Du=Si.default;function Nu(e){var t=e.page_url||"",r=e.page_type||"",n=t.split("/"),o=n[n.length-1].split("?")[0],a=Object(P.parseUrlQuery)(t);return{pageUrl:t,pageType:r,pathName:o,pageTimestamp:a._t_timestamp,forceSkip:"1"===a.__fast_return_skip}}function Tu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Array.isArray(e)){var t;try{t=e.reverse().find((function(e,t){if(0===t)return!1;var r=Nu(e),n=r.pathName,o=r.pageType,a=r.pageTimestamp,i=r.forceSkip,s=/^\/?(vns_)?(goods|group|order_checkout|comm_goods_shoes)\d*\.html/.test(n),c=["pdd_order_confirm","pdd_goods_detail","pdd_goods_detail_photo_video_browser","pdd_comment_list_picture_browser","pdd_comment_list_picture_preview","pdd_goods_detail_photo_video_browser","pdd_comment_browse","pdd_comment_picture_list","pdd_chat_combined_payment"].includes(o),u=["comm_goods_trip"].includes(a);return!(s||c||u||i)}))}catch(e){}return t}}function ju(e){Object(ke.invokeBridgeCallNativeFun)("PDDNavigator","backToGoodsList",e)}function Au(){return Ru.apply(this,arguments)}function Ru(){return(Ru=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Object(_e.getCurrentPlatform)()).isNativePlatform&&!(Object(_e.compareVersion)(t.version,"3.61.0")<0)){e.next=3;break}return e.abrupt("return",null);case 3:return e.abrupt("return",Object(ke.invokeBridgeCallNativeFun)("PDDNavigator","pageSourceStack",{}).then((function(e){return e&&e.pageSourceStack?Tu(e.pageSourceStack):null})).catch((function(){return null})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e){var t=e.url,r=e.name;if(Object(_e.getCurrentPlatform)().statisfy("5.95.0","5.90.0","greaterThanEqual")){var n=(Object(P.parseUrlQuery)(t)||{}).new_window,o={url:Object(P.appendQuery)({launch_type:"highlayer"},t),new_window:"0"==="".concat(n)?0:1,display_type:0,block_loading:1,delay_loading_ui_time:500,name:r};Object(ke.invokeBridgeCallNativeFun)("JSUniPopup","showHighLayer",{model:o,global:1}).catch((function(){return null}))}else Object(ke.invokeBridgeCallNativeFun)("PDDPopupManager","showWebLayerAndForward",{model:{url:t,data:"{}"}}).catch((function(){return null}))}function Lu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(_e.getCurrentPlatform)(),n=r.statisfy&&r.statisfy("2.6.0","2.14.0","greaterThanEqual");function o(e){return a.apply(this,arguments)}function a(){return(a=c()(i.a.mark((function t(r){var o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null,a=null,null!=r&&(o=r.group_order_id,a=r.pay_status),+a!=+fa||null==o){t.next=15;break}if(r.orderStatus=1,r.groupOrderID=o,!n){t.next=15;break}return s={order_sn:e,order_status:r.order_status,pay_status:r.pay_status,shipping_status:r.shipping_status,rate_status:r.rate_status,has_extended:0},t.prev=8,t.next=11,Object(Ut.send)("OrderStatusChangedNotification",s);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(8);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}}),t,null,[[8,13]])})))).apply(this,arguments)}return function(){var r=c()(i.a.mark((function r(n){var a,s,c,u,l,d,p,m,f;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=n.maySuccess,s=function(t){var r=t.count,n="api/aristotle/pay_check?order_sn=".concat(e,"&times=").concat(r,"&success=").concat(a?1:0);return Fe({method:"GET",url:n}).catch((function(e){throw e={errorCode:e.errorCode,data:(e.response||{}).data}}))},c="timeout",u=function(e){return new Promise((function(t){setTimeout(t,1e3*e)}))},l=1;case 5:if(!(l<=5)){r.next=35;break}return d=new Promise((function(e,t){setTimeout((function(){t({errorCode:c})}),9500)})),Ou({error_message:"before_paycheck_".concat(a?"maysuccess":"mayfail","_").concat(l),payload:{event:"paycheck",order_sn:e}}),r.prev=8,location.href.includes("hutaojie.com")&&Te("[hutaojie]: 第"+l+"次查单"),r.next=12,Promise.race([s({count:l}),d]);case 12:if(r.t0=r.sent,r.t0){r.next=15;break}r.t0={};case 15:if((p=r.t0).order_goods=[{event_type:p.event_type}],!(+p.pay_status==+ma&&p.wait_time>0)){r.next=22;break}return r.next=20,u(p.wait_time);case 20:r.next=24;break;case 22:return Object(O.sendMetrics)({op:"event",event:"pay_order",sub_op:"pay_order",goods_id:t.goodsID,order_sn:e,group_order_id:p.groupOrderID,order_amount:t.orderAmount,pay_app_id:t.appID}),r.abrupt("return",o(p));case 24:r.next=32;break;case 26:throw r.prev=26,r.t1=r.catch(8),m=r.t1.errorCode,f=r.t1.data,Object(P.throwErrorAsync)(new Error("paycheck_fail"),{error_message:"paycheck_fail_".concat(m),order_sn:e,payload:JSON.stringify(f)}),new Error({errorCode:m,data:f});case 32:l++,r.next=5;break;case 35:case"end":return r.stop()}}),r,null,[[8,26]])})));return function(e){return r.apply(this,arguments)}}()}var Bu=function(e,t){var r=Object(P.parseUrlQuery)(location.href),n=S()(r,"last_host")||"",o=Object(P.appendQuery)({group_order_id:e.groupOrderID,order_sn:e.order_sn},Du.GroupUrl);n&&n!==location.hostname&&(o="//"+n+"/"+o);var a=t.sourceChannel,i=S()(r,"refer_page_el_sn"),s=e.eventType,c=e.bizType,u=e.groupOrderID,l=Du.genGroupPageUrl({goodsEventType:s,urlParams:{group_order_id:u,biz_type:c,source_channel:a,refer_page_el_sn:i,source_redirect:e.prepayType,order_sn:e.order_sn},addRandomSuffix:!0,useSpecDomain:!1});n&&n!==location.hostname&&(l="//"+n+"/"+l),l.length>0&&(o=l),t.forwardHideSkuSelect&&t.forwardHideSkuSelect(),Du.uniformForward(o)},Fu=function(e){e=e||{};var t="/order.html?"+Object(P.buildQuery)(e),r=S()(Object(P.parseUrlQuery)(location.href),"last_host")||"";r&&location.hostname!==r&&(t="//"+r+t),Du.uniformForward(t)};function Uu(){return Hu.apply(this,arguments)}function Hu(){return Hu=c()(i.a.mark((function e(){var t,r,n,o,a,s,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2?c[2]:void 0,o=Object(_e.getCurrentPlatform)(),1!==S()(t,"orderStatus")){e.next=24;break}if(!(r.fastReturn&&Object(_e.compareVersion)(o.version,"4.48.0")>=0)){e.next=20;break}return a=Object(P.appendQuery)({group_order_id:t.groupOrderID,order_sn:t.order_sn},r.fastReturn),e.next=9,Au();case 9:if(s=e.sent,!n.paySuccessCb){e.next=15;break}return Mu({url:a,name:"grp_lite_group_web"}),n.forwardHideSkuSelect&&n.forwardHideSkuSelect(),n.paySuccessCb({url:a}),e.abrupt("return");case 15:if(!s){e.next=20;break}return Mu({url:a,name:"grp_lite_group_web"}),n.forwardHideSkuSelect&&n.forwardHideSkuSelect(),ju(s),e.abrupt("return");case 20:t.prepayType=r.prepayType,Bu(t,n),e.next=26;break;case 24:n.forwardHideSkuSelect&&n.forwardHideSkuSelect(),Fu({order_sn:t.order_sn,check_order_payed:0});case 26:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Vu(e){Object(_e.getCurrentPlatform)().isWeChatMiniProgram||Te("支付未完成，请重新支付")}function zu(e){var t=e.orderSn,r=e.error,n=e.defaultOnFailed,o=e.ocManager,a=r.errorCode,i=r.extraErrorInfo,s=(i=void 0===i?{}:i).isCheckOrderFail,c=r.errorHandling;if(!(c=void 0===c?{}:c).isErrorAlerted)return s?(o.forwardHideSkuSelect&&o.forwardHideSkuSelect(),void Fu({order_sn:t,check_order_payed:0})):void n(a);n(-1)}var Wu=1,Qu=2,qu=3,Gu=4,Yu=7;function Xu(e,t){var r=function(){};if(!e)return r;var n=S()(e,"type",0),o=S()(e,"param.url"),a=Object(_e.getCurrentPlatform)().isWeChatMiniProgram;switch(n){case Wu:return function(){return!a&&Du.uniformForward(o)};case Qu:return function(){a?window.wx.miniProgram.navigateBack():Du.back(o)};case qu:return function(){return!a&&Du.home()};case Gu:return function(){return!a&&Du.reload(o)};case Yu:return function(){return location.reload()};default:return r}}var Ju="toast",Ku="nothing",Zu="alert",$u="confirm";function el(e){if(e){var t=S()(e,"view_style",Ju),r=S()(e,"view_object.message")||"",n=S()(e,"view_object.title")||"";r||(n=n||"系统繁忙，请稍后再试");var o=function(e,t){var r=e||{},n=r.on_show,o=r.on_ok,a=r.on_cancel,i={};return i.onShow=Xu(n),i.onCancel=Xu(a),i.onOk=Xu(o),i}(S()(e,"view_object"))||{},a=o.onOk,i=o.onCancel,s=o.onShow,c=S()(e,"view_object.ok_label")||"确定",u=S()(e,"view_object.cancel_label")||"取消",l=+S()(e,"view_object.on_close.type"),d=Object(_e.getCurrentPlatform)().isWeChatMiniProgram;switch(t){case Ku:break;case Zu:ft({title:n,text:r,onConfirm:d?void 0:a,onClose:d?void 0:a,confirmButtonLabel:d?"知道了":c});break;case $u:d?ft({title:n,text:r,confirmButtonLabel:"知道了"}):Object(cr.a)({title:n,text:r,onConfirm:a,onCancel:i,onClose:2==+l?a:i,cancelButtonLabel:u,confirmButtonLabel:c});break;default:Te(n,{onClose:function(){s&&s()}})}}}function tl(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function rl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nl=function(e){var t=e||{},r=t.onConfirm,n=t.onClose;ft(rl(rl({},e),{},{onClose:n||r}))},ol=function(e){return[Vc.MultiplyDiscountEnd.code,Vc.MultiplyDiscountPause.code].indexOf(e)>=0},al=function(e){return[Vc.NotInLuckyTime.code].indexOf(e)>=0},il=function(e){return[Vc.NeedVerfication.code].indexOf(e)>=0},sl=function(e,t){return[Vc.OutOfStock.code,Vc.GroupOverflow.code].indexOf(e)>=0&&[da.SPIKE,da.SUPER_SPIKE].indexOf(parseInt(t,10))>=0},cl=function(e){return[Vc.OutOfStock.code].indexOf(e)>=0},ul=function(e){return[Vc.ItemRemoved.code,Vc.GroupInvalid.code,Vc.OverBuyLimit.code,Vc.OrderPayed.code,Vc.OverBuyVirtualGoodsLimit.code,Vc.GroupOverflow.code].indexOf(e)>=0},ll=function(e){return[Vc.PersonalInfoNoID.code].indexOf(e)>=0},dl=function(e){return[Vc.OrderSpikeMsgError.code].indexOf(e)>=0},pl=function(e){return[Vc.SpikeComing.code].indexOf(e)>=0},ml=function(e){return[+Vc.WxDirectPayWxBalanceError.code,+Vc.WxDirectPayCardBalanceError.code,+Vc.WxDirectPayTelephoneError.code,+Vc.WxDirectPayCardInvalidError.code,+Vc.WxDirectPayRefusedError.code,+Vc.WxDirectPayUnknownError.code].indexOf(+e)>=0},fl=function(e){return[Vc.IDCardEmpty.code,Vc.IDCardFake.code,Vc.IDCardFailTooMuch.code].indexOf(e)>=0},hl=function(e){return[Vc.GroupAutoOpenSuccess.code].indexOf(e)>=0},vl=function(e){return[1101,4000004,409,512,511].includes(+e)},yl=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.errorCode,n=t.data,o=t.handleUnclassifiedErrors,a=t.store,r+="",s=n&&n.error_msg||Vc.getMsgFromCode(r),c=a.goodsId,u=a.goodsInfo,l=Object(_e.getCurrentPlatform)(),d=l.isWeChatMiniProgram,!sl(r,u.eventType)){e.next=10;break}nl({title:s,onConfirm:function(){!d&&Du.reload("spike.html")}}),e.next=76;break;case 10:if(!cl(r)){e.next=14;break}nl({title:s,onConfirm:function(){!d&&Du.reload("per_similar_rec.html?goods_id=".concat(c,"&source=3"))}}),e.next=76;break;case 14:if(!ul(r)){e.next=18;break}nl({title:s,onConfirm:function(){!d&&Du.home()}}),e.next=76;break;case 18:if(!ol(r)){e.next=22;break}nl({title:s,onConfirm:function(){location.reload()}}),e.next=76;break;case 22:if(!al(r)){e.next=26;break}nl({title:s,onConfirm:function(){!d&&Du.reload("vns_goods_list.html?cid=checkout_expire_choujiang&_ex_src=order_checkout&_ex_sid=checkout_expire_choujiang")}}),e.next=76;break;case 26:if(!ll(r)){e.next=30;break}nl({title:s,onConfirm:function(){}}),e.next=76;break;case 30:if(!hl(r)){e.next=34;break}Te("拼单已满"),e.next=76;break;case 34:if(!pl(r)){e.next=38;break}nl({title:s,onConfirm:function(){}}),e.next=76;break;case 38:if(!ml(r)){e.next=42;break}nl({title:"微信免密支付不成功",text:s,confirmButtonLabel:"知道了",onConfirm:function(){Te(la)}}),e.next=76;break;case 42:if(!il(r)){e.next=46;break}!d&&Du.uniformForward("verification.html?scene_type=25"),e.next=76;break;case 46:if(!dl(r)){e.next=50;break}n&&n.error_msg&&nl({title:n.error_msg,onConfirm:function(){!d&&Du.home()}}),e.next=76;break;case 50:if(!fl(r)){e.next=54;break}Te(s),e.next=76;break;case 54:if(r!==Vc.AvailableActivityChanged.code){e.next=58;break}nl({title:s,onConfirm:function(){!d&&Du.reload()}}),e.next=76;break;case 58:if("0"!==r&&"54001"!==r){e.next=61;break}e.next=76;break;case 61:if(!o){e.next=76;break}if(!s&&parseInt(r,10)>0&&(s="系统繁忙，请稍后再试 (".concat(r,")"),Object(P.throwErrorAsync)(new Error("order_err_unknown"),{error_message:"err_unknown_".concat(r)})),!vl(r)){e.next=75;break}if(!((p=a.cureNCov>0?a.cureNCov:200)>0)){e.next=71;break}return e.next=68,new Promise((function(e){return setTimeout(e,Math.min(p,3e3))}));case 68:return Object(Se.hide)(),e.next=71,new Promise((function(e){return setTimeout(e,100)}));case 71:(m=S()(n,"error_payload"))?el(m):nl({title:s}),e.next=76;break;case 75:Te(s);case 76:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function gl(e){var t=e.errorCode,r=e.data,n=e.handleUnclassifiedErrors,o=e.ocData;t=parseInt(t,10);var a=S()(r,"error_payload");if(!a)return yl({errorCode:t,data:r,handleUnclassifiedErrors:n,store:o});var i=S()(a,"cure_ncov"),s=S()(a,"order_path");if(i>=0&&(o.cureNCov=i),s&&(o.orderServicePath=s),4000004===t)return yl({errorCode:t,data:r,handleUnclassifiedErrors:n,store:o});el(a)}r("vN+2"),r("PtqM"),r("lSCD");var bl=r("LUTn"),_l=r("gNBk");r("m7/H");function kl(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Sl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kl(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kl(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Il=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_,k;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.groupId,n=void 0===r?"":r,o=t.customFields,a=void 0===o?{}:o,s=t.customLongFields,c=void 0===s?{}:s,u=t.customTags,l=void 0===u?{}:u,d=t.groupConfig,p=void 0===d?{}:d,m=t.useBothReport,f=void 0===m||m,n){e.next=6;break}e.next=5;break;case 5:return e.abrupt("return");case 6:if(Object.keys(l).length,h=Object(_l.c)(),v=h.sampleRate,y=h.amplifyRate,!(Math.random()>v)){e.next=12;break}return e.abrupt("return");case 12:g=location.href,b=Object(P.getCookie)(),_=Object(le.getPageName)(),"cmt_log",k=Sl({groupId:n,pageName:_,type:"cmt_log"},l),Object(bl.a)({mutipleKvList:[{tags:k,fields:Sl({url:g,uid:+b.pdd_user_id||0,userAgent:navigator.userAgent},a),longFields:Sl(Sl({},c),{},{amplifyRate:y})}]},{reportCmtcByH5:!0,groupConfig:p,useBothReport:f});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wl=function(e){document.readyState,Il(e).catch((function(e){}))},Pl=function(){var e=c()(i.a.mark((function e(t){var r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>1&&void 0!==r[1]&&r[1])){e.next=4;break}return wl(t),e.abrupt("return");case 4:if(e.prev=4,"function"!=typeof window.requestIdleCallback){e.next=8;break}return e.next=8,new Promise((function(e){return window.requestIdleCallback(e,{timeout:1e3})}));case 8:return e.next=10,Il(t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();function Ol(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Cl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ol(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ol(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xl=function(e){var t=String(e).split(".").reverse().reduce((function(e,t,r){return+e+ +t*Math.pow(100,r)}),0);return t>=48700?"after487":t>=45300?"453to486":t>=42600?"426to452":t>=4e4?"400to425":t>=35100?"351to399":t>0?"below350":0};function El(){var e=location.hostname;return["mobile.yangkeduo.com","m.pinduoduo.net","sc.yangkeduo.com"].includes(e)?e:"other"}var Dl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.groupId,r=void 0===t?"10242":t,n=e.customTags,o=e.customFields,a=void 0===o?{}:o,i=e.customLongFields,s=le.default.getInstance(),c=s.getPageName(),u=Object(_e.getCurrentPlatform)(),l=u.version;Pl({groupId:r,customTags:Cl({pageName:c,verNo:xl(l),host:El(),platform:u.platform},n),customFields:a,customLongFields:i})},Nl=function(){var e=Object(_e.getCurrentPlatform)();return e.statisfy&&e.statisfy("6.3.0","6.3.0","greaterThanEqual")},Tl=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.snapshotId,n=t.extMap,o=t.antiContent,e.next=3,Fe({method:Re.POST,url:"api/kali/certification/living/sdk/create_process_and_validate",data:{snapshot_id:r,ext_map:n,anti_content:o}});case 3:return a=e.sent,s=a.result||{},c=s.process_id,u=s.verify_auth_token,e.prev=5,e.next=8,Object(ke.invokeBridgeCallNativeFun)("JSFaceDetect","detectFaceLive",{face_app_id:"cpdd_risk_common_toxic_order",extra_info:a.result,is_auth_prompt:!0});case 8:l=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),e.t0.noErrorHandle=!0,e.t0;case 15:return d=l.ticket,e.next=18,Fe({method:Re.POST,url:"api/elmar/certification/living/query",data:{process_id:c,ticket:d,verify_auth_token:u,risk_params:{anti_content:o}}});case 18:e.sent;case 19:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),jl=Tl,Al=function(e){var t,r,n,o,a=e.paymentType,i=e.hostName,s=e.userAgent;i=location.hostname,s||(s="undefined"!=typeof window&&(window.navigator.userAgent||window.navigator.vendor||window.opera)||"");var c=Object(_e.getCurrentPlatform)();t=c.isNativePlatform,r=c.isWeChatPlatform,o=c.isWeChatMiniProgram,n=c.isTinyNativePlatform;var u=!!s&&!(!s.match(/phh_ios_version/i)&&!s.match(/phh_android_version/i)),l=ci({isModuleVersion:u,hostName:i});if(a===zn.WeChat)return t||r||n?l.AppID.WeChat:l.AppID.WeChatH5Pay;if(a===zn.AliPay)return t||n?l.AppID.AliPay:l.AppID.AliPayWeb;if(a===zn.QQPay)return t?l.AppID.QQ:l.AppID.QQPublicPayment||l.AppID.QQPublic;if(a===zn.ApplePay)return l.AppID.ApplePay;if(a===zn.AliPayDirectDebit)return l.AppID.AliPayDirectDebit;if(a===zn.HBInstallmentPay)return l.AppID.HBInstallmentPay;if(a===zn.UnionPay){if(t)return 42001}else{if(a===zn.FriendPay)return l.AppID.FriendPay;if(a===zn.HBPay)return 322;if(a===zn.DuoDuoPay)return 97;if(a===zn.XianYongHouFu)return"m.hutaojie.com"===i?o?119:r?118:115:o?131:r?130:122;if(a===zn.DuoDuoPayACS)return 135;if(a===zn.CreditCardInstallmentPay)return 45001}return l.AppID.WeChat},Rl=1,Ml=4,Ll=5,Bl=6,Fl=7,Ul=10,Hl=9,Vl=12,zl=13,Wl=1,Ql=2,ql=3,Gl="_oc_",Yl="_oc_goi",Xl="force_share",Jl="duoduo_type",Kl="award_type",Zl="biz_type",$l="pid",ed="cps_sign",td="out_group_order_id",rd="original_front_env",nd="biz_tag",od="phone_card_id",ad=1001,id=1002,sd=1003,cd=1004,ud=1005,ld=1006,dd=1009,pd=1012,md=1013,fd=1016,hd=1017,vd=function(e){var t=e.userAgent,r=e.queries;return Object(_e.getPlatform)(t).isWeChatPlatform&&r&&"miniprogram"===r._x_sid},yd=function(e){var t=e.userAgent,r=e.queries,n=Object(_e.getPlatform)(t).platform,o=vd({userAgent:t,queries:r}),a="qq_wallet"===S()(r,"_x_sid");if(o)return+S()(r,"front_env")||zl;switch(n){case _e.PLATFORM.WeChat:case _e.PLATFORM.WxApp:return Bl;case _e.PLATFORM.PddAndroid:return Ll;case _e.PLATFORM.PddIOS:return Ml;case _e.PLATFORM.QQ:return a?Hl:Fl;case _e.PLATFORM.Weibo:return Ul;case _e.PLATFORM.PDDTinyAndorid:return Vl}return Rl};function gd(e){return{1:"/api/morgan/confirm/render/spike",2:"/api/morgan/confirm/render/pr_spike"}[e]}function bd(e,t){return e[t]||e[Gl+t]}var _d=function(e,t){var r=Object(_e.getPlatform)(t),n=Object(_e.compareVersion)(r.version,"4.2.0")>=0,o=e[Yl],a=e.group_order_id,i=bd(e,Xl)||0,s=o?0:e[Gl+Kl],c=e[Gl+Zl]||0,u=e[Gl+$l]||"",l=e[Gl+ed]||"",d=e[Gl+td]||"",p=e[Gl+rd],m=e[Gl+nd],f=parseInt(bd(e,Jl)||0,10),h=!r.isNativePlatform||n?!!a&&a===o:!!a,v={};switch(f){case Wl:a||(f=0);break;case Ql:case ql:break;default:f=0}return h&&(v[Xl]=i),v[Jl]=f,v[Kl]=s,v[Zl]=c,v[$l]=u,v[ed]=l,v[td]=d,v[rd]=p,m&&(v[nd]=m),v},kd=function(e){var t={};if(!e)return t;var r=new RegExp(Gl);for(var n in e){if(n.startsWith(Gl))t[n.replace(r,"")]=e[n]}var o=e[od];return o&&(t[od]=o),t},Sd=function(e){var t=e.userAgent,r=e.hostname,n=e.queries,o=[],a={},i=vd({userAgent:t,queries:n});for(var s in zn)if(!["AliPayV2","UnionPay"].includes(s)){var c=zn[s],u=Al({paymentType:c,userAgent:t,hostName:r});"WeChat"===s&&i&&(u=+S()(n,"pay_app_id")||317),o.includes(u)||(o.push(u),a[u]=c)}return a};function Id(e){if(e&&e.pdd_native_preload2)try{var t,r=JSON.parse(e.pdd_native_preload2)||{},n=r.am_app_che_alipays,o=r.am_app_che_applepay,a=r.last_payment_type2,i=r.qqUninstall,s=!0,c=!1,u=null;return n&&(t={is_install_alipay:(s=1===parseInt(JSON.parse(n).has_installed))?"1":"0"}),o&&(c=1===parseInt(JSON.parse(o).has_installed)),a&&(u=parseInt(JSON.parse(a))),{lastPaymentType:u,applePayInstalled:c,alipayInstalled:s,payExtendMap:t,qqUninstall:i}}catch(e){Object(P.throwErrorAsync)(new Error("nativeExtra parsing error"))}return null}var wd=function(e,t){var r={},n=e[$l],o=e[ed],a=e[td],i=e[nd];return n&&(r.DUO_DUO_PID=n),o&&(r.cps_sign=o),a&&(r.out_group_order_id=a),i&&(r.biz_tag=i),t&&Object.assign(r,t),0===Object.keys(r||{}).length?null:r};function Pd(){var e=Object(_e.getCurrentPlatform)(),t=e.isNativePlatform,r=e.isPureWeChatPlatform,n={prom:["gp","rpchs","brandvip","jsfdpd","agbc","rlc","mpp","gbc"]};return rp.getInstance().useBestPromotion&&n.prom.push("uupc"),(t||r)&&(n.pay=["wxc","ci","cicn"]),n}function Od(){for(var e=[],t=0;t<arguments.length;t++){var r=parseInt(arguments[t],10)||0;r>0&&e.push(r)}return e.length?Math.min.apply(Math,e):1}var Cd=function(e){return e?{styleType:e.style_type,fontColor:e.font_color,fontSize:e.font_size,bgColor:e.bg_color,dropdownType:e.dropdown_type}:null},xd=function(e){if(!e)return{platformPromotion:null,tradeInInfo:null};var t=e.platform_promotion_consult_vos&&e.platform_promotion_consult_vos.find((function(e){return!S()(e,"extra_display_map.trade_in_info")})),r=e.platform_promotion_consult_vos&&e.platform_promotion_consult_vos.find((function(e){return S()(e,"extra_display_map.trade_in_info")})),n=null;return t?n={promotionUniqueNo:t.promotion_unique_no,promotionIdentityVo:t.promotion_identity_vo,discount:t.discount,notUse:e.not_use,category:e.category_name,displayName:e.display_name,promotionStatus:parseInt(t.promotion_status||0,10)}:e.not_use&&(n={notUse:e.not_use,category:e.category_name,displayName:e.display_name,promotionStatus:oa}),{platformPromotion:n,tradeInInfo:r?Dd(S()(r,"extra_display_map.trade_in_info")):null,tradeInInfoPromotion:r}},Ed=function(e){if(e)return e.map((function(e){if(e)return{labelType:S()(e,"extension_map.label_type"),tagType:e.tag_type,tagDisplayVo:S()(e,"tag_display_vo.display_items")}}))};function Dd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;if("object"===me()(e)&&null!==e)if(e instanceof Array)for(var n in r=[],e)r[n]=Dd(e[n],t);else for(var o in r={},e){var a=o.includes("_")?he()(o):o;t.includes(o)?r[a]=e[o]:r[a]=Dd(e[o],t)}return r}var Nd,Td,jd={processCellStyle:Cd,processGoodsInfo:function(e,t,r,n,o){var a,i,s,c=e.goods_type,u=e.event_type,l=e.need_account,d=function(e){if(!e)return null;var t=S()(e,"css_vo.font_color");return{text:e.title,font_size:e.font_size,font_color:t}};return{name:e.goods_name,goodsId:e.goods_id,beforeNameIcon:e.goods_before_name_icon,beforeNameIconHeight:e.goods_before_name_icon_height,beforeNameIconWidth:e.goods_before_name_icon_width,allowedRegion:(e.allowed_region||[]).join(","),costProvinceCodes:e.cost_province_codes,isCustoms:e.is_customs,goodsType:c,communityGroupBuying:e.community_group_buying,eventType:u,mallId:e.mall_id,costTemplateId:e.cost_template_id,catId:e.cat_id,catId1:e.cat_id1,catId2:e.cat_id2,catId3:e.cat_id3,catId4:e.cat_id4,stockContent:e.stock_content,stockColor:e.stock_color,stockBackground:e.stock_background,goodsNumber:e.goods_number,isInstallment:e.huabei_status||0,goodsLabels:(s=e.labels||[],s.map((function(e){var t=e.css_vo||{};return{type:e.type,title:e.title,content:e.content,clickType:e.click_type||0,fontColor:t.font_color,fontSize:t.font_size}}))),groupId:t.group_id,customerNum:t.customer_num,buyLimit:t.buy_limit,startTime:t.start_time,thumbUrl:r.thumb_url||"",specs:Array.isArray(r.spec)?r.spec:[],specifications:Array.isArray(r.specifications)?r.specifications:[],skuId:r.sku_id,normalPrice:Object(P.priceCent)(r.normal_price),normalPriceForCent:r.normal_price,groupPrice:Object(P.priceCent)(r.group_price),groupPriceForCent:r.group_price,weight:r.weight,wareId:parseInt(r.ware_id,10)?r.ware_id:"",activityId:e.activity_id,activityType:e.activity_type,unitPriceForCent:e.unit_price,unitPrice:Object(P.priceCent)(e.unit_price),unitPriceDisplay:e.goods_unit_labels&&[d(e.goods_unit_labels)],totalPrice:Object(P.priceCent)(e.goods_number*e.unit_price),totalPriceDisplay:null===(a=e.goods_amount_labels)||void 0===a?void 0:a.map(d),needId:!!o,quantity:r.quantity,limitStatus:e.limit_status,limitQuantity:Od(t.order_limit,e.limit_number,r.quantity),limitMessage:e.limit_message,limitNumber:e.limit_number,leastNumber:t.least_number||1,leastQuantity:t.least_number||1,isDepositInflateGoods:e.step_status,isDepositOfHouse:e.deposit_of_house,isSpikeGoods:u===da.SPIKE,isCompensationGoods:c===pa.COMPENSATION,isDepositeGoods:u===da.DEPOSITE_GROUP,isMultiplyGoodsDiscount:u===da.MULTIPLY_GOODS_DISCOUNT,isThreeForTwo:u===da.GET_EXTRA_FOR_FREE,isVirtualGoods:function(e,t,r){return!!r||(t||[pa.MOBILE_DATA,pa.MOBILE_FARE,pa.QQ,pa.GAS_CARD].indexOf(parseInt(e,10))>=0)}(c,l,n),isVirtualReceiveGoods:!!n,isMobile:(i=c,[pa.MOBILE_DATA,pa.MOBILE_FARE].indexOf(parseInt(i,10))>=0),isGasNumber:c===pa.GAS_CARD,isQQNumber:c===pa.QQ,isPhoneNumCard:e.is_phone_num_card,needAccount:l,accountBits:e.account_types,overseaType:e.oversea_type||0}},processStepInfo:function(e){return e?{depositPrice:parseInt(e.deposit_price,10)||0,depositLeftTitle:e.deposit_left_title,depositMiddleDesc:e.deposit_middle_desc,depositRightTitle:e.deposit_right_title,inflatePrice:parseInt(e.inflate_price,10)||0,stepPrice:parseInt(e.step_price,10)||0,stepLeftTitle:e.step_left_title,stepMiddleDesc:e.step_middle_desc,stepRightTitle:e.step_right_title,stepPayStartTime:e.step_pay_start_time}:null},processAddressInfo:function(e){if(!e)return{addressId:0,addressSnapshotId:0,name:"",province:"",city:"",district:"",address:"",mobile:"",provinceId:"",isGoodsSoldHere:!1,addressLabels:[],addressGiftStatus:0};var t=function(e){return(e||[]).map((function(e){if(e&&e.title){var t=e.css_vo||{};return{title:e.title,fontColor:t.font_color,fontSize:t.font_size}}}))};return{addressId:e.address_id||0,addressSnapshotId:e.address_snapshot_id_str||0,name:e.name||"",province:e.province||"",city:e.city||"",cityId:e.city_id||"",district:e.district||"",districtId:e.district_id||"",address:e.address||"",mobile:e.mobile||"",provinceId:e.province_id||"",isGoodsSoldHere:e.is_goods_sold_here||!1,addressLabels:t(e.labels)||[],unpayAddressLabels:t(e.unpay_labels)||[],addressGiftStatus:parseInt(e.address_gift_status,10)||0}},processVirtualReceiveMethodVO:function(e){return e?{type:e.type,isMobile:["USER_CONTACT_MOBILE","USER_CHARGE_MOBILE"].includes(e.auto_complete_type),label:e.label,autoCompleteType:e.auto_complete_type,placeholder:e.placeholder,value:e.value,orderKey:e.order_key,icon:e.icon,validateRules:e.validate_rules,validateFailedText:e.validate_failed_text,verifyAccountTypes:e.verify_account_types}:null},processMallInfo:function(e){if(!e)return null;var t=(e.labels||[]).filter((function(e){return!!e})).map((function(e){return{height:e.label_height,width:e.label_width,url:e.label_url}}));return{id:e.id,name:e.name||"",logo:e.logo||"",mallOrderPrice:e.mall_order_price||null,canCompensate:e.can_compensate||!1,labels:t}},processInstallmentList:function(e){var t=[];return e&&e[0]&&e[0].term_list&&e[0].term_list.map((function(e){t.push({term:e.term,commissionType:e.commission_type,rate:e.rate,termPrice:e.term_price,defaultSelected:e.default_selected})})),t},processPriceInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{orderPrice:e,mallPromotionPrice:t,platformPromotionPrice:r}},processIdCardInfo:function(e){return e?{idCardName:e.id_card_name,idCardNo:e.id_card_no,idCardType:e.id_card_type,snapshotId:e.card_snapshot_id,drugInfoSnapshotId:e.epidemic_drug_info_snapshot_id,isDrugInfo:1==+e.id_card_type,authTitle:e.auth_title,authTip:e.auth_tip,authMainTitleTip:e.auth_main_title_tip,authTipColor:e.auth_tip_color,authTitleTip:e.auth_title_tip,authNameTip:e.auth_name_tip,authIdTip:e.auth_id_tip,extendMap:e.extend_map,sceneCode:e.scene_code,hideEditBtn:e.hide_edit_btn,hideEditBtnAfterOrder:e.hide_edit_btn_after_order,skipVerify:e.skip_verify,isFaceCert:e.is_face_cert,isFaceGoods:e.is_face_goods}:null},processPromotionInfo:function(e){var t,r,n,o=null,a=null;if(!e)return{shopPromotion:a,platformPromotion:o};var i,s,c=e.deposit_coupon_vo,u=e.platform_promotions_consult_vo,l=e.platform_promotion_vo,d=S()(e,"total_discount_display_vo.display_items"),p=S()(e,"total_discount_extra_display_vo.display_items"),m=(i=S()(e,"total_promotions_consult_vo"))?{clickable:S()(i,"clickable"),categoryName:S()(i,"category_name"),categoryDisplay:S()(i,"category_display_vo.display_items"),discountPayChannel:S()(i,"discount_pay_channel"),discountPayCategoryDisplay:S()(i,"discount_pay_category_display_vo.display_items"),floatTitleDisplay:S()(i,"float_title_display_vo.display_items"),floatCategoryDisplay:S()(i,"float_category_display_vo.display_items"),defaultCategoryDisplay:S()(i,"default_category_display_vo.display_items"),retrievePromotion:S()(i,"retrieve_promotion_vo"),switchPaymentMethodToast:S()(i,"switch_payment_method_toast_display_vo.display_items[0].text"),platformRetrievePromotion:S()(i,"platform_retrieve_promotion_vo")}:null,f=!!S()(e,"discount_tag_display_vos"),h=Ed(S()(e,"discount_tag_display_vos")),v=S()(e,"total_promotions_consult_vo.optional_shop_promotion_consult_vo"),y=S()(v,"enable_merchant_promotion_option"),g=S()(v,"merchant_optional_promotion_price"),b=S()(v,"optional_shops_promotions_vos.0"),_=S()(v,"optional_clickable"),k=S()(e,"total_promotions_consult_vo.clickable"),I=b?{mallId:S()(b,"mall_id"),promotionStatus:S()(b,"promotion_status"),displayName:S()(b,"display_name.display_items"),category_name:S()(b,"category_name"),batchSn:S()(b,"shop_promotion_consult_vos.0.promotion_identity_vo.extension.batch_sn")}:null;o=((s=l)?{promotionUniqueNo:s.promotion_unique_no,promotionIdentityVo:s.promotion_identity_vo,discount:s.discount,notUse:s.not_use,category:s.category_name,displayName:s.display_name,cellStyle:Cd(s.cell_style),promotionStatus:parseInt(s.promotion_status||0,10),extension:s.extension}:null)||xd(u).platformPromotion,a=S()(e,"shop_promotion_vos.0")?{mallId:S()(e,"shop_promotion_vos.0.mall_id"),notUse:S()(e,"shop_promotion_vos.0.not_use"),promotionStatus:S()(e,"shop_promotion_vos.0.promotion_status"),displayName:S()(e,"shop_promotion_vos.0.display_name.display_items"),categoryName:S()(e,"shop_promotion_vos.0.category_name"),dropdownType:S()(e,"shop_promotion_vos.0.dropdown_type"),promotionUniqueNo:S()(e,"shop_promotion_vos.0.shop_promotion_consult_vos.0.promotion_unique_no"),promotionIdentityVo:S()(e,"shop_promotion_vos.0.shop_promotion_consult_vos.0.promotion_identity_vo")}:null,r=S()(m,"retrievePromotion")?{promotionUniqueNo:S()(m,"retrievePromotion.promotion_unique_no"),promotionIdentityVo:S()(m,"retrievePromotion.promotion_identity_vo"),mallId:S()(m,"retrievePromotion.mall_id"),promotionStatus:S()(m,"retrievePromotion.promotion_status")}:null,n=S()(m,"platformRetrievePromotion")?{promotionUniqueNo:S()(m,"platformRetrievePromotion.promotion_unique_no"),promotionIdentityVo:S()(m,"platformRetrievePromotion.promotion_identity_vo"),mallId:S()(m,"platformRetrievePromotion.mall_id"),promotionStatus:S()(m,"platformRetrievePromotion.promotion_status")}:null,t=c?{eventId:c.event_id}:null;var w=e.goods_promotions_vos,P=!Vn()(w)&&w.reduce((function(e,t){var r=!Vn()(t.goods_promotion_consult_vos)&&t.goods_promotion_consult_vos.reduce((function(e,t){return e.concat(t.promotion_identity_vo)}),[]);if(r)return e.concat(r)}),[]),O=Dd(S()(e,"platform_promotion_vo.extra_display_map.trade_in_info"))||xd(u).tradeInInfo;return{platformPromotion:o,platformPromotionVoList:u,tradeInInfoPromotion:xd(u).tradeInInfoPromotion,shopPromotion:a,retrievePromotion:r,platformRetrievePromotion:n,totalDiscountDisplay:d,afterCouponUnitPriceDisplay:p,depositCoupon:t,totalPromotionClickable:k,totalPromotionsConsult:m,enablePromotionOption:y,optionalPromotionPrice:g,optionalClickable:_,optionalShopsPromotion:I,goodsPromotionList:P,tradeInInfo:O,isNewPriceArea:f,discountTagDisplayVos:h}},processShippingInfo:function(e){return e?{title:e.title||"",cost:e.shipping_price||0,shippingPrice:Object(P.priceCent)(e.shipping_price)}:{title:"",cost:0,shippingPrice:"0"}},processAdditionalShipping:function(e){return e?{additionalSrvItems:e.additional_srv_items||[]}:{additionalSrvItems:[]}},processPayInfo:function(e){if(!e||!e.pay_channel_list)return[];var t={},r=[];return e.pay_channel_list.filter((function(e){return Fn.has(e.channel)})).forEach((function(e){var n,o,a=e.sub_pay_content_vo||{},i=a.css_vo||{},s=e.pay_content_vo||{},c=s.css_vo||{},u=Dd(e.credit_installment_extra_data_vo,["extra","sku_pay_description"]);t[e.channel]?t[e.channel].appIds.push(e.app_id):(t[e.channel]={channelName:e.channel,allPay:e.all_pay,rank:e.rank,name:e.pay_content||s.content,icon:S()(e,"pay_content_vo.icon"),nameStyle:{fontColor:c.font_color,fontSize:c.font_size},hint:a.content||e.pay_sub_content,hintIcon:a.icon,hintStyle:{fontColor:i.font_color,fontSize:i.font_size},appIds:[e.app_id],display:e.display,disabled:!e.enable,disableContent:null==e||null===(n=e.disable_content_vo)||void 0===n?void 0:n.content,navToApp:e.nav_to_app,signed:e.signed,toastStressOnFreePay:null==e||null===(o=e.ext_info)||void 0===o?void 0:o.toast_stress_on_free_pay,selected:!1,expanding:e.expanding,defaultSelected:e.default_selected,payButtonContent:e.pay_button_content,skuPayDescription:e.sku_pay_description,extInfo:e.ext_info,creditCardVo:u},r.push(t[e.channel]))})),r},processPayChannelGroups:function(e){return(null==e?void 0:e.length)>0?Dd(e):null},processOrderInfo:function(e){return e?{orderPrice:e.order_price||null,payPrice:e.pay_price||0,payTitle:e.pay_title||"实付款",payContent:e.pay_content||"",couponPrice:e.coupon_price||0,forceNewLine:e.new_line_content}:{orderPrice:0,payPrice:0,payTitle:"实付款",payContent:"",couponPrice:0,forceNewLine:!1}},processDeliveryInfo:function(e){if(!e)return null;var t={clickType:e.click_type,displayContent:e.display_content,displayTitle:e.display_title,srvShortTag:e.srv_short_tag};return t.templateList=(e.template_result_list||[]).map((function(e){return(e=e||[]).selected&&(t.selectedServiceTransparentField=e.service_transparent_field),{srvCopyWrite:e.srv_copy_write,selected:e.selected,srvShortTag:e.srv_short_tag,serviceTransparentField:e.service_transparent_field}})),t},processCellBarVo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=S()(e,"protocol_title")||"",r=S()(e,"protocol_url")||"",n=S()(e,"protocol_v2")||null;return!n&&t&&r&&(n=[{color:"#9C9C9C",title:"同意",url:null},{color:"#58595B",title:"《".concat(t,"》"),url:r}]),{title:S()(e,"title")||"",content:S()(e,"content")||"",richContents:S()(e,"rich_contents")||null,unSelectedText:S()(e,"un_selected_text")||"",protocolTitle:t,protocolUrl:r,protocolV2:n}},processFastReturn:function(e){if(1==+S()(e,"fast_return"))return S()(e,"fast_return_url")||"grp_lite_group.html"},processShipAdditionalVo:function(e){return e?{hasShipmentStripe:!(!e.content||!e.title),content:e.content,title:e.title,switchStatus:e.switch_status}:{hasShipmentStripe:!1}},processRetainWindowExtend:function(e){if(e)return{displayType:(e=e||{}).display_type,extendType:e.retain_window_extend_type,contents:e.contents,pictures:S()(e,"pictures.picture_url")||[],picWidth:S()(e,"pictures.width")||0,picHeight:S()(e,"pictures.height")||0}},processShopFavCouponPop:function(e){if(e)return{optimalPpayText:S()(e,"optimal_pay_text"),subOptimalPayText:S()(e,"sub_optimal_pay_text")}}},Ad=function(){var e=c()(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn();case 2:return n=e.sent,t.anti_content=n,e.abrupt("return",Fe({method:Re.POST,url:r||"api/morgan-quick/confirm/render",data:t}).then((function(e){e=e||{};var t=Object(P.priceCent)(S()(e,"option_map.mass_subsidy"));return{serverTime:e.server_time,addressInfo:jd.processAddressInfo(e.address_vo),goodsInfo:Object.assign(jd.processGoodsInfo(e.goods_vo,e.group_vo,e.sku_vo,e.virtual_receive_method_vo,e.id_card_vo),{massSubsidy:t}),stepInfo:jd.processStepInfo(e.step_vo),idCardInfo:jd.processIdCardInfo(e.id_card_vo),mallInfo:jd.processMallInfo(e.mall_vo),installmentList:jd.processInstallmentList(e.installment_list),promotionInfo:jd.processPromotionInfo(e.promotion_vo),shippingInfo:jd.processShippingInfo(e.shipping_vo),additionalShippingInfo:jd.processAdditionalShipping(e.additional_display_vo),priceInfo:jd.processPriceInfo(e.order_price,e.merchant_promotion_price,e.platform_promotion_price),payChannelList:jd.processPayInfo(e.pay_vo),payChannelGroups:jd.processPayChannelGroups(e.pay_vo.group_status_list),payTicket:S()(e,"pay_vo.pay_ticket"),piccImageUrl:e.pay_vo&&e.pay_vo.picc_image_url,orderInfo:jd.processOrderInfo(e.order_vo),xyhfOrderInfo:jd.processOrderInfo(e.credit_score_final_pay_order_vo),deliveryInfo:jd.processDeliveryInfo(e.service_vo),returnDialogVo:e.return_dialog_vo||null,finalPayVo:e.credit_score_final_pay_dialog_vo||null,morganDisableBackEvent:+S()(e,"option_map.disable_back_popup")||0,attrMap:(e.pay_vo||{}).attr_map,orderAmount:e.pay_price,orderServicePath:e.order_service_path||"",confirmMessage:e.confirm_message,extendMap:e.extend_map,promotionExtendMap:e.promotion_extend_map,addressRenderExtendMap:e.address_render_extend_map,fastReturn:jd.processFastReturn(S()(e,"option_map")),noAddressDialogTitle:S()(e,"option_map.render_no_address_dialog_title",null),noAddressAutoPopup:S()(e,"option_map.render_no_address",null),orderRefresh:1===parseInt(S()(e,"option_map.order_refresh"),10),cureNCov:parseInt(S()(e,"option_map.cure_ncov"),10),addrGiftEntryStatus:parseInt(S()(e,"option_map.addr_list_show_gift_entry_status"),10),receiveMethodNone:S()(e,"option_map.receive_method_none"),cellBarVo:jd.processCellBarVo(e.cell_bar_vo),shipAdditionalVo:jd.processShipAdditionalVo(e.ship_additional_vo),qiongqiVo:e.qiongqi_vo,retainWindowVo:jd.processRetainWindowExtend(e.retain_window_extend_vo),virtualReceiveMethodInfo:jd.processVirtualReceiveMethodVO(e.virtual_receive_method_vo),shopFavCouponPop:jd.processShopFavCouponPop(e.shop_fav_coupon_pop_window),transferMap:S()(e,"transfer_map")}})));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Rd=function(){var e=c()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fe({method:Re.POST,url:"api/morgan/order/refresh",data:t,useNativeAntiToken:!0}).then((function(e){return{payChannelList:jd.processPayInfo(e.pay_vo),confirmMessage:e.confirm_message}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Md=(Td=function(){function e(){return l()(this,e),this.$mobileNumberInput=void 0,this.mobileNumber="",this.mobileOwner="",e.instance||(e.instance=this),e.instance}return p()(e,[{key:"doInputBlur",value:function(){this.$mobileNumberInput&&this.$mobileNumberInput.blur()}},{key:"doInputFocus",value:function(){this.$mobileNumberInput&&this.$mobileNumberInput.focus()}},{key:"updateMobileInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.mobileNumber=("".concat(e)||"").trim(),this.mobileOwner=t}}],[{key:"getInstance",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),Nd=Td,Xe()(Nd.prototype,"doInputBlur",[$e],Object.getOwnPropertyDescriptor(Nd.prototype,"doInputBlur"),Nd.prototype),Xe()(Nd.prototype,"doInputFocus",[$e],Object.getOwnPropertyDescriptor(Nd.prototype,"doInputFocus"),Nd.prototype),Xe()(Nd.prototype,"updateMobileInfo",[$e],Object.getOwnPropertyDescriptor(Nd.prototype,"updateMobileInfo"),Nd.prototype),Nd),Ld=Md.getInstance(),Bd=le.default.getInstance(),Fd=function(e){var t=e.ocData.selectedChannel;if((t&&t.paymentType)===zn.CreditCardInstallmentPay&&!S()(t,"creditCardVo.recommendCardVo.bindId"))return{success:!1,errMsg:"请添加分期信用卡",shouldShowPaymentList:!0};return{success:!0}},Ud=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ocData,r=void 0===t?{}:t,n=e.ocManager,o=r.selectedChannel,a=o&&o.paymentType,i=r.goodsInfo,s=r.addressInfo,c=r.idCardInfo,u=r.virtualReceiveMethodInfo,l=r.receiveMethodNone,d=r.cellBarVo,p=d||{},m=p.protocolV2,f=p.unSelectedText;if(m&&!n.isSelectedAgreement)return{errMsg:f||"请先同意协议"};if(!l&&!i.isVirtualGoods&&parseInt(s.addressId||0)<=0&&!s.addressGiftStatus)return n.showEditAddress&&n.showEditAddress(),!1;if(!a)return{errMsg:"操作太快，请重试"};var h="";if(u){if(!(h=Ld.mobileNumber))return{errMsg:"请输入账号"};var v=u.validateRules,y=u.validateFailedText;if(v&&v.length>0){var g=function(){return v.some((function(e){return new RegExp(e).test(h)}))};if(!g()&&y)return{errMsg:y}}}var b=i.needId&&c&&!c.isDrugInfo&&(!c||!c.idCardNo||!c.idCardName)&&!c.skipVerify&&(![3,4].includes(+i.goodsType)||a!==zn.FriendPay),_=c&&c.isDrugInfo&&!c.drugInfoSnapshotId;return b?(n.showIdcardForm&&n.showIdcardForm(),!1):_?(n.showPurchaseInfo&&n.showPurchaseInfo(),!1):c&&c.isDrugInfo&&!c.isTemperatureSaved?(n.showTemperaturePicker&&n.showTemperaturePicker(),!1):{success:!0}},Hd=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_,k,I,w,P,O,C,x,E,D,N,T,j,A,R,M,L,B,F,U,H,V,z,W,Q,q,G,Y,X,J,K,Z,$,ee;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ocData,n=void 0===r?{}:r,o=t.groupType,a=t.orderExtraType,s=t.groupOrderId,c=void 0===s?null:s,u=t.activityParams,l=void 0===u?{}:u,d=t.ocManager,p=n.selectedChannel,m=p&&p.paymentType,f=n.goodsInfo,h=n.addressInfo,v=n.idCardInfo,y=n.promotionInfo,g=n.extendMap,b=n.installmentList,_=n.virtualReceiveMethodInfo,k=f.goodsId,I=function(e,t){gl({errorCode:e,data:t||{},handleUnclassifiedErrors:!0,ocData:n})},w=null,P="",O="",_&&(O=Ld.mobileNumber,P=Ld.mobileOwner||""),C=f.goodsNumber,x=Object(_e.getCurrentPlatform)(),e.next=14,Cn();case 14:if(E=e.sent,D={address_id:h.addressId,address_snapshot_id:h.addressSnapshotId,goods:[{sku_id:f.skuId,sku_number:C,goods_id:k}],group_id:f.groupId.toString(),anti_content:E,pay_app_id:Al({paymentType:m}),is_app:x.isNativePlatform||x.isTinyNativePlatform?"1":"0",version:1,page_id:Bd.getPageID()},d.pageFrom&&(D.page_from=d.pageFrom),m===zn.HBInstallmentPay&&(N=b.findIndex((function(e){return e.defaultSelected})),T=N>=0?N:0,j=p.termIndex||T,w=b[j].term,D.term=w),m!==zn.CreditCardInstallmentPay){e.next=49;break}if(p.creditCardVo){e.next=22;break}return Object(ce.info)("当前支付方式暂不可用，请更换其他支付方式"),e.abrupt("return");case 22:if(A=S()(p,"creditCardVo.recommendCardVo.bindId")){e.next=37;break}return R=S()(p,"creditCardVo.extra"),e.prev=25,e.next=28,Object(ke.invokeBridgeCallNativeFun)("JSDuoduoWallet","selectCreditCard",{amount:n.orderAmount,selected_bind_id:null,extra:R});case 28:M=e.sent,L=S()(M,"selected_card.bind_id",null),B=1==+M.result_type,d.changeBindId({selectedBindId:null,newBindId:L,isNewlyAdded:B}),e.next=36;break;case 34:e.prev=34,e.t0=e.catch(25);case 36:return e.abrupt("return");case 37:if(F=p.creditCardTermIndex,U=S()(p,"creditCardVo.recommendCardVo.creditInstallments")||[],H=U.findIndex((function(e){return!!e.selected})),F>=0||(F=H),F>=0||(F=0),V=U[F],!((z=V?V.installmentNum:-1)<0)){e.next=47;break}return ft({title:"请选择信用卡分期期数",confirmButtonLabel:"我知道了"}),e.abrupt("return");case 47:D.term=z,D.bindId=A;case 49:return c&&(D.group_order_id=c),W=y.platformPromotion,Q=y.platformPromotionVoList,q=S()(y,"tradeInInfoPromotion"),G=y.shopPromotion,Y=y.goodsPromotionList,D.promotion_union_vo={},G&&G.promotionStatus===oa&&!G.notUse&&(G.promotionIdentityVo.mall_id=G.mallId,D.promotion_union_vo.single_promotion_list=[G.promotionIdentityVo]),Q?(W&&W.promotionStatus===oa&&!W.notUse&&(D.promotion_union_vo.use_platform_promotion_list=[W.promotionIdentityVo]),q&&q.promotion_status===oa&&(X=q.promotion_identity_vo,D.promotion_union_vo.use_platform_promotion_list?D.promotion_union_vo.use_platform_promotion_list.push(X):D.promotion_union_vo.use_platform_promotion_list=[X])):W&&W.promotionStatus===oa&&!W.notUse&&(D.promotion_union_vo.use_platform_promotion_vo=W.promotionIdentityVo),Vn()(Y)||(D.promotion_union_vo.goods_promotion_list=Y),_&&((J=_.orderKey)&&(D[J]=O),D.mobile_owner=P,D.address_id=0),f.activityId&&(D.activity_id=f.activityId),(K=S()(n,"deliveryInfo.selectedServiceTransparentField"))&&(D.service_transparent_field=K),Object.assign(D,l),D[Jl]&&(D.type=D[Jl],delete D[Jl]),Z=wd(l,g),f.needId&&v.isDrugInfo&&(Z.epidemic_drug_info_snapshot_id=v.drugInfoSnapshotId),v&&!v.isFaceCert&&v.isFaceGoods&&Nl()&&(Z.id_card_snapshot_id=v.snapshotId),d.recordId&&(Q?($=S()(q,"promotion_identity_vo.extension")||{},Z.trade_in_evaluation_id=$.trade_in_evaluation_id):(ee=S()(n,"promotionInfo.platformPromotion.promotionIdentityVo.extension")||{},Z.trade_in_evaluation_id=ee.trade_in_evaluation_id)),delete D[$l],delete D[ed],delete D[td],delete D[nd],D.attribute_fields=Z,D.source_channel=d.sourceChannel,D.source_type=0,1===o?D.source_type=5:2===o?D.source_type=6:3===o&&(D.source_type=2),1==+a&&(D.source_type=7),d.sourceType&&(D.source_type=d.sourceType),e.abrupt("return",{postParams:D,ocHandleError:I});case 80:case"end":return e.stop()}}),e,null,[[25,34]])})));return function(t){return e.apply(this,arguments)}}(),Vd=Hd,zd=function(e){var t=new Promise((function(e,t){setTimeout((function(){!Object(_e.getCurrentPlatform)().isNativePlatform&&t({isTimeout:!0})}),8e3)}));return Promise.race([t,e])};function Wd(e){return Qd.apply(this,arguments)}function Qd(){return(Qd=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p,m,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.params,e.prev=1,e.next=4,zd(Fe({method:"POST",url:r,data:n}));case 4:return o=e.sent,a=o.order_sn,s=o.fp_id,c=void 0===s?null:s,u=o.order_amount,l=o.discount_amount,d=o.prepay_url,e.abrupt("return",{order_sn:a,fp_id:c,order_amount:u,discount_amount:l,prepay_url:d});case 9:if(e.prev=9,e.t0=e.catch(1),!e.t0.isTimeout){e.next=15;break}throw e.t0;case 15:return!(p=e.t0.errorCode)&&e.t0.response&&(p=e.t0.response.status),m=e.t0.response||{},f=m.data,e.abrupt("return",Promise.reject({errorCode:p,data:f}));case 19:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var qd,Gd,Yd=le.default.getInstance(),Xd=function(){var e=c()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fe({method:"POST",url:"api/hermione/order/pay/later/status",data:{evaluation_id:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jd=function(){var e=c()(i.a.mark((function e(t){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e,o){var a=function(){return n+=1,Xd(t).then((function(t){t&&t.success&&t.result&&2===t.result.pay_later_order_status&&(clearInterval(r),e()),t&&t.success&&t.result&&3===t.result.pay_later_order_status&&(clearInterval(r),o())})).catch((function(e){clearInterval(r),o(e)}))};a(),r=setInterval((function(){n<=6?a():(clearInterval(r),o())}),800)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Kd(e){return Zd.apply(this,arguments)}function Zd(){return(Zd=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ocData,n=S()(r,"goodsInfo.skuId"),o=S()(r,"goodsInfo.mallId"),s=S()(r,"promotionInfo.platformPromotionVoList"),c=S()(r,"promotionInfo.tradeInInfoPromotion"),a=s?S()(c,"promotion_identity_vo.extension")||{}:S()(r,"promotionInfo.platformPromotion.promotionIdentityVo.extension")||{},u={page_sn:Yd.getPageSN()+"",relate_goods_sku_id:n,relate_mall_id:o,evaluation_id:a.trade_in_evaluation_id,evaluation_sign:a.trade_in_evaluation_sign},e.next=9,Fe({method:"POST",url:"api/hermione/order/pay/later/create",data:u});case 9:return l=e.sent,d=S()(l,"result.evaluation_id"),e.next=13,Jd(d);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $d(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ep(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$d(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tp=le.default.getInstance(),rp=(Gd=function(){function e(){return l()(this,e),this.needReload=!1,this.frontEnv=1,this.frontVersion=9,this.activityParams=void 0,this.goodsId=void 0,this.groupType=void 0,this.orderExtraType=void 0,this.groupOrderId=void 0,this.groupId=void 0,this.isApp=void 0,this.extendMap=void 0,this.promotionExtendMap=void 0,this.appIdSet=void 0,this.appPaymentEnv=void 0,this.promotionVo=void 0,this.sourceType=void 0,this.pageFrom=void 0,this.updateOCDataFun=null,this.ocData={},this.isSelectedAgreement=!0,this.customMorganUrl=null,this.prepayUrl=null,this.autoErrSamping=null,this.morganType=null,this.morganRequestId=0,this.recordId=void 0,this.addressId=void 0,this.selectServiceItemIdList=void 0,e.instance||(e.instance=this),e.instance}var t,r,n,o,a,s,u,d,m;return p()(e,[{key:"initShowEditAddress",value:function(e){this.showEditAddress=e}},{key:"initShowIdcardForm",value:function(e){this.showIdcardForm=e}},{key:"initShowPurchaseInfo",value:function(e){this.showPurchaseInfo=e}},{key:"initShowTemperaturePicker",value:function(e){this.showTemperaturePicker=e}},{key:"init",value:function(){var e,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.updateOCDataFun,o=r.setMorganFetching,a=r.setMorganError,i=r.getSelectedSkuId,s=r.groupType,c=r.orderExtraType,u=r.goods,l=r.groupId,d=r.groupOrderId,p=r.communityId,m=r.ignoreGroupOrderIdInUrl,f=r.sourceType,h=r.ocExtend,v=r.hideSkuSelect,y=r.paySuccessCb,g=r.sourceChannel,b=r.frontEnv,_=r.pageFrom;this.updateOCDataFun=n,this.getSelectedSkuId=i,this.setMorganFetching=o,this.setMorganError=a;var k=Object(ha.createClientContext)(),I=k.query,w=k.userAgent,O=Object(_e.getPlatform)(w),C=O.isNativePlatform,x=O.isTinyNativePlatform;this.forwardHideSkuSelect=function(){t.needReload=!1,v({hideAction:"beforeForward"})},this.paySuccessCb=y,this.isApp=C||x?1:0,this.frontEnv=b||yd(k),this.activityParams=_d(p||m?ep(ep({},I),{},{group_order_id:null}):I,w),this.goodsId=S()(u,"goodsID"),this.switchToWechatIfSignXyhfFailed=S()(u,"isAbSwitchToWechatIfSignXyhfFailed"),this.enablePaymentListV2=C,this.groupType=s,this.orderExtraType=c,this.groupOrderId=d,this.communityId=p,this.sourceType=f,this.pageFrom=_||parseInt(I.page_from,10)||0,this.groupId=l||u.groupTypes[1].groupID,this.extendMap=kd(I),p&&(this.extendMap.community_id=p),this.appIdSet=Sd(k),this.appPaymentEnv=Id(I),this.sourceChannel=g>=0?g:13,this.recordId=void 0,this.hasAddressLine=u.hasAddressLine,this.useBestPromotion=null==u?void 0:u.useBestPromotion,(null===(e=Object(P.parseUrlQuery)(location.href))||void 0===e?void 0:e.__disable_best_promotion)&&(this.useBestPromotion=!1);var E=u.destinationUrl;if(E){var D=Object(P.parseUrlQuery)(E),N=D||{},T=N.morgan_type;this.customMorganUrl=T?gd(T):null,this.morganType=T;var j=kd(D);this.extendMap=Object.assign(this.extendMap,j)}if(h){var A=kd(h||{});this.extendMap=Object.assign(this.extendMap,A)}null==g&&Object(P.throwErrorAsync)(new Error("empty_source_channel"))}},{key:"updateOCData",value:(m=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(this.setMorganError(!1),!this.ocData.selectedChannel){e.next=23;break}if(!(null==(r=(t.payChannelList||[]).find((function(e){return e.channelName===b.ocData.selectedChannel.channelName})))?void 0:r.disabled)){e.next=14;break}if(n=t.payChannelList.some((function(e){return e.defaultSelected})),t.payChannelList.forEach((function(e,r){n&&e.defaultSelected?(e.selected=!0,t.selectedChannel=e):n||0!==r?e.selected=!1:(e.selected=!0,t.selectedChannel=e)})),!t.selectedChannel){e.next=12;break}return e.next=11,Ro(t.selectedChannel.channelName);case 11:t.selectedChannel.paymentType=e.sent;case 12:e.next=23;break;case 14:if(t.selectedChannel||!this.ocData.selectedChannel){e.next=23;break}if(o=this.ocData.selectedChannel,a=t.payChannelList.some((function(e){return e.channelName===o.channelName})),s=t.payChannelList.some((function(e){return e.defaultSelected})),t.payChannelList.forEach((function(e,r){a&&e.channelName===o.channelName?(e.selected=!0,t.selectedChannel=e):a?e.selected=!1:s&&e.defaultSelected?(e.selected=!0,t.selectedChannel=e):s||0!==r||(e.selected=!0,t.selectedChannel=e)})),!t.selectedChannel){e.next=23;break}return e.next=22,Ro(t.selectedChannel.channelName);case 22:t.selectedChannel.paymentType=e.sent;case 23:c=this.ocData.payChannelList&&this.ocData.payChannelList.find((function(e){return e.channelName===Bn.CREDIT_CARD})),u=S()(c,"creditCardVo.recommendCardVo.bindId"),l=t.payChannelList&&t.payChannelList.find((function(e){return e.channelName===Bn.CREDIT_CARD})),d=S()(l,"creditCardVo.recommendCardVo.bindId"),c&&l&&d!==u&&(p=S()(c,"creditCardVo.recommendCardVo.creditInstallments")||[],m=S()(l,"creditCardVo.recommendCardVo.creditInstallments")||[],(f=p[c.creditCardTermIndex])&&(h=f.installmentNum,v=m.findIndex((function(e){return+e.installmentNum===h})),l.creditCardTermIndex=v)),y=this.ocData.idCardInfo||{},g=y.isTemperatureSaved,t.idCardInfo&&(t.idCardInfo.isTemperatureSaved=g),S()(t,"addressInfo.addressId")&&(this.addressId=S()(t,"addressInfo.addressId")),this.updateOCDataFun&&this.updateOCDataFun(t),this.ocData=t;case 33:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"clearTradeInfo",value:function(){var e=this.ocData;S()(e,"promotionInfo.tradeInInfo")&&(e.promotionInfo.tradeInInfo=null,this.updateOCData(e))}},{key:"updateAddressInfo",value:function(e){this.refresh({address_id:e.addressId})}},{key:"selectDeliveryItem",value:function(e){var t=e.serviceTransparentField,r=this.getSelectedSkuId&&this.getSelectedSkuId();return this.refresh({service_transparent_field:t,front_action:r?pd:md})}},{key:"selectShippingItem",value:function(e){var t=e.item_id,r=this.getSelectedSkuId&&this.getSelectedSkuId();return this.selectServiceItemIdList=[t],this.refresh({select_service_item_id_list:[t],front_action:r?pd:md})}},{key:"getWxscoreSignScene",value:function(){var e=Object(P.parseQuery)(location.search),t="210"===e.page_from,r=e.wxscore_sign_scene;return t?r?+r:16:this.enablePaymentListV2?33:19}},{key:"render",value:(d=c()(i.a.mark((function e(t,r){var n,o,a,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?Object.assign(this.originParams,t):this.originParams,r&&(this.recordId=r,this.sourceChannel=41,n.source_channel=41,n.extend_map?n.extend_map.trade_in_record_id=r:n.extend_map={trade_in_record_id:r}),e.prev=2,o=new Promise((function(e,t){setTimeout((function(){t({errorCode:"timeout"})}),2e3)})),e.next=6,Promise.race([Ad(n,this.customMorganUrl),o]);case 6:if(!(a=e.sent)){e.next=14;break}return this.extendMap=a.extendMap,this.promotionExtendMap=a.promotionExtendMap,this.transferMap=a.transferMap,this.updateOCData(a),s=a.confirmMessage,e.abrupt("return",s);case 14:e.next=23;break;case 16:e.prev=16,e.t0=e.catch(2),c=e.t0.errorCode,u=e.t0.response,l=S()(u,"data.error_msg"),r&&this.clearTradeInfo(),Object(P.throwErrorAsync)(new Error("sku_order_render"),{error_message:l,error_code:c}),this.communityId&&(this.updateOCDataFun&&this.updateOCDataFun(null),this.ocData={});case 23:case"end":return e.stop()}}),e,this,[[2,16]])}))),function(e,t){return d.apply(this,arguments)})},{key:"refresh",value:(u=c()(i.a.mark((function e(t,r){var n,o,a,s,c,u,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Object.assign(this.originParams,t):this.originParams).refresh=!0,r&&this.setMorganFetching(!0),e.prev=3,this.morganRequestId++,o=this.morganRequestId,e.next=8,Ad(n,this.customMorganUrl);case 8:if(a=e.sent,o!==this.morganRequestId||!a){e.next=17;break}return this.extendMap=a.extendMap,this.promotionExtendMap=a.promotionExtendMap,this.transferMap=a.transferMap,(s=a.confirmMessage)&&Te(s),this.updateOCData(a),e.abrupt("return",{success:!0});case 17:e.next=31;break;case 19:if(e.prev=19,e.t0=e.catch(3),c=e.t0.errorCode,u=e.t0.response,l=(u||{}).data,d=S()(l,"error_payload"),S()(d,"not_degrade_sku")||this.setMorganError(!0),!d||!d.view_style){e.next=29;break}return el(d),e.abrupt("return");case 29:p=S()(u,"data.error_msg"),Object(P.throwErrorAsync)(new Error("sku_order_refresh"),{error_message:p,error_code:c});case 31:return e.prev=31,r&&this.setMorganFetching(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[3,19,31,34]])}))),function(e,t){return u.apply(this,arguments)})},{key:"refreshPayVoAfterOrder",value:(s=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={confirm_display_type:1,order_sn:this.ocData.orderSn,front_version:this.frontVersion,front_env:this.frontEnv,refresh_pay_vo:!0,extend_map:this.extendMap,pay_extend_map:t.pay_extend_map,front_supports:Pd(),service_transparent_field:S()(this.ocData,"deliveryInfo.selectedServiceTransparentField"),source_channel:this.sourceChannel,transfer_map:this.transferMap},e.prev=1,e.next=4,Rd(r);case 4:n=e.sent,o=_()(this.ocData),a=o.payChannelList.find((function(e){return e.channelName===Bn.CREDIT_CARD})),s=n.payChannelList.find((function(e){return e.channelName===Bn.CREDIT_CARD})),a.creditCardVo=s?s.creditCardVo:null,(c=n.confirmMessage)&&Te(c),this.updateOCData(o),e.next=22;break;case 14:e.prev=14,e.t0=e.catch(1),u=e.t0.errorCode,l=e.t0.response,d=S()(l,"data.error_msg"),p=d,u&&(d=d||Vc.getMsgFromCode(u)),Te(d||"网络不稳定，请稍后再试"),Object(P.throwErrorAsync)(new Error("sku_refresh_after_order"),{error_message:p,error_code:u});case 22:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return s.apply(this,arguments)})},{key:"changeBindId",value:(a=c()(i.a.mark((function e(t){var r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.selectedBindId,n=t.newBindId,o=t.isNewlyAdded,a=ep({},S()(this.appPaymentEnv,"payExtendMap")),o?(a.selected_bind_id=r,a.new_card_bind_id=n):a.selected_bind_id=n,this.ocData.orderSn?this.refreshPayVoAfterOrder({pay_extend_map:a}):this.refresh({pay_extend_map:a});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"repay",value:(o=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_,k,I,w,O,C,x,E,D,N,T,j,A,R,M=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.ocData,r=t.orderSn,n=t.chaosOrderSn,o=t.orderAmount,a=t.attrMap,s=t.installmentList,c=t.fastReturn,u=this.ocData.goodsInfo.goodsId,l=this.ocData.selectedChannel,d=l&&l.paymentType,p=l&&l.allPay,m=function(e,t){gl({errorCode:e,data:t||{},handleUnclassifiedErrors:!0,ocData:M.ocData})},d!==zn.FriendPay){e.next=10;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Si.default.uniformForward(Object(P.appendQuery)({fp_id:n},"friend_pay.html")),e.abrupt("return");case 10:return f={goodsID:u,orderAmount:o,attrMap:a,fastReturn:c},h=function(e){m(e,null),e===Vc.PrepayBusy.code&&(M.forwardHideSkuSelect&&M.forwardHideSkuSelect(),Si.default.uniformForward(Object(P.appendQuery)({order_sn:r},"order.html")))},v={order_sn:r},d===zn.HBInstallmentPay&&(y=s.findIndex((function(e){return e.defaultSelected})),g=y>=0?y:0,b=l.termIndex||g||0,v.term=s[b].term),d===zn.CreditCardInstallmentPay&&(v.bind_id=S()(l,"creditCardVo.recommendCardVo.bindId"),_=l.creditCardTermIndex,k=S()(l,"creditCardVo.recommendCardVo.creditInstallments")||[],I=k.findIndex((function(e){return!!e.selected})),_>=0||(_=I),_>=0||(_=0),w=k[_],v.term=w?w.installmentNum:-1),O=Object(P.parseQuery)(location.search),C="210"===O.page_from,x=d===zn.XianYongHouFu&&(C||!l.signed),E=this.getWxscoreSignScene(),e.next=21,Cn();case 21:return D=e.sent,N=[1,2].includes(+l.toastStressOnFreePay),T=1==+l.toastStressOnFreePay,Object(Se.show)(),e.prev=25,e.next=28,Lc.pay({url:this.prepayUrl,orderSn:r,paymentType:d,attrMap:a,params:v,attributeFields:{pay_ticket:this.ocData.payTicket},optionalParams:{isSignXianYongHouFu:x,signScene:E,orderAmount:o,antiContent:D,mianmiAutoSwitch:p,mianmiV3:N,mianmiV3SafeHint:T,switchToWechatIfSignXyhfFailed:this.switchToWechatIfSignXyhfFailed},checkOrderStatus:Lu(r,f),checkOrderTimeout:1e4});case 28:Uu(j=e.sent,f,this),Dl({groupId:"10242",customTags:{event:"order_payed_judge_"+(S()(j,"orderStatus")||999)}}),e.next=41;break;case 33:if(e.prev=33,e.t0=e.catch(25),A=e.t0||{},R=A.cancelled,d!==zn.XianYongHouFu){e.next=40;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Fu({order_sn:r}),e.abrupt("return");case 40:R?Vu():zu({orderSn:r,error:e.t0,defaultOnFailed:h,ocManager:this});case 41:if(e.prev=41,Object(Se.hide)(),d===zn.HBInstallmentPay&&(this.ocData.lockInstallmentTerm=!0),d!==zn.CreditCardInstallmentPay){e.next=49;break}if(!S()(l,"creditCardVo.recommendCardVo.removeLock")){e.next=48;break}return e.abrupt("return");case 48:this.ocData.lockCreditCardTerm=!0;case 49:return e.finish(41);case 50:case"end":return e.stop()}}),e,this,[[25,33,41,50]])}))),function(){return o.apply(this,arguments)})},{key:"pay",value:(n=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_,k,I,w,C,x,E,D,N,T,j,A,R,M,L,B,F,U,H,V,z,W,Q,q,G;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ocData.orderSn||!this.ocData.chaosOrderSn){e.next=2;break}return e.abrupt("return",this.repay());case 2:return e.next=4,Vd({ocData:this.ocData,groupType:this.groupType,orderExtraType:this.orderExtraType,groupOrderId:this.groupOrderId,activityParams:this.activityParams,ocManager:this});case 4:if(!(t=e.sent)){e.next=124;break}if(!t.errMsg){e.next=10;break}Te(t.errMsg),e.next=124;break;case 10:if(r=this.ocData.selectedChannel,n=r&&r.paymentType,o=r&&r.allPay,!this.recordId){e.next=29;break}return e.prev=14,Object(Se.show)("正在生成旧机回收订单"),e.next=18,Kd({ocData:this.ocData});case 18:Object(Se.hide)(),e.next=29;break;case 21:return e.prev=21,e.t0=e.catch(14),Object(Se.hide)(),a=e.t0||{},s=a.response,c=(s||{}).data,(u=c&&c.error_msg)&&Te(u),e.abrupt("return");case 29:if(this.recordId?Object(Se.show)("即将生成新机订单"):Object(Se.show)(),l=this.ocData.goodsInfo.goodsId,d=this.ocData.goodsInfo.skuId,p=this.ocData,m=p.orderAmount,f=p.attrMap,h=p.orderServicePath,v=void 0===h?"order":h,y=p.fastReturn,g=p.idCardInfo,b=t.postParams,_=t.ocHandleError,k=b.anti_content,I=null,w=null,e.prev=37,!(this.ocData.goodsInfo.needId&&g&&!g.isFaceCert&&g.isFaceGoods&&Nl())){e.next=41;break}return e.next=41,jl({snapshotId:g.snapshotId,extMap:g.extendMap,antiContent:k});case 41:return e.next=43,Wd({url:v,params:b});case 43:C=e.sent,x=C.order_sn,E=C.fp_id,D=C.order_amount,N=C.discount_amount,T=C.prepay_url,I=x,w=E,this.needReload=!0,j=S()(this.ocData,"orderInfo.payPrice"),D!==j&&Object(P.throwErrorAsync)(new Error("different_price"),{error_message:"order_amount_".concat(D,"_different_with_pay_price_").concat(j)}),this.prepayUrl=T,this.ocData.orderSn=I,this.ocData.chaosOrderSn=w,this.ocData.discountAmount=N,this.updateOCData(this.ocData),Object(Se.hide)(),e.next=76;break;case 62:if(e.prev=62,e.t1=e.catch(37),!e.t1.noErrorHandle){e.next=67;break}return Object(Se.hide)(),e.abrupt("return");case 67:if(!e.t1.isTimeout&&!e.t1.isOrderSnEmpty){e.next=71;break}Te("网络连接不稳定，请刷新后重试"),e.next=74;break;case 71:return A=e.t1.errorCode,R=e.t1.data,e.next=74,_(A,R);case 74:return vl(e.t1.errorCode)||Object(Se.hide)(),e.abrupt("return");case 76:if(M={op:"event",event:"create_order",goods_id:l,sku_id:d,order_amount:m,pay_app_id:b.app_id,page_name:"order_checkout",auto_group:"0",sub_op:"create_order",refer_page_name:tp.getReferPageName(),refer_page_element:tp.getReferPageElement(),order_sn:I,location:location.href},Object(O.sendMetrics)(M),Ou({payload:ep({event:"paycheck"},M)}),Dl({groupId:"10242",customTags:{event:"create_order"}}),n!==zn.FriendPay){e.next=85;break}this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Si.default.uniformForward(Object(P.appendQuery)({fp_id:w},"friend_pay.html")),e.next=124;break;case 85:return L={goodsID:l,orderAmount:m,attrMap:f,fastReturn:y},B=function(e){_(e,null),e===Vc.PrepayBusy.code&&Si.default.reload(Object(P.appendQuery)({order_sn:I},"order.html"))},F=Object(P.parseQuery)(location.search),U="210"===F.page_from,H=n===zn.XianYongHouFu&&(U||!r.signed),V=this.getWxscoreSignScene(),z=[1,2].includes(+r.toastStressOnFreePay),W=1==+r.toastStressOnFreePay,Object(Se.show)(),e.prev=94,e.next=97,Lc.pay({url:this.prepayUrl,orderSn:I,paymentType:n,attrMap:f,params:{order_sn:I,term:b.term,bind_id:b.bindId},attributeFields:{pay_ticket:this.ocData.payTicket},additionalParams:{order_amount:m,goods_id:l},optionalParams:{isSignXianYongHouFu:H,signScene:V,orderAmount:m,antiContent:k,mianmiAutoSwitch:o,mianmiV3:z,mianmiV3SafeHint:W,switchToWechatIfSignXyhfFailed:this.switchToWechatIfSignXyhfFailed},checkOrderStatus:Lu(I,L),checkOrderTimeout:1e4});case 97:Uu(Q=e.sent,L,this),Dl({groupId:"10242",customTags:{event:"order_payed_judge_"+(S()(Q,"orderStatus")||999)}}),e.next=115;break;case 102:if(e.prev=102,e.t2=e.catch(94),S()(this.ocData,"promotionInfo.retrievePromotion.promotionStatus")!==sa){e.next=109;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Fu({order_sn:I}),e.abrupt("return");case 109:if(q=e.t2||{},G=q.cancelled,n!==zn.XianYongHouFu){e.next=114;break}return this.forwardHideSkuSelect&&this.forwardHideSkuSelect(),Fu({order_sn:I}),e.abrupt("return");case 114:G?Vu():zu({orderSn:I,error:e.t2,defaultOnFailed:B,ocManager:this});case 115:if(e.prev=115,Object(Se.hide)(),n===zn.HBInstallmentPay&&(this.ocData.lockInstallmentTerm=!0),n!==zn.CreditCardInstallmentPay){e.next=123;break}if(!S()(r,"creditCardVo.recommendCardVo.removeLock")){e.next=122;break}return e.abrupt("return");case 122:this.ocData.lockCreditCardTerm=!0;case 123:return e.finish(115);case 124:case"end":return e.stop()}}),e,this,[[14,21],[37,62],[94,102,115,124]])}))),function(){return n.apply(this,arguments)})},{key:"selectedChannel",value:(r=c()(i.a.mark((function e(t){var r,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.channelName)){e.next=14;break}return n=this.ocData,this.ocData&&this.ocData.orderSn&&(n.orderSn=this.ocData.orderSn),this.ocData&&this.ocData.chaosOrderSn&&(n.chaosOrderSn=this.ocData.chaosOrderSn),this.ocData&&this.ocData.lockInstallmentTerm&&(n.lockInstallmentTerm=this.ocData.lockInstallmentTerm),this.ocData&&this.ocData.lockCreditCardTerm&&(n.lockCreditCardTerm=this.ocData.lockCreditCardTerm),(o=S()(n,"payChannelList")||[]).forEach((function(e){e.selected=e.channelName===r})),n.selectedChannel=o.find((function(e){return e.channelName===r})),e.next=12,Ro(r);case 12:n.selectedChannel.paymentType=e.sent,this.updateOCData(n);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"refreshAfterSelectedChannel",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r={use_platform_promotion_request:{not_use:!1,promotion_identity_vo:null},use_shop_promotion_requests:[]},n=S()(this.ocData,"promotionInfo"),o=n.platformPromotion,a=n.shopPromotion,r.use_platform_promotion_request=o&&(o.promotionStatus===oa||o.notUse)?{not_use:o.notUse,promotion_identity_vo:o.promotionIdentityVo}:null,r.use_shop_promotion_requests=a&&(a.promotionStatus===oa||a.notUse)?[{promotion_identity_vos:a.promotionIdentityVo?[a.promotionIdentityVo]:null,mall_id:a.mallId,not_use:a.notUse}]:null,e.next=9,this.refresh(ep({front_action:ud,promotion_vo:r},t));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"creditCardTermIndex",get:function(){return S()(this.ocData,"selectedChannel.creditCardTermIndex")}},{key:"originParams",get:function(){var e=Object(P.parseQuery)(location.search),t=S()(this.ocData,"selectedChannel.creditCardVo.recommendCardVo.bindId"),r=this.getSelectedSkuId&&this.getSelectedSkuId(),n=S()(this.ocData,"selectedChannel.creditCardTermIndex"),o=S()(this.ocData,"selectedChannel.creditCardVo.recommendCardVo.creditInstallments"),a=o&&o[n]&&o[n].installmentNum;return{front_env:this.frontEnv,front_version:this.frontVersion,confirm_display_type:1,front_supports:Pd(),original_front_env:parseInt(this.activityParams[rd],10)||0,selected_pay_channel:S()(this.ocData,"selectedChannel.channelName"),selected_install_num:a,goods_id:this.goodsId,group_id:this.groupId,group_order_id:this.groupOrderId,sku_id:r||S()(this.ocData,"goodsInfo.skuId"),goods_number:S()(this.ocData,"goodsInfo.goodsNumber"),address_id:this.addressId||e.sel_address_id,is_app:this.isApp,page_from:this.pageFrom,type:this.activityParams[Jl]||0,award_type:this.activityParams[Kl]||0,biz_type:this.activityParams[Zl]||0,service_transparent_field:S()(this.ocData,"deliveryInfo.selectedServiceTransparentField"),pay_channel_list:Object.keys(this.appIdSet)||[],biz_tag:this.activityParams[nd],extend_map:this.promotionExtendMap?ep(ep({},this.extendMap),this.promotionExtendMap):this.extendMap,origin_hostname:location.hostname,pay_extend_map:ep(ep({},S()(this.appPaymentEnv,"payExtendMap")),{},{selected_bind_id:t}),source_channel:this.sourceChannel,transfer_map:this.transferMap,select_service_item_id_list:this.selectServiceItemIdList}}}],[{key:"getInstance",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),qd=Gd,Xe()(qd.prototype,"updateAddressInfo",[$e],Object.getOwnPropertyDescriptor(qd.prototype,"updateAddressInfo"),qd.prototype),Xe()(qd.prototype,"selectDeliveryItem",[$e],Object.getOwnPropertyDescriptor(qd.prototype,"selectDeliveryItem"),qd.prototype),Xe()(qd.prototype,"selectShippingItem",[$e],Object.getOwnPropertyDescriptor(qd.prototype,"selectShippingItem"),qd.prototype),Xe()(qd.prototype,"getWxscoreSignScene",[$e],Object.getOwnPropertyDescriptor(qd.prototype,"getWxscoreSignScene"),qd.prototype),Xe()(qd.prototype,"refreshPayVoAfterOrder",[$e],Object.getOwnPropertyDescriptor(qd.prototype,"refreshPayVoAfterOrder"),qd.prototype),Xe()(qd.prototype,"changeBindId",[$e],Object.getOwnPropertyDescriptor(qd.prototype,"changeBindId"),qd.prototype),qd),np=rp.getInstance();function op(e){return ap.apply(this,arguments)}function ap(){return(ap=c()(i.a.mark((function e(t){var r,n,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.batchSn,n=t.merchantTag,o=void 0===n?52:n,a=t.mallId,s=Object(P.parseUrlQuery)(window.location.href),e.t0=Fe,e.t1=Re.POST,e.next=6,Cn();case 6:return e.t2=e.sent,e.t3=r,e.t4=o,e.t5=s._oc_source,e.t6=np.pageFrom,e.t7=a+"",e.t8={anti_content:e.t2,batch_sn:e.t3,merchant_tag:e.t4,oc_source:e.t5,page_from:e.t6,mall_id:e.t7},e.t9={method:e.t1,url:"api/promotion/take_merchant_coupon",data:e.t8},e.abrupt("return",(0,e.t0)(e.t9));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ip(e){return sp.apply(this,arguments)}function sp(){return(sp=c()(i.a.mark((function e(t){var r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.batchSn,n=t.merchantTag,o=void 0===n?50:n,a=Object(P.parseUrlQuery)(window.location.href),e.t0=Fe,e.t1=Re.POST,e.next=6,Cn();case 6:return e.t2=e.sent,e.t3=r,e.t4=o,e.t5=a._oc_source,e.t6=np.pageFrom,e.t7={anti_content:e.t2,batch_sn:e.t3,merchant_tag:e.t4,oc_source:e.t5,page_from:e.t6},e.t8={method:e.t1,url:"api/promotion/auto_take_merchant_coupon",data:e.t7},e.abrupt("return",(0,e.t0)(e.t8));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cp(e){return up.apply(this,arguments)}function up(){return(up=c()(i.a.mark((function e(t){var r,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.batchSnList,n=t.merchantTag,o=void 0===n?50:n,Object(P.parseUrlQuery)(window.location.href),e.t0=Fe,e.t1=Re.POST,e.next=6,Cn();case 6:return e.t2=e.sent,e.t3=r,e.t4=o,e.t5={anti_content:e.t2,batch_sn_list:e.t3,merchant_tag:e.t4},e.t6={method:e.t1,url:"api/promotion/batch_auto_take_merchant_coupon",data:e.t5},e.abrupt("return",(0,e.t0)(e.t6));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lp(e){return dp.apply(this,arguments)}function dp(){return(dp=c()(i.a.mark((function e(t){var r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.mallId,n=t.batchSn,o=t.merchantTag,a=t.likeFrom,e.t0=Fe,e.t1=Re.POST,e.t2=r,e.t3=a,e.t4=n,e.t5=o,e.next=9,Cn();case 9:return e.t6=e.sent,e.t7={mall_id:e.t2,like_from:e.t3,batch_sn:e.t4,merchant_tag:e.t5,anti_content:e.t6},e.t8={method:e.t1,url:"api/promotion/follow_and_take_mall_favorite_coupon",data:e.t7},e.abrupt("return",(0,e.t0)(e.t8));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pp(e){return mp.apply(this,arguments)}function mp(){return(mp=c()(i.a.mark((function e(t){var r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.type,n=void 0===r?2:r,o=t.batchSn,a=t.merchantTag,e.t0=Fe,e.t1=Re.POST,e.t2=n,e.t3=o,e.t4=a,e.next=8,Cn();case 8:return e.t5=e.sent,e.t6={type:e.t2,batch_sn:e.t3,merchant_tag:e.t4,anti_content:e.t5},e.t7={method:e.t1,url:"api/promotion/take_coupon_from_promotion_bar",data:e.t6},e.abrupt("return",(0,e.t0)(e.t7));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fp,hp=29,vp=36,yp=2,gp="已领取",bp="领取",_p="再领取",kp="请稍后再试～",Sp=(fp={},o()(fp,hp,"mallCommodityCoupon"),o()(fp,vp,"likeMallCoupon"),fp),Ip={DISPLAY_AMOUNT:10001,DISPLAY_AMOUNT_UNUSABLE:10002,DISPLAY_AMOUNT_UNUSABLE_INEFFICIENCY:10003,DISPLAY_AMOUNT_UNUSABLE_RULE_REASON:10004,DISPLAY_AMOUNT_APP:10005,DISPLAY_DISCOUNT:20001,DISPLAY_DISCOUNT_UNUSABLE:20002,DISPLAY_DISCOUNT_UNUSABLE_INEFFICIENCY:20003,DISPLAY_DISCOUNT_UNUSABLE_RULE_REASON:20004,SUPERPOSITION_AMOUNT:30001,SUPERPOSITION_AMOUNT_UNUSABLE:30002,SUPERPOSITION_AMOUNT_UNUSABLE_RULE_REASON:30003},wp={44025:["不能领取更多了","去看看别的券吧"],44026:["该券太火爆","全部已被领完"],44027:["好可惜，领券失败","领券活动刚刚结束哦"]},Pp={44025:"已领完",44026:"已抢光"};var Op=function(e){if(e)return e.filter((function(e){return!!e})).map((function(e,t){if(e)return{batchSn:e.batch_sn,discount:Object(P.priceCent)(e.discount),canTakenCount:e.can_taken_count,subRulesDesc:e.sub_rules_desc,displayType:e.display_type,tagDesc:e.tag_desc,promotionName:e.tag_desc,rulesDesc:e.rules_desc,titleDisplayName:e.rules_desc,richRulesDesc:e.rich_rules_desc,buttonDesc:e.button_desc,buttonSubDesc:e.button_sub_desc,timeDisplayName:e.time_display_name,takeStatus:e.take_status,isFavCoupon:parseInt(e.display_type,10)===vp,goodsId:S()(e,"goods_display.goods_id"),goodsName:S()(e,"goods_display.goods_name"),thumbUrl:S()(e,"goods_display.thumb_url")}}))},Cp=function(e){if(e)return e.filter((function(e){return!!e})).map((function(e){var t,r=e.discount||e.discount_amount;return{discount:Object(P.priceCent)(r),scope:e.usable_desc,discountType:e.discount_type,displayType:e.display_type,endTime:e.end_time,promotionUniqueNo:e.promotion_unique_no,promotionIdentityVo:e.shop_promotion_detail_result||e.promotion_identity_vo,promotionName:e.promotion_name,startTime:e.start_time,titleDisplayName:e.title_display_name,timeDisplayName:e.time_display_name,usableDesc:e.usable_desc,canClick:e.can_click,checkStatus:e.check_status,extraDisplayMap:e.extra_display_map,topDisplayName:e.top_display_name,unusablePromotionDetail:e.unusable_promotion_display_detail_vos,ruleDisplayName:e.rule_display_name,batchSn:S()(e,"shop_promotion_detail_result.extension.batch_sn")||S()(e,"promotion_identity_vo.extension.batch_sn"),buttonDesc:S()(e,"extra_display_map.button_desc"),isFavCoupon:S()(e,"extra_display_map.is_fav_coupon"),isBrandVipCoupon:S()(e,"extra_display_map.is_brand_vip_coupon"),needJoinBrandVip:S()(e,"extra_display_map.need_join_brand_vip"),isPercentCoupon:(t=e.display_type,[Ip.DISPLAY_DISCOUNT,Ip.DISPLAY_DISCOUNT_UNUSABLE,Ip.DISPLAY_DISCOUNT_UNUSABLE_INEFFICIENCY,Ip.DISPLAY_DISCOUNT_UNUSABLE_RULE_REASON].includes(parseInt(t,10))),isRetrieve:e.is_retrieve,isBestJusableOrRetrieve:e.is_best_jusable_or_retrieve}}))},xp=function(e){return e?e.map((function(e){return{fullBackName:S()(e,"full_back_name"),rewardStatus:S()(e,"reward_status"),processStatusDesc:S()(e,"process_status_desc.display_items"),processPercentStr:S()(e,"process_percent_str"),currentConsumeAmount:+Object(P.priceCent)(S()(e,"current_consume_amount")),needAmount:+Object(P.priceCent)(S()(e,"need_amount")),rewardAmount:Object(P.priceCent)(S()(e,"reward_amount")),rewardImgUrl:S()(e,"reward_img_url"),rewardName:S()(e,"reward_name")}})):[]};function Ep(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Dp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ep(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ep(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Np=rp.getInstance(),Tp=function(){function e(){return l()(this,e),this.isFetching=!1,this.couponTaking=!1,e.instance||(e.instance=this),e.instance}var t,r,n,o,a,s,u,d,m,f;return p()(e,[{key:"initPromotionFunc",value:function(e){var t=e.togglePromotionPopupVisibleFunc,r=e.setPromotionListsFunc;this.togglePromotionPopupVisible=t,this.setPromotionLists=r}},{key:"processParams",value:(f=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r=t.selectedShopPromotion,n=t.selectPlatformPromotion,o=t.refreshAfterReceive,a=S()(Np,"ocData"),e.next=4,Cn();case 4:return s=e.sent,c=S()(a,"promotionInfo")||{},u=c.shopPromotion,l=c.platformPromotion,d=[],o||(!r&&u&&u.promotionStatus===oa&&(u.notUse?d.push(this.notUsePromotion.shop.promotionIdentityVo):d.push(u.promotionIdentityVo)),r&&d.push(r.promotionIdentityVo),!n&&l&&l.promotionStatus===oa&&(l.notUse?d.push(this.notUsePromotion.platform.promotionIdentityVo):d.push(l.promotionIdentityVo)),n&&d.push(n.promotionIdentityVo)),p=S()(a,"promotionExtendMap"),m=S()(a,"extendMap"),p&&(m=Dp(Dp({},m),p)),e.abrupt("return",{total_price:S()(a,"priceInfo.orderPrice"),source_channel:Np.sourceChannel,merchant_tag:52,page_from:Np.pageFrom,front_supports:Pd(),address_id:a.addressInfo.addressId,shop_discount_consult_requests:[{mall_id:S()(a,"goodsInfo.mallId"),shop_order_price:S()(a,"priceInfo.orderPrice"),goods_discount_requests:[{goods_id:S()(a,"goodsInfo.goodsId"),sku_id:S()(a,"goodsInfo.skuId"),price:S()(a,"goodsInfo.unitPriceForCent"),group_price:S()(a,"goodsInfo.groupPriceForCent"),group_id:S()(a,"goodsInfo.groupId"),normal_price:S()(a,"goodsInfo.normalPriceForCent"),goods_number:S()(a,"goodsInfo.goodsNumber"),cat_id:S()(a,"goodsInfo.catId"),cat_id1:S()(a,"goodsInfo.catId1"),cat_id2:S()(a,"goodsInfo.catId2"),cat_id3:S()(a,"goodsInfo.catId3"),goods_type:S()(a,"goodsInfo.goodsType"),event_type:S()(a,"goodsInfo.eventType"),activity_type:S()(a,"goodsInfo.activityType"),activity_id:S()(a,"goodsInfo.activityId"),oversea_type:S()(a,"goodsInfo.overseaType"),cost_template_id:S()(a,"goodsInfo.costTemplateId")}]}],extend_map:m,promotion_identity_vos:d,address_vo:{province_id:S()(a,"addressInfo.provinceId"),city_id:S()(a,"addressInfo.cityId"),district_id:S()(a,"addressInfo.districtId"),address_id:S()(a,"addressInfo.addressId")},anti_content:s});case 13:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"fetchPromotionList",value:(m=c()(i.a.mark((function e(){var t,r,n,o,a,s=this,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=t.selectedShopPromotion,n=t.selectPlatformPromotion,o=t.refreshAfterReceive,!this.isFetching){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.processParams({selectedShopPromotion:r,selectPlatformPromotion:n,refreshAfterReceive:o});case 5:return a=e.sent,Object(Se.showWithoutBg)(),this.isFetching=!0,e.abrupt("return",Fe({method:"POST",url:"api/promotion/query_candidate_promotion",data:a}).then((function(e){var t=Cp(S()(e,"shop_candidate_promotion_results.0.usable_shop_promotions"))||[],r=Cp(S()(e,"usable_platform_promotions"))||[],n=!Vn()(t)&&t.find((function(e){return!!e.checkStatus})),o=!Vn()(r)&&r.find((function(e){return!!e.checkStatus})),a=S()(e,"shop_candidate_promotion_results.0.extra_display_map.not_has_selectable_promotion");return{shopPromotionTitle:S()(e,"shop_candidate_promotion_results.0.shop_promotion_title_vo.display_items"),commonShopPromotions:Cp(S()(e,"shop_candidate_promotion_results.0.shop_promotion_display_results"))||[],retrievableShopPromotions:Op(S()(e,"shop_candidate_promotion_results.0.retrievable_shop_promotions"))||[],usableShopPromotions:t,unusableShopPromotions:Cp(S()(e,"shop_candidate_promotion_results.0.unusable_shop_promotions"))||[],platformPromotionTitle:S()(e,"platform_promotion_title_vo.display_items"),platformPromotionExtraDisplay:S()(e,"platform_promotion_extra_display_vo.display_items"),usablePlatformPromotions:r,unusablePlatformPromotions:Cp(S()(e,"unusable_platform_promotions"))||[],otherUnusablePlatformPromotions:Cp(S()(e,"other_unusable_platform_promotions"))||[],promotionDisplay:S()(e,"total_discount_display_vo.display_items")||null,mallFullBackDetails:xp(S()(e,"mall_full_back_details")),crossFullBackDetails:xp(S()(e,"cross_full_back_details")),selectedShopPromotion:n,selectedPlatformPromotion:o,notHasSelectablePromotion:a,postagePromotion:S()(e,"shop_candidate_promotion_results.0.extra_display_map.postage_promotion_rich_text.display_items")}})).catch((function(){return null})).finally((function(){Object(Se.hide)(),s.isFetching=!1})));case 9:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"autoTakeMerchantCoupon",value:(d=c()(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S()(Np,"ocData"),S()(t,"promotionInfo.shopPromotion.promotionStatus")!==aa){e.next=11;break}if(!(r=S()(t,"promotionInfo.shopPromotion.promotionIdentityVo.extension.batch_sn"))){e.next=11;break}return e.next=7,ip({batchSn:r});case 7:n=e.sent,Dl({groupId:"20203",customTags:{event:"autoReceivePromotion"}}),Np.needReload=!0,t.promotionInfo.shopPromotion={mallId:n.source_mall_id,promotionStatus:oa,promotionIdentityVo:n.promotion_identity_vo};case 11:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"batchAutoTakeCoupon",value:(u=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p,m,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.shopPromotion,n=t.platformPromotion,o=S()(Np,"ocData"),a=[],s=S()(r,"promotionStatus"),c=S()(r,"promotionIdentityVo.extension.batch_sn"),u=S()(n,"promotionStatus"),l=S()(n,"promotionIdentityVo.extension.batch_sn"),s===aa&&c&&a.push(c),u===aa&&l&&a.push(l),!(a.length>0)){e.next=23;break}return e.next=12,cp({batchSnList:a});case 12:if(d=e.sent,Dl({groupId:"20203",customTags:{event:"autoReceivePromotion"}}),Np.needReload=!0,p=S()(o,"goodsInfo.mallId"),m=(d||{}).coupon_list,(f=m&&m.find((function(e){return 8===S()(e,"promotion_identity_vo.promotion_type")})))&&(o.promotionInfo.shopPromotion={mallId:p,promotionStatus:oa,promotionIdentityVo:f.promotion_identity_vo}),(h=m.find((function(e){return 8!==S()(e,"promotion_identity_vo.promotion_type")})))&&(o.promotionInfo.platformPromotion={mallId:p,promotionStatus:oa,promotionIdentityVo:h.promotion_identity_vo}),m&&a.length===m.length){e.next=23;break}return e.abrupt("return",{notAllSuccess:!0});case 23:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"ddpPromotionClick",value:(s=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe({method:"POST",url:"api/buffon/kayle/promotion/click/notify",data:{sceneInfoMap:{fromScene:"DOWN_ORDER_PAGE_CLICK_NOTIFY",subScene:"DOWN_ORDER_PAGE_UPSIDE_CELL_CLICK_NOTIFY"}}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(){return s.apply(this,arguments)})},{key:"likeAndReceive",value:(a=c()(i.a.mark((function e(t,r,n){var o,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=S()(Np,"ocData"),Object(O.sendClickMetrics)({page_el_sn:"4503302",op:"click",goods_id:S()(o,"goodsInfo.goodsId")}),e.t0=Fe,e.t1=S()(o,"promotionInfo.shopPromotion.mallId"),e.t2=t,e.next=7,Cn();case 7:return e.t3=e.sent,e.t4={anti_content:e.t3},e.t5={mall_id:e.t1,like_from:101003,batch_sn:e.t2,merchant_tag:50,base_risk_info:e.t4},e.t6={method:"POST",url:"api/zenon/mall/like_and_receive_coupon",data:e.t5},e.abrupt("return",(0,e.t0)(e.t6).then((function(){Np.needReload=!0,!r&&a.receiveLikeCouponInfo(),Dl({groupId:"20203",customTags:{event:"receivePromotion"}}),!n&&Np.refresh({front_action:ud})})).catch((function(e){var t=e.response,r=(t&&t.data||{}).error_msg||"领取失败~";Te(r)})));case 12:case"end":return e.stop()}}),e)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"autoTakeCouponBeforeOldForNew",value:(o=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S()(Np,"ocData"),r=S()(t,"promotionInfo.retrievePromotion")||{},n=S()(r,"promotionStatus"),o=S()(r,"promotionIdentityVo.extension.batch_sn"),a=S()(t,"promotionInfo.platformRetrievePromotion"),s=S()(a,"promotionStatus"),c=S()(t,"promotionInfo.shopPromotion"),u=S()(c,"promotionStatus"),e.prev=8,n!==ia){e.next=13;break}return e.next=12,this.likeAndReceive(o,!0);case 12:return e.abrupt("return");case 13:if(s!==aa){e.next=18;break}return e.next=16,this.batchAutoTakeCoupon({shopPromotion:c,platformPromotion:a});case 16:e.next=21;break;case 18:if(u!==aa){e.next=21;break}return e.next=21,this.autoTakeMerchantCoupon();case 21:e.next=29;break;case 23:e.prev=23,e.t0=e.catch(8),l=e.t0||{},d=l.response,p=(d||{}).data,m=S()(p,"error_toast")||"领取优惠失败",Te(m);case 29:case"end":return e.stop()}}),e,this,[[8,23]])}))),function(){return o.apply(this,arguments)})},{key:"autoTakeCouponOnPromotionCellClickV2",value:(n=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f,h,v,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S()(Np,"ocData"),r=S()(t,"promotionInfo.retrievePromotion")||{},n=S()(r,"promotionStatus"),o=S()(t,"promotionInfo.platformRetrievePromotion"),a=S()(o,"promotionStatus"),s=S()(r,"promotionIdentityVo.extension.batch_sn"),c=S()(r,"promotionIdentityVo.extension.retrievable_promotion_jump_url"),n!==ca||!c){e.next=26;break}if(e.prev=8,a!==aa){e.next=12;break}return e.next=12,this.batchAutoTakeCoupon({shopPromotion:r,platformPromotion:o});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:return e.prev=16,u=S()(t,"goodsInfo.skuId"),l=S()(t,"goodsInfo.goodsId"),d=S()(t,"goodsInfo.goodsNumber"),p=S()(Np,"groupOrderId"),m=Object(P.appendQuery)({group_order_id:p,goods_id:l,sku_id:u,goods_number:d},c),Np.forwardHideSkuSelect&&Np.forwardHideSkuSelect(),Si.default.uniformForward(m),e.finish(16);case 25:return e.abrupt("return",{blockPopup:!0});case 26:if(n!==ia){e.next=39;break}return e.next=29,this.likeAndReceive(s,!1,!0);case 29:if(a!==aa){e.next=37;break}return e.prev=30,e.next=33,this.batchAutoTakeCoupon({shopPromotion:r,platformPromotion:o});case 33:e.next=37;break;case 35:e.prev=35,e.t1=e.catch(30);case 37:return Np.refresh({front_action:ud}),e.abrupt("return",{blockPopup:!0});case 39:if(n!==aa&&a!==aa){e.next=53;break}return e.prev=40,e.next=43,this.batchAutoTakeCoupon({shopPromotion:r,platformPromotion:o});case 43:e.next=52;break;case 45:return e.prev=45,e.t2=e.catch(40),f=e.t2||{},h=f.response,v=(h||{}).data,y=S()(v,"error_toast")||"领取优惠失败，请重试",Te(y),e.abrupt("return");case 52:Np.refresh({front_action:ud});case 53:case"end":return e.stop()}}),e,this,[[8,14,16,25],[30,35],[40,45]])}))),function(){return n.apply(this,arguments)})},{key:"autoTakeCouponOnPromotionCellClick",value:(r=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,_;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S()(Np,"ocData"),r=S()(t,"promotionInfo.retrievePromotion")||{},n=S()(r,"promotionStatus"),o=S()(t,"promotionInfo.platformRetrievePromotion"),a=S()(o,"promotionStatus"),s=S()(r,"promotionIdentityVo.extension.batch_sn"),c=S()(r,"promotionIdentityVo.extension.retrievable_promotion_jump_url"),n!==ca||!c){e.next=15;break}return u=S()(t,"goodsInfo.skuId"),l=S()(t,"goodsInfo.goodsNumber"),d=S()(Np,"groupOrderId"),p=Object(P.appendQuery)({group_order_id:d,sku_id:u,goods_number:l},c),Np.forwardHideSkuSelect&&Np.forwardHideSkuSelect(),Si.default.uniformForward(p),e.abrupt("return",{blockPopup:!0});case 15:if(n!==ia){e.next=19;break}return e.next=18,this.likeAndReceive(s);case 18:return e.abrupt("return",{blockPopup:!0});case 19:if(a!==aa){e.next=33;break}return e.prev=20,e.next=23,this.batchAutoTakeCoupon({shopPromotion:r,platformPromotion:o});case 23:e.next=31;break;case 25:e.prev=25,e.t0=e.catch(20),m=e.t0||{},f=m.response,h=(f||{}).data,v=S()(h,"error_toast")||"领取优惠失败，请重试",Te(v);case 31:e.next=45;break;case 33:if(n!==aa){e.next=45;break}return e.prev=34,e.next=37,this.autoTakeMerchantCoupon();case 37:e.next=45;break;case 39:e.prev=39,e.t1=e.catch(34),y=e.t1||{},g=y.response,b=(g||{}).data,_=S()(b,"error_toast")||"领取优惠失败，请重试",Te(_);case 45:case"end":return e.stop()}}),e,this,[[20,25],[34,39]])}))),function(){return r.apply(this,arguments)})},{key:"receiveLikeCouponInfo",value:function(){var e=S()(Np,"ocData"),t=S()(e,"mallInfo.name");Te(w.a.createElement(w.a.Fragment,null,"领券成功，已关注",t&&w.a.createElement("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"2.56rem",marginTop:".04rem"}},t)),{duration:3})}},{key:"batchAutoTakeCouponAndReloadToDaCu",value:(t=c()(i.a.mark((function e(){var t,r,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S()(Np,"ocData"),r=S()(t,"promotionInfo.retrievePromotion")||{},n=S()(r,"promotionStatus"),o=S()(t,"promotionInfo.platformRetrievePromotion"),e.prev=4,n!==aa){e.next=8;break}return e.next=8,this.batchAutoTakeCoupon({shopPromotion:r,platformPromotion:o});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return e.prev=12,this.reloadToDaCu(),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[4,10,12,15]])}))),function(){return t.apply(this,arguments)})},{key:"reloadToDaCu",value:function(){var e=S()(Np,"ocData"),t=S()(e,"promotionInfo.platformRetrievePromotion"),r=t.promotionStatus,n=S()(t,"promotionIdentityVo.extension.retrievable_promotion_jump_url");if(r===ca&&n){var o=S()(e,"goodsInfo.skuId"),a=S()(e,"goodsInfo.goodsId"),i=S()(e,"goodsInfo.goodsNumber"),s=S()(Np,"groupOrderId"),c=Object(P.appendQuery)({group_order_id:s,sku_id:o,goods_id:a,goods_number:i},n);Si.default.reload(c)}}},{key:"notUsePromotion",get:function(){var e=S()(Np,"ocData");return{shop:{promotionIdentityVo:{promotion_type:8,promotion_id:"-100",extension:{mall_id:S()(e,"goodsInfo.mallId")}}},platform:{promotionIdentityVo:{promotion_type:15,promotion_id:"-100"}}}}}],[{key:"getInstance",value:function(){return this.instance?this.instance:this.instance=new e}}]),e}(),jp=rp.getInstance(),Ap=Tp.getInstance(),Rp=Object(I.forwardRef)((function(e,t){var r=Object(I.useContext)(ta).glide,n=function(){var t=c()(i.a.mark((function t(r){var n,o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.channelName,o=S()(e,"ocData.promotionInfo.retrievePromotion.promotionStatus"),a=S()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},!(s=a.discountPayChannel)||n!==s||o!==sa){t.next=8;break}return t.next=7,Ap.ddpPromotionClick();case 7:jp.refreshAfterSelectedChannel();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=c()(i.a.mark((function t(o){var a,s,c,u,l,d,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.channelName,s=o.selectedChannel,(c=o.opts)&&c.expandAfterSelection||r(),!a||!s){t.next=21;break}return u=e.ocData,jp.ocData&&jp.ocData.orderSn&&(u.orderSn=jp.ocData.orderSn),jp.ocData&&jp.ocData.chaosOrderSn&&(u.chaosOrderSn=jp.ocData.chaosOrderSn),jp.ocData&&jp.ocData.lockInstallmentTerm&&(u.lockInstallmentTerm=jp.ocData.lockInstallmentTerm),jp.ocData&&jp.ocData.lockCreditCardTerm&&(u.lockCreditCardTerm=jp.ocData.lockCreditCardTerm),(l=S()(u,"payChannelList")||[]).forEach((function(e){e.selected=e.channelName===a})),u.selectedChannel=l.find((function(e){return e.channelName===a})),u.selectedChannel.termIndex=s.termIndex,u.selectedChannel.creditCardTermIndex=s.creditCardTermIndex,s.creditCardTermIndex>=0&&(u.creditCardTermIndex=s.creditCardTermIndex),s.termIndex>=0&&(u.termIndex=s.termIndex),t.next=17,Ro(a);case 17:u.selectedChannel.paymentType=t.sent,u.payChannelGroups&&(null==(d=u.payChannelGroups.find((function(e){return e.channels.map((function(e){return e.channel})).includes(a)})))?void 0:d.channels)&&(d.channels.forEach((function(e){return e.defaultSelected=!1})),(p=d.channels.find((function(e){return e.channel===a})))&&(p.defaultSelected=!0)),jp.updateOCData(u),n({channelName:a});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=jp.enablePaymentListV2&&!!e.ocData.payChannelGroups,s={payChannels:e.ocData.payChannelList,payChannelGroups:e.ocData.payChannelGroups,installmentList:e.ocData.installmentList,lockInstallmentTerm:jp.ocData.lockInstallmentTerm,lockCreditCardTerm:jp.ocData.lockCreditCardTerm,selectedChannelName:e.ocData.selectedChannel&&e.ocData.selectedChannel.channelName,selectedChannel:e.ocData.selectedChannel,onChannelSelected:o,orderAmount:e.ocData.orderAmount,changeBindId:jp.changeBindId,ref:t};return w.a.createElement("div",{className:Zo.a.payment,onClick:function(e){return e.stopPropagation()}},w.a.createElement("div",{className:Zo.a.title},"选择支付方式",w.a.createElement("span",{className:Zo.a.closeIcon,onClick:r,"aria-label":"关闭支付列表浮层",role:"button"})),!a&&w.a.createElement("div",{className:Zo.a.paymentlist},w.a.createElement(Do,{disableFolding:!0,isRefreshPayChannels:!0,payChannels:e.ocData.payChannelList,installmentList:e.ocData.installmentList,lockInstallmentTerm:jp.ocData.lockInstallmentTerm,lockCreditCardTerm:jp.ocData.lockCreditCardTerm,creditCardTermIndex:e.ocData.creditCardTermIndex,termIndex:e.ocData.termIndex,selectedChannelName:e.ocData.selectedChannel&&e.ocData.selectedChannel.channelName,onChannelSelected:o,orderAmount:e.ocData.orderAmount,changeBindId:jp.changeBindId}),w.a.createElement("div",{className:Zo.a.border})),a&&w.a.createElement(Jo,s))})),Mp=function(e){var t=Object(I.useRef)();return w.a.createElement(na,{visible:e.visible,onHide:function(r){var n;r&&r.stopPropagation(),e.toggleShowPaymentList(!1),null===(n=t.current)||void 0===n||n.unspread()}},w.a.createElement(Rp,nt()({},e,{ref:t})))},Lp=r("g4LU"),Bp=r.n(Lp),Fp=w.a.createContext(!1),Up=Fp.Provider;function Hp(e,t){var r=e.children,n=e.onCloseIconClicked,a=e.additionalClass,i=Object(I.useState)(!1),s=D()(i,2),c=s[0],u=s[1],l=Object(I.useState)(!0),d=D()(l,2),p=d[0],m=d[1];Object(I.useEffect)((function(){u(!0)}),[]);var f=function(){u(!1)};Object(I.useImperativeHandle)(t,(function(){return{onSlideDowm:f}}));var h=A()("".concat(Bp.a.popover," ").concat(a||"")),v=A()(Bp.a.bg,o()({},Bp.a.bgShown,c));return p?w.a.createElement("div",{className:h,ref:t,onClick:function(e){f()}},w.a.createElement("div",{className:v,onClick:function(e){e.stopPropagation(),f()}}),w.a.createElement("div",{className:"".concat(Bp.a.main," ").concat(c?Bp.a.mainShown:""),onTransitionEnd:function(e){c||(n&&n(e),m(!1))},onClick:function(e){e.stopPropagation()}},w.a.createElement(Up,{value:{glide:f}},r))):null}var Vp=Object(I.forwardRef)(Hp),zp=r("7wT/"),Wp=r.n(zp);var Qp=function(e){var t=e.title,r=e.titleVo,n=e.noBorder;return t||r?w.a.createElement("div",{className:"".concat(Wp.a.listTitle," ").concat(n?Wp.a.noBorder:"")},Vn()(r)?t:r.map((function(e,t){var r={color:e.font_color,fontSize:e.font_size/100+"rem"};return w.a.createElement("span",{key:t,style:r},e.text)}))):null},qp=r("Wgq/"),Gp=r.n(qp);var Yp=function(e){var t,r=e.discount,n=e.promotionName,a=e.isPercentCoupon,i=e.isRuleDisable,s=e.high,c=A()(Gp.a.discountInfo,o()({},Gp.a.high,!!s)),u=A()(Gp.a.discount,(t={},o()(t,Gp.a.gray,!!i),o()(t,Gp.a.small,(r+"").replace(".","").length>4),t)),l=A()(Gp.a.promotionName,o()({},Gp.a.small,n.length>7));return w.a.createElement("div",{className:c,"aria-label":a?"".concat(r," 折").concat(n||""):"".concat(r," 元").concat(n||""),role:"img"},w.a.createElement("div",{className:u,"aria-hidden":!0},a?w.a.createElement(I.Fragment,null,w.a.createElement("span",null,r),w.a.createElement("i",{className:Gp.a.percentIcon},"折")):w.a.createElement(I.Fragment,null,w.a.createElement("i",{className:Gp.a.discountIcon},"¥"),w.a.createElement("span",null,r))),w.a.createElement("div",{className:l,"aria-hidden":!0},n))},Xp=r("Bogp"),Jp=r.n(Xp);var Kp=function(e){var t,r=Object(I.useState)(!1),n=D()(r,2),a=n[0],i=n[1],s=e.titleDisplayName,c=e.timeDisplayName,u=e.ruleDisplayName,l=e.richRulesDesc,d=e.isDisable,p=e.goodsName,m=e.extraDisplayMap,f=e.showGoodsName,h=p||S()(m,"goods_name")||null,v=A()(Jp.a.promotionInfo,o()({},Jp.a.high,!!a||!!u)),y=A()(Jp.a.titleDisplayName,(t={},o()(t,Jp.a.gray,d),o()(t,Jp.a.hasDetail,!!h&&f),o()(t,Jp.a.detailShown,a),t));return w.a.createElement("div",{className:v},w.a.createElement("div",{className:y,onClick:h&&f?function(e){e.stopPropagation(),i(!a)}:null},l&&l.length>0?l.map((function(e){return w.a.createElement("span",{key:e.txt,style:{color:e.color||null}},e.txt)})):s),w.a.createElement("div",{className:Jp.a.timeDisplayName},c),a&&h&&w.a.createElement("div",{className:Jp.a.detail},h),u&&w.a.createElement("div",{className:Jp.a.ruleDisplayName},u))},Zp=r("SeBp"),$p=r.n(Zp);function em(e){return e.selected?w.a.createElement("svg",{t:"1614064061193",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35869"},w.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m219.648 307.2l-287.118222 320.398222-122.936889-123.050666L256 570.026667l192.284444 192.398222 352.483556-393.386667L731.648 307.2z","p-id":"35870"})):e.disable?w.a.createElement("svg",{t:"1614064112414",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"37940"},w.a.createElement("path",{d:"M511.941358 511.941358m-508.657427 0a508.657428 508.657428 0 1 0 1017.314855 0 508.657428 508.657428 0 1 0-1017.314855 0Z","p-id":"37941"})):w.a.createElement("svg",{t:"1614063231082",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"35744"},w.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2z m0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z","p-id":"35745"}))}var tm=function(e){var t,r=A()($p.a.selectIcon,(t={},o()(t,$p.a.selected,e.selected),o()(t,$p.a.disable,e.disable),t)),n="";return n=e.disable?"当前优惠未达门槛":e.selected?"当前优惠已选中":"当前优惠未选中",w.a.createElement("div",{className:r,style:e.style,"aria-label":n,role:"button"},w.a.createElement(em,e))},rm=r("dtTa"),nm=r.n(rm);var om=function(e){var t=A()(nm.a.usablePromotionItem,e.exClass);return w.a.createElement("div",{className:t,onClick:e.onSelect},w.a.createElement(Yp,e),w.a.createElement(Kp,e),w.a.createElement(tm,nt()({},e,{style:{height:".78rem"}})))},am=r("V/7h"),im=r.n(am);var sm=function(e){var t=e.skuThumbList,r=e.webpEnable;if(!t)return null;for(var n=t&&t.slice(),o=t.length%8?8-t.length%8:0,a=0;a<o;a++)n.push(0);return w.a.createElement("div",{className:im.a.skuList},t&&!!t.length&&n.map((function(e,t){return w.a.createElement("div",{className:im.a.skuBox,key:e.sku_id||t},e.thumb_url&&w.a.createElement(ht.default,{src:Object(P.generateCDNImageUrl)(e.thumb_url,{resizeWidth:300,webpEnable:r})}))})))};var cm=function(e){var t=e.unUsableDisplayDetail,r=e.webpEnable;return w.a.createElement("div",{className:im.a.disableList},t&&!!t.length&&t.map((function(e){var t=e.sku_thumb_url_volist||e.sku_thumb_url_vos;return w.a.createElement("div",{className:im.a.displayList,key:e.display_name},w.a.createElement("div",{className:im.a.displayTitle},e.display_name),w.a.createElement(sm,{webpEnable:r,skuThumbList:t}))})))},um=r("LrBD"),lm=r.n(um);var dm=function(e){var t=A()(lm.a.disablePromotionItem,e.exClass);return w.a.createElement(I.Fragment,null,w.a.createElement("div",{className:t,onClick:e.onSelect},w.a.createElement(Yp,nt()({},e,{high:!0,isDisable:!0})),w.a.createElement(Kp,nt()({},e,{isDisable:!0})),w.a.createElement(tm,nt()({},e,{disable:!0,style:{height:"1.03rem"}}))),!!e.canClick&&e.unUsableDisplayDetail&&w.a.createElement("div",{className:lm.a.disableWrap},w.a.createElement(cm,{webpEnable:e.webpEnable,unUsableDisplayDetail:e.unUsableDisplayDetail})))},pm=r("PlGL");function mm(e){var t;return c()(i.a.mark((function r(){var n,o,a,s=arguments;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=2;break}return r.abrupt("return");case 2:for(r.prev=2,n=s.length,o=new Array(n),a=0;a<n;a++)o[a]=s[a];return t=e.apply(this,o),r.next=7,t;case 7:return r.abrupt("return",r.sent);case 10:throw r.prev=10,r.t0=r.catch(2),r.t0;case 13:return r.prev=13,t=null,r.finish(13);case 16:case"end":return r.stop()}}),r,this,[[2,10,13,16]])})))}fm=function(e){return mm(e)};var fm,hm={isSpinnerShown:!1,index:0,timers:[],show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=hm.index;return hm.timers[hm.index]=setTimeout((function(){hm.isSpinnerShown||(Object(Se.show)(),hm.isSpinnerShown=!0)}),e),hm.index++,function(){return hm.hide(t)}},showWithoutBg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=hm.index;return hm.timers[hm.index]=setTimeout((function(){hm.isSpinnerShown||(Object(Se.showWithoutBg)(),hm.isSpinnerShown=!0)}),e),hm.index++,function(){return hm.hide(t)}},hide:function(e){var t=hm.timers[e];t&&(clearTimeout(t),hm.timers[e]=-1),hm.isSpinnerShown&&!hm.timers.some((function(e){return e>-1}))&&(Object(Se.hide)(),hm.isSpinnerShown=!1,hm.timers=[],hm.index=0)}},vm={mutiDelaySpinner:hm};function ym(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function gm(e){var t=e.elementType,r=e.onFocus,n=void 0===r?function(){}:r,a=e.onBlur,i=void 0===a?function(){}:a,s=e.autoFocus,c=void 0!==s&&s,u=e.autoFocusTime,l=void 0===u?0:u,d=e.className,p=e.placeholder,m=e.maxLength,f=e.type,h=void 0===f?"text":f,v=e.onChange,y=void 0===v?function(){}:v,g=e.defaultValue,b=e.value,_=e.id,k=e.extraParams,S=Object(I.useRef)(null);Object(I.useEffect)((function(){c&&setTimeout((function(){var e;null==S||null===(e=S.current)||void 0===e||e.focus(),Object(_e.getCurrentPlatform)().system===_e.SYSTEM.Android&&Object(ke.invokeBridgeCallNativeFun)("JSKeyboard","showKeyboard")}),l)}),[]);var P,O=(P=Object(_e.getCurrentPlatform)()).system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(P.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo,C=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ym(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ym(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:h,onFocus:function(){window.__currentInput.focusId=_,O&&(window.__currentInput.scrollYWhenFocus=window.scrollY),n()},onBlur:function(){var e;O&&function(e,t){setTimeout((function(){var r;(null===(r=window.__currentInput)||void 0===r?void 0:r.focusId)===t&&(window.scrollTo(0,e),window.__currentInput.focusId=null)}),0)}(null===(e=window.__currentInput)||void 0===e?void 0:e.scrollYWhenFocus,_),i()},ref:S,className:d,placeholder:p,maxLength:m,onChange:y,defaultValue:g,value:b,id:_},k);return"textarea"===t?w.a.createElement("textarea",C):w.a.createElement("input",C)}window.__currentInput={scrollYWhenFocus:0,focusId:null};var bm={memberRuleClick:{page_el_sn:5556244},memberProtoClick:{page_el_sn:5556242},sendCodeClick:{page_el_sn:5556240},changeClick:{page_el_sn:5556239},joinAndTakeCouponClick:{page_el_sn:5556088},mobileImpr:{op:"impr",page_el_sn:5556031},couponImpr:{op:"impr",page_el_sn:5556030}},_m=r("vVBQ"),km=r.n(_m),Sm=function(e){var t=e.memberRuleUrl,r=e.memberProtocolUrl;return w.a.createElement("div",{className:km.a.rule},w.a.createElement("p",null,"确认加入即表示同意"),w.a.createElement("p",null,w.a.createElement("span",{className:km.a.ruleText,onClick:function(){Object(O.sendClickMetrics)(null==bm?void 0:bm.memberRuleClick),t&&Si.default.uniformForward(t)}},"《会员规则》"),"及",w.a.createElement("span",{className:km.a.ruleText,onClick:function(){Object(O.sendClickMetrics)(null==bm?void 0:bm.memberProtoClick),r&&Si.default.uniformForward(r)}},"《会员授权协议》")))};function Im(e){return/^[1][3,4,5,7,8,9][0-9]{9}$/.test(e)}var wm,Pm=r("79/T"),Om=r.n(Pm);function Cm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;if("object"===me()(e)&&null!==e)if(e instanceof Array)for(var o in n=[],e)n[o]=Cm(e[o],t,r);else n={},ye()(e,(function(e,o){var a=r?Om()(o):o.includes("_")?he()(o):o;t.includes(o)?n[a]=e:n[a]=Cm(e,t,r)}));return n}var xm,Em,Dm=!1,Nm=[],Tm=function(){var e=c()(i.a.mark((function e(){var t,r,n,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,!Dm){e.next=3;break}return e.abrupt("return",new Promise((function(e){Nm.push(e)})));case 3:if(Dm=!0,t){e.next=11;break}return e.t0=Cm,e.next=8,Mm({method:Em.GET,url:"api/server/_stm"});case 8:e.t1=e.sent,r=(0,e.t0)(e.t1),t=r.serverTime;case 11:t=t||+Date.now(),n={serverTime:t},wm=new In.default(n),Nm.forEach((function(e){return e()})),Dm=!1;case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),jm=function(){var e=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wm){e.next=3;break}return e.next=3,Tm();case 3:return t=wm.messagePack(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Am(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Rm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Am(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Am(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.POST="POST",e.GET="GET"}(Em||(Em={}));var Mm=function(e){return Lm.apply(this,arguments)};function Lm(){return Lm=c()(i.a.mark((function e(t){var r,n,o,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{isAuth:!1,isFormat:!1,isAnti:!1},xm||(n=le.default.getInstance().getPageID(),xm=Object(ue.createDefaultAxios)({pageInfo:{pageId:n}})),!(null==r?void 0:r.isAuth)){e.next=9;break}return e.next=5,Object(de.getAccessToken)();case 5:if(e.sent){e.next=9;break}return e.next=9,Object(de.login)();case 9:if(t&&!t.defaultErrorHandler&&(t.defaultErrorHandler=function(){}),!(null==r?void 0:r.isAnti)){e.next=22;break}return e.t0=Object,e.t1={},e.t2=Rm,e.t3=Rm({},t.data||{}),e.t4={},e.next=18,jm();case 18:e.t5=e.sent,e.t6={anti_content:e.t5},e.t7=(0,e.t2)(e.t3,e.t4,e.t6),t.data=e.t0.assign.call(e.t0,e.t1,e.t7);case 22:return t.encodeNativeResponse=!1,e.next=25,xm(t);case 25:if(o=e.sent,!(null==r?void 0:r.isFormat)){e.next=28;break}return e.abrupt("return",Cm(o));case 28:return e.abrupt("return",o);case 29:case"end":return e.stop()}}),e)}))),Lm.apply(this,arguments)}var Bm=function(e){return Mm({method:Em.POST,url:"api/rimini/mall_member/query_join_member_popup",data:e},{isAuth:!0,isFormat:!0,isAnti:!0}).then((function(e){return(null==e?void 0:e.result)||{}}))},Fm=function(e){return Mm({method:Em.POST,url:"api/rimini/mall_member/mobile/code/auth/query",data:e},{isFormat:!0,isAnti:!0}).then((function(e){return(null==e?void 0:e.result)||{}})).catch((function(){return{}}))},Um=function(e){var t=e.mallId,r=e.buttonText,n=(e.autoFocus,e.joinMemberCallback),a=e.memberRuleUrl,s=e.memberProtocolUrl,u=Object(I.useRef)(null),l=Object(I.useRef)(null),d=Object(I.useState)(""),p=D()(d,2),m=p[0],f=p[1],h=Object(I.useState)(!1),v=D()(h,2),y=v[0],g=v[1],b=Object(I.useState)(""),_=D()(b,2),k=_[0],S=_[1],P=Object(I.useRef)(""),C=Object(I.useRef)(!1),x=Object(I.useState)(""),E=D()(x,2),N=E[0],T=E[1],j=Object(I.useRef)(),R=Object(I.useState)("发送验证码"),M=D()(R,2),L=M[0],B=M[1];Object(I.useEffect)((function(){return function(){clearInterval(j.current)}}),[]);var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=e--;C.current=!0,T(m),g(!1),B("重新发送(".concat(t,")")),j.current&&clearInterval(j.current),j.current=setInterval((function(){--t>0?B("重新发送(".concat(t,")")):(C.current=!1,B("发送验证码"),T(""),g(!0),clearInterval(j.current))}),1e3)},U=function(){var e=c()(i.a.mark((function e(){var r,n,o,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(O.sendClickMetrics)(null==bm?void 0:bm.sendCodeClick),Im(m)){e.next=4;break}return Object(ce.info)("请输入正确的手机号"),e.abrupt("return");case 4:if(m!==N||!C.current){e.next=6;break}return e.abrupt("return");case 6:return r={mobile:m,mobile_type:1,digits:6,scene:"1000038",mall_id:+t},e.next=9,Fm(r);case 9:n=e.sent,a=(o=n||{}).result,s=o.mobileId,a?(F(),P.current=s,null==l||null===(c=l.current)||void 0===c||c.focus()):Object(ce.info)("验证码发送失败");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=mm(c()(i.a.mark((function e(){var r,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(O.sendClickMetrics)(null==bm?void 0:bm.joinAndTakeCouponClick),Im(m)){e.next=4;break}return Object(ce.info)("请输入正确的手机号"),e.abrupt("return");case 4:if(k){e.next=7;break}return Object(ce.info)("请输入验证码"),e.abrupt("return");case 7:if(/^[0-9]{6}$/.test(k)){e.next=10;break}return Object(ce.info)("验证码不正确，请重新输入"),e.abrupt("return");case 10:return o={mobile_id:P.current,code:k,scene:"1000038",mall_id:+t},a=(null==vm||null===(r=vm.mutiDelaySpinner)||void 0===r?void 0:r.showWithoutBg)&&vm.mutiDelaySpinner.showWithoutBg(),e.next=14,i=o,Mm({method:Em.POST,url:"api/rimini/mall_member/mobile/code/auth/verify",data:i},{isFormat:!0,isAnti:!0}).then((function(e){return(null==e?void 0:e.result)||{}})).catch((function(){return{}}));case 14:(null==(s=e.sent)?void 0:s.sessionId)?n&&n(null==s?void 0:s.sessionId):Object(ce.info)("验证码不正确，请重新输入"),a&&a();case 17:case"end":return e.stop()}var i}),e)}))));return w.a.createElement("div",{className:km.a.joinContent},w.a.createElement("div",{className:km.a.phoneContent},w.a.createElement(gm,{onChange:function(e){var t,r=(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"",n=Im(r)&&(!C.current||r!==N);k&&y&&!n&&S(""),g(n),f(r)},value:m,className:km.a.inputBox,placeholder:"请输入手机号",maxLength:11,elementType:"input",type:"tel",id:"phone",extraParams:{ref:u}}),!!m&&w.a.createElement("i",{className:km.a.clearButton,onClick:function(){var e;f(""),S(""),g(!1),null==u||null===(e=u.current)||void 0===e||e.focus()}})),w.a.createElement("div",{className:km.a.phoneContent},w.a.createElement(gm,{onChange:function(e){var t,r=(null==e||null===(t=e.target)||void 0===t?void 0:t.value)||"";S(r)},value:k,className:A()(km.a.inputBox,km.a.codeInputBox),placeholder:"请输入验证码",maxLength:6,elementType:"input",type:"tel",id:"code",extraParams:{ref:l}}),w.a.createElement("span",{className:A()(km.a.verifyCode,o()({},km.a.verifyCodeActive,y)),onClick:U},m!==N?"发送验证码":L)),w.a.createElement("div",{className:km.a.joinBtn,onClick:H},r||"加入会员并领取"),w.a.createElement(Sm,{memberRuleUrl:a,memberProtocolUrl:s}))},Hm=function(e){var t=e.content,r=e.modifyNumber,n=e.joinMemberCallback,o=e.mallId,a=t||{},i=a.userMobile,s=a.brandLogoUrl,c=a.buttonText,u=a.coupon,l=a.popupTitle,d=a.memberRuleUrl,p=a.memberProtocolUrl,m=(i||{}).fuzzyMobile,f=u||{},h=f.discount,v=f.richRulesDesc,y=f.tagDesc,g=f.timeDisplayName,b=Xt()((function(){Object(O.sendClickMetrics)(null==bm?void 0:bm.joinAndTakeCouponClick),n()}),300);return w.a.createElement("div",null,!!s&&w.a.createElement("div",{className:km.a.logoWrap},w.a.createElement(ht.default,{className:km.a.logo,src:s})),w.a.createElement("div",{className:km.a.container},w.a.createElement("div",{className:km.a.titleWrap},w.a.createElement("div",{className:km.a.title},l)),w.a.createElement(tt.a,{trackingInfo:null==bm?void 0:bm.couponImpr},w.a.createElement("div",{className:km.a.couponContent},w.a.createElement("div",{className:km.a.couponItem},w.a.createElement("div",{className:km.a.couponPrice},w.a.createElement("i",null,"¥"),Object(P.priceCent)(h||0)),w.a.createElement("div",{className:km.a.couponInfo},w.a.createElement("p",null,(v||[]).map((function(e){return e.txt}))),w.a.createElement("p",null,g)),!!y&&w.a.createElement("div",{className:km.a.couponTag},y)))),w.a.createElement("div",{className:km.a.joinContent},m?w.a.createElement(w.a.Fragment,null,w.a.createElement(tt.a,{trackingInfo:null==bm?void 0:bm.mobileImpr},w.a.createElement("div",{className:km.a.phoneContent,onClick:r},w.a.createElement("p",null,"手机号：",m),w.a.createElement("p",null,"修改"))),w.a.createElement("div",{className:km.a.joinBtn,onClick:b},c||"加入会员并领取"),w.a.createElement(Sm,{memberRuleUrl:d,memberProtocolUrl:p})):w.a.createElement(Um,{joinMemberCallback:n,mallId:o,buttonText:c,memberRuleUrl:d,memberProtocolUrl:p}))))},Vm=function(e){var t=e.data,r=e.content,n=e.showBack,o=e.joinMemberCallback,a=e.goBack,i=void 0===a?function(){}:a;return w.a.createElement("div",{className:km.a.phoneContainer},w.a.createElement("div",{className:km.a.phoneTitleWrap},n&&w.a.createElement("div",{className:km.a.backBtnWrap,onClick:i},w.a.createElement("div",{className:km.a.backBtn})),w.a.createElement("div",{className:km.a.title},"修改授权手机号")),w.a.createElement(Um,{joinMemberCallback:o,mallId:null==t?void 0:t.mallId,buttonText:null==r?void 0:r.buttonText,memberRuleUrl:null==r?void 0:r.memberRuleUrl,memberProtocolUrl:null==r?void 0:r.memberProtocolUrl}))},zm=Object(I.forwardRef)((function(e,t){var r=e.data,n=void 0===r?{}:r,o=e.onShowFail,a=void 0===o?function(){}:o,s=e.onSuccess,u=void 0===s?function(){}:s,l=e.spinnerTime,d=Object(I.useState)(!1),p=D()(d,2),m=p[0],f=p[1],h=Object(I.useState)(0),v=D()(h,2),y=v[0],g=v[1],b=Object(I.useState)({}),_=D()(b,2),k=_[0],S=_[1],P=n.mallId,C=n.couponId,x=n.sceneId,E=n.merchantTag;Object(I.useImperativeHandle)(t,(function(){return{show:(e=c()(i.a.mark((function e(){var t,r,n,o,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s.length>0&&void 0!==s[0]?s[0]:0,e.next=3;break;case 3:return n=(null==vm||null===(t=vm.mutiDelaySpinner)||void 0===t?void 0:t.show)&&vm.mutiDelaySpinner.show(l||300),e.prev=4,e.next=7,Bm({mall_id:+P,coupon_batch_sn:C,scene_id:x});case 7:if(o=e.sent){e.next=11;break}return Object(ce.info)("请稍后再试～"),e.abrupt("return");case 11:S(o),f(!0),g(r),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),Object(ce.info)((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"请稍后再试～"),a&&a(e.t0);case 20:return e.prev=20,n&&n(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,16,20,23]])}))),function(){return e.apply(this,arguments)}),hide:function(){f(!1)}};var e}));var N=function(e){var t,r=null==k||null===(t=k.userMobile)||void 0===t?void 0:t.mobileId,n={mall_id:+P||0,scene_id:x,batch_sn:C,merchant_tag:E};e?Object.assign(n,{mobile_session_id:e}):Object.assign(n,{mobile_id:r}),function(e){return Mm({method:Em.POST,url:"api/promotion/join_and_take_mall_member_coupon",data:e},{isAuth:!0,isFormat:!0,isAnti:!0}).then((function(e){return e||{}}))}(n).then((function(e){(null==e?void 0:e.couponId)?(Object(ce.info)((null==e?void 0:e.toast)||"已加入会员并成功领券"),u&&u(e),f(!1)):Object(ce.info)("请稍后再试～")})).catch((function(e){var t,r,n,o,a,i;2000004===(null==e?void 0:e.errorCode)&&(null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error_toast)?(f(!1),ft({title:null==e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.error_toast,confirmButtonLabel:"知道了",onConfirm:function(){f(!0)},onClose:function(){f(!0)}})):Object(ce.info)((null==e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error_toast)||"请稍后再试～")}))};return m?w.a.createElement(pm.a,null,1===y||2===y?w.a.createElement(Vm,{data:n,content:k,showBack:2===y,joinMemberCallback:N,goBack:function(){g(0)}}):w.a.createElement(Hm,{content:k,modifyNumber:function(){Object(O.sendClickMetrics)(null==bm?void 0:bm.changeClick),g(2)},joinMemberCallback:N,mallId:P}),w.a.createElement(pm.a.CloseButton,{onClick:function(){return f(!1)}})):null})),Wm=zm,Qm=r("Ai8/"),qm=r.n(Qm),Gm=Tp.getInstance();var Ym=function(e){var t=Object(I.useRef)(null),r=e.canTake,n=e.index,a=e.buttonDesc,s=e.buttonSubDesc,u=e.displayType,l=e.goodsInfo,d=e.batchSn,p=e.isFavCoupon,m=e.isBrandVipCoupon,f=e.needJoinBrandVip,h=e.receiveCallback,v=A()(qm.a.btn,qm.a[Sp[u]],o()({},qm.a.isTakenOut,!r)),y=l.mallId,g=!1,b=function(){var e=c()(i.a.mark((function e(){var r,o,a,s,c,u,l,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:if(g=!0,e.prev=3,!m||!f){e.next=7;break}return t.current.show(),e.abrupt("return");case 7:if(!p){e.next=14;break}return e.next=10,lp({batchSn:d,likeFrom:101003,merchantTag:52,mallId:y});case 10:r=e.sent,Gm.receiveLikeCouponInfo(),e.next=19;break;case 14:return e.next=16,op({batchSn:d,merchantTag:52,mallId:y});case 16:r=e.sent,(o=S()(r,"higher_priority_take_toast"))?Object(ce.html)(o,{style:{whiteSpace:"pre-line"},ContainerProps:{style:{height:"85%",top:"auto"}}}):Te("领取成功");case 19:h&&h({data:r,index:n}),Dl({groupId:"20203",customTags:{event:"receivePromotion"}}),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(3),(a=e.t0.errorCode)&&((s=wp[a])?(Te(s[0]),c=Pp[a],h&&h({index:n,buttonText:c})):(u=e.t0.response||{},l=u.data,v=l&&l.error_toast||kp,Te(v)));case 27:return e.prev=27,g=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,23,27,30]])})));return function(){return e.apply(this,arguments)}}(),_=A()(qm.a.receivePromotionItem,e.exClass);return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:_},w.a.createElement(Yp,e),w.a.createElement(Kp,e),w.a.createElement("div",{className:qm.a.buttonWrap},w.a.createElement("div",{className:v,onClick:function(){r&&b()}},a,!!s&&w.a.createElement("div",{className:qm.a.hasNum},s)))),w.a.createElement(Wm,{ref:t,data:{mallId:y,couponId:d,sceneId:1006,merchantTag:3},onShowFail:function(e){null==e||e.errorCode},onSuccess:function(e){h&&h({data:{promotion_identity_vo:e.promotionIdentityVo},index:n})}}))},Xm=r("0y1f"),Jm=r.n(Xm),Km=Tp.getInstance();function Zm(e){var t=e.promotionButtonDesc,r=S()(t,"display_items.0")||{},n=r.font_color,o=r.text,a={color:n};return w.a.createElement("span",{style:a},o)}var $m=function(e){var t=Object(I.useRef)(null),r=A()(Jm.a.disablePromotionItem,e.exClass),n=e.isRetrieve,o=e.isBestJusableOrRetrieve,a=e.displayType,s=e.extraDisplayMap,u=e.receiveCallback,l=s||{},d=l.batch_sn,p=l.is_brand_vip_coupon,m=l.is_fav_coupon,f=l.need_join_brand_vip,h=l.promotion_button_desc,v=l.mall_id,y=!1,g=function(){var e=c()(i.a.mark((function e(){var r,n,o,a,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:if(y=!0,e.prev=3,!p||!f){e.next=7;break}return t.current&&t.current.show(),e.abrupt("return");case 7:if(!m){e.next=13;break}return e.next=10,lp({batchSn:d,likeFrom:101003,merchantTag:52,mallId:v});case 10:Km.receiveLikeCouponInfo(),e.next=18;break;case 13:return e.next=15,op({batchSn:d,merchantTag:52,mallId:v});case 15:r=e.sent,(n=S()(r,"higher_priority_take_toast"))?Object(ce.html)(n,{style:{whiteSpace:"pre-line"},ContainerProps:{style:{height:"85%",top:"auto"}}}):Te("领取成功");case 18:u(),Dl({groupId:"20203",customTags:{event:"receivePromotion"}}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),(o=e.t0.errorCode)&&((a=wp[o])?(Te(a[0]),u()):(s=e.t0.response||{},c=s.data,l=c&&c.error_toast||kp,Te(l)));case 26:return e.prev=26,y=!1,e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[3,22,26,29]])})));return function(){return e.apply(this,arguments)}}(),b=null;if(n){var _=A()(Jm.a.btn,Jm.a[Sp[a]]);b=w.a.createElement("div",{className:Jm.a.buttonWrap,onClick:g},w.a.createElement("div",{className:_},w.a.createElement(Zm,{promotionButtonDesc:h})))}return w.a.createElement(I.Fragment,null,w.a.createElement("div",{className:r},w.a.createElement(Yp,e),w.a.createElement(Kp,nt()({},e,{isDisable:!o,ruleDisplayName:null})),!n&&h&&w.a.createElement("div",{className:Jm.a.promotionButtonDesc},w.a.createElement(Zm,{promotionButtonDesc:h})),b),w.a.createElement(Wm,{ref:t,data:{mallId:v,couponId:d,sceneId:1006,merchantTag:3},onShowFail:function(e){return null},onSuccess:function(e){return null==u?void 0:u()}}))},ef=r("cIxk"),tf=r.n(ef);var rf=function(e){var t=A()(tf.a.dontUseItem,e.exClass);return w.a.createElement("div",{className:t,onClick:e.onSelect,"aria-label":"暂不使用优惠",role:"button"},w.a.createElement("div",{className:tf.a.label},"暂不使用优惠"),w.a.createElement(tm,nt()({style:{height:".37rem"}},e)))},nf=r("ooc8"),of=r.n(nf),af=function(e){var t=e.fullBackName,r=e.rewardStatus,n=e.processStatusDesc,a=e.processPercentStr,i=e.currentConsumeAmount,s=e.needAmount,c=e.rewardAmount,u=e.rewardImgUrl,l=e.rewardName,d=e.exClass,p=A()(of.a.redPacketItem,d,o()({},of.a.reward,r));return w.a.createElement("div",{className:p},w.a.createElement("div",{className:of.a.redPacket,style:{backgroundImage:u&&"url(".concat(u,")")||"none"},"aria-label":"¥".concat(c).concat(l),role:"img"},w.a.createElement("div",{className:of.a.couponAmount,"aria-hidden":!0},w.a.createElement("span",{className:of.a.priceIcon},"¥"),w.a.createElement("span",{className:of.a.num},c)),w.a.createElement("div",{className:of.a.couponTag,"aria-hidden":!0},w.a.createElement("div",{className:of.a.couponTagTxt},l))),w.a.createElement("div",{className:of.a.redPacketInfo},w.a.createElement("div",{className:of.a.fullBackName},t),w.a.createElement("div",{className:of.a.processStatusDesc,"aria-label":n.map((function(e){return e.text})).join(""),role:"img"},n.map((function(e,t){return w.a.createElement("span",{key:t,"aria-hidden":!0,style:{color:e.font_color,fontSize:e.font_size/100+"rem"}},e.text)}))),!r&&w.a.createElement("div",{className:of.a.progress},w.a.createElement("div",{className:of.a.progressBarOuter},w.a.createElement("div",{className:of.a.progressBarInner,style:{width:i/s*100+"%"}})),a)))},sf=r("KZJt"),cf=r.n(sf),uf=function(e){var t=e.list;return w.a.createElement(w.a.Fragment,null,t&&t.length>0&&t.map((function(e,t){var r={color:e.font_color,background:e.bg_color},n=A()(cf.a.displayItem,cf.a["promotion".concat(e.display_type)]);return 100===e.display_type?w.a.createElement("img",{style:{height:e.height/100+"rem",width:e.width/100+"rem"},src:Object(P.generateCDNImageUrl)(e.url)}):w.a.createElement("span",{key:t,className:n,style:r},e.text)})))},lf=r("xFQA"),df=r.n(lf),pf=rp.getInstance(),mf=Tp.getInstance(),ff=function(e){var t=e.promotionLists,r=e.useBestPromotion,n=Object(I.useState)(!0),a=D()(n,2),s=a[0],u=a[1],l=Object(I.useState)(!0),d=D()(l,2),p=d[0],m=d[1],f=t||{},h=f.shopPromotionTitle,v=f.retrievableShopPromotions,y=f.commonShopPromotions,g=f.usableShopPromotions,b=f.unusableShopPromotions,_=f.platformPromotionTitle,k=f.platformPromotionExtraDisplay,O=f.usablePlatformPromotions,C=f.unusablePlatformPromotions,x=f.otherUnusablePlatformPromotions,E=f.selectedShopPromotion,N=f.mallFullBackDetails,T=f.crossFullBackDetails,j=f.selectedPlatformPromotion,R=f.postagePromotion,M=!Vn()(g)||!Vn()(b),B=!Vn()(O)||!Vn()(C),F=S()(e,"ocData"),U=S()(F,"goodsInfo.mallId"),H=S()(F,"goodsInfo.goodsId"),V=S()(F,"goodsInfo.skuId"),z=S()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},W=S()(z,"floatTitleDisplay"),Q=S()(z,"floatCategoryDisplay"),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length>2?[]:t.slice(0,2-e.length)},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length+t.length>2},Y=function(){var e=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pf.needReload=!0,e.next=3,mf.fetchPromotionList({refreshAfterReceive:!0});case 3:(t=e.sent)&&!Vn()(t.retrievableShopPromotions)&&(t.retrievableShopPromotions=v),t&&mf.setPromotionLists(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,n=t.index,o=t.buttonText,pf.needReload=!0,a=v[n],s=r.usable_count_text,c=a.canTakenCount-1,u={canTakenCount:c,buttonDesc:c>0?_p:gp},o&&(u={canTakenCount:0,buttonDesc:o}),s&&(u.buttonSubDesc=s),Object.assign(a,u),a.displayType===vp&&(l=v.filter((function(e){return e.displayType===vp}))).length>1&&l.forEach((function(e){e.canTakenCount>0&&2===e.takeStatus&&(e.buttonDesc=bp)})),e.next=13,mf.fetchPromotionList({refreshAfterReceive:!0});case 13:(d=e.sent)&&!Vn()(d.retrievableShopPromotions)&&(d.retrievableShopPromotions=v),d&&mf.setPromotionLists(d);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=c()(i.a.mark((function e(){var t,r,n,o,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.selectedShopPromotion,n=t.selectPlatformPromotion,e.next=3,mf.fetchPromotionList({selectedShopPromotion:r,selectPlatformPromotion:n});case 3:(o=e.sent)&&mf.setPromotionLists(o);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:df.a.promotionList},w.a.createElement(Qp,{titleVo:h,noBorder:!M}),w.a.createElement("div",{className:df.a.postagePromotion},w.a.createElement(uf,{list:R})),r&&!Vn()(y)&&(s?y.slice(0,2):y).map((function(e,t){return w.a.createElement($m,nt()({exClass:df.a.promotionItem,key:t,receiveCallback:Y},e))})),r&&(null==y?void 0:y.length)>2&&w.a.createElement("div",{className:A()(df.a.foldItem,df.a.promotionItem,o()({},df.a.foled,s)),onClick:function(){return u(!s)}},w.a.createElement("span",null,w.a.createElement("i",null,s?"展开更多店铺优惠":"收起"),w.a.createElement(L,null))),!r&&!Vn()(g)&&(s?g.slice(0,2):g).map((function(t){return t.buttonDesc?w.a.createElement(Ym,nt()({exClass:df.a.promotionItem,goodsInfo:{goodsId:H,skuId:V,mallId:U},key:t.promotionUniqueNo,receiveCallback:function(e){var t=e.data;pf.needReload=!0,t.promotion_identity_vo&&(Dl({groupId:"20203",customTags:{event:"selectShopPromotion"}}),J({selectedShopPromotion:{promotionIdentityVo:t.promotion_identity_vo},selectPlatformPromotion:j||mf.notUsePromotion.platform}))},canTake:!0},t,e)):w.a.createElement(om,nt()({exClass:df.a.promotionItem,key:t.promotionUniqueNo},t,e,{selected:!!t.checkStatus,onSelect:c()(i.a.mark((function e(){var r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.batchSn){e.next=23;break}if(e.prev=1,!t.isFavCoupon){e.next=8;break}return e.next=5,lp({batchSn:t.batchSn,likeFrom:101003,merchantTag:52,mallId:U});case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,op({batchSn:t.batchSn,merchantTag:52,mallId:U});case 10:r=e.sent;case 11:Dl({groupId:"20203",customTags:{event:"receivePromotion"}}),r.promotion_identity_vo&&(pf.needReload=!0,Dl({groupId:"20203",customTags:{event:"selectShopPromotion"}}),J({selectedShopPromotion:{promotionIdentityVo:r.promotion_identity_vo},selectPlatformPromotion:j||mf.notUsePromotion.platform})),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(1),n=e.t0.response,o=(n||{}).data,a=S()(o,"error_toast")||"领取优惠失败，请重试",Object(ce.info)(a);case 21:e.next=24;break;case 23:t.checkStatus?J({selectedShopPromotion:mf.notUsePromotion.shop,selectPlatformPromotion:j||mf.notUsePromotion.platform}):(Dl({groupId:"20203",customTags:{event:"selectShopPromotion"}}),J({selectedShopPromotion:t,selectPlatformPromotion:j||mf.notUsePromotion.platform}));case 24:case"end":return e.stop()}}),e,null,[[1,15]])})))}))})),!r&&!Vn()(b)&&(s?q(g,b):b).map((function(e,t){return w.a.createElement(dm,nt()({onSelect:function(){Object(ce.info)("此优惠暂不满足使用条件")},exClass:df.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e))})),!r&&G(g,b)&&w.a.createElement("div",{className:A()(df.a.foldItem,df.a.promotionItem,o()({},df.a.foled,s)),onClick:function(){return u(!s)}},w.a.createElement("span",null,w.a.createElement("i",null,s?"展开更多店铺优惠":"收起"),w.a.createElement(L,null))),!r&&!Vn()(g)&&w.a.createElement(rf,{exClass:df.a.promotionItem,selected:!E,onSelect:function(){E&&J({selectedShopPromotion:mf.notUsePromotion.shop,selectPlatformPromotion:j||mf.notUsePromotion.platform})}})),(B||_)&&w.a.createElement("div",{className:df.a.promotionList},w.a.createElement(Qp,{titleVo:_,noBorder:!B&&!k}),k&&w.a.createElement(Qp,{titleVo:k,noBorder:!B}),!Vn()(O)&&(p?O.slice(0,2):O).map((function(t,r){return w.a.createElement(om,nt()({exClass:df.a.promotionItem,key:r},t,e,{selected:!!t.checkStatus,onSelect:c()(i.a.mark((function e(){var r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.batchSn){e.next=17;break}return e.prev=1,e.next=4,pp({batchSn:t.batchSn,merchantTag:52});case 4:r=e.sent,Dl({groupId:"20203",customTags:{event:"receivePromotion"}}),r.promotion_identity_vo&&(pf.needReload=!0,Dl({groupId:"20203",customTags:{event:"selectPlatformPromotion"}}),J({selectedShopPromotion:E||mf.notUsePromotion.shop,selectPlatformPromotion:{promotionIdentityVo:r.promotion_identity_vo}})),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(1),n=e.t0.response,o=(n||{}).data,a=S()(o,"error_toast")||"领取优惠失败，请重试",Object(ce.info)(a);case 15:e.next=18;break;case 17:t.checkStatus?J({selectedShopPromotion:E||mf.notUsePromotion.shop,selectPlatformPromotion:mf.notUsePromotion.platform}):(Dl({groupId:"20203",customTags:{event:"selectPlatformPromotion"}}),J({selectedShopPromotion:E||mf.notUsePromotion.shop,selectPlatformPromotion:t}));case 18:case"end":return e.stop()}}),e,null,[[1,9]])})))}))})),!Vn()(C)&&(p?q(O,C):C).map((function(e,t){var n=r?$m:dm;return w.a.createElement(n,nt()({onSelect:function(){Object(ce.info)("此优惠暂不满足使用条件")},exClass:df.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e))})),G(O,C)&&w.a.createElement("div",{className:A()(df.a.foldItem,df.a.promotionItem,o()({},df.a.foled,p)),onClick:function(){return m(!p)}},w.a.createElement("span",null,w.a.createElement("i",null,p?"展开更多平台优惠":"收起"),w.a.createElement(L,null))),!Vn()(O)&&w.a.createElement(rf,{exClass:df.a.promotionItem,selected:!j,onSelect:function(){j&&J({selectedShopPromotion:E||mf.notUsePromotion.shop,selectPlatformPromotion:mf.notUsePromotion.platform})}})),!r&&!Vn()(v)&&w.a.createElement("div",{className:df.a.promotionList},w.a.createElement(Qp,{title:"领取更多优惠"}),v.map((function(t,r){var n=t.takeStatus===yp&&t.canTakenCount;return w.a.createElement(Ym,nt()({exClass:df.a.promotionItem,goodsInfo:{goodsId:H,skuId:V,mallId:U},index:r,key:t.batchSn,receiveCallback:X,canTake:n},t,e))}))),!Vn()(x)&&x.map((function(e,t){var n=r?$m:dm;return w.a.createElement(n,nt()({onSelect:function(){Object(ce.info)("此优惠暂不满足使用条件")},isRuleDisable:1,exClass:df.a.promotionItem,key:t,unUsableDisplayDetail:e.unusablePromotionDetail},e))})),!Vn()(Q)&&w.a.createElement("div",{className:df.a.promotionList},w.a.createElement(Qp,{titleVo:W,title:"支付优惠"}),w.a.createElement("div",{className:df.a.float,"aria-label":Q&&Q.reduce((function(e,t){return 100===t.display_type?e:e+t.text}),""),role:"button"},Q&&Q.map((function(e,t){var r={color:e.font_color,background:e.bg_color},n=A()(df.a.displayItem,df.a["promotion".concat(e.display_type)]);return 100===e.display_type?w.a.createElement("img",{style:{height:e.height/100+"rem",width:e.width/100+"rem"},src:Object(P.generateCDNImageUrl)(e.url)}):w.a.createElement("span",{key:t,className:n,style:r},e.text)})))),(!Vn()(N)||!Vn()(T))&&w.a.createElement("div",{className:df.a.promotionList},w.a.createElement(Qp,{title:"拼单返现"}),!Vn()(N)&&N.map((function(e,t){return w.a.createElement(af,nt()({key:t,exClass:df.a.promotionItem},e))})),!Vn()(T)&&T.map((function(e,t){return w.a.createElement(af,nt()({key:t,exClass:df.a.promotionItem},e))}))))},hf=rp.getInstance(),vf=Tp.getInstance();function yf(e){var t=e.promotionLists,r=Object(I.useContext)(Fp).glide,n=(t||{}).promotionDisplay,a=Object(I.useRef)();Object(I.useEffect)((function(){var e=a&&a.current;return Object(P.disableScroll)(e),function(){Object(P.enableScroll)()}}),[]);var s=t||{},u=s.usableShopPromotions,l=s.usablePlatformPromotions,d=s.selectedShopPromotion,p=s.selectedPlatformPromotion,m=s.notHasSelectablePromotion,f=function(){var t=c()(i.a.mark((function t(){var n,o,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!vf.isFetching){t.next=2;break}return t.abrupt("return");case 2:return n=S()(e,"ocData"),o=S()(n,"goodsInfo.mallId"),a={use_platform_promotion_request:{not_use:!1,promotion_identity_vo:null},use_shop_promotion_requests:[]},s={promotion_identity_vos:[],mall_id:o,not_use:!1},Vn()(u)||m||(d?s.promotion_identity_vos=[d.promotionIdentityVo]:s.not_use=!0,a.use_shop_promotion_requests=[s]),Vn()(l)||(p?a.use_platform_promotion_request.promotion_identity_vo=p.promotionIdentityVo:a.use_platform_promotion_request.not_use=!0),t.next=10,hf.refresh({promotion_vo:a});case 10:r();case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=A()(df.a.titleContainer,o()({},df.a.hasBorder,Vn()(n)));return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:h},w.a.createElement("div",{className:df.a.title},w.a.createElement("span",{className:df.a.text},"优惠详情"),w.a.createElement("div",{className:df.a.close,onClick:f},w.a.createElement("div",{className:df.a.closeIcon,role:"button","aria-label":"关闭优惠浮层"})))),!Vn()(n)&&w.a.createElement("div",{className:df.a.promotionDisplay},n.map((function(e,t){var r={color:e.font_color,fontSize:e.font_size};return w.a.createElement("span",{key:t,style:r},e.text)}))),w.a.createElement("div",{className:"".concat(df.a.content," ").concat(Vn()(n)?"":df.a.hasPromotionDisplay),ref:a},w.a.createElement(ff,e)),w.a.createElement("div",{className:df.a.bottom,"aria-label":"确认",role:"button"},w.a.createElement("div",{className:df.a.btn,onClick:f,"aria-hidden":!0},"确认")))}var gf=function(e){var t=Object(I.useState)(!1),r=D()(t,2),n=r[0],o=r[1],a=Object(I.useState)({}),i=D()(a,2),s=i[0],c=i[1];Object(I.useEffect)((function(){vf.initPromotionFunc({togglePromotionPopupVisibleFunc:function(e){return o(e)},setPromotionListsFunc:function(e){return c(e)}})}),[]);return n?w.a.createElement(Vp,{title:"优惠详情",onCloseIconClicked:function(){o(!1)},contentId:"promotion-popup"},w.a.createElement(yf,nt()({promotionLists:s},e))):null},bf=r("JiL4"),_f=r.n(bf),kf=Tp.getInstance(),Sf=rp.getInstance();function If(e){var t=e.displayItems,r=void 0===t?[]:t,n=e.hasDdpayPromotion,o=e.goodsId;return Vn()(r)?null:r.map((function(e,t){var r={color:e.font_color,background:e.bg_color},a=A()(_f.a.displayItem,_f.a["promotion".concat(e.display_type)]),i=n&&3===e.display_type?{page_el_sn:6127854,goods_id:o}:{};return w.a.createElement(tt.a,{key:t,trackingInfo:i},w.a.createElement("span",{className:a,style:r},e.text))}))}var wf=function(e){var t,r=e.selectedSkuID,n=e.isMorganFetching,a=S()(e,"ocData.goodsInfo.goodsId"),s=S()(e,"ocData.promotionInfo.totalPromotionsConsult")||{},u=S()(e,"ocData.promotionInfo.retrievePromotion")||{},l=r&&!n&&s.clickable,d=s.categoryName,p=s.categoryDisplay,m=s.discountPayChannel,f=s.discountPayCategoryDisplay,h=s.defaultCategoryDisplay,v=s.switchPaymentMethodToast,y=(S()(e,"ocData.promotionInfo.platformRetrievePromotion")||{}).promotionStatus,g=S()(e,"ocData.selectedChannel"),b=u.promotionStatus,_=b===sa&&m&&g&&g.channelName!==m;if(r&&Vn()(p)||!r&&Vn()(h))return null;t=r&&!n?m&&g&&g.channelName===m&&f?f:p:h;var k,I,P=function(){var e=c()(i.a.mark((function e(){var t,r,n,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:if(t=b===sa&&m&&g&&g.channelName!==m,y!==ca||!t){e.next=6;break}return kf.reloadToDaCu(),e.abrupt("return");case 6:if(y!==ca){e.next=9;break}return kf.batchAutoTakeCouponAndReloadToDaCu(),e.abrupt("return");case 9:if(!t){e.next=18;break}return e.next=12,kf.ddpPromotionClick();case 12:return e.next=14,Sf.selectedChannel({channelName:m});case 14:return Sf.refreshAfterSelectedChannel(),Te(v||"已切换为多多支付付款",{duration:3}),Object(O.sendClickMetrics)({page_el_sn:"6127854",op:"click",goods_id:a}),e.abrupt("return");case 18:return e.next=20,kf.autoTakeCouponOnPromotionCellClickV2();case 20:if(!(r=e.sent)||!r.blockPopup){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,kf.fetchPromotionList();case 25:n=e.sent,s=(o=kf||{}).togglePromotionPopupVisible,c=o.setPromotionLists,n&&(Dl({groupId:"20203",customTags:{event:"showPromotionPopup"}}),c&&c(n),setTimeout((function(){s&&s(!0)}),0));case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=A()(_f.a.stripe,o()({},_f.a.hasArrow,l||!1)),x=A()(_f.a.desc,o()({},_f.a.hasArrow,l||!1));return w.a.createElement("div",{className:A()(_f.a.promotionCell,o()({},_f.a.promotionCellActive,l)),"aria-label":(I=d,(null===(k=t)||void 0===k?void 0:k.length)>0&&t.forEach((function(e){return I+=e.text})),I),role:"img"},w.a.createElement("div",{className:C,onClick:P,"aria-hidden":!0},w.a.createElement("span",null,d),w.a.createElement("span",{className:x},w.a.createElement(If,{displayItems:t,hasDdpayPromotion:_,goodsId:a}),l&&w.a.createElement(L,null))))},Pf=r("YU58"),Of=r.n(Pf),Cf=function(e){var t=e.tag,r=e.name,n=e.goodsImg,o=e.deviceType,a=e.specs,i=e.onDescClick,s=e.recycleOrderSubTitle,c=e.bottomTag,u="old"===o;return w.a.createElement("div",{className:Of.a.deviceInfo},w.a.createElement("div",{className:Of.a.deviceImg},n&&w.a.createElement(ht.default,{src:Object(P.generateCDNImageUrl)(n)}),w.a.createElement("span",{className:Of.a.tag},t),u&&c&&w.a.createElement("span",{className:Of.a.bottomTag},c)),w.a.createElement("div",{className:Of.a.info},w.a.createElement("div",{className:Of.a.name},r),u&&s&&s.length>0&&w.a.createElement("div",{className:Of.a.subTitle},s.map((function(e,t){var r={fontSize:e.fontSize/100+"rem",color:e.fontColor};return w.a.createElement("span",{key:t,style:r},e.text)}))),w.a.createElement("div",{className:Of.a.specsInfo,onClick:i},w.a.createElement("span",{className:Of.a.spec},a),w.a.createElement("span",{className:Of.a.changeText},"修改"),w.a.createElement("span",{className:Of.a.arrow},w.a.createElement(L,null)))))},xf=r("muwb"),Ef=r.n(xf),Df=Tp.getInstance(),Nf=function(e){var t,r=e.currentSelect,n=e.ocData,o=(n||{}).goodsInfo;o.specs&&o.specs.length>0?t=o.specs.reduce((function(e,t){return e+t.spec_value}),""):r&&(t=Object.keys(r).reduce((function(e,t){return e+r[t]}),""));var a=S()(n,"promotionInfo.totalDiscountDisplay"),s=S()(n,"goodsInfo.unitPrice"),u=(S()(e,"ocData.promotionInfo.totalPromotionsConsult")||{}).clickable,l=function(){var e=c()(i.a.mark((function e(){var t,r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Df.autoTakeCouponOnPromotionCellClick();case 4:if(!(t=e.sent)||!t.blockPopup){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Df.fetchPromotionList();case 9:r=e.sent,o=(n=Df||{}).togglePromotionPopupVisible,a=n.setPromotionLists,r&&(Dl({groupId:"20203",customTags:{event:"showPromotionPopup"}}),a&&a(r),setTimeout((function(){o&&o(!0)}),0));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=w.a.createElement(w.a.Fragment,null,a&&a.length>0&&a.map((function(e,t){var r=A()(Ef.a.promotion,Ef.a["promotion".concat(e.display_type)]);return w.a.createElement("span",{key:t,className:r,style:{height:e.height?e.height/100+"rem":null,lineHeight:e.height?e.height/100+"rem":null,fontSize:e.font_size?e.font_size/100+"rem":null,color:e.font_color,backgroundColor:e.bg_color}},e.text)}))),p=w.a.createElement("div",{className:Ef.a.nameArea},w.a.createElement("span",{className:Ef.a.name},o.name),w.a.createElement("span",{className:Ef.a.price,onClick:l},a&&a.length>0?w.a.createElement(w.a.Fragment,null,d):w.a.createElement("span",{className:Ef.a.ocPrice},"¥",s),u&&w.a.createElement(L,null)));return w.a.createElement(Cf,{goodsImg:o.thumbUrl,tag:"新机",name:p,goodsNumber:o.goodsNumber,specs:t,deviceType:"new",onDescClick:e.onDescClick})},Tf=r("2Pqc"),jf=r.n(Tf),Af=function(e){var t=S()(e.ocData,"promotionInfo.tradeInInfo"),r=S()(t,"evaluationTotalAmount"),n=S()(t,"tips"),o=S()(t,"tipsTitle"),a=S()(t,"tags.0.text"),i=S()(t,"tradeInOrderInfo.recycleOrderSubTitle.displayItems"),s=n,c=function(){lt({title:o,confirmButtonLabel:"知道了",ContentProps:{className:jf.a.questionDialog},text:w.a.createElement("div",{className:jf.a.alertList},s.map((function(e,t){return w.a.createElement("div",{className:jf.a.question,key:t},e)})))})},u=w.a.createElement("div",{className:jf.a.nameArea},w.a.createElement("span",{className:jf.a.name},t.recycleProductName),w.a.createElement("span",{className:jf.a.text},"可换"),w.a.createElement("span",{className:jf.a.price},"¥",r&&Object(P.priceCent)(r)),w.a.createElement("span",{className:jf.a.questionIcon,onClick:c},w.a.createElement(V,null)));return w.a.createElement(tt.a,{trackingInfo:{page_el_sn:5960463,op:"impr",goods_id:e.goods.goodsID}},w.a.createElement(Cf,{goodsImg:t.recycleProductUrl,tag:"旧机",name:u,specs:t.recycleSkuSpec,evaluationAmount:t.evaluationAmount,deductAmount:t.deductAmount,estimateSubsidy:t.estimateSubsidy,evaluationRemainingBalance:t.evaluationRemainingBalance,deviceType:"old",onDescClick:e.onDescClick,onQuestionClick:c,bottomTag:a,recycleOrderSubTitle:i}))},Rf=r("DdEg"),Mf=r.n(Rf);function Lf(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Bf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lf(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lf(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ff=0,Uf=1,Hf=function(e){var t=S()(e,"ocData.selectedChannel",{}),r=S()(t,"payButtonContent"),n=S()(e,"ocData.payChannelList"),a=S()(t,"skuPayDescription"),i=S()(e,"selectedSkuID"),s=S()(e,"goodsNumber"),c=S()(e,"styleStatus"),u=S()(e,"changeToGroupBuy"),l=S()(e,"setSkuStyleStatus"),d=S()(e,"group"),p=S()(e,"goods"),m=S()(e,"skuInfos"),f=S()(e,"useNormalSkuData"),h=S()(e,"oldForNewSelected"),v=S()(e,"ocData.promotionInfo.tradeInInfo"),y=S()(e,"hidePayHint"),g=S()(t,"creditCardTermIndex"),b=r,_=a;if(t&&"DUODUOPAY_INSTAL"===t.channelName&&g>=0){var k=S()(t,"creditCardVo.recommendCardVo.creditInstallments"),I=S()(k,"".concat(g,".payButtonContent")),P=S()(k,"".concat(g,".skuPayDescription"));I&&I.length>0&&(b=I),P&&P.length>0&&(_=P)}var O,C={page_el_sn:4259117,op:"impr",goods_id:e.goods.goodsID},x=_&&_.length>0&&_.reduce((function(e,t){return e+(t.display_type===Ff&&t.text&&t.text.length?t.text.length:0)}),0);O=x<24?"0.14rem":x<26?"0.13rem":"0.12rem";var E,D,N,T,j,R;return w.a.createElement(w.a.Fragment,null,!y&&w.a.createElement("div",{className:Mf.a.payHint,"aria-label":(null===(R=_)||void 0===R?void 0:R.length)>0?_.reduce((function(e,t){return t.display_type===Ff?e+t.text:e}),""):"当前使用".concat(t.name,"，切换支付方式"),role:"button",onClick:function(){Be({page_el_sn:4259116,op:"click",goods_id:e.goods.goodsID},(function(){!n||n.length<1||(e.onClickPreCheck?e.onClickPreCheck()&&e.showPaymentList&&e.showPaymentList():e.showPaymentList&&e.showPaymentList())}))}},t&&(_?(null===(j=_)||void 0===j?void 0:j.length)>0?w.a.createElement("div",{className:Mf.a.payText,"aria-hidden":!0},_.map((function(e,t){var r;switch(e.display_type){case Ff:return r={fontSize:O,color:e.font_color},e.text&&w.a.createElement("span",{key:t,style:r},e.text);case Uf:return r={height:e.height/100+"rem",width:e.width/100+"rem",marginLeft:"0.04rem",marginRight:"0.04rem"},w.a.createElement("img",{src:e.url,key:t,style:r})}}))):null:w.a.createElement(w.a.Fragment,null,"当前使用",t.name,"，切换支付方式")),n&&n.length>1&&w.a.createElement(L,null)),w.a.createElement(dn,{skuDirectOrder:!0,changeToGroupBuy:u,setSkuStyleStatus:l,styleStatus:c,group:d,goods:p,selectedSkuID:i,skuInfos:m,goodsNumber:s}),t&&i&&!f&&b&&b.length>0?h&&2===h.type&&!v?w.a.createElement(tt.a,{trackingInfo:Bf(Bf({},C),{},{type:2})},w.a.createElement("div",{className:A()(Mf.a.bottom,(T={},o()(T,Mf.a.startHide,1===c),o()(T,Mf.a.startDisplay,2===c),T)),"data-active":"red","aria-label":h.pay_button_desc||"通过“以旧换新”购买新机",role:"button",onClick:function(){Be({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:2},(function(){e.onClick&&e.onClick()}))}},h.pay_button_desc||"通过“以旧换新”购买新机")):w.a.createElement(tt.a,{trackingInfo:Bf(Bf({},C),{},{op:"impr",type:v?5:1})},w.a.createElement("div",{className:A()(Mf.a.bottom,(D={},o()(D,Mf.a.startHide,1===c),o()(D,Mf.a.startDisplay,2===c),D)),"data-active":"red","aria-label":null===(N=b)||void 0===N?void 0:N.reduce((function(e,t){return e+t.text}),""),role:"button",onClick:function(){Be({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:v?5:1},(function(){e.onClick&&e.onClick()}))}},b.map((function(e,t){return w.a.createElement("span",{key:t},e.text)})))):w.a.createElement(tt.a,{trackingInfo:Bf(Bf({},C),{},{op:"impr",type:1})},w.a.createElement("div",{className:A()(Mf.a.bottom,(E={},o()(E,Mf.a.startHide,1===c),o()(E,Mf.a.startDisplay,2===c),E)),"data-active":"red",onClick:function(){Be({page_el_sn:4259117,op:"click",goods_id:e.goods.goodsID,type:1},(function(){e.onClick&&e.onClick()}))}},"立即支付")))},Vf=r("Z4L4"),zf=r.n(Vf);function Wf(e){return e.selected?w.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M436.517 725.285 256 545.06l61.586-61.44 115.42 115.273 269.531-300.179 64.878 58.003z",fill:"#9c9c9c"}),w.a.createElement("path",{d:"M511.707 1024C229.742 1024 .366 794.331.366 512S229.669 0 511.707 0c281.966 0 511.415 229.669 511.415 512s-229.449 512-511.415 512zm.147-960C265.07 64.073 64.366 264.997 64.366 512S265.07 960 511.854 960s447.488-200.923 447.488-448S758.638 64 511.854 64z",fill:"#9c9c9c"})):w.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#9c9c9c"},w.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2zm0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z"}))}var Qf=function(e){var t=A()(zf.a.selectIcon,o()({},zf.a.selected,e.selected));return w.a.createElement("div",{className:t,style:e.style},w.a.createElement(Wf,e))},qf=r("GANf"),Gf=r.n(qf),Yf=rp.getInstance(),Xf=function(e){var t,r,n,o=Object(I.useState)(!0),a=D()(o,2),i=a[0],s=a[1],c=S()(e.ocData,"cellBarVo.protocolV2"),u=S()(e.ocData,"goodsInfo.skuId"),l=S()(e.ocData,"goodsInfo.groupId"),d=S()(e.ocData,"goodsInfo.goodsNumber"),p=null===(t=e.goods)||void 0===t||null===(r=t.ui)||void 0===r||null===(n=r.sku_section)||void 0===n?void 0:n.hai_tao_antiepidemic;return w.a.createElement("div",{className:Gf.a.agreement,onClick:function(){s(!i),Yf.isSelectedAgreement=!i},style:p?{marginTop:"-0.04rem"}:{}},w.a.createElement(Qf,{selected:i}),c&&!!c.length&&c.map((function(e,t){return w.a.createElement("span",{style:{color:e.color},key:t,onClick:function(t){var r,n,o,a;t.stopPropagation(),t.preventDefault(),e.url&&(r=e.url,n=Object(_e.getCurrentPlatform)(),o=n.isNativePlatform,a=n.isTinyNativePlatform,Si.default.replaceQuery({sku_id:u,goods_number:d,show_sku_selector:o||a?void 0:1,goodsList:JSON.stringify([{group_id:l,group_order_id:Yf.groupOrderId,group_type:Yf.groupType}])},(function(){Si.default.uniformForward(r)})))}},e.title)})))},Jf=r("sZZj"),Kf=r.n(Jf);function Zf(e){var t,r,n=e.goods,o=null==n||null===(t=n.ui)||void 0===t||null===(r=t.sku_section)||void 0===r?void 0:r.hai_tao_antiepidemic;if(!o)return null;var a=o.txt,i=o.color;return w.a.createElement("div",{style:{color:i},className:Kf.a.haiTaoAntiepidemic},a)}var $f=r("CzHs"),eh=r.n($f),th=function(e){var t=e.onRefresh;return w.a.createElement("div",{className:eh.a.ocRefresh},w.a.createElement("div",{className:eh.a.netIcon},w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M791.253 598.23c76.374 0 138.283 61.589 138.283 137.6 0 74.325-59.243 134.89-133.333 137.493l-4.95.085c-76.373 0-138.24-61.59-138.24-137.6 0-74.325 59.222-134.89 133.291-137.493l4.95-.086zM519.531 716.202a74.859 74.859 0 0 1 75.029 74.666 74.837 74.837 0 0 1-70.912 74.56l-4.117.107a74.859 74.859 0 0 1-75.03-74.667 74.837 74.837 0 0 1 70.912-74.56l4.118-.106zm271.722-96.64c-64.597 0-116.906 52.053-116.906 116.266 0 64.171 52.309 116.267 116.906 116.267 64.619 0 116.95-52.096 116.95-116.267 0-64.213-52.331-116.266-116.95-116.266zM519.531 737.536a53.525 53.525 0 0 0-53.696 53.333c0 29.44 24.021 53.334 53.696 53.334a53.525 53.525 0 0 0 53.696-53.334c0-29.44-24.022-53.333-53.696-53.333zm278.613 58.667c8.277 0 15.04 7.168 15.04 16.021s-6.763 16-15.061 16c-8.278 0-15.04-7.147-15.04-16s6.762-16 15.04-16zm-.064-133.611c7.808 0 14.443 6.144 14.976 13.973v2.176l-7.253 93.803c-.32 3.883-3.755 6.699-7.723 6.699a7.68 7.68 0 0 1-7.403-5.12l-.32-1.579-7.253-93.824a15.659 15.659 0 0 1 12.075-15.83l2.005-.277.896-.021zM520.448 527.424c48.576.128 97.28 13.504 140.267 40.533l10.304 6.763-4.246 3.307a201.707 201.707 0 0 0-54.72 65.834l-3.477 7.04-1.835 3.926-3.733-2.24a162.005 162.005 0 0 0-79.445-22.955l-5.888-.043a162.347 162.347 0 0 0-112.747 47.254 51.243 51.243 0 0 1-32.704 14.826l-3.584.128a51.285 51.285 0 0 1-36.288-14.954 50.901 50.901 0 0 1 0-72.256 265.067 265.067 0 0 1 181.483-77.099l6.613-.064zm-173.056 92.288a29.568 29.568 0 0 0 0 42.005c11.733 11.648 30.763 11.648 42.496 0a184.107 184.107 0 0 1 202.496-38.485l5.333 2.41 3.222-5.44a222.873 222.873 0 0 1 29.077-37.631l4.885-4.928-3.072-1.664a244.544 244.544 0 0 0-284.437 43.733zm176-273.152a446.165 446.165 0 0 1 311.85 130.133c20.054 19.947 20.054 52.267 0 72.235a51.243 51.243 0 0 1-32.703 14.827l-3.584.128a51.285 51.285 0 0 1-36.288-14.955 343.51 343.51 0 0 0-235.798-100.16l-7.338-.064c-88 0-176 33.408-243.136 100.224a51.243 51.243 0 0 1-32.704 14.827l-3.584.128a51.285 51.285 0 0 1-36.31-14.955 50.901 50.901 0 0 1 0-72.235A446.165 446.165 0 0 1 515.691 346.56h7.68zM218.859 491.797a29.568 29.568 0 0 0 0 42.006c11.733 11.669 30.762 11.669 42.496 0 142.592-141.91 373.76-141.91 516.352 0 11.733 11.669 30.784 11.669 42.496 0a29.568 29.568 0 0 0 0-42.006c-166.038-165.226-435.307-165.226-601.344 0zM519.53 165.653c160.789 0 321.578 61.035 444.266 183.126 20.054 19.946 20.054 52.266 0 72.234a51.243 51.243 0 0 1-32.725 14.827l-3.584.128a51.285 51.285 0 0 1-36.288-14.955C790.656 320.96 659.52 269.91 527.765 267.861l-8.234-.064c-134.528 0-269.035 51.072-371.67 153.216a51.243 51.243 0 0 1-32.725 14.827l-3.563.128a51.285 51.285 0 0 1-36.309-14.955 50.901 50.901 0 0 1 0-72.234C195.499 229.12 352.32 168.107 509.888 165.739l9.643-.086zM90.304 363.883a29.568 29.568 0 0 0 0 42.005c11.733 11.67 30.784 11.67 42.496 0 213.61-212.544 559.85-212.544 773.44 0 11.733 11.67 30.784 11.67 42.496 0a29.568 29.568 0 0 0 0-41.984C711.723 128 327.36 128 90.326 363.904z",fill:"#CCC"}))),w.a.createElement("div",{className:eh.a.note},"网络不太顺畅"),w.a.createElement("div",{className:eh.a.refreshBtn,onClick:t},"刷新"))};function rh(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function nh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rh(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rh(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oh,ah=rp.getInstance(),ih=function(e,t){return parseInt(e,10)||t},sh=function(e,t){return(e||"").match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?e:t},ch=function(e,t){if(Array.isArray(e)){var r=-1,n=-1,o=null;if(e.length<=0)ah.refresh({front_action:ld,address_id:-1});else{for(var a,i=0;i<e.length;i++){if(((a=e[i]).address_id||"").toString()===t){n=i,o=a,ah.refresh({front_action:ld,address_id:o.address_id});break}(a.is_default||"").toString()===ua&&(r=i)}n<0&&r>=0&&(o=e[r],ah.refresh({front_action:ld,address_id:o.address_id}))}}},uh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ch;if(!(e.addressInfo.addressId<=0)||e.addressInfo.addressGiftStatus){var r=function(e,r){var n=(r=r||{}).selected_address_id||"",o=r.addresses||[];!e&&r&&t(o,n)},n=Object(_e.getCurrentPlatform)(),o=n.isNativePlatform,a=n.isTinyNativePlatform,i={select:1,saleRegions:e.goodsInfo.allowedRegion.split(",")||[],addressID:e.addressInfo.addressId,unreachableRec:1,costTemplateId:e.goodsInfo&&e.goodsInfo.costTemplateId+""||"",mallId:e.goodsInfo&&e.goodsInfo.mallId||"",goodsId:e.goodsInfo.goodsId||"",addressRenderExtendMap:e.addressRenderExtendMap?JSON.stringify(e.addressRenderExtendMap):void 0,goodsList:JSON.stringify([{goods_number:e.goodsInfo.goodsNumber,goods_id:e.goodsInfo.goodsId,sku_id:e.goodsInfo.skuId,group_id:e.goodsInfo.groupId,group_order_id:ah.groupOrderId,group_type:ah.groupType,order_extra_type:ah.orderExtraType}])},s={sel_address_id:i.addressID,allowed_regions:i.saleRegions,allow_shipping_provinces:i.allowShippingRegions,unreachable_rec:i.unreachableRec,cost_template_id:i.costTemplateId,mall_id:i.mallId,goods_id:i.goodsId,goods_number:e.goodsInfo.goodsNumber,sku_id:e.goodsInfo.skuId,address_render_extend_map:i.addressRenderExtendMap,goods_list:i.goodsList,show_sku_selector:1,is_single_buy:+!!e.isSingleBuy,scene:"1",thumb_url:void 0},c={props:{select:i.select||0,sale_provinces:i.saleRegions||[],allow_shipping_provinces:i.allowShippingRegions||[],address_id:i.addressID||"",unreachable_rec:i.unreachableRec,cost_template_id:i.costTemplateId,mall_id:i.mallId,goods_id:i.goodsId,address_render_extend_map:i.addressRenderExtendMap,goods_list:i.goodsList,complete:r}},u=/\/(\S*)\.html/,l=location.pathname,d=l.match(u)[1].split("/"),p=d[d.length-1],m="addresses.html";o||(m="addresses.html?"+Object(P.buildQuery)(nh(nh({back_page:p},Object(P.parseUrlQuery)(location.href)),s))),Si.default.replaceQuery({sku_id:e.goodsInfo.skuId,goods_number:e.goodsInfo.goodsNumber,show_sku_selector:o||a?void 0:1,is_single_buy:+!!e.isSingleBuy},(function(){Si.default.uniformForward(m,null,c)}))}},lh=r("PJYZ"),dh=r.n(lh),ph=r("+qE3"),mh=r("9qmp");oh="undefined"!=typeof window&&window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}:function(){};var fh={};fh.Funcs={Linear:function(e,t,r,n){return r*e/n+t},Cubic:{easeIn:function(e,t,r,n){return r*(e/=n)*e*e+t},easeOut:function(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t},easeInOut:function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t}},Sine:{easeIn:function(e,t,r,n){return-r*Math.cos(e/n*(Math.PI/2))+r+t},easeOut:function(e,t,r,n){return r*Math.sin(e/n*(Math.PI/2))+t},easeInOut:function(e,t,r,n){return-r/2*(Math.cos(Math.PI*e/n)-1)+t}},Quart:{easeIn:function(e,t,r,n){return r*(e/=n)*e*e*e+t},easeOut:function(e,t,r,n){return-r*((e=e/n-1)*e*e*e-1)+t},easeInOut:function(e,t,r,n){return(e/=n/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t}}},fh.scrollLeftTo=function(e,t,r,n){(r=r||{}).attr="scrollLeft",fh.gradualChange(e,t,r,n)},fh.gradualChange=function(e,t,r,n){if(e&&void 0!==t){var o=(r=r||{}).fn||fh.Funcs.Linear,a=r.wrapValueFn||null,i=r.getValueFn||null,s=r.during||60,c=r.callbackTimeout||0,u=r.inStyle||!1,l=r.stopAdvance||0,d=r.attr;if(d){var p=0,m=0,f=function(){c?n&&setTimeout(n,c):n&&n()};!function r(){p++;var n=0;n="function"==typeof i?i(m):e[d];var c=m=o(p,n,t-n,s);"function"==typeof a&&(c=a(m,p)),u?e.style[d]=c:e[d]=c,p>s-l?f():p<s?oh(r):f()}()}else n&&n()}};var hh=function(e){for(var t=0,r=0;r<e.length;r++)e.charCodeAt(r)<0||e.charCodeAt(r)>255?t+=2:t+=1;return t},vh=function(e,t){return t.split(".").reduce((function(e,t){return e[t]}),e)},yh=function e(t,r){return Object.entries(r).forEach((function(r){var n=D()(r,2),o=n[0],a=n[1];"object"===me()(a)&&a?t[o]=e(t[o],a):t[o]=a})),t},gh={1101:"手机网络繁忙，请稍后再试",30400:"没有安装QQ客户端",4e4:"错误的请求地址或方法",40001:"登录已过期，请重新登录",40002:"手机网络繁忙，请稍后再试",40003:"错误的请求参数",40004:"微信登录失败",40005:"请求还在处理中",40006:"手机登录验证码错误",40015:"验证码重复请求",40016:"验证码超出当天限制",40017:"今日可发送次数已达上限",40018:"验证码填写错误",40019:"验证码填写超时",40020:"登录失败",40031:"微信登录失败!",40032:"QQ登录失败!",40033:"登录重试失败，请稍后再试",48001:"图片格式错误",48002:"图片大小超过限制",5e4:"当前访问人数较多，请稍后再试",54001:"该账户需要安全验证",54003:"该账户安全验证未通过，暂时无法登录",60005:"用户拒绝",60006:"用户取消",60100:"未安装微信客户端",60110:"未安装微博客户端",60120:"未安装手机QQ"},bh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return gh[e]||t},_h="undefined"!=typeof window,kh=null;function Sh(e){return Ih.apply(this,arguments)}function Ih(){return(Ih=c()(i.a.mark((function e(t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_h){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Promise.resolve().then(r.bind(null,"rx36"));case 4:if(n=e.sent,o=n.default,kh||!t){e.next=10;break}return e.next=9,t.get("api/server/_stm",{defaultErrorHandler:function(){}}).then((function(e){return e.server_time})).catch((function(){return 0})).then((function(e){return new o({serverTime:e})}));case 9:kh=e.sent;case 10:return e.abrupt("return",kh);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wh(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wh(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wh(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Oh="undefined"!=typeof window,Ch="请重新选择地区",xh=1,Eh=2,Dh=3,Nh=["2","27","25"];function Th(e){return e=e||"",Nh.includes(e.toString())}var jh=function(e){f()(o,e);var t,n=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(o);function o(e){var t;return l()(this,o),(t=n.call(this,e)).state={currentRegionTab:xh,panelStyle:{transform:"translateY(3.86rem)"},provinceID:"0",provinceName:"",provinces:null,cityID:"0",cityName:"",cities:null,districtID:"0",districtName:"",districts:null},t.provincesLoaded=!1,t.citiesLoaded=!1,t.districtsLoaded=!1,t.regions={},t.$axiosHttp=t.createAxios(),t.selectCity=t.selectCity.bind(dh()(t)),t.loadRegions=t.loadRegions.bind(dh()(t)),t.onCityEdited=t.onCityEdited.bind(dh()(t)),t.selectDistrict=t.selectDistrict.bind(dh()(t)),t.generateHeader=t.generateHeader.bind(dh()(t)),t.onCitiesLoaded=t.onCitiesLoaded.bind(dh()(t)),t.selectProvince=t.selectProvince.bind(dh()(t)),t.selectRegionTab=t.selectRegionTab.bind(dh()(t)),t.onDistrictEdited=t.onDistrictEdited.bind(dh()(t)),t.onProvinceEdited=t.onProvinceEdited.bind(dh()(t)),t.onDistrictsLoaded=t.onDistrictsLoaded.bind(dh()(t)),t.onProvincesLoaded=t.onProvincesLoaded.bind(dh()(t)),t.setRegionUnionName=t.setRegionUnionName.bind(dh()(t)),t.onAddressInfoLoaded=t.onAddressInfoLoaded.bind(dh()(t)),t.hideRegionSelectorPanel=t.hideRegionSelectorPanel.bind(dh()(t)),t.showRegionSelectorPanel=t.showRegionSelectorPanel.bind(dh()(t)),t}return p()(o,[{key:"createAxios",value:function(){var e=le.default.getInstance().getPageID();return Object(ue.createDefaultAxios)({pageInfo:{pageId:e}})}},{key:"componentWillMount",value:function(){Oh&&r("QROL")}},{key:"render",value:function(){var e=this,t=e.state.panelStyle,r=e.props.isShow;return w.a.createElement("div",{id:"region-selector",className:"edit-addr-region-selector",style:{display:r?"":"none"}},w.a.createElement("div",{className:"mars-panel-mask",onClick:function(t){return e.hideRegionSelectorPanel(t)}}),w.a.createElement("div",{id:"region-selector-panel",ref:"regionSelectorPanel",className:"mars-panel",style:t},e.generateHeader(),e.generateRegions()))}},{key:"componentDidMount",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(P.disableScroll)(),t=this.props,r=t.addressId,n=t.communityId,o=t.extraRequestParams,e.prev=2,r){e.next=15;break}if(!n){e.next=10;break}return e.next=7,this.$axiosHttp.post("api/origenes/address/business/recommend",o,{timeout:1200});case 7:a=e.sent,e.next=13;break;case 10:return this.onAddressInfoLoaded({}),this.props.eventEmitter.emit("fillEditAddress",a),e.abrupt("return");case 13:e.next=20;break;case 15:return s=n?"api/origenes/address/business/query":"api/origenes/address/"+r,e.next=18,this.$axiosHttp.get(s,{timeout:1200,params:Ph({address_id:r},o)});case 18:a=e.sent,this.onAddressInfoLoaded(a);case 20:this.props.eventEmitter.emit("fillEditAddress",a.result||a),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(2),Object(P.throwErrorAsync)(e.t0),Object(ce.info)(bh(e.t0.errorCode)||"网络异常，请刷新页面后重试"),this.props.eventEmitter.emit("fillEditAddress",e.t0);case 28:case"end":return e.stop()}}),e,this,[[2,23]])}))),function(){return t.apply(this,arguments)})},{key:"componentWillReceiveProps",value:function(e){var t=e.addressInfo||{},r=this.props.addressInfo||{};t.province_id+""==r.province_id+""&&t.city_id+""==r.city_id+""&&t.district_id+""==r.district_id+""||this.onAddressInfoLoaded(t)}},{key:"componentDidUpdate",value:function(e,t){var r=e.isShow;if(!r&&this.props.isShow!==r){var n=this.state.currentRegionTab;Object(P.disableScroll)(document.getElementById("region-selector-list-".concat(n))),this.showRegionSelectorPanel()}}},{key:"generateHeader",value:function(){var e=this,t=e.state,r=t.currentRegionTab,n=t.provinceID,o=t.provinceName,a=t.cityID,i=t.cityName,s=t.districtID,c=t.districtName;return w.a.createElement("div",{className:"mars-panel-header"},w.a.createElement("div",{className:"mars-ph-province ".concat(1===r?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(xh,t)}},n+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,o)),n+""!="0"&&!Th(n)&&w.a.createElement("div",{className:"mars-ph-city ".concat(2===r?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(Eh,t)}},a+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,i)),a+""!="0"&&w.a.createElement("div",{className:"mars-ph-district ".concat(3===r?"mars-ph-active":""),onClick:function(t){return e.selectRegionTab(Dh,t)}},s+""=="0"?w.a.createElement("span",null,"请选择"):w.a.createElement("span",null,c)),w.a.createElement("div",{className:"mars-ph-cancel",onClick:function(t){return e.hideRegionSelectorPanel(t)}},"取消"))}},{key:"generateRegions",value:function(){var e=this,t=e.state,r=t.currentRegionTab,n=t.provinces,o=t.provinceID,a=t.cities,i=t.cityID,s=t.districts,c=t.districtID,u=1===r&&n&&n.map((function(t,r){var n=t.region_id+""==o+""?"region-active":"";return w.a.createElement("li",{key:"province-".concat(r),onClick:function(t){return e.selectProvince(t,r)}},w.a.createElement("span",{className:n},t.region_name))})),l=2===r&&a&&a.map((function(t,r){var n=t.region_id+""==i+""?"region-active":"";return w.a.createElement("li",{key:"city-".concat(r),onClick:function(t){return e.selectCity(t,r)}},w.a.createElement("span",{className:n},t.region_name))})),d=3===r&&s&&s.map((function(t,r){var n=t.region_id+""==c+""?"region-active":"";return w.a.createElement("li",{key:"city-".concat(r),onClick:function(t){return e.selectDistrict(t,r)}},w.a.createElement("span",{className:n},t.region_name))}));return w.a.createElement("div",{className:"mars-regions"},1===r&&w.a.createElement("ul",{id:"region-selector-list-1",className:"mars-regions-p"},u),!Th(o)&&2===r&&w.a.createElement("ul",{id:"region-selector-list-2",className:"mars-regions-c"},l),3===r&&w.a.createElement("ul",{id:"region-selector-list-3",className:"mars-regions-d"},d))}},{key:"selectDistrict",value:function(e,t){e&&e.stopPropagation();var r=this.state.districts[t];r&&this.onDistrictEdited(r)}},{key:"onDistrictEdited",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.region_id,n=t.region_name,o={districtID:r,districtName:n};this.setState((function(e){return o}),(function(t){e.hideRegionSelectorPanel(),e.setRegionUnionName()}))}},{key:"selectCity",value:function(e,t){e&&e.stopPropagation();var r=this.state.cities[t];r&&this.onCityEdited(r)}},{key:"onCityEdited",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(!t.citiesLoaded)return!1;var r=e.region_id,n=e.region_name;if(r+""!="0"){var o={cityID:r,cityName:n};t.districtsLoaded=!1,t.onDistrictsLoaded("0",[]).then((function(){t.setState((function(e){return o}),(function(e){t.loadRegions(Dh,r).then((function(e){var r=t.state.districtID;t.onDistrictsLoaded(r,e),t.selectRegionTab(Dh)}))}))}))}}},{key:"onDistrictsLoaded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;t=t.regions||[];var n=this.isRegionIDContainInRegions(e,t),o={districts:t||[],districtID:n&&e||"0",districtName:n&&n.region_name||""};return new Promise((function(e,t){r.setState((function(e){return o}),(function(t){r.districtsLoaded=!0,e()}))}))}},{key:"setRegionUnionName",value:function(){var e=this.state,t=e.provinceID,r=e.cityID,n=e.districtID,o=e.provinceName,a=e.cityName,i=e.districtName,s={};t+""!="0"&&r+""!="0"&&n+""!="0"&&(s=Object.assign({},s,{currentProvinceID:t,currentCityID:r,currentDistrictID:n,currentProvinceName:o,currentCityName:a,currentDistrictName:i})),s=Object.assign({},s,{regionUnionName:o===a?"".concat(a," ").concat(i):"".concat(o,"  ").concat(a,"  ").concat(i)}),this.props.eventEmitter.emit("setRegionUnionName",s)}},{key:"selectProvince",value:function(e,t){e&&e.stopPropagation();var r=this.state.provinces[t];r&&this.onProvinceEdited(r)}},{key:"onProvinceEdited",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(t.provincesLoaded){var r=e.region_id,n=e.region_name;r+""!="0"&&(t.citiesLoaded=!1,t.districtsLoaded=!1,t.onCitiesLoaded("0",[]).then((function(){t.onDistrictsLoaded("0",[]).then((function(){var e={provinceID:r,provinceName:n};t.setState((function(t){return e}),(function(e){t.loadRegions(Eh,r).then((function(e){var n=t.state.cityID;t.onCitiesLoaded(n,e),t.selectRegionTab(Eh),Th(r)&&t.selectCity(null,0)}))}))}))})))}}},{key:"onCitiesLoaded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,n=t.self_city_id,o=r.state,a=o.provinceID,i=o.cityID;t=t.regions||[],r.removeToFirst(t,n);var s=r.isRegionIDContainInRegions(e,t),c={cities:t,cityID:s&&e||(Th(a)?i:0),cityName:s&&s.region_name||""};return new Promise((function(e,t){r.setState((function(e){return c}),(function(t){r.citiesLoaded=!0,e()}))}))}},{key:"loadRegions",value:function(e,t){var r=this;return new Promise((function(e,n){if(r.regions[t])return e(r.regions[t]);r.$axiosHttp.get("api/galen/v2/regions/"+t).then((function(n){r.regions[t]=n,e(n)}))}))}},{key:"onAddressInfoLoaded",value:function(e){if(e){var t=this,r=e.region_id||1,n=e.province_id,o=e.city_id,a=e.district_id;t.loadRegions(xh,r).then((function(e){t.onProvincesLoaded(n,e).then((function(){n+""==t.state.provinceID+""&&t.loadRegions(Eh,n).then((function(e){t.onCitiesLoaded(o,e).then((function(){o+""==t.state.cityID+""?t.loadRegions(Dh,o).then((function(e){t.onDistrictsLoaded(a,e),t.isRegionIDContainInRegions(a,e.regions)||Object(ce.info)(Ch)})):Object(ce.info)(Ch)}))}))}))}))}}},{key:"isRegionIDContainInRegions",value:function(e,t){if(!t)return null;for(var r=0;r<t.length;++r){var n=t[r];if(n.region_id+""==e+"")return n}return null}},{key:"removeToFirst",value:function(e,t){var r=this.isRegionIDContainInRegions(t,e),n=e.indexOf(r);n<0||(e.splice(n,1),e.unshift(r))}},{key:"onProvincesLoaded",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.self_province_id;r=r.regions||[],this.removeToFirst(r,n);var o=this.isRegionIDContainInRegions(e,r),a={provinces:r,provinceID:e||"0",provinceName:o&&o.region_name||""};return new Promise((function(e,r){t.setState((function(e){return a}),(function(r){t.provincesLoaded=!0,e()}))}))}},{key:"selectRegionTab",value:function(e,t){t&&t.stopPropagation();this.setState((function(t){return{currentRegionTab:e}}),(function(t){Object(P.disableScroll)(document.getElementById("region-selector-list-".concat(e)))}))}},{key:"hideRegionSelectorPanel",value:function(e){e&&e.stopPropagation();var t=this,r=t.refs.regionSelectorPanel;fh.gradualChange(r,386,{wrapValueFn:function(e){return"translateY(".concat(e/100,"rem)")},getValueFn:function(e){return e||0},inStyle:!0,attr:"transform",during:25,stopAdvance:6},(function(){t.props.onClose&&t.props.onClose()}))}},{key:"showRegionSelectorPanel",value:function(e){e&&e.stopPropagation()&&e.preventDefault();var t=this.refs.regionSelectorPanel;fh.gradualChange(t,0,{wrapValueFn:function(e,t){return"translateY(".concat(e/100,"rem)")},getValueFn:function(e){return e||386},inStyle:!0,attr:"transform",during:25})}}]),o}(I.Component);jh.defaultProps={addressId:"",isShow:!1};var Ah,Rh,Mh=jh;function Lh(e){"function"==typeof window.scrollTo&&(clearTimeout(Rh),Rh=setTimeout((function(){(!document.activeElement||!["INPUT","TEXTAREA"].includes(document.activeElement.tagName))&&window.scrollTo(0,0)}),10))}function Bh(e){return Ah||(Ah=Object(_e.getCurrentPlatform)()),Ah.system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(Ah.systemVersion,"12.0")>=0?(e.addEventListener("focusout",Lh),function(){e.removeEventListener("focusout",Lh)}):function(){}}var Fh=!0,Uh={43014:"请填写正确的手机号码",43016:"地址保存不成功，建议稍后重试",43017:"已达到地址上限，请先删除不常用地址",43871:"内容中含有不合适的字，无法保存",5e4:"地址保存不成功，建议稍后重试"},Hh=1,Vh=2;var zh=function(e){f()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(n);function n(e){var r;return l()(this,n),(r=t.call(this,e)).provideOptions=function(){r.DomNode=Object(ge.findDOMNode)(dh()(r)),r.DomNode&&r.registerImprToComponent()},r.registerImprToComponent=function(){var e=r.props,t={threshold:e.threshold,rootMargin:e.rootMargin,root:e.root};r.observer=new IntersectionObserver(r.observerCallBack,t),r.observer.observe(r.DomNode)},r.observerCallBack=function(e,t){e.forEach((function(e){r.singleTracking(e)}))},r.singleTracking=function(e){var t=r.props,n=t.onEnter,o=t.onLeave,a=t.doImpr;r.isItemIn(e)?(a&&r.trackingAction(),n(e)):o(e)},r.trackingAction=function(){r.timer&&clearTimeout(r.timer),r.timer=setTimeout((function(){var e=r.DomNode.getBoundingClientRect().top;if(!(e<-200||e>800)){var t=r.props,n=t.once,o=t.trackingInfo,a=void 0===o?{}:o;Object(O.sendImprMetrics)(a),r.observer&&r.DomNode&&n&&r.observer.unobserve(r.DomNode)}}),300)},r.isItemIn=function(e){var t=r.props.threshold;return e.isIntersecting&&e.intersectionRatio>=t},r.observer=null,r.DomNode=null,r.timer=null,r}return p()(n,[{key:"componentDidMount",value:function(){r("Wr5T"),this.provideOptions()}},{key:"componentWillUnmount",value:function(){this.observer&&this.DomNode&&this.observer.unobserve(this.DomNode)}},{key:"render",value:function(){return w.a.Children.only(this.props.children)}}]),n}(I.Component);zh.defaultProps={root:null,doImpr:!0,isCombined:!1,threshold:1,rootMargin:"0px",gap:300,imprItem:{},once:!0,onEnter:function(){},onLeave:function(){}};var Wh,Qh=zh,qh=function(e){var t=e.tackingParams,r=e.triangleTop,n=e.triangleTopShadow,o=e.recStyle,a=e.renderedElems;return w.a.createElement(Qh,{trackingInfo:t},w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"m-addr-rec-triangle",style:r}),w.a.createElement("div",{className:"m-addr-rec-circle-cover"}),w.a.createElement("div",{className:"m-addr-rec-triangle m-addr-rec-triangle-shadow",style:n}),w.a.createElement("div",{className:"m-addr-rec",style:o},w.a.createElement("div",{className:"m-addr-rec-wrap"},a))))},Gh=w.a.memo((function(e){var t,r=e.type,n=e.recMobiles,o=void 0===n?[]:n,a=e.recCombined,i=void 0===a?[]:a,s=e.onClickHandler,c={op:"impr",page_el_sn:2584388};if(r===Hh&&i&&i.length>0){t=3,c.tips_id=t;var u=i.map((function(e,r){for(var n=e.name,o=0,a=0;a<n.length;a++)/^%u/.test(escape(n[a]))?o+=.14:o+=.07;o+=1.04;var i="".concat(e.name,"，").concat(e.mobile);return o>1.99&&(i="".concat(n.slice(0,4),"...").concat(n.slice(-2),"，").concat(e.mobile)),w.a.createElement("div",{className:"m-addr-rec-text",key:r,onClick:s(r,Hh,t)},i)}));return w.a.createElement(qh,{tackingParams:c,triangleTop:{top:".84rem"},triangleTopShadow:{top:".82rem",zIndex:13e3},recStyle:{height:"".concat(.46*i.length+.01*(i.length-1),"rem"),top:".89rem"},renderedElems:u})}if(r===Vh&&o&&o.length>0){i&&i.length>0&&(t=4,c.tips_id=t);var l=o.map((function(e,r){return w.a.createElement("div",{className:"m-addr-rec-text",key:r,onClick:s(r,Vh,t)},e)}));return w.a.createElement(qh,{tackingParams:c,triangleTop:{top:"1.32rem"},triangleTopShadow:{top:"1.3rem",zIndex:13e3},recStyle:{height:"".concat(.46*o.length+.01*(o.length-1),"rem"),top:"1.37rem"},renderedElems:l})}return null})),Yh=(r("lEbS"),Object(_e.getCurrentPlatform)());function Xh(e){var t=e.suggestAddress,r=e.onConfirm,n=e.onCancel,o=[t.provinceName,t.cityName,t.districtName].join(" ");return w.a.createElement(pm.a.Container,null,w.a.createElement(pm.a.Backdrop,null),w.a.createElement(pm.a.BaseDialog,{className:A()("fix-addr-dialog",Wh&&"fix-addr-dialog-ios")},w.a.createElement("div",{className:"fix-addr-dialog-desc"},"自动识别到您所在地区为",w.a.createElement("span",{className:"fix-addr-dialog-red-text"},o),"，是否修改?"),w.a.createElement("div",{className:"fix-addr-dialog-confirm",onClick:r},"修改并保存"),w.a.createElement("div",{className:"fix-addr-dialog-cancel",onClick:n},"不修改，直接保存")))}Wh=Yh.system===_e.SYSTEM.IOS;var Jh,Kh=0,Zh=function(e){var t=e.children;return Object(I.useEffect)((function(){if(Object(_e.getCurrentPlatform)().isNativePlatform){var e=0;return Object(ke.invokeBridgeCallNativeFun)("WebScene","getUnoContext").then((function(t){var r=t.immerse;(e=r)&&!Kh&&Object(ke.invokeBridgeCallNativeFun)("JSUIControl","hideNavigationBar"),Kh++})),function(){Kh--,e&&!Kh&&Object(ke.invokeBridgeCallNativeFun)("JSUIControl","showNavigationBar")}}}),[]),t};function $h(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function ev(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$h(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Jh={43010:"该地址已存在",43011:"该地址无法导入",43002:"地址错误",43017:"最多只能添加100个收货地址哦~"},Object.assign(gh,Jh);var tv,rv,nv,ov,av,iv,sv="undefined"!=typeof window,cv="请填写详细地址",uv="请填写正确的地址",lv="地址不能超过100个字，请删除部分内容",dv={ContainerProps:{style:{zIndex:12e3}}};function pv(e){var t;Object(ce.infoH5)(e,dv),t=e,Object(O.sendImprMetrics)({page_el_sn:1449048,address_alert_errorinfo:t})}sv&&(tv=Object(_e.getCurrentPlatform)(),rv=tv.system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(tv.systemVersion,"11.0.0")>=0,av=tv.system===_e.SYSTEM.IOS,nv=tv.version&&Object(_e.compareVersion)(tv.version,"4.70.0")>=0,ov=tv.version&&Object(_e.compareVersion)(tv.version,"5.96.0")>=0,iv=tv.version&&Object(_e.compareVersion)(tv.version,"4.69.0")>=0);var mv=function(e){f()(s,e);var t,n,o,a=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(s);function s(e){var t;return l()(this,s),(t=a.call(this,e)).cancelAnalyzeAddressDialog=function(){t.setState({showAnalyzeAddressDialog:!1})},t.confirmAnalyzeAddressDialog=function(){var e=t.state.clipBoardResult||{};t.setState({showAnalyzeAddressDialog:!1,name:e.name,mobile:e.mobile,address:e.address,currentProvinceID:e.province_id,currentCityID:e.city_id,currentDistrictID:e.district_id,currentProvinceName:e.province,currentCityName:e.city,currentDistrictName:e.district,regionUnionName:"".concat(e.province,"  ").concat(e.city,"  ").concat(e.district)}),t.regionSelectorRef.current&&t.regionSelectorRef.current.onAddressInfoLoaded&&t.regionSelectorRef.current.onAddressInfoLoaded(e)},t.onRecItemSelected=function(e,r,n){return function(o){var a=t.state,i=a.recMobiles,s=void 0===i?[]:i,c=a.recCombined,u=void 0===c?[]:c;!function(e){Object(O.sendClickMetrics)({page_el_sn:2584388,tips_id:e})}(n);var l=null;switch(r){case Hh:l=u[e],t.setState({name:l.name,mobile:l.mobile,isShowNameRec:!1});break;case Vh:l=s[e],t.setState({mobile:l,isShowMobileRec:!1})}}},t.disbaleToast=function(){var e=(t.state.communityAddressResponse||{}).community_title;Object(ce.infoH5)("你已选择".concat(e,"小区团，不能修改地区、小区"))},t.clearAddress=function(e){e&&e.stopPropagation(),t.setState({address:""})},t.clearShortAddress=function(e){e&&e.stopPropagation(),t.setState({communityAddressResponse:ev(ev({},t.state.communityAddressResponse),{},{short_address:""})})},t.dealRecheck=function(e){var r=e.name,n=e.address;pv(e.recheck_msg),r&&r.length&&r.some((function(e){return e.sensitive&&t.setState({isNameError:!0}),e.sensitive})),n&&n.length&&n.some((function(e){return e.sensitive&&t.setState({isAddressError:!0}),e.sensitive}))},t.dealCheckRegionError=function(e){var r,n,o=e.params,a=e.response;Object(O.sendImprMetrics)({page_el_sn:3812488}),function(e){var t=e.onConfirm,r=e.onCancel,n=x()(e,["onConfirm","onCancel"]),o=Object(Xr.renderPopup)(w.a.createElement(Xh,nt()({},n,{onConfirm:function(){t&&t(),o()},onCancel:function(){r&&r(),o()}})))}({suggestAddress:{provinceName:a.suggest_province_name,cityName:a.suggest_city_name,districtName:a.suggest_district_name},onConfirm:(n=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Se.show)(),r=a.transaction_id,Object(O.sendClickMetrics)({page_el_sn:3813443,request_id:r}),e.next=4,t._saveAddress(ev(ev({},o),{},{province_id:a.suggest_province_id,city_id:a.suggest_city_id,district_id:a.suggest_district_id,check_region:!1}));case 4:Object(Se.hide)();case 5:case"end":return e.stop()}var r}),e)}))),function(){return n.apply(this,arguments)}),onCancel:(r=c()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Se.show)(),r=a.transaction_id,Object(O.sendClickMetrics)({page_el_sn:3813444,request_id:r}),e.next=4,t._saveAddress(ev(ev({},o),{},{check_region:!1}));case 4:Object(Se.hide)();case 5:case"end":return e.stop()}var r}),e)}))),function(){return r.apply(this,arguments)})})},t.saveAddress=c()(i.a.mark((function e(){var r,n,o,a,s,c,u,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isSaveBtnClicked){e.next=2;break}return e.abrupt("return");case 2:if(i=Date.now()-t.startTime,Object(O.sendClickMetrics)({page_el_sn:99897,save_time:i}),t.isSaveBtnClicked=!0,t.validAddressInfo()){e.next=7;break}return setTimeout((function(e){t.isSaveBtnClicked=!1}),2600),e.abrupt("return",!1);case 7:if(r=t.state,n=r.name,o=r.mobile,a=r.currentProvinceID,s=r.currentCityID,c=r.currentDistrictID,u=r.address,l=r.isDefault,d=r.communityAddressResponse,p=yh({name:n,mobile:t.reduceMobile(o),province_id:a,city_id:s,district_id:c,address:u,community_address_request:{short_address:null==d?void 0:d.short_address},short_address:null==d?void 0:d.short_address,is_default:l,order_sn:t.props.orderSn,check_region:t.props.checkRegion},t.extraRequestParams),Object(Se.show)(),!t.antiCrawler){e.next=14;break}return e.next=13,t.antiCrawler.messagePackSync();case 13:p.anti_content=e.sent;case 14:return e.next=16,t._saveAddress(p);case 16:t.isSaveBtnClicked=!1,Object(Se.hide)();case 18:case"end":return e.stop()}var i}),e)}))),t._saveAddress=function(){var e=c()(i.a.mark((function e(r){var n,o,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(){},o=function(e){var n,o=e.response&&e.response.data&&e.response.data.result;if(o&&o.need_recheck===Fh)t.dealRecheck(o);else if(43080===e.errorCode){if(!o)return n={error:e},void Object(P.throwErrorAsync)(new Error("edit-address: 返回的地址校验数据为空"),{payload:n});t.dealCheckRegionError({params:r,response:o})}else Uh[e.errorCode]?pv(Uh[e.errorCode]):pv(bh(e.errorCode)||"网络异常，请刷新页面后重试")},!(a=t.props.addressId)){e.next=9;break}return s=t.props.communityId?"api/origenes/address/business/update":"api/origenes/address_info/".concat(a),r.address_id=a,e.abrupt("return",t.$axiosHttp.post(s,r,{defaultErrorHandler:n,useNativeAntiToken:!0}).then((function(){t.dealSaveResult(a)}),o));case 9:return c=t.props.communityId?"api/origenes/address/business/create":"api/origenes/address",e.abrupt("return",t.$axiosHttp.post(c,r,{defaultErrorHandler:n,useNativeAntiToken:!0}).then((function(e){var r=e.address_id||e.result.address_id;r&&t.dealSaveResult(r)}),o));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.addrClose=function(e){var r;e&&e.stopPropagation(),r=Date.now()-t.startTime,Object(O.sendClickMetrics)({page_el_sn:2586340,close_time:r}),t.props.onClose&&t.props.onClose()},t.addrBack=function(e){e&&e.stopPropagation(),t.state.isShowPositionList&&t.setState({isShowPositionList:!1,title:"编辑地址"},(function(){Object(P.disableScroll)(document.getElementById("address"))}))},t.nameOnChange=function(e){e&&e.stopPropagation();var r=dh()(t),n=e.target.value;r.setState((function(e){return{name:n}}),(function(){!!n&&t.validName()}))},t.mobileOnChange=function(e){var r=e.target.value;t.setState((function(e){return{mobile:r}}))},t.addressOnChange=function(e){e&&e.stopPropagation();var r=dh()(t),n=e.target.value;r.setState((function(e){return{address:n}}))},t.shortAddressOnChange=function(e){e&&e.stopPropagation();var r=e.target.value;t.setState((function(e){return{communityAddressResponse:ev(ev({},t.state.communityAddressResponse),{},{short_address:r})}}))},t.showDialogRegionSelector=function(e){e&&e.stopPropagation()&&e.preventDefault(),dh()(t).setState((function(e){return{showRegionSelector:!0}}))},t.hideDialogRegionSelector=function(e){e&&e.stopPropagation()&&e.preventDefault(),dh()(t).setState((function(e){return{showRegionSelector:!1}}))},t.state={loaded:!1,title:t.props.title,saveAndUse:t.props.saveAndUse,communityAddressResponse:{},isDefault:"0",name:"",nameInputFocused:!1,mobile:"",mobileInputFocused:!1,address:"",showRegionSelector:!1,currentProvinceID:"0",currentCityID:"0",currentDistrictID:"0",currentProvinceName:"",currentCityName:"",currentDistrictName:"",isNameError:!1,isMobileError:!1,isAddressError:!1,focused:!1,addressInputFocused:!1,addressInfo:null,addressSuggestionList:[],isPositionBtnActived:!1,isShowPositionList:!1,isShowNameRec:!1,isShowMobileRec:!1,showAnalyzeAddressDialog:!1,clipBoardResult:{},clipBoardFullAddress:"",analyzeRequestId:""},t.regionSelectorRef=w.a.createRef(),t.dialogContainerRef=w.a.createRef(),t.shortAddressRef=w.a.createRef(),t.eventEmitter=new ph.EventEmitter,t.locateOvertimeCount=0,t.$axiosHttp=t.createAxios(),t.reduceMobile=t.reduceMobile.bind(dh()(t)),t.getUserCoords=t.getUserCoords.bind(dh()(t)),t.getGeolocation=t.getGeolocation.bind(dh()(t)),t.dealSaveResult=t.dealSaveResult.bind(dh()(t)),t.generateAddrTitle=t.generateAddrTitle.bind(dh()(t)),t.generateAddrBottom=t.generateAddrBottom.bind(dh()(t)),t.generateRegionSelector=t.generateRegionSelector.bind(dh()(t)),t.setAddressInputFocused=t.setAddressInputFocused.bind(dh()(t)),t.antiCrawler=t.props.antiCrawler,t.getEncryptClipBoardData=t.getEncryptClipBoardData.bind(dh()(t)),t.analyzeClipBoard=t.analyzeClipBoard.bind(dh()(t)),t.genetateAnalyzeAddressDialog=t.genetateAnalyzeAddressDialog.bind(dh()(t)),t.addressNameBlurTimeout=null,t.addressMobileBlurTimeout=null,t}return p()(s,[{key:"createAxios",value:function(){var e=le.default.getInstance().getPageID();return Object(ue.createDefaultAxios)({pageInfo:{pageId:e}})}},{key:"componentWillMount",value:function(){var e=this,t=this;sv&&r("3EMY"),t.eventEmitter.on("setRegionUnionName",(function(e){t.setState((function(t){return e}))})),t.eventEmitter.on("fillEditAddress",(function(r){if(r instanceof Error)t.props.onClose&&t.props.onClose();else if(Object(Se.hide)(),e.setState({loaded:!0},(function(){var t;return!av&&(null===(t=e.shortAddressRef.current)||void 0===t?void 0:t.focus())})),r){var n=r.is_default,o=r.name,a=void 0===o?"":o,i=r.mobile,s=void 0===i?"":i,c=r.address,u=r.province_id,l=r.city_id,d=r.district_id,p=r.province,m=r.city,f=r.district,h=r.community_address_response,v=void 0===h?{}:h,y={isDefault:n,name:a,mobile:s,address:c,currentProvinceID:u,currentCityID:l,currentDistrictID:d,currentProvinceName:p,currentCityName:m,currentDistrictName:f,regionUnionName:p===m?"".concat(m," ").concat(f):"".concat(p,"  ").concat(m,"  ").concat(f),communityAddressResponse:v};t.setState((function(e){return y}))}}))}},{key:"getRecommendType",value:function(e,t){return e?Hh:t?Vh:null}},{key:"render",value:function(){var e=this.state,t=e.loaded,r=e.isShowPositionList,n=e.isShowNameRec,o=e.isShowMobileRec,a=e.recMobiles,i=e.recCombined,s=(e.addressInputFocused,e.nameInputFocused,e.mobileInputFocused,this.getRecommendType(n,o)),c=r?w.a.createElement("div",{className:"m-addr-mask",onClick:this.addrBack},w.a.createElement("div",{className:"m-addr-main m-addr-main-list"},this.generateAddrTitle(),this.generatePositionList())):w.a.createElement(pm.a,{ControllerProps:{PortalComponent:null},className:"m-addr-main m-addr-main-new ".concat(av?"":"android")},w.a.createElement(pm.a.CloseButton,{onClick:this.addrClose}),this.generateAddrTitle(),this.generateAddrName(),this.generateAddrMobile(),this.generateAddrRegionNew(),this.props.communityId&&this.generatePoi(),this.props.communityId?this.generateShortAddrAddress():this.generateAddrAddressNew(),this.generateAddrBottom(),s&&w.a.createElement(Gh,{type:s,recMobiles:a,recCombined:i,onClickHandler:this.onRecItemSelected}));return w.a.createElement(Zh,null,w.a.createElement("div",{ref:this.dialogContainerRef,style:{display:t?"":"none"}},c,this.generateRegionSelector()),this.genetateAnalyzeAddressDialog())}},{key:"componentDidMount",value:(o=c()(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$axiosHttp.get("api/origenes/rec/mobile_name/list/create_addr").then((function(e){t.setState({recMobiles:e.mobiles,recCombined:e.mobile_names})})),tv.isNativePlatform&&this.props.componentDisablePullReload&&Object(ke.setupPullReload)({enable:!1}).catch((function(e){if(e&&e.errorCode)throw e})),this.props.onShowTrackingBase&&Object(O.sendMetrics)(Object.assign({},this.props.onShowTrackingBase,this.props.trackingContext)),rv&&(this.bodyPositionStyle=document.body.style.position,this.bodyScrollTop=(r=void 0)&&r!==document.body?r.scrollTop:document.body.scrollTop+((document.documentElement||{}).scrollTop||0),document.body.style.position="fixed"),!this.props.addressId&&this.props.analyzeClipBoard&&this.analyzeClipBoard(),Object(P.disableScroll)(document.getElementById("address")),this.antiCrawler||iv){e.next=10;break}return e.next=9,Sh(this.$axiosHttp);case 9:this.antiCrawler=e.sent;case 10:this.cleanupFixer=Bh(document.body);case 11:case"end":return e.stop()}var r}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e,t;tv.isNativePlatform&&this.props.componentDisablePullReload&&Object(ke.setupPullReload)({enable:!0}).catch((function(e){if(e&&e.errorCode)throw e})),Object(P.enableScroll)(),this.geoHandler&&clearTimeout(this.geoHandler),this.addressNameBlurTimeout&&clearTimeout(this.addressNameBlurTimeout),this.addressMobileBlurTimeout&&clearTimeout(this.addressMobileBlurTimeout),rv&&(document.body.style.position=this.bodyPositionStyle,e=this.bodyScrollTop,t&&t!==document.body?t.scrollTop=e:0===e?(document.body.scrollTop=0,(document.documentElement||{}).scrollTop=0):(document.body.scrollTop=e,0!==document.body.scrollTop?document.body:((document.documentElement||{}).scrollTop=e,document.documentElement&&0!==document.documentElement.scrollTop&&document.documentElement))),this.cleanupFixer&&this.cleanupFixer()}},{key:"getEncryptClipBoardData",value:(n=c()(i.a.mark((function e(){var t,r,n,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tv.isNativePlatform){e.next=20;break}if(!ov){e.next=8;break}return e.next=4,Object(ke.invokeBridgeCallNativeFun)("AMStorage","getEncryptedPasteboard");case 4:return t=e.sent,e.abrupt("return",t.result);case 8:return e.next=10,Object(ke.getPasteBoard)();case 10:if(r=e.sent,!((n=r.text)&&n.length>5&&n.length<200)){e.next=20;break}if(!nv){e.next=19;break}return e.next=16,Object(ke.invokeBridgeCallNativeFun)("JSSecure","aesEncrypt",{text:n});case 16:return o=e.sent,a=o.value,e.abrupt("return",a);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"analyzeClipBoard",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new Promise((function(e){setTimeout((function(){return e(null)}),100)})),e.next=4,Promise.race([t,this.getEncryptClipBoardData()]);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:n=Object(P.nanoid)(),this.setState({analyzeRequestId:n}),o={address_info:r,request_id:n},nv&&(o={eai:r,request_id:n}),ov&&(o={encrypt_data:r,request_id:n}),this.$axiosHttp.post("api/origenes/analyze_address",o).then((function(e){e&&a.setState({showAnalyzeAddressDialog:!0,clipBoardResult:e,clipBoardFullAddress:"".concat(e.name||""," ").concat(e.mobile||""," ").concat(e.province||""," ").concat(e.city||""," ").concat(e.district||""," ").concat(e.address||"")})})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.message="剪贴板内容解析失败"+e.t0.message,Object(P.throwErrorAsync)(e.t0);case 19:case"end":return e.stop()}}),e,this,[[0,15]])}))),function(){return t.apply(this,arguments)})},{key:"genetateAnalyzeAddressDialog",value:function(){var e=this.state,t=e.isShowPositionList,r=e.showAnalyzeAddressDialog;return!this.props.addressId&&!t&&r&&w.a.createElement(mh.a,{title:"识别到收货信息，是否填入？",text:this.state.clipBoardFullAddress,TextProps:{className:"analyze-address-text"},onConfirm:this.confirmAnalyzeAddressDialog,onCancel:this.cancelAnalyzeAddressDialog,onClose:this.cancelAnalyzeAddressDialog})}},{key:"generateRegionSelector",value:function(){var e=this,t=e.state,r=t.showRegionSelector,n=t.addressInfo,o={onClose:e.hideDialogRegionSelector,eventEmitter:e.eventEmitter,isShow:r,addressId:e.props.addressId,addressInfo:n,communityId:this.props.communityId,extraRequestParams:this.extraRequestParams};return w.a.createElement(Mh,nt()({},o,{ref:this.regionSelectorRef}))}},{key:"generateAddrTitle",value:function(){var e=this.state,t=e.title,r=e.isShowPositionList;return w.a.createElement("div",{className:"title-wrap-new"},w.a.createElement("div",{className:r?"m-addr-title  m-addr-back":"m-addr-title",onClick:this.addrBack},t),!r&&this.props.contentUnderTitle)}},{key:"clearName",value:function(e){e&&e.stopPropagation(),this.setState({name:""})}},{key:"generateAddrName",value:function(){var e=this,t=this.state,r=t.name,n=t.isNameError,o=t.nameInputFocused,a={className:"m-addr-input ".concat(n?"input-error":""),id:"name",placeholder:"收货人姓名",value:r,type:"text",onChange:this.nameOnChange,onFocus:function(t){e.setState({nameInputFocused:!0,isShowNameRec:!r}),e.removeNameError(t)},onBlur:function(){e.addressNameBlurTimeout=setTimeout((function(){e.setState({nameInputFocused:!1,isShowNameRec:!1})}),0)}};return w.a.createElement("div",{className:"m-addr-bar"},w.a.createElement("input",a),r&&w.a.createElement("div",{className:"m-addr-input-clear-wrapper",style:{display:o?"":"none"},onMouseDown:function(t){return e.clearName(t)},onTouchStart:function(t){return e.clearName(t)}},w.a.createElement("div",{className:"m-addr-input-clear"})),w.a.createElement("div",{className:"m-addr-text"},"收货人"))}},{key:"clearMobile",value:function(e){e&&e.stopPropagation(),this.setState({mobile:""})}},{key:"generateAddrMobile",value:function(){var e=this,t=this.state,r=t.mobile,n=t.isMobileError,o=t.mobileInputFocused,a={className:"m-addr-input ".concat(n?"input-error":""),id:"mobile",placeholder:"收货人手机号",value:r,type:"tel",onChange:this.mobileOnChange,onFocus:function(t){e.setState({mobileInputFocused:!0,isShowMobileRec:!r}),e.removeMobileError(t)},onBlur:function(){e.addressMobileBlurTimeout=setTimeout((function(){e.setState({mobileInputFocused:!1,isShowMobileRec:!1})}),0)}};return w.a.createElement("div",{className:"m-addr-bar"},w.a.createElement("input",a),r&&w.a.createElement("div",{className:"m-addr-input-clear-wrapper",onMouseDown:function(t){return e.clearMobile(t)},onTouchStart:function(t){return e.clearMobile(t)},style:{display:o?"":"none"}},w.a.createElement("div",{className:"m-addr-input-clear"})),w.a.createElement("div",{className:"m-addr-text"},"手机号"))}},{key:"generateAddrRegionNew",value:function(){var e=this.state,t=e.currentProvinceName,r=e.currentCityName,n=e.currentDistrictName,o=e.regionUnionName,a=t&&r&&n,i=!!this.props.communityId?{className:"m-addr-bar disabled",onClick:this.disbaleToast}:{className:"m-addr-bar",onClick:this.showDialogRegionSelector};return w.a.createElement("div",i,a?w.a.createElement("span",{className:"m-addr-select"},o):w.a.createElement("span",{className:"m-addr-select m-addr-placeholder"},"点击选择"),w.a.createElement("div",{className:"m-addr-text"},"地区"),w.a.createElement("div",{className:"m-addr-more"}))}},{key:"generatePoi",value:function(){var e=this.state.communityAddressResponse||{},t=e.community_title,r=e.community_thumb_address,n=void 0===r?"":r,o=t?n?"".concat(t,"(").concat(n,")"):t:"";return w.a.createElement("div",{className:"m-addr-bar disabled"},w.a.createElement("span",{className:"m-addr-select",onClick:this.disbaleToast},o),w.a.createElement("div",{className:"m-addr-text"},"小区"))}},{key:"generateShortAddrAddress",value:function(){var e=this,t=this.state,r=t.communityAddressResponse,n=t.isAddressError,o=t.addressInputFocused,a=(r||{}).short_address,i={value:a,placeholder:"例：10号501室",ref:this.shortAddressRef,onChange:this.shortAddressOnChange,onFocus:function(t){e.setState({addressInputFocused:!0}),e.removeAddressError(t)},onBlur:function(){setTimeout((function(){e.setState({addressInputFocused:!1})}))},className:"m-addr-input  ".concat(n?"input-error":"")};return w.a.createElement("div",{className:a?"m-addr-bar":"m-addr-address-none m-addr-bar"},w.a.createElement("div",{className:"m-addr-text"},"门牌号"),w.a.createElement("input",i),a&&w.a.createElement("div",{className:"m-addr-input-clear-wrapper",onTouchStart:this.clearShortAddress,onMouseDown:this.clearShortAddress,style:{opacity:o?1:0}},w.a.createElement("div",{className:"m-addr-input-clear"})))}},{key:"generateAddrAddressNew",value:function(){var e=this,t=this.state,r=t.address,n=t.isAddressError,o=t.isPositionBtnActived,a=t.addressSuggestionList,i=t.addressInputFocused,s=(!!a.length&&r.length,tv&&!tv.isNativePlatform),c={id:"address",value:r,placeholder:"如街道、门牌号、小区、乡镇、村等",onChange:this.addressOnChange,onFocus:function(t){e.setState({addressInputFocused:!0}),e.removeAddressError(t)},onBlur:function(){e.setState({addressInputFocused:!1})},className:"m-addr-textarea  ".concat(n?"input-error":""," ").concat(s?"":"without-pos-icon")},u={className:"position-icon ".concat(o?"active":"inactive"),onClick:function(t){return e.requestPosition(t)}};return w.a.createElement("div",{className:r?"m-addr-bar":"m-addr-address-none m-addr-bar"},w.a.createElement("div",{className:"m-addr-text"},"详细地址"),w.a.createElement("textarea",c),r&&w.a.createElement("div",{className:"m-addr-input-clear-wrapper",onMouseDown:this.clearAddress,onTouchStart:this.clearAddress,style:{opacity:i?1:0}},w.a.createElement("div",{className:"m-addr-input-clear"})),s&&w.a.createElement("div",u))}},{key:"generateAddrBottom",value:function(){var e,t=this.state,r=t.saveAndUse,n=t.addressSuggestionList;return t.isShowPositionList&&n.length||(e=w.a.createElement("div",{className:"m-addr-save-new active",onClick:this.saveAddress},w.a.createElement("span",null,r?"保存并使用":"保存"))),this.startTime=Date.now(),e}},{key:"generatePositionList",value:function(){var e,t=this,r=t.state,n=r.addressSuggestionList;return r.isShowPositionList&&n.length&&(e=w.a.createElement("div",{className:"m-addr-address-suggestion"},w.a.createElement("ul",{id:"m-addr-address-suggestion-ul",onClick:t.addrBack},n&&n.map((function(e,r){return w.a.createElement("li",{key:"suggestion-".concat(r),onClick:function(r){return t.selectSuggestionAddress.bind(t,r,e)()}},w.a.createElement("div",{className:"m-addr-suggestion-title"},e.title),w.a.createElement("div",{className:"m-addr-suggestion-address"},e.address))}))))),e}},{key:"selectSuggestionAddress",value:function(e,t){var r=this;e&&e.stopPropagation(),this.props.locationAddrClickTracking&&Object(O.sendMetrics)(Object.assign({},this.props.locationAddrClickTracking,this.props.trackingContext));var n=this.state,o=n.currentProvinceID,a=n.currentCityID,i=n.currentDistrictID;o+""==t.province_id+""&&a+""==t.city_id+""&&i+""==t.district_id+""||Object(ce.infoH5)("省市区的信息已修改",dv);var s=t.province_id,c=t.city_id,u=t.district_id,l=t.title,d=t.thumb_address,p=t.province,m=t.city,f=t.district,h=(t.address,{currentProvinceID:s,currentCityID:c,currentDistrictID:u,currentProvinceName:p,currentCityName:m,currentDistrictName:f,regionUnionName:p===m?"".concat(m," ").concat(f):"".concat(p,"  ").concat(m,"  ").concat(f),address:d+" "+l,addressSuggestionList:[],addressInfo:t,isShowPositionList:!1,title:"编辑地址"});this.setState((function(e){return h}),(function(){Object(P.disableScroll)(document.getElementById("address")),r.setAddressInputFocused()}))}},{key:"setAddressInputFocused",value:function(){var e=document.getElementById("address"),t=e.value.length,r=t,n=t;if(e.setSelectionRange)e.focus&&e.focus(),e.setSelectionRange(r,n);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",r),o.select()}else e.focus&&e.focus()}},{key:"requestPosition",value:function(e){e&&e.stopPropagation();var t=this;t.state.isPositionBtnActived||(t.props.locationBtnClickTracking&&Object(O.sendMetrics)(Object.assign({},t.props.locationBtnClickTracking,t.props.trackingContext)),t.setState((function(e){return{isPositionBtnActived:!0}}),(function(e){t.getUserCoords((function(e,r){t.setState((function(e){return{isPositionBtnActived:!1}})),r===t.locateOvertimeCount&&(0!==(e=t.addressListFilter(e)).length?t.setState((function(t){return{addressSuggestionList:e||[],isShowPositionList:!0,title:"根据定位获取附近地址"}}),(function(e){Object(P.disableScroll)(document.getElementById("m-addr-address-suggestion-ul"))})):pv("无法获取你的位置，请手动选择"))}),t.locateOvertimeCount),t.geoHandler&&clearTimeout(t.geoHandler),t.geoHandler=setTimeout((function(){t.state.isPositionBtnActived&&(pv("无法获取你的位置"),t.locateOvertimeCount+=1,t.setState((function(e){return{isPositionBtnActived:!1}})))}),15e3)})))}},{key:"getUserCoords",value:function(e,t){var r=this;tv.isWeChatPlatform?window.wx&&window.wx.getLocation({type:"wgs84",success:function(n){var o=n.latitude,a=n.longitude;r.geolocationDecoder(e,{lat:o,lng:a},t)},cancel:function(){e(null,t)}}):tv.isQQPlatform?window.mqq&&window.mqq.sensor&&window.mqq.sensor.getLocation({allowCacheTime:60},(function(n,o,a,i){0!==n?e(null,t):r.geolocationDecoder(e,{lat:o,lng:a,coord_type:5},t)})):r.getGeolocation((function(n){var o=n.coords,a=o.latitude,i=o.longitude;r.geolocationDecoder(e,{lat:a,lng:i},t)}),(function(){e(null,t)}),null)}},{key:"geolocationDecoder",value:function(e,t,r){var n=this;t&&t.lat&&t.lng?(t.coord_type||(t.coord_type=1),(this.antiCrawler?this.antiCrawler.messagePackSync():Promise.resolve("")).then((function(e){var r={payload:{},anti_content:e,location:{lng:t.lng,lat:t.lat,coordinate_type:t.coord_type}};return n.props.scene&&(r.payload.scene=n.props.scene),n.$axiosHttp.post("api/ptolemeaus/poi/nearby/poi_list",r)})).then((function(t){var n;(null==t||null===(n=t.result)||void 0===n?void 0:n.data)?e(t.result.data,r):e(null,r)})).catch((function(){e(null,r)}))):e(null)}},{key:"getGeolocation",value:function(e,t,r){t||(t=function(e){switch(e.code){case e.TIMEOUT:pv("定位失败，请稍后重试");break;case e.PERMISSION_DENIED:pv("定位失败，请先同意定位请求");break;case e.POSITION_UNAVAILABLE:case e.UNKNOWN_ERROR:pv("无法获取你的位置")}}),r||(r={enableHighAccuracy:!1,timeout:6e4,maximumAge:6e4}),navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,r):pv("定位失败，请手动输入地址")}},{key:"addressListFilter",value:function(e){return e&&e.length>0?e.filter((function(e){return-1!==parseInt(e.city_id,10)&&-1!==parseInt(e.district_id,10)&&-1!==parseInt(e.province_id,10)})):[]}},{key:"reduceMobile",value:function(e){for(var t="",r=e.length,n=0;n<r;n++)e.charCodeAt(n)<255&&(t+=e.substr(n,1));return t.replace(/\s|\-/g,"").replace(/^\+86/,"")}},{key:"dealSaveResult",value:function(e){var t=this;t.props.onSaveClickTrackingBase&&Object(O.sendMetrics)(Object.assign({},t.props.onSaveClickTrackingBase,t.props.trackingContext));var r=this.props.communityId?"/api/origenes/address/business/query":"api/origenes/address/".concat(e);this.$axiosHttp.get(r,{params:ev({address_id:e},this.extraRequestParams)}).then((function(e){t.props.onConfirm&&t.props.onConfirm(e.result||e)}))}},{key:"validName",value:function(){var e=this,t=e.state.name;return""===t.trim()?(pv("请填写收货姓名"),!1):hh(t)>16?(pv("姓名不能超过8个字"),e.setState((function(e){return{isNameError:!0}})),!1):(e.setState((function(e){return{isNameError:!1}})),!0)}},{key:"validMobile",value:function(){var e=this.state.mobile;return""===e?(pv("请填写手机号码"),!1):!!e.match(/^\d{11}$/)||(this.setState({isMobileError:!0}),pv("请填写正确的手机号码"),!1)}},{key:"validAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"address",t=this,r=vh(t.state,e)||"";if(!1!==this.shouldIgnoreClearBtnClick){if(""===r.trim())return pv(cv),!1;if(hh(r)>100)return pv(lv),t.setState((function(e){return{isAddressError:!0}})),!1;var n=/^[0-9]*$/;return n.test(r)?(pv(uv),t.setState((function(e){return{isAddressError:!0}})),!1):(t.setState((function(e){return{isAddressError:!1}})),!0)}}},{key:"validRegion",value:function(){var e=this.state,t=e.currentProvinceID,r=e.currentCityID,n=e.currentDistrictID;return t+""!="0"&&r+""!="0"&&n+""!="0"||(pv("请选择地区"),this.setState((function(){return{showRegionSelector:!0}})),!1)}},{key:"validDetail",value:function(){return this.props.communityId?this.validAddress("communityAddressResponse.short_address"):this.validAddress()}},{key:"validAddressInfo",value:function(){return this.validName()&&this.validDetail()&&this.validRegion()&&this.validMobile()}},{key:"removeNameError",value:function(e){this.setState((function(e){return{isNameError:!1,focused:!0}}))}},{key:"removeMobileError",value:function(e){this.setState((function(e){return{isMobileError:!1,focused:!0}}))}},{key:"removeAddressError",value:function(e){this.setState((function(e){return{isAddressError:!1,focused:!0}}))}},{key:"extraRequestParams",get:function(){return this.props.communityId?{scene_id:"1000097",community_address_request:{community_id:this.props.communityId,group_order_id:this.props.groupOrderId}}:{}}}]),s}(I.Component);mv.defaultProps={title:"编辑地址",addressId:"",trackingContext:{},groupOrderId:""};var fv=mv,hv=r("i7vn"),vv=r.n(hv),yv="#fa323c";function gv(e){var t=e.labels;if(!(t&&t.length>0))return null;var r=t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return w.a.createElement("div",{key:t,style:{fontSize:ih(e.fontSize,12)/100+"rem",color:sh(e.fontColor,yv)}},e.title)}));return w.a.createElement("div",{className:vv.a.instruction},r)}var bv=function(e){var t=Object(I.useState)(!1),r=D()(t,2),n=r[0],o=r[1],a=Object(I.useRef)();Object(I.useEffect)((function(){return a.current=document.createElement("div"),document.body.appendChild(a.current),function(){document.body.removeChild(a.current),a.current=null}}),[]);var i=e.addressInfo,s=void 0===i?{}:i,c=e.goodsInfo,u=void 0===c?{}:c,l=e.editAddress,d=e.communityId,p=e.groupOrderId;if(!s.addressId)return null;var m=s.name,f=s.mobile,h=s.province,v=s.city,y=s.district,g=s.address,b=s.addressLabels,_="".concat(m," ").concat(f," 当前收货地址为").concat(h," ").concat(v).concat(y).concat(g);return(null==b?void 0:b.length)>0&&b.forEach((function(e){_+=(null==e?void 0:e.title)||""})),_+="点击可更换",w.a.createElement("div",{className:"oc-address-info ".concat(vv.a.addressInfo),"data-active":"cell-white",onClick:function(){u.communityGroupBuying&&d?o(!0):l()},"aria-label":_,role:"button"},w.a.createElement("div",{className:vv.a.location,"aria-hidden":!0},w.a.createElement("svg",{className:vv.a.icon,fill:"#9c9c9c",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"33987"},w.a.createElement("path",{d:"M512 581.632c-64 0-116.224-52.224-116.224-116.224S448 349.184 512 349.184s116.224 52.224 116.224 116.224-52.224 116.224-116.224 116.224z m0-185.856c-38.4 0-69.632 31.232-69.632 69.632s31.232 69.632 69.632 69.632 69.632-31.232 69.632-69.632-31.232-69.632-69.632-69.632z","p-id":"33988"}),w.a.createElement("path",{d:"M884.224 465.408c0-205.824-166.912-372.224-372.224-372.224S139.776 259.584 139.776 465.408c0 130.048 122.368 283.648 372.224 455.68 249.856-172.032 372.224-325.632 372.224-455.68z m-372.224 512c-279.04-186.88-418.816-357.888-418.816-512 0-231.424 187.392-418.816 418.816-418.816s418.816 187.392 418.816 418.816c0 154.112-139.776 325.12-418.816 512z","p-id":"33989"}))),w.a.createElement("div",{className:vv.a.info,"aria-hidden":!0},w.a.createElement("div",{className:vv.a.receiver},w.a.createElement("span",{className:vv.a.name},m),w.a.createElement("span",{className:vv.a.mobile},"，",f),w.a.createElement("span",{className:vv.a.city},"，",h," ",v)),w.a.createElement("div",{className:vv.a.detail},y," ",g),w.a.createElement(gv,{labels:b})),w.a.createElement("div",{className:vv.a.arrow,"aria-hidden":!0},w.a.createElement(L,null)),n&&be.a.createPortal(w.a.createElement(fv,{title:"请确认收货地址",onConfirm:function(t){o(!1),e.updateAddressInfo({addressId:t.address_id})},onClose:function(){o(!1)},trackingContext:{},analyzeClipBoard:!0,useNewUI:!0,checkRegion:!0,communityId:d,groupOrderId:p,addressId:s.addressId}),a.current))},_v=r("r5oO"),kv=r.n(_v),Sv=rp.getInstance();var Iv,wv=function(e){var t=Object(I.useState)(!1),r=D()(t,2),n=r[0],o=r[1],a=Object(I.useRef)();Object(I.useEffect)((function(){return Sv.initShowEditAddress((function(){return o(!0)})),a.current=document.createElement("div"),document.body.appendChild(a.current),function(){document.body.removeChild(a.current),a.current=null}}),[]);var i=e.addressInfo,s=void 0===i?{}:i,c=e.communityId,u=e.groupOrderId,l=s.addressId,d=s.addressGiftStatus;return parseInt(l||0)<=0&&!d?w.a.createElement("div",{className:kv.a.container,"aria-label":"手动添加收货地址",role:"button"},w.a.createElement("div",{className:kv.a.cell,"data-active":"cell-white","aria-hidden":!0},w.a.createElement("div",{className:"".concat(kv.a.addAddress," ").concat(kv.a.indicator),onClick:function(t){t.stopPropagation(),e.onClickPreCheck?e.onClickPreCheck()&&o(!0):o(!0)}},w.a.createElement("svg",{className:kv.a.addIcon,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"33736",width:"20",height:"20",fill:"#E02E24"},w.a.createElement("path",{d:"M336.83 402.19zM622.69 406.86h0.01-0.01zM901.72 2H122.85A120.75 120.75 0 0 0 2.09 122.73v778.88a120.75 120.75 0 0 0 120.76 120.75h778.87a120.76 120.76 0 0 0 120.76-120.75V122.73A120.76 120.76 0 0 0 901.72 2z m-186 561H563.14v152.58a50.86 50.86 0 1 1-101.71 0V563H308.87a50.85 50.85 0 1 1 0-101.7h152.56V308.75a50.86 50.86 0 0 1 101.71 0v152.57H715.7a50.85 50.85 0 0 1 0 101.7z","p-id":"33737"})),w.a.createElement("span",null,"手动添加收货地址"))),n&&be.a.createPortal(w.a.createElement(fv,{title:c?"添加新收货地址":"请填写收货地址",onConfirm:function(t){e.updateAddressInfo&&e.updateAddressInfo({addressId:t.address_id,name:t.name,province:t.province,city:t.city,district:t.district,address:t.address,mobile:t.mobile,provinceId:t.province_id,cityId:t.city_id,districtId:t.district_id})},onClose:function(){o(!1)},trackingContext:{},communityId:c,groupOrderId:u,analyzeClipBoard:!0,useNewUI:!0,checkRegion:!0}),a.current)):null},Pv="请填写真实姓名",Ov="请填写身份证号",Cv="请填写正确的身份证号",xv="姓名和身份证不匹配，请重新认证，已保留上次认证信息",Ev="带*信息无法提交，请重新认证，已保留上次认证信息",Dv="提交身份认证失败，请稍后重试",Nv="身份认证失败，请稍后重试",Tv=[40003,11e4];function jv(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Av(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jv(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jv(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rv=function(){var e=c()(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Iv||(n=le.default.getInstance().getPageID(),Iv=Object(ue.createDefaultAxios)({pageInfo:{pageId:n}})),e.abrupt("return",Iv(Av(Av({},t),{},{defaultErrorHandler:function(){}})));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Mv=Object(_e.getPlatform)(window.navigator.userAgent);function Lv(e,t){return function(r){if(r&&r.target&&/\*/.test(r.target.value)){var n={};n[t]="",e.setState(n)}e.isFocus=!0,e.scrollYWhenFocus=window.scrollY}}function Bv(e,t){return function(r){var n={snapshotId:""};/\*/.test(e.state.realName)||/\*/.test(e.state.idCardNo)?(n.realName="",n.idCardNo=""):n[t]=r.target.value,e.setState(n)}}function Fv(e){return Uv.apply(this,arguments)}function Uv(){return(Uv=c()(i.a.mark((function e(t){var r,n,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.baseParams,n=t.queryUrl,o=t.extraParams,a=t.getAntiContent,Object(Se.show)(),o&&(s=Object.assign(r,o)),!a){e.next=8;break}return e.next=6,a();case 6:e.t0=e.sent,s.risk_request={anti_content:e.t0};case 8:return e.abrupt("return",Rv({method:"POST",url:n,data:s}).then((function(e){return Object(Se.hide)(),{success:!0,result:e}})).catch((function(e){Object(Se.hide)();var t,r=(e=e||{}).errorCode,n=e.response;return n&&n.data&&(t=n.data.error_msg),!r&&n&&(r=n.status),{success:!1,errorCode:r,message:t,response:n}})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r("gvmc");function Hv(e){var t=e.visible,r=e.extraParams,n=e.onRecIdcardClick,o=Object(I.useState)([]),a=D()(o,2),i=a[0],s=a[1];return Object(I.useEffect)((function(){var e;(e=r,Rv({method:"POST",url:"api/origenes/recommend/user/cards/order",data:e}).then((function(e){return e})).catch((function(e){}))).then((function(e){var t=e&&e.result||[];t&&t.length&&s(t)}))}),[]),w.a.createElement(w.a.Fragment,null,t&&i&&i.length>0&&w.a.createElement("div",{className:"bubbleContainer"},w.a.createElement("span",{className:"recCardTriangle"}),w.a.createElement("div",{className:"idCardList"},i.slice(0,3).map((function(e,t){return w.a.createElement("div",{className:"recCardItem",key:t,onClick:function(t){n(e)}},e.id_card_name)})))))}r("v9rC");var Vv=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).state={idFocus:!1},n.idcardFormRef=w.a.createRef(),n.nameInputRef=w.a.createRef(),n.onIdFocus=n.onIdFocus.bind(dh()(n)),n.onIdBlur=n.onIdBlur.bind(dh()(n)),n}return p()(r,[{key:"componentDidMount",value:function(){this.props.onShow&&this.props.onShow();var e=this.idcardFormRef.current,t=this.nameInputRef.current;Object(P.disableScroll)(e),t&&t.focus()}},{key:"componentWillUnmount",value:function(){Object(P.enableScroll)()}},{key:"onIdFocus",value:function(){this.props.onIdFocus(),this.setState({idFocus:!0})}},{key:"onIdBlur",value:function(){this.props.onBlur(),this.setState({idFocus:!1})}},{key:"render",value:function(){var e=this.props,t=e.onClickClose,r=e.onClickSubmit,n=e.realName,o=e.idCardNo,a=e.onNameFocus,i=e.onNameChange,s=e.onIdChange,c=e.labels,u=e.onBlur,l=e.submitText,d=e.onRecIdcardClick,p=e.disableRec;return w.a.createElement("div",{className:"new-idcard-form",id:"new-id-card",ref:this.idcardFormRef},w.a.createElement("div",{className:"new-idcard-form-container"},w.a.createElement("div",{className:"new-idcard-form-title"},c&&c.title||"实名认证",w.a.createElement("div",{className:"new-idcard-form-close",onClick:t})),c&&c.formHint&&w.a.createElement("div",{className:"new-idcard-form-hint"},c.formHint),w.a.createElement("div",{className:"new-idcard-form-row"},w.a.createElement("div",{className:"new-idcard-form-label"},"真实姓名"),w.a.createElement("div",{className:"new-idcard-form-input"},p?null:w.a.createElement(Hv,{visible:!this.state.idFocus&&!n,extraParams:this.props.extraParams,onRecIdcardClick:d}),w.a.createElement("input",{onFocus:a,onChange:i,type:"text",value:n,placeholder:c&&c.nameHint||"请填写姓名",onBlur:u,ref:this.nameInputRef}))),w.a.createElement("div",{className:"new-idcard-form-row"},w.a.createElement("div",{className:"new-idcard-form-label"},"身份证号"),w.a.createElement("div",{className:"new-idcard-form-input"},w.a.createElement("input",{onFocus:this.onIdFocus,onChange:s,type:"text",value:o,placeholder:c&&c.idHint||"请填写身份证号码",onBlur:this.onIdBlur}))),w.a.createElement("div",{className:"new-idcard-form-action","data-active":"red"},w.a.createElement("div",{className:"new-idcard-form-btn",onClick:r},l||"保存"))))}}]),r}(w.a.Component);var zv=function(e){f()(n,e);var t,r=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(n);function n(e){var t,o;return l()(this,n),(t=r.call(this,e)).hasAuthenticId=!1,t.isSubmitting=!1,t.state={realName:"",idCardNo:"",snapshotId:"",inHystrixAlert:!1},t.focusRealName=Lv(dh()(t),"realName"),t.focusIdCardNo=Lv(dh()(t),"idCardNo"),t.changeRealName=Bv(dh()(t),"realName"),t.changeIdCardNo=Bv(dh()(t),"idCardNo"),t.onBlur=(o=dh()(t),function(){o.isFocus=!1,Mv.systemVersion&&Object(_e.compareVersion)(Mv.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&setTimeout((function(){o.isFocus||window.scrollTo(0,o.scrollYWhenFocus)}),0)}),t.validateInfo=(dh()(t),function(e,t){var r=null,n=!0;return function(e){return/^[\u2f00-\u9fff]{1,10}([.·]{0,1}[\u2f00-\u9fff]+)*$/gi.test(e)}(e)?t?/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)||(r=Cv,n=!1):(r=Ov,n=!1):(r=Pv,n=!1),{valid:n,errorHint:r}}),t.onShow=t.onShow.bind(dh()(t)),t.onClickClose=t.onClickClose.bind(dh()(t)),t.submit=t.submit.bind(dh()(t)),t.onRecIdcardClick=t.onRecIdcardClick.bind(dh()(t)),t}return p()(n,[{key:"componentDidMount",value:function(){var e=this.props||{},t=e.idCardName,r=e.idCardNo;this.setState({realName:t||"",idCardNo:r||""})}},{key:"onRecIdcardClick",value:function(e){e&&e.card_snapshot_id&&this.setState({realName:e.id_card_name,idCardNo:e.mask_id_card_no,snapshotId:e.card_snapshot_id})}},{key:"onShow",value:function(){var e=this.props.trackingConstant;e&&e.IDCardPopupShow&&Object(O.sendImprMetrics)(e.IDCardPopupShow)}},{key:"onClickClose",value:function(e){this.props.onClickClose&&this.props.onClickClose()}},{key:"submit",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.trackingConstant,n=t.extraParams,o=t.submitSuccessCallback,a=t.getAntiContent,s=(this.state.realName||"").trim(),c=(this.state.idCardNo||"").trim(),u=this.state.snapshotId,l={id_card_name:s,id_card_no:c},d="api/origenes/strong/update/user/card",!this.isSubmitting){e.next=8;break}return e.abrupt("return");case 8:if(u){e.next=20;break}if(!/\*/.test(s)&&!/\*/.test(c)){e.next=13;break}return Object(ce.info)(Ev),this.onClickClose(),e.abrupt("return");case 13:if((p=this.validateInfo(s,c)).valid){e.next=17;break}return Object(ce.info)(p.errorHint,{duration:3}),e.abrupt("return");case 17:18===c.length&&"x"===c.charAt(17)&&(c=c.toUpperCase()),e.next=22;break;case 20:l={snapshot_id:u},d="api/origenes/update/user/card/snapshotid";case 22:return this.isSubmitting=!0,e.next=25,Fv({baseParams:l,queryUrl:d,extraParams:n,getAntiContent:a});case 25:if(e.t0=e.sent,e.t0){e.next=28;break}e.t0={};case 28:if(!(m=e.t0).success){e.next=37;break}this.hasAuthenticId=!0,(f=r&&r.IDCardPopupSaveClick)&&Object(O.sendClickMetrics)(f),o&&o({success:!0,result:m.result,realName:s,idCardNo:c}),this.onClickClose(),e.next=47;break;case 37:if(h=m.errorCode,v=m.message,y=m.response,![1101,409,512,511,11e4,500,5e4].includes(+h)){e.next=45;break}return ft({title:"当前实名信息提交人数较多，请稍后再试",confirmButtonLabel:"知道了",onConfirm:function(){b.setState({inHystrixAlert:!1})}}),this.setState({inHystrixAlert:!0}),e.next=43,new Promise((function(e){return setTimeout(e,200)}));case 43:e.next=47;break;case 45:g=Tv.includes(h)?Dv:43008===h&&this.hasAuthenticId?xv:h&&y?v||Dv:Nv,Object(ce.info)(g);case 47:this.isSubmitting=!1;case 48:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=this.props.labels;return this.props.idCardFormVisible&&!this.state.inHystrixAlert?w.a.createElement(Vv,{onClickClose:this.onClickClose,onShow:this.onShow,onIdFocus:this.focusIdCardNo,onNameChange:this.changeRealName,onNameFocus:this.focusRealName,onIdChange:this.changeIdCardNo,realName:e.realName,idCardNo:e.idCardNo,onClickSubmit:this.submit,onBlur:this.onBlur,labels:t,submitText:this.props.submitText,extraParams:this.props.extraParams,onRecIdcardClick:this.onRecIdcardClick,disableRec:this.props.disableRec}):null}}]),n}(I.Component),Wv=zv,Qv=r("TYy9"),qv=r.n(Qv),Gv=r("V00b"),Yv=r.n(Gv),Xv=w.a.createContext({glide:function(){}}),Jv=Xv.Provider,Kv=Object(I.forwardRef)((function(e,t){var r=e.initialVisible,n=void 0===r||r,a=e.onShowStart,i=void 0===a?function(){}:a,s=e.onHideStart,c=void 0===s?function(){}:s,u=e.onShow,l=void 0===u?function(){}:u,d=e.onHide,p=void 0===d?function(){}:d,m=e.children,f=e.bgFillClassName,h=void 0===f?"":f,v=e.containerClassName,y=void 0===v?"":v,g=Object(I.useState)(!1),b=D()(g,2),_=b[0],k=b[1],S=Object(I.useState)(n),P=D()(S,2),O=P[0],C=P[1];function x(e){null==e||e.stopPropagation(),i(e),C(!0)}function E(e){null==e||e.stopPropagation(),c(e),k(!1)}function N(e){null==e||e.stopPropagation(),O?E(e):x(e)}return Object(I.useEffect)((function(){if(O){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,17)};e((function(){e((function(){k(!0)}))}))}}),[O]),Object(I.useImperativeHandle)(t,(function(){return{show:x,hide:E,toggle:N,visible:O}})),O?w.a.createElement("div",{className:A()(Yv.a.bgFill,h,o()({},Yv.a.bgFillShow,_)),onClick:E},w.a.createElement("div",{className:A()(Yv.a.container,y,o()({},Yv.a.visibleContainer,_)),onClick:function(e){return e.stopPropagation()},onTransitionEnd:function(e){null==e||e.stopPropagation(),_?l(e):(p(e),C(!1))}},w.a.createElement(Jv,{value:{glide:E}},m))):null})),Zv={MOBILE:"mobile",MOBILE_ID:"mobile_id",NAME:"id_card_name",ID:"id_card_no",ID_SNAPSHOT:"id_card_snapshot_id",TEMPERATURE:"temperature",SYMPTOM:"symptom_type",RISK_TRAVEL:"risk_travel",CONFIRM:"confirm",OCCUPATION:"occupation_type",CATALOG:"catalog",SELF_USE:"self_use"},$v=r("JZM8"),ey=r.n($v),ty="undefined"!=typeof window,ry={DEFAULT:0,LOADING:1,LOADED:2,LOAD_FAILED:3},ny=null,oy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l()(this,e),this.debug=!1,this.serverTime=t.serverTime||0,this.riskControlCrawler=null}var t;return p()(e,[{key:"getStatus",value:function(){return ry.LOADED}},{key:"loadScript",value:function(){return Promise.resolve()}},{key:"initRiskController",value:function(){!this.riskControlCrawler&&ty&&(this.riskControlCrawler=new In.default({serverTime:this.serverTime,_2827c887a48a351a:!1}),this.riskControlCrawler.init(null))}},{key:"getRiskControlInfoSync",value:(t=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.riskControlCrawler){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.riskControlCrawler.messagePackSync({touchEventData:!0,clickEventData:!0,focusblurEventData:!0,changeEventData:!0,locationInfo:!0,referrer:!0,browserSize:!0,browserInfo:!0,token:!0,fingerprint:!0});case 4:return t=e.sent,this.riskControlCrawler.clearCache(),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getRiskControlInfoAsync",value:function(){var e=this;return new Promise((function(t,r){e.initRiskController(),t(e.getRiskControlInfoSync())}))}}]),e}();oy.RiskControllerStatus=ry,oy.RISK_SCRIPT_DEV="//cdn.hutaojie.com/hanzo/react-1343CE9FC918BA68DC77A314370FF50B-759d07b714.js",oy.RISK_SCRIPT_PROD="//static.pddpic.com/hanzo/react-1343CE9FC918BA68DC77A314370FF50B-58d69cbc63.js",oy.getInstance=function(e){return ty?(ny||(ny=new oy(e)),ny):null};var ay,iy=oy;function sy(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function cy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sy(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sy(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var uy=function(e){if(!ay){var t=le.default.getInstance().getPageID();ay=Object(ue.createDefaultAxios)({pageInfo:{pageId:t}})}return ay(cy(cy({},e),{},{encodeNativeResponse:!1,defaultErrorHandler:function(){}}))};function ly(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function dy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ly(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ly(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var py=function(){var e=c()(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new iy({serverTime:Date.now()})).initRiskController(),e.next=4,t.getRiskControlInfoSync();case 4:return r=e.sent,e.prev=5,e.next=8,uy({method:"POST",url:"/api/kali/query/masked/idcard/by/scene",data:{scene:"ANTI_VIRUS",anti_content:r}});case 8:if(!(n=e.sent).success){e.next=11;break}return e.abrupt("return",(n.result||[]).map((function(e){return{snapshotId:e.snapshot_id,idNo:e.id_card_no,name:e.id_card_name}})));case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",[]);case 16:return e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),my=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new iy({serverTime:Date.now()})).initRiskController(),e.next=4,r.getRiskControlInfoSync();case 4:return n=e.sent,o=t.snapshotId,a=t.provinceId,s=t.cityId,e.next=8,uy({method:"POST",url:"/api/barbera/biz/info/epidemic/drug/latest",data:{snapshot_id:o,province_id:a,city_id:s,anti_content:n}});case 8:if(null==(c=e.sent)?void 0:c.success){e.next=11;break}throw new Error;case 11:return u=c.result,l=u.epidemic_drug_info_page_template,d=u.epidemic_drug_info,p=u.epidemic_drug_info_page_instruction,d[Zv.CONFIRM]=!0,e.abrupt("return",{template:l,info:d,instruction:p});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fy=function(){var e=c()(i.a.mark((function e(t){var r,n,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new iy({serverTime:Date.now()})).initRiskController(),e.next=4,r.getRiskControlInfoSync();case 4:return n=e.sent,e.next=7,uy({method:"POST",url:"/api/barbera/biz/info/epidemic/drug/save",data:dy(dy({},ey()(t,Object.values(Zv))),{},{province_id:t.provinceId,city_id:t.cityId,anti_content:n})});case 7:if(o=e.sent,a=o.success,s=o.result,!a){e.next=12;break}return e.abrupt("return",null==s?void 0:s.snapshot_id);case 12:throw new Error;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hy=function(){var e=c()(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uy({method:"POST",url:"api/barbera/biz/info/epidemic/drug/index"});case 2:if(t=e.sent,r=t.success,n=t.result,r){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",n.epidemic_drug_index_list);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vy=w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"m624.108 511.996 375.932-373.359c31.939-31.72 31.939-83.128 0-114.848-31.941-31.72-83.705-31.72-115.646 0L511.998 393.62 139.6 23.788c-31.94-31.72-83.705-31.72-115.644 0s-31.94 83.128 0 114.848l375.931 373.36L23.956 885.355c-31.94 31.72-31.94 83.128 0 114.848 15.97 15.86 36.896 23.79 57.822 23.79s41.852-7.93 57.822-23.79l372.398-369.83 372.397 369.83c15.97 15.86 36.896 23.79 57.822 23.79s41.853-7.93 57.823-23.79c31.939-31.72 31.939-83.128 0-114.848l-375.932-373.36z"})),yy=w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M899.197 147.163C770.636 141.475 647.65 97.161 533.593 15.53L511.976 0l-21.503 15.416c-114.17 81.745-237.1 126.23-364.808 131.747H85.333v346.434c0 253.938 171.738 471.242 417.485 528.526l10.694 1.82 7.737-1.82c245.746-57.284 417.37-274.588 417.37-528.469V147.22h-39.422zM483.25 687.293l-187.21-192.728 50.23-51.766 136.98 141.02 240.058-247.17 50.287 51.71-290.345 298.934z"})),gy=w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"m512 0 11.123.106C800.768 6.038 1024 232.942 1024 512c0 282.765-229.235 512-512 512S0 794.765 0 512 229.235 0 512 0zM383.576 343.64a28.319 28.319 0 0 0-39.9 0 27.895 27.895 0 0 0 0 39.618L473.336 512 343.71 640.742a27.895 27.895 0 0 0 0 39.618 28.213 28.213 0 0 0 39.9 0L512 552.783 640.424 680.36l3.495 2.93a28.248 28.248 0 0 0 36.37-2.93 27.895 27.895 0 0 0 0-39.618L550.665 512l129.624-128.742 2.719-3.177a27.895 27.895 0 0 0-2.719-36.44l-3.178-2.684a28.354 28.354 0 0 0-36.723 2.683L512 471.181z"})),by=w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M292.7 1023.998c-14.555 0-29.11-5.556-40.222-16.667-22.223-22.222-22.223-58.24 0-80.444L667.124 512.24 251.978 97.112c-22.222-22.204-22.222-58.222 0-80.445s58.222-22.222 80.445 0l428.554 428.536c36.944 36.981 36.944 97.11.038 134.074L332.922 1007.33c-11.111 11.112-25.667 16.667-40.222 16.667z"})),_y=w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#E02E24"},w.a.createElement("path",{d:"M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0zm219.648 307.2L444.53 627.598l-122.937-123.05L256 570.027l192.284 192.398 352.484-393.387-69.12-61.838z"})),ky=w.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#9c9c9c"},w.a.createElement("path",{d:"M512 2c281.666 0 510 228.334 510 510s-228.334 510-510 510S2 793.666 2 512 230.334 2 512 2zm0 25.5C244.418 27.5 27.5 244.418 27.5 512S244.418 996.5 512 996.5 996.5 779.582 996.5 512 779.582 27.5 512 27.5z"})),Sy=w.a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",fill:"#e02e24"},w.a.createElement("path",{d:"M512.28 120.22c-216.15 0-392 175.85-392 392s175.85 392 392 392 392-175.85 392-392-175.84-392-392-392z m0 840c-247 0-448-201-448-448s201-448 448-448 448 201 448 448-200.97 448-448 448z m-66.41-261.94L287.76 540.54l53.93-53.78 101.13 100.91 236.1-262.72 56.84 50.77z"})),Iy=r("xIpx"),wy=r.n(Iy);var Py=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(){var e;l()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).scrollerRef=w.a.createRef(),e.setTranslateY=function(t){e.srollerDom.style.transform="translate3d(0,".concat(t,"px,0)"),e.srollerDom.style.webkitTransform="translate3d(0,".concat(t,"px,0)")},e.setRotateX=function(t){var r=e.srollerDom.children||[];Array.prototype.slice.call(r).forEach((function(e,r){e.style.transform="rotateX(".concat(25*(r+t),"deg)"),e.style.webkitTransform="rotateX(".concat(25*(r+t),"deg)")}))},e.setTransitionDuration=function(e,t){e.style.transitionDuration=t;var r=function t(){e.style.transitionDuration="0ms",e.removeEventListener("transitionEnd",t),e.removeEventListener("webkitTransitionEnd",t)};e.addEventListener("transitionEnd",r),e.addEventListener("webkitTransitionEnd",r)},e.bindEvent=function(){var t=0,r=1,n=0,o=0,a=null;e.srollerDom.addEventListener("touchstart",(function(e){e.preventDefault(),e.stopPropagation(),clearInterval(a),t=e.changedTouches[0].clientY,n=t}),!1),e.srollerDom.addEventListener("touchmove",(function(a){a.preventDefault(),a.stopPropagation();var i=a.changedTouches[0].pageY-t;o=a.changedTouches[0].pageY-n,n=a.changedTouches[0].pageY,(0===e.index&&i>0||e.index===-e.maxIndex&&i<0)&&(r=1-Math.abs(i)/e.srollerDom.clientWidth,r=Math.max(r,0),i=parseInt(i*r)),e.setTranslateY(e.index*e.distance+i),e.setRotateX(e.index+i/e.distance)}),!1),e.srollerDom.addEventListener("touchend",(function(r){r.preventDefault(),r.stopPropagation();var n=r.changedTouches[0].pageY-t;0===n?(e.index=-r.target.getAttribute("data-index"),e.setTransitionDuration(e.srollerDom,"200ms"),e.setTranslateY(e.index*e.distance),e.setRotateX(e.index),e.props.setIndex(Math.abs(e.index))):function(t){var r=!1;Math.abs(o)<=1&&(r=!0),a=setInterval((function(){Math.abs(o)<=1?(clearInterval(a),r&&(e.index+=Math.round(t/e.distance)),e.index=e.index>0?0:Math.max(e.index,-e.maxIndex),e.setTransitionDuration(e.srollerDom,"400ms"),Array.prototype.slice.call(e.srollerDom.children).forEach((function(t){e.setTransitionDuration(t,"200ms")})),e.setTranslateY(e.index*e.distance),e.setRotateX(e.index),e.props.setIndex(Math.abs(e.index))):(t+=o*=.3,e.index+=Math.round(t/e.distance))}),10)}(n)}),!1)},e.ready=function(){e.calculateDistance(),e.setTranslateY(e.index*e.distance),e.setRotateX(e.index),e.props.setIndex(Math.abs(e.index))},e.calculateDistance=function(){var t=e.srollerDom.offsetHeight,r=(e.props.data||[]).length||1;e.distance=(t/r).toFixed(2)},e}return p()(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,r=void 0===t?[]:t,n=e.activeIndex;this.index=-n||0,this.maxIndex=r.length-1,this.ready(),this.bindEvent()}},{key:"componentDidUpdate",value:function(){var e=this,t=(this.props.data||[]).length-1;t!==this.maxIndex&&(this.index=-this.props.activeIndex,this.maxIndex=t,this.srollerDom.style.transitionDuration="200ms",setTimeout((function(){e.ready()}),0))}},{key:"shouldComponentUpdate",value:function(e){return(e.data.length!==this.props.data.length||e.data[0]!==this.props.data[0]||e.activeIndex!==this.props.activeIndex)&&(this.index=-e.activeIndex,this.ready(),!0)}},{key:"render",value:function(){var e=this.props,t=e.data,r=void 0===t?[]:t,n=e.label,o=e.type;return w.a.createElement("div",{className:wy.a.wheel},w.a.createElement("ul",{ref:this.scrollerRef,className:wy.a.wheelScroll},r.map((function(e,t){return w.a.createElement("div",{key:"date-".concat(o,"-").concat(e),"data-index":t,className:wy.a.wheelItem},"".concat(e).concat(n||""))}))))}},{key:"srollerDom",get:function(){return this.scrollerRef.current}}]),r}(w.a.Component),Oy=r("SzcP"),Cy=r.n(Oy),xy=function(e){var t=e.title,r=e.showPicker,n=e.pickerList,a=e.onSelect,i=e.toggleShowPicker,s=e.selectedItem,c=Object(I.useState)(0),u=D()(c,2),l=u[0],d=u[1],p=function(e){e&&e.stopPropagation(),i&&i()};return n?w.a.createElement("div",{className:A()(Cy.a.picker,o()({},Cy.a.showPicker,r))},w.a.createElement("div",{className:Cy.a.mask,onClick:p}),w.a.createElement("div",{className:Cy.a.container},w.a.createElement("div",{className:Cy.a.panel},t,w.a.createElement("div",{className:Cy.a.close,onClick:p},w.a.createElement("div",{className:Cy.a.closeIcon}))),w.a.createElement("div",{className:Cy.a.scrollWrap},r&&w.a.createElement("div",{className:Cy.a.content},w.a.createElement("div",{className:Cy.a.maskTop}),w.a.createElement("div",{className:Cy.a.maskBottom}),w.a.createElement("div",{className:Cy.a.wrapper},w.a.createElement(Py,{data:n,activeIndex:s&&n&&n.findIndex((function(e){return e===s})),setIndex:function(e){d(e)}})))),w.a.createElement("div",{className:Cy.a.bottomBtn,onClick:function(e){e&&e.stopPropagation();var t=n[l];a(t),i&&i()},"data-active":"red"},"确认"))):null};var Ey=function(e){var t=e.title,r=e.showPicker,n=e.pickerList,o=e.onSelect,a=e.toggleShowPicker,i=e.selectedItem,s=Object(I.useCallback)((function(e,t){var r=t.closeType,n=t.content;if(1==+r&&n&&n.length){if(!n||!n.length)return;var i=n[0];o(i)}else a()}),[a,o]),c=Object(I.useRef)();return Object(I.useEffect)((function(){c.current=function(){if(n&&n.length){var e=t,r=Object(_e.getCurrentPlatform)();r.isNativePlatform&&r.system===_e.SYSTEM.Android&&Object(_e.compareVersion)(r.version,"5.77.0")<0&&(e=""),Object(ke.invokeBridgeCallNativeFun)("JSCommonPicker","show",{columnCount:1,defaultValue:[i],listData:[n],titleText:e,maskClosable:!0,closeCallback:s},"5.66.0","5.66.0").catch((function(e){a()}))}}}),[s,n,i,a,t]),Object(I.useEffect)((function(){r&&c.current()}),[r]),null},Dy=function(e){var t=e.title,r=e.showPicker,n=e.pickerList,o=e.onSelect,a=e.toggleShowPicker,i=e.selectedItem,s=Object(I.useState)(""),c=D()(s,2),u=c[0],l=c[1],d=Object(I.useRef)();return Object(I.useEffect)((function(){var e="h5",t=Object(_e.getCurrentPlatform)();d.current=xy,t.isNativePlatform&&Object(_e.compareVersion)(t.version,"5.66.0")>=0&&(e="native",d.current=Ey),l(e)}),[]),u?w.a.createElement(d.current,{title:t,showPicker:r,pickerList:n,onSelect:o,toggleShowPicker:a,selectedItem:i}):null},Ny=r("a96g"),Ty=r.n(Ny);function jy(e){var t=e.onSelect,r=e.visible,n=e.idRecList,o=void 0===n?[]:n;return w.a.createElement("div",{className:Ty.a.list,style:{visibility:r?"":"hidden"}},w.a.createElement("div",{className:Ty.a.arrow}),w.a.createElement("div",{id:"id_rec_list"},o.slice(0,3).map((function(e){var r=e.snapshotId,n=e.idNo,o=e.name;return w.a.createElement("div",{className:Ty.a.item,onClick:function(){t({snapshotId:r,idNo:n,name:o})},key:n},w.a.createElement("div",{className:Ty.a.name},o),w.a.createElement("div",{className:Ty.a.idCard},n),w.a.createElement("div",{className:Ty.a.border}))}))),w.a.createElement("div",{className:Ty.a.footer},"近期实名信息（已加密保护）"))}var Ay=r("BXy8"),Ry=r.n(Ay);function My(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Ly(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?My(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):My(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var By=function(){var e=Object(_e.getCurrentPlatform)();e.system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(e.systemVersion,"12.0")>=0&&Object(_e.compareVersion)(e.systemVersion,"14.0")<0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)},Fy=null,Uy=function(){clearTimeout(Fy),Fy=null},Hy=function(){Fy=setTimeout(By,200)},Vy=1,zy=2,Wy=3,Qy=4,qy=5,Gy=6,Yy=7;function Xy(e,t){var r=_()(e),n=t.key,o=t.value,a=t.name,i=void 0===a?"":a,s=t.idNo,c=void 0===s?"":s,u=t.snapshotId,l=void 0===u?null:u;switch(t.type){case Vy:return t.value;case zy:r.info[n]=o;break;case Wy:r.info[n]=o,r.info[Zv.ID_SNAPSHOT]=null;break;case Qy:r.info[Zv.NAME]=i,r.info[Zv.ID]=c,r.info[Zv.ID_SNAPSHOT]=l;break;case qy:r.info[Zv.MOBILE]="",r.info[Zv.MOBILE_ID]=null;break;case Gy:r.catalogData=o;break;case Yy:r.showCatalog=o;break;default:throw new Error}return r}function Jy(e,t,r){if(e&&t&&r){for(var n=10*e,o=["".concat(e.toFixed(1),"°C")];n<10*t;)n+=10*r,o.push("".concat((n/10).toFixed(1),"°C"));return o}}var Ky=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).el=document.createElement("div"),n.el.setAttribute("id","pickerContainer"),n}return p()(r,[{key:"componentDidMount",value:function(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.el)}},{key:"render",value:function(){var e=this.props,t=e.showPicker,r=e.toggleShowPicker,n=e.onSelect,o=e.pickerList,a=e.selectedItem,i=e.title;return be.a.createPortal(w.a.createElement(Dy,{title:i,showPicker:t,pickerList:o,onSelect:n,toggleShowPicker:r,selectedItem:a}),this.el)}}]),r}(w.a.Component);function Zy(e,t){var r=e.text,n=e.value,o=e.placeholder,a=e.setValue,i=e.mobileId,s=e.clearMobile,c=Object(I.useState)(!1),u=D()(c,2),l=u[0],d=u[1],p=Object(I.useRef)();Object(I.useImperativeHandle)(t,(function(){return p.current}));var m=function(){a(""),setTimeout((function(){var e;return null==p||null===(e=p.current)||void 0===e?void 0:e.focus()}),0)};return w.a.createElement("div",{className:Ry.a.slot},w.a.createElement("div",{className:Ry.a.key},r),w.a.createElement("input",{className:Ry.a.input,type:"tel",value:n||"",onChange:function(e){var t=e.target.value;t&&!/^1\d{0,10}$/.test(t)||a(t)},onFocus:function(){Hy(),d(!0),i&&s()},onBlur:function(){Object(_e.getCurrentPlatform)().system===_e.SYSTEM.Android?d(!1):setTimeout((function(){return d(!1)}),0),Hy()},placeholder:o,ref:p}),l&&n&&w.a.createElement("div",{className:Ry.a.clearBtn,onTouchStart:function(){Object(_e.getCurrentPlatform)().system===_e.SYSTEM.Android&&m()},onClick:function(){Object(_e.getCurrentPlatform)().system!==_e.SYSTEM.Android&&m()}},gy))}var $y=Object(I.forwardRef)(Zy);function eg(e,t){var r=e.text,n=e.value,o=e.setValue,a=e.setIdInfo,i=e.placeholder,s=e.snapshotId,c=Object(I.useState)(!1),u=D()(c,2),l=u[0],d=u[1],p=Object(I.useState)([]),m=D()(p,2),f=m[0],h=m[1],v=Object(I.useState)(!1),y=D()(v,2),g=y[0],b=y[1],_=Object(I.useRef)();Object(I.useImperativeHandle)(t,(function(){return _.current})),Object(I.useEffect)((function(){py().then((function(e){return h(e)}))}),[]);var k=function(){o(""),setTimeout((function(){var e;return null==_||null===(e=_.current)||void 0===e?void 0:e.focus()}),0)};return w.a.createElement("div",{className:Ry.a.slot},w.a.createElement("div",{className:Ry.a.key},r),w.a.createElement("input",{maxLength:15,className:Ry.a.input,value:n||"",onChange:function(e){var t=e.target.value;o(t),t||b(!0)},onFocus:function(){Uy(),d(!0),s?(a(),setTimeout((function(){return b(!0)}),0)):n||setTimeout((function(){return b(!0)}),0)},onBlur:function(){Object(_e.getCurrentPlatform)().system===_e.SYSTEM.Android?d(!1):setTimeout((function(){return d(!1)}),0),setTimeout((function(){return b(!1)}),0),Hy()},placeholder:i,ref:_}),l&&n&&w.a.createElement("div",{className:Ry.a.clearBtn,onTouchStart:function(){Object(_e.getCurrentPlatform)().system===_e.SYSTEM.Android&&k()},onClick:function(){Object(_e.getCurrentPlatform)().system!==_e.SYSTEM.Android&&k()}},gy),w.a.createElement(jy,{visible:!n&&g&&(null==f?void 0:f.length)>0,idRecList:f,onSelect:a}))}var tg=Object(I.forwardRef)(eg);function rg(e,t){var r=e.text,n=e.value,o=e.setValue,a=e.placeholder,i=e.snapshotId,s=e.setIdInfo,c=Object(I.useState)(!1),u=D()(c,2),l=u[0],d=u[1],p=Object(I.useRef)();Object(I.useImperativeHandle)(t,(function(){return p.current}));var m=function(){o(""),setTimeout((function(){var e;return null==p||null===(e=p.current)||void 0===e?void 0:e.focus()}),0)};return w.a.createElement("div",{className:Ry.a.slot},w.a.createElement("div",{className:Ry.a.key},r),w.a.createElement("input",{maxLength:18,className:Ry.a.input,value:n||"",onChange:function(e){var t=e.target.value;t&&!/^[0-9Xx]{0,18}$/.test(t)||o(t)},onFocus:function(){Uy(),d(!0),i&&s()},onBlur:function(){Object(_e.getCurrentPlatform)().system===_e.SYSTEM.Android?d(!1):setTimeout((function(){return d(!1)}),0),Hy()},placeholder:a,ref:p}),l&&n&&w.a.createElement("div",{className:Ry.a.clearBtn,onTouchStart:function(){Object(_e.getCurrentPlatform)().system===_e.SYSTEM.Android&&m()},onClick:function(){Object(_e.getCurrentPlatform)().system!==_e.SYSTEM.Android&&m()}},gy))}var ng=Object(I.forwardRef)(rg);function og(e){var t=e.text,r=e.value,n=e.setValue,o=e.placeholder,a=e.min,i=e.max,s=e.interval,c=e.defaultTemperature,u=Object(I.useState)(!1),l=D()(u,2),d=l[0],p=l[1],m=Jy(a,i,s);return w.a.createElement("div",{className:"".concat(Ry.a.slot," ").concat(Ry.a.slotActive),onClick:function(){return p(!0)}},w.a.createElement("div",{className:Ry.a.key},t),!!r&&"".concat(r,"°C"),!r&&w.a.createElement("span",{className:Ry.a.temperaturePlaceholder},o),w.a.createElement("div",{className:Ry.a.arrow},by),w.a.createElement(Ky,{title:"请选择体温",showPicker:d,toggleShowPicker:function(){return p(!1)},onSelect:function(e){p(!1);var t=e&&e.replace("°C","");n(+t)},selectedItem:c?"".concat((+c).toFixed(1),"°C"):"37.0°C",pickerList:m}))}function ag(e){var t=e.text,r=e.value,n=e.setValue,o=e.options,a=void 0===o?[]:o,i=e.placeholder,s=Object(I.useState)(!1),c=D()(s,2),u=c[0],l=c[1],d=a.find((function(e){return+e.type==+r})),p=null==d?void 0:d.text,m=a.map((function(e){return e.text}));return w.a.createElement("div",{className:"".concat(Ry.a.slot," ").concat(Ry.a.slotActive),onClick:function(){return l(!0)}},w.a.createElement("div",{className:Ry.a.key},t),!!p&&w.a.createElement("div",{className:Ry.a.occupationTextContainer},w.a.createElement("span",{className:Ry.a.occupationText},p)),!p&&w.a.createElement("span",{className:Ry.a.temperaturePlaceholder},i),w.a.createElement("div",{className:Ry.a.arrow},by),w.a.createElement(Ky,{title:"请选择从事行业",showPicker:u,toggleShowPicker:function(){return l(!1)},onSelect:function(e){l(!1);var t=a.find((function(t){return t.text===e}));n(null==t?void 0:t.type)},selectedItem:p,pickerList:m}))}function ig(e){var t=e.text,r=e.value,n=e.setValue,a=e.options,i=void 0===a?[]:a,s=A()(Ry.a.slot,Ry.a.symptomSlot);return w.a.createElement("div",{className:s},w.a.createElement("div",{className:Ry.a.key},t),i.map((function(e,t){var a=A()(Ry.a.symptomOption,o()({},Ry.a.selected,e.type===r));return w.a.createElement("div",{className:a,key:t,onClick:function(){return n(e.type)}},e.text)})))}function sg(e){var t=e.text,r=e.value,n=e.setValue,o=e.options,a=A()(Ry.a.slot,Ry.a.boolSlot);return w.a.createElement("div",{className:a},w.a.createElement("div",{className:Ry.a.key},t),w.a.createElement("div",{className:Ry.a.options},o&&!!o.length&&o.map((function(e,t){return w.a.createElement("span",{key:t,className:Ry.a.selectIcon,onClick:function(){return n(e.type)}},r===e.type?_y:ky,e.text)}))))}function cg(e){var t=e.text,r=e.value,n=e.setValue;return w.a.createElement("div",{className:Ry.a.confirm},r&&w.a.createElement("div",{className:Ry.a.confirmSelectedBtn,onClick:function(){return n(!r)}},Sy),!r&&w.a.createElement("div",{className:Ry.a.confirmUnselectedBtn,onClick:function(){return n(!r)}},ky),t)}function ug(e){var t=e.text,r=e.onClick;return w.a.createElement("div",{className:Ry.a.catalog},w.a.createElement("span",{className:Ry.a.catalogText,onClick:r},t))}function lg(e){var t=e.text,r=e.value,n=e.options,o=e.setValue,a=A()(Ry.a.slot,Ry.a.boolSlot),i=Object(I.useCallback)((function(e){r!==e&&ft({title:"目前疫情相关药品仅限本人购买",confirmButtonLabel:"知道了",onConfirm:function(){o(r)},onClose:function(){o(r)}}),o(e)}),[o,r]);return w.a.createElement("div",{className:a},w.a.createElement("div",{className:Ry.a.key},t),w.a.createElement("div",{className:Ry.a.options},n&&!!n.length&&n.map((function(e,t){return w.a.createElement("span",{key:t,className:Ry.a.selectIcon,onClick:function(){return i(e.type)}},r===e.type?_y:ky,e.text)}))))}function dg(e){var t=e.purchaseData,r=e.updateDrugInfo,n=e.provinceId,o=e.cityId,a=Object(I.useReducer)(Xy,t),s=D()(a,2),u=s[0],l=s[1],d=Object(I.useState)(!1),p=D()(d,2),m=p[0],f=p[1],h=Object(I.useRef)(),v=Object(I.useRef)(),y=Object(I.useRef)(),g=Object(I.useContext)(Xv).glide,b=u.catalogData,_=u.showCatalog,k=function(){var e,t=qv()(u.template).map((function(e){return e.key})),r=u.info[Zv.NAME],n=u.info[Zv.ID],o=u.info[Zv.ID_SNAPSHOT],a=u.info[Zv.MOBILE],i=u.info[Zv.MOBILE_ID],s=u.info[Zv.OCCUPATION],c=u.info[Zv.TEMPERATURE],l=u.info[Zv.SYMPTOM],d=u.info[Zv.RISK_TRAVEL],p=u.info[Zv.CONFIRM];if(!o){var m,f;if(!r)return Object(ce.info)("请填写用药人"),null==h||null===(m=h.current)||void 0===m||m.focus(),!1;if(!n)return Object(ce.info)("请填写身份证号"),null==v||null===(f=v.current)||void 0===f||f.focus(),!1}return i||a?t.includes(Zv.OCCUPATION)&&!s?(Object(ce.info)("请选择从事行业"),!1):c?l?null==d?(Object(ce.info)("请选择近期是否去过风险地区"),!1):!(t.includes(Zv.CONFIRM)&&!p)||(Object(ce.info)("请勾选承诺"),!1):(Object(ce.info)("请选择症状"),!1):(Object(ce.info)("请选择体温"),!1):(Object(ce.info)("请填写联系电话"),null==y||null===(e=y.current)||void 0===e||e.focus(),!1)};Object(I.useEffect)((function(){var e=Object(_e.getCurrentPlatform)().isNativePlatform;return Object(P.disableScroll)(document.querySelectorAll(".scrollable")),e&&Object(ke.setupPullReload)({enable:!1}),function(){Object(P.enableScroll)(),e&&Object(ke.setupPullReload)({enable:!0})}}),[]),Object(I.useEffect)((function(){Object(P.enableScroll)(),Object(P.disableScroll)(document.querySelectorAll(".scrollable"))}),[_]);var S=function(e,t){l({type:zy,value:t,key:e})},O=function(e,t){l({type:Wy,value:t,key:e})},C=function(e){l(Ly({type:Qy},e))},x=function(){l({type:qy})},E=function(){var e=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b){e.next=11;break}return Object(Se.show)(),e.prev=3,e.next=6,hy();case 6:t=e.sent,l({type:Gy,value:t});case 8:return e.prev=8,Object(Se.hide)(),e.finish(8);case 11:t&&l({type:Yy,value:!0});case 12:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=c()(i.a.mark((function e(){var t,a,s,c,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:if(k()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,f(!0),e.next=8,fy(Ly(Ly({},u.info),{},{provinceId:n,cityId:o}));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:t=e.t0,a=u.info[Zv.NAME],s=u.info[Zv.ID],r({name:a,id:s,snapshotId:t}),g(),e.next=22;break;case 18:e.prev=18,e.t1=e.catch(4),d=null===e.t1||void 0===e.t1||null===(c=e.t1.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.error_msg,Object(ce.info)(d||"网络不稳定，请稍后重试");case 22:return e.prev=22,f(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[4,18,22,25]])})));return function(){return e.apply(this,arguments)}}();return w.a.createElement(w.a.Fragment,null,b&&w.a.createElement("div",{className:Ry.a.mainContainer,style:{display:_?"":"none"}},w.a.createElement("div",{className:Ry.a.catalogTitle},"退烧止咳药目录",w.a.createElement("div",{className:Ry.a.close,onClick:function(){l({type:Yy,value:!1})}},vy)),w.a.createElement("div",{className:"".concat(Ry.a.catalogContent," scrollable")},w.a.createElement("div",{className:Ry.a.catalogHeader},w.a.createElement("div",{className:Ry.a.headerItem1},"序号"),w.a.createElement("div",{className:Ry.a.headerItem2},"通用名称"),w.a.createElement("div",{className:Ry.a.headerItem3},"属性")),b.map((function(e,t){return w.a.createElement("div",{className:Ry.a.catalogRow,key:t},w.a.createElement("div",{className:Ry.a.catalogItem1},t+1),w.a.createElement("div",{className:Ry.a.catalogItem2},e.name),w.a.createElement("div",{className:Ry.a.catalogItem3},e.property))}))),w.a.createElement("div",{className:Ry.a.catalogPaddingBottom})),w.a.createElement("div",{className:Ry.a.mainContainer,style:{display:_?"none":""}},w.a.createElement("div",{className:Ry.a.title},"疫情购药登记",w.a.createElement("div",{className:Ry.a.close,onClick:g},vy)),w.a.createElement("div",{className:Ry.a.highlight},w.a.createElement("div",{className:Ry.a.shield},yy),u.instruction||"根据疫情防控政策要求，需登记信息才能购买该药品。信息将被严格保密，请放心填写"),w.a.createElement("div",{className:"".concat(Ry.a.blockContainer," scrollable")},u.template.map((function(e,t){return w.a.createElement("div",{className:Ry.a.block,key:t},e.map((function(e){var t=e.key,r=e.title,n=e.placeholder,o=e.options,a=e.ext,i=u.info[t],s=u.info[Zv.ID_SNAPSHOT],c=u.info[Zv.MOBILE_ID],l=u.defaultTemperature;switch(t){case Zv.MOBILE:return w.a.createElement($y,{key:t,text:r,value:i,mobileId:c,placeholder:n,setValue:function(e){return S(t,e)},clearMobile:x,ref:y});case Zv.NAME:return w.a.createElement(tg,{key:t,text:r,value:i,placeholder:n,setValue:function(e){return O(t,e)},setIdInfo:function(e){return C(e)},snapshotId:s,ref:h});case Zv.ID:return w.a.createElement(ng,{key:t,text:r,value:i,placeholder:n,setValue:function(e){return O(t,e)},setIdInfo:function(e){return C(e)},snapshotId:s,ref:v});case Zv.TEMPERATURE:return w.a.createElement(og,{key:t,text:r,value:i,defaultTemperature:i||l,min:+a.min,max:+a.max,interval:+a.interval,placeholder:n,setValue:function(e){return S(t,e)}});case Zv.OCCUPATION:return w.a.createElement(ag,{key:t,text:r,value:i,options:o,placeholder:n,setValue:function(e){return S(t,e)}});case Zv.SYMPTOM:return w.a.createElement(ig,{key:t,text:r,value:i,options:o,setValue:function(e){return S(t,e)}});case Zv.RISK_TRAVEL:return w.a.createElement(sg,{key:t,text:r,value:i,options:o,setValue:function(e){return S(t,e)}});case Zv.CONFIRM:return w.a.createElement(cg,{key:t,value:i,text:r,setValue:function(e){return S(t,e)}});case Zv.CATALOG:return w.a.createElement(ug,{key:t,text:r,onClick:E});case Zv.SELF_USE:return w.a.createElement(lg,{key:t,text:r,value:i,options:o,setValue:function(e){return S(t,e)}});default:return null}})),w.a.createElement("div",{className:Ry.a.blockMargin}))}))),w.a.createElement("div",{className:Ry.a.bottomBtnContainer},w.a.createElement("div",{className:Ry.a.bottomBtn,onClick:N},"完成"),w.a.createElement("div",{className:Ry.a.bottomBtnPadding})),m&&w.a.createElement("div",{className:Ry.a.mask})))}function pg(e){var t=e.onHide,r=e.onTemperatureOnlySaved,n=e.updateDrugInfo,o=e.snapshotId,a=e.provinceId,s=e.cityId,u=e.defaultMobile,l=void 0===u?"":u,d=e.temperatureOnly,p=void 0!==d&&d,m=e.isTemperatureSaved,f=Object(I.useState)(null),h=D()(f,2),v=h[0],y=h[1];Object(I.useEffect)((function(){var e=function(){var e=c()(i.a.mark((function e(){var r,n,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(Se.show)(),e.prev=1,e.next=4,my({snapshotId:o,provinceId:a,cityId:s});case 4:(r=e.sent).info[Zv.MOBILE]||(r.info[Zv.MOBILE]=l),m||(r.defaultTemperature=r.info[Zv.TEMPERATURE],r.info[Zv.TEMPERATURE]=null),y(r),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),u=null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.error_msg,Object(ce.info)(u||"网络不稳定，请稍后重试"),t();case 15:return e.prev=15,Object(Se.hide)(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,10,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var g=function(){var e=c()(i.a.mark((function e(n){var o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n&&n.replace("°C",""),e.prev=1,e.next=4,fy(Ly(Ly({},v.info),{},{temperature:+o}));case 4:a=e.sent,r({snapshotId:a}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),Object(ce.info)("保存体温不成功，请稍后重试"),t();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();if(!v)return null;if(p){var b=(qv()(v.template).find((function(e){return e.key===Zv.TEMPERATURE}))||{}).ext||{},_=b.min,k=b.max,S=b.interval,P=v.info[Zv.TEMPERATURE]||(null==v?void 0:v.defaultTemperature),O=Jy(_,k,S);return w.a.createElement(Ky,{title:"根据疫情防控政策要求，需更新体温",showPicker:!0,toggleShowPicker:t,onSelect:g,selectedItem:P?"".concat((+P).toFixed(1),"°C"):"37.0°C",pickerList:O})}return w.a.createElement(Kv,{onHide:t},w.a.createElement(dg,{purchaseData:v,updateDrugInfo:n,provinceId:a,cityId:s}))}var mg=r("v796"),fg=r.n(mg),hg=function(e){var t,r=!(!e.idCardName||!e.idCardNo),n=r?"修改":"填写",a=e.overrideStyles,i=e.authTipColor,s=!r||a,c=A()((t={},o()(t,fg.a.btn,s),o()(t,fg.a.grayBtn,!s),t));return w.a.createElement("div",{className:fg.a.idModifyHint,"data-active":r?"cell-white":null},w.a.createElement("div",{className:fg.a.border},w.a.createElement("div",{className:fg.a.line})),w.a.createElement("div",{className:fg.a.icon},w.a.createElement("svg",{t:"1607326009875",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3768"},w.a.createElement("path",{d:"M909.4 114.8c31.2 0 56.6 25.4 56.6 56.6v681.3c0 31.2-25.4 56.6-56.6 56.6H114.6c-31.2 0-56.6-25.4-56.6-56.6V171.3c0-31.2 25.4-56.6 56.6-56.6h794.8m0-56.9H114.6C51.8 57.8 1 108.6 1 171.3v681.3c0 62.7 50.8 113.6 113.6 113.6h794.9c62.7 0 113.6-50.8 113.6-113.6V171.3c-0.1-62.7-50.9-113.5-113.7-113.5z","p-id":"3769"}),w.a.createElement("path",{d:"M858.3 398.6H688c-15.7 0-28.5-12.8-28.5-28.5s12.8-28.5 28.5-28.5h170.3c15.7 0 28.5 12.8 28.5 28.5s-12.7 28.5-28.5 28.5zM858.3 568.9H744.8c-15.7 0-28.5-12.8-28.5-28.5s12.8-28.5 28.5-28.5h113.6c15.7 0 28.5 12.8 28.5 28.5s-12.8 28.5-28.6 28.5z","p-id":"3770"}),w.a.createElement("path",{d:"M160.8 798.5c-11.9 0-23.1-4.4-31.7-12.6-11.1-10.6-16.4-26.6-14.1-42.8l3.6-25.9c4.2-30 27.8-62.5 54.9-75.5l158.3-76c3.8-1.8 6.2-4.2 6.7-6.5 0.5-2.4-0.8-5.7-3.7-9l-13.3-15.4c-27.4-31.7-48.1-87.4-48.1-129.4v-50.7c0-85.5 68.8-155 153.4-155s153.4 69.6 153.4 155v50.7c0 42.1-20.7 97.7-48.1 129.4l-13.3 15.5c-2.8 3.3-4.2 6.6-3.7 9 0.5 2.3 2.9 4.7 6.7 6.5L680 641.7c27.1 13 50.8 45.5 55 75.5l3.6 25.9c2.3 16.2-3 32.2-14.1 42.8-10 9.6-23.6 14-37.7 12.3h-520c-2 0.2-4 0.3-6 0.3z m12-57.3h508l-2.3-16c-1.6-11.3-13.1-27.2-23.3-32.1L497 617.2c-19.9-9.6-33.7-26.4-37.9-46.3-4.2-19.9 1.8-41 16.4-57.9l13.3-15.5c18.2-21.1 34.2-64.2 34.2-92.2v-50.7c0-54.1-43.2-98-96.4-98s-96.4 44-96.4 98v50.7c0 28 16 71.1 34.2 92.2L378 513c14.5 16.8 20.5 37.9 16.4 57.8-4.1 19.8-17.9 36.7-37.9 46.3l-158.3 76c-10.1 4.8-21.6 20.7-23.2 32.1l-2.2 16z","p-id":"3771"}))),w.a.createElement("div",{className:fg.a.text},w.a.createElement("div",{className:fg.a.title},r?w.a.createElement("div",null,w.a.createElement("span",{className:fg.a.name},e.idCardName),"，",w.a.createElement("span",{className:fg.a.number},e.idCardNo)):e.authTitle),w.a.createElement("div",{className:fg.a.desc,style:{color:i||void 0}},e.desc)),!e.disableEdit&&w.a.createElement("div",{className:fg.a.action},w.a.createElement("div",{className:c,"data-active":s?"ghost-red":null,onClick:e.onClick},n)))},vg=rp.getInstance();function yg(e){var t=Object(I.useRef)();return t.current=document.createElement("div"),t.current.setAttribute("id","purchaseInfoPopup"),t.current.style.position="fixed",t.current.style.top=0,t.current.style.right=0,t.current.style.bottom=0,t.current.style.left=0,t.current.style.zIndex=10023,Object(I.useEffect)((function(){return document.body.appendChild(t.current),function(){document.body.removeChild(t.current)}}),[]),be.a.createPortal(w.a.createElement(pg,{updateDrugInfo:e.updateDrugInfo,snapshotId:e.snapshotId,provinceId:e.provinceId,cityId:e.cityId,defaultMobile:e.defaultMobile,onHide:e.onHide,temperatureOnly:e.temperatureOnly,onTemperatureOnlySaved:e.onTemperatureOnlySaved,isTemperatureSaved:e.isTemperatureSaved}),t.current)}var gg=function(e){var t=e.ocData||{},r=t.goodsInfo||{},n=t.idCardInfo||{},o=t.selectedChannel||{},a=t.addressInfo,i=Object(I.useState)(!1),s=D()(i,2),c=s[0],u=s[1],l=Object(I.useState)(!1),d=D()(l,2),p=d[0],m=d[1],f=Object(I.useState)(n),h=D()(f,2),v=h[0],y=h[1],g=Object(I.useState)(!1),b=D()(g,2),_=b[0],k=b[1];if(Object(I.useEffect)((function(){vg.initShowIdcardForm((function(){return u(!0)})),vg.initShowPurchaseInfo((function(){return m(!0)})),vg.initShowTemperaturePicker((function(){k(!0),m(!0)}))}),[]),!r.needId)return null;var S=function(){m(!1),k(!1)},P={scene:n.sceneCode||"ORDER",ext_map:n.extendMap},O={title:n.authMainTitleTip||"填写实名信息",formHint:n.authTitleTip,idHint:n.authIdTip,nameHint:n.authNameTip};return w.a.createElement(w.a.Fragment,null,!([3,4].includes(+r.goodsType)&&o.paymentType===zn.FriendPay)&&w.a.createElement(hg,{onClick:n.isDrugInfo?function(){return m(!0)}:function(){return u(!0)},authTitle:n.authTitle,authTipColor:n.authTipColor,idCardName:v.idCardName||n.idCardName,idCardNo:v.idCardNo||n.idCardNo,desc:n.authTip,disableEdit:n.hideEditBtn||(n.isDrugInfo||n.hideEditBtnAfterOrder)&&t.orderSn}),c&&!n.isDrugInfo&&w.a.createElement(Wv,{extraParams:P,strongAuth:!0,idCardFormVisible:c,onClickClose:function(){return u(!1)},labels:O,submitSuccessCallback:function(e){e.success;var t=e.result,r=e.realName,n=e.idCardNo,o=t||{},a=o.card_snapshot_id,i=o.is_face_cert;vg.ocData.idCardInfo.idCardName=r,vg.ocData.idCardInfo.idCardNo=n,vg.ocData.idCardInfo.snapshotId=a,vg.ocData.idCardInfo.isFaceCert=i,y({idCardName:r,idCardNo:n})},getAntiContent:Cn,disableRec:!0}),n.isDrugInfo&&p&&w.a.createElement(yg,{updateDrugInfo:function(e){var t=e.name,r=e.id,n=e.snapshotId;setTimeout((function(){vg.ocData.idCardInfo.idCardName=t,vg.ocData.idCardInfo.idCardNo=r,vg.ocData.idCardInfo.drugInfoSnapshotId=n,vg.ocData.idCardInfo.isTemperatureSaved=!0,y({idCardName:t,idCardNo:r})}),400)},snapshotId:vg.ocData.drugInfoSnapshotId,provinceId:a.provinceId,cityId:a.cityId,defaultMobile:a&&a.mobile,onHide:function(){_?S():m(!1)},temperatureOnly:_,onTemperatureOnlySaved:function(e){var t=e.snapshotId;S(),vg.ocData.idCardInfo.drugInfoSnapshotId=t,vg.ocData.idCardInfo.isTemperatureSaved=!0,vg.pay()},isTemperatureSaved:vg.ocData.idCardInfo.isTemperatureSaved}))},bg=r("v5F4"),_g=r.n(bg);function kg(e){var t=e.templateList,r=e.selectDeliveryItem,n=Object(I.useContext)(Xv).glide,o=Xt()(function(){var e=c()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selected){e.next=5;break}return Object(Se.show)(),e.next=4,r(t);case 4:Object(Se.hide)();case 5:n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300,{leading:!0,trailing:!1});return w.a.createElement("div",{className:_g.a.deliveryList},w.a.createElement("div",{className:_g.a.title},"选择送装服务",w.a.createElement("div",{className:_g.a.closeBtn,onClick:n})),(t||[]).map((function(e,t){return w.a.createElement("div",{key:t,className:"".concat(_g.a.deliveryItem," ").concat(e.selected?_g.a.selected:""),onClick:function(){return o(e)}},e.srvCopyWrite)})))}var Sg=null;function Ig(e){var t=e.onHide,r=e.templateList,n=e.selectDeliveryItem,o=Object(I.useRef)();return o.current=function(){if(!Sg){var e=document.createElement("div");e.setAttribute("id","DeliveryList"),e.style.position="fixed",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.left=0,e.style.zIndex=99999,Sg=e}return Sg}(),Object(I.useEffect)((function(){return document.body.appendChild(o.current),function(){document.body.removeChild(o.current)}}),[]),be.a.createPortal(w.a.createElement(Kv,{onHide:t},w.a.createElement(kg,{templateList:r,selectDeliveryItem:n})),o.current)}var wg=function(e){var t=Object(I.useState)(!1),r=D()(t,2),n=r[0],o=r[1],a=(e.ocData||{}).deliveryInfo;if(!a)return null;if(2==+a.clickType)return null;var i=a.displayContent,s=a.displayTitle,c=a.templateList;return i&&s?w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{"data-active":"cell-white",onClick:function(){return o(!0)}},w.a.createElement("div",{className:_g.a.deliveryStripe},w.a.createElement("div",{className:_g.a.deliverySvg},w.a.createElement(F,null)),w.a.createElement("span",{className:_g.a.deliveryContent},i),w.a.createElement("div",{className:_g.a.arrow},w.a.createElement(L,null)))),n&&w.a.createElement(Ig,{onHide:function(){return o(!1)},templateList:c,selectDeliveryItem:e.selectDeliveryItem})):null},Pg=r("XEGP"),Og=r.n(Pg);function Cg(e){var t=e.templateList,r=e.selectShippingItem,n=Object(I.useContext)(Xv).glide,o=Xt()(function(){var e=c()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selected){e.next=5;break}return Object(Se.show)(),e.next=4,r(t);case 4:Object(Se.hide)();case 5:n();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300,{leading:!0,trailing:!1});return w.a.createElement("div",{className:Og.a.AdditionalShippingStrip},w.a.createElement("div",{className:Og.a.title},"选择配送服务",w.a.createElement("div",{className:Og.a.closeBtn,onClick:n})),(t||[]).map((function(e,t){var r=e.float_title_desc,n=e.float_sub_title_desc,a=r||{},i=a.text,s=a.text_format,c=n||{},u=c.text,l=c.text_format,d=s||{},p=d.color,m=d.font_size,f=l||{},h=f.color,v=f.font_size;return w.a.createElement("div",{key:t,className:Og.a.deliveryItem,onClick:function(){return o(e)}},i&&w.a.createElement("div",{style:{color:p,fontSize:m},className:Og.a.mainTitleFloat},i),u&&w.a.createElement("div",{style:{color:h,fontSize:v},className:Og.a.subTitleFloat},u),e.selected?w.a.createElement("div",{className:Og.a.selectedSvg},w.a.createElement(z,null)):w.a.createElement("div",{className:Og.a.notSelectedSvg},w.a.createElement(W,null)))})))}var xg=null;function Eg(e){var t=e.onHide,r=e.templateList,n=e.selectShippingItem,o=Object(I.useRef)();return o.current=function(){if(!xg){var e=document.createElement("div");e.setAttribute("id","AdditionalShippingStrip"),e.style.position="fixed",e.style.top=0,e.style.right=0,e.style.bottom=0,e.style.left=0,e.style.zIndex=99999,xg=e}return xg}(),Object(I.useEffect)((function(){return document.body.appendChild(o.current),function(){document.body.removeChild(o.current)}}),[]),be.a.createPortal(w.a.createElement(Kv,{onHide:t},w.a.createElement(Cg,{templateList:r,selectShippingItem:n})),o.current)}var Dg=function(e){var t=Object(I.useState)(!1),r=D()(t,2),n=r[0],o=r[1],a=(e.ocData||{}).additionalShippingInfo;if(!a)return null;var i=a.additionalSrvItems;if(!i||i.length<=0)return null;var s=(i[0].cell_display_item_list||[]).find((function(e){return e.selected}));if(!s)return null;var c=s.main_title_desc,u=s.main_sub_title_desc,l=c||{},d=l.text,p=l.text_format,m=u||{},f=m.text,h=m.text_format,v=p||{},y=v.color,g=v.font_size,b=h||{},_=b.color,k=b.font_size,S=d&&w.a.createElement("div",{style:{color:y,fontSize:g},className:Og.a.mainTitle},d),P=f&&w.a.createElement("div",{style:{color:_,fontSize:k},className:Og.a.subTitle},f);return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{"data-active":"cell-white",onClick:function(){return o(!0)}},w.a.createElement("div",{className:Og.a.deliveryStripe},w.a.createElement("div",{className:Og.a.deliverySvg},w.a.createElement(F,null)),w.a.createElement("div",{className:Og.a.shippingContent},S,P),w.a.createElement("div",{className:Og.a.arrow},w.a.createElement(L,null)))),n&&w.a.createElement(Eg,{onHide:function(){return o(!1)},templateList:i[0].cell_display_item_list,selectShippingItem:e.selectShippingItem}))},Ng=r("gWL1"),Tg=r.n(Ng);function jg(e){var t=e.recordList,r=e.selectRecord;return w.a.createElement(w.a.Fragment,null,t&&t.length>0&&w.a.createElement("div",{className:Tg.a.bubbleContainer},w.a.createElement("span",{className:Tg.a.recCardTriangle}),w.a.createElement("div",{className:Tg.a.recList},t.slice(0,3).map((function(e,t){return w.a.createElement("div",{className:Tg.a.recCardItem,key:t,onTouchEnd:function(){return r(t)}},e.separatedMobile?w.a.createElement(w.a.Fragment,null,e.separatedMobile.map((function(e,t){return w.a.createElement("span",{key:e+"_"+t},e)}))):w.a.createElement(w.a.Fragment,null,e.name))})))))}var Ag=Md.getInstance();var Rg=function(e){var t=e.isFocused,r=e.recordList,n=e.setFocused,o=e.updateMobileInputNumber;return t?w.a.createElement(jg,{selectRecord:function(e){var t=r[e];Ag.doInputBlur(),Ag.updateMobileInfo(t.mobile,t.name||""),o(t.mobile),n(!1)},recordList:r}):null};function Mg(e){return e=(e=(e=(e||"").toString()).replace(/(\+86)/g,"")).replace(/[^\d]*/g,"")}var Lg=r("7MjH"),Bg=r.n(Lg);var Fg=function(e){var t=e.mobileInputNumber,r=e.isFocused,n=e.isMobile,o=e.updateRecordByContact,a=Object(I.useState)(!1),s=D()(a,2),u=s[0],l=s[1];Object(I.useEffect)((function(){var e=Object(_e.getCurrentPlatform)();Object(_e.compareVersion)(e.version,"3.17.0")>=0&&l(!0)}),[]);var d=function(){var e=c()(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),e.prev=2,e.next=5,Object(ke.selectContact)();case 5:(r=e.sent)&&o(r),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return t&&r||!u||!n?null:w.a.createElement("div",{className:Bg.a.contact,onClick:d})},Ug=r("c3b3"),Hg=r.n(Ug),Vg=Md.getInstance(),zg={maxLength:30};var Wg=function(e){var t=e.ocData,r=e.setFocused,n=e.isFocused,o=e.mobileInputNumber,a=e.updateMobileInputNumber,i=t.virtualReceiveMethodInfo;if(!i)return null;var s=!!t.orderSn,c=i&&i.isMobile,u=i.label,l=i.placeholder,d=i.icon,p=c?null:zg;return w.a.createElement("div",{className:Hg.a.mainArea},d&&w.a.createElement(ht.default,{className:Hg.a.icon,src:d}),w.a.createElement("span",null,u,"："),w.a.createElement("input",nt()({type:c?"tel":"text",ref:function(e){Vg.$mobileNumberInput=e},placeholder:l,value:o,onChange:function(){var e=(Vg.$mobileNumberInput.value||"").replace(/ +/g,"");a(e)},onFocus:function(){s?Vg.doInputBlur():r(!0)},onBlur:function(){Vg.updateMobileInfo(o,""),r(!1)}},p)),o&&n&&w.a.createElement("div",{className:Hg.a.mobileClear,onTouchEnd:function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Vg.doInputFocus(),a("")}}),w.a.createElement(Fg,{mobileInputNumber:o,isFocused:n,isMobile:c,updateRecordByContact:function(e){var t=e.mobile,n=e.name;(t=Mg(t))&&(Vg.updateMobileInfo(t,n||""),r(!1),a(t))}}))},Qg={Mobile:/(^1)\d{10}$/,GasSinopec:/^\d{16}(\d{3})?$/,QQ:/^[1-9][0-9]{4,9}$/,Mail:/^([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+.[a-zA-Z]{2,4}$/,Phone:/((^1)\d{10}$)|(^(886|852|853)\d{7,11}$)/};function qg(e){e=Mg(e);var t=/^(1\d{2})(\d{4})(\d{4})$/.exec(e);return t&&t[1]&&t[2]&&t[3]?[t[1],t[2],t[3]]:null}var Gg=r("xq+1"),Yg=r.n(Gg),Xg=rp.getInstance(),Jg=Md.getInstance();var Kg=function(e){var t=e.ocData,r=t.virtualReceiveMethodInfo,n=Object(I.useState)([]),o=D()(n,2),a=o[0],s=o[1],u=Object(I.useState)(!1),l=D()(u,2),d=l[0],p=l[1],m=Object(I.useState)(""),f=D()(m,2),h=f[0],v=f[1];return Object(I.useEffect)((function(){var e=r.value,t=r.validateRules;e&&t&&t.length>0&&t.some((function(t){return new RegExp(t).test(e)}))&&(Jg.updateMobileInfo(e,""),v(e));var n=function(e){return{1:!1,2:!0}[e]||!1}(S()(Xg.ocData,"morganType"));if(n||"USER_CONTACT_MOBILE"!==r.autoCompleteType){if(!n&&"USER_CHARGE_MOBILE"===r.autoCompleteType){var o=function(){var e=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe({method:Re.GET,url:"api/virginia/get_charge_history"}).then((function(e){return(e.records||[]).map((function(e){return{separatedMobile:qg(e.mobile),mobile:Mg(e.mobile),name:e.name||""}})).slice(0,3)})).catch((function(){}));case 2:(t=e.sent)&&s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o()}}else{var a=function(){var e=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe({method:Re.POST,url:"/api/origenes/mobile_distinct_list"}).then((function(e){return(e||[]).filter((function(e){return Qg.Phone.test(e)})).map((function(e){return{separatedMobile:qg(e),mobile:Mg(e),name:""}})).slice(0,3)})).catch((function(){}));case 2:(t=e.sent)&&s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a()}}),[]),r?w.a.createElement("div",{className:Yg.a.virtualAddress},w.a.createElement(Wg,{recordList:a,mobileInputNumber:h,ocData:t,isFocused:d,setFocused:p,updateMobileInputNumber:v}),w.a.createElement(Rg,{isFocused:d,recordList:a,setFocused:p,updateMobileInputNumber:v})):null},Zg=r("0yKJ"),$g=r.n(Zg);var eb,tb,rb=function(e){var t=e.addressInfo,r=e.communityId,n=e.groupOrderId,o=e.ocData||{},a={page_el_sn:4259115,op:"impr",goods_id:e.goods.goodsID};if(o.receiveMethodNone)return null;var i=!!S()(o,"virtualReceiveMethodInfo");return w.a.createElement(tt.a,{trackingInfo:a},w.a.createElement("div",{className:"oc-address ".concat($g.a.address),onClick:function(e){e.stopPropagation()}},i&&w.a.createElement(Kg,{ocData:o}),!i&&w.a.createElement(w.a.Fragment,null,w.a.createElement(wv,{addressInfo:t,updateAddressInfo:e.updateAddressInfo,onClickPreCheck:e.onClickPreCheck,communityId:r}),w.a.createElement(bv,{editAddress:function(){Be({page_el_sn:4259115,op:"click",goods_id:e.goods.goodsID},(function(){e.onClickPreCheck?e.onClickPreCheck()&&uh(e.ocData):uh(e.ocData)}))},addressInfo:t,communityId:r,groupOrderId:n,goodsInfo:e.goodsInfo,updateAddressInfo:e.updateAddressInfo})),w.a.createElement(wg,{ocData:o,selectDeliveryItem:e.selectDeliveryItem}),w.a.createElement(Dg,{ocData:o,selectShippingItem:e.selectShippingItem}),w.a.createElement(gg,{ocData:o}),!i&&e.hasAddressLine&&w.a.createElement("div",{className:$g.a.addressLine}),w.a.createElement("div",{className:$g.a.bottomline})))},nb=r("x7Ie"),ob=r.n(nb);var ab,ib,sb=rp.getInstance(),cb=(tb=function(e){f()(o,e);var t,r,n=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(o);function o(){var e;l()(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))).normalSkuRef=w.a.createRef(),e.skuBgRef=w.a.createRef(),e.isShow=!1,e.confirmSkuCallBack=function(){var t=c()(i.a.mark((function t(r){var n,o,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getGoodsNumber(),o=e.getSelectedSkuId(),t.next=4,sb.refresh({goods_number:n,sku_id:o,front_action:dd});case 4:(a=t.sent)&&a.success&&e.props.setSkuInfo({selectedSkuID:+o,goodsNumber:n}),e.hide();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return p()(o,[{key:"show",value:(r=c()(i.a.mark((function e(t){var r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"function"==typeof t.setStateCallback&&this.normalSkuRef.current.skuRef.current.setCustomState(t.setStateCallback),!this.normalSkuRef.current.prepare(t).needShow){e.next=7;break}if(!this.isShow){e.next=5;break}return e.abrupt("return");case 5:this.skuBgRef.current.style.display="block",setTimeout((function(){r.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",r.normalSkuRef.current.enter(),Oe(),setTimeout((function(){r.isShow=!0}),200)}),1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"hide",value:(t=c()(i.a.mark((function e(t){var r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isShow){e.next=2;break}return e.abrupt("return");case 2:if(xe(),!this.props.onHide){e.next=6;break}return e.next=6,this.props.onHide(t);case 6:this.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",this.normalSkuRef.current.exit(),setTimeout((function(){r.isShow=!1,r.skuBgRef.current.style.display="none"}),+this.props.delay||200);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getSelectedSkuId",value:function(){return this.normalSkuRef.current.skuRef.current.state.selectedSkuID}},{key:"getGoodsNumber",value:function(){return this.normalSkuRef.current.skuRef.current.state.goodsNumber||1}},{key:"selectSkuId",value:function(e){var t=e.skuId,r=e.goodsNumber,n=void 0===r?1:r;return this.normalSkuRef.current.skuRef.current.selectSkuId({skuId:t,goodsNumber:n})}},{key:"setGoodsNumber",value:function(e){return this.normalSkuRef.current.skuRef.current.setGoodsNumber(e)}},{key:"render",value:function(){var e=this,t=this.props.goods,r=this.props,n=r.groupOrderId,o=r.usePddNativePhoto,a=r.isOptSoldOut;return w.a.createElement("div",{ref:this.skuBgRef,className:A()(ob.a.ocSkuSelectorBg,"sku-plus1"),onClick:c()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.hide();case 1:case"end":return t.stop()}}),t)})))},w.a.createElement(se,{groupOrderId:n,ref:this.normalSkuRef,goods:t,group:this.props.group,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,skuDirectOrder:!1,usePddNativePhoto:o,isOptSoldOut:a,onClose:this.hide,hideSkuBottomTip:!0},w.a.createElement(Sn,null)))}}]),o}(w.a.Component),eb=tb,Xe()(eb.prototype,"show",[$e],Object.getOwnPropertyDescriptor(eb.prototype,"show"),eb.prototype),Xe()(eb.prototype,"hide",[$e],Object.getOwnPropertyDescriptor(eb.prototype,"hide"),eb.prototype),Xe()(eb.prototype,"getSelectedSkuId",[$e],Object.getOwnPropertyDescriptor(eb.prototype,"getSelectedSkuId"),eb.prototype),Xe()(eb.prototype,"getGoodsNumber",[$e],Object.getOwnPropertyDescriptor(eb.prototype,"getGoodsNumber"),eb.prototype),Xe()(eb.prototype,"selectSkuId",[$e],Object.getOwnPropertyDescriptor(eb.prototype,"selectSkuId"),eb.prototype),Xe()(eb.prototype,"setGoodsNumber",[$e],Object.getOwnPropertyDescriptor(eb.prototype,"setGoodsNumber"),eb.prototype),eb),ub=r("cBUB"),lb=r.n(ub),db=rp.getInstance(),pb=Tp.getInstance(),mb=function(e){var t=e.ocData;if(!t)return null;var r=e.goods&&e.goods.skuNewPricePrefix,n=S()(t,"goodsInfo.totalPrice"),o=S()(t,"promotionInfo")||{},a=o.isNewPriceArea,s=o.totalDiscountDisplay;if(a)return s?w.a.createElement("span",{className:lb.a.prefixPrice},"".concat(r,"¥").concat(n)):null;var u=(S()(e,"ocData.promotionInfo.totalPromotionsConsult")||{}).categoryDisplay,l=S()(e,"ocData.promotionInfo.shopPromotion.promotionStatus"),d=db.ocData.goodsId,p=S()(e,"ocData.promotionInfo.totalPromotionClickable")&&Vn()(u),m=function(){var t=c()(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(O.sendClickMetrics)({page_el_sn:"4503302",op:"click",goods_id:d}),r=S()(e,"ocData.promotionInfo.shopPromotion.promotionIdentityVo.extension.batch_sn")||S()(e,"ocData.promotionInfo.optionalShopsPromotion.batchSn"),t.t0=Fe,t.t1=S()(e,"ocData.promotionInfo.shopPromotion.mallId"),t.t2=r,t.next=7,Cn();case 7:t.t3=t.sent,t.t4={anti_content:t.t3},t.t5={mall_id:t.t1,like_from:101003,batch_sn:t.t2,merchant_tag:50,base_risk_info:t.t4},t.t6={method:"POST",url:"api/zenon/mall/like_and_receive_coupon",data:t.t5},(0,t.t0)(t.t6).then((function(){db.needReload=!0,Te("领券成功，已关注店铺"),Dl({groupId:"20203",customTags:{event:"receivePromotion"}}),db.refresh({front_action:ud})})).catch((function(e){var t=e.response,r=(t&&t.data||{}).error_msg||"领取失败~";Te(r)}));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var e=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,pb.autoTakeMerchantCoupon();case 5:e.next=13;break;case 7:e.prev=7,e.t0=e.catch(2),t=e.t0||{},r=t.response,n=(r||{}).data,o=S()(n,"error_toast")||"领取优惠失败，请重试",Te(o);case 13:return e.next=15,pb.fetchPromotionList();case 15:a=e.sent,c=(s=pb||{}).togglePromotionPopupVisible,u=s.setPromotionLists,a&&(Dl({groupId:"20203",customTags:{event:"showPromotionPopup"}}),u&&u(a),setTimeout((function(){c&&c(!0)}),0));case 18:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),h=!!S()(e,"ocData.promotionInfo.optionalShopsPromotion.batchSn"),v=l===ia||h;return w.a.createElement(w.a.Fragment,null,s&&s.length>0&&s.map((function(e,t){var r=A()(lb.a.promotion,lb.a["promotion".concat(e.display_type)]),n=v?{page_el_sn:"4503302",op:"impr",goods_id:d}:{};return w.a.createElement(tt.a,{trackingInfo:n,key:t},w.a.createElement("div",{className:r,"data-active":v?"red":"",onClick:v?m:f,style:{height:e.height?e.height/100+"rem":null,lineHeight:e.height?e.height/100+"rem":null,color:e.font_color,backgroundColor:e.bg_color}},e.text,p&&w.a.createElement(L,null)))})))},fb=(r("9ZFI"),r("G7xb")),hb=r.n(fb);function vb(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function yb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vb(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vb(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gb=rp.getInstance(),bb=Tp.getInstance(),_b=!1;"undefined"!=typeof window&&(_b=Object(_e.getCurrentPlatform)().isWeChatMiniProgram);var kb={free:hb.a.skuSpecValue,selected:A()(hb.a.skuSpecValue,hb.a.skuSpecValueSelected),disable:A()(hb.a.skuSpecValue,hb.a.skuSpecValueDisable)},Sb=1e5,Ib=(ib=function(e){f()(m,e);var t,r,n,a,s,u,d=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(m);function m(e){var t;l()(this,m),(t=d.call(this,e)).deliverRef=w.a.createRef(),t.skuIphoneRef=w.a.createRef(),t.skuRef=w.a.createRef(),t.ocSkuRef=w.a.createRef(),t.isPaying=!1,t.isShowingRecycleHighlayer=void 0,t.getSkuRef=function(){return t.skuSelectorBodyRef};var r=t.buildSkuData(e.goods.skus),n=r.skuTypeValues,o=r.typeHashToSkuID,a=r.currentSelect,i=r.skuInfos,s=r.originButtonStatus;return t.state={originButtonStatus:s,selectedSkuID:null,goodsNumber:1,skuInfos:i,currentSelect:a,skuTypeValues:n,typeHashToSkuID:o,selectedHomeIns:{},selectedSendWays:{},oldForNewSelected:{},promotionDesc:"",showSkuSelectorPopup:!1,styleStatus:0},t}return p()(m,[{key:"componentDidMount",value:(u=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==(t=Object.keys(this.state.skuInfos).filter((function(e){return l.state.skuInfos[e].quantity>0}))).length){e.next=5;break}this.selectSkuId({skuId:t[0]}),e.next=33;break;case 5:r=!0,n=!1,o=void 0,e.prev=8,a=this.state.skuTypeValues[Symbol.iterator]();case 10:if(r=(s=a.next()).done){e.next=19;break}if(1!==(c=s.value).values.length){e.next=16;break}return u=c.type,e.next=16,this.selectOneValue(u,c.values[0]);case 16:r=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),n=!0,o=e.t0;case 25:e.prev=25,e.prev=26,r||null==a.return||a.return();case 28:if(e.prev=28,!n){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}}),e,this,[[8,21,25,33],[26,,28,32]])}))),function(){return u.apply(this,arguments)})},{key:"buildSkuData",value:function(e){var t=[],r={},n={},o={};return e.forEach((function(e){var a=e.specs,i=e.skuID;o[i]=e;var s={};a.forEach((function(e){var r=e.spec_key,o=e.spec_value;s[r]=o;var a=t.filter((function(e){return e.type===r}));if(a&&a[0]){var i=a[0].values;!i.includes(o)&&i.push(o)}else n[r]=null,t.push({type:r,values:[o]})})),r[JSON.stringify(s)]=i})),{originButtonStatus:this.getButtonStatus(n),skuTypeValues:t,typeHashToSkuID:r,currentSelect:n,skuInfos:o}}},{key:"checkHas",value:function(e){var t=this.props.goods.skus,r=!0,n=!1,o=void 0;try{for(var a,i=function(){var t=a.value;if(t.quantity<=0)return"continue";var r={};t.specs.forEach((function(e){var t=e.spec_key,n=e.spec_value;r[t]=n}));var n=!0;for(var o in e)e[o]&&r[o]!==e[o]&&(n=!1);return n?{v:t.skuID}:void 0},s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=i();if("continue"!==c&&"object"===me()(c))return c.v}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return!1}},{key:"getButtonStatus",value:function(e){var t=this,r=e||this.state.currentSelect,n=this.props.goods.skus,a={};return n.forEach((function(e){e.specs.forEach((function(e){var n=e.spec_key,i=e.spec_value,s=yb(yb({},r),{},o()({},n,i)),c=t.checkHas(s);a[n]=yb(yb({},a[n]),{},o()({},i,c))}))})),a}},{key:"selectSkuId",value:(s=c()(i.a.mark((function e(t){var r,n,o,a,s,c,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.skuId,n=t.goodsNumber,o=void 0===n?1:n,1!==((a=this.props.goods).skus||[]).length||S()(a,"skus[0].specs.length")||!r){e.next=6;break}return this.setState({selectedSkuID:+r,goodsNumber:o}),e.abrupt("return");case 6:s=this.state.typeHashToSkuID,e.t0=i.a.keys(s);case 8:if((e.t1=e.t0()).done){e.next=22;break}if(c=e.t1.value,s[c]!==+r){e.next=20;break}u=JSON.parse(c),e.t2=i.a.keys(u);case 13:if((e.t3=e.t2()).done){e.next=19;break}return l=e.t3.value,e.next=17,this.selectOneValue(l,u[l],!0);case 17:e.next=13;break;case 19:+o>0&&this.setState({goodsNumber:o});case 20:e.next=8;break;case 22:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"setGoodsNumber",value:function(e){this.setState({goodsNumber:e})}},{key:"resetSkuId",value:function(){var e={};(this.props.goods.skus||[]).forEach((function(t){t.specs.forEach((function(t){var r=t.spec_key;e[r]=null}))})),this.setState({currentSelect:e,selectedSkuID:null})}},{key:"checkQuantityAsync",value:function(e){var t=this;this.isCheckQuantityAsync||(this.isCheckQuantityAsync=!0,Fe({method:"POST",url:"api/oak/quantity/check",data:{goods_id:this.props.goods.goodsID,sku_id:e,mall_id:this.props.goods.mallID,detail_id:S()(this.props.goods,"activity.detailID"),select_quantity:+this.state.goodsNumber,hostname:location.hostname,community_id:this.props.communityId}}).then((function(r){if(r){var n=r.next_quantity,o=t.state.skuInfos[e];o.isQualityCheckEnd=0===r.has_quantity,o.defaultQuantity=n,t.setState({skuInfos:t.state.skuInfos},t.amendLimitQuantity)}t.isCheckQuantityAsync=!1})).catch((function(){t.isCheckQuantityAsync=!1})))}},{key:"getLimitGoodsNumber",value:function(){var e=this.state.selectedSkuID,t=Sb;if(e){var r=this.state.skuInfos[e],n=r.quantity,o=r.staticLimitQuantity,a=r.defaultQuantity;if(this.props.goods.checkQuantity&&a){var i=+o||1;if(r.isQualityCheckEnd)t=Math.min(i,a);else{var s=this.state.goodsNumber;i>a&&s>=a&&this.checkQuantityAsync(e),t=Math.min(i,a)}}else t=Math.min(+o,+n)||1}else t=Sb;return+t<1&&(t=1),t}},{key:"amendLimitQuantity",value:function(){var e=this.getLimitGoodsNumber(),t=this.state,r=t.goodsNumber,n=t.selectedSkuID;if(r>e)if(n&&this.props.goods.checkQuantity){var o=this.state.skuInfos[n],a=o.staticLimitQuantity,i=o.defaultQuantity;(o.isQualityCheckEnd||a<i)&&this.updateAmendLimitQuantityGoodsNumber(e,!0),+r>1e3&&1e3==+e&&this.updateAmendLimitQuantityGoodsNumber(e)}else this.updateAmendLimitQuantityGoodsNumber(e,!0);else r<1&&this.updateAmendLimitQuantityGoodsNumber(1)}},{key:"updateAmendLimitQuantityGoodsNumber",value:function(e,t){var r=this,n=this.state.selectedSkuID;n||this.setState({goodsNumber:e},(function(){t&&Te("当前".concat(n?"款式":"商品","最多可拼").concat(e,"件")),r.state.selectedSkuID&&gb.refresh({goods_number:e,front_action:cd})}))}},{key:"handleHomeInsClick",value:function(e){this.setState({selectedHomeIns:e})}},{key:"getSelectedSkuID",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,o=this.props.isOptSoldOut,a=_()(this.state.currentSelect);if(a[e]!==t||r?a[e]=t:a[e]=null,!o||0!==n||this.checkHas(a)){var i=this.state.typeHashToSkuID[JSON.stringify(a)];return i}for(var s in a)s!==e&&(a[s]=null)}},{key:"selectOneValue",value:(a=c()(i.a.mark((function e(t,r){var n,o,a,s,c,u,l=this,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>2&&void 0!==d[2]&&d[2],o=d.length>3&&void 0!==d[3]?d[3]:-1,a=this.props.isOptSoldOut,(s=_()(this.state.currentSelect))[t]!==r||n?s[t]=r:s[t]=null,a&&0===o&&!this.checkHas(s))for(c in s)c!==t&&(s[c]=null);if(u=this.state.typeHashToSkuID[JSON.stringify(s)],!this.props.selectOneValueCb){e.next=13;break}return e.next=10,this.props.selectOneValueCb({selectedSkuID:u,type:t,value:r,force:n});case 10:if(e.sent){e.next=13;break}return e.abrupt("return",!1);case 13:return this.setState({currentSelect:s,selectedSkuID:u,selectedHomeIns:{}},(function(){l.amendLimitQuantity()})),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"fixInputBug",value:function(){var e=Object(_e.getCurrentPlatform)();e.system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo&&window.scrollTo(0,0)}},{key:"setCustomState",value:function(e){this.setState(e)}},{key:"show",value:function(e){var t=this,r=this.props.goods,n=e.preventAutoConfirm;if(1===r.skus.length&&!S()(r,"skus[0].specs.length")){var o=r.skus[0].skuID;if(this.setState({selectedSkuID:o,selectedHomeIns:{}},(function(){n||(Le.hide(),t.confirmSku())})),!n)return}if(S()(e,"skuID")){var a=e.goodsNumber;this.setState({goodsNumber:Number(a)||1},(function(){t.selectSkuId({skuId:e.skuID,goodsNumber:Number(a)||1})}))}}},{key:"setScroll",value:function(){Object(P.disableScroll)(this.skuSelectorBodyRef)}},{key:"goodsNumberBlur",value:function(){this.fixInputBug();var e=Number(this.state.goodsNumber)||1;this.setState({goodsNumber:e},this.amendLimitQuantity),this.state.selectedSkuID&&gb.refresh({goods_number:e,front_action:cd})}},{key:"goodsNumberChangeClick",value:function(e){Object(O.sendClickMetrics)({page_el_sn:4259118,op:"click",goods_id:this.props.goods.goodsID,goods_number:e})}},{key:"goodsNumberChange",value:function(e){var t=parseInt(e.target.value,10)||1;this.setState({goodsNumber:t},this.amendLimitQuantity),this.state.selectedSkuID&&gb.refresh({goods_number:t,front_action:cd}),this.goodsNumberChangeClick()}},{key:"updateGoodsNumber",value:function(e){var t=(parseInt(this.state.goodsNumber,10)||1)+e;this.setState({goodsNumber:t}),this.state.selectedSkuID&&gb.refresh({goods_number:t,front_action:cd}),this.goodsNumberChangeClick()}},{key:"reduceGoodsNumber",value:function(e){if(e&&e.stopPropagation(),this.isEnableReduce())this.updateGoodsNumber(-1);else if(this.state.selectedSkuID&&this.props.ocData){var t=this.props.ocData.goodsInfo.leastNumber;t&&t>1&&Te("该商品至少购买".concat(t,"件"))}}},{key:"increaseGoodsNumber",value:function(e){if(e&&e.stopPropagation(),this.isEnableIncrease())this.updateGoodsNumber(1);else{var t=this.state,r=t.selectedSkuID,n=t.goodsNumber,o=this.props.ocData.goodsInfo||{},a=o.limitMessage,i=o.limitNumber,s=o.limitStatus;if(r&&this.props.ocData)return void Te(a||(s&&n>1e3?"拼单件数超出范围":"当前款式最多可拼".concat(s?n:i,"件")));var c=this.getLimitGoodsNumber();Te("当前".concat(r?"款式":"商品","最多可拼").concat(c,"件"))}}},{key:"confirmSku",value:(n=c()(i.a.mark((function e(t){var r,n,o,a,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.stopPropagation(),this.checkSpecDesc()){e.next=3;break}return e.abrupt("return");case 3:if(S()(this.props.goods,"ui.sku_section.view_style_v2")!==re){e.next=8;break}if(+S()(this.state.selectedHomeIns,"srv_type")>=0){e.next=8;break}return Te("请选择服务"),e.abrupt("return");case 8:if(S()(this.props.goods,"ui.sku_section.view_style_v2")!==te){e.next=13;break}if(!this.deliverRef.current){e.next=13;break}if(r=this.deliverRef.current.getDeliveryData()){e.next=13;break}return e.abrupt("return");case 13:if(S()(this.props.goods,"ui.sku_section.view_style_v2")!==ee){e.next=20;break}if(!this.skuIphoneRef.current){e.next=20;break}if(n=this.skuIphoneRef.current.getState()||{},a=(o=n).mobileID,o.cityID&&a){e.next=20;break}return Te("请先选择入网信息"),e.abrupt("return");case 20:s=this.props.confirmSkuCallBack,c=this.state.selectedSkuID,s&&s({selectedSkuID:c,goodsNumber:this.state.goodsNumber,skuInfo:this.state.skuInfos[c],skuInfos:this.state.skuInfos,iphoneInfo:n,deliveryData:r,homeInsData:this.state.selectedHomeIns,state:this.state,props:this.props,skuDirectOrder:!0});case 23:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"checkSpecDesc",value:function(){if(!this.state.selectedSkuID)return Te(this.priceAreaRef.getSpecDesc()),!1;var e=S()(this.props.goods,"ui.sku_section.old_for_new");return!(e&&e.title&&!this.state.oldForNewSelected.type)||(Te("请选择".concat(e.title)),!1)}},{key:"showRecycleHighlayer",value:(r=c()(i.a.mark((function e(){var t,r,n,o,a,s,u,l,d,p=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=gb.ocData,r=S()(t,"goodsInfo.mallId"),n=S()(t,"goodsInfo.skuId"),o=S()(t,"goodsInfo.goodsId"),a=this.props.recordId,s=this.ocSkuRef&&this.ocSkuRef.current.offsetHeight,u=this.state,l=u.selectedSkuID,d=u.goodsNumber,!Object(_e.getCurrentPlatform)().isNativePlatform){e.next=19;break}if(e.prev=8,!this.isShowingRecycleHighlayer){e.next=11;break}return e.abrupt("return");case 11:return this.isShowingRecycleHighlayer=!0,e.next=14,Object(ke.invokeBridgeCallNativeFun)("JSUniPopup","showHighLayer",{model:{url:"/recy_old_device_evaluate_popup.html",data:JSON.stringify({mall_id:r,goods_id:o,sku_id:n,record_id:a,height:s}),name:"old_device_evaluate_popup",stat_data:JSON.stringify({page_sn:999999}),block_loading:1,occasion:1,load_timeout:5e3},complete:function(){var e=c()(i.a.mark((function e(t,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.record_id){e.next=5;break}return n=r.record_id,e.next=4,gb.render({sku_id:l,goods_number:d,front_action:id},n);case 4:p.props.setRecordId&&p.props.setRecordId(n);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),on_load_error:function(e,t){p.isShowingRecycleHighlayer=!1},on_state_change:function(e,t){3===t.current_state&&(p.isShowingRecycleHighlayer=!1)}},"5.6.0","5.6.0");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),this.isShowingRecycleHighlayer=!1;case 19:case"end":return e.stop()}}),e,this,[[8,16]])}))),function(){return r.apply(this,arguments)})},{key:"pay",value:(t=c()(i.a.mark((function e(){var t,r,n,o,a,s,c,u,l,d,p,m,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkSpecDesc()){e.next=2;break}return e.abrupt("return");case 2:if((t=gb.ocData).orderSn){e.next=10;break}if(!(r=Ud({ocData:t,ocManager:gb})).errMsg){e.next=8;break}return Te(r.errMsg),e.abrupt("return");case 8:if(r.success){e.next=10;break}return e.abrupt("return");case 10:if(!this.isPaying){e.next=12;break}return e.abrupt("return");case 12:if((n=Fd({ocData:t})).success){e.next=16;break}return n.shouldShowPaymentList&&(this.props.showPaymentList(),setTimeout((function(){Te(n.errMsg)}),200)),e.abrupt("return");case 16:if(!this.state.oldForNewSelected||2!==this.state.oldForNewSelected.type||this.props.recordId){e.next=26;break}return e.prev=17,e.next=20,bb.autoTakeCouponBeforeOldForNew();case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:return this.showRecycleHighlayer(),e.abrupt("return");case 26:if(this.isPaying=!0,!t.orderSn){e.next=32;break}return e.next=30,gb.pay();case 30:return this.isPaying=!1,e.abrupt("return");case 32:if(o=S()(t,"promotionInfo.shopPromotion"),a=S()(t,"promotionInfo.platformPromotion"),s=S()(t,"promotionInfo.platformPromotion.promotionStatus"),c=this.state,u=c.selectedSkuID,l=c.goodsNumber,d=c.skuInfos,e.prev=36,u===t.goodsInfo.skuId&&l===t.goodsInfo.goodsNumber){e.next=39;break}throw new Error("面板显示skuId=".concat(u,"或goodsNumber=").concat(l,"和摩根支付skuId=").concat(t.goodsInfo.skuId,"或goodsNumber=").concat(t.goodsInfo.goodsNumber,"不一致!"));case 39:if(s!==aa){e.next=47;break}return e.next=42,bb.batchAutoTakeCoupon({shopPromotion:o,platformPromotion:a});case 42:if(!(p=e.sent)||!p.notAllSuccess){e.next=45;break}throw new Error("批量领券未全部成功");case 45:e.next=60;break;case 47:if(!o){e.next=52;break}return e.next=50,bb.autoTakeMerchantCoupon();case 50:e.next=60;break;case 52:if(m=d[u],!(f=Tt["".concat(l,"-").concat(u)]&&Tt["".concat(l,"-").concat(u)].batchSn||m&&m.batchSn)){e.next=60;break}return e.next=57,ip({batchSn:f});case 57:return gb.needReload=!0,e.next=60,gb.refresh({front_action:ud});case 60:e.next=68;break;case 62:return e.prev=62,e.t1=e.catch(36),Object(P.throwErrorAsync)(new Error("payConfirmSku"),{error_message:(e.t1||{}).message}),this.isPaying=!1,this.confirmSku(),e.abrupt("return");case 68:return e.next=70,gb.pay();case 70:this.isPaying=!1;case 71:case"end":return e.stop()}}),e,this,[[17,22],[36,62]])}))),function(){return t.apply(this,arguments)})},{key:"isEnableIncrease",value:function(){var e=this.state,t=e.selectedSkuID,r=e.goodsNumber;if(t&&this.props.ocData){var n=this.props.ocData.goodsInfo||{},o=n.limitStatus,a=n.limitNumber;return!o&&r<a}var i=+this.getLimitGoodsNumber();if(t&&this.props.goods.checkQuantity){var s=this.state.skuInfos[t],c=s.staticLimitQuantity,u=s.defaultQuantity;return+r>1e3&&!s.isQualityCheckEnd||!((s.isQualityCheckEnd||c<u)&&r>=i)}return r<i}},{key:"isEnableReduce",value:function(){var e=this.state,t=e.selectedSkuID,r=e.goodsNumber;return t&&this.props.ocData?r>this.props.ocData.goodsInfo.leastNumber:r>1}},{key:"onOldForNewClick",value:function(e){this.state.oldForNewSelected.type===e.type?(this.setState({oldForNewSelected:{}}),Object(O.sendClickMetrics)({page_el_sn:5881525,op:"click",goods_id:this.props.goods.goodsID})):this.setState({oldForNewSelected:e})}},{key:"renderSkusElement",value:function(){var e=this,t=this.getButtonStatus(),r=this.state.originButtonStatus,n=this.props.goods.skus.find((function(e){return e.hotSale}))||{},a=((null==n?void 0:n.specs)||[]).map((function(e){return e.spec_value})),i=-1,s=this.state.skuTypeValues.map((function(n,s){var c=n.type,u=n.values,l=(Object.values(r[c])||[]).reduce((function(e,t){return e+(t?1:0)}),0),d=u.map((function(n,u){var d=kb.disable,p=function(){};(t[c]&&t[c][n]||e.props.isOptSoldOut&&0===s&&r[c]&&r[c][n])&&(d=kb.free,p=function(){e.selectOneValue(c,n,!1,s);var t=e.getSelectedSkuID(c,n,!1,s);if(t){var r=!e.state.selectedSkuID;gb.ocData&&gb.ocData.orderSn&&Object(O.sendClickMetrics)({page_el_sn:4358286,op:"click",goods_id:e.props.goods.goodsID,goods_number:e.state.goodsNumber}),gb.refresh({sku_id:t,goods_number:e.state.goodsNumber,front_action:sd},r)}}),e.state.currentSelect[c]===n&&(d=kb.selected);var m=n;if(1===e.state.skuTypeValues.length){var f=JSON.stringify(o()({},c,n)),h=e.state.typeHashToSkuID[f],v=e.state.skuInfos[h],y=v.groupSkuUnitPrice,g=v.normalSkuUnitPrice,b=+e.props.group.requireNum>1?y:g;b&&(m="".concat(n,"｜").concat(b))}return i<0&&l>1&&n===a[s]&&(i=s),w.a.createElement("div",{role:"button","aria-label":m,key:u,className:d,onClick:p},i===s&&n===a[s]&&w.a.createElement("div",{"aria-hidden":!0,className:A()(hb.a.hotSale,hb.a.hotSaleIcon)}),m)})),p=null,m=S()(e.props.goods,"ui.sku_section.size_chart"),f=+S()(e.props.goods,"ui.sku_section.size_chart_entry_type");if(1===s&&m){var h={page_el_sn:"648235",op:"impr",goods_id:e.props.goods.goodsID};p=w.a.createElement(tt.a,{trackingInfo:h},w.a.createElement("span",{className:2===f?hb.a.skuSizeChartRed:"sku-size-chart",onClick:function(){Object(et.a)(m),Object(O.sendClickMetrics)({page_el_sn:"648235",op:"click",goods_id:e.props.goods.goodsID})}},2===f?"尺码详情":"详情"))}var v=S()(e.props.goods,"ui.sku_section.size_refer_fit_desc"),y=null;return 1===s&&v&&(y=w.a.createElement("span",{className:hb.a.sizeDesc},v)),w.a.createElement("div",{className:hb.a.skuSpecs,key:s},w.a.createElement("span",{className:hb.a.skuSpecsKey},c,y,p),w.a.createElement("div",{className:hb.a.skuSpecValueList},d))}));if(S()(this.props.goods,"ui.sku_section.view_style_v2")===ee){var c=this.state.selectedSkuID;return w.a.createElement(w.a.Fragment,null,s,w.a.createElement($t,{ref:this.skuIphoneRef,selectedSkuID:c,goodsID:this.props.goods.goodsID,toastSpec:function(){Te(e.priceAreaRef.getSpecDesc())},getSkuRef:this.getSkuRef}))}if(S()(this.props.goods,"ui.sku_section.view_style_v2")===te){var u=+S()(this.props.goods,"ui.sku_section.car_shop.action_type");return w.a.createElement(w.a.Fragment,null,s,w.a.createElement(Hr,{ref:this.deliverRef,goods:this.props.goods,updateSelectedSendWays:function(t){e.setState({selectedSendWays:t})},selectedSendWays:this.state.selectedSendWays,actionType:u}))}var l=this.props.goods.activity;if(!(S()(this.props.goods,"ui.sku_section.view_style_v2")!==re||_b||l&&25===l.activityType)){var d=this.state,p=d.selectedSkuID,m=d.skuInfos;return w.a.createElement(w.a.Fragment,null,s,w.a.createElement(Vr,{selectedSkuID:p,skuInfos:m,selectedHomeIns:this.state.selectedHomeIns,ref:this.homeRef,goods:this.props.goods,handleHomeInsClick:this.handleHomeInsClick}))}var f=S()(this.props.goods,"ui.sku_section.old_for_new");if(f&&f.title){var h=f.title,v=f.trade_item;return w.a.createElement(w.a.Fragment,null,s,w.a.createElement("div",{className:hb.a.skuSpecs},w.a.createElement("span",{className:hb.a.skuSpecsKey},h),w.a.createElement("div",{className:hb.a.skuSpecValueList},v.map((function(t,r){var n=t.type===e.state.oldForNewSelected.type;return w.a.createElement(tt.a,{key:r,trackingInfo:n?{page_el_sn:"5881525",op:"impr",goods_id:e.props.goods.goodsID}:{}},w.a.createElement("div",{className:A()(hb.a.skuSpecValue,o()({},hb.a.skuSpecValueSelected,n)),onClick:function(){return e.onOldForNewClick(t)}},t.desc))})))))}return s}},{key:"renderGoodsNumberElement",value:function(){var e,t,r=this.isEnableIncrease(),n=this.isEnableReduce(),a=(this.state.goodsNumber||0).toString().length,i=a>3?36+9*(a-3):36;return w.a.createElement("div",{className:hb.a.selectorNumber},w.a.createElement("div",{className:hb.a.numberStepper},w.a.createElement("div",{className:A()(hb.a.skuSelectorReduce,(e={},o()(e,hb.a.skuSelectorReduceEnable,n),o()(e,hb.a.skuSelectorReduceDisable,!n),e)),onClick:this.reduceGoodsNumber,"aria-label":"减少数量",role:"button"}),w.a.createElement("input",{className:hb.a.skuSelectorInput,type:"number",maxLength:"5",value:this.state.goodsNumber+"","aria-label":"当前数量为".concat(this.state.goodsNumber,"件"),onBlur:this.goodsNumberBlur,onChange:this.goodsNumberChange,style:{width:"".concat(i/100,"rem")}}),w.a.createElement("div",{className:A()(hb.a.skuSelectorIncrease,(t={},o()(t,hb.a.skuSelectorIncreaseEnable,r),o()(t,hb.a.skuSelectorIncreaseDisable,!r),t)),onClick:this.increaseGoodsNumber,"aria-label":"增加数量",role:"button"})))}},{key:"getViewImgList",value:function(e){var t=(Object.values(this.state.skuInfos)||[]).filter((function(e){return e.quantity>0}));t.sort((function(e,t){return S()(e,"previewPriority")-S()(t,"previewPriority")}));var r=t.map((function(e){return e.thumbUrl}));return r.unshift(e),r}},{key:"setSkuStyleStatus",value:function(e){this.setState({styleStatus:e})}},{key:"render",value:function(){var e=this,t=this.props,r=t.goods,n=t.group,o=t.changeToGroupBuy,a=t.usePddNativePhoto,i=t.isMorganFetching,s=t.useNormalSkuData,c=t.consultPromotionPriceParams,u=this.state,l=u.skuInfos,d=u.selectedSkuID,p=u.currentSelect,m=u.styleStatus,f=r.hdThumbUrl||r.thumbUrl,h=this.getViewImgList(f);if(d)f=this.state.skuInfos[d].thumbUrl;else if(Object.keys(p).some((function(e){return p[e]}))){var v=this.checkHas(p);v&&(f=this.state.skuInfos[v].thumbUrl)}var y=S()(this.props.ocData,"promotionInfo.tradeInInfo"),g=this.props.recordId&&!y;return w.a.createElement("div",{className:A()(hb.a.skuSelectorContainer,this.props.isMutliSku&&hb.a.cartSkuUi),role:"dialog",tabIndex:-1,ref:this.ocSkuRef},w.a.createElement("div",{className:hb.a.skuSelectorTitleBar},w.a.createElement("span",null,this.props.recordId?"确认以旧换新订单":"确认订单"),w.a.createElement(U,{className:hb.a.skuSelectorCloseBtn,role:"button","aria-label":"关闭",onClick:function(){e.props.onClose&&e.props.onClose()}})),g?w.a.createElement(th,{onRefresh:function(){var t=e.state,r=t.selectedSkuID,n=t.goodsNumber;gb.render({sku_id:r,goods_number:n,front_action:id},e.props.recordId)}}):w.a.createElement(w.a.Fragment,null,this.props.ocData&&w.a.createElement(rb,{communityId:gb.communityId,groupOrderId:gb.groupOrderId,ocData:this.props.ocData,hasAddressLine:gb.hasAddressLine,goodsInfo:this.props.ocData.goodsInfo,addressInfo:this.props.ocData.addressInfo,updateAddressInfo:gb.updateAddressInfo,selectDeliveryItem:gb.selectDeliveryItem,selectShippingItem:gb.selectShippingItem,goods:r,onClickPreCheck:this.checkSpecDesc}),y&&w.a.createElement(Nf,{ocData:this.props.ocData,currentSelect:this.state.currentSelect,onDescClick:function(){e.skuRef.current.show({skuID:S()(e.props.ocData,"goodsInfo.skuId"),goodsNumber:S()(e.props.ocData,"goodsInfo.goodsNumber")})}}),!y&&w.a.createElement("div",{className:hb.a.skuSelectorHeadContainer},w.a.createElement("div",{className:hb.a.skuSelectorHead},w.a.createElement(Qt,{usePddNativePhoto:a,group:n,src:f,goods:r,imgList:h,skuInfos:l,selectedSkuID:d,selectSkuId:this.selectSkuId,resetSkuId:this.resetSkuId,goodsNumber:this.state.goodsNumber}),w.a.createElement("div",{className:hb.a.skuSelectorHeadRight},w.a.createElement(Ft,{ref:function(t){e.priceAreaRef=t},goods:r,group:n,selectedSkuID:d,currentSelect:p,skuInfos:this.state.skuInfos,selectedHomeIns:this.state.selectedHomeIns,selectedSendWays:this.state.selectedSendWays,handleShowCart:function(){e.props.handleShowCart({selectedSkuID:d,goodsNumber:e.state.goodsNumber})},isMutliSku:this.props.isMutliSku,goodsNumber:this.state.goodsNumber,skuDirectOrder:this.props.skuDirectOrder,ocData:this.props.ocData,styleStatus:m,useNormalSkuData:s,consultPromotionPriceParams:c,renderPromotionDescContent:function(t){return i?null:d?w.a.createElement(mb,{ocData:e.props.ocData,goods:e.props.goods,isMutliSku:e.props.isMutliSku}):w.a.createElement(fn,{priceInfo:t})}}),this.renderGoodsNumberElement()))),this.props.ocData&&!y&&w.a.createElement(wf,{isMorganFetching:i,useNormalSkuData:s,selectedSkuID:this.state.selectedSkuID,ocData:this.props.ocData}),y&&w.a.createElement(Af,{onDescClick:this.showRecycleHighlayer,ocData:this.props.ocData,goods:r}),!y&&this.props.renderSkuBlackCard&&this.props.renderSkuBlackCard({skuSelector:this.state}),w.a.createElement("div",{ref:function(t){e.skuSelectorBodyRef=t},className:hb.a.skuSelectorBody},!y&&this.renderSkusElement(),w.a.createElement(Zf,{goods:this.props.goods}),this.props.ocData&&S()(this.props.ocData,"cellBarVo.protocolV2")&&w.a.createElement(Xf,{goods:this.props.goods,ocData:this.props.ocData}),w.a.createElement("div",{className:hb.a.safeDistance})),this.props.renderFooter&&this.props.renderFooter({selectedSkuID:this.state.selectedSkuID,skuInfos:this.state.skuInfos,goodsNumber:this.state.goodsNumber}),w.a.createElement(St,null,w.a.createElement(Qr,{goods:this.props.goods,selectedSkuID:d,skuInfos:l})),w.a.createElement(Hf,{changeToGroupBuy:o,setSkuStyleStatus:this.setSkuStyleStatus,styleStatus:m,goods:r,group:n,skuInfos:l,showPaymentList:this.props.showPaymentList,ocData:this.props.ocData,onClick:this.pay,goodsNumber:this.state.goodsNumber,promotionDesc:this.state.promotionDesc,onClickPreCheck:this.checkSpecDesc,selectedSkuID:d,useNormalSkuData:s,oldForNewSelected:this.state.oldForNewSelected,hidePayHint:this.state.oldForNewSelected&&2===this.state.oldForNewSelected.type&&!this.props.recordId}),w.a.createElement(cb,nt()({ref:this.skuRef},this.props,{setSkuInfo:function(t){t&&e.setState(t)}}))))}}]),m}(w.a.PureComponent),ab=ib,Xe()(ab.prototype,"buildSkuData",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"buildSkuData"),ab.prototype),Xe()(ab.prototype,"checkHas",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"checkHas"),ab.prototype),Xe()(ab.prototype,"getButtonStatus",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"getButtonStatus"),ab.prototype),Xe()(ab.prototype,"selectSkuId",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"selectSkuId"),ab.prototype),Xe()(ab.prototype,"setGoodsNumber",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"setGoodsNumber"),ab.prototype),Xe()(ab.prototype,"resetSkuId",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"resetSkuId"),ab.prototype),Xe()(ab.prototype,"checkQuantityAsync",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"checkQuantityAsync"),ab.prototype),Xe()(ab.prototype,"getLimitGoodsNumber",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"getLimitGoodsNumber"),ab.prototype),Xe()(ab.prototype,"amendLimitQuantity",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"amendLimitQuantity"),ab.prototype),Xe()(ab.prototype,"updateAmendLimitQuantityGoodsNumber",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"updateAmendLimitQuantityGoodsNumber"),ab.prototype),Xe()(ab.prototype,"handleHomeInsClick",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"handleHomeInsClick"),ab.prototype),Xe()(ab.prototype,"getSelectedSkuID",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"getSelectedSkuID"),ab.prototype),Xe()(ab.prototype,"selectOneValue",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"selectOneValue"),ab.prototype),Xe()(ab.prototype,"setCustomState",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"setCustomState"),ab.prototype),Xe()(ab.prototype,"show",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"show"),ab.prototype),Xe()(ab.prototype,"setScroll",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"setScroll"),ab.prototype),Xe()(ab.prototype,"goodsNumberBlur",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"goodsNumberBlur"),ab.prototype),Xe()(ab.prototype,"goodsNumberChangeClick",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"goodsNumberChangeClick"),ab.prototype),Xe()(ab.prototype,"goodsNumberChange",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"goodsNumberChange"),ab.prototype),Xe()(ab.prototype,"updateGoodsNumber",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"updateGoodsNumber"),ab.prototype),Xe()(ab.prototype,"reduceGoodsNumber",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"reduceGoodsNumber"),ab.prototype),Xe()(ab.prototype,"increaseGoodsNumber",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"increaseGoodsNumber"),ab.prototype),Xe()(ab.prototype,"confirmSku",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"confirmSku"),ab.prototype),Xe()(ab.prototype,"checkSpecDesc",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"checkSpecDesc"),ab.prototype),Xe()(ab.prototype,"showRecycleHighlayer",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"showRecycleHighlayer"),ab.prototype),Xe()(ab.prototype,"pay",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"pay"),ab.prototype),Xe()(ab.prototype,"isEnableIncrease",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"isEnableIncrease"),ab.prototype),Xe()(ab.prototype,"isEnableReduce",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"isEnableReduce"),ab.prototype),Xe()(ab.prototype,"onOldForNewClick",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"onOldForNewClick"),ab.prototype),Xe()(ab.prototype,"getViewImgList",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"getViewImgList"),ab.prototype),Xe()(ab.prototype,"setSkuStyleStatus",[$e],Object.getOwnPropertyDescriptor(ab.prototype,"setSkuStyleStatus"),ab.prototype),ab),wb=r("tehB"),Pb=r.n(wb),Ob=0,Cb={},xb=function(e){var t,r=e.checkQuantity,n=e.defaultQuantity,a=e.quantity,s=e.staticLimitQuantity,u=void 0===s?1:s,l=e.goodsNumber,d=e.onChangeGoodsNumber,p=e.detailId,m=e.mallId,f=e.goodsId,h=e.skuId,v=e.isMutliSku,y=e.communityId,g=Object(I.useState)(!1),b=D()(g,2),_=b[0],k=b[1],S=l>(v?0:1),P=l<1e5;if(h){var O=Cb[h];t=r?O&&+O.nextQuantity||n:a,P=l<u&&l<t}var C=function(e){d(e)},x=function(e){e=+e||1,Ne("当前".concat(h?"款式":"商品","最多可拼").concat(e,"件")),d(e)},E=function(){var e=c()(i.a.mark((function e(){var o,a,s,c,d,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=++Ob,!P){e.next=3;break}return e.abrupt("return");case 3:if(!(u<t)){e.next=6;break}return x(u),e.abrupt("return");case 6:if(r&&n){e.next=9;break}return x(t),e.abrupt("return");case 9:if(!r||!n){e.next=26;break}if(!(a=Cb[h])||0!==a.hasQuantity){e.next=14;break}return x(t),e.abrupt("return");case 14:return e.prev=14,e.next=17,Fe({method:Re.POST,url:"api/oak/quantity/check",data:{goods_id:f,sku_id:h,mall_id:m,detail_id:p,select_quantity:l,hostname:location.hostname,community_id:y}});case 17:if(s=e.sent,o===Ob){e.next=20;break}return e.abrupt("return");case 20:s&&s.next_quantity&&(c=s.next_quantity,d=s.has_quantity,Cb[h]&&Cb[h].nextQuantity>c||(Cb[h]={nextQuantity:c,hasQuantity:d}),v=Cb[h].nextQuantity,l>v?x(v):k(!_)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(14),x(t);case 26:case"end":return e.stop()}}),e,null,[[14,23]])})));return function(){return e.apply(this,arguments)}}();return Object(I.useEffect)((function(){h&&E()}),[l]),w.a.createElement("div",{className:Pb.a.skuNumber},w.a.createElement("div",{className:A()(Pb.a.numberBtn,o()({},Pb.a.disable,!S)),onClick:function(){C(--l)}},w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},w.a.createElement("path",{d:"M1.496584 419.38597h1020.674909V605.567575H1.496584z"}))),w.a.createElement("input",{className:Pb.a.input,type:"number",maxLength:5,value:l,onBlur:function(){var e=Object(_e.getCurrentPlatform)();if(e.system===_e.SYSTEM.IOS&&Object(_e.compareVersion)(e.systemVersion,"12.0")>=0&&"function"==typeof window.scrollTo){var t=document.body.scrollTop+((document.documentElement||{}).scrollTop||0);window.scrollTo(0,t)}},onChange:function(e){var t=+e.target.value||1;C(t)}}),w.a.createElement("div",{className:A()(Pb.a.numberBtn,o()({},Pb.a.disable,!P)),onClick:function(){P?C(++l):Ne("当前".concat(h?"款式":"商品","最多可拼").concat(l,"件"))}},w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},w.a.createElement("path",{d:"M1022.592554 419.397698H605.345902V2.151046h-186.181605V419.397698H1.917645v186.181605h417.246652v417.246653h186.181605V605.579303H1022.592554z"}))))},Eb=w.a.memo(xb),Db=r("ZK0Z"),Nb=r.n(Db),Tb=function(e){var t=e.bottomDisplayItems;return(null==t?void 0:t.length)?w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6664147,op:"impr"}},w.a.createElement("div",{className:Nb.a.container},w.a.createElement("span",{className:Nb.a.content},t.map((function(e){var t=e.txt,r=e.color,n=e.font;return w.a.createElement("span",{style:{color:r,fontSize:n},key:t},t)}))))):null},jb=w.a.memo(Tb);function Ab(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function Rb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ab(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ab(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mb,Lb=function(e){var t,r=e.allowOcHosts,n=e.goodsList,o=e.groupType,a=e.groupOrderId,i=e.forwardUrl,s=Object(P.parseUrlQuery)(window.location.href),c={source_channel:11};if(1===(null==n?void 0:n.length)){var u=n[0],l=u.goodsId,d=u.goodsNumber,p=u.groupId,m=u.skuId;c=Rb(Rb({},c),{},{sku_id:m,goods_number:d,goods_id:l,group_id:p,group_type:o,group_order_id:a,page_from:+s.page_from||0})}else{var f=function(e){var t={};if(!e)return t;var r=new RegExp(Gl);for(var n in e)n.startsWith(Gl)&&(t[n.replace(r,"")]=e[n]);var o=e[od];return o&&(t[od]=o),t}(Object(P.parseUrlQuery)(i));i="transac_batch_checkout.html",c=Rb(Rb({},c),{},{goods_list:JSON.stringify(n.map((function(e,t){var r=e.goodsId,n=e.goodsNumber,o=e.groupId,a=e.likeFrom,i=e.price;return{goods_id:r,sku_id:e.skuId,group_id:o,like_from:a||+s.like_from||0,goods_number:n,price:i,extend_map:Rb(Rb({},f),{},{trace_mark:s._oc_trace_mark,trace_mark_extra:s._oc_trace_mark_extra})}}))),page_from:+s.page_from||0})}Object.keys(s).forEach((function(e){var t=s[e];/^_oc_*/.test(e)&&t&&(c[e]=t)})),Object(_e.getCurrentPlatform)().isWeChatPlatform&&["mobile.yangkeduo.com","m.hutaojie.com","panduoduo.yangkeduo.com"].concat(Ct()(r||[])).indexOf(location.hostname)<0?(c.last_host=location.hostname,t="//mobile.yangkeduo.com/"+Object(P.appendQuery)(c,i)):t=Object(P.appendQuery)(c,i),Si.default.uniformForward(t)},Bb=r("32Nq"),Fb=r.n(Bb),Ub=0,Hb=[{txt:"具体优惠见下单页"}],Vb=w.a.forwardRef((function(e,t){var r=e.groupType,n=e.groupOrderId,o=e.groupId,a=e.goodsId,s=e.checkQuantity,u=e.detailId,l=e.mallId,d=e.forwardUrl,p=e.selectedSkuList,m=e.addSku,f=e.deleteSku,h=e.onClose,v=e.changeGoodsNumber,y=e.updateBottomDisplayItems,g=e.communityId,b=Object(I.useRef)({selectedSkuListLen:0}),_=w.a.createRef(),k=Object(I.useState)({orderAmount:0,bottomDisplayItems:[],promotionTakeInfoList:[],skuList:[]}),S=D()(k,2),O=S[0],C=S[1],x=function(){var e=c()(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(P.parseUrlQuery)(window.location.href),e.next=3,Promise.race([Fe({url:"api/oak/integration/multi_choose",method:Re.POST,data:{goods_id:a,group_id:o,front_env:1,page_from:t.page_form,_oc_biz_type:t._oc_biz_type,cart_sku_list:p.map((function(e){var t=e.skuInfo,r=e.goodsNumber;return{sku_id:t.skuId,select_number:r}}))}}),new Promise((function(e,t){setTimeout((function(){t()}),3e3)}))]);case 3:return r=e.sent,e.abrupt("return",De(r,["promotion_take_info_list"]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(I.useEffect)((function(){var e=function(){var e=c()(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ub++,t=Ub,e.prev=2,e.next=5,x();case 5:if(r=e.sent,t===Ub){e.next=8;break}return e.abrupt("return");case 8:if(!r||!r.orderAmount){e.next=13;break}C(r),r.bottomDisplayItems&&y(r.bottomDisplayItems),e.next=14;break;case 13:throw new Error(JSON.stringify(r));case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(2),n=p.reduce((function(e,t){return e+100*t.skuInfo.groupPrice*t.goodsNumber}),0),C({orderAmount:n,bottomDisplayItems:Hb,promotionTakeInfoList:[],skuList:[]}),y(Hb);case 21:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}();p.length&&e()}),[p.length,p]),Object(I.useEffect)((function(){setTimeout((function(){b.current.selectedSkuListLen<p.length&&_.current.scrollTo(0,_.current.scrollHeight),b.current.selectedSkuListLen=p.length}),0)}),[p.length]);return w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6664150,op:"impr"}},w.a.createElement(X,{modalClassName:Fb.a.modalCartList,ref:t,afterShow:function(e){e&&Object(P.disableScroll)(_.current)},titleClassName:Fb.a.titleCartSku,renderTitle:function(){return(null==p?void 0:p.length)?"已选".concat(null==p?void 0:p.length,"款商品"):"已选择款式"},onClose:h,renderContent:function(){return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:Fb.a.cartContent,ref:_},!p.length&&w.a.createElement("div",{className:Fb.a.empty},w.a.createElement("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},w.a.createElement("path",{d:"M842 152H182L2 452v375c0 24.853 20.145 45 45 45h930c24.851 0 45-20.147 45-45V452L842 152zm162.506 300H834.5V168.655L1004.506 452zM819.5 167v285H646.176C638.713 519.499 581.489 572 512 572s-126.716-52.501-134.176-120H204.5V167h615zm-630 1.654V452H19.494L189.5 168.654zM1007 827c0 16.568-13.433 30-30 30H47c-16.571 0-30-13.432-30-30V467h347.999C378.974 535.938 439.937 587 512 587c72.059 0 133.022-51.062 146.997-120H1007v360z"})),"还没有选择款式，快去选择吧"),w.a.createElement("div",{className:Fb.a.skuList},p.map((function(e){var t=e.skuInfo,r=e.goodsNumber,n=t.specs,o=t.thumbUrl,i=t.skuId,c=n.map((function(e){return e.spec_value})).join(", ");return w.a.createElement("div",{className:Fb.a.cartSkuItem,key:i},w.a.createElement("img",{src:Object(P.generateCDNImageUrl)(o,{resizeWidth:300,quality:70,webpEnable:Me(),sharpen:1})}),w.a.createElement("div",{className:Fb.a.skuSelectedRightDesc},w.a.createElement("div",{className:Fb.a.skuSelectedName},c),function(e){var t=e.skuId,r=e.groupPrice,n=(O.skuList||[]).find((function(e){return e.skuId===t}))||{},o=n.goodsAmount,a=n.goodsAmountPrefix,i=n.promotionDisplayItems;return o?i?w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:Fb.a.skuSelectedPricePrefix},i.map((function(e){var t=e.color,r=e.font,n=e.txt;return w.a.createElement("span",{style:{color:t,fontSize:r}},n)}))),w.a.createElement("div",{className:Fb.a.skuSelectedPrice},a,"¥",Object(P.priceCent)(o))):w.a.createElement("div",{className:Fb.a.skuSelectedSinglePrice},w.a.createElement("span",{className:Fb.a.yen},"¥"),Object(P.priceCent)(o)):w.a.createElement("div",{className:Fb.a.skuSelectedSinglePrice},w.a.createElement("span",{className:Fb.a.yen},"¥"),r)}(t),w.a.createElement("div",{className:Fb.a.skuSelectedNum},w.a.createElement(Eb,{checkQuantity:s,defaultQuantity:t.defaultQuantity,quantity:t.quantity,staticLimitQuantity:t.staticLimitQuantity,goodsNumber:r,onChangeGoodsNumber:function(e){if(0===e)return f(i),void Ne("该款式已删除");v({skuId:i,goodsNumber:e})},detailId:u,mallId:l,goodsId:a,skuId:i,isMutliSku:!0,communityId:g}))))}))),w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6664215,op:"impr"}},w.a.createElement(Xr.HalfPixelBorderBox,{className:A()(Fb.a.buyMoreBtn),borderRadius:".08rem",borderColor:"#e02e24",style:{marginTop:p.length?".3rem":".2rem"},onClick:function(){Be({page_el_sn:6664215,op:"click"}),m()}},w.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},w.a.createElement("path",{d:"M451.7 458.2V2h120.5v456.2H1022v120.6H572.3V1022H451.7V578.8H2V458.2h449.7z"})),p.length?"再选一款":"添加款式"))),!!p.length&&w.a.createElement(w.a.Fragment,null,w.a.createElement(jb,{bottomDisplayItems:O.bottomDisplayItems}),w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6664151,op:"impr"}},w.a.createElement("div",{"data-active":"red",className:Fb.a.cartBottomBtn,onClick:function(){var e=p.map((function(e){return{goodsId:a,skuId:e.skuInfo.skuId,groupId:o,goodsNumber:e.goodsNumber,price:Math.round(100*e.skuInfo.groupPrice)}}));Be({page_el_sn:6664151,op:"click"},c()(i.a.mark((function t(){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==O||null===(o=O.promotionTakeInfoList)||void 0===o?void 0:o.length)){t.next=3;break}return t.next=3,Nn({coupon_take_info_list:O.promotionTakeInfoList,mall_id:l,merchant_tag:71,like_from:101008});case 3:Lb({forwardUrl:d,goodsList:e,groupType:r,groupOrderId:n});case 4:case"end":return t.stop()}}),t)}))))}},(null==O?void 0:O.orderAmount)?"合计¥".concat(Object(P.priceCent)(O.orderAmount),"，去结算"):"价格计算中..."))))}}))})),zb=r("Z5Jv"),Wb=r.n(zb),Qb=function(e){var t=e.selectedSkuList,r=e.goToCartList,n=t.length;return w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6664149,op:"impr"}},w.a.createElement("div",{className:Wb.a.container},w.a.createElement("div",{className:Wb.a.content,onClick:function(e){Be({page_el_sn:6664149,op:"click"},(function(){r&&r(e)}))}},w.a.createElement("div",{className:Wb.a.spec},w.a.createElement("span",{className:Wb.a.specDesc},"已选择",n,"款："),t.map((function(e,t){var r=e.skuInfo,o=r.specs,a=r.thumbUrl,i=o.map((function(e){return e.spec_value})).join(" "),s=t===n-1;return w.a.createElement(w.a.Fragment,null,w.a.createElement("img",{src:Object(P.generateCDNImageUrl)(a,{resizeWidth:300,quality:70,webpEnable:Me(),sharpen:1})}),w.a.createElement("span",null,i),!s&&w.a.createElement("span",null,"，"))}))),w.a.createElement("div",{className:Wb.a.button},"去结算",w.a.createElement(L,null)))))},qb=w.a.memo(Qb),Gb=r("SOyx"),Yb=r.n(Gb),Xb=w.a.forwardRef((function(e,t){var r=e.goods,n=e.group,o=e.onClose,a=e.confirmSkuCallBack,i=e.addIndex,s=e.selectOneValueCb,c=e.initShow,u=void 0!==c&&c,l=e.initSkuParams,d=e.selectedSkuList,p=e.goToCartList,m=e.bottomDisplayItems,f=Object(I.useRef)(),h=Object(I.useRef)();Object(I.useImperativeHandle)(t,(function(){return{modalRef:f,skuRef:h}})),Object(I.useEffect)((function(){l&&h.current.selectSkuId(l)}),[]);var v=Object(I.useCallback)((function(e){Object(O.sendClickMetrics)({page_el_sn:6664145,op:"click",number:i}),a(e)}),[a]);return w.a.createElement(X,{modalClassName:Yb.a.modalCartSku,ref:f,afterShow:function(e){e&&h.current.setScroll()},initShow:u,onClose:function(e){(null==d?void 0:d.length)>1?p():o(e)},titleClassName:Yb.a.titleCartSku,renderTitle:function(){return w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6664143,op:"impr"}},w.a.createElement("span",null,"请添加第",i,"款"))},renderContent:function(){return w.a.createElement(w.a.Fragment,null,!!(null==d?void 0:d.length)&&w.a.createElement(qb,{selectedSkuList:d,goToCartList:p}),w.a.createElement(tt.a,{trackingInfo:{page_el_sn:6664145,op:"impr"}},w.a.createElement(Sn,{isMutliSku:!0,goods:r,group:n,confirmSkuCallBack:v,ref:h,selectOneValueCb:s,buttonText:"确定选择第".concat(i,"款"),renderSkuBottomTip:function(){return w.a.createElement(jb,{bottomDisplayItems:m})}})))}})})),Jb=w.a.memo(Xb),Kb=r("RUUx"),Zb=r.n(Kb);!function(e){e[e.FromCart=0]="FromCart",e[e.FromSku=1]="FromSku"}(Mb||(Mb={}));var $b,e_,t_=w.a.forwardRef((function(e,t){var r=e.groupType,n=e.groupOrderId,o=e.groupId,a=e.goodsId,i=e.mallId,s=e.detailId,c=e.checkQuantity,u=e.forwardUrl,l=e.goods,d=e.group,p=e.skuLen,m=e.limitQuantity,f=e.onClose,h=e.communityId,v=Object(I.useRef)(),y=Object(I.useRef)([]),g=Object(I.useRef)(),b=Object(I.useState)([]),_=D()(b,2),k=_[0],P=_[1],O=Object(I.useState)(S()(l,"ui.sku_section.new_multi_choose.default_bottom_display_items")),C=D()(O,2),x=C[0],E=C[1];Object(I.useImperativeHandle)(t,(function(){return{enter:function(e){var t=e.skuId,r=e.goodsNumber,n=e.bottomDisplayItems;k.length>1?(y.current[A.length-1].modalRef.current.hide(),g.current.show(),v.current.enter()):(N({addFrom:Mb.FromSku,initSkuParams:{skuId:t,goodsNumber:r},initShow:!0,addIndex:k.length+1,bottomDisplayItems:n}),v.current.enter(),g.current.hide())},exit:function(){v.current.exit()}}}));var N=function(e){if(k.length>=m)Ne("最多可选择".concat(m,"款，已达上限"));else if(k.length>=p)Ne("所有可售款式已选完");else{var t=A.concat([e]);R(t)}},T=Object(I.useState)([]),j=D()(T,2),A=j[0],R=j[1];Object(I.useEffect)((function(){setTimeout((function(){if(A.length>0){if(A[A.length-1].addFrom===Mb.FromCart)g.current.exit();else{var e=y.current[A.length-2];e&&e.modalRef.current.exit()}y.current[A.length-1].modalRef.current.enter()}}),0)}),[A.length]);var M=Object(I.useCallback)((function(e){var t,r=e.goodsNumber,n=e.skuInfo,o=k.find((function(e){return e.skuInfo.skuId===n.skuId}));if(k.find((function(e){return e.skuInfo.skuId===n.skuId}))){var a=+o.goodsNumber||0;o.goodsNumber=a+r,t="你已选择过该款式，数量已更新为".concat(o.goodsNumber,"件")}var i=k.concat([{skuInfo:n,goodsNumber:r}]);(P(o?Ct()(k):i),i.length<2&&p>=2)?N({addFrom:Mb.FromSku,addIndex:i.length+1}):(y.current[A.length-1].modalRef.current.exit(),g.current.enterFromRight());t=t||"第".concat(i.length,"款选择成功"),Ne(t)}),[k,N,y]),L=Object(I.useCallback)((function(e){var t=e.skuId,r=e.goodsNumber;k.find((function(e){return e.skuInfo.skuId===t})).goodsNumber=r,P(Ct()(k))}),[k]),B=Object(I.useCallback)((function(){var e,t,r=null===(e=y.current[A.length-1])||void 0===e||null===(t=e.modalRef)||void 0===t?void 0:t.current;null==r||r.exit(),g.current.enterFromRight()}),[]),F=Object(I.useCallback)((function(e){e&&E(e)}),[]);return w.a.createElement(X,{ref:v,modalStyle:{height:"75%"},modalClassName:Zb.a.cartManagerModal,direction:"y",renderContent:function(){return w.a.createElement(w.a.Fragment,null,A.map((function(e,t){if(A.length-t>2)return null;var r=e.initSkuParams,n=e.initShow,o=e.addIndex,a=e.addFrom;return w.a.createElement(Jb,{initShow:n,initSkuParams:r,key:t,ref:function(e){y.current[t]=e},goods:l,group:d,addIndex:o,confirmSkuCallBack:M,onClose:f,onBack:a===Mb.FromCart&&function(){y.current[A.length-1].modalRef.current.exitToRight(),g.current.enter()},selectedSkuList:k,goToCartList:B,bottomDisplayItems:x})})),w.a.createElement(Vb,{groupType:r,groupOrderId:n,limitQuantity:m,forwardUrl:u,goodsId:a,groupId:o,mallId:i,detailId:s,checkQuantity:c,ref:g,selectedSkuList:k,addSku:function(){N({addFrom:Mb.FromCart,addIndex:k.length+1})},deleteSku:function(e){var t=k.filter((function(t){return t.skuInfo.skuId!==e}));P(t)},changeGoodsNumber:L,onClose:f,updateBottomDisplayItems:F,communityId:h}))}})}));function r_(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function n_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r_(r,!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r_(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.Hide=0]="Hide",e[e.Show=1]="Show"}($b||($b={})),function(e){e[e.Create=0]="Create",e[e.History=1]="History",e[e.Vistor=2]="Vistor",e[e.Local=3]="Local"}(e_||(e_={})),r.d(t,"default",(function(){return a_})),r.d(t,"GroupType",(function(){return e_})),r.d(t,"promotionPriceData",(function(){return Tt})),r.d(t,"consultPromotionPrice",(function(){return At}));var o_=rp.getInstance(),a_=function(e){f()(r,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var r,n=g()(e);if(t()){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}(r);function r(e){var n;return l()(this,r),(n=t.call(this,e)).cartManagerBgRef=w.a.createRef(),n.cartManagerRef=w.a.createRef(),n.initOCManager=function(){var e=c()(i.a.mark((function e(t){var r,o,a,s,c,u,l,d,p,m,f,h,v,y,g,b,k,I;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,o=r.isSingleBuy,a=r.groupType,s=r.groupOrderId,c=r.defaultSkuId,u=r.communityId,l=r.ignoreGroupOrderIdInUrl,d=r.defaultGoodsNumber,p=n.checkDefaultSkuInfo(c,d),m=p&&c||n.initSelectedSkuId(),f=p&&d||n.getGoodsNumber(),h=n.props.goods||n.state.goods,v=function(e){n.setState({isMorganFetching:e})},y=function(e){n.setState({isMorganError:e})},g=function(e){if(e){var t=_()(e);(t||{}).isSingleBuy=o,n.setState({ocData:t},(function(){var e=S()(t,"goodsInfo.goodsNumber");e&&n.setGoodsNumber(e),p&&n.recoverSkuInfo(c,d),p=!1}))}else n.setState({ocData:null})},b=h.groupTypes[1],o&&(b=h.groupTypes[0]),o_.init({updateOCDataFun:g,setMorganFetching:v,setMorganError:y,getSelectedSkuId:n.getSelectedSkuId,goods:h,groupType:a||t.groupType,orderExtraType:n.props.orderExtraType||t.orderExtraType||0,groupId:b.groupID,groupOrderId:s||t.groupOrderId,communityId:u,ignoreGroupOrderIdInUrl:l,sourceType:n.props.sourceType,ocExtend:n.props.ocExtend,hideSkuSelect:n.hide,paySuccessCb:n.props.paySuccessCb,pageFrom:n.props.pageFrom,sourceChannel:n.props.sourceChannel,frontEnv:n.props.frontEnv}),k=1===S()(h,"skus.length")||!(!p||!c),e.next=14,o_.render({sku_id:m,goods_number:f,front_action:t.front_action||(k?id:ad)},t.record_id);case 14:return I=e.sent,e.abrupt("return",I);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.initSelectedSkuId=function(){var e=n.props.goods||n.state.goods,t=n.getSelectedSkuID();if(!t){var r=S()(e,"skus").find((function(e){return e.quantity>0&&e.isOnsale}))||[];t=r.skuID||r.skuId}return t},n.show=function(){var e=c()(i.a.mark((function e(t){var r,o,a,s,c,u,l,d,p,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(P.parseUrlQuery)(window.location.href),o={},!(t||{}).isChangeToGroupBuy&&n.skuDirectOrder&&n.setState({recordId:null}),n.props.communityId&&!n.props.ignoreGroupOrderIdInUrl||!r.group_order_id||(o={groupOrderId:r.group_order_id});try{a=r.goods_list&&JSON.parse(r.goods_list),(s=a&&a[0])&&(o={groupOrderId:s.group_order_id,groupType:s.group_type,orderExtraType:s.order_extra_type})}catch(e){Object(P.throwErrorAsync)(new Error("illegal_goods_list"))}if(Le.show(),!n.props.isRemote||n.state.isFetch){e.next=13;break}return e.next=9,n.loadGoods();case 9:if(e.sent){e.next=13;break}return Le.hide(),e.abrupt("return",!1);case 13:if(t&&"function"==typeof t.setStateCallback&&n.normalSkuRef.current.skuRef.current.setCustomState(t.setStateCallback),u=n.normalSkuRef.current.prepare(t),!u.needShow){e.next=34;break}if(!(t||{}).isChangeToGroupBuy||!n.skuDirectOrder){e.next=21;break}return l=o_.recordId,e.next=20,n.initOCManager(n_(n_({},o),{},{record_id:l,front_action:n.getSelectedSkuID()?fd:hd}));case 20:c=e.sent;case 21:if(!n.isShow){e.next=24;break}return Le.hide(),e.abrupt("return");case 24:if((t||{}).isChangeToGroupBuy||!n.skuDirectOrder){e.next=29;break}return e.next=27,n.initOCManager(o);case 27:c=e.sent,o_.needReload&&(o_.needReload=!1);case 29:Le.hide(),d=n.props,p=d.defaultSkuId,m=d.defaultGoodsNumber,n.checkDefaultSkuInfo(p,m)&&!n.skuDirectOrder&&n.recoverSkuInfo(p,m),n.skuBgRef.current.style.display="block",setTimeout((function(){n.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",n.normalSkuRef.current.enter(),Oe(),setTimeout((function(){Le.hide(),n.isShow=!0,c&&Te(c)}),200)}),1);case 34:return e.abrupt("return",!0);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.hide=function(){var e=c()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isShow){e.next=2;break}return e.abrupt("return");case 2:if(xe(),!n.props.onHide){e.next=6;break}return e.next=6,n.props.onHide(t);case 6:n.skuBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",n.normalSkuRef.current.exit(),n.cartManagerRef.current&&n.cartManagerRef.current.exit(),setTimeout((function(){var e;n.isShow=!1,n.skuBgRef.current.style.display="none",o_.needReload&&n.props.canReload&&((e=Object(_e.getCurrentPlatform)()).isNativePlatform&&Object(_e.compareVersion)(e.version,"4.0.0")>0?Object(ke.invokeBridgeCallNativeFun)("WebScene","reload"):Si.default.reload(window.location.href))}),+n.props.delay||200);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleShowCart=function(e){var t=e.selectedSkuID,r=e.goodsNumber;n.cartManagerBgRef.current.style.display="block",setTimeout((function(){n.cartManagerBgRef.current.style["background-color"]="rgba(0, 0, 0, 0.8)",n.cartManagerRef.current.enter({skuId:t,goodsNumber:r})}),200)},n.handleHideCart=function(e){e.stopPropagation(),n.cartManagerBgRef.current.style["background-color"]="rgba(0, 0, 0, 0)",n.cartManagerRef.current.exit(),setTimeout((function(){n.cartManagerBgRef.current.style.display="none"}),200)},n.toggleShowPaymentList=function(e){n.setState({showPaymentList:e})},n.state={isFetch:!1,goods:null,ocData:null,recordId:"",isMorganFetching:!1,showPaymentList:!1,isMorganError:!1,agreeMentInfo:null},n}return p()(r,[{key:"render",value:function(){var e=this;if(this.props.isRemote&&!this.state.goods)return null;var t=this.props.goods;this.props.isRemote&&(t=this.state.goods);var r=this.props,n=r.isSingleBuy,o=r.renderSkuBlackCard,a=r.groupOrderId,s=r.usePddNativePhoto,u=r.isOptSoldOut,l=r.groupType,d=t.groupTypes[1];n&&(d=t.groupTypes[0]);var p=this.state.isMorganFetching||this.state.isMorganError,m=this.skuDirectOrder&&(this.state.ocData||this.state.recordId),f=!!S()(t,"ui.sku_section.new_multi_choose.tip");return w.a.createElement("div",{ref:this.skuBgRef,className:A()(Ge.a.skuSelectorBg,"sku-plus1"),onClick:c()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.hide();case 1:case"end":return t.stop()}}),t)})))},w.a.createElement(se,{changeToGroupBuy:this.props.changeToGroupBuy,groupOrderId:a,ref:this.normalSkuRef,goods:t,ocData:this.state.ocData,group:d,handleShowCart:this.handleShowCart,onClose:this.onCloseNormalSku,renderSkuBlackCard:o,confirmSkuCallBack:this.confirmSkuCallBack,selectOneValueCb:this.props.selectOneValueCb,renderFooter:this.props.renderFooter,buttonText:this.props.buttonText,showPaymentList:function(){e.toggleShowPaymentList(!0)},skuDirectOrder:this.skuDirectOrder,usePddNativePhoto:s,isOptSoldOut:u,useNormalSkuData:p,isMorganFetching:this.state.isMorganFetching,recordId:this.state.recordId,setRecordId:function(t){e.setState({recordId:t})},consultPromotionPriceParams:this.props.consultPromotionPriceParams,showOCSkuSelector:m,communityId:this.props.communityId},m?w.a.createElement(Ib,null):w.a.createElement(Sn,null)),this.skuDirectOrder&&this.state.ocData&&w.a.createElement(Mp,{ocData:this.state.ocData,visible:this.state.showPaymentList,toggleShowPaymentList:this.toggleShowPaymentList}),this.skuDirectOrder&&this.state.ocData&&w.a.createElement(gf,{ocData:this.state.ocData,useBestPromotion:o_.useBestPromotion}),f&&w.a.createElement("div",{ref:this.cartManagerBgRef,className:Ge.a.cartManagerBg,onClick:this.handleHideCart},w.a.createElement(t_,{goodsId:this.props.goods.goodsID,groupId:t.groupTypes[1].groupID,forwardUrl:S()(t,"destinationUrl"),limitQuantity:S()(t,"ui.sku_section.new_multi_choose.limit_quantity"),detailId:S()(t,"activity.detailID"),mallId:t.mallID,checkQuantity:t.checkQuantity,ref:this.cartManagerRef,skuLen:t.skus.filter((function(e){return+e.quantity>0})).length,groupType:l,groupOrderId:a,goods:t,group:t.groupTypes[1],onClose:this.handleHideCart,communityId:this.props.communityId})))}},{key:"skuDirectOrder",get:function(){return this.props.isRemote?this.props.skuDirectOrder&&S()(this.state,"goods.skuDirectOrder"):this.props.skuDirectOrder&&S()(this.props,"goods.skuDirectOrder")}}]),r}(jn)},a96g:function(e,t,r){e.exports={list:"_1V5O_jZv",arrow:"_1kKAxnq3",item:"_2OEkHxgO",name:"_2I1dD-vI",idCard:"_3gsCZm8_",border:"_28wV6BKW",footer:"_84qUEXe1"}},asDA:function(e,t){e.exports=function(e,t,r,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++o]);++o<a;)r=t(r,e[o],o,e);return r}},b0xR:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,'._1trLT2gR{height:.89rem;padding-left:.44rem;position:relative;background:#fff}._1trLT2gR._1XMNcSkC{height:1.07rem}.cYaX87HR{height:1.39rem;padding-left:.44rem;position:relative;background:#fff}.cYaX87HR._1XMNcSkC{height:1.75rem}._3z_wOnyG{height:1.16rem}._3z_wOnyG,._37gvz7E5{padding-left:.44rem;position:relative}._37gvz7E5{height:1.84rem}.px9-vsV6{height:2.52rem;padding-left:.44rem;position:relative}._3hwcg-FO{height:.37rem;line-height:.37rem;color:#151516;font-size:.13rem;position:relative;border:none!important}._3hwcg-FO:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid rgba(0,0,0,.05)}._12T-bV0o{font-size:.13rem;height:.37rem;line-height:.37rem;position:absolute;right:.23rem;top:0;color:#9c9c9c}._12T-bV0o:active{color:#58595b}._12T-bV0o:active:before{color:rgba(0,0,0,.35)}._281ckJtn{position:absolute;height:.12rem;width:.06rem;right:.13rem;top:.12rem}._1WlyLvbS{height:.52rem;padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._1WlyLvbS._1XMNcSkC{height:.7rem}._3FxNqAFV{height:1.02rem;padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._3FxNqAFV._1XMNcSkC{height:1.38rem}._1e4zHMkd,._1kY24ooh{width:.99rem;height:.4rem;border-radius:.04rem;background-color:#f8f8f8;margin-right:.1rem;margin-bottom:.1rem}._1e4zHMkd{background-color:#fdf3f2}._2l0Vd4nR,._3gVdWtVT,.xAtxWEkF{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.06rem;font-size:.12rem;text-align:center}._3gVdWtVT{color:#e02e24}.xAtxWEkF{color:#9c9c9c}._1rGQmS2F,._2IgIVOHE,.gh4-MQFk{height:.12rem;line-height:.12rem;color:#58595b;margin-top:.04rem;font-size:.12rem;text-align:center}.gh4-MQFk{color:#e02e24}._2IgIVOHE{color:#9c9c9c}._3OZkTf6Z{height:.7rem}._3DiwxQrV,._3OZkTf6Z{padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}._3DiwxQrV{height:1.38rem}.R6V7Pv0r{height:2.06rem;padding-bottom:.02rem;display:-webkit-box;display:flex;display:-webkit-flex;-webkit-box-pack:start;justify-content:flex-start;-webkit-justify-content:flex-start;-webkit-box-align:start;align-items:flex-start;-webkit-align-items:flex-start;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.BxoqmZys{width:.13rem;height:.13rem;margin-right:.04rem;margin-top:.12rem}.sLK1W7j6{position:absolute;top:0;left:0;bottom:0;width:.32rem;z-index:1}.H-GJ_YnZ{margin-right:.1rem}.pdd_payment_list_elder_mode ._3hwcg-FO{height:.46rem;line-height:.44rem;padding-top:.02rem;font-size:.16rem}.pdd_payment_list_elder_mode ._12T-bV0o{height:.44rem;line-height:.44rem;font-size:.16rem}.pdd_payment_list_elder_mode ._12T-bV0o:before{font-size:.13rem;top:.16rem}.pdd_payment_list_elder_mode ._3FxNqAFV{height:2.06rem}.pdd_payment_list_elder_mode .BxoqmZys{width:.16rem;height:.16rem;margin-right:.04rem;margin-top:.14rem}.pdd_payment_list_elder_mode ._281ckJtn{position:absolute;height:.13rem;width:.07rem;right:.12rem;top:.16rem}',""]),t.locals={installment3Container:"_1trLT2gR",hasPromotionContent:"_1XMNcSkC",installment6Container:"cYaX87HR",installment2ContainerElder:"_3z_wOnyG",installment4ContainerElder:"_37gvz7E5",installment6ContainerElder:"px9-vsV6",title:"_3hwcg-FO",action:"_12T-bV0o",actionBtn:"_281ckJtn",installments3:"_1WlyLvbS",installments6:"_3FxNqAFV",installment:"_1kY24ooh",selectedInstallment:"_1e4zHMkd",number:"_2l0Vd4nR",selectedNumber:"_3gVdWtVT",disableNumber:"xAtxWEkF",money:"_1rGQmS2F",selectedMoney:"gh4-MQFk",disableMoney:"_2IgIVOHE",installment2Elder:"_3OZkTf6Z",installment4Elder:"_3DiwxQrV",installment6Elder:"R6V7Pv0r",bankIcon:"BxoqmZys",mask:"sLK1W7j6",installmentContainer:"H-GJ_YnZ"}},b2z7:function(e,t){var r=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},bahg:function(e,t){e.exports=function(e){return e.split("")}},c0Fl:function(e,t,r){"use strict";var n=r("TqRt");t.__esModule=!0,t.default=void 0;var o=function(){};n(r("Bp9Y")).default&&(o=document.addEventListener?function(e,t,r,n){return e.removeEventListener(t,r,n||!1)}:document.attachEvent?function(e,t,r){return e.detachEvent("on"+t,r)}:void 0);var a=o;t.default=a,e.exports=t.default},c3b3:function(e,t,r){e.exports={mainArea:"_2gfjGJi_",icon:"_1w7IKZX7",mobileClear:"_2-ahLH-f"}},cBUB:function(e,t,r){e.exports={promotion:"NGUPfMa-",promotion3:"yPVq05d_",prefixPrice:"_3aTaNLaa"}},cIxk:function(e,t,r){e.exports={dontUseItem:"_2qt2WU6J",label:"_3eLfDcZQ"}},d5x6:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._3sOFMl4c{position:fixed;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.8);z-index:11000}",""]),t.locals={root:"_3sOFMl4c"}},dVn5:function(e,t){var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(r)||[]}},dXXU:function(e,t,r){var n=r("UH3G"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},dtTa:function(e,t,r){e.exports={usablePromotionItem:"TMkGqD8f"}},eJ5W:function(e,t,r){e.exports={container:"_30PbIoSp",icon:"_2G595Nyr",title:"_1ZZe67P-"}},eskz:function(e,t,r){var n=r("d5x6"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},f3rD:function(e,t,r){e.exports=r("EQ+b")("f3rD")},fI1f:function(e,t,r){var n=r("HFEV"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"fR/l":function(e,t,r){var n=r("CH3K"),o=r("Z0cm");e.exports=function(e,t,r){var a=t(e);return o(e)?a:n(a,r(e))}},fUNr:function(e,t,r){var n=r("rzwT"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},fo6e:function(e,t){var r=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return r.test(e)}},g4LU:function(e,t,r){e.exports={popover:"_2sFbuBdZ",bg:"MfG-3mB1",bgShown:"V_7xRf2B",main:"_2aePaY0-",mainShown:"_2FXzOBOm"}},gFfm:function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},gNBk:function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"e",(function(){return d}));var n=r("KoDT"),o=r("3VHQ");function a(){var e={1:1,2:.5,4:.25,5:.2,10:.1},t=1,r=1;if(window.__CMT_AMPLIFY_RATE__){var n=window.__CMT_AMPLIFY_RATE__;e[n]&&(t=+n,r=e[n])}return{amplifyRate:t,sampleRate:r}}function i(){return window.__pre_render_performance_timing||{}}var s=Object(n.getCurrentPlatform)();function c(e){var t=function(){return setTimeout(e,0)};"complete"===document.readyState?t():window.addEventListener("load",t)}var u="text/plain;charset=UTF-8";function l(e,t){if(s.isNativePlatform&&Object(n.compareVersion)(s.systemVersion,"4.3.0")>=0)Object(o.invokeBridgeCallNativeFun)("JSNetwork","request",{url:e,method:"POST",data:JSON.stringify(t),headers:{"Content-Type":u}},"","",!1).catch((function(e){}));else{var r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type",u),r.withCredentials=!0,r.send(JSON.stringify(t))}}function d(e){var t=window.location,r=t.protocol,n=(t.hostname,"".concat("amcomponent:"===r?"https:":r,"//").concat(window.__CMT_HOST__||"cmtw.pinduoduo.com"));return"".concat(n).concat(e)}},gQMU:function(e,t,r){var n=r("0ZTe")("toUpperCase");e.exports=n},gWL1:function(e,t,r){e.exports={bubbleContainer:"_3_Hv0n-A",recCardTriangle:"_3l7sd2NN",recList:"_3cGAdVdi",recCardItem:"_4rnWftx7"}},gvmc:function(e,t,r){},"gze+":function(e,t,r){e.exports={skuPreSaleTip:"ceMJmCmA",skuPreSaleTipOC:"whL73SdO"}},h3V6:function(e,t,r){},h3qu:function(e,t,r){e.exports=r("EQ+b")("h3qu")},hVdf:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s}));var n=r("KoDT"),o=r("3VHQ"),a=Object(n.getPlatform)(window.navigator.userAgent);function i(){return a.isNativePlatform}function s(e){var t=e.title,r=void 0===t?"":t,i=e.text,s=void 0===i?"":i,c=e.onConfirm,u=e.onCancel,l=e.onClose,d=e.confirmButtonLabel,p=e.cancelButtonLabel,m={title:r,text:s,ok_label:d||"确定",canceled_on_touch_outside:!1,show_close_button:!0};u&&(m.cancel_label=p||"取消");var f=a.system===n.SYSTEM.IOS?"AMAlert":"JSAlert";Object(o.invokeBridgeCallNativeFun)(f,"showAlert",m).then((function(e){2!==e.click_type?0===e.index?c&&c(e):u&&u(e):l&&l(e)}))}},hgQt:function(e,t,r){var n=r("Juji"),o=r("4sDh");e.exports=function(e,t){return null!=e&&o(e,t,n)}},i4d4:function(e,t,r){e.exports={skuQuantityTip:"_2Icr8_BZ",skuQuantityTipTxt:"_3Y4I8_Gq"}},i7vn:function(e,t,r){e.exports={addressInfo:"_35_YyHlO",location:"_20Aew5Dn",icon:"_337DifRr",info:"_lytPIiU",receiver:"_2XUxNfYs",name:"_2Ca-NXhN",mobile:"_2KH3N__4",city:"_1e1he_ng",detail:"Y7f6W3f-",instruction:"_2ZvGIBQh",arrow:"anVcJFoP"}},iYsC:function(e,t,r){var n=r("b0xR"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},idmN:function(e,t,r){var n=r("ZWtO"),o=r("FZoo"),a=r("4uTw");e.exports=function(e,t,r){for(var i=-1,s=t.length,c={};++i<s;){var u=t[i],l=n(e,u);r(l,u)&&o(c,a(u,e),l)}return c}},jGYx:function(e,t,r){var n=r("yFYA"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},kQkh:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,'._3s5fmV9c{height:.36rem;line-height:2.72;text-align:center;font-size:0;border-bottom:0;display:block;position:relative;border:none!important}._3s5fmV9c:after{content:"";display:block;position:absolute;top:0;right:-100%;bottom:-100%;left:0;-webkit-transform-origin:0 0;transform-origin:0 0;pointer-events:none;-webkit-transform:scale(.5);transform:scale(.5);box-sizing:border-box;border-top:1px solid #ededed}._3s5fmV9c span{font-size:.13rem}._3s5fmV9c .HPDn3v3G{padding:0 .03rem}._3s5fmV9c ._1p9-IUem{display:inline-block;height:.14rem;margin:0 .05rem 0 0;width:.14rem;background:url(https://funimg.pddpic.com//order_checkout/pay_icon_v6.png) no-repeat;background-size:1.62rem .14rem;position:relative;top:.02rem;right:-.005rem}._3s5fmV9c ._1p9-IUem._3W830_qi,._3s5fmV9c ._1p9-IUem._34s21a2y{background-position:-.18rem 0}._3s5fmV9c ._3pVk5QL2{display:inline-block;font-size:0}._3s5fmV9c ._143cvGH-{font-size:0}._3s5fmV9c .OQTfixv1{display:inline-block;font-size:.13rem;color:#58595b}._3s5fmV9c ._1iXZpmdh{font-size:0}._3s5fmV9c ._1iXZpmdh:not(:last-of-type):after{content:"\\3001";font-size:.13rem}._3s5fmV9c ._1iXZpmdh span{font-size:.13rem}._3gKyS-Db{display:inline-block;width:.1rem;height:.1rem;margin-right:.06rem;margin-left:.06rem;fill:#666}.pdd_payment_list_elder_mode ._3s5fmV9c{height:.4rem;line-height:.4rem}.pdd_payment_list_elder_mode ._3s5fmV9c .OQTfixv1{font-size:.16rem}.pdd_payment_list_elder_mode ._3s5fmV9c ._3gKyS-Db{width:.1rem;height:.1rem}',""]),t.locals={more:"_3s5fmV9c",space:"HPDn3v3G",moreIcon:"_1p9-IUem",icon1:"_34s21a2y",icon5:"_3W830_qi",payment:"_3pVk5QL2",wrapper:"_143cvGH-",hint:"OQTfixv1",item:"_1iXZpmdh",arrowsDownSvg:"_3gKyS-Db"}},kcBU:function(e,t,r){var n=r("6iuw"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},lEbS:function(e,t,r){},losq:function(e,t,r){e.exports={payment:"ZuLf7LIZ",paymentlist:"_35gWhmMg",border:"AIEuNy_D",title:"_1nRWcrCG",closeIcon:"_3NT450Jv",pmBg:"_13CS1S_Z"}},"m7/H":function(e,t,r){e.exports=r("EQ+b")("m7/H")},mUg4:function(e,t,r){var n=r("cq/+"),o=r("EwQA"),a=r("mTTR");e.exports=function(e,t){return null==e?e:n(e,o(t),a)}},muwb:function(e,t,r){e.exports={nameArea:"_2dmuG1LA",name:"_2VFBW8vk",price:"_1i_A_hcB",ocPrice:"_2aIxC03A",promotion:"_1XHpKxDC",promotion3:"_1_HbSoTk"}},"oCl/":function(e,t,r){var n=r("CH3K"),o=r("LcsW"),a=r("MvSz"),i=r("0ycA"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=o(e);return t}:i;e.exports=s},oobu:function(e,t,r){e.exports={bottomTip:"_3OF9G0I3",tip:"U-_e98m4",icon:"_17GE0h5R"}},ooc8:function(e,t,r){e.exports={redPacketItem:"_1KcwvgOe",reward:"_2u2Yw3OP",redPacket:"_2P0Eyai_",couponAmount:"_2HAMUW9q",priceIcon:"_2POxf0tc",num:"_376wIwoy",couponTag:"bBKTlu8-",couponTagTxt:"KzVgr315",redPacketInfo:"_3zHxzdtT",fullBackName:"_3GiDgZ99",processStatusDesc:"_2ASfzxT5",progress:"_3xsuSb75",progressBarOuter:"KqC_PZil",progressBarInner:"-OcuSPZl"}},"otv/":function(e,t,r){var n=r("nmnc"),o=n?n.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},"p+lt":function(e,t,r){},pbmx:function(e,t,r){e.exports={multiChoose:"_1ER3SWR8"}},qRkn:function(e,t,r){var n=r("3cYt")({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});e.exports=n},qZTm:function(e,t,r){var n=r("fR/l"),o=r("MvSz"),a=r("7GkX");e.exports=function(e){return n(e,a,o)}},quyA:function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},r5oO:function(e,t,r){e.exports={container:"_2tMDCcio",cell:"_3wowRIPX",indicator:"_3DqJ9iWK",addAddress:"C5MWyQF5",addIcon:"DDKLQpWM"}},rRnn:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r("q1tI")),a=(n(r("2W6z")),function(e){e.index;var t=e.children;o.default.Children.count(t)});t.default=a},raBC:function(e,t,r){"use strict";var n=r("TqRt");t.__esModule=!0,t.default=void 0;var o=function(){};n(r("Bp9Y")).default&&(o=document.addEventListener?function(e,t,r,n){return e.addEventListener(t,r,n||!1)}:document.attachEvent?function(e,t,r){return e.attachEvent("on"+t,(function(t){(t=t||window.event).target=t.target||t.srcElement,t.currentTarget=e,r.call(e,t)}))}:void 0);var a=o;t.default=a,e.exports=t.default},rzwT:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._2_R9cyxl{padding:.24rem .2rem}",""]),t.locals={root:"_2_R9cyxl"}},sZZj:function(e,t,r){e.exports={haiTaoAntiepidemic:"gMzcRXnn"}},sgoq:function(e,t,r){var n=r("asDA"),o=r("TKrE"),a=r("6nK8"),i=RegExp("['’]","g");e.exports=function(e){return function(t){return n(a(o(t).replace(i,"")),e,"")}}},tadb:function(e,t,r){var n=r("Cwc5")(r("Kz5y"),"DataView");e.exports=n},tehB:function(e,t,r){e.exports={skuNumber:"_2uDvVQTM",numberBtn:"_1kq3Rc3U",disable:"_2aqnGQ2B",input:"_3kc_u9om"}},u6S6:function(e,t,r){var n=r("6acW"),o=r("sgoq")((function(e,t,r){return t=t.toLowerCase(),e+(r?n(t):t)}));e.exports=o},uNWy:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._2vFepLDg{line-height:.25rem;font-size:.17rem;color:#151516;text-align:center}",""]),t.locals={root:"_2vFepLDg"}},uorM:function(e,t,r){e.exports={skuSelectorCloseBtn:"_1ifQun1H",skuSelectorBody:"_3NXAWOJU",safeDistance:"_3hcWlBV3",skuSelectorBottom:"_2w4vNs31",startHide:"_3c9_AR-L",toHide:"H5vllzzb",startDisplay:"_3O5dZJUh",toDisplay:"_2MEr7QUP",skuSelectorContainer:"_2Aq-Ugkh",skuSelectorHead:"nxbx3dAD",skuSpecs:"_1XqP0nf5",selectorNumber:"_3Lu0pvej",numberStepper:"N2qkjyDl",skuSelectorReduce:"_35TEciAA",skuSelectorReduceEnable:"_2BM66E_I",skuSelectorReduceDisable:"_6YH6EkH8",skuSelectorInput:"_2Dfevmvi",skuSelectorIncrease:"_3sjUUFAM",skuSelectorIncreaseEnable:"fFnfVnqP",skuSelectorIncreaseDisable:"_1nfoL_XT",sizeDesc:"_1fhWBb8Y",skuSizeChartRed:"aaeM-47L",skuSpecValueList:"_3P3M8kC-",hotSale:"_1aQaErYF",skuSpecValue:"_1WyUf92E",hotSaleIcon:"_1JOBwSlu",skuSpecValueSelected:"_2bBCR7qt",skuSpecValueDisable:"PphFt0vU",cartSkuUi:"_18xWYKbd",skuSelectorMain:"_1sJVEcS6"}},"v/Ss":function(e,t,r){e.exports={normalSkuModal:"_1y1aeNA3",normalSkuModalSkuDirectOrder:"_3zIg1i_3"}},v5F4:function(e,t,r){e.exports={deliveryStripe:"_3vO3WpIa",deliveryContent:"_2X1hV6Jv",deliverySvg:"_1cEkez0v",arrow:"_16aZoG9o",deliveryList:"_3htAJlnB",title:"_3P_nZd5j",closeBtn:"_27fcHtOA",deliveryItem:"_3dwidqQm",selected:"_2kGgPlxg"}},v796:function(e,t,r){e.exports={idModifyHint:"kVjIVSxQ",border:"_1KAw0rZw",line:"_2DdaMJny",icon:"B-Jz_LzB",text:"_27OMwNt3",title:"_23-PbjYD",desc:"_1PsHcgrY",action:"_3tN1jEXk",btn:"_2xnh3bvX",grayBtn:"_1raY2VeX"}},v9rC:function(e,t,r){},vBQ9:function(e,t,r){"use strict";var n=r("8vY7"),o=r("lSNA"),a=r.n(o),i=r("hVdf");function s(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(r,!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(){};function l(e){e.onClose=e.onClose||e.onCancel,Object(i.b)()?function(e){Object(i.a)(c(c({},e),{},{onCancel:e.onCancel||u}))}(e):Object(n.a)(e)}r.d(t,"a",(function(){return l}))},"vN+2":function(e,t){e.exports=function(){}},vVBQ:function(e,t,r){e.exports={logoWrap:"_2fyYanh2",logo:"JwB7pONe",container:"_1ZOUDxNT",titleWrap:"_1Z5-NKbM",title:"_2N3eqqnQ",backBtnWrap:"_1zJsR3Ak",backBtn:"VverBJBN",couponItem:"_1KE5Ff4X",couponTag:"_1HWJRLGb",couponPrice:"_3p55_8W2",couponInfo:"oZGtSc2O",phoneContent:"_3GbNmVDx",clearButton:"_2g_U8jus",verifyCode:"_3aBIMQ0U",verifyCodeActive:"QaofrByL",inputBox:"_3Ij3ZKeN",codeInputBox:"_3X88btx8",joinBtn:"t_hnfMIz",rule:"_1YVeAvo0",ruleText:"_2faMvETa",phoneContainer:"_3DN_lbhf",phoneTitleWrap:"_3PJqQ-xU"}},"w/wX":function(e,t,r){var n=r("QqLw"),o=r("ExA7");e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},wgWF:function(e,t,r){},wrZu:function(e,t,r){var n=r("+K+b"),o=r("XYm9"),a=r("b2z7"),i=r("otv/"),s=r("yP5f");e.exports=function(e,t,r){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return a(e);case"[object Symbol]":return i(e)}}},wy8a:function(e,t,r){var n=r("KxBF");e.exports=function(e,t,r){var o=e.length;return r=void 0===r?o:r,!t&&r>=o?e:n(e,t,r)}},x7Ie:function(e,t,r){e.exports={ocSkuSelectorBg:"_2zIk0pvb"}},xFQA:function(e,t,r){e.exports={promotionList:"_34w2SEkY",postagePromotion:"_2BRDyh8T",promotionItem:"f5srGtiA",titleContainer:"_3myZ3nAP",hasBorder:"_3RxMK8c3",title:"_2qm3tn7H",foldItem:"_3vPh1KJr",foled:"_1CML21tK",close:"eN1J2JTG",closeIcon:"_2aIztqT_",text:"_2DdF0uhN",content:"_2W-zM6Fw",hasPromotionDisplay:"_2R27AZYW",bottom:"cpxcg3RL",promotionDisplay:"_32iTRTrP",btn:"_1W9ox0zY",float:"_3HMTET3t"}},xIpx:function(e,t,r){e.exports={picker:"Dk8H2PTC",container:"_3ZgfStr5",mask:"SlyH6u_T",panel:"_2cFRKvef",cancel:"_1DxmVUUL",title:"BVFeRMMV",content:"_1THGTrSy",maskBottom:"_26d1VyH_",maskTop:"_38AjMIyV",wrapper:"_1HQzK_aj",wheel:"EmJ244Xm",wheelScroll:"_33sHPv9I",wheelItem:"MEJzOuhS"}},xU8c:function(e,t,r){"use strict";var n=r("TqRt");t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var o,a,i,s,c,u,l,d,p,m,f,h=n(r("Bp9Y")),v="transform";if(t.transform=v,t.animationEnd=i,t.transitionEnd=a,t.transitionDelay=l,t.transitionTiming=u,t.transitionDuration=c,t.transitionProperty=s,t.animationDelay=f,t.animationTiming=m,t.animationDuration=p,t.animationName=d,h.default){var y=function(){for(var e,t,r=document.createElement("div").style,n={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},o=Object.keys(n),a="",i=0;i<o.length;i++){var s=o[i];if(s+"TransitionProperty"in r){a="-"+s.toLowerCase(),e=n[s]("TransitionEnd"),t=n[s]("AnimationEnd");break}}!e&&"transitionProperty"in r&&(e="transitionend");!t&&"animationName"in r&&(t="animationend");return r=null,{animationEnd:t,transitionEnd:e,prefix:a}}();o=y.prefix,t.transitionEnd=a=y.transitionEnd,t.animationEnd=i=y.animationEnd,t.transform=v=o+"-"+v,t.transitionProperty=s=o+"-transition-property",t.transitionDuration=c=o+"-transition-duration",t.transitionDelay=l=o+"-transition-delay",t.transitionTiming=u=o+"-transition-timing-function",t.animationName=d=o+"-animation-name",t.animationDuration=p=o+"-animation-duration",t.animationTiming=m=o+"-animation-delay",t.animationDelay=f=o+"-animation-timing-function"}var g={transform:v,end:a,property:s,timing:u,delay:l,duration:c};t.default=g},xZgz:function(e,t,r){"use strict";var n=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=w,t.findNativeHandler=O,t.default=void 0;var o=n(r("pVnL")),a=n(r("QILm")),i=n(r("lwsE")),s=n(r("W8MJ")),c=n(r("a1gu")),u=n(r("Nsbk")),l=n(r("7W2i")),d=n(r("q1tI")),p=n(r("17x9")),m=(n(r("2W6z")),n(r("xU8c"))),f=n(r("raBC")),h=n(r("c0Fl")),v=r("KJF0");function y(e,t,r,n){return(0,f.default)(e,t,r,n),{remove:function(){(0,h.default)(e,t,r,n)}}}var g={direction:"ltr",display:"flex",willChange:"transform"},b={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},_={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function k(e,t){var r=t.duration,n=t.easeFunction,o=t.delay;return"".concat(e," ").concat(r," ").concat(n," ").concat(o)}function S(e,t){var r=_.rotationMatrix[t];return{pageX:r.x[0]*e.pageX+r.x[1]*e.pageY,pageY:r.y[0]*e.pageX+r.y[1]*e.pageY}}function I(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function w(e,t){for(var r=[];e&&e!==t&&!e.hasAttribute("data-swipeable");){var n=window.getComputedStyle(e);"absolute"===n.getPropertyValue("position")||"hidden"===n.getPropertyValue("overflow-x")?r=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&r.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return r}var P=null;function O(e){var t=e.domTreeShapes,r=e.pageX,n=e.startX,o=e.axis;return t.some((function(e){var t=r>=n;"x"!==o&&"y"!==o||(t=!t);var a=e[_.scrollPosition[o]],i=a>0,s=a+e[_.clientLength[o]]<e[_.scrollLength[o]];return!!(t&&s||!t&&i)&&(P=e.element,!0)}))}var C=function(e){function t(e){var r;return(0,i.default)(this,t),(r=(0,c.default)(this,(0,u.default)(t).call(this,e))).rootNode=null,r.containerNode=null,r.ignoreNextScrollEvents=!1,r.viewLength=0,r.startX=0,r.lastX=0,r.vx=0,r.startY=0,r.isSwiping=void 0,r.started=!1,r.startIndex=0,r.transitionListener=null,r.touchMoveListener=null,r.activeSlide=null,r.indexCurrent=null,r.firstRenderTimeout=null,r.setRootNode=function(e){r.rootNode=e},r.setContainerNode=function(e){r.containerNode=e},r.setActiveSlide=function(e){r.activeSlide=e,r.updateHeight()},r.handleSwipeStart=function(e){var t=r.props.axis,n=S(e.touches[0],t);r.viewLength=r.rootNode.getBoundingClientRect()[_.length[t]],r.startX=n.pageX,r.lastX=n.pageX,r.vx=0,r.startY=n.pageY,r.isSwiping=void 0,r.started=!0;var o=window.getComputedStyle(r.containerNode),a=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform");if(a&&"none"!==a){var i=a.split("(")[1].split(")")[0].split(","),s=window.getComputedStyle(r.rootNode),c=S({pageX:parseInt(i[4],10),pageY:parseInt(i[5],10)},t);r.startIndex=-c.pageX/(r.viewLength-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10))||0}},r.handleSwipeMove=function(e){if(r.started){if(null===P||P===r.rootNode){var t=r.props,n=t.axis,o=t.children,a=t.ignoreNativeScroll,i=t.onSwitching,s=t.resistance,c=S(e.touches[0],n);if(void 0===r.isSwiping){var u=Math.abs(c.pageX-r.startX),l=Math.abs(c.pageY-r.startY),p=u>l&&u>v.constant.UNCERTAINTY_THRESHOLD;if(!s&&("y"===n||"y-reverse"===n)&&(0===r.indexCurrent&&r.startX<c.pageX||r.indexCurrent===d.default.Children.count(r.props.children)-1&&r.startX>c.pageX))return void(r.isSwiping=!1);if(u>l&&e.preventDefault(),!0===p||l>v.constant.UNCERTAINTY_THRESHOLD)return r.isSwiping=p,void(r.startX=c.pageX)}if(!0===r.isSwiping){e.preventDefault(),r.vx=.5*r.vx+.5*(c.pageX-r.lastX),r.lastX=c.pageX;var m=(0,v.computeIndex)({children:o,resistance:s,pageX:c.pageX,startIndex:r.startIndex,startX:r.startX,viewLength:r.viewLength}),f=m.index,h=m.startX;if(null===P&&!a)if(O({domTreeShapes:w(e.target,r.rootNode),startX:r.startX,pageX:c.pageX,axis:n}))return;h?r.startX=h:null===P&&(P=r.rootNode),r.setIndexCurrent(f);var y=function(){i&&i(f,"move")};!r.state.displaySameSlide&&r.state.isDragging||r.setState({displaySameSlide:!1,isDragging:!0},y),y()}}}else r.handleTouchStart(e)},r.handleSwipeEnd=function(){if(P=null,r.started&&(r.started=!1,!0===r.isSwiping)){var e,t=r.state.indexLatest,n=r.indexCurrent,o=t-n;e=Math.abs(r.vx)>r.props.threshold?r.vx>0?Math.floor(n):Math.ceil(n):Math.abs(o)>r.props.hysteresis?o>0?Math.floor(n):Math.ceil(n):t;var a=d.default.Children.count(r.props.children)-1;e<0?e=0:e>a&&(e=a),r.setIndexCurrent(e),r.setState({indexLatest:e,isDragging:!1},(function(){r.props.onSwitching&&r.props.onSwitching(e,"end"),r.props.onChangeIndex&&e!==t&&r.props.onChangeIndex(e,t,{reason:"swipe"}),n===t&&r.handleTransitionEnd()}))}},r.handleTouchStart=function(e){r.props.onTouchStart&&r.props.onTouchStart(e),r.handleSwipeStart(e)},r.handleTouchEnd=function(e){r.props.onTouchEnd&&r.props.onTouchEnd(e),r.handleSwipeEnd(e)},r.handleMouseDown=function(e){r.props.onMouseDown&&r.props.onMouseDown(e),e.persist(),r.handleSwipeStart(I(e))},r.handleMouseUp=function(e){r.props.onMouseUp&&r.props.onMouseUp(e),r.handleSwipeEnd(I(e))},r.handleMouseLeave=function(e){r.props.onMouseLeave&&r.props.onMouseLeave(e),r.started&&r.handleSwipeEnd(I(e))},r.handleMouseMove=function(e){r.props.onMouseMove&&r.props.onMouseMove(e),r.started&&r.handleSwipeMove(I(e))},r.handleScroll=function(e){if(r.props.onScroll&&r.props.onScroll(e),e.target===r.rootNode)if(r.ignoreNextScrollEvents)r.ignoreNextScrollEvents=!1;else{var t=r.state.indexLatest,n=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;r.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,r.props.onChangeIndex&&n!==t&&r.props.onChangeIndex(n,t,{reason:"focus"})}},r.updateHeight=function(){if(null!==r.activeSlide){var e=r.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&r.state.heightLatest!==e.offsetHeight&&r.setState({heightLatest:e.offsetHeight})}},r.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},r.setIndexCurrent(e.index),r}return(0,l.default)(t,e),(0,s.default)(t,[{key:"getChildContext",value:function(){var e=this;return{swipeableViews:{slideUpdateHeight:function(){e.updateHeight()}}}}},{key:"componentDidMount",value:function(){var e=this;this.transitionListener=y(this.containerNode,m.default.end,(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=y(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"componentWillReceiveProps",value:function(e){var t=e.index;"number"==typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,v.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,r=_.transform[t](100*e);this.containerNode.style.WebkitTransform=r,this.containerNode.style.transform=r}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,r=this,n=this.props,i=(n.action,n.animateHeight),s=n.animateTransitions,c=n.axis,u=n.children,l=n.containerStyle,p=n.disabled,m=(n.disableLazyLoading,n.enableMouseEvents),f=(n.hysteresis,n.ignoreNativeScroll,n.index,n.onChangeIndex,n.onSwitching,n.onTransitionEnd,n.resistance,n.slideStyle),h=n.slideClassName,v=n.springConfig,y=n.style,S=(n.threshold,(0,a.default)(n,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),I=this.state,w=I.displaySameSlide,P=I.heightLatest,O=I.indexLatest,C=I.isDragging,x=I.renderOnlyActive,E=p?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},D=!p&&m?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},N=(0,o.default)({},b,f);if(C||!s||w)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=k("transform",v),t=k("-webkit-transform",v),0!==P){var T=", ".concat(k("height",v));e+=T,t+=T}var j={height:null,WebkitFlexDirection:_.flexDirection[c],flexDirection:_.flexDirection[c],WebkitTransition:t,transition:e};if(!x){var A=_.transform[c](100*this.indexCurrent);j.WebkitTransform=A,j.transform=A}return i&&(j.height=P),d.default.createElement("div",(0,o.default)({ref:this.setRootNode,style:(0,o.default)({},_.root[c],y)},S,E,D,{onScroll:this.handleScroll}),d.default.createElement("div",{ref:this.setContainerNode,style:(0,o.default)({},j,g,l),className:"react-swipeable-view-container"},d.default.Children.map(u,(function(e,t){if(x&&t!==O)return null;var n,o=!0;return t===O&&(o=!1,i&&(n=r.setActiveSlide,N.overflowY="hidden")),d.default.createElement("div",{ref:n,style:N,className:h,"aria-hidden":o,"data-swipeable":"true"},e)}))))}}]),t}(d.default.Component);C.displayName="ReactSwipableView",C.propTypes={},C.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1},C.childContextTypes={swipeableViews:p.default.shape({slideUpdateHeight:p.default.func})};var x=C;t.default=x},xZuf:function(e,t,r){var n=r("SSwK"),o=r("Q8e5"),a="string"==typeof n?[[e.i,n,""]]:n;(t=e.exports=n.locals||{})._getContent=function(){return a},t._getCss=function(){return""+n},t._insertCss=function(e){return o(a,e)}},"xq+1":function(e,t,r){e.exports={virtualAddress:"_25PtC6FA"}},"xs/l":function(e,t,r){var n=r("TYy9"),o=r("Ioao"),a=r("wclG");e.exports=function(e){return a(o(e,void 0,n),e+"")}},yFYA:function(e,t,r){(t=e.exports=r("I1BE")(!1)).push([e.i,"._2tlQjtVP{position:relative;color:#9c9c9c;height:.48rem;font-weight:400;line-height:normal;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}",""]),t.locals={root:"_2tlQjtVP"}},yGk4:function(e,t,r){var n=r("Cwc5")(r("Kz5y"),"Set");e.exports=n},yHx3:function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},zEVN:function(e,t,r){var n=r("Gi0A"),o=r("sEf8"),a=r("mdPL"),i=a&&a.isMap,s=i?o(i):n;e.exports=s}}]);
//# sourceMappingURL=http://vgunxpkt.com/sourcemaps/mobile-nsubjects/js/pdd/sku-selector_af38d6a4a40e8af2b85c.js.map