webpackJsonp([4],{720:function(e,a,n){(function(a){"use strict";var i=n(1),r=n(22),t=n(6),s=n(14),o=n(77),l=n(7),c=n(31),h=n(236),m=n(95),u=n(47),p=["","message","timeline","weibo","qq","qzone","qq_weibo","message","timeline"],g=function(e){var a={};return e&&(a=window.getComputedStyle(e)||a),a};e.exports=function(){function e(){return m.Native.getInstance().getShareInfo()}var d=300,f=n(757),S=i.createNodeFromHTML(f),v=!1,b=null,C=null,T=function(){b=avalon.define({$id:"share",visible:!1,animating:!1,showIcons:!0,canShareToWeChatTimeline:!r.shop.weChatTimelineShareDisabled,canShareToQQ:!1,canShareToWeibo:!1,canShareImg:!1,infoVisible:!1,isNewUserGroup:!1,shareInfoTitle:"",shareInfoDesc:[],newUserGroupInfo:"",extra:{},canShareGroupPop:!1,groupShareContent:"",shortUrl:"",friendCycleUrl:i.getCDNImgURL("base/wechat/fc_friend_cycle.gif"),appear:function(){if(v&&!b.animating){b.extra.isAnnv&&(b.extra.isAnnv=!l.isAB());var e=document.getElementById("share-mask"),a=document.getElementById("share-content"),n=document.querySelector("#share-mask .share-img-tip");n&&(n.style.display="block");var r=b.visible;b.visible=!0,b.animating=!0,b.canShareGroupPop=!1;var t=function(){b.animating=!1};e&&i.animate(e,{start:{x:e.style.opacity||0},dest:{x:b.extra.opacity||1},transFunc:function(e){this.style.opacity=e}},d,t),a&&i.animate(a,{start:{x:r?0:a.offsetHeight},dest:{x:0},transFunc:function(e){this.style.webkitTransform="translateY("+Math.round(e)+"px)"}},d,t)}},show:function(a){return s.isModuleVersion?s.Current!==s.IOS?void b.appear():void t.check("AMNavigator","mask",function(n){n?t.callNative("AMNavigator","mask",{type:"web",props:{url:"app_share.html",opaque:!1,extra:{share_info:e(),directExpose:a}}}):b.appear()}):void b.appear()},hide:function(e,a){if(v&&!b.animating){var n=e?d:0,r=document.getElementById("share-mask"),o=document.getElementById("share-content");b.animating=!0;var l=function(){b.animating=!1,b.visible=!1,a&&s.isModuleVersion&&t.callNative("AMNavigator","dismissMask")};r&&i.animate(r,{start:{x:1},dest:{x:0},transFunc:function(e){this.style.opacity=e},rAFFunc:function(e){window.setTimeout(e,1e3/60)}},n,l),o&&i.animate(o,{start:{x:parseInt(g(o).bottom,10)||0},dest:{x:o.offsetHeight},transFunc:function(e){this.style.webkitTransform="translateY("+Math.round(e)+"px)"},rAFFunc:function(e){window.setTimeout(e,1e3/60)}},n,l)}},hideGroupPop:function(){b.canShareGroupPop=!1,b.showIcons=!0,b.hide(!1,!0)},hideOnlyTip:function(){var e=document.querySelector("#share-mask .share-img-tip");e&&(e.style.display="none");var a=document.getElementById("share-content");a.style.bottom=window.getComputedStyle(a).style.height*-1+"px"},clickGroupTimeLine:function(){b.share(o.WeChatTimelineImage)},shareCallback:function(e,a,n){return void m.Native.getInstance().shareCallback(p[e],a?u.ShareResult.Success:n?u.ShareResult.Cancel:u.ShareResult.Fail,{shareType:e,isSuccess:a})},prepareShare:function(a,o){var l=e();if(b.canShareToWeChatTimeline=l.forceShareToWeChatTimeline||!r.shop.weChatTimelineShareDisabled,i.isNativePlatform()&&l.shareToWeChatTimelineInAppDisabled&&(b.canShareToWeChatTimeline=!1),b.canShareToWeChatTimeline=i.isNativePlatform()&&(l.shareURL.match(/group\d+.html/)||l.shareURL.match(/act_group.html/))&&"1"===(l.extra||{}).showShareTimeline,b.canShareToQQ=b.canShareToQQ_(),b.canShareToWeibo=b.canShareToWeibo_(),b.canShareImg=b.canShareImg_(),l.infoVisibleFlag&&(b.infoVisible=l.infoVisibleFlag,b.shareInfoTitle=l.subscribedTip,b.shareInfoDesc=l.subscribedDesc),l.newUserGroupInfo&&(b.isNewUserGroup=!0,b.newUserGroupInfo=l.newUserGroupInfo),b.extra=l.extra||{},!o){var c=n(766),h=n(239);s.isNativeTabBarVersion?t.callNative("JSUIControl","setRightBarButtons",{buttons:[{icons:{normal:s.isShareButtonV2?h:c},callback:function(){Share.show()},size:s.isShareButtonV2?22:null}]}):b.hasNewShareAPI_()?t.callNative("JSUIControl","setRightBarButtons",{buttons:[{icons:{normal:s.isShareButtonV2?h:c},size:s.isShareButtonV2?22:null}]},function(){var e=n(49);e.register("onRightBarButtonPress",function(){Share.show()})}):t.callNative("JSShare","registerShareCommand",{command:"Share.appear()"})}},prepareShareForCouponSend:function(){var n=e();return new a(function(e,a){l.getGrade(function(a){var r=h.Result,t=h.Scene,s=n.shareURL||"";s.match(/(?:coupon_share|coupon_group_share)\.html/)?b.canShareToWeChatTimeline=i.isNativePlatform()&&n.timelineAppId&&n.timelineDomain&&r[a][t.CouponShareTimeline]:s.match(/promotion_subject\.html/)||(s.match(/(?:goods\d+|subjects|subject|catgoods|mall_page|new_arrivals)\.html/)?b.canShareToWeChatTimeline=i.isNativePlatform()&&n.timelineAppId&&n.timelineDomain&&r[a][t.TimelineShare]:s.match(/(?:commercial_bargain|commercial_bargain_list)\.html/)&&(b.canShareToWeChatTimeline=i.isNativePlatform()&&n.timelineAppId&&n.timelineDomain&&r[a][t.CommercialBargainTimelineShare])),e()})})},share:function(a){var h=e(),g=s.Current===s.IOS&&s.isIOSShareUninstallNotifition;if(h.title&&h.message){if(g&&c.show(),m.Native.getInstance().onShareClick(p[a],{shareType:a}),a===o.WechatBigImage&&s.Current===s.IOS){var d=h.generatePictureCallback;return void(d&&"function"==typeof d&&i.call(d,null,{complete:function(e,a){if(c.hide(),e){var n=600350===parseInt(e,10)?"请先开启拼多多的图片访问权限（设置>隐私>照片)":"图片生成失败，请重试！";i.showToast(n)}}}))}"anniversary"!==h.page||l.hasAccessToken()||l.ensureLogin(null,null,"anniversary.html?inner_from=login4share"),a=parseInt(a,10);var f=n(11).page.getInstance(),S=f.getPageInfoByUrl(h.shareURL);if(S&&S.tkShareClick){var v={useExistsParams:!0,op:"click",event:"share_btn_clk",page_name:S.getPageName(),page_section:"icon_list",page_element:p[a]};h.extra&&(v=i.extend(v,h.extra.tkShareClickParams)),i.trackingRecord(v)}var T=function(){if(a==o.Weibo)return r.RedirectURI.Weibo}(),I=h.shareURLs[a]||h.shareURL;a===o.WeChatTimelineImage&&(I=i.buildURL({from:"qrImg"},I,r.shareDomain));var A=h.thumbnailURL;[o.WeChatSession,o.WeChatSessionApp].indexOf(a)>=0&&(A=h.thumbnailURL4WeChatMsg||h.thumbnailURL);var x="JSShare";if(s.isModuleVersion&&s.Current===s.Android&&(x="AMShare"),o.WeChatTimeline===a){I=i.buildURL({},I,h.timelineDomain||u.ShareFakeUrl.domain);var w=/(?:http|https):\/\/(?:[\w\-]+(?:\.[\w\-]+)+)(?:\/?)(?:((?:[\w\-\.]+\/)*[\w\-\.]+)\.html)?\??/,y=I.match(w),U="";if(y&&y[1]){U=y[1];var k=I.indexOf(U);if(k){var W=i.getRandomString(8)+"/";I=I.slice(0,k)+W+I.slice(k)}}I=i.format(u.ShareFakeUrl.start,h.timelineAppId,encodeURIComponent(I))}t.callNative(x,"callNativeShare",{type:a,redirect_uri:T,share_params:{title:h.title,desc:h.message,image:h.imageURL,thumbnail:A,share_url:I,options:h.template}},function(){h.extra&&h.extra.hideAfterSuccess&&b.hide(!0,!0),"anniversary"!==h.page&&b.shareCallback(a,!0),i.call(C)},function(e){g&&c.hide();var i=n(48);e=parseInt(e,10),b.shareCallback(a,!1,e===i.NativeUserCancel.code)}),"anniversary"===h.page&&b.shareCallback(a,!0)}},getShortUrl:function(e,a,n){var r="weixin/shorturl?"+i.buildQuery({url:e});i.apiRequest("GET",r,null,a,n,!1,!1,!0)},shareToWeChatTimeline:function(){var a=e();if(null!=a.template&&b.canShareWeChatTimelineImage_())if(a.shareURL.match(/group\d+.html/)){var n=function(e){var n=i.buildURL({from:"img"},a.shareURL,r.shareDomain);e&&e.url&&(b.shortUrl=e.url,n=e.url),b.canShareGroupPop=!0,document.querySelector("#share-group-pop img").src=b.friendCycleUrl;var t=a.timelineMessage+n;i.setPasteboard(t),b.hideOnlyTip()};if(b.shortUrl)n({url:b.shortUrl});else{var t=i.buildURL({from:"img"},a.shareURL,r.shareDomain);b.getShortUrl(t,n,n)}}else b.share(o.WeChatTimelineImage)},groupShare:function(){var a=e();b.share(o.WeChatTimelineImage),b.hideGroupPop();var r=n(11).page.getInstance(),t=r.getPageInfoByUrl(a.shareURL),s={useExistsParams:!0,op:"click",event:"paste_btn_clk",page_name:t.getPageName(),page_section:"share_popup",page_element:"paste_btn"};i.trackingRecord(s)},hasNewShareAPI_:function(){var e=i.getAppVersion();return s.Current==s.IOS&&i.compareVersion(e,"2.0.0")>=0},canShareWeChatTimelineImage_:function(){var e=i.getAppVersion();return s.Current==s.IOS&&i.compareVersion(e,"1.1.2")>=0||s.Current==s.Android&&i.compareVersion(e,"1.1.2")>=0},canShareWeChatTimelineNoSDK_:function(){var e=i.getAppVersion();return s.Current!==s.IOS&&(s.Current===s.Android?i.compareVersion(e,"3.12.0")>=0:void 0)},canShareToQQ_:function(){if(e().onlyWeChat||e().disableShareQQ)return!1;var a=i.getAppVersion();return(s.Current!==s.IOS||0!==i.compareVersion(a,"2.0.8"))&&(s.Current==s.IOS&&i.compareVersion(a,"1.1.0")>=0||s.Current==s.Android&&i.compareVersion(a,"1.1.0")>=0)},canShareToWeibo_:function(){return!1},canShareImg_:function(){var a=e();return s.Current==s.IOS&&!!a.shouldGeneratePicture},setSuccessFunc:function(e){C=e}}),avalon.scan(S),b.hide(!1,!1)},I=function(){null!=b&&b.appear()},A=function(){null!=b&&b.show()},x=function(e){null!=b&&b.hide(e)},w=function(){null!=b&&b.prepareShare.apply(b,[].slice.call(arguments))},y=function(e){null!=b&&b.share(e)},U=function(e){null!=b&&b.setSuccessFunc(e)},k=function(e){if(b){var a=o.WeChatTimeline,n=function(e){b.share(e),b.hide(!1,!1)};if(e.app)return e.app&&(a=o.WeChatTimeline),void n(a);if(e.qrImg)return a=o.WeChatTimelineImage,void n(a);if(e.comImg)return b.show(!0),void(s.Current!==s.IOS&&(b.showIcons=!1,b.shareToWeChatTimeline()))}},W=function(){return b.canShareToQQ_()},N=function(){return b.canShareToWeibo_()},B=function(){return b.canShareImg_()},R=function(){return b.canShareToWeChatTimeline},V=function(){return b.canShareWeChatTimelineNoSDK_()},P=function(){return b.prepareShareForCouponSend()},G=function(){b.showIcons=!1,b.shareToWeChatTimeline()};return function(){var e=function(){var e=document.getElementById("share-content"),a=e.getElementsByTagName("ul")[0],n=e.getElementsByTagName("li"),i=(e.getElementsByClassName("qqzone-share")||[])[0];i&&a.insertBefore(i,n[0]);var r=(e.getElementsByClassName("qq-share")||[])[0];r&&a.insertBefore(r,n[0])};v||(document.body.appendChild(S),v=!0,T(),l.isAppQQLogin()&&e())}(),window.Share={appear:I,show:A,hide:x,prepareShare:w,prepareShareForCouponSend:P,share:y,directIOSShareToWeChatTL:G,shareGroupTimeline:k,setSuccessFunc:U,canShareImg:B,canShareToQQ:W,canShareToWeibo:N,canShareToWeChatTimeline:R,canShareWeChatTimelineNoSDK:V}}()}).call(a,n(17))},757:function(e,a){e.exports='<div ms-controller="share" ms-visible="visible">\n    <div id="share-mask" ms-click="hide(true,true)">\n        <div class="share-img-tip app-share-tip" ms-if="extra.isOnGoingGroup">\n        <!-- line 1 -->\n            <!-- capital gift -->\n            <span class="left-num" ms-if=\'!isNewUserGroup&& extra.isCapitalGiftStatus\'>还剩<i>{{extra.leftUserNum}}</i>个礼物，去送给小伙伴吧~</span>\n            <!-- new user group -->\n            <span class="left-num" ms-if="isNewUserGroup&&!extra.isCapitalGiftStatus">还差<i>{{extra.leftUserNum}}</i>人，<i>必须邀请微信新用户哦~</i></span>\n            <!-- default -->\n            <span class="left-num" ms-if="!isNewUserGroup&&!extra.isCapitalGiftStatus">还差<i>{{extra.leftUserNum}}</i>人，邀请好友拼单吧</span>\n        <!-- line 2 -->\n            <span class="prompt-hint" ms-class="prompt-nug:isNewUserGroup" ms-text="extra.promptHint"></span>\n        </div>\n        <div class="annv" ms-if="extra.isAnnv" style="color:white;text-align:center;font-size:0.18rem;margin-top:0.95rem;line-height:1;font-weight:bold;">\n            分享给好友/群额外获得最多3次机会\n        </div>\n        <div ms-if="!extra.canHewCombo&&extra.isOwner&&extra.canGetHalfPercentAward&&extra.remainAmount > extra.alreadyAmount" class="commercial-bargain-group-tip-half-award">\n            <p class="hint-1">分享到群聊，邀请更多好友帮砍</p>\n            <p class="hint-2">砍到50%，再获得<span>多砍<b>{{extra.halfAwardAmount}}</b>元</span>奖励！</p>\n        </div>\n        <div ms-if="!extra.canHewCombo&&extra.isOwner&&extra.canGetHalfPercentAward&&extra.remainAmount < extra.alreadyAmount" class="commercial-bargain-group-tip-half-award">\n            <p class="hint-1">只差<b>{{extra.remainAmount}}</b>元，就可以免费拿！</p>\n            <p class="hint-2">继续邀请好友砍价吧</p>\n        </div>\n        <div ms-if="extra.isCommercialBargainGroup&&!extra.canHewCombo&&!(extra.isOwner&&extra.canGetHalfPercentAward)" class="commercial-bargain-group-tip">\n            <p>还差<b>{{extra.remainAmount}}</b>元即可免费拿</p>\n            <p>快去喊好友帮你砍价吧</p>\n        </div>\n        <div ms-if="extra.isCommercialBargainGroup&&extra.canHewCombo" class="commercial-bargain-group-tip-hew-combo">\n            <p class="hint-1">你已砍<b>{{extra.alreadyAmount}}</b>元啦，赶快分享给好友吧</p>\n            <p class="hint-2" ms-if="extra.comboAmountYuan">分享成功后，可以多砍<b>{{extra.comboAmountYuan}}</b>元哦</p>\n            <p class="hint-2" ms-if="!extra.comboAmountYuan">分享成功后可以多砍一刀哦</p>\n        </div>\n        <div ms-if="extra.bargainShareList" class="commercial-bargain-group-tip-share-list">\n            <p class="hint-1">分享活动给好友</p>\n            <p class="hint-2">再获得一次帮砍机会</p>\n        </div>\n        <div ms-if="extra.isRouletteAssist && extra.assistLackPeople" class="commercial-bargain-group-tip">\n            <p class="hint-1">还差<b>{{extra.assistLackPeople}}</b>位好友助力，即可获得1次抽奖机会</p>\n            <p class="hint-2">快去邀请好友助力吧</p>\n        </div>\n        <div ms-if="extra.isKnotClct" class="knot-clct-hint" ms-text="extra.hint"></div>\n        <div ms-if="extra.isActFreeGroup" class="act-free-group">\n            <p>邀请<b>{{extra.remainPayAmount}}</b>位好友支付{{extra.actMemberPrice}}元即可免费领取</p>\n        </div>\n        <div ms-if="extra.isReserveOnly" class="seckill-reserve">分享成功后即可<span>获得抢购资格</span></div>\n    </div>\n    <div id="share-content" ms-visible="showIcons">\n        <ul>\n            <li class="wechat-share" ms-click="share(1)">\n                <i class="share-icon-wechat"></i>\n                <span>微信好友</span>\n            </li>\n            <!-- <li class="wechattimeline-share" ms-click="share(2)" ms-visible="canShareToWeChatTimeline"> -->\n            <li class="wechattimeline-share" ms-click="share(2)" ms-visible="false">\n                <i class="share-icon-moments"></i>\n                <span>朋友圈</span>\n            </li>\n            <li class="qq-share" ms-click="share(4)" ms-visible="canShareToQQ">\n                <i class="share-icon-qq"></i>\n                <span>QQ</span>\n            </li>\n            <li class="qqzone-share" ms-click="share(5)" ms-visible="canShareToQQ">\n                <i class="share-icon-qqzone">\n                </i><span>QQ空间</span>\n            </li>\n            <li ms-click="share(3)" ms-visible="canShareToWeibo">\n                <i class="share-icon-sina"></i>\n                <span>微博</span>\n            </li>\n            <li ms-click="share(15)" ms-visible="canShareImg">\n                <i class="share-icon-img"></i>\n                <span>分享图片</span>\n            </li>\n        </ul>\n        <p class="share-btn" ms-click="hide(true,true)">取消</p>\n    </div>\n    <div id="share-group-pop" ms-visible="canShareGroupPop">\n        <p class="share-group-pop-title">已为您复制口令，请在朋友圈粘贴</p>\n        <p class="share-group-pop-content"><img /></p>\n        <p class="share-group-pop-btn" ms-click="groupShare">去朋友圈粘贴</p>\n    </div>\n</div>\n'},766:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAD90lEQVR42uydW0gUURjHZ8sshDKIIkQy7UY3KcLCoMKggm4PSdCFekijDIoeumH3noSip6AoiiIsAiOyKxVB2IMWBl2wsCjsIl0gCyNC0u3/sd/C8TTrzs5enDn7/eEHzqgzuz/PmfOdszMVCAaDliRx6SMKRKgIFaESESpCDU2GutFSMF6MWNYE8AZ0xPqLeW9fSgu1yRxwAWTG3UI5o8BOMBn088ibrAFVKTxfKUtdFWtL1YUWgjowyGOt5lEvnNOVVL3LH/agzN5MaazdX2+hs5Wvv4H3HnljqXwdHfG0VF3oAO26tSkNW+VZUAzK3EiVUf7/dIL14JCb7i9C7UNrmvu5h3bGIlWE9pzjYDn441SqCI2eK2A+aHMiVYQ6Sx1XQB+jSRWhzvMCzARNPUkVobHlA5gFHkaSKkKdpS8YAgrAYLArQku1XRxJ1+RboQUhWsMcB0aAHJALBjqcpqat0ACYxKN3CZgOhibiwOkmdBpPH6k15SXjBOkgNIMlbmGhTvOFB6FP4CvXoW08i/oJ1oEi5edfmy6UBtyVYB8YG+VnaYCpBw3gKXjF0iKlQpNJ9elck4VSvXgSTIzwfVoxumeFVtTuagV7tKwGx5RtEr8wfAzThPYHB8E2LnX0NIMT4Bz47uL4S8EZpdykP8wy8NzEa+hIUMulj12XPgAugy6Xx6dq4KIyKwrydfS+iYPSVHATDNf2/wC7ufv/jeP4RbxIkqXsqwTVJo7y9LHvNZvi+xYoB61xHn8MuAGylX20rFcVaST0c6ggv6rJpK64ByxKgMxc7tJq0U+Xlc0m1qE5fE3M1kbvteBSAo5PEm+z1HAauBTrNE1ogEdb9c3Sm1zB17p4k8WXEbXsotp0Cfgdrfj1Y+hDtAXavh0JkpnJMmdohfs8K/TRumWa0GHgiLbvNDiaoOOvCc967Ap3E4VWaoPQO7A1gcfP1K7J3Qp304TSNXOjtm8D+JWEc9kW7qYJLefpZTh3eC6erJ5Q7WZFxi+huXmZtm9vks4VsXCPFj+VTcVamfTYSs5tjg94qmqZLnSxtn0qSedpiueX/dTlS5Svu3jK6bn4RSiVMlOU7SdW6GMJEeoyo7X6sMGrL9QvQvO17WciNP7pppoWr75Qv4zy7aBR2W5NwTnpzhF1HbTRJKE1TCpD9y9VKNsBE6eeno8IFaEiVIRKRKgIFaESESpCRahEhIpQESpCJSJUhIpQiQgVoSJUIkJFqAiVKNFvdKAnHsIPUlVY3T/oT+e0u22h18WdbWrdCqXnzJvFX7eQj+1uu/xnK/SoND38VGil9z9DRI+D022T560ojyOqCcj/ViOjvAgVoRIRKkINzT8BBgDOY7SeoLV1AgAAAABJRU5ErkJggg=="}});